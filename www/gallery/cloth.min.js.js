(function e$$0(k,p,d){function b(c,e){if(!p[c]){if(!k[c]){var n="function"==typeof require&&require;if(!e&&n)return n(c,!0);if(a)return a(c,!0);n=Error("Cannot find module '"+c+"'");throw n.code="MODULE_NOT_FOUND",n;}n=p[c]={exports:{}};k[c][0].call(n.exports,function(a){var e=k[c][1][a];return b(e?e:a)},n,n.exports,e$$0,k,p,d)}return p[c].exports}for(var a="function"==typeof require&&require,c=0;c<d.length;c++)b(d[c]);return b})({1:[function(f,k,p){function d(a,c){this.i0=a;this.i1=c;this.restLength=
h.distance(g[a],g[c])}k=document.body.appendChild(document.createElement("canvas"));p=f("canvas-fit");var b=f("../regl")(k),a=f("gl-mat4"),c=f("canvas-orbit-camera")(k);window.addEventListener("resize",p(k),!1);var h=f("gl-vec3");c.view(a.lookAt([],[0,3,30],[0,0,-5.5],[0,1,0]));c.rotate([0,0],[.471,0]);var e=[],n=[],g=[],l=[],q=[],m=[];for(k=0;20>=k;++k){var y=k/20*11+-5.5,r=k/20;for(p=0;20>=p;++p){var w=p/20*11+-5.5,x=p/20;g.push([w,0,y]);l.push([w,0,y]);e.push([x,r])}}for(var t=b.buffer({length:12*
g.length,type:"float",usage:"dynamic"}),u,z,v,y=0;y<g.length;++y)q.push([0,0,0]);var B=b.buffer({length:12*q.length,type:"float",usage:"dynamic"});for(k=0;19>=k;++k)for(p=0;19>=p;++p)y=21*k+p,u=y+0,z=y+1,v=y+21+0,y=y+21+1,n.push([y,z,u]),n.push([u,v,y]);for(k=0;20>=k;++k)for(p=0;20>=p;++p)y=21*k+p,u=y+0,z=y+1,v=y+21+0,y=y+21+1,20>p&&m.push(new d(u,z)),20>k&&m.push(new d(u,v)),20>p&&20>k&&m.push(new d(u,y));var C=b({cull:{enable:!1},context:{view:function(){return c.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D texture;\n\n  void main () {\n    vec3 tex = texture2D(texture, vUv*1.0).xyz;\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n\n    vec3 n = vNormal;\n\n    // for the back faces we need to use the opposite normals.\n    if(gl_FrontFacing == false) {\n      n = -n;\n    }\n\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position;\n  attribute vec3 normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:b.context("view"),projection:function(c){return a.perspective([],Math.PI/4,c.viewportWidth/c.viewportHeight,.01,1E3)},texture:b.prop("clothTexture")},attributes:{position:{buffer:t,
normalized:!0},uv:b.prop("uv"),normal:{buffer:B,normalized:!0}},elements:b.prop("elements")});f("resl")({manifest:{clothTexture:{type:"image",src:"assets/cloth.png",parser:function(a){return b.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:a,wrap:"repeat"})}}},onDone:function(a){var d=a.clothTexture;b.frame(function(a){var y=a.deltaTime;a=a.count;b.clear({color:[0,0,0,255],depth:1});var f=[],r=[],w=[0,-4,0],k=[Math.sin(a/2),Math.cos(a/3),Math.sin(a/1)];h.normalize(k,k);h.scale(k,
k,4.6);for(a=0;a<g.length;++a)h.subtract(f,g[a],l[a]),f=[f[0],f[1],f[2]],r=[g[a][0],g[a][1],g[a][2]],h.add(r,r,f),h.scaleAndAdd(r,r,w,y*y),h.scaleAndAdd(r,r,k,y*y),l[a]=[g[a][0],g[a][1],g[a][2]],g[a]=[r[0],r[1],r[2]];r=[];for(a=0;15>a;++a)for(w=0;w<m.length;w++){k=m[w];y=g[k.i0];f=g[k.i1];h.subtract(r,f,y);var x=h.length(r),k=(x-k.restLength)/x;h.scaleAndAdd(y,y,r,.5*k);h.scaleAndAdd(f,f,r,-.5*k)}for(a=0;20>=a;++a)g[a]=[l[a][0],l[a][1],l[a][2]];for(a=0;a<q.length;a++)q[a]=[0,0,0];for(a=0;a<n.length;a++)u=
n[a][0],z=n[a][1],v=n[a][2],r=g[u],f=g[z],w=g[v],y=[0,0,0],h.subtract(y,r,f),f=[0,0,0],h.subtract(f,r,w),r=[0,0,0],h.cross(r,y,f),h.normalize(r,r),h.add(q[u],q[u],r),h.add(q[z],q[z],r),h.add(q[v],q[v],r);for(a=0;a<q.length;a++)h.normalize(q[a],q[a]);t.subdata(g);B.subdata(q);C({elements:n,uv:e,clothTexture:d});c.tick()})}})},{"../regl":109,"canvas-fit":30,"canvas-orbit-camera":31,"gl-mat4":43,"gl-vec3":79,resl:110}],2:[function(f,k,p){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}k.exports=function(b,a,c,h,e){b=c.maxAttributes;a=Array(b);for(c=0;c<b;++c)a[c]=new d;return{Record:d,scope:{},state:a}}},{}],3:[function(f,k,p){function d(a){return l[Object.prototype.toString.call(a)]|0}function b(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function a(a,c,b,h,e,d,n){for(var g=0,l=0;l<b;++l)for(var q=0;q<h;++q)a[g++]=c[e*l+d*q+n]}function c(a,c,b){for(var h=0,e=0;e<c.length;++e)for(var d=c[e],
n=0;n<b;++n)a[h++]=d[n]}var h=f("./util/is-typed-array"),e=f("./util/is-ndarray"),n=f("./util/values"),g=f("./util/pool"),l=f("./constants/arraytypes.json"),q=f("./constants/dtypes.json"),m=f("./constants/usage.json");k.exports=function(l){function f(a){this.id=u++;this.buffer=l.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function k(a,c,b){a.byteLength=c.byteLength;l.bufferData(a.type,c,b)}function x(n,l,q,m,y){n.usage=q;if(Array.isArray(l))n.dtype=
m||5126,0<l.length&&(Array.isArray(l[0])?(n.dimension=l[0].length,m=g.allocType(n.dtype,l.length*n.dimension),c(m,l,n.dimension),k(n,m,q),g.freeType(m)):"number"===typeof l[0]?(n.dimension=y,m=g.allocType(n.dtype,l.length),b(m,l),k(n,m,q),g.freeType(m)):h(l[0])&&(n.dimension=l[0].length,n.dtype=m||d(l[0])||5126,m=g.allocType(n.dtype,l.length*n.dimension),c(m,l,n.dimension),k(n,m,q),g.freeType(m)));else if(h(l))n.dtype=m||d(l),n.dimension=y,k(n,l,q);else if(e(l)){var f=l.shape,r=l.stride;y=l.offset;
var t=0,u=0,x=0,z=0;1===f.length?(t=f[0],u=1,x=r[0],z=0):2===f.length&&(t=f[0],u=f[1],x=r[0],z=r[1]);n.dtype=m||d(l.data)||5126;n.dimension=u;m=g.allocType(n.dtype,t*u);a(m,l.data,t,u,x,z,y);k(n,m,q);g.freeType(m)}}function t(a){var c=a.buffer;l.isBuffer(c)&&l.deleteBuffer(c);a.buffer=null;delete z[a.id]}var u=0,z={};f.prototype.bind=function(){l.bindBuffer(this.type,this.buffer)};var v=[];return{create:function(n,k,w){function u(a){var c=35044,b=null,d=0,n=0,g=1;Array.isArray(a)||h(a)||e(a)?b=a:
"number"===typeof a?d=a|0:a&&("data"in a&&(b=a.data),"usage"in a&&(c=m[a.usage]),"type"in a&&(n=q[a.type]),"dimension"in a&&(g=a.dimension|0),"length"in a&&(d=a.length|0));v.bind();b?x(v,b,c,n,g):(l.bufferData(v.type,d,c),v.dtype=n||5121,v.usage=c,v.dimension=g,v.byteLength=d);return u}var v=new f(k);z[v.id]=v;w||u(n);u._reglType="buffer";u._buffer=v;u.subdata=function(n,q){var m=(q||0)|0;v.bind();if(Array.isArray(n)){if(0<n.length)if("number"===typeof n[0]){var f=g.allocType(v.dtype,n.length);b(f,
n);l.bufferSubData(v.type,m,f);g.freeType(f)}else if(Array.isArray(n[0])||h(n[0])){var f=n[0].length,r=g.allocType(v.dtype,n.length*f);c(r,n,f);l.bufferSubData(v.type,m,r);g.freeType(r)}}else if(h(n))l.bufferSubData(v.type,m,n);else if(e(n)){var k=n.shape,w=n.stride,t=r=f=0,x=0;1===k.length?(f=k[0],r=1,t=w[0],x=0):2===k.length&&(f=k[0],r=k[1],t=w[0],x=w[1]);k=Array.isArray(n.data)?v.dtype:d(n.data);k=g.allocType(k,f*r);a(k,n.data,f,r,t,x,n.offset);l.bufferSubData(v.type,m,k);g.freeType(k)}return u};
u.destroy=function(){t(v)};return u},createStream:function(a,c){var b=v.pop();b||(b=new f(a),b.buffer=l.createBuffer());b.bind();x(b,c,35040,0,1);return b},destroyStream:function(a){v.push(a)},clear:function(){n(z).forEach(t)},getBuffer:function(a){return a&&a._buffer instanceof f?a._buffer:null},_initBuffer:x}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/values":28}],4:[function(f,
k,p){k.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(f,k,p){k.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(f,k,p){k.exports={points:0,point:0,lines:1,line:1,"line loop":2,
"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(f,k,p){k.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(f,k,p){function d(a){return Array.isArray(a)||l(a)||q(a)}function b(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function a(a,c,b,h){this.thisDep=a;this.contextDep=c;this.propDep=b;this.append=h}function c(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function h(c){return new a(!1,!1,!1,
c)}function e(c,b){var h=c.type;return 0===h?(h=c.data.length,new a(!0,1<=h,2<=h,b)):new a(3===h,2===h,1===h,b)}var n=f("./util/codegen"),g=f("./util/loop"),l=f("./util/is-typed-array"),q=f("./util/is-ndarray"),m=f("./constants/primitives.json"),y=f("./constants/dtypes.json"),r=["x","y","z","w"],w={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},x={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},u={cw:2304,ccw:2305},z=new a(!1,!1,!1,function(){});k.exports=function(q,f,k,p,D,E,F,I,H,
K,M,O,J){function L(a){return a.replace(".","_")}function G(a,c,b){var h=L(a);ra.push(a);pa[h]=W[h]=!!b;ca[h]=c}function N(a,c,b){var h=L(a);ra.push(a);Array.isArray(b)?(W[h]=b.slice(),pa[h]=b.slice()):W[h]=pa[h]=b;da[h]=c}function T(){var a=n(),c=a.link,b=a.global;a.id=ya++;a.batchId="0";var h=c(xa),e=a.shared={props:"a0"};Object.keys(xa).forEach(function(a){e[a]=b.def(h,".",a)});var d=a.next={},g=a.current={};Object.keys(da).forEach(function(a){Array.isArray(W[a])&&(d[a]=b.def(e.next,".",a),g[a]=
b.def(e.current,".",a))});var l=a.constants={};Object.keys(sa).forEach(function(a){l[a]=b.def(JSON.stringify(sa[a]))});a.invoke=function(b,h){switch(h.type){case 0:var d=["this",e.context,e.props,a.batchId];return b.def(c(h.data),".call(",d.slice(0,Math.max(h.data.length+1,4)),")");case 1:return b.def(e.props,h.data);case 2:return b.def(e.context,h.data);case 3:return b.def("this",h.data)}};a.attribCache={};var q={};a.scopeAttrib=function(a){a=f.id(a);if(a in q)return q[a];var b=K.scope[a];b||(b=
K.scope[a]=new ia);return q[a]=c(b)};return a}function R(a){var c=a["static"];a=a.dynamic;if("framebuffer"in c){var b=c.framebuffer;return b?(b=I.getFramebuffer(b),h(function(a,c){var h=a.link(b),e=a.shared;c.set(e.framebuffer,".next",h);e=e.context;c.set(e,".framebufferWidth",h+".width");c.set(e,".framebufferHeight",h+".height");return h})):h(function(a,c){var b=a.shared;c.set(b.framebuffer,".next","null");b=b.context;c.set(b,".framebufferWidth",b+".drawingBufferWidth");c.set(b,".framebufferHeight",
b+".drawingBufferHeight");return null})}if("framebuffer"in a){var d=a.framebuffer;return e(d,function(a,c){var b=a.invoke(c,d),h=a.shared,e=h.framebuffer,b=c.def(e,".getFramebuffer(",b,")");c.set(e,".next",b);h=h.context;c.set(h,".framebufferWidth",b+"?"+b+".width:"+h+".drawingBufferWidth");c.set(h,".framebufferHeight",b+"?"+b+".height:"+h+".drawingBufferHeight");return b})}return null}function ea(c,b){function h(c){if(c in d){var g=d[c];c=!0;var l=g.x|0,q=g.y|0,m,y;"w"in g?m=g.w|0:c=!1;"h"in g?y=
g.h|0:c=!1;return new a(c&&b&&b.thisDep,c&&b&&b.contextDep,c&&b&&b.propDep,function(a,c){var b=a.shared.context,h=m;"w"in g||(h=c.def(b,".","framebufferWidth","-",l));var e=y;"h"in g||(e=c.def(b,".","framebufferHeight","-",q));return[l,q,h,e]})}if(c in n){var f=n[c];c=e(f,function(a,c){var b=a.invoke(c,f),h=a.shared.context,e=c.def(b,".x|0"),d=c.def(b,".y|0"),n=c.def('"w" in ',b,"?",b,".w|0:","(",h,".","framebufferWidth","-",e,")"),b=c.def('"h" in ',b,"?",b,".h|0:","(",h,".","framebufferHeight","-",
d,")");return[e,d,n,b]});b&&(c.thisDep=c.thisDep||b.thisDep,c.contextDep=c.contextDep||b.contextDep,c.propDep=c.propDep||b.prpoDep);return c}return b?new a(b.thisDep,b.contextDep,b.propDep,function(a,c){var b=a.shared.context;return[0,0,c.def(b,".","framebufferWidth"),c.def(b,".","framebufferHeight")]}):null}var d=c["static"],n=c.dynamic,g=h("viewport");if(g)var l=g,g=new a(g.thisDep,g.contextDep,g.propDep,function(a,c){var b=l.append(a,c),h=a.shared.context;c.set(h,".viewportWidth",b[2]);c.set(h,
".viewportHeight",b[3]);return b});return{viewport:g,scissor_box:h("scissor.box")}}function fa(b){function d(a){if(a in n){var c=f.id(n[a]);a=h(function(){return c});a.id=c;return a}if(a in g){var b=g[a];return e(b,function(a,c){var h=a.invoke(c,b);return c.def(a.shared.strings,".id(",h,")")})}return null}var n=b["static"],g=b.dynamic,l=d("frag"),q=d("vert"),m=null;c(l)&&c(q)?(m=M.program(q.id,l.id),b=h(function(a,c){return a.link(m)})):b=new a(l&&l.thisDep||q&&q.thisDep,l&&l.contextDep||q&&q.contextDep,
l&&l.propDep||q&&q.propDep,function(a,c){var b=a.shared.shader,h;h=l?l.append(a,c):c.def(b,".","frag");var e;e=q?q.append(a,c):c.def(b,".","vert");return c.def(b+".program("+e+","+h+")")});return{frag:l,vert:q,progVar:b,program:m}}function la(b){function n(a,c){if(a in g){var b=g[a]|0;return h(function(a,h){c&&(a.OFFSET=b);return b})}if(a in l){var d=l[a];return e(d,function(a,b){var h=a.invoke(b,d);c&&(a.OFFSET=h);return h})}return c&&q?h(function(a,c){a.OFFSET="0";return 0}):null}var g=b["static"],
l=b.dynamic,q=function(){if("elements"in g){var a=g.elements;d(a)?a=E.getElements(E.create(a)):a&&(a=E.getElements(a));var c=h(function(c,b){if(a){var h=c.link(a);return c.ELEMENTS=h}return c.ELEMENTS=null});c.value=a;return c}if("elements"in l){var b=l.elements;return e(b,function(a,c){var h=a.shared,e=h.isBufferArgs,h=h.elements,d=a.invoke(c,b),n=c.def("null"),e=c.def(e,"(",d,")"),d=a.cond(e).then(n,"=",h,".createStream(",d,");")["else"](n,"=",h,".getElements(",d,");");c.entry(d);c.exit(a.cond(e).then(h,
".destroyStream(",n,");"));return a.ELEMENTS=n})}return null}(),y=n("offset",!0);return{elements:q,primitive:function(){if("primitive"in g){var b=g.primitive;return h(function(a,c){return m[b]})}if("primitive"in l){var d=l.primitive;return e(d,function(a,c){var b=a.constants.primTypes,h=a.invoke(c,d);return c.def(b,"[",h,"]")})}return q?c(q)?q.value?h(function(a,c){return c.def(a.ELEMENTS,".primType")}):h(function(){return 4}):new a(q.thisDep,q.contextDep,q.propDep,function(a,c){var b=a.ELEMENTS;
return c.def(b,"?",b,".primType:",4)}):null}(),count:function(){if("count"in g){var b=g.count|0;return h(function(){return b})}if("count"in l){var d=l.count;return e(d,function(a,c){return a.invoke(c,d)})}return q?c(q)?q?y?new a(y.thisDep,y.contextDep,y.propDep,function(a,c){return c.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):h(function(a,c){return c.def(a.ELEMENTS,".vertCount")}):h(function(){return-1}):new a(q.thisDep||y.thisDep,q.contextDep||y.contextDep,q.propDep||y.propDep,function(a,c){var b=
a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:y}}function aa(a){var c=a["static"],b=a.dynamic,d={};ra.forEach(function(a){function n(g,q){if(a in c){var m=g(c[a]);d[l]=h(function(){return m})}else if(a in b){var y=b[a];d[l]=e(y,function(a,c){return q(a,c,a.invoke(c,y))})}}var l=L(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(a){return a},
function(a,c,b){return b});case "depth.func":return n(function(a){return x[a]},function(a,c,b){return c.def(a.constants.compareFuncs,"[",b,"]")});case "depth.range":return n(function(a){return a},function(a,c,b){a=c.def("+",b,"[0]");c=c.def("+",b,"[1]");return[a,c]});case "blend.func":return n(function(a){return[w["srcRGB"in a?a.srcRGB:a.src],w["dstRGB"in a?a.dstRGB:a.dst],w["srcAlpha"in a?a.srcAlpha:a.src],w["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,c,b){function h(a,d){var n=c.def('"',a,d,'" in ',
b,"?",b,".",a,d,":",b,".",a);return c.def(e,"[",n,"]")}var e=a.constants.blendFuncs;a=h("src","RGB");var d=h("src","Alpha"),n=h("dst","RGB"),g=h("dst","Alpha");return[a,n,d,g]});case "blend.equation":return n(function(a){if("string"===typeof a)return[U[a],U[a]];if("object"===typeof a)return[U[a.rgb],U[a.alpha]]},function(a,c,b){var h=a.constants.blendEquations,e=c.def(),d=c.def();a=a.cond("typeof ",b,'==="string"');a.then(e,"=",d,"=",h,"[",b,"];");a["else"](e,"=",h,"[",b,".rgb];",d,"=",h,"[",b,".alpha];");
c(a);return[e,d]});case "blend.color":return n(function(a){return g(4,function(c){return+a[c]})},function(a,c,b){return g(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return n(function(a){return a|0},function(a,c,b){return c.def(b,"|0")});case "stencil.func":return n(function(a){return[x[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,c,b){a=c.def('"cmp" in ',b,"?",a.constants.compareFuncs,"[",b,".cmp]",":",7680);var h=c.def(b,".ref|0");c=c.def('"mask" in ',b,"?",
b,".mask|0:-1");return[a,h,c]});case "stencil.opFront":case "stencil.opBack":return n(function(c){return["stencil.opBack"===a?1029:1028,t[c.fail||"keep"],t[c.zfail||"keep"],t[c.pass||"keep"]]},function(c,b,h){function e(a){return b.def('"',a,'" in ',h,"?",d,"[",h,".",a,"]:",7680)}var d=c.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return n(function(a){return[a.factor|0,a.units|0]},function(a,c,b){a=c.def(b,".factor|0");c=
c.def(b,".units|0");return[a,c]});case "cull.face":return n(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);return c},function(a,c,b){return c.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(a){return a},function(a,c,b){return b});case "frontFace":return n(function(a){return u[a]},function(a,c,b){return c.def(b+'==="cw"?2304:2305')});case "colorMask":return n(function(a){return a.map(function(a){return!!a})},function(a,c,b){return g(4,function(a){return"!!"+b+"["+
a+"]"})});case "sample.coverage":return n(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,c,b){a=c.def('"value" in ',b,"?+",b,".value:1");c=c.def("!!",b,".invert");return[a,c]})}});return d}function ga(a){var c=a["static"],b=a.dynamic,d={};Object.keys(c).forEach(function(a){var b=c[a],e;if("number"===typeof b||"boolean"===typeof b)e=h(function(){return b});else if("function"===typeof b&&("texture2d"===b._reglType||"textureCube"===b._reglTYpe))e=h(function(a){return a.link(b)});else if(Array.isArray(b)||
l(b))e=h(function(a){return a.global.def("[",g(b.length,function(a){return b[a]}),"]")});e.value=b;d[a]=e});Object.keys(b).forEach(function(a){var c=b[a];d[a]=e(c,function(a,b){return a.invoke(b,c)})});return d}function S(a){var c=a["static"],b=a.dynamic,n={};Object.keys(c).forEach(function(a){var b=c[a],e=f.id(a),g=new ia;if(d(b))g.state=1,g.buffer=D.getBuffer(D.create(b,34962,!1)),g.type=g.buffer.dtype;else{var l=D.getBuffer(b);if(l)g.state=1,g.buffer=l,g.type=l.dtype;else if(b.constant){var q=
b.constant;g.state=2;"number"===typeof q?g.x=q:r.forEach(function(a,c){c<q.length&&(g[a]=q[c])})}else{var l=D.getBuffer(b.buffer),m=b.offset|0,k=b.stride|0,w=b.size|0,t=!!b.normalized,u=0;"type"in b&&(u=y[b.type]);b=b.divisor|0;g.buffer=l;g.state=1;g.size=w;g.normalized=t;g.type=u||l.dtype;g.offset=m;g.stride=k;g.divisor=b}}n[a]=h(function(a,c){var b=a.attribCache;if(e in b)return b[e];var h={isStream:!1};Object.keys(g).forEach(function(a){h[a]=g[a]});g.buffer&&(h.buffer=a.link(g.buffer));return b[e]=
h})});Object.keys(b).forEach(function(a){var c=b[a];n[a]=e(c,function(a,b){function h(a){b(l[a],"=",e,".",a,"|0;")}var e=a.invoke(b,c),d=a.shared,n=d.isBufferArgs,g=d.buffer,l={isStream:b.def(!1)},q=new ia;q.state=1;Object.keys(q).forEach(function(a){l[a]=b.def(""+q[a])});var m=l.buffer,y=l.type;b("if(",n,"(",e,")){",l.isStream,"=true;",m,"=",g,".createStream(",34962,",",e,");",y,"=",m,".dtype;","}else{",m,"=",g,".getBuffer(",e,");","if(",m,"){",y,"=",m,".dtype;","}else if(",e,".constant){",l.state,
"=",2,";",r.map(function(a,c){return l[a]+"="+e+".length>="+c+"?"+e+"["+c+"]:0;"}).join(""),"}else{",m,"=",g,".getBuffer(",e,".buffer);",y,'="type" in ',e,"?",d.glTypes,"[",e,".type]:",m,".dtype;",l.normalized,"=!!",e,".normalized;");h("size");h("offset");h("stride");h("divisor");b("}}");return l})});return n}function P(a){var c=a["static"],b=a.dynamic,d={};Object.keys(c).forEach(function(a){var b=c[a];d[a]=h(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});Object.keys(b).forEach(function(a){var c=
b[a];d[a]=e(c,function(a,b){return a.invoke(b,c)})});return d}function Q(a,c,b){var h=a.shared.context,e=a.scope();Object.keys(b).forEach(function(d){c.save(h,"."+d);e(h,".",d,"=",b[d].append(a,c),";")});c(e)}function ja(a,c,b){var h=a.shared,e=h.gl,d=h.framebuffer,n;Z&&(n=c.def(h.extensions,".webgl_draw_buffers"));var g=a.constants,h=g.drawBuffer,g=g.backBuffer;a=b?b.append(a,c):c.def(d,".next");c("if(",d,".dirty||",a,"!==",d,".cur){","if(",a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");
Z&&c(n,".drawBuffersWEBGL(",h,"[",a,".colorAttachments.length]);");c("}else{",e,".bindFramebuffer(",36160,",null);");Z&&c(n,".drawBuffersWEBGL(",g,");");c("}",d,".cur=",a,";",d,".dirty=false;","}")}function ha(a,c,b){var h=a.shared,e=h.gl,d=a.current,n=a.next,l=h.current,q=h.next,m=a.cond(l,".dirty");ra.forEach(function(c){c=L(c);if(!(c in b.state)){var h,y;if(c in n){h=n[c];y=d[c];var f=g(W[c].length,function(a){return m.def(h,"[",a,"]")});m(a.cond(f.map(function(a,c){return a+"==="+y+"["+c+"]"}).join("&&")).then(e,
".",da[c],"(",f,");",f.map(function(a,c){return y+"["+c+"]="+a}).join(";"),";"))}else h=m.def(q,".",c),f=a.cond(h,"!==",l,".",c),m(f),c in ca?f(a.cond(h).then(e,".enable(",ca[c],");")["else"](e,".disable(",ca[c],");"),l,".",c,"=",h,";"):f(e,".",da[c],"(",h,");",l,".",c,"=",h,";")}});0===Object.keys(b.state).length&&m(l,".dirty=false;");c(m)}function ma(a,h,e,d){var n=a.shared,g=a.current,l=n.current,q=n.gl;b(Object.keys(e)).forEach(function(b){var n=e[b];if(!d||d(n)){var m=n.append(a,h);if(ca[b]){var y=
ca[b];c(n)?m?h(q,".enable(",y,");"):h(q,".disable(",y,");"):h(a.cond(m).then(q,".enable(",y,");")["else"](q,".disable(",y,");"));h(l,".",b,"=",m,";")}else if(Array.isArray(m)){var f=g[b];h(q,".",da[b],"(",m,");",m.map(function(a,c){return f+"["+c+"]="+a}).join(";"),";")}else h(q,".",da[b],"(",m,");",l,".",b,"=",m,";")}})}function ka(a,c){ba&&!a.instancing&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function na(a,c,b,h,e){function d(a){switch(a){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function n(b,h,e){function d(){c("if(!",y,".pointer){",q,".enableVertexAttribArray(",m,");",y,".pointer=true;}");var b=e.type,n;n=e.size?c.def(e.size,"||",h):h;c("if(",y,".type!==",b,"||",y,".size!==",n,"||",w.map(function(a){return y+"."+a+"!=="+e[a]}).join("||"),"){",q,".bindBuffer(",34962,",",f,".buffer);",q,".vertexAttribPointer(",[m,n,b,e.normalized,e.stride,e.offset],");",y,".type=",b,";",y,
".size=",n,";",w.map(function(a){return y+"."+a+"="+e[a]+";"}).join(""),"}");ba&&(b=e.divisor,c("if(",y,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",y,".divisor=",b,";}"))}function l(){c("if(",y,".pointer){",q,".disableVertexAttribArray(",m,");",y,".pointer=false;","}if(",r.map(function(a,c){return y+"."+a+"!=="+k[c]}).join("||"),"){",q,".vertexAttrib4f(",m,",",k,");",r.map(function(a,c){return y+"."+a+"="+k[c]+";"}).join(""),"}")}var q=g.gl,m=c.def(b,".location"),y=c.def(g.attributes,
"[",m,"]");b=e.state;var f=e.buffer,k=[e.x,e.y,e.z,e.w],w=["buffer","normalized","offset","stride"];1===b?d():2===b?l():(c("if(",b,"===",1,"){"),d(),c("}else{"),l(),c("}"))}var g=a.shared;h.forEach(function(h){var g=h.name,l=b.attributes[g],q;if(l){if(!e(l))return;q=l.append(a,c)}else{if(!e(z))return;var m=a.scopeAttrib(g);q={};Object.keys(new ia).forEach(function(a){q[a]=c.def(m,".",a)})}n(a.link(h),d(h.info.type),q)})}function V(a,c,b,h,e){for(var d=a.shared,n=d.gl,g,l=0;l<h.length;++l){var q=h[l],
m=q.name,y=q.info.type,r=b.uniforms[m],q=a.link(q)+".location";if(r){if(!e(r))continue;if(r["static"]){m=r.value;if(35678===y||35680===y)y=a.link(m._texture),c(n,".uniform1i(",q,y+".bind());"),c.exit(y,".unbind()");else if(35674===y||35675===y||35676===y)m=a.global.def("["+m+"]"),r=2,35675===y?r=3:35676===y&&(r=4),c(n,".uniformMatrix",r,"fv(",q,",false,",m,");");else{switch(y){case 5126:g="1f";break;case 35664:g="2f";break;case 35665:g="3f";break;case 35666:g="4f";break;case 35670:g="1i";break;case 5124:g=
"1i";break;case 35671:g="2i";break;case 35667:g="2i";break;case 35672:g="3i";break;case 35668:g="3i";break;case 35673:g="4i";break;case 35669:g="4i"}c(n,".uniform",g,"(",q,",",m,");")}continue}else m=r.append(a,c)}else{if(!e(z))continue;m=c.def(d.uniforms,"[",f.id(m),"]")}r=",";switch(y){case 35678:case 35680:y=c.def(m,"._texture");c(n,".uniform1i(",q,",",y,".bind());");c.exit(y,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2iv";break;case 35668:case 35672:g="3iv";
break;case 35669:case 35673:g="4iv";break;case 5126:g="1f";break;case 35664:g="2fv";break;case 35665:g="3fv";break;case 35666:g="4fv";break;case 35674:g="Matrix2fv";r=",false,";break;case 35675:g="Matrix3fv";r=",false,";break;case 35676:g="Matrix4fv",r=",false,"}c(n,".uniform",g,"(",q,r,m,");")}}function X(a,b,h,e){function d(c){var e=y[c];return e?e.batchStatic?e.append(a,b):e.append(a,h):b.def(m,".",c)}function n(){function a(){h(u,".drawElementsInstancedANGLE(",[r,w,x,k+"<<(("+x+"-5121)>>1)",t],
");")}function c(){h(u,".drawArraysInstancedANGLE(",[r,k,w,t],");")}f?W?a():(h("if(",f,"){"),a(),h("}else{"),c(),h("}")):c()}function g(){function a(){h(q+".drawElements("+[r,w,x,k+"<<(("+x+"-5121)>>1)"]+");")}function c(){h(q+".drawArrays("+[r,k,w]+");")}f?W?a():(h("if(",f,"){"),a(),h("}else{"),c(),h("}")):c()}var l=a.shared,q=l.gl,m=l.draw,y=e.draw,f=function(){var c=y.elements,e=b;c?(c.batchStatic||(e=h),c=c.append(a,e)):c=e.def(m,".","elements");c&&e("if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);");
return c}(),r=d("primitive"),k=d("offset"),w=function(){var c=y.count,e=b;c?(c.batchStatic||(e=h),c=c.append(a,e)):c=e.def(m,".","count");return c}();if("number"===typeof w){if(0===w)return}else h("if(",w,"){"),h.exit("}");var t,u;ba&&(t=d("instances"),u=a.instancing);var x=f+".type",W=y.elements&&c(y.elements);ba&&("number"!==typeof t||0<=t)?"string"===typeof t?(h("if(",t,">0){"),n(),h("}else if(",t,"<0){"),g(),h("}")):n():g()}function Y(a,c,b,h,e){c=T();e=c.proc("body",e);ba&&(c.instancing=e.def(c.shared.extensions,
".angle_instanced_arrays"));a(c,e,b,h);return c.compile().body}function ta(a,c,b,h){ka(a,c);na(a,c,b,h.attributes,function(){return!0});V(a,c,b,h.uniforms,function(){return!0});X(a,c,c,b)}function ua(a,c){var b=a.proc("draw",1);ka(a,b);Q(a,b,c.context);ja(a,b,c.framebuffer);ha(a,b,c);ma(a,b,c.state);var h=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",h,".program);");if(c.shader.program)ta(a,b,c,c.shader.program);else{var e=a.global.def("{}"),d=b.def(h,".id"),n=b.def(e,"[",d,"]");b(a.cond(n).then(n,
".call(this,a0);")["else"](n,"=",e,"[",d,"]=",a.link(function(b){return Y(ta,a,c,b,1)}),"(",h,");",n,".call(this,a0);"))}0<Object.keys(c.state).length&&b(a.shared.current,".dirty=true;")}function wa(a,c,b,h){function e(){return!0}a.batchId="a1";ka(a,c);na(a,c,b,h.attributes,e);V(a,c,b,h.uniforms,e);X(a,c,c,b)}function oa(a,c,b,h){function e(a){return a.contextDep&&n||a.propDep}function d(a){return!e(a)}ka(a,c);var n=b.contextDynamic,g=c.def(),l=c.def();a.shared.props=l;a.batchId=g;var q=a.scope(),
m=a.scope();c(q.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",l,"=","a0","[",g,"];",m,"}",q.exit);b.needsContext&&Q(a,m,b.context);b.needsFramebuffer&&ja(a,m,b.framebuffer);ma(a,m,b.state,e);h?(na(a,q,b,h.attributes,d),na(a,m,b,h.attributes,e),V(a,q,b,h.uniforms,d),V(a,m,b,h.uniforms,e),X(a,q,m,b)):(c=a.global.def("{}"),h=b.shader.progVar.append(a,m),l=m.def(h,".id"),q=m.def(c,"[",l,"]"),m(a.shared.gl,".useProgram(",h,".program);","if(!",q,"){",q,"=",c,"[",l,"]=",a.link(function(c){return Y(wa,a,b,
c,2)}),"(",h,");}",q,".call(this,a0[",g,"],",g,");"))}function va(a,c){var b=a.proc("batch",2);a.batchId="0";ka(a,b);var h=!1,e=!0;Object.keys(c.context).forEach(function(a){h=h||c.context[a].propDep});h||(Q(a,b,c.context),e=!1);var d=c.framebuffer,n=!1;d&&(d.propDep?h=n=!0:d.contextDep&&h&&(n=!0),n||ja(a,b,d));c.state.viewport&&c.state.viewport.propDynamic&&(h=!0);ha(a,b,c);ma(a,b,c.state,function(a){return!(a.contextDep&&h||a.propDep)});c.contextDep=h;c.needsContext=e;c.needsFramebuffer=n;e=c.shader.progVar;
if(e.contextDep&&h||e.propDep)oa(a,b,c,null);else if(e=e.append(a,b),b(a.shared.gl,".useProgram(",e,".program);"),c.shader.program)oa(a,b,c,c.shader.program);else{var d=a.global.def("{}"),n=b.def(e,".id"),g=b.def(d,"[",n,"]");b(a.cond(g).then(g,".call(this,a0,a1);")["else"](g,"=",d,"[",n,"]=",a.link(function(b){return Y(oa,a,c,b,2)}),"(",e,");",g,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&b(a.shared.current,".dirty=true;")}function qa(a,c){function h(b){var n=c.shader[b];n&&e.set(d.shader,
"."+b,n.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var d=a.shared,n=d.current;Q(a,e,c.context);c.framebuffer&&c.framebuffer.append(a,e);b(Object.keys(c.state)).forEach(function(b){var h=c.state[b].append(a,e);Array.isArray(h)?h.forEach(function(c,h){e.set(a.next[b],"["+h+"]",c)}):e.set(d.next,"."+b,h)});["elements","offset","count","instances","primitive"].forEach(function(b){var h=c.draw[b];h&&e.set(d.draw,"."+b,""+h.append(a,e))});Object.keys(c.uniforms).forEach(function(b){e.set(d.uniforms,
"["+f.id(b)+"]",c.uniforms[b].append(a,e))});Object.keys(c.attributes).forEach(function(b){var h=c.attributes[b].append(a,e),d=a.scopeAttrib(b);Object.keys(new ia).forEach(function(a){e.set(d,"."+a,h[a])})});h("vert");h("frag");0<Object.keys(c.state).length&&(e(n,".dirty=true;"),e.exit(n,".dirty=true;"));e("a1(",a.shared.context,",a0,0);")}var ia=K.Record,U={add:32774,subtract:32778,"reverse subtract":32779};k.ext_blend_minmax&&(U.min=32775,U.max=32776);var ba=k.angle_instanced_arrays,Z=k.webgl_draw_buffers,
W={dirty:!0},pa={},ra=[],ca={},da={};G("dither",3024);G("blend.enable",3042);N("blend.color","blendColor",[0,0,0,0]);N("blend.equation","blendEquationSeparate",[32774,32774]);N("blend.func","blendFuncSeparate",[1,0,1,0]);G("depth.enable",2929,!0);N("depth.func","depthFunc",513);N("depth.range","depthRange",[0,1]);N("depth.mask","depthMask",!0);N("colorMask","colorMask",[!0,!0,!0,!0]);G("cull.enable",2884);N("cull.face","cullFace",1029);N("frontFace","frontFace",2305);N("lineWidth","lineWidth",1);
G("polygonOffset.enable",32823);N("polygonOffset.offset","polygonOffset",[0,0]);G("sample.alpha",32926);G("sample.enable",32928);N("sample.coverage","sampleCoverage",[1,!1]);G("stencil.enable",2960);N("stencil.mask","stencilMask",-1);N("stencil.func","stencilFunc",[519,0,-1]);N("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);N("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);G("scissor.enable",3089);N("scissor.box","scissor",[0,0,q.drawingBufferWidth,q.drawingBufferHeight]);
N("viewport","viewport",[0,0,q.drawingBufferWidth,q.drawingBufferHeight]);var xa={gl:q,context:J,strings:f,next:pa,current:W,draw:O,elements:E,buffer:D,shader:M,attributes:K.state,uniforms:H,framebuffer:I,extensions:k,isBufferArgs:d},sa={primTypes:m,compareFuncs:x,blendFuncs:w,blendEquations:U,stencilOps:t,glTypes:y,orientationType:u};Z&&(sa.backBuffer=[1029],sa.drawBuffer=g(p.maxDrawbuffers,function(a){return 0===a?[0]:g(a,function(a){return 36064+a})}));var ya=0;return{next:pa,current:W,procs:function(){var a=
T(),c=a.proc("poll"),b=a.proc("refresh"),h=a.block();c(h);b(h);var e=a.shared,d=e.gl,n=e.next,l=e.current;h(l,".dirty=false;");ja(a,c);b(e.framebuffer,".dirty=true;");ja(a,b);Object.keys(ca).forEach(function(e){var g=ca[e],q=h.def(n,".",e),m=a.block();m("if(",q,"){",d,".enable(",g,")}else{",d,".disable(",g,")}",l,".",e,"=",q,";");b(m);c("if(",q,"!==",l,".",e,"){",m,"}")});Object.keys(da).forEach(function(e){var q=da[e],m=W[e],y,f,r=a.block();r(d,".",q,"(");Array.isArray(m)?(q=m.length,y=a.global.def(n,
".",e),f=a.global.def(l,".",e),r(g(q,function(a){return y+"["+a+"]"}),");",g(q,function(a){return f+"["+a+"]="+y+"["+a+"];"}).join("")),c("if(",g(q,function(a){return y+"["+a+"]!=="+f+"["+a+"]"}).join("||"),"){",r,"}")):(y=h.def(n,".",e),f=h.def(l,".",e),r(y,");",l,".",e,"=",y,";"),c("if(",y,"!==",f,"){",r,"}"));b(r)});return a.compile()}(),compile:function(a,c,b,h){var e=T(),d;d=R(a);var n=ea(a,d),g=la(a),l=aa(a);a=fa(a);var q=n.viewport;q&&(l.viewport=q);q=L("scissor.box");(n=n[q])&&(l[q]=n);n=
0<Object.keys(l).length;d={framebuffer:d,draw:g,shader:a,state:l,dirty:n};d.uniforms=ga(b);d.attributes=S(c);d.context=P(h);ua(e,d);qa(e,d);va(e,d);return e.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":20,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/loop":24}],9:[function(f,k,p){function d(a,b){this.id=c++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&c===d&&('"'===
c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<c.length;++d)a=a.concat(b(c[d]));return a}function a(a){return"["+b(a).join("][")+"]"}var c=0;k.exports={define:function(c,b){switch(typeof b){case "boolean":case "number":case "string":return new d(c,
a(b+""));case "undefined":return new d(c|128,null)}},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof d},unbox:function(c,b){if(c instanceof d){if(c.type&128)return new d(c.type&-129,a(b))}else if("function"===typeof c)return new d(0,c);return c},accessor:a}},{}],10:[function(f,k,p){var d=f("./util/is-typed-array"),b=f("./util/is-ndarray"),a=f("./constants/primitives.json"),c=f("./constants/usage.json");k.exports=function(h,e,n){function g(a){this.buffer=a;this.primType=
4;this.type=this.vertCount=0}function l(a,c,h,g,l,q,m){(q=m)||d(c)&&(!b(c)||d(c.data))||(q=e.oes_element_index_uint?5125:5123);a.buffer.bind();n._initBuffer(a.buffer,c,h,q,3);c=m;if(!m){switch(a.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}a.buffer.dtype=c}a.type=c;0>l&&(l=a.buffer.byteLength,5123===c?l>>=1:5125===c&&(l>>=2));a.vertCount=l;l=g;0>g&&(l=4,g=a.buffer.dimension,1===g&&(l=0),2===g&&(l=1),3===g&&(l=4));a.primType=l}var q={uint8:5121,
uint16:5123};e.oes_element_index_uint&&(q.uint32=5125);g.prototype.bind=function(){this.buffer.bind()};var m=[];return{create:function(e){function m(e){if(e)if("number"===typeof e)f(e),k.primType=4,k.vertCount=e|0,k.type=5121;else{var n=null,g=35044,y=-1,p=-1,C=0,A=0;Array.isArray(e)||d(e)||b(e)?n=e:("data"in e&&(n=e.data),"usage"in e&&(g=c[e.usage]),"primitive"in e&&(y=a[e.primitive]),"count"in e&&(p=e.count|0),"length"in e&&(C=e.length|0),"type"in e&&(A=q[e.type]));n?l(k,n,g,y,p,C,A):(e=k.buffer,
e.bind(),h.bufferData(34963,C,g),e.dtype=A||5121,e.usage=g,e.dimension=3,e.byteLength=C,k.primType=0>y?4:y,k.vertCount=0>p?0:p,k.type=e.dtype)}else f(),k.primType=4,k.vertCount=0,k.type=5121;return m}var f=n.create(null,34963,!0),k=new g(f._buffer);m(e);m._reglType="elements";m._elements=k;m.subdata=function(a,c){f.subdata(a,c);return m};m.destroy=function(){f.destroy();k.buffer=null};return m},createStream:function(a){var c=m.pop();c||(c=new g(n.create(null,34963,!0)._buffer));l(c,a,35040,-1,-1,
0,0);return c},destroyStream:function(a){m.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof g?a._elements:null}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23}],11:[function(f,k,p){k.exports=function(d){function b(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(c){try{a[c]=
d.getExtension(c)}catch(b){}})}var a={};b();return{extensions:a,refresh:b}}},{}],12:[function(f,k,p){var d=f("./util/values"),b=f("./util/extend");k.exports=function(a,c,h,e,n){function g(a,c,b,h){this.target=a;this.level=c;this.texture=b;this.renderbuffer=h}function l(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function q(a,c){var b=c.width,h=c.height;if(a.texture)var e=a.texture._texture,d=Math.max(1,e.params.width>>a.level),n=Math.max(1,
e.params.height>>a.level),b=b||d,h=h||n;else e=a.renderbuffer._renderbuffer,b=b||e.width,h=h||e.height;e.refCount+=1;c.width=b;c.height=h}function m(c,b){b?b.texture?a.framebufferTexture2D(36160,c,b.target,b.texture._texture.texture,b.level):a.framebufferRenderbuffer(36160,c,36161,b.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,c,3553,null,0)}function y(a){var c=3553,b=0,h=null,e=null;"object"===typeof a&&("level"in a&&(b=a.level|0),"target"in a&&(c=a.target|0));var d=a._reglType;
"texture"===d?h=a:"renderbuffer"===d&&(e=a,c=36161,b=0);return new g(c,b,h,e)}function f(a){return a&&(a.texture||a.renderbuffer)}function k(){this.id=D++;E[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function x(b){a.isFramebuffer(b.framebuffer)||(b.framebuffer=a.createFramebuffer());u.dirty=!0;a.bindFramebuffer(36160,b.framebuffer);for(var e=
b.colorAttachments,d=0;d<e.length;++d)m(36064+d,e[d]);for(d=e.length;d<h.maxColorAttachments;++d)m(36064+d,null);m(36096,b.depthAttachment);m(36128,b.stencilAttachment);m(33306,b.depthStencilAttachment);c.webgl_draw_buffers&&c.webgl_draw_buffers.drawBuffersWEBGL(A[e.length]);a.checkFramebufferStatus(36160)}function t(c){c=c.framebuffer;a.isFramebuffer(c)&&a.deleteFramebuffer(c)}var u={current:null,next:null,dirty:!1},z={rgba:6408},v={rgba4:32854,rgb565:36194,"rgb5 a1":32855};c.ext_srgb&&(v.srgba=
35907);c.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);c.webgl_color_buffer_float&&(v.rgba32f=34836);var p=[],C=[];c.webgl_depth_texture&&(p.push(6402),C.push(34041));b(b({},z),v);d(z);d(v);v=5121;p={uint8:5121};c.oes_texture_half_float&&(v=p["half float"]=36193);c.oes_texture_float&&(v=p["float"]=5126);p.best=v;var A=function(){for(var a=Array(h.maxDrawbuffers),c=0;c<=h.maxDrawbuffers;++c)for(var b=a[c]=Array(c),e=0;e<c;++e)b[e]=36064+e;return a}(),D=0,E={};return b(u,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof k)?a:null},create:function(c){function b(c){var d,m=c||{},k=c=0;if("shape"in m){var w=m.shape;c=w[0];k=w[1]}else"radius"in m&&(c=k=m.radius),"width"in m&&(c=m.width),"height"in m&&(k=m.height);var u=null,w=!1;if("colorBuffers"in m||"colorBuffer"in m){u=m.colorBuffers||m.colorBuffer;Array.isArray(u)||(u=[u]);h.width=c;h.height=k;u=u.map(y);for(d=0;d<u.length;++d)q(u[d],h);c=h.width;k=h.height}else{var t=!0,v="rgba",p="uint8",C=1,
w=!0;h.width=c=c||a.drawingBufferWidth;h.height=k=k||a.drawingBufferHeight;"format"in m&&(v=m.format,t=v in z);"type"in m&&(p=m.type);"colorCount"in m&&(C=m.colorCount|0);if(h.ownsColor)for(u=h.colorAttachments;u.length>C;)l(u.pop());else u=[];for(d=0;d<u.length;++d){var A;a:{A=u[d];var D=t,B=v,E=c,F=k;if(A.texture){var P=A.texture;if(D){P({format:B,type:p,width:E,height:F});P._texture.refCount+=1;A=!0;break a}}else if(P=A.renderbuffer,!D){P({format:B,width:E,height:F});P._renderbuffer.refCount+=
1;A=!0;break a}l(A);A=!1}A||(u[d--]=u[u.length-1],u.pop())}for(;u.length<C;)t?u.push(new g(3553,0,e.create2D({format:v,type:p,width:c,height:k},3553),null)):u.push(new g(36161,0,null,n.create({format:v,width:c,height:k})))}h.width=c;h.height=k;v=t=d=null;p=!1;"depthBuffer"in m&&(d=y(m.depthBuffer));"stencilBuffer"in m&&(t=y(m.stencilBuffer));"depthStencilBuffer"in m&&(v=y(m.depthStencilBuffer));if(d||t||v)q(d||t||v,h);else if(C=!0,D=A=!1,"depth"in m&&(C=!!m.depth),"stencil"in m&&(A=!!m.stencil),"depthTexture"in
m&&(D=!!m.depthTexture),m=h.depthAttachment||h.stencilAttachment||h.depthStencilAttachment,B=null,C||A)p=!0,D?(D=A?"depth stencil":"depth",h.ownsDepthStencil&&m.texture?(m.texture({format:D,width:c,height:k}),m.texture._texture.refCount+=1,B=m):B=new g(3553,0,e.create({format:D,width:c,height:k},3553),null)):(D=C?A?"depth stencil":"depth":"stencil",h.ownsDepthStencil&&m.renderbuffer?(m.renderbuffer({format:D,width:c,height:k}),m.renderbuffer._renderbuffer.refCount+=1,B=m):B=new g(36161,0,null,n.create({format:D,
width:c,height:k}))),C?A?v=B:d=B:t=B;c=h;c.colorAttachments.forEach(l);l(c.depthAttachment);l(c.stencilAttachment);l(c.depthStencilAttachment);h.colorAttachments=u;h.depthAttachment=d;h.stencilAttachment=t;h.depthStencilAttachment=v;h.ownsColor=w;h.ownsDepthStencil=p;b.color=u.map(f);b.depth=f(d);b.stencil=f(t);b.depthStencil=f(v);x(h);b.width=h.width;b.height=h.height;return b}var h=new k;b(c);b._reglType="framebuffer";b._framebuffer=h;b._destroy=function(){t(h)};return b},clear:function(){d(E).forEach(t)},
refresh:function(){d(E).forEach(x)}})}},{"./util/extend":21,"./util/values":28}],13:[function(f,k,p){k.exports=function(d,b){var a=1;b.ext_texture_filter_anisotropic&&(a=d.getParameter(34047));var c=1,h=1;b.webgl_draw_buffers&&(c=d.getParameter(34852),h=d.getParameter(36063));return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),
maxAnisotropic:a,maxDrawbuffers:c,maxColorAttachments:h,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938)}}},{}],14:[function(f,k,p){var d=f("./util/is-typed-array");k.exports=function(b,a,c){return function(h){var e=h||{};d(h)?e={data:e}:2===arguments.length?e={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof h&&(e={});a();var n=e.x||0,g=e.y||0,l=e.width||c.viewportWidth,q=e.height||c.viewportHeight,e=e.data||new Uint8Array(l*q*4);b.pixelStorei(3333,
4);b.readPixels(n,g,l,q,6408,5121,e);return e}}},{"./util/is-typed-array":23}],15:[function(f,k,p){var d=f("./util/values");k.exports=function(b,a,c){function h(){this.id=l++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function e(a){b.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=b.createRenderbuffer());b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)}function n(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,
null);b.isRenderbuffer(c)&&b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete q[a.id]}var g={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(g.srgba=35907);a.ext_color_buffer_half_float&&(g.rgba16f=34842,g.rgb16f=34843);a.webgl_color_buffer_float&&(g.rgba32f=34836);var l=0,q={};h.prototype.decRef=function(){0===--this.refCount&&n(this)};return{create:function(a){function c(a){a=a||{};var h=0,d=0;"shape"in a?(d=a.shape,h=d[0]|0,d=
d[1]|0):("radius"in a&&(h=d=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(d=a.height|0));c.width=b.width=Math.max(h,1);c.height=b.height=Math.max(d,1);b.format=32854;"format"in a&&(b.format=g[a.format]);e(b);return c}var b=new h;q[b.id]=b;c(a);c._reglType="renderbuffer";c._renderbuffer=b;c.destroy=function(){b.decRef()};return c},refresh:function(){d(q).forEach(e)},clear:function(){d(q).forEach(n)}}}},{"./util/values":28}],16:[function(f,k,p){var d=f("./util/values");k.exports=function(b,
a){function c(a,c,b,h){this.name=a;this.id=c;this.location=b;this.info=h}function h(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;return}a.push(c)}function e(c,h,e){e=35632===c?l:q;var d=e[h];if(!d){var n=a.str(h),d=b.createShader(c);b.shaderSource(d,n);b.compileShader(d);e[h]=d}return d}function n(a,c){this.id=f++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[]}function g(d,n){var g,l;g=e(35632,d.fragId);l=e(35633,d.vertId);var m=d.program=
b.createProgram();b.attachShader(m,g);b.attachShader(m,l);b.linkProgram(m);var q=b.getProgramParameter(m,35718),y=d.uniforms;for(g=0;g<q;++g)if(l=b.getActiveUniform(m,g))if(1<l.size)for(var f=0;f<l.size;++f){var k=l.name.replace("[0]","["+f+"]");h(y,new c(k,a.id(k),b.getUniformLocation(m,k),l))}else h(y,new c(l.name,a.id(l.name),b.getUniformLocation(m,l.name),l));q=b.getProgramParameter(m,35721);y=d.attributes;for(g=0;g<q;++g)(l=b.getActiveAttrib(m,g))&&h(y,new c(l.name,a.id(l.name),b.getAttribLocation(m,
l.name),l))}var l={},q={},m={},y=[],f=0;return{clear:function(){var a=b.deleteShader.bind(b);d(l).forEach(a);l={};d(q).forEach(a);q={};y.forEach(function(a){b.deleteProgram(a.program)});y.length=0;m={}},refresh:function(){l={};q={};y.forEach(g)},program:function(a,c,b){var h=m[c];h||(h=m[c]={});var e=h[a];e||(e=new n(c,a),g(e,b),h[a]=e,y.push(e));return e},shader:e,frag:null,vert:null}}},{"./util/values":28}],17:[function(f,k,p){k.exports=function(){var d={"":0},b=[""];return{id:function(a){var c=
d[a];if(c)return c;c=d[a]=b.length;b.push(a);return c},str:function(a){return b[a]}}}},{}],18:[function(f,k,p){function d(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){if(!Array.isArray(a))return!1;var c=a.length;if(0===c||!Array.isArray(a[0]))return!1;for(var b=a[0].length,h=1;h<c;++h)if(!Array.isArray(a[h])||a[h].length!==b)return!1;return!0}function a(a){return Object.prototype.toString.call(a)}function c(c){if(!c)return!1;var h=a(c);return 0<=t.indexOf(h)?!0:
d(c)||b(c)||l(c)}function h(a,c){36193===a.type?(a.data=m(c),q.freeType(c)):a.data=c}var e=f("./util/extend"),n=f("./util/values"),g=f("./util/is-typed-array"),l=f("./util/is-ndarray"),q=f("./util/pool"),m=f("./util/to-half-float");p=f("./constants/arraytypes.json");var y=f("./constants/arraytypes.json"),r=[9984,9986,9985,9987],w=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=1;x[34041]=x[6410]=2;x[6407]=3;x[6408]=4;var t=Object.keys(p).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]",
"[object HTMLImageElement]","[object HTMLVideoElement]"]);k.exports=function(f,k,t,p,C){function A(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function D(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;
a.width=c.width;a.height=c.height;a.channels=c.channels}function E(a,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(a.flipY=c.flipY);"alignment"in c&&(a.unpackAlignment=c.alignment);"colorSpace"in c&&(a.colorSpace=na[c.colorSpace]);"type"in c&&(a.type=V[c.type]);var b=a.width,h=a.height,e=a.channels,d=!1;"shape"in c?(b=c.shape[0],h=c.shape[1],3===c.shape.length&&(e=c.shape[2],d=!0)):("radius"in c&&(b=h=c.radius),"width"in c&&(b=c.width),
"height"in c&&(h=c.height),"channels"in c&&(e=c.channels,d=!0));a.width=b|0;a.height=h|0;a.channels=e|0;b=!1;"format"in c&&(b=c.format,h=a.internalformat=X[b],a.format=wa[h],b in V&&!("type"in c)&&(a.type=V[b]),b in Y&&(a.compressed=!0),b=!0);!d&&b?a.channels=x[a.format]:d&&!b&&a.channels!==w[a.format]&&(a.format=a.internalformat=w[a.channels])}}function F(a){f.pixelStorei(37440,a.flipY);f.pixelStorei(37441,a.premultiplyAlpha);f.pixelStorei(37443,a.colorSpace);f.pixelStorei(3317,a.unpackAlignment)}
function I(){A.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function H(e,n){var f=null;c(n)?f=n:n&&(E(e,n),"x"in n&&(e.xOffset=n.x|0),"y"in n&&(e.yOffset=n.y|0),c(n.data)&&(f=n.data));if(n.copy){var k=C.viewportWidth,r=C.viewportHeight;e.width=e.width||k-e.xOffset;e.height=e.height||r-e.yOffset;e.needsCopy=!0}else if(!f)e.width=e.width||1,e.height=e.height||1;else if(g(f))e.data=f,"type"in n||5121!==e.type||(e.type=y[Object.prototype.toString.call(f)]|
0);else if(d(f)){k=f;r=e.width*e.height*e.channels;switch(e.type){case 5121:case 5123:case 5125:case 5126:r=q.allocType(e.type,r);r.set(k);e.data=r;break;case 36193:e.data=m(k)}e.alignment=1;e.needsFree=!0}else if(l(f)){k=f.data;Array.isArray(k)||5121!==e.type||(e.type=y[Object.prototype.toString.call(k)]|0);var r=f.shape,t=f.stride,x,u,v,p;3===r.length?(v=r[2],p=t[2]):p=v=1;x=r[0];u=r[1];r=t[0];t=t[1];e.alignment=1;e.width=x;e.height=u;e.channels=v;e.format=e.internalformat=w[v];e.needsFree=!0;x=
p;f=f.offset;v=e.width;p=e.height;u=e.channels;for(var z=q.allocType(36193===e.type?5126:e.type,v*p*u),A=0,D=0;D<p;++D)for(var B=0;B<v;++B)for(var F=0;F<u;++F)z[A++]=k[r*B+t*D+x*F+f];h(e,z)}else if("[object HTMLCanvasElement]"===a(f)||"[object CanvasRenderingContext2D]"===a(f))"[object HTMLCanvasElement]"===a(f)?e.element=f:e.element=f.canvas,e.width=e.element.width,e.height=e.element.height;else if("[object HTMLImageElement]"===a(f))e.element=f,e.width=f.naturalWidth,e.height=f.naturalHeight;else if("[object HTMLVideoElement]"===
a(f))e.element=f,e.width=f.videoWidth,e.height=f.videoHeight,e.needsPoll=!0;else if(b(f)){k=f[0].length;r=f.length;t=1;if(Array.isArray(f[0][0])){x=t=f[0][0].length;v=q.allocType(36193===e.type?5126:e.type,k*r*x);for(u=p=0;u<r;++u)for(z=f[u],A=0;A<k;++A)for(D=z[A],B=0;B<x;++B)v[p++]=D[B];h(e,v)}else{x=q.allocType(36193===e.type?5126:e.type,k*r);for(p=v=0;p<r;++p)for(u=f[p],z=0;z<k;++z)x[v++]=u[z];h(e,x)}e.alignment=1;e.width=k;e.height=r;e.channels=t;e.format=e.internalformat=w[t];e.needsFree=!0}}
function K(a,c,b,h,e){var d=a.element,n=a.data,g=a.internalformat,l=a.format,m=a.type,q=a.width,y=a.height;F(a);d?f.texSubImage2D(c,e,b,h,l,m,d):a.compressed?f.compressedTexSubImage2D(c,e,b,h,g,q,y,n):a.needsCopy?(p(),f.copyTexSubImage2D(c,e,b,h,a.xOffset,a.yOffset,q,y)):f.texSubImage2D(c,e,b,h,q,y,l,m,n)}function M(){return oa.pop()||new I}function O(a){a.needsFree&&q.freeType(a.data);I.call(a);oa.push(a)}function J(){A.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function L(a,c,b){var h=a.images[0]=M();a.mipmask=1;h.width=a.width=c;h.height=a.height=b}function G(a,b){var h=null;if(c(b))h=a.images[0]=M(),H(h,b),a.mipmask=1;else if(E(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,d=0;d<e.length;++d)h=a.images[d]=M(),D(h,a),h.width>>=d,h.height>>=d,H(h,e[d]),a.mipmask|=1<<d;else h=a.images[0]=M(),D(h,a),H(h,b),a.mipmask=1;D(a,a.images[0])}function N(a,c){for(var b=a.images,h=0;h<b.length&&b[h];++h){var e=b[h],d=c,n=h,g=e.element,l=e.data,m=e.internalformat,
q=e.format,y=e.type,k=e.width,r=e.height;F(e);g?f.texImage2D(d,n,q,q,y,g):e.compressed?f.compressedTexImage2D(d,n,m,k,r,0,l):e.needsCopy?(p(),f.copyTexImage2D(d,n,q,e.xOffset,e.yOffset,k,r,0)):f.texImage2D(d,n,q,k,r,0,q,y,l)}}function T(){var a=va.pop()||new J;A.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function R(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&O(c[b]),c[b]=null;va.push(a)}function ea(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=
1;this.genMipmaps=!1;this.mipmapHint=4352}function fa(a,c){"min"in c&&(a.minFilter=ka[c.min],0<=r.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in c&&(a.magFilter=ma[c.mag]);var b=a.wrapS,h=a.wrapT;if("wrap"in c){var e=c.wrap;"string"===typeof e?b=h=ha[e]:Array.isArray(e)&&(b=ha[e[0]],h=ha[e[1]])}else"wrapS"in c&&(b=ha[c.wrapS]),"wrapT"in c&&(h=ha[c.wrapT]);a.wrapS=b;a.wrapT=h;"anisotropic"in c&&(a.anisotropic=c.anisotropic);if("mipmap"in c){b=!1;switch(typeof c.mipmap){case "string":a.mipmapHint=
ja[c.mipmap];b=a.genMipmaps=!0;break;case "boolean":b=a.genMipmaps=c.mipmap;break;case "object":a.genMipmaps=!1,b=!0}!b||"min"in c||(a.minFilter=9984)}}function la(a,c){f.texParameteri(c,10241,a.minFilter);f.texParameteri(c,10240,a.magFilter);f.texParameteri(c,10242,a.wrapS);f.texParameteri(c,10243,a.wrapT);k.ext_texture_filter_anisotropic&&f.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(f.hint(33170,a.mipmapHint),f.generateMipmap(c))}function aa(){var a=qa.pop()||new ea;ea.call(a);return a}
function ga(a){A.call(this);this.mipmask=0;this.id=ia++;this.refCount=1;this.target=a;this.texture=f.createTexture();this.unit=-1;this.bindCount=0}function S(a){f.activeTexture(33984);f.bindTexture(a.target,a.texture)}function P(){var a=Z[0];a?f.bindTexture(a.target,a.texture):f.bindTexture(3553,null)}function Q(a){var c=a.texture,b=a.unit,h=a.target;0<=b&&(f.activeTexture(33984+b),f.bindTexture(h,null),Z[b]=null);f.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete U[a.id]}
var ja={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ha={repeat:10497,clamp:33071,mirror:33648},ma={nearest:9728,linear:9729},ka=e({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ma),na={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Y={};k.ext_srgb&&(X.srgb=35904,
X.srgba=35906);k.oes_texture_float&&(V["float"]=5126);k.oes_texture_half_float&&(V.float16=V["half float"]=36193);k.webgl_depth_texture&&(e(X,{depth:6402,"depth stencil":34041}),e(V,{uint16:5123,uint32:5125,"depth stencil":34042}));k.webgl_compressed_texture_s3tc&&e(Y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});k.webgl_compressed_texture_atc&&e(Y,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});k.webgl_compressed_texture_pvrtc&&
e(Y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});k.webgl_compressed_texture_etc1&&(Y["rgb etc1"]=36196);var ta=Array.prototype.slice.call(f.getParameter(34467));Object.keys(Y).forEach(function(a){var c=Y[a];0<=ta.indexOf(c)&&(X[a]=c)});var ua=Object.keys(X);t.textureFormats=ua;var wa=ua.reduce(function(a,c){var b=X[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b?a[b]=b:32855===b||0<=c.indexOf("rgba")?a[b]=6408:a[b]=6407;return a},
{}),oa=[],va=[],qa=[],ia=0,U={},ba=t.maxTextureUnits,Z=Array(ba).map(function(){return null});e(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<ba;++c){var b=Z[c];if(b){if(0<b.bindCount)continue;b.unit=-1}Z[c]=this;a=c;break}this.unit=a;f.activeTexture(33984+a);f.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&Q(this)}});return{create2D:function(a,c){function b(a,c){var e=aa(),d=T();"number"===
typeof a?"number"===typeof c?L(d,a|0,c|0):L(d,a|0,a|0):a?(fa(e,a),G(d,a)):L(d,1,1);e.genMipmaps&&(d.mipmask=(d.width<<1)-1);h.mipmask=d.mipmask;D(h,d);b.width=d.width;b.height=d.height;S(h);N(d,3553);la(e,3553);P();qa.push(e);R(d);return b}var h=new ga(3553);U[h.id]=h;b(a,c);b.subimage=function(a,c,e,d){c|=0;e|=0;d|=0;var n=M();D(n,h);n.width>>=d;n.height>>=d;n.width-=c;n.height-=e;H(n,a);S(h);K(n,3553,c,e,d);P();O(n);return b};b._reglType="texture2d";b._texture=h;b.destroy=function(){h.decRef()};
return b},createCube:function(a,c,b,h,e,d){function n(a,c,b,h,e,d){var m,q=aa();for(m=0;6>m;++m)l[m]=T();if("number"===typeof a||!a)for(a=a|0||1,m=0;6>m;++m)L(l[m],a,a);else if("object"===typeof a)if(c)G(l[0],a),G(l[1],c),G(l[2],b),G(l[3],h),G(l[4],e),G(l[5],d);else if(fa(q,a),E(g,a),"faces"in a)for(a=a.faces,m=0;6>m;++m)D(l[m],g),G(l[m],a[m]);else for(m=0;6>m;++m)G(l[m],a);D(g,l[0]);g.mipmask=q.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;n.width=l[0].width;n.height=l[0].height;S(g);for(m=0;6>m;++m)N(l[m],
34069+m);la(q,34067);P();qa.push(q);for(m=0;6>m;++m)R(l[m]);return n}var g=new ga(34067);U[g.id]=g;var l=Array(6);n(a,c,b,h,e,d);n.subimage=function(a,c,b,h,e){b|=0;h|=0;e|=0;var d=M();D(d,g);d.width>>=e;d.height>>=e;d.width-=b;d.height-=h;H(d,c);S(g);K(d,34069+a,b,h,e);P();O(d);return n};n._reglType="textureCube";n._texture=g;n.destroy=function(){g.decRef()};return n},clear:function(){for(var a=0;a<ba;++a)f.activeTexture(33984+a),f.bindTexture(3553,null),Z[a]=null;n(U).forEach(Q)},getTexture:function(a){return null}}}},
{"./constants/arraytypes.json":4,"./util/extend":21,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/to-half-float":27,"./util/values":28}],19:[function(f,k,p){k.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],20:[function(f,k,p){function d(a){return Array.prototype.slice.call(a)}function b(a){return d(a).join("")}var a=f("./extend");k.exports=function(){function c(){var c=[],h=[];return a(function(){c.push.apply(c,
d(arguments))},{def:function(){var a="v"+e++;h.push(a);0<arguments.length&&(c.push(a,"="),c.push.apply(c,d(arguments)),c.push(";"));return a},toString:function(){return b([0<h.length?"var "+h+";":"",b(c)])}})}function h(){function b(a,c){e(a,c,"=",h.def(a,c),";")}var h=c(),e=c(),d=h.toString,n=e.toString;return a(h,{entry:h,exit:e,save:b,set:function(a,c,e){b(a,c);h(a,c,"=",e,";")},toString:function(){return d()+n()}})}var e=0,n=[],g=[],l=c(),q={};return{global:l,link:function(a){for(var c=0;c<g.length;++c)if(g[c]===
a)return n[c];c="g"+e++;n.push(c);g.push(a);return c},block:c,proc:function(c,e){function d(){var a="a"+n.length;n.push(a);return a}var n=[];e=e||0;for(var g=0;g<e;++g)d();var g=h(),l=g.toString;return q[c]=a(g,{arg:d,toString:function(){return b(["function(",n.join(),"){",l(),"}"])}})},scope:h,cond:function(){var c=b(arguments),e=h(),n=h(),g=e.toString,l=n.toString;return a(e,{then:function(){e.apply(e,d(arguments));return this},"else":function(){n.apply(n,d(arguments));return this},toString:function(){var a=
l();a&&(a="else{"+a+"}");return b(["if(",c,"){",g(),"}",a])}})},compile:function(){var a=['"use strict";',l,"return {"];Object.keys(q).forEach(function(c){a.push('"',c,'":',q[c].toString(),",")});a.push("}");var c=b(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(c)).apply(null,g)}}}},{"./extend":21}],21:[function(f,k,p){k.exports=function(d,b){for(var a=Object.keys(b),c=0;c<a.length;++c)d[a[c]]=b[a[c]];return d}},{}],22:[function(f,k,p){var d=f("./is-typed-array");
k.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||d(b.data))}},{"./is-typed-array":23}],23:[function(f,k,p){var d=f("../constants/arraytypes.json");k.exports=function(b){return Object.prototype.toString.call(b)in d}},{"../constants/arraytypes.json":4}],24:[function(f,k,p){k.exports=function(d,b){for(var a=Array(d),c=0;c<d;++c)a[c]=b(c);return a}},{}],25:[function(f,
k,p){function d(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function b(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=c[d(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}function a(a){c[d(a.byteLength)>>2].push(a)}var c=f("./loop")(8,function(){return[]});k.exports={alloc:b,free:a,allocType:function(a,c){var d=null;switch(a){case 5120:d=new Int8Array(b(c),0,c);break;case 5121:d=new Uint8Array(b(c),0,c);break;
case 5122:d=new Int16Array(b(2*c),0,c);break;case 5123:d=new Uint16Array(b(2*c),0,c);break;case 5124:d=new Int32Array(b(4*c),0,c);break;case 5125:d=new Uint32Array(b(4*c),0,c);break;case 5126:d=new Float32Array(b(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(c){a(c.buffer)}}},{"./loop":24}],26:[function(f,k,p){k.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(d){return requestAnimationFrame(d)},
cancel:function(d){return cancelAnimationFrame(d)}}:{next:function(d){setTimeout(d,30)},cancel:clearTimeout}},{}],27:[function(f,k,p){var d=f("./pool"),b=new Float32Array(1),a=new Uint32Array(b.buffer);k.exports=function(c){for(var h=d.allocType(5123,c.length),e=0;e<c.length;++e)if(isNaN(c[e]))h[e]=65535;else if(Infinity===c[e])h[e]=31744;else if(-Infinity===c[e])h[e]=64512;else{b[0]=c[e];var n=a[0],g=n>>>31<<15,l=(n<<1>>>24)-127,n=n>>13&1023;h[e]=-24>l?g:-14>l?g+(n+1024>>-14-l):15<l?g+31744:g+(l+
15<<10)+n}return h}},{"./pool":25}],28:[function(f,k,p){k.exports=function(d){return Object.keys(d).map(function(b){return d[b]})}},{}],29:[function(f,k,p){function d(c,h){function e(){var b=window.innerWidth,h=window.innerHeight;c!==document.body&&(h=c.getBoundingClientRect(),b=h.right-h.left,h=h.top-h.bottom);d.width=l*b;d.height=l*h;a(d.style,{width:b+"px",height:h+"px"})}var d=document.createElement("canvas"),g=b(d,h);a(d.style,{border:0,margin:0,padding:0,top:0,left:0});c.appendChild(d);c===
document.body&&(d.style.position="absolute",a(c.style,{margin:0,padding:0}));var l=+g.options.pixelRatio;window.addEventListener("resize",e,!1);var q=g.options.onDestroy;g.options=a(a({},g.options),{onDestroy:function(){window.removeEventListener("resize",e);c.removeChild(d);q&&q()}});e();return g}function b(c,b){function e(a){try{return c.getContext(a,d)}catch(b){return null}}var d=b.glOptions||{};return{gl:e("webgl")||e("experimental-webgl")||e("webgl-experimental"),options:a({pixelRatio:window.devicePixelRatio},
b)}}var a=f("./util/extend");k.exports=function(c){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:c[0],options:c[1]||{}};var h=document.body,e=c[1]||{};if("string"===typeof c[0])h=document.querySelector(c[0])||document.body;else if("object"===typeof c[0])if(c[0]instanceof HTMLElement)h=c[0];else{if(c[0]instanceof WebGLRenderingContext)return{gl:c[0],options:a({pixelRatio:1},e)};e=c[0]}return h.nodeName&&"CANVAS"===h.nodeName.toUpperCase()?b(h,e):d(h,e)}},{"./util/extend":21}],
30:[function(f,k,p){var d=f("element-size");k.exports=function(a,c,h){function e(){var c=e.parent||a.parentNode;if("function"===typeof c)var h=c(b)||b,c=h[0],h=h[1];else c&&c!==document.body?(h=d(c),c=h[0]|0,h=h[1]|0):(c=window.innerWidth,h=window.innerHeight);n?(a.setAttribute("width",c*e.scale+"px"),a.setAttribute("height",h*e.scale+"px")):(a.width=c*e.scale,a.height=h*e.scale);a.style.width=c+"px";a.style.height=h+"px";return e}var n="SVG"===a.nodeName.toUpperCase();a.style.position=a.style.position||
"absolute";a.style.top=0;a.style.left=0;e.scale=parseFloat(h||1);e.parent=c;return e()};var b=new Float32Array(2)},{"element-size":32}],31:[function(f,k,p){var d=f("orbit-camera"),b=f("scroll-speed"),a=f("mouse-position"),c=f("mouse-pressed"),h=f("key-pressed");k.exports=function(e,n){n=n||{};n.pan=!1!==n.pan;n.scale=!1!==n.scale;n.rotate=!1!==n.rotate;var g=b(e,n.scale),l=c(e,n.rotate),q=a(e),m=d([0,10,30],[0,0,0],[0,1,0]);m.tick=function(){var a=h("<control>")||h("<alt>"),c=h("<shift>"),b=e.height,
d=e.width;n.rotate&&l.left&&!a&&!c&&m.rotate([q.x/d-.5,q.y/b-.5],[q.prevX/d-.5,q.prevY/b-.5]);(n.pan&&l.right||l.left&&a&&!c)&&m.pan([1*(q.x-q.prevX)/d,1*(q.y-q.prevY)/b]);n.scale&&g[1]&&(m.distance*=Math.exp(g[1]/b));if(n.scale&&(l.middle||l.left&&!a&&c)){a=q.y-q.prevY;if(!a)return;m.distance*=Math.exp(a/b)}g.flush();q.flush()};return m}},{"key-pressed":101,"mouse-position":102,"mouse-pressed":103,"orbit-camera":104,"scroll-speed":106}],32:[function(f,k,p){function d(b){return parseFloat(b)||0}k.exports=
function(b){if(b===window||b===document.body)return[window.innerWidth,window.innerHeight];if(!b.parentNode){var a=!0;document.body.appendChild(b)}var c=b.getBoundingClientRect(),h=getComputedStyle(b),e=(c.height|0)+d(h.getPropertyValue("margin-top"))+d(h.getPropertyValue("margin-bottom")),c=(c.width|0)+d(h.getPropertyValue("margin-left"))+d(h.getPropertyValue("margin-right"));a&&document.body.removeChild(b);return[c,e]}},{}],33:[function(f,k,p){function d(){this._events=this._events||{};this._maxListeners=
this._maxListeners||void 0}function b(a){return"function"===typeof a}function a(a){return"object"===typeof a&&null!==a}k.exports=d;d.EventEmitter=d;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};d.prototype.emit=function(c){var h,e,d,g;this._events||(this._events={});if("error"===c&&(!this._events.error||
a(this._events.error)&&!this._events.error.length)){h=arguments[1];if(h instanceof Error)throw h;throw TypeError('Uncaught, unspecified "error" event.');}e=this._events[c];if(void 0===e)return!1;if(b(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),e.apply(this,h)}else if(a(e))for(h=Array.prototype.slice.call(arguments,1),g=e.slice(),e=g.length,d=0;d<e;d++)g[d].apply(this,
h);return!0};d.prototype.addListener=function(c,h){var e;if(!b(h))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",c,b(h.listener)?h.listener:h);this._events[c]?a(this._events[c])?this._events[c].push(h):this._events[c]=[this._events[c],h]:this._events[c]=h;a(this._events[c])&&!this._events[c].warned&&(e=void 0!==this._maxListeners?this._maxListeners:d.defaultMaxListeners)&&0<e&&this._events[c].length>e&&(this._events[c].warned=
!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"===typeof console.trace&&console.trace());return this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(a,h){function e(){this.removeListener(a,e);d||(d=!0,h.apply(this,arguments))}if(!b(h))throw TypeError("listener must be a function");var d=!1;e.listener=h;this.on(a,e);return this};d.prototype.removeListener=
function(c,h){var e,d,g;if(!b(h))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;e=this._events[c];g=e.length;d=-1;if(e===h||b(e.listener)&&e.listener===h)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,h);else if(a(e)){for(;0<g--;)if(e[g]===h||e[g].listener&&e[g].listener===h){d=g;break}if(0>d)return this;1===e.length?(e.length=0,delete this._events[c]):e.splice(d,1);this._events.removeListener&&this.emit("removeListener",
c,h)}return this};d.prototype.removeAllListeners=function(a){var h;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(h in this._events)"removeListener"!==h&&this.removeAllListeners(h);this.removeAllListeners("removeListener");this._events={};return this}h=this._events[a];if(b(h))this.removeListener(a,h);else if(h)for(;h.length;)this.removeListener(a,h[h.length-1]);delete this._events[a];
return this};d.prototype.listeners=function(a){return this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]};d.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(b(a))return 1;if(a)return a.length}return 0};d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],34:[function(f,k,p){k.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],n=b[4],g=b[5],l=b[6],q=b[7],m=b[8],f=b[9],k=b[10],w=b[11],x=b[12],t=b[13],u=b[14],p=b[15];d[0]=
g*(k*p-w*u)-f*(l*p-q*u)+t*(l*w-q*k);d[1]=-(c*(k*p-w*u)-f*(h*p-e*u)+t*(h*w-e*k));d[2]=c*(l*p-q*u)-g*(h*p-e*u)+t*(h*q-e*l);d[3]=-(c*(l*w-q*k)-g*(h*w-e*k)+f*(h*q-e*l));d[4]=-(n*(k*p-w*u)-m*(l*p-q*u)+x*(l*w-q*k));d[5]=a*(k*p-w*u)-m*(h*p-e*u)+x*(h*w-e*k);d[6]=-(a*(l*p-q*u)-n*(h*p-e*u)+x*(h*q-e*l));d[7]=a*(l*w-q*k)-n*(h*w-e*k)+m*(h*q-e*l);d[8]=n*(f*p-w*t)-m*(g*p-q*t)+x*(g*w-q*f);d[9]=-(a*(f*p-w*t)-m*(c*p-e*t)+x*(c*w-e*f));d[10]=a*(g*p-q*t)-n*(c*p-e*t)+x*(c*q-e*g);d[11]=-(a*(g*w-q*f)-n*(c*w-e*f)+m*(c*q-
e*g));d[12]=-(n*(f*u-k*t)-m*(g*u-l*t)+x*(g*k-l*f));d[13]=a*(f*u-k*t)-m*(c*u-h*t)+x*(c*k-h*f);d[14]=-(a*(g*u-l*t)-n*(c*u-h*t)+x*(c*l-h*g));d[15]=a*(g*k-l*f)-n*(c*k-h*f)+m*(c*l-h*g);return d}},{}],35:[function(f,k,p){k.exports=function(d){var b=new Float32Array(16);b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b}},{}],36:[function(f,k,p){k.exports=function(d,b){d[0]=b[0];
d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],37:[function(f,k,p){k.exports=function(){var d=new Float32Array(16);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],38:[function(f,k,p){k.exports=function(d){var b=d[0],a=d[1],c=d[2],h=d[3],e=d[4],n=d[5],g=d[6],l=d[7],q=d[8],m=d[9],f=d[10],
k=d[11],w=d[12],p=d[13],t=d[14];d=d[15];return(b*n-a*e)*(f*d-k*t)-(b*g-c*e)*(m*d-k*p)+(b*l-h*e)*(m*t-f*p)+(a*g-c*n)*(q*d-k*w)-(a*l-h*n)*(q*t-f*w)+(c*l-h*g)*(q*p-m*w)}},{}],39:[function(f,k,p){k.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],n=a+a,g=c+c,l=h+h,a=a*n,q=c*n,c=c*g,m=h*n,f=h*g,h=h*l,n=e*n,g=e*g,e=e*l;d[0]=1-c-h;d[1]=q+e;d[2]=m-g;d[3]=0;d[4]=q-e;d[5]=1-a-h;d[6]=f+n;d[7]=0;d[8]=m+g;d[9]=f-n;d[10]=1-a-c;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],40:[function(f,k,p){k.exports=
function(d,b,a){var c=b[0],h=b[1],e=b[2],n=b[3],g=c+c,l=h+h,q=e+e;b=c*g;var m=c*l,c=c*q,f=h*l,h=h*q,e=e*q,g=n*g,l=n*l,n=n*q;d[0]=1-(f+e);d[1]=m+n;d[2]=c-l;d[3]=0;d[4]=m-n;d[5]=1-(b+e);d[6]=h+g;d[7]=0;d[8]=c+l;d[9]=h-g;d[10]=1-(b+f);d[11]=0;d[12]=a[0];d[13]=a[1];d[14]=a[2];d[15]=1;return d}},{}],41:[function(f,k,p){k.exports=function(d,b,a,c,h,e,n){var g=1/(a-b),l=1/(h-c),q=1/(e-n);d[0]=2*e*g;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=2*e*l;d[6]=0;d[7]=0;d[8]=(a+b)*g;d[9]=(h+c)*l;d[10]=(n+e)*q;d[11]=-1;d[12]=
0;d[13]=0;d[14]=n*e*2*q;d[15]=0;return d}},{}],42:[function(f,k,p){k.exports=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],43:[function(f,k,p){k.exports={create:f("./create"),clone:f("./clone"),copy:f("./copy"),identity:f("./identity"),transpose:f("./transpose"),invert:f("./invert"),adjoint:f("./adjoint"),determinant:f("./determinant"),multiply:f("./multiply"),translate:f("./translate"),scale:f("./scale"),
rotate:f("./rotate"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),fromRotationTranslation:f("./fromRotationTranslation"),fromQuat:f("./fromQuat"),frustum:f("./frustum"),perspective:f("./perspective"),perspectiveFromFieldOfView:f("./perspectiveFromFieldOfView"),ortho:f("./ortho"),lookAt:f("./lookAt"),str:f("./str")}},{"./adjoint":34,"./clone":35,"./copy":36,"./create":37,"./determinant":38,"./fromQuat":39,"./fromRotationTranslation":40,"./frustum":41,"./identity":42,"./invert":44,
"./lookAt":45,"./multiply":46,"./ortho":47,"./perspective":48,"./perspectiveFromFieldOfView":49,"./rotate":50,"./rotateX":51,"./rotateY":52,"./rotateZ":53,"./scale":54,"./str":55,"./translate":56,"./transpose":57}],44:[function(f,k,p){k.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],n=b[4],g=b[5],l=b[6],q=b[7],m=b[8],f=b[9],k=b[10],w=b[11],p=b[12],t=b[13],u=b[14],z=b[15],v=a*g-c*n,B=a*l-h*n,C=a*q-e*n,A=c*l-h*g,D=c*q-e*g,E=h*q-e*l,F=m*t-f*p,I=m*u-k*p,H=m*z-w*p,K=f*u-k*t,M=f*z-w*t,O=k*z-w*u,
J=v*O-B*M+C*K+A*H-D*I+E*F;if(!J)return null;J=1/J;d[0]=(g*O-l*M+q*K)*J;d[1]=(h*M-c*O-e*K)*J;d[2]=(t*E-u*D+z*A)*J;d[3]=(k*D-f*E-w*A)*J;d[4]=(l*H-n*O-q*I)*J;d[5]=(a*O-h*H+e*I)*J;d[6]=(u*C-p*E-z*B)*J;d[7]=(m*E-k*C+w*B)*J;d[8]=(n*M-g*H+q*F)*J;d[9]=(c*H-a*M-e*F)*J;d[10]=(p*D-t*C+z*v)*J;d[11]=(f*C-m*D-w*v)*J;d[12]=(g*I-n*K-l*F)*J;d[13]=(a*K-c*I+h*F)*J;d[14]=(t*B-p*A-u*v)*J;d[15]=(m*A-f*B+k*v)*J;return d}},{}],45:[function(f,k,p){var d=f("./identity");k.exports=function(b,a,c,h){var e,n,g,l,q,m,f,k,w=a[0],
p=a[1];a=a[2];g=h[0];l=h[1];n=h[2];f=c[0];h=c[1];e=c[2];if(1E-6>Math.abs(w-f)&&1E-6>Math.abs(p-h)&&1E-6>Math.abs(a-e))return d(b);c=w-f;h=p-h;f=a-e;k=1/Math.sqrt(c*c+h*h+f*f);c*=k;h*=k;f*=k;e=l*f-n*h;n=n*c-g*f;g=g*h-l*c;(k=Math.sqrt(e*e+n*n+g*g))?(k=1/k,e*=k,n*=k,g*=k):g=n=e=0;l=h*g-f*n;q=f*e-c*g;m=c*n-h*e;(k=Math.sqrt(l*l+q*q+m*m))?(k=1/k,l*=k,q*=k,m*=k):m=q=l=0;b[0]=e;b[1]=l;b[2]=c;b[3]=0;b[4]=n;b[5]=q;b[6]=h;b[7]=0;b[8]=g;b[9]=m;b[10]=f;b[11]=0;b[12]=-(e*w+n*p+g*a);b[13]=-(l*w+q*p+m*a);b[14]=-(c*
w+h*p+f*a);b[15]=1;return b}},{"./identity":42}],46:[function(f,k,p){k.exports=function(d,b,a){var c=b[0],h=b[1],e=b[2],n=b[3],g=b[4],l=b[5],q=b[6],m=b[7],f=b[8],k=b[9],w=b[10],p=b[11],t=b[12],u=b[13],z=b[14];b=b[15];var v=a[0],B=a[1],C=a[2],A=a[3];d[0]=v*c+B*g+C*f+A*t;d[1]=v*h+B*l+C*k+A*u;d[2]=v*e+B*q+C*w+A*z;d[3]=v*n+B*m+C*p+A*b;v=a[4];B=a[5];C=a[6];A=a[7];d[4]=v*c+B*g+C*f+A*t;d[5]=v*h+B*l+C*k+A*u;d[6]=v*e+B*q+C*w+A*z;d[7]=v*n+B*m+C*p+A*b;v=a[8];B=a[9];C=a[10];A=a[11];d[8]=v*c+B*g+C*f+A*t;d[9]=
v*h+B*l+C*k+A*u;d[10]=v*e+B*q+C*w+A*z;d[11]=v*n+B*m+C*p+A*b;v=a[12];B=a[13];C=a[14];A=a[15];d[12]=v*c+B*g+C*f+A*t;d[13]=v*h+B*l+C*k+A*u;d[14]=v*e+B*q+C*w+A*z;d[15]=v*n+B*m+C*p+A*b;return d}},{}],47:[function(f,k,p){k.exports=function(d,b,a,c,h,e,n){var g=1/(b-a),l=1/(c-h),q=1/(e-n);d[0]=-2*g;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=-2*l;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=2*q;d[11]=0;d[12]=(b+a)*g;d[13]=(h+c)*l;d[14]=(n+e)*q;d[15]=1;return d}},{}],48:[function(f,k,p){k.exports=function(d,b,a,c,h){b=1/Math.tan(b/
2);var e=1/(c-h);d[0]=b/a;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=b;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=(h+c)*e;d[11]=-1;d[12]=0;d[13]=0;d[14]=2*h*c*e;d[15]=0;return d}},{}],49:[function(f,k,p){k.exports=function(d,b,a,c){var h=Math.tan(b.upDegrees*Math.PI/180),e=Math.tan(b.downDegrees*Math.PI/180),n=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var g=2/(n+b),l=2/(h+e);d[0]=g;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=l;d[6]=0;d[7]=0;d[8]=-((n-b)*g*.5);d[9]=(h-e)*l*.5;d[10]=c/(a-c);d[11]=
-1;d[12]=0;d[13]=0;d[14]=c*a/(a-c);d[15]=0;return d}},{}],50:[function(f,k,p){k.exports=function(d,b,a,c){var h=c[0],e=c[1];c=c[2];var n=Math.sqrt(h*h+e*e+c*c),g,l,q,m,f,k,w,p,t,u,z,v,B,C,A,D,E,F,I,H;if(1E-6>Math.abs(n))return null;n=1/n;h*=n;e*=n;c*=n;g=Math.sin(a);l=Math.cos(a);q=1-l;a=b[0];n=b[1];m=b[2];f=b[3];k=b[4];w=b[5];p=b[6];t=b[7];u=b[8];z=b[9];v=b[10];B=b[11];C=h*h*q+l;A=e*h*q+c*g;D=c*h*q-e*g;E=h*e*q-c*g;F=e*e*q+l;I=c*e*q+h*g;H=h*c*q+e*g;h=e*c*q-h*g;e=c*c*q+l;d[0]=a*C+k*A+u*D;d[1]=n*C+
w*A+z*D;d[2]=m*C+p*A+v*D;d[3]=f*C+t*A+B*D;d[4]=a*E+k*F+u*I;d[5]=n*E+w*F+z*I;d[6]=m*E+p*F+v*I;d[7]=f*E+t*F+B*I;d[8]=a*H+k*h+u*e;d[9]=n*H+w*h+z*e;d[10]=m*H+p*h+v*e;d[11]=f*H+t*h+B*e;b!==d&&(d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);return d}},{}],51:[function(f,k,p){k.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[4],e=b[5],n=b[6],g=b[7],l=b[8],q=b[9],m=b[10],f=b[11];b!==d&&(d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=b[3],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[4]=h*a+l*c;
d[5]=e*a+q*c;d[6]=n*a+m*c;d[7]=g*a+f*c;d[8]=l*a-h*c;d[9]=q*a-e*c;d[10]=m*a-n*c;d[11]=f*a-g*c;return d}},{}],52:[function(f,k,p){k.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[0],e=b[1],n=b[2],g=b[3],l=b[8],q=b[9],m=b[10],f=b[11];b!==d&&(d[4]=b[4],d[5]=b[5],d[6]=b[6],d[7]=b[7],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=h*a-l*c;d[1]=e*a-q*c;d[2]=n*a-m*c;d[3]=g*a-f*c;d[8]=h*c+l*a;d[9]=e*c+q*a;d[10]=n*c+m*a;d[11]=g*c+f*a;return d}},{}],53:[function(f,k,p){k.exports=function(d,
b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[0],e=b[1],n=b[2],g=b[3],l=b[4],q=b[5],m=b[6],f=b[7];b!==d&&(d[8]=b[8],d[9]=b[9],d[10]=b[10],d[11]=b[11],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=h*a+l*c;d[1]=e*a+q*c;d[2]=n*a+m*c;d[3]=g*a+f*c;d[4]=l*a-h*c;d[5]=q*a-e*c;d[6]=m*a-n*c;d[7]=f*a-g*c;return d}},{}],54:[function(f,k,p){k.exports=function(d,b,a){var c=a[0],h=a[1];a=a[2];d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;d[3]=b[3]*c;d[4]=b[4]*h;d[5]=b[5]*h;d[6]=b[6]*h;d[7]=b[7]*h;d[8]=b[8]*a;d[9]=
b[9]*a;d[10]=b[10]*a;d[11]=b[11]*a;d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],55:[function(f,k,p){k.exports=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}},{}],56:[function(f,k,p){k.exports=function(d,b,a){var c=a[0],h=a[1];a=a[2];var e,n,g,l,q,m,f,k,w,p,t,u;b===d?(d[12]=b[0]*c+b[4]*h+b[8]*a+b[12],d[13]=b[1]*c+b[5]*h+b[9]*a+b[13],d[14]=
b[2]*c+b[6]*h+b[10]*a+b[14],d[15]=b[3]*c+b[7]*h+b[11]*a+b[15]):(e=b[0],n=b[1],g=b[2],l=b[3],q=b[4],m=b[5],f=b[6],k=b[7],w=b[8],p=b[9],t=b[10],u=b[11],d[0]=e,d[1]=n,d[2]=g,d[3]=l,d[4]=q,d[5]=m,d[6]=f,d[7]=k,d[8]=w,d[9]=p,d[10]=t,d[11]=u,d[12]=e*c+q*h+w*a+b[12],d[13]=n*c+m*h+p*a+b[13],d[14]=g*c+f*h+t*a+b[14],d[15]=l*c+k*h+u*a+b[15]);return d}},{}],57:[function(f,k,p){k.exports=function(d,b){if(d===b){var a=b[1],c=b[2],h=b[3],e=b[6],n=b[7],g=b[11];d[1]=b[4];d[2]=b[8];d[3]=b[12];d[4]=a;d[6]=b[9];d[7]=
b[13];d[8]=c;d[9]=e;d[11]=b[14];d[12]=h;d[13]=n;d[14]=g}else d[0]=b[0],d[1]=b[4],d[2]=b[8],d[3]=b[12],d[4]=b[1],d[5]=b[5],d[6]=b[9],d[7]=b[13],d[8]=b[2],d[9]=b[6],d[10]=b[10],d[11]=b[14],d[12]=b[3],d[13]=b[7],d[14]=b[11],d[15]=b[15];return d}},{}],58:[function(f,k,p){p.glMatrix=f("./gl-matrix/common.js");p.mat2=f("./gl-matrix/mat2.js");p.mat2d=f("./gl-matrix/mat2d.js");p.mat3=f("./gl-matrix/mat3.js");p.mat4=f("./gl-matrix/mat4.js");p.quat=f("./gl-matrix/quat.js");p.vec2=f("./gl-matrix/vec2.js");p.vec3=
f("./gl-matrix/vec3.js");p.vec4=f("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":59,"./gl-matrix/mat2.js":60,"./gl-matrix/mat2d.js":61,"./gl-matrix/mat3.js":62,"./gl-matrix/mat4.js":63,"./gl-matrix/quat.js":64,"./gl-matrix/vec2.js":65,"./gl-matrix/vec3.js":66,"./gl-matrix/vec4.js":67}],59:[function(f,k,p){var d={EPSILON:1E-6};d.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;d.ENABLE_SIMD=!1;d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this;d.USE_SIMD=
d.ENABLE_SIMD&&d.SIMD_AVAILABLE;d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var b=Math.PI/180;d.toRadian=function(a){return a*b};d.equals=function(a,c){return Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};k.exports=d},{}],60:[function(f,k,p){var d=f("./common.js");f={create:function(){var b=new d.ARRAY_TYPE(4);b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},clone:function(b){var a=new d.ARRAY_TYPE(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},fromValues:function(b,a,c,h){var e=new d.ARRAY_TYPE(4);e[0]=b;e[1]=a;e[2]=c;e[3]=h;return e},set:function(b,a,c,h,e){b[0]=a;b[1]=c;b[2]=h;b[3]=e;return b},transpose:function(b,a){if(b===a){var c=a[1];b[1]=a[2];b[2]=c}else b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3];return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],d=a[3],g=c*d-e*h;if(!g)return null;g=1/g;b[0]=d*g;b[1]=-h*g;b[2]=-e*g;b[3]=c*g;return b},adjoint:function(b,
a){var c=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=c;return b},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},multiply:function(b,a,c){var h=a[0],e=a[1],d=a[2];a=a[3];var g=c[0],l=c[1],q=c[2];c=c[3];b[0]=h*g+d*l;b[1]=e*g+a*l;b[2]=h*q+d*c;b[3]=e*q+a*c;return b}};f.mul=f.multiply;f.rotate=function(b,a,c){var h=a[0],e=a[1],d=a[2];a=a[3];var g=Math.sin(c);c=Math.cos(c);b[0]=h*c+d*g;b[1]=e*c+a*g;b[2]=h*-g+d*c;b[3]=e*-g+a*c;return b};f.scale=function(b,a,c){var h=a[1],e=a[2],d=a[3],g=c[0];c=c[1];b[0]=
a[0]*g;b[1]=h*g;b[2]=e*c;b[3]=d*c;return b};f.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=-c;b[3]=h;return b};f.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};f.str=function(b){return"mat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};f.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2))};f.LDU=function(b,a,c,h){b[2]=h[2]/h[0];c[0]=h[0];c[1]=h[1];c[3]=h[3]-b[2]*c[1];return[b,a,c]};f.add=function(b,
a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];return b};f.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b};f.sub=f.subtract;f.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};f.equals=function(b,a){var c=b[0],h=b[1],e=b[2],n=b[3],g=a[0],l=a[1],q=a[2],m=a[3];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-l)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(e-
q)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(q))&&Math.abs(n-m)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))};f.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};f.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;return b};k.exports=f},{"./common.js":59}],61:[function(f,k,p){var d=f("./common.js");f={create:function(){var b=new d.ARRAY_TYPE(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var a=
new d.ARRAY_TYPE(6);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},fromValues:function(b,a,c,h,e,n){var g=new d.ARRAY_TYPE(6);g[0]=b;g[1]=a;g[2]=c;g[3]=h;g[4]=e;g[5]=n;return g},set:function(b,a,c,h,e,d,g){b[0]=a;b[1]=c;b[2]=h;b[3]=e;b[4]=d;b[5]=g;return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],d=a[3],g=a[4],
l=a[5],q=c*d-h*e;if(!q)return null;q=1/q;b[0]=d*q;b[1]=-h*q;b[2]=-e*q;b[3]=c*q;b[4]=(e*l-d*g)*q;b[5]=(h*g-c*l)*q;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4];a=a[5];var q=c[0],m=c[1],f=c[2],k=c[3],p=c[4];c=c[5];b[0]=h*q+d*m;b[1]=e*q+g*m;b[2]=h*f+d*k;b[3]=e*f+g*k;b[4]=h*p+d*c+l;b[5]=e*p+g*c+a;return b}};f.mul=f.multiply;f.rotate=function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4];a=a[5];var q=Math.sin(c);c=Math.cos(c);
b[0]=h*c+d*q;b[1]=e*c+g*q;b[2]=h*-q+d*c;b[3]=e*-q+g*c;b[4]=l;b[5]=a;return b};f.scale=function(b,a,c){var h=a[1],e=a[2],d=a[3],g=a[4],l=a[5],q=c[0];c=c[1];b[0]=a[0]*q;b[1]=h*q;b[2]=e*c;b[3]=d*c;b[4]=g;b[5]=l;return b};f.translate=function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4];a=a[5];var q=c[0];c=c[1];b[0]=h;b[1]=e;b[2]=d;b[3]=g;b[4]=h*q+d*c+l;b[5]=e*q+g*c+a;return b};f.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=-c;b[3]=h;b[4]=0;b[5]=0;return b};f.fromScaling=
function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];b[4]=0;b[5]=0;return b};f.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=a[0];b[5]=a[1];return b};f.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};f.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};f.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+
c[5];return b};f.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];return b};f.sub=f.subtract;f.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;return b};f.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;b[4]=a[4]+c[4]*h;b[5]=a[5]+c[5]*h;return b};f.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&
b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]};f.equals=function(b,a){var c=b[0],h=b[1],e=b[2],n=b[3],g=b[4],l=b[5],q=a[0],m=a[1],f=a[2],k=a[3],p=a[4],x=a[5];return Math.abs(c-q)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(h-m)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(e-f)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-k)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(k))&&Math.abs(g-p)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(l-x)<=d.EPSILON*Math.max(1,
Math.abs(l),Math.abs(x))};k.exports=f},{"./common.js":59}],62:[function(f,k,p){var d=f("./common.js");f={create:function(){var b=new d.ARRAY_TYPE(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},clone:function(b){var a=new d.ARRAY_TYPE(9);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},copy:function(b,
a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},fromValues:function(b,a,c,h,e,n,g,l,q){var m=new d.ARRAY_TYPE(9);m[0]=b;m[1]=a;m[2]=c;m[3]=h;m[4]=e;m[5]=n;m[6]=g;m[7]=l;m[8]=q;return m},set:function(b,a,c,h,e,d,g,l,q,m){b[0]=a;b[1]=c;b[2]=h;b[3]=e;b[4]=d;b[5]=g;b[6]=l;b[7]=q;b[8]=m;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,a){if(b===a){var c=a[1],h=a[2],e=a[5];
b[1]=a[3];b[2]=a[6];b[3]=c;b[5]=a[7];b[6]=h;b[7]=e}else b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8];return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],d=a[3],g=a[4],l=a[5],q=a[6],m=a[7],f=a[8],k=f*g-l*m,p=-f*d+l*q,x=m*d-g*q,t=c*k+h*p+e*x;if(!t)return null;t=1/t;b[0]=k*t;b[1]=(-f*h+e*m)*t;b[2]=(l*h-e*g)*t;b[3]=p*t;b[4]=(f*c-e*q)*t;b[5]=(-l*c+e*d)*t;b[6]=x*t;b[7]=(-m*c+h*q)*t;b[8]=(g*c-h*d)*t;return b},adjoint:function(b,a){var c=a[0],h=a[1],e=a[2],
d=a[3],g=a[4],l=a[5],q=a[6],m=a[7],f=a[8];b[0]=g*f-l*m;b[1]=e*m-h*f;b[2]=h*l-e*g;b[3]=l*q-d*f;b[4]=c*f-e*q;b[5]=e*d-c*l;b[6]=d*m-g*q;b[7]=h*q-c*m;b[8]=c*g-h*d;return b},determinant:function(b){var a=b[3],c=b[4],h=b[5],e=b[6],d=b[7],g=b[8];return b[0]*(g*c-h*d)+b[1]*(-g*a+h*e)+b[2]*(d*a-c*e)},multiply:function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4],f=a[5],m=a[6],k=a[7];a=a[8];var r=c[0],p=c[1],x=c[2],t=c[3],u=c[4],z=c[5],v=c[6],B=c[7];c=c[8];b[0]=r*h+p*g+x*m;b[1]=r*e+p*l+x*k;b[2]=r*d+p*f+x*
a;b[3]=t*h+u*g+z*m;b[4]=t*e+u*l+z*k;b[5]=t*d+u*f+z*a;b[6]=v*h+B*g+c*m;b[7]=v*e+B*l+c*k;b[8]=v*d+B*f+c*a;return b}};f.mul=f.multiply;f.translate=function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4],f=a[5],m=a[6],k=a[7];a=a[8];var r=c[0];c=c[1];b[0]=h;b[1]=e;b[2]=d;b[3]=g;b[4]=l;b[5]=f;b[6]=r*h+c*g+m;b[7]=r*e+c*l+k;b[8]=r*d+c*f+a;return b};f.rotate=function(b,a,c){var h=a[0],e=a[1],d=a[2],g=a[3],l=a[4],f=a[5],m=a[6],k=a[7];a=a[8];var r=Math.sin(c);c=Math.cos(c);b[0]=c*h+r*g;b[1]=c*e+r*l;b[2]=c*d+
r*f;b[3]=c*g-r*h;b[4]=c*l-r*e;b[5]=c*f-r*d;b[6]=m;b[7]=k;b[8]=a;return b};f.scale=function(b,a,c){var h=c[0];c=c[1];b[0]=h*a[0];b[1]=h*a[1];b[2]=h*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};f.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};f.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=0;b[3]=-c;b[4]=h;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};f.fromScaling=function(b,a){b[0]=
a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};f.fromMat2d=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=0;b[3]=a[2];b[4]=a[3];b[5]=0;b[6]=a[4];b[7]=a[5];b[8]=1;return b};f.fromQuat=function(b,a){var c=a[0],h=a[1],e=a[2],d=a[3],g=c+c,l=h+h,f=e+e,c=c*g,m=h*g,h=h*l,k=e*g,r=e*l,e=e*f,g=d*g,l=d*l,d=d*f;b[0]=1-h-e;b[3]=m-d;b[6]=k+l;b[1]=m+d;b[4]=1-c-e;b[7]=r-g;b[2]=k-l;b[5]=r+g;b[8]=1-c-h;return b};f.normalFromMat4=function(b,a){var c=a[0],h=a[1],e=a[2],d=a[3],g=a[4],l=a[5],f=a[6],
m=a[7],k=a[8],r=a[9],p=a[10],x=a[11],t=a[12],u=a[13],z=a[14],v=a[15],B=c*l-h*g,C=c*f-e*g,A=c*m-d*g,D=h*f-e*l,E=h*m-d*l,F=e*m-d*f,I=k*u-r*t,H=k*z-p*t,k=k*v-x*t,K=r*z-p*u,r=r*v-x*u,p=p*v-x*z,x=B*p-C*r+A*K+D*k-E*H+F*I;if(!x)return null;x=1/x;b[0]=(l*p-f*r+m*K)*x;b[1]=(f*k-g*p-m*H)*x;b[2]=(g*r-l*k+m*I)*x;b[3]=(e*r-h*p-d*K)*x;b[4]=(c*p-e*k+d*H)*x;b[5]=(h*k-c*r-d*I)*x;b[6]=(u*F-z*E+v*D)*x;b[7]=(z*A-t*F-v*C)*x;b[8]=(t*E-u*A+v*B)*x;return b};f.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+
", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};f.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};f.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];return b};f.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=
a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];return b};f.sub=f.subtract;f.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;return b};f.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;b[4]=a[4]+c[4]*h;b[5]=a[5]+c[5]*h;b[6]=a[6]+c[6]*h;b[7]=a[7]+c[7]*h;b[8]=a[8]+c[8]*h;return b};f.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===
a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]};f.equals=function(b,a){var c=b[0],h=b[1],e=b[2],n=b[3],g=b[4],l=b[5],f=b[6],m=b[7],k=b[8],r=a[0],p=a[1],x=a[2],t=a[3],u=a[4],z=a[5],v=b[6],B=a[7],C=a[8];return Math.abs(c-r)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(h-p)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(e-x)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(n-t)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&
Math.abs(g-u)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(l-z)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(f-v)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(m-B)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(k-C)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))};k.exports=f},{"./common.js":59}],63:[function(f,k,p){var d=f("./common.js"),b={scalar:{},SIMD:{},create:function(){var a=new d.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;
a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var c=new d.ARRAY_TYPE(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},
fromValues:function(a,c,b,e,n,g,l,f,m,k,r,p,x,t,u,z){var v=new d.ARRAY_TYPE(16);v[0]=a;v[1]=c;v[2]=b;v[3]=e;v[4]=n;v[5]=g;v[6]=l;v[7]=f;v[8]=m;v[9]=k;v[10]=r;v[11]=p;v[12]=x;v[13]=t;v[14]=u;v[15]=z;return v},set:function(a,c,b,e,d,g,l,f,m,k,r,p,x,t,u,z,v){a[0]=c;a[1]=b;a[2]=e;a[3]=d;a[4]=g;a[5]=l;a[6]=f;a[7]=m;a[8]=k;a[9]=r;a[10]=p;a[11]=x;a[12]=t;a[13]=u;a[14]=z;a[15]=v;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a}};b.scalar.transpose=function(a,c){if(a===c){var b=c[1],e=c[2],d=c[3],g=c[6],l=c[7],f=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=e;a[9]=g;a[11]=c[14];a[12]=d;a[13]=l;a[14]=f}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};b.SIMD.transpose=function(a,c){var b,e,d,g,l,f,m;b=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.load(c,
4);d=SIMD.Float32x4.load(c,8);g=SIMD.Float32x4.load(c,12);l=SIMD.Float32x4.shuffle(b,e,0,1,4,5);f=SIMD.Float32x4.shuffle(d,g,0,1,4,5);m=SIMD.Float32x4.shuffle(l,f,0,2,4,6);l=SIMD.Float32x4.shuffle(l,f,1,3,5,7);SIMD.Float32x4.store(a,0,m);SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.shuffle(b,e,2,3,6,7);f=SIMD.Float32x4.shuffle(d,g,2,3,6,7);b=SIMD.Float32x4.shuffle(l,f,0,2,4,6);e=SIMD.Float32x4.shuffle(l,f,1,3,5,7);SIMD.Float32x4.store(a,8,b);SIMD.Float32x4.store(a,12,e);return a};b.transpose=d.USE_SIMD?
b.SIMD.transpose:b.scalar.transpose;b.scalar.invert=function(a,c){var b=c[0],e=c[1],d=c[2],g=c[3],l=c[4],f=c[5],m=c[6],k=c[7],r=c[8],p=c[9],x=c[10],t=c[11],u=c[12],z=c[13],v=c[14],B=c[15],C=b*f-e*l,A=b*m-d*l,D=b*k-g*l,E=e*m-d*f,F=e*k-g*f,I=d*k-g*m,H=r*z-p*u,K=r*v-x*u,M=r*B-t*u,O=p*v-x*z,J=p*B-t*z,L=x*B-t*v,G=C*L-A*J+D*O+E*M-F*K+I*H;if(!G)return null;G=1/G;a[0]=(f*L-m*J+k*O)*G;a[1]=(d*J-e*L-g*O)*G;a[2]=(z*I-v*F+B*E)*G;a[3]=(x*F-p*I-t*E)*G;a[4]=(m*M-l*L-k*K)*G;a[5]=(b*L-d*M+g*K)*G;a[6]=(v*D-u*I-B*A)*
G;a[7]=(r*I-x*D+t*A)*G;a[8]=(l*J-f*M+k*H)*G;a[9]=(e*M-b*J-g*H)*G;a[10]=(u*F-z*D+B*C)*G;a[11]=(p*D-r*F-t*C)*G;a[12]=(f*K-l*O-m*H)*G;a[13]=(b*O-e*K+d*H)*G;a[14]=(z*A-u*E-v*C)*G;a[15]=(r*E-p*A+x*C)*G;return a};b.SIMD.invert=function(a,c){var b,e,d,g,l,f,m,k,r;f=SIMD.Float32x4.load(c,0);m=SIMD.Float32x4.load(c,4);k=SIMD.Float32x4.load(c,8);r=SIMD.Float32x4.load(c,12);l=SIMD.Float32x4.shuffle(f,m,0,1,4,5);e=SIMD.Float32x4.shuffle(k,r,0,1,4,5);b=SIMD.Float32x4.shuffle(l,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,
l,1,3,5,7);l=SIMD.Float32x4.shuffle(f,m,2,3,6,7);g=SIMD.Float32x4.shuffle(k,r,2,3,6,7);d=SIMD.Float32x4.shuffle(l,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,l,1,3,5,7);l=SIMD.Float32x4.mul(d,g);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.mul(e,l);m=SIMD.Float32x4.mul(b,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),f);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);l=SIMD.Float32x4.mul(e,d);l=SIMD.Float32x4.swizzle(l,1,0,
3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,l),f);r=SIMD.Float32x4.mul(b,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(g,l));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),g);l=SIMD.Float32x4.swizzle(l,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),f);k=SIMD.Float32x4.mul(b,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(f,
SIMD.Float32x4.mul(d,l));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);l=SIMD.Float32x4.mul(b,e);l=SIMD.Float32x4.swizzle(l,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,l),k);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),r);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,l),k);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(d,l));l=SIMD.Float32x4.mul(b,g);l=SIMD.Float32x4.swizzle(l,1,0,3,2);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,
l));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),k);l=SIMD.Float32x4.swizzle(l,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),m);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,l));l=SIMD.Float32x4.mul(b,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,l),m);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(e,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(g,l));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),r);b=SIMD.Float32x4.mul(b,f);b=
SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,2,3,0,1),b);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,1,0,3,2),b);l=SIMD.Float32x4.reciprocalApproximation(b);b=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(b,SIMD.Float32x4.mul(l,l)));b=SIMD.Float32x4.swizzle(b,0,0,0,0);if(!b)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,f));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,m));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,k));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(b,
r));return a};b.invert=d.USE_SIMD?b.SIMD.invert:b.scalar.invert;b.scalar.adjoint=function(a,c){var b=c[0],e=c[1],d=c[2],g=c[3],l=c[4],f=c[5],m=c[6],k=c[7],r=c[8],p=c[9],x=c[10],t=c[11],u=c[12],z=c[13],v=c[14],B=c[15];a[0]=f*(x*B-t*v)-p*(m*B-k*v)+z*(m*t-k*x);a[1]=-(e*(x*B-t*v)-p*(d*B-g*v)+z*(d*t-g*x));a[2]=e*(m*B-k*v)-f*(d*B-g*v)+z*(d*k-g*m);a[3]=-(e*(m*t-k*x)-f*(d*t-g*x)+p*(d*k-g*m));a[4]=-(l*(x*B-t*v)-r*(m*B-k*v)+u*(m*t-k*x));a[5]=b*(x*B-t*v)-r*(d*B-g*v)+u*(d*t-g*x);a[6]=-(b*(m*B-k*v)-l*(d*B-g*v)+
u*(d*k-g*m));a[7]=b*(m*t-k*x)-l*(d*t-g*x)+r*(d*k-g*m);a[8]=l*(p*B-t*z)-r*(f*B-k*z)+u*(f*t-k*p);a[9]=-(b*(p*B-t*z)-r*(e*B-g*z)+u*(e*t-g*p));a[10]=b*(f*B-k*z)-l*(e*B-g*z)+u*(e*k-g*f);a[11]=-(b*(f*t-k*p)-l*(e*t-g*p)+r*(e*k-g*f));a[12]=-(l*(p*v-x*z)-r*(f*v-m*z)+u*(f*x-m*p));a[13]=b*(p*v-x*z)-r*(e*v-d*z)+u*(e*x-d*p);a[14]=-(b*(f*v-m*z)-l*(e*v-d*z)+u*(e*m-d*f));a[15]=b*(f*x-m*p)-l*(e*x-d*p)+r*(e*m-d*f);return a};b.SIMD.adjoint=function(a,c){var b,e,d,g,l,f,m,k,p;b=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.load(c,
4);d=SIMD.Float32x4.load(c,8);g=SIMD.Float32x4.load(c,12);m=SIMD.Float32x4.shuffle(b,e,0,1,4,5);f=SIMD.Float32x4.shuffle(d,g,0,1,4,5);l=SIMD.Float32x4.shuffle(m,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,m,1,3,5,7);m=SIMD.Float32x4.shuffle(b,e,2,3,6,7);e=SIMD.Float32x4.shuffle(d,g,2,3,6,7);b=SIMD.Float32x4.shuffle(m,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,m,1,3,5,7);m=SIMD.Float32x4.mul(b,e);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.mul(f,m);g=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,
2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,m),d);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);m=SIMD.Float32x4.mul(f,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,m),d);p=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(e,m));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);m=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),e);
m=SIMD.Float32x4.swizzle(m,1,0,3,2);b=SIMD.Float32x4.swizzle(b,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),d);k=SIMD.Float32x4.mul(l,m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(b,m));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,m),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);m=SIMD.Float32x4.mul(l,f);m=SIMD.Float32x4.swizzle(m,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,m),k);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,m),p);m=SIMD.Float32x4.swizzle(m,2,
3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,m),k);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(b,m));m=SIMD.Float32x4.mul(l,e);m=SIMD.Float32x4.swizzle(m,1,0,3,2);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(b,m));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,m),k);m=SIMD.Float32x4.swizzle(m,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,m),g);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,m));m=SIMD.Float32x4.mul(l,b);m=SIMD.Float32x4.swizzle(m,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,m),g);
p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(f,m));m=SIMD.Float32x4.swizzle(m,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,m));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,m),p);SIMD.Float32x4.store(a,0,d);SIMD.Float32x4.store(a,4,g);SIMD.Float32x4.store(a,8,k);SIMD.Float32x4.store(a,12,p);return a};b.adjoint=d.USE_SIMD?b.SIMD.adjoint:b.scalar.adjoint;b.determinant=function(a){var c=a[0],b=a[1],e=a[2],d=a[3],g=a[4],l=a[5],f=a[6],m=a[7],k=a[8],p=a[9],w=a[10],x=a[11],t=a[12],u=a[13],z=a[14];a=a[15];
return(c*l-b*g)*(w*a-x*z)-(c*f-e*g)*(p*a-x*u)+(c*m-d*g)*(p*z-w*u)+(b*f-e*l)*(k*a-x*t)-(b*m-d*l)*(k*z-w*t)+(e*m-d*f)*(k*u-p*t)};b.SIMD.multiply=function(a,c,b){var e=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),g=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var l=SIMD.Float32x4.load(b,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,0,l);l=SIMD.Float32x4.load(b,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.load(b,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),c))));SIMD.Float32x4.store(a,8,l);b=SIMD.Float32x4.load(b,12);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,1,1,1,1),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,2,2,2,2),
g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,3,3,3,3),c))));SIMD.Float32x4.store(a,12,e);return a};b.scalar.multiply=function(a,c,b){var e=c[0],d=c[1],g=c[2],l=c[3],f=c[4],m=c[5],k=c[6],p=c[7],w=c[8],x=c[9],t=c[10],u=c[11],z=c[12],v=c[13],B=c[14];c=c[15];var C=b[0],A=b[1],D=b[2],E=b[3];a[0]=C*e+A*f+D*w+E*z;a[1]=C*d+A*m+D*x+E*v;a[2]=C*g+A*k+D*t+E*B;a[3]=C*l+A*p+D*u+E*c;C=b[4];A=b[5];D=b[6];E=b[7];a[4]=C*e+A*f+D*w+E*z;a[5]=C*d+A*m+D*x+E*v;a[6]=C*g+A*k+D*t+E*B;a[7]=C*l+A*p+D*u+E*c;C=b[8];A=b[9];D=
b[10];E=b[11];a[8]=C*e+A*f+D*w+E*z;a[9]=C*d+A*m+D*x+E*v;a[10]=C*g+A*k+D*t+E*B;a[11]=C*l+A*p+D*u+E*c;C=b[12];A=b[13];D=b[14];E=b[15];a[12]=C*e+A*f+D*w+E*z;a[13]=C*d+A*m+D*x+E*v;a[14]=C*g+A*k+D*t+E*B;a[15]=C*l+A*p+D*u+E*c;return a};b.multiply=d.USE_SIMD?b.SIMD.multiply:b.scalar.multiply;b.mul=b.multiply;b.scalar.translate=function(a,c,b){var e=b[0],d=b[1];b=b[2];var g,l,f,m,k,p,w,x,t,u,z,v;c===a?(a[12]=c[0]*e+c[4]*d+c[8]*b+c[12],a[13]=c[1]*e+c[5]*d+c[9]*b+c[13],a[14]=c[2]*e+c[6]*d+c[10]*b+c[14],a[15]=
c[3]*e+c[7]*d+c[11]*b+c[15]):(g=c[0],l=c[1],f=c[2],m=c[3],k=c[4],p=c[5],w=c[6],x=c[7],t=c[8],u=c[9],z=c[10],v=c[11],a[0]=g,a[1]=l,a[2]=f,a[3]=m,a[4]=k,a[5]=p,a[6]=w,a[7]=x,a[8]=t,a[9]=u,a[10]=z,a[11]=v,a[12]=g*e+k*d+t*b+c[12],a[13]=l*e+p*d+u*b+c[13],a[14]=f*e+w*d+z*b+c[14],a[15]=m*e+x*d+v*b+c[15]);return a};b.SIMD.translate=function(a,c,b){var e=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.load(c,4),g=SIMD.Float32x4.load(c,8),l=SIMD.Float32x4.load(c,12);b=SIMD.Float32x4(b[0],b[1],b[2],0);c!==a&&(a[0]=
c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,0,0,0,0));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(b,1,1,1,1));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(b,2,2,2,2));c=SIMD.Float32x4.add(e,SIMD.Float32x4.add(d,SIMD.Float32x4.add(g,l)));SIMD.Float32x4.store(a,12,c);return a};b.translate=d.USE_SIMD?b.SIMD.translate:b.scalar.translate;b.scalar.scale=function(a,c,b){var e=b[0],
d=b[1];b=b[2];a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;a[3]=c[3]*e;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.SIMD.scale=function(a,c,b){var e;b=SIMD.Float32x4(b[0],b[1],b[2],0);e=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,0,0,0,0)));e=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,1,1,
1,1)));e=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.scale=d.USE_SIMD?b.SIMD.scale:b.scalar.scale;b.rotate=function(a,c,b,e){var n=e[0],g=e[1];e=e[2];var l=Math.sqrt(n*n+g*g+e*e),f,m,k,p,w,x,t,u,z,v,B,C,A,D,E,F,I,H,K,M;if(Math.abs(l)<d.EPSILON)return null;l=1/l;n*=l;g*=l;e*=l;f=Math.sin(b);m=Math.cos(b);k=1-m;b=c[0];l=c[1];p=c[2];w=c[3];x=c[4];t=c[5];u=c[6];z=c[7];v=c[8];B=c[9];
C=c[10];A=c[11];D=n*n*k+m;E=g*n*k+e*f;F=e*n*k-g*f;I=n*g*k-e*f;H=g*g*k+m;K=e*g*k+n*f;M=n*e*k+g*f;n=g*e*k-n*f;g=e*e*k+m;a[0]=b*D+x*E+v*F;a[1]=l*D+t*E+B*F;a[2]=p*D+u*E+C*F;a[3]=w*D+z*E+A*F;a[4]=b*I+x*H+v*K;a[5]=l*I+t*H+B*K;a[6]=p*I+u*H+C*K;a[7]=w*I+z*H+A*K;a[8]=b*M+x*n+v*g;a[9]=l*M+t*n+B*g;a[10]=p*M+u*n+C*g;a[11]=w*M+z*n+A*g;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};b.scalar.rotateX=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var d=c[4],g=c[5],l=c[6],f=c[7],m=c[8],k=c[9],
p=c[10],w=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=d*b+m*e;a[5]=g*b+k*e;a[6]=l*b+p*e;a[7]=f*b+w*e;a[8]=m*b-d*e;a[9]=k*b-g*e;a[10]=p*b-l*e;a[11]=w*b-f*e;return a};b.SIMD.rotateX=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,
4,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(d,e)));return a};b.rotateX=d.USE_SIMD?b.SIMD.rotateX:b.scalar.rotateX;b.scalar.rotateY=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var d=c[0],g=c[1],l=c[2],f=c[3],m=c[8],k=c[9],p=c[10],w=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*b-m*e;a[1]=g*b-k*e;a[2]=l*b-p*e;a[3]=f*b-w*
e;a[8]=d*e+m*b;a[9]=g*e+k*b;a[10]=l*e+p*b;a[11]=f*e+w*b;return a};b.SIMD.rotateY=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,e),SIMD.Float32x4.mul(c,
b)));return a};b.rotateY=d.USE_SIMD?b.SIMD.rotateY:b.scalar.rotateY;b.scalar.rotateZ=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var d=c[0],g=c[1],l=c[2],f=c[3],m=c[4],k=c[5],p=c[6],w=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*b+m*e;a[1]=g*b+k*e;a[2]=l*b+p*e;a[3]=f*b+w*e;a[4]=m*b-d*e;a[5]=k*b-g*e;a[6]=p*b-l*e;a[7]=w*b-f*e;return a};b.SIMD.rotateZ=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));
c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var d=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(d,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(d,e)));return a};b.rotateZ=d.USE_SIMD?b.SIMD.rotateZ:b.scalar.rotateZ;b.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};b.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotation=function(a,c,b){var e=b[0],n=b[1];b=b[2];var g=Math.sqrt(e*e+n*n+b*b),l;if(Math.abs(g)<d.EPSILON)return null;g=1/g;e*=g;n*=g;b*=g;g=Math.sin(c);c=Math.cos(c);l=1-c;a[0]=e*e*l+c;a[1]=n*e*l+b*g;a[2]=b*e*l-n*g;a[3]=0;a[4]=e*n*l-b*g;a[5]=n*n*l+c;a[6]=
b*n*l+e*g;a[7]=0;a[8]=e*b*l+n*g;a[9]=n*b*l-e*g;a[10]=b*b*l+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromXRotation=function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromYRotation=function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromZRotation=
function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotationTranslation=function(a,c,b){var e=c[0],d=c[1],g=c[2],l=c[3],f=e+e,m=d+d,k=g+g;c=e*f;var p=e*m,e=e*k,w=d*m,d=d*k,g=g*k,f=l*f,m=l*m,l=l*k;a[0]=1-(w+g);a[1]=p+l;a[2]=e-m;a[3]=0;a[4]=p-l;a[5]=1-(c+g);a[6]=d+f;a[7]=0;a[8]=e+m;a[9]=d-f;a[10]=1-(c+w);a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.getTranslation=
function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};b.getRotation=function(a,c){var b=c[0]+c[5]+c[10],e=0;0<b?(e=2*Math.sqrt(b+1),a[3]=.25*e,a[0]=(c[6]-c[9])/e,a[1]=(c[8]-c[2])/e,a[2]=(c[1]-c[4])/e):c[0]>c[5]&c[0]>c[10]?(e=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/e,a[0]=.25*e,a[1]=(c[1]+c[4])/e,a[2]=(c[8]+c[2])/e):c[5]>c[10]?(e=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/e,a[0]=(c[1]+c[4])/e,a[1]=.25*e,a[2]=(c[6]+c[9])/e):(e=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/e,a[0]=(c[8]+
c[2])/e,a[1]=(c[6]+c[9])/e,a[2]=.25*e);return a};b.fromRotationTranslationScale=function(a,c,b,e){var d=c[0],g=c[1],l=c[2],f=c[3],m=d+d,k=g+g,p=l+l;c=d*m;var w=d*k,d=d*p,x=g*k,g=g*p,l=l*p,m=f*m,k=f*k,f=f*p,p=e[0],t=e[1];e=e[2];a[0]=(1-(x+l))*p;a[1]=(w+f)*p;a[2]=(d-k)*p;a[3]=0;a[4]=(w-f)*t;a[5]=(1-(c+l))*t;a[6]=(g+m)*t;a[7]=0;a[8]=(d+k)*e;a[9]=(g-m)*e;a[10]=(1-(c+x))*e;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.fromRotationTranslationScaleOrigin=function(a,c,b,e,d){var g=c[0],l=c[1],
f=c[2],m=c[3],k=g+g,p=l+l,w=f+f;c=g*k;var x=g*p,g=g*w,t=l*p,l=l*w,f=f*w,k=m*k,p=m*p,m=m*w,w=e[0],u=e[1];e=e[2];var z=d[0],v=d[1];d=d[2];a[0]=(1-(t+f))*w;a[1]=(x+m)*w;a[2]=(g-p)*w;a[3]=0;a[4]=(x-m)*u;a[5]=(1-(c+f))*u;a[6]=(l+k)*u;a[7]=0;a[8]=(g+p)*e;a[9]=(l-k)*e;a[10]=(1-(c+t))*e;a[11]=0;a[12]=b[0]+z-(a[0]*z+a[4]*v+a[8]*d);a[13]=b[1]+v-(a[1]*z+a[5]*v+a[9]*d);a[14]=b[2]+d-(a[2]*z+a[6]*v+a[10]*d);a[15]=1;return a};b.fromQuat=function(a,c){var b=c[0],e=c[1],d=c[2],g=c[3],l=b+b,f=e+e,m=d+d,b=b*l,k=e*l,
e=e*f,p=d*l,w=d*f,d=d*m,l=g*l,f=g*f,g=g*m;a[0]=1-e-d;a[1]=k+g;a[2]=p-f;a[3]=0;a[4]=k-g;a[5]=1-b-d;a[6]=w+l;a[7]=0;a[8]=p+f;a[9]=w-l;a[10]=1-b-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.frustum=function(a,c,b,e,d,g,l){var f=1/(b-c),m=1/(d-e),k=1/(g-l);a[0]=2*g*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*m;a[6]=0;a[7]=0;a[8]=(b+c)*f;a[9]=(d+e)*m;a[10]=(l+g)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=l*g*2*k;a[15]=0;return a};b.perspective=function(a,c,b,e,d){c=1/Math.tan(c/2);var g=1/(e-d);a[0]=c/b;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*g;a[15]=0;return a};b.perspectiveFromFieldOfView=function(a,c,b,e){var d=Math.tan(c.upDegrees*Math.PI/180),g=Math.tan(c.downDegrees*Math.PI/180),l=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var f=2/(l+c),m=2/(d+g);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-((l-c)*f*.5);a[9]=(d-g)*m*.5;a[10]=e/(b-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*b/(b-e);
a[15]=0;return a};b.ortho=function(a,c,b,e,d,g,l){var f=1/(c-b),m=1/(e-d),k=1/(g-l);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*k;a[11]=0;a[12]=(c+b)*f;a[13]=(d+e)*m;a[14]=(l+g)*k;a[15]=1;return a};b.lookAt=function(a,c,h,e){var f,g,l,k,m,p,r,w,x=c[0],t=c[1];c=c[2];l=e[0];k=e[1];g=e[2];r=h[0];e=h[1];f=h[2];if(Math.abs(x-r)<d.EPSILON&&Math.abs(t-e)<d.EPSILON&&Math.abs(c-f)<d.EPSILON)return b.identity(a);h=x-r;e=t-e;r=c-f;w=1/Math.sqrt(h*h+e*e+r*r);h*=w;e*=w;
r*=w;f=k*r-g*e;g=g*h-l*r;l=l*e-k*h;(w=Math.sqrt(f*f+g*g+l*l))?(w=1/w,f*=w,g*=w,l*=w):l=g=f=0;k=e*l-r*g;m=r*f-h*l;p=h*g-e*f;(w=Math.sqrt(k*k+m*m+p*p))?(w=1/w,k*=w,m*=w,p*=w):p=m=k=0;a[0]=f;a[1]=k;a[2]=h;a[3]=0;a[4]=g;a[5]=m;a[6]=e;a[7]=0;a[8]=l;a[9]=p;a[10]=r;a[11]=0;a[12]=-(f*x+g*t+l*c);a[13]=-(k*x+m*t+p*c);a[14]=-(h*x+e*t+r*c);a[15]=1;return a};b.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+
a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};b.add=function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];
a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};b.subtract=function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a};b.sub=b.subtract;b.multiplyScalar=function(a,c,b){a[0]=c[0]*
b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*b;a[15]=c[15]*b;return a};b.multiplyScalarAndAdd=function(a,c,b,e){a[0]=c[0]+b[0]*e;a[1]=c[1]+b[1]*e;a[2]=c[2]+b[2]*e;a[3]=c[3]+b[3]*e;a[4]=c[4]+b[4]*e;a[5]=c[5]+b[5]*e;a[6]=c[6]+b[6]*e;a[7]=c[7]+b[7]*e;a[8]=c[8]+b[8]*e;a[9]=c[9]+b[9]*e;a[10]=c[10]+b[10]*e;a[11]=c[11]+b[11]*e;a[12]=c[12]+b[12]*e;a[13]=c[13]+b[13]*e;a[14]=
c[14]+b[14]*e;a[15]=c[15]+b[15]*e;return a};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};b.equals=function(a,c){var b=a[0],e=a[1],f=a[2],g=a[3],l=a[4],k=a[5],m=a[6],p=a[7],r=a[8],w=a[9],x=a[10],t=a[11],u=a[12],z=a[13],v=a[14],B=a[15],C=c[0],A=c[1],D=c[2],E=c[3],F=c[4],I=c[5],H=c[6],K=c[7],M=
c[8],O=c[9],J=c[10],L=c[11],G=c[12],N=c[13],T=c[14],R=c[15];return Math.abs(b-C)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(e-A)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(f-D)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(g-E)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(l-F)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(k-I)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(I))&&Math.abs(m-H)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(H))&&
Math.abs(p-K)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(K))&&Math.abs(r-M)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(w-O)<=d.EPSILON*Math.max(1,Math.abs(w),Math.abs(O))&&Math.abs(x-J)<=d.EPSILON*Math.max(1,Math.abs(x),Math.abs(J))&&Math.abs(t-L)<=d.EPSILON*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(u-G)<=d.EPSILON*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(z-N)<=d.EPSILON*Math.max(1,Math.abs(z),Math.abs(N))&&Math.abs(v-T)<=d.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(B-
R)<=d.EPSILON*Math.max(1,Math.abs(B),Math.abs(R))};k.exports=b},{"./common.js":59}],64:[function(f,k,p){var d=f("./common.js"),b=f("./mat3.js"),a=f("./vec3.js");f=f("./vec4.js");var c={create:function(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};c.rotationTo=function(){var b=a.create(),e=a.fromValues(1,0,0),d=a.fromValues(0,1,0);return function(g,f,k){var m=a.dot(f,k);if(-.999999>m)return a.cross(b,e,f),1E-6>a.length(b)&&a.cross(b,d,f),a.normalize(b,b),c.setAxisAngle(g,b,Math.PI),
g;if(.999999<m)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;a.cross(b,f,k);g[0]=b[0];g[1]=b[1];g[2]=b[2];g[3]=1+m;return c.normalize(g,g)}}();c.setAxes=function(){var a=b.create();return function(b,d,g,f){a[0]=g[0];a[3]=g[1];a[6]=g[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return c.normalize(b,c.fromMat3(b,a))}}();c.clone=f.clone;c.fromValues=f.fromValues;c.copy=f.copy;c.set=f.set;c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.setAxisAngle=function(a,c,b){b*=.5;var d=
Math.sin(b);a[0]=d*c[0];a[1]=d*c[1];a[2]=d*c[2];a[3]=Math.cos(b);return a};c.getAxisAngle=function(a,c){var b=2*Math.acos(c[3]),d=Math.sin(b/2);0!=d?(a[0]=c[0]/d,a[1]=c[1]/d,a[2]=c[2]/d):(a[0]=1,a[1]=0,a[2]=0);return b};c.add=f.add;c.multiply=function(a,c,b){var d=c[0],f=c[1],k=c[2];c=c[3];var m=b[0],p=b[1],r=b[2];b=b[3];a[0]=d*b+c*m+f*r-k*p;a[1]=f*b+c*p+k*m-d*r;a[2]=k*b+c*r+d*p-f*m;a[3]=c*b-d*m-f*p-k*r;return a};c.mul=c.multiply;c.scale=f.scale;c.rotateX=function(a,c,b){b*=.5;var d=c[0],f=c[1],k=
c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b+c*m;a[1]=f*b+k*m;a[2]=k*b-f*m;a[3]=c*b-d*m;return a};c.rotateY=function(a,c,b){b*=.5;var d=c[0],f=c[1],k=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b-k*m;a[1]=f*b+c*m;a[2]=k*b+d*m;a[3]=c*b-f*m;return a};c.rotateZ=function(a,c,b){b*=.5;var d=c[0],f=c[1],k=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=d*b+f*m;a[1]=f*b-d*m;a[2]=k*b+c*m;a[3]=c*b-k*m;return a};c.calculateW=function(a,c){var b=c[0],d=c[1],f=c[2];a[0]=b;a[1]=d;a[2]=f;a[3]=Math.sqrt(Math.abs(1-
b*b-d*d-f*f));return a};c.dot=f.dot;c.lerp=f.lerp;c.slerp=function(a,c,b,d){var f=c[0],k=c[1],m=c[2];c=c[3];var p=b[0],r=b[1],w=b[2];b=b[3];var x,t,u;t=f*p+k*r+m*w+c*b;0>t&&(t=-t,p=-p,r=-r,w=-w,b=-b);1E-6<1-t?(x=Math.acos(t),u=Math.sin(x),t=Math.sin((1-d)*x)/u,d=Math.sin(d*x)/u):t=1-d;a[0]=t*f+d*p;a[1]=t*k+d*r;a[2]=t*m+d*w;a[3]=t*c+d*b;return a};c.sqlerp=function(){var a=c.create(),b=c.create();return function(d,g,f,k,m,p){c.slerp(a,g,m,p);c.slerp(b,f,k,p);c.slerp(d,a,b,2*p*(1-p));return d}}();c.invert=
function(a,c){var b=c[0],d=c[1],f=c[2],k=c[3],m=b*b+d*d+f*f+k*k,m=m?1/m:0;a[0]=-b*m;a[1]=-d*m;a[2]=-f*m;a[3]=k*m;return a};c.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};c.length=f.length;c.len=c.length;c.squaredLength=f.squaredLength;c.sqrLen=c.squaredLength;c.normalize=f.normalize;c.fromMat3=function(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{var d=0;c[4]>c[0]&&(d=1);c[8]>c[3*d+
d]&&(d=2);var f=(d+1)%3,k=(d+2)%3,b=Math.sqrt(c[3*d+d]-c[3*f+f]-c[3*k+k]+1);a[d]=.5*b;b=.5/b;a[3]=(c[3*f+k]-c[3*k+f])*b;a[f]=(c[3*f+d]+c[3*d+f])*b;a[k]=(c[3*k+d]+c[3*d+k])*b}return a};c.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=f.exactEquals;c.equals=f.equals;k.exports=c},{"./common.js":59,"./mat3.js":62,"./vec3.js":66,"./vec4.js":67}],65:[function(f,k,p){var d=f("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=
new d.ARRAY_TYPE(2);c[0]=a[0];c[1]=a[1];return c},fromValues:function(a,c){var b=new d.ARRAY_TYPE(2);b[0]=a;b[1]=c;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];return a},set:function(a,c,b){a[0]=c;a[1]=b;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*b[0];a[1]=c[1]*b[1];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];return a};
b.div=b.divide;b.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};b.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};b.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);return a};b.max=function(a,c,b){a[0]=Math.max(c[0],b[0]);a[1]=Math.max(c[1],b[1]);return a};b.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};b.scale=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;return a};b.scaleAndAdd=function(a,c,b,d){a[0]=c[0]+
b[0]*d;a[1]=c[1]+b[1]*d;return a};b.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return Math.sqrt(b*b+d*d)};b.dist=b.distance;b.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return b*b+d*d};b.sqrDist=b.squaredDistance;b.length=function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)};b.len=b.length;b.squaredLength=function(a){var c=a[0];a=a[1];return c*c+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};b.inverse=function(a,c){a[0]=1/c[0];a[1]=1/
c[1];return a};b.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};b.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};b.cross=function(a,c,b){c=c[0]*b[1]-c[1]*b[0];a[0]=a[1]=0;a[2]=c;return a};b.lerp=function(a,c,b,d){var f=c[0];c=c[1];a[0]=f+d*(b[0]-f);a[1]=c+d*(b[1]-c);return a};b.random=function(a,c){c=c||1;var b=2*d.RANDOM()*Math.PI;a[0]=Math.cos(b)*c;a[1]=Math.sin(b)*c;return a};b.transformMat2=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*
d+b[2]*c;a[1]=b[1]*d+b[3]*c;return a};b.transformMat2d=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[2]*c+b[4];a[1]=b[1]*d+b[3]*c+b[5];return a};b.transformMat3=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[3]*c+b[6];a[1]=b[1]*d+b[4]*c+b[7];return a};b.transformMat4=function(a,c,b){var d=c[0];c=c[1];a[0]=b[0]*d+b[4]*c+b[12];a[1]=b[1]*d+b[5]*c+b[13];return a};b.forEach=function(){var a=b.create();return function(c,b,d,f,g,l){b||(b=2);d||(d=0);for(f=f?Math.min(f*b+d,c.length):c.length;d<f;d+=b)a[0]=
c[d],a[1]=c[d+1],g(a,a,l),c[d]=a[0],c[d+1]=a[1];return c}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};b.equals=function(a,c){var b=a[0],e=a[1],f=c[0],g=c[1];return Math.abs(b-f)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))};k.exports=b},{"./common.js":59}],66:[function(f,k,p){var d=f("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=
0;return a},clone:function(a){var c=new d.ARRAY_TYPE(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},fromValues:function(a,c,b){var e=new d.ARRAY_TYPE(3);e[0]=a;e[1]=c;e[2]=b;return e},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,b,d){a[0]=c;a[1]=b;a[2]=d;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*
b[0];a[1]=c[1]*b[1];a[2]=c[2]*b[2];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];a[2]=c[2]/b[2];return a};b.div=b.divide;b.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};b.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};b.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);a[2]=Math.min(c[2],b[2]);return a};b.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);
a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};b.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};b.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};b.scaleAndAdd=function(a,b,d,e){a[0]=b[0]+d[0]*e;a[1]=b[1]+d[1]*e;a[2]=b[2]+d[2]*e;return a};b.distance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2];return Math.sqrt(d*d+e*e+f*f)};b.dist=b.distance;b.squaredDistance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-
a[2];return d*d+e*e+f*f};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};b.normalize=function(a,b){var d=b[0],e=b[1],f=b[2],d=d*d+e*e+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*
d);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};b.cross=function(a,b,d){var e=b[0],f=b[1];b=b[2];var g=d[0],l=d[1];d=d[2];a[0]=f*d-b*l;a[1]=b*g-e*d;a[2]=e*l-f*g;return a};b.lerp=function(a,b,d,e){var f=b[0],g=b[1];b=b[2];a[0]=f+e*(d[0]-f);a[1]=g+e*(d[1]-g);a[2]=b+e*(d[2]-b);return a};b.hermite=function(a,b,d,e,f,g){var l=g*g,k=l*(2*g-3)+1,m=l*(g-2)+g,p=l*(g-1);g=l*(3-2*g);a[0]=b[0]*k+d[0]*m+e[0]*p+f[0]*g;a[1]=b[1]*k+d[1]*m+e[1]*p+f[1]*g;a[2]=b[2]*k+d[2]*m+e[2]*p+f[2]*g;return a};
b.bezier=function(a,b,d,e,f,g){var l=1-g,k=l*l,m=g*g,p=k*l,k=3*g*k,l=3*m*l;g*=m;a[0]=b[0]*p+d[0]*k+e[0]*l+f[0]*g;a[1]=b[1]*p+d[1]*k+e[1]*l+f[1]*g;a[2]=b[2]*p+d[2]*k+e[2]*l+f[2]*g;return a};b.random=function(a,b){b=b||1;var h=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;a[0]=Math.cos(h)*f;a[1]=Math.sin(h)*f;a[2]=e*b;return a};b.transformMat4=function(a,b,d){var e=b[0],f=b[1];b=b[2];var g=d[3]*e+d[7]*f+d[11]*b+d[15],g=g||1;a[0]=(d[0]*e+d[4]*f+d[8]*b+d[12])/g;a[1]=(d[1]*e+d[5]*f+d[9]*b+
d[13])/g;a[2]=(d[2]*e+d[6]*f+d[10]*b+d[14])/g;return a};b.transformMat3=function(a,b,d){var e=b[0],f=b[1];b=b[2];a[0]=e*d[0]+f*d[3]+b*d[6];a[1]=e*d[1]+f*d[4]+b*d[7];a[2]=e*d[2]+f*d[5]+b*d[8];return a};b.transformQuat=function(a,b,d){var e=b[0],f=b[1],g=b[2];b=d[0];var l=d[1],k=d[2];d=d[3];var m=d*e+l*g-k*f,p=d*f+k*e-b*g,r=d*g+b*f-l*e,e=-b*e-l*f-k*g;a[0]=m*d+e*-b+p*-k-r*-l;a[1]=p*d+e*-l+r*-b-m*-k;a[2]=r*d+e*-k+m*-l-p*-b;return a};b.rotateX=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];
f[2]=b[2]-d[2];g[0]=f[0];g[1]=f[1]*Math.cos(e)-f[2]*Math.sin(e);g[2]=f[1]*Math.sin(e)+f[2]*Math.cos(e);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.rotateY=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[2]*Math.sin(e)+f[0]*Math.cos(e);g[1]=f[1];g[2]=f[2]*Math.cos(e)-f[0]*Math.sin(e);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.rotateZ=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[0]*Math.cos(e)-f[1]*
Math.sin(e);g[1]=f[0]*Math.sin(e)+f[1]*Math.cos(e);g[2]=f[2];a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.forEach=function(){var a=b.create();return function(b,d,e,f,g,l){d||(d=3);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],g(a,a,l),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2];return b}}();b.angle=function(a,c){var d=b.fromValues(a[0],a[1],a[2]),e=b.fromValues(c[0],c[1],c[2]);b.normalize(d,d);b.normalize(e,e);d=b.dot(d,e);return 1<d?0:Math.acos(d)};
b.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};b.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};b.equals=function(a,b){var h=a[0],e=a[1],f=a[2],g=b[0],l=b[1],k=b[2];return Math.abs(h-g)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(e-l)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(f-k)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))};k.exports=b},{"./common.js":59}],67:[function(f,k,p){var d=f("./common.js"),b={create:function(){var a=
new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,h,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=h;f[3]=e;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,e,f){a[0]=b;a[1]=d;a[2]=e;a[3]=f;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-
d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};b.sub=b.subtract;b.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};b.mul=b.multiply;b.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};b.div=b.divide;b.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};b.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);
a[3]=Math.floor(b[3]);return a};b.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};b.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};b.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};b.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};b.scaleAndAdd=
function(a,b,d,e){a[0]=b[0]+d[0]*e;a[1]=b[1]+d[1]*e;a[2]=b[2]+d[2]*e;a[3]=b[3]+d[3]*e;return a};b.distance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return Math.sqrt(d*d+e*e+f*f+g*g)};b.dist=b.distance;b.squaredDistance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return d*d+e*e+f*f+g*g};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+d*d+e*e+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0],
d=a[1],e=a[2];a=a[3];return b*b+d*d+e*e+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};b.normalize=function(a,b){var d=b[0],e=b[1],f=b[2],g=b[3],l=d*d+e*e+f*f+g*g;0<l&&(l=1/Math.sqrt(l),a[0]=d*l,a[1]=e*l,a[2]=f*l,a[3]=g*l);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};b.lerp=function(a,b,d,e){var f=b[0],g=b[1],l=b[2];b=b[3];a[0]=
f+e*(d[0]-f);a[1]=g+e*(d[1]-g);a[2]=l+e*(d[2]-l);a[3]=b+e*(d[3]-b);return a};b.random=function(a,c){c=c||1;a[0]=d.RANDOM();a[1]=d.RANDOM();a[2]=d.RANDOM();a[3]=d.RANDOM();b.normalize(a,a);b.scale(a,a,c);return a};b.transformMat4=function(a,b,d){var e=b[0],f=b[1],g=b[2];b=b[3];a[0]=d[0]*e+d[4]*f+d[8]*g+d[12]*b;a[1]=d[1]*e+d[5]*f+d[9]*g+d[13]*b;a[2]=d[2]*e+d[6]*f+d[10]*g+d[14]*b;a[3]=d[3]*e+d[7]*f+d[11]*g+d[15]*b;return a};b.transformQuat=function(a,b,d){var e=b[0],f=b[1],g=b[2],l=d[0],k=d[1],m=d[2];
d=d[3];var p=d*e+k*g-m*f,r=d*f+m*e-l*g,w=d*g+l*f-k*e,e=-l*e-k*f-m*g;a[0]=p*d+e*-l+r*-m-w*-k;a[1]=r*d+e*-k+w*-l-p*-m;a[2]=w*d+e*-m+p*-k-r*-l;a[3]=b[3];return a};b.forEach=function(){var a=b.create();return function(b,d,e,f,g,l){d||(d=4);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],g(a,a,l),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();b.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};b.equals=function(a,b){var f=a[0],e=a[1],k=a[2],g=a[3],l=b[0],p=b[1],m=b[2],y=b[3];return Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(e-p)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(k-m)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(m))&&Math.abs(g-y)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(y))};k.exports=b},{"./common.js":59}],68:[function(f,k,p){k.exports=function(d,b,a){d[0]=b[0]+a[0];d[1]=b[1]+
a[1];d[2]=b[2]+a[2];return d}},{}],69:[function(f,k,p){k.exports=function(c,f){var e=d(c[0],c[1],c[2]),k=d(f[0],f[1],f[2]);b(e,e);b(k,k);e=a(e,k);return 1<e?0:Math.acos(e)};var d=f("./fromValues"),b=f("./normalize"),a=f("./dot")},{"./dot":76,"./fromValues":78,"./normalize":87}],70:[function(f,k,p){k.exports=function(d){var b=new Float32Array(3);b[0]=d[0];b[1]=d[1];b[2]=d[2];return b}},{}],71:[function(f,k,p){k.exports=function(d,b){d[0]=b[0];d[1]=b[1];d[2]=b[2];return d}},{}],72:[function(f,k,p){k.exports=
function(){var d=new Float32Array(3);d[0]=0;d[1]=0;d[2]=0;return d}},{}],73:[function(f,k,p){k.exports=function(d,b,a){var c=b[0],f=b[1];b=b[2];var e=a[0],k=a[1];a=a[2];d[0]=f*a-b*k;d[1]=b*e-c*a;d[2]=c*k-f*e;return d}},{}],74:[function(f,k,p){k.exports=function(d,b){var a=b[0]-d[0],c=b[1]-d[1],f=b[2]-d[2];return Math.sqrt(a*a+c*c+f*f)}},{}],75:[function(f,k,p){k.exports=function(d,b,a){d[0]=b[0]/a[0];d[1]=b[1]/a[1];d[2]=b[2]/a[2];return d}},{}],76:[function(f,k,p){k.exports=function(d,b){return d[0]*
b[0]+d[1]*b[1]+d[2]*b[2]}},{}],77:[function(f,k,p){k.exports=function(b,a,c,f,e,k){a||(a=3);c||(c=0);for(f=f?Math.min(f*a+c,b.length):b.length;c<f;c+=a)d[0]=b[c],d[1]=b[c+1],d[2]=b[c+2],e(d,d,k),b[c]=d[0],b[c+1]=d[1],b[c+2]=d[2];return b};var d=f("./create")()},{"./create":72}],78:[function(f,k,p){k.exports=function(d,b,a){var c=new Float32Array(3);c[0]=d;c[1]=b;c[2]=a;return c}},{}],79:[function(f,k,p){k.exports={create:f("./create"),clone:f("./clone"),angle:f("./angle"),fromValues:f("./fromValues"),
copy:f("./copy"),set:f("./set"),add:f("./add"),subtract:f("./subtract"),multiply:f("./multiply"),divide:f("./divide"),min:f("./min"),max:f("./max"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),squaredDistance:f("./squaredDistance"),length:f("./length"),squaredLength:f("./squaredLength"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),cross:f("./cross"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformMat3:f("./transformMat3"),
transformQuat:f("./transformQuat"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),forEach:f("./forEach")}},{"./add":68,"./angle":69,"./clone":70,"./copy":71,"./create":72,"./cross":73,"./distance":74,"./divide":75,"./dot":76,"./forEach":77,"./fromValues":78,"./inverse":80,"./length":81,"./lerp":82,"./max":83,"./min":84,"./multiply":85,"./negate":86,"./normalize":87,"./random":88,"./rotateX":89,"./rotateY":90,"./rotateZ":91,"./scale":92,"./scaleAndAdd":93,"./set":94,"./squaredDistance":95,
"./squaredLength":96,"./subtract":97,"./transformMat3":98,"./transformMat4":99,"./transformQuat":100}],80:[function(f,k,p){k.exports=function(d,b){d[0]=1/b[0];d[1]=1/b[1];d[2]=1/b[2];return d}},{}],81:[function(f,k,p){k.exports=function(d){var b=d[0],a=d[1];d=d[2];return Math.sqrt(b*b+a*a+d*d)}},{}],82:[function(f,k,p){k.exports=function(d,b,a,c){var f=b[0],e=b[1];b=b[2];d[0]=f+c*(a[0]-f);d[1]=e+c*(a[1]-e);d[2]=b+c*(a[2]-b);return d}},{}],83:[function(f,k,p){k.exports=function(d,b,a){d[0]=Math.max(b[0],
a[0]);d[1]=Math.max(b[1],a[1]);d[2]=Math.max(b[2],a[2]);return d}},{}],84:[function(f,k,p){k.exports=function(d,b,a){d[0]=Math.min(b[0],a[0]);d[1]=Math.min(b[1],a[1]);d[2]=Math.min(b[2],a[2]);return d}},{}],85:[function(f,k,p){k.exports=function(d,b,a){d[0]=b[0]*a[0];d[1]=b[1]*a[1];d[2]=b[2]*a[2];return d}},{}],86:[function(f,k,p){k.exports=function(d,b){d[0]=-b[0];d[1]=-b[1];d[2]=-b[2];return d}},{}],87:[function(f,k,p){k.exports=function(d,b){var a=b[0],c=b[1],f=b[2],a=a*a+c*c+f*f;0<a&&(a=1/Math.sqrt(a),
d[0]=b[0]*a,d[1]=b[1]*a,d[2]=b[2]*a);return d}},{}],88:[function(f,k,p){k.exports=function(d,b){b=b||1;var a=2*Math.random()*Math.PI,c=2*Math.random()-1,f=Math.sqrt(1-c*c)*b;d[0]=Math.cos(a)*f;d[1]=Math.sin(a)*f;d[2]=c*b;return d}},{}],89:[function(f,k,p){k.exports=function(d,b,a,c){var f=[],e=[];f[0]=b[0]-a[0];f[1]=b[1]-a[1];f[2]=b[2]-a[2];e[0]=f[0];e[1]=f[1]*Math.cos(c)-f[2]*Math.sin(c);e[2]=f[1]*Math.sin(c)+f[2]*Math.cos(c);d[0]=e[0]+a[0];d[1]=e[1]+a[1];d[2]=e[2]+a[2];return d}},{}],90:[function(f,
k,p){k.exports=function(d,b,a,c){var f=[],e=[];f[0]=b[0]-a[0];f[1]=b[1]-a[1];f[2]=b[2]-a[2];e[0]=f[2]*Math.sin(c)+f[0]*Math.cos(c);e[1]=f[1];e[2]=f[2]*Math.cos(c)-f[0]*Math.sin(c);d[0]=e[0]+a[0];d[1]=e[1]+a[1];d[2]=e[2]+a[2];return d}},{}],91:[function(f,k,p){k.exports=function(d,b,a,c){var f=[],e=[];f[0]=b[0]-a[0];f[1]=b[1]-a[1];f[2]=b[2]-a[2];e[0]=f[0]*Math.cos(c)-f[1]*Math.sin(c);e[1]=f[0]*Math.sin(c)+f[1]*Math.cos(c);e[2]=f[2];d[0]=e[0]+a[0];d[1]=e[1]+a[1];d[2]=e[2]+a[2];return d}},{}],92:[function(f,
k,p){k.exports=function(d,b,a){d[0]=b[0]*a;d[1]=b[1]*a;d[2]=b[2]*a;return d}},{}],93:[function(f,k,p){k.exports=function(d,b,a,c){d[0]=b[0]+a[0]*c;d[1]=b[1]+a[1]*c;d[2]=b[2]+a[2]*c;return d}},{}],94:[function(f,k,p){k.exports=function(d,b,a,c){d[0]=b;d[1]=a;d[2]=c;return d}},{}],95:[function(f,k,p){k.exports=function(d,b){var a=b[0]-d[0],c=b[1]-d[1],f=b[2]-d[2];return a*a+c*c+f*f}},{}],96:[function(f,k,p){k.exports=function(d){var b=d[0],a=d[1];d=d[2];return b*b+a*a+d*d}},{}],97:[function(f,k,p){k.exports=
function(d,b,a){d[0]=b[0]-a[0];d[1]=b[1]-a[1];d[2]=b[2]-a[2];return d}},{}],98:[function(f,k,p){k.exports=function(d,b,a){var c=b[0],f=b[1];b=b[2];d[0]=c*a[0]+f*a[3]+b*a[6];d[1]=c*a[1]+f*a[4]+b*a[7];d[2]=c*a[2]+f*a[5]+b*a[8];return d}},{}],99:[function(f,k,p){k.exports=function(d,b,a){var c=b[0],f=b[1];b=b[2];var e=a[3]*c+a[7]*f+a[11]*b+a[15],e=e||1;d[0]=(a[0]*c+a[4]*f+a[8]*b+a[12])/e;d[1]=(a[1]*c+a[5]*f+a[9]*b+a[13])/e;d[2]=(a[2]*c+a[6]*f+a[10]*b+a[14])/e;return d}},{}],100:[function(f,k,p){k.exports=
function(d,b,a){var c=b[0],f=b[1],e=b[2];b=a[0];var k=a[1],g=a[2];a=a[3];var l=a*c+k*e-g*f,p=a*f+g*c-b*e,m=a*e+b*f-k*c,c=-b*c-k*f-g*e;d[0]=l*a+c*-b+p*-g-m*-k;d[1]=p*a+c*-k+m*-b-l*-g;d[2]=m*a+c*-g+l*-k-p*-b;return d}},{}],101:[function(f,k,p){(function(d){function b(){e.forEach(function(a){n[h[a]]=!1})}function a(a){n[h[a.keyCode]]=!1}function c(a){n[h[a.keyCode]]=!0}var h=f("vkey"),e=Object.keys(h),n={};b();k.exports=function(a){return a?n[a]:n};d.browser&&(window.addEventListener("keydown",c,!1),
window.addEventListener("keyup",a,!1),window.addEventListener("blur",b,!1))}).call(this,f("_process"))},{_process:105,vkey:107}],102:[function(f,k,p){var d=f("events/");k.exports=function(b,a){var c=new d;c.x=0;c.y=0;c.prevX=0;c.prevY=0;c.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return c;a=a||b||window;b=b||document.body;a.addEventListener("mousemove",b===document.body||b===window?function(a){c.prevX=c.x;c.prevY=c.y;c.x=a.clientX;c.y=a.clientY;c.emit("move",
a)}:function(a){c.prevX=c.x;c.prevY=c.y;var d=b.getBoundingClientRect();c.x=a.clientX-d.left;c.y=a.clientY-d.top;c.emit("move",a)},!1);return c}},{"events/":33}],103:[function(f,k,p){var d=f("events/"),b=["left","middle","right"];k.exports=function(a,c){function f(a){k.right=!1;k[b[a.button]]=!0;k.emit("down",a);if(c){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function e(a){k.right=!1;k[b[a.button]]=!1;k.emit("up",a);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}
var k=new d;k.left=!1;k.right=!1;k.middle=!1;"undefined"!==typeof window&&(a=a||window,a.addEventListener("mousedown",f,!1),a.addEventListener("mouseup",e,!1),c&&a.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return k}},{"events/":33}],104:[function(f,k,p){function d(a,b,c){this.rotation=a;this.center=b;this.distance=c}function b(a,b){var c=b[0],d=b[1],c=c*c+d*d;1<c&&(c=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-c);a[3]=0}f=f("gl-matrix");var a=
f.vec3,c=f.mat3,h=f.mat4,e=f.quat,n=new Float32Array(16),g=new Float32Array(16);f=d.prototype;f.view=function(b){b||(b=h.create());g[0]=g[1]=0;g[2]=-this.distance;h.fromRotationTranslation(b,e.conjugate(n,this.rotation),g);h.translate(b,b,a.negate(n,this.center));return b};f.lookAt=function(b,d,f){h.lookAt(n,b,d,f);c.fromMat4(n,n);e.fromMat3(this.rotation,n);a.copy(this.center,d);this.distance=a.distance(b,d)};f.pan=function(b){var c=this.distance;n[0]=-c*(b[0]||0);n[1]=c*(b[1]||0);n[2]=c*(b[2]||
0);a.transformQuat(n,n,this.rotation);a.add(this.center,this.center,n)};f.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};f.rotate=function(a,c){b(n,a);b(g,c);e.invert(g,g);e.multiply(n,n,g);1E-6>e.length(n)||(e.multiply(this.rotation,this.rotation,n),e.normalize(this.rotation,this.rotation))};k.exports=function(b,c,f){b=b||[0,0,-1];c=c||[0,0,0];f=f||[0,1,0];var h=new d(e.create(),a.create(),1);h.lookAt(b,c,f);return h}},{"gl-matrix":58}],105:[function(f,k,p){function d(){e&&
n&&(e=!1,n.length?h=n.concat(h):g=-1,h.length&&b())}function b(){if(!e){var a=setTimeout(d);e=!0;for(var b=h.length;b;){n=h;for(h=[];++g<b;)n&&n[g].run();g=-1;b=h.length}n=null;e=!1;clearTimeout(a)}}function a(a,b){this.fun=a;this.array=b}function c(){}f=k.exports={};var h=[],e=!1,n,g=-1;f.nextTick=function(c){var d=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)d[f-1]=arguments[f];h.push(new a(c,d));1!==h.length||e||setTimeout(b,0)};a.prototype.run=function(){this.fun.apply(null,
this.array)};f.title="browser";f.browser=!0;f.env={};f.argv=[];f.version="";f.versions={};f.on=c;f.addListener=c;f.once=c;f.off=c;f.removeListener=c;f.removeAllListeners=c;f.emit=c;f.binding=function(a){throw Error("process.binding is not supported");};f.cwd=function(){return"/"};f.chdir=function(a){throw Error("process.chdir is not supported");};f.umask=function(){return 0}},{}],106:[function(f,k,p){var d=f("events/"),b=f("wheel");k.exports=function(a,c){function f(){e[0]=e[1]=e[2]=0}var e=new d;
e.flush=f;f();if("undefined"===typeof window)return e;a=a||window;b(a,function(a){var b=1===a.deltaMode?12:1;e[0]+=b*(a.deltaX||0);e[1]+=b*(a.deltaY||0);e[2]+=b*(a.deltaZ||0);e.emit("scroll",e);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return e}},{"events/":33,wheel:108}],107:[function(f,k,p){var d="undefined"!==typeof window?window.navigator.userAgent:"";f=/OS X/.test(d);p=/Opera/.test(d);d=!/like Gecko/.test(d)&&!p;f=k.exports={0:f?"<menu>":"<UNK>",1:"<mouse 1>",
2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",
43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:f?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",
172:"<browser-home>",173:f&&d?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:p?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",
252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(k=58;65>k;++k)f[k]=String.fromCharCode(k);for(k=48;58>k;++k)f[k]=k-48+"";for(k=65;91>k;++k)f[k]=String.fromCharCode(k);for(k=96;106>k;++k)f[k]="<num-"+(k-96)+">";for(k=112;136>k;++k)f[k]="F"+(k-111)},{}],108:[function(f,k,p){function d(d,e,f,g){d[a](b+e,"wheel"==c?f:function(a){!a&&(a=window.event);var b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?
a.preventDefault():a.returnValue=!1}};"mousewheel"==c?(b.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-.025*a.wheelDeltaX)):b.deltaY=a.detail;return f(b)},g||!1)}k.exports=function(a,b,f){d(a,c,b,f);"DOMMouseScroll"==c&&d(a,"MozMousePixelScroll",b,f)};var b="",a,c;window.addEventListener?a="addEventListener":(a="attachEvent",b="on");c="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],109:[function(f,k,p){var d=f("./lib/util/extend"),
b=f("./lib/dynamic"),a=f("./lib/util/raf"),c=f("./lib/util/clock"),h=f("./lib/strings"),e=f("./lib/webgl"),n=f("./lib/extension"),g=f("./lib/limits"),l=f("./lib/buffer"),q=f("./lib/elements"),m=f("./lib/texture"),y=f("./lib/renderbuffer"),r=f("./lib/framebuffer"),w=f("./lib/attribute"),x=f("./lib/shader"),t=f("./lib/read"),u=f("./lib/core");k.exports=function(){function f(){Q=a.next(f);L.count+=1;var b=c();L.deltaTime=(b-M)/1E3;L.time=(b-K)/1E3;M=b;D();for(b=0;b<P.length;++b)(0,P[b])(L,null,0)}function k(a){}
function p(a){}function C(a){function c(a){var d={},e={};Object.keys(a).forEach(function(c){var f=a[c];b.isDynamic(f)?e[c]=b.unbox(f,c):d[c]=f});return{dynamic:e,"static":d}}function e(a){for(;n.length<a;)n.push(null);return n}var f=c(a.context||{}),h=c(a.uniforms||{}),g=c(a.attributes||{});a=c(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=d({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var f=aa.compile(a,g,h,f),k=f.draw,l=f.batch,m=f.scope,n=[];return function(a,b){var c;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)m.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)m.call(this,a[c],b,c);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,
a,a.length)}else return k.call(this,a)}}function A(){aa.procs.poll()}function D(){var a=ga.viewport,b=ga.scissor_box;a[0]=a[1]=b[0]=b[1]=0;L.viewportWidth=L.frameBufferWidth=L.drawingBufferWidth=a[2]=b[2]=F.drawingBufferWidth;L.viewportHeight=L.frameBufferWidth=L.drawingBufferHeight=a[3]=b[3]=F.drawingBufferHeight;aa.procs.refresh()}var E=e(Array.prototype.slice.call(arguments)),F=E.gl,I=E.options,E=h(),H=n(F).extensions,K=c(),M=K,O=F.drawingBufferWidth,J=F.drawingBufferHeight,L={count:0,deltaTime:0,
time:0,viewportWidth:O,viewportHeight:J,framebufferWidth:O,framebufferHeight:J,drawingBufferWidth:O,drawingBufferHeight:J,pixelRatio:I.pixelRatio},G=g(F,H),N=l(F),O=q(F,H,N),J=w(F,H,G,N,E),T=x(F,E),R=m(F,H,G,A,L),ea=y(F,H,G),fa=r(F,H,G,R,ea),la=t(F,A,L),aa=u(F,E,H,G,N,O,R,fa,{},J,T,{elements:null,primitive:4,count:-1,offset:0,instances:-1},L),ga=aa.next,S=F.canvas,P=[],Q=0;S&&(S.addEventListener("webglcontextlost",k,!1),S.addEventListener("webglcontextrestored",p,!1));D();return d(C,{clear:function(a){var b=
0;A();var c=a.color;c&&(F.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(F.clearDepth(+a.depth),b|=256);"stencil"in a&&(F.clearStencil(a.stencil|0),b|=1024);F.clear(b)},prop:b.define.bind(null,1),context:b.define.bind(null,2),"this":b.define.bind(null,3),draw:C({}),buffer:function(a){return N.create(a,34962)},elements:O.create,texture:R.create2D,cube:R.createCube,renderbuffer:ea.create,framebuffer:fa.create,framebufferCube:function(a){},attributes:F.getContextAttributes(),
frame:function(b){P.push(b);!Q&&0<P.length&&f();return{cancel:function(){var c=P.find(function(a){return a===b});0>c||(P.splice(c,1),0>=P.length&&Q&&(a.cancel(f),Q=0))}}},limits:G,hasExtension:function(a){return 0<=G.extensions.indexOf(a.toLowerCase())},read:la,destroy:function(){Q&&(a.cancel(f),Q=0);S&&(S.removeEventListener("webglcontextlost",k),S.removeEventListener("webglcontextrestored",p));T.clear();fa.clear();ea.clear();R.clear();N.clear();if(I.onDestroy)I.onDestroy()},_gl:F,_refresh:D})}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/strings":17,"./lib/texture":18,"./lib/util/clock":19,"./lib/util/extend":21,"./lib/util/raf":26,"./lib/webgl":29}],110:[function(f,k,p){function d(a){throw Error("resl: "+a);}function b(a,b,c){Object.keys(a).forEach(function(a){0>b.indexOf(a)&&d('invalid parameter "'+a+'" in '+c)})}
function a(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=b}var c=["manifest","onDone","onProgress","onError"],h=["type","src","stream","credentials","parser"],e=["onData","onDone"];k.exports=function(f){function g(a,b){if(a in f){var c=f[a];"function"!==typeof c&&d('invalid callback "'+a+'"');return c}return null}function k(b){function c(){if(!(2>g.readyState||1===n.state||-1===n.state)){if(200!==g.status)return m('error loading resource "'+b.name+'"');if(2<g.readyState&&
0===n.state){var a;a="binary"===b.type?g.response:g.responseText;if(h.data)try{l=h.data(a)}catch(e){return m(e)}else l=a}if(3<g.readyState&&0===n.state){if(h.done)try{l=h.done()}catch(e){return m(e)}n.state=1}u[d]=l;n.progress=.75*n.progress+.25;n.ready=b.stream&&!!l||1===n.state;y()}}var d=b.name,e=b.stream,f="binary"===b.type,h=b.parser,g=new XMLHttpRequest,l=null,n=new a(d,function(){1!==n.state&&-1!==n.state&&(g.onreadystatechange=null,g.abort(),n.state=-1)});g.onreadystatechange=e?c:function(){4===
g.readyState&&c()};f&&(g.responseType="arraybuffer");b.credentials&&(g.withCredentials=!0);g.open("GET",b.src,!0);g.send();return n}function p(b,c){function d(){if(0===n.state)if(l.data)try{q=l.data(c)}catch(a){return m(a)}else q=c}function e(a){d();u[k]=q;n.progress=a.lengthComputable?Math.max(n.progress,a.loaded/a.total):.75*n.progress+.25;n.ready=b.stream;y(k)}function f(){d();if(0===n.state){if(l.done)try{q=l.done()}catch(a){return m(a)}n.state=1}n.progress=1;n.ready=!0;u[k]=q;g();y("finish "+
k)}function h(){m('error loading asset "'+k+'"')}function g(){b.stream&&c.removeEventListener("progress",e);"image"===b.type?c.addEventListener("load",f):c.addEventListener("canplay",f);c.removeEventListener("error",h)}var k=b.name,l=b.parser,n=new a(k,function(){1!==n.state&&-1!==n.state&&(n.state=-1,g(),c.src="")}),q=c;b.stream&&c.addEventListener("progress",e);"image"===b.type?c.addEventListener("load",f):c.addEventListener("canplay",f);c.addEventListener("error",h);c.crossOrigin=b.credentials?
"use-credentials":"anonymous";c.src=b.src;return n}function m(a){-1!==z&&1!==z&&(z=-1,B.forEach(function(a){a.cancel()}),t?"string"===typeof a?t(Error("resl: "+a)):t(a):console.error("resl error:",a))}function y(a){if(-1!==z&&1!==z){var b=0,c=0;B.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===B.length?(z=1,w(u)):x&&x(b/B.length,a)}}"object"===typeof f&&f||d("invalid or missing configuration");b(f,c,"config");var r=f.manifest;"object"===typeof r&&r||d("missing manifest");var w=g("onDone");
w||d("missing onDone() callback");var x=g("onProgress"),t=g("onError"),u={},z=0,v={text:k,binary:function(a){return k(a)},image:function(a){return p(a,document.createElement("img"))},video:function(a){return p(a,document.createElement("video"))},audio:function(a){return p(a,document.createElement("audio"))}},B=Object.keys(r).map(function(a){function c(a,b){if(a in f.parser){var e=f.parser[a];"function"!==typeof e&&d("invalid parser callback "+a+' for asset "'+a+'"');return e}return b}var f=r[a];"string"===
typeof f?f={src:f}:"object"===typeof f&&f||d('invalid asset definition "'+a+'"');b(f,h,'asset "'+a+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(b(g,e,'parser for asset "'+a+'"'),"onData"in g||d('missing onData callback for parser in asset "'+a+'"'),g={data:c("onData"),done:c("onDone")}):d('invalid parser for asset "'+a+'"'));return{name:a,type:function(b,c,e){b in f&&(e=f[b]);0>c.indexOf(e)&&d("invalid "+b+' "'+e+'" for asset "'+
a+'", possible values: '+c);return e}("type",Object.keys(v),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(b,c,e){b in f?e=f[b]:c&&d("missing "+b+' for asset "'+a+'"');"string"!==typeof e&&d("invalid "+b+' for asset "'+a+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return v[a.type](a)})}},{}]},{},[1]);
