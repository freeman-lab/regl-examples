(function e$$0(p,w,h){function k(a,e){if(!w[a]){if(!p[a]){var g="function"==typeof require&&require;if(!e&&g)return g(a,!0);if(t)return t(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g;}g=w[a]={exports:{}};p[a][0].call(g.exports,function(e){var g=p[a][1][e];return k(g?g:e)},g,g.exports,e$$0,p,w,h)}return w[a].exports}for(var t="function"==typeof require&&require,g=0;g<h.length;g++)k(h[g]);return k})({1:[function(f,p,w){var h=f("../regl")(),k=f("parse-dds");f("resl")({manifest:{diffuse:{type:"binary",
src:"assets/alpine_cliff_a.dds",parser:function(t){var g=k(t),a=g.images[0];return h.texture({format:"rgba s3tc "+g.format,shape:g.shape,mag:"linear",data:new Uint8Array(t,a.offset,a.length)})}},specular:{type:"image",src:"assets/alpine_cliff_a_spec.png",parser:function(k){return h.texture({mag:"linear",data:k})}},normals:{type:"image",src:"assets/alpine_cliff_a_norm.png",parser:function(k){return h.texture({mag:"linear",data:k})}}},onDone:function(k){var g=h({frag:"\n      precision mediump float;\n      uniform sampler2D specular, normals, diffuse;\n      varying vec3 lightDir, eyeDir;\n      varying vec2 uv;\n      void main () {\n        float d = length(lightDir);\n        vec3 L = normalize(lightDir);\n        vec3 E = normalize(eyeDir);\n        vec3 N = normalize(2.0 * texture2D(normals, uv).rgb - 1.0);\n        N = vec3(-N.x, N.yz);\n        vec3 D = texture2D(diffuse, uv).rgb;\n        vec3 kD = D * (0.01 +\n          max(0.0, dot(L, N) * (0.6 + 0.8 / d) ));\n        vec3 S = texture2D(specular, uv).rgb;\n        vec3 kS = 2.0 * pow(max(0.0, dot(normalize(N + L), -E)), 10.0) * S;\n        gl_FragColor = vec4(kD + kS, 1);\n      }",
vert:"\n      precision mediump float;\n      attribute vec2 position;\n      uniform vec2 lightPosition;\n      varying vec3 lightDir, eyeDir;\n      varying vec2 uv;\n      void main () {\n        vec2 P = 1.0 - 2.0 * position;\n        uv = vec2(position.x, 1.0 - position.y);\n        eyeDir = -vec3(P, 1);\n        lightDir = vec3(lightPosition - P, 1);\n        gl_Position = vec4(P, 0, 1);\n      }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{specular:k.specular,normals:k.normals,diffuse:k.diffuse,
lightPosition:function(a){a=.025*a.tick;return[2*Math.cos(a),2*Math.sin(a)]}},count:3});h.frame(function(){h.updateTimer();g()})}})},{"../regl":34,"parse-dds":33,resl:35}],2:[function(f,p,w){function h(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}p.exports=function(k,t,g,a,e){k=g.maxAttributes;t=Array(k);for(g=0;g<k;++g)t[g]=new h;return{Record:h,scope:{},state:t}}},{}],3:[function(f,p,w){function h(a){return z[Object.prototype.toString.call(a)]|
0}function k(a,e){for(var g=0;g<e.length;++g)a[g]=e[g]}function t(a,e,g,k,h,n,c){for(var t=0,f=0;f<g;++f)for(var d=0;d<k;++d)a[t++]=e[h*f+n*d+c]}function g(a,e,g){for(var k=0,h=0;h<e.length;++h)for(var n=e[h],c=0;c<g;++c)a[k++]=n[c]}var a=f("./util/is-typed-array"),e=f("./util/is-ndarray"),n=f("./util/values"),C=f("./util/pool"),z=f("./constants/arraytypes.json"),u=f("./constants/dtypes.json"),D=f("./constants/usage.json");p.exports=function(f,y){function r(a){this.id=c++;this.buffer=f.createBuffer();
this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function x(a,e,g){a.byteLength=e.byteLength;f.bufferData(a.type,e,g)}function p(d,c,f,n,r){d.usage=f;if(Array.isArray(c))d.dtype=n||5126,0<c.length&&(Array.isArray(c[0])?(d.dimension=c[0].length,n=C.allocType(d.dtype,c.length*d.dimension),g(n,c,d.dimension),x(d,n,f),C.freeType(n)):"number"===typeof c[0]?(d.dimension=r,n=C.allocType(d.dtype,c.length),k(n,c),x(d,n,f),C.freeType(n)):a(c[0])&&(d.dimension=c[0].length,d.dtype=
n||h(c[0])||5126,n=C.allocType(d.dtype,c.length*d.dimension),g(n,c,d.dimension),x(d,n,f),C.freeType(n)));else if(a(c))d.dtype=n||h(c),d.dimension=r,x(d,c,f);else if(e(c)){var v=c.shape,q=c.stride;r=c.offset;var A=0,R=0,D=0,E=0;1===v.length?(A=v[0],R=1,D=q[0],E=0):2===v.length&&(A=v[0],R=v[1],D=q[0],E=q[1]);d.dtype=n||h(c.data)||5126;d.dimension=R;n=C.allocType(d.dtype,A*R);t(n,c.data,A,R,D,E,r);x(d,n,f);C.freeType(n)}}function v(a){y.bufferCount--;f.deleteBuffer(a.buffer);a.buffer=null;delete z[a.id]}
var c=0,z={};r.prototype.bind=function(){f.bindBuffer(this.type,this.buffer)};r.prototype.destroy=function(){v(this)};var K=[];return{create:function(d,c,n){function x(d){var c=35044,g=null,h=0,k=0,n=1;Array.isArray(d)||a(d)||e(d)?g=d:"number"===typeof d?h=d|0:d&&("data"in d&&(g=d.data),"usage"in d&&(c=D[d.usage]),"type"in d&&(k=u[d.type]),"dimension"in d&&(n=d.dimension|0),"length"in d&&(h=d.length|0));K.bind();g?p(K,g,c,k,n):(f.bufferData(K.type,h,c),K.dtype=k||5121,K.usage=c,K.dimension=n,K.byteLength=
h);return x}y.bufferCount++;var K=new r(c);z[K.id]=K;n||x(d);x._reglType="buffer";x._buffer=K;x.subdata=function(d,c){var n=(c||0)|0;K.bind();if(Array.isArray(d)){if(0<d.length)if("number"===typeof d[0]){var r=C.allocType(K.dtype,d.length);k(r,d);f.bufferSubData(K.type,n,r);C.freeType(r)}else if(Array.isArray(d[0])||a(d[0])){var r=d[0].length,v=C.allocType(K.dtype,d.length*r);g(v,d,r);f.bufferSubData(K.type,n,v);C.freeType(v)}}else if(a(d))f.bufferSubData(K.type,n,d);else if(e(d)){var E=d.shape,D=
d.stride,y=v=r=0,p=0;1===E.length?(r=E[0],v=1,y=D[0],p=0):2===E.length&&(r=E[0],v=E[1],y=D[0],p=D[1]);E=Array.isArray(d.data)?K.dtype:h(d.data);E=C.allocType(E,r*v);t(E,d.data,r,v,y,p,d.offset);f.bufferSubData(K.type,n,E);C.freeType(E)}return x};x.destroy=function(){v(K)};return x},createStream:function(d,a){var c=K.pop();c||(c=new r(d),c.buffer=f.createBuffer());c.bind();p(c,a,35040,0,1);return c},destroyStream:function(d){K.push(d)},clear:function(){n(z).forEach(v)},getBuffer:function(d){return d&&
d._buffer instanceof r?d._buffer:null},_initBuffer:p}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(f,p,w){p.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,
"[object ArrayBuffer]":5121}},{}],5:[function(f,p,w){p.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(f,p,w){p.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(f,p,w){p.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(f,p,w){function h(a){return Array.isArray(a)||z(a)||u(a)}function k(a){return a.sort(function(d,
a){return"viewport"===d?-1:"viewport"===a?1:d<a?-1:1})}function t(a,d,c,e){this.thisDep=a;this.contextDep=d;this.propDep=c;this.append=e}function g(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function a(a){return new t(!1,!1,!1,a)}function e(a,d){var c=a.type;return 0===c?(c=a.data.length,new t(!0,1<=c,2<=c,d)):new t(3===c,2===c,1===c,d)}var n=f("./util/codegen"),C=f("./util/loop"),z=f("./util/is-typed-array"),u=f("./util/is-ndarray"),D=f("./util/is-array-like"),J=f("./constants/primitives.json"),
y=f("./constants/dtypes.json"),r=["x","y","z","w"],x={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},I={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,
"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},c={cw:2304,ccw:2305},P=new t(!1,!1,!1,function(){});p.exports=function(f,d,p,z,u,L,w,q,A,R,Z,E,ea,la){function S(m){return m.replace(".","_")}function O(m,b,a){var d=S(m);za.push(m);xa[d]=F[d]=!!a;oa[d]=b}function G(m,b,a){var d=S(m);za.push(m);Array.isArray(a)?(F[d]=a.slice(),xa[d]=a.slice()):F[d]=xa[d]=a;pa[d]=b}function W(){var m=
n(),b=m.link,a=m.global;m.id=Ja++;m.batchId="0";var c=b(Ha),e=m.shared={props:"a0"};Object.keys(Ha).forEach(function(l){e[l]=a.def(c,".",l)});var H=m.next={},g=m.current={};Object.keys(pa).forEach(function(l){Array.isArray(F[l])&&(H[l]=a.def(e.next,".",l),g[l]=a.def(e.current,".",l))});var l=m.constants={};Object.keys(Aa).forEach(function(m){l[m]=a.def(JSON.stringify(Aa[m]))});m.invoke=function(l,a){switch(a.type){case 0:var d=["this",e.context,e.props,m.batchId];return l.def(b(a.data),".call(",d.slice(0,
Math.max(a.data.length+1,4)),")");case 1:return l.def(e.props,a.data);case 2:return l.def(e.context,a.data);case 3:return l.def("this",a.data)}};m.attribCache={};var Fa={};m.scopeAttrib=function(l){l=d.id(l);if(l in Fa)return Fa[l];var m=R.scope[l];m||(m=R.scope[l]=new ma);return Fa[l]=b(m)};return m}function ia(m){var b=m["static"];m=m.dynamic;if("framebuffer"in b){var d=b.framebuffer;return d?(d=q.getFramebuffer(d),a(function(m,b){var a=m.link(d),l=m.shared;b.set(l.framebuffer,".next",a);l=l.context;
b.set(l,".framebufferWidth",a+".width");b.set(l,".framebufferHeight",a+".height");return a})):a(function(m,b){var a=m.shared;b.set(a.framebuffer,".next","null");a=a.context;b.set(a,".framebufferWidth",a+".drawingBufferWidth");b.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in m){var c=m.framebuffer;return e(c,function(m,b){var a=m.invoke(b,c),l=m.shared,d=l.framebuffer,a=b.def(d,".getFramebuffer(",a,")");b.set(d,".next",a);l=l.context;b.set(l,".framebufferWidth",
a+"?"+a+".width:"+l+".drawingBufferWidth");b.set(l,".framebufferHeight",a+"?"+a+".height:"+l+".drawingBufferHeight");return a})}return null}function qa(m,b){function a(l){if(l in d){var m=d[l];l=!0;var Ia=m.x|0,H=m.y|0,g,fa;"width"in m?g=m.width|0:l=!1;"height"in m?fa=m.height|0:l=!1;return new t(!l&&b&&b.thisDep,!l&&b&&b.contextDep,!l&&b&&b.propDep,function(l,b){var a=l.shared.context,d=g;"width"in m||(d=b.def(a,".","framebufferWidth","-",Ia));var c=fa;"height"in m||(c=b.def(a,".","framebufferHeight",
"-",H));return[Ia,H,d,c]})}if(l in c){var h=c[l];l=e(h,function(l,b){var m=l.invoke(b,h),a=l.shared.context,d=b.def(m,".x|0"),c=b.def(m,".y|0"),M=b.def('"width" in ',m,"?",m,".width|0:","(",a,".","framebufferWidth","-",d,")"),m=b.def('"height" in ',m,"?",m,".height|0:","(",a,".","framebufferHeight","-",c,")");return[d,c,M,m]});b&&(l.thisDep=l.thisDep||b.thisDep,l.contextDep=l.contextDep||b.contextDep,l.propDep=l.propDep||b.propDep);return l}return b?new t(b.thisDep,b.contextDep,b.propDep,function(l,
b){var m=l.shared.context;return[0,0,b.def(m,".","framebufferWidth"),b.def(m,".","framebufferHeight")]}):null}var d=m["static"],c=m.dynamic,H=a("viewport");if(H)var g=H,H=new t(H.thisDep,H.contextDep,H.propDep,function(l,b){var m=g.append(l,b),a=l.shared.context;b.set(a,".viewportWidth",m[2]);b.set(a,".viewportHeight",m[3]);return m});return{viewport:H,scissor_box:a("scissor.box")}}function sa(b){function c(l){if(l in fa){var b=d.id(fa[l]);l=a(function(){return b});l.id=b;return l}if(l in h){var m=
h[l];return e(m,function(l,b){var a=l.invoke(b,m);return b.def(l.shared.strings,".id(",a,")")})}return null}var fa=b["static"],h=b.dynamic,N=c("frag"),H=c("vert"),k=null;g(N)&&g(H)?(k=Z.program(H.id,N.id),b=a(function(l,b){return l.link(k)})):b=new t(N&&N.thisDep||H&&H.thisDep,N&&N.contextDep||H&&H.contextDep,N&&N.propDep||H&&H.propDep,function(l,b){var m=l.shared.shader,a;a=N?N.append(l,b):b.def(m,".","frag");var d;d=H?H.append(l,b):b.def(m,".","vert");return b.def(m+".program("+d+","+a+")")});return{frag:N,
vert:H,progVar:b,program:k}}function ja(b){function d(b,l){if(b in c){var m=c[b]|0;return a(function(b,a){l&&(b.OFFSET=m);return m})}if(b in k){var M=k[b];return e(M,function(b,m){var a=b.invoke(m,M);l&&(b.OFFSET=a);return a})}return l&&N?a(function(b,l){b.OFFSET="0";return 0}):null}var c=b["static"],k=b.dynamic,N=function(){if("elements"in c){var b=c.elements;h(b)?b=L.getElements(L.create(b)):b&&(b=L.getElements(b));var l=a(function(l,m){if(b){var a=l.link(b);return l.ELEMENTS=a}return l.ELEMENTS=
null});l.value=b;return l}if("elements"in k){var m=k.elements;return e(m,function(b,l){var a=b.shared,d=a.isBufferArgs,a=a.elements,c=b.invoke(l,m),M=l.def("null"),d=l.def(d,"(",c,")"),c=b.cond(d).then(M,"=",a,".createStream(",c,");")["else"](M,"=",a,".getElements(",c,");");l.entry(c);l.exit(b.cond(d).then(a,".destroyStream(",M,");"));return b.ELEMENTS=M})}return null}(),H=d("offset",!0);return{elements:N,primitive:function(){if("primitive"in c){var b=c.primitive;return a(function(l,m){return J[b]})}if("primitive"in
k){var l=k.primitive;return e(l,function(b,m){var a=b.constants.primTypes,d=b.invoke(m,l);return m.def(a,"[",d,"]")})}return N?g(N)?N.value?a(function(b,l){return l.def(b.ELEMENTS,".primType")}):a(function(){return 4}):new t(N.thisDep,N.contextDep,N.propDep,function(b,l){var m=b.ELEMENTS;return l.def(m,"?",m,".primType:",4)}):null}(),count:function(){if("count"in c){var b=c.count|0;return a(function(){return b})}if("count"in k){var l=k.count;return e(l,function(b,m){return b.invoke(m,l)})}return N?
g(N)?N?H?new t(H.thisDep,H.contextDep,H.propDep,function(b,l){return l.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):a(function(b,l){return l.def(b.ELEMENTS,".vertCount")}):a(function(){return-1}):new t(N.thisDep||H.thisDep,N.contextDep||H.contextDep,N.propDep||H.propDep,function(b,l){var m=b.ELEMENTS;return b.OFFSET?l.def(m,"?",m,".vertCount-",b.OFFSET,":-1"):l.def(m,"?",m,".vertCount:-1")}):null}(),instances:d("instances",!1),offset:H}}function ra(b){var d=b["static"],g=b.dynamic,k={};za.forEach(function(b){function m(l,
c){if(b in d){var H=l(d[b]);k[h]=a(function(){return H})}else if(b in g){var n=g[b];k[h]=e(n,function(b,l){return c(b,l,b.invoke(l,n))})}}var h=S(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return m(function(b){return b},function(b,m,a){return a});case "depth.func":return m(function(b){return I[b]},function(b,m,a){return m.def(b.constants.compareFuncs,
"[",a,"]")});case "depth.range":return m(function(b){return b},function(b,m,a){b=m.def("+",a,"[0]");m=m.def("+",a,"[1]");return[b,m]});case "blend.func":return m(function(b){return[x["srcRGB"in b?b.srcRGB:b.src],x["dstRGB"in b?b.dstRGB:b.dst],x["srcAlpha"in b?b.srcAlpha:b.src],x["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,m,a){function d(b,l){var M=m.def('"',b,l,'" in ',a,"?",a,".",b,l,":",a,".",b);return m.def(c,"[",M,"]")}var c=b.constants.blendFuncs;b=d("src","RGB");var M=d("src","Alpha"),e=
d("dst","RGB"),g=d("dst","Alpha");return[b,e,M,g]});case "blend.equation":return m(function(b){if("string"===typeof b)return[aa[b],aa[b]];if("object"===typeof b)return[aa[b.rgb],aa[b.alpha]]},function(b,m,a){var d=b.constants.blendEquations,c=m.def(),M=m.def();b=b.cond("typeof ",a,'==="string"');b.then(c,"=",M,"=",d,"[",a,"];");b["else"](c,"=",d,"[",a,".rgb];",M,"=",d,"[",a,".alpha];");m(b);return[c,M]});case "blend.color":return m(function(b){return C(4,function(m){return+b[m]})},function(b,m,a){return C(4,
function(b){return m.def("+",a,"[",b,"]")})});case "stencil.mask":return m(function(b){return b|0},function(b,m,a){return m.def(a,"|0")});case "stencil.func":return m(function(b){return[I[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,m,a){b=m.def('"cmp" in ',a,"?",b.constants.compareFuncs,"[",a,".cmp]",":",7680);var d=m.def(a,".ref|0");m=m.def('"mask" in ',a,"?",a,".mask|0:-1");return[b,d,m]});case "stencil.opFront":case "stencil.opBack":return m(function(m){return["stencil.opBack"===
b?1029:1028,v[m.fail||"keep"],v[m.zfail||"keep"],v[m.pass||"keep"]]},function(m,a,d){function c(b){return a.def('"',b,'" in ',d,"?",M,"[",d,".",b,"]:",7680)}var M=m.constants.stencilOps;return["stencil.opBack"===b?1029:1028,c("fail"),c("zfail"),c("pass")]});case "polygonOffset.offset":return m(function(b){return[b.factor|0,b.units|0]},function(b,m,a){b=m.def(a,".factor|0");m=m.def(a,".units|0");return[b,m]});case "cull.face":return m(function(b){var m=0;"front"===b?m=1028:"back"===b&&(m=1029);return m},
function(b,m,a){return m.def(a,'==="front"?',1028,":",1029)});case "lineWidth":return m(function(b){return b},function(b,m,a){return a});case "frontFace":return m(function(b){return c[b]},function(b,m,a){return m.def(a+'==="cw"?2304:2305')});case "colorMask":return m(function(b){return b.map(function(b){return!!b})},function(b,m,a){return C(4,function(b){return"!!"+a+"["+b+"]"})});case "sample.coverage":return m(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,m,a){b=m.def('"value" in ',
a,"?+",a,".value:1");m=m.def("!!",a,".invert");return[b,m]})}});return k}function na(b){var d=b["static"],c=b.dynamic,g={};Object.keys(d).forEach(function(b){var m=d[b],c;"number"===typeof m||"boolean"===typeof m?c=a(function(){return m}):"function"!==typeof m||"texture2d"!==m._reglType&&"textureCube"!==m._reglType?D(m)&&(c=a(function(b){return b.global.def("[",C(m.length,function(b){return m[b]}),"]")})):c=a(function(b){return b.link(m)});c.value=m;g[b]=c});Object.keys(c).forEach(function(b){var m=
c[b];g[b]=e(m,function(b,a){return b.invoke(a,m)})});return g}function X(b){var c=b["static"],g=b.dynamic,k={};Object.keys(c).forEach(function(b){var m=c[b],g=d.id(b),l=new ma;if(h(m))l.state=1,l.buffer=u.getBuffer(u.create(m,34962,!1)),l.type=l.buffer.dtype;else{var e=u.getBuffer(m);if(e)l.state=1,l.buffer=e,l.type=e.dtype;else if(m.constant){var n=m.constant;l.state=2;"number"===typeof n?l.x=n:r.forEach(function(b,m){m<n.length&&(l[b]=n[m])})}else{var e=u.getBuffer(m.buffer),F=m.offset|0,fa=m.stride|
0,B=m.size|0,f=!!m.normalized,q=0;"type"in m&&(q=y[m.type]);m=m.divisor|0;l.buffer=e;l.state=1;l.size=B;l.normalized=f;l.type=q||e.dtype;l.offset=F;l.stride=fa;l.divisor=m}}k[b]=a(function(b,m){var a=b.attribCache;if(g in a)return a[g];var d={isStream:!1};Object.keys(l).forEach(function(b){d[b]=l[b]});l.buffer&&(d.buffer=b.link(l.buffer));return a[g]=d})});Object.keys(g).forEach(function(b){var m=g[b];k[b]=e(m,function(b,a){function d(b){a(k[b],"=",c,".",b,"|0;")}var c=b.invoke(a,m),M=b.shared,e=
M.isBufferArgs,g=M.buffer,k={isStream:a.def(!1)},h=new ma;h.state=1;Object.keys(h).forEach(function(b){k[b]=a.def(""+h[b])});var n=k.buffer,F=k.type;a("if(",e,"(",c,")){",k.isStream,"=true;",n,"=",g,".createStream(",34962,",",c,");",F,"=",n,".dtype;","}else{",n,"=",g,".getBuffer(",c,");","if(",n,"){",F,"=",n,".dtype;","}else if(",c,".constant){",k.state,"=",2,";",r.map(function(b,m){return k[b]+"="+c+".length>="+m+"?"+c+"["+m+"]:0;"}).join(""),"}else{",n,"=",g,".getBuffer(",c,".buffer);",F,'="type" in ',
c,"?",M.glTypes,"[",c,".type]:",n,".dtype;",k.normalized,"=!!",c,".normalized;");d("size");d("offset");d("stride");d("divisor");a("}}");return k})});return k}function ga(b){var d=b["static"],c=b.dynamic,g={};Object.keys(d).forEach(function(b){var m=d[b];g[b]=a(function(b,a){return"number"===typeof m||"boolean"===typeof m?""+m:b.link(m)})});Object.keys(c).forEach(function(b){var m=c[b];g[b]=e(m,function(b,a){return b.invoke(a,m)})});return g}function Y(b,a,d){var c=b.shared.context,g=b.scope();Object.keys(d).forEach(function(e){a.save(c,
"."+e);g(c,".",e,"=",d[e].append(b,a),";")});a(g)}function T(b,a,d){var c=b.shared,g=c.gl,e=c.framebuffer,k;B&&(k=a.def(c.extensions,".webgl_draw_buffers"));var l=b.constants,c=l.drawBuffer,l=l.backBuffer;b=d?d.append(b,a):a.def(e,".next");a("if(",e,".dirty||",b,"!==",e,".cur){","if(",b,"){",g,".bindFramebuffer(",36160,",",b,".framebuffer);");B&&a(k,".drawBuffersWEBGL(",c,"[",b,".colorAttachments.length]);");a("}else{",g,".bindFramebuffer(",36160,",null);");B&&a(k,".drawBuffersWEBGL(",l,");");a("}",
e,".cur=",b,";",e,".dirty=false;","}")}function V(b,a,d){var c=b.shared,e=c.gl,g=b.current,k=b.next,l=c.current,h=c.next,n=b.cond(l,".dirty");za.forEach(function(a){a=S(a);if(!(a in d.state)){var c,M;if(a in k){c=k[a];M=g[a];var B=C(F[a].length,function(b){return n.def(c,"[",b,"]")});n(b.cond(B.map(function(b,m){return b+"!=="+M+"["+m+"]"}).join("||")).then(e,".",pa[a],"(",B,");",B.map(function(b,m){return M+"["+m+"]="+b}).join(";"),";"))}else c=n.def(h,".",a),B=b.cond(c,"!==",l,".",a),n(B),a in oa?
B(b.cond(c).then(e,".enable(",oa[a],");")["else"](e,".disable(",oa[a],");"),l,".",a,"=",c,";"):B(e,".",pa[a],"(",c,");",l,".",a,"=",c,";")}});0===Object.keys(d.state).length&&n(l,".dirty=false;");a(n)}function ba(b,a,d,c){var e=b.shared,n=b.current,h=e.current,l=e.gl;k(Object.keys(d)).forEach(function(e){var k=d[e];if(!c||c(k)){var F=k.append(b,a);if(oa[e]){var B=oa[e];g(k)?F?a(l,".enable(",B,");"):a(l,".disable(",B,");"):a(b.cond(F).then(l,".enable(",B,");")["else"](l,".disable(",B,");"));a(h,".",
e,"=",F,";")}else if(D(F)){var q=n[e];a(l,".",pa[e],"(",F,");",F.map(function(b,m){return q+"["+m+"]="+b}).join(";"),";")}else a(l,".",pa[e],"(",F,");",h,".",e,"=",F,";")}})}function ta(m,a){b&&!m.instancing&&(m.instancing=a.def(m.shared.extensions,".angle_instanced_arrays"))}function Ba(b,a,d){d=b.stats;b=b.shared;la&&a(b.timer,".beginQuery(",d,");")}function ka(b,a,d){b=b.shared;la&&a(b.timer,".endQuery();")}function ca(a,d,c,e,g){function k(b){switch(b){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function n(c,e,g){function k(){d("if(!",q,".pointer){",F,".enableVertexAttribArray(",B,");",q,".pointer=true;}");var c=g.type,l;l=g.size?d.def(g.size,"||",e):e;d("if(",q,".type!==",c,"||",q,".size!==",l,"||",t.map(function(b){return q+"."+b+"!=="+g[b]}).join("||"),"){",F,".bindBuffer(",34962,",",f,".buffer);",F,".vertexAttribPointer(",[B,l,c,g.normalized,g.stride,g.offset],");",q,".type=",c,";",q,
".size=",l,";",t.map(function(b){return q+"."+b+"="+g[b]+";"}).join(""),"}");b&&(c=g.divisor,d("if(",q,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[B,c],");",q,".divisor=",c,";}"))}function h(){d("if(",q,".pointer){",F,".disableVertexAttribArray(",B,");",q,".pointer=false;","}if(",r.map(function(b,a){return q+"."+b+"!=="+fa[a]}).join("||"),"){",F,".vertexAttrib4f(",B,",",fa,");",r.map(function(b,a){return q+"."+b+"="+fa[a]+";"}).join(""),"}")}var F=l.gl,B=d.def(c,".location"),q=
d.def(l.attributes,"[",B,"]");c=g.state;var f=g.buffer,fa=[g.x,g.y,g.z,g.w],t=["buffer","normalized","offset","stride"];1===c?k():2===c?h():(d("if(",c,"===",1,"){"),k(),d("}else{"),h(),d("}"))}var l=a.shared;e.forEach(function(b){var l=b.name,e=c.attributes[l],h;if(e){if(!g(e))return;h=e.append(a,d)}else{if(!g(P))return;var F=a.scopeAttrib(l);h={};Object.keys(new ma).forEach(function(b){h[b]=d.def(F,".",b)})}n(a.link(b),k(b.info.type),h)})}function da(b,a,c,e,k){for(var h=b.shared,n=h.gl,l,F=0;F<
e.length;++F){var B=e[F],q=B.name,f=B.info.type,t=c.uniforms[q],B=b.link(B)+".location",r;if(t){if(!k(t))continue;if(g(t)){q=t.value;if(35678===f||35680===f)f=b.link(q._texture),a(n,".uniform1i(",B,",",f+".bind());"),a.exit(f,".unbind();");else if(35674===f||35675===f||35676===f)q=b.global.def("new Float32Array(["+Array.prototype.slice.call(q)+"])"),t=2,35675===f?t=3:35676===f&&(t=4),a(n,".uniformMatrix",t,"fv(",B,",false,",q,");");else{switch(f){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l=
"3f";break;case 35666:l="4f";break;case 35670:l="1i";break;case 5124:l="1i";break;case 35671:l="2i";break;case 35667:l="2i";break;case 35672:l="3i";break;case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}a(n,".uniform",l,"(",B,",",D(q)?Array.prototype.slice.call(q):q,");")}continue}else r=t.append(b,a)}else{if(!k(P))continue;r=a.def(h.uniforms,"[",d.id(q),"]")}q=1;switch(f){case 35678:case 35680:f=a.def(r,"._texture");a(n,".uniform1i(",B,",",f,".bind());");a.exit(f,".unbind();");continue;
case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";q=2;break;case 35668:case 35672:l="3i";q=3;break;case 35669:case 35673:l="4i";q=4;break;case 5126:l="1f";break;case 35664:l="2f";q=2;break;case 35665:l="3f";q=3;break;case 35666:l="4f";q=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}a(n,".uniform",l,"(",B,",");if("M"===l.charAt(0)){var B=Math.pow(f-35674+2,2),v=b.global.def("new Float32Array(",B,")");a("false,(Array.isArray(",r,")||",r,
" instanceof Float32Array)?",r,":(",C(B,function(b){return v+"["+b+"]="+r+"["+b+"]"}),",",v,")")}else 1<q?a(C(q,function(b){return r+"["+b+"]"})):a(r);a(");")}}function ya(a,d,c,e){function k(b){var l=B[b];return l?l.contextDep&&e.contextDynamic||l.propDep?l.append(a,c):l.append(a,d):d.def(F,".",b)}function h(){function b(){c(D,".drawElementsInstancedANGLE(",[t,v,E,r+"<<(("+E+"-5121)>>1)",x],");")}function a(){c(D,".drawArraysInstancedANGLE(",[t,r,v,x],");")}f?C?b():(c("if(",f,"){"),b(),c("}else{"),
a(),c("}")):a()}function n(){function b(){c(q+".drawElements("+[t,v,E,r+"<<(("+E+"-5121)>>1)"]+");")}function a(){c(q+".drawArrays("+[t,r,v]+");")}f?C?b():(c("if(",f,"){"),b(),c("}else{"),a(),c("}")):a()}var l=a.shared,q=l.gl,F=l.draw,B=e.draw,f=function(){var b=B.elements,l=d;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)l=c;b=b.append(a,l)}else b=l.def(F,".","elements");b&&l("if("+b+")"+q+".bindBuffer(34963,"+b+".buffer.buffer);");return b}(),t=k("primitive"),r=k("offset"),v=function(){var b=
B.count,l=d;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)l=c;b=b.append(a,l)}else b=l.def(F,".","count");return b}();if("number"===typeof v){if(0===v)return}else c("if(",v,"){"),c.exit("}");var x,D;b&&(x=k("instances"),D=a.instancing);var E=f+".type",C=B.elements&&g(B.elements);b&&("number"!==typeof x||0<=x)?"string"===typeof x?(c("if(",x,">0){"),h(),c("}else if(",x,"<0){"),n(),c("}")):h():n()}function va(a,c,d,e,g){c=W();g=c.proc("body",g);b&&(c.instancing=g.def(c.shared.extensions,".angle_instanced_arrays"));
a(c,g,d,e);return c.compile().body}function Ca(b,a,c,d){ta(b,a);ca(b,a,c,d.attributes,function(){return!0});da(b,a,c,d.uniforms,function(){return!0});ya(b,a,a,c)}function Da(b,a){var c=b.proc("draw",1);ta(b,c);Y(b,c,a.context);T(b,c,a.framebuffer);V(b,c,a);ba(b,c,a.state);Ba(b,c,a);var d=a.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",d,".program);");if(a.shader.program)Ca(b,c,a,a.shader.program);else{var e=b.global.def("{}"),g=c.def(d,".id"),k=c.def(e,"[",g,"]");c(b.cond(k).then(k,".call(this,a0);")["else"](k,
"=",e,"[",g,"]=",b.link(function(c){return va(Ca,b,a,c,1)}),"(",d,");",k,".call(this,a0);"))}0<Object.keys(a.state).length&&c(b.shared.current,".dirty=true;");ka(b,c,a)}function Ea(b,a,c,d){function e(){return!0}b.batchId="a1";ta(b,a);ca(b,a,c,d.attributes,e);da(b,a,c,d.uniforms,e);ya(b,a,a,c)}function ua(b,a,c,d){function e(b){return b.contextDep&&k||b.propDep}function g(b){return!e(b)}ta(b,a);var k=c.contextDep,l=a.def(),h=a.def();b.shared.props=h;b.batchId=l;var n=b.scope(),q=b.scope();a(n.entry,
"for(",l,"=0;",l,"<","a1",";++",l,"){",h,"=","a0","[",l,"];",q,"}",n.exit);c.needsContext&&Y(b,q,c.context);c.needsFramebuffer&&T(b,q,c.framebuffer);ba(b,q,c.state,e);d?(ca(b,n,c,d.attributes,g),ca(b,q,c,d.attributes,e),da(b,n,c,d.uniforms,g),da(b,q,c,d.uniforms,e),ya(b,n,q,c)):(a=b.global.def("{}"),d=c.shader.progVar.append(b,q),h=q.def(d,".id"),n=q.def(a,"[",h,"]"),q(b.shared.gl,".useProgram(",d,".program);","if(!",n,"){",n,"=",a,"[",h,"]=",b.link(function(a){return va(Ea,b,c,a,2)}),"(",d,");}",
n,".call(this,a0[",l,"],",l,");"))}function Ga(b,a){var c=b.proc("batch",2);b.batchId="0";ta(b,c);var d=!1,e=!0;Object.keys(a.context).forEach(function(b){d=d||a.context[b].propDep});d||(Y(b,c,a.context),e=!1);var g=a.framebuffer,k=!1;g?(g.propDep?d=k=!0:g.contextDep&&d&&(k=!0),k||T(b,c,g)):T(b,c,null);a.state.viewport&&a.state.viewport.propDep&&(d=!0);V(b,c,a);ba(b,c,a.state,function(b){return!(b.contextDep&&d||b.propDep)});Ba(b,c,a);a.contextDep=d;a.needsContext=e;a.needsFramebuffer=k;e=a.shader.progVar;
if(e.contextDep&&d||e.propDep)ua(b,c,a,null);else if(e=e.append(b,c),c(b.shared.gl,".useProgram(",e,".program);"),a.shader.program)ua(b,c,a,a.shader.program);else{var g=b.global.def("{}"),k=c.def(e,".id"),l=c.def(g,"[",k,"]");c(b.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",g,"[",k,"]=",b.link(function(c){return va(ua,b,a,c,2)}),"(",e,");",l,".call(this,a0,a1);"))}0<Object.keys(a.state).length&&c(b.shared.current,".dirty=true;");ka(b,c,a)}function wa(b,a){function c(d){var l=a.shader[d];l&&
e.set(g.shader,"."+d,l.append(b,e))}var e=b.proc("scope",3);b.batchId="a2";var g=b.shared,n=g.current,h=g.timer,l;la&&(l=e.def(h,".getNumPendingQueries()"));Y(b,e,a.context);a.framebuffer&&a.framebuffer.append(b,e);k(Object.keys(a.state)).forEach(function(c){var d=a.state[c].append(b,e);D(d)?d.forEach(function(a,d){e.set(b.next[c],"["+d+"]",a)}):e.set(g.next,"."+c,d)});["elements","offset","count","instances","primitive"].forEach(function(c){var d=a.draw[c];d&&e.set(g.draw,"."+c,""+d.append(b,e))});
Object.keys(a.uniforms).forEach(function(c){e.set(g.uniforms,"["+d.id(c)+"]",a.uniforms[c].append(b,e))});Object.keys(a.attributes).forEach(function(c){var d=a.attributes[c].append(b,e),l=b.scopeAttrib(c);Object.keys(new ma).forEach(function(b){e.set(l,"."+b,d[b])})});c("vert");c("frag");0<Object.keys(a.state).length&&(e(n,".dirty=true;"),e.exit(n,".dirty=true;"));e("a1(",b.shared.context,",a0,0);");if(la){var q=b.stats,n=e.def(h,".getNumPendingQueries()-1");e(h,".pushScopeStats(",l,",",n,",",q,");")}}
var ma=R.Record,aa={add:32774,subtract:32778,"reverse subtract":32779};p.ext_blend_minmax&&(aa.min=32775,aa.max=32776);var b=p.angle_instanced_arrays,B=p.webgl_draw_buffers,F={dirty:!0},xa={},za=[],oa={},pa={};O("dither",3024);O("blend.enable",3042);G("blend.color","blendColor",[0,0,0,0]);G("blend.equation","blendEquationSeparate",[32774,32774]);G("blend.func","blendFuncSeparate",[1,0,1,0]);O("depth.enable",2929,!0);G("depth.func","depthFunc",513);G("depth.range","depthRange",[0,1]);G("depth.mask",
"depthMask",!0);G("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);G("cull.face","cullFace",1029);G("frontFace","frontFace",2305);G("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);G("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);G("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);G("stencil.mask","stencilMask",-1);G("stencil.func","stencilFunc",[519,0,-1]);G("stencil.opFront","stencilOpSeparate",[1028,7680,7680,
7680]);G("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);G("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);G("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var Ha={gl:f,context:ea,strings:d,next:xa,current:F,draw:E,elements:L,buffer:u,shader:Z,attributes:R.state,uniforms:A,framebuffer:q,extensions:p,timer:la,isBufferArgs:h},Aa={primTypes:J,compareFuncs:I,blendFuncs:x,blendEquations:aa,stencilOps:v,glTypes:y,orientationType:c};
B&&(Aa.backBuffer=[1029],Aa.drawBuffer=C(z.maxDrawbuffers,function(b){return 0===b?[0]:C(b,function(b){return 36064+b})}));var Ja=0;return{next:xa,current:F,procs:function(){var b=W(),a=b.proc("poll"),c=b.proc("refresh"),d=b.block();a(d);c(d);var e=b.shared,g=e.gl,k=e.next,l=e.current;d(l,".dirty=false;");T(b,a);c(e.framebuffer,".dirty=true;");T(b,c);Object.keys(oa).forEach(function(e){var n=oa[e],h=d.def(k,".",e),q=b.block();q("if(",h,"){",g,".enable(",n,")}else{",g,".disable(",n,")}",l,".",e,"=",
h,";");c(q);a("if(",h,"!==",l,".",e,"){",q,"}")});Object.keys(pa).forEach(function(e){var n=pa[e],h=F[e],q,B,f=b.block();f(g,".",n,"(");D(h)?(n=h.length,q=b.global.def(k,".",e),B=b.global.def(l,".",e),f(C(n,function(b){return q+"["+b+"]"}),");",C(n,function(b){return B+"["+b+"]="+q+"["+b+"];"}).join("")),a("if(",C(n,function(b){return q+"["+b+"]!=="+B+"["+b+"]"}).join("||"),"){",f,"}")):(q=d.def(k,".",e),B=d.def(l,".",e),f(q,");",l,".",e,"=",q,";"),a("if(",q,"!==",B,"){",f,"}"));c(f)});return b.compile()}(),
compile:function(b,a,c,d,e){var g=W();g.stats=g.link(e);e=ia(b);var k=qa(b,e),l=ja(b),n=ra(b);b=sa(b);var h=k.viewport;h&&(n.viewport=h);h=S("scissor.box");(k=k[h])&&(n[h]=k);k=0<Object.keys(n).length;e={framebuffer:e,draw:l,shader:b,state:n,dirty:k};e.uniforms=na(c);e.attributes=X(a);e.context=ga(d);Da(g,e);wa(g,e);Ga(g,e);return g.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,
"./util/loop":27}],9:[function(f,p,w){function h(a,e){this.id=g++;this.type=a;this.data=e}function k(a){if(0===a.length)return[];var e=a.charAt(0),g=a.charAt(a.length-1);if(1<a.length&&e===g&&('"'===e||"'"===e))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return k(a.substr(0,e.index)).concat(k(e[1])).concat(k(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,
'\\"')+'"'];a=[];for(g=0;g<e.length;++g)a=a.concat(k(e[g]));return a}function t(a){return"["+k(a).join("][")+"]"}var g=0;p.exports={define:function(a,e){switch(typeof e){case "boolean":case "number":case "string":return new h(a,t(e+""));case "undefined":return new h(a|128,null)}},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof h},unbox:function(a,e){if(a instanceof h){if(a.type&128)return new h(a.type&-129,t(e))}else if("function"===typeof a)return new h(0,a);return a},
accessor:t}},{}],10:[function(f,p,w){var h=f("./util/is-typed-array"),k=f("./util/is-ndarray"),t=f("./util/values"),g=f("./constants/primitives.json"),a=f("./constants/usage.json");p.exports=function(e,n,f,p){function u(a){this.id=r++;y[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function D(a,c,e,g,d,t,r){(t=r)||h(c)&&(!k(c)||h(c.data))||(t=n.oes_element_index_uint?5125:5123);a.buffer.bind();f._initBuffer(a.buffer,c,e,t,3);c=r;if(!r){switch(a.buffer.dtype){case 5121:case 5120:c=
5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}a.buffer.dtype=c}a.type=c;0>d&&(d=a.buffer.byteLength,5123===c?d>>=1:5125===c&&(d>>=2));a.vertCount=d;d=g;0>g&&(d=4,g=a.buffer.dimension,1===g&&(d=0),2===g&&(d=1),3===g&&(d=4));a.primType=d}function J(a){p.elementsCount--;delete y[a.id];a.buffer.destroy();a.buffer=null}var y={},r=0,x={uint8:5121,uint16:5123};n.oes_element_index_uint&&(x.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var I=[];return{create:function(n){function c(d){if(d)if("number"===
typeof d)t(d),r.primType=4,r.vertCount=d|0,r.type=5121;else{var n=null,f=35044,v=-1,p=-1,C=0,q=0;Array.isArray(d)||h(d)||k(d)?n=d:("data"in d&&(n=d.data),"usage"in d&&(f=a[d.usage]),"primitive"in d&&(v=g[d.primitive]),"count"in d&&(p=d.count|0),"length"in d&&(C=d.length|0),"type"in d&&(q=x[d.type]));n?D(r,n,f,v,p,C,q):(d=r.buffer,d.bind(),e.bufferData(34963,C,f),d.dtype=q||5121,d.usage=f,d.dimension=3,d.byteLength=C,r.primType=0>v?4:v,r.vertCount=0>p?0:p,r.type=d.dtype)}else t(),r.primType=4,r.vertCount=
0,r.type=5121;return c}var t=f.create(null,34963,!0),r=new u(t._buffer);p.elementsCount++;c(n);c._reglType="elements";c._elements=r;c.subdata=function(a,e){t.subdata(a,e);return c};c.destroy=function(){J(r)};return c},createStream:function(a){var c=I.pop();c||(c=new u(f.create(null,34963,!0)._buffer));D(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){I.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof u?a._elements:null},clear:function(){t(y).forEach(J)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(f,p,w){p.exports=function(h){function k(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb ext_disjoint_timer_query angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(g){try{f[g]=
h.getExtension(g)}catch(a){}})}var f={};k();return{extensions:f,refresh:k}}},{}],12:[function(f,p,w){var h=f("./util/values"),k=f("./util/extend");p.exports=function(f,g,a,e,n,p){function z(a,c,d){this.target=a;this.texture=c;this.renderbuffer=d;var e=a=0;c?(a=c.width,e=c.height):d&&(a=d.width,e=d.height);this.width=a;this.height=e}function u(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function D(a,c,d){a&&(a.texture?a.texture._texture.refCount+=
1:a.renderbuffer._renderbuffer.refCount+=1)}function J(a,c){c?c.texture?f.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):f.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer):f.framebufferTexture2D(36160,a,3553,null,0)}function y(a){var c=3553,d=null,e=null,g=a;"object"===typeof a&&(g=a.data);a=g._reglType;"texture2d"===a?d=g:"textureCube"===a?d=g:"renderbuffer"===a&&(e=g,c=36161);return new z(c,d,e)}function r(a,c,d,g,k){if(d)return a=e.create2D({width:a,
height:c,format:g,type:k}),a._texture.refCount=0,new z(3553,a,null);a=n.create({width:a,height:c,format:g});a._renderbuffer.refCount=0;return new z(36161,null,a)}function x(a){return a&&(a.texture||a.renderbuffer)}function I(a,c,d){a&&(a.texture?a.texture.resize(c,d):a.renderbuffer&&a.renderbuffer.resize(c,d))}function v(){this.id=L++;ha[this.id]=this;this.framebuffer=f.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function c(a){a.colorAttachments.forEach(u);u(a.depthAttachment);u(a.stencilAttachment);u(a.depthStencilAttachment)}function P(a){f.deleteFramebuffer(a.framebuffer);a.framebuffer=null;p.framebufferCount--;delete ha[a.id]}function K(c){var e;f.bindFramebuffer(36160,c.framebuffer);var g=c.colorAttachments;for(e=0;e<g.length;++e)J(36064+e,g[e]);for(e=g.length;e<a.maxColorAttachments;++e)J(36064+e,null);J(36096,c.depthAttachment);J(36128,c.stencilAttachment);J(33306,c.depthStencilAttachment);f.checkFramebufferStatus(36160);
f.bindFramebuffer(36160,d.next);d.current=d.next}var d={current:null,next:null,dirty:!1},w=["rgba"],Q=["rgba4","rgb565","rgb5 a1"];g.ext_srgb&&Q.push("srgba");g.ext_color_buffer_half_float&&Q.push("rgba16f","rgb16f");g.webgl_color_buffer_float&&Q.push("rgba32f");var U=["uint8"];g.oes_texture_half_float&&U.push("half float");g.oes_texture_float&&U.push("float");var L=0,ha={};return k(d,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof
v)?a:null},create:function(a,d){function e(a,d){var n,h=0,f=0,t=!0,q=!0;n=null;var p=!0,v="rgba",C="uint8",J=1,u=null,z=null,I=null,P=!1;if("number"===typeof a)h=a|0,f=d|0||h;else if(a){"shape"in a?(f=a.shape,h=f[0],f=f[1]):("radius"in a&&(h=f=a.radius),"width"in a&&(h=a.width),"height"in a&&(f=a.height));if("color"in a||"colors"in a)n=a.color||a.colors,Array.isArray(n);n||("colorCount"in a&&(J=a.colorCount|0),"colorTexture"in a&&(p=!!a.colorTexture,v="rgba4"),"colorType"in a&&(C=a.colorType,p||("half float"===
C?g.ext_color_buffer_half_float&&(v="rgba16f"):"float"===C&&g.webgl_color_buffer_float&&(v="rgba32f"))),"colorFormat"in a&&(v=a.colorFormat,0<=w.indexOf(v)?p=!0:0<=Q.indexOf(v)&&(p=!1)));if("depthTexture"in a||"depthStencilTexture"in a)P=!(!a.depthTexture&&!a.depthStencilTexture);"depth"in a&&("boolean"===typeof a.depth?t=a.depth:(u=a.depth,q=!1));"stencil"in a&&("boolean"===typeof a.stencil?q=a.stencil:(z=a.stencil,t=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?t=q=a.depthStencil:
(I=a.depthStencil,q=t=!1))}else h=f=1;var A=null,L=null,U=null,ba=null;if(Array.isArray(n))A=n.map(y);else if(n)A=[y(n)];else for(A=Array(J),n=0;n<J;++n)A[n]=r(h,f,p,v,C);h=h||A[0].width;f=f||A[0].height;u?L=y(u):t&&!q&&(L=r(h,f,P,"depth","uint32"));z?U=y(z):q&&!t&&(U=r(h,f,!1,"stencil","uint8"));I?ba=y(I):!u&&!z&&q&&t&&(ba=r(h,f,P,"depth stencil","depth stencil"));for(n=0;n<A.length;++n)D(A[n],h,f);D(L,h,f);D(U,h,f);D(ba,h,f);c(k);k.width=h;k.height=f;k.colorAttachments=A;k.depthAttachment=L;k.stencilAttachment=
U;k.depthStencilAttachment=ba;e.color=A.map(x);e.depth=x(L);e.stencil=x(U);e.depthStencil=x(ba);e.width=k.width;e.height=k.height;K(k);return e}var k=new v;p.framebufferCount++;e(a,d);e.resize=function(a,c){var d=a|0,g=c|0||d;if(d===k.width&&g===k.height)return e;for(var n=k.colorAttachments,h=0;h<n.length;++h)I(n[h],d,g);I(k.depthAttachment,d,g);I(k.stencilAttachment,d,g);I(k.depthStencilAttachment,d,g);k.width=e.width=d;k.height=e.height=g;K(k);return e};e._reglType="framebuffer";e._framebuffer=
k;e.destroy=function(){P(k);c(k)};return e},clear:function(){h(ha).forEach(P)}})}},{"./util/extend":23,"./util/values":31}],13:[function(f,p,w){p.exports=function(h,k){var f=1;k.ext_texture_filter_anisotropic&&(f=h.getParameter(34047));var g=1,a=1;k.webgl_draw_buffers&&(g=h.getParameter(34852),a=h.getParameter(36063));return{colorBits:[h.getParameter(3410),h.getParameter(3411),h.getParameter(3412),h.getParameter(3413)],depthBits:h.getParameter(3414),stencilBits:h.getParameter(3415),subpixelBits:h.getParameter(3408),
extensions:Object.keys(k).filter(function(a){return!!k[a]}),maxAnisotropic:f,maxDrawbuffers:g,maxColorAttachments:a,pointSizeDims:h.getParameter(33901),lineWidthDims:h.getParameter(33902),maxViewportDims:h.getParameter(3386),maxCombinedTextureUnits:h.getParameter(35661),maxCubeMapSize:h.getParameter(34076),maxRenderbufferSize:h.getParameter(34024),maxTextureUnits:h.getParameter(34930),maxTextureSize:h.getParameter(3379),maxAttributes:h.getParameter(34921),maxVertexUniforms:h.getParameter(36347),maxVertexTextureUnits:h.getParameter(35660),
maxVaryingVectors:h.getParameter(36348),maxFragmentUniforms:h.getParameter(36349),glsl:h.getParameter(35724),renderer:h.getParameter(7937),vendor:h.getParameter(7936),version:h.getParameter(7938)}}},{}],14:[function(f,p,w){var h=f("./util/is-typed-array");p.exports=function(k,f,g){return function(a){var e=0,n=0,p=g.framebufferWidth,z=g.framebufferHeight,u=null;h(a)?u=a:2===arguments.length?(p=arguments[0]|0,z=arguments[1]|0):a&&(e=a.x|0,n=a.y|0,p=a.width||g.framebufferWidth,z=a.height||g.framebufferHeight,
u=a.data||null);f();u=u||new Uint8Array(p*z*4);k.pixelStorei(3333,4);k.readPixels(e,n,p,z,6408,5121,u);return u}}},{"./util/is-typed-array":26}],15:[function(f,p,w){var h=f("./util/values");p.exports=function(k,f,g,a){function e(a){this.id=z++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0}function n(e){var g=e.renderbuffer;k.bindRenderbuffer(36161,null);k.deleteRenderbuffer(g);e.renderbuffer=null;e.refCount=0;delete u[e.id];a.renderbufferCount--}var p={rgba4:32854,
rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(p.srgba=35907);f.ext_color_buffer_half_float&&(p.rgba16f=34842,p.rgb16f=34843);f.webgl_color_buffer_float&&(p.rgba32f=34836);var z=0,u={};e.prototype.decRef=function(){0>=--this.refCount&&n(this)};return{create:function(g,n){function h(a,e){var g=0,c=0,n=32854;"object"===typeof a&&a?("shape"in a?(c=a.shape,g=c[0]|0,c=c[1]|0):("radius"in a&&(g=c=a.radius|0),"width"in a&&(g=a.width|0),"height"in a&&(c=a.height|
0)),"format"in a&&(n=p[a.format])):"number"===typeof a?(g=a|0,c="number"===typeof e?e|0:g):a||(g=c=1);if(g!==f.width||c!==f.height||n!==f.format)return h.width=f.width=g,h.height=f.height=c,f.format=n,k.bindRenderbuffer(36161,f.renderbuffer),k.renderbufferStorage(36161,n,g,c),h}var f=new e(k.createRenderbuffer());u[f.id]=f;a.renderbufferCount++;h(g,n);h.resize=function(a,e){var g=a|0,c=e|0||g;if(g===f.width&&c===f.height)return h;h.width=f.width=g;h.height=f.height=c;k.bindRenderbuffer(36161,f.renderbuffer);
k.renderbufferStorage(36161,f.format,g,c);return h};h._reglType="renderbuffer";h._renderbuffer=f;h.destroy=function(){f.decRef()};return h},clear:function(){h(u).forEach(n)}}}},{"./util/values":31}],16:[function(f,p,w){var h=f("./util/values");p.exports=function(k,f,g){function a(a,e,g,k){this.name=a;this.id=e;this.location=g;this.info=k}function e(a,e){for(var g=0;g<a.length;++g)if(a[g].id===e.id){a[g].location=e.location;return}a.push(e)}function n(a,e,g){g=35632===a?z:u;var h=g[e];if(!h){var c=
f.str(e),h=k.createShader(a);k.shaderSource(h,c);k.compileShader(h);g[e]=h}return h}function p(a,e){this.id=y++;this.fragId=a;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[]}var z={},u={},D={},J=[],y=0;return{clear:function(){var a=k.deleteShader.bind(k);h(z).forEach(a);z={};h(u).forEach(a);u={};J.forEach(function(a){k.deleteProgram(a.program)});J.length=0;D={};g.shaderCount=0},program:function(h,x,u){g.shaderCount++;(u=D[x])||(u=D[x]={});var v=u[h];if(!v){var c=v=new p(x,h),z,
y;z=n(35632,c.fragId);y=n(35633,c.vertId);x=c.program=k.createProgram();k.attachShader(x,z);k.attachShader(x,y);k.linkProgram(x);var d=k.getProgramParameter(x,35718),w=c.uniforms;for(z=0;z<d;++z)if(y=k.getActiveUniform(x,z))if(1<y.size)for(var Q=0;Q<y.size;++Q){var U=y.name.replace("[0]","["+Q+"]");e(w,new a(U,f.id(U),k.getUniformLocation(x,U),y))}else e(w,new a(y.name,f.id(y.name),k.getUniformLocation(x,y.name),y));d=k.getProgramParameter(x,35721);c=c.attributes;for(z=0;z<d;++z)(y=k.getActiveAttrib(x,
z))&&e(c,new a(y.name,f.id(y.name),k.getAttribLocation(x,y.name),y));u[h]=v;J.push(v)}return v},shader:n,frag:null,vert:null}}},{"./util/values":31}],17:[function(f,p,w){p.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0}}},{}],18:[function(f,p,w){p.exports=function(){var h={"":0},k=[""];return{id:function(f){var g=h[f];if(g)return g;g=h[f]=k.length;k.push(f);return g},str:function(h){return k[h]}}}},{}],19:[function(f,
p,w){function h(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function k(a){return Array.isArray(a)&&0!==a.length&&J(a[0])?!0:!1}function t(a){return Object.prototype.toString.call(a)}function g(a){if(!a)return!1;var e=t(a);return 0<=v.indexOf(e)?!0:h(a)||k(a)||z(a)}function a(a,e){36193===a.type?(a.data=D(e),u.freeType(e)):a.data=e}var e=f("./util/extend"),n=f("./util/values"),C=f("./util/is-typed-array"),z=f("./util/is-ndarray"),u=f("./util/pool"),D=f("./util/to-half-float"),
J=f("./util/is-array-like");w=f("./constants/arraytypes.json");var y=f("./constants/arraytypes.json"),r=[9984,9986,9985,9987],x=[0,6409,6410,6407,6408],I={};I[6409]=I[6406]=I[6402]=1;I[34041]=I[6410]=2;I[6407]=3;I[6408]=4;var v=Object.keys(w).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]);p.exports=function(c,f,p,d,v,Q){function w(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=
this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function L(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function ha(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(b.flipY=
a.flipY);"alignment"in a&&(b.unpackAlignment=a.alignment);"colorSpace"in a&&(b.colorSpace=Ba[a.colorSpace]);"type"in a&&(b.type=ka[a.type]);var c=b.width,d=b.height,e=b.channels,g=!1;"shape"in a?(c=a.shape[0],d=a.shape[1],3===a.shape.length&&(e=a.shape[2],g=!0)):("radius"in a&&(c=d=a.radius),"width"in a&&(c=a.width),"height"in a&&(d=a.height),"channels"in a&&(e=a.channels,g=!0));b.width=c|0;b.height=d|0;b.channels=e|0;c=!1;"format"in a&&(c=a.format,d=b.internalformat=ca[c],b.format=Ca[d],c in ka&&
!("type"in a)&&(b.type=ka[c]),c in da&&(b.compressed=!0),c=!0);!g&&c?b.channels=I[b.format]:g&&!c&&b.channels!==x[b.format]&&(b.format=b.internalformat=x[b.channels])}}function q(b){c.pixelStorei(37440,b.flipY);c.pixelStorei(37441,b.premultiplyAlpha);c.pixelStorei(37443,b.colorSpace);c.pixelStorei(3317,b.unpackAlignment)}function A(){w.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function R(b,c){var d=null;g(c)?d=c:c&&(ha(b,c),"x"in c&&
(b.xOffset=c.x|0),"y"in c&&(b.yOffset=c.y|0),g(c.data)&&(d=c.data));if(c.copy){var e=v.viewportWidth,f=v.viewportHeight;b.width=b.width||e-b.xOffset;b.height=b.height||f-b.yOffset;b.needsCopy=!0}else if(!d)b.width=b.width||1,b.height=b.height||1;else if(C(d))b.data=d,"type"in c||5121!==b.type||(b.type=y[Object.prototype.toString.call(d)]|0);else if(h(d)){e=d;f=b.width*b.height*b.channels;switch(b.type){case 5121:case 5123:case 5125:case 5126:f=u.allocType(b.type,f);f.set(e);b.data=f;break;case 36193:b.data=
D(e)}b.alignment=1;b.needsFree=!0}else if(z(d)){e=d.data;Array.isArray(e)||5121!==b.type||(b.type=y[Object.prototype.toString.call(e)]|0);var f=d.shape,n=d.stride,q,p,r,A;3===f.length?(r=f[2],A=n[2]):A=r=1;q=f[0];p=f[1];f=n[0];n=n[1];b.alignment=1;b.width=q;b.height=p;b.channels=r;b.format=b.internalformat=x[r];b.needsFree=!0;q=A;d=d.offset;r=b.width;A=b.height;p=b.channels;for(var m=u.allocType(36193===b.type?5126:b.type,r*A*p),w=0,Q=0;Q<A;++Q)for(var E=0;E<r;++E)for(var L=0;L<p;++L)m[w++]=e[f*E+
n*Q+q*L+d];a(b,m)}else if("[object HTMLCanvasElement]"===t(d)||"[object CanvasRenderingContext2D]"===t(d))"[object HTMLCanvasElement]"===t(d)?b.element=d:b.element=d.canvas,b.width=b.element.width,b.height=b.element.height;else if("[object HTMLImageElement]"===t(d))b.element=d,b.width=d.naturalWidth,b.height=d.naturalHeight;else if("[object HTMLVideoElement]"===t(d))b.element=d,b.width=d.videoWidth,b.height=d.videoHeight,b.needsPoll=!0;else if(k(d)){e=d[0].length;f=d.length;n=1;if(J(d[0][0])){q=n=
d[0][0].length;r=u.allocType(36193===b.type?5126:b.type,e*f*q);for(p=A=0;p<f;++p)for(m=d[p],w=0;w<e;++w)for(Q=m[w],E=0;E<q;++E)r[A++]=Q[E];a(b,r)}else{q=u.allocType(36193===b.type?5126:b.type,e*f);for(A=r=0;A<f;++A)for(p=d[A],m=0;m<e;++m)q[r++]=p[m];a(b,q)}b.alignment=1;b.width=e;b.height=f;b.channels=n;b.format=b.internalformat=x[n];b.needsFree=!0}}function Z(b,a,e,g,f){var k=b.element,h=b.data,n=b.internalformat,p=b.format,r=b.type,m=b.width,t=b.height;q(b);k?c.texSubImage2D(a,f,e,g,p,r,k):b.compressed?
c.compressedTexSubImage2D(a,f,e,g,n,m,t,h):b.needsCopy?(d(),c.copyTexSubImage2D(a,f,e,g,b.xOffset,b.yOffset,m,t)):c.texSubImage2D(a,f,e,g,m,t,p,r,h)}function E(){return Da.pop()||new A}function ea(b){b.needsFree&&u.freeType(b.data);A.call(b);Da.push(b)}function la(){w.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function S(b,a,c){var d=b.images[0]=E();b.mipmask=1;d.width=b.width=a;d.height=b.height=c}function O(b,a){var c=null;if(g(a))c=b.images[0]=E(),L(c,
b),R(c,a),b.mipmask=1;else if(ha(b,a),Array.isArray(a.mipmap))for(var d=a.mipmap,e=0;e<d.length;++e)c=b.images[e]=E(),L(c,b),c.width>>=e,c.height>>=e,R(c,d[e]),b.mipmask|=1<<e;else c=b.images[0]=E(),L(c,b),R(c,a),b.mipmask=1;L(b,b.images[0])}function G(b,a){for(var e=b.images,g=0;g<e.length&&e[g];++g){var f=e[g],k=a,h=g,n=f.element,p=f.data,r=f.internalformat,m=f.format,t=f.type,D=f.width,y=f.height;q(f);n?c.texImage2D(k,h,m,m,t,n):f.compressed?c.compressedTexImage2D(k,h,r,D,y,0,p):f.needsCopy?(d(),
c.copyTexImage2D(k,h,m,f.xOffset,f.yOffset,D,y,0)):c.texImage2D(k,h,m,D,y,0,m,t,p)}}function W(){var b=Ea.pop()||new la;w.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function ia(a){for(var c=a.images,d=0;d<c.length;++d)c[d]&&ea(c[d]),c[d]=null;Ea.push(a)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function sa(a,c){"min"in c&&(a.minFilter=ta[c.min],0<=r.indexOf(a.minFilter)&&(a.genMipmaps=
!0));"mag"in c&&(a.magFilter=ba[c.mag]);var d=a.wrapS,e=a.wrapT;if("wrap"in c){var g=c.wrap;"string"===typeof g?d=e=V[g]:Array.isArray(g)&&(d=V[g[0]],e=V[g[1]])}else"wrapS"in c&&(d=V[c.wrapS]),"wrapT"in c&&(e=V[c.wrapT]);a.wrapS=d;a.wrapT=e;"anisotropic"in c&&(a.anisotropic=c.anisotropic);if("mipmap"in c){d=!1;switch(typeof c.mipmap){case "string":a.mipmapHint=T[c.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=c.mipmap;break;case "object":a.genMipmaps=!1,d=!0}!d||"min"in c||(a.minFilter=
9984)}}function ja(a,d){c.texParameteri(d,10241,a.minFilter);c.texParameteri(d,10240,a.magFilter);c.texParameteri(d,10242,a.wrapS);c.texParameteri(d,10243,a.wrapT);f.ext_texture_filter_anisotropic&&c.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(d))}function ra(){var a=ua.pop()||new qa;qa.call(a);return a}function na(a){w.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ga++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=
-1;this.bindCount=0}function X(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ga(){var a=aa[0];a?c.bindTexture(a.target,a.texture):c.bindTexture(3553,null)}function Y(a){var d=a.texture,e=a.unit,g=a.target;0<=e&&(c.activeTexture(33984+e),c.bindTexture(g,null),aa[e]=null);c.deleteTexture(d);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete wa[a.id];Q.textureCount--}var T={"don't care":4352,"dont care":4352,nice:4354,fast:4353},V={repeat:10497,clamp:33071,mirror:33648},
ba={nearest:9728,linear:9729},ta=e({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ba),Ba={none:0,browser:37444},ka={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ca={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},da={};f.ext_srgb&&(ca.srgb=35904,ca.srgba=35906);f.oes_texture_float&&(ka["float"]=5126);f.oes_texture_half_float&&(ka.float16=ka["half float"]=
36193);f.webgl_depth_texture&&(e(ca,{depth:6402,"depth stencil":34041}),e(ka,{uint16:5123,uint32:5125,"depth stencil":34042}));f.webgl_compressed_texture_s3tc&&e(da,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});f.webgl_compressed_texture_atc&&e(da,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});f.webgl_compressed_texture_pvrtc&&e(da,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});
f.webgl_compressed_texture_etc1&&(da["rgb etc1"]=36196);var ya=Array.prototype.slice.call(c.getParameter(34467));Object.keys(da).forEach(function(a){var c=da[a];0<=ya.indexOf(c)&&(ca[a]=c)});var va=Object.keys(ca);p.textureFormats=va;var Ca=va.reduce(function(a,c){var d=ca[c];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?a[d]=d:32855===d||0<=c.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{}),Da=[],Ea=[],ua=[],Ga=0,wa={},ma=p.maxTextureUnits,aa=Array(ma).map(function(){return null});
e(na.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var d=0;d<ma;++d){var e=aa[d];if(e){if(0<e.bindCount)continue;e.unit=-1}aa[d]=this;a=d;break}this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Y(this)}});return{create2D:function(a,d){function e(a,b){var c=ra(),d=W();"number"===typeof a?"number"===typeof b?S(d,a|0,b|0):S(d,a|0,a|0):a?(sa(c,a),O(d,a)):S(d,1,1);c.genMipmaps&&
(d.mipmask=(d.width<<1)-1);g.mipmask=d.mipmask;L(g,d);g.internalformat=d.internalformat;e.width=d.width;e.height=d.height;X(g);G(d,3553);ja(c,3553);ga();ua.push(c);ia(d);return e}var g=new na(3553);wa[g.id]=g;Q.textureCount++;e(a,d);e.subimage=function(a,b,d,c){b|=0;d|=0;c|=0;var f=E();L(f,g);f.width>>=c;f.height>>=c;f.width-=b;f.height-=d;R(f,a);X(g);Z(f,3553,b,d,c);ga();ea(f);return e};e.resize=function(a,b){var d=a|0,f=b|0||d;if(d===g.width&&f===g.height)return e;e.width=g.width=d;e.height=g.height=
f;X(g);c.texImage2D(3553,0,g.format,d,f,0,g.format,g.type,null);ga();return e};e._reglType="texture2d";e._texture=g;e.destroy=function(){g.decRef()};return e},createCube:function(a,d,e,g,f,k){function h(a,b,d,c,e,g){var f,k=ra();for(f=0;6>f;++f)q[f]=W();if("number"===typeof a||!a)for(a=a|0||1,f=0;6>f;++f)S(q[f],a,a);else if("object"===typeof a)if(b)O(q[0],a),O(q[1],b),O(q[2],d),O(q[3],c),O(q[4],e),O(q[5],g);else if(sa(k,a),ha(n,a),"faces"in a)for(a=a.faces,f=0;6>f;++f)L(q[f],n),O(q[f],a[f]);else for(f=
0;6>f;++f)O(q[f],a);L(n,q[0]);n.mipmask=k.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;n.internalformat=q[0].internalformat;h.width=q[0].width;h.height=q[0].height;X(n);for(f=0;6>f;++f)G(q[f],34069+f);ja(k,34067);ga();ua.push(k);for(f=0;6>f;++f)ia(q[f]);return h}var n=new na(34067);wa[n.id]=n;Q.cubeCount++;var q=Array(6);h(a,d,e,g,f,k);h.subimage=function(a,b,d,c,e){d|=0;c|=0;e|=0;var g=E();L(g,n);g.width>>=e;g.height>>=e;g.width-=d;g.height-=c;R(g,b);X(n);Z(g,34069+a,d,c,e);ga();ea(g);return h};h.resize=
function(a,b){var d=a|0,e=b|0||d;if(d===n.width&&e===n.height)return h;h.width=n.width=d;h.height=n.height=e;X(n);for(var g=0;6>g;++g)c.texImage2D(34069+g,0,n.format,d,e,0,n.format,n.type,null);ga();return h};h._reglType="textureCube";h._texture=n;h.destroy=function(){n.decRef()};return h},clear:function(){for(var a=0;a<ma;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),aa[a]=null;n(wa).forEach(Y);Q.cubeCount=0;Q.textureCount=0},getTexture:function(a){return null}}}},{"./constants/arraytypes.json":4,
"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],20:[function(f,p,w){p.exports=function(f,k){function p(){this.endQueryIndex=this.startQueryIndex=-1;this.stats=null}var g=k.ext_disjoint_timer_query;if(!g)return null;var a=[],e=[],n,C,z=[],u=[];return{beginQuery:function(a){n=a;C=z.pop()||g.createQueryEXT();g.beginQueryEXT(g.TIME_ELAPSED_EXT,C)},endQuery:function(){g.endQueryEXT(g.TIME_ELAPSED_EXT);
var f=u.pop()||new p;f.startQueryIndex=a.length;f.endQueryIndex=f.startQueryIndex;f.stats=n;e.push(f);a.push(C)},update:function(){if(0!==a.length){var f=[],h,n;for(h=0;h<a.length;h++)f[h]=1E-6*g.getQueryObjectEXT(a[h],g.QUERY_RESULT_EXT),z.push(a[h]);a=[];for(h=0;h<e.length;h++){var k=e[h];for(n=k.startQueryIndex;n<=k.endQueryIndex;n++)k.stats.gpuTime+=f[n];u.push(k)}e=[]}},getNumPendingQueries:function(){return a.length},pushScopeStats:function(a,g,f){var h=u.pop()||new p;h.startQueryIndex=a;h.endQueryIndex=
g;h.stats=f;e.push(h)},clear:function(){for(var a=0;a<z.length;a++)g.deleteQueryEXT(z[a])}}}},{}],21:[function(f,p,w){p.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(f,p,w){function h(g){return Array.prototype.slice.call(g)}function k(g){return h(g).join("")}var t=f("./extend");p.exports=function(){function g(){var a=[],g=[];return t(function(){a.push.apply(a,h(arguments))},{def:function(){var f="v"+e++;
g.push(f);0<arguments.length&&(a.push(f,"="),a.push.apply(a,h(arguments)),a.push(";"));return f},toString:function(){return k([0<g.length?"var "+g+";":"",k(a)])}})}function a(){function a(g,h){f(g,h,"=",e.def(g,h),";")}var e=g(),f=g(),h=e.toString,k=f.toString;return t(e,{entry:e,exit:f,save:a,set:function(g,f,c){a(g,f);e(g,f,"=",c,";")},toString:function(){return h()+k()}})}var e=0,f=[],p=[],z=g(),u={};return{global:z,link:function(a){for(var g=0;g<p.length;++g)if(p[g]===a)return f[g];g="g"+e++;
f.push(g);p.push(a);return g},block:g,proc:function(e,g){function f(){var a="a"+h.length;h.push(a);return a}var h=[];g=g||0;for(var n=0;n<g;++n)f();var n=a(),p=n.toString;return u[e]=t(n,{arg:f,toString:function(){return k(["function(",h.join(),"){",p(),"}"])}})},scope:a,cond:function(){var e=k(arguments),g=a(),f=a(),n=g.toString,p=f.toString;return t(g,{then:function(){g.apply(g,h(arguments));return this},"else":function(){f.apply(f,h(arguments));return this},toString:function(){var a=p();a&&(a=
"else{"+a+"}");return k(["if(",e,"){",n(),"}",a])}})},compile:function(){var a=['"use strict";',z,"return {"];Object.keys(u).forEach(function(e){a.push('"',e,'":',u[e].toString(),",")});a.push("}");var e=k(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,f.concat(e)).apply(null,p)}}}},{"./extend":23}],23:[function(f,p,w){p.exports=function(f,k){for(var p=Object.keys(k),g=0;g<p.length;++g)f[p[g]]=k[p[g]];return f}},{}],24:[function(f,p,w){var h=f("./is-typed-array");
p.exports=function(f){return Array.isArray(f)||h(f)}},{"./is-typed-array":26}],25:[function(f,p,w){var h=f("./is-typed-array");p.exports=function(f){return!!f&&"object"===typeof f&&Array.isArray(f.shape)&&Array.isArray(f.stride)&&"number"===typeof f.offset&&f.shape.length===f.stride.length&&(Array.isArray(f.data)||h(f.data))}},{"./is-typed-array":26}],26:[function(f,p,w){var h=f("../constants/arraytypes.json");p.exports=function(f){return Object.prototype.toString.call(f)in h}},{"../constants/arraytypes.json":4}],
27:[function(f,p,w){p.exports=function(f,k){for(var p=Array(f),g=0;g<f;++g)p[g]=k(g);return p}},{}],28:[function(f,p,w){function h(a){var e,g;e=(65535<a)<<4;a>>>=e;g=(255<a)<<3;a>>>=g;e|=g;g=(15<a)<<2;a>>>=g;e|=g;g=(3<a)<<1;return e|g|a>>>g>>1}function k(a){a:{for(var e=16;268435456>=e;e*=16)if(a<=e){a=e;break a}a=0}e=g[h(a)>>2];return 0<e.length?e.pop():new ArrayBuffer(a)}function t(a){g[h(a.byteLength)>>2].push(a)}var g=f("./loop")(8,function(){return[]});p.exports={alloc:k,free:t,allocType:function(a,
e){var g=null;switch(a){case 5120:g=new Int8Array(k(e),0,e);break;case 5121:g=new Uint8Array(k(e),0,e);break;case 5122:g=new Int16Array(k(2*e),0,e);break;case 5123:g=new Uint16Array(k(2*e),0,e);break;case 5124:g=new Int32Array(k(4*e),0,e);break;case 5125:g=new Uint32Array(k(4*e),0,e);break;case 5126:g=new Float32Array(k(4*e),0,e);break;default:return null}return g.length!==e?g.subarray(0,e):g},freeType:function(a){t(a.buffer)}}},{"./loop":27}],29:[function(f,p,w){p.exports="function"===typeof requestAnimationFrame&&
"function"===typeof cancelAnimationFrame?{next:function(f){return requestAnimationFrame(f)},cancel:function(f){return cancelAnimationFrame(f)}}:{next:function(f){setTimeout(f,30)},cancel:clearTimeout}},{}],30:[function(f,p,w){var h=f("./pool"),k=new Float32Array(1),t=new Uint32Array(k.buffer);p.exports=function(g){for(var a=h.allocType(5123,g.length),e=0;e<g.length;++e)if(isNaN(g[e]))a[e]=65535;else if(Infinity===g[e])a[e]=31744;else if(-Infinity===g[e])a[e]=64512;else{k[0]=g[e];var f=t[0],p=f>>>
31<<15,z=(f<<1>>>24)-127,f=f>>13&1023;a[e]=-24>z?p:-14>z?p+(f+1024>>-14-z):15<z?p+31744:p+(z+15<<10)+f}return a}},{"./pool":28}],31:[function(f,p,w){p.exports=function(f){return Object.keys(f).map(function(k){return f[k]})}},{}],32:[function(f,p,w){function h(g,a){function e(){var a=window.innerWidth,e=window.innerHeight;g!==document.body&&(e=g.getBoundingClientRect(),a=e.right-e.left,e=e.top-e.bottom);f.width=p*a;f.height=p*e;t(f.style,{width:a+"px",height:e+"px"})}var f=document.createElement("canvas"),
h=k(f,a);t(f.style,{border:0,margin:0,padding:0,top:0,left:0});g.appendChild(f);g===document.body&&(f.style.position="absolute",t(g.style,{margin:0,padding:0}));var p=+h.options.pixelRatio;window.addEventListener("resize",e,!1);var u=h.options.onDestroy;h.options=t(t({},h.options),{onDestroy:function(){window.removeEventListener("resize",e);g.removeChild(f);u&&u()}});e();return h}function k(g,a){function e(a){try{return g.getContext(a,f)}catch(e){return null}}var f=a.glOptions||{};return{gl:e("webgl")||
e("experimental-webgl")||e("webgl-experimental"),options:t({pixelRatio:window.devicePixelRatio},a)}}var t=f("./util/extend");p.exports=function(g){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:g[0],options:g[1]||{}};var a=document.body,e=g[1]||{};if("string"===typeof g[0])a=document.querySelector(g[0])||document.body;else if("object"===typeof g[0])if(g[0]instanceof HTMLElement)a=g[0];else{if(g[0]instanceof WebGLRenderingContext)return{gl:g[0],options:t({pixelRatio:1},
e)};e=g[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?k(a,e):h(a,e)}},{"./util/extend":23}],33:[function(f,p,w){function h(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var k=h("DXT1"),t=h("DXT3"),g=h("DXT5"),a=h("DX10");p.exports=function(e){var f=new Int32Array(e,0,31);if(542327876!==f[0])throw Error("Invalid magic number in DDS header");if(!f[20]&4)throw Error("Unsupported format, must contain a FourCC code");var h,p=f[21];switch(p){case k:h=
8;e="dxt1";break;case t:h=16;e="dxt3";break;case g:h=16;e="dxt5";break;case 116:e="rgba32f";break;case a:var u=new Uint32Array(e.slice(128,148));e=u[0];if(3===u[1]&&2===e)e="rgba32f";else throw Error("Unsupported DX10 texture format "+e);break;default:throw Error("Unsupported FourCC code: "+String.fromCharCode(p&255,p>>8&255,p>>16&255,p>>24&255));}var u=f[2],w=1;u&131072&&(w=Math.max(1,f[7]));var J=!1;f[28]&512&&(J=!0);var y=f[4],r=f[3],f=f[1]+4,x=y,I=r,v=[];p===a&&(f+=20);if(J)for(h=0;6>h;h++){if("rgba32f"!==
e)throw Error("Only RGBA32f cubemaps are supported");for(var y=x,r=I,c=Math.log(y)/Math.log(2)+1,P=0;P<c;P++)p=y*r*16,v.push({offset:f,length:p,shape:[y,r]}),P<w&&(f+=p),y=Math.floor(y/2),r=Math.floor(r/2)}else for(P=0;P<w;P++)p=Math.max(4,y)/4*Math.max(4,r)/4*h,v.push({offset:f,length:p,shape:[y,r]}),f+=p,y=Math.floor(y/2),r=Math.floor(r/2);return{shape:[x,I],images:v,format:e,flags:u,cubemap:J}}},{}],34:[function(f,p,w){var h=f("./lib/util/extend"),k=f("./lib/dynamic"),t=f("./lib/util/raf"),g=f("./lib/util/clock"),
a=f("./lib/strings"),e=f("./lib/webgl"),n=f("./lib/extension"),C=f("./lib/limits"),z=f("./lib/buffer"),u=f("./lib/elements"),D=f("./lib/texture"),J=f("./lib/renderbuffer"),y=f("./lib/framebuffer"),r=f("./lib/attribute"),x=f("./lib/shader"),I=f("./lib/read"),v=f("./lib/core"),c=f("./lib/stats"),P=f("./lib/timer");p.exports=function(){function f(){V=t.next(f);G.tick+=1;G.time=(g()-la)/1E3;L();for(var a=0;a<T.length;++a)(0,T[a])(G,null,0);A.flush()}function d(a){}function p(a){}function w(a){function d(a){var c=
{},e={};Object.keys(a).forEach(function(d){var f=a[d];k.isDynamic(f)?e[d]=k.unbox(f,d):c[d]=f});return{dynamic:e,"static":c}}function c(a){for(;r.length<a;)r.push(null);return r}var e=d(a.context||{}),f=d(a.uniforms||{}),g=d(a.attributes||{}),n=d(function(a){function d(a){if(a in c){var e=c[a];delete c[a];Object.keys(e).forEach(function(b){c[a+"."+b]=e[b]})}}var c=h({},a);delete c.uniforms;delete c.attributes;delete c.context;d("blend");d("depth");d("cull");d("stencil");d("polygonOffset");d("scissor");
d("sample");return c}(a));a={gpuTime:0};var e=X.compile(n,g,f,e,a),p=e.draw,q=e.batch,t=e.scope,r=[];return h(function(a,d){var e;if("function"===typeof a)return t.call(this,null,a,0);if("function"===typeof d)if("number"===typeof a)for(e=0;e<a;++e)t.call(this,null,d,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)t.call(this,a[e],d,e);else return t.call(this,a,d,0);else if("number"===typeof a){if(0<a)return q.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return q.call(this,a,a.length)}else return p.call(this,
a)},{stats:a})}function U(){var a=ga.viewport,d=ga.scissor_box;a[0]=a[1]=d[0]=d[1]=0;G.viewportWidth=G.framebufferWidth=G.drawingBufferWidth=a[2]=d[2]=A.drawingBufferWidth;G.viewportHeight=G.framebufferHeight=G.drawingBufferHeight=a[3]=d[3]=A.drawingBufferHeight}function L(){U();X.procs.poll()}function ha(){U();X.procs.refresh()}var q=e(Array.prototype.slice.call(arguments)),A=q.gl,R=q.options,q=a(),Z=c(),E=n(A).extensions,ea=P(A,E),la=g(),S=A.drawingBufferWidth,O=A.drawingBufferHeight,G={tick:0,
time:0,viewportWidth:S,viewportHeight:O,framebufferWidth:S,framebufferHeight:O,drawingBufferWidth:S,drawingBufferHeight:O,pixelRatio:R.pixelRatio},W=C(A,E),ia=z(A,Z),qa=u(A,E,ia,Z),S=r(A,E,W,ia,q),sa=x(A,q,Z),ja=D(A,E,W,L,G,Z),ra=J(A,E,W,Z),na=y(A,E,W,ja,ra,Z),O=I(A,L,G),X=v(A,q,E,W,ia,qa,ja,na,{},S,sa,{elements:null,primitive:4,count:-1,offset:0,instances:-1},G,ea),ga=X.next,Y=A.canvas,T=[],V=0;Y&&(Y.addEventListener("webglcontextlost",d,!1),Y.addEventListener("webglcontextrestored",p,!1));ha();
return h(w,{clear:function(a){var d=0;X.procs.poll();var c=a.color;c&&(A.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),d|=16384);"depth"in a&&(A.clearDepth(+a.depth),d|=256);"stencil"in a&&(A.clearStencil(a.stencil|0),d|=1024);A.clear(d)},prop:k.define.bind(null,1),context:k.define.bind(null,2),"this":k.define.bind(null,3),draw:w({}),buffer:function(a){return ia.create(a,34962)},elements:qa.create,texture:ja.create2D,cube:ja.createCube,renderbuffer:ra.create,framebuffer:na.create,framebufferCube:function(a){},
attributes:A.getContextAttributes(),frame:function(a){T.push(a);!V&&0<T.length&&f();return{cancel:function(){var d=T.find(function(d){return d===a});0>d||(T.splice(d,1),0>=T.length&&V&&(t.cancel(f),V=0))}}},limits:W,hasExtension:function(a){return 0<=W.extensions.indexOf(a.toLowerCase())},read:O,destroy:function(){V&&(t.cancel(f),V=0);Y&&(Y.removeEventListener("webglcontextlost",d),Y.removeEventListener("webglcontextrestored",p));sa.clear();na.clear();ra.clear();ja.clear();qa.clear();ia.clear();ea&&
ea.clear();if(R.onDestroy)R.onDestroy()},_gl:A,_refresh:ha,stats:Z,updateTimer:function(){ea&&ea.update()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}],35:[function(f,p,w){function h(a){throw Error("resl: "+
a);}function k(a,e,f){Object.keys(a).forEach(function(a){0>e.indexOf(a)&&h('invalid parameter "'+a+'" in '+f)})}function t(a,e){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=e}var g=["manifest","onDone","onProgress","onError"],a=["type","src","stream","credentials","parser"],e=["onData","onDone"];p.exports=function(f){function p(a,c){if(a in f){var e=f[a];"function"!==typeof e&&h('invalid callback "'+a+'"');return e}return null}function w(a){function c(){if(!(2>k.readyState||
1===p.state||-1===p.state)){if(200!==k.status)return D('error loading resource "'+a.name+'"');if(2<k.readyState&&0===p.state){var f;f="binary"===a.type?k.response:k.responseText;if(h.data)try{n=h.data(f)}catch(g){return D(g)}else n=f}if(3<k.readyState&&0===p.state){if(h.done)try{n=h.done()}catch(g){return D(g)}p.state=1}v[e]=n;p.progress=.75*p.progress+.25;p.ready=a.stream&&!!n||1===p.state;J()}}var e=a.name,f=a.stream,g="binary"===a.type,h=a.parser,k=new XMLHttpRequest,n=null,p=new t(e,function(){1!==
p.state&&-1!==p.state&&(k.onreadystatechange=null,k.abort(),p.state=-1)});k.onreadystatechange=f?c:function(){4===k.readyState&&c()};g&&(k.responseType="arraybuffer");a.credentials&&(k.withCredentials=!0);k.open("GET",a.src,!0);k.send();return p}function u(a,c){function e(){if(0===r.state)if(p.data)try{u=p.data(c)}catch(a){return D(a)}else u=c}function f(c){e();v[n]=u;r.progress=c.lengthComputable?Math.max(r.progress,c.loaded/c.total):.75*r.progress+.25;r.ready=a.stream;J(n)}function g(){e();if(0===
r.state){if(p.done)try{u=p.done()}catch(a){return D(a)}r.state=1}r.progress=1;r.ready=!0;v[n]=u;k();J("finish "+n)}function h(){D('error loading asset "'+n+'"')}function k(){a.stream&&c.removeEventListener("progress",f);"image"===a.type?c.addEventListener("load",g):c.addEventListener("canplay",g);c.removeEventListener("error",h)}var n=a.name,p=a.parser,r=new t(n,function(){1!==r.state&&-1!==r.state&&(r.state=-1,k(),c.src="")}),u=c;a.stream&&c.addEventListener("progress",f);"image"===a.type?c.addEventListener("load",
g):c.addEventListener("canplay",g);c.addEventListener("error",h);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return r}function D(a){-1!==c&&1!==c&&(c=-1,K.forEach(function(a){a.cancel()}),I?"string"===typeof a?I(Error("resl: "+a)):I(a):console.error("resl error:",a))}function J(a){if(-1!==c&&1!==c){var e=0,f=0;K.forEach(function(a){a.ready&&(f+=1);e+=a.progress});f===K.length?(c=1,r(v)):x&&x(e/K.length,a)}}"object"===typeof f&&f||h("invalid or missing configuration");k(f,
g,"config");var y=f.manifest;"object"===typeof y&&y||h("missing manifest");var r=p("onDone");r||h("missing onDone() callback");var x=p("onProgress"),I=p("onError"),v={},c=0,P={text:w,binary:function(a){return w(a)},image:function(a){return u(a,document.createElement("img"))},video:function(a){return u(a,document.createElement("video"))},audio:function(a){return u(a,document.createElement("audio"))}},K=Object.keys(y).map(function(c){function f(a,c){if(a in g.parser){var d=g.parser[a];"function"!==
typeof d&&h("invalid parser callback "+a+' for asset "'+a+'"');return d}return c}var g=y[c];"string"===typeof g?g={src:g}:"object"===typeof g&&g||h('invalid asset definition "'+c+'"');k(g,a,'asset "'+c+'"');var n={};"parser"in g&&("function"===typeof g.parser?n={data:g.parser}:"object"===typeof g.parser&&g.parser?(k(n,e,'parser for asset "'+c+'"'),"onData"in n||h('missing onData callback for parser in asset "'+c+'"'),n={data:f("onData"),done:f("onDone")}):h('invalid parser for asset "'+c+'"'));return{name:c,
type:function(a,e,f){a in g&&(f=g[a]);0>e.indexOf(f)&&h("invalid "+a+' "'+f+'" for asset "'+c+'", possible values: '+e);return f}("type",Object.keys(P),"text"),stream:!!g.stream,credentials:!!g.credentials,src:function(a,e,f){a in g?f=g[a]:e&&h("missing "+a+' for asset "'+c+'"');"string"!==typeof f&&h("invalid "+a+' for asset "'+c+'", must be a string');return f}("src",!0,""),parser:n}}).map(function(a){return P[a.type](a)})}},{}]},{},[1]);
