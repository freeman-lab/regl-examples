var $jscomp={scope:{},getGlobal:function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global?global:d}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return"jscomp_symbol_"+d+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();if(d[$jscomp.global.Symbol.iterator])return d[$jscomp.global.Symbol.iterator]();var f=0;return{next:function(){return f==d.length?{done:!0}:{done:!1,value:d[f++]}}}};
$jscomp.arrayFromIterator=function(d){for(var f,g=[];!(f=d.next()).done;)g.push(f.value);return g};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};
$jscomp.inherits=function(d,f){function g(){}g.prototype=f.prototype;d.prototype=new g;d.prototype.constructor=d;for(var b in f)if($jscomp.global.Object.defineProperties){var a=$jscomp.global.Object.getOwnPropertyDescriptor(f,b);a&&$jscomp.global.Object.defineProperty(d,b,a)}else d[b]=f[b]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(d,f){d instanceof String&&(d=String(d));var g=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b={},a=(b.next=function(){if(g<d.length){var b=g++;return{value:f(b,d[b]),done:!1}}a.next=$jscomp.array.done_;return $jscomp.array.done_()},b[Symbol.iterator]=function(){return a},b);return a};
$jscomp.array.findInternal_=function(d,f,g){d instanceof String&&(d=String(d));for(var b=d.length,a=0;a<b;a++){var q=d[a];if(f.call(g,q,a,d))return{i:a,v:q}}return{i:-1,v:void 0}};
$jscomp.array.from=function(d,f,g){f=void 0===f?function(a){return a}:f;var b=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(d[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();d=d[Symbol.iterator]();for(var a;!(a=d.next()).done;)b.push(f.call(g,a.value))}else{a=d.length;for(var q=0;q<a;q++)b.push(f.call(g,d[q]))}return b};$jscomp.array.of=function(d){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];return $jscomp.array.from(f)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(d,f){return[d,f]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(d){return d})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(d,f){return f})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(d,f,g){var b=this.length;d=Number(d);f=Number(f);g=Number(null!=g?g:b);if(d<f)for(g=Math.min(g,b);f<g;)f in this?this[d++]=this[f++]:(delete this[d++],f++);else for(g=Math.min(g,b+f-d),d+=g-f;g>f;)--g in this?this[--d]=this[g]:delete this[d];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(d,f,g){null!=g&&d.length||(g=this.length||0);g=Number(g);for(f=Number((void 0===f?0:f)||0);f<g;f++)this[f]=d;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(d,f){return $jscomp.array.findInternal_(this,d,f).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(d,f){return $jscomp.array.findInternal_(this,d,f).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(d){d=void 0===d?[]:d;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next())f=f.value,this.set(f[0],f[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var d=$jscomp.global.Map;if(!d||!d.prototype.entries||!Object.seal)return!1;try{var f=Object.seal({x:4}),g=new d($jscomp.makeIterator([[f,"s"]]));if("s"!=g.get(f)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var b=g.entries(),a=b.next();if(a.done||a.value[0]!=f||"s"!=a.value[1])return!1;a=b.next();return a.done||4!=a.value[0].x||"t"!=a.value[1]||!b.next().done?!1:!0}catch(q){return!1}};
$jscomp.Map.createHead_=function(){var d={};return d.previous=d.next=d.head=d};$jscomp.Map.getId_=function(d){if(!(d instanceof Object))return String(d);$jscomp.Map.key_ in d||d instanceof Object&&Object.isExtensible&&Object.isExtensible(d)&&$jscomp.Map.defineProperty_(d,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in d?d[$jscomp.Map.key_]:" "+d};
$jscomp.Map.prototype.set=function(d,f){var g=this.maybeGetEntry_(d),b=g.id,a=g.list,g=g.entry;a||(a=this.data_[b]=[]);g?g.value=f:(g={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:f},a.push(g),this.head_.previous.next=g,this.head_.previous=g,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(d){var f=this.maybeGetEntry_(d);d=f.id;var g=f.list,b=f.index;return(f=f.entry)&&g?(g.splice(b,1),g.length||delete this.data_[d],f.previous.next=f.next,f.next.previous=f.previous,f.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(d){return!!this.maybeGetEntry_(d).entry};
$jscomp.Map.prototype.get=function(d){return(d=this.maybeGetEntry_(d).entry)&&d.value};$jscomp.Map.prototype.maybeGetEntry_=function(d){var f=$jscomp.Map.getId_(d),g=this.data_[f];if(g)for(var b=0;b<g.length;b++){var a=g[b];if(d!==d&&a.key!==a.key||d===a.key)return{id:f,list:g,index:b,entry:a}}return{id:f,list:g,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(d){return[d.key,d.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(d){return d.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(d){return d.value})};$jscomp.Map.prototype.forEach=function(d,f){for(var g=$jscomp.makeIterator(this.entries()),b=g.next();!b.done;b=g.next())b=b.value,d.call(f,b[1],b[0],this)};
$jscomp.Map.prototype.iter_=function(d){var f=this,g=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b={};return b.next=function(){if(g){for(;g.head!=f.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:d(g)};g=null}return{done:!0,value:void 0}},b[Symbol.iterator]=function(){return this},b};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(d,f,g){Object.defineProperty(d,f,{value:String(g)})}:function(d,f,g){d[f]=String(g)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(d){d=Number(d)>>>0;if(0===d)return 32;var f=0;0===(d&4294901760)&&(d<<=16,f+=16);0===(d&4278190080)&&(d<<=8,f+=8);0===(d&4026531840)&&(d<<=4,f+=4);0===(d&3221225472)&&(d<<=2,f+=2);0===(d&2147483648)&&f++;return f};$jscomp.math.imul=function(d,f){d=Number(d);f=Number(f);var g=d&65535,b=f&65535;return g*b+((d>>>16&65535)*b+g*(f>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1};
$jscomp.math.log10=function(d){return Math.log(d)/Math.LN10};$jscomp.math.log2=function(d){return Math.log(d)/Math.LN2};$jscomp.math.log1p=function(d){d=Number(d);if(.25>d&&-.25<d){for(var f=d,g=1,b=d,a=0,q=1;a!=b;)f*=d,q*=-1,b=(a=b)+q*f/++g;return b}return Math.log(1+d)};$jscomp.math.expm1=function(d){d=Number(d);if(.25>d&&-.25<d){for(var f=d,g=1,b=d,a=0;a!=b;)f*=d/++g,b=(a=b)+f;return b}return Math.exp(d)-1};$jscomp.math.cosh=function(d){d=Number(d);return(Math.exp(d)+Math.exp(-d))/2};
$jscomp.math.sinh=function(d){d=Number(d);return 0===d?d:(Math.exp(d)-Math.exp(-d))/2};$jscomp.math.tanh=function(d){d=Number(d);if(0===d)return d;var f=Math.exp(2*-Math.abs(d)),f=(1-f)/(1+f);return 0>d?-f:f};$jscomp.math.acosh=function(d){d=Number(d);return Math.log(d+Math.sqrt(d*d-1))};$jscomp.math.asinh=function(d){d=Number(d);if(0===d)return d;var f=Math.log(Math.abs(d)+Math.sqrt(d*d+1));return 0>d?-f:f};
$jscomp.math.atanh=function(d){d=Number(d);return($jscomp.math.log1p(d)-$jscomp.math.log1p(-d))/2};
$jscomp.math.hypot=function(d,f,g){for(var b=[],a=2;a<arguments.length;++a)b[a-2]=arguments[a];d=Number(d);f=Number(f);for(var q=Math.max(Math.abs(d),Math.abs(f)),t=$jscomp.makeIterator(b),a=t.next();!a.done;a=t.next())q=Math.max(q,Math.abs(a.value));if(1E100<q||1E-100>q){d/=q;f/=q;t=d*d+f*f;b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next())a=a.value,a=Number(a)/q,t+=a*a;return Math.sqrt(t)*q}q=d*d+f*f;b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next())a=a.value,a=Number(a),q+=
a*a;return Math.sqrt(q)};$jscomp.math.trunc=function(d){d=Number(d);if(isNaN(d)||Infinity===d||-Infinity===d||0===d)return d;var f=Math.floor(Math.abs(d));return 0>d?-f:f};$jscomp.math.cbrt=function(d){if(0===d)return d;d=Number(d);var f=Math.pow(Math.abs(d),1/3);return 0>d?-f:f};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d};
$jscomp.number.isInteger=function(d){return $jscomp.number.isFinite(d)?d===Math.floor(d):!1};$jscomp.number.isNaN=function(d){return"number"===typeof d&&isNaN(d)};$jscomp.number.isSafeInteger=function(d){return $jscomp.number.isInteger(d)&&Math.abs(d)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(d,f){for(var g=[],b=1;b<arguments.length;++b)g[b-1]=arguments[b];g=$jscomp.makeIterator(g);for(b=g.next();!b.done;b=g.next())if(b=b.value)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(d[a]=b[a]);return d};$jscomp.object.is=function(d,f){return d===f?0!==d||1/d===1/f:d!==d&&f!==f};$jscomp.Set=function(d){d=void 0===d?[]:d;this.map_=new $jscomp.Map;if(d){d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next())this.add(f.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var d=$jscomp.global.Set;if(!d||!d.prototype.entries||!Object.seal)return!1;var f=Object.seal({x:4}),d=new d($jscomp.makeIterator([f]));if(d.has(f)||1!=d.size||d.add(f)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var d=d.entries(),g=d.next();if(g.done||g.value[0]!=f||g.value[1]!=f)return!1;g=d.next();return g.done||g.value[0]==f||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:d.next().done};
$jscomp.Set.prototype.add=function(d){this.map_.set(d,d);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(d){return this.map_.has(d)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(d,f){var g=this;this.map_.forEach(function(b){return d.call(f,b,b,g)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(d,f){if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(d){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];for(var g="",f=$jscomp.makeIterator(f),b=f.next();!b.done;b=f.next()){b=b.value;b=+b;if(0>b||1114111<b||b!==Math.floor(b))throw new RangeError("invalid_code_point "+b);65535>=b?g+=String.fromCharCode(b):(b-=65536,g+=String.fromCharCode(b>>>10&1023|55296),g+=String.fromCharCode(b&1023|56320))}return g};
$jscomp.string.repeat=function(d){var f=this.toString();if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var g="";d;)if(d&1&&(g+=f),d>>>=1)f+=f;return g};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(d){var f=this.toString(),g=f.length;d=Number(d)||0;if(0<=d&&d<g){d|=0;var b=f.charCodeAt(d);if(55296>b||56319<b||d+1===g)return b;d=f.charCodeAt(d+1);return 56320>d||57343<d?b:1024*(b-55296)+d+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(d,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(d,"includes");return-1!==this.toString().indexOf(d,f)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(d,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(d,"startsWith");var g=this.toString();d+="";for(var b=g.length,a=d.length,q=Math.max(0,Math.min(f|0,g.length)),t=0;t<a&&q<b;)if(g[q++]!=d[t++])return!1;return t>=a};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(d,f){$jscomp.string.noRegExp_(d,"endsWith");var g=this.toString();d+="";void 0===f&&(f=g.length);for(var b=Math.max(0,Math.min(f|0,g.length)),a=d.length;0<a&&0<b;)if(g[--b]!=d[--a])return!1;return 0>=a};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function d(f,g,b){function a(t,h){if(!g[t]){if(!f[t]){var e="function"==typeof require&&require;if(!h&&e)return e(t,!0);if(q)return q(t,!0);e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}e=g[t]={exports:{}};f[t][0].call(e.exports,function(e){return a(f[t][1][e]||e)},e,e.exports,d,f,g,b)}return g[t].exports}for(var q="function"==typeof require&&require,t=0;t<b.length;t++)a(b[t]);return a}return d})()({1:[function(d,f,g){var b=d("regl"),a=d("gl-mat4"),q=d("canvas-orbit-camera");
d=d("canvas-fit");f=Array.prototype;var t=f.push,n=f.unshift,h={duplicate:function(c,m,a){null==m&&(m=1);null==a&&(a=1);for(var e=[],l=Array(2*m),b=0,k=c.length/m;b<k;b++){for(var d=b*m,w=0;w<m;w++){var u=c[d+w];l[w]=u;l[w+m]=u*a}t.apply(e,l)}return e},mapElement:function(c,m,a,e){for(var l=0,b=c.length/a;l<b;l++){var k=m+l*a;c[k]=e(c[k],k,l)}return c},pushElement:function(c,m,a){var e=Array(a);m*=a;for(var l=0;l<a;l++)e[l]=c[m+l];t.apply(c,e);return c},unshiftElement:function(c,m,a){var e=Array(a);
m*=a;for(var l=0;l<a;l++)e[l]=c[m+l];n.apply(c,e);return c}};g=Float32Array.BYTES_PER_ELEMENT;f=document.createElement("canvas");var e=b(f),k=q(f),b=function(c,m,a){for(var e=2*Math.PI,l=0;l<m;l++){var b=l/(m-1)*e,k=a(b,l);c.push(Math.cos(b)*k,Math.sin(b)*k,0)}return c}([],200,function(c){return 20*Math.sin(2.5*c)}).slice();h.mapElement(b,2,3,function(c,m,a){return 20*(a/200-.5)});h.pushElement(b,0,3);h.unshiftElement(b,199,3);var q=Array(200).fill(1).map(function(c,m){return(m+1)/200}),c=new Float32Array(h.duplicate(b,
3)),l=new Float32Array(c),q=h.duplicate(q,1,-1),b=function(c,m,a){for(var e=0;e<m-1;e++){var l=a+2*e,b=l+1,k=l+2;c.push(l,b,k,k,b,l+3)}return c}([],200,0),w=e.buffer({usage:"dynamic",type:"float",length:1212*g}),q=e.buffer({usage:"static",type:"float",length:404*g,data:q});g={prevPosition:{buffer:w,offset:0,stride:3*g},currPosition:{buffer:w,offset:6*g,stride:3*g},nextPosition:{buffer:w,offset:12*g,stride:3*g},offsetScale:q};var q={projection:function(c){return a.perspective([],Math.PI/2,c.viewportWidth/
c.viewportHeight,.01,1E3)},model:a.identity([]),view:function(){return k.view()},aspect:function(c){return c.viewportWidth/c.viewportHeight},color:[.8,.5,0,1],thickness:1,miter:0},b=e.elements({primitive:"triangles",usage:"static",type:"uint16",data:b}),u=e({attributes:g,uniforms:q,elements:b,vert:"\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspect;\n\nuniform float thickness;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspect, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  float len = thickness;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n      len = thickness / dot(miter, perp);\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * thickness;\n  normal.x /= aspect;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 1.0);\n  gl_Position = currProjected + offset;\n}",
frag:"\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"});e.frame(function(v){var m=v.tick;e.clear({color:[.1,.1,.1,1],depth:1});k.tick();h.mapElement(l,2,3,function(v,a,e){return c[a]+5*Math.sin(.05*m+.1*Math.floor(e/2))});w.subdata(l,0);u()});window.addEventListener("resize",d(f),!1);document.body.appendChild(f)},{"canvas-fit":2,"canvas-orbit-camera":3,"gl-mat4":23,regl:42}],2:[function(d,f,g){var b=d("element-size");f.exports=function(d,t,f){function h(){var k=
h.parent||d.parentNode;if("function"===typeof k)var c=k(a)||a,k=c[0],c=c[1];else k&&k!==document.body?(c=b(k),k=c[0]|0,c=c[1]|0):(k=window.innerWidth,c=window.innerHeight);e?(d.setAttribute("width",k*h.scale+"px"),d.setAttribute("height",c*h.scale+"px")):(d.width=k*h.scale,d.height=c*h.scale);d.style.width=k+"px";d.style.height=c+"px";return h}var e="SVG"===d.nodeName.toUpperCase();d.style.position=d.style.position||"absolute";d.style.top=0;d.style.left=0;h.scale=parseFloat(f||1);h.parent=t;return h()};
var a=new Float32Array(2)},{"element-size":6}],3:[function(d,f,g){var b=d("orbit-camera"),a=d("scroll-speed"),q=d("mouse-position"),t=d("mouse-pressed"),n=d("key-pressed");f.exports=function(d,e){e=e||{};e.pan=!1!==e.pan;e.scale=!1!==e.scale;e.rotate=!1!==e.rotate;var k=a(d,e.scale),c=t(d,e.rotate),l=q(d),w=b([0,10,30],[0,0,0],[0,1,0]);w.tick=function(){var a=n("<control>")||n("<alt>"),v=n("<shift>"),m=d.height,A=d.width;e.rotate&&c.left&&!a&&!v&&w.rotate([l.x/A-.5,l.y/m-.5],[l.prevX/A-.5,l.prevY/
m-.5]);(e.pan&&c.right||c.left&&a&&!v)&&w.pan([1*(l.x-l.prevX)/A,1*(l.y-l.prevY)/m]);e.scale&&k[1]&&(w.distance*=Math.exp(k[1]/m));if(e.scale&&(c.middle||c.left&&!a&&v)){a=l.y-l.prevY;if(!a)return;w.distance*=Math.exp(a/m)}k.flush();l.flush()};return w}},{"key-pressed":39,"mouse-position":4,"mouse-pressed":5,"orbit-camera":40,"scroll-speed":43}],4:[function(d,f,g){var b=d("events/");f.exports=function(a,d){var t=new b;t.x=0;t.y=0;t.prevX=0;t.prevY=0;t.flush=function(){this.prevX=this.x;this.prevY=
this.y};if("undefined"===typeof window)return t;d=d||a||window;a=a||document.body;d.addEventListener("mousemove",a===document.body||a===window?function(a){t.prevX=t.x;t.prevY=t.y;t.x=a.clientX;t.y=a.clientY;t.emit("move",a)}:function(b){t.prevX=t.x;t.prevY=t.y;var d=a.getBoundingClientRect();t.x=b.clientX-d.left;t.y=b.clientY-d.top;t.emit("move",b)},!1);return t}},{"events/":7}],5:[function(d,f,g){var b=d("events/"),a=["left","middle","right"];f.exports=function(d,t){function f(b){e.right=!1;e[a[b.button]]=
!0;e.emit("down",b);if(t){if(!b.preventDefault)return!1;b.preventDefault();b.stopPropagation()}}function h(b){e.right=!1;e[a[b.button]]=!1;e.emit("up",b);t&&b.preventDefault&&(b.preventDefault(),b.stopPropagation())}var e=new b;e.left=!1;e.right=!1;e.middle=!1;"undefined"!==typeof window&&(d=d||window,d.addEventListener("mousedown",f,!1),d.addEventListener("mouseup",h,!1),t&&d.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return e}},{"events/":7}],
6:[function(d,f,g){function b(a){return parseFloat(a)||0}f.exports=function(a){if(a===window||a===document.body)return[window.innerWidth,window.innerHeight];if(!a.parentNode){var d=!0;document.body.appendChild(a)}var t=a.getBoundingClientRect(),f=getComputedStyle(a),h=(t.height|0)+b(f.getPropertyValue("margin-top"))+b(f.getPropertyValue("margin-bottom")),t=(t.width|0)+b(f.getPropertyValue("margin-left"))+b(f.getPropertyValue("margin-right"));d&&document.body.removeChild(a);return[t,h]}},{}],7:[function(d,
f,g){function b(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function a(a){return"function"===typeof a}function q(a){return"object"===typeof a&&null!==a}f.exports=b;b.EventEmitter=b;b.prototype._events=void 0;b.prototype._maxListeners=void 0;b.defaultMaxListeners=10;b.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};b.prototype.emit=function(b){var d,f,e,k;this._events||
(this._events={});if("error"===b&&(!this._events.error||q(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;f=Error('Uncaught, unspecified "error" event. ('+d+")");f.context=d;throw f;}f=this._events[b];if(void 0===f)return!1;if(a(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),f.apply(this,d)}else if(q(f))for(d=
Array.prototype.slice.call(arguments,1),k=f.slice(),f=k.length,e=0;e<f;e++)k[e].apply(this,d);return!0};b.prototype.addListener=function(d,f){var h;if(!a(f))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",d,a(f.listener)?f.listener:f);this._events[d]?q(this._events[d])?this._events[d].push(f):this._events[d]=[this._events[d],f]:this._events[d]=f;q(this._events[d])&&!this._events[d].warned&&(h=void 0!==this._maxListeners?
this._maxListeners:b.defaultMaxListeners)&&0<h&&this._events[d].length>h&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[d].length),"function"===typeof console.trace&&console.trace());return this};b.prototype.on=b.prototype.addListener;b.prototype.once=function(b,d){function f(){this.removeListener(b,f);e||(e=!0,d.apply(this,arguments))}if(!a(d))throw TypeError("listener must be a function");
var e=!1;f.listener=d;this.on(b,f);return this};b.prototype.removeListener=function(b,d){var f,e,k;if(!a(d))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;f=this._events[b];k=f.length;e=-1;if(f===d||a(f.listener)&&f.listener===d)delete this._events[b],this._events.removeListener&&this.emit("removeListener",b,d);else if(q(f)){for(;0<k--;)if(f[k]===d||f[k].listener&&f[k].listener===d){e=k;break}if(0>e)return this;1===f.length?(f.length=0,delete this._events[b]):
f.splice(e,1);this._events.removeListener&&this.emit("removeListener",b,d)}return this};b.prototype.removeAllListeners=function(b){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[b];if(a(d))this.removeListener(b,
d);else if(d)for(;d.length;)this.removeListener(b,d[d.length-1]);delete this._events[b];return this};b.prototype.listeners=function(b){return this._events&&this._events[b]?a(this._events[b])?[this._events[b]]:this._events[b].slice():[]};b.prototype.listenerCount=function(b){if(this._events){b=this._events[b];if(a(b))return 1;if(b)return b.length}return 0};b.listenerCount=function(a,b){return a.listenerCount(b)}},{}],8:[function(d,f,g){f.exports=function(b,a){var d=a[0],f=a[1],n=a[2],h=a[3],e=a[4],
k=a[5],c=a[6],l=a[7],w=a[8],u=a[9],v=a[10],m=a[11],A=a[12],x=a[13],p=a[14],z=a[15];b[0]=k*(v*z-m*p)-u*(c*z-l*p)+x*(c*m-l*v);b[1]=-(f*(v*z-m*p)-u*(n*z-h*p)+x*(n*m-h*v));b[2]=f*(c*z-l*p)-k*(n*z-h*p)+x*(n*l-h*c);b[3]=-(f*(c*m-l*v)-k*(n*m-h*v)+u*(n*l-h*c));b[4]=-(e*(v*z-m*p)-w*(c*z-l*p)+A*(c*m-l*v));b[5]=d*(v*z-m*p)-w*(n*z-h*p)+A*(n*m-h*v);b[6]=-(d*(c*z-l*p)-e*(n*z-h*p)+A*(n*l-h*c));b[7]=d*(c*m-l*v)-e*(n*m-h*v)+w*(n*l-h*c);b[8]=e*(u*z-m*x)-w*(k*z-l*x)+A*(k*m-l*u);b[9]=-(d*(u*z-m*x)-w*(f*z-h*x)+A*(f*m-
h*u));b[10]=d*(k*z-l*x)-e*(f*z-h*x)+A*(f*l-h*k);b[11]=-(d*(k*m-l*u)-e*(f*m-h*u)+w*(f*l-h*k));b[12]=-(e*(u*p-v*x)-w*(k*p-c*x)+A*(k*v-c*u));b[13]=d*(u*p-v*x)-w*(f*p-n*x)+A*(f*v-n*u);b[14]=-(d*(k*p-c*x)-e*(f*p-n*x)+A*(f*c-n*k));b[15]=d*(k*v-c*u)-e*(f*v-n*u)+w*(f*c-n*k);return b}},{}],9:[function(d,f,g){f.exports=function(b){var a=new Float32Array(16);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=
b[14];a[15]=b[15];return a}},{}],10:[function(d,f,g){f.exports=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],11:[function(d,f,g){f.exports=function(){var b=new Float32Array(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],12:[function(d,f,g){f.exports=function(b){var a=
b[0],d=b[1],f=b[2],n=b[3],h=b[4],e=b[5],k=b[6],c=b[7],l=b[8],w=b[9],u=b[10],v=b[11],m=b[12],A=b[13],x=b[14];b=b[15];return(a*e-d*h)*(u*b-v*x)-(a*k-f*h)*(w*b-v*A)+(a*c-n*h)*(w*x-u*A)+(d*k-f*e)*(l*b-v*m)-(d*c-n*e)*(l*x-u*m)+(f*c-n*k)*(l*A-w*m)}},{}],13:[function(d,f,g){f.exports=function(b,a){var d=a[0],f=a[1],n=a[2],h=a[3],e=d+d,k=f+f,c=n+n,d=d*e,l=f*e,f=f*k,w=n*e,u=n*k,n=n*c,e=h*e,k=h*k,h=h*c;b[0]=1-f-n;b[1]=l+h;b[2]=w-k;b[3]=0;b[4]=l-h;b[5]=1-d-n;b[6]=u+e;b[7]=0;b[8]=w+k;b[9]=u-e;b[10]=1-d-f;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],14:[function(d,f,g){f.exports=function(b,a,d){var f,n,h=d[0],e=d[1];d=d[2];f=Math.sqrt(h*h+e*e+d*d);if(1E-6>Math.abs(f))return null;f=1/f;h*=f;e*=f;d*=f;f=Math.sin(a);a=Math.cos(a);n=1-a;b[0]=h*h*n+a;b[1]=e*h*n+d*f;b[2]=d*h*n-e*f;b[3]=0;b[4]=h*e*n-d*f;b[5]=e*e*n+a;b[6]=d*e*n+h*f;b[7]=0;b[8]=h*d*n+e*f;b[9]=e*d*n-h*f;b[10]=d*d*n+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],15:[function(d,f,g){f.exports=function(b,a,d){var f=a[0],n=a[1],h=
a[2],e=a[3],k=f+f,c=n+n,l=h+h;a=f*k;var w=f*c,f=f*l,u=n*c,n=n*l,h=h*l,k=e*k,c=e*c,e=e*l;b[0]=1-(u+h);b[1]=w+e;b[2]=f-c;b[3]=0;b[4]=w-e;b[5]=1-(a+h);b[6]=n+k;b[7]=0;b[8]=f+c;b[9]=n-k;b[10]=1-(a+u);b[11]=0;b[12]=d[0];b[13]=d[1];b[14]=d[2];b[15]=1;return b}},{}],16:[function(d,f,g){f.exports=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],17:[function(d,f,g){f.exports=function(b,a){b[0]=1;b[1]=
0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b}},{}],18:[function(d,f,g){f.exports=function(b,a){var d=Math.sin(a),f=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=d;b[7]=0;b[8]=0;b[9]=-d;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],19:[function(d,f,g){f.exports=function(b,a){var d=Math.sin(a),f=Math.cos(a);b[0]=f;b[1]=0;b[2]=-d;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=d;b[9]=0;b[10]=f;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],20:[function(d,f,g){f.exports=function(b,a){var d=Math.sin(a),f=Math.cos(a);b[0]=f;b[1]=d;b[2]=0;b[3]=0;b[4]=-d;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],21:[function(d,f,g){f.exports=function(b,a,d,f,n,h,e){var k=1/(d-a),c=1/(n-f),l=1/(h-e);b[0]=2*h*k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*h*c;b[6]=0;b[7]=0;b[8]=(d+a)*k;b[9]=(n+f)*c;b[10]=(e+h)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=e*h*2*l;b[15]=0;return b}},
{}],22:[function(d,f,g){f.exports=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],23:[function(d,f,g){f.exports={create:d("./create"),clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),
rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},
{"./adjoint":8,"./clone":9,"./copy":10,"./create":11,"./determinant":12,"./fromQuat":13,"./fromRotation":14,"./fromRotationTranslation":15,"./fromScaling":16,"./fromTranslation":17,"./fromXRotation":18,"./fromYRotation":19,"./fromZRotation":20,"./frustum":21,"./identity":22,"./invert":24,"./lookAt":25,"./multiply":26,"./ortho":27,"./perspective":28,"./perspectiveFromFieldOfView":29,"./rotate":30,"./rotateX":31,"./rotateY":32,"./rotateZ":33,"./scale":34,"./str":35,"./translate":36,"./transpose":37}],
24:[function(d,f,g){f.exports=function(b,a){var d=a[0],f=a[1],n=a[2],h=a[3],e=a[4],k=a[5],c=a[6],l=a[7],w=a[8],u=a[9],v=a[10],m=a[11],A=a[12],x=a[13],p=a[14],z=a[15],H=d*k-f*e,y=d*c-n*e,M=d*l-h*e,D=f*c-n*k,g=f*l-h*k,J=n*l-h*c,K=w*x-u*A,B=w*p-v*A,E=w*z-m*A,G=u*p-v*x,I=u*z-m*x,F=v*z-m*p,L=H*F-y*I+M*G+D*E-g*B+J*K;if(!L)return null;L=1/L;b[0]=(k*F-c*I+l*G)*L;b[1]=(n*I-f*F-h*G)*L;b[2]=(x*J-p*g+z*D)*L;b[3]=(v*g-u*J-m*D)*L;b[4]=(c*E-e*F-l*B)*L;b[5]=(d*F-n*E+h*B)*L;b[6]=(p*M-A*J-z*y)*L;b[7]=(w*J-v*M+m*y)*
L;b[8]=(e*I-k*E+l*K)*L;b[9]=(f*E-d*I-h*K)*L;b[10]=(A*g-x*M+z*H)*L;b[11]=(u*M-w*g-m*H)*L;b[12]=(k*B-e*G-c*K)*L;b[13]=(d*G-f*B+n*K)*L;b[14]=(x*y-A*D-p*H)*L;b[15]=(w*D-u*y+v*H)*L;return b}},{}],25:[function(d,f,g){var b=d("./identity");f.exports=function(a,d,f,n){var h,e,k,c,l,w,u,v,m=d[0],A=d[1];d=d[2];k=n[0];c=n[1];e=n[2];u=f[0];n=f[1];h=f[2];if(1E-6>Math.abs(m-u)&&1E-6>Math.abs(A-n)&&1E-6>Math.abs(d-h))return b(a);f=m-u;n=A-n;u=d-h;v=1/Math.sqrt(f*f+n*n+u*u);f*=v;n*=v;u*=v;h=c*u-e*n;e=e*f-k*u;k=k*
n-c*f;(v=Math.sqrt(h*h+e*e+k*k))?(v=1/v,h*=v,e*=v,k*=v):k=e=h=0;c=n*k-u*e;l=u*h-f*k;w=f*e-n*h;(v=Math.sqrt(c*c+l*l+w*w))?(v=1/v,c*=v,l*=v,w*=v):w=l=c=0;a[0]=h;a[1]=c;a[2]=f;a[3]=0;a[4]=e;a[5]=l;a[6]=n;a[7]=0;a[8]=k;a[9]=w;a[10]=u;a[11]=0;a[12]=-(h*m+e*A+k*d);a[13]=-(c*m+l*A+w*d);a[14]=-(f*m+n*A+u*d);a[15]=1;return a}},{"./identity":22}],26:[function(d,f,g){f.exports=function(b,a,d){var f=a[0],n=a[1],h=a[2],e=a[3],k=a[4],c=a[5],l=a[6],w=a[7],u=a[8],v=a[9],m=a[10],A=a[11],x=a[12],p=a[13],z=a[14];a=
a[15];var H=d[0],y=d[1],M=d[2],D=d[3];b[0]=H*f+y*k+M*u+D*x;b[1]=H*n+y*c+M*v+D*p;b[2]=H*h+y*l+M*m+D*z;b[3]=H*e+y*w+M*A+D*a;H=d[4];y=d[5];M=d[6];D=d[7];b[4]=H*f+y*k+M*u+D*x;b[5]=H*n+y*c+M*v+D*p;b[6]=H*h+y*l+M*m+D*z;b[7]=H*e+y*w+M*A+D*a;H=d[8];y=d[9];M=d[10];D=d[11];b[8]=H*f+y*k+M*u+D*x;b[9]=H*n+y*c+M*v+D*p;b[10]=H*h+y*l+M*m+D*z;b[11]=H*e+y*w+M*A+D*a;H=d[12];y=d[13];M=d[14];D=d[15];b[12]=H*f+y*k+M*u+D*x;b[13]=H*n+y*c+M*v+D*p;b[14]=H*h+y*l+M*m+D*z;b[15]=H*e+y*w+M*A+D*a;return b}},{}],27:[function(d,f,
g){f.exports=function(b,a,d,f,n,h,e){var k=1/(a-d),c=1/(f-n),l=1/(h-e);b[0]=-2*k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*c;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+d)*k;b[13]=(n+f)*c;b[14]=(e+h)*l;b[15]=1;return b}},{}],28:[function(d,f,g){f.exports=function(b,a,d,f,n){a=1/Math.tan(a/2);var h=1/(f-n);b[0]=a/d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(n+f)*h;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*n*f*h;b[15]=0;return b}},{}],29:[function(d,f,g){f.exports=function(b,
a,d,f){var n=Math.tan(a.upDegrees*Math.PI/180),h=Math.tan(a.downDegrees*Math.PI/180),e=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var k=2/(e+a),c=2/(n+h);b[0]=k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=c;b[6]=0;b[7]=0;b[8]=-((e-a)*k*.5);b[9]=(n-h)*c*.5;b[10]=f/(d-f);b[11]=-1;b[12]=0;b[13]=0;b[14]=f*d/(d-f);b[15]=0;return b}},{}],30:[function(d,f,g){f.exports=function(b,a,d,f){var n=f[0],h=f[1];f=f[2];var e=Math.sqrt(n*n+h*h+f*f),k,c,l,w,u,v,m,A,x,p,z,H,y,M,D,g,J,K,B,E;if(1E-6>
Math.abs(e))return null;e=1/e;n*=e;h*=e;f*=e;k=Math.sin(d);c=Math.cos(d);l=1-c;d=a[0];e=a[1];w=a[2];u=a[3];v=a[4];m=a[5];A=a[6];x=a[7];p=a[8];z=a[9];H=a[10];y=a[11];M=n*n*l+c;D=h*n*l+f*k;g=f*n*l-h*k;J=n*h*l-f*k;K=h*h*l+c;B=f*h*l+n*k;E=n*f*l+h*k;n=h*f*l-n*k;h=f*f*l+c;b[0]=d*M+v*D+p*g;b[1]=e*M+m*D+z*g;b[2]=w*M+A*D+H*g;b[3]=u*M+x*D+y*g;b[4]=d*J+v*K+p*B;b[5]=e*J+m*K+z*B;b[6]=w*J+A*K+H*B;b[7]=u*J+x*K+y*B;b[8]=d*E+v*n+p*h;b[9]=e*E+m*n+z*h;b[10]=w*E+A*n+H*h;b[11]=u*E+x*n+y*h;a!==b&&(b[12]=a[12],b[13]=a[13],
b[14]=a[14],b[15]=a[15]);return b}},{}],31:[function(d,f,g){f.exports=function(b,a,d){var f=Math.sin(d);d=Math.cos(d);var g=a[4],h=a[5],e=a[6],k=a[7],c=a[8],l=a[9],w=a[10],u=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=g*d+c*f;b[5]=h*d+l*f;b[6]=e*d+w*f;b[7]=k*d+u*f;b[8]=c*d-g*f;b[9]=l*d-h*f;b[10]=w*d-e*f;b[11]=u*d-k*f;return b}},{}],32:[function(d,f,g){f.exports=function(b,a,d){var f=Math.sin(d);d=Math.cos(d);var g=a[0],h=a[1],e=a[2],
k=a[3],c=a[8],l=a[9],w=a[10],u=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*d-c*f;b[1]=h*d-l*f;b[2]=e*d-w*f;b[3]=k*d-u*f;b[8]=g*f+c*d;b[9]=h*f+l*d;b[10]=e*f+w*d;b[11]=k*f+u*d;return b}},{}],33:[function(d,f,g){f.exports=function(b,a,d){var f=Math.sin(d);d=Math.cos(d);var g=a[0],h=a[1],e=a[2],k=a[3],c=a[4],l=a[5],w=a[6],u=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*
d+c*f;b[1]=h*d+l*f;b[2]=e*d+w*f;b[3]=k*d+u*f;b[4]=c*d-g*f;b[5]=l*d-h*f;b[6]=w*d-e*f;b[7]=u*d-k*f;return b}},{}],34:[function(d,f,g){f.exports=function(b,a,d){var f=d[0],g=d[1];d=d[2];b[0]=a[0]*f;b[1]=a[1]*f;b[2]=a[2]*f;b[3]=a[3]*f;b[4]=a[4]*g;b[5]=a[5]*g;b[6]=a[6]*g;b[7]=a[7]*g;b[8]=a[8]*d;b[9]=a[9]*d;b[10]=a[10]*d;b[11]=a[11]*d;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],35:[function(d,f,g){f.exports=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+
", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}},{}],36:[function(d,f,g){f.exports=function(b,a,d){var f=d[0],g=d[1];d=d[2];var h,e,k,c,l,w,u,v,m,A,x,p;a===b?(b[12]=a[0]*f+a[4]*g+a[8]*d+a[12],b[13]=a[1]*f+a[5]*g+a[9]*d+a[13],b[14]=a[2]*f+a[6]*g+a[10]*d+a[14],b[15]=a[3]*f+a[7]*g+a[11]*d+a[15]):(h=a[0],e=a[1],k=a[2],c=a[3],l=a[4],w=a[5],u=a[6],v=a[7],m=a[8],A=a[9],x=a[10],p=a[11],b[0]=h,b[1]=e,b[2]=k,b[3]=c,b[4]=l,b[5]=w,b[6]=u,b[7]=v,b[8]=
m,b[9]=A,b[10]=x,b[11]=p,b[12]=h*f+l*g+m*d+a[12],b[13]=e*f+w*g+A*d+a[13],b[14]=k*f+u*g+x*d+a[14],b[15]=c*f+v*g+p*d+a[15]);return b}},{}],37:[function(d,f,g){f.exports=function(b,a){if(b===a){var d=a[1],f=a[2],g=a[3],h=a[6],e=a[7],k=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=d;b[6]=a[9];b[7]=a[13];b[8]=f;b[9]=h;b[11]=a[14];b[12]=g;b[13]=e;b[14]=k}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=
a[11],b[15]=a[15];return b}},{}],38:[function(d,f,g){!function(b,a){if("object"==typeof g&&"object"==typeof f)f.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var d=a(),t;for(t in d)("object"==typeof g?g:b)[t]=d[t]}}("undefined"!=typeof self?self:this,function(){return function(b){function a(f){if(d[f])return d[f].exports;var g=d[f]={i:f,l:!1,exports:{}};return b[f].call(g.exports,g,g.exports,a),g.l=!0,g.exports}var d={};return a.m=b,a.c=d,a.d=function(b,d,f){a.o(b,d)||
Object.defineProperty(b,d,{enumerable:!0,get:f})},a.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,d){if((1&d&&(b=a(b)),8&d)||4&d&&"object"==typeof b&&b&&b.__esModule)return b;var f=Object.create(null);if(a.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:b}),2&d&&"string"!=typeof b)for(var e in b)a.d(f,
e,function(a){return b[a]}.bind(null,e));return f},a.n=function(b){var d=b&&b.__esModule?function(){return b["default"]}:function(){return b};return a.d(d,"a",d),d},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=10)}([function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.setMatrixArrayType=function(b){a.ARRAY_TYPE=b};a.toRadian=function(a){return a*g};a.equals=function(a,e){return Math.abs(a-e)<=f*Math.max(1,Math.abs(a),Math.abs(e))};var f=a.EPSILON=
1E-6;a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;a.RANDOM=Math.random;var g=Math.PI/180},function(b,a,d){function f(){var c=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c}function g(c,a,e){return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],c[3]=a[3]-e[3],c}function h(c,a,e){return c[0]=a[0]*e[0],c[1]=a[1]*e[1],c[2]=a[2]*e[2],c[3]=a[3]*e[3],c}function e(c,a,e){return c[0]=a[0]/e[0],c[1]=a[1]/e[1],c[2]=a[2]/e[2],c[3]=a[3]/e[3],c}function k(c,
a){var e=a[0]-c[0],b=a[1]-c[1],l=a[2]-c[2],d=a[3]-c[3];return Math.sqrt(e*e+b*b+l*l+d*d)}function c(c,a){var e=a[0]-c[0],b=a[1]-c[1],l=a[2]-c[2],d=a[3]-c[3];return e*e+b*b+l*l+d*d}function l(c){var a=c[0],e=c[1],b=c[2];c=c[3];return Math.sqrt(a*a+e*e+b*b+c*c)}function w(c){var a=c[0],e=c[1],b=c[2];c=c[3];return a*a+e*e+b*b+c*c}Object.defineProperty(a,"__esModule",{value:!0});a.forEach=a.sqrLen=a.len=a.sqrDist=a.dist=a.div=a.mul=a.sub=void 0;a.create=f;a.clone=function(c){var a=new u.ARRAY_TYPE(4);
return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};a.fromValues=function(c,a,e,b){var l=new u.ARRAY_TYPE(4);return l[0]=c,l[1]=a,l[2]=e,l[3]=b,l};a.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};a.set=function(c,a,e,b,l){return c[0]=a,c[1]=e,c[2]=b,c[3]=l,c};a.add=function(c,a,e){return c[0]=a[0]+e[0],c[1]=a[1]+e[1],c[2]=a[2]+e[2],c[3]=a[3]+e[3],c};a.subtract=g;a.multiply=h;a.divide=e;a.ceil=function(c,a){return c[0]=Math.ceil(a[0]),c[1]=Math.ceil(a[1]),c[2]=Math.ceil(a[2]),c[3]=
Math.ceil(a[3]),c};a.floor=function(c,a){return c[0]=Math.floor(a[0]),c[1]=Math.floor(a[1]),c[2]=Math.floor(a[2]),c[3]=Math.floor(a[3]),c};a.min=function(c,a,e){return c[0]=Math.min(a[0],e[0]),c[1]=Math.min(a[1],e[1]),c[2]=Math.min(a[2],e[2]),c[3]=Math.min(a[3],e[3]),c};a.max=function(c,a,e){return c[0]=Math.max(a[0],e[0]),c[1]=Math.max(a[1],e[1]),c[2]=Math.max(a[2],e[2]),c[3]=Math.max(a[3],e[3]),c};a.round=function(c,a){return c[0]=Math.round(a[0]),c[1]=Math.round(a[1]),c[2]=Math.round(a[2]),c[3]=
Math.round(a[3]),c};a.scale=function(c,a,e){return c[0]=a[0]*e,c[1]=a[1]*e,c[2]=a[2]*e,c[3]=a[3]*e,c};a.scaleAndAdd=function(c,a,e,b){return c[0]=a[0]+e[0]*b,c[1]=a[1]+e[1]*b,c[2]=a[2]+e[2]*b,c[3]=a[3]+e[3]*b,c};a.distance=k;a.squaredDistance=c;a.length=l;a.squaredLength=w;a.negate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=-a[3],c};a.inverse=function(c,a){return c[0]=1/a[0],c[1]=1/a[1],c[2]=1/a[2],c[3]=1/a[3],c};a.normalize=function(c,a){var e=a[0],b=a[1],l=a[2],d=a[3],k=e*e+b*b+
l*l+d*d;0<k&&(k=1/Math.sqrt(k),c[0]=e*k,c[1]=b*k,c[2]=l*k,c[3]=d*k);return c};a.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]};a.lerp=function(c,a,e,b){var l=a[0],d=a[1],k=a[2];a=a[3];return c[0]=l+b*(e[0]-l),c[1]=d+b*(e[1]-d),c[2]=k+b*(e[2]-k),c[3]=a+b*(e[3]-a),c};a.random=function(c,a){var e,b,l,d,k,f;a=a||1;do e=2*u.RANDOM()-1,b=2*u.RANDOM()-1,k=e*e+b*b;while(1<=k);do l=2*u.RANDOM()-1,d=2*u.RANDOM()-1,f=l*l+d*d;while(1<=f);k=Math.sqrt((1-k)/f);return c[0]=a*e,c[1]=a*b,c[2]=a*
l*k,c[3]=a*d*k,c};a.transformMat4=function(c,a,e){var b=a[0],l=a[1],d=a[2];a=a[3];return c[0]=e[0]*b+e[4]*l+e[8]*d+e[12]*a,c[1]=e[1]*b+e[5]*l+e[9]*d+e[13]*a,c[2]=e[2]*b+e[6]*l+e[10]*d+e[14]*a,c[3]=e[3]*b+e[7]*l+e[11]*d+e[15]*a,c};a.transformQuat=function(c,a,e){var b=a[0],l=a[1],d=a[2],k=e[0],f=e[1],w=e[2];e=e[3];var u=e*b+f*d-w*l,g=e*l+w*b-k*d,h=e*d+k*l-f*b,b=-k*b-f*l-w*d;return c[0]=u*e+b*-k+g*-w-h*-f,c[1]=g*e+b*-f+h*-k-u*-w,c[2]=h*e+b*-w+u*-f-g*-k,c[3]=a[3],c};a.str=function(c){return"vec4("+c[0]+
", "+c[1]+", "+c[2]+", "+c[3]+")"};a.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};a.equals=function(c,a){var e=c[0],b=c[1],l=c[2],d=c[3],k=a[0],f=a[1],w=a[2],g=a[3];return Math.abs(e-k)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(b-f)<=u.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(l-w)<=u.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(d-g)<=u.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))};var u=function(c){if(c&&c.__esModule)return c;
var a={};if(null!=c)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a["default"]=c,a}(d(0));a.sub=g;a.mul=h;a.div=e;a.dist=k;a.sqrDist=c;a.len=l;a.sqrLen=w;a.forEach=function(){var c=f();return function(a,e,b,l,d,k){var f=void 0,w=void 0;e||(e=4);b||(b=0);w=l?Math.min(l*e+b,a.length):a.length;for(f=b;f<w;f+=e)c[0]=a[f],c[1]=a[f+1],c[2]=a[f+2],c[3]=a[f+3],d(c,c,k),a[f]=c[0],a[f+1]=c[1],a[f+2]=c[2],a[f+3]=c[3];return a}}()},function(b,a,d){function f(){var c=new A.ARRAY_TYPE(3);
return A.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function g(c){var a=c[0],e=c[1];c=c[2];return Math.sqrt(a*a+e*e+c*c)}function h(c,a,e){var b=new A.ARRAY_TYPE(3);return b[0]=c,b[1]=a,b[2]=e,b}function e(c,a,e){return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],c}function k(c,a,e){return c[0]=a[0]*e[0],c[1]=a[1]*e[1],c[2]=a[2]*e[2],c}function c(c,a,e){return c[0]=a[0]/e[0],c[1]=a[1]/e[1],c[2]=a[2]/e[2],c}function l(c,a){var e=a[0]-c[0],b=a[1]-c[1],l=a[2]-c[2];return Math.sqrt(e*e+b*b+l*
l)}function w(c,a){var e=a[0]-c[0],b=a[1]-c[1],l=a[2]-c[2];return e*e+b*b+l*l}function u(c){var a=c[0],e=c[1];c=c[2];return a*a+e*e+c*c}function v(c,a){var e=a[0],b=a[1],l=a[2],e=e*e+b*b+l*l;return 0<e&&(e=1/Math.sqrt(e),c[0]=a[0]*e,c[1]=a[1]*e,c[2]=a[2]*e),c}function m(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}Object.defineProperty(a,"__esModule",{value:!0});a.forEach=a.sqrLen=a.len=a.sqrDist=a.dist=a.div=a.mul=a.sub=void 0;a.create=f;a.clone=function(c){var a=new A.ARRAY_TYPE(3);return a[0]=c[0],
a[1]=c[1],a[2]=c[2],a};a.length=g;a.fromValues=h;a.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c};a.set=function(c,a,e,b){return c[0]=a,c[1]=e,c[2]=b,c};a.add=function(c,a,e){return c[0]=a[0]+e[0],c[1]=a[1]+e[1],c[2]=a[2]+e[2],c};a.subtract=e;a.multiply=k;a.divide=c;a.ceil=function(c,a){return c[0]=Math.ceil(a[0]),c[1]=Math.ceil(a[1]),c[2]=Math.ceil(a[2]),c};a.floor=function(c,a){return c[0]=Math.floor(a[0]),c[1]=Math.floor(a[1]),c[2]=Math.floor(a[2]),c};a.min=function(c,a,e){return c[0]=
Math.min(a[0],e[0]),c[1]=Math.min(a[1],e[1]),c[2]=Math.min(a[2],e[2]),c};a.max=function(c,a,e){return c[0]=Math.max(a[0],e[0]),c[1]=Math.max(a[1],e[1]),c[2]=Math.max(a[2],e[2]),c};a.round=function(c,a){return c[0]=Math.round(a[0]),c[1]=Math.round(a[1]),c[2]=Math.round(a[2]),c};a.scale=function(c,a,e){return c[0]=a[0]*e,c[1]=a[1]*e,c[2]=a[2]*e,c};a.scaleAndAdd=function(c,a,e,b){return c[0]=a[0]+e[0]*b,c[1]=a[1]+e[1]*b,c[2]=a[2]+e[2]*b,c};a.distance=l;a.squaredDistance=w;a.squaredLength=u;a.negate=
function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c};a.inverse=function(c,a){return c[0]=1/a[0],c[1]=1/a[1],c[2]=1/a[2],c};a.normalize=v;a.dot=m;a.cross=function(c,a,e){var b=a[0],l=a[1];a=a[2];var m=e[0],v=e[1];e=e[2];return c[0]=l*e-a*v,c[1]=a*m-b*e,c[2]=b*v-l*m,c};a.lerp=function(c,a,e,b){var l=a[0],m=a[1];a=a[2];return c[0]=l+b*(e[0]-l),c[1]=m+b*(e[1]-m),c[2]=a+b*(e[2]-a),c};a.hermite=function(c,a,e,b,l,m){var v=m*m,d=v*(2*m-3)+1,k=v*(m-2)+m,A=v*(m-1);m=v*(3-2*m);return c[0]=a[0]*d+e[0]*k+
b[0]*A+l[0]*m,c[1]=a[1]*d+e[1]*k+b[1]*A+l[1]*m,c[2]=a[2]*d+e[2]*k+b[2]*A+l[2]*m,c};a.bezier=function(c,a,e,b,l,m){var v=1-m,d=v*v,k=m*m,A=d*v,d=3*m*d,v=3*k*v;m*=k;return c[0]=a[0]*A+e[0]*d+b[0]*v+l[0]*m,c[1]=a[1]*A+e[1]*d+b[1]*v+l[1]*m,c[2]=a[2]*A+e[2]*d+b[2]*v+l[2]*m,c};a.random=function(c,a){a=a||1;var e=2*A.RANDOM()*Math.PI,b=2*A.RANDOM()-1,l=Math.sqrt(1-b*b)*a;return c[0]=Math.cos(e)*l,c[1]=Math.sin(e)*l,c[2]=b*a,c};a.transformMat4=function(c,a,e){var b=a[0],l=a[1];a=a[2];var m=e[3]*b+e[7]*l+
e[11]*a+e[15];return m=m||1,c[0]=(e[0]*b+e[4]*l+e[8]*a+e[12])/m,c[1]=(e[1]*b+e[5]*l+e[9]*a+e[13])/m,c[2]=(e[2]*b+e[6]*l+e[10]*a+e[14])/m,c};a.transformMat3=function(c,a,e){var b=a[0],l=a[1];a=a[2];return c[0]=b*e[0]+l*e[3]+a*e[6],c[1]=b*e[1]+l*e[4]+a*e[7],c[2]=b*e[2]+l*e[5]+a*e[8],c};a.transformQuat=function(c,a,e){var b=e[0],l=e[1],m=e[2],v=a[0],d=a[1];a=a[2];var k=l*a-m*d,A=m*v-b*a,f=b*d-l*v,w=l*f-m*A,m=m*k-b*f,b=b*A-l*k;e=2*e[3];return k*=e,A*=e,f*=e,w*=2,m*=2,b*=2,c[0]=v+k+w,c[1]=d+A+m,c[2]=a+
f+b,c};a.rotateX=function(c,a,e,b){var l=[],m=[];return l[0]=a[0]-e[0],l[1]=a[1]-e[1],l[2]=a[2]-e[2],m[0]=l[0],m[1]=l[1]*Math.cos(b)-l[2]*Math.sin(b),m[2]=l[1]*Math.sin(b)+l[2]*Math.cos(b),c[0]=m[0]+e[0],c[1]=m[1]+e[1],c[2]=m[2]+e[2],c};a.rotateY=function(c,a,e,b){var l=[],m=[];return l[0]=a[0]-e[0],l[1]=a[1]-e[1],l[2]=a[2]-e[2],m[0]=l[2]*Math.sin(b)+l[0]*Math.cos(b),m[1]=l[1],m[2]=l[2]*Math.cos(b)-l[0]*Math.sin(b),c[0]=m[0]+e[0],c[1]=m[1]+e[1],c[2]=m[2]+e[2],c};a.rotateZ=function(c,a,e,b){var l=
[],m=[];return l[0]=a[0]-e[0],l[1]=a[1]-e[1],l[2]=a[2]-e[2],m[0]=l[0]*Math.cos(b)-l[1]*Math.sin(b),m[1]=l[0]*Math.sin(b)+l[1]*Math.cos(b),m[2]=l[2],c[0]=m[0]+e[0],c[1]=m[1]+e[1],c[2]=m[2]+e[2],c};a.angle=function(c,a){var e=h(c[0],c[1],c[2]),b=h(a[0],a[1],a[2]);v(e,e);v(b,b);e=m(e,b);return 1<e?0:-1>e?Math.PI:Math.acos(e)};a.str=function(c){return"vec3("+c[0]+", "+c[1]+", "+c[2]+")"};a.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]};a.equals=function(c,a){var e=c[0],b=c[1],
l=c[2],m=a[0],v=a[1],d=a[2];return Math.abs(e-m)<=A.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(b-v)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(v))&&Math.abs(l-d)<=A.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))};var A=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a["default"]=c,a}(d(0));a.sub=e;a.mul=k;a.div=c;a.dist=l;a.sqrDist=w;a.len=g;a.sqrLen=u;a.forEach=function(){var c=f();return function(a,
e,b,l,m,v){var d=void 0,k=void 0;e||(e=3);b||(b=0);k=l?Math.min(l*e+b,a.length):a.length;for(d=b;d<k;d+=e)c[0]=a[d],c[1]=a[d+1],c[2]=a[d+2],m(c,c,v),a[d]=c[0],a[d+1]=c[1],a[d+2]=c[2];return a}}()},function(b,a,d){function f(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a["default"]=c,a}function g(){var c=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function h(c,a,e){e*=.5;var b=
Math.sin(e);return c[0]=b*a[0],c[1]=b*a[1],c[2]=b*a[2],c[3]=Math.cos(e),c}function e(c,a,e){var b=a[0],l=a[1],d=a[2];a=a[3];var v=e[0],k=e[1],f=e[2];e=e[3];return c[0]=b*e+a*v+l*f-d*k,c[1]=l*e+a*k+d*v-b*f,c[2]=d*e+a*f+b*k-l*v,c[3]=a*e-b*v-l*k-d*f,c}function k(c,a,e,b){var d=a[0],v=a[1],k=a[2];a=a[3];var f=e[0],w=e[1],u=e[2];e=e[3];var g=void 0,h=void 0,n=void 0,q=void 0,t=void 0;return 0>(h=d*f+v*w+k*u+a*e)&&(h=-h,f=-f,w=-w,u=-u,e=-e),1-h>l.EPSILON?(g=Math.acos(h),n=Math.sin(g),q=Math.sin((1-b)*g)/
n,t=Math.sin(b*g)/n):(q=1-b,t=b),c[0]=q*d+t*f,c[1]=q*v+t*w,c[2]=q*k+t*u,c[3]=q*a+t*e,c}function c(c,a){var e=a[0]+a[4]+a[8],b=void 0;if(0<e)b=Math.sqrt(e+1),c[3]=.5*b,b=.5/b,c[0]=(a[5]-a[7])*b,c[1]=(a[6]-a[2])*b,c[2]=(a[1]-a[3])*b;else{e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var l=(e+1)%3,d=(e+2)%3,b=Math.sqrt(a[3*e+e]-a[3*l+l]-a[3*d+d]+1);c[e]=.5*b;b=.5/b;c[3]=(a[3*l+d]-a[3*d+l])*b;c[l]=(a[3*l+e]+a[3*e+l])*b;c[d]=(a[3*d+e]+a[3*e+d])*b}return c}Object.defineProperty(a,"__esModule",{value:!0});a.setAxes=
a.sqlerp=a.rotationTo=a.equals=a.exactEquals=a.normalize=a.sqrLen=a.squaredLength=a.len=a.length=a.lerp=a.dot=a.scale=a.mul=a.add=a.set=a.copy=a.fromValues=a.clone=void 0;a.create=g;a.identity=function(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c};a.setAxisAngle=h;a.getAxisAngle=function(c,a){var e=2*Math.acos(a[3]),b=Math.sin(e/2);b>l.EPSILON?(c[0]=a[0]/b,c[1]=a[1]/b,c[2]=a[2]/b):(c[0]=1,c[1]=0,c[2]=0);return e};a.multiply=e;a.rotateX=function(c,a,e){e*=.5;var b=a[0],l=a[1],d=a[2];a=a[3];var v=Math.sin(e);
e=Math.cos(e);return c[0]=b*e+a*v,c[1]=l*e+d*v,c[2]=d*e-l*v,c[3]=a*e-b*v,c};a.rotateY=function(c,a,e){e*=.5;var b=a[0],l=a[1],d=a[2];a=a[3];var v=Math.sin(e);e=Math.cos(e);return c[0]=b*e-d*v,c[1]=l*e+a*v,c[2]=d*e+b*v,c[3]=a*e-l*v,c};a.rotateZ=function(c,a,e){e*=.5;var b=a[0],l=a[1],d=a[2];a=a[3];var v=Math.sin(e);e=Math.cos(e);return c[0]=b*e+l*v,c[1]=l*e-b*v,c[2]=d*e+a*v,c[3]=a*e-d*v,c};a.calculateW=function(c,a){var e=a[0],b=a[1],l=a[2];return c[0]=e,c[1]=b,c[2]=l,c[3]=Math.sqrt(Math.abs(1-e*e-
b*b-l*l)),c};a.slerp=k;a.random=function(c){var a=l.RANDOM(),e=l.RANDOM(),b=l.RANDOM(),d=Math.sqrt(1-a),a=Math.sqrt(a);return c[0]=d*Math.sin(2*Math.PI*e),c[1]=d*Math.cos(2*Math.PI*e),c[2]=a*Math.sin(2*Math.PI*b),c[3]=a*Math.cos(2*Math.PI*b),c};a.invert=function(c,a){var e=a[0],b=a[1],l=a[2],d=a[3],v=e*e+b*b+l*l+d*d,v=v?1/v:0;return c[0]=-e*v,c[1]=-b*v,c[2]=-l*v,c[3]=d*v,c};a.conjugate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=a[3],c};a.fromMat3=c;a.fromEuler=function(c,a,e,b){var l=
.5*Math.PI/180;a*=l;e*=l;b*=l;l=Math.sin(a);a=Math.cos(a);var d=Math.sin(e);e=Math.cos(e);var v=Math.sin(b);b=Math.cos(b);return c[0]=l*e*b-a*d*v,c[1]=a*d*b+l*e*v,c[2]=a*e*v-l*d*b,c[3]=a*e*b+l*d*v,c};a.str=function(c){return"quat("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"};var l=f(d(0)),w=f(d(5)),u=f(d(2));b=f(d(1));a.clone=b.clone;a.fromValues=b.fromValues;a.copy=b.copy;a.set=b.set;a.add=b.add;a.mul=e;a.scale=b.scale;a.dot=b.dot;a.lerp=b.lerp;d=a.length=b.length;d=(a.len=d,a.squaredLength=b.squaredLength);
var v=(a.sqrLen=d,a.normalize=b.normalize);a.exactEquals=b.exactEquals;a.equals=b.equals;a.rotationTo=function(){var c=u.create(),a=u.fromValues(1,0,0),e=u.fromValues(0,1,0);return function(b,l,d){var k=u.dot(l,d);return-.999999>k?(u.cross(c,a,l),1E-6>u.len(c)&&u.cross(c,e,l),u.normalize(c,c),h(b,c,Math.PI),b):.999999<k?(b[0]=0,b[1]=0,b[2]=0,b[3]=1,b):(u.cross(c,l,d),b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=1+k,v(b,b))}}();a.sqlerp=function(){var c=g(),a=g();return function(e,b,l,d,v,f){return k(c,b,v,
f),k(a,l,d,f),k(e,c,a,2*f*(1-f)),e}}();a.setAxes=function(){var a=w.create();return function(e,b,l,d){return a[0]=l[0],a[3]=l[1],a[6]=l[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=-b[0],a[5]=-b[1],a[8]=-b[2],v(e,c(e,a))}}()},function(b,a,d){function f(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function g(c,a,e){var b=a[0],d=a[1],m=a[2],k=a[3],f=a[4],p=a[5],z=a[6],H=a[7],y=a[8],h=a[9],D=a[10],n=a[11],q=a[12],t=a[13],B=
a[14];a=a[15];var E=e[0],G=e[1],I=e[2],F=e[3];return c[0]=E*b+G*f+I*y+F*q,c[1]=E*d+G*p+I*h+F*t,c[2]=E*m+G*z+I*D+F*B,c[3]=E*k+G*H+I*n+F*a,E=e[4],G=e[5],I=e[6],F=e[7],c[4]=E*b+G*f+I*y+F*q,c[5]=E*d+G*p+I*h+F*t,c[6]=E*m+G*z+I*D+F*B,c[7]=E*k+G*H+I*n+F*a,E=e[8],G=e[9],I=e[10],F=e[11],c[8]=E*b+G*f+I*y+F*q,c[9]=E*d+G*p+I*h+F*t,c[10]=E*m+G*z+I*D+F*B,c[11]=E*k+G*H+I*n+F*a,E=e[12],G=e[13],I=e[14],F=e[15],c[12]=E*b+G*f+I*y+F*q,c[13]=E*d+G*p+I*h+F*t,c[14]=E*m+G*z+I*D+F*B,c[15]=E*k+G*H+I*n+F*a,c}function h(c,a,
e){var b=a[0],d=a[1],m=a[2],k=a[3],f=b+b,p=d+d,z=m+m;a=b*f;var H=b*p,b=b*z,y=d*p,d=d*z,m=m*z,f=k*f,p=k*p,k=k*z;return c[0]=1-(y+m),c[1]=H+k,c[2]=b-p,c[3]=0,c[4]=H-k,c[5]=1-(a+m),c[6]=d+f,c[7]=0,c[8]=b+p,c[9]=d-f,c[10]=1-(a+y),c[11]=0,c[12]=e[0],c[13]=e[1],c[14]=e[2],c[15]=1,c}function e(c,a,e){return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],c[3]=a[3]-e[3],c[4]=a[4]-e[4],c[5]=a[5]-e[5],c[6]=a[6]-e[6],c[7]=a[7]-e[7],c[8]=a[8]-e[8],c[9]=a[9]-e[9],c[10]=a[10]-e[10],c[11]=a[11]-e[11],c[12]=a[12]-e[12],
c[13]=a[13]-e[13],c[14]=a[14]-e[14],c[15]=a[15]-e[15],c}Object.defineProperty(a,"__esModule",{value:!0});a.sub=a.mul=void 0;a.create=function(){var c=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0);return c[0]=1,c[5]=1,c[10]=1,c[15]=1,c};a.clone=function(c){var a=new k.ARRAY_TYPE(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=
c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a};a.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c};a.fromValues=function(c,a,e,b,d,m,f,x,p,z,H,y,g,h,n,q){var t=new k.ARRAY_TYPE(16);return t[0]=c,t[1]=a,t[2]=e,t[3]=b,t[4]=d,t[5]=m,t[6]=f,t[7]=x,t[8]=p,t[9]=z,t[10]=H,t[11]=y,t[12]=g,t[13]=h,t[14]=n,t[15]=q,t};a.set=function(c,a,e,b,d,m,k,f,
p,z,g,y,h,D,n,t,q){return c[0]=a,c[1]=e,c[2]=b,c[3]=d,c[4]=m,c[5]=k,c[6]=f,c[7]=p,c[8]=z,c[9]=g,c[10]=y,c[11]=h,c[12]=D,c[13]=n,c[14]=t,c[15]=q,c};a.identity=f;a.transpose=function(c,a){if(c===a){var e=a[1],b=a[2],d=a[3],m=a[6],k=a[7],f=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=e;c[6]=a[9];c[7]=a[13];c[8]=b;c[9]=m;c[11]=a[14];c[12]=d;c[13]=k;c[14]=f}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],
c[14]=a[11],c[15]=a[15];return c};a.invert=function(c,a){var e=a[0],b=a[1],d=a[2],m=a[3],k=a[4],f=a[5],p=a[6],z=a[7],g=a[8],y=a[9],h=a[10],D=a[11],n=a[12],t=a[13],q=a[14],B=a[15],E=e*f-b*k,G=e*p-d*k,I=e*z-m*k,F=b*p-d*f,L=b*z-m*f,Q=d*z-m*p,N=g*t-y*n,T=g*q-h*n,aa=g*B-D*n,W=y*q-h*t,Y=y*B-D*t,ga=h*B-D*q,U=E*ga-G*Y+I*W+F*aa-L*T+Q*N;return U?(U=1/U,c[0]=(f*ga-p*Y+z*W)*U,c[1]=(d*Y-b*ga-m*W)*U,c[2]=(t*Q-q*L+B*F)*U,c[3]=(h*L-y*Q-D*F)*U,c[4]=(p*aa-k*ga-z*T)*U,c[5]=(e*ga-d*aa+m*T)*U,c[6]=(q*I-n*Q-B*G)*U,c[7]=
(g*Q-h*I+D*G)*U,c[8]=(k*Y-f*aa+z*N)*U,c[9]=(b*aa-e*Y-m*N)*U,c[10]=(n*L-t*I+B*E)*U,c[11]=(y*I-g*L-D*E)*U,c[12]=(f*T-k*W-p*N)*U,c[13]=(e*W-b*T+d*N)*U,c[14]=(t*G-n*F-q*E)*U,c[15]=(g*F-y*G+h*E)*U,c):null};a.adjoint=function(c,a){var e=a[0],b=a[1],d=a[2],m=a[3],k=a[4],f=a[5],p=a[6],z=a[7],g=a[8],y=a[9],h=a[10],D=a[11],n=a[12],t=a[13],q=a[14],B=a[15];return c[0]=f*(h*B-D*q)-y*(p*B-z*q)+t*(p*D-z*h),c[1]=-(b*(h*B-D*q)-y*(d*B-m*q)+t*(d*D-m*h)),c[2]=b*(p*B-z*q)-f*(d*B-m*q)+t*(d*z-m*p),c[3]=-(b*(p*D-z*h)-f*
(d*D-m*h)+y*(d*z-m*p)),c[4]=-(k*(h*B-D*q)-g*(p*B-z*q)+n*(p*D-z*h)),c[5]=e*(h*B-D*q)-g*(d*B-m*q)+n*(d*D-m*h),c[6]=-(e*(p*B-z*q)-k*(d*B-m*q)+n*(d*z-m*p)),c[7]=e*(p*D-z*h)-k*(d*D-m*h)+g*(d*z-m*p),c[8]=k*(y*B-D*t)-g*(f*B-z*t)+n*(f*D-z*y),c[9]=-(e*(y*B-D*t)-g*(b*B-m*t)+n*(b*D-m*y)),c[10]=e*(f*B-z*t)-k*(b*B-m*t)+n*(b*z-m*f),c[11]=-(e*(f*D-z*y)-k*(b*D-m*y)+g*(b*z-m*f)),c[12]=-(k*(y*q-h*t)-g*(f*q-p*t)+n*(f*h-p*y)),c[13]=e*(y*q-h*t)-g*(b*q-d*t)+n*(b*h-d*y),c[14]=-(e*(f*q-p*t)-k*(b*q-d*t)+n*(b*p-d*f)),c[15]=
e*(f*h-p*y)-k*(b*h-d*y)+g*(b*p-d*f),c};a.determinant=function(c){var a=c[0],e=c[1],b=c[2],d=c[3],k=c[4],f=c[5],x=c[6],p=c[7],z=c[8],g=c[9],h=c[10],n=c[11],D=c[12],t=c[13],q=c[14];c=c[15];return(a*f-e*k)*(h*c-n*q)-(a*x-b*k)*(g*c-n*t)+(a*p-d*k)*(g*q-h*t)+(e*x-b*f)*(z*c-n*D)-(e*p-d*f)*(z*q-h*D)+(b*p-d*x)*(z*t-g*D)};a.multiply=g;a.translate=function(c,a,e){var b=e[0],d=e[1];e=e[2];var k=void 0,f=void 0,x=void 0,p=void 0,z=void 0,g=void 0,h=void 0,n=void 0,D=void 0,t=void 0,q=void 0,K=void 0;a===c?(c[12]=
a[0]*b+a[4]*d+a[8]*e+a[12],c[13]=a[1]*b+a[5]*d+a[9]*e+a[13],c[14]=a[2]*b+a[6]*d+a[10]*e+a[14],c[15]=a[3]*b+a[7]*d+a[11]*e+a[15]):(k=a[0],f=a[1],x=a[2],p=a[3],z=a[4],g=a[5],h=a[6],n=a[7],D=a[8],t=a[9],q=a[10],K=a[11],c[0]=k,c[1]=f,c[2]=x,c[3]=p,c[4]=z,c[5]=g,c[6]=h,c[7]=n,c[8]=D,c[9]=t,c[10]=q,c[11]=K,c[12]=k*b+z*d+D*e+a[12],c[13]=f*b+g*d+t*e+a[13],c[14]=x*b+h*d+q*e+a[14],c[15]=p*b+n*d+K*e+a[15]);return c};a.scale=function(c,a,e){var b=e[0],d=e[1];e=e[2];return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,
c[3]=a[3]*b,c[4]=a[4]*d,c[5]=a[5]*d,c[6]=a[6]*d,c[7]=a[7]*d,c[8]=a[8]*e,c[9]=a[9]*e,c[10]=a[10]*e,c[11]=a[11]*e,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c};a.rotate=function(c,a,e,b){var d=b[0],m=b[1];b=b[2];var f=Math.sqrt(d*d+m*m+b*b),x=void 0,p=void 0,z=void 0,g=void 0,h=void 0,n=void 0,t=void 0,q=void 0,J=void 0,K=void 0,B=void 0,E=void 0,G=void 0,I=void 0,F=void 0,L=void 0,Q=void 0,N=void 0,T=void 0,aa=void 0,W=void 0,Y=void 0,p=x=void 0;if(f<k.EPSILON)return null;d*=f=1/f;m*=f;b*=f;x=
Math.sin(e);p=Math.cos(e);z=1-p;g=a[0];h=a[1];n=a[2];t=a[3];q=a[4];J=a[5];K=a[6];B=a[7];E=a[8];G=a[9];I=a[10];F=a[11];L=d*d*z+p;Q=m*d*z+b*x;N=b*d*z-m*x;T=d*m*z-b*x;aa=m*m*z+p;W=b*m*z+d*x;Y=d*b*z+m*x;x=m*b*z-d*x;p=b*b*z+p;c[0]=g*L+q*Q+E*N;c[1]=h*L+J*Q+G*N;c[2]=n*L+K*Q+I*N;c[3]=t*L+B*Q+F*N;c[4]=g*T+q*aa+E*W;c[5]=h*T+J*aa+G*W;c[6]=n*T+K*aa+I*W;c[7]=t*T+B*aa+F*W;c[8]=g*Y+q*x+E*p;c[9]=h*Y+J*x+G*p;c[10]=n*Y+K*x+I*p;c[11]=t*Y+B*x+F*p;a!==c&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c};a.rotateX=
function(c,a,e){var b=Math.sin(e);e=Math.cos(e);var d=a[4],k=a[5],f=a[6],x=a[7],p=a[8],z=a[9],g=a[10],h=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c[4]=d*e+p*b,c[5]=k*e+z*b,c[6]=f*e+g*b,c[7]=x*e+h*b,c[8]=p*e-d*b,c[9]=z*e-k*b,c[10]=g*e-f*b,c[11]=h*e-x*b,c};a.rotateY=function(c,a,e){var b=Math.sin(e);e=Math.cos(e);var d=a[0],k=a[1],f=a[2],x=a[3],p=a[8],z=a[9],g=a[10],h=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],
c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c[0]=d*e-p*b,c[1]=k*e-z*b,c[2]=f*e-g*b,c[3]=x*e-h*b,c[8]=d*b+p*e,c[9]=k*b+z*e,c[10]=f*b+g*e,c[11]=x*b+h*e,c};a.rotateZ=function(c,a,e){var b=Math.sin(e);e=Math.cos(e);var d=a[0],k=a[1],f=a[2],x=a[3],p=a[4],g=a[5],h=a[6],y=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c[0]=d*e+p*b,c[1]=k*e+g*b,c[2]=f*e+h*b,c[3]=x*e+y*b,c[4]=p*e-d*b,c[5]=g*e-k*b,c[6]=h*e-f*b,c[7]=y*e-x*b,c};a.fromTranslation=
function(c,a){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=1,c};a.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c};a.fromRotation=function(c,a,e){var b=e[0],d=e[1];e=e[2];var m=Math.sqrt(b*b+d*d+e*e),f=void 0,x=void 0,p=void 0;return m<k.EPSILON?null:(b*=m=1/m,d*=m,e*=m,f=Math.sin(a),x=Math.cos(a),p=
1-x,c[0]=b*b*p+x,c[1]=d*b*p+e*f,c[2]=e*b*p-d*f,c[3]=0,c[4]=b*d*p-e*f,c[5]=d*d*p+x,c[6]=e*d*p+b*f,c[7]=0,c[8]=b*e*p+d*f,c[9]=d*e*p-b*f,c[10]=e*e*p+x,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)};a.fromXRotation=function(c,a){var e=Math.sin(a),b=Math.cos(a);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=b,c[6]=e,c[7]=0,c[8]=0,c[9]=-e,c[10]=b,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c};a.fromYRotation=function(c,a){var e=Math.sin(a),b=Math.cos(a);return c[0]=b,c[1]=0,c[2]=-e,c[3]=0,c[4]=0,c[5]=1,c[6]=0,
c[7]=0,c[8]=e,c[9]=0,c[10]=b,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c};a.fromZRotation=function(c,a){var e=Math.sin(a),b=Math.cos(a);return c[0]=b,c[1]=e,c[2]=0,c[3]=0,c[4]=-e,c[5]=b,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c};a.fromRotationTranslation=h;a.fromQuat2=function(c,a){var e=new k.ARRAY_TYPE(3),b=-a[0],d=-a[1],m=-a[2],f=a[3],x=a[4],p=a[5],g=a[6],H=a[7],y=b*b+d*d+m*m+f*f;0<y?(e[0]=2*(x*f+H*b+p*m-g*d)/y,e[1]=2*(p*f+H*d+g*b-x*m)/y,e[2]=2*(g*f+H*m+x*d-p*
b)/y):(e[0]=2*(x*f+H*b+p*m-g*d),e[1]=2*(p*f+H*d+g*b-x*m),e[2]=2*(g*f+H*m+x*d-p*b));return h(c,a,e),c};a.getTranslation=function(c,a){return c[0]=a[12],c[1]=a[13],c[2]=a[14],c};a.getScaling=function(c,a){var e=a[0],b=a[1],d=a[2],k=a[4],f=a[5],x=a[6],p=a[8],g=a[9],h=a[10];return c[0]=Math.sqrt(e*e+b*b+d*d),c[1]=Math.sqrt(k*k+f*f+x*x),c[2]=Math.sqrt(p*p+g*g+h*h),c};a.getRotation=function(c,a){var e=a[0]+a[5]+a[10],b=0;0<e?(b=2*Math.sqrt(e+1),c[3]=.25*b,c[0]=(a[6]-a[9])/b,c[1]=(a[8]-a[2])/b,c[2]=(a[1]-
a[4])/b):a[0]>a[5]&&a[0]>a[10]?(b=2*Math.sqrt(1+a[0]-a[5]-a[10]),c[3]=(a[6]-a[9])/b,c[0]=.25*b,c[1]=(a[1]+a[4])/b,c[2]=(a[8]+a[2])/b):a[5]>a[10]?(b=2*Math.sqrt(1+a[5]-a[0]-a[10]),c[3]=(a[8]-a[2])/b,c[0]=(a[1]+a[4])/b,c[1]=.25*b,c[2]=(a[6]+a[9])/b):(b=2*Math.sqrt(1+a[10]-a[0]-a[5]),c[3]=(a[1]-a[4])/b,c[0]=(a[8]+a[2])/b,c[1]=(a[6]+a[9])/b,c[2]=.25*b);return c};a.fromRotationTranslationScale=function(a,e,b,d){var k=e[0],m=e[1],f=e[2],x=e[3],p=k+k,g=m+m,h=f+f;e=k*p;var y=k*g,k=k*h,n=m*g,m=m*h,f=f*h,p=
x*p,g=x*g,x=x*h,h=d[0],t=d[1];d=d[2];return a[0]=(1-(n+f))*h,a[1]=(y+x)*h,a[2]=(k-g)*h,a[3]=0,a[4]=(y-x)*t,a[5]=(1-(e+f))*t,a[6]=(m+p)*t,a[7]=0,a[8]=(k+g)*d,a[9]=(m-p)*d,a[10]=(1-(e+n))*d,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a};a.fromRotationTranslationScaleOrigin=function(a,e,b,d,k){var m=e[0],f=e[1],x=e[2],p=e[3],g=m+m,h=f+f,y=x+x;e=m*g;var n=m*h,t=m*y,m=f*h,f=f*y,q=x*y,x=p*g,h=p*h,J=p*y,K=d[0],B=d[1],y=d[2];d=k[0];p=k[1];k=k[2];var g=(1-(m+q))*K,E=(n+J)*K,K=(t-h)*K,n=(n-J)*B,q=(1-(e+
q))*B,B=(f+x)*B,t=(t+h)*y,f=(f-x)*y;e=(1-(e+m))*y;return a[0]=g,a[1]=E,a[2]=K,a[3]=0,a[4]=n,a[5]=q,a[6]=B,a[7]=0,a[8]=t,a[9]=f,a[10]=e,a[11]=0,a[12]=b[0]+d-(g*d+n*p+t*k),a[13]=b[1]+p-(E*d+q*p+f*k),a[14]=b[2]+k-(K*d+B*p+e*k),a[15]=1,a};a.fromQuat=function(a,e){var b=e[0],d=e[1],k=e[2],m=e[3],f=b+b,x=d+d,p=k+k,b=b*f,g=d*f,d=d*x,h=k*f,y=k*x,k=k*p,f=m*f,x=m*x,m=m*p;return a[0]=1-d-k,a[1]=g+m,a[2]=h-x,a[3]=0,a[4]=g-m,a[5]=1-b-k,a[6]=y+f,a[7]=0,a[8]=h+x,a[9]=y-f,a[10]=1-b-d,a[11]=0,a[12]=0,a[13]=0,a[14]=
0,a[15]=1,a};a.frustum=function(a,e,b,d,k,m,f){var x=1/(b-e),p=1/(k-d),g=1/(m-f);return a[0]=2*m*x,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*m*p,a[6]=0,a[7]=0,a[8]=(b+e)*x,a[9]=(k+d)*p,a[10]=(f+m)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=f*m*2*g,a[15]=0,a};a.perspective=function(a,e,b,d,k){e=1/Math.tan(e/2);var m=void 0;a[0]=e/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=k&&k!==1/0?(m=1/(d-k),a[10]=(k+d)*m,a[14]=2*k*d*m):(a[10]=-1,a[14]=-2*d);return a};
a.perspectiveFromFieldOfView=function(a,e,b,d){var k=Math.tan(e.upDegrees*Math.PI/180),m=Math.tan(e.downDegrees*Math.PI/180),f=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);var x=2/(f+e),p=2/(k+m);return a[0]=x,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=p,a[6]=0,a[7]=0,a[8]=-(f-e)*x*.5,a[9]=(k-m)*p*.5,a[10]=d/(b-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*b/(b-d),a[15]=0,a};a.ortho=function(a,e,b,d,k,m,f){var x=1/(e-b),p=1/(d-k),g=1/(m-f);return a[0]=-2*x,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=
-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(e+b)*x,a[13]=(k+d)*p,a[14]=(f+m)*g,a[15]=1,a};a.lookAt=function(a,e,b,d){var v=void 0,m=void 0,A=void 0,x=void 0,p=void 0,g=void 0,h=void 0,y=void 0,n=void 0,q=void 0,S=e[0],J=e[1];e=e[2];A=d[0];x=d[1];d=d[2];h=b[0];y=b[1];b=b[2];if(Math.abs(S-h)<k.EPSILON&&Math.abs(J-y)<k.EPSILON&&Math.abs(e-b)<k.EPSILON)return f(a);h=S-h;y=J-y;n=e-b;q=1/Math.sqrt(h*h+y*y+n*n);v=x*(n*=q)-d*(y*=q);m=d*(h*=q)-A*n;A=A*y-x*h;(q=Math.sqrt(v*v+m*m+A*A))?(v*=q=1/
q,m*=q,A*=q):(v=0,m=0,A=0);x=y*A-n*m;p=n*v-h*A;g=h*m-y*v;(q=Math.sqrt(x*x+p*p+g*g))?(x*=q=1/q,p*=q,g*=q):(x=0,p=0,g=0);return a[0]=v,a[1]=x,a[2]=h,a[3]=0,a[4]=m,a[5]=p,a[6]=y,a[7]=0,a[8]=A,a[9]=g,a[10]=n,a[11]=0,a[12]=-(v*S+m*J+A*e),a[13]=-(x*S+p*J+g*e),a[14]=-(h*S+y*J+n*e),a[15]=1,a};a.targetTo=function(a,e,b,d){var k=e[0],m=e[1];e=e[2];var f=d[0],x=d[1],p=d[2];d=k-b[0];var g=m-b[1];b=e-b[2];var h=d*d+g*g+b*b;0<h&&(h=1/Math.sqrt(h),d*=h,g*=h,b*=h);var y=x*b-p*g,p=p*d-f*b,f=f*g-x*d;0<(h=y*y+p*p+f*
f)&&(h=1/Math.sqrt(h),y*=h,p*=h,f*=h);return a[0]=y,a[1]=p,a[2]=f,a[3]=0,a[4]=g*f-b*p,a[5]=b*y-d*f,a[6]=d*p-g*y,a[7]=0,a[8]=d,a[9]=g,a[10]=b,a[11]=0,a[12]=k,a[13]=m,a[14]=e,a[15]=1,a};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+
Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,e,b){return a[0]=e[0]+b[0],a[1]=e[1]+b[1],a[2]=e[2]+b[2],a[3]=e[3]+b[3],a[4]=e[4]+b[4],a[5]=e[5]+b[5],a[6]=e[6]+b[6],a[7]=e[7]+b[7],a[8]=e[8]+b[8],a[9]=e[9]+b[9],a[10]=e[10]+b[10],a[11]=e[11]+b[11],a[12]=e[12]+b[12],a[13]=e[13]+b[13],a[14]=e[14]+b[14],a[15]=e[15]+b[15],a};a.subtract=e;a.multiplyScalar=
function(a,e,b){return a[0]=e[0]*b,a[1]=e[1]*b,a[2]=e[2]*b,a[3]=e[3]*b,a[4]=e[4]*b,a[5]=e[5]*b,a[6]=e[6]*b,a[7]=e[7]*b,a[8]=e[8]*b,a[9]=e[9]*b,a[10]=e[10]*b,a[11]=e[11]*b,a[12]=e[12]*b,a[13]=e[13]*b,a[14]=e[14]*b,a[15]=e[15]*b,a};a.multiplyScalarAndAdd=function(a,e,b,d){return a[0]=e[0]+b[0]*d,a[1]=e[1]+b[1]*d,a[2]=e[2]+b[2]*d,a[3]=e[3]+b[3]*d,a[4]=e[4]+b[4]*d,a[5]=e[5]+b[5]*d,a[6]=e[6]+b[6]*d,a[7]=e[7]+b[7]*d,a[8]=e[8]+b[8]*d,a[9]=e[9]+b[9]*d,a[10]=e[10]+b[10]*d,a[11]=e[11]+b[11]*d,a[12]=e[12]+b[12]*
d,a[13]=e[13]+b[13]*d,a[14]=e[14]+b[14]*d,a[15]=e[15]+b[15]*d,a};a.exactEquals=function(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]};a.equals=function(a,e){var b=a[0],d=a[1],f=a[2],m=a[3],A=a[4],g=a[5],p=a[6],h=a[7],n=a[8],y=a[9],q=a[10],t=a[11],S=a[12],J=a[13],K=a[14],B=a[15],E=e[0],G=e[1],I=e[2],F=e[3],L=e[4],Q=
e[5],N=e[6],T=e[7],aa=e[8],W=e[9],Y=e[10],ga=e[11],U=e[12],Sa=e[13],Ka=e[14],O=e[15];return Math.abs(b-E)<=k.EPSILON*Math.max(1,Math.abs(b),Math.abs(E))&&Math.abs(d-G)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(G))&&Math.abs(f-I)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-F)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(A-L)<=k.EPSILON*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(g-Q)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(Q))&&Math.abs(p-N)<=k.EPSILON*Math.max(1,Math.abs(p),
Math.abs(N))&&Math.abs(h-T)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(n-aa)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(aa))&&Math.abs(y-W)<=k.EPSILON*Math.max(1,Math.abs(y),Math.abs(W))&&Math.abs(q-Y)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(Y))&&Math.abs(t-ga)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(ga))&&Math.abs(S-U)<=k.EPSILON*Math.max(1,Math.abs(S),Math.abs(U))&&Math.abs(J-Sa)<=k.EPSILON*Math.max(1,Math.abs(J),Math.abs(Sa))&&Math.abs(K-Ka)<=k.EPSILON*Math.max(1,Math.abs(K),
Math.abs(Ka))&&Math.abs(B-O)<=k.EPSILON*Math.max(1,Math.abs(B),Math.abs(O))};var k=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);return e["default"]=a,e}(d(0));a.mul=g;a.sub=e},function(b,a,d){function f(a,b,c){var d=b[0],g=b[1],h=b[2],v=b[3],m=b[4],A=b[5],x=b[6],p=b[7];b=b[8];var z=c[0],n=c[1],y=c[2],q=c[3],t=c[4],S=c[5],J=c[6],K=c[7];c=c[8];return a[0]=z*d+n*v+y*x,a[1]=z*g+n*m+y*p,a[2]=z*h+n*A+y*b,a[3]=q*d+t*v+S*
x,a[4]=q*g+t*m+S*p,a[5]=q*h+t*A+S*b,a[6]=J*d+K*v+c*x,a[7]=J*g+K*m+c*p,a[8]=J*h+K*A+c*b,a}function g(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a}Object.defineProperty(a,"__esModule",{value:!0});a.sub=a.mul=void 0;a.create=function(){var a=new h.ARRAY_TYPE(9);h.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};a.fromMat4=function(a,b){return a[0]=
b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a};a.clone=function(a){var b=new h.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b};a.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};a.fromValues=function(a,b,c,d,f,g,v,m,A){var x=new h.ARRAY_TYPE(9);return x[0]=a,x[1]=b,x[2]=c,x[3]=d,x[4]=f,x[5]=g,x[6]=v,x[7]=m,x[8]=A,x};a.set=
function(a,b,c,d,f,g,v,m,A,h){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a[4]=g,a[5]=v,a[6]=m,a[7]=A,a[8]=h,a};a.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],f=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=f}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],v=b[4],m=b[5],A=b[6],h=b[7],p=
b[8],z=p*v-m*h,n=-p*g+m*A,y=h*g-v*A,q=c*z+d*n+f*y;return q?(q=1/q,a[0]=z*q,a[1]=(-p*d+f*h)*q,a[2]=(m*d-f*v)*q,a[3]=n*q,a[4]=(p*c-f*A)*q,a[5]=(-m*c+f*g)*q,a[6]=y*q,a[7]=(-h*c+d*A)*q,a[8]=(v*c-d*g)*q,a):null};a.adjoint=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],v=b[4],m=b[5],A=b[6],h=b[7],p=b[8];return a[0]=v*p-m*h,a[1]=f*h-d*p,a[2]=d*m-f*v,a[3]=m*A-g*p,a[4]=c*p-f*A,a[5]=f*g-c*m,a[6]=g*h-v*A,a[7]=d*A-c*h,a[8]=c*v-d*g,a};a.determinant=function(a){var b=a[3],c=a[4],d=a[5],f=a[6],g=a[7],v=a[8];return a[0]*
(v*c-d*g)+a[1]*(-v*b+d*f)+a[2]*(g*b-c*f)};a.multiply=f;a.translate=function(a,b,c){var d=b[0],f=b[1],g=b[2],v=b[3],m=b[4],A=b[5],h=b[6],p=b[7];b=b[8];var z=c[0];c=c[1];return a[0]=d,a[1]=f,a[2]=g,a[3]=v,a[4]=m,a[5]=A,a[6]=z*d+c*v+h,a[7]=z*f+c*m+p,a[8]=z*g+c*A+b,a};a.rotate=function(a,b,c){var d=b[0],f=b[1],g=b[2],v=b[3],m=b[4],A=b[5],h=b[6],p=b[7];b=b[8];var z=Math.sin(c);c=Math.cos(c);return a[0]=c*d+z*v,a[1]=c*f+z*m,a[2]=c*g+z*A,a[3]=c*v-z*d,a[4]=c*m-z*f,a[5]=c*A-z*g,a[6]=h,a[7]=p,a[8]=b,a};a.scale=
function(a,b,c){var d=c[0];c=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=c*b[3],a[4]=c*b[4],a[5]=c*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};a.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a};a.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};a.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};a.fromMat2d=
function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a};a.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],v=c+c,m=d+d,A=f+f,c=c*v,h=d*v,d=d*m,p=f*v,z=f*m,f=f*A,v=g*v,m=g*m,g=g*A;return a[0]=1-d-f,a[3]=h-g,a[6]=p+m,a[1]=h+g,a[4]=1-c-f,a[7]=z-v,a[2]=p-m,a[5]=z+v,a[8]=1-c-d,a};a.normalFromMat4=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],v=b[4],m=b[5],A=b[6],h=b[7],p=b[8],z=b[9],n=b[10],y=b[11],q=b[12],t=b[13],S=b[14],J=b[15],K=c*m-d*v,B=c*A-f*
v,E=c*h-g*v,G=d*A-f*m,I=d*h-g*m,F=f*h-g*A,L=p*t-z*q,Q=p*S-n*q,p=p*J-y*q,N=z*S-n*t,z=z*J-y*t,n=n*J-y*S;return(y=K*n-B*z+E*N+G*p-I*Q+F*L)?(y=1/y,a[0]=(m*n-A*z+h*N)*y,a[1]=(A*p-v*n-h*Q)*y,a[2]=(v*z-m*p+h*L)*y,a[3]=(f*z-d*n-g*N)*y,a[4]=(c*n-f*p+g*Q)*y,a[5]=(d*p-c*z-g*L)*y,a[6]=(t*F-S*I+J*G)*y,a[7]=(S*E-q*F-J*B)*y,a[8]=(q*I-t*E+J*K)*y,a):null};a.projection=function(a,b,c){return a[0]=2/b,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/c,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a};a.subtract=g;a.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*
c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a};a.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],v=
a[4],m=a[5],A=a[6],x=a[7],p=a[8],z=b[0],n=b[1],y=b[2],q=b[3],t=b[4],S=b[5],J=b[6],K=b[7],B=b[8];return Math.abs(c-z)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-n)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(f-y)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(g-q)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(v-t)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(t))&&Math.abs(m-S)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(A-J)<=h.EPSILON*Math.max(1,
Math.abs(A),Math.abs(J))&&Math.abs(x-K)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(K))&&Math.abs(p-B)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(B))};var h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(d(0));a.mul=f;a.sub=g},function(b,a,d){function f(){var a=new u.ARRAY_TYPE(2);return u.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function g(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function h(a,
b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function e(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function k(a,b){var c=b[0]-a[0],e=b[1]-a[1];return Math.sqrt(c*c+e*e)}function c(a,b){var c=b[0]-a[0],e=b[1]-a[1];return c*c+e*e}function l(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function w(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.forEach=a.sqrLen=a.sqrDist=a.dist=a.div=a.mul=a.sub=a.len=void 0;a.create=f;a.clone=function(a){var b=new u.ARRAY_TYPE(2);
return b[0]=a[0],b[1]=a[1],b};a.fromValues=function(a,b){var c=new u.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};a.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};a.set=function(a,b,c){return a[0]=b,a[1]=c,a};a.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a};a.subtract=g;a.multiply=h;a.divide=e;a.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};a.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};a.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),
a[1]=Math.min(b[1],c[1]),a};a.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};a.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};a.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};a.scaleAndAdd=function(a,b,c,e){return a[0]=b[0]+c[0]*e,a[1]=b[1]+c[1]*e,a};a.distance=k;a.squaredDistance=c;a.length=l;a.squaredLength=w;a.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};a.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};a.normalize=
function(a,b){var c=b[0],e=b[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};a.lerp=function(a,b,c,e){var d=b[0];b=b[1];return a[0]=d+e*(c[0]-d),a[1]=b+e*(c[1]-b),a};a.random=function(a,b){b=b||1;var c=2*u.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};a.transformMat2=function(a,b,c){var e=b[0];b=b[1];return a[0]=c[0]*e+c[2]*b,a[1]=c[1]*
e+c[3]*b,a};a.transformMat2d=function(a,b,c){var e=b[0];b=b[1];return a[0]=c[0]*e+c[2]*b+c[4],a[1]=c[1]*e+c[3]*b+c[5],a};a.transformMat3=function(a,b,c){var e=b[0];b=b[1];return a[0]=c[0]*e+c[3]*b+c[6],a[1]=c[1]*e+c[4]*b+c[7],a};a.transformMat4=function(a,b,c){var e=b[0];b=b[1];return a[0]=c[0]*e+c[4]*b+c[12],a[1]=c[1]*e+c[5]*b+c[13],a};a.rotate=function(a,b,c,e){var d=b[0]-c[0];b=b[1]-c[1];var f=Math.sin(e);e=Math.cos(e);return a[0]=d*e-b*f+c[0],a[1]=d*f+b*e+c[1],a};a.angle=function(a,b){var c=a[0],
e=a[1],d=b[0],f=b[1],k=c*c+e*e;0<k&&(k=1/Math.sqrt(k));var g=d*d+f*f;0<g&&(g=1/Math.sqrt(g));c=(c*d+e*f)*k*g;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var c=a[0],e=a[1],d=b[0],f=b[1];return Math.abs(c-d)<=u.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(e-f)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))};var u=function(a){if(a&&a.__esModule)return a;var b={};
if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(d(0));a.len=l;a.sub=g;a.mul=h;a.div=e;a.dist=k;a.sqrDist=c;a.sqrLen=w;a.forEach=function(){var a=f();return function(b,c,e,d,f,k){var g=void 0,l=void 0;c||(c=2);e||(e=0);l=d?Math.min(d*c+e,b.length):b.length;for(g=e;g<l;g+=c)a[0]=b[g],a[1]=b[g+1],f(a,a,k),b[g]=a[0],b[g+1]=a[1];return b}}()},function(b,a,d){function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);return b["default"]=a,b}function g(a,b,c){var e=.5*c[0],d=.5*c[1];c=.5*c[2];var f=b[0],k=b[1],l=b[2];b=b[3];return a[0]=f,a[1]=k,a[2]=l,a[3]=b,a[4]=e*b+d*l-c*k,a[5]=d*b+c*f-e*l,a[6]=c*b+e*k-d*f,a[7]=-e*f-d*k-c*l,a}function h(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function e(a,b,c){var e=b[0],d=b[1],f=b[2],k=b[3],g=c[4],l=c[5],h=c[6],n=c[7],q=b[4],t=b[5],w=b[6];b=b[7];var u=c[0],G=c[1],I=c[2];c=c[3];return a[0]=e*c+k*u+d*I-f*G,
a[1]=d*c+k*G+f*u-e*I,a[2]=f*c+k*I+e*G-d*u,a[3]=k*c-e*u-d*G-f*I,a[4]=e*n+k*g+d*h-f*l+q*c+b*u+t*I-w*G,a[5]=d*n+k*l+f*g-e*h+t*c+b*G+w*u-q*I,a[6]=f*n+k*h+e*l-d*g+w*c+b*I+q*G-t*u,a[7]=k*n-e*g-d*l-f*h+b*c-q*u-t*G-w*I,a}Object.defineProperty(a,"__esModule",{value:!0});a.sqrLen=a.squaredLength=a.len=a.length=a.dot=a.mul=a.setReal=a.getReal=void 0;a.create=function(){var a=new k.ARRAY_TYPE(8);k.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};a.clone=function(a){var b=
new k.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};a.fromValues=function(a,b,c,e,d,f,g,l){var h=new k.ARRAY_TYPE(8);return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h[4]=d,h[5]=f,h[6]=g,h[7]=l,h};a.fromRotationTranslationValues=function(a,b,c,e,d,f,g){var l=new k.ARRAY_TYPE(8);l[0]=a;l[1]=b;l[2]=c;l[3]=e;d*=.5;f*=.5;g*=.5;return l[4]=d*e+f*c-g*b,l[5]=f*e+g*a-d*c,l[6]=g*e+d*b-f*a,l[7]=-d*a-f*b-g*c,l};a.fromRotationTranslation=g;a.fromTranslation=function(a,
b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};a.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};a.fromMat4=function(a,b){var e=c.create();l.getRotation(e,b);var d=new k.ARRAY_TYPE(3);return l.getTranslation(d,b),g(a,e,d),a};a.copy=h;a.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};a.set=function(a,b,c,e,d,f,k,g,l){return a[0]=b,a[1]=c,a[2]=e,a[3]=d,a[4]=f,a[5]=
k,a[6]=g,a[7]=l,a};a.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};a.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],a[7]=b[3],a};a.getTranslation=function(a,b){var c=b[4],e=b[5],d=b[6],f=b[7],k=-b[0],g=-b[1],l=-b[2],h=b[3];return a[0]=2*(c*h+f*k+e*l-d*g),a[1]=2*(e*h+f*g+d*k-c*l),a[2]=2*(d*h+f*l+c*g-e*k),a};a.translate=function(a,b,c){var e=b[0],d=b[1],f=b[2],k=b[3],g=.5*c[0],l=.5*c[1];c=.5*c[2];var h=b[4],n=b[5],q=b[6];b=b[7];return a[0]=e,a[1]=d,a[2]=f,a[3]=
k,a[4]=k*g+d*c-f*l+h,a[5]=k*l+f*g-e*c+n,a[6]=k*c+e*l-d*g+q,a[7]=-e*g-d*l-f*c+b,a};a.rotateX=function(a,b,e){var d=-b[0],f=-b[1],k=-b[2],g=b[3],l=b[4],h=b[5],n=b[6],q=b[7],t=l*g+q*d+h*k-n*f,w=h*g+q*f+n*d-l*k,u=n*g+q*k+l*f-h*d,l=q*g-l*d-h*f-n*k;return c.rotateX(a,b,e),d=a[0],f=a[1],k=a[2],g=a[3],a[4]=t*g+l*d+w*k-u*f,a[5]=w*g+l*f+u*d-t*k,a[6]=u*g+l*k+t*f-w*d,a[7]=l*g-t*d-w*f-u*k,a};a.rotateY=function(a,b,e){var d=-b[0],f=-b[1],k=-b[2],g=b[3],l=b[4],h=b[5],n=b[6],q=b[7],t=l*g+q*d+h*k-n*f,w=h*g+q*f+n*
d-l*k,u=n*g+q*k+l*f-h*d,l=q*g-l*d-h*f-n*k;return c.rotateY(a,b,e),d=a[0],f=a[1],k=a[2],g=a[3],a[4]=t*g+l*d+w*k-u*f,a[5]=w*g+l*f+u*d-t*k,a[6]=u*g+l*k+t*f-w*d,a[7]=l*g-t*d-w*f-u*k,a};a.rotateZ=function(a,b,e){var d=-b[0],f=-b[1],k=-b[2],g=b[3],l=b[4],h=b[5],n=b[6],q=b[7],t=l*g+q*d+h*k-n*f,w=h*g+q*f+n*d-l*k,u=n*g+q*k+l*f-h*d,l=q*g-l*d-h*f-n*k;return c.rotateZ(a,b,e),d=a[0],f=a[1],k=a[2],g=a[3],a[4]=t*g+l*d+w*k-u*f,a[5]=w*g+l*f+u*d-t*k,a[6]=u*g+l*k+t*f-w*d,a[7]=l*g-t*d-w*f-u*k,a};a.rotateByQuatAppend=
function(a,b,c){var e=c[0],d=c[1],f=c[2];c=c[3];var k=b[0],g=b[1],l=b[2],h=b[3];return a[0]=k*c+h*e+g*f-l*d,a[1]=g*c+h*d+l*e-k*f,a[2]=l*c+h*f+k*d-g*e,a[3]=h*c-k*e-g*d-l*f,k=b[4],g=b[5],l=b[6],h=b[7],a[4]=k*c+h*e+g*f-l*d,a[5]=g*c+h*d+l*e-k*f,a[6]=l*c+h*f+k*d-g*e,a[7]=h*c-k*e-g*d-l*f,a};a.rotateByQuatPrepend=function(a,b,c){var e=b[0],d=b[1],f=b[2];b=b[3];var k=c[0],g=c[1],l=c[2],h=c[3];return a[0]=e*h+b*k+d*l-f*g,a[1]=d*h+b*g+f*k-e*l,a[2]=f*h+b*l+e*g-d*k,a[3]=b*h-e*k-d*g-f*l,k=c[4],g=c[5],l=c[6],h=
c[7],a[4]=e*h+b*k+d*l-f*g,a[5]=d*h+b*g+f*k-e*l,a[6]=f*h+b*l+e*g-d*k,a[7]=b*h-e*k-d*g-f*l,a};a.rotateAroundAxis=function(a,b,c,e){if(Math.abs(e)<k.EPSILON)return h(a,b);var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);e*=.5;var f=Math.sin(e),g=f*c[0]/d,l=f*c[1]/d;c=f*c[2]/d;e=Math.cos(e);var d=b[0],f=b[1],n=b[2],q=b[3];a[0]=d*e+q*g+f*c-n*l;a[1]=f*e+q*l+n*g-d*c;a[2]=n*e+q*c+d*l-f*g;a[3]=q*e-d*g-f*l-n*c;d=b[4];f=b[5];n=b[6];b=b[7];return a[4]=d*e+b*g+f*c-n*l,a[5]=f*e+b*l+n*g-d*c,a[6]=n*e+b*c+d*l-f*g,a[7]=
b*e-d*g-f*l-n*c,a};a.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a};a.multiply=e;a.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a};a.lerp=function(a,b,c,e){var d=1-e;0>w(b,c)&&(e=-e);return a[0]=b[0]*d+c[0]*e,a[1]=b[1]*d+c[1]*e,a[2]=b[2]*d+c[2]*e,a[3]=b[3]*d+c[3]*e,a[4]=b[4]*d+c[4]*e,a[5]=b[5]*d+c[5]*e,a[6]=b[6]*d+c[6]*
e,a[7]=b[7]*d+c[7]*e,a};a.invert=function(a,b){var c=u(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=b[7]/c,a};a.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=b[7],a};a.normalize=function(a,b){var c=u(b);if(0<c){var c=Math.sqrt(c),e=b[0]/c,d=b[1]/c,f=b[2]/c,k=b[3]/c,g=b[4],l=b[5],h=b[6],n=b[7],q=e*g+d*l+f*h+k*n;a[0]=e;a[1]=d;a[2]=f;a[3]=k;a[4]=(g-e*q)/c;a[5]=(l-d*q)/c;a[6]=
(h-f*q)/c;a[7]=(n-k*q)/c}return a};a.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};a.equals=function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[4],l=a[5],h=a[6],n=a[7],q=b[0],t=b[1],w=b[2],u=b[3],E=b[4],G=b[5],I=b[6],F=b[7];return Math.abs(c-q)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(e-
t)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(d-w)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(f-u)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(g-E)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(l-G)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(h-I)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(n-F)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(F))};var k=f(d(0)),c=f(d(3)),l=f(d(4));a.getReal=c.copy;a.setReal=c.copy;a.mul=e;var w=
a.dot=c.dot;b=a.length=c.length;var u=(a.len=b,a.squaredLength=c.squaredLength);a.sqrLen=u},function(b,a,d){function f(a,b,c){var d=b[0],g=b[1],h=b[2],n=b[3],m=b[4];b=b[5];var q=c[0],t=c[1],p=c[2],z=c[3],H=c[4];c=c[5];return a[0]=d*q+h*t,a[1]=g*q+n*t,a[2]=d*p+h*z,a[3]=g*p+n*z,a[4]=d*H+h*c+m,a[5]=g*H+n*c+b,a}function g(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a}Object.defineProperty(a,"__esModule",{value:!0});a.sub=a.mul=void 0;a.create=
function(){var a=new h.ARRAY_TYPE(6);h.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};a.clone=function(a){var b=new h.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b};a.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a};a.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};a.fromValues=function(a,b,c,d,f,g){var n=new h.ARRAY_TYPE(6);return n[0]=a,n[1]=b,n[2]=c,n[3]=d,n[4]=
f,n[5]=g,n};a.set=function(a,b,c,d,f,g,h){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a[4]=g,a[5]=h,a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=c*g-d*f;return n?(n=1/n,a[0]=g*n,a[1]=-d*n,a[2]=-f*n,a[3]=c*n,a[4]=(f*m-g*h)*n,a[5]=(d*h-c*m)*n,a):null};a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=f;a.rotate=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],m=b[4];b=b[5];var n=Math.sin(c);c=Math.cos(c);return a[0]=d*c+g*n,a[1]=f*c+h*n,a[2]=d*-n+g*c,a[3]=f*-n+h*c,
a[4]=m,a[5]=b,a};a.scale=function(a,b,c){var d=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=c[0];c=c[1];return a[0]=b[0]*n,a[1]=d*n,a[2]=f*c,a[3]=g*c,a[4]=h,a[5]=m,a};a.translate=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],m=b[4];b=b[5];var n=c[0];c=c[1];return a[0]=d,a[1]=f,a[2]=g,a[3]=h,a[4]=d*n+g*c+m,a[5]=f*n+h*c+b,a};a.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a};a.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=
0,a[5]=0,a};a.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a};a.subtract=g;a.multiplyScalar=function(a,b,
c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a};a.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],n=a[4],m=a[5],q=b[0],t=b[1],p=b[2],z=b[3],H=b[4],y=b[5];return Math.abs(c-q)<=h.EPSILON*Math.max(1,
Math.abs(c),Math.abs(q))&&Math.abs(d-t)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(f-p)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(g-z)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(n-H)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(H))&&Math.abs(m-y)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(y))};var h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(d(0));
a.mul=f;a.sub=g},function(b,a,d){function f(a,b,c){var d=b[0],g=b[1],h=b[2];b=b[3];var n=c[0],m=c[1],q=c[2];c=c[3];return a[0]=d*n+h*m,a[1]=g*n+b*m,a[2]=d*q+h*c,a[3]=g*q+b*c,a}function g(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a}Object.defineProperty(a,"__esModule",{value:!0});a.sub=a.mul=void 0;a.create=function(){var a=new h.ARRAY_TYPE(4);h.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};a.clone=function(a){var b=new h.ARRAY_TYPE(4);return b[0]=
a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b};a.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};a.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};a.fromValues=function(a,b,c,d){var f=new h.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=d,f};a.set=function(a,b,c,d,f){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a};a.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],
h=c*g-f*d;return h?(h=1/h,a[0]=g*h,a[1]=-d*h,a[2]=-f*h,a[3]=c*h,a):null};a.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a};a.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};a.multiply=f;a.rotate=function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);return a[0]=d*c+g*h,a[1]=f*c+b*h,a[2]=d*-h+g*c,a[3]=f*-h+b*c,a};a.scale=function(a,b,c){var d=b[1],f=b[2],g=b[3],h=c[0];c=c[1];return a[0]=b[0]*h,a[1]=d*h,a[2]=f*c,a[3]=g*c,a};a.fromRotation=
function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a};a.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a};a.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};a.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]};a.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],
a[3]=b[3]+c[3],a};a.subtract=g;a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],n=b[0],m=b[1],q=b[2],t=b[3];return Math.abs(c-n)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))&&Math.abs(d-m)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(f-q)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(g-t)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(t))};a.multiplyScalar=function(a,b,c){return a[0]=
b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a};a.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a};var h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(d(0));a.mul=f;a.sub=g},function(b,a,d){function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=
a,b}Object.defineProperty(a,"__esModule",{value:!0});a.vec4=a.vec3=a.vec2=a.quat2=a.quat=a.mat4=a.mat3=a.mat2d=a.mat2=a.glMatrix=void 0;b=f(d(0));var g=f(d(9)),h=f(d(8)),e=f(d(5)),k=f(d(4)),c=f(d(3)),l=f(d(7)),w=f(d(6)),u=f(d(2));d=f(d(1));a.glMatrix=b;a.mat2=g;a.mat2d=h;a.mat3=e;a.mat4=k;a.quat=c;a.quat2=l;a.vec2=w;a.vec3=u;a.vec4=d}])})},{}],39:[function(d,f,g){(function(b){function a(){h.forEach(function(a){e[n[a]]=!1})}function g(a){e[n[a.keyCode]]=!1}function t(a){e[n[a.keyCode]]=!0}var n=d("vkey"),
h=Object.keys(n),e={};a();f.exports=function(a){return a?e[a]:e};b.browser&&(window.addEventListener("keydown",t,!1),window.addEventListener("keyup",g,!1),window.addEventListener("blur",a,!1))}).call(this,d("_process"))},{_process:41,vkey:44}],40:[function(d,f,g){function b(a,b,d){this.rotation=a;this.center=b;this.distance=d}function a(a,b){var d=b[0],e=b[1],d=d*d+e*e;1<d&&(d=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-d);a[3]=0}d=d("gl-matrix");var q=d.vec3,t=d.mat3,n=d.mat4,h=d.quat,e=new Float32Array(16),
k=new Float32Array(16);d=b.prototype;d.view=function(a){a||(a=n.create());k[0]=k[1]=0;k[2]=-this.distance;n.fromRotationTranslation(a,h.conjugate(e,this.rotation),k);n.translate(a,a,q.negate(e,this.center));return a};d.lookAt=function(a,b,d){n.lookAt(e,a,b,d);t.fromMat4(e,e);h.fromMat3(this.rotation,e);q.copy(this.center,b);this.distance=q.distance(a,b)};d.pan=function(a){var b=this.distance;e[0]=-b*(a[0]||0);e[1]=b*(a[1]||0);e[2]=b*(a[2]||0);q.transformQuat(e,e,this.rotation);q.add(this.center,this.center,
e)};d.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};d.rotate=function(b,d){a(e,b);a(k,d);h.invert(k,k);h.multiply(e,e,k);1E-6>h.length(e)||(h.multiply(this.rotation,this.rotation,e),h.normalize(this.rotation,this.rotation))};f.exports=function(a,d,e){a=a||[0,0,-1];d=d||[0,0,0];e=e||[0,1,0];var f=new b(h.create(),q.create(),1);f.lookAt(a,d,e);return f}},{"gl-matrix":38}],41:[function(d,f,g){function b(){throw Error("setTimeout has not been defined");}function a(){throw Error("clearTimeout has not been defined");
}function q(a){if(c===setTimeout)return setTimeout(a,0);if((c===b||!c)&&setTimeout)return c=setTimeout,setTimeout(a,0);try{return c(a,0)}catch(d){try{return c.call(null,a,0)}catch(e){return c.call(this,a,0)}}}function t(b){if(l===clearTimeout)return clearTimeout(b);if((l===a||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(b);try{return l(b)}catch(c){try{return l.call(null,b)}catch(d){return l.call(this,b)}}}function n(){u&&v&&(u=!1,v.length?w=v.concat(w):m=-1,w.length&&h())}function h(){if(!u){var a=
q(n);u=!0;for(var b=w.length;b;){v=w;for(w=[];++m<b;)v&&v[m].run();m=-1;b=w.length}v=null;u=!1;t(a)}}function e(a,b){this.fun=a;this.array=b}function k(){}d=f.exports={};var c,l;try{c="function"===typeof setTimeout?setTimeout:b}catch(A){c=b}try{l="function"===typeof clearTimeout?clearTimeout:a}catch(A){l=a}var w=[],u=!1,v,m=-1;d.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];w.push(new e(a,b));1!==w.length||u||q(h)};
e.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=k;d.addListener=k;d.once=k;d.off=k;d.removeListener=k;d.removeAllListeners=k;d.emit=k;d.prependListener=k;d.prependOnceListener=k;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],42:[function(d,f,g){(function(b,a){"object"===typeof g&&"undefined"!==typeof f?f.exports=a():"function"===typeof define&&define.amd?define(a):b.createREGL=a()})(this,function(){function b(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function a(a){a=Error("(regl) "+a);console.error(a);throw a;}function d(b,c){b||a(c)}function f(a){return a?": "+a:""}function g(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===
typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function h(b,c,d){0>c.indexOf(b)&&a("invalid value"+f(d)+". must be one of: "+c)}function e(a,b){for(a+="";a.length<b;)a=" "+a;return a}function k(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function c(a,b){this.number=a;this.line=b;this.errors=[]}function l(a,b,c){this.file=a;this.line=b;this.message=
c}function w(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function u(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function v(a,d){var e=a.split("\n"),f=1,g=0,h={unknown:new k,0:new k};h.unknown.name=h[0].name=d||w();h.unknown.lines.push(new c(0,""));for(var l=
0;l<e.length;++l){var m=e[l],n=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(m);if(n)switch(n[1]){case "line":if(n=/(\d+)(\s+\d+)?/.exec(n[2]))f=n[1]|0,n[2]&&(g=n[2]|0,g in h||(h[g]=new k));break;case "define":if(n=/SHADER_NAME(_B64)?\s+(.*)$/.exec(n[2]))h[g].name=n[1]?b(n[2]):n[2]}h[g].lines.push(new c(f++,m))}Object.keys(h).forEach(function(a){var b=h[a];b.lines.forEach(function(a){b.index[a.number]=a})});return h}function m(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);
c?b.push(new l(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new l("unknown",0,a))}});return b}function A(a,b){b.forEach(function(b){var c=a[b.file];if(c){var d=c.index[b.line];if(d){d.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function x(a){a._commandRef=w()}function p(b,c){var d=u();a(b+" in command "+(c||w())+("unknown"===d?"":" called from "+d))}function z(a,b,c,d){g(a,b)||p("invalid parameter type"+f(c)+". expected "+b+", got "+typeof a,
d||w())}function H(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:ia[a]*b}function y(a,b){this.id=Eb++;this.type=a;this.data=b}function M(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&b===c&&('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return M(a.substr(0,b.index)).concat(M(b[1])).concat(M(a.substr(b.index+b[0].length)));b=a.split(".");if(1===
b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(c=0;c<b.length;++c)a=a.concat(M(b[c]));return a}function D(a){return"["+M(a).join("][")+"]"}function S(){var a={"":0},b=[""];return{id:function(c){var d=a[c];if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}function J(a,b,c){function d(){var b=window.innerWidth,f=window.innerHeight;a!==document.body&&(f=a.getBoundingClientRect(),b=f.right-f.left,f=f.bottom-f.top);e.width=c*b;e.height=c*f;X(e.style,
{width:b+"px",height:f+"px"})}var e=document.createElement("canvas");X(e.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(e);a===document.body&&(e.style.position="absolute",X(a.style,{margin:0,padding:0}));var f;a!==document.body&&"function"===typeof ResizeObserver?(f=new ResizeObserver(function(){setTimeout(d)}),f.observe(a)):window.addEventListener("resize",d,!1);d();return{canvas:e,onDestroy:function(){f?f.disconnect():window.removeEventListener("resize",d);a.removeChild(e)}}}function K(a,
b){function c(d){try{return a.getContext(d,b)}catch(e){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function B(a){if("string"===typeof a)return a.split();r(Array.isArray(a),"invalid extension array");return a}function E(a){return"string"===typeof a?(r("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}function G(a){var b=a||{},c,d,e,f;a={};var g=[],h=[],k="undefined"===typeof window?1:window.devicePixelRatio,l=!1,m=function(a){a&&
r.raise(a)},n=function(){};"string"===typeof b?(r("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),c=document.querySelector(b),r(c,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?c=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(f=b,e=f.canvas):(r.constructor(b),"gl"in b?f=b.gl:"canvas"in b?e=E(b.canvas):"container"in b&&(d=
E(b.container)),"attributes"in b&&(a=b.attributes,r.type(a,"object","invalid context attributes")),"extensions"in b&&(g=B(b.extensions)),"optionalExtensions"in b&&(h=B(b.optionalExtensions)),"onDone"in b&&(r.type(b.onDone,"function","invalid or missing onDone callback"),m=b.onDone),"profile"in b&&(l=!!b.profile),"pixelRatio"in b&&(k=+b.pixelRatio,r(0<k,"invalid pixel ratio"))):r.raise("invalid arguments to regl");c&&("canvas"===c.nodeName.toLowerCase()?e=c:d=c);if(!f){if(!e){r("undefined"!==typeof document,
"must manually specify webgl context outside of DOM environments");c=J(d||document.body,m,k);if(!c)return null;e=c.canvas;n=c.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0);f=K(e,a)}return f?{gl:f,canvas:e,container:d,extensions:g,optionalExtensions:h,pixelRatio:k,profile:l,onDone:m,onDestroy:n}:(n(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function I(a,b){function c(b){r.type(b,"string","extension name must be string");
b=b.toLowerCase();var e;try{e=d[b]=a.getExtension(b)}catch(f){}return!!e}for(var d={},e=0;e<b.extensions.length;++e){var f=b.extensions[e];if(!c(f))return b.onDestroy(),b.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(d[a]&&!c(a))throw Error("(regl): error restoring extension "+a);})}}}function F(a,b){for(var c=
Array(a),d=0;d<a;++d)c[d]=b(d);return c}function L(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function Q(){function a(b){a:{for(var d=16;268435456>=d;d*=16)if(b<=d){b=d;break a}b=0}d=c[L(b)>>2];return 0<d.length?d.pop():new ArrayBuffer(b)}function b(a){c[L(a.byteLength)>>2].push(a)}var c=F(8,function(){return[]});return{alloc:a,free:b,allocType:function(b,c){var d=null;switch(b){case 5120:d=new Int8Array(a(c),0,c);break;case 5121:d=
new Uint8Array(a(c),0,c);break;case 5122:d=new Int16Array(a(2*c),0,c);break;case 5123:d=new Uint16Array(a(2*c),0,c);break;case 5124:d=new Int32Array(a(4*c),0,c);break;case 5125:d=new Uint32Array(a(4*c),0,c);break;case 5126:d=new Float32Array(a(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(a){b(a.buffer)}}}function N(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&
(Array.isArray(a.data)||ca(a.data))}function T(a,b,c,d,e,f){for(var g=0;g<b;++g)for(var h=a[g],k=0;k<c;++k)for(var l=h[k],m=0;m<d;++m)e[f++]=l[m]}function aa(a,b,c,d,e){for(var f=1,g=c+1;g<b.length;++g)f*=b[g];var h=b[c];if(4===b.length-c){var k=b[c+1],l=b[c+2];b=b[c+3];for(g=0;g<h;++g)T(a[g],k,l,b,d,e),e+=f}else for(g=0;g<h;++g)aa(a[g],b,c+1,d,e),e+=f}function W(a){return Ua[Object.prototype.toString.call(a)]|0}function Y(a,b){for(var c=0;c<b.length;++c)a[c]=b[c]}function ga(a,b,c,d,e,f,g){for(var h=
0,k=0;k<c;++k)for(var l=0;l<d;++l)a[h++]=b[e*k+f*l+g]}function U(a,b,c,d){function e(b){this.id=k++;this.buffer=a.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function f(b,c,d){b.byteLength=c.byteLength;a.bufferData(b.type,c,d)}function g(a,b,c,d,e,h){a.usage=c;if(Array.isArray(b)){if(a.dtype=d||5126,0<b.length)if(Array.isArray(b[0])){e=mb(b);for(var k=d=1;k<e.length;++k)d*=e[k];a.dimension=
d;b=db(b,e,a.dtype);f(a,b,c);h?a.persistentData=b:R.freeType(b)}else"number"===typeof b[0]?(a.dimension=e,e=R.allocType(a.dtype,b.length),Y(e,b),f(a,e,c),h?a.persistentData=e:R.freeType(e)):ca(b[0])?(a.dimension=b[0].length,a.dtype=d||W(b[0])||5126,b=db(b,[b.length,b[0].length],a.dtype),f(a,b,c),h?a.persistentData=b:R.freeType(b)):r.raise("invalid buffer data")}else if(ca(b))a.dtype=d||W(b),a.dimension=e,f(a,b,c),h&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(N(b)){e=b.shape;
var l=b.stride,k=b.offset,m=0,C=0,n=0,p=0;1===e.length?(m=e[0],C=1,n=l[0],p=0):2===e.length?(m=e[0],C=e[1],n=l[0],p=l[1]):r.raise("invalid shape");a.dtype=d||W(b.data)||5126;a.dimension=C;e=R.allocType(a.dtype,m*C);ga(e,b.data,m,C,n,p,k);f(a,e,c);h?a.persistentData=e:R.freeType(e)}else b instanceof ArrayBuffer?(a.dtype=5121,a.dimension=e,f(a,b,c),h&&(a.persistentData=new Uint8Array(new Uint8Array(b)))):r.raise("invalid buffer data")}function h(c){b.bufferCount--;d(c);var e=c.buffer;r(e,"buffer must not be deleted already");
a.deleteBuffer(e);c.buffer=null;delete l[c.id]}var k=0,l={};e.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};e.prototype.destroy=function(){h(this)};var m=[];c.profile&&(b.getTotalBufferSize=function(){var a=0;Object.keys(l).forEach(function(b){a+=l[b].stats.size});return a});return{create:function(d,f,k,m){function n(b){var d=35044,e=null,f=0,h=0,k=1;Array.isArray(b)||ca(b)||N(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?f=b|0:b&&(r.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(r(null===e||Array.isArray(e)||ca(e)||N(e),"invalid data for buffer"),e=b.data),"usage"in b&&(r.parameter(b.usage,Xa,"invalid buffer usage"),d=Xa[b.usage]),"type"in b&&(r.parameter(b.type,za,"invalid buffer type"),h=za[b.type]),"dimension"in b&&(r.type(b.dimension,"number","invalid dimension"),k=b.dimension|0),"length"in b&&(r.nni(f,"buffer length must be a nonnegative integer"),f=b.length|0));q.bind();e?g(q,e,d,h,k,m):(f&&a.bufferData(q.type,f,d),q.dtype=h||5121,q.usage=d,q.dimension=
k,q.byteLength=f);c.profile&&(q.stats.size=q.byteLength*sa[q.dtype]);return n}function p(b,c){r(c+b.byteLength<=q.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+q.byteLength);a.bufferSubData(q.type,c,b)}b.bufferCount++;var q=new e(f);l[q.id]=q;k||n(d);n._reglType="buffer";n._buffer=q;n.subdata=function(a,b){var c=(b||0)|0,d;q.bind();if(ca(a)||a instanceof ArrayBuffer)p(a,c);else if(Array.isArray(a)){if(0<
a.length)if("number"===typeof a[0]){var e=R.allocType(q.dtype,a.length);Y(e,a);p(e,c);R.freeType(e)}else Array.isArray(a[0])||ca(a[0])?(d=mb(a),e=db(a,d,q.dtype),p(e,c),R.freeType(e)):r.raise("invalid buffer data")}else if(N(a)){d=a.shape;var f=a.stride,g=e=0,h=0,k=0;1===d.length?(e=d[0],g=1,h=f[0],k=0):2===d.length?(e=d[0],g=d[1],h=f[0],k=f[1]):r.raise("invalid shape");d=Array.isArray(a.data)?q.dtype:W(a.data);d=R.allocType(d,e*g);ga(d,a.data,e,g,h,k,a.offset);p(d,c);R.freeType(d)}else r.raise("invalid data for buffer subdata");
return n};c.profile&&(n.stats=q.stats);n.destroy=function(){h(q)};return n},createStream:function(a,b){var c=m.pop();c||(c=new e(a));c.bind();g(c,b,35040,0,1,!1);return c},destroyStream:function(a){m.push(a)},clear:function(){ea(l).forEach(h);m.forEach(h)},getBuffer:function(a){return a&&a._buffer instanceof e?a._buffer:null},restore:function(){ea(l).forEach(function(b){b.buffer=a.createBuffer();a.bindBuffer(b.type,b.buffer);a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:g}}
function Sa(a,b,c,d){function e(a){this.id=k++;h[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function f(d,e,g,h,k,l,m){d.buffer.bind();var n;e?((n=m)||ca(e)&&(!N(e)||ca(e.data))||(n=b.oes_element_index_uint?5125:5123),c._initBuffer(d.buffer,e,g,n,3)):(a.bufferData(34963,l,g),d.buffer.dtype=n||5121,d.buffer.usage=g,d.buffer.dimension=3,d.buffer.byteLength=l);n=m;if(!m){switch(d.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=
5125;break;default:r.raise("unsupported type for element array")}d.buffer.dtype=n}d.type=n;r(5125!==n||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=k;0>e&&(e=d.buffer.byteLength,5123===n?e>>=1:5125===n&&(e>>=2));d.vertCount=e;e=h;0>h&&(e=4,h=d.buffer.dimension,1===h&&(e=0),2===h&&(e=1),3===h&&(e=4));d.primType=e}function g(a){d.elementsCount--;r(null!==a.buffer,"must not double destroy elements");delete h[a.id];a.buffer.destroy();a.buffer=
null}var h={},k=0,l={uint8:5121,uint16:5123};b.oes_element_index_uint&&(l.uint32=5125);e.prototype.bind=function(){this.buffer.bind()};var m=[];return{create:function(a,b){function h(a){if(a)if("number"===typeof a)k(a),m.primType=4,m.vertCount=a|0,m.type=5121;else{var b=null,c=35044,d=-1,e=-1,g=0,C=0;if(Array.isArray(a)||ca(a)||N(a))b=a;else if(r.type(a,"object","invalid arguments for elements"),"data"in a&&(b=a.data,r(Array.isArray(b)||ca(b)||N(b),"invalid data for element buffer")),"usage"in a&&
(r.parameter(a.usage,Xa,"invalid element buffer usage"),c=Xa[a.usage]),"primitive"in a&&(r.parameter(a.primitive,Ca,"invalid element buffer primitive"),d=Ca[a.primitive]),"count"in a&&(r("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),e=a.count|0),"type"in a&&(r.parameter(a.type,l,"invalid buffer type"),C=l[a.type]),"length"in a)g=a.length|0;else if(g=e,5123===C||5122===C)g*=2;else if(5125===C||5124===C)g*=4;f(m,b,c,d,e,g,C)}else k(),m.primType=4,m.vertCount=0,m.type=5121;
return h}var k=c.create(null,34963,!0),m=new e(k._buffer);d.elementsCount++;h(a);h._reglType="elements";h._elements=m;h.subdata=function(a,b){k.subdata(a,b);return h};h.destroy=function(){g(m)};return h},createStream:function(a){var b=m.pop();b||(b=new e(c.create(null,34963,!0,!1)._buffer));f(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){m.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof e?a._elements:null},clear:function(){ea(h).forEach(g)}}}function Ka(a){for(var b=
R.allocType(5123,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(Infinity===a[c])b[c]=31744;else if(-Infinity===a[c])b[c]=64512;else{nb[0]=a[c];var d=Fb[0],e=d>>>31<<15,f=(d<<1>>>24)-127,d=d>>13&1023;b[c]=-24>f?e:-14>f?e+(d+1024>>-14-f):15<f?e+31744:e+(f+15<<10)+d}return b}function O(a){return Array.isArray(a)||ca(a)}function Da(a){return"[object "+a+"]"}function ob(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function pb(a){return Array.isArray(a)&&0!==a.length&&
O(a[0])?!0:!1}function na(a){return Object.prototype.toString.call(a)}function fb(a){if(!a)return!1;var b=na(a);return 0<=Gb.indexOf(b)?!0:ob(a)||pb(a)||N(a)}function qb(a,b){36193===a.type?(a.data=Ka(b),R.freeType(b)):a.data=b}function Ya(a,b,c,d,e,f){a="undefined"!==typeof P[a]?P[a]:ha[a]*Ea[b];f&&(a*=6);if(e){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}function Hb(a,b,c,d,e,f,g){function h(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=
!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function k(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function l(a,d){if("object"===typeof d&&d){"premultiplyAlpha"in d&&(r.type(d.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=
d.premultiplyAlpha);"flipY"in d&&(r.type(d.flipY,"boolean","invalid texture flip"),a.flipY=d.flipY);"alignment"in d&&(r.oneOf(d.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=d.alignment);"colorSpace"in d&&(r.parameter(d.colorSpace,H,"invalid colorSpace"),a.colorSpace=H[d.colorSpace]);if("type"in d){var e=d.type;r(b.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");r(b.oes_texture_half_float||
!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");r(b.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");r.parameter(e,G,"invalid texture type");a.type=G[e]}var f=a.width,g=a.height,h=a.channels,e=!1;"shape"in d?(r(Array.isArray(d.shape)&&2<=d.shape.length,"shape must be an array"),f=d.shape[0],g=
d.shape[1],3===d.shape.length&&(h=d.shape[2],r(0<h&&4>=h,"invalid number of channels"),e=!0),r(0<=f&&f<=c.maxTextureSize,"invalid width"),r(0<=g&&g<=c.maxTextureSize,"invalid height")):("radius"in d&&(f=g=d.radius,r(0<=f&&f<=c.maxTextureSize,"invalid radius")),"width"in d&&(f=d.width,r(0<=f&&f<=c.maxTextureSize,"invalid width")),"height"in d&&(g=d.height,r(0<=g&&g<=c.maxTextureSize,"invalid height")),"channels"in d&&(h=d.channels,r(0<h&&4>=h,"invalid number of channels"),e=!0));a.width=f|0;a.height=
g|0;a.channels=h|0;f=!1;"format"in d&&(f=d.format,r(b.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),r.parameter(f,J,"invalid texture format"),g=a.internalformat=J[f],a.format=Pa[g],f in G&&!("type"in d)&&(a.type=G[f]),f in K&&(a.compressed=!0),f=!0);!e&&f?a.channels=ha[a.format]:e&&!f?a.channels!==Za[a.format]&&(a.format=a.internalformat=Za[a.channels]):f&&e&&r(a.channels===ha[a.format],"number of channels inconsistent with specified format")}}
function m(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function n(){h.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function q(a,b){var d=null;fb(b)?d=b:b&&(r.type(b,"object","invalid pixel data type"),l(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),fb(b.data)&&(d=b.data));r(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(b.copy){r(!d,"can not specify copy and data field for the same texture");var f=e.viewportWidth,g=e.viewportHeight;a.width=a.width||f-a.xOffset;a.height=a.height||g-a.yOffset;a.needsCopy=!0;r(0<=a.xOffset&&a.xOffset<f&&0<=a.yOffset&&a.yOffset<g&&0<a.width&&a.width<=f&&0<a.height&&a.height<=g,"copy texture read out of bounds")}else if(!d)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(ca(d))a.channels=a.channels||4,a.data=d,"type"in b||5121!==a.type||(a.type=Ua[Object.prototype.toString.call(d)]|
0);else if(ob(d)){a.channels=a.channels||4;f=d;g=f.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:g=R.allocType(a.type,g);g.set(f);a.data=g;break;case 36193:a.data=Ka(f);break;default:r.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(N(d)){f=d.data;Array.isArray(f)||5121!==a.type||(a.type=Ua[Object.prototype.toString.call(f)]|0);var g=d.shape,h=d.stride,k,m,n,C;3===g.length?(n=g[2],C=h[2]):(r(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),
C=n=1);k=g[0];m=g[1];g=h[0];h=h[1];a.alignment=1;a.width=k;a.height=m;a.channels=n;a.format=a.internalformat=Za[n];a.needsFree=!0;k=C;d=d.offset;n=a.width;C=a.height;m=a.channels;for(var ka=R.allocType(36193===a.type?5126:a.type,n*C*m),wa=0,p=0;p<C;++p)for(var t=0;t<n;++t)for(var v=0;v<m;++v)ka[wa++]=f[g*t+h*p+k*v+d];qb(a,ka)}else if(na(d)===gb||na(d)===hb||na(d)===rb)na(d)===gb||na(d)===hb?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(na(d)===
sb)a.element=d,a.width=d.width,a.height=d.height,a.channels=4;else if(na(d)===tb)a.element=d,a.width=d.naturalWidth,a.height=d.naturalHeight,a.channels=4;else if(na(d)===ub)a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(pb(d)){f=a.width||d[0].length;g=a.height||d.length;h=a.channels;h=O(d[0][0])?h||d[0][0].length:h||1;k=$a.shape(d);n=1;for(C=0;C<k.length;++C)n*=k[C];n=R.allocType(36193===a.type?5126:a.type,n);$a.flatten(d,k,"",n);qb(a,n);a.alignment=1;a.width=f;a.height=
g;a.channels=h;a.format=a.internalformat=Za[h];a.needsFree=!0}5126===a.type?r(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&r(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function p(b,c,e,f,g){var h=b.element,k=b.data,l=b.internalformat,n=b.format,r=b.type,ka=b.width,wa=b.height;m(b);h?a.texSubImage2D(c,g,e,f,n,r,h):b.compressed?a.compressedTexSubImage2D(c,g,e,f,l,ka,wa,k):b.needsCopy?(d(),
a.copyTexSubImage2D(c,g,e,f,b.xOffset,b.yOffset,ka,wa)):a.texSubImage2D(c,g,e,f,ka,wa,n,r,k)}function t(){return ab.pop()||new n}function v(a){a.needsFree&&R.freeType(a.data);n.call(a);ab.push(a)}function u(){h.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function w(a,b,c){var d=a.images[0]=t();a.mipmask=1;d.width=a.width=b;d.height=a.height=c;d.channels=a.channels=4}function x(a,b){var c=null;if(fb(b))c=a.images[0]=t(),k(c,a),q(c,b),a.mipmask=1;else if(l(a,
b),Array.isArray(b.mipmap))for(var d=b.mipmap,e=0;e<d.length;++e)c=a.images[e]=t(),k(c,a),c.width>>=e,c.height>>=e,q(c,d[e]),a.mipmask|=1<<e;else c=a.images[0]=t(),k(c,a),q(c,b),a.mipmask=1;k(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||r(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function y(b,c){for(var e=b.images,f=0;f<
e.length&&e[f];++f){var g=e[f],h=c,k=f,l=g.element,n=g.data,r=g.internalformat,ka=g.format,wa=g.type,q=g.width,p=g.height;m(g);l?a.texImage2D(h,k,ka,ka,wa,l):g.compressed?a.compressedTexImage2D(h,k,r,q,p,0,n):g.needsCopy?(d(),a.copyTexImage2D(h,k,ka,g.xOffset,g.yOffset,q,p,0)):a.texImage2D(h,k,ka,q,p,0,ka,wa,n||null)}}function z(){var a=Q.pop()||new u;h.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function A(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&v(b[c]),b[c]=null;Q.push(a)}
function D(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function B(a,b){if("min"in b){var d=b.min;r.parameter(d,I);a.minFilter=I[d];0<=Ib.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(d=b.mag,r.parameter(d,Qa),a.magFilter=Qa[d]);var d=a.wrapS,e=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(r.parameter(f,E),d=e=E[f]):Array.isArray(f)&&(r.parameter(f[0],E),r.parameter(f[1],E),d=E[f[0]],e=
E[f[1]])}else"wrapS"in b&&(d=b.wrapS,r.parameter(d,E),d=E[d]),"wrapT"in b&&(e=b.wrapT,r.parameter(e,E),e=E[e]);a.wrapS=d;a.wrapT=e;"anisotropic"in b&&(d=b.anisotropic,r("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":r.parameter(b.mipmap,vb,"invalid mipmap hint");a.mipmapHint=vb[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=b.mipmap;break;case "object":r(Array.isArray(b.mipmap),
"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:r.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function F(c,d){a.texParameteri(d,10241,c.minFilter);a.texParameteri(d,10240,c.magFilter);a.texParameteri(d,10242,c.wrapS);a.texParameteri(d,10243,c.wrapT);b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function eb(b){h.call(this);this.mipmask=0;this.internalformat=6408;this.id=W++;this.refCount=
1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new D;g.profile&&(this.stats={size:0})}function Ba(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function Fa(){var b=fa[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function ba(b){var c=b.texture;r(c,"must not double destroy texture");var d=b.unit,e=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(e,null),fa[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=
null;b.refCount=0;delete P[b.id];f.textureCount--}var vb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},E={repeat:10497,clamp:33071,mirror:33648},Qa={nearest:9728,linear:9729},I=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Qa),H={none:0,browser:37444},G={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,
rgb565:36194},K={};b.ext_srgb&&(J.srgb=35904,J.srgba=35906);b.oes_texture_float&&(G.float32=G["float"]=5126);b.oes_texture_half_float&&(G.float16=G["half float"]=36193);b.webgl_depth_texture&&(X(J,{depth:6402,"depth stencil":34041}),X(G,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&X(K,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&X(K,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&X(K,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(K["rgb etc1"]=36196);var L=Array.prototype.slice.call(a.getParameter(34467));Object.keys(K).forEach(function(a){var b=K[a];0<=L.indexOf(b)&&(J[a]=b)});var M=Object.keys(J);c.textureFormats=M;var U=[];Object.keys(J).forEach(function(a){U[J[a]]=a});var S=[];Object.keys(G).forEach(function(a){S[G[a]]=
a});var V=[];Object.keys(Qa).forEach(function(a){V[Qa[a]]=a});var Ra=[];Object.keys(I).forEach(function(a){Ra[I[a]]=a});var Aa=[];Object.keys(E).forEach(function(a){Aa[E[a]]=a});var Pa=M.reduce(function(a,c){var d=J[c];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||b.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=c.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{}),ab=[],Q=[],W=0,P={},T=c.maxTextureUnits,fa=Array(T).map(function(){return null});X(eb.prototype,{bind:function(){this.bindCount+=
1;var b=this.unit;if(0>b){for(var c=0;c<T;++c){var d=fa[c];if(d){if(0<d.bindCount)continue;d.unit=-1}fa[c]=this;b=c;break}b>=T&&r.raise("insufficient number of texture units");g.profile&&f.maxTextureUnits<b+1&&(f.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ba(this)}});g.profile&&(f.getTotalTextureSize=function(){var a=0;Object.keys(P).forEach(function(b){a+=P[b].stats.size});
return a});return{create2D:function(b,d){function e(a,b){var d=h.texInfo;D.call(d);var f=z();"number"===typeof a?"number"===typeof b?w(f,a|0,b|0):w(f,a|0,a|0):a?(r.type(a,"object","invalid arguments to regl.texture"),B(d,a),x(f,a)):w(f,1,1);d.genMipmaps&&(f.mipmask=(f.width<<1)-1);h.mipmask=f.mipmask;k(h,f);r.texture2D(d,f,c);h.internalformat=f.internalformat;e.width=f.width;e.height=f.height;Ba(h);y(f,3553);F(d,3553);Fa();A(f);g.profile&&(h.stats.size=Ya(h.internalformat,h.type,f.width,f.height,
d.genMipmaps,!1));e.format=U[h.internalformat];e.type=S[h.type];e.mag=V[d.magFilter];e.min=Ra[d.minFilter];e.wrapS=Aa[d.wrapS];e.wrapT=Aa[d.wrapT];return e}var h=new eb(3553);P[h.id]=h;f.textureCount++;e(b,d);e.subimage=function(a,b,c,d){r(!!a,"must specify image data");b|=0;c|=0;d|=0;var f=t();k(f,h);f.width=0;f.height=0;q(f,a);f.width=f.width||(h.width>>d)-b;f.height=f.height||(h.height>>d)-c;r(h.type===f.type&&h.format===f.format&&h.internalformat===f.internalformat,"incompatible format for texture.subimage");
r(0<=b&&0<=c&&b+f.width<=h.width&&c+f.height<=h.height,"texture.subimage write out of bounds");r(h.mipmask&1<<d,"missing mipmap data");r(f.data||f.element||f.needsCopy,"missing image data");Ba(h);p(f,3553,b,c,d);Fa();v(f);return e};e.resize=function(b,c){var d=b|0,f=c|0||d;if(d===h.width&&f===h.height)return e;e.width=h.width=d;e.height=h.height=f;Ba(h);for(var k=0;h.mipmask>>k;++k){var l=d>>k,m=f>>k;if(!l||!m)break;a.texImage2D(3553,k,h.format,l,m,0,h.format,h.type,null)}Fa();g.profile&&(h.stats.size=
Ya(h.internalformat,h.type,d,f,!1,!1));return e};e._reglType="texture2d";e._texture=h;g.profile&&(e.stats=h.stats);e.destroy=function(){h.decRef()};return e},createCube:function(b,d,e,h,m,n){function Z(a,b,d,e,f,h){var m,n=u.texInfo;D.call(n);for(m=0;6>m;++m)ba[m]=z();if("number"!==typeof a&&a)if("object"===typeof a)if(b)x(ba[0],a),x(ba[1],b),x(ba[2],d),x(ba[3],e),x(ba[4],f),x(ba[5],h);else if(B(n,a),l(u,a),"faces"in a)for(a=a.faces,r(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),
m=0;6>m;++m)r("object"===typeof a[m]&&!!a[m],"invalid input for cube map face"),k(ba[m],u),x(ba[m],a[m]);else for(m=0;6>m;++m)x(ba[m],a);else r.raise("invalid arguments to cube map");else for(a=a|0||1,m=0;6>m;++m)w(ba[m],a,a);k(u,ba[0]);c.npotTextureCube||r(wb(u.width)&&wb(u.height),"your browser does not support non power or two texture dimensions");u.mipmask=n.genMipmaps?(ba[0].width<<1)-1:ba[0].mipmask;r.textureCube(u,n,ba,c);u.internalformat=ba[0].internalformat;Z.width=ba[0].width;Z.height=ba[0].height;
Ba(u);for(m=0;6>m;++m)y(ba[m],34069+m);F(n,34067);Fa();g.profile&&(u.stats.size=Ya(u.internalformat,u.type,Z.width,Z.height,n.genMipmaps,!0));Z.format=U[u.internalformat];Z.type=S[u.type];Z.mag=V[n.magFilter];Z.min=Ra[n.minFilter];Z.wrapS=Aa[n.wrapS];Z.wrapT=Aa[n.wrapT];for(m=0;6>m;++m)A(ba[m]);return Z}var u=new eb(34067);P[u.id]=u;f.cubeCount++;var ba=Array(6);Z(b,d,e,h,m,n);Z.subimage=function(a,b,c,d,e){r(!!b,"must specify image data");r("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");
c|=0;d|=0;e|=0;var f=t();k(f,u);f.width=0;f.height=0;q(f,b);f.width=f.width||(u.width>>e)-c;f.height=f.height||(u.height>>e)-d;r(u.type===f.type&&u.format===f.format&&u.internalformat===f.internalformat,"incompatible format for texture.subimage");r(0<=c&&0<=d&&c+f.width<=u.width&&d+f.height<=u.height,"texture.subimage write out of bounds");r(u.mipmask&1<<e,"missing mipmap data");r(f.data||f.element||f.needsCopy,"missing image data");Ba(u);p(f,34069+a,c,d,e);Fa();v(f);return Z};Z.resize=function(b){b|=
0;if(b!==u.width){Z.width=u.width=b;Z.height=u.height=b;Ba(u);for(var c=0;6>c;++c)for(var d=0;u.mipmask>>d;++d)a.texImage2D(34069+c,d,u.format,b>>d,b>>d,0,u.format,u.type,null);Fa();g.profile&&(u.stats.size=Ya(u.internalformat,u.type,Z.width,Z.height,!1,!0));return Z}};Z._reglType="textureCube";Z._texture=u;g.profile&&(Z.stats=u.stats);Z.destroy=function(){u.decRef()};return Z},clear:function(){for(var b=0;b<T;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),fa[b]=null;ea(P).forEach(ba);f.cubeCount=
0;f.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<T;++b){var c=fa[b];c&&(c.bindCount=0,c.unit=-1,fa[b]=null)}ea(P).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,
null);F(b.texInfo,b.target)})}}}function Jb(a,b,c,d,e,f){function g(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height);this.width=a;this.height=d}function h(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function k(a,b,c){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);r(Math.max(1,a.width)===b&&d===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
r(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function l(b,c){c&&(c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer))}function m(a){var b=3553,c=null,d=null,e=a;"object"===typeof a&&(e=a.data,"target"in a&&(b=a.target|0));r.type(e,"function","invalid attachment data");a=e._reglType;"texture2d"===a?(c=e,r(3553===b)):"textureCube"===a?(c=e,r(34069<=
b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(d=e,b=36161):r.raise("invalid regl object for attachment");return new g(b,c,d)}function n(a,b,c,f,h){if(c)return a=d.create2D({width:a,height:b,format:f,type:h}),a._texture.refCount=0,new g(3553,a,null);a=e.create({width:a,height:b,format:f});a._renderbuffer.refCount=0;return new g(36161,null,a)}function q(a){return a&&(a.texture||a.renderbuffer)}function p(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,
c),a.width=b,a.height=c)}function t(){this.id=E++;B[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function v(a){a.colorAttachments.forEach(h);h(a.depthAttachment);h(a.stencilAttachment);h(a.depthStencilAttachment)}function u(b){var c=b.framebuffer;r(c,"must not double destroy framebuffer");a.deleteFramebuffer(c);b.framebuffer=null;f.framebufferCount--;delete B[b.id]}
function x(b){var d;a.bindFramebuffer(36160,b.framebuffer);var e=b.colorAttachments;for(d=0;d<e.length;++d)l(36064+d,e[d]);for(d=e.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(36160,36064+d,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0);a.framebufferTexture2D(36160,36096,3553,null,0);a.framebufferTexture2D(36160,36128,3553,null,0);l(36096,b.depthAttachment);l(36128,b.stencilAttachment);l(33306,b.depthStencilAttachment);b=a.checkFramebufferStatus(36160);a.isContextLost()||
36053===b||r.raise("framebuffer configuration not supported, status = "+Kb[b]);a.bindFramebuffer(36160,y.next?y.next.framebuffer:null);y.cur=y.next;a.getError()}function w(a,d){function e(a,d){var f;r(y.next!==g,"can not update framebuffer which is currently in use");var h=0,l=0,C=!0,p=!0;f=null;var t=!0,u="rgba",w="uint8",Wa=1,Ma=null,La=null,Va=null,Ta=!1;if("number"===typeof a)h=a|0,l=d|0||h;else if(a){r.type(a,"object","invalid arguments for framebuffer");"shape"in a?(l=a.shape,r(Array.isArray(l)&&
2<=l.length,"invalid shape for framebuffer"),h=l[0],l=l[1]):("radius"in a&&(h=l=a.radius),"width"in a&&(h=a.width),"height"in a&&(l=a.height));if("color"in a||"colors"in a)f=a.color||a.colors,Array.isArray(f)&&r(1===f.length||b.webgl_draw_buffers,"multiple render targets not supported");if(!f){"colorCount"in a&&(Wa=a.colorCount|0,r(0<Wa,"invalid color buffer count"));"colorTexture"in a&&(t=!!a.colorTexture,u="rgba4");if("colorType"in a){w=a.colorType;if(t)r(b.oes_texture_float||!("float"===w||"float32"===
w),"you must enable OES_texture_float in order to use floating point framebuffer objects"),r(b.oes_texture_half_float||!("half float"===w||"float16"===w),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===w||"float16"===w)r(b.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),u="rgba16f";else if("float"===w||"float32"===w)r(b.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
u="rgba32f";r.oneOf(w,D,"invalid color type")}if("colorFormat"in a)if(u=a.colorFormat,0<=z.indexOf(u))t=!0;else if(0<=A.indexOf(u))t=!1;else if(t)r.oneOf(a.colorFormat,z,"invalid color format for texture");else r.oneOf(a.colorFormat,A,"invalid color format for renderbuffer")}if("depthTexture"in a||"depthStencilTexture"in a)Ta=!(!a.depthTexture&&!a.depthStencilTexture),r(!Ta||b.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?C=a.depth:(Ma=
a.depth,p=!1));"stencil"in a&&("boolean"===typeof a.stencil?p=a.stencil:(La=a.stencil,C=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?C=p=a.depthStencil:(Va=a.depthStencil,p=C=!1))}else h=l=1;var da=null,pa=null,B=null,E=null;if(Array.isArray(f))da=f.map(m);else if(f)da=[m(f)];else for(da=Array(Wa),f=0;f<Wa;++f)da[f]=n(h,l,t,u,w);r(b.webgl_draw_buffers||1>=da.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");r(da.length<=c.maxColorAttachments,
"too many color attachments, not supported");h=h||da[0].width;l=l||da[0].height;Ma?pa=m(Ma):C&&!p&&(pa=n(h,l,Ta,"depth","uint32"));La?B=m(La):p&&!C&&(B=n(h,l,!1,"stencil","uint8"));Va?E=m(Va):!Ma&&!La&&p&&C&&(E=n(h,l,Ta,"depth stencil","depth stencil"));r(1>=!!Ma+!!La+!!Va,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");C=null;for(f=0;f<da.length;++f)k(da[f],h,l),r(!da[f]||da[f].texture&&0<=Lb.indexOf(da[f].texture._texture.format)||da[f].renderbuffer&&0<=Mb.indexOf(da[f].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+f+" is invalid"),da[f]&&da[f].texture&&(p=ib[da[f].texture._texture.format]*bb[da[f].texture._texture.type],null===C?C=p:r(C===p,"all color attachments much have the same number of bits per pixel."));k(pa,h,l);r(!pa||pa.texture&&6402===pa.texture._texture.format||pa.renderbuffer&&33189===pa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");k(B,h,l);r(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
k(E,h,l);r(!E||E.texture&&34041===E.texture._texture.format||E.renderbuffer&&34041===E.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");v(g);g.width=h;g.height=l;g.colorAttachments=da;g.depthAttachment=pa;g.stencilAttachment=B;g.depthStencilAttachment=E;e.color=da.map(q);e.depth=q(pa);e.stencil=q(B);e.depthStencil=q(E);e.width=g.width;e.height=g.height;x(g);return e}var g=new t;f.framebufferCount++;e(a,d);return X(e,{resize:function(a,b){r(y.next!==g,"can not resize a framebuffer which is currently in use");
var c=Math.max(a|0,1),d=Math.max(b|0||c,1);if(c===g.width&&d===g.height)return e;for(var f=g.colorAttachments,h=0;h<f.length;++h)p(f[h],c,d);p(g.depthAttachment,c,d);p(g.stencilAttachment,c,d);p(g.depthStencilAttachment,c,d);g.width=e.width=c;g.height=e.height=d;x(g);return e},_reglType:"framebuffer",_framebuffer:g,destroy:function(){u(g);v(g)},use:function(a){y.setFBO({framebuffer:e},a)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},z=["rgba"],A=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&A.push("srgba");
b.ext_color_buffer_half_float&&A.push("rgba16f","rgb16f");b.webgl_color_buffer_float&&A.push("rgba32f");var D=["uint8"];b.oes_texture_half_float&&D.push("half float","float16");b.oes_texture_float&&D.push("float","float32");var E=0,B={};return X(y,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof t)?a:null},create:w,createCube:function(a){function e(a){var c;r(0>f.indexOf(y.next),"can not update framebuffer which is currently in use");
var g={color:null},h=0,k=null;c="rgba";var l="uint8",m=1;if("number"===typeof a)h=a|0;else if(a){r.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,r(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),r(h[0]===h[1],"cube framebuffer must be square"),h=h[0]):("radius"in a&&(h=a.radius|0),"width"in a?(h=a.width|0,"height"in a&&r(a.height===h,"must be square")):"height"in a&&(h=a.height|0));if("color"in a||"colors"in a)k=a.color||a.colors,Array.isArray(k)&&r(1===
k.length||b.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in a&&(m=a.colorCount|0,r(0<m,"invalid color buffer count")),"colorType"in a&&(r.oneOf(a.colorType,D,"invalid color type"),l=a.colorType),"colorFormat"in a&&(c=a.colorFormat,r.oneOf(a.colorFormat,z,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=a.depthStencil)}else h=1;if(k)if(Array.isArray(k))for(a=[],c=0;c<k.length;++c)a[c]=
k[c];else a=[k];else for(a=Array(m),k={radius:h,format:c,type:l},c=0;c<m;++c)a[c]=d.createCube(k);g.color=Array(a.length);for(c=0;c<a.length;++c)m=a[c],r("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),h=h||m.width,r(m.width===h&&m.height===h,"invalid cube map shape"),g.color[c]={target:34069,data:a[c]};for(c=0;6>c;++c){for(m=0;m<a.length;++m)g.color[m].target=34069+c;0<c&&(g.depth=f[0].depth,g.stencil=f[0].stencil,g.depthStencil=f[0].depthStencil);if(f[c])f[c](g);else f[c]=
w(g)}return X(e,{width:h,height:h,color:a})}var f=Array(6);e(a);return X(e,{faces:f,resize:function(a){var b=a|0;r(0<b&&b<=c.maxCubeMapSize,"invalid radius for cube fbo");if(b===e.width)return e;var d=e.color;for(a=0;a<d.length;++a)d[a].resize(b);for(a=0;6>a;++a)f[a].resize(b);e.width=e.height=b;return e},_reglType:"framebufferCube",destroy:function(){f.forEach(function(a){a.destroy()})}})},clear:function(){ea(B).forEach(u)},restore:function(){y.cur=null;y.next=null;y.dirty=!0;ea(B).forEach(function(b){b.framebuffer=
a.createFramebuffer();x(b)})}})}function jb(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function Nb(a,b,c,d,e){function f(a){if(a!==t.currentVAO){var c=b.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);t.currentVAO=a}}function g(c){if(c!==t.currentVAO){if(c)c.bindAttrs();else for(var d=b.angle_instanced_arrays,e=0;e<n.length;++e){var f=n[e];f.buffer?(a.enableVertexAttribArray(e),
a.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offfset),d&&d.vertexAttribDivisorANGLE(e,f.divisor)):(a.disableVertexAttribArray(e),a.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}t.currentVAO=c}}function h(){ea(q).forEach(function(a){a.destroy()})}function k(){this.id=++p;this.attributes=[];var a=b.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;q[this.id]=this;this.buffers=[]}function l(){b.oes_vertex_array_object&&ea(q).forEach(function(a){a.refresh()})}var m=c.maxAttributes,
n=Array(m);for(c=0;c<m;++c)n[c]=new jb;var p=0,q={},t={Record:jb,scope:{},state:n,currentVAO:null,targetVAO:null,restore:b.oes_vertex_array_object?l:function(){},createVAO:function(a){function c(a){r(Array.isArray(a),"arguments to vertex array constructor must be an array");r(a.length<m,"too many attributes");r(0<a.length,"must specify at least one attribute");for(var d=0;d<f.buffers.length;++d)f.buffers[d].destroy();f.buffers.length=0;d=f.attributes;d.length=a.length;for(var g=0;g<a.length;++g){var h=
a[g],k=d[g]=new jb;Array.isArray(h)||ca(h)||N(h)?(h=e.create(h,34962,!1,!0),k.buffer=e.getBuffer(h),k.size=k.buffer.dimension|0,k.normalized=!1,k.type=k.buffer.dtype,k.offset=0,k.stride=0,k.divisor=0,k.state=1,f.buffers.push(h)):e.getBuffer(h)?(k.buffer=e.getBuffer(h),k.size=k.buffer.dimension|0,k.normalized=!1,k.type=k.buffer.dtype,k.offset=0,k.stride=0,k.divisor=0,k.state=1):e.getBuffer(h.buffer)?(k.buffer=e.getBuffer(h.buffer),k.size=(+h.size||k.buffer.dimension)|0,k.normalized=!!h.normalized||
!1,"type"in h?(r.parameter(h.type,za,"invalid buffer type"),k.type=za[h.type]):k.type=k.buffer.dtype,k.offset=(h.offset||0)|0,k.stride=(h.stride||0)|0,k.divisor=(h.divisor||0)|0,k.state=1,r(1<=k.size&&4>=k.size,"size must be between 1 and 4"),r(0<=k.offset,"invalid offset"),r(0<=k.stride&&255>=k.stride,"stride must be between 0 and 255"),r(0<=k.divisor,"divisor must be positive"),r(!k.divisor||!!b.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(r(0<g,"first attribute must not be a constant"),
k.x=+h.x||0,k.y=+h.y||0,k.z=+h.z||0,k.w=+h.w||0,k.state=2):r(!1,"invalid attribute spec for location "+g)}f.refresh();return c}var f=new k;d.vaoCount+=1;c.destroy=function(){f.destroy()};c._vao=f;c._reglType="vao";return c(a)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(b){for(var c=0;c<n.length;++c){var d=n[c];d.buffer===b&&(a.disableVertexAttribArray(c),d.buffer=null)}},setVAO:b.oes_vertex_array_object?f:g,clear:b.oes_vertex_array_object?h:function(){}};
k.prototype.bindAttrs=function(){for(var c=b.angle_instanced_arrays,d=this.attributes,e=0;e<d.length;++e){var f=d[e];f.buffer?(a.enableVertexAttribArray(e),a.bindBuffer(34962,f.buffer.buffer),a.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offset),c&&c.vertexAttribDivisorANGLE(e,f.divisor)):(a.disableVertexAttribArray(e),a.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}for(c=d.length;c<m;++c)a.disableVertexAttribArray(c)};k.prototype.refresh=function(){var a=b.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),
this.bindAttrs(),t.currentVAO=this)};k.prototype.destroy=function(){if(this.vao){var a=b.oes_vertex_array_object;this===t.currentVAO&&(t.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}q[this.id]&&(delete q[this.id],--d.vaoCount)};return t}function Ob(a,b,c,d){function e(a,b,c,d){this.name=a;this.id=b;this.location=c;this.info=d}function f(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function g(c,d,e){var f=
35632===c?l:m,h=f[d];if(!h){var k=b.str(d),h=a.createShader(c);a.shaderSource(h,k);a.compileShader(h);r.shaderError(a,h,k,c,e);f[d]=h}return h}function h(a,b){this.id=q++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function k(c,h,l){var m;m=g(35632,c.fragId);var n=g(35633,c.vertId),p=c.program=a.createProgram();a.attachShader(p,m);a.attachShader(p,n);if(l)for(m=0;m<l.length;++m)n=l[m],a.bindAttribLocation(p,
n[0],n[1]);a.linkProgram(p);r.linkError(a,p,b.str(c.fragId),b.str(c.vertId),h);l=a.getProgramParameter(p,35718);d.profile&&(c.stats.uniformsCount=l);n=c.uniforms;for(m=0;m<l;++m)if(h=a.getActiveUniform(p,m))if(1<h.size)for(var q=0;q<h.size;++q){var t=h.name.replace("[0]","["+q+"]");f(n,new e(t,b.id(t),a.getUniformLocation(p,t),h))}else f(n,new e(h.name,b.id(h.name),a.getUniformLocation(p,h.name),h));l=a.getProgramParameter(p,35721);d.profile&&(c.stats.attributesCount=l);c=c.attributes;for(m=0;m<l;++m)(h=
a.getActiveAttrib(p,m))&&f(c,new e(h.name,b.id(h.name),a.getAttribLocation(p,h.name),h))}var l={},m={},n={},p=[],q=0;d.profile&&(c.getMaxUniformsCount=function(){var a=0;p.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;p.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var b=a.deleteShader.bind(a);ea(l).forEach(b);l={};ea(m).forEach(b);m={};p.forEach(function(b){a.deleteProgram(b.program)});
p.length=0;n={};c.shaderCount=0},program:function(a,b,d,e){r.command(0<=a,"missing vertex shader",d);r.command(0<=b,"missing fragment shader",d);var f=n[b];f||(f=n[b]={});var g=f[a];if(g&&!e)return g;b=new h(b,a);c.shaderCount++;k(b,d,e);g||(f[a]=b);p.push(b);return b},restore:function(){l={};m={};for(var a=0;a<p.length;++a)k(p[a],null,p[a].attributes.map(function(a){return[a.location,a.name]}))},shader:g,frag:-1,vert:-1}}function Pb(a,b,c,d,e,f,g){function h(k){var l;null===b.next?(r(e.preserveDrawingBuffer,
'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),l=5121):(r(null!==b.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),l=b.next.colorAttachments[0].texture._texture.type,f.oes_texture_float?(r(5121===l||5126===l,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===l&&r(g.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
r(5121===l,"Reading from a framebuffer is only allowed for the type 'uint8'"));var m=0,n=0,p=d.framebufferWidth,q=d.framebufferHeight,t=null;ca(k)?t=k:k&&(r.type(k,"object","invalid arguments to regl.read()"),m=k.x|0,n=k.y|0,r(0<=m&&m<d.framebufferWidth,"invalid x offset for regl.read"),r(0<=n&&n<d.framebufferHeight,"invalid y offset for regl.read"),p=(k.width||d.framebufferWidth-m)|0,q=(k.height||d.framebufferHeight-n)|0,t=k.data||null);t&&(5121===l?r(t instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===l&&r(t instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));r(0<p&&p+m<=d.framebufferWidth,"invalid width for read pixels");r(0<q&&q+n<=d.framebufferHeight,"invalid height for read pixels");c();k=p*q*4;t||(5121===l?t=new Uint8Array(k):5126===l&&(t=t||new Float32Array(k)));r.isTypedArray(t,"data buffer for regl.read() must be a typedarray");r(t.byteLength>=k,"data buffer for regl.read() too small");a.pixelStorei(3333,4);a.readPixels(m,n,p,
q,6408,l,t);return t}function k(a){var c;b.setFBO({framebuffer:a.framebuffer},function(){c=h(a)});return c}return function(a){return a&&"framebuffer"in a?k(a):h(a)}}function Ga(a){return Array.prototype.slice.call(a)}function Ha(a){return Ga(a).join("")}function Qb(){function a(){var b=[],d=[];return X(function(){b.push.apply(b,Ga(arguments))},{def:function(){var a="v"+c++;d.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,Ga(arguments)),b.push(";"));return a},toString:function(){return Ha([0<
d.length?"var "+d.join(",")+";":"",Ha(b)])}})}function b(){function c(a,b){e(a,b,"=",d.def(a,b),";")}var d=a(),e=a(),f=d.toString,g=e.toString;return X(function(){d.apply(d,Ga(arguments))},{def:d.def,entry:d,exit:e,save:c,set:function(a,b,e){c(a,b);d(a,b,"=",e,";")},toString:function(){return f()+g()}})}var c=0,d=[],e=[],f=a(),g={};return{global:f,link:function(a){for(var b=0;b<e.length;++b)if(e[b]===a)return d[b];b="g"+c++;d.push(b);e.push(a);return b},block:a,proc:function(a,c){function d(){var a=
"a"+e.length;e.push(a);return a}var e=[];c=c||0;for(var f=0;f<c;++f)d();var f=b(),h=f.toString;return g[a]=X(f,{arg:d,toString:function(){return Ha(["function(",e.join(),"){",h(),"}"])}})},scope:b,cond:function(){var a=Ha(arguments),c=b(),d=b(),e=c.toString,f=d.toString;return X(c,{then:function(){c.apply(c,Ga(arguments));return this},"else":function(){d.apply(d,Ga(arguments));return this},toString:function(){var b=f();b&&(b="else{"+b+"}");return Ha(["if(",a,"){",e(),"}",b])}})},compile:function(){var a=
['"use strict";',f,"return {"];Object.keys(g).forEach(function(b){a.push('"',b,'":',g[b].toString(),",")});a.push("}");var b=Ha(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,d.concat(b)).apply(null,e)}}}function cb(a){return Array.isArray(a)||ca(a)||N(a)}function xb(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function ma(a,b,c,d){this.thisDep=a;this.contextDep=b;this.propDep=c;this.append=d}function xa(a){return a&&
!(a.thisDep||a.contextDep||a.propDep)}function V(a){return new ma(!1,!1,!1,a)}function la(a,b){var c=a.type;return 0===c?(c=a.data.length,new ma(!0,1<=c,2<=c,b)):4===c?(c=a.data,new ma(c.thisDep,c.contextDep,c.propDep,b)):new ma(3===c,2===c,1===c,b)}function Rb(a,b,c,d,e,f,g,h,k,l,m,n,p,q,t){function v(a){return a.replace(".","_")}function u(a,b,c){var d=v(a);Oa.push(a);Na[d]=ta[d]=!!c;ua[d]=b}function w(a,b,c){var d=v(a);Oa.push(a);Array.isArray(c)?(ta[d]=c.slice(),Na[d]=c.slice()):ta[d]=Na[d]=c;
va[d]=b}function x(){var a=Qb(),c=a.link,d=a.global;a.id=na++;a.batchId="0";var e=c(ja),f=a.shared={props:"a0"};Object.keys(ja).forEach(function(a){f[a]=d.def(e,".",a)});r.optional(function(){a.CHECK=c(r);a.commandStr=r.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")};ga.invalidBlendCombinations=yb});var g=a.next={},h=a.current={};Object.keys(va).forEach(function(a){Array.isArray(ta[a])&&(g[a]=d.def(f.next,
".",a),h[a]=d.def(f.current,".",a))});var k=a.constants={};Object.keys(ga).forEach(function(a){k[a]=d.def(JSON.stringify(ga[a]))});a.invoke=function(b,d){switch(d.type){case 0:var e=["this",f.context,f.props,a.batchId];return b.def(c(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(f.props,d.data);case 2:return b.def(f.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref}};a.attribCache={};var m={};a.scopeAttrib=function(a){a=
b.id(a);if(a in m)return m[a];var d=l.scope[a];d||(d=l.scope[a]=new ea);return m[a]=c(d)};return a}function y(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=V(function(a,b){return d});c.enable=d}else if("profile"in a){var e=a.profile;c=la(e,function(a,b){return a.invoke(b,e)})}return c}function z(a,b){var c=a["static"],d=a.dynamic;if("framebuffer"in c){var e=c.framebuffer;return e?(e=h.getFramebuffer(e),r.command(e,"invalid framebuffer object"),V(function(a,b){var c=
a.link(e),d=a.shared;b.set(d.framebuffer,".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):V(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in d){var f=d.framebuffer;return la(f,function(a,b){var c=a.invoke(b,f),d=a.shared,e=d.framebuffer,g=b.def(e,".getFramebuffer(",
c,")");r.optional(function(){a.assert(b,"!"+c+"||"+g,"invalid framebuffer object")});b.set(e,".next",g);d=d.context;b.set(d,".framebufferWidth",g+"?"+g+".width:"+d+".drawingBufferWidth");b.set(d,".framebufferHeight",g+"?"+g+".height:"+d+".drawingBufferHeight");return g})}return null}function A(a,b,c){function d(a){if(a in e){var g=e[a];r.commandType(g,"object","invalid "+a,c.commandStr);var h=!0,k=g.x|0,l=g.y|0,m,n;"width"in g?(m=g.width|0,r.command(0<=m,"invalid "+a,c.commandStr)):h=!1;"height"in
g?(n=g.height|0,r.command(0<=n,"invalid "+a,c.commandStr)):h=!1;return new ma(!h&&b&&b.thisDep,!h&&b&&b.contextDep,!h&&b&&b.propDep,function(a,b){var c=a.shared.context,d=m;"width"in g||(d=b.def(c,".","framebufferWidth","-",k));var e=n;"height"in g||(e=b.def(c,".","framebufferHeight","-",l));return[k,l,d,e]})}if(a in f){var p=f[a],h=la(p,function(b,c){var d=b.invoke(c,p);r.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var e=b.shared.context,f=c.def(d,".x|0"),g=c.def(d,
".y|0"),h=c.def('"width" in ',d,"?",d,".width|0:","(",e,".","framebufferWidth","-",f,")"),k=c.def('"height" in ',d,"?",d,".height|0:","(",e,".","framebufferHeight","-",g,")");r.optional(function(){b.assert(c,h+">=0&&"+k+">=0","invalid "+a)});return[f,g,h,k]});b&&(h.thisDep=h.thisDep||b.thisDep,h.contextDep=h.contextDep||b.contextDep,h.propDep=h.propDep||b.propDep);return h}return b?new ma(b.thisDep,b.contextDep,b.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),
b.def(c,".","framebufferHeight")]}):null}var e=a["static"],f=a.dynamic;if(a=d("viewport")){var g=a;a=new ma(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=g.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:d("scissor.box")}}function D(a,b){var c=a["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<Object.keys(b.dynamic).length)return null;var c=b["static"],d=Object.keys(c);if(0<d.length&&
"number"===typeof c[d[0]]){for(var e=[],f=0;f<d.length;++f)r("number"===typeof c[d[f]],"must specify all vertex attribute locations when using vaos"),e.push([c[d[f]]|0,d[f]]);return e}}return null}function E(a,c,d){function e(a){if(a in f){var c=b.id(f[a]);r.optional(function(){m.shader(zb[a],c,r.guessCommand())});var d=V(function(){return c});d.id=c;return d}if(a in g){var h=g[a];return la(h,function(b,c){var d=b.invoke(c,h),e=c.def(b.shared.strings,".id(",d,")");r.optional(function(){c(b.shared.shader,
".shader(",zb[a],",",e,",",b.command,");")});return e})}return null}var f=a["static"],g=a.dynamic,h=e("frag"),k=e("vert"),l=null;xa(h)&&xa(k)?(l=m.program(k.id,h.id,null,d),a=V(function(a,b){return a.link(l)})):a=new ma(h&&h.thisDep||k&&k.thisDep,h&&h.contextDep||k&&k.contextDep,h&&h.propDep||k&&k.propDep,function(a,b){var c=a.shared.shader,d;d=h?h.append(a,b):b.def(c,".","frag");var e;e=k?k.append(a,b):b.def(c,".","vert");var f=c+".program("+e+","+d;r.optional(function(){f+=","+a.command});return b.def(f+
")")});return{frag:h,vert:k,progVar:a,program:l}}function B(a,b){function c(a,f){if(a in d){var h=d[a]|0;r.command(!f||0<=h,"invalid "+a,b.commandStr);return V(function(a,b){f&&(a.OFFSET=h);return h})}if(a in e){var k=e[a];return la(k,function(b,c){var d=b.invoke(c,k);f&&(b.OFFSET=d,r.optional(function(){b.assert(c,d+">=0","invalid "+a)}));return d})}return f&&g?V(function(a,b){a.OFFSET="0";return 0}):null}var d=a["static"],e=a.dynamic,g=function(){if("elements"in d){var a=d.elements;cb(a)?a=f.getElements(f.create(a,
!0)):a&&(a=f.getElements(a),r.command(a,"invalid elements",b.commandStr));var c=V(function(b,c){if(a){var d=b.link(a);return b.ELEMENTS=d}return b.ELEMENTS=null});c.value=a;return c}if("elements"in e){var g=e.elements;return la(g,function(a,b){var c=a.shared,d=c.isBufferArgs,c=c.elements,e=a.invoke(b,g),f=b.def("null"),d=b.def(d,"(",e,")"),h=a.cond(d).then(f,"=",c,".createStream(",e,");")["else"](f,"=",c,".getElements(",e,");");r.optional(function(){a.assert(h["else"],"!"+e+"||"+f,"invalid elements")});
b.entry(h);b.exit(a.cond(d).then(c,".destroyStream(",f,");"));return a.ELEMENTS=f})}return null}(),h=c("offset",!0);return{elements:g,primitive:function(){if("primitive"in d){var a=d.primitive;r.commandParameter(a,Ca,"invalid primitve",b.commandStr);return V(function(b,c){return Ca[a]})}if("primitive"in e){var c=e.primitive;return la(c,function(a,b){var d=a.constants.primTypes,e=a.invoke(b,c);r.optional(function(){a.assert(b,e+" in "+d,"invalid primitive, must be one of "+Object.keys(Ca))});return b.def(d,
"[",e,"]")})}return g?xa(g)?g.value?V(function(a,b){return b.def(a.ELEMENTS,".primType")}):V(function(){return 4}):new ma(g.thisDep,g.contextDep,g.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in d){var a=d.count|0;r.command("number"===typeof a&&0<=a,"invalid vertex count",b.commandStr);return V(function(){return a})}if("count"in e){var c=e.count;return la(c,function(a,b){var d=a.invoke(b,c);r.optional(function(){a.assert(b,"typeof "+
d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(g){if(xa(g)){if(g)return h?new ma(h.thisDep,h.contextDep,h.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);r.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):V(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var f=V(function(){return-1});r.optional(function(){f.MISSING=!0});return f}var k=new ma(g.thisDep||h.thisDep,g.contextDep||h.contextDep,
g.propDep||h.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});r.optional(function(){k.DYNAMIC=!0});return k}return null}(),instances:c("instances",!1),offset:h}}function G(a,b){var c=a["static"],e=a.dynamic,f={};Oa.forEach(function(a){function g(b,d){if(a in c){var k=b(c[a]);f[h]=V(function(){return k})}else if(a in e){var l=e[a];f[h]=la(l,function(a,b){return d(a,b,a.invoke(b,l))})}}var h=v(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(c){r.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,d){r.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return g(function(c){r.commandParameter(c,Ia,"invalid "+a,b.commandStr);return Ia[c]},function(b,c,d){var e=b.constants.compareFuncs;r.optional(function(){b.assert(c,d+" in "+e,"invalid "+a+", must be one of "+Object.keys(Ia))});return c.def(e,"[",d,"]")});case "depth.range":return g(function(a){r.command(O(a)&&2===a.length&&
"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){r.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),e=b.def("+",c,"[1]");return[d,e]});case "blend.func":return g(function(a){r.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,
d="srcAlpha"in a?a.srcAlpha:a.src,e="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;r.commandParameter(c,qa,h+".srcRGB",b.commandStr);r.commandParameter(d,qa,h+".srcAlpha",b.commandStr);r.commandParameter(e,qa,h+".dstRGB",b.commandStr);r.commandParameter(a,qa,h+".dstAlpha",b.commandStr);r.command(-1===yb.indexOf(c+", "+e),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+e+")",b.commandStr);return[qa[c],qa[e],qa[d],qa[a]]},function(b,c,d){function e(g,h){var k=c.def('"',g,
h,'" in ',d,"?",d,".",g,h,":",d,".",g);r.optional(function(){b.assert(c,k+" in "+f,"invalid "+a+"."+g+h+", must be one of "+Object.keys(qa))});return k}var f=b.constants.blendFuncs;r.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=e("src","RGB"),h=e("dst","RGB");r.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var k=c.def(f,
"[",g,"]"),l=c.def(f,"[",e("src","Alpha"),"]"),m=c.def(f,"[",h,"]"),n=c.def(f,"[",e("dst","Alpha"),"]");return[k,m,l,n]});case "blend.equation":return g(function(c){if("string"===typeof c)return r.commandParameter(c,fa,"invalid "+a,b.commandStr),[fa[c],fa[c]];if("object"===typeof c)return r.commandParameter(c.rgb,fa,a+".rgb",b.commandStr),r.commandParameter(c.alpha,fa,a+".alpha",b.commandStr),[fa[c.rgb],fa[c.alpha]];r.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var e=b.constants.blendEquations,
f=c.def(),g=c.def(),h=b.cond("typeof ",d,'==="string"');r.optional(function(){function c(a,d,f){b.assert(a,f+" in "+e,"invalid "+d+", must be one of "+Object.keys(fa))}c(h.then,a,d);b.assert(h["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(h["else"],a+".rgb",d+".rgb");c(h["else"],a+".alpha",d+".alpha")});h.then(f,"=",g,"=",e,"[",d,"];");h["else"](f,"=",e,"[",d,".rgb];",g,"=",e,"[",d,".alpha];");c(h);return[f,g]});case "blend.color":return g(function(a){r.command(O(a)&&4===a.length,"blend.color must be a 4d array",
b.commandStr);return F(4,function(b){return+a[b]})},function(a,b,c){r.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return F(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return g(function(a){r.commandType(a,"number",h,b.commandStr);return a|0},function(a,b,c){r.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return g(function(c){r.commandType(c,
"object",h,b.commandStr);var d=c.cmp||"keep",e=c.ref||0;c="mask"in c?c.mask:-1;r.commandParameter(d,Ia,a+".cmp",b.commandStr);r.commandType(e,"number",a+".ref",b.commandStr);r.commandType(c,"number",a+".mask",b.commandStr);return[Ia[d],e,c]},function(a,b,c){var d=a.constants.compareFuncs;r.optional(function(){function e(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var e=b.def('"cmp" in ',
c,"?",d,"[",c,".cmp]",":",7680),f=b.def(c,".ref|0"),g=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[e,f,g]});case "stencil.opFront":case "stencil.opBack":return g(function(c){r.commandType(c,"object",h,b.commandStr);var d=c.fail||"keep",e=c.zfail||"keep";c=c.zpass||"keep";r.commandParameter(d,ya,a+".fail",b.commandStr);r.commandParameter(e,ya,a+".zfail",b.commandStr);r.commandParameter(c,ya,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,ya[d],ya[e],ya[c]]},function(b,c,d){function e(g){r.optional(function(){b.assert(c,
'!("'+g+'" in '+d+")||("+d+"."+g+" in "+f+")","invalid "+a+"."+g+", must be one of "+Object.keys(ya))});return c.def('"',g,'" in ',d,"?",f,"[",d,".",g,"]:",7680)}var f=b.constants.stencilOps;r.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("zpass")]});case "polygonOffset.offset":return g(function(a){r.commandType(a,"object",h,b.commandStr);var c=a.factor|0;a=a.units|0;r.commandType(c,"number",h+".factor",b.commandStr);
r.commandType(a,"number",h+".units",b.commandStr);return[c,a]},function(b,c,d){r.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var e=c.def(d,".factor|0"),f=c.def(d,".units|0");return[e,f]});case "cull.face":return g(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);r.command(!!c,h,b.commandStr);return c},function(a,b,c){r.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(a){r.command("number"===
typeof a&&a>=d.lineWidthDims[0]&&a<=d.lineWidthDims[1],"invalid line width, must be a positive number between "+d.lineWidthDims[0]+" and "+d.lineWidthDims[1],b.commandStr);return a},function(a,b,c){r.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+d.lineWidthDims[0]+"&&"+c+"<="+d.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return g(function(a){r.commandParameter(a,kb,h,b.commandStr);return kb[a]},function(a,b,c){r.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return g(function(a){r.command(O(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){r.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return F(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return g(function(a){r.command("object"===typeof a&&a,
h,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;r.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,b,c){r.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),e=b.def("!!",c,".invert");return[d,e]})}});return f}function I(a,b){var c=a["static"],d=a.dynamic,e={};Object.keys(c).forEach(function(a){var d=c[a],f;if("number"===
typeof d||"boolean"===typeof d)f=V(function(){return d});else if("function"===typeof d){var g=d._reglType;"texture2d"===g||"textureCube"===g?f=V(function(a){return a.link(d)}):"framebuffer"===g||"framebufferCube"===g?(r.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),f=V(function(a){return a.link(d.color[0])})):r.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else O(d)?f=V(function(b){return b.global.def("[",F(d.length,function(c){r.command("number"===
typeof d[c]||"boolean"===typeof d[c],"invalid uniform "+a,b.commandStr);return d[c]}),"]")}):r.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);f.value=d;e[a]=f});Object.keys(d).forEach(function(a){var b=d[a];e[a]=la(b,function(a,c){return a.invoke(c,b)})});return e}function H(a,c){var d=a["static"],f=a.dynamic,g={};Object.keys(d).forEach(function(a){var f=d[a],h=b.id(a),k=new ea;if(cb(f))k.state=1,k.buffer=e.getBuffer(e.create(f,34962,!1,!0)),k.type=0;else{var l=e.getBuffer(f);
if(l)k.state=1,k.buffer=l,k.type=0;else if(r.command("object"===typeof f&&f,"invalid data for attribute "+a,c.commandStr),"constant"in f){var m=f.constant;k.buffer="null";k.state=2;"number"===typeof m?k.x=m:(r.command(O(m)&&0<m.length&&4>=m.length,"invalid constant for attribute "+a,c.commandStr),Ja.forEach(function(a,b){b<m.length&&(k[a]=m[b])}))}else{l=cb(f.buffer)?e.getBuffer(e.create(f.buffer,34962,!1,!0)):e.getBuffer(f.buffer);r.command(!!l,'missing buffer for attribute "'+a+'"',c.commandStr);
var n=f.offset|0;r.command(0<=n,'invalid offset for attribute "'+a+'"',c.commandStr);var p=f.stride|0;r.command(0<=p&&256>p,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var q=f.size|0;r.command(!("size"in f)||0<q&&4>=q,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var t=!!f.normalized,ka=0;"type"in f&&(r.commandParameter(f.type,za,"invalid type for attribute "+a,c.commandStr),ka=za[f.type]);var C=f.divisor|0;"divisor"in f&&(r.command(0===
C||ra,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),r.command(0<=C,'invalid divisor for attribute "'+a+'"',c.commandStr));r.optional(function(){var b=c.commandStr,d="buffer offset divisor normalized type size stride".split(" ");Object.keys(f).forEach(function(c){r.command(0<=d.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+d+")",b)})});k.buffer=l;k.state=1;k.size=q;k.normalized=t;k.type=ka||l.dtype;k.offset=n;k.stride=
p;k.divisor=C}}g[a]=V(function(a,b){var c=a.attribCache;if(h in c)return c[h];var d={isStream:!1};Object.keys(k).forEach(function(a){d[a]=k[a]});k.buffer&&(d.buffer=a.link(k.buffer),d.type=d.type||d.buffer+".dtype");return c[h]=d})});Object.keys(f).forEach(function(a){var b=f[a];g[a]=la(b,function(c,d){function e(a){d(m[a],"=",f,".",a,"|0;")}var f=c.invoke(d,b),g=c.shared,h=c.constants,k=g.isBufferArgs,l=g.buffer;r.optional(function(){c.assert(d,f+"&&(typeof "+f+'==="object"||typeof '+f+'==="function")&&('+
k+"("+f+")||"+l+".getBuffer("+f+")||"+l+".getBuffer("+f+".buffer)||"+k+"("+f+'.buffer)||("constant" in '+f+"&&(typeof "+f+'.constant==="number"||'+g.isArrayLike+"("+f+".constant))))",'invalid dynamic attribute "'+a+'"')});var m={isStream:d.def(!1)},n=new ea;n.state=1;Object.keys(n).forEach(function(a){m[a]=d.def(""+n[a])});var p=m.buffer,q=m.type;d("if(",k,"(",f,")){",m.isStream,"=true;",p,"=",l,".createStream(",34962,",",f,");",q,"=",p,".dtype;","}else{",p,"=",l,".getBuffer(",f,");","if(",p,"){",
q,"=",p,".dtype;",'}else if("constant" in ',f,"){",m.state,"=",2,";","if(typeof "+f+'.constant === "number"){',m[Ja[0]],"=",f,".constant;",Ja.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",Ja.map(function(a,b){return m[a]+"="+f+".constant.length>"+b+"?"+f+".constant["+b+"]:0;"}).join(""),"}}else{","if(",k,"(",f,".buffer)){",p,"=",l,".createStream(",34962,",",f,".buffer);","}else{",p,"=",l,".getBuffer(",f,".buffer);","}",q,'="type" in ',f,"?",h.glTypes,"[",f,".type]:",p,".dtype;",
m.normalized,"=!!",f,".normalized;");e("size");e("offset");e("stride");e("divisor");d("}}");d.exit("if(",m.isStream,"){",l,".destroyStream(",p,");","}");return m})});return g}function J(a,b){var c=a["static"],d=a.dynamic;if("vao"in c){var e=c.vao;null!==e&&null===l.getVAO(e)&&(e=l.createVAO(e));return V(function(a){return a.link(l.getVAO(e))})}if("vao"in d){var f=d.vao;return la(f,function(a,b){var c=a.invoke(b,f);return b.def(a.shared.vao+".getVAO("+c+")")})}return null}function K(a){var b=a["static"],
c=a.dynamic,d={};Object.keys(b).forEach(function(a){var c=b[a];d[a]=V(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var b=c[a];d[a]=la(b,function(a,c){return a.invoke(c,b)})});return d}function L(a,b,d,e,f){function g(a){var b=p[a];b&&(t[a]=b)}var h=a["static"],k=a.dynamic;r.optional(function(){function a(c){Object.keys(c).forEach(function(a){r.command(0<=b.indexOf(a),'unknown parameter "'+a+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(Oa);
a(h);a(k)});var m=D(a,b),n=z(a,f),p=A(a,n,f),q=B(a,f),t=G(a,f),C=E(a,f,m);g("viewport");g(v("scissor.box"));var u=0<Object.keys(t).length,n={framebuffer:n,draw:q,shader:C,state:t,dirty:u,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};n.profile=y(a,f);n.uniforms=I(d,f);n.drawVAO=n.scopeVAO=J(a,f);if(!n.drawVAO&&C.program&&!m&&c.angle_instanced_arrays){var w=!0;a=C.program.attributes.map(function(a){a=b["static"][a];w=w&&!!a;return a});if(w&&0<a.length){var x=l.getVAO(l.createVAO(a));n.drawVAO=
new ma(null,null,null,function(a,b){return a.link(x)});n.useVAO=!0}}m?n.useVAO=!0:n.attributes=H(b,f);n.context=K(e,f);return n}function M(a,b,c){var d=a.shared.context,e=a.scope();Object.keys(c).forEach(function(f){b.save(d,"."+f);e(d,".",f,"=",c[f].append(a,b),";")});b(e)}function N(a,b,c,d){var e=a.shared,f=e.gl,g=e.framebuffer,h;ha&&(h=b.def(e.extensions,".webgl_draw_buffers"));var k=a.constants,e=k.drawBuffer,k=k.backBuffer;a=c?c.append(a,b):b.def(g,".next");d||b("if(",a,"!==",g,".cur){");b("if(",
a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&b(h,".drawBuffersWEBGL(",e,"[",a,".colorAttachments.length]);");b("}else{",f,".bindFramebuffer(",36160,",null);");ha&&b(h,".drawBuffersWEBGL(",k,");");b("}",g,".cur=",a,";");d||b("}")}function U(a,b,c){var d=a.shared,e=d.gl,f=a.current,g=a.next,h=d.current,k=d.next,l=a.cond(h,".dirty");Oa.forEach(function(b){b=v(b);if(!(b in c.state)){var d,m;if(b in g){d=g[b];m=f[b];var n=F(ta[b].length,function(a){return l.def(d,"[",a,"]")});l(a.cond(n.map(function(a,
b){return a+"!=="+m+"["+b+"]"}).join("||")).then(e,".",va[b],"(",n,");",n.map(function(a,b){return m+"["+b+"]="+a}).join(";"),";"))}else d=l.def(k,".",b),n=a.cond(d,"!==",h,".",b),l(n),b in ua?n(a.cond(d).then(e,".enable(",ua[b],");")["else"](e,".disable(",ua[b],");"),h,".",b,"=",d,";"):n(e,".",va[b],"(",d,");",h,".",b,"=",d,";")}});0===Object.keys(c.state).length&&l(h,".dirty=false;");b(l)}function S(a,b,c,d){var e=a.shared,f=a.current,g=e.current,h=e.gl;xb(Object.keys(c)).forEach(function(e){var k=
c[e];if(!d||d(k)){var l=k.append(a,b);if(ua[e]){var m=ua[e];xa(k)?l?b(h,".enable(",m,");"):b(h,".disable(",m,");"):b(a.cond(l).then(h,".enable(",m,");")["else"](h,".disable(",m,");"));b(g,".",e,"=",l,";")}else if(O(l)){var n=f[e];b(h,".",va[e],"(",l,");",l.map(function(a,b){return n+"["+b+"]="+a}).join(";"),";")}else b(h,".",va[e],"(",l,");",g,".",e,"=",l,";")}})}function P(a,b){ra&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function Q(a,b,c,d,e){function f(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function g(a){r=b.def();a(r,"=",f(),";");"string"===typeof e?a(m,".count+=",e,";"):a(m,".count++;");q&&(d?(t=b.def(),a(t,"=",p,".getNumPendingQueries();")):a(p,".beginQuery(",m,");"))}function h(a){a(m,".cpuTime+=",f(),"-",r,";");q&&(d?a(p,".pushScopeStats(",t,",",p,".getNumPendingQueries(),",m,");"):a(p,".endQuery();"))}function k(a){var c=b.def(n,".profile");b(n,".profile=",a,";");b.exit(n,".profile=",c,";")}var l=a.shared,m=a.stats,n=l.current,
p=l.timer;c=c.profile;var r,t;if(c){if(xa(c)){c.enable?(g(b),h(b.exit),k("true")):k("false");return}c=c.append(a,b);k(c)}else c=b.def(n,".profile");l=a.block();g(l);b("if(",c,"){",l,"}");a=a.block();h(a);b.exit("if(",c,"){",a,"}")}function T(a,b,c,d,e){function f(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,d,e){function f(){b("if(!",n,".buffer){",l,".enableVertexAttribArray(",
m,");}");var c=e.type,g;g=e.size?b.def(e.size,"||",d):d;b("if(",n,".type!==",c,"||",n,".size!==",g,"||",q.map(function(a){return n+"."+a+"!=="+e[a]}).join("||"),"){",l,".bindBuffer(",34962,",",p,".buffer);",l,".vertexAttribPointer(",[m,g,c,e.normalized,e.stride,e.offset],");",n,".type=",c,";",n,".size=",g,";",q.map(function(a){return n+"."+a+"="+e[a]+";"}).join(""),"}");ra&&(c=e.divisor,b("if(",n,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,c],");",n,".divisor=",c,";}"))}function k(){b("if(",
n,".buffer){",l,".disableVertexAttribArray(",m,");",n,".buffer=null;","}if(",Ja.map(function(a,b){return n+"."+a+"!=="+r[b]}).join("||"),"){",l,".vertexAttrib4f(",m,",",r,");",Ja.map(function(a,b){return n+"."+a+"="+r[b]+";"}).join(""),"}")}var l=h.gl,m=b.def(c,".location"),n=b.def(h.attributes,"[",m,"]");c=e.state;var p=e.buffer,r=[e.x,e.y,e.z,e.w],q=["buffer","normalized","offset","stride"];1===c?f():2===c?k():(b("if(",c,"===",1,"){"),f(),b("}else{"),k(),b("}"))}var h=a.shared;d.forEach(function(d){var h=
d.name,k=c.attributes[h],l;if(k){if(!e(k))return;l=k.append(a,b)}else{if(!e(Ab))return;var m=a.scopeAttrib(h);r.optional(function(){a.assert(b,m+".state","missing attribute "+h)});l={};Object.keys(new ea).forEach(function(a){l[a]=b.def(m,".",a)})}g(a.link(d),f(d.info.type),l)})}function X(a,c,d,e,f){for(var g=a.shared,h=g.gl,k,l=0;l<e.length;++l){var m=e[l],n=m.name,p=m.info.type,q=d.uniforms[n],m=a.link(m)+".location",t;if(q){if(!f(q))continue;if(xa(q)){var C=q.value;r.command(null!==C&&"undefined"!==
typeof C,'missing uniform "'+n+'"',a.commandStr);if(35678===p||35680===p)r.command("function"===typeof C&&(35678===p&&("texture2d"===C._reglType||"framebuffer"===C._reglType)||35680===p&&("textureCube"===C._reglType||"framebufferCube"===C._reglType)),"invalid texture for uniform "+n,a.commandStr),q=a.link(C._texture||C.color[0]._texture),c(h,".uniform1i(",m,",",q+".bind());"),c.exit(q,".unbind();");else if(35674===p||35675===p||35676===p){r.optional(function(){r.command(O(C),"invalid matrix for uniform "+
n,a.commandStr);r.command(35674===p&&4===C.length||35675===p&&9===C.length||35676===p&&16===C.length,"invalid length for matrix uniform "+n,a.commandStr)});var q=a.global.def("new Float32Array(["+Array.prototype.slice.call(C)+"])"),u=2;35675===p?u=3:35676===p&&(u=4);c(h,".uniformMatrix",u,"fv(",m,",false,",q,");")}else{switch(p){case 5126:r.commandType(C,"number","uniform "+n,a.commandStr);k="1f";break;case 35664:r.command(O(C)&&2===C.length,"uniform "+n,a.commandStr);k="2f";break;case 35665:r.command(O(C)&&
3===C.length,"uniform "+n,a.commandStr);k="3f";break;case 35666:r.command(O(C)&&4===C.length,"uniform "+n,a.commandStr);k="4f";break;case 35670:r.commandType(C,"boolean","uniform "+n,a.commandStr);k="1i";break;case 5124:r.commandType(C,"number","uniform "+n,a.commandStr);k="1i";break;case 35671:r.command(O(C)&&2===C.length,"uniform "+n,a.commandStr);k="2i";break;case 35667:r.command(O(C)&&2===C.length,"uniform "+n,a.commandStr);k="2i";break;case 35672:r.command(O(C)&&3===C.length,"uniform "+n,a.commandStr);
k="3i";break;case 35668:r.command(O(C)&&3===C.length,"uniform "+n,a.commandStr);k="3i";break;case 35673:r.command(O(C)&&4===C.length,"uniform "+n,a.commandStr);k="4i";break;case 35669:r.command(O(C)&&4===C.length,"uniform "+n,a.commandStr),k="4i"}c(h,".uniform",k,"(",m,",",O(C)?Array.prototype.slice.call(C):C,");")}continue}else t=q.append(a,c)}else{if(!f(Ab))continue;t=c.def(g.uniforms,"[",b.id(n),"]")}35678===p?c("if(",t,"&&",t,'._reglType==="framebuffer"){',t,"=",t,".color[0];","}"):35680===p&&
c("if(",t,"&&",t,'._reglType==="framebufferCube"){',t,"=",t,".color[0];","}");r.optional(function(){function b(d,e){a.assert(c,d,'bad data or missing for uniform "'+n+'".  '+e)}function d(a){b("typeof "+t+'==="'+a+'"',"invalid type, expected "+a)}function e(c,d){b(g.isArrayLike+"("+t+")&&"+t+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function f(c){b("typeof "+t+'==="function"&&'+t+'._reglType==="texture'+(3553===c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(p){case 5124:d("number");
break;case 35667:e(2,"number");break;case 35668:e(3,"number");break;case 35669:e(4,"number");break;case 5126:d("number");break;case 35664:e(2,"number");break;case 35665:e(3,"number");break;case 35666:e(4,"number");break;case 35670:d("boolean");break;case 35671:e(2,"boolean");break;case 35672:e(3,"boolean");break;case 35673:e(4,"boolean");break;case 35674:e(4,"number");break;case 35675:e(9,"number");break;case 35676:e(16,"number");break;case 35678:f(3553);break;case 35680:f(34067)}});q=1;switch(p){case 35678:case 35680:q=
c.def(t,"._texture");c(h,".uniform1i(",m,",",q,".bind());");c.exit(q,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2i";q=2;break;case 35668:case 35672:k="3i";q=3;break;case 35669:case 35673:k="4i";q=4;break;case 5126:k="1f";break;case 35664:k="2f";q=2;break;case 35665:k="3f";q=3;break;case 35666:k="4f";q=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}c(h,".uniform",k,"(",m,",");if("M"===k.charAt(0)){var m=Math.pow(p-
35674+2,2),v=a.global.def("new Float32Array(",m,")");c("false,(Array.isArray(",t,")||",t," instanceof Float32Array)?",t,":(",F(m,function(a){return v+"["+a+"]="+t+"["+a+"]"}),",",v,")")}else 1<q?c(F(q,function(a){return t+"["+a+"]"})):c(t);c(");")}}function R(a,b,c,d){function e(f){var g=m[f];return g?g.contextDep&&d.contextDynamic||g.propDep?g.append(a,c):g.append(a,b):b.def(l,".",f)}function f(){function a(){c(u,".drawElementsInstancedANGLE(",[p,t,v,q+"<<(("+v+"-5121)>>1)",C],");")}function b(){c(u,
".drawArraysInstancedANGLE(",[p,q,t,C],");")}n?w?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}function g(){function a(){c(k+".drawElements("+[p,t,v,q+"<<(("+v+"-5121)>>1)"]+");")}function b(){c(k+".drawArrays("+[p,q,t]+");")}n?w?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}var h=a.shared,k=h.gl,l=h.draw,m=d.draw,n=function(){var e=m.elements,f=b;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)f=c;e=e.append(a,f)}else e=f.def(l,".","elements");e&&f("if("+e+")"+k+".bindBuffer(34963,"+
e+".buffer.buffer);");return e}(),p=e("primitive"),q=e("offset"),t=function(){var e=m.count,f,g=b;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)g=c;f=e.append(a,g);r.optional(function(){e.MISSING&&a.assert(b,"false","missing vertex count");e.DYNAMIC&&a.assert(g,f+">=0","missing vertex count")})}else f=g.def(l,".","count"),r.optional(function(){a.assert(g,f+">=0","missing vertex count")});return f}();if("number"===typeof t){if(0===t)return}else c("if(",t,"){"),c.exit("}");var C,u;ra&&(C=e("instances"),
u=a.instancing);var v=n+".type",w=m.elements&&xa(m.elements);ra&&("number"!==typeof C||0<=C)?"string"===typeof C?(c("if(",C,">0){"),f(),c("}else if(",C,"<0){"),g(),c("}")):f():g()}function W(a,b,c,d,e){var f=x();e=f.proc("body",e);r.optional(function(){f.commandStr=b.commandStr;f.command=f.link(b.commandStr)});ra&&(f.instancing=e.def(f.shared.extensions,".angle_instanced_arrays"));a(f,e,c,d);return f.compile().body}function aa(a,b,c,d){P(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,
b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),T(a,b,c,d.attributes,function(){return!0}));X(a,b,c,d.uniforms,function(){return!0});R(a,b,b,c)}function Ra(a,b){var c=a.proc("draw",1);P(a,c);M(a,c,b.context);N(a,c,b.framebuffer);U(a,c,b);S(a,c,b.state);Q(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)aa(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var e=a.global.def("{}"),
f=c.def(d,".id"),g=c.def(e,"[",f,"]");c(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",e,"[",f,"]=",a.link(function(c){return W(aa,a,b,c,1)}),"(",d,");",g,".call(this,a0);"))}0<Object.keys(b.state).length&&c(a.shared.current,".dirty=true;")}function Aa(a,b,c,d){function e(){return!0}a.batchId="a1";P(a,b);T(a,b,c,d.attributes,e);X(a,b,c,d.uniforms,e);R(a,b,b,c)}function Pa(a,b,c,d){function e(a){return a.contextDep&&g||a.propDep}function f(a){return!e(a)}P(a,b);var g=c.contextDep,h=b.def(),k=b.def();
a.shared.props=k;a.batchId=h;var l=a.scope(),m=a.scope();b(l.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",k,"=","a0","[",h,"];",m,"}",l.exit);c.needsContext&&M(a,m,c.context);c.needsFramebuffer&&N(a,m,c.framebuffer);S(a,m,c.state,e);c.profile&&e(c.profile)&&Q(a,m,c,!1,!0);d?(c.useVAO?c.drawVAO?e(c.drawVAO)?m(a.shared.vao,".setVAO(",c.drawVAO.append(a,m),");"):l(a.shared.vao,".setVAO(",c.drawVAO.append(a,l),");"):l(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(l(a.shared.vao,".setVAO(null);"),
T(a,l,c,d.attributes,f),T(a,m,c,d.attributes,e)),X(a,l,c,d.uniforms,f),X(a,m,c,d.uniforms,e),R(a,l,m,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,m),k=m.def(d,".id"),l=m.def(b,"[",k,"]"),m(a.shared.gl,".useProgram(",d,".program);","if(!",l,"){",l,"=",b,"[",k,"]=",a.link(function(b){return W(Aa,a,c,b,2)}),"(",d,");}",l,".call(this,a0[",h,"],",h,");"))}function ab(a,b){function c(a){return a.contextDep&&e||a.propDep}var d=a.proc("batch",2);a.batchId="0";P(a,d);var e=!1,f=!0;Object.keys(b.context).forEach(function(a){e=
e||b.context[a].propDep});e||(M(a,d,b.context),f=!1);var g=b.framebuffer,h=!1;g?(g.propDep?e=h=!0:g.contextDep&&e&&(h=!0),h||N(a,d,g)):N(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(e=!0);U(a,d,b);S(a,d,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||Q(a,d,b,!1,"a1");b.contextDep=e;b.needsContext=f;b.needsFramebuffer=h;f=b.shader.progVar;if(f.contextDep&&e||f.propDep)Pa(a,d,b,null);else if(f=f.append(a,d),d(a.shared.gl,".useProgram(",f,".program);"),b.shader.program)Pa(a,d,b,
b.shader.program);else{d(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),h=d.def(f,".id"),k=d.def(g,"[",h,"]");d(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",g,"[",h,"]=",a.link(function(c){return W(Pa,a,b,c,2)}),"(",f,");",k,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty=true;")}function Y(a,c){function d(b){var g=c.shader[b];g&&e.set(f.shader,"."+b,g.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var f=a.shared,g=f.current;M(a,e,c.context);
c.framebuffer&&c.framebuffer.append(a,e);xb(Object.keys(c.state)).forEach(function(b){var d=c.state[b].append(a,e);O(d)?d.forEach(function(c,d){e.set(a.next[b],"["+d+"]",c)}):e.set(f.next,"."+b,d)});Q(a,e,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=c.draw[b];d&&e.set(f.draw,"."+b,""+d.append(a,e))});Object.keys(c.uniforms).forEach(function(d){e.set(f.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,e))});Object.keys(c.attributes).forEach(function(b){var d=
c.attributes[b].append(a,e),f=a.scopeAttrib(b);Object.keys(new ea).forEach(function(a){e.set(f,"."+a,d[a])})});c.scopeVAO&&e.set(f.vao,".targetVAO",c.scopeVAO.append(a,e));d("vert");d("frag");0<Object.keys(c.state).length&&(e(g,".dirty=true;"),e.exit(g,".dirty=true;"));e("a1(",a.shared.context,",a0,",a.batchId,");")}function ca(a){if("object"===typeof a&&!O(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(oa.isDynamic(a[b[c]]))return!0;return!1}}function ia(a,b,c){function d(a,b){g.forEach(function(c){var d=
e[c];oa.isDynamic(d)&&(d=a.invoke(b,d),b(m,".",c,"=",d,";"))})}var e=b["static"][c];if(e&&ca(e)){var f=a.global,g=Object.keys(e),h=!1,k=!1,l=!1,m=a.global.def("{}");g.forEach(function(b){var c=e[b];if(oa.isDynamic(c))"function"===typeof c&&(c=e[b]=oa.unbox(c)),b=la(c,null),h=h||b.thisDep,l=l||b.propDep,k=k||b.contextDep;else{f(m,".",b,"=");switch(typeof c){case "number":f(c);break;case "string":f('"',c,'"');break;case "object":Array.isArray(c)&&f("[",c.join(),"]");break;default:f(a.link(c))}f(";")}});
b.dynamic[c]=new oa.DynamicVariable(4,{thisDep:h,contextDep:k,propDep:l,ref:m,append:d});delete b["static"][c]}}var ea=l.Record,fa={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(fa.min=32775,fa.max=32776);var ra=c.angle_instanced_arrays,ha=c.webgl_draw_buffers,ta={dirty:!0,profile:t.profile},Na={},Oa=[],ua={},va={};u("dither",3024);u("blend.enable",3042);w("blend.color","blendColor",[0,0,0,0]);w("blend.equation","blendEquationSeparate",[32774,32774]);w("blend.func","blendFuncSeparate",
[1,0,1,0]);u("depth.enable",2929,!0);w("depth.func","depthFunc",513);w("depth.range","depthRange",[0,1]);w("depth.mask","depthMask",!0);w("colorMask","colorMask",[!0,!0,!0,!0]);u("cull.enable",2884);w("cull.face","cullFace",1029);w("frontFace","frontFace",2305);w("lineWidth","lineWidth",1);u("polygonOffset.enable",32823);w("polygonOffset.offset","polygonOffset",[0,0]);u("sample.alpha",32926);u("sample.enable",32928);w("sample.coverage","sampleCoverage",[1,!1]);u("stencil.enable",2960);w("stencil.mask",
"stencilMask",-1);w("stencil.func","stencilFunc",[519,0,-1]);w("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);w("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);u("scissor.enable",3089);w("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);w("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var ja={gl:a,context:p,strings:b,next:Na,current:ta,draw:n,elements:f,buffer:e,shader:m,attributes:l.state,vao:l,uniforms:k,framebuffer:h,extensions:c,
timer:q,isBufferArgs:cb},ga={primTypes:Ca,compareFuncs:Ia,blendFuncs:qa,blendEquations:fa,stencilOps:ya,glTypes:za,orientationType:kb};r.optional(function(){ja.isArrayLike=O});ha&&(ga.backBuffer=[1029],ga.drawBuffer=F(d.maxDrawbuffers,function(a){return 0===a?[0]:F(a,function(a){return 36064+a})}));var na=0;return{next:Na,current:ta,procs:function(){var a=x(),b=a.proc("poll"),e=a.proc("refresh"),f=a.block();b(f);e(f);var g=a.shared,h=g.gl,k=g.next,l=g.current;f(l,".dirty=false;");N(a,b);N(a,e,null,
!0);var m;ra&&(m=a.link(ra));c.oes_vertex_array_object&&e(a.link(c.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<d.maxAttributes;++n){var p=e.def(g.attributes,"[",n,"]"),q=a.cond(p,".buffer");q.then(h,".enableVertexAttribArray(",n,");",h,".bindBuffer(",34962,",",p,".buffer.buffer);",h,".vertexAttribPointer(",n,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);")["else"](h,".disableVertexAttribArray(",n,");",h,".vertexAttrib4f(",n,",",p,".x,",p,".y,",p,".z,",
p,".w);",p,".buffer=null;");e(q);ra&&e(m,".vertexAttribDivisorANGLE(",n,",",p,".divisor);")}e(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");Object.keys(ua).forEach(function(c){var d=ua[c],g=f.def(k,".",c),m=a.block();m("if(",g,"){",h,".enable(",d,")}else{",h,".disable(",d,")}",l,".",c,"=",g,";");e(m);b("if(",g,"!==",l,".",c,"){",m,"}")});Object.keys(va).forEach(function(c){var d=va[c],g=ta[c],m,n,p=a.block();p(h,".",d,"(");O(g)?(d=g.length,m=a.global.def(k,
".",c),n=a.global.def(l,".",c),p(F(d,function(a){return m+"["+a+"]"}),");",F(d,function(a){return n+"["+a+"]="+m+"["+a+"];"}).join("")),b("if(",F(d,function(a){return m+"["+a+"]!=="+n+"["+a+"]"}).join("||"),"){",p,"}")):(m=f.def(k,".",c),n=f.def(l,".",c),p(m,");",l,".",c,"=",m,";"),b("if(",m,"!==",n,"){",p,"}"));e(p)});return a.compile()}(),compile:function(a,b,c,d,e){var f=x();f.stats=f.link(e);Object.keys(b["static"]).forEach(function(a){ia(f,b,a)});Sb.forEach(function(b){ia(f,a,b)});c=L(a,b,c,
d,f);Ra(f,c);Y(f,c);ab(f,c);return f.compile()}}}function Bb(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var ca=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray},X=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a},Cb="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
ia={};ia[5120]=ia[5121]=1;ia[5122]=ia[5123]=ia[36193]=ia[33635]=ia[32819]=ia[32820]=2;ia[5124]=ia[5125]=ia[5126]=ia[34042]=4;var r=X(d,{optional:function(a){a()},raise:a,commandRaise:p,command:function(a,b,c){a||p(b,c||w())},parameter:function(b,c,d){b in c||a("unknown parameter ("+b+")"+f(d)+". possible values: "+Object.keys(c).join())},commandParameter:function(a,b,c,d){a in b||p("unknown parameter ("+a+")"+f(c)+". possible values: "+Object.keys(b).join(),d||w())},constructor:function(b){Object.keys(b).forEach(function(b){0>
Cb.indexOf(b)&&a('invalid regl constructor argument "'+b+'". must be one of '+Cb)})},type:function(b,c,d){g(b,c)||a("invalid parameter type"+f(d)+". expected "+c+", got "+typeof b)},commandType:z,isTypedArray:function(b,c){ca(b)||a("invalid parameter type"+f(c)+". must be a typed array")},nni:function(b,c){0<=b&&(b|0)===b||a("invalid parameter type, ("+b+")"+f(c)+". must be a nonnegative integer")},oneOf:h,shaderError:function(a,b,c,f,g){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);
a=f===a.FRAGMENT_SHADER?"fragment":"vertex";z(c,"string",a+" shader source must be a string",g);var h=v(c,g);c=m(b);A(h,c);Object.keys(h).forEach(function(a){function b(a,c){d.push(a);f.push(c||"")}var c=h[a];if(c.hasErrors){var d=[""],f=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(e(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(d){d=d.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(f){var g=f[1];d=f[2];switch(g){case "assign":g="="}c=Math.max(a.line.indexOf(g,c),0)}else c=0;b(e("| ",6));b(e("^^^",c+3)+"\n","font-weight:bold");b(e("| ",6));b(d+"\n","font-weight:bold")});b(e("| ",6)+"\n")}else b(e(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(f[0]=d.join("%c"),console.log.apply(console,f))}});d.raise("Error compiling "+
a+" shader, "+h[0].name)}},linkError:function(a,b,c,e,f){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=v(c,f),e='Error linking program with vertex shader, "'+v(e,f)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),d.raise(e))},callSite:u,saveCommandRef:x,saveDrawInfo:function(a,b,c,d){function e(a){return a?d.id(a):0}function f(a,
b){Object.keys(b).forEach(function(b){a[d.id(b)]=!0})}x(a);a._fragId=e(a["static"].frag);a._vertId=e(a["static"].vert);var g=a._uniformSet={};f(g,b["static"]);f(g,b.dynamic);b=a._attributeSet={};f(b,c["static"]);f(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,b,c){a.texture?h(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):h(a.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},
guessCommand:w,texture2D:function(a,b,c){var e=b.width,f=b.height,g=b.channels;d(0<e&&e<=c.maxTextureSize&&0<f&&f<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||d(!(e&e-1)&&!!e&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==e&&1!==f&&d(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(d(!(e&e-1)&&!!e&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
d(b.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&d(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),d(!a.genMipmaps,"mipmap generation not supported with float textures"));var h=b.images;for(c=0;16>c;++c)if(h[c]){var k=e>>c,l=f>>c;d(b.mipmask&1<<c,"missing mipmap data");var m=h[c];d(m.width===k&&m.height===l,"invalid shape for mip images");d(m.format===b.format&&m.internalformat===
b.internalformat&&m.type===b.type,"incompatible type for mip image");!m.compressed&&m.data&&(k=Math.ceil(H(m.type,g)*k/m.unpackAlignment)*m.unpackAlignment,d(m.data.byteLength===k*l,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||d(0===(b.mipmask&1<<c),"extra mipmap data");b.compressed&&d(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,c,e){var f=a.width,g=a.height,h=a.channels;d(0<f&&f<=e.maxTextureSize&&
0<g&&g<=e.maxTextureSize,"invalid texture shape");d(f===g,"cube map must be square");d(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(e=0;e<c.length;++e){var k=c[e];d(k.width===f&&k.height===g,"inconsistent cube map face shape");b.genMipmaps&&(d(!k.compressed,"can not generate mipmap for compressed textures"),d(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=k.images,m=0;16>m;++m){var n=l[m];if(n){var p=f>>m,r=g>>m;d(k.mipmask&1<<m,"missing mipmap data");
d(n.width===p&&n.height===r,"invalid shape for mip images");d(n.format===a.format&&n.internalformat===a.internalformat&&n.type===a.type,"incompatible type for mip image");n.compressed||n.data&&d(n.data.byteLength===p*r*Math.max(H(n.type,h),n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}}),Eb=0,oa={DynamicVariable:y,define:function(a,b){return new y(a,D(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof y},unbox:function(a,
b){return"function"===typeof a?new y(0,a):a},accessor:D},lb={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},Db="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},R=Q();R.zero=Q();var Tb=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));
var d=1,e=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),e=a.getParameter(36063));var f=!!b.oes_texture_float;if(f){f=a.createTexture();a.bindTexture(3553,f);a.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=a.createFramebuffer();a.bindFramebuffer(36160,g);a.framebufferTexture2D(36160,36064,3553,f,0);a.bindTexture(3553,null);if(36053!==a.checkFramebufferStatus(36160))f=!1;else{a.viewport(0,0,1,1);a.clearColor(1,0,0,1);a.clear(16384);var h=R.allocType(5126,4);a.readPixels(0,0,1,1,6408,5126,h);
a.getError()?f=!1:(a.deleteFramebuffer(g),a.deleteTexture(f),f=1===h[0]);R.freeType(h)}}h=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=a.createTexture(),g=R.allocType(5121,36),a.activeTexture(33984),a.bindTexture(34067,h),a.texImage2D(34069,0,6408,3,3,0,6408,5121,g),R.freeType(g),a.bindTexture(34067,null),a.deleteTexture(h),h=!a.getError());return{colorBits:[a.getParameter(3410),a.getParameter(3411),
a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:e,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),
maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938),readFloat:f,npotTextureCube:h}},ea=function(a){return Object.keys(a).map(function(b){return a[b]})},$a={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);
return b},flatten:function(a,b,c,d){var e=1;if(b.length)for(var f=0;f<b.length;++f)e*=b[f];else e=0;c=d||R.allocType(c,e);switch(b.length){case 0:break;case 1:d=b[0];for(b=0;b<d;++b)c[b]=a[b];break;case 2:d=b[0];b=b[1];for(f=e=0;f<d;++f)for(var g=a[f],h=0;h<b;++h)c[e++]=g[h];break;case 3:T(a,b[0],b[1],b[2],c,0);break;default:aa(a,b,0,c,0)}return c}},Ua={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,
"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},za={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Xa={dynamic:35048,stream:35040,"static":35044},db=$a.flatten,mb=$a.shape,sa=[];sa[5120]=1;sa[5122]=2;sa[5124]=4;sa[5121]=1;sa[5123]=2;sa[5125]=4;sa[5126]=4;var Ca={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nb=
new Float32Array(1),Fb=new Uint32Array(nb.buffer),wb=function(a){return!(a&a-1)&&!!a},Ib=[9984,9986,9985,9987],Za=[0,6409,6410,6407,6408],ha={};ha[6409]=ha[6406]=ha[6402]=1;ha[34041]=ha[6410]=2;ha[6407]=ha[35904]=3;ha[6408]=ha[35906]=4;var gb=Da("HTMLCanvasElement"),hb=Da("OffscreenCanvas"),rb=Da("CanvasRenderingContext2D"),sb=Da("ImageBitmap"),tb=Da("HTMLImageElement"),ub=Da("HTMLVideoElement"),Gb=Object.keys(Ua).concat([gb,hb,rb,sb,tb,ub]),Ea=[];Ea[5121]=1;Ea[5126]=4;Ea[36193]=2;Ea[5123]=2;Ea[5125]=
4;var P=[];P[32854]=2;P[32855]=2;P[36194]=2;P[34041]=4;P[33776]=.5;P[33777]=.5;P[33778]=1;P[33779]=1;P[35986]=.5;P[35987]=1;P[34798]=1;P[35840]=.5;P[35841]=.25;P[35842]=.5;P[35843]=.25;P[36196]=.5;var ja=[];ja[32854]=2;ja[32855]=2;ja[36194]=2;ja[33189]=2;ja[36168]=1;ja[34041]=4;ja[35907]=4;ja[34836]=16;ja[34842]=8;ja[34843]=6;var Ub=function(a,b,c,d,e){function f(a){this.id=l++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;e.profile&&(this.stats={size:0})}function g(b){var c=
b.renderbuffer;r(c,"must not double destroy renderbuffer");a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(c);b.renderbuffer=null;b.refCount=0;delete m[b.id];d.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(h.srgba=35907);b.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);b.webgl_color_buffer_float&&(h.rgba32f=34836);var k=[];Object.keys(h).forEach(function(a){k[h[a]]=a});var l=0,m={};f.prototype.decRef=
function(){0>=--this.refCount&&g(this)};e.profile&&(d.getTotalRenderbufferSize=function(){var a=0;Object.keys(m).forEach(function(b){a+=m[b].stats.size});return a});return{create:function(b,g){function l(b,d){var f=0,g=0,m=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,r(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),f=g[0]|0,g=g[1]|0):("radius"in b&&(f=g=b.radius|0),"width"in b&&(f=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(r.parameter(b.format,h,"invalid renderbuffer format"),
m=h[b.format])):"number"===typeof b?(f=b|0,g="number"===typeof d?d|0:f):b?r.raise("invalid arguments to renderbuffer constructor"):f=g=1;r(0<f&&0<g&&f<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size");if(f!==n.width||g!==n.height||m!==n.format)return l.width=n.width=f,l.height=n.height=g,n.format=m,a.bindRenderbuffer(36161,n.renderbuffer),a.renderbufferStorage(36161,m,f,g),r(0===a.getError(),"invalid render buffer format"),e.profile&&(n.stats.size=ja[n.format]*n.width*
n.height),l.format=k[n.format],l}var n=new f(a.createRenderbuffer());m[n.id]=n;d.renderbufferCount++;l(b,g);l.resize=function(b,d){var f=b|0,g=d|0||f;if(f===n.width&&g===n.height)return l;r(0<f&&0<g&&f<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size");l.width=n.width=f;l.height=n.height=g;a.bindRenderbuffer(36161,n.renderbuffer);a.renderbufferStorage(36161,n.format,f,g);r(0===a.getError(),"invalid render buffer format");e.profile&&(n.stats.size=ja[n.format]*n.width*n.height);
return l};l._reglType="renderbuffer";l._renderbuffer=n;e.profile&&(l.stats=n.stats);l.destroy=function(){n.decRef()};return l},clear:function(){ea(m).forEach(g)},restore:function(){ea(m).forEach(function(b){b.renderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)});a.bindRenderbuffer(36161,null)}}},Lb=[6407,6408],ib=[];ib[6408]=4;ib[6407]=3;var bb=[];bb[5121]=1;bb[5126]=4;bb[36193]=2;var Mb=[32854,32855,36194,35907,34842,
34843,34836],Kb={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"},Ja=["x","y","z","w"],Sb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),qa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},yb="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),Ia={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ya={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},zb={frag:35632,vert:35633},kb={cw:2304,ccw:2305},Ab=new ma(!1,!1,!1,function(){}),Vb=function(a,b){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(a,b,e){var f=g.pop()||new c;f.startQueryIndex=
a;f.endQueryIndex=b;f.sum=0;f.stats=e;h.push(f)}if(!b.ext_disjoint_timer_query)return null;var e=[],f=[],g=[],h=[],k=[],l=[];return{beginQuery:function(a){var c=e.pop()||b.ext_disjoint_timer_query.createQueryEXT();b.ext_disjoint_timer_query.beginQueryEXT(35007,c);f.push(c);d(f.length-1,f.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var a,c;a=f.length;if(0!==a){l.length=Math.max(l.length,a+1);k.length=Math.max(k.length,a+1);k[0]=0;
var d=l[0]=0;for(c=a=0;c<f.length;++c){var m=f[c];b.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(d+=b.ext_disjoint_timer_query.getQueryObjectEXT(m,34918),e.push(m)):f[a++]=m;k[c+1]=d;l[c+1]=a}f.length=a;for(c=a=0;c<h.length;++c){var d=h[c],n=d.startQueryIndex,m=d.endQueryIndex;d.sum+=k[m]-k[n];n=l[n];m=l[m];m===n?(d.stats.gpuTime+=d.sum/1E6,g.push(d)):(d.startQueryIndex=n,d.endQueryIndex=m,h[a++]=d)}h.length=a}},getNumPendingQueries:function(){return f.length},clear:function(){e.push.apply(e,
f);for(var a=0;a<e.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(e[a]);f.length=0;e.length=0},restore:function(){f.length=0;e.length=0}}};return function(a){function b(){if(0===O.length)z&&z.update(),Y=null;else{Y=lb.next(b);m();for(var a=O.length-1;0<=a;--a){var c=O[a];c&&c(B,null,0)}q.flush();z&&z.update()}}function c(){!Y&&0<O.length&&(Y=lb.next(b))}function d(){Y&&(lb.cancel(b),Y=null)}function e(a){a.preventDefault();u=!0;d();V.forEach(function(a){a()})}function f(a){q.getError();u=!1;
v.restore();M.restore();H.restore();L.restore();N.restore();P.restore();J.restore();z&&z.restore();Q.procs.refresh();c();W.forEach(function(a){a()})}function g(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];oa.isDynamic(e)?d[b]=oa.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;n.length<a;)n.push(null);return n}r(!!a,"invalid args to regl({...})");r.type(a,"object","invalid args to regl({...})");var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||
{}),h=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=X({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=Q.compile(h,f,e,d,a),k=d.draw,l=
d.batch,m=d.scope,n=[];return X(function(a,b){var d;u&&r.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function h(a,
b){var c=0;Q.procs.poll();var d=b.color;d&&(q.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(q.clearDepth(+b.depth),c|=256);"stencil"in b&&(q.clearStencil(b.stencil|0),c|=1024);r(!!c,"called regl.clear with no buffer specified");q.clear(c)}function k(a){r.type(a,"function","regl.frame() callback must be a function");O.push(a);c();return{cancel:function(){function b(){var a=Bb(O,b);O[a]=O[O.length-1];--O.length;0>=O.length&&d()}var c=Bb(O,a);r(0<=c,"cannot cancel a frame twice");
O[c]=b}}}function l(){var a=T.viewport,b=T.scissor_box;a[0]=a[1]=b[0]=b[1]=0;B.viewportWidth=B.framebufferWidth=B.drawingBufferWidth=a[2]=b[2]=q.drawingBufferWidth;B.viewportHeight=B.framebufferHeight=B.drawingBufferHeight=a[3]=b[3]=q.drawingBufferHeight}function m(){B.tick+=1;B.time=p();l();Q.procs.poll()}function n(){l();Q.procs.refresh();z&&z.update()}function p(){return(Db()-A)/1E3}a=G(a);if(!a)return null;var q=a.gl,t=q.getContextAttributes(),u=q.isContextLost(),v=I(q,a);if(!v)return null;var w=
S(),x={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},y=v.extensions,z=Vb(q,y),A=Db(),D=q.drawingBufferWidth,E=q.drawingBufferHeight,B={tick:0,time:0,viewportWidth:D,viewportHeight:E,framebufferWidth:D,framebufferHeight:E,drawingBufferWidth:D,drawingBufferHeight:E,pixelRatio:a.pixelRatio},F=Tb(q,y),H=U(q,x,a,function(a){return J.destroyBuffer(a)}),J=Nb(q,y,F,x,H),K=Sa(q,y,H,x),M=Ob(q,w,x,a),L=Hb(q,y,F,function(){Q.procs.poll()},
B,x,a),N=Ub(q,y,F,x,a),P=Jb(q,y,F,L,N,x),Q=Rb(q,w,y,F,H,K,L,P,{},J,M,{elements:null,primitive:4,count:-1,offset:0,instances:-1},B,z,a),w=Pb(q,P,Q.procs.poll,B,t,y,F),T=Q.next,R=q.canvas,O=[],V=[],W=[],aa=[a.onDestroy],Y=null;R&&(R.addEventListener("webglcontextlost",e,!1),R.addEventListener("webglcontextrestored",f,!1));var ca=P.setFBO=g({framebuffer:oa.define.call(null,1,"framebuffer")});n();t=X(g,{clear:function(a){r("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in
a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ca(X({framebuffer:a.framebuffer.faces[b]},a),h);else ca(a,h);else h(null,a)},prop:oa.define.bind(null,1),context:oa.define.bind(null,2),"this":oa.define.bind(null,3),draw:g({}),buffer:function(a){return H.create(a,34962,!1,!1)},elements:function(a){return K.create(a,!1)},texture:L.create2D,cube:L.createCube,renderbuffer:N.create,framebuffer:P.create,framebufferCube:P.createCube,vao:J.createVAO,attributes:t,frame:k,
on:function(a,b){r.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return k(b);case "lost":c=V;break;case "restore":c=W;break;case "destroy":c=aa;break;default:r.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:F,hasExtension:function(a){return 0<=F.extensions.indexOf(a.toLowerCase())},read:w,destroy:function(){O.length=0;d();
R&&(R.removeEventListener("webglcontextlost",e),R.removeEventListener("webglcontextrestored",f));M.clear();P.clear();N.clear();L.clear();K.clear();H.clear();J.clear();z&&z.clear();aa.forEach(function(a){a()})},_gl:q,_refresh:n,poll:function(){m();z&&z.update()},now:p,stats:x});a.onDone(null,t);return t}})},{}],43:[function(d,f,g){var b=d("events/"),a=d("wheel");f.exports=function(d,f){function g(){h[0]=h[1]=h[2]=0}var h=new b;h.flush=g;g();if("undefined"===typeof window)return h;d=d||window;a(d,function(a){var b=
1===a.deltaMode?12:1;h[0]+=b*(a.deltaX||0);h[1]+=b*(a.deltaY||0);h[2]+=b*(a.deltaZ||0);h.emit("scroll",h);f&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return h}},{"events/":7,wheel:45}],44:[function(d,f,g){var b="undefined"!==typeof window?window.navigator.userAgent:"";d=/OS X/.test(b);g=/Opera/.test(b);b=!/like Gecko/.test(b)&&!g;d=f.exports={0:d?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",
9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",
92:"<meta>",93:d?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:d&&b?"-":"<volume-mute>",174:"<volume-down>",
175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:g?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(f=58;65>f;++f)d[f]=
String.fromCharCode(f);for(f=48;58>f;++f)d[f]=f-48+"";for(f=65;91>f;++f)d[f]=String.fromCharCode(f);for(f=96;106>f;++f)d[f]="<num-"+(f-96)+">";for(f=112;136>f;++f)d[f]="F"+(f-111)},{}],45:[function(d,f,g){function b(b,d,e,f){b[q](a+d,"wheel"==t?e:function(a){!a&&(a=window.event);var b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==
t?(b.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-.025*a.wheelDeltaX)):b.deltaY=a.detail;return e(b)},f||!1)}f.exports=function(a,d,e){b(a,t,d,e);"DOMMouseScroll"==t&&b(a,"MozMousePixelScroll",d,e)};var a="",q,t;window.addEventListener?q="addEventListener":(q="attachEvent",a="on");t="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}]},{},[1]);
