(function e$$0(n,r,d){function b(c,e){if(!r[c]){if(!n[c]){var f="function"==typeof require&&require;if(!e&&f)return f(c,!0);if(a)return a(c,!0);f=Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f;}f=r[c]={exports:{}};n[c][0].call(f.exports,function(a){var e=n[c][1][a];return b(e?e:a)},f,f.exports,e$$0,n,r,d)}return r[c].exports}for(var a="function"==typeof require&&require,c=0;c<d.length;c++)b(d[c]);return b})({1:[function(g,n,r){n=document.body.appendChild(document.createElement("canvas"));
r=g("canvas-fit");var d=g("../regl")(n),b=g("gl-mat4"),a=g("canvas-orbit-camera")(n);window.addEventListener("resize",r(n),!1);a.rotate([0,0],[0,-.4]);a.zoom(15);var c=[[[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,.5]],[[.5,.5,.5],[.5,.5,-.5],[.5,-.5,-.5],[.5,-.5,.5]],[[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5]],[[-.5,.5,-.5],[-.5,.5,.5],[-.5,-.5,.5],[-.5,-.5,-.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5]]],h=[[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,
.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,0],[.5,0],[.5,.5],[0,.5]]],e=[[[0,0,1],[0,0,1],[0,0,1],[0,0,1]],[[1,0,0],[1,0,0],[1,0,0],[1,0,0]],[[0,0,-1],[0,0,-1],[0,0,-1],[0,0,-1]],[[-1,0,0],[-1,0,0],[-1,0,0],[-1,0,0]],[[0,1,0],[0,1,0],[0,1,0],[0,1,0]]],f=function(a,c){return Math.round(2*Math.sin(94.2*a)*Math.sin(188.4*c)+3*Math.cos(376.8*a+2.1)*Math.sin(471*c+.9)+1*Math.cos(753.6*a+43.43)*Math.cos(282.6*c+34.3))},m=[],k=[],p=[],l=[];n=function(a,b,d){for(var x=p.length,q=0;5>q;q++)if(!(0===
q&&b<=f(a,d+1)||1===q&&b<=f(a+1,d)||2===q&&b<=f(a,d-1)||3===q&&b<=f(a-1,d))){var g;for(g=0;g<c[q].length;g++){var F=c[q][g];p.push([F[0]+a,F[1]+b,F[2]+d])}for(g=0;g<e[q].length;g++)F=e[q][g],l.push([F[0],F[1],F[2]]);for(g=0;g<h[q].length;g++)F=h[q][g],m.push([F[0],F[1]]);k.push([2+x,1+x,0+x]);k.push([2+x,0+x,3+x]);x+=4}};for(r=-40;40>=r;r++)for(var x=-40;40>=x;x++){var q=f(r,x);n(r,q,x)}var F=d({cull:{enable:!0,face:"back"},context:{view:function(){return a.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D atlas;\n\n  void main () {\n\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n    vec3 tex = texture2D(atlas, vUv).rgb;\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(vNormal, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position, normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:d.context("view"),projection:function(a){return b.perspective([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)},atlas:d.prop("atlas")},attributes:{position:d.prop("position"),uv:d.prop("uv"),
normal:d.prop("normal")},elements:d.prop("elements")});g("resl")({manifest:{atlas:{type:"image",src:"assets/atlas.png",parser:function(a){return d.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:a})}}},onDone:function(c){var b=c.atlas;d.frame(function(){F({position:p,elements:k,uv:m,normal:l,atlas:b});a.tick()})}})},{"../regl":76,"canvas-fit":30,"canvas-orbit-camera":31,"gl-mat4":43,resl:77}],2:[function(g,n,r){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}n.exports=function(b,a,c,h,e){b=c.maxAttributes;a=Array(b);for(c=0;c<b;++c)a[c]=new d;return{Record:d,scope:{},state:a}}},{}],3:[function(g,n,r){function d(a){return k[Object.prototype.toString.call(a)]|0}function b(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function a(a,c,b,h,e,f,d){for(var m=0,k=0;k<b;++k)for(var p=0;p<h;++p)a[m++]=c[e*k+f*p+d]}function c(a,c,b){for(var h=0,e=0;e<c.length;++e)for(var f=c[e],d=0;d<
b;++d)a[h++]=f[d]}var h=g("./util/is-typed-array"),e=g("./util/is-ndarray"),f=g("./util/values"),m=g("./util/pool"),k=g("./constants/arraytypes.json"),p=g("./constants/dtypes.json"),l=g("./constants/usage.json");n.exports=function(k){function q(a){this.id=w++;this.buffer=k.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function g(a,c,b){a.byteLength=c.byteLength;k.bufferData(a.type,c,b)}function u(f,k,p,l,x){f.usage=p;if(Array.isArray(k))f.dtype=l||
5126,0<k.length&&(Array.isArray(k[0])?(f.dimension=k[0].length,l=m.allocType(f.dtype,k.length*f.dimension),c(l,k,f.dimension),g(f,l,p),m.freeType(l)):"number"===typeof k[0]?(f.dimension=x,l=m.allocType(f.dtype,k.length),b(l,k),g(f,l,p),m.freeType(l)):h(k[0])&&(f.dimension=k[0].length,f.dtype=l||d(k[0])||5126,l=m.allocType(f.dtype,k.length*f.dimension),c(l,k,f.dimension),g(f,l,p),m.freeType(l)));else if(h(k))f.dtype=l||d(k),f.dimension=x,g(f,k,p);else if(e(k)){var q=k.shape,t=k.stride;x=k.offset;var w=
0,u=0,n=0,C=0;1===q.length?(w=q[0],u=1,n=t[0],C=0):2===q.length&&(w=q[0],u=q[1],n=t[0],C=t[1]);f.dtype=l||d(k.data)||5126;f.dimension=u;l=m.allocType(f.dtype,w*u);a(l,k.data,w,u,n,C,x);g(f,l,p);m.freeType(l)}}function t(a){var c=a.buffer;k.isBuffer(c)&&k.deleteBuffer(c);a.buffer=null;delete n[a.id]}var w=0,n={};q.prototype.bind=function(){k.bindBuffer(this.type,this.buffer)};var v=[];return{create:function(f,g,F){function w(a){var c=35044,b=null,f=0,d=0,m=1;Array.isArray(a)||h(a)||e(a)?b=a:"number"===
typeof a?f=a|0:a&&("data"in a&&(b=a.data),"usage"in a&&(c=l[a.usage]),"type"in a&&(d=p[a.type]),"dimension"in a&&(m=a.dimension|0),"length"in a&&(f=a.length|0));v.bind();b?u(v,b,c,d,m):(k.bufferData(v.type,f,c),v.dtype=d||5121,v.usage=c,v.dimension=m,v.byteLength=f);return w}var v=new q(g);n[v.id]=v;F||w(f);w._reglType="buffer";w._buffer=v;w.subdata=function(f,l){var p=(l||0)|0;v.bind();if(Array.isArray(f)){if(0<f.length)if("number"===typeof f[0]){var q=m.allocType(v.dtype,f.length);b(q,f);k.bufferSubData(v.type,
p,q);m.freeType(q)}else if(Array.isArray(f[0])||h(f[0])){var q=f[0].length,g=m.allocType(v.dtype,f.length*q);c(g,f,q);k.bufferSubData(v.type,p,g);m.freeType(g)}}else if(h(f))k.bufferSubData(v.type,p,f);else if(e(f)){var F=f.shape,t=f.stride,u=g=q=0,n=0;1===F.length?(q=F[0],g=1,u=t[0],n=0):2===F.length&&(q=F[0],g=F[1],u=t[0],n=t[1]);F=Array.isArray(f.data)?v.dtype:d(f.data);F=m.allocType(F,q*g);a(F,f.data,q,g,u,n,f.offset);k.bufferSubData(v.type,p,F);m.freeType(F)}return w};w.destroy=function(){t(v)};
return w},createStream:function(a,c){var b=v.pop();b||(b=new q(a),b.buffer=k.createBuffer());b.bind();u(b,c,35040,0,1);return b},destroyStream:function(a){v.push(a)},clear:function(){f(n).forEach(t)},getBuffer:function(a){return a&&a._buffer instanceof q?a._buffer:null},_initBuffer:u}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/values":28}],4:[function(g,n,r){n.exports={"[object Int8Array]":5120,
"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(g,n,r){n.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(g,n,r){n.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,
"triangle strip":5,"triangle fan":6}},{}],7:[function(g,n,r){n.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(g,n,r){function d(a){return Array.isArray(a)||k(a)||p(a)}function b(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function a(a,c,b,h){this.thisDep=a;this.contextDep=c;this.propDep=b;this.append=h}function c(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function h(c){return new a(!1,!1,!1,c)}function e(c,b){var h=c.type;return 0===
h?(h=c.data.length,new a(!0,1<=h,2<=h,b)):new a(3===h,2===h,1===h,b)}var f=g("./util/codegen"),m=g("./util/loop"),k=g("./util/is-typed-array"),p=g("./util/is-ndarray"),l=g("./constants/primitives.json"),x=g("./constants/dtypes.json"),q=["x","y","z","w"],F={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,
"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},u={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},w={cw:2304,ccw:2305},C=new a(!1,!1,!1,function(){});n.exports=function(p,g,n,y,B,r,E,I,H,K,M,O,J){function L(a){return a.replace(".",
"_")}function G(a,c,b){var h=L(a);ra.push(a);pa[h]=R[h]=!!b;ca[h]=c}function N(a,c,b){var h=L(a);ra.push(a);Array.isArray(b)?(R[h]=b.slice(),pa[h]=b.slice()):R[h]=pa[h]=b;da[h]=c}function U(){var a=f(),c=a.link,b=a.global;a.id=ya++;a.batchId="0";var h=c(xa),e=a.shared={props:"a0"};Object.keys(xa).forEach(function(a){e[a]=b.def(h,".",a)});var d=a.next={},m=a.current={};Object.keys(da).forEach(function(a){Array.isArray(R[a])&&(d[a]=b.def(e.next,".",a),m[a]=b.def(e.current,".",a))});var k=a.constants=
{};Object.keys(sa).forEach(function(a){k[a]=b.def(JSON.stringify(sa[a]))});a.invoke=function(b,h){switch(h.type){case 0:var f=["this",e.context,e.props,a.batchId];return b.def(c(h.data),".call(",f.slice(0,Math.max(h.data.length+1,4)),")");case 1:return b.def(e.props,h.data);case 2:return b.def(e.context,h.data);case 3:return b.def("this",h.data)}};a.attribCache={};var p={};a.scopeAttrib=function(a){a=g.id(a);if(a in p)return p[a];var b=K.scope[a];b||(b=K.scope[a]=new ia);return p[a]=c(b)};return a}
function S(a){var c=a["static"];a=a.dynamic;if("framebuffer"in c){var b=c.framebuffer;return b?(b=I.getFramebuffer(b),h(function(a,c){var h=a.link(b),e=a.shared;c.set(e.framebuffer,".next",h);e=e.context;c.set(e,".framebufferWidth",h+".width");c.set(e,".framebufferHeight",h+".height");return h})):h(function(a,c){var b=a.shared;c.set(b.framebuffer,".next","null");b=b.context;c.set(b,".framebufferWidth",b+".drawingBufferWidth");c.set(b,".framebufferHeight",b+".drawingBufferHeight");return null})}if("framebuffer"in
a){var f=a.framebuffer;return e(f,function(a,c){var b=a.invoke(c,f),h=a.shared,e=h.framebuffer,b=c.def(e,".getFramebuffer(",b,")");c.set(e,".next",b);h=h.context;c.set(h,".framebufferWidth",b+"?"+b+".width:"+h+".drawingBufferWidth");c.set(h,".framebufferHeight",b+"?"+b+".height:"+h+".drawingBufferHeight");return b})}return null}function ea(c,b){function h(c){if(c in f){var m=f[c];c=!0;var k=m.x|0,p=m.y|0,l,x;"w"in m?l=m.w|0:c=!1;"h"in m?x=m.h|0:c=!1;return new a(c&&b&&b.thisDep,c&&b&&b.contextDep,
c&&b&&b.propDep,function(a,c){var b=a.shared.context,h=l;"w"in m||(h=c.def(b,".","framebufferWidth","-",k));var e=x;"h"in m||(e=c.def(b,".","framebufferHeight","-",p));return[k,p,h,e]})}if(c in d){var q=d[c];c=e(q,function(a,c){var b=a.invoke(c,q),h=a.shared.context,e=c.def(b,".x|0"),f=c.def(b,".y|0"),d=c.def('"w" in ',b,"?",b,".w|0:","(",h,".","framebufferWidth","-",e,")"),b=c.def('"h" in ',b,"?",b,".h|0:","(",h,".","framebufferHeight","-",f,")");return[e,f,d,b]});b&&(c.thisDep=c.thisDep||b.thisDep,
c.contextDep=c.contextDep||b.contextDep,c.propDep=c.propDep||b.prpoDep);return c}return b?new a(b.thisDep,b.contextDep,b.propDep,function(a,c){var b=a.shared.context;return[0,0,c.def(b,".","framebufferWidth"),c.def(b,".","framebufferHeight")]}):null}var f=c["static"],d=c.dynamic,m=h("viewport");if(m)var k=m,m=new a(m.thisDep,m.contextDep,m.propDep,function(a,c){var b=k.append(a,c),h=a.shared.context;c.set(h,".viewportWidth",b[2]);c.set(h,".viewportHeight",b[3]);return b});return{viewport:m,scissor_box:h("scissor.box")}}
function fa(b){function f(a){if(a in d){var c=g.id(d[a]);a=h(function(){return c});a.id=c;return a}if(a in m){var b=m[a];return e(b,function(a,c){var h=a.invoke(c,b);return c.def(a.shared.strings,".id(",h,")")})}return null}var d=b["static"],m=b.dynamic,k=f("frag"),p=f("vert"),l=null;c(k)&&c(p)?(l=M.program(p.id,k.id),b=h(function(a,c){return a.link(l)})):b=new a(k&&k.thisDep||p&&p.thisDep,k&&k.contextDep||p&&p.contextDep,k&&k.propDep||p&&p.propDep,function(a,c){var b=a.shared.shader,h;h=k?k.append(a,
c):c.def(b,".","frag");var e;e=p?p.append(a,c):c.def(b,".","vert");return c.def(b+".program("+e+","+h+")")});return{frag:k,vert:p,progVar:b,program:l}}function la(b){function f(a,c){if(a in m){var b=m[a]|0;return h(function(a,h){c&&(a.OFFSET=b);return b})}if(a in k){var d=k[a];return e(d,function(a,b){var h=a.invoke(b,d);c&&(a.OFFSET=h);return h})}return c&&p?h(function(a,c){a.OFFSET="0";return 0}):null}var m=b["static"],k=b.dynamic,p=function(){if("elements"in m){var a=m.elements;d(a)?a=r.getElements(r.create(a)):
a&&(a=r.getElements(a));var c=h(function(c,b){if(a){var h=c.link(a);return c.ELEMENTS=h}return c.ELEMENTS=null});c.value=a;return c}if("elements"in k){var b=k.elements;return e(b,function(a,c){var h=a.shared,e=h.isBufferArgs,h=h.elements,f=a.invoke(c,b),d=c.def("null"),e=c.def(e,"(",f,")"),f=a.cond(e).then(d,"=",h,".createStream(",f,");")["else"](d,"=",h,".getElements(",f,");");c.entry(f);c.exit(a.cond(e).then(h,".destroyStream(",d,");"));return a.ELEMENTS=d})}return null}(),x=f("offset",!0);return{elements:p,
primitive:function(){if("primitive"in m){var b=m.primitive;return h(function(a,c){return l[b]})}if("primitive"in k){var f=k.primitive;return e(f,function(a,c){var b=a.constants.primTypes,h=a.invoke(c,f);return c.def(b,"[",h,"]")})}return p?c(p)?p.value?h(function(a,c){return c.def(a.ELEMENTS,".primType")}):h(function(){return 4}):new a(p.thisDep,p.contextDep,p.propDep,function(a,c){var b=a.ELEMENTS;return c.def(b,"?",b,".primType:",4)}):null}(),count:function(){if("count"in m){var b=m.count|0;return h(function(){return b})}if("count"in
k){var f=k.count;return e(f,function(a,c){return a.invoke(c,f)})}return p?c(p)?p?x?new a(x.thisDep,x.contextDep,x.propDep,function(a,c){return c.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):h(function(a,c){return c.def(a.ELEMENTS,".vertCount")}):h(function(){return-1}):new a(p.thisDep||x.thisDep,p.contextDep||x.contextDep,p.propDep||x.propDep,function(a,c){var b=a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")}):null}(),instances:f("instances",!1),
offset:x}}function aa(a){var c=a["static"],b=a.dynamic,f={};ra.forEach(function(a){function d(m,p){if(a in c){var l=m(c[a]);f[k]=h(function(){return l})}else if(a in b){var x=b[a];f[k]=e(x,function(a,c){return p(a,c,a.invoke(c,x))})}}var k=L(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return d(function(a){return a},function(a,
c,b){return b});case "depth.func":return d(function(a){return u[a]},function(a,c,b){return c.def(a.constants.compareFuncs,"[",b,"]")});case "depth.range":return d(function(a){return a},function(a,c,b){a=c.def("+",b,"[0]");c=c.def("+",b,"[1]");return[a,c]});case "blend.func":return d(function(a){return[F["srcRGB"in a?a.srcRGB:a.src],F["dstRGB"in a?a.dstRGB:a.dst],F["srcAlpha"in a?a.srcAlpha:a.src],F["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,c,b){function h(a,f){var d=c.def('"',a,f,'" in ',b,"?",
b,".",a,f,":",b,".",a);return c.def(e,"[",d,"]")}var e=a.constants.blendFuncs;a=h("src","RGB");var f=h("src","Alpha"),d=h("dst","RGB"),m=h("dst","Alpha");return[a,d,f,m]});case "blend.equation":return d(function(a){if("string"===typeof a)return[V[a],V[a]];if("object"===typeof a)return[V[a.rgb],V[a.alpha]]},function(a,c,b){var h=a.constants.blendEquations,e=c.def(),f=c.def();a=a.cond("typeof ",b,'==="string"');a.then(e,"=",f,"=",h,"[",b,"];");a["else"](e,"=",h,"[",b,".rgb];",f,"=",h,"[",b,".alpha];");
c(a);return[e,f]});case "blend.color":return d(function(a){return m(4,function(c){return+a[c]})},function(a,c,b){return m(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return d(function(a){return a|0},function(a,c,b){return c.def(b,"|0")});case "stencil.func":return d(function(a){return[u[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,c,b){a=c.def('"cmp" in ',b,"?",a.constants.compareFuncs,"[",b,".cmp]",":",7680);var h=c.def(b,".ref|0");c=c.def('"mask" in ',b,"?",
b,".mask|0:-1");return[a,h,c]});case "stencil.opFront":case "stencil.opBack":return d(function(c){return["stencil.opBack"===a?1029:1028,t[c.fail||"keep"],t[c.zfail||"keep"],t[c.pass||"keep"]]},function(c,b,h){function e(a){return b.def('"',a,'" in ',h,"?",f,"[",h,".",a,"]:",7680)}var f=c.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return d(function(a){return[a.factor|0,a.units|0]},function(a,c,b){a=c.def(b,".factor|0");c=
c.def(b,".units|0");return[a,c]});case "cull.face":return d(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);return c},function(a,c,b){return c.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return d(function(a){return a},function(a,c,b){return b});case "frontFace":return d(function(a){return w[a]},function(a,c,b){return c.def(b+'==="cw"?2304:2305')});case "colorMask":return d(function(a){return a.map(function(a){return!!a})},function(a,c,b){return m(4,function(a){return"!!"+b+"["+
a+"]"})});case "sample.coverage":return d(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,c,b){a=c.def('"value" in ',b,"?+",b,".value:1");c=c.def("!!",b,".invert");return[a,c]})}});return f}function ga(a){var c=a["static"],b=a.dynamic,f={};Object.keys(c).forEach(function(a){var b=c[a],e;if("number"===typeof b||"boolean"===typeof b)e=h(function(){return b});else if("function"===typeof b&&("texture2d"===b._reglType||"textureCube"===b._reglTYpe))e=h(function(a){return a.link(b)});else if(Array.isArray(b)||
k(b))e=h(function(a){return a.global.def("[",m(b.length,function(a){return b[a]}),"]")});e.value=b;f[a]=e});Object.keys(b).forEach(function(a){var c=b[a];f[a]=e(c,function(a,b){return a.invoke(b,c)})});return f}function T(a){var c=a["static"],b=a.dynamic,f={};Object.keys(c).forEach(function(a){var b=c[a],e=g.id(a),m=new ia;if(d(b))m.state=1,m.buffer=B.getBuffer(B.create(b,34962,!1)),m.type=m.buffer.dtype;else{var k=B.getBuffer(b);if(k)m.state=1,m.buffer=k,m.type=k.dtype;else if(b.constant){var p=
b.constant;m.state=2;"number"===typeof p?m.x=p:q.forEach(function(a,c){c<p.length&&(m[a]=p[c])})}else{var k=B.getBuffer(b.buffer),l=b.offset|0,F=b.stride|0,t=b.size|0,w=!!b.normalized,u=0;"type"in b&&(u=x[b.type]);b=b.divisor|0;m.buffer=k;m.state=1;m.size=t;m.normalized=w;m.type=u||k.dtype;m.offset=l;m.stride=F;m.divisor=b}}f[a]=h(function(a,c){var b=a.attribCache;if(e in b)return b[e];var h={isStream:!1};Object.keys(m).forEach(function(a){h[a]=m[a]});m.buffer&&(h.buffer=a.link(m.buffer));return b[e]=
h})});Object.keys(b).forEach(function(a){var c=b[a];f[a]=e(c,function(a,b){function h(a){b(k[a],"=",e,".",a,"|0;")}var e=a.invoke(b,c),f=a.shared,d=f.isBufferArgs,m=f.buffer,k={isStream:b.def(!1)},p=new ia;p.state=1;Object.keys(p).forEach(function(a){k[a]=b.def(""+p[a])});var l=k.buffer,x=k.type;b("if(",d,"(",e,")){",k.isStream,"=true;",l,"=",m,".createStream(",34962,",",e,");",x,"=",l,".dtype;","}else{",l,"=",m,".getBuffer(",e,");","if(",l,"){",x,"=",l,".dtype;","}else if(",e,".constant){",k.state,
"=",2,";",q.map(function(a,c){return k[a]+"="+e+".length>="+c+"?"+e+"["+c+"]:0;"}).join(""),"}else{",l,"=",m,".getBuffer(",e,".buffer);",x,'="type" in ',e,"?",f.glTypes,"[",e,".type]:",l,".dtype;",k.normalized,"=!!",e,".normalized;");h("size");h("offset");h("stride");h("divisor");b("}}");return k})});return f}function P(a){var c=a["static"],b=a.dynamic,f={};Object.keys(c).forEach(function(a){var b=c[a];f[a]=h(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});Object.keys(b).forEach(function(a){var c=
b[a];f[a]=e(c,function(a,b){return a.invoke(b,c)})});return f}function Q(a,c,b){var h=a.shared.context,e=a.scope();Object.keys(b).forEach(function(f){c.save(h,"."+f);e(h,".",f,"=",b[f].append(a,c),";")});c(e)}function ja(a,c,b){var h=a.shared,e=h.gl,f=h.framebuffer,d;Z&&(d=c.def(h.extensions,".webgl_draw_buffers"));var m=a.constants,h=m.drawBuffer,m=m.backBuffer;a=b?b.append(a,c):c.def(f,".next");c("if(",f,".dirty||",a,"!==",f,".cur){","if(",a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");
Z&&c(d,".drawBuffersWEBGL(",h,"[",a,".colorAttachments.length]);");c("}else{",e,".bindFramebuffer(",36160,",null);");Z&&c(d,".drawBuffersWEBGL(",m,");");c("}",f,".cur=",a,";",f,".dirty=false;","}")}function ha(a,c,b){var h=a.shared,e=h.gl,f=a.current,d=a.next,k=h.current,p=h.next,l=a.cond(k,".dirty");ra.forEach(function(c){c=L(c);if(!(c in b.state)){var h,x;if(c in d){h=d[c];x=f[c];var q=m(R[c].length,function(a){return l.def(h,"[",a,"]")});l(a.cond(q.map(function(a,c){return a+"==="+x+"["+c+"]"}).join("&&")).then(e,
".",da[c],"(",q,");",q.map(function(a,c){return x+"["+c+"]="+a}).join(";"),";"))}else h=l.def(p,".",c),q=a.cond(h,"!==",k,".",c),l(q),c in ca?q(a.cond(h).then(e,".enable(",ca[c],");")["else"](e,".disable(",ca[c],");"),k,".",c,"=",h,";"):q(e,".",da[c],"(",h,");",k,".",c,"=",h,";")}});0===Object.keys(b.state).length&&l(k,".dirty=false;");c(l)}function ma(a,h,e,f){var d=a.shared,m=a.current,k=d.current,p=d.gl;b(Object.keys(e)).forEach(function(b){var d=e[b];if(!f||f(d)){var l=d.append(a,h);if(ca[b]){var x=
ca[b];c(d)?l?h(p,".enable(",x,");"):h(p,".disable(",x,");"):h(a.cond(l).then(p,".enable(",x,");")["else"](p,".disable(",x,");"));h(k,".",b,"=",l,";")}else if(Array.isArray(l)){var q=m[b];h(p,".",da[b],"(",l,");",l.map(function(a,c){return q+"["+c+"]="+a}).join(";"),";")}else h(p,".",da[b],"(",l,");",k,".",b,"=",l,";")}})}function ka(a,c){ba&&!a.instancing&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function na(a,c,b,h,e){function f(a){switch(a){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function d(b,h,e){function f(){c("if(!",x,".pointer){",p,".enableVertexAttribArray(",l,");",x,".pointer=true;}");var b=e.type,d;d=e.size?c.def(e.size,"||",h):h;c("if(",x,".type!==",b,"||",x,".size!==",d,"||",t.map(function(a){return x+"."+a+"!=="+e[a]}).join("||"),"){",p,".bindBuffer(",34962,",",g,".buffer);",p,".vertexAttribPointer(",[l,d,b,e.normalized,e.stride,e.offset],");",x,".type=",b,";",x,
".size=",d,";",t.map(function(a){return x+"."+a+"="+e[a]+";"}).join(""),"}");ba&&(b=e.divisor,c("if(",x,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[l,b],");",x,".divisor=",b,";}"))}function k(){c("if(",x,".pointer){",p,".disableVertexAttribArray(",l,");",x,".pointer=false;","}if(",q.map(function(a,c){return x+"."+a+"!=="+F[c]}).join("||"),"){",p,".vertexAttrib4f(",l,",",F,");",q.map(function(a,c){return x+"."+a+"="+F[c]+";"}).join(""),"}")}var p=m.gl,l=c.def(b,".location"),x=c.def(m.attributes,
"[",l,"]");b=e.state;var g=e.buffer,F=[e.x,e.y,e.z,e.w],t=["buffer","normalized","offset","stride"];1===b?f():2===b?k():(c("if(",b,"===",1,"){"),f(),c("}else{"),k(),c("}"))}var m=a.shared;h.forEach(function(h){var m=h.name,k=b.attributes[m],p;if(k){if(!e(k))return;p=k.append(a,c)}else{if(!e(C))return;var l=a.scopeAttrib(m);p={};Object.keys(new ia).forEach(function(a){p[a]=c.def(l,".",a)})}d(a.link(h),f(h.info.type),p)})}function W(a,c,b,h,e){for(var f=a.shared,d=f.gl,m,k=0;k<h.length;++k){var p=h[k],
l=p.name,x=p.info.type,q=b.uniforms[l],p=a.link(p)+".location";if(q){if(!e(q))continue;if(q["static"]){l=q.value;if(35678===x||35680===x)x=a.link(l._texture),c(d,".uniform1i(",p,x+".bind());"),c.exit(x,".unbind()");else if(35674===x||35675===x||35676===x)l=a.global.def("["+l+"]"),q=2,35675===x?q=3:35676===x&&(q=4),c(d,".uniformMatrix",q,"fv(",p,",false,",l,");");else{switch(x){case 5126:m="1f";break;case 35664:m="2f";break;case 35665:m="3f";break;case 35666:m="4f";break;case 35670:m="1i";break;case 5124:m=
"1i";break;case 35671:m="2i";break;case 35667:m="2i";break;case 35672:m="3i";break;case 35668:m="3i";break;case 35673:m="4i";break;case 35669:m="4i"}c(d,".uniform",m,"(",p,",",l,");")}continue}else l=q.append(a,c)}else{if(!e(C))continue;l=c.def(f.uniforms,"[",g.id(l),"]")}q=",";switch(x){case 35678:case 35680:x=c.def(l,"._texture");c(d,".uniform1i(",p,",",x,".bind());");c.exit(x,".unbind();");continue;case 5124:case 35670:m="1i";break;case 35667:case 35671:m="2iv";break;case 35668:case 35672:m="3iv";
break;case 35669:case 35673:m="4iv";break;case 5126:m="1f";break;case 35664:m="2fv";break;case 35665:m="3fv";break;case 35666:m="4fv";break;case 35674:m="Matrix2fv";q=",false,";break;case 35675:m="Matrix3fv";q=",false,";break;case 35676:m="Matrix4fv",q=",false,"}c(d,".uniform",m,"(",p,q,l,");")}}function X(a,b,h,e){function f(c){var e=x[c];return e?e.batchStatic?e.append(a,b):e.append(a,h):b.def(l,".",c)}function m(){function a(){h(u,".drawElementsInstancedANGLE(",[g,t,R,F+"<<(("+R+"-5121)>>1)",w],
");")}function c(){h(u,".drawArraysInstancedANGLE(",[g,F,t,w],");")}q?n?a():(h("if(",q,"){"),a(),h("}else{"),c(),h("}")):c()}function d(){function a(){h(p+".drawElements("+[g,t,R,F+"<<(("+R+"-5121)>>1)"]+");")}function c(){h(p+".drawArrays("+[g,F,t]+");")}q?n?a():(h("if(",q,"){"),a(),h("}else{"),c(),h("}")):c()}var k=a.shared,p=k.gl,l=k.draw,x=e.draw,q=function(){var c=x.elements,e=b;c?(c.batchStatic||(e=h),c=c.append(a,e)):c=e.def(l,".","elements");c&&e("if("+c+")"+p+".bindBuffer(34963,"+c+".buffer.buffer);");
return c}(),g=f("primitive"),F=f("offset"),t=function(){var c=x.count,e=b;c?(c.batchStatic||(e=h),c=c.append(a,e)):c=e.def(l,".","count");return c}();if("number"===typeof t){if(0===t)return}else h("if(",t,"){"),h.exit("}");var w,u;ba&&(w=f("instances"),u=a.instancing);var R=q+".type",n=x.elements&&c(x.elements);ba&&("number"!==typeof w||0<=w)?"string"===typeof w?(h("if(",w,">0){"),m(),h("}else if(",w,"<0){"),d(),h("}")):m():d()}function Y(a,c,b,h,e){c=U();e=c.proc("body",e);ba&&(c.instancing=e.def(c.shared.extensions,
".angle_instanced_arrays"));a(c,e,b,h);return c.compile().body}function ta(a,c,b,h){ka(a,c);na(a,c,b,h.attributes,function(){return!0});W(a,c,b,h.uniforms,function(){return!0});X(a,c,c,b)}function ua(a,c){var b=a.proc("draw",1);ka(a,b);Q(a,b,c.context);ja(a,b,c.framebuffer);ha(a,b,c);ma(a,b,c.state);var h=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",h,".program);");if(c.shader.program)ta(a,b,c,c.shader.program);else{var e=a.global.def("{}"),f=b.def(h,".id"),m=b.def(e,"[",f,"]");b(a.cond(m).then(m,
".call(this,a0);")["else"](m,"=",e,"[",f,"]=",a.link(function(b){return Y(ta,a,c,b,1)}),"(",h,");",m,".call(this,a0);"))}0<Object.keys(c.state).length&&b(a.shared.current,".dirty=true;")}function wa(a,c,b,h){function e(){return!0}a.batchId="a1";ka(a,c);na(a,c,b,h.attributes,e);W(a,c,b,h.uniforms,e);X(a,c,c,b)}function oa(a,c,b,h){function e(a){return a.contextDep&&m||a.propDep}function f(a){return!e(a)}ka(a,c);var m=b.contextDynamic,d=c.def(),k=c.def();a.shared.props=k;a.batchId=d;var p=a.scope(),
l=a.scope();c(p.entry,"for(",d,"=0;",d,"<","a1",";++",d,"){",k,"=","a0","[",d,"];",l,"}",p.exit);b.needsContext&&Q(a,l,b.context);b.needsFramebuffer&&ja(a,l,b.framebuffer);ma(a,l,b.state,e);h?(na(a,p,b,h.attributes,f),na(a,l,b,h.attributes,e),W(a,p,b,h.uniforms,f),W(a,l,b,h.uniforms,e),X(a,p,l,b)):(c=a.global.def("{}"),h=b.shader.progVar.append(a,l),k=l.def(h,".id"),p=l.def(c,"[",k,"]"),l(a.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",c,"[",k,"]=",a.link(function(c){return Y(wa,a,b,
c,2)}),"(",h,");}",p,".call(this,a0[",d,"],",d,");"))}function va(a,c){var b=a.proc("batch",2);a.batchId="0";ka(a,b);var h=!1,e=!0;Object.keys(c.context).forEach(function(a){h=h||c.context[a].propDep});h||(Q(a,b,c.context),e=!1);var f=c.framebuffer,m=!1;f&&(f.propDep?h=m=!0:f.contextDep&&h&&(m=!0),m||ja(a,b,f));c.state.viewport&&c.state.viewport.propDynamic&&(h=!0);ha(a,b,c);ma(a,b,c.state,function(a){return!(a.contextDep&&h||a.propDep)});c.contextDep=h;c.needsContext=e;c.needsFramebuffer=m;e=c.shader.progVar;
if(e.contextDep&&h||e.propDep)oa(a,b,c,null);else if(e=e.append(a,b),b(a.shared.gl,".useProgram(",e,".program);"),c.shader.program)oa(a,b,c,c.shader.program);else{var f=a.global.def("{}"),m=b.def(e,".id"),d=b.def(f,"[",m,"]");b(a.cond(d).then(d,".call(this,a0,a1);")["else"](d,"=",f,"[",m,"]=",a.link(function(b){return Y(oa,a,c,b,2)}),"(",e,");",d,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&b(a.shared.current,".dirty=true;")}function qa(a,c){function h(b){var m=c.shader[b];m&&e.set(f.shader,
"."+b,m.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var f=a.shared,m=f.current;Q(a,e,c.context);c.framebuffer&&c.framebuffer.append(a,e);b(Object.keys(c.state)).forEach(function(b){var h=c.state[b].append(a,e);Array.isArray(h)?h.forEach(function(c,h){e.set(a.next[b],"["+h+"]",c)}):e.set(f.next,"."+b,h)});["elements","offset","count","instances","primitive"].forEach(function(b){var h=c.draw[b];h&&e.set(f.draw,"."+b,""+h.append(a,e))});Object.keys(c.uniforms).forEach(function(b){e.set(f.uniforms,
"["+g.id(b)+"]",c.uniforms[b].append(a,e))});Object.keys(c.attributes).forEach(function(b){var h=c.attributes[b].append(a,e),f=a.scopeAttrib(b);Object.keys(new ia).forEach(function(a){e.set(f,"."+a,h[a])})});h("vert");h("frag");0<Object.keys(c.state).length&&(e(m,".dirty=true;"),e.exit(m,".dirty=true;"));e("a1(",a.shared.context,",a0,0);")}var ia=K.Record,V={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(V.min=32775,V.max=32776);var ba=n.angle_instanced_arrays,Z=n.webgl_draw_buffers,
R={dirty:!0},pa={},ra=[],ca={},da={};G("dither",3024);G("blend.enable",3042);N("blend.color","blendColor",[0,0,0,0]);N("blend.equation","blendEquationSeparate",[32774,32774]);N("blend.func","blendFuncSeparate",[1,0,1,0]);G("depth.enable",2929,!0);N("depth.func","depthFunc",513);N("depth.range","depthRange",[0,1]);N("depth.mask","depthMask",!0);N("colorMask","colorMask",[!0,!0,!0,!0]);G("cull.enable",2884);N("cull.face","cullFace",1029);N("frontFace","frontFace",2305);N("lineWidth","lineWidth",1);
G("polygonOffset.enable",32823);N("polygonOffset.offset","polygonOffset",[0,0]);G("sample.alpha",32926);G("sample.enable",32928);N("sample.coverage","sampleCoverage",[1,!1]);G("stencil.enable",2960);N("stencil.mask","stencilMask",-1);N("stencil.func","stencilFunc",[519,0,-1]);N("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);N("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);G("scissor.enable",3089);N("scissor.box","scissor",[0,0,p.drawingBufferWidth,p.drawingBufferHeight]);
N("viewport","viewport",[0,0,p.drawingBufferWidth,p.drawingBufferHeight]);var xa={gl:p,context:J,strings:g,next:pa,current:R,draw:O,elements:r,buffer:B,shader:M,attributes:K.state,uniforms:H,framebuffer:I,extensions:n,isBufferArgs:d},sa={primTypes:l,compareFuncs:u,blendFuncs:F,blendEquations:V,stencilOps:t,glTypes:x,orientationType:w};Z&&(sa.backBuffer=[1029],sa.drawBuffer=m(y.maxDrawbuffers,function(a){return 0===a?[0]:m(a,function(a){return 36064+a})}));var ya=0;return{next:pa,current:R,procs:function(){var a=
U(),c=a.proc("poll"),b=a.proc("refresh"),h=a.block();c(h);b(h);var e=a.shared,f=e.gl,d=e.next,k=e.current;h(k,".dirty=false;");ja(a,c);b(e.framebuffer,".dirty=true;");ja(a,b);Object.keys(ca).forEach(function(e){var m=ca[e],p=h.def(d,".",e),l=a.block();l("if(",p,"){",f,".enable(",m,")}else{",f,".disable(",m,")}",k,".",e,"=",p,";");b(l);c("if(",p,"!==",k,".",e,"){",l,"}")});Object.keys(da).forEach(function(e){var p=da[e],l=R[e],x,q,g=a.block();g(f,".",p,"(");Array.isArray(l)?(p=l.length,x=a.global.def(d,
".",e),q=a.global.def(k,".",e),g(m(p,function(a){return x+"["+a+"]"}),");",m(p,function(a){return q+"["+a+"]="+x+"["+a+"];"}).join("")),c("if(",m(p,function(a){return x+"["+a+"]!=="+q+"["+a+"]"}).join("||"),"){",g,"}")):(x=h.def(d,".",e),q=h.def(k,".",e),g(x,");",k,".",e,"=",x,";"),c("if(",x,"!==",q,"){",g,"}"));b(g)});return a.compile()}(),compile:function(a,c,b,h){var e=U(),f;f=S(a);var m=ea(a,f),d=la(a),k=aa(a);a=fa(a);var p=m.viewport;p&&(k.viewport=p);p=L("scissor.box");(m=m[p])&&(k[p]=m);m=
0<Object.keys(k).length;f={framebuffer:f,draw:d,shader:a,state:k,dirty:m};f.uniforms=ga(b);f.attributes=T(c);f.context=P(h);ua(e,f);qa(e,f);va(e,f);return e.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":20,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/loop":24}],9:[function(g,n,r){function d(a,b){this.id=c++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),f=a.charAt(a.length-1);if(1<a.length&&c===f&&('"'===
c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(f=0;f<c.length;++f)a=a.concat(b(c[f]));return a}function a(a){return"["+b(a).join("][")+"]"}var c=0;n.exports={define:function(c,b){switch(typeof b){case "boolean":case "number":case "string":return new d(c,
a(b+""));case "undefined":return new d(c|128,null)}},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof d},unbox:function(c,b){if(c instanceof d){if(c.type&128)return new d(c.type&-129,a(b))}else if("function"===typeof c)return new d(0,c);return c},accessor:a}},{}],10:[function(g,n,r){var d=g("./util/is-typed-array"),b=g("./util/is-ndarray"),a=g("./constants/primitives.json"),c=g("./constants/usage.json");n.exports=function(h,e,f){function m(a){this.buffer=a;this.primType=
4;this.type=this.vertCount=0}function k(a,c,h,m,k,p,l){(p=l)||d(c)&&(!b(c)||d(c.data))||(p=e.oes_element_index_uint?5125:5123);a.buffer.bind();f._initBuffer(a.buffer,c,h,p,3);c=l;if(!l){switch(a.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}a.buffer.dtype=c}a.type=c;0>k&&(k=a.buffer.byteLength,5123===c?k>>=1:5125===c&&(k>>=2));a.vertCount=k;k=m;0>m&&(k=4,m=a.buffer.dimension,1===m&&(k=0),2===m&&(k=1),3===m&&(k=4));a.primType=k}var p={uint8:5121,
uint16:5123};e.oes_element_index_uint&&(p.uint32=5125);m.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(e){function l(e){if(e)if("number"===typeof e)g(e),u.primType=4,u.vertCount=e|0,u.type=5121;else{var f=null,m=35044,x=-1,n=-1,A=0,y=0;Array.isArray(e)||d(e)||b(e)?f=e:("data"in e&&(f=e.data),"usage"in e&&(m=c[e.usage]),"primitive"in e&&(x=a[e.primitive]),"count"in e&&(n=e.count|0),"length"in e&&(A=e.length|0),"type"in e&&(y=p[e.type]));f?k(u,f,m,x,n,A,y):(e=u.buffer,
e.bind(),h.bufferData(34963,A,m),e.dtype=y||5121,e.usage=m,e.dimension=3,e.byteLength=A,u.primType=0>x?4:x,u.vertCount=0>n?0:n,u.type=e.dtype)}else g(),u.primType=4,u.vertCount=0,u.type=5121;return l}var g=f.create(null,34963,!0),u=new m(g._buffer);l(e);l._reglType="elements";l._elements=u;l.subdata=function(a,c){g.subdata(a,c);return l};l.destroy=function(){g.destroy();u.buffer=null};return l},createStream:function(a){var c=l.pop();c||(c=new m(f.create(null,34963,!0)._buffer));k(c,a,35040,-1,-1,
0,0);return c},destroyStream:function(a){l.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof m?a._elements:null}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23}],11:[function(g,n,r){n.exports=function(d){function b(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(c){try{a[c]=
d.getExtension(c)}catch(b){}})}var a={};b();return{extensions:a,refresh:b}}},{}],12:[function(g,n,r){var d=g("./util/values"),b=g("./util/extend");n.exports=function(a,c,h,e,f){function m(a,c,b,h){this.target=a;this.level=c;this.texture=b;this.renderbuffer=h}function k(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function p(a,c){var b=c.width,h=c.height;if(a.texture)var e=a.texture._texture,f=Math.max(1,e.params.width>>a.level),m=Math.max(1,
e.params.height>>a.level),b=b||f,h=h||m;else e=a.renderbuffer._renderbuffer,b=b||e.width,h=h||e.height;e.refCount+=1;c.width=b;c.height=h}function l(c,b){b?b.texture?a.framebufferTexture2D(36160,c,b.target,b.texture._texture.texture,b.level):a.framebufferRenderbuffer(36160,c,36161,b.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,c,3553,null,0)}function x(a){var c=3553,b=0,h=null,e=null;"object"===typeof a&&("level"in a&&(b=a.level|0),"target"in a&&(c=a.target|0));var f=a._reglType;
"texture"===f?h=a:"renderbuffer"===f&&(e=a,c=36161,b=0);return new m(c,b,h,e)}function q(a){return a&&(a.texture||a.renderbuffer)}function g(){this.id=B++;D[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function u(b){a.isFramebuffer(b.framebuffer)||(b.framebuffer=a.createFramebuffer());w.dirty=!0;a.bindFramebuffer(36160,b.framebuffer);for(var e=
b.colorAttachments,f=0;f<e.length;++f)l(36064+f,e[f]);for(f=e.length;f<h.maxColorAttachments;++f)l(36064+f,null);l(36096,b.depthAttachment);l(36128,b.stencilAttachment);l(33306,b.depthStencilAttachment);c.webgl_draw_buffers&&c.webgl_draw_buffers.drawBuffersWEBGL(y[e.length]);a.checkFramebufferStatus(36160)}function t(c){c=c.framebuffer;a.isFramebuffer(c)&&a.deleteFramebuffer(c)}var w={current:null,next:null,dirty:!1},n={rgba:6408},v={rgba4:32854,rgb565:36194,"rgb5 a1":32855};c.ext_srgb&&(v.srgba=
35907);c.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);c.webgl_color_buffer_float&&(v.rgba32f=34836);var r=[],A=[];c.webgl_depth_texture&&(r.push(6402),A.push(34041));b(b({},n),v);d(n);d(v);v=5121;r={uint8:5121};c.oes_texture_half_float&&(v=r["half float"]=36193);c.oes_texture_float&&(v=r["float"]=5126);r.best=v;var y=function(){for(var a=Array(h.maxDrawbuffers),c=0;c<=h.maxDrawbuffers;++c)for(var b=a[c]=Array(c),e=0;e<c;++e)b[e]=36064+e;return a}(),B=0,D={};return b(w,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof g)?a:null},create:function(c){function b(c){var d,l=c||{},g=c=0;if("shape"in l){var F=l.shape;c=F[0];g=F[1]}else"radius"in l&&(c=g=l.radius),"width"in l&&(c=l.width),"height"in l&&(g=l.height);var w=null,F=!1;if("colorBuffers"in l||"colorBuffer"in l){w=l.colorBuffers||l.colorBuffer;Array.isArray(w)||(w=[w]);h.width=c;h.height=g;w=w.map(x);for(d=0;d<w.length;++d)p(w[d],h);c=h.width;g=h.height}else{var t=!0,v="rgba",A="uint8",y=1,
F=!0;h.width=c=c||a.drawingBufferWidth;h.height=g=g||a.drawingBufferHeight;"format"in l&&(v=l.format,t=v in n);"type"in l&&(A=l.type);"colorCount"in l&&(y=l.colorCount|0);if(h.ownsColor)for(w=h.colorAttachments;w.length>y;)k(w.pop());else w=[];for(d=0;d<w.length;++d){var r;a:{r=w[d];var B=t,z=v,D=c,E=g;if(r.texture){var P=r.texture;if(B){P({format:z,type:A,width:D,height:E});P._texture.refCount+=1;r=!0;break a}}else if(P=r.renderbuffer,!B){P({format:z,width:D,height:E});P._renderbuffer.refCount+=
1;r=!0;break a}k(r);r=!1}r||(w[d--]=w[w.length-1],w.pop())}for(;w.length<y;)t?w.push(new m(3553,0,e.create2D({format:v,type:A,width:c,height:g},3553),null)):w.push(new m(36161,0,null,f.create({format:v,width:c,height:g})))}h.width=c;h.height=g;v=t=d=null;A=!1;"depthBuffer"in l&&(d=x(l.depthBuffer));"stencilBuffer"in l&&(t=x(l.stencilBuffer));"depthStencilBuffer"in l&&(v=x(l.depthStencilBuffer));if(d||t||v)p(d||t||v,h);else if(y=!0,B=r=!1,"depth"in l&&(y=!!l.depth),"stencil"in l&&(r=!!l.stencil),"depthTexture"in
l&&(B=!!l.depthTexture),l=h.depthAttachment||h.stencilAttachment||h.depthStencilAttachment,z=null,y||r)A=!0,B?(B=r?"depth stencil":"depth",h.ownsDepthStencil&&l.texture?(l.texture({format:B,width:c,height:g}),l.texture._texture.refCount+=1,z=l):z=new m(3553,0,e.create({format:B,width:c,height:g},3553),null)):(B=y?r?"depth stencil":"depth":"stencil",h.ownsDepthStencil&&l.renderbuffer?(l.renderbuffer({format:B,width:c,height:g}),l.renderbuffer._renderbuffer.refCount+=1,z=l):z=new m(36161,0,null,f.create({format:B,
width:c,height:g}))),y?r?v=z:d=z:t=z;c=h;c.colorAttachments.forEach(k);k(c.depthAttachment);k(c.stencilAttachment);k(c.depthStencilAttachment);h.colorAttachments=w;h.depthAttachment=d;h.stencilAttachment=t;h.depthStencilAttachment=v;h.ownsColor=F;h.ownsDepthStencil=A;b.color=w.map(q);b.depth=q(d);b.stencil=q(t);b.depthStencil=q(v);u(h);b.width=h.width;b.height=h.height;return b}var h=new g;b(c);b._reglType="framebuffer";b._framebuffer=h;b._destroy=function(){t(h)};return b},clear:function(){d(D).forEach(t)},
refresh:function(){d(D).forEach(u)}})}},{"./util/extend":21,"./util/values":28}],13:[function(g,n,r){n.exports=function(d,b){var a=1;b.ext_texture_filter_anisotropic&&(a=d.getParameter(34047));var c=1,h=1;b.webgl_draw_buffers&&(c=d.getParameter(34852),h=d.getParameter(36063));return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),
maxAnisotropic:a,maxDrawbuffers:c,maxColorAttachments:h,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938)}}},{}],14:[function(g,n,r){var d=g("./util/is-typed-array");n.exports=function(b,a,c){return function(h){var e=h||{};d(h)?e={data:e}:2===arguments.length?e={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof h&&(e={});a();var f=e.x||0,m=e.y||0,k=e.width||c.viewportWidth,p=e.height||c.viewportHeight,e=e.data||new Uint8Array(k*p*4);b.pixelStorei(3333,
4);b.readPixels(f,m,k,p,6408,5121,e);return e}}},{"./util/is-typed-array":23}],15:[function(g,n,r){var d=g("./util/values");n.exports=function(b,a,c){function h(){this.id=k++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function e(a){b.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=b.createRenderbuffer());b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)}function f(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,
null);b.isRenderbuffer(c)&&b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete p[a.id]}var m={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(m.srgba=35907);a.ext_color_buffer_half_float&&(m.rgba16f=34842,m.rgb16f=34843);a.webgl_color_buffer_float&&(m.rgba32f=34836);var k=0,p={};h.prototype.decRef=function(){0===--this.refCount&&f(this)};return{create:function(a){function c(a){a=a||{};var h=0,f=0;"shape"in a?(f=a.shape,h=f[0]|0,f=
f[1]|0):("radius"in a&&(h=f=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(f=a.height|0));c.width=b.width=Math.max(h,1);c.height=b.height=Math.max(f,1);b.format=32854;"format"in a&&(b.format=m[a.format]);e(b);return c}var b=new h;p[b.id]=b;c(a);c._reglType="renderbuffer";c._renderbuffer=b;c.destroy=function(){b.decRef()};return c},refresh:function(){d(p).forEach(e)},clear:function(){d(p).forEach(f)}}}},{"./util/values":28}],16:[function(g,n,r){var d=g("./util/values");n.exports=function(b,
a){function c(a,c,b,h){this.name=a;this.id=c;this.location=b;this.info=h}function h(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;return}a.push(c)}function e(c,h,e){e=35632===c?k:p;var f=e[h];if(!f){var m=a.str(h),f=b.createShader(c);b.shaderSource(f,m);b.compileShader(f);e[h]=f}return f}function f(a,c){this.id=g++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[]}function m(f,m){var d,k;d=e(35632,f.fragId);k=e(35633,f.vertId);var l=f.program=
b.createProgram();b.attachShader(l,d);b.attachShader(l,k);b.linkProgram(l);var p=b.getProgramParameter(l,35718),x=f.uniforms;for(d=0;d<p;++d)if(k=b.getActiveUniform(l,d))if(1<k.size)for(var g=0;g<k.size;++g){var q=k.name.replace("[0]","["+g+"]");h(x,new c(q,a.id(q),b.getUniformLocation(l,q),k))}else h(x,new c(k.name,a.id(k.name),b.getUniformLocation(l,k.name),k));p=b.getProgramParameter(l,35721);x=f.attributes;for(d=0;d<p;++d)(k=b.getActiveAttrib(l,d))&&h(x,new c(k.name,a.id(k.name),b.getAttribLocation(l,
k.name),k))}var k={},p={},l={},x=[],g=0;return{clear:function(){var a=b.deleteShader.bind(b);d(k).forEach(a);k={};d(p).forEach(a);p={};x.forEach(function(a){b.deleteProgram(a.program)});x.length=0;l={}},refresh:function(){k={};p={};x.forEach(m)},program:function(a,c,b){var h=l[c];h||(h=l[c]={});var e=h[a];e||(e=new f(c,a),m(e,b),h[a]=e,x.push(e));return e},shader:e,frag:null,vert:null}}},{"./util/values":28}],17:[function(g,n,r){n.exports=function(){var d={"":0},b=[""];return{id:function(a){var c=
d[a];if(c)return c;c=d[a]=b.length;b.push(a);return c},str:function(a){return b[a]}}}},{}],18:[function(g,n,r){function d(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){if(!Array.isArray(a))return!1;var c=a.length;if(0===c||!Array.isArray(a[0]))return!1;for(var b=a[0].length,h=1;h<c;++h)if(!Array.isArray(a[h])||a[h].length!==b)return!1;return!0}function a(a){return Object.prototype.toString.call(a)}function c(c){if(!c)return!1;var h=a(c);return 0<=t.indexOf(h)?!0:
d(c)||b(c)||k(c)}function h(a,c){36193===a.type?(a.data=l(c),p.freeType(c)):a.data=c}var e=g("./util/extend"),f=g("./util/values"),m=g("./util/is-typed-array"),k=g("./util/is-ndarray"),p=g("./util/pool"),l=g("./util/to-half-float");r=g("./constants/arraytypes.json");var x=g("./constants/arraytypes.json"),q=[9984,9986,9985,9987],F=[0,6409,6410,6407,6408],u={};u[6409]=u[6406]=u[6402]=1;u[34041]=u[6410]=2;u[6407]=3;u[6408]=4;var t=Object.keys(r).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]",
"[object HTMLImageElement]","[object HTMLVideoElement]"]);n.exports=function(g,n,t,r,A){function y(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function B(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;
a.width=c.width;a.height=c.height;a.channels=c.channels}function D(a,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(a.flipY=c.flipY);"alignment"in c&&(a.unpackAlignment=c.alignment);"colorSpace"in c&&(a.colorSpace=na[c.colorSpace]);"type"in c&&(a.type=W[c.type]);var b=a.width,h=a.height,e=a.channels,f=!1;"shape"in c?(b=c.shape[0],h=c.shape[1],3===c.shape.length&&(e=c.shape[2],f=!0)):("radius"in c&&(b=h=c.radius),"width"in c&&(b=c.width),
"height"in c&&(h=c.height),"channels"in c&&(e=c.channels,f=!0));a.width=b|0;a.height=h|0;a.channels=e|0;b=!1;"format"in c&&(b=c.format,h=a.internalformat=X[b],a.format=wa[h],b in W&&!("type"in c)&&(a.type=W[b]),b in Y&&(a.compressed=!0),b=!0);!f&&b?a.channels=u[a.format]:f&&!b&&a.channels!==F[a.format]&&(a.format=a.internalformat=F[a.channels])}}function E(a){g.pixelStorei(37440,a.flipY);g.pixelStorei(37441,a.premultiplyAlpha);g.pixelStorei(37443,a.colorSpace);g.pixelStorei(3317,a.unpackAlignment)}
function I(){y.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function H(e,f){var g=null;c(f)?g=f:f&&(D(e,f),"x"in f&&(e.xOffset=f.x|0),"y"in f&&(e.yOffset=f.y|0),c(f.data)&&(g=f.data));if(f.copy){var q=A.viewportWidth,n=A.viewportHeight;e.width=e.width||q-e.xOffset;e.height=e.height||n-e.yOffset;e.needsCopy=!0}else if(!g)e.width=e.width||1,e.height=e.height||1;else if(m(g))e.data=g,"type"in f||5121!==e.type||(e.type=x[Object.prototype.toString.call(g)]|
0);else if(d(g)){q=g;n=e.width*e.height*e.channels;switch(e.type){case 5121:case 5123:case 5125:case 5126:n=p.allocType(e.type,n);n.set(q);e.data=n;break;case 36193:e.data=l(q)}e.alignment=1;e.needsFree=!0}else if(k(g)){q=g.data;Array.isArray(q)||5121!==e.type||(e.type=x[Object.prototype.toString.call(q)]|0);var n=g.shape,t=g.stride,u,w,v,r;3===n.length?(v=n[2],r=t[2]):r=v=1;u=n[0];w=n[1];n=t[0];t=t[1];e.alignment=1;e.width=u;e.height=w;e.channels=v;e.format=e.internalformat=F[v];e.needsFree=!0;u=
r;g=g.offset;v=e.width;r=e.height;w=e.channels;for(var y=p.allocType(36193===e.type?5126:e.type,v*r*w),C=0,B=0;B<r;++B)for(var z=0;z<v;++z)for(var E=0;E<w;++E)y[C++]=q[n*z+t*B+u*E+g];h(e,y)}else if("[object HTMLCanvasElement]"===a(g)||"[object CanvasRenderingContext2D]"===a(g))"[object HTMLCanvasElement]"===a(g)?e.element=g:e.element=g.canvas,e.width=e.element.width,e.height=e.element.height;else if("[object HTMLImageElement]"===a(g))e.element=g,e.width=g.naturalWidth,e.height=g.naturalHeight;else if("[object HTMLVideoElement]"===
a(g))e.element=g,e.width=g.videoWidth,e.height=g.videoHeight,e.needsPoll=!0;else if(b(g)){q=g[0].length;n=g.length;t=1;if(Array.isArray(g[0][0])){u=t=g[0][0].length;v=p.allocType(36193===e.type?5126:e.type,q*n*u);for(w=r=0;w<n;++w)for(y=g[w],C=0;C<q;++C)for(B=y[C],z=0;z<u;++z)v[r++]=B[z];h(e,v)}else{u=p.allocType(36193===e.type?5126:e.type,q*n);for(r=v=0;r<n;++r)for(w=g[r],y=0;y<q;++y)u[v++]=w[y];h(e,u)}e.alignment=1;e.width=q;e.height=n;e.channels=t;e.format=e.internalformat=F[t];e.needsFree=!0}}
function K(a,c,b,h,e){var f=a.element,m=a.data,d=a.internalformat,k=a.format,l=a.type,p=a.width,x=a.height;E(a);f?g.texSubImage2D(c,e,b,h,k,l,f):a.compressed?g.compressedTexSubImage2D(c,e,b,h,d,p,x,m):a.needsCopy?(r(),g.copyTexSubImage2D(c,e,b,h,a.xOffset,a.yOffset,p,x)):g.texSubImage2D(c,e,b,h,p,x,k,l,m)}function M(){return oa.pop()||new I}function O(a){a.needsFree&&p.freeType(a.data);I.call(a);oa.push(a)}function J(){y.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function L(a,c,b){var h=a.images[0]=M();a.mipmask=1;h.width=a.width=c;h.height=a.height=b}function G(a,b){var h=null;if(c(b))h=a.images[0]=M(),H(h,b),a.mipmask=1;else if(D(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,f=0;f<e.length;++f)h=a.images[f]=M(),B(h,a),h.width>>=f,h.height>>=f,H(h,e[f]),a.mipmask|=1<<f;else h=a.images[0]=M(),B(h,a),H(h,b),a.mipmask=1;B(a,a.images[0])}function N(a,c){for(var b=a.images,h=0;h<b.length&&b[h];++h){var e=b[h],f=c,m=h,d=e.element,k=e.data,l=e.internalformat,
p=e.format,x=e.type,q=e.width,F=e.height;E(e);d?g.texImage2D(f,m,p,p,x,d):e.compressed?g.compressedTexImage2D(f,m,l,q,F,0,k):e.needsCopy?(r(),g.copyTexImage2D(f,m,p,e.xOffset,e.yOffset,q,F,0)):g.texImage2D(f,m,p,q,F,0,p,x,k)}}function U(){var a=va.pop()||new J;y.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function S(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&O(c[b]),c[b]=null;va.push(a)}function ea(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=
1;this.genMipmaps=!1;this.mipmapHint=4352}function fa(a,c){"min"in c&&(a.minFilter=ka[c.min],0<=q.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in c&&(a.magFilter=ma[c.mag]);var b=a.wrapS,h=a.wrapT;if("wrap"in c){var e=c.wrap;"string"===typeof e?b=h=ha[e]:Array.isArray(e)&&(b=ha[e[0]],h=ha[e[1]])}else"wrapS"in c&&(b=ha[c.wrapS]),"wrapT"in c&&(h=ha[c.wrapT]);a.wrapS=b;a.wrapT=h;"anisotropic"in c&&(a.anisotropic=c.anisotropic);if("mipmap"in c){b=!1;switch(typeof c.mipmap){case "string":a.mipmapHint=
ja[c.mipmap];b=a.genMipmaps=!0;break;case "boolean":b=a.genMipmaps=c.mipmap;break;case "object":a.genMipmaps=!1,b=!0}!b||"min"in c||(a.minFilter=9984)}}function la(a,c){g.texParameteri(c,10241,a.minFilter);g.texParameteri(c,10240,a.magFilter);g.texParameteri(c,10242,a.wrapS);g.texParameteri(c,10243,a.wrapT);n.ext_texture_filter_anisotropic&&g.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(g.hint(33170,a.mipmapHint),g.generateMipmap(c))}function aa(){var a=qa.pop()||new ea;ea.call(a);return a}
function ga(a){y.call(this);this.mipmask=0;this.id=ia++;this.refCount=1;this.target=a;this.texture=g.createTexture();this.unit=-1;this.bindCount=0}function T(a){g.activeTexture(33984);g.bindTexture(a.target,a.texture)}function P(){var a=Z[0];a?g.bindTexture(a.target,a.texture):g.bindTexture(3553,null)}function Q(a){var c=a.texture,b=a.unit,h=a.target;0<=b&&(g.activeTexture(33984+b),g.bindTexture(h,null),Z[b]=null);g.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete V[a.id]}
var ja={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ha={repeat:10497,clamp:33071,mirror:33648},ma={nearest:9728,linear:9729},ka=e({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ma),na={none:0,browser:37444},W={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Y={};n.ext_srgb&&(X.srgb=35904,
X.srgba=35906);n.oes_texture_float&&(W["float"]=5126);n.oes_texture_half_float&&(W.float16=W["half float"]=36193);n.webgl_depth_texture&&(e(X,{depth:6402,"depth stencil":34041}),e(W,{uint16:5123,uint32:5125,"depth stencil":34042}));n.webgl_compressed_texture_s3tc&&e(Y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});n.webgl_compressed_texture_atc&&e(Y,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});n.webgl_compressed_texture_pvrtc&&
e(Y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});n.webgl_compressed_texture_etc1&&(Y["rgb etc1"]=36196);var ta=Array.prototype.slice.call(g.getParameter(34467));Object.keys(Y).forEach(function(a){var c=Y[a];0<=ta.indexOf(c)&&(X[a]=c)});var ua=Object.keys(X);t.textureFormats=ua;var wa=ua.reduce(function(a,c){var b=X[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b?a[b]=b:32855===b||0<=c.indexOf("rgba")?a[b]=6408:a[b]=6407;return a},
{}),oa=[],va=[],qa=[],ia=0,V={},ba=t.maxTextureUnits,Z=Array(ba).map(function(){return null});e(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<ba;++c){var b=Z[c];if(b){if(0<b.bindCount)continue;b.unit=-1}Z[c]=this;a=c;break}this.unit=a;g.activeTexture(33984+a);g.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&Q(this)}});return{create2D:function(a,c){function b(a,c){var e=aa(),f=U();"number"===
typeof a?"number"===typeof c?L(f,a|0,c|0):L(f,a|0,a|0):a?(fa(e,a),G(f,a)):L(f,1,1);e.genMipmaps&&(f.mipmask=(f.width<<1)-1);h.mipmask=f.mipmask;B(h,f);b.width=f.width;b.height=f.height;T(h);N(f,3553);la(e,3553);P();qa.push(e);S(f);return b}var h=new ga(3553);V[h.id]=h;b(a,c);b.subimage=function(a,c,e,f){c|=0;e|=0;f|=0;var m=M();B(m,h);m.width>>=f;m.height>>=f;m.width-=c;m.height-=e;H(m,a);T(h);K(m,3553,c,e,f);P();O(m);return b};b._reglType="texture2d";b._texture=h;b.destroy=function(){h.decRef()};
return b},createCube:function(a,c,b,h,e,f){function m(a,c,b,h,e,f){var l,p=aa();for(l=0;6>l;++l)k[l]=U();if("number"===typeof a||!a)for(a=a|0||1,l=0;6>l;++l)L(k[l],a,a);else if("object"===typeof a)if(c)G(k[0],a),G(k[1],c),G(k[2],b),G(k[3],h),G(k[4],e),G(k[5],f);else if(fa(p,a),D(d,a),"faces"in a)for(a=a.faces,l=0;6>l;++l)B(k[l],d),G(k[l],a[l]);else for(l=0;6>l;++l)G(k[l],a);B(d,k[0]);d.mipmask=p.genMipmaps?(k[0].width<<1)-1:k[0].mipmask;m.width=k[0].width;m.height=k[0].height;T(d);for(l=0;6>l;++l)N(k[l],
34069+l);la(p,34067);P();qa.push(p);for(l=0;6>l;++l)S(k[l]);return m}var d=new ga(34067);V[d.id]=d;var k=Array(6);m(a,c,b,h,e,f);m.subimage=function(a,c,b,h,e){b|=0;h|=0;e|=0;var f=M();B(f,d);f.width>>=e;f.height>>=e;f.width-=b;f.height-=h;H(f,c);T(d);K(f,34069+a,b,h,e);P();O(f);return m};m._reglType="textureCube";m._texture=d;m.destroy=function(){d.decRef()};return m},clear:function(){for(var a=0;a<ba;++a)g.activeTexture(33984+a),g.bindTexture(3553,null),Z[a]=null;f(V).forEach(Q)},getTexture:function(a){return null}}}},
{"./constants/arraytypes.json":4,"./util/extend":21,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/to-half-float":27,"./util/values":28}],19:[function(g,n,r){n.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],20:[function(g,n,r){function d(a){return Array.prototype.slice.call(a)}function b(a){return d(a).join("")}var a=g("./extend");n.exports=function(){function c(){var c=[],h=[];return a(function(){c.push.apply(c,
d(arguments))},{def:function(){var a="v"+e++;h.push(a);0<arguments.length&&(c.push(a,"="),c.push.apply(c,d(arguments)),c.push(";"));return a},toString:function(){return b([0<h.length?"var "+h+";":"",b(c)])}})}function h(){function b(a,c){e(a,c,"=",h.def(a,c),";")}var h=c(),e=c(),f=h.toString,m=e.toString;return a(h,{entry:h,exit:e,save:b,set:function(a,c,e){b(a,c);h(a,c,"=",e,";")},toString:function(){return f()+m()}})}var e=0,f=[],m=[],k=c(),p={};return{global:k,link:function(a){for(var c=0;c<m.length;++c)if(m[c]===
a)return f[c];c="g"+e++;f.push(c);m.push(a);return c},block:c,proc:function(c,e){function f(){var a="a"+m.length;m.push(a);return a}var m=[];e=e||0;for(var d=0;d<e;++d)f();var d=h(),k=d.toString;return p[c]=a(d,{arg:f,toString:function(){return b(["function(",m.join(),"){",k(),"}"])}})},scope:h,cond:function(){var c=b(arguments),e=h(),f=h(),m=e.toString,k=f.toString;return a(e,{then:function(){e.apply(e,d(arguments));return this},"else":function(){f.apply(f,d(arguments));return this},toString:function(){var a=
k();a&&(a="else{"+a+"}");return b(["if(",c,"){",m(),"}",a])}})},compile:function(){var a=['"use strict";',k,"return {"];Object.keys(p).forEach(function(c){a.push('"',c,'":',p[c].toString(),",")});a.push("}");var c=b(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,f.concat(c)).apply(null,m)}}}},{"./extend":21}],21:[function(g,n,r){n.exports=function(d,b){for(var a=Object.keys(b),c=0;c<a.length;++c)d[a[c]]=b[a[c]];return d}},{}],22:[function(g,n,r){var d=g("./is-typed-array");
n.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||d(b.data))}},{"./is-typed-array":23}],23:[function(g,n,r){var d=g("../constants/arraytypes.json");n.exports=function(b){return Object.prototype.toString.call(b)in d}},{"../constants/arraytypes.json":4}],24:[function(g,n,r){n.exports=function(d,b){for(var a=Array(d),c=0;c<d;++c)a[c]=b(c);return a}},{}],25:[function(g,
n,r){function d(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function b(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=c[d(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}function a(a){c[d(a.byteLength)>>2].push(a)}var c=g("./loop")(8,function(){return[]});n.exports={alloc:b,free:a,allocType:function(a,c){var f=null;switch(a){case 5120:f=new Int8Array(b(c),0,c);break;case 5121:f=new Uint8Array(b(c),0,c);break;
case 5122:f=new Int16Array(b(2*c),0,c);break;case 5123:f=new Uint16Array(b(2*c),0,c);break;case 5124:f=new Int32Array(b(4*c),0,c);break;case 5125:f=new Uint32Array(b(4*c),0,c);break;case 5126:f=new Float32Array(b(4*c),0,c);break;default:return null}return f.length!==c?f.subarray(0,c):f},freeType:function(c){a(c.buffer)}}},{"./loop":24}],26:[function(g,n,r){n.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(d){return requestAnimationFrame(d)},
cancel:function(d){return cancelAnimationFrame(d)}}:{next:function(d){setTimeout(d,30)},cancel:clearTimeout}},{}],27:[function(g,n,r){var d=g("./pool"),b=new Float32Array(1),a=new Uint32Array(b.buffer);n.exports=function(c){for(var h=d.allocType(5123,c.length),e=0;e<c.length;++e)if(isNaN(c[e]))h[e]=65535;else if(Infinity===c[e])h[e]=31744;else if(-Infinity===c[e])h[e]=64512;else{b[0]=c[e];var f=a[0],m=f>>>31<<15,k=(f<<1>>>24)-127,f=f>>13&1023;h[e]=-24>k?m:-14>k?m+(f+1024>>-14-k):15<k?m+31744:m+(k+
15<<10)+f}return h}},{"./pool":25}],28:[function(g,n,r){n.exports=function(d){return Object.keys(d).map(function(b){return d[b]})}},{}],29:[function(g,n,r){function d(c,h){function e(){var b=window.innerWidth,h=window.innerHeight;c!==document.body&&(h=c.getBoundingClientRect(),b=h.right-h.left,h=h.top-h.bottom);f.width=d*b;f.height=d*h;a(f.style,{width:b+"px",height:h+"px"})}var f=document.createElement("canvas"),m=b(f,h);a(f.style,{border:0,margin:0,padding:0,top:0,left:0});c.appendChild(f);c===
document.body&&(f.style.position="absolute",a(c.style,{margin:0,padding:0}));var d=+m.options.pixelRatio;window.addEventListener("resize",e,!1);var p=m.options.onDestroy;m.options=a(a({},m.options),{onDestroy:function(){window.removeEventListener("resize",e);c.removeChild(f);p&&p()}});e();return m}function b(c,b){function e(a){try{return c.getContext(a,f)}catch(b){return null}}var f=b.glOptions||{};return{gl:e("webgl")||e("experimental-webgl")||e("webgl-experimental"),options:a({pixelRatio:window.devicePixelRatio},
b)}}var a=g("./util/extend");n.exports=function(c){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:c[0],options:c[1]||{}};var h=document.body,e=c[1]||{};if("string"===typeof c[0])h=document.querySelector(c[0])||document.body;else if("object"===typeof c[0])if(c[0]instanceof HTMLElement)h=c[0];else{if(c[0]instanceof WebGLRenderingContext)return{gl:c[0],options:a({pixelRatio:1},e)};e=c[0]}return h.nodeName&&"CANVAS"===h.nodeName.toUpperCase()?b(h,e):d(h,e)}},{"./util/extend":21}],
30:[function(g,n,r){var d=g("element-size");n.exports=function(a,c,h){function e(){var c=e.parent||a.parentNode;if("function"===typeof c)var h=c(b)||b,c=h[0],h=h[1];else c&&c!==document.body?(h=d(c),c=h[0]|0,h=h[1]|0):(c=window.innerWidth,h=window.innerHeight);f?(a.setAttribute("width",c*e.scale+"px"),a.setAttribute("height",h*e.scale+"px")):(a.width=c*e.scale,a.height=h*e.scale);a.style.width=c+"px";a.style.height=h+"px";return e}var f="SVG"===a.nodeName.toUpperCase();a.style.position=a.style.position||
"absolute";a.style.top=0;a.style.left=0;e.scale=parseFloat(h||1);e.parent=c;return e()};var b=new Float32Array(2)},{"element-size":32}],31:[function(g,n,r){var d=g("orbit-camera"),b=g("scroll-speed"),a=g("mouse-position"),c=g("mouse-pressed"),h=g("key-pressed");n.exports=function(e,f){f=f||{};f.pan=!1!==f.pan;f.scale=!1!==f.scale;f.rotate=!1!==f.rotate;var m=b(e,f.scale),k=c(e,f.rotate),p=a(e),l=d([0,10,30],[0,0,0],[0,1,0]);l.tick=function(){var a=h("<control>")||h("<alt>"),c=h("<shift>"),b=e.height,
d=e.width;f.rotate&&k.left&&!a&&!c&&l.rotate([p.x/d-.5,p.y/b-.5],[p.prevX/d-.5,p.prevY/b-.5]);(f.pan&&k.right||k.left&&a&&!c)&&l.pan([1*(p.x-p.prevX)/d,1*(p.y-p.prevY)/b]);f.scale&&m[1]&&(l.distance*=Math.exp(m[1]/b));if(f.scale&&(k.middle||k.left&&!a&&c)){a=p.y-p.prevY;if(!a)return;l.distance*=Math.exp(a/b)}m.flush();p.flush()};return l}},{"key-pressed":68,"mouse-position":69,"mouse-pressed":70,"orbit-camera":71,"scroll-speed":73}],32:[function(g,n,r){function d(b){return parseFloat(b)||0}n.exports=
function(b){if(b===window||b===document.body)return[window.innerWidth,window.innerHeight];if(!b.parentNode){var a=!0;document.body.appendChild(b)}var c=b.getBoundingClientRect(),h=getComputedStyle(b),e=(c.height|0)+d(h.getPropertyValue("margin-top"))+d(h.getPropertyValue("margin-bottom")),c=(c.width|0)+d(h.getPropertyValue("margin-left"))+d(h.getPropertyValue("margin-right"));a&&document.body.removeChild(b);return[c,e]}},{}],33:[function(g,n,r){function d(){this._events=this._events||{};this._maxListeners=
this._maxListeners||void 0}function b(a){return"function"===typeof a}function a(a){return"object"===typeof a&&null!==a}n.exports=d;d.EventEmitter=d;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};d.prototype.emit=function(c){var h,e,f,m;this._events||(this._events={});if("error"===c&&(!this._events.error||
a(this._events.error)&&!this._events.error.length)){h=arguments[1];if(h instanceof Error)throw h;throw TypeError('Uncaught, unspecified "error" event.');}e=this._events[c];if(void 0===e)return!1;if(b(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),e.apply(this,h)}else if(a(e))for(h=Array.prototype.slice.call(arguments,1),m=e.slice(),e=m.length,f=0;f<e;f++)m[f].apply(this,
h);return!0};d.prototype.addListener=function(c,h){var e;if(!b(h))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",c,b(h.listener)?h.listener:h);this._events[c]?a(this._events[c])?this._events[c].push(h):this._events[c]=[this._events[c],h]:this._events[c]=h;a(this._events[c])&&!this._events[c].warned&&(e=void 0!==this._maxListeners?this._maxListeners:d.defaultMaxListeners)&&0<e&&this._events[c].length>e&&(this._events[c].warned=
!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"===typeof console.trace&&console.trace());return this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(a,h){function e(){this.removeListener(a,e);f||(f=!0,h.apply(this,arguments))}if(!b(h))throw TypeError("listener must be a function");var f=!1;e.listener=h;this.on(a,e);return this};d.prototype.removeListener=
function(c,h){var e,f,m;if(!b(h))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;e=this._events[c];m=e.length;f=-1;if(e===h||b(e.listener)&&e.listener===h)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,h);else if(a(e)){for(;0<m--;)if(e[m]===h||e[m].listener&&e[m].listener===h){f=m;break}if(0>f)return this;1===e.length?(e.length=0,delete this._events[c]):e.splice(f,1);this._events.removeListener&&this.emit("removeListener",
c,h)}return this};d.prototype.removeAllListeners=function(a){var h;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(h in this._events)"removeListener"!==h&&this.removeAllListeners(h);this.removeAllListeners("removeListener");this._events={};return this}h=this._events[a];if(b(h))this.removeListener(a,h);else if(h)for(;h.length;)this.removeListener(a,h[h.length-1]);delete this._events[a];
return this};d.prototype.listeners=function(a){return this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]};d.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(b(a))return 1;if(a)return a.length}return 0};d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],34:[function(g,n,r){n.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],f=b[4],m=b[5],k=b[6],p=b[7],l=b[8],g=b[9],q=b[10],n=b[11],u=b[12],t=b[13],w=b[14],r=b[15];d[0]=
m*(q*r-n*w)-g*(k*r-p*w)+t*(k*n-p*q);d[1]=-(c*(q*r-n*w)-g*(h*r-e*w)+t*(h*n-e*q));d[2]=c*(k*r-p*w)-m*(h*r-e*w)+t*(h*p-e*k);d[3]=-(c*(k*n-p*q)-m*(h*n-e*q)+g*(h*p-e*k));d[4]=-(f*(q*r-n*w)-l*(k*r-p*w)+u*(k*n-p*q));d[5]=a*(q*r-n*w)-l*(h*r-e*w)+u*(h*n-e*q);d[6]=-(a*(k*r-p*w)-f*(h*r-e*w)+u*(h*p-e*k));d[7]=a*(k*n-p*q)-f*(h*n-e*q)+l*(h*p-e*k);d[8]=f*(g*r-n*t)-l*(m*r-p*t)+u*(m*n-p*g);d[9]=-(a*(g*r-n*t)-l*(c*r-e*t)+u*(c*n-e*g));d[10]=a*(m*r-p*t)-f*(c*r-e*t)+u*(c*p-e*m);d[11]=-(a*(m*n-p*g)-f*(c*n-e*g)+l*(c*p-
e*m));d[12]=-(f*(g*w-q*t)-l*(m*w-k*t)+u*(m*q-k*g));d[13]=a*(g*w-q*t)-l*(c*w-h*t)+u*(c*q-h*g);d[14]=-(a*(m*w-k*t)-f*(c*w-h*t)+u*(c*k-h*m));d[15]=a*(m*q-k*g)-f*(c*q-h*g)+l*(c*k-h*m);return d}},{}],35:[function(g,n,r){n.exports=function(d){var b=new Float32Array(16);b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b}},{}],36:[function(g,n,r){n.exports=function(d,b){d[0]=b[0];
d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],37:[function(g,n,r){n.exports=function(){var d=new Float32Array(16);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],38:[function(g,n,r){n.exports=function(d){var b=d[0],a=d[1],c=d[2],h=d[3],e=d[4],f=d[5],m=d[6],k=d[7],p=d[8],l=d[9],g=d[10],
q=d[11],n=d[12],u=d[13],t=d[14];d=d[15];return(b*f-a*e)*(g*d-q*t)-(b*m-c*e)*(l*d-q*u)+(b*k-h*e)*(l*t-g*u)+(a*m-c*f)*(p*d-q*n)-(a*k-h*f)*(p*t-g*n)+(c*k-h*m)*(p*u-l*n)}},{}],39:[function(g,n,r){n.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],f=a+a,m=c+c,k=h+h,a=a*f,p=c*f,c=c*m,l=h*f,g=h*m,h=h*k,f=e*f,m=e*m,e=e*k;d[0]=1-c-h;d[1]=p+e;d[2]=l-m;d[3]=0;d[4]=p-e;d[5]=1-a-h;d[6]=g+f;d[7]=0;d[8]=l+m;d[9]=g-f;d[10]=1-a-c;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],40:[function(g,n,r){n.exports=
function(d,b,a){var c=b[0],h=b[1],e=b[2],f=b[3],m=c+c,k=h+h,p=e+e;b=c*m;var l=c*k,c=c*p,g=h*k,h=h*p,e=e*p,m=f*m,k=f*k,f=f*p;d[0]=1-(g+e);d[1]=l+f;d[2]=c-k;d[3]=0;d[4]=l-f;d[5]=1-(b+e);d[6]=h+m;d[7]=0;d[8]=c+k;d[9]=h-m;d[10]=1-(b+g);d[11]=0;d[12]=a[0];d[13]=a[1];d[14]=a[2];d[15]=1;return d}},{}],41:[function(g,n,r){n.exports=function(d,b,a,c,h,e,f){var m=1/(a-b),k=1/(h-c),p=1/(e-f);d[0]=2*e*m;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=2*e*k;d[6]=0;d[7]=0;d[8]=(a+b)*m;d[9]=(h+c)*k;d[10]=(f+e)*p;d[11]=-1;d[12]=
0;d[13]=0;d[14]=f*e*2*p;d[15]=0;return d}},{}],42:[function(g,n,r){n.exports=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}},{}],43:[function(g,n,r){n.exports={create:g("./create"),clone:g("./clone"),copy:g("./copy"),identity:g("./identity"),transpose:g("./transpose"),invert:g("./invert"),adjoint:g("./adjoint"),determinant:g("./determinant"),multiply:g("./multiply"),translate:g("./translate"),scale:g("./scale"),
rotate:g("./rotate"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),fromRotationTranslation:g("./fromRotationTranslation"),fromQuat:g("./fromQuat"),frustum:g("./frustum"),perspective:g("./perspective"),perspectiveFromFieldOfView:g("./perspectiveFromFieldOfView"),ortho:g("./ortho"),lookAt:g("./lookAt"),str:g("./str")}},{"./adjoint":34,"./clone":35,"./copy":36,"./create":37,"./determinant":38,"./fromQuat":39,"./fromRotationTranslation":40,"./frustum":41,"./identity":42,"./invert":44,
"./lookAt":45,"./multiply":46,"./ortho":47,"./perspective":48,"./perspectiveFromFieldOfView":49,"./rotate":50,"./rotateX":51,"./rotateY":52,"./rotateZ":53,"./scale":54,"./str":55,"./translate":56,"./transpose":57}],44:[function(g,n,r){n.exports=function(d,b){var a=b[0],c=b[1],h=b[2],e=b[3],f=b[4],m=b[5],k=b[6],p=b[7],l=b[8],g=b[9],q=b[10],n=b[11],u=b[12],t=b[13],w=b[14],r=b[15],v=a*m-c*f,z=a*k-h*f,A=a*p-e*f,y=c*k-h*m,B=c*p-e*m,D=h*p-e*k,E=l*t-g*u,I=l*w-q*u,H=l*r-n*u,K=g*w-q*t,M=g*r-n*t,O=q*r-n*w,
J=v*O-z*M+A*K+y*H-B*I+D*E;if(!J)return null;J=1/J;d[0]=(m*O-k*M+p*K)*J;d[1]=(h*M-c*O-e*K)*J;d[2]=(t*D-w*B+r*y)*J;d[3]=(q*B-g*D-n*y)*J;d[4]=(k*H-f*O-p*I)*J;d[5]=(a*O-h*H+e*I)*J;d[6]=(w*A-u*D-r*z)*J;d[7]=(l*D-q*A+n*z)*J;d[8]=(f*M-m*H+p*E)*J;d[9]=(c*H-a*M-e*E)*J;d[10]=(u*B-t*A+r*v)*J;d[11]=(g*A-l*B-n*v)*J;d[12]=(m*I-f*K-k*E)*J;d[13]=(a*K-c*I+h*E)*J;d[14]=(t*z-u*y-w*v)*J;d[15]=(l*y-g*z+q*v)*J;return d}},{}],45:[function(g,n,r){var d=g("./identity");n.exports=function(b,a,c,h){var e,f,m,k,p,l,g,q,n=a[0],
u=a[1];a=a[2];m=h[0];k=h[1];f=h[2];g=c[0];h=c[1];e=c[2];if(1E-6>Math.abs(n-g)&&1E-6>Math.abs(u-h)&&1E-6>Math.abs(a-e))return d(b);c=n-g;h=u-h;g=a-e;q=1/Math.sqrt(c*c+h*h+g*g);c*=q;h*=q;g*=q;e=k*g-f*h;f=f*c-m*g;m=m*h-k*c;(q=Math.sqrt(e*e+f*f+m*m))?(q=1/q,e*=q,f*=q,m*=q):m=f=e=0;k=h*m-g*f;p=g*e-c*m;l=c*f-h*e;(q=Math.sqrt(k*k+p*p+l*l))?(q=1/q,k*=q,p*=q,l*=q):l=p=k=0;b[0]=e;b[1]=k;b[2]=c;b[3]=0;b[4]=f;b[5]=p;b[6]=h;b[7]=0;b[8]=m;b[9]=l;b[10]=g;b[11]=0;b[12]=-(e*n+f*u+m*a);b[13]=-(k*n+p*u+l*a);b[14]=-(c*
n+h*u+g*a);b[15]=1;return b}},{"./identity":42}],46:[function(g,n,r){n.exports=function(d,b,a){var c=b[0],h=b[1],e=b[2],f=b[3],m=b[4],k=b[5],p=b[6],l=b[7],g=b[8],q=b[9],n=b[10],u=b[11],t=b[12],w=b[13],r=b[14];b=b[15];var v=a[0],z=a[1],A=a[2],y=a[3];d[0]=v*c+z*m+A*g+y*t;d[1]=v*h+z*k+A*q+y*w;d[2]=v*e+z*p+A*n+y*r;d[3]=v*f+z*l+A*u+y*b;v=a[4];z=a[5];A=a[6];y=a[7];d[4]=v*c+z*m+A*g+y*t;d[5]=v*h+z*k+A*q+y*w;d[6]=v*e+z*p+A*n+y*r;d[7]=v*f+z*l+A*u+y*b;v=a[8];z=a[9];A=a[10];y=a[11];d[8]=v*c+z*m+A*g+y*t;d[9]=
v*h+z*k+A*q+y*w;d[10]=v*e+z*p+A*n+y*r;d[11]=v*f+z*l+A*u+y*b;v=a[12];z=a[13];A=a[14];y=a[15];d[12]=v*c+z*m+A*g+y*t;d[13]=v*h+z*k+A*q+y*w;d[14]=v*e+z*p+A*n+y*r;d[15]=v*f+z*l+A*u+y*b;return d}},{}],47:[function(g,n,r){n.exports=function(d,b,a,c,h,e,f){var m=1/(b-a),k=1/(c-h),p=1/(e-f);d[0]=-2*m;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=-2*k;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=2*p;d[11]=0;d[12]=(b+a)*m;d[13]=(h+c)*k;d[14]=(f+e)*p;d[15]=1;return d}},{}],48:[function(g,n,r){n.exports=function(d,b,a,c,h){b=1/Math.tan(b/
2);var e=1/(c-h);d[0]=b/a;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=b;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=(h+c)*e;d[11]=-1;d[12]=0;d[13]=0;d[14]=2*h*c*e;d[15]=0;return d}},{}],49:[function(g,n,r){n.exports=function(d,b,a,c){var h=Math.tan(b.upDegrees*Math.PI/180),e=Math.tan(b.downDegrees*Math.PI/180),f=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var m=2/(f+b),k=2/(h+e);d[0]=m;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=k;d[6]=0;d[7]=0;d[8]=-((f-b)*m*.5);d[9]=(h-e)*k*.5;d[10]=c/(a-c);d[11]=
-1;d[12]=0;d[13]=0;d[14]=c*a/(a-c);d[15]=0;return d}},{}],50:[function(g,n,r){n.exports=function(d,b,a,c){var h=c[0],e=c[1];c=c[2];var f=Math.sqrt(h*h+e*e+c*c),m,k,p,l,g,q,n,u,t,w,r,v,z,A,y,B,D,E,I,H;if(1E-6>Math.abs(f))return null;f=1/f;h*=f;e*=f;c*=f;m=Math.sin(a);k=Math.cos(a);p=1-k;a=b[0];f=b[1];l=b[2];g=b[3];q=b[4];n=b[5];u=b[6];t=b[7];w=b[8];r=b[9];v=b[10];z=b[11];A=h*h*p+k;y=e*h*p+c*m;B=c*h*p-e*m;D=h*e*p-c*m;E=e*e*p+k;I=c*e*p+h*m;H=h*c*p+e*m;h=e*c*p-h*m;e=c*c*p+k;d[0]=a*A+q*y+w*B;d[1]=f*A+
n*y+r*B;d[2]=l*A+u*y+v*B;d[3]=g*A+t*y+z*B;d[4]=a*D+q*E+w*I;d[5]=f*D+n*E+r*I;d[6]=l*D+u*E+v*I;d[7]=g*D+t*E+z*I;d[8]=a*H+q*h+w*e;d[9]=f*H+n*h+r*e;d[10]=l*H+u*h+v*e;d[11]=g*H+t*h+z*e;b!==d&&(d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);return d}},{}],51:[function(g,n,r){n.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[4],e=b[5],f=b[6],m=b[7],k=b[8],p=b[9],l=b[10],g=b[11];b!==d&&(d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=b[3],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[4]=h*a+k*c;
d[5]=e*a+p*c;d[6]=f*a+l*c;d[7]=m*a+g*c;d[8]=k*a-h*c;d[9]=p*a-e*c;d[10]=l*a-f*c;d[11]=g*a-m*c;return d}},{}],52:[function(g,n,r){n.exports=function(d,b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[0],e=b[1],f=b[2],m=b[3],k=b[8],p=b[9],l=b[10],g=b[11];b!==d&&(d[4]=b[4],d[5]=b[5],d[6]=b[6],d[7]=b[7],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=h*a-k*c;d[1]=e*a-p*c;d[2]=f*a-l*c;d[3]=m*a-g*c;d[8]=h*c+k*a;d[9]=e*c+p*a;d[10]=f*c+l*a;d[11]=m*c+g*a;return d}},{}],53:[function(g,n,r){n.exports=function(d,
b,a){var c=Math.sin(a);a=Math.cos(a);var h=b[0],e=b[1],f=b[2],m=b[3],k=b[4],p=b[5],l=b[6],g=b[7];b!==d&&(d[8]=b[8],d[9]=b[9],d[10]=b[10],d[11]=b[11],d[12]=b[12],d[13]=b[13],d[14]=b[14],d[15]=b[15]);d[0]=h*a+k*c;d[1]=e*a+p*c;d[2]=f*a+l*c;d[3]=m*a+g*c;d[4]=k*a-h*c;d[5]=p*a-e*c;d[6]=l*a-f*c;d[7]=g*a-m*c;return d}},{}],54:[function(g,n,r){n.exports=function(d,b,a){var c=a[0],h=a[1];a=a[2];d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;d[3]=b[3]*c;d[4]=b[4]*h;d[5]=b[5]*h;d[6]=b[6]*h;d[7]=b[7]*h;d[8]=b[8]*a;d[9]=
b[9]*a;d[10]=b[10]*a;d[11]=b[11]*a;d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d}},{}],55:[function(g,n,r){n.exports=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}},{}],56:[function(g,n,r){n.exports=function(d,b,a){var c=a[0],h=a[1];a=a[2];var e,f,m,k,p,l,g,q,n,u,t,r;b===d?(d[12]=b[0]*c+b[4]*h+b[8]*a+b[12],d[13]=b[1]*c+b[5]*h+b[9]*a+b[13],d[14]=
b[2]*c+b[6]*h+b[10]*a+b[14],d[15]=b[3]*c+b[7]*h+b[11]*a+b[15]):(e=b[0],f=b[1],m=b[2],k=b[3],p=b[4],l=b[5],g=b[6],q=b[7],n=b[8],u=b[9],t=b[10],r=b[11],d[0]=e,d[1]=f,d[2]=m,d[3]=k,d[4]=p,d[5]=l,d[6]=g,d[7]=q,d[8]=n,d[9]=u,d[10]=t,d[11]=r,d[12]=e*c+p*h+n*a+b[12],d[13]=f*c+l*h+u*a+b[13],d[14]=m*c+g*h+t*a+b[14],d[15]=k*c+q*h+r*a+b[15]);return d}},{}],57:[function(g,n,r){n.exports=function(d,b){if(d===b){var a=b[1],c=b[2],h=b[3],e=b[6],f=b[7],m=b[11];d[1]=b[4];d[2]=b[8];d[3]=b[12];d[4]=a;d[6]=b[9];d[7]=
b[13];d[8]=c;d[9]=e;d[11]=b[14];d[12]=h;d[13]=f;d[14]=m}else d[0]=b[0],d[1]=b[4],d[2]=b[8],d[3]=b[12],d[4]=b[1],d[5]=b[5],d[6]=b[9],d[7]=b[13],d[8]=b[2],d[9]=b[6],d[10]=b[10],d[11]=b[14],d[12]=b[3],d[13]=b[7],d[14]=b[11],d[15]=b[15];return d}},{}],58:[function(g,n,r){r.glMatrix=g("./gl-matrix/common.js");r.mat2=g("./gl-matrix/mat2.js");r.mat2d=g("./gl-matrix/mat2d.js");r.mat3=g("./gl-matrix/mat3.js");r.mat4=g("./gl-matrix/mat4.js");r.quat=g("./gl-matrix/quat.js");r.vec2=g("./gl-matrix/vec2.js");r.vec3=
g("./gl-matrix/vec3.js");r.vec4=g("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":59,"./gl-matrix/mat2.js":60,"./gl-matrix/mat2d.js":61,"./gl-matrix/mat3.js":62,"./gl-matrix/mat4.js":63,"./gl-matrix/quat.js":64,"./gl-matrix/vec2.js":65,"./gl-matrix/vec3.js":66,"./gl-matrix/vec4.js":67}],59:[function(g,n,r){var d={EPSILON:1E-6};d.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;d.ENABLE_SIMD=!1;d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this;d.USE_SIMD=
d.ENABLE_SIMD&&d.SIMD_AVAILABLE;d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var b=Math.PI/180;d.toRadian=function(a){return a*b};d.equals=function(a,c){return Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};n.exports=d},{}],60:[function(g,n,r){var d=g("./common.js");g={create:function(){var b=new d.ARRAY_TYPE(4);b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},clone:function(b){var a=new d.ARRAY_TYPE(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},fromValues:function(b,a,c,h){var e=new d.ARRAY_TYPE(4);e[0]=b;e[1]=a;e[2]=c;e[3]=h;return e},set:function(b,a,c,h,e){b[0]=a;b[1]=c;b[2]=h;b[3]=e;return b},transpose:function(b,a){if(b===a){var c=a[1];b[1]=a[2];b[2]=c}else b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3];return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],f=a[3],m=c*f-e*h;if(!m)return null;m=1/m;b[0]=f*m;b[1]=-h*m;b[2]=-e*m;b[3]=c*m;return b},adjoint:function(b,
a){var c=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=c;return b},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},multiply:function(b,a,c){var h=a[0],e=a[1],f=a[2];a=a[3];var m=c[0],d=c[1],p=c[2];c=c[3];b[0]=h*m+f*d;b[1]=e*m+a*d;b[2]=h*p+f*c;b[3]=e*p+a*c;return b}};g.mul=g.multiply;g.rotate=function(b,a,c){var h=a[0],e=a[1],f=a[2];a=a[3];var m=Math.sin(c);c=Math.cos(c);b[0]=h*c+f*m;b[1]=e*c+a*m;b[2]=h*-m+f*c;b[3]=e*-m+a*c;return b};g.scale=function(b,a,c){var h=a[1],e=a[2],f=a[3],m=c[0];c=c[1];b[0]=
a[0]*m;b[1]=h*m;b[2]=e*c;b[3]=f*c;return b};g.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=-c;b[3]=h;return b};g.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};g.str=function(b){return"mat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2))};g.LDU=function(b,a,c,h){b[2]=h[2]/h[0];c[0]=h[0];c[1]=h[1];c[3]=h[3]-b[2]*c[1];return[b,a,c]};g.add=function(b,
a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];return b};g.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b};g.sub=g.subtract;g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};g.equals=function(b,a){var c=b[0],h=b[1],e=b[2],f=b[3],m=a[0],k=a[1],p=a[2],l=a[3];return Math.abs(c-m)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-k)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(e-
p)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))};g.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};g.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;return b};n.exports=g},{"./common.js":59}],61:[function(g,n,r){var d=g("./common.js");g={create:function(){var b=new d.ARRAY_TYPE(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var a=
new d.ARRAY_TYPE(6);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},fromValues:function(b,a,c,h,e,f){var m=new d.ARRAY_TYPE(6);m[0]=b;m[1]=a;m[2]=c;m[3]=h;m[4]=e;m[5]=f;return m},set:function(b,a,c,h,e,f,m){b[0]=a;b[1]=c;b[2]=h;b[3]=e;b[4]=f;b[5]=m;return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],f=a[3],m=a[4],
d=a[5],p=c*f-h*e;if(!p)return null;p=1/p;b[0]=f*p;b[1]=-h*p;b[2]=-e*p;b[3]=c*p;b[4]=(e*d-f*m)*p;b[5]=(h*m-c*d)*p;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,a,c){var h=a[0],e=a[1],f=a[2],m=a[3],d=a[4];a=a[5];var p=c[0],l=c[1],g=c[2],q=c[3],n=c[4];c=c[5];b[0]=h*p+f*l;b[1]=e*p+m*l;b[2]=h*g+f*q;b[3]=e*g+m*q;b[4]=h*n+f*c+d;b[5]=e*n+m*c+a;return b}};g.mul=g.multiply;g.rotate=function(b,a,c){var h=a[0],e=a[1],f=a[2],m=a[3],d=a[4];a=a[5];var p=Math.sin(c);c=Math.cos(c);
b[0]=h*c+f*p;b[1]=e*c+m*p;b[2]=h*-p+f*c;b[3]=e*-p+m*c;b[4]=d;b[5]=a;return b};g.scale=function(b,a,c){var h=a[1],e=a[2],f=a[3],d=a[4],k=a[5],p=c[0];c=c[1];b[0]=a[0]*p;b[1]=h*p;b[2]=e*c;b[3]=f*c;b[4]=d;b[5]=k;return b};g.translate=function(b,a,c){var h=a[0],e=a[1],f=a[2],d=a[3],k=a[4];a=a[5];var p=c[0];c=c[1];b[0]=h;b[1]=e;b[2]=f;b[3]=d;b[4]=h*p+f*c+k;b[5]=e*p+d*c+a;return b};g.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=-c;b[3]=h;b[4]=0;b[5]=0;return b};g.fromScaling=
function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];b[4]=0;b[5]=0;return b};g.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=a[0];b[5]=a[1];return b};g.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};g.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+
c[5];return b};g.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];return b};g.sub=g.subtract;g.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;return b};g.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;b[4]=a[4]+c[4]*h;b[5]=a[5]+c[5]*h;return b};g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&
b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]};g.equals=function(b,a){var c=b[0],h=b[1],e=b[2],f=b[3],m=b[4],k=b[5],p=a[0],l=a[1],g=a[2],q=a[3],n=a[4],u=a[5];return Math.abs(c-p)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(h-l)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(f-q)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(m-n)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(n))&&Math.abs(k-u)<=d.EPSILON*Math.max(1,
Math.abs(k),Math.abs(u))};n.exports=g},{"./common.js":59}],62:[function(g,n,r){var d=g("./common.js");g={create:function(){var b=new d.ARRAY_TYPE(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},clone:function(b){var a=new d.ARRAY_TYPE(9);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},copy:function(b,
a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},fromValues:function(b,a,c,h,e,f,m,k,p){var l=new d.ARRAY_TYPE(9);l[0]=b;l[1]=a;l[2]=c;l[3]=h;l[4]=e;l[5]=f;l[6]=m;l[7]=k;l[8]=p;return l},set:function(b,a,c,h,e,f,d,k,p,l){b[0]=a;b[1]=c;b[2]=h;b[3]=e;b[4]=f;b[5]=d;b[6]=k;b[7]=p;b[8]=l;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,a){if(b===a){var c=a[1],h=a[2],e=a[5];
b[1]=a[3];b[2]=a[6];b[3]=c;b[5]=a[7];b[6]=h;b[7]=e}else b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8];return b},invert:function(b,a){var c=a[0],h=a[1],e=a[2],f=a[3],d=a[4],k=a[5],p=a[6],l=a[7],g=a[8],q=g*d-k*l,n=-g*f+k*p,u=l*f-d*p,t=c*q+h*n+e*u;if(!t)return null;t=1/t;b[0]=q*t;b[1]=(-g*h+e*l)*t;b[2]=(k*h-e*d)*t;b[3]=n*t;b[4]=(g*c-e*p)*t;b[5]=(-k*c+e*f)*t;b[6]=u*t;b[7]=(-l*c+h*p)*t;b[8]=(d*c-h*f)*t;return b},adjoint:function(b,a){var c=a[0],h=a[1],e=a[2],
f=a[3],d=a[4],k=a[5],p=a[6],l=a[7],g=a[8];b[0]=d*g-k*l;b[1]=e*l-h*g;b[2]=h*k-e*d;b[3]=k*p-f*g;b[4]=c*g-e*p;b[5]=e*f-c*k;b[6]=f*l-d*p;b[7]=h*p-c*l;b[8]=c*d-h*f;return b},determinant:function(b){var a=b[3],c=b[4],h=b[5],e=b[6],f=b[7],d=b[8];return b[0]*(d*c-h*f)+b[1]*(-d*a+h*e)+b[2]*(f*a-c*e)},multiply:function(b,a,c){var h=a[0],e=a[1],f=a[2],d=a[3],k=a[4],p=a[5],l=a[6],g=a[7];a=a[8];var q=c[0],n=c[1],u=c[2],t=c[3],r=c[4],C=c[5],v=c[6],z=c[7];c=c[8];b[0]=q*h+n*d+u*l;b[1]=q*e+n*k+u*g;b[2]=q*f+n*p+u*
a;b[3]=t*h+r*d+C*l;b[4]=t*e+r*k+C*g;b[5]=t*f+r*p+C*a;b[6]=v*h+z*d+c*l;b[7]=v*e+z*k+c*g;b[8]=v*f+z*p+c*a;return b}};g.mul=g.multiply;g.translate=function(b,a,c){var h=a[0],e=a[1],f=a[2],d=a[3],k=a[4],p=a[5],l=a[6],g=a[7];a=a[8];var q=c[0];c=c[1];b[0]=h;b[1]=e;b[2]=f;b[3]=d;b[4]=k;b[5]=p;b[6]=q*h+c*d+l;b[7]=q*e+c*k+g;b[8]=q*f+c*p+a;return b};g.rotate=function(b,a,c){var h=a[0],e=a[1],f=a[2],d=a[3],k=a[4],p=a[5],l=a[6],g=a[7];a=a[8];var q=Math.sin(c);c=Math.cos(c);b[0]=c*h+q*d;b[1]=c*e+q*k;b[2]=c*f+
q*p;b[3]=c*d-q*h;b[4]=c*k-q*e;b[5]=c*p-q*f;b[6]=l;b[7]=g;b[8]=a;return b};g.scale=function(b,a,c){var h=c[0];c=c[1];b[0]=h*a[0];b[1]=h*a[1];b[2]=h*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};g.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};g.fromRotation=function(b,a){var c=Math.sin(a),h=Math.cos(a);b[0]=h;b[1]=c;b[2]=0;b[3]=-c;b[4]=h;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};g.fromScaling=function(b,a){b[0]=
a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};g.fromMat2d=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=0;b[3]=a[2];b[4]=a[3];b[5]=0;b[6]=a[4];b[7]=a[5];b[8]=1;return b};g.fromQuat=function(b,a){var c=a[0],h=a[1],e=a[2],f=a[3],d=c+c,k=h+h,p=e+e,c=c*d,l=h*d,h=h*k,g=e*d,q=e*k,e=e*p,d=f*d,k=f*k,f=f*p;b[0]=1-h-e;b[3]=l-f;b[6]=g+k;b[1]=l+f;b[4]=1-c-e;b[7]=q-d;b[2]=g-k;b[5]=q+d;b[8]=1-c-h;return b};g.normalFromMat4=function(b,a){var c=a[0],h=a[1],e=a[2],f=a[3],d=a[4],k=a[5],p=a[6],
l=a[7],g=a[8],q=a[9],n=a[10],u=a[11],t=a[12],r=a[13],C=a[14],v=a[15],z=c*k-h*d,A=c*p-e*d,y=c*l-f*d,B=h*p-e*k,D=h*l-f*k,E=e*l-f*p,I=g*r-q*t,H=g*C-n*t,g=g*v-u*t,K=q*C-n*r,q=q*v-u*r,n=n*v-u*C,u=z*n-A*q+y*K+B*g-D*H+E*I;if(!u)return null;u=1/u;b[0]=(k*n-p*q+l*K)*u;b[1]=(p*g-d*n-l*H)*u;b[2]=(d*q-k*g+l*I)*u;b[3]=(e*q-h*n-f*K)*u;b[4]=(c*n-e*g+f*H)*u;b[5]=(h*g-c*q-f*I)*u;b[6]=(r*E-C*D+v*B)*u;b[7]=(C*y-t*E-v*A)*u;b[8]=(t*D-r*y+v*z)*u;return b};g.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+
", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};g.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];return b};g.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=
a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];return b};g.sub=g.subtract;g.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;return b};g.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;b[4]=a[4]+c[4]*h;b[5]=a[5]+c[5]*h;b[6]=a[6]+c[6]*h;b[7]=a[7]+c[7]*h;b[8]=a[8]+c[8]*h;return b};g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===
a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]};g.equals=function(b,a){var c=b[0],h=b[1],e=b[2],f=b[3],m=b[4],k=b[5],p=b[6],l=b[7],g=b[8],q=a[0],n=a[1],u=a[2],t=a[3],r=a[4],C=a[5],v=b[6],z=a[7],A=a[8];return Math.abs(c-q)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(h-n)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-t)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&
Math.abs(m-r)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(r))&&Math.abs(k-C)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&Math.abs(p-v)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(l-z)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(g-A)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))};n.exports=g},{"./common.js":59}],63:[function(g,n,r){var d=g("./common.js"),b={scalar:{},SIMD:{},create:function(){var a=new d.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;
a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var c=new d.ARRAY_TYPE(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},
fromValues:function(a,c,b,e,f,m,k,p,l,g,q,n,u,t,r,C){var v=new d.ARRAY_TYPE(16);v[0]=a;v[1]=c;v[2]=b;v[3]=e;v[4]=f;v[5]=m;v[6]=k;v[7]=p;v[8]=l;v[9]=g;v[10]=q;v[11]=n;v[12]=u;v[13]=t;v[14]=r;v[15]=C;return v},set:function(a,c,b,e,f,d,k,p,l,g,q,n,u,t,r,C,v){a[0]=c;a[1]=b;a[2]=e;a[3]=f;a[4]=d;a[5]=k;a[6]=p;a[7]=l;a[8]=g;a[9]=q;a[10]=n;a[11]=u;a[12]=t;a[13]=r;a[14]=C;a[15]=v;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a}};b.scalar.transpose=function(a,c){if(a===c){var b=c[1],e=c[2],f=c[3],d=c[6],k=c[7],p=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=e;a[9]=d;a[11]=c[14];a[12]=f;a[13]=k;a[14]=p}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};b.SIMD.transpose=function(a,c){var b,e,f,d,k,p,l;b=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.load(c,
4);f=SIMD.Float32x4.load(c,8);d=SIMD.Float32x4.load(c,12);k=SIMD.Float32x4.shuffle(b,e,0,1,4,5);p=SIMD.Float32x4.shuffle(f,d,0,1,4,5);l=SIMD.Float32x4.shuffle(k,p,0,2,4,6);k=SIMD.Float32x4.shuffle(k,p,1,3,5,7);SIMD.Float32x4.store(a,0,l);SIMD.Float32x4.store(a,4,k);k=SIMD.Float32x4.shuffle(b,e,2,3,6,7);p=SIMD.Float32x4.shuffle(f,d,2,3,6,7);b=SIMD.Float32x4.shuffle(k,p,0,2,4,6);e=SIMD.Float32x4.shuffle(k,p,1,3,5,7);SIMD.Float32x4.store(a,8,b);SIMD.Float32x4.store(a,12,e);return a};b.transpose=d.USE_SIMD?
b.SIMD.transpose:b.scalar.transpose;b.scalar.invert=function(a,c){var b=c[0],e=c[1],f=c[2],d=c[3],k=c[4],p=c[5],l=c[6],g=c[7],q=c[8],n=c[9],u=c[10],t=c[11],r=c[12],C=c[13],v=c[14],z=c[15],A=b*p-e*k,y=b*l-f*k,B=b*g-d*k,D=e*l-f*p,E=e*g-d*p,I=f*g-d*l,H=q*C-n*r,K=q*v-u*r,M=q*z-t*r,O=n*v-u*C,J=n*z-t*C,L=u*z-t*v,G=A*L-y*J+B*O+D*M-E*K+I*H;if(!G)return null;G=1/G;a[0]=(p*L-l*J+g*O)*G;a[1]=(f*J-e*L-d*O)*G;a[2]=(C*I-v*E+z*D)*G;a[3]=(u*E-n*I-t*D)*G;a[4]=(l*M-k*L-g*K)*G;a[5]=(b*L-f*M+d*K)*G;a[6]=(v*B-r*I-z*y)*
G;a[7]=(q*I-u*B+t*y)*G;a[8]=(k*J-p*M+g*H)*G;a[9]=(e*M-b*J-d*H)*G;a[10]=(r*E-C*B+z*A)*G;a[11]=(n*B-q*E-t*A)*G;a[12]=(p*K-k*O-l*H)*G;a[13]=(b*O-e*K+f*H)*G;a[14]=(C*y-r*D-v*A)*G;a[15]=(q*D-n*y+u*A)*G;return a};b.SIMD.invert=function(a,c){var b,e,f,d,k,p,l,g,q;p=SIMD.Float32x4.load(c,0);l=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);q=SIMD.Float32x4.load(c,12);k=SIMD.Float32x4.shuffle(p,l,0,1,4,5);e=SIMD.Float32x4.shuffle(g,q,0,1,4,5);b=SIMD.Float32x4.shuffle(k,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,
k,1,3,5,7);k=SIMD.Float32x4.shuffle(p,l,2,3,6,7);d=SIMD.Float32x4.shuffle(g,q,2,3,6,7);f=SIMD.Float32x4.shuffle(k,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,k,1,3,5,7);k=SIMD.Float32x4.mul(f,d);k=SIMD.Float32x4.swizzle(k,1,0,3,2);p=SIMD.Float32x4.mul(e,k);l=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,k),p);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.mul(e,f);k=SIMD.Float32x4.swizzle(k,1,0,
3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,k),p);q=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(d,k));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),d);k=SIMD.Float32x4.swizzle(k,1,0,3,2);f=SIMD.Float32x4.swizzle(f,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,k),p);g=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);p=SIMD.Float32x4.sub(p,
SIMD.Float32x4.mul(f,k));g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);k=SIMD.Float32x4.mul(b,e);k=SIMD.Float32x4.swizzle(k,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,k),g);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,k),q);k=SIMD.Float32x4.swizzle(k,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,k),g);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(f,k));k=SIMD.Float32x4.mul(b,d);k=SIMD.Float32x4.swizzle(k,1,0,3,2);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(f,
k));g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,k),g);k=SIMD.Float32x4.swizzle(k,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,k),l);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,k));k=SIMD.Float32x4.mul(b,f);k=SIMD.Float32x4.swizzle(k,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,k),l);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(e,k));k=SIMD.Float32x4.swizzle(k,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(d,k));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,k),q);b=SIMD.Float32x4.mul(b,p);b=
SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,2,3,0,1),b);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,1,0,3,2),b);k=SIMD.Float32x4.reciprocalApproximation(b);b=SIMD.Float32x4.sub(SIMD.Float32x4.add(k,k),SIMD.Float32x4.mul(b,SIMD.Float32x4.mul(k,k)));b=SIMD.Float32x4.swizzle(b,0,0,0,0);if(!b)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,p));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,l));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,g));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(b,
q));return a};b.invert=d.USE_SIMD?b.SIMD.invert:b.scalar.invert;b.scalar.adjoint=function(a,c){var b=c[0],e=c[1],f=c[2],d=c[3],k=c[4],p=c[5],l=c[6],g=c[7],q=c[8],n=c[9],r=c[10],t=c[11],w=c[12],C=c[13],v=c[14],z=c[15];a[0]=p*(r*z-t*v)-n*(l*z-g*v)+C*(l*t-g*r);a[1]=-(e*(r*z-t*v)-n*(f*z-d*v)+C*(f*t-d*r));a[2]=e*(l*z-g*v)-p*(f*z-d*v)+C*(f*g-d*l);a[3]=-(e*(l*t-g*r)-p*(f*t-d*r)+n*(f*g-d*l));a[4]=-(k*(r*z-t*v)-q*(l*z-g*v)+w*(l*t-g*r));a[5]=b*(r*z-t*v)-q*(f*z-d*v)+w*(f*t-d*r);a[6]=-(b*(l*z-g*v)-k*(f*z-d*v)+
w*(f*g-d*l));a[7]=b*(l*t-g*r)-k*(f*t-d*r)+q*(f*g-d*l);a[8]=k*(n*z-t*C)-q*(p*z-g*C)+w*(p*t-g*n);a[9]=-(b*(n*z-t*C)-q*(e*z-d*C)+w*(e*t-d*n));a[10]=b*(p*z-g*C)-k*(e*z-d*C)+w*(e*g-d*p);a[11]=-(b*(p*t-g*n)-k*(e*t-d*n)+q*(e*g-d*p));a[12]=-(k*(n*v-r*C)-q*(p*v-l*C)+w*(p*r-l*n));a[13]=b*(n*v-r*C)-q*(e*v-f*C)+w*(e*r-f*n);a[14]=-(b*(p*v-l*C)-k*(e*v-f*C)+w*(e*l-f*p));a[15]=b*(p*r-l*n)-k*(e*r-f*n)+q*(e*l-f*p);return a};b.SIMD.adjoint=function(a,c){var b,e,f,d,k,g,l,n,q;b=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.load(c,
4);f=SIMD.Float32x4.load(c,8);d=SIMD.Float32x4.load(c,12);l=SIMD.Float32x4.shuffle(b,e,0,1,4,5);g=SIMD.Float32x4.shuffle(f,d,0,1,4,5);k=SIMD.Float32x4.shuffle(l,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,l,1,3,5,7);l=SIMD.Float32x4.shuffle(b,e,2,3,6,7);e=SIMD.Float32x4.shuffle(f,d,2,3,6,7);b=SIMD.Float32x4.shuffle(l,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,l,1,3,5,7);l=SIMD.Float32x4.mul(b,e);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.mul(g,l);d=SIMD.Float32x4.mul(k,l);l=SIMD.Float32x4.swizzle(l,
2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,l),f);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,l),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);l=SIMD.Float32x4.mul(g,b);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),f);q=SIMD.Float32x4.mul(k,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(e,l));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,l),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,3,0,1),e);
l=SIMD.Float32x4.swizzle(l,1,0,3,2);b=SIMD.Float32x4.swizzle(b,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,l),f);n=SIMD.Float32x4.mul(k,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(b,l));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,l),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);l=SIMD.Float32x4.mul(k,g);l=SIMD.Float32x4.swizzle(l,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),n);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),q);l=SIMD.Float32x4.swizzle(l,2,
3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),n);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(b,l));l=SIMD.Float32x4.mul(k,e);l=SIMD.Float32x4.swizzle(l,1,0,3,2);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(b,l));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,l),n);l=SIMD.Float32x4.swizzle(l,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,l),d);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(g,l));l=SIMD.Float32x4.mul(k,b);l=SIMD.Float32x4.swizzle(l,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),d);
q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(g,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(e,l));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,l),q);SIMD.Float32x4.store(a,0,f);SIMD.Float32x4.store(a,4,d);SIMD.Float32x4.store(a,8,n);SIMD.Float32x4.store(a,12,q);return a};b.adjoint=d.USE_SIMD?b.SIMD.adjoint:b.scalar.adjoint;b.determinant=function(a){var c=a[0],b=a[1],e=a[2],f=a[3],d=a[4],k=a[5],g=a[6],l=a[7],n=a[8],q=a[9],r=a[10],u=a[11],t=a[12],w=a[13],C=a[14];a=a[15];
return(c*k-b*d)*(r*a-u*C)-(c*g-e*d)*(q*a-u*w)+(c*l-f*d)*(q*C-r*w)+(b*g-e*k)*(n*a-u*t)-(b*l-f*k)*(n*C-r*t)+(e*l-f*g)*(n*w-q*t)};b.SIMD.multiply=function(a,c,b){var e=SIMD.Float32x4.load(c,0),f=SIMD.Float32x4.load(c,4),d=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var k=SIMD.Float32x4.load(b,0),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,0,k);k=SIMD.Float32x4.load(b,4);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,4,k);k=SIMD.Float32x4.load(b,8);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,8,k);b=SIMD.Float32x4.load(b,12);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,2,2,2,2),
d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,3,3,3,3),c))));SIMD.Float32x4.store(a,12,e);return a};b.scalar.multiply=function(a,c,b){var e=c[0],f=c[1],d=c[2],k=c[3],g=c[4],l=c[5],n=c[6],q=c[7],r=c[8],u=c[9],t=c[10],w=c[11],C=c[12],v=c[13],z=c[14];c=c[15];var A=b[0],y=b[1],B=b[2],D=b[3];a[0]=A*e+y*g+B*r+D*C;a[1]=A*f+y*l+B*u+D*v;a[2]=A*d+y*n+B*t+D*z;a[3]=A*k+y*q+B*w+D*c;A=b[4];y=b[5];B=b[6];D=b[7];a[4]=A*e+y*g+B*r+D*C;a[5]=A*f+y*l+B*u+D*v;a[6]=A*d+y*n+B*t+D*z;a[7]=A*k+y*q+B*w+D*c;A=b[8];y=b[9];B=
b[10];D=b[11];a[8]=A*e+y*g+B*r+D*C;a[9]=A*f+y*l+B*u+D*v;a[10]=A*d+y*n+B*t+D*z;a[11]=A*k+y*q+B*w+D*c;A=b[12];y=b[13];B=b[14];D=b[15];a[12]=A*e+y*g+B*r+D*C;a[13]=A*f+y*l+B*u+D*v;a[14]=A*d+y*n+B*t+D*z;a[15]=A*k+y*q+B*w+D*c;return a};b.multiply=d.USE_SIMD?b.SIMD.multiply:b.scalar.multiply;b.mul=b.multiply;b.scalar.translate=function(a,c,b){var e=b[0],f=b[1];b=b[2];var d,k,g,l,n,q,r,u,t,w,C,v;c===a?(a[12]=c[0]*e+c[4]*f+c[8]*b+c[12],a[13]=c[1]*e+c[5]*f+c[9]*b+c[13],a[14]=c[2]*e+c[6]*f+c[10]*b+c[14],a[15]=
c[3]*e+c[7]*f+c[11]*b+c[15]):(d=c[0],k=c[1],g=c[2],l=c[3],n=c[4],q=c[5],r=c[6],u=c[7],t=c[8],w=c[9],C=c[10],v=c[11],a[0]=d,a[1]=k,a[2]=g,a[3]=l,a[4]=n,a[5]=q,a[6]=r,a[7]=u,a[8]=t,a[9]=w,a[10]=C,a[11]=v,a[12]=d*e+n*f+t*b+c[12],a[13]=k*e+q*f+w*b+c[13],a[14]=g*e+r*f+C*b+c[14],a[15]=l*e+u*f+v*b+c[15]);return a};b.SIMD.translate=function(a,c,b){var e=SIMD.Float32x4.load(c,0),f=SIMD.Float32x4.load(c,4),d=SIMD.Float32x4.load(c,8),k=SIMD.Float32x4.load(c,12);b=SIMD.Float32x4(b[0],b[1],b[2],0);c!==a&&(a[0]=
c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,0,0,0,0));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(b,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(b,2,2,2,2));c=SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,SIMD.Float32x4.add(d,k)));SIMD.Float32x4.store(a,12,c);return a};b.translate=d.USE_SIMD?b.SIMD.translate:b.scalar.translate;b.scalar.scale=function(a,c,b){var e=b[0],
f=b[1];b=b[2];a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;a[3]=c[3]*e;a[4]=c[4]*f;a[5]=c[5]*f;a[6]=c[6]*f;a[7]=c[7]*f;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.SIMD.scale=function(a,c,b){var e;b=SIMD.Float32x4(b[0],b[1],b[2],0);e=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,0,0,0,0)));e=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,1,1,
1,1)));e=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};b.scale=d.USE_SIMD?b.SIMD.scale:b.scalar.scale;b.rotate=function(a,c,b,e){var f=e[0],m=e[1];e=e[2];var k=Math.sqrt(f*f+m*m+e*e),g,l,n,q,r,u,t,w,C,v,z,A,y,B,D,E,I,H,K,M;if(Math.abs(k)<d.EPSILON)return null;k=1/k;f*=k;m*=k;e*=k;g=Math.sin(b);l=Math.cos(b);n=1-l;b=c[0];k=c[1];q=c[2];r=c[3];u=c[4];t=c[5];w=c[6];C=c[7];v=c[8];z=c[9];
A=c[10];y=c[11];B=f*f*n+l;D=m*f*n+e*g;E=e*f*n-m*g;I=f*m*n-e*g;H=m*m*n+l;K=e*m*n+f*g;M=f*e*n+m*g;f=m*e*n-f*g;m=e*e*n+l;a[0]=b*B+u*D+v*E;a[1]=k*B+t*D+z*E;a[2]=q*B+w*D+A*E;a[3]=r*B+C*D+y*E;a[4]=b*I+u*H+v*K;a[5]=k*I+t*H+z*K;a[6]=q*I+w*H+A*K;a[7]=r*I+C*H+y*K;a[8]=b*M+u*f+v*m;a[9]=k*M+t*f+z*m;a[10]=q*M+w*f+A*m;a[11]=r*M+C*f+y*m;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};b.scalar.rotateX=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[4],d=c[5],k=c[6],g=c[7],l=c[8],n=c[9],
q=c[10],r=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=f*b+l*e;a[5]=d*b+n*e;a[6]=k*b+q*e;a[7]=g*b+r*e;a[8]=l*b-f*e;a[9]=n*b-d*e;a[10]=q*b-k*e;a[11]=r*b-g*e;return a};b.SIMD.rotateX=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var f=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,
4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(f,e)));return a};b.rotateX=d.USE_SIMD?b.SIMD.rotateX:b.scalar.rotateX;b.scalar.rotateY=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[0],d=c[1],k=c[2],g=c[3],l=c[8],n=c[9],q=c[10],r=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=f*b-l*e;a[1]=d*b-n*e;a[2]=k*b-q*e;a[3]=g*b-r*
e;a[8]=f*e+l*b;a[9]=d*e+n*b;a[10]=k*e+q*b;a[11]=g*e+r*b;return a};b.SIMD.rotateY=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var f=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(c,
b)));return a};b.rotateY=d.USE_SIMD?b.SIMD.rotateY:b.scalar.rotateY;b.scalar.rotateZ=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[0],d=c[1],k=c[2],g=c[3],l=c[4],n=c[5],q=c[6],r=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=f*b+l*e;a[1]=d*b+n*e;a[2]=k*b+q*e;a[3]=g*b+r*e;a[4]=l*b-f*e;a[5]=n*b-d*e;a[6]=q*b-k*e;a[7]=r*b-g*e;return a};b.SIMD.rotateZ=function(a,c,b){var e=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));
c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var f=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),SIMD.Float32x4.mul(c,e)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),SIMD.Float32x4.mul(f,e)));return a};b.rotateZ=d.USE_SIMD?b.SIMD.rotateZ:b.scalar.rotateZ;b.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};b.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotation=function(a,c,b){var e=b[0],f=b[1];b=b[2];var m=Math.sqrt(e*e+f*f+b*b),k;if(Math.abs(m)<d.EPSILON)return null;m=1/m;e*=m;f*=m;b*=m;m=Math.sin(c);c=Math.cos(c);k=1-c;a[0]=e*e*k+c;a[1]=f*e*k+b*m;a[2]=b*e*k-f*m;a[3]=0;a[4]=e*f*k-b*m;a[5]=f*f*k+c;a[6]=
b*f*k+e*m;a[7]=0;a[8]=e*b*k+f*m;a[9]=f*b*k-e*m;a[10]=b*b*k+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromXRotation=function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromYRotation=function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromZRotation=
function(a,c){var b=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.fromRotationTranslation=function(a,c,b){var e=c[0],f=c[1],d=c[2],k=c[3],g=e+e,l=f+f,n=d+d;c=e*g;var q=e*l,e=e*n,r=f*l,f=f*n,d=d*n,g=k*g,l=k*l,k=k*n;a[0]=1-(r+d);a[1]=q+k;a[2]=e-l;a[3]=0;a[4]=q-k;a[5]=1-(c+d);a[6]=f+g;a[7]=0;a[8]=e+l;a[9]=f-g;a[10]=1-(c+r);a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.getTranslation=
function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};b.getRotation=function(a,c){var b=c[0]+c[5]+c[10],e=0;0<b?(e=2*Math.sqrt(b+1),a[3]=.25*e,a[0]=(c[6]-c[9])/e,a[1]=(c[8]-c[2])/e,a[2]=(c[1]-c[4])/e):c[0]>c[5]&c[0]>c[10]?(e=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/e,a[0]=.25*e,a[1]=(c[1]+c[4])/e,a[2]=(c[8]+c[2])/e):c[5]>c[10]?(e=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/e,a[0]=(c[1]+c[4])/e,a[1]=.25*e,a[2]=(c[6]+c[9])/e):(e=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/e,a[0]=(c[8]+
c[2])/e,a[1]=(c[6]+c[9])/e,a[2]=.25*e);return a};b.fromRotationTranslationScale=function(a,c,b,e){var f=c[0],d=c[1],k=c[2],g=c[3],l=f+f,n=d+d,q=k+k;c=f*l;var r=f*n,f=f*q,u=d*n,d=d*q,k=k*q,l=g*l,n=g*n,g=g*q,q=e[0],t=e[1];e=e[2];a[0]=(1-(u+k))*q;a[1]=(r+g)*q;a[2]=(f-n)*q;a[3]=0;a[4]=(r-g)*t;a[5]=(1-(c+k))*t;a[6]=(d+l)*t;a[7]=0;a[8]=(f+n)*e;a[9]=(d-l)*e;a[10]=(1-(c+u))*e;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};b.fromRotationTranslationScaleOrigin=function(a,c,b,e,f){var d=c[0],k=c[1],
g=c[2],l=c[3],n=d+d,q=k+k,r=g+g;c=d*n;var u=d*q,d=d*r,t=k*q,k=k*r,g=g*r,n=l*n,q=l*q,l=l*r,r=e[0],w=e[1];e=e[2];var C=f[0],v=f[1];f=f[2];a[0]=(1-(t+g))*r;a[1]=(u+l)*r;a[2]=(d-q)*r;a[3]=0;a[4]=(u-l)*w;a[5]=(1-(c+g))*w;a[6]=(k+n)*w;a[7]=0;a[8]=(d+q)*e;a[9]=(k-n)*e;a[10]=(1-(c+t))*e;a[11]=0;a[12]=b[0]+C-(a[0]*C+a[4]*v+a[8]*f);a[13]=b[1]+v-(a[1]*C+a[5]*v+a[9]*f);a[14]=b[2]+f-(a[2]*C+a[6]*v+a[10]*f);a[15]=1;return a};b.fromQuat=function(a,c){var b=c[0],e=c[1],f=c[2],d=c[3],k=b+b,g=e+e,l=f+f,b=b*k,n=e*k,
e=e*g,q=f*k,r=f*g,f=f*l,k=d*k,g=d*g,d=d*l;a[0]=1-e-f;a[1]=n+d;a[2]=q-g;a[3]=0;a[4]=n-d;a[5]=1-b-f;a[6]=r+k;a[7]=0;a[8]=q+g;a[9]=r-k;a[10]=1-b-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};b.frustum=function(a,c,b,e,f,d,k){var g=1/(b-c),l=1/(f-e),n=1/(d-k);a[0]=2*d*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*l;a[6]=0;a[7]=0;a[8]=(b+c)*g;a[9]=(f+e)*l;a[10]=(k+d)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*d*2*n;a[15]=0;return a};b.perspective=function(a,c,b,e,f){c=1/Math.tan(c/2);var d=1/(e-f);a[0]=c/b;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*e*d;a[15]=0;return a};b.perspectiveFromFieldOfView=function(a,c,b,e){var f=Math.tan(c.upDegrees*Math.PI/180),d=Math.tan(c.downDegrees*Math.PI/180),k=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var g=2/(k+c),l=2/(f+d);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((k-c)*g*.5);a[9]=(f-d)*l*.5;a[10]=e/(b-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*b/(b-e);
a[15]=0;return a};b.ortho=function(a,c,b,e,f,d,k){var g=1/(c-b),l=1/(e-f),n=1/(d-k);a[0]=-2*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(c+b)*g;a[13]=(f+e)*l;a[14]=(k+d)*n;a[15]=1;return a};b.lookAt=function(a,c,h,e){var f,m,k,g,l,n,q,r,u=c[0],t=c[1];c=c[2];k=e[0];g=e[1];m=e[2];q=h[0];e=h[1];f=h[2];if(Math.abs(u-q)<d.EPSILON&&Math.abs(t-e)<d.EPSILON&&Math.abs(c-f)<d.EPSILON)return b.identity(a);h=u-q;e=t-e;q=c-f;r=1/Math.sqrt(h*h+e*e+q*q);h*=r;e*=r;
q*=r;f=g*q-m*e;m=m*h-k*q;k=k*e-g*h;(r=Math.sqrt(f*f+m*m+k*k))?(r=1/r,f*=r,m*=r,k*=r):k=m=f=0;g=e*k-q*m;l=q*f-h*k;n=h*m-e*f;(r=Math.sqrt(g*g+l*l+n*n))?(r=1/r,g*=r,l*=r,n*=r):n=l=g=0;a[0]=f;a[1]=g;a[2]=h;a[3]=0;a[4]=m;a[5]=l;a[6]=e;a[7]=0;a[8]=k;a[9]=n;a[10]=q;a[11]=0;a[12]=-(f*u+m*t+k*c);a[13]=-(g*u+l*t+n*c);a[14]=-(h*u+e*t+q*c);a[15]=1;return a};b.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+
a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};b.add=function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];
a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};b.subtract=function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a};b.sub=b.subtract;b.multiplyScalar=function(a,c,b){a[0]=c[0]*
b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*b;a[15]=c[15]*b;return a};b.multiplyScalarAndAdd=function(a,c,b,e){a[0]=c[0]+b[0]*e;a[1]=c[1]+b[1]*e;a[2]=c[2]+b[2]*e;a[3]=c[3]+b[3]*e;a[4]=c[4]+b[4]*e;a[5]=c[5]+b[5]*e;a[6]=c[6]+b[6]*e;a[7]=c[7]+b[7]*e;a[8]=c[8]+b[8]*e;a[9]=c[9]+b[9]*e;a[10]=c[10]+b[10]*e;a[11]=c[11]+b[11]*e;a[12]=c[12]+b[12]*e;a[13]=c[13]+b[13]*e;a[14]=
c[14]+b[14]*e;a[15]=c[15]+b[15]*e;return a};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};b.equals=function(a,c){var b=a[0],e=a[1],f=a[2],g=a[3],k=a[4],p=a[5],l=a[6],n=a[7],q=a[8],r=a[9],u=a[10],t=a[11],w=a[12],C=a[13],v=a[14],z=a[15],A=c[0],y=c[1],B=c[2],D=c[3],E=c[4],I=c[5],H=c[6],K=c[7],M=
c[8],O=c[9],J=c[10],L=c[11],G=c[12],N=c[13],U=c[14],S=c[15];return Math.abs(b-A)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(e-y)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(f-B)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(g-D)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(k-E)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(E))&&Math.abs(p-I)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(l-H)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(H))&&
Math.abs(n-K)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(K))&&Math.abs(q-M)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(M))&&Math.abs(r-O)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(u-J)<=d.EPSILON*Math.max(1,Math.abs(u),Math.abs(J))&&Math.abs(t-L)<=d.EPSILON*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(w-G)<=d.EPSILON*Math.max(1,Math.abs(w),Math.abs(G))&&Math.abs(C-N)<=d.EPSILON*Math.max(1,Math.abs(C),Math.abs(N))&&Math.abs(v-U)<=d.EPSILON*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(z-
S)<=d.EPSILON*Math.max(1,Math.abs(z),Math.abs(S))};n.exports=b},{"./common.js":59}],64:[function(g,n,r){var d=g("./common.js"),b=g("./mat3.js"),a=g("./vec3.js");g=g("./vec4.js");var c={create:function(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};c.rotationTo=function(){var b=a.create(),e=a.fromValues(1,0,0),f=a.fromValues(0,1,0);return function(d,k,g){var l=a.dot(k,g);if(-.999999>l)return a.cross(b,e,k),1E-6>a.length(b)&&a.cross(b,f,k),a.normalize(b,b),c.setAxisAngle(d,b,Math.PI),
d;if(.999999<l)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;a.cross(b,k,g);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=1+l;return c.normalize(d,d)}}();c.setAxes=function(){var a=b.create();return function(b,d,g,k){a[0]=g[0];a[3]=g[1];a[6]=g[2];a[1]=k[0];a[4]=k[1];a[7]=k[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return c.normalize(b,c.fromMat3(b,a))}}();c.clone=g.clone;c.fromValues=g.fromValues;c.copy=g.copy;c.set=g.set;c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.setAxisAngle=function(a,c,b){b*=.5;var d=
Math.sin(b);a[0]=d*c[0];a[1]=d*c[1];a[2]=d*c[2];a[3]=Math.cos(b);return a};c.getAxisAngle=function(a,c){var b=2*Math.acos(c[3]),d=Math.sin(b/2);0!=d?(a[0]=c[0]/d,a[1]=c[1]/d,a[2]=c[2]/d):(a[0]=1,a[1]=0,a[2]=0);return b};c.add=g.add;c.multiply=function(a,c,b){var d=c[0],k=c[1],g=c[2];c=c[3];var l=b[0],n=b[1],q=b[2];b=b[3];a[0]=d*b+c*l+k*q-g*n;a[1]=k*b+c*n+g*l-d*q;a[2]=g*b+c*q+d*n-k*l;a[3]=c*b-d*l-k*n-g*q;return a};c.mul=c.multiply;c.scale=g.scale;c.rotateX=function(a,c,b){b*=.5;var d=c[0],k=c[1],g=
c[2];c=c[3];var l=Math.sin(b);b=Math.cos(b);a[0]=d*b+c*l;a[1]=k*b+g*l;a[2]=g*b-k*l;a[3]=c*b-d*l;return a};c.rotateY=function(a,c,b){b*=.5;var d=c[0],k=c[1],g=c[2];c=c[3];var l=Math.sin(b);b=Math.cos(b);a[0]=d*b-g*l;a[1]=k*b+c*l;a[2]=g*b+d*l;a[3]=c*b-k*l;return a};c.rotateZ=function(a,c,b){b*=.5;var d=c[0],k=c[1],g=c[2];c=c[3];var l=Math.sin(b);b=Math.cos(b);a[0]=d*b+k*l;a[1]=k*b-d*l;a[2]=g*b+c*l;a[3]=c*b-g*l;return a};c.calculateW=function(a,c){var b=c[0],d=c[1],k=c[2];a[0]=b;a[1]=d;a[2]=k;a[3]=Math.sqrt(Math.abs(1-
b*b-d*d-k*k));return a};c.dot=g.dot;c.lerp=g.lerp;c.slerp=function(a,c,b,d){var k=c[0],g=c[1],l=c[2];c=c[3];var n=b[0],q=b[1],r=b[2];b=b[3];var u,t,w;t=k*n+g*q+l*r+c*b;0>t&&(t=-t,n=-n,q=-q,r=-r,b=-b);1E-6<1-t?(u=Math.acos(t),w=Math.sin(u),t=Math.sin((1-d)*u)/w,d=Math.sin(d*u)/w):t=1-d;a[0]=t*k+d*n;a[1]=t*g+d*q;a[2]=t*l+d*r;a[3]=t*c+d*b;return a};c.sqlerp=function(){var a=c.create(),b=c.create();return function(d,g,k,p,l,n){c.slerp(a,g,l,n);c.slerp(b,k,p,n);c.slerp(d,a,b,2*n*(1-n));return d}}();c.invert=
function(a,c){var b=c[0],d=c[1],k=c[2],g=c[3],l=b*b+d*d+k*k+g*g,l=l?1/l:0;a[0]=-b*l;a[1]=-d*l;a[2]=-k*l;a[3]=g*l;return a};c.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};c.length=g.length;c.len=c.length;c.squaredLength=g.squaredLength;c.sqrLen=c.squaredLength;c.normalize=g.normalize;c.fromMat3=function(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{var d=0;c[4]>c[0]&&(d=1);c[8]>c[3*d+
d]&&(d=2);var k=(d+1)%3,g=(d+2)%3,b=Math.sqrt(c[3*d+d]-c[3*k+k]-c[3*g+g]+1);a[d]=.5*b;b=.5/b;a[3]=(c[3*k+g]-c[3*g+k])*b;a[k]=(c[3*k+d]+c[3*d+k])*b;a[g]=(c[3*g+d]+c[3*d+g])*b}return a};c.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=g.exactEquals;c.equals=g.equals;n.exports=c},{"./common.js":59,"./mat3.js":62,"./vec3.js":66,"./vec4.js":67}],65:[function(g,n,r){var d=g("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=
new d.ARRAY_TYPE(2);c[0]=a[0];c[1]=a[1];return c},fromValues:function(a,c){var b=new d.ARRAY_TYPE(2);b[0]=a;b[1]=c;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];return a},set:function(a,c,b){a[0]=c;a[1]=b;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*b[0];a[1]=c[1]*b[1];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];return a};
b.div=b.divide;b.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};b.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};b.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);return a};b.max=function(a,c,b){a[0]=Math.max(c[0],b[0]);a[1]=Math.max(c[1],b[1]);return a};b.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};b.scale=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;return a};b.scaleAndAdd=function(a,c,b,e){a[0]=c[0]+
b[0]*e;a[1]=c[1]+b[1]*e;return a};b.distance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1];return Math.sqrt(b*b+e*e)};b.dist=b.distance;b.squaredDistance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1];return b*b+e*e};b.sqrDist=b.squaredDistance;b.length=function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)};b.len=b.length;b.squaredLength=function(a){var c=a[0];a=a[1];return c*c+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};b.inverse=function(a,c){a[0]=1/c[0];a[1]=1/
c[1];return a};b.normalize=function(a,c){var b=c[0],e=c[1],b=b*b+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};b.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};b.cross=function(a,c,b){c=c[0]*b[1]-c[1]*b[0];a[0]=a[1]=0;a[2]=c;return a};b.lerp=function(a,c,b,e){var d=c[0];c=c[1];a[0]=d+e*(b[0]-d);a[1]=c+e*(b[1]-c);return a};b.random=function(a,c){c=c||1;var b=2*d.RANDOM()*Math.PI;a[0]=Math.cos(b)*c;a[1]=Math.sin(b)*c;return a};b.transformMat2=function(a,c,b){var e=c[0];c=c[1];a[0]=b[0]*
e+b[2]*c;a[1]=b[1]*e+b[3]*c;return a};b.transformMat2d=function(a,c,b){var e=c[0];c=c[1];a[0]=b[0]*e+b[2]*c+b[4];a[1]=b[1]*e+b[3]*c+b[5];return a};b.transformMat3=function(a,c,b){var e=c[0];c=c[1];a[0]=b[0]*e+b[3]*c+b[6];a[1]=b[1]*e+b[4]*c+b[7];return a};b.transformMat4=function(a,c,b){var e=c[0];c=c[1];a[0]=b[0]*e+b[4]*c+b[12];a[1]=b[1]*e+b[5]*c+b[13];return a};b.forEach=function(){var a=b.create();return function(c,b,e,d,g,k){b||(b=2);e||(e=0);for(d=d?Math.min(d*b+e,c.length):c.length;e<d;e+=b)a[0]=
c[e],a[1]=c[e+1],g(a,a,k),c[e]=a[0],c[e+1]=a[1];return c}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};b.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};b.equals=function(a,c){var b=a[0],e=a[1],f=c[0],g=c[1];return Math.abs(b-f)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))};n.exports=b},{"./common.js":59}],66:[function(g,n,r){var d=g("./common.js"),b={create:function(){var a=new d.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=
0;return a},clone:function(a){var c=new d.ARRAY_TYPE(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},fromValues:function(a,c,b){var e=new d.ARRAY_TYPE(3);e[0]=a;e[1]=c;e[2]=b;return e},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,b,e){a[0]=c;a[1]=b;a[2]=e;return a},add:function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];return a},subtract:function(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];return a}};b.sub=b.subtract;b.multiply=function(a,c,b){a[0]=c[0]*
b[0];a[1]=c[1]*b[1];a[2]=c[2]*b[2];return a};b.mul=b.multiply;b.divide=function(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];a[2]=c[2]/b[2];return a};b.div=b.divide;b.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};b.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};b.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);a[2]=Math.min(c[2],b[2]);return a};b.max=function(a,c,b){a[0]=Math.max(c[0],b[0]);
a[1]=Math.max(c[1],b[1]);a[2]=Math.max(c[2],b[2]);return a};b.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);return a};b.scale=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;return a};b.scaleAndAdd=function(a,c,b,e){a[0]=c[0]+b[0]*e;a[1]=c[1]+b[1]*e;a[2]=c[2]+b[2]*e;return a};b.distance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1],d=c[2]-a[2];return Math.sqrt(b*b+e*e+d*d)};b.dist=b.distance;b.squaredDistance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1],d=c[2]-
a[2];return b*b+e*e+d*d};b.sqrDist=b.squaredDistance;b.length=function(a){var c=a[0],b=a[1];a=a[2];return Math.sqrt(c*c+b*b+a*a)};b.len=b.length;b.squaredLength=function(a){var c=a[0],b=a[1];a=a[2];return c*c+b*b+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};b.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};b.normalize=function(a,c){var b=c[0],e=c[1],d=c[2],b=b*b+e*e+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*
b);return a};b.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};b.cross=function(a,c,b){var e=c[0],d=c[1];c=c[2];var g=b[0],k=b[1];b=b[2];a[0]=d*b-c*k;a[1]=c*g-e*b;a[2]=e*k-d*g;return a};b.lerp=function(a,c,b,e){var d=c[0],g=c[1];c=c[2];a[0]=d+e*(b[0]-d);a[1]=g+e*(b[1]-g);a[2]=c+e*(b[2]-c);return a};b.hermite=function(a,c,b,e,d,g){var k=g*g,p=k*(2*g-3)+1,l=k*(g-2)+g,n=k*(g-1);g=k*(3-2*g);a[0]=c[0]*p+b[0]*l+e[0]*n+d[0]*g;a[1]=c[1]*p+b[1]*l+e[1]*n+d[1]*g;a[2]=c[2]*p+b[2]*l+e[2]*n+d[2]*g;return a};
b.bezier=function(a,c,b,e,d,g){var k=1-g,p=k*k,l=g*g,n=p*k,p=3*g*p,k=3*l*k;g*=l;a[0]=c[0]*n+b[0]*p+e[0]*k+d[0]*g;a[1]=c[1]*n+b[1]*p+e[1]*k+d[1]*g;a[2]=c[2]*n+b[2]*p+e[2]*k+d[2]*g;return a};b.random=function(a,c){c=c||1;var b=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*c;a[0]=Math.cos(b)*f;a[1]=Math.sin(b)*f;a[2]=e*c;return a};b.transformMat4=function(a,c,b){var e=c[0],d=c[1];c=c[2];var g=b[3]*e+b[7]*d+b[11]*c+b[15],g=g||1;a[0]=(b[0]*e+b[4]*d+b[8]*c+b[12])/g;a[1]=(b[1]*e+b[5]*d+b[9]*c+
b[13])/g;a[2]=(b[2]*e+b[6]*d+b[10]*c+b[14])/g;return a};b.transformMat3=function(a,b,d){var e=b[0],f=b[1];b=b[2];a[0]=e*d[0]+f*d[3]+b*d[6];a[1]=e*d[1]+f*d[4]+b*d[7];a[2]=e*d[2]+f*d[5]+b*d[8];return a};b.transformQuat=function(a,b,d){var e=b[0],f=b[1],g=b[2];b=d[0];var k=d[1],p=d[2];d=d[3];var l=d*e+k*g-p*f,n=d*f+p*e-b*g,q=d*g+b*f-k*e,e=-b*e-k*f-p*g;a[0]=l*d+e*-b+n*-p-q*-k;a[1]=n*d+e*-k+q*-b-l*-p;a[2]=q*d+e*-p+l*-k-n*-b;return a};b.rotateX=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];
f[2]=b[2]-d[2];g[0]=f[0];g[1]=f[1]*Math.cos(e)-f[2]*Math.sin(e);g[2]=f[1]*Math.sin(e)+f[2]*Math.cos(e);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.rotateY=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[2]*Math.sin(e)+f[0]*Math.cos(e);g[1]=f[1];g[2]=f[2]*Math.cos(e)-f[0]*Math.sin(e);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.rotateZ=function(a,b,d,e){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[0]*Math.cos(e)-f[1]*
Math.sin(e);g[1]=f[0]*Math.sin(e)+f[1]*Math.cos(e);g[2]=f[2];a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};b.forEach=function(){var a=b.create();return function(b,d,e,f,g,k){d||(d=3);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],g(a,a,k),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2];return b}}();b.angle=function(a,c){var d=b.fromValues(a[0],a[1],a[2]),e=b.fromValues(c[0],c[1],c[2]);b.normalize(d,d);b.normalize(e,e);d=b.dot(d,e);return 1<d?0:Math.acos(d)};
b.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};b.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};b.equals=function(a,b){var h=a[0],e=a[1],f=a[2],g=b[0],k=b[1],p=b[2];return Math.abs(h-g)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-p)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))};n.exports=b},{"./common.js":59}],67:[function(g,n,r){var d=g("./common.js"),b={create:function(){var a=
new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,h,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=h;f[3]=e;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,e,f){a[0]=b;a[1]=d;a[2]=e;a[3]=f;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-
d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};b.sub=b.subtract;b.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};b.mul=b.multiply;b.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};b.div=b.divide;b.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};b.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);
a[3]=Math.floor(b[3]);return a};b.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};b.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};b.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};b.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};b.scaleAndAdd=
function(a,b,d,e){a[0]=b[0]+d[0]*e;a[1]=b[1]+d[1]*e;a[2]=b[2]+d[2]*e;a[3]=b[3]+d[3]*e;return a};b.distance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return Math.sqrt(d*d+e*e+f*f+g*g)};b.dist=b.distance;b.squaredDistance=function(a,b){var d=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return d*d+e*e+f*f+g*g};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+d*d+e*e+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0],
d=a[1],e=a[2];a=a[3];return b*b+d*d+e*e+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};b.normalize=function(a,b){var d=b[0],e=b[1],f=b[2],g=b[3],k=d*d+e*e+f*f+g*g;0<k&&(k=1/Math.sqrt(k),a[0]=d*k,a[1]=e*k,a[2]=f*k,a[3]=g*k);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};b.lerp=function(a,b,d,e){var f=b[0],g=b[1],k=b[2];b=b[3];a[0]=
f+e*(d[0]-f);a[1]=g+e*(d[1]-g);a[2]=k+e*(d[2]-k);a[3]=b+e*(d[3]-b);return a};b.random=function(a,c){c=c||1;a[0]=d.RANDOM();a[1]=d.RANDOM();a[2]=d.RANDOM();a[3]=d.RANDOM();b.normalize(a,a);b.scale(a,a,c);return a};b.transformMat4=function(a,b,d){var e=b[0],f=b[1],g=b[2];b=b[3];a[0]=d[0]*e+d[4]*f+d[8]*g+d[12]*b;a[1]=d[1]*e+d[5]*f+d[9]*g+d[13]*b;a[2]=d[2]*e+d[6]*f+d[10]*g+d[14]*b;a[3]=d[3]*e+d[7]*f+d[11]*g+d[15]*b;return a};b.transformQuat=function(a,b,d){var e=b[0],f=b[1],g=b[2],k=d[0],p=d[1],l=d[2];
d=d[3];var n=d*e+p*g-l*f,q=d*f+l*e-k*g,r=d*g+k*f-p*e,e=-k*e-p*f-l*g;a[0]=n*d+e*-k+q*-l-r*-p;a[1]=q*d+e*-p+r*-k-n*-l;a[2]=r*d+e*-l+n*-p-q*-k;a[3]=b[3];return a};b.forEach=function(){var a=b.create();return function(b,d,e,f,g,k){d||(d=4);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],g(a,a,k),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();b.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};b.equals=function(a,b){var g=a[0],e=a[1],f=a[2],m=a[3],k=b[0],p=b[1],l=b[2],n=b[3];return Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(e-p)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(m-n)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(n))};n.exports=b},{"./common.js":59}],68:[function(g,n,r){(function(d){function b(){e.forEach(function(a){f[h[a]]=
!1})}function a(a){f[h[a.keyCode]]=!1}function c(a){f[h[a.keyCode]]=!0}var h=g("vkey"),e=Object.keys(h),f={};b();n.exports=function(a){return a?f[a]:f};d.browser&&(window.addEventListener("keydown",c,!1),window.addEventListener("keyup",a,!1),window.addEventListener("blur",b,!1))}).call(this,g("_process"))},{_process:72,vkey:74}],69:[function(g,n,r){var d=g("events/");n.exports=function(b,a){var c=new d;c.x=0;c.y=0;c.prevX=0;c.prevY=0;c.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===
typeof window)return c;a=a||b||window;b=b||document.body;a.addEventListener("mousemove",b===document.body||b===window?function(a){c.prevX=c.x;c.prevY=c.y;c.x=a.clientX;c.y=a.clientY;c.emit("move",a)}:function(a){c.prevX=c.x;c.prevY=c.y;var d=b.getBoundingClientRect();c.x=a.clientX-d.left;c.y=a.clientY-d.top;c.emit("move",a)},!1);return c}},{"events/":33}],70:[function(g,n,r){var d=g("events/"),b=["left","middle","right"];n.exports=function(a,c){function g(a){f.right=!1;f[b[a.button]]=!0;f.emit("down",
a);if(c){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function e(a){f.right=!1;f[b[a.button]]=!1;f.emit("up",a);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var f=new d;f.left=!1;f.right=!1;f.middle=!1;"undefined"!==typeof window&&(a=a||window,a.addEventListener("mousedown",g,!1),a.addEventListener("mouseup",e,!1),c&&a.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return f}},{"events/":33}],71:[function(g,
n,r){function d(a,b,c){this.rotation=a;this.center=b;this.distance=c}function b(a,b){var c=b[0],d=b[1],c=c*c+d*d;1<c&&(c=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-c);a[3]=0}g=g("gl-matrix");var a=g.vec3,c=g.mat3,h=g.mat4,e=g.quat,f=new Float32Array(16),m=new Float32Array(16);g=d.prototype;g.view=function(b){b||(b=h.create());m[0]=m[1]=0;m[2]=-this.distance;h.fromRotationTranslation(b,e.conjugate(f,this.rotation),m);h.translate(b,b,a.negate(f,this.center));return b};g.lookAt=function(b,d,g){h.lookAt(f,
b,d,g);c.fromMat4(f,f);e.fromMat3(this.rotation,f);a.copy(this.center,d);this.distance=a.distance(b,d)};g.pan=function(b){var c=this.distance;f[0]=-c*(b[0]||0);f[1]=c*(b[1]||0);f[2]=c*(b[2]||0);a.transformQuat(f,f,this.rotation);a.add(this.center,this.center,f)};g.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};g.rotate=function(a,c){b(f,a);b(m,c);e.invert(m,m);e.multiply(f,f,m);1E-6>e.length(f)||(e.multiply(this.rotation,this.rotation,f),e.normalize(this.rotation,this.rotation))};
n.exports=function(b,c,f){b=b||[0,0,-1];c=c||[0,0,0];f=f||[0,1,0];var g=new d(e.create(),a.create(),1);g.lookAt(b,c,f);return g}},{"gl-matrix":58}],72:[function(g,n,r){function d(){e&&f&&(e=!1,f.length?h=f.concat(h):m=-1,h.length&&b())}function b(){if(!e){var a=setTimeout(d);e=!0;for(var b=h.length;b;){f=h;for(h=[];++m<b;)f&&f[m].run();m=-1;b=h.length}f=null;e=!1;clearTimeout(a)}}function a(a,b){this.fun=a;this.array=b}function c(){}g=n.exports={};var h=[],e=!1,f,m=-1;g.nextTick=function(c){var d=
Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)d[f-1]=arguments[f];h.push(new a(c,d));1!==h.length||e||setTimeout(b,0)};a.prototype.run=function(){this.fun.apply(null,this.array)};g.title="browser";g.browser=!0;g.env={};g.argv=[];g.version="";g.versions={};g.on=c;g.addListener=c;g.once=c;g.off=c;g.removeListener=c;g.removeAllListeners=c;g.emit=c;g.binding=function(a){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(a){throw Error("process.chdir is not supported");
};g.umask=function(){return 0}},{}],73:[function(g,n,r){var d=g("events/"),b=g("wheel");n.exports=function(a,c){function g(){e[0]=e[1]=e[2]=0}var e=new d;e.flush=g;g();if("undefined"===typeof window)return e;a=a||window;b(a,function(a){var b=1===a.deltaMode?12:1;e[0]+=b*(a.deltaX||0);e[1]+=b*(a.deltaY||0);e[2]+=b*(a.deltaZ||0);e.emit("scroll",e);c&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return e}},{"events/":33,wheel:75}],74:[function(g,n,r){var d="undefined"!==
typeof window?window.navigator.userAgent:"";g=/OS X/.test(d);r=/Opera/.test(d);d=!/like Gecko/.test(d)&&!r;g=n.exports={0:g?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",
27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:g?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",
165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:g&&d?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",
224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:r?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;65>n;++n)g[n]=String.fromCharCode(n);for(n=48;58>n;++n)g[n]=n-48+"";for(n=65;91>n;++n)g[n]=String.fromCharCode(n);for(n=96;106>n;++n)g[n]="<num-"+(n-96)+">";for(n=112;136>n;++n)g[n]="F"+(n-111)},{}],75:[function(g,n,r){function d(d,e,f,g){d[a](b+e,"wheel"==c?f:function(a){!a&&(a=window.event);
var b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==c?(b.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-.025*a.wheelDeltaX)):b.deltaY=a.detail;return f(b)},g||!1)}n.exports=function(a,b,f){d(a,c,b,f);"DOMMouseScroll"==c&&d(a,"MozMousePixelScroll",b,f)};var b="",a,c;window.addEventListener?a="addEventListener":(a="attachEvent",
b="on");c="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],76:[function(g,n,r){var d=g("./lib/util/extend"),b=g("./lib/dynamic"),a=g("./lib/util/raf"),c=g("./lib/util/clock"),h=g("./lib/strings"),e=g("./lib/webgl"),f=g("./lib/extension"),m=g("./lib/limits"),k=g("./lib/buffer"),p=g("./lib/elements"),l=g("./lib/texture"),x=g("./lib/renderbuffer"),q=g("./lib/framebuffer"),F=g("./lib/attribute"),u=g("./lib/shader"),t=g("./lib/read"),w=
g("./lib/core");n.exports=function(){function g(){Q=a.next(g);L.count+=1;var b=c();L.deltaTime=(b-M)/1E3;L.time=(b-K)/1E3;M=b;B();for(b=0;b<P.length;++b)(0,P[b])(L,null,0)}function n(a){}function r(a){}function A(a){function c(a){var d={},e={};Object.keys(a).forEach(function(c){var f=a[c];b.isDynamic(f)?e[c]=b.unbox(f,c):d[c]=f});return{dynamic:e,"static":d}}function e(a){for(;n.length<a;)n.push(null);return n}var f=c(a.context||{}),g=c(a.uniforms||{}),h=c(a.attributes||{});a=c(function(a){function b(a){if(a in
c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=d({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var f=aa.compile(a,h,g,f),k=f.draw,l=f.batch,m=f.scope,n=[];return function(a,b){var c;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)m.call(this,null,b,c);else if(Array.isArray(a))for(c=
0;c<a.length;++c)m.call(this,a[c],b,c);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)}}function y(){aa.procs.poll()}function B(){var a=ga.viewport,b=ga.scissor_box;a[0]=a[1]=b[0]=b[1]=0;L.viewportWidth=L.frameBufferWidth=L.drawingBufferWidth=a[2]=b[2]=E.drawingBufferWidth;L.viewportHeight=L.frameBufferWidth=L.drawingBufferHeight=a[3]=b[3]=E.drawingBufferHeight;
aa.procs.refresh()}var D=e(Array.prototype.slice.call(arguments)),E=D.gl,I=D.options,D=h(),H=f(E).extensions,K=c(),M=K,O=E.drawingBufferWidth,J=E.drawingBufferHeight,L={count:0,deltaTime:0,time:0,viewportWidth:O,viewportHeight:J,framebufferWidth:O,framebufferHeight:J,drawingBufferWidth:O,drawingBufferHeight:J,pixelRatio:I.pixelRatio},G=m(E,H),N=k(E),O=p(E,H,N),J=F(E,H,G,N,D),U=u(E,D),S=l(E,H,G,y,L),ea=x(E,H,G),fa=q(E,H,G,S,ea),la=t(E,y,L),aa=w(E,D,H,G,N,O,S,fa,{},J,U,{elements:null,primitive:4,count:-1,
offset:0,instances:-1},L),ga=aa.next,T=E.canvas,P=[],Q=0;T&&(T.addEventListener("webglcontextlost",n,!1),T.addEventListener("webglcontextrestored",r,!1));B();return d(A,{clear:function(a){var b=0;y();var c=a.color;c&&(E.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(E.clearDepth(+a.depth),b|=256);"stencil"in a&&(E.clearStencil(a.stencil|0),b|=1024);E.clear(b)},prop:b.define.bind(null,1),context:b.define.bind(null,2),"this":b.define.bind(null,3),draw:A({}),buffer:function(a){return N.create(a,
34962)},elements:O.create,texture:S.create2D,cube:S.createCube,renderbuffer:ea.create,framebuffer:fa.create,framebufferCube:function(a){},attributes:E.getContextAttributes(),frame:function(b){P.push(b);!Q&&0<P.length&&g();return{cancel:function(){var c=P.find(function(a){return a===b});0>c||(P.splice(c,1),0>=P.length&&Q&&(a.cancel(g),Q=0))}}},limits:G,hasExtension:function(a){return 0<=G.extensions.indexOf(a.toLowerCase())},read:la,destroy:function(){Q&&(a.cancel(g),Q=0);T&&(T.removeEventListener("webglcontextlost",
n),T.removeEventListener("webglcontextrestored",r));U.clear();fa.clear();ea.clear();S.clear();N.clear();if(I.onDestroy)I.onDestroy()},_gl:E,_refresh:B})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/strings":17,"./lib/texture":18,"./lib/util/clock":19,"./lib/util/extend":21,"./lib/util/raf":26,"./lib/webgl":29}],77:[function(g,
n,r){function d(a){throw Error("resl: "+a);}function b(a,b,c){Object.keys(a).forEach(function(a){0>b.indexOf(a)&&d('invalid parameter "'+a+'" in '+c)})}function a(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=b}var c=["manifest","onDone","onProgress","onError"],h=["type","src","stream","credentials","parser"],e=["onData","onDone"];n.exports=function(f){function g(a,b){if(a in f){var c=f[a];"function"!==typeof c&&d('invalid callback "'+a+'"');return c}return null}function k(b){function c(){if(!(2>
h.readyState||1===m.state||-1===m.state)){if(200!==h.status)return l('error loading resource "'+b.name+'"');if(2<h.readyState&&0===m.state){var a;a="binary"===b.type?h.response:h.responseText;if(g.data)try{k=g.data(a)}catch(e){return l(e)}else k=a}if(3<h.readyState&&0===m.state){if(g.done)try{k=g.done()}catch(e){return l(e)}m.state=1}w[d]=k;m.progress=.75*m.progress+.25;m.ready=b.stream&&!!k||1===m.state;r()}}var d=b.name,e=b.stream,f="binary"===b.type,g=b.parser,h=new XMLHttpRequest,k=null,m=new a(d,
function(){1!==m.state&&-1!==m.state&&(h.onreadystatechange=null,h.abort(),m.state=-1)});h.onreadystatechange=e?c:function(){4===h.readyState&&c()};f&&(h.responseType="arraybuffer");b.credentials&&(h.withCredentials=!0);h.open("GET",b.src,!0);h.send();return m}function n(b,c){function d(){if(0===p.state)if(m.data)try{q=m.data(c)}catch(a){return l(a)}else q=c}function e(a){d();w[k]=q;p.progress=a.lengthComputable?Math.max(p.progress,a.loaded/a.total):.75*p.progress+.25;p.ready=b.stream;r(k)}function f(){d();
if(0===p.state){if(m.done)try{q=m.done()}catch(a){return l(a)}p.state=1}p.progress=1;p.ready=!0;w[k]=q;h();r("finish "+k)}function g(){l('error loading asset "'+k+'"')}function h(){b.stream&&c.removeEventListener("progress",e);"image"===b.type?c.addEventListener("load",f):c.addEventListener("canplay",f);c.removeEventListener("error",g)}var k=b.name,m=b.parser,p=new a(k,function(){1!==p.state&&-1!==p.state&&(p.state=-1,h(),c.src="")}),q=c;b.stream&&c.addEventListener("progress",e);"image"===b.type?
c.addEventListener("load",f):c.addEventListener("canplay",f);c.addEventListener("error",g);c.crossOrigin=b.credentials?"use-credentials":"anonymous";c.src=b.src;return p}function l(a){-1!==C&&1!==C&&(C=-1,z.forEach(function(a){a.cancel()}),t?"string"===typeof a?t(Error("resl: "+a)):t(a):console.error("resl error:",a))}function r(a){if(-1!==C&&1!==C){var b=0,c=0;z.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===z.length?(C=1,F(w)):u&&u(b/z.length,a)}}"object"===typeof f&&f||d("invalid or missing configuration");
b(f,c,"config");var q=f.manifest;"object"===typeof q&&q||d("missing manifest");var F=g("onDone");F||d("missing onDone() callback");var u=g("onProgress"),t=g("onError"),w={},C=0,v={text:k,binary:function(a){return k(a)},image:function(a){return n(a,document.createElement("img"))},video:function(a){return n(a,document.createElement("video"))},audio:function(a){return n(a,document.createElement("audio"))}},z=Object.keys(q).map(function(a){function c(a,b){if(a in f.parser){var e=f.parser[a];"function"!==
typeof e&&d("invalid parser callback "+a+' for asset "'+a+'"');return e}return b}var f=q[a];"string"===typeof f?f={src:f}:"object"===typeof f&&f||d('invalid asset definition "'+a+'"');b(f,h,'asset "'+a+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(b(g,e,'parser for asset "'+a+'"'),"onData"in g||d('missing onData callback for parser in asset "'+a+'"'),g={data:c("onData"),done:c("onDone")}):d('invalid parser for asset "'+a+'"'));return{name:a,
type:function(b,c,e){b in f&&(e=f[b]);0>c.indexOf(e)&&d("invalid "+b+' "'+e+'" for asset "'+a+'", possible values: '+c);return e}("type",Object.keys(v),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(b,c,e){b in f?e=f[b]:c&&d("missing "+b+' for asset "'+a+'"');"string"!==typeof e&&d("invalid "+b+' for asset "'+a+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return v[a.type](a)})}},{}]},{},[1]);
