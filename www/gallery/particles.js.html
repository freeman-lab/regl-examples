<!DOCTYPE html>
      <html>
        <head>
          <title>example/particles.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function e$$0(g,n,a){function b(d,f){if(!n[d]){if(!g[d]){var k="function"==typeof require&&require;if(!f&&k)return k(d,!0);if(c)return c(d,!0);k=Error("Cannot find module '"+d+"'");throw k.code="MODULE_NOT_FOUND",k;}k=n[d]={exports:{}};g[d][0].call(k.exports,function(a){var c=g[d][1][a];return b(c?c:a)},k,k.exports,e$$0,g,n,a)}return n[d].exports}for(var c="function"==typeof require&&require,d=0;d<a.length;d++)b(a[d]);return b})({1:[function(e,g,n){var a=e("../regl")(),b=e("gl-mat4"),c=e("hsv2rgb");
e=a.buffer(Array(1E4).fill().map(function(){var a=c(360*Math.random(),.6,1);return[10*Math.random(),10*Math.random(),10*Math.random(),10*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),a[0]/255,a[1]/255,a[2]/255]}));var d=a({vert:"\n  precision mediump float;\n  attribute vec4 freq, phase;\n  attribute vec3 color;\n  uniform float time;\n  uniform mat4 view, projection;\n  varying vec3 fragColor;\n  void main() {\n    vec3 position = 8.0 * cos(freq.xyz * time + phase.xyz);\n    gl_PointSize = 5.0 * (1.0 + cos(freq.w * time + phase.w));\n    gl_Position = projection * view * vec4(position, 1);\n    fragColor = color;\n  }",
frag:"\n  precision lowp float;\n  varying vec3 fragColor;\n  void main() {\n    if (length(gl_PointCoord.xy - 0.5) > 0.5) {\n      discard;\n    }\n    gl_FragColor = vec4(fragColor, 1);\n  }",attributes:{freq:{buffer:e,stride:44,offset:0},phase:{buffer:e,stride:44,offset:16},color:{buffer:e,stride:44,offset:32}},uniforms:{view:function(a,d,c){a=.01*c.count;return b.lookAt([],[30*Math.cos(a),2.5,30*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a,d,c){return b.perspective([],Math.PI/4,c.width/
c.height,.01,1E3)},time:function(a,b,d){return.001*d.count}},count:1E4,primitive:"points"});a.frame(function(){a.clear({depth:1,color:[0,0,0,1]});d()})},{"../regl":58,"gl-mat4":42,hsv2rgb:57}],2:[function(e,g,n){function a(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var b=e("./constants/dtypes.json"),c=e("./extend");c(a.prototype,{equals:function(a,b){return this.pointer?a.pointer&&this.buffer===
a.buffer&&this.size===b&&this.normalized===a.normalized&&this.type===a.type&&this.offset===a.offset&&this.stride===a.stride&&this.divisor===a.divisor:!a.pointer&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,b){(this.pointer=a.pointer)?(this.buffer=a.buffer,this.size=b,this.normalized=a.normalized,this.type=a.type,this.offset=a.offset,this.stride=a.stride,this.divisor=a.divisor):(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w)}});g.exports=function(d,p,f,k,h){function l(){for(var b=
Array(16),c=0;16>c;++c)b[c]=new a;this.records=b;this.top=0}function V(b){for(var c=b.records,d=b.top;c.length-1<=d;)c.push(new a);return c[++b.top]}var e={};f=f.maxAttributes;for(var m=Array(f),r=0;r<f;++r)m[r]=new a;c(l.prototype,{pushVec:function(a,b,c,d){var f=V(this);f.pointer=!1;f.x=a;f.y=b;f.z=c;f.w=d},pushPtr:function(a,b,c,d,f,h,p){var k=V(this);k.pointer=!0;k.buffer=a;k.size=b;k.offset=c;k.stride=d;k.divisor=f;k.normalized=h;k.type=p},pushDyn:function(a){if("number"===typeof a)this.pushVec(a,
0,0,0);else if(Array.isArray(a))this.pushVec(a[0],a[1],a[2],a[3]);else{var c=k.getBuffer(a),d=0,f=0,h=0,p=0,m=!1,l=5126;c?l=c.dtype:(c=k.getBuffer(a.buffer),d=a.size||0,f=a.stride||0,h=a.offset||0,p=a.divisor||0,m=a.normalized||!1,l=c.dtype,"type"in a&&(l=b[a.type]));this.pushPtr(c,d,h,f,p,m,l)}},pop:function(){--this.top}});return{bindings:m,bind:function(a,b,c,f){f=c.size||f;if(!b.equals(c,f)){if(c.pointer){b.pointer||d.enableVertexAttribArray(a);b.buffer!==c.buffer&&c.buffer.bind();d.vertexAttribPointer(a,
f,c.type,c.normalized,c.stride,c.offset);var h=p.angle_instanced_arrays;h&&h.vertexAttribDivisorANGLE(a,c.divisor)}else b.pointer&&d.disableVertexAttribArray(a),d.vertexAttrib4f(a,c.x,c.y,c.z,c.w);b.set(c,f)}},def:function(a){a=h.id(a);var b=e[a];b||(b=e[a]=new l);return b}}}},{"./constants/dtypes.json":8,"./extend":14}],3:[function(e,g,n){function a(a,b){switch(a){case 5121:return new Uint8Array(b);case 5123:return new Uint16Array(b);case 5125:return new Uint32Array(b);case 5120:return new Int8Array(b);
case 5122:return new Int16Array(b);case 5124:return new Int32Array(b);case 5126:return new Float32Array(b);default:return null}}var b=e("./is-typed-array"),c=e("./is-ndarray"),d=e("./constants/arraytypes.json"),p=e("./constants/dtypes.json"),f=e("./values"),k={"static":35044,dynamic:35048,stream:35040};g.exports=function(h){function l(a,b){this.id=m++;this.buffer=a;this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function e(a){h.isBuffer(a.buffer)||(a.buffer=
h.createBuffer());a.bind();h.bufferData(a.type,a.data||a.byteLength,a.usage)}function x(a){var b=a.buffer;h.isBuffer(b)&&h.deleteBuffer(b);a.buffer=null;delete r[a.id]}var m=0,r={};l.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)};return{create:function(f,m,g){function w(f){var h=f||{};if(Array.isArray(h)||b(h)||c(h))h={data:h};else if("number"===typeof h)h={length:h|0};else if(null===h||void 0===h)h={};u.usage="usage"in h?k[h.usage]:35044;f=0;"type"in h&&(f=p[h.type]);var m=h.dimension|
0||1,t=0,l=null;if("data"in h)if(l=h.data,null===l)t=h.length|0;else{if(c(l)){var m=l.shape,t=l.stride,h=l.offset,r=0,x=0,v=0,g=0;1===m.length?(r=m[0],x=1,v=t[0],g=0):2===m.length&&(r=m[0],x=m[1],v=t[0],g=t[1]);f=f||d[Object.prototype.toString.call(l)]|0||5126;for(var m=x,t=a(f,r*x),l=l.data,B=0,Y=0;Y<r;++Y)for(var I=0;I<x;++I)t[B++]=l[v*Y+g*I+h];l=t}else if(Array.isArray(l))if(0<l.length&&Array.isArray(l[0])){m=l[0].length;f=f||5126;h=a(f,l.length*m);t=l;l=m;for(r=g=0;r<t.length;++r)for(v=t[r],x=
0;x<l;++x)h[g++]=v[x];l=h}else f=f||5126,l=a(f,l);else f=f||d[Object.prototype.toString.call(l)]|0;t=l.byteLength}else"length"in h&&(t=h.length|0);u.data=l;u.dtype=f||5121;u.byteLength=t;u.dimension=m;e(u);return w}var z=h.createBuffer(),u=new l(z,m);r[u.id]=u;g||w(f);w._reglType="buffer";w._buffer=u;w.destroy=function(){x(u)};return w},clear:function(){f(r).forEach(x)},refresh:function(){f(r).forEach(e)},getBuffer:function(a){return a&&a._buffer instanceof l?a._buffer:null}}}},{"./constants/arraytypes.json":7,
"./constants/dtypes.json":8,"./is-ndarray":17,"./is-typed-array":18,"./values":32}],4:[function(e,g,n){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],5:[function(e,g,n){var a=e("./extend");g.exports=function(){function b(){var b=[],d=[];return a(function(){b.push.apply(b,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+c++;d.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,Array.prototype.slice.call(arguments)),
b.push(";"));return a},toString:function(){return[0<d.length?"var "+d+";":"",b.join("")].join("")}})}var c=0,d=[],p=[],f={};return{link:function(a){var b="g"+c++;d.push(b);p.push(a);return b},block:b,proc:function(d){var h=[],p=b(),e=p.toString;return f[d]=a(p,{arg:function(){var a="a"+c++;h.push(a);return a},toString:function(){return["function(",h.join(),"){",e(),"}"].join("")}})},compile:function(){var a=['"use strict";return {'];Object.keys(f).forEach(function(b){a.push('"',b,'":',f[b].toString(),
",")});a.push("}");return Function.apply(null,d.concat([a.join("")])).apply(null,p)}}}},{"./extend":14}],6:[function(e,g,n){function a(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function b(a,b,c,d){var f,h=",";switch(b){case 5126:f="1f";break;case 35664:f="2fv";break;case 35665:f="3fv";break;case 35666:f="4fv";break;case 35670:case 5124:f="1i";break;case 35671:case 35667:f="2iv";break;
case 35672:case 35668:f="3iv";break;case 35673:case 35669:f="4iv";break;case 35674:f="Matrix2fv";h=",false,";break;case 35675:f="Matrix3fv";h=",false,";break;case 35676:f="Matrix4fv",h=",false,"}return a+".uniform"+f+"("+c+h+d+");"}function c(a){return a+"["+a+".length-1]"}function d(a,b){return"framebuffer"===a||a<b?-1:a>b?1:0}var p=e("./codegen"),f=e("./constants/primitives.json"),k=e("./constants/dtypes.json"),h={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,
"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},l={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},V={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,
invert:5386};g.exports=function(e,m,r,t,g,B,w,z,u,n,C,A,O,S,R){function L(m,k,t,g,v){function w(a){var b=pa[a];return b?b:b=pa[a]=H(J[a])}function M(a){var b=a.id,c=T[b];if(c)return c;c=a.func?q.def(H(a.data),"(",R,",",P,",",ga,")"):q.def(R,".",a.data);return T[b]=c}function u(a,b){return a.find(function(a){return a.name===b})}function A(a){return ia&&!(a in k||a in v)}var L=p(),H=L.link,q=L.proc("batch"),K=L.block(),D=q.def,W=q.arg,F=H(e),U=H(m.program),aa=H(C.bind),ga=H(S),na=H(z),Q=H(O.count),
ba=H(O.offset),ra=H(O.instances),ha=H(O.primitive),pa={},ca=H(B.elements),Q=D(c(Q)),ba=D(c(ba)),ha=D(c(ha)),ca=D(c(ca)),E,N,ka=r.angle_instanced_arrays;ka&&(E=D(c(ra)),N=H(ka));var ia="elements"in k,ra=W(),W=W(),R=D(),P=D(),T={};q(F,".useProgram(",U,");");m.uniforms.forEach(function(a){if(!(a.name in t)){var c=H(a.location),d=H(n.def(a.name)),d=d+"["+d+".length-1]";a=a.info.type;35678===a||35680===a?(a=D(d+"._texture"),q(b(F,5124,c,a+".bind()")),K(a,".unbind();")):q(b(F,a,c,d))}});m.attributes.forEach(function(b){if(!(g.name in
g)){var c=H(C.def(b.name));q(aa,"(",b.location,",",H(C.bindings[b.location]),",",c,".records[",c,".top]",",",a(b.info.type),");")}});ia||q("if(",ca,"){",F,".bindBuffer(",34963,",",ca,".buffer.buffer);","}else{",F,".bindBuffer(",34963,",null);","}");q("for(",P,"=0;",P,"<",ra,";++",P,"){",R,"=",W,"[",P,"];");Object.keys(k).sort(d).forEach(function(a){function b(a){q("if(",c,"){",F,".enable(",a,");}else{",F,".disable(",a,");}")}var c=M(k[a]);switch(a){case "framebuffer":a=w("viewport");var d=w("scissor.box");
q("if(",na,".push(",c,"&&",c,"._framebuffer)){",na,".poll();",a,".setDirty();",d,".setDirty();","}");break;case "cull.enable":b(2884);break;case "blend.enable":b(3042);break;case "dither":b(3024);break;case "stencil.enable":b(2960);break;case "depth.enable":b(2929);break;case "scissor.enable":b(3089);break;case "polygonOffset.enable":b(32823);break;case "sample.alpha":b(32926);break;case "sample.enable":b(32928);break;case "depth.mask":q(F,".depthMask(",c,");");break;case "depth.func":a=H(l);q(F,
".depthFunc(",a,"[",c,"]);");break;case "depth.range":q(F,".depthRange(",c,"[0],",c,"[1]);");break;case "blend.color":q(F,".blendColor(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "blend.equation":a=H(y);q("if(typeof ",c,'==="string"){',F,".blendEquation(",a,"[",c,"]);","}else{",F,".blendEquationSeparate(",a,"[",c,".rgb],",a,"[",c,".alpha]);","}");break;case "blend.func":a=H(h);q(F,".blendFuncSeparate(",a,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",a,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",
a,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",a,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");break;case "stencil.mask":q(F,".stencilMask(",c,");");break;case "stencil.func":a=H(l);q(F,".stencilFunc(",a,"[",c,'.cmp||"always"],',c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":d=H(V);q(F,".stencilOpSeparate(","stencil.opFront"===a?1028:1029,",",d,"[",c,'.fail||"keep"],',d,"[",c,'.zfail||"keep"],',d,"[",c,'.pass||"keep"]);');break;case "polygonOffset.offset":q(F,
".polygonOffset(",c,".factor||0,",c,".units||0);");break;case "cull.face":q(F,".cullFace(",c,'==="front"?',1028,":",1029,");");break;case "lineWidth":q(F,".lineWidth(",c,");");break;case "frontFace":q(F,".frontFace(",c,'==="cw"?',2304,":",2305,");");break;case "colorMask":q(F,".colorMask(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "sample.coverage":q(F,".sampleCoverage(",c,".value,",c,".invert);");break;case "scissor.box":case "viewport":a=w(a),q(a,".push(",c,".x||0,",c,".y||0,",c,".w||-1,",
c,".h||-1);")}});("viewport"in k||"framebuffer"in k)&&q(w("viewport"),".poll();");("scissor.box"in k||"framebuffer"in k)&&q(w("scissor.box"),".poll();");"framebuffer"in k&&q(na,".pop();");var sa=m.uniforms,la=[];Object.keys(t).forEach(function(a){var c=u(sa,a);if(c){var d=c.info.type,f=H(c.location);a=M(t[a]);35678===c.info.type||35680===c.info.type?(c=D(a+"._texture"),la.push(c),q(b(F,5124,f,c+".bind()"))):q(b(F,d,f,a))}});la.forEach(function(a){q(a,".unbind();")});var ta=m.attributes;Object.keys(g).forEach(function(b){var c=
u(ta,b);c&&q(aa,"(",c.location,",",H(b.bindings[c.location]),",",M(g[b]),",",a(c.info.type),");")});k.count?q(Q,"=",M(k.count),";"):A("count")||q("if(",Q,"){");k.offset&&q(ba,"=",M(k.offset),";");k.primitive&&(m=H(f),q(ha,"=",m,"[",M(k.primitive),"];"));ia&&(m=M(k.elements),q(ca,"=",m,"?",m,"._elements:null;"));A("offset")&&q(ba,"=0;");q("if(",ca,"){");A("count")&&q(Q,"=",ca,".vertCount;","if(",Q,">0){");A("primitive")&&q(ha,"=",ca,".primType;");ia&&q(F,".bindBuffer(",34963,",",ca,".buffer.buffer);");
ka&&(k.instances&&q(E,"=",M(k.instances),";"),q("if(",E,">0){",N,".drawElementsInstancedANGLE(",ha,",",Q,",",ca,".type,",ba,",",E,");}else{"));q(F,".drawElements(",ha,",",Q,",",ca,".type,",ba,");");ka&&q("}");A("count")&&q("}");q("}else{");A("count")||(A("primitive")&&q(ha,"=",4,";"),ka&&q("if(",E,">0){",N,".drawArraysInstancedANGLE(",ha,",",ba,",",Q,",",E,");}else{"),q(F,".drawArrays(",ha,",",ba,",",Q,");}"),ka&&q("}"));q("}}",K);return L.compile().batch}var J=u.contextState,y={add:32774,subtract:32778,
"reverse subtract":32779};r.ext_blend_minmax&&(y.min=32775,y.max=32776);var M=0;return{draw:function(d){var f=p(),h=f.link,m=f.proc("draw"),k=m.def,t=h(e),l=h(d.program),V=h(C.bind),g=h(O.count),v=h(O.offset),y=h(O.instances),q=h(O.primitive),w=h(B.elements),z=[];m(t,".useProgram(",l,");");d.attributes.forEach(function(b){var c=h(C.def(b.name));m(V,"(",b.location,",",h(C.bindings[b.location]),",",c,".records[",c,".top]",",",a(b.info.type),");")});d.uniforms.forEach(function(a){var c=h(a.location),
d=h(n.def(a.name)),d=d+"["+d+".length-1]";a=a.info.type;35678===a||35680===a?(a=k(d+"._texture"),z.push(a),m(b(t,5124,c,a+".bind()"))):m(b(t,a,c,d))});z.forEach(function(a){m(a,".unbind();")});d=k(c(q));g=k(c(g));v=k(c(v));w=k(c(w));m("if(",g,"){");(l=r.angle_instanced_arrays)?(y=k(c(y)),l=h(l),m("if(",w,"){",w,".bind();","if(",y,">0){",l,".drawElementsInstancedANGLE(",d,",",g,",",w,".type,",v,",",y,");}else{",t,".drawElements(",d,",",g,",",w,".type,",v,");}","}else if(",y,">0){",l,".drawArraysInstancedANGLE(",
d,",",v,",",g,",",y,");}else{",t,".drawArrays(",d,",",v,",",g,");}}")):m("if(",w,"){",t,".drawElements(",d,",",g,",",w,".type,",v,");}","}else{",t,".drawArrays(",d,",",v,",",g,");}");return f.compile().draw},command:function(a,b,t,e,r,x,w){function u(a){var b=ca[a];return b?b:b=ca[a]=q(J[a])}function ja(a,b){var c=u(a);E(c,".push(",b,");");N(c,".pop();")}function ea(a){var b=a.id,c=ta[b];if(c)return c;c=a.func?P.def(q(a.data),"(",la,",0,",sa,")"):P.def(la,".",a.data);return ta[b]=c}var H=p(),q=H.link,
K=H.block,D=H.proc,W=M++,F=q(R);q(m);var U=q(A.fragShaders),aa=q(A.vertShaders),ga=q(A.programs),na=q(z),Q={count:q(O.count),offset:q(O.offset),instances:q(O.instances),primitive:q(O.primitive)},ba=q(B.elements),ra=q(f),ha=q(l),pa=q(V),ca={},E=K(),N=K(),ka=!1;Object.keys(a).sort(d).forEach(function(b){var c=a[b];switch(b){case "frag":ka=!0;E(U,".push(",q(m.id(c)),");");N(U,".pop();");break;case "vert":ka=!0;E(aa,".push(",q(m.id(c)),");");N(aa,".pop();");break;case "framebuffer":z.getFramebuffer(c);
b=u("viewport");var d=u("scissor.box");E("if(",na,".push(",q(c&&c._framebuffer),")){",b,".setDirty();",d,".setDirty();","}");N("if(",na,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":E(Q[b],".push(",c,");");N(Q[b],".pop();");break;case "primitive":E(Q.primitive,".push(",f[c],");");N(Q.primitive,".pop();");break;case "elements":d=B.getElements(c);c=!("primitive"in a);b=!("count"in a);d?(d=q(d),E(ba,".push(",d,");"),c&&E(Q.primitive,".push(",d,".primType);"),
b&&E(Q.count,".push(",d,".vertCount);")):(E(ba,".push(null);"),c&&E(Q.primitive,".push(",4,");"),b&&E(Q.count,".push(0);"));c&&N(Q.primitive,".pop();");b&&N(Q.count,".pop();");"offset"in a||(E(Q.offset,".push(0);"),N(Q.offset,".pop();"));N(ba,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":ja(b,c);break;case "depth.func":ja(b,
l[c]);break;case "depth.range":b=u(b);E(b,".push(",c[0],",",c[1],");");N(b,".pop();");break;case "blend.func":b=u(b);E(b,".push(",h["srcRGB"in c?c.srcRGB:c.src],",",h["dstRGB"in c?c.dstRGB:c.dst],",",h["srcAlpha"in c?c.srcAlpha:c.src],",",h["dstAlpha"in c?c.dstAlpha:c.dst],");");N(b,".pop();");break;case "blend.equation":b=u(b);"string"===typeof c?E(b,".push(",y[c],",",y[c],");"):"object"===typeof c&&E(b,".push(",y[c.rgb],",",y[c.alpha],");");N(b,".pop();");break;case "blend.color":b=u(b);E(b,".push(",
c[0],",",c[1],",",c[2],",",c[3],");");N(b,".pop();");break;case "stencil.mask":b=u(b);E(b,".push(",c,");");N(b,".pop();");break;case "stencil.func":var d=c.cmp||"keep",p=c.ref||0,c="mask"in c?c.mask:-1;b=u(b);E(b,".push(",l[d],",",p,",",c,");");N(b,".pop();");break;case "stencil.opFront":case "stencil.opBack":d=c.fail||"keep";p=c.zfail||"keep";c=c.pass||"keep";b=u(b);E(b,".push(",V[d],",",V[p],",",V[c],");");N(b,".pop();");break;case "polygonOffset.offset":d=c.factor||0;c=c.units||0;b=u(b);E(b,".push(",
d,",",c,");");N(b,".pop();");break;case "cull.face":d=0;"front"===c?d=1028:"back"===c&&(d=1029);c=u(b);E(c,".push(",d,");");N(c,".pop();");break;case "lineWidth":ja(b,c);break;case "frontFace":d=0;"cw"===c?d=2304:"ccw"===c&&(d=2305);c=u(b);E(c,".push(",d,");");N(c,".pop();");break;case "colorMask":b=u(b);E(b,".push(",c.map(function(a){return!!a}).join(),");");N(b,".pop();");break;case "sample.coverage":d="value"in c?c.value:1;c=!!c.invert;b=u(b);E(b,".push(",d,",",c,");");N(b,".pop();");break;case "viewport":case "scissor.box":var d=
c.x||0,p=c.y||0,k=-1,F=-1;"w"in c&&(k=c.w);"h"in c&&(F=c.h);c=u(b);E(c,".push(",d,",",p,",",k,",",F,");");N(c,".pop();")}});if(ka){if(a.frag&&a.vert)K=a.frag,E(ga,".push(",q(A.create(m.id(a.vert),m.id(K))),");");else{var K=E.def(U,"[",U,".length-1]"),ia=E.def(aa,"[",aa,".length-1]"),ua=q(A.create);E(ga,".push(",ua,"(",ia,",",K,"));")}N(ga,".pop();")}Object.keys(b).forEach(function(a){var c=q(n.def(a));a=b[a];a="function"===typeof a&&a._reglType?q(a):Array.isArray(a)?q(a.slice()):+a;E(c,".push(",a,
");");N(c,".pop();")});Object.keys(t).forEach(function(a){var b=q(C.def(a));a=t[a];if("number"===typeof a)E(b,".pushVec(",+a,",0,0,0);");else if(Array.isArray(a))E(b,".pushVec(",[a[0]||0,a[1]||0,a[2]||0,a[3]||0],");");else{var c=g.getBuffer(a),d=0,f=0,h=0,m=0,p=!1,F=5126;c?F=c.dtype:(c=g.getBuffer(a.buffer),d=a.size||0,f=a.stride||0,h=a.offset||0,m=a.divisor||0,p=a.normalized||!1,F=c.dtype,"type"in a&&(F=k[a.type]));E(b,".pushPtr(",[q(c),d,h,f,m,p,F].join(),");")}N(b,".pop();")});var P=H.block(),
T=H.block(),sa,la;w&&(sa=q(S),la=E.def());var ta={};Object.keys(e).sort(d).forEach(function(b){var c=ea(e[b]);switch(b){case "framebuffer":b=u("viewport");var d=u("scissor.box");P("if(",na,".push(",c,"&&",c,"._framebuffer)){",b,".setDirty();",d,".setDirty();","}");T("if(",na,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":b=
u(b);P(b,".push(",c,");");T(b,".pop();");break;case "count":case "offset":case "instances":b=Q[b];P(b,".push(",c,");");T(b,".pop();");break;case "primitive":b=Q.primitive;P(b,".push(",ra,"[",c,"]);");T(b,".pop();");break;case "depth.func":b=u(b);P(b,".push(",ha,"[",c,"]);");T(b,".pop();");break;case "blend.func":b=u(b);d=q(h);P(b,".push(",d,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",d,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",d,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",d,'["dstAlpha" in ',
c,"?",c,".dstAlpha:",c,".dst]);");T(b,".pop();");break;case "blend.equation":b=u(b);d=q(y);P("if(typeof ",c,'==="string"){',b,".push(",d,"[",c,"],",d,"[",c,"]);","}else{",b,".push(",d,"[",c,".rgb],",d,"[",c,".alpha]);","}");T(b,".pop();");break;case "blend.color":b=u(b);P(b,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");T(b,".pop();");break;case "stencil.mask":b=u(b);P(b,".push(",c,");");T(b,".pop();");break;case "stencil.func":b=u(b);P(b,".push(",ha,"[",c,".cmp],",c,".ref|0,",'"mask" in ',c,"?",
c,".mask:-1);");T(b,".pop();");break;case "stencil.opFront":case "stencil.opBack":b=u(b);P(b,".push(",pa,"[",c,'.fail||"keep"],',pa,"[",c,'.zfail||"keep"],',pa,"[",c,'.pass||"keep"]);');T(b,".pop();");break;case "polygonOffset.offset":b=u(b);P(b,".push(",c,".factor||0,",c,".units||0);");T(b,".pop();");break;case "cull.face":b=u(b);P(b,".push(",c,'==="front"?',1028,":",1029,");");T(b,".pop();");break;case "frontFace":b=u(b);P(b,".push(",c,'==="cw"?',2304,":",2305,");");T(b,".pop();");break;case "colorMask":b=
u(b);P(b,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");T(b,".pop();");break;case "sample.coverage":b=u(b);P(b,".push(",c,".value,",c,".invert);");T(b,".pop();");break;case "scissor.box":case "viewport":b=u(b);P(b,".push(",c,".x||0,",c,".y||0,",'"w" in ',c,"?",c,".w:-1,",'"h" in ',c,"?",c,".h:-1);");T(b,".pop();");break;case "elements":b=!("primitive"in e)&&!("primitive"in a);var d=!("count"in e)&&!("count"in a),f=!("offset"in e)&&!("offset"in a),m=P.def();P("if(",c,"){",m,"=",c,"._elements;",ba,
".push(",m,");",b?Q.primitive+".push("+m+".primType);":"",d?Q.count+".push("+m+".vertCount);":"",f?Q.offset+".push("+m+".offset);":"","}else{",ba,".push(null);","}");T(ba,".pop();","if(",c,"){",b?Q.primitive+".pop();":"",d?Q.count+".pop();":"",f?Q.offset+".pop();":"","}")}});Object.keys(r).forEach(function(a){var b=q(n.def(a));a=ea(r[a]);P(b,".push(",a,");");T(b,".pop();")});Object.keys(x).forEach(function(a){var b=q(C.def(a));a=ea(x[a]);P(b,".pushDyn(",a,");");T(b,".pop();")});K=D("scope");ia=K.arg();
ua=K.arg();K(E);w&&K(la,"=",ia,";",P);K(ua,"();",w?T:"",N);K=D("draw");K(E);w&&K(la,"=",K.arg(),";",P);ia=c(ga);K(F,"();","if(",ia,")",ia,".draw(",w?la:"",");",w?T:"",N);var oa=D("batch");oa(E);w=oa.def(c(ga));D=q(function(b,c,d){var f=b.batchCache[W];f||(f=b.batchCache[W]=L(b,e,r,x,a));return f(c,d)});oa("if(",w,"){",F,"();",D,"(",w,",",oa.arg(),",",oa.arg(),");");Object.keys(e).forEach(function(a){(a=ca[a])&&oa(a,".setDirty();")});oa("}",N);return H.compile()}}}},{"./codegen":5,"./constants/dtypes.json":8,
"./constants/primitives.json":9}],7:[function(e,g,n){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],8:[function(e,g,n){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],9:[function(e,g,n){g.exports={points:0,
lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],10:[function(e,g,n){function a(a,p){function f(){var b=window.innerWidth,f=window.innerHeight;a!==document.body&&(f=a.getBoundingClientRect(),b=f.right-f.left,f=f.top-f.bottom);k.width=l*b;k.height=l*f;c(k.style,{width:b+"px",height:f+"px"})}var k=document.createElement("canvas"),h=b(k,p);c(k.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(k);a===document.body&&(k.style.position="absolute",c(a.style,
{margin:0,padding:0}));var l=+h.options.pixelRatio;window.addEventListener("resize",f,!1);var e=h.options.onDestroy;h.options=c(c({},h.options),{onDestroy:function(){window.removeEventListener("resize",f);a.removeChild(k);e&&e()}});f();return h}function b(a,b){function f(b){try{return a.getContext(b,k)}catch(c){return null}}var k=b.glOptions||{};return{gl:f("webgl")||f("experimental-webgl")||f("webgl-experimental"),options:c({pixelRatio:window.devicePixelRatio},b)}}var c=e("./extend");g.exports=function(d){if("undefined"===
typeof document||"undefined"===typeof HTMLElement)return{gl:d[0],options:d[1]||{}};var p=document.body,f=d[1]||{};if("string"===typeof d[0])p=document.querySelector(d[0])||document.body;else if("object"===typeof d[0])if(d[0]instanceof HTMLElement)p=d[0];else{if(d[0]instanceof WebGLRenderingContext)return{gl:d[0],options:c({pixelRatio:1},f)};f=d[0]}return p.nodeName&&"CANVAS"===p.nodeName.toUpperCase()?b(p,f):a(p,f)}},{"./extend":14}],11:[function(e,g,n){g.exports=function(a){return{primitive:[4],
count:[0],offset:[0],instances:[0]}}},{}],12:[function(e,g,n){function a(a,b){this.id=c++;this.func=a;this.data=b}function b(c,p){switch(typeof c){case "boolean":case "number":case "string":return new a(!1,c);case "function":return new a(!0,c);default:return b}}var c=0;g.exports={define:b,isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(c,p){return c instanceof a?c:"function"===typeof c&&c!==b?new a(!0,c):new a(!1,p)}}},{}],13:[function(e,g,n){var a=
e("./is-typed-array"),b=e("./is-ndarray"),c=e("./constants/primitives.json");g.exports=function(d,p,f){function k(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}k.prototype.bind=function(){this.buffer.bind()};return{create:function(d){function l(d){var f=p.oes_element_index_uint;if(d)if("number"===typeof d)g(d);else{var h=null,k="static",B=0;Array.isArray(d)||a(d)||b(d)?h=d:("data"in d&&(h=d.data),"usage"in d&&(k=d.usage),"length"in d&&(B=d.length));Array.isArray(h)||b(h)&&"array"===
h.dtype||"type"in d?g({type:d.type||(f?"uint32":"uint16"),usage:k,data:h,length:B}):g({usage:k,data:h,length:B});if(Array.isArray(h)||a(h))g.dimension=3}else g();f=e.buffer.byteLength;h=0;switch(e.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;f>>=1;break;case 5125:case 5124:h=5125,f>>=2}k=4;B=e.buffer.dimension;1===B&&(k=0);2===B&&(k=1);3===B&&(k=4);"object"===typeof d&&("primitive"in d&&(k=c[d.primitive]),"count"in d&&(f=d.vertCount|0));e.primType=k;e.vertCount=f;e.type=
h;return l}var e=new k,g=f.create(null,34963,!0);e.buffer=g._buffer;l(d);l._reglType="elements";l._elements=e;l.destroy=function(){g.destroy();e.buffer=null};return l},elements:[null],getElements:function(a){return a&&a._elements instanceof k?a._elements:null}}}},{"./constants/primitives.json":9,"./is-ndarray":17,"./is-typed-array":18}],14:[function(e,g,n){g.exports=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a}},{}],15:[function(e,g,n){g.exports=function(a){function b(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(b){try{c[b]=
a.getExtension(b)}catch(p){}})}var c={};b();return{extensions:c,refresh:b}}},{}],16:[function(e,g,n){var a=e("./values"),b=e("./extend"),c=[1029];g.exports=function(d,p,f,k,h){function l(a,b,c,d){this.target=a;this.level=b;this.texture=c;this.renderbuffer=d}function e(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function g(a,b){var c=b.width,d=b.height;if(a.texture)var f=a.texture._texture,h=Math.max(1,f.params.width>>a.level),k=Math.max(1,f.params.height>>
a.level),c=c||h,d=d||k;else f=a.renderbuffer._renderbuffer,c=c||f.width,d=d||f.height;f.refCount+=1;b.width=c;b.height=d}function m(a,b){b?b.texture?d.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,b.level):d.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer):d.framebufferTexture2D(36160,a,3553,null,0)}function r(a){var b=3553,c=0,d=null,f=null;"object"===typeof a&&("level"in a&&(c=a.level|0),"target"in a&&(b=a.target|0));var h=a._reglType;"texture"===
h?d=a:"renderbuffer"===h&&(f=a,b=36161,c=0);return new l(b,c,d,f)}function t(a){return a&&(a.texture||a.renderbuffer)}function v(){this.id=S++;R[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function B(a){d.isFramebuffer(a.framebuffer)||(a.framebuffer=d.createFramebuffer());J=!0;d.bindFramebuffer(36160,a.framebuffer);for(var b=a.colorAttachments,
c=0;c<b.length;++c)m(36064+c,b[c]);for(c=b.length;c<f.maxColorAttachments;++c)m(36064+c,null);m(36096,a.depthAttachment);m(36128,a.stencilAttachment);m(33306,a.depthStencilAttachment);p.webgl_draw_buffers&&p.webgl_draw_buffers.drawBuffersWEBGL(O[b.length]);d.checkFramebufferStatus(36160)}function w(a){a=a.framebuffer;d.isFramebuffer(a)&&d.deleteFramebuffer(a)}function z(){return L[L.length-1]}var u={rgba:6408},n={rgba4:32854,rgb565:36194,"rgb5 a1":32855};p.ext_srgb&&(n.srgba=35907);p.ext_color_buffer_half_float&&
(n.rgba16f=34842,n.rgb16f=34843);p.webgl_color_buffer_float&&(n.rgba32f=34836);var C=[],A=[];p.webgl_depth_texture&&(C.push(6402),A.push(34041));b(b({},u),n);a(u);a(n);n=5121;C={uint8:5121};p.oes_texture_half_float&&(n=C["half float"]=36193);p.oes_texture_float&&(n=C["float"]=5126);C.best=n;var O=function(){for(var a=Array(f.maxDrawbuffers),b=0;b<=f.maxDrawbuffers;++b)for(var c=a[b]=Array(b),d=0;d<b;++d)c[d]=36064+d;return a}(),S=0,R={},L=[null],J=!0;return{top:z,dirty:function(){return J},push:function(a){a=
a||null;J=J||a!==z();L.push(a);return J},pop:function(){var a=z();L.pop();return J=J||a!==z()},getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof v)?a:null},poll:function(){if(J){var a=L[L.length-1],b=p.webgl_draw_buffers;a?(d.bindFramebuffer(36160,a.framebuffer),b&&b.drawBuffersWEBGL(O[a.colorAttachments.length])):(d.bindFramebuffer(36160,null),b&&b.drawBuffersWEBGL(c));J=!1}},create:function(a){function b(a){var f,p=a||{},m=a=0;if("shape"in
p){var w=p.shape;a=w[0];m=w[1]}else"radius"in p&&(a=m=p.radius),"width"in p&&(a=p.width),"height"in p&&(m=p.height);var v=null,w=!1;if("colorBuffers"in p||"colorBuffer"in p){v=p.colorBuffers||p.colorBuffer;Array.isArray(v)||(v=[v]);c.width=a;c.height=m;v=v.map(r);for(f=0;f<v.length;++f)g(v[f],c);a=c.width;m=c.height}else{var z=!0,n="rgba",C="uint8",A=1,w=!0;c.width=a||d.drawingBufferWidth;c.height=m||d.drawingBufferHeight;"format"in p&&(n=p.format,z=n in u);"type"in p&&(C=p.type);"colorCount"in p&&
(A=p.colorCount|0);if(c.ownsColor)for(v=c.colorAttachments;v.length>A;)e(v.pop());else v=[];for(f=0;f<v.length;++f){var q;a:{q=v[f];var y=z,D=n,G=a,F=m;if(q.texture){var U=q.texture;if(y){U({format:D,type:C,width:G,height:F});U._texture.refCount+=1;q=!0;break a}}else if(U=q.renderbuffer,!y){U({format:D,width:G,height:F});U._renderbuffer.refCount+=1;q=!0;break a}e(q);q=!1}q||(v[f--]=v[v.length-1],v.pop())}for(;v.length<A;)z?v.push(new l(3553,0,k.create({format:n,type:C,width:a,height:m},3553),null)):
v.push(new l(36161,0,null,h.create({format:n,width:a,height:m})))}c.width=a;c.height=m;n=z=f=null;C=!1;"depthBuffer"in p&&(f=r(p.depthBuffer));"stencilBuffer"in p&&(z=r(p.stencilBuffer));"depthStencilBuffer"in p&&(n=r(p.depthStencilBuffer));if(f||z||n)g(f||z||n,c);else if(A=!0,y=q=!1,"depth"in p&&(A=!!p.depth),"stencil"in p&&(q=!!p.stencil),"depthTexture"in p&&(y=!!p.depthTexture),p=c.depthAttachment||c.stencilAttachment||c.depthStencilAttachment,D=null,A||q)C=!0,y?(y=q?"depth stencil":"depth",c.ownsDepthStencil&&
p.texture?(p.texture({format:y,width:a,height:m}),p.texture._texture.refCount+=1,D=p):D=new l(3553,0,k.create({format:y,width:a,height:m},3553),null)):(y=A?q?"depth stencil":"depth":"stencil",c.ownsDepthStencil&&p.renderbuffer?(p.renderbuffer({format:y,width:a,height:m}),p.renderbuffer._renderbuffer.refCount+=1,D=p):D=new l(36161,0,null,h.create({format:y,width:a,height:m}))),A?q?n=D:f=D:z=D;a=c;a.colorAttachments.forEach(e);e(a.depthAttachment);e(a.stencilAttachment);e(a.depthStencilAttachment);
c.colorAttachments=v;c.depthAttachment=f;c.stencilAttachment=z;c.depthStencilAttachment=n;c.ownsColor=w;c.ownsDepthStencil=C;b.color=v.map(t);b.depth=t(f);b.stencil=t(z);b.depthStencil=t(n);B(c);b.width=c.width;b.height=c.height;return b}var c=new v;b(a);b._reglType="framebuffer";b._framebuffer=c;b._destroy=function(){w(c)};return b},clear:function(){a(R).forEach(w)},refresh:function(){a(R).forEach(B)}}}},{"./extend":14,"./values":32}],17:[function(e,g,n){var a=e("./is-typed-array");g.exports=function(b){return"object"===
typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":18}],18:[function(e,g,n){var a=e("./constants/arraytypes.json");g.exports=function(b){return Object.prototype.toString.call(b)in a}},{"./constants/arraytypes.json":7}],19:[function(e,g,n){g.exports=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var d=1,p=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),
p=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:p,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),
maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],20:[function(e,g,n){g.exports=function(a,b){if("undefined"!==typeof document){var c;
c=(c=/\.(\w+)(\?.*)?$/.exec(a))&&c[1]?c[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(c))return c=document.createElement("video"),c.autoplay=!0,c.loop=!0,b&&(c.crossOrigin=b),c.src=a,c;if(0<=["dds"].indexOf(c))return c=new XMLHttpRequest,c.responseType="arraybuffer",c.open("GET",a,!0),c.send(),c;c=new Image;b&&(c.crossOrigin=b);c.src=a;return c}return null}},{}],21:[function(e,g,n){g.exports=function(e){function g(a){for(var b=
y,c=M,d=0;d<X;++d){var f=Math.max(1,b+3>>2)*Math.max(1,c+3>>2)*fa;ma.pixels.push({target:a,miplevel:d,width:b,height:c,data:new Uint8Array(e,da,f)});da+=f;b>>=1;c>>=1}}var n=new Int32Array(e),J=n[w],y=n[u],M=n[z],Y=h,I=0,fa=0,Z=4;switch(n[A]){case m:fa=8;J&x?(Z=3,I=c):I=d;break;case r:fa=16;I=p;break;case t:fa=16;I=f;break;case v:fa=8,I=k}var X=1;n[C]&l&&(X=Math.max(1,n[G]));var da=n[B]+4,ma={width:y,height:M,channels:Z,format:I,type:Y,compressed:!0,cube:!1,pixels:[]};if(n[O]&V)for(ma.cube=!0,n=0;6>
n;++n)g(b+n);else g(a);return ma};var a=3553,b=34069,c=33776,d=33777,p=33778,f=33779,k=36196,h=5121,l=131072,V=512,x=64,m=827611204,r=861165636,t=894720068,v=826496069,B=1,w=2,z=3,u=4,G=7,C=20,A=21,O=28},{}],22:[function(e,g,n){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],23:[function(e,
g,n){var a=e("./is-typed-array");g.exports=function(b,c,d){return function(p){var f=p||{};a(p)?f={data:f}:2===arguments.length?f={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof p&&(f={});c();var k=f.x||0,h=f.y||0,l=f.width||d.width,e=f.height||d.height,f=f.data||new Uint8Array(l*e*4);b.pixelStorei(3333,4);b.readPixels(k,h,l,e,6408,5121,f);return f}}},{"./is-typed-array":18}],24:[function(e,g,n){var a=e("./values");g.exports=function(b,c,d){function p(){this.id=l++;this.refCount=1;this.renderbuffer=
null;this.format=32854;this.height=this.width=0}function f(a){b.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=b.createRenderbuffer());b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)}function k(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.isRenderbuffer(c)&&b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete e[a.id]}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(h.srgba=
35907);c.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);c.webgl_color_buffer_float&&(h.rgba32f=34836);var l=0,e={};p.prototype.decRef=function(){0===--this.refCount&&k(this)};return{create:function(a){function b(a){a=a||{};var d=0,p=0;"shape"in a?(p=a.shape,d=p[0]|0,p=p[1]|0):("radius"in a&&(d=p=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(p=a.height|0));b.width=c.width=Math.max(d,1);b.height=c.height=Math.max(p,1);c.format=32854;"format"in a&&(c.format=h[a.format]);f(c);return b}
var c=new p;e[c.id]=c;b(a);b._reglType="renderbuffer";b._renderbuffer=c;b.destroy=function(){c.decRef()};return b},refresh:function(){a(e).forEach(f)},clear:function(){a(e).forEach(k)}}}},{"./values":32}],25:[function(e,g,n){function a(a,b,p){this.name=a;this.location=b;this.info=p}var b=e("./values");g.exports=function(c,d,p,f,k){function h(a,b){var d=35632===a?g:m,f=d[b];if(!f){var p=k.str(b),f=c.createShader(a);c.shaderSource(f,p);c.compileShader(f);d[b]=f}return f}function l(a,b){this.fragId=
a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function e(b){var k,m;k=h(35632,b.fragId);m=h(35633,b.vertId);var l=b.program=c.createProgram();c.attachShader(l,k);c.attachShader(l,m);c.linkProgram(l);var t=c.getProgramParameter(l,35718),g=b.uniforms=[];for(k=0;k<t;++k)if(m=c.getActiveUniform(l,k))if(1<m.size)for(var r=0;r<m.size;++r){var V=m.name.replace("[0]","["+r+"]");p.def(V);g.push(new a(V,c.getUniformLocation(l,V),m))}else p.def(m.name),
g.push(new a(m.name,c.getUniformLocation(l,m.name),m));t=c.getProgramParameter(l,35721);g=b.attributes=[];for(k=0;k<t;++k)if(m=c.getActiveAttrib(l,k))d.def(m.name),g.push(new a(m.name,c.getAttribLocation(l,m.name),m));b.draw=f(b);b.batchCache={}}var g={},m={},r={},t=[];return{create:function(a,b){var c=r[b];c||(c=r[b]={});var d=c[a];d||(d=new l(b,a),e(d),c[a]=d,t.push(d));return d},clear:function(){var a=c.deleteShader.bind(c);b(g).forEach(a);g={};b(m).forEach(a);m={};t.forEach(function(a){c.deleteProgram(a.program)});
t.length=0;r={}},refresh:function(){g={};m={};t.forEach(e)},programs:[null],fragShaders:[k.id("void main(){gl_FragColor=vec4(0,0,0,0);}")],vertShaders:[k.id("void main(){gl_Position=vec4(0,0,0,0);}")]}}},{"./values":32}],26:[function(e,g,n){g.exports=function(a,b){var c=a.length,d=a.slice(),p=a.slice(),f=!1,k=!0;return{push:function(){f=!1;for(var a=0;a<c;++a){var b=arguments[a];f=f||b!==p[a];d.push(b)}},pop:function(){f=!1;d.length-=c;for(var a=0;a<c;++a)f=f||d[d.length-c+a]!==p[a]},poll:function(){var a=
d.length-c;if(f||k){switch(c){case 1:b(d[a]);break;case 2:b(d[a],d[a+1]);break;case 3:b(d[a],d[a+1],d[a+2]);break;case 4:b(d[a],d[a+1],d[a+2],d[a+3]);break;case 5:b(d[a],d[a+1],d[a+2],d[a+3],d[a+4]);break;case 6:b(d[a],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]);break;default:b.apply(null,d.slice(a,d.length))}for(var l=0;l<c;++l)p[l]=d[a+l];k=f=!1}},setDirty:function(){k=!0}}}},{}],27:[function(e,g,n){var a=e("./stack"),b=e("./codegen");g.exports=function(c,d,p){function f(b,d){var f=a([!!d],function(a){a?
c.enable(b):c.disable(b)});f.flag=b;return f}var k={dither:f(3024),"blend.enable":f(3042),"blend.color":a([0,0,0,0],function(a,b,d,f){c.blendColor(a,b,d,f)}),"blend.equation":a([32774,32774],function(a,b){c.blendEquationSeparate(a,b)}),"blend.func":a([1,0,1,0],function(a,b,d,f){c.blendFuncSeparate(a,b,d,f)}),"depth.enable":f(2929,!0),"depth.func":a([513],function(a){c.depthFunc(a)}),"depth.range":a([0,1],function(a,b){c.depthRange(a,b)}),"depth.mask":a([!0],function(a){c.depthMask(a)}),"cull.enable":f(2884),
"cull.face":a([1029],function(a){c.cullFace(a)}),frontFace:a([2305],function(a){c.frontFace(a)}),colorMask:a([!0,!0,!0,!0],function(a,b,d,f){c.colorMask(a,b,d,f)}),lineWidth:a([1],function(a){c.lineWidth(a)}),"polygonOffset.enable":f(32823),"polygonOffset.offset":a([0,0],function(a,b){c.polygonOffset(a,b)}),"sample.alpha":f(32926),"sample.enable":f(32928),"sample.coverage":a([1,!1],function(a,b){c.sampleCoverage(a,b)}),"stencil.enable":f(2960),"stencil.mask":a([-1],function(a){c.stencilMask(a)}),
"stencil.func":a([519,0,-1],function(a,b,d){c.stencilFunc(a,b,d)}),"stencil.opFront":a([7680,7680,7680],function(a,b,d){c.stencilOpSeparate(1028,a,b,d)}),"stencil.opBack":a([7680,7680,7680],function(a,b,d){c.stencilOpSeparate(1029,a,b,d)}),"scissor.enable":f(3089),"scissor.box":a([0,0,-1,-1],function(a,b,f,p){var k=f,h=d.top();0>f&&(k=h?h.width-a:c.drawingBufferWidth-a);f=p;0>p&&(f=h?h.height-b:c.drawingBufferHeight-b);c.scissor(a,b,k,f)}),viewport:a([0,0,-1,-1],function(a,b,f,k){var h=f,l=d.top();
0>f&&(h=l?l.width-a:c.drawingBufferWidth-a);f=k;0>k&&(f=l?l.height-b:c.drawingBufferHeight-b);c.viewport(a,b,h,f);p.width=h;p.height=f})},h=b(),l=h.proc("poll"),e=h.proc("refresh");Object.keys(k).forEach(function(a){a=h.link(k[a]);l(a,".poll();");e(a,".setDirty();")});var g=h.compile();return{contextState:k,viewport:p,poll:g.poll,refresh:g.refresh,notifyViewportChanged:function(){k.viewport.setDirty();k["scissor.box"].setDirty()}}}},{"./codegen":5,"./stack":26}],28:[function(e,g,n){g.exports=function(){var a=
{},b=[""];return{id:function(c){var d=a[c];if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}},{}],29:[function(e,g,n){function a(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){if(!Array.isArray(a))return!1;var b=a.length;if(0===b||!Array.isArray(a[0]))return!1;for(var c=a[0].length,d=1;d<b;++d)if(!Array.isArray(a[d])||a[d].length!==c)return!1;return!0}function c(a){return Object.prototype.toString.call(a)}function d(a){return"[object HTMLCanvasElement]"===
c(a)}function p(a){return"[object CanvasRenderingContext2D]"===c(a)}var f=e("./extend"),k=e("./values"),h=e("./is-typed-array"),l=e("./is-ndarray"),V=e("./load-texture"),x=e("./to-half-float"),m=e("./parse-dds"),r=[9984,9986,9985,9987];g.exports=function(e,g,n,w,z){function u(a){this.target=a;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=
this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function G(a){this.target=a;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function C(a,b){var c,d,f=0,p=0,k=0,h=0,e=0,l=0,g=!1,m=!1,q=!1;for(c=0;c<b.length;++c)d=b[c],h=h||d.width<<d.miplevel,
e=e||d.height<<d.miplevel,f=f||d.type,p=p||d.format,k=k||d.internalformat,l=l||d.channels,g=g||d.needsPoll,m=m||d.needsListeners,d=d.miplevel,q=q||0<d;a.needsPoll=g;a.needsListeners=m;a.width=h;a.height=e;a.format=p;a.internalformat=k;a.type=f;if(3553!==a.target)for(c=0;6>c;++c);c=0<=r.indexOf(a.minFilter);a.genMipmaps=!q&&(a.genMipmaps||c);q=q||a.genMipmaps;a.minFilter||(a.minFilter=q?9987:9728);a.wrapS=a.wrapS||33071;a.wrapT=a.wrapT||33071;for(c=0;c<b.length;++c)d=b[c],d.channels||(d.channels=l),
d.format||(d.format=p),d.internalformat||(d.internalformat=k),d.type||(d.type=f)}function A(a){this.id=H++;this.refCount=1;this.target=a;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new G(a);this.pixels=[]}function O(a,b){function c(a,d){var f=d.mipmap,k;if(Array.isArray(f))for(var h=0;h<f.length;++h)k=new u(a),k.parseFlags(b),k.parseFlags(d),k.parse(f[h],h),p.push(k);else k=new u(a),k.parseFlags(b),k.parse(d,0),p.push(k)}var d;L(a);var f=a.params;
G.call(f,a.target);var p=a.pixels;p.length=0;f.parse(b);if(3553===a.target)c(3553,b);else{var k=b.faces||b;if(Array.isArray(k))for(d=0;6>d;++d)c(34069+d,k[d]);else if("string"!==typeof k)for(d=0;6>d;++d)c(34069+d,{})}C(f,p);f.needsListeners&&R(a);f.needsPoll&&(a.pollId=K.length,K.push(a));S(a)}function S(a){e.isTexture(a.texture)||(a.texture=e.createTexture());var b=a.target,c=a.unit;0<=c?(e.activeTexture(33984+c),ea=c):e.bindTexture(b,a.texture);for(var b=a.pixels,d=a.params,f=0;f<b.length;++f)b[f].upload(d);
d.upload();0>c&&((c=W[ea])?e.bindTexture(c.target,c.texture):(a.unit=ea,W[ea]=a))}function R(a){function b(a,c,d){var p=m(d);p.pixels.forEach(function(b){var d=new u(p.cube?b.target:a);d.channels=p.channels;d.compressed=p.compressed;d.type=p.type;d.internalformat=p.format;d.format=ja[p.format];d.width=b.width;d.height=b.height;d.miplevel=b.miplevel||c;d.data=b.data;f.push(d)})}function c(){for(var p=0;p<f.length;++p){var k=f[p],h=k.image,e=k.video,l=k.xhr;h&&h.complete?(k.width=h.naturalWidth,k.height=
h.naturalHeight):e&&2<e.readyState?(k.width=e.width,k.height=e.height):l&&4===l.readyState&&(f[p]=f[f.length-1],f.pop(),l.removeEventListener("readystatechange",S),b(k.target,k.miplevel,l.response))}C(d,f);S(a)}var d=a.params,f=a.pixels;f.forEach(function(a){a.image&&!a.image.complete?a.image.addEventListener("load",c):a.video&&1>a.readyState?a.video.addEventListener("progress",c):a.xhr&&a.xhr.addEventListener("readystatechange",c)});a.cancelPending=function(){f.forEach(function(a){a.image?a.image.removeEventListener("load",
c):a.video?a.video.removeEventListener("progress",c):a.xhr&&(a.xhr.removeEventListener("readystatechange",c),a.xhr.abort())})}}function L(a){var b=a.cancelPending;b&&(b(),a.cancelPending=null);b=a.pollId;0<=b&&((K[b]=K[K.length-1]).id=b,K.pop(),a.pollId=-1)}function J(a){var b=a.texture,c=a.unit,d=a.target;0<=c&&(e.activeTexture(33984+c),ea=c,e.bindTexture(d,null),W[c]=null);L(a);e.isTexture(b)&&e.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete q[a.id]}var y={"don't care":4352,
"dont care":4352,nice:4354,fast:4353},M={repeat:10497,clamp:33071,mirror:33648},Y={nearest:9728,linear:9729},I=f({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},Y),fa={none:0,browser:37444},Z={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},da={};g.ext_srgb&&(X.srgb=35904,X.srgba=35906);g.oes_texture_float&&
(Z["float"]=5126);g.oes_texture_half_float&&(Z["half float"]=36193);g.webgl_depth_texture&&(f(X,{depth:6402,"depth stencil":34041}),f(Z,{uint16:5123,uint32:5125,"depth stencil":34042}));g.webgl_compressed_texture_s3tc&&f(da,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});g.webgl_compressed_texture_atc&&f(da,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});g.webgl_compressed_texture_pvrtc&&f(da,{"rgb pvrtc 4bppv1":35840,
"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});g.webgl_compressed_texture_etc1&&(da["rgb etc1"]=36196);var ma=Array.prototype.slice.call(e.getParameter(34467));Object.keys(da).forEach(function(a){var b=da[a];0<=ma.indexOf(b)&&(X[a]=b)});var qa=Object.keys(X);n.textureFormats=qa;var ja=qa.reduce(function(a,b){var c=X[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{});f(u.prototype,{parseFlags:function(a){if("object"===
typeof a&&a){"premultiplyAlpha"in a&&(this.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(this.flipY=a.flipY);"alignment"in a&&(this.unpackAlignment=a.alignment);"colorSpace"in a&&(this.colorSpace=fa[a.colorSpace]);if("format"in a){var b=a.format;this.internalformat=X[b];b in Z&&(this.type=Z[b]);b in da&&(this.compressed=!0)}"type"in a&&(this.type=Z[a.type]);var b=this.width,c=this.height,d=this.channels;"shape"in a?(b=a.shape[0],c=a.shape[1],3===a.shape.length&&(d=a.shape[2])):("radius"in a&&
(b=c=a.radius),"width"in a&&(b=a.width),"height"in a&&(c=a.height),"channels"in a&&(d=a.channels));this.width=b|0;this.height=c|0;this.channels=d|0;"stride"in a?(b=a.stride,this.strideX=b[0],this.strideY=b[1],this.strideC=3===b.length?b[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*b);"offset"in a&&(this.offset=a.offset|0,this.needsTranspose=!0);"crossOrigin"in a&&(this.crossOrigin=a.crossOrigin)}},parse:function(f,k){this.miplevel=k;this.width>>=
k;this.height>>=k;var e=f;switch(typeof f){case "object":if(!f)return;this.parseFlags(f);var g=f.data;if("string"===typeof g||g&&(h(g)||a(g)||l(g)||d(g)||p(g)||"[object HTMLImageElement]"===c(g)||"[object HTMLVideoElement]"===c(g)||b(g)))e=f.data;break;case "undefined":return}"string"===typeof e&&(e=V(e,this.crossOrigin));var g=null,m=!1;if(null!==e)if(h(e))this.data=e;else if(a(e))g=e,m=!0;else if(l(e)){Array.isArray(e.data)?(g=e.data,m=!0):this.data=e.data;var q=e.shape;this.width=q[0];this.height=
q[1];this.channels=3===q.length?q[2]:1;q=e.stride;this.strideX=e.stride[0];this.strideY=e.stride[1];this.strideC=3===q.length?e.stride[2]:1;this.offset=e.offset;this.needsTranspose=!0}else if(d(e)||p(e))d(e)?this.canvas=e:this.canvas=e.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===c(e))this.image=e,e.complete?(this.width=e.naturalWidth,this.height=e.naturalHeight):(this.width=this.width||e.naturalWidth,this.height=
this.height||e.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();else if("[object HTMLVideoElement]"===c(e))this.video=e,1<e.readyState?(this.width=e.width,this.height=e.height):(this.width=this.width||e.width,this.height=this.height||e.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===c(e))this.xhr=e,this.needsListeners=!0;else if(b(e)){var m=e.length,q=e[0].length,n=1,r,t,u,v;if(Array.isArray(e[0][0]))for(n=e[0][0].length,g=
Array(m*q*n),t=v=0;t<q;++t)for(r=0;r<m;++r)for(u=0;u<n;++u)g[v++]=e[r][t][u];else for(g=Array(m*q),t=v=0;t<q;++t)for(r=0;r<m;++r)g[v++]=e[r][t];this.width=m;this.height=q;this.channels=n;m=!0}else f.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||z.width)|0,this.height=(this.height||z.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&
(this.type=5126));this.internalformat||(this.internalformat=[6409,6410,6407,6408][(this.channels=this.channels||4)-1]);e=this.internalformat;q=this.format=ja[e];if(!this.channels)switch(q){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}q=this.type;5126!==q&&36193!==q&&(q||(q=6402===e?5125:5121));this.type=q;if(m)switch(q){case 5121:this.data=new Uint8Array(g);break;case 5123:this.data=new Uint16Array(g);
break;case 5125:this.data=new Uint32Array(g);break;case 5126:this.data=new Float32Array(g);break;case 36193:this.data=x(g)}if(this.data&&this.needsTranspose){g=this.data;e=this.width;m=this.height;q=this.channels;n=this.strideX;r=this.strideY;t=this.strideC;u=this.offset;v=new g.constructor(e*m*q);for(var w=0,y=0;y<m;++y)for(var A=0;A<e;++A)for(var C=0;C<q;++C)v[w++]=g[r*y+n*A+t*C+u];this.data=v}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;
this.channels=4;this.compressed=!1},upload:function(a){e.pixelStorei(37440,this.flipY);e.pixelStorei(37441,this.premultiplyAlpha);e.pixelStorei(37443,this.colorSpace);e.pixelStorei(3317,this.unpackAlignment);var b=this.target,c=this.miplevel,d=this.image,f=this.canvas,p=this.video,k=this.data,h=this.internalformat,l=this.format,g=this.type,m=this.width||Math.max(1,a.width>>c);a=this.height||Math.max(1,a.height>>c);p&&2<p.readyState?e.texImage2D(b,c,l,l,g,p):d&&d.complete?e.texImage2D(b,c,l,l,g,d):
f?e.texImage2D(b,c,l,l,g,f):this.compressed?e.compressedTexImage2D(b,c,h,m,a,0,k):this.copy?(w(),e.copyTexImage2D(b,c,l,this.x,this.y,m,a,0)):k?e.texImage2D(b,c,l,m,a,0,l,g,k):e.texImage2D(b,c,l,m||1,a||1,0,l,g,null)}});f(G.prototype,{parse:function(a){if("object"===typeof a&&a){"min"in a&&(this.minFilter=I[a.min]);"mag"in a&&(this.magFilter=Y[a.mag]);var b=this.wrapS,c=this.wrapT;if("wrap"in a){var d=a.wrap;"string"===typeof d?b=c=M[d]:Array.isArray(d)&&(b=M[d[0]],c=M[d[1]])}else"wrapS"in a&&(b=
M[a.wrapS]),"wrapT"in a&&(c=M[a.wrapT]);this.wrapS=b;this.wrapT=c;"anisotropic"in a&&(this.anisotropic=a.anisotropic);if("mipmap"in a)switch(a=a.mipmap,typeof a){case "string":this.mipmapHint=y[a];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!a}}},upload:function(){var a=this.target;e.texParameteri(a,10241,this.minFilter);e.texParameteri(a,10240,this.magFilter);e.texParameteri(a,10242,this.wrapS);e.texParameteri(a,10243,this.wrapT);g.ext_texture_filter_anisotropic&&e.texParameteri(a,34046,
this.anisotropic);this.genMipmaps&&(e.hint(33170,this.mipmapHint),e.generateMipmap(a))}});var ea=0,H=0,q={},K=[],D=n.maxTextureUnits,W=Array(D).map(function(){return null});f(A.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<D;++b){var c=W[b];if(c){if(0<c.bindCount)continue;c.unit=-1}W[b]=this;a=b;break}this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture);ea=a}return a},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&
J(this)}});return{create:function(a,b){function c(a,f,p,e,k,h){var l=a||{};34067===b&&6===arguments.length&&(l=[a,f,p,e,k,h]);O(d,l);c.width=d.params.width;c.height=d.params.height;return c}var d=new A(b);q[d.id]=d;c(a);c._reglType="texture";c._texture=d;c.destroy=function(){d.decRef()};return c},refresh:function(){k(q).forEach(S);for(var a=0;a<D;++a)W[a]=null;ea=0;e.activeTexture(33984)},clear:function(){for(var a=0;a<D;++a)e.activeTexture(33984+a),e.bindTexture(3553,null),W[a]=null;e.activeTexture(33984);
ea=0;k(q).forEach(J)},poll:function(){K.forEach(S)},getTexture:function(a){return null}}}},{"./extend":14,"./is-ndarray":17,"./is-typed-array":18,"./load-texture":20,"./parse-dds":21,"./to-half-float":30,"./values":32}],30:[function(e,g,n){g.exports=function(a){for(var b=new Float32Array(a),b=new Uint32Array(b.buffer),c=new Uint16Array(a.length),d=0;d<a.length;++d)if(isNaN(a[d]))c[d]=65535;else if(Infinity===a[d])c[d]=31744;else if(-Infinity===a[d])c[d]=64512;else{var p=b[d],f=p>>>31<<15,e=(p<<1>>>
24)-127,p=p>>13&1023;c[d]=-24>e?f:-14>e?f+(p+1024>>-14-e):15<e?f+31744:f+(e+15<<10)+p}return c}},{}],31:[function(e,g,n){g.exports=function(a){var b={};return{def:function(c){c=a.id(c);var d=b[c];d||(d=b[c]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]);return d}}}},{}],32:[function(e,g,n){g.exports=function(a){return Object.keys(a).map(function(b){return a[b]})}},{}],33:[function(e,g,n){g.exports=function(a,b){var c=b[0],d=b[1],p=b[2],f=b[3],e=b[4],h=b[5],l=b[6],g=b[7],n=b[8],m=b[9],r=b[10],t=b[11],v=b[12],
B=b[13],w=b[14],z=b[15];a[0]=h*(r*z-t*w)-m*(l*z-g*w)+B*(l*t-g*r);a[1]=-(d*(r*z-t*w)-m*(p*z-f*w)+B*(p*t-f*r));a[2]=d*(l*z-g*w)-h*(p*z-f*w)+B*(p*g-f*l);a[3]=-(d*(l*t-g*r)-h*(p*t-f*r)+m*(p*g-f*l));a[4]=-(e*(r*z-t*w)-n*(l*z-g*w)+v*(l*t-g*r));a[5]=c*(r*z-t*w)-n*(p*z-f*w)+v*(p*t-f*r);a[6]=-(c*(l*z-g*w)-e*(p*z-f*w)+v*(p*g-f*l));a[7]=c*(l*t-g*r)-e*(p*t-f*r)+n*(p*g-f*l);a[8]=e*(m*z-t*B)-n*(h*z-g*B)+v*(h*t-g*m);a[9]=-(c*(m*z-t*B)-n*(d*z-f*B)+v*(d*t-f*m));a[10]=c*(h*z-g*B)-e*(d*z-f*B)+v*(d*g-f*h);a[11]=-(c*
(h*t-g*m)-e*(d*t-f*m)+n*(d*g-f*h));a[12]=-(e*(m*w-r*B)-n*(h*w-l*B)+v*(h*r-l*m));a[13]=c*(m*w-r*B)-n*(d*w-p*B)+v*(d*r-p*m);a[14]=-(c*(h*w-l*B)-e*(d*w-p*B)+v*(d*l-p*h));a[15]=c*(h*r-l*m)-e*(d*r-p*m)+n*(d*l-p*h);return a}},{}],34:[function(e,g,n){g.exports=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],35:[function(e,g,n){g.exports=
function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],36:[function(e,g,n){g.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],37:[function(e,g,n){g.exports=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],k=a[5],h=a[6],g=a[7],
n=a[8],x=a[9],m=a[10],r=a[11],t=a[12],v=a[13],B=a[14];a=a[15];return(b*k-c*f)*(m*a-r*B)-(b*h-d*f)*(x*a-r*v)+(b*g-e*f)*(x*B-m*v)+(c*h-d*k)*(n*a-r*t)-(c*g-e*k)*(n*B-m*t)+(d*g-e*h)*(n*v-x*t)}},{}],38:[function(e,g,n){g.exports=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],k=c+c,h=d+d,g=e+e,c=c*k,n=d*k,d=d*h,x=e*k,m=e*h,e=e*g,k=f*k,h=f*h,f=f*g;a[0]=1-d-e;a[1]=n+f;a[2]=x-h;a[3]=0;a[4]=n-f;a[5]=1-c-e;a[6]=m+k;a[7]=0;a[8]=x+h;a[9]=m-k;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],39:[function(e,
g,n){g.exports=function(a,b,c){var d=b[0],e=b[1],f=b[2],k=b[3],h=d+d,g=e+e,n=f+f;b=d*h;var x=d*g,d=d*n,m=e*g,e=e*n,f=f*n,h=k*h,g=k*g,k=k*n;a[0]=1-(m+f);a[1]=x+k;a[2]=d-g;a[3]=0;a[4]=x-k;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=d+g;a[9]=e-h;a[10]=1-(b+m);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],40:[function(e,g,n){g.exports=function(a,b,c,d,e,f,k){var h=1/(c-b),g=1/(e-d),n=1/(f-k);a[0]=2*f*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*g;a[6]=0;a[7]=0;a[8]=(c+b)*h;a[9]=(e+d)*g;a[10]=(k+f)*
n;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*f*2*n;a[15]=0;return a}},{}],41:[function(e,g,n){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(e,g,n){g.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),
scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":33,"./clone":34,"./copy":35,"./create":36,"./determinant":37,"./fromQuat":38,"./fromRotationTranslation":39,"./frustum":40,"./identity":41,
"./invert":43,"./lookAt":44,"./multiply":45,"./ortho":46,"./perspective":47,"./perspectiveFromFieldOfView":48,"./rotate":49,"./rotateX":50,"./rotateY":51,"./rotateZ":52,"./scale":53,"./str":54,"./translate":55,"./transpose":56}],43:[function(e,g,n){g.exports=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],k=b[4],h=b[5],g=b[6],n=b[7],x=b[8],m=b[9],r=b[10],t=b[11],v=b[12],B=b[13],w=b[14],z=b[15],u=c*h-d*k,G=c*g-e*k,C=c*n-f*k,A=d*g-e*h,O=d*n-f*h,S=e*n-f*g,R=x*B-m*v,L=x*w-r*v,J=x*z-t*v,y=m*w-r*B,M=m*z-
t*B,Y=r*z-t*w,I=u*Y-G*M+C*y+A*J-O*L+S*R;if(!I)return null;I=1/I;a[0]=(h*Y-g*M+n*y)*I;a[1]=(e*M-d*Y-f*y)*I;a[2]=(B*S-w*O+z*A)*I;a[3]=(r*O-m*S-t*A)*I;a[4]=(g*J-k*Y-n*L)*I;a[5]=(c*Y-e*J+f*L)*I;a[6]=(w*C-v*S-z*G)*I;a[7]=(x*S-r*C+t*G)*I;a[8]=(k*M-h*J+n*R)*I;a[9]=(d*J-c*M-f*R)*I;a[10]=(v*O-B*C+z*u)*I;a[11]=(m*C-x*O-t*u)*I;a[12]=(h*L-k*y-g*R)*I;a[13]=(c*y-d*L+e*R)*I;a[14]=(B*G-v*A-w*u)*I;a[15]=(x*A-m*G+r*u)*I;return a}},{}],44:[function(e,g,n){var a=e("./identity");g.exports=function(b,c,d,e){var f,k,g,
l,n,x,m,r,t=c[0],v=c[1];c=c[2];g=e[0];l=e[1];k=e[2];m=d[0];e=d[1];f=d[2];if(1E-6>Math.abs(t-m)&&1E-6>Math.abs(v-e)&&1E-6>Math.abs(c-f))return a(b);d=t-m;e=v-e;m=c-f;r=1/Math.sqrt(d*d+e*e+m*m);d*=r;e*=r;m*=r;f=l*m-k*e;k=k*d-g*m;g=g*e-l*d;(r=Math.sqrt(f*f+k*k+g*g))?(r=1/r,f*=r,k*=r,g*=r):g=k=f=0;l=e*g-m*k;n=m*f-d*g;x=d*k-e*f;(r=Math.sqrt(l*l+n*n+x*x))?(r=1/r,l*=r,n*=r,x*=r):x=n=l=0;b[0]=f;b[1]=l;b[2]=d;b[3]=0;b[4]=k;b[5]=n;b[6]=e;b[7]=0;b[8]=g;b[9]=x;b[10]=m;b[11]=0;b[12]=-(f*t+k*v+g*c);b[13]=-(l*t+
n*v+x*c);b[14]=-(d*t+e*v+m*c);b[15]=1;return b}},{"./identity":41}],45:[function(e,g,n){g.exports=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],l=b[5],n=b[6],x=b[7],m=b[8],r=b[9],t=b[10],v=b[11],B=b[12],w=b[13],z=b[14];b=b[15];var u=c[0],G=c[1],C=c[2],A=c[3];a[0]=u*d+G*h+C*m+A*B;a[1]=u*e+G*l+C*r+A*w;a[2]=u*f+G*n+C*t+A*z;a[3]=u*g+G*x+C*v+A*b;u=c[4];G=c[5];C=c[6];A=c[7];a[4]=u*d+G*h+C*m+A*B;a[5]=u*e+G*l+C*r+A*w;a[6]=u*f+G*n+C*t+A*z;a[7]=u*g+G*x+C*v+A*b;u=c[8];G=c[9];C=c[10];A=c[11];a[8]=u*
d+G*h+C*m+A*B;a[9]=u*e+G*l+C*r+A*w;a[10]=u*f+G*n+C*t+A*z;a[11]=u*g+G*x+C*v+A*b;u=c[12];G=c[13];C=c[14];A=c[15];a[12]=u*d+G*h+C*m+A*B;a[13]=u*e+G*l+C*r+A*w;a[14]=u*f+G*n+C*t+A*z;a[15]=u*g+G*x+C*v+A*b;return a}},{}],46:[function(e,g,n){g.exports=function(a,b,c,d,e,f,g){var h=1/(b-c),l=1/(d-e),n=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+c)*h;a[13]=(e+d)*l;a[14]=(g+f)*n;a[15]=1;return a}},{}],47:[function(e,g,n){g.exports=function(a,
b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a}},{}],48:[function(e,g,n){g.exports=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),l=2/(e+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(e-f)*
l*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a}},{}],49:[function(e,g,n){g.exports=function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var g=Math.sqrt(e*e+f*f+d*d),h,l,n,x,m,r,t,v,B,w,z,u,G,C,A,O,S,R,L,J;if(1E-6>Math.abs(g))return null;g=1/g;e*=g;f*=g;d*=g;h=Math.sin(c);l=Math.cos(c);n=1-l;c=b[0];g=b[1];x=b[2];m=b[3];r=b[4];t=b[5];v=b[6];B=b[7];w=b[8];z=b[9];u=b[10];G=b[11];C=e*e*n+l;A=f*e*n+d*h;O=d*e*n-f*h;S=e*f*n-d*h;R=f*f*n+l;L=d*f*n+e*h;J=e*d*n+f*h;e=f*d*n-e*h;f=d*d*n+l;a[0]=
c*C+r*A+w*O;a[1]=g*C+t*A+z*O;a[2]=x*C+v*A+u*O;a[3]=m*C+B*A+G*O;a[4]=c*S+r*R+w*L;a[5]=g*S+t*R+z*L;a[6]=x*S+v*R+u*L;a[7]=m*S+B*R+G*L;a[8]=c*J+r*e+w*f;a[9]=g*J+t*e+z*f;a[10]=x*J+v*e+u*f;a[11]=m*J+B*e+G*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}},{}],50:[function(e,g,n){g.exports=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],l=b[8],n=b[9],x=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=
b[15]);a[4]=e*c+l*d;a[5]=f*c+n*d;a[6]=g*c+x*d;a[7]=h*c+m*d;a[8]=l*c-e*d;a[9]=n*c-f*d;a[10]=x*c-g*d;a[11]=m*c-h*d;return a}},{}],51:[function(e,g,n){g.exports=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],l=b[8],n=b[9],x=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-l*d;a[1]=f*c-n*d;a[2]=g*c-x*d;a[3]=h*c-m*d;a[8]=e*d+l*c;a[9]=f*d+n*c;a[10]=g*d+x*c;a[11]=h*d+m*c;return a}},{}],52:[function(e,
g,n){g.exports=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],l=b[4],n=b[5],x=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+l*d;a[1]=f*c+n*d;a[2]=g*c+x*d;a[3]=h*c+m*d;a[4]=l*c-e*d;a[5]=n*c-f*d;a[6]=x*c-g*d;a[7]=m*c-h*d;return a}},{}],53:[function(e,g,n){g.exports=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=
b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],54:[function(e,g,n){g.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],55:[function(e,g,n){g.exports=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,l,n,x,m,r,t,v,B,w;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+
b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],l=b[3],n=b[4],x=b[5],m=b[6],r=b[7],t=b[8],v=b[9],B=b[10],w=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=l,a[4]=n,a[5]=x,a[6]=m,a[7]=r,a[8]=t,a[9]=v,a[10]=B,a[11]=w,a[12]=f*d+n*e+t*c+b[12],a[13]=g*d+x*e+v*c+b[13],a[14]=h*d+m*e+B*c+b[14],a[15]=l*d+r*e+w*c+b[15]);return a}},{}],56:[function(e,g,n){g.exports=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];
a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}},{}],57:[function(e,g,n){function a(a,c,d,e){e[0]=b(255*a);e[1]=b(255*c);e[2]=b(255*d)}var b=Math.round,c=Math.min,d=Math.max,p=Math.ceil;g.exports=function(b,e,g,l){l=l||[0,0,0];b%=360;e=d(0,c(e,1));g=d(0,c(g,1));if(e){e=(1-e)*g;var n=
g-e,x=b%60;switch(b/60|0){case 0:a(g,n*b/60+e,e,l);break;case 1:a(n*(60-x)/60+e,g,e,l);break;case 2:a(e,g,n*x/60+e,l);break;case 3:a(e,n*(60-x)/60+e,g,l);break;case 4:a(n*x/60+e,e,g,l);break;case 5:a(g,e,n*(60-x)/60+e,l)}}else l[0]=l[1]=l[2]=p(255*g);return l}},{}],58:[function(e,g,n){var a=e("./lib/extend"),b=e("./lib/context"),c=e("./lib/strings"),d=e("./lib/extension"),p=e("./lib/limits"),f=e("./lib/buffer"),k=e("./lib/elements"),h=e("./lib/texture"),l=e("./lib/renderbuffer"),V=e("./lib/framebuffer"),
x=e("./lib/uniform"),m=e("./lib/attribute"),r=e("./lib/shader"),t=e("./lib/draw"),v=e("./lib/state"),B=e("./lib/compile"),w=e("./lib/read"),z=e("./lib/dynamic"),u=e("./lib/raf"),G=e("./lib/clock");g.exports=function(){function e(){ga=u.next(e);D.count+=1;if(D.width!==y.drawingBufferWidth||D.height!==y.drawingBufferHeight)D.width=y.drawingBufferWidth,D.height=y.drawingBufferHeight,W.notifyViewportChanged();var a=G();D.dt=a-D.t;D.t=a;H.poll();for(var b=0;b<aa.length;++b)(0,aa[b])(D.count,D.t,D.dt);
D.renderTime=G()-a}function g(){ga&&(u.cancel(e),ga=0)}function n(a){g();a.preventDefault();if(M.onContextLost)M.onContextLost()}function S(a){y.getError();Y.refresh();X.refresh();H.refresh();q.refresh();K.refresh();ja.refresh();W.refresh();if(M.onContextRestored)M.onContextRestored();e()}function R(b){function c(a){var b={},e={};Object.keys(a).forEach(function(c){var f=a[c];z.isDynamic(f)?(d=!0,e[c]=z.unbox(f,c)):b[c]=f});return{dynamic:e,"static":b}}var d=!1,e=c(b.uniforms||{}),f=c(b.attributes||
{});b=c(function(b){function c(a){if(a in d){var b=d[a];delete d[a];Object.keys(b).forEach(function(c){d[a+"."+c]=b[c]})}}var d=a({},b);delete d.uniforms;delete d.attributes;c("blend");c("depth");c("cull");c("stencil");c("polygonOffset");c("scissor");c("sample");return d}(b));var e=F.command(b["static"],e["static"],f["static"],b.dynamic,e.dynamic,f.dynamic,d),g=e.draw,h=e.batch,k=e.scope,l=[];return function(a,b){if("number"===typeof a){for(var c=a|0;l.length<c;)l.push(null);return h(a|0,l)}return Array.isArray(a)?
h(a.length,a):"function"===typeof a?k(null,a):"function"===typeof b?k(a,b):g(a)}}function L(){K.poll();W.poll()}var J=b(Array.prototype.slice.call(arguments)),y=J.gl,M=J.options,J=c(),Y=d(y),I=Y.extensions,fa={width:y.drawingBufferWidth,height:y.drawingBufferHeight},Z=p(y,I),X=f(y),da=k(y,I,X),ma=x(J),qa=m(y,I,Z,X,J),ja=r(y,qa,ma,function(a){return F.draw(a)},J),ea=t(y,I,X),H=h(y,I,Z,L,fa),q=l(y,I,Z),K=V(y,I,Z,H,q),D={count:0,start:G(),dt:0,t:G(),renderTime:0,width:y.drawingBufferWidth,height:y.drawingBufferHeight,
pixelRatio:M.pixelRatio},W=v(y,K,fa),fa=w(y,L,fa),F=B(y,J,I,Z,X,da,H,K,W,ma,qa,ja,ea,D,L),U=y.canvas,aa=[],ga=0;U&&(U.addEventListener("webglcontextlost",n,!1),U.addEventListener("webglcontextrestored",S,!1));return a(R,{clear:function(a){var b=0;L();var c=a.color;c&&(y.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(y.clearDepth(+a.depth),b|=256);"stencil"in a&&(y.clearStencil(a.stencil|0),b|=1024);y.clear(b)},prop:z.define,draw:R({}),elements:function(a){return da.create(a)},
buffer:function(a){return X.create(a,34962)},texture:function(a){return H.create(a,3553)},cube:function(a){return 6===arguments.length?H.create(Array.prototype.slice.call(arguments),34067):H.create(a,34067)},renderbuffer:function(a){return q.create(a)},framebuffer:function(a){return K.create(a)},framebufferCube:function(a){},frame:function(a){aa.push(a);!ga&&0<aa.length&&e();return{cancel:function(){var b=aa.find(function(b){return b===a});0>b||(aa.splice(b,1),0>=aa.length&&g())}}},stats:D,limits:Z,
read:fa,destroy:function(){g();U&&(U.removeEventListener("webglcontextlost",n),U.removeEventListener("webglcontextrestored",S));ja.clear();K.clear();q.clear();H.clear();X.clear();if(M.onDestroy)M.onDestroy()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/clock":4,"./lib/compile":6,"./lib/context":10,"./lib/draw":11,"./lib/dynamic":12,"./lib/elements":13,"./lib/extend":14,"./lib/extension":15,"./lib/framebuffer":16,"./lib/limits":19,"./lib/raf":22,"./lib/read":23,"./lib/renderbuffer":24,"./lib/shader":25,
"./lib/state":27,"./lib/strings":28,"./lib/texture":29,"./lib/uniform":31}]},{},[1]);

        </script>
        </body>
      </html>