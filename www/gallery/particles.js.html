<!DOCTYPE html>
      <html>
        <head>
          <title>example/particles.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function e$$0(l,n,a){function b(d,e){if(!n[d]){if(!l[d]){var g="function"==typeof require&&require;if(!e&&g)return g(d,!0);if(h)return h(d,!0);g=Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g;}g=n[d]={exports:{}};l[d][0].call(g.exports,function(a){var e=l[d][1][a];return b(e?e:a)},g,g.exports,e$$0,l,n,a)}return n[d].exports}for(var h="function"==typeof require&&require,g=0;g<a.length;g++)b(a[g]);return b})({1:[function(f,l,n){var a=f("../regl")(),b=f("gl-mat4"),h=f("hsv2rgb");
f=a.buffer(Array(1E4).fill().map(function(){var a=h(360*Math.random(),.6,1);return[10*Math.random(),10*Math.random(),10*Math.random(),10*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),a[0]/255,a[1]/255,a[2]/255]}));var g=a({vert:"\n  precision mediump float;\n  attribute vec4 freq, phase;\n  attribute vec3 color;\n  uniform float time;\n  uniform mat4 view, projection;\n  varying vec3 fragColor;\n  void main() {\n    vec3 position = 8.0 * cos(freq.xyz * time + phase.xyz);\n    gl_PointSize = 5.0 * (1.0 + cos(freq.w * time + phase.w));\n    gl_Position = projection * view * vec4(position, 1);\n    fragColor = color;\n  }",
frag:"\n  precision lowp float;\n  varying vec3 fragColor;\n  void main() {\n    if (length(gl_PointCoord.xy - 0.5) > 0.5) {\n      discard;\n    }\n    gl_FragColor = vec4(fragColor, 1);\n  }",attributes:{freq:{buffer:f,stride:44,offset:0},phase:{buffer:f,stride:44,offset:16},color:{buffer:f,stride:44,offset:32}},uniforms:{view:function(a){a=.01*a.tick;return b.lookAt([],[30*Math.cos(a),2.5,30*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a){return b.perspective([],Math.PI/4,a.viewportWidth/
a.viewportHeight,.01,1E3)},time:function(a){return.001*a.tick}},count:1E4,primitive:"points"});a.frame(function(){a.clear({depth:1,color:[0,0,0,1]});g()})},{"../regl":58,"gl-mat4":42,hsv2rgb:57}],2:[function(f,l,n){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}l.exports=function(b,h,g,d,e){b=g.maxAttributes;h=Array(b);for(g=0;g<b;++g)h[g]=new a;return{Record:a,scope:{},state:h}}},{}],3:[function(f,
l,n){function a(a){return r[Object.prototype.toString.call(a)]|0}function b(a,b){for(var d=0;d<b.length;++d)a[d]=b[d]}function h(a,b,d,e,g,h,c){for(var q=0,r=0;r<d;++r)for(var m=0;m<e;++m)a[q++]=b[g*r+h*m+c]}function g(a,b,d){for(var e=0,g=0;g<b.length;++g)for(var h=b[g],c=0;c<d;++c)a[e++]=h[c]}var d=f("./util/is-typed-array"),e=f("./util/is-ndarray"),c=f("./util/values"),q=f("./util/pool"),r=f("./constants/arraytypes.json"),m=f("./constants/dtypes.json"),z=f("./constants/usage.json");l.exports=function(k,
r){function f(a){this.id=p++;this.buffer=k.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function u(a,b,d){a.byteLength=b.byteLength;k.bufferData(a.type,b,d)}function l(c,k,r,p,m){c.usage=r;if(Array.isArray(k))c.dtype=p||5126,0<k.length&&(Array.isArray(k[0])?(c.dimension=k[0].length,p=q.allocType(c.dtype,k.length*c.dimension),g(p,k,c.dimension),u(c,p,r),q.freeType(p)):"number"===typeof k[0]?(c.dimension=m,p=q.allocType(c.dtype,k.length),b(p,k),u(c,
p,r),q.freeType(p)):d(k[0])&&(c.dimension=k[0].length,c.dtype=p||a(k[0])||5126,p=q.allocType(c.dtype,k.length*c.dimension),g(p,k,c.dimension),u(c,p,r),q.freeType(p)));else if(d(k))c.dtype=p||a(k),c.dimension=m,u(c,k,r);else if(e(k)){var f=k.shape,z=k.stride;m=k.offset;var w=0,A=0,t=0,x=0;1===f.length?(w=f[0],A=1,t=z[0],x=0):2===f.length&&(w=f[0],A=f[1],t=z[0],x=z[1]);c.dtype=p||a(k.data)||5126;c.dimension=A;p=q.allocType(c.dtype,w*A);h(p,k.data,w,A,t,x,m);u(c,p,r);q.freeType(p)}}function x(a){r.bufferCount--;
k.deleteBuffer(a.buffer);a.buffer=null;delete C[a.id]}var p=0,C={};f.prototype.bind=function(){k.bindBuffer(this.type,this.buffer)};f.prototype.destroy=function(){x(this)};var B=[];return{create:function(c,p,u){function B(a){var b=35044,c=null,g=0,h=0,q=1;Array.isArray(a)||d(a)||e(a)?c=a:"number"===typeof a?g=a|0:a&&("data"in a&&(c=a.data),"usage"in a&&(b=z[a.usage]),"type"in a&&(h=m[a.type]),"dimension"in a&&(q=a.dimension|0),"length"in a&&(g=a.length|0));n.bind();c?l(n,c,b,h,q):(k.bufferData(n.type,
g,b),n.dtype=h||5121,n.usage=b,n.dimension=q,n.byteLength=g);return B}r.bufferCount++;var n=new f(p);C[n.id]=n;u||B(c);B._reglType="buffer";B._buffer=n;B.subdata=function(c,p){var r=(p||0)|0;n.bind();if(Array.isArray(c)){if(0<c.length)if("number"===typeof c[0]){var m=q.allocType(n.dtype,c.length);b(m,c);k.bufferSubData(n.type,r,m);q.freeType(m)}else if(Array.isArray(c[0])||d(c[0])){var m=c[0].length,f=q.allocType(n.dtype,c.length*m);g(f,c,m);k.bufferSubData(n.type,r,f);q.freeType(f)}}else if(d(c))k.bufferSubData(n.type,
r,c);else if(e(c)){var u=c.shape,z=c.stride,w=f=m=0,t=0;1===u.length?(m=u[0],f=1,w=z[0],t=0):2===u.length&&(m=u[0],f=u[1],w=z[0],t=z[1]);u=Array.isArray(c.data)?n.dtype:a(c.data);u=q.allocType(u,m*f);h(u,c.data,m,f,w,t,c.offset);k.bufferSubData(n.type,r,u);q.freeType(u)}return B};B.destroy=function(){x(n)};return B},createStream:function(a,b){var d=B.pop();d||(d=new f(a),d.buffer=k.createBuffer());d.bind();l(d,b,35040,0,1);return d},destroyStream:function(a){B.push(a)},clear:function(){c(C).forEach(x)},
getBuffer:function(a){return a&&a._buffer instanceof f?a._buffer:null},_initBuffer:l}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(f,l,n){l.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(f,l,n){l.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(f,l,n){l.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(f,l,n){l.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(f,l,n){function a(a){return Array.isArray(a)||r(a)||m(a)}function b(a){return a.sort(function(a,
b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function h(a,b,d,c){this.thisDep=a;this.contextDep=b;this.propDep=d;this.append=c}function g(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function d(a){return new h(!1,!1,!1,a)}function e(a,b){var d=a.type;return 0===d?(d=a.data.length,new h(!0,1<=d,2<=d,b)):new h(3===d,2===d,1===d,b)}var c=f("./util/codegen"),q=f("./util/loop"),r=f("./util/is-typed-array"),m=f("./util/is-ndarray"),z=f("./util/is-array-like"),k=f("./constants/primitives.json"),
t=f("./constants/dtypes.json"),w=["x","y","z","w"],u={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},y={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,
"!=":517,"!==":517,gequal:518,">=":518,always:519},x={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},p={cw:2304,ccw:2305},C=new h(!1,!1,!1,function(){});l.exports=function(m,r,f,l,n,G,J,O,P,A,N,F,S,oa,V){function Q(a){return a.replace(".","_")}function L(a,b,d){var c=Q(a);Ba.push(a);ta[c]=ja[c]=!!d;ka[c]=b}function K(a,b,d){var c=Q(a);Ba.push(a);Array.isArray(d)?(ja[c]=d.slice(),ta[c]=d.slice()):ja[c]=ta[c]=d;la[c]=b}function W(){var a=
c(),b=a.link,d=a.global;a.id=Fa++;a.batchId="0";var e=b(Ea),g=a.shared={props:"a0"};Object.keys(Ea).forEach(function(a){g[a]=d.def(e,".",a)});var h=a.next={},v=a.current={};Object.keys(la).forEach(function(a){Array.isArray(ja[a])&&(h[a]=d.def(g.next,".",a),v[a]=d.def(g.current,".",a))});var ba=a.constants={};Object.keys(Ca).forEach(function(a){ba[a]=d.def(JSON.stringify(Ca[a]))});a.invoke=function(d,c){switch(c.type){case 0:var ba=["this",g.context,g.props,a.batchId];return d.def(b(c.data),".call(",
ba.slice(0,Math.max(c.data.length+1,4)),")");case 1:return d.def(g.props,c.data);case 2:return d.def(g.context,c.data);case 3:return d.def("this",c.data)}};a.attribCache={};var q={};a.scopeAttrib=function(a){a=r.id(a);if(a in q)return q[a];var d=A.scope[a];d||(d=A.scope[a]=new ca);return q[a]=b(d)};return a}function ma(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var g=!!b.profile;c=d(function(a,b){return g});c.enable=g}else if("profile"in a){var h=a.profile;c=e(h,function(a,b){return a.invoke(b,
h)})}return c}function pa(a){var b=a["static"];a=a.dynamic;if("framebuffer"in b){var c=b.framebuffer;return c?(c=O.getFramebuffer(c),d(function(a,b){var d=a.link(c),ba=a.shared;b.set(ba.framebuffer,".next",d);ba=ba.context;b.set(ba,".framebufferWidth",d+".width");b.set(ba,".framebufferHeight",d+".height");return d})):d(function(a,b){var d=a.shared;b.set(d.framebuffer,".next","null");d=d.context;b.set(d,".framebufferWidth",d+".drawingBufferWidth");b.set(d,".framebufferHeight",d+".drawingBufferHeight");
return"null"})}if("framebuffer"in a){var g=a.framebuffer;return e(g,function(a,b){var d=a.invoke(b,g),c=a.shared,e=c.framebuffer,d=b.def(e,".getFramebuffer(",d,")");b.set(e,".next",d);c=c.context;b.set(c,".framebufferWidth",d+"?"+d+".width:"+c+".drawingBufferWidth");b.set(c,".framebufferHeight",d+"?"+d+".height:"+c+".drawingBufferHeight");return d})}return null}function ga(a,b){function d(a){if(a in c){var v=c[a];a=!0;var aa=v.x|0,q=v.y|0,k,p;"width"in v?k=v.width|0:a=!1;"height"in v?p=v.height|0:
a=!1;return new h(!a&&b&&b.thisDep,!a&&b&&b.contextDep,!a&&b&&b.propDep,function(a,b){var d=a.shared.context,c=k;"width"in v||(c=b.def(d,".","framebufferWidth","-",aa));var e=p;"height"in v||(e=b.def(d,".","framebufferHeight","-",q));return[aa,q,c,e]})}if(a in g){var m=g[a];a=e(m,function(a,b){var d=a.invoke(b,m),c=a.shared.context,e=b.def(d,".x|0"),g=b.def(d,".y|0"),ba=b.def('"width" in ',d,"?",d,".width|0:","(",c,".","framebufferWidth","-",e,")"),d=b.def('"height" in ',d,"?",d,".height|0:","(",
c,".","framebufferHeight","-",g,")");return[e,g,ba,d]});b&&(a.thisDep=a.thisDep||b.thisDep,a.contextDep=a.contextDep||b.contextDep,a.propDep=a.propDep||b.propDep);return a}return b?new h(b.thisDep,b.contextDep,b.propDep,function(a,b){var d=a.shared.context;return[0,0,b.def(d,".","framebufferWidth"),b.def(d,".","framebufferHeight")]}):null}var c=a["static"],g=a.dynamic,v=d("viewport");if(v)var q=v,v=new h(v.thisDep,v.contextDep,v.propDep,function(a,b){var d=q.append(a,b),c=a.shared.context;b.set(c,
".viewportWidth",d[2]);b.set(c,".viewportHeight",d[3]);return d});return{viewport:v,scissor_box:d("scissor.box")}}function na(a){function b(a){if(a in c){var g=r.id(c[a]);a=d(function(){return g});a.id=g;return a}if(a in v){var h=v[a];return e(h,function(a,b){var d=a.invoke(b,h);return b.def(a.shared.strings,".id(",d,")")})}return null}var c=a["static"],v=a.dynamic,q=b("frag"),k=b("vert"),p=null;g(q)&&g(k)?(p=N.program(k.id,q.id),a=d(function(a,b){return a.link(p)})):a=new h(q&&q.thisDep||k&&k.thisDep,
q&&q.contextDep||k&&k.contextDep,q&&q.propDep||k&&k.propDep,function(a,b){var d=a.shared.shader,c;c=q?q.append(a,b):b.def(d,".","frag");var e;e=k?k.append(a,b):b.def(d,".","vert");return b.def(d+".program("+e+","+c+")")});return{frag:q,vert:k,progVar:a,program:p}}function ia(b){function c(a,b){if(a in v){var g=v[a]|0;return d(function(a,d){b&&(a.OFFSET=g);return g})}if(a in q){var h=q[a];return e(h,function(a,d){var c=a.invoke(d,h);b&&(a.OFFSET=c);return c})}return b&&p?d(function(a,b){a.OFFSET="0";
return 0}):null}var v=b["static"],q=b.dynamic,p=function(){if("elements"in v){var b=v.elements;a(b)?b=G.getElements(G.create(b)):b&&(b=G.getElements(b));var c=d(function(a,d){if(b){var c=a.link(b);return a.ELEMENTS=c}return a.ELEMENTS=null});c.value=b;return c}if("elements"in q){var g=q.elements;return e(g,function(a,b){var d=a.shared,c=d.isBufferArgs,d=d.elements,e=a.invoke(b,g),v=b.def("null"),c=b.def(c,"(",e,")"),e=a.cond(c).then(v,"=",d,".createStream(",e,");")["else"](v,"=",d,".getElements(",
e,");");b.entry(e);b.exit(a.cond(c).then(d,".destroyStream(",v,");"));return a.ELEMENTS=v})}return null}(),m=c("offset",!0);return{elements:p,primitive:function(){if("primitive"in v){var a=v.primitive;return d(function(b,d){return k[a]})}if("primitive"in q){var b=q.primitive;return e(b,function(a,d){var c=a.constants.primTypes,e=a.invoke(d,b);return d.def(c,"[",e,"]")})}return p?g(p)?p.value?d(function(a,b){return b.def(a.ELEMENTS,".primType")}):d(function(){return 4}):new h(p.thisDep,p.contextDep,
p.propDep,function(a,b){var d=a.ELEMENTS;return b.def(d,"?",d,".primType:",4)}):null}(),count:function(){if("count"in v){var a=v.count|0;return d(function(){return a})}if("count"in q){var b=q.count;return e(b,function(a,d){return a.invoke(d,b)})}return p?g(p)?p?m?new h(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):d(function(a,b){return b.def(a.ELEMENTS,".vertCount")}):d(function(){return-1}):new h(p.thisDep||m.thisDep,p.contextDep||m.contextDep,
p.propDep||m.propDep,function(a,b){var d=a.ELEMENTS;return a.OFFSET?b.def(d,"?",d,".vertCount-",a.OFFSET,":-1"):b.def(d,"?",d,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:m}}function T(a){var b=a["static"],c=a.dynamic,g={};Ba.forEach(function(a){function h(v,q){if(a in b){var p=v(b[a]);g[k]=d(function(){return p})}else if(a in c){var aa=c[a];g[k]=e(aa,function(a,b){return q(a,b,a.invoke(b,aa))})}}var k=Q(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(a){return a},
function(a,b,d){return d});case "depth.func":return h(function(a){return y[a]},function(a,b,d){return b.def(a.constants.compareFuncs,"[",d,"]")});case "depth.range":return h(function(a){return a},function(a,b,d){a=b.def("+",d,"[0]");b=b.def("+",d,"[1]");return[a,b]});case "blend.func":return h(function(a){return[u["srcRGB"in a?a.srcRGB:a.src],u["dstRGB"in a?a.dstRGB:a.dst],u["srcAlpha"in a?a.srcAlpha:a.src],u["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,b,d){function c(a,g){var v=b.def('"',a,g,'" in ',
d,"?",d,".",a,g,":",d,".",a);return b.def(e,"[",v,"]")}var e=a.constants.blendFuncs;a=c("src","RGB");var g=c("src","Alpha"),v=c("dst","RGB"),h=c("dst","Alpha");return[a,v,g,h]});case "blend.equation":return h(function(a){if("string"===typeof a)return[v[a],v[a]];if("object"===typeof a)return[v[a.rgb],v[a.alpha]]},function(a,b,d){var c=a.constants.blendEquations,e=b.def(),g=b.def();a=a.cond("typeof ",d,'==="string"');a.then(e,"=",g,"=",c,"[",d,"];");a["else"](e,"=",c,"[",d,".rgb];",g,"=",c,"[",d,".alpha];");
b(a);return[e,g]});case "blend.color":return h(function(a){return q(4,function(b){return+a[b]})},function(a,b,d){return q(4,function(a){return b.def("+",d,"[",a,"]")})});case "stencil.mask":return h(function(a){return a|0},function(a,b,d){return b.def(d,"|0")});case "stencil.func":return h(function(a){return[y[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,b,d){a=b.def('"cmp" in ',d,"?",a.constants.compareFuncs,"[",d,".cmp]",":",7680);var c=b.def(d,".ref|0");b=b.def('"mask" in ',d,"?",
d,".mask|0:-1");return[a,c,b]});case "stencil.opFront":case "stencil.opBack":return h(function(b){return["stencil.opBack"===a?1029:1028,x[b.fail||"keep"],x[b.zfail||"keep"],x[b.pass||"keep"]]},function(b,d,c){function e(a){return d.def('"',a,'" in ',c,"?",g,"[",c,".",a,"]:",7680)}var g=b.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return h(function(a){return[a.factor|0,a.units|0]},function(a,b,d){a=b.def(d,".factor|0");b=
b.def(d,".units|0");return[a,b]});case "cull.face":return h(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);return b},function(a,b,d){return b.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(a){return a},function(a,b,d){return d});case "frontFace":return h(function(a){return p[a]},function(a,b,d){return b.def(d+'==="cw"?2304:2305')});case "colorMask":return h(function(a){return a.map(function(a){return!!a})},function(a,b,d){return q(4,function(a){return"!!"+d+"["+
a+"]"})});case "sample.coverage":return h(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,b,d){a=b.def('"value" in ',d,"?+",d,".value:1");b=b.def("!!",d,".invert");return[a,b]})}});return g}function da(a){var b=a["static"],c=a.dynamic,g={};Object.keys(b).forEach(function(a){var c=b[a],e;"number"===typeof c||"boolean"===typeof c?e=d(function(){return c}):"function"!==typeof c||"texture2d"!==c._reglType&&"textureCube"!==c._reglType?z(c)&&(e=d(function(a){return a.global.def("[",q(c.length,
function(a){return c[a]}),"]")})):e=d(function(a){return a.link(c)});e.value=c;g[a]=e});Object.keys(c).forEach(function(a){var b=c[a];g[a]=e(b,function(a,d){return a.invoke(d,b)})});return g}function ea(b){var c=b["static"],g=b.dynamic,v={};Object.keys(c).forEach(function(b){var e=c[b],g=r.id(b),h=new ca;if(a(e))h.state=1,h.buffer=n.getBuffer(n.create(e,34962,!1)),h.type=h.buffer.dtype;else{var q=n.getBuffer(e);if(q)h.state=1,h.buffer=q,h.type=q.dtype;else if(e.constant){var k=e.constant;h.state=
2;"number"===typeof k?h.x=k:w.forEach(function(a,b){b<k.length&&(h[a]=k[b])})}else{var q=n.getBuffer(e.buffer),p=e.offset|0,aa=e.stride|0,m=e.size|0,f=!!e.normalized,u=0;"type"in e&&(u=t[e.type]);e=e.divisor|0;h.buffer=q;h.state=1;h.size=m;h.normalized=f;h.type=u||q.dtype;h.offset=p;h.stride=aa;h.divisor=e}}v[b]=d(function(a,b){var d=a.attribCache;if(g in d)return d[g];var c={isStream:!1};Object.keys(h).forEach(function(a){c[a]=h[a]});h.buffer&&(c.buffer=a.link(h.buffer));return d[g]=c})});Object.keys(g).forEach(function(a){var b=
g[a];v[a]=e(b,function(a,d){function c(a){d(q[a],"=",e,".",a,"|0;")}var e=a.invoke(d,b),g=a.shared,h=g.isBufferArgs,v=g.buffer,q={isStream:d.def(!1)},k=new ca;k.state=1;Object.keys(k).forEach(function(a){q[a]=d.def(""+k[a])});var p=q.buffer,aa=q.type;d("if(",h,"(",e,")){",q.isStream,"=true;",p,"=",v,".createStream(",34962,",",e,");",aa,"=",p,".dtype;","}else{",p,"=",v,".getBuffer(",e,");","if(",p,"){",aa,"=",p,".dtype;","}else if(",e,".constant){",q.state,"=",2,";",w.map(function(a,b){return q[a]+
"="+e+".length>="+b+"?"+e+"["+b+"]:0;"}).join(""),"}else{",p,"=",v,".getBuffer(",e,".buffer);",aa,'="type" in ',e,"?",g.glTypes,"[",e,".type]:",p,".dtype;",q.normalized,"=!!",e,".normalized;");c("size");c("offset");c("stride");c("divisor");d("}}");return q})});return v}function fa(a){var b=a["static"],c=a.dynamic,g={};Object.keys(b).forEach(function(a){var c=b[a];g[a]=d(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var b=c[a];g[a]=
e(b,function(a,d){return a.invoke(d,b)})});return g}function I(a,b,d){var c=a.shared.context,e=a.scope();Object.keys(d).forEach(function(g){b.save(c,"."+g);e(c,".",g,"=",d[g].append(a,b),";")});b(e)}function R(a,b,d){var c=a.shared,e=c.gl,g=c.framebuffer,h;X&&(h=b.def(c.extensions,".webgl_draw_buffers"));var v=a.constants,c=v.drawBuffer,v=v.backBuffer;a=d?d.append(a,b):b.def(g,".next");b("if(",g,".dirty||",a,"!==",g,".cur){","if(",a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");X&&b(h,
".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);");b("}else{",e,".bindFramebuffer(",36160,",null);");X&&b(h,".drawBuffersWEBGL(",v,");");b("}",g,".cur=",a,";",g,".dirty=false;","}")}function ha(a,b,d){var c=a.shared,e=c.gl,g=a.current,h=a.next,v=c.current,k=c.next,p=a.cond(v,".dirty");Ba.forEach(function(b){b=Q(b);if(!(b in d.state)){var c,m;if(b in h){c=h[b];m=g[b];var r=q(ja[b].length,function(a){return p.def(c,"[",a,"]")});p(a.cond(r.map(function(a,b){return a+"!=="+m+"["+b+"]"}).join("||")).then(e,
".",la[b],"(",r,");",r.map(function(a,b){return m+"["+b+"]="+a}).join(";"),";"))}else c=p.def(k,".",b),r=a.cond(c,"!==",v,".",b),p(r),b in ka?r(a.cond(c).then(e,".enable(",ka[b],");")["else"](e,".disable(",ka[b],");"),v,".",b,"=",c,";"):r(e,".",la[b],"(",c,");",v,".",b,"=",c,";")}});0===Object.keys(d.state).length&&p(v,".dirty=false;");b(p)}function ua(a,d,c,e){var h=a.shared,v=a.current,q=h.current,p=h.gl;b(Object.keys(c)).forEach(function(b){var h=c[b];if(!e||e(h)){var k=h.append(a,d);if(ka[b]){var m=
ka[b];g(h)?k?d(p,".enable(",m,");"):d(p,".disable(",m,");"):d(a.cond(k).then(p,".enable(",m,");")["else"](p,".disable(",m,");"));d(q,".",b,"=",k,";")}else if(z(k)){var r=v[b];d(p,".",la[b],"(",k,");",k.map(function(a,b){return r+"["+b+"]="+a}).join(";"),";")}else d(p,".",la[b],"(",k,");",q,".",b,"=",k,";")}})}function U(a,b){va&&!a.instancing&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function Y(a,b,d,c,e){function h(){return"undefined"===typeof performance?"Date.now()":
"performance.now()"}function v(a){u=b.def();a(u,"=",h(),";");"string"===typeof e?a(m,".count+=",e,";"):a(m,".count++;");oa&&(c?(z=b.def(),a(z,"=",f,".getNumPendingQueries();")):a(f,".beginQuery(",m,");"))}function q(a){a(m,".cpuTime+=",h(),"-",u,";");oa&&(c?a(f,".pushScopeStats(",z,",",f,".getNumPendingQueries(),",m,");"):a(f,".endQuery();"))}function p(a){var d=b.def(r,".profile");b(r,".profile=",a,";");b.exit(r,".profile=",d,";")}var k=a.shared,m=a.stats,r=k.current,f=k.timer;d=d.profile;var u,
z;if(d){if(g(d)){d.enable?(v(b),q(b.exit),p("true")):p("false");return}d=d.append(a,b);p(d)}else d=b.def(r,".profile");k=a.block();v(k);b("if(",d,"){",k,"}");a=a.block();q(a);b.exit("if(",d,"){",a,"}")}function Z(a,b,d,c,e){function g(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function h(d,c,e){function g(){b("if(!",m,".pointer){",p,".enableVertexAttribArray(",k,");",m,".pointer=true;}");
var d=e.type,h;h=e.size?b.def(e.size,"||",c):c;b("if(",m,".type!==",d,"||",m,".size!==",h,"||",u.map(function(a){return m+"."+a+"!=="+e[a]}).join("||"),"){",p,".bindBuffer(",34962,",",r,".buffer);",p,".vertexAttribPointer(",[k,h,d,e.normalized,e.stride,e.offset],");",m,".type=",d,";",m,".size=",h,";",u.map(function(a){return m+"."+a+"="+e[a]+";"}).join(""),"}");va&&(d=e.divisor,b("if(",m,".divisor!==",d,"){",a.instancing,".vertexAttribDivisorANGLE(",[k,d],");",m,".divisor=",d,";}"))}function q(){b("if(",
m,".pointer){",p,".disableVertexAttribArray(",k,");",m,".pointer=false;","}if(",w.map(function(a,b){return m+"."+a+"!=="+f[b]}).join("||"),"){",p,".vertexAttrib4f(",k,",",f,");",w.map(function(a,b){return m+"."+a+"="+f[b]+";"}).join(""),"}")}var p=v.gl,k=b.def(d,".location"),m=b.def(v.attributes,"[",k,"]");d=e.state;var r=e.buffer,f=[e.x,e.y,e.z,e.w],u=["buffer","normalized","offset","stride"];1===d?g():2===d?q():(b("if(",d,"===",1,"){"),g(),b("}else{"),q(),b("}"))}var v=a.shared;c.forEach(function(c){var v=
c.name,q=d.attributes[v],k;if(q){if(!e(q))return;k=q.append(a,b)}else{if(!e(C))return;var p=a.scopeAttrib(v);k={};Object.keys(new ca).forEach(function(a){k[a]=b.def(p,".",a)})}h(a.link(c),g(c.info.type),k)})}function qa(a,b,d,c,e){for(var h=a.shared,v=h.gl,k,p=0;p<c.length;++p){var m=c[p],f=m.name,u=m.info.type,w=d.uniforms[f],m=a.link(m)+".location",t;if(w){if(!e(w))continue;if(g(w)){f=w.value;if(35678===u||35680===u)u=a.link(f._texture),b(v,".uniform1i(",m,",",u+".bind());"),b.exit(u,".unbind();");
else if(35674===u||35675===u||35676===u)f=a.global.def("new Float32Array(["+Array.prototype.slice.call(f)+"])"),w=2,35675===u?w=3:35676===u&&(w=4),b(v,".uniformMatrix",w,"fv(",m,",false,",f,");");else{switch(u){case 5126:k="1f";break;case 35664:k="2f";break;case 35665:k="3f";break;case 35666:k="4f";break;case 35670:k="1i";break;case 5124:k="1i";break;case 35671:k="2i";break;case 35667:k="2i";break;case 35672:k="3i";break;case 35668:k="3i";break;case 35673:k="4i";break;case 35669:k="4i"}b(v,".uniform",
k,"(",m,",",z(f)?Array.prototype.slice.call(f):f,");")}continue}else t=w.append(a,b)}else{if(!e(C))continue;t=b.def(h.uniforms,"[",r.id(f),"]")}f=1;switch(u){case 35678:case 35680:u=b.def(t,"._texture");b(v,".uniform1i(",m,",",u,".bind());");b.exit(u,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2i";f=2;break;case 35668:case 35672:k="3i";f=3;break;case 35669:case 35673:k="4i";f=4;break;case 5126:k="1f";break;case 35664:k="2f";f=2;break;case 35665:k="3f";f=3;break;
case 35666:k="4f";f=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}b(v,".uniform",k,"(",m,",");if("M"===k.charAt(0)){var m=Math.pow(u-35674+2,2),X=a.global.def("new Float32Array(",m,")");b("false,(Array.isArray(",t,")||",t," instanceof Float32Array)?",t,":(",q(m,function(a){return X+"["+a+"]="+t+"["+a+"]"}),",",X,")")}else 1<f?b(q(f,function(a){return t+"["+a+"]"})):b(t);b(");")}}function ra(a,b,d,c){function e(g){var h=m[g];return h?h.contextDep&&c.contextDynamic||
h.propDep?h.append(a,d):h.append(a,b):b.def(p,".",g)}function h(){function a(){d(t,".drawElementsInstancedANGLE(",[r,w,X,u+"<<(("+X+"-5121)>>1)",z],");")}function b(){d(t,".drawArraysInstancedANGLE(",[r,u,w,z],");")}f?x?a():(d("if(",f,"){"),a(),d("}else{"),b(),d("}")):b()}function v(){function a(){d(q+".drawElements("+[r,w,X,u+"<<(("+X+"-5121)>>1)"]+");")}function b(){d(q+".drawArrays("+[r,u,w]+");")}f?x?a():(d("if(",f,"){"),a(),d("}else{"),b(),d("}")):b()}var k=a.shared,q=k.gl,p=k.draw,m=c.draw,
f=function(){var e=m.elements,g=b;if(e){if(e.contextDep&&c.contextDynamic||e.propDep)g=d;e=e.append(a,g)}else e=g.def(p,".","elements");e&&g("if("+e+")"+q+".bindBuffer(34963,"+e+".buffer.buffer);");return e}(),r=e("primitive"),u=e("offset"),w=function(){var e=m.count,g=b;if(e){if(e.contextDep&&c.contextDynamic||e.propDep)g=d;e=e.append(a,g)}else e=g.def(p,".","count");return e}();if("number"===typeof w){if(0===w)return}else d("if(",w,"){"),d.exit("}");var z,t;va&&(z=e("instances"),t=a.instancing);
var X=f+".type",x=m.elements&&g(m.elements);va&&("number"!==typeof z||0<=z)?"string"===typeof z?(d("if(",z,">0){"),h(),d("}else if(",z,"<0){"),v(),d("}")):h():v()}function wa(a,b,d,c,e){b=W();e=b.proc("body",e);va&&(b.instancing=e.def(b.shared.extensions,".angle_instanced_arrays"));a(b,e,d,c);return b.compile().body}function xa(a,b,d,c){U(a,b);Z(a,b,d,c.attributes,function(){return!0});qa(a,b,d,c.uniforms,function(){return!0});ra(a,b,b,d)}function Da(a,b){var d=a.proc("draw",1);U(a,d);I(a,d,b.context);
R(a,d,b.framebuffer);ha(a,d,b);ua(a,d,b.state);Y(a,d,b,!1,!0);var c=b.shader.progVar.append(a,d);d(a.shared.gl,".useProgram(",c,".program);");if(b.shader.program)xa(a,d,b,b.shader.program);else{var e=a.global.def("{}"),g=d.def(c,".id"),h=d.def(e,"[",g,"]");d(a.cond(h).then(h,".call(this,a0);")["else"](h,"=",e,"[",g,"]=",a.link(function(d){return wa(xa,a,b,d,1)}),"(",c,");",h,".call(this,a0);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty=true;")}function ya(a,b,d,c){function e(){return!0}
a.batchId="a1";U(a,b);Z(a,b,d,c.attributes,e);qa(a,b,d,c.uniforms,e);ra(a,b,b,d)}function za(a,b,d,c){function e(a){return a.contextDep&&h||a.propDep}function g(a){return!e(a)}U(a,b);var h=d.contextDep,v=b.def(),k=b.def();a.shared.props=k;a.batchId=v;var q=a.scope(),p=a.scope();b(q.entry,"for(",v,"=0;",v,"<","a1",";++",v,"){",k,"=","a0","[",v,"];",p,"}",q.exit);d.needsContext&&I(a,p,d.context);d.needsFramebuffer&&R(a,p,d.framebuffer);ua(a,p,d.state,e);d.profile&&e(d.profile)&&Y(a,p,d,!1,!0);c?(Z(a,
q,d,c.attributes,g),Z(a,p,d,c.attributes,e),qa(a,q,d,c.uniforms,g),qa(a,p,d,c.uniforms,e),ra(a,q,p,d)):(b=a.global.def("{}"),c=d.shader.progVar.append(a,p),k=p.def(c,".id"),q=p.def(b,"[",k,"]"),p(a.shared.gl,".useProgram(",c,".program);","if(!",q,"){",q,"=",b,"[",k,"]=",a.link(function(b){return wa(ya,a,d,b,2)}),"(",c,");}",q,".call(this,a0[",v,"],",v,");"))}function sa(a,b){function d(a){return a.contextDep&&e||a.propDep}var c=a.proc("batch",2);a.batchId="0";U(a,c);var e=!1,g=!0;Object.keys(b.context).forEach(function(a){e=
e||b.context[a].propDep});e||(I(a,c,b.context),g=!1);var h=b.framebuffer,v=!1;h?(h.propDep?e=v=!0:h.contextDep&&e&&(v=!0),v||R(a,c,h)):R(a,c,null);b.state.viewport&&b.state.viewport.propDep&&(e=!0);ha(a,c,b);ua(a,c,b.state,function(a){return!d(a)});b.profile&&d(b.profile)||Y(a,c,b,!1,"a1");b.contextDep=e;b.needsContext=g;b.needsFramebuffer=v;g=b.shader.progVar;if(g.contextDep&&e||g.propDep)za(a,c,b,null);else if(g=g.append(a,c),c(a.shared.gl,".useProgram(",g,".program);"),b.shader.program)za(a,c,
b,b.shader.program);else{var h=a.global.def("{}"),v=c.def(g,".id"),k=c.def(h,"[",v,"]");c(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",v,"]=",a.link(function(d){return wa(za,a,b,d,2)}),"(",g,");",k,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&c(a.shared.current,".dirty=true;")}function Aa(a,d){function c(b){var h=d.shader[b];h&&e.set(g.shader,"."+b,h.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var g=a.shared,h=g.current;I(a,e,d.context);d.framebuffer&&d.framebuffer.append(a,
e);b(Object.keys(d.state)).forEach(function(b){var c=d.state[b].append(a,e);z(c)?c.forEach(function(d,c){e.set(a.next[b],"["+c+"]",d)}):e.set(g.next,"."+b,c)});Y(a,e,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var c=d.draw[b];c&&e.set(g.draw,"."+b,""+c.append(a,e))});Object.keys(d.uniforms).forEach(function(b){e.set(g.uniforms,"["+r.id(b)+"]",d.uniforms[b].append(a,e))});Object.keys(d.attributes).forEach(function(b){var c=d.attributes[b].append(a,e),g=a.scopeAttrib(b);
Object.keys(new ca).forEach(function(a){e.set(g,"."+a,c[a])})});c("vert");c("frag");0<Object.keys(d.state).length&&(e(h,".dirty=true;"),e.exit(h,".dirty=true;"));e("a1(",a.shared.context,",a0,0);")}var ca=A.Record,v={add:32774,subtract:32778,"reverse subtract":32779};f.ext_blend_minmax&&(v.min=32775,v.max=32776);var va=f.angle_instanced_arrays,X=f.webgl_draw_buffers,ja={dirty:!0,profile:V.profile},ta={},Ba=[],ka={},la={};L("dither",3024);L("blend.enable",3042);K("blend.color","blendColor",[0,0,0,
0]);K("blend.equation","blendEquationSeparate",[32774,32774]);K("blend.func","blendFuncSeparate",[1,0,1,0]);L("depth.enable",2929,!0);K("depth.func","depthFunc",513);K("depth.range","depthRange",[0,1]);K("depth.mask","depthMask",!0);K("colorMask","colorMask",[!0,!0,!0,!0]);L("cull.enable",2884);K("cull.face","cullFace",1029);K("frontFace","frontFace",2305);K("lineWidth","lineWidth",1);L("polygonOffset.enable",32823);K("polygonOffset.offset","polygonOffset",[0,0]);L("sample.alpha",32926);L("sample.enable",
32928);K("sample.coverage","sampleCoverage",[1,!1]);L("stencil.enable",2960);K("stencil.mask","stencilMask",-1);K("stencil.func","stencilFunc",[519,0,-1]);K("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);K("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);L("scissor.enable",3089);K("scissor.box","scissor",[0,0,m.drawingBufferWidth,m.drawingBufferHeight]);K("viewport","viewport",[0,0,m.drawingBufferWidth,m.drawingBufferHeight]);var Ea={gl:m,context:S,strings:r,next:ta,current:ja,
draw:F,elements:G,buffer:n,shader:N,attributes:A.state,uniforms:P,framebuffer:O,extensions:f,timer:oa,isBufferArgs:a},Ca={primTypes:k,compareFuncs:y,blendFuncs:u,blendEquations:v,stencilOps:x,glTypes:t,orientationType:p};X&&(Ca.backBuffer=[1029],Ca.drawBuffer=q(l.maxDrawbuffers,function(a){return 0===a?[0]:q(a,function(a){return 36064+a})}));var Fa=0;return{next:ta,current:ja,procs:function(){var a=W(),b=a.proc("poll"),d=a.proc("refresh"),c=a.block();b(c);d(c);var e=a.shared,g=e.gl,h=e.next,v=e.current;
c(v,".dirty=false;");R(a,b);d(e.framebuffer,".dirty=true;");R(a,d);Object.keys(ka).forEach(function(e){var k=ka[e],q=c.def(h,".",e),p=a.block();p("if(",q,"){",g,".enable(",k,")}else{",g,".disable(",k,")}",v,".",e,"=",q,";");d(p);b("if(",q,"!==",v,".",e,"){",p,"}")});Object.keys(la).forEach(function(e){var k=la[e],p=ja[e],m,f,r=a.block();r(g,".",k,"(");z(p)?(k=p.length,m=a.global.def(h,".",e),f=a.global.def(v,".",e),r(q(k,function(a){return m+"["+a+"]"}),");",q(k,function(a){return f+"["+a+"]="+m+
"["+a+"];"}).join("")),b("if(",q(k,function(a){return m+"["+a+"]!=="+f+"["+a+"]"}).join("||"),"){",r,"}")):(m=c.def(h,".",e),f=c.def(v,".",e),r(m,");",v,".",e,"=",m,";"),b("if(",m,"!==",f,"){",r,"}"));d(r)});return a.compile()}(),compile:function(a,b,d,c,e){var g=W();g.stats=g.link(e);e=pa(a);var h=ga(a,e),v=ia(a),k=T(a),q=na(a),p=h.viewport;p&&(k.viewport=p);p=Q("scissor.box");(h=h[p])&&(k[p]=h);h=0<Object.keys(k).length;e={framebuffer:e,draw:v,shader:q,state:k,dirty:h};e.profile=ma(a);e.uniforms=
da(d);e.attributes=ea(b);e.context=fa(c);Da(g,e);Aa(g,e);sa(g,e);return g.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(f,l,n){function a(a,b){this.id=g++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var e=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&e===c&&('"'===e||"'"===e))return['"'+a.substr(1,a.length-2).replace(/\\/g,
"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,e.index)).concat(b(e[1])).concat(b(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(c=0;c<e.length;++c)a=a.concat(b(e[c]));return a}function h(a){return"["+b(a).join("][")+"]"}var g=0;l.exports={define:function(b,e){switch(typeof e){case "boolean":case "number":case "string":return new a(b,h(e+""));case "undefined":return new a(b|
128,null)}},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(b,e){if(b instanceof a){if(b.type&128)return new a(b.type&-129,h(e))}else if("function"===typeof b)return new a(0,b);return b},accessor:h}},{}],10:[function(f,l,n){var a=f("./util/is-typed-array"),b=f("./util/is-ndarray"),h=f("./util/values"),g=f("./constants/primitives.json"),d=f("./constants/usage.json");l.exports=function(e,c,q,f){function m(a){this.id=w++;t[this.id]=this;this.buffer=a;this.primType=
4;this.type=this.vertCount=0}function z(d,e,g,h,k,m,f){(m=f)||a(e)&&(!b(e)||a(e.data))||(m=c.oes_element_index_uint?5125:5123);d.buffer.bind();q._initBuffer(d.buffer,e,g,m,3);e=f;if(!f){switch(d.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}d.buffer.dtype=e}d.type=e;0>k&&(k=d.buffer.byteLength,5123===e?k>>=1:5125===e&&(k>>=2));d.vertCount=k;k=h;0>h&&(k=4,h=d.buffer.dimension,1===h&&(k=0),2===h&&(k=1),3===h&&(k=4));d.primType=k}function k(a){f.elementsCount--;
delete t[a.id];a.buffer.destroy();a.buffer=null}var t={},w=0,u={uint8:5121,uint16:5123};c.oes_element_index_uint&&(u.uint32=5125);m.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(c){function h(c){if(c)if("number"===typeof c)w(c),t.primType=4,t.vertCount=c|0,t.type=5121;else{var k=null,q=35044,m=-1,f=-1,r=0,l=0;Array.isArray(c)||a(c)||b(c)?k=c:("data"in c&&(k=c.data),"usage"in c&&(q=d[c.usage]),"primitive"in c&&(m=g[c.primitive]),"count"in c&&(f=c.count|0),"length"in
c&&(r=c.length|0),"type"in c&&(l=u[c.type]));k?z(t,k,q,m,f,r,l):(c=t.buffer,c.bind(),e.bufferData(34963,r,q),c.dtype=l||5121,c.usage=q,c.dimension=3,c.byteLength=r,t.primType=0>m?4:m,t.vertCount=0>f?0:f,t.type=c.dtype)}else w(),t.primType=4,t.vertCount=0,t.type=5121;return h}var w=q.create(null,34963,!0),t=new m(w._buffer);f.elementsCount++;h(c);h._reglType="elements";h._elements=t;h.subdata=function(a,b){w.subdata(a,b);return h};h.destroy=function(){k(t)};return h},createStream:function(a){var b=
l.pop();b||(b=new m(q.create(null,34963,!0)._buffer));z(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){l.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof m?a._elements:null},clear:function(){h(t).forEach(k)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(f,l,n){l.exports=function(a,b){function h(b){b=b.toLowerCase();if(b in g)return!0;var d;try{d=g[b]=a.getExtension(b)}catch(e){}return!!d}
for(var g={},d=0;d<b.extensions.length;++d){var e=b.extensions[d];if(!h(e))return b.onDestroy(),b.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(h);return{extensions:g,refresh:function(){b.extensions.forEach(h);b.optionalExtensions.forEach(h)}}}},{}],12:[function(f,l,n){var a=f("./util/values"),b=f("./util/extend"),h=[];h[6406]=1;h[6409]=1;h[6410]=2;h[6407]=3;h[6408]=4;var g=[];g[5121]=1;
g[5126]=4;g[36193]=2;l.exports=function(d,e,c,q,f,m){function z(a,b,d){this.target=a;this.texture=b;this.renderbuffer=d;var c=a=0;b?(a=b.width,c=b.height):d&&(a=d.width,c=d.height);this.width=a;this.height=c}function k(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function t(a,b,d){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function w(a,b){b?b.texture?d.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,
0):d.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer):d.framebufferTexture2D(36160,a,3553,null,0)}function u(a){var b=3553,d=null,c=null,e=a;"object"===typeof a&&(e=a.data);a=e._reglType;"texture2d"===a?d=e:"textureCube"===a?d=e:"renderbuffer"===a&&(c=e,b=36161);return new z(b,d,c)}function l(a,b,d,c,e){if(d)return a=q.create2D({width:a,height:b,format:c,type:e}),a._texture.refCount=0,new z(3553,a,null);a=f.create({width:a,height:b,format:c});a._renderbuffer.refCount=
0;return new z(36161,null,a)}function x(a){return a&&(a.texture||a.renderbuffer)}function p(a,b,d){a&&(a.texture?a.texture.resize(b,d):a.renderbuffer&&a.renderbuffer.resize(b,d))}function n(){this.id=O++;P[this.id]=this;this.framebuffer=d.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function B(a){a.colorAttachments.forEach(k);k(a.depthAttachment);k(a.stencilAttachment);k(a.depthStencilAttachment)}
function D(a){d.deleteFramebuffer(a.framebuffer);a.framebuffer=null;m.framebufferCount--;delete P[a.id]}function E(a){var b;d.bindFramebuffer(36160,a.framebuffer);var e=a.colorAttachments;for(b=0;b<e.length;++b)w(36064+b,e[b]);for(b=e.length;b<c.maxColorAttachments;++b)w(36064+b,null);w(36096,a.depthAttachment);w(36128,a.stencilAttachment);w(33306,a.depthStencilAttachment);d.checkFramebufferStatus(36160);d.bindFramebuffer(36160,H.next);H.current=H.next}var H={current:null,next:null,dirty:!1},M=["rgba"],
G=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&G.push("srgba");e.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");e.webgl_color_buffer_float&&G.push("rgba32f");var J=["uint8"];e.oes_texture_half_float&&J.push("half float");e.oes_texture_float&&J.push("float");var O=0,P={};return b(H,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof n)?a:null},create:function(a,b){function d(a,b){var k,q=0,m=0,p=!0,f=!0;k=null;var r=!0,w="rgba",
z="uint8",n=1,C=null,A=null,D=null,H=!1;if("number"===typeof a)q=a|0,m=b|0||q;else if(a){"shape"in a?(m=a.shape,q=m[0],m=m[1]):("radius"in a&&(q=m=a.radius),"width"in a&&(q=a.width),"height"in a&&(m=a.height));if("color"in a||"colors"in a)k=a.color||a.colors,Array.isArray(k);k||("colorCount"in a&&(n=a.colorCount|0),"colorTexture"in a&&(r=!!a.colorTexture,w="rgba4"),"colorType"in a&&(z=a.colorType,r||("half float"===z?e.ext_color_buffer_half_float&&(w="rgba16f"):"float"===z&&e.webgl_color_buffer_float&&
(w="rgba32f"))),"colorFormat"in a&&(w=a.colorFormat,0<=M.indexOf(w)?r=!0:0<=G.indexOf(w)&&(r=!1)));if("depthTexture"in a||"depthStencilTexture"in a)H=!(!a.depthTexture&&!a.depthStencilTexture);"depth"in a&&("boolean"===typeof a.depth?p=a.depth:(C=a.depth,f=!1));"stencil"in a&&("boolean"===typeof a.stencil?f=a.stencil:(A=a.stencil,p=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?p=f=a.depthStencil:(D=a.depthStencil,f=p=!1))}else q=m=1;var I=null,R=null,ha=null,J=null;if(Array.isArray(k))I=
k.map(u);else if(k)I=[u(k)];else for(I=Array(n),k=0;k<n;++k)I[k]=l(q,m,r,w,z);q=q||I[0].width;m=m||I[0].height;C?R=u(C):p&&!f&&(R=l(q,m,H,"depth","uint32"));A?ha=u(A):f&&!p&&(ha=l(q,m,!1,"stencil","uint8"));D?J=u(D):!C&&!A&&f&&p&&(J=l(q,m,H,"depth stencil","depth stencil"));p=null;for(k=0;k<I.length;++k)t(I[k],q,m),I[k]&&I[k].texture&&(f=h[I[k].texture._texture.format]*g[I[k].texture._texture.type],null===p&&(p=f));t(R,q,m);t(ha,q,m);t(J,q,m);B(c);c.width=q;c.height=m;c.colorAttachments=I;c.depthAttachment=
R;c.stencilAttachment=ha;c.depthStencilAttachment=J;d.color=I.map(x);d.depth=x(R);d.stencil=x(ha);d.depthStencil=x(J);d.width=c.width;d.height=c.height;E(c);return d}var c=new n;m.framebufferCount++;d(a,b);d.resize=function(a,b){var e=a|0,g=b|0||e;if(e===c.width&&g===c.height)return d;for(var h=c.colorAttachments,k=0;k<h.length;++k)p(h[k],e,g);p(c.depthAttachment,e,g);p(c.stencilAttachment,e,g);p(c.depthStencilAttachment,e,g);c.width=d.width=e;c.height=d.height=g;E(c);return d};d._reglType="framebuffer";
d._framebuffer=c;d.destroy=function(){D(c);B(c)};return d},clear:function(){a(P).forEach(D)}})}},{"./util/extend":23,"./util/values":31}],13:[function(f,l,n){l.exports=function(a,b){var h=1;b.ext_texture_filter_anisotropic&&(h=a.getParameter(34047));var g=1,d=1;b.webgl_draw_buffers&&(g=a.getParameter(34852),d=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),
subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:h,maxDrawbuffers:g,maxColorAttachments:d,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),
maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(f,l,n){var a=f("./util/is-typed-array");l.exports=function(b,h,g){return function(d){var e=0,c=0,q=g.framebufferWidth,f=g.framebufferHeight,m=null;a(d)?m=d:2===arguments.length?(q=arguments[0]|0,f=arguments[1]|0):d&&(e=d.x|0,c=d.y|0,q=d.width||
g.framebufferWidth,f=d.height||g.framebufferHeight,m=d.data||null);h();m=m||new Uint8Array(q*f*4);b.pixelStorei(3333,4);b.readPixels(e,c,q,f,6408,5121,m);return m}}},{"./util/is-typed-array":26}],15:[function(f,l,n){var a=f("./util/values");l.exports=function(b,h,g,d){function e(a){this.id=f++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0}function c(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete m[a.id];
d.renderbufferCount--}var q={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};h.ext_srgb&&(q.srgba=35907);h.ext_color_buffer_half_float&&(q.rgba16f=34842,q.rgb16f=34843);h.webgl_color_buffer_float&&(q.rgba32f=34836);var f=0,m={};e.prototype.decRef=function(){0>=--this.refCount&&c(this)};return{create:function(a,c){function g(a,d){var c=0,e=0,k=32854;"object"===typeof a&&a?("shape"in a?(e=a.shape,c=e[0]|0,e=e[1]|0):("radius"in a&&(c=e=a.radius|0),"width"in a&&
(c=a.width|0),"height"in a&&(e=a.height|0)),"format"in a&&(k=q[a.format])):"number"===typeof a?(c=a|0,e="number"===typeof d?d|0:c):a||(c=e=1);if(c!==h.width||e!==h.height||k!==h.format)return g.width=h.width=c,g.height=h.height=e,h.format=k,b.bindRenderbuffer(36161,h.renderbuffer),b.renderbufferStorage(36161,k,c,e),g}var h=new e(b.createRenderbuffer());m[h.id]=h;d.renderbufferCount++;g(a,c);g.resize=function(a,d){var c=a|0,e=d|0||c;if(c===h.width&&e===h.height)return g;g.width=h.width=c;g.height=
h.height=e;b.bindRenderbuffer(36161,h.renderbuffer);b.renderbufferStorage(36161,h.format,c,e);return g};g._reglType="renderbuffer";g._renderbuffer=h;g.destroy=function(){h.decRef()};return g},clear:function(){a(m).forEach(c)}}}},{"./util/values":31}],16:[function(f,l,n){var a=f("./util/values");l.exports=function(b,h,g){function d(a,b,d,c){this.name=a;this.id=b;this.location=d;this.info=c}function e(a,b){for(var d=0;d<a.length;++d)if(a[d].id===b.id){a[d].location=b.location;return}a.push(b)}function c(a,
d,c){c=35632===a?f:m;var e=c[d];if(!e){var g=h.str(d),e=b.createShader(a);b.shaderSource(e,g);b.compileShader(e);c[d]=e}return e}function q(a,b){this.id=t++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[]}var f={},m={},z={},k=[],t=0;return{clear:function(){var d=b.deleteShader.bind(b);a(f).forEach(d);f={};a(m).forEach(d);m={};k.forEach(function(a){b.deleteProgram(a.program)});k.length=0;z={};g.shaderCount=0},program:function(a,m,f){g.shaderCount++;(f=z[m])||(f=z[m]=
{});var r=f[a];if(!r){var p=r=new q(m,a),t,l;t=c(35632,p.fragId);l=c(35633,p.vertId);m=p.program=b.createProgram();b.attachShader(m,t);b.attachShader(m,l);b.linkProgram(m);var n=b.getProgramParameter(m,35718),E=p.uniforms;for(t=0;t<n;++t)if(l=b.getActiveUniform(m,t))if(1<l.size)for(var H=0;H<l.size;++H){var M=l.name.replace("[0]","["+H+"]");e(E,new d(M,h.id(M),b.getUniformLocation(m,M),l))}else e(E,new d(l.name,h.id(l.name),b.getUniformLocation(m,l.name),l));n=b.getProgramParameter(m,35721);p=p.attributes;
for(t=0;t<n;++t)(l=b.getActiveAttrib(m,t))&&e(p,new d(l.name,h.id(l.name),b.getAttribLocation(m,l.name),l));f[a]=r;k.push(r)}return r},shader:c,frag:null,vert:null}}},{"./util/values":31}],17:[function(f,l,n){l.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0}}},{}],18:[function(f,l,n){l.exports=function(){var a={"":0},b=[""];return{id:function(h){var g=a[h];if(g)return g;g=a[h]=b.length;b.push(h);return g},str:function(a){return b[a]}}}},
{}],19:[function(f,l,n){function a(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){return Array.isArray(a)&&0!==a.length&&k(a[0])?!0:!1}function h(a){return Object.prototype.toString.call(a)}function g(d){if(!d)return!1;var c=h(d);return 0<=x.indexOf(c)?!0:a(d)||b(d)||r(d)}function d(a,b){36193===a.type?(a.data=z(b),m.freeType(b)):a.data=b}var e=f("./util/extend"),c=f("./util/values"),q=f("./util/is-typed-array"),r=f("./util/is-ndarray"),m=f("./util/pool"),z=f("./util/to-half-float"),
k=f("./util/is-array-like");n=f("./constants/arraytypes.json");var t=f("./constants/arraytypes.json"),w=[9984,9986,9985,9987],u=[0,6409,6410,6407,6408],y={};y[6409]=y[6406]=y[6402]=1;y[34041]=y[6410]=2;y[6407]=3;y[6408]=4;var x=Object.keys(n).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]);l.exports=function(f,l,n,x,E,H){function M(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=
this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function G(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function J(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(a.flipY=
b.flipY);"alignment"in b&&(a.unpackAlignment=b.alignment);"colorSpace"in b&&(a.colorSpace=ua[b.colorSpace]);"type"in b&&(a.type=U[b.type]);var d=a.width,c=a.height,e=a.channels,g=!1;"shape"in b?(d=b.shape[0],c=b.shape[1],3===b.shape.length&&(e=b.shape[2],g=!0)):("radius"in b&&(d=c=b.radius),"width"in b&&(d=b.width),"height"in b&&(c=b.height),"channels"in b&&(e=b.channels,g=!0));a.width=d|0;a.height=c|0;a.channels=e|0;d=!1;"format"in b&&(d=b.format,c=a.internalformat=Y[d],a.format=wa[c],d in U&&!("type"in
b)&&(a.type=U[d]),d in Z&&(a.compressed=!0),d=!0);!g&&d?a.channels=y[a.format]:g&&!d&&a.channels!==u[a.format]&&(a.format=a.internalformat=u[a.channels])}}function O(a){f.pixelStorei(37440,a.flipY);f.pixelStorei(37441,a.premultiplyAlpha);f.pixelStorei(37443,a.colorSpace);f.pixelStorei(3317,a.unpackAlignment)}function P(){M.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function A(c,e){var f=null;g(e)?f=e:e&&(J(c,e),"x"in e&&(c.xOffset=e.x|
0),"y"in e&&(c.yOffset=e.y|0),g(e.data)&&(f=e.data));if(e.copy){var p=E.viewportWidth,l=E.viewportHeight;c.width=c.width||p-c.xOffset;c.height=c.height||l-c.yOffset;c.needsCopy=!0}else if(!f)c.width=c.width||1,c.height=c.height||1;else if(q(f))c.data=f,"type"in e||5121!==c.type||(c.type=t[Object.prototype.toString.call(f)]|0);else if(a(f)){p=f;l=c.width*c.height*c.channels;switch(c.type){case 5121:case 5123:case 5125:case 5126:l=m.allocType(c.type,l);l.set(p);c.data=l;break;case 36193:c.data=z(p)}c.alignment=
1;c.needsFree=!0}else if(r(f)){p=f.data;Array.isArray(p)||5121!==c.type||(c.type=t[Object.prototype.toString.call(p)]|0);var l=f.shape,w=f.stride,n,x,y,B;3===l.length?(y=l[2],B=w[2]):B=y=1;n=l[0];x=l[1];l=w[0];w=w[1];c.alignment=1;c.width=n;c.height=x;c.channels=y;c.format=c.internalformat=u[y];c.needsFree=!0;n=B;f=f.offset;y=c.width;B=c.height;x=c.channels;for(var A=m.allocType(36193===c.type?5126:c.type,y*B*x),R=0,C=0;C<B;++C)for(var D=0;D<y;++D)for(var F=0;F<x;++F)A[R++]=p[l*D+w*C+n*F+f];d(c,A)}else if("[object HTMLCanvasElement]"===
h(f)||"[object CanvasRenderingContext2D]"===h(f))"[object HTMLCanvasElement]"===h(f)?c.element=f:c.element=f.canvas,c.width=c.element.width,c.height=c.element.height;else if("[object HTMLImageElement]"===h(f))c.element=f,c.width=f.naturalWidth,c.height=f.naturalHeight;else if("[object HTMLVideoElement]"===h(f))c.element=f,c.width=f.videoWidth,c.height=f.videoHeight,c.needsPoll=!0;else if(b(f)){p=f[0].length;l=f.length;w=1;if(k(f[0][0])){n=w=f[0][0].length;y=m.allocType(36193===c.type?5126:c.type,
p*l*n);for(x=B=0;x<l;++x)for(A=f[x],R=0;R<p;++R)for(C=A[R],D=0;D<n;++D)y[B++]=C[D];d(c,y)}else{n=m.allocType(36193===c.type?5126:c.type,p*l);for(B=y=0;B<l;++B)for(x=f[B],A=0;A<p;++A)n[y++]=x[A];d(c,n)}c.alignment=1;c.width=p;c.height=l;c.channels=w;c.format=c.internalformat=u[w];c.needsFree=!0}}function N(a,b,c,d,e){var g=a.element,h=a.data,k=a.internalformat,q=a.format,m=a.type,r=a.width,l=a.height;O(a);g?f.texSubImage2D(b,e,c,d,q,m,g):a.compressed?f.compressedTexSubImage2D(b,e,c,d,k,r,l,h):a.needsCopy?
(x(),f.copyTexSubImage2D(b,e,c,d,a.xOffset,a.yOffset,r,l)):f.texSubImage2D(b,e,c,d,r,l,q,m,h)}function F(){return xa.pop()||new P}function S(a){a.needsFree&&m.freeType(a.data);P.call(a);xa.push(a)}function oa(){M.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function V(a,b,c){var d=a.images[0]=F();a.mipmask=1;d.width=a.width=b;d.height=a.height=c}function Q(a,b){var c=null;if(g(b))c=a.images[0]=F(),G(c,a),A(c,b),a.mipmask=1;else if(J(a,b),Array.isArray(b.mipmap))for(var d=
b.mipmap,e=0;e<d.length;++e)c=a.images[e]=F(),G(c,a),c.width>>=e,c.height>>=e,A(c,d[e]),a.mipmask|=1<<e;else c=a.images[0]=F(),G(c,a),A(c,b),a.mipmask=1;G(a,a.images[0])}function L(a,b){for(var c=a.images,d=0;d<c.length&&c[d];++d){var e=c[d],g=b,h=d,k=e.element,q=e.data,m=e.internalformat,r=e.format,l=e.type,t=e.width,z=e.height;O(e);k?f.texImage2D(g,h,r,r,l,k):e.compressed?f.compressedTexImage2D(g,h,m,t,z,0,q):e.needsCopy?(x(),f.copyTexImage2D(g,h,r,e.xOffset,e.yOffset,t,z,0)):f.texImage2D(g,h,r,
t,z,0,r,l,q)}}function K(){var a=Da.pop()||new oa;M.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function W(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&S(b[c]),b[c]=null;Da.push(a)}function ma(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function pa(a,b){"min"in b&&(a.minFilter=ha[b.min],0<=w.indexOf(a.minFilter)&&(a.genMipmaps=!0));"mag"in b&&(a.magFilter=R[b.mag]);var c=a.wrapS,d=a.wrapT;if("wrap"in
b){var e=b.wrap;"string"===typeof e?c=d=I[e]:Array.isArray(e)&&(c=I[e[0]],d=I[e[1]])}else"wrapS"in b&&(c=I[b.wrapS]),"wrapT"in b&&(d=I[b.wrapT]);a.wrapS=c;a.wrapT=d;"anisotropic"in b&&(a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":a.mipmapHint=fa[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":a.genMipmaps=!1,c=!0}!c||"min"in b||(a.minFilter=9984)}}function ga(a,b){f.texParameteri(b,10241,a.minFilter);f.texParameteri(b,
10240,a.magFilter);f.texParameteri(b,10242,a.wrapS);f.texParameteri(b,10243,a.wrapT);l.ext_texture_filter_anisotropic&&f.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(f.hint(33170,a.mipmapHint),f.generateMipmap(b))}function na(){var a=ya.pop()||new ma;ma.call(a);return a}function ia(a){M.call(this);this.mipmask=0;this.internalformat=6408;this.id=za++;this.refCount=1;this.target=a;this.texture=f.createTexture();this.unit=-1;this.bindCount=0}function T(a){f.activeTexture(33984);f.bindTexture(a.target,
a.texture)}function da(){var a=ca[0];a?f.bindTexture(a.target,a.texture):f.bindTexture(3553,null)}function ea(a){var b=a.texture,c=a.unit,d=a.target;0<=c&&(f.activeTexture(33984+c),f.bindTexture(d,null),ca[c]=null);f.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete sa[a.id];H.textureCount--}var fa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},I={repeat:10497,clamp:33071,mirror:33648},R={nearest:9728,linear:9729},ha=e({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},R),ua={none:0,browser:37444},U={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Y={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};l.ext_srgb&&(Y.srgb=35904,Y.srgba=35906);l.oes_texture_float&&(U["float"]=5126);l.oes_texture_half_float&&(U.float16=U["half float"]=36193);l.webgl_depth_texture&&(e(Y,{depth:6402,"depth stencil":34041}),e(U,{uint16:5123,uint32:5125,
"depth stencil":34042}));l.webgl_compressed_texture_s3tc&&e(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&e(Z,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&e(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(Z["rgb etc1"]=36196);var qa=Array.prototype.slice.call(f.getParameter(34467));
Object.keys(Z).forEach(function(a){var b=Z[a];0<=qa.indexOf(b)&&(Y[a]=b)});var ra=Object.keys(Y);n.textureFormats=ra;var wa=ra.reduce(function(a,b){var c=Y[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),xa=[],Da=[],ya=[],za=0,sa={},Aa=n.maxTextureUnits,ca=Array(Aa).map(function(){return null});e(ia.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<Aa;++b){var c=ca[b];if(c){if(0<
c.bindCount)continue;c.unit=-1}ca[b]=this;a=b;break}this.unit=a;f.activeTexture(33984+a);f.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ea(this)}});return{create2D:function(a,b){function c(a,b){var e=na(),g=K();"number"===typeof a?"number"===typeof b?V(g,a|0,b|0):V(g,a|0,a|0):a?(pa(e,a),Q(g,a)):V(g,1,1);e.genMipmaps&&(g.mipmask=(g.width<<1)-1);d.mipmask=g.mipmask;G(d,g);d.internalformat=g.internalformat;c.width=g.width;c.height=
g.height;T(d);L(g,3553);ga(e,3553);da();ya.push(e);W(g);return c}var d=new ia(3553);sa[d.id]=d;H.textureCount++;c(a,b);c.subimage=function(a,b,e,g){b|=0;e|=0;g|=0;var h=F();G(h,d);h.width>>=g;h.height>>=g;h.width-=b;h.height-=e;A(h,a);T(d);N(h,3553,b,e,g);da();S(h);return c};c.resize=function(a,b){var e=a|0,g=b|0||e;if(e===d.width&&g===d.height)return c;c.width=d.width=e;c.height=d.height=g;T(d);f.texImage2D(3553,0,d.format,e,g,0,d.format,d.type,null);da();return c};c._reglType="texture2d";c._texture=
d;c.destroy=function(){d.decRef()};return c},createCube:function(a,b,c,d,e,g){function h(a,b,c,d,e,g){var f,m=na();for(f=0;6>f;++f)q[f]=K();if("number"===typeof a||!a)for(a=a|0||1,f=0;6>f;++f)V(q[f],a,a);else if("object"===typeof a)if(b)Q(q[0],a),Q(q[1],b),Q(q[2],c),Q(q[3],d),Q(q[4],e),Q(q[5],g);else if(pa(m,a),J(k,a),"faces"in a)for(a=a.faces,f=0;6>f;++f)G(q[f],k),Q(q[f],a[f]);else for(f=0;6>f;++f)Q(q[f],a);G(k,q[0]);k.mipmask=m.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;k.internalformat=q[0].internalformat;
h.width=q[0].width;h.height=q[0].height;T(k);for(f=0;6>f;++f)L(q[f],34069+f);ga(m,34067);da();ya.push(m);for(f=0;6>f;++f)W(q[f]);return h}var k=new ia(34067);sa[k.id]=k;H.cubeCount++;var q=Array(6);h(a,b,c,d,e,g);h.subimage=function(a,b,c,d,e){c|=0;d|=0;e|=0;var g=F();G(g,k);g.width>>=e;g.height>>=e;g.width-=c;g.height-=d;A(g,b);T(k);N(g,34069+a,c,d,e);da();S(g);return h};h.resize=function(a,b){var c=a|0,d=b|0||c;if(c===k.width&&d===k.height)return h;h.width=k.width=c;h.height=k.height=d;T(k);for(var e=
0;6>e;++e)f.texImage2D(34069+e,0,k.format,c,d,0,k.format,k.type,null);da();return h};h._reglType="textureCube";h._texture=k;h.destroy=function(){k.decRef()};return h},clear:function(){for(var a=0;a<Aa;++a)f.activeTexture(33984+a),f.bindTexture(3553,null),ca[a]=null;c(sa).forEach(ea);H.cubeCount=0;H.textureCount=0},getTexture:function(a){return null}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,
"./util/values":31}],20:[function(f,l,n){l.exports=function(a,b){function h(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function g(a,b,c){var d=f.pop()||new h;d.startQueryIndex=a;d.endQueryIndex=b;d.sum=0;d.stats=c;r.push(d)}var d=b.ext_disjoint_timer_query;if(!d)return null;var e=[],c=[],f=[],r=[],m=[],l=[];return{beginQuery:function(a){var b=e.pop()||d.createQueryEXT();d.beginQueryEXT(35007,b);c.push(b);g(c.length-1,c.length,a)},endQuery:function(){d.endQueryEXT(35007)},
pushScopeStats:g,update:function(){var a,b;a=c.length;if(0!==a){l.length=Math.max(l.length,a+1);m.length=Math.max(m.length,a+1);m[0]=0;var g=l[0]=0;for(b=a=0;b<c.length;++b){var h=c[b];d.getQueryObjectEXT(h,34919)?(g+=d.getQueryObjectEXT(h,34918),e.push(h)):c[a++]=h;m[b+1]=g;l[b+1]=a}c.length=a;for(b=a=0;b<r.length;++b){var g=r[b],n=g.startQueryIndex,h=g.endQueryIndex;g.sum+=m[h]-m[n];n=l[n];h=l[h];h===n?(g.stats.gpuTime+=g.sum/1E6,f.push(g)):(g.startQueryIndex=n,g.endQueryIndex=h,r[a++]=g)}r.length=
a}},getNumPendingQueries:function(){return c.length},clear:function(){e.push.apply(e,c);for(var a=0;a<e.length;a++)d.deleteQueryEXT(e[a]);c.length=0;e.length=0}}}},{}],21:[function(f,l,n){l.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(f,l,n){function a(a){return Array.prototype.slice.call(a)}function b(b){return a(b).join("")}var h=f("./extend");l.exports=function(){function g(){var c=[],d=[];return h(function(){c.push.apply(c,
a(arguments))},{def:function(){var b="v"+e++;d.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return b([0<d.length?"var "+d+";":"",b(c)])}})}function d(){function a(d,e){c(d,e,"=",b.def(d,e),";")}var b=g(),c=g(),d=b.toString,e=c.toString;return h(b,{entry:b,exit:c,save:a,set:function(c,d,e){a(c,d);b(c,d,"=",e,";")},toString:function(){return d()+e()}})}var e=0,c=[],f=[],r=g(),m={};return{global:r,link:function(a){for(var b=0;b<f.length;++b)if(f[b]===
a)return c[b];b="g"+e++;c.push(b);f.push(a);return b},block:g,proc:function(a,c){function e(){var a="a"+g.length;g.push(a);return a}var g=[];c=c||0;for(var f=0;f<c;++f)e();var f=d(),q=f.toString;return m[a]=h(f,{arg:e,toString:function(){return b(["function(",g.join(),"){",q(),"}"])}})},scope:d,cond:function(){var c=b(arguments),e=d(),g=d(),f=e.toString,q=g.toString;return h(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){g.apply(g,a(arguments));return this},toString:function(){var a=
q();a&&(a="else{"+a+"}");return b(["if(",c,"){",f(),"}",a])}})},compile:function(){var a=['"use strict";',r,"return {"];Object.keys(m).forEach(function(b){a.push('"',b,'":',m[b].toString(),",")});a.push("}");var d=b(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,c.concat(d)).apply(null,f)}}}},{"./extend":23}],23:[function(f,l,n){l.exports=function(a,b){for(var h=Object.keys(b),g=0;g<h.length;++g)a[h[g]]=b[h[g]];return a}},{}],24:[function(f,l,n){var a=f("./is-typed-array");
l.exports=function(b){return Array.isArray(b)||a(b)}},{"./is-typed-array":26}],25:[function(f,l,n){var a=f("./is-typed-array");l.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":26}],26:[function(f,l,n){var a=f("../constants/arraytypes.json");l.exports=function(b){return Object.prototype.toString.call(b)in a}},{"../constants/arraytypes.json":4}],
27:[function(f,l,n){l.exports=function(a,b){for(var h=Array(a),g=0;g<a;++g)h[g]=b(g);return h}},{}],28:[function(f,l,n){function a(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function b(b){a:{for(var e=16;268435456>=e;e*=16)if(b<=e){b=e;break a}b=0}e=g[a(b)>>2];return 0<e.length?e.pop():new ArrayBuffer(b)}function h(b){g[a(b.byteLength)>>2].push(b)}var g=f("./loop")(8,function(){return[]});l.exports={alloc:b,free:h,allocType:function(a,
e){var c=null;switch(a){case 5120:c=new Int8Array(b(e),0,e);break;case 5121:c=new Uint8Array(b(e),0,e);break;case 5122:c=new Int16Array(b(2*e),0,e);break;case 5123:c=new Uint16Array(b(2*e),0,e);break;case 5124:c=new Int32Array(b(4*e),0,e);break;case 5125:c=new Uint32Array(b(4*e),0,e);break;case 5126:c=new Float32Array(b(4*e),0,e);break;default:return null}return c.length!==e?c.subarray(0,e):c},freeType:function(a){h(a.buffer)}}},{"./loop":27}],29:[function(f,l,n){l.exports="function"===typeof requestAnimationFrame&&
"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(f,l,n){var a=f("./pool"),b=new Float32Array(1),h=new Uint32Array(b.buffer);l.exports=function(g){for(var d=a.allocType(5123,g.length),e=0;e<g.length;++e)if(isNaN(g[e]))d[e]=65535;else if(Infinity===g[e])d[e]=31744;else if(-Infinity===g[e])d[e]=64512;else{b[0]=g[e];var c=h[0],f=c>>>
31<<15,r=(c<<1>>>24)-127,c=c>>13&1023;d[e]=-24>r?f:-14>r?f+(c+1024>>-14-r):15<r?f+31744:f+(r+15<<10)+c}return d}},{"./pool":28}],31:[function(f,l,n){l.exports=function(a){return Object.keys(a).map(function(b){return a[b]})}},{}],32:[function(f,l,n){function a(a,b,g){function h(){var b=window.innerWidth,c=window.innerHeight;a!==document.body&&(c=a.getBoundingClientRect(),b=c.right-c.left,c=c.top-c.bottom);f.width=g*b;f.height=g*c;d(f.style,{width:b+"px",height:c+"px"})}var f=document.createElement("canvas");
d(f.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(f);a===document.body&&(f.style.position="absolute",d(a.style,{margin:0,padding:0}));window.addEventListener("resize",h,!1);h();return{canvas:f,onDestroy:function(){window.removeEventListener("resize",h);a.removeChild(f)}}}function b(a,b){function d(g){try{return a.getContext(g,b)}catch(h){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function h(a){return"string"===typeof a?a.split():a}function g(a){return"string"===
typeof a?document.querySelector(a):a}var d=f("./util/extend");l.exports=function(d){var c=d||{},f,r,m,l;d={};var k=[],t=[],n="undefined"===typeof window?1:window.devicePixelRatio,u=!1,y=function(a){},x=function(){};"string"===typeof c?f=document.querySelector(c):"object"===typeof c&&("string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?f=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(l=c,m=l.canvas):("gl"in c?l=c.gl:
"canvas"in c?m=g(c.canvas):"container"in c&&(r=g(c.container)),"attributes"in c&&(d=c.attributes),"extensions"in c&&(k=h(c.extensions)),"optionalExtensions"in c&&(t=h(c.optionalExtensions)),"onDone"in c&&(y=c.onDone),"profile"in c&&(u=!!c.profile),"pixelRatio"in c&&(n=+c.pixelRatio)));f&&("canvas"===f.nodeName.toLowerCase()?m=f:r=f);if(!l){if(!m){f=a(r||document.body,y,n);if(!f)return null;m=f.canvas;x=f.onDestroy}l=b(m,d)}return l?{gl:l,canvas:m,container:r,extensions:k,optionalExtensions:t,pixelRatio:n,
profile:u,onDone:y,onDestroy:x}:(x(),y("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],33:[function(f,l,n){l.exports=function(a,b){var h=b[0],g=b[1],d=b[2],e=b[3],c=b[4],f=b[5],r=b[6],m=b[7],l=b[8],k=b[9],t=b[10],n=b[11],u=b[12],y=b[13],x=b[14],p=b[15];a[0]=f*(t*p-n*x)-k*(r*p-m*x)+y*(r*n-m*t);a[1]=-(g*(t*p-n*x)-k*(d*p-e*x)+y*(d*n-e*t));a[2]=g*(r*p-m*x)-f*(d*p-e*x)+y*(d*m-e*r);a[3]=-(g*(r*n-m*t)-f*(d*n-e*t)+k*(d*m-e*r));a[4]=
-(c*(t*p-n*x)-l*(r*p-m*x)+u*(r*n-m*t));a[5]=h*(t*p-n*x)-l*(d*p-e*x)+u*(d*n-e*t);a[6]=-(h*(r*p-m*x)-c*(d*p-e*x)+u*(d*m-e*r));a[7]=h*(r*n-m*t)-c*(d*n-e*t)+l*(d*m-e*r);a[8]=c*(k*p-n*y)-l*(f*p-m*y)+u*(f*n-m*k);a[9]=-(h*(k*p-n*y)-l*(g*p-e*y)+u*(g*n-e*k));a[10]=h*(f*p-m*y)-c*(g*p-e*y)+u*(g*m-e*f);a[11]=-(h*(f*n-m*k)-c*(g*n-e*k)+l*(g*m-e*f));a[12]=-(c*(k*x-t*y)-l*(f*x-r*y)+u*(f*t-r*k));a[13]=h*(k*x-t*y)-l*(g*x-d*y)+u*(g*t-d*k);a[14]=-(h*(f*x-r*y)-c*(g*x-d*y)+u*(g*r-d*f));a[15]=h*(f*t-r*k)-c*(g*t-d*k)+l*
(g*r-d*f);return a}},{}],34:[function(f,l,n){l.exports=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],35:[function(f,l,n){l.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},
{}],36:[function(f,l,n){l.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],37:[function(f,l,n){l.exports=function(a){var b=a[0],h=a[1],g=a[2],d=a[3],e=a[4],c=a[5],f=a[6],l=a[7],m=a[8],n=a[9],k=a[10],t=a[11],w=a[12],u=a[13],y=a[14];a=a[15];return(b*c-h*e)*(k*a-t*y)-(b*f-g*e)*(n*a-t*u)+(b*l-d*e)*(n*y-k*u)+(h*f-g*c)*(m*a-t*w)-(h*l-d*c)*(m*y-k*w)+(g*l-d*f)*(m*u-n*w)}},{}],
38:[function(f,l,n){l.exports=function(a,b){var h=b[0],g=b[1],d=b[2],e=b[3],c=h+h,f=g+g,l=d+d,h=h*c,m=g*c,g=g*f,n=d*c,k=d*f,d=d*l,c=e*c,f=e*f,e=e*l;a[0]=1-g-d;a[1]=m+e;a[2]=n-f;a[3]=0;a[4]=m-e;a[5]=1-h-d;a[6]=k+c;a[7]=0;a[8]=n+f;a[9]=k-c;a[10]=1-h-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],39:[function(f,l,n){l.exports=function(a,b,h){var g=b[0],d=b[1],e=b[2],c=b[3],f=g+g,l=d+d,m=e+e;b=g*f;var n=g*l,g=g*m,k=d*l,d=d*m,e=e*m,f=c*f,l=c*l,c=c*m;a[0]=1-(k+e);a[1]=n+c;a[2]=g-l;a[3]=0;a[4]=
n-c;a[5]=1-(b+e);a[6]=d+f;a[7]=0;a[8]=g+l;a[9]=d-f;a[10]=1-(b+k);a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}},{}],40:[function(f,l,n){l.exports=function(a,b,h,g,d,e,c){var f=1/(h-b),l=1/(d-g),m=1/(e-c);a[0]=2*e*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e*l;a[6]=0;a[7]=0;a[8]=(h+b)*f;a[9]=(d+g)*l;a[10]=(c+e)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*e*2*m;a[15]=0;return a}},{}],41:[function(f,l,n){l.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=
1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(f,l,n){l.exports={create:f("./create"),clone:f("./clone"),copy:f("./copy"),identity:f("./identity"),transpose:f("./transpose"),invert:f("./invert"),adjoint:f("./adjoint"),determinant:f("./determinant"),multiply:f("./multiply"),translate:f("./translate"),scale:f("./scale"),rotate:f("./rotate"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),fromRotationTranslation:f("./fromRotationTranslation"),fromQuat:f("./fromQuat"),
frustum:f("./frustum"),perspective:f("./perspective"),perspectiveFromFieldOfView:f("./perspectiveFromFieldOfView"),ortho:f("./ortho"),lookAt:f("./lookAt"),str:f("./str")}},{"./adjoint":33,"./clone":34,"./copy":35,"./create":36,"./determinant":37,"./fromQuat":38,"./fromRotationTranslation":39,"./frustum":40,"./identity":41,"./invert":43,"./lookAt":44,"./multiply":45,"./ortho":46,"./perspective":47,"./perspectiveFromFieldOfView":48,"./rotate":49,"./rotateX":50,"./rotateY":51,"./rotateZ":52,"./scale":53,
"./str":54,"./translate":55,"./transpose":56}],43:[function(f,l,n){l.exports=function(a,b){var h=b[0],g=b[1],d=b[2],e=b[3],c=b[4],f=b[5],l=b[6],m=b[7],n=b[8],k=b[9],t=b[10],w=b[11],u=b[12],y=b[13],x=b[14],p=b[15],C=h*f-g*c,B=h*l-d*c,D=h*m-e*c,E=g*l-d*f,H=g*m-e*f,M=d*m-e*l,G=n*y-k*u,J=n*x-t*u,O=n*p-w*u,P=k*x-t*y,A=k*p-w*y,N=t*p-w*x,F=C*N-B*A+D*P+E*O-H*J+M*G;if(!F)return null;F=1/F;a[0]=(f*N-l*A+m*P)*F;a[1]=(d*A-g*N-e*P)*F;a[2]=(y*M-x*H+p*E)*F;a[3]=(t*H-k*M-w*E)*F;a[4]=(l*O-c*N-m*J)*F;a[5]=(h*N-d*O+
e*J)*F;a[6]=(x*D-u*M-p*B)*F;a[7]=(n*M-t*D+w*B)*F;a[8]=(c*A-f*O+m*G)*F;a[9]=(g*O-h*A-e*G)*F;a[10]=(u*H-y*D+p*C)*F;a[11]=(k*D-n*H-w*C)*F;a[12]=(f*J-c*P-l*G)*F;a[13]=(h*P-g*J+d*G)*F;a[14]=(y*B-u*E-x*C)*F;a[15]=(n*E-k*B+t*C)*F;return a}},{}],44:[function(f,l,n){var a=f("./identity");l.exports=function(b,h,g,d){var e,c,f,l,m,n,k,t,w=h[0],u=h[1];h=h[2];f=d[0];l=d[1];c=d[2];k=g[0];d=g[1];e=g[2];if(1E-6>Math.abs(w-k)&&1E-6>Math.abs(u-d)&&1E-6>Math.abs(h-e))return a(b);g=w-k;d=u-d;k=h-e;t=1/Math.sqrt(g*g+
d*d+k*k);g*=t;d*=t;k*=t;e=l*k-c*d;c=c*g-f*k;f=f*d-l*g;(t=Math.sqrt(e*e+c*c+f*f))?(t=1/t,e*=t,c*=t,f*=t):f=c=e=0;l=d*f-k*c;m=k*e-g*f;n=g*c-d*e;(t=Math.sqrt(l*l+m*m+n*n))?(t=1/t,l*=t,m*=t,n*=t):n=m=l=0;b[0]=e;b[1]=l;b[2]=g;b[3]=0;b[4]=c;b[5]=m;b[6]=d;b[7]=0;b[8]=f;b[9]=n;b[10]=k;b[11]=0;b[12]=-(e*w+c*u+f*h);b[13]=-(l*w+m*u+n*h);b[14]=-(g*w+d*u+k*h);b[15]=1;return b}},{"./identity":41}],45:[function(f,l,n){l.exports=function(a,b,f){var g=b[0],d=b[1],e=b[2],c=b[3],l=b[4],r=b[5],m=b[6],n=b[7],k=b[8],t=
b[9],w=b[10],u=b[11],y=b[12],x=b[13],p=b[14];b=b[15];var C=f[0],B=f[1],D=f[2],E=f[3];a[0]=C*g+B*l+D*k+E*y;a[1]=C*d+B*r+D*t+E*x;a[2]=C*e+B*m+D*w+E*p;a[3]=C*c+B*n+D*u+E*b;C=f[4];B=f[5];D=f[6];E=f[7];a[4]=C*g+B*l+D*k+E*y;a[5]=C*d+B*r+D*t+E*x;a[6]=C*e+B*m+D*w+E*p;a[7]=C*c+B*n+D*u+E*b;C=f[8];B=f[9];D=f[10];E=f[11];a[8]=C*g+B*l+D*k+E*y;a[9]=C*d+B*r+D*t+E*x;a[10]=C*e+B*m+D*w+E*p;a[11]=C*c+B*n+D*u+E*b;C=f[12];B=f[13];D=f[14];E=f[15];a[12]=C*g+B*l+D*k+E*y;a[13]=C*d+B*r+D*t+E*x;a[14]=C*e+B*m+D*w+E*p;a[15]=
C*c+B*n+D*u+E*b;return a}},{}],46:[function(f,l,n){l.exports=function(a,b,f,g,d,e,c){var l=1/(b-f),r=1/(g-d),m=1/(e-c);a[0]=-2*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*r;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(b+f)*l;a[13]=(d+g)*r;a[14]=(c+e)*m;a[15]=1;return a}},{}],47:[function(f,l,n){l.exports=function(a,b,f,g,d){b=1/Math.tan(b/2);var e=1/(g-d);a[0]=b/f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+g)*e;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*g*e;a[15]=0;return a}},
{}],48:[function(f,l,n){l.exports=function(a,b,f,g){var d=Math.tan(b.upDegrees*Math.PI/180),e=Math.tan(b.downDegrees*Math.PI/180),c=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var l=2/(c+b),r=2/(d+e);a[0]=l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=r;a[6]=0;a[7]=0;a[8]=-((c-b)*l*.5);a[9]=(d-e)*r*.5;a[10]=g/(f-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f/(f-g);a[15]=0;return a}},{}],49:[function(f,l,n){l.exports=function(a,b,f,g){var d=g[0],e=g[1];g=g[2];var c=Math.sqrt(d*d+e*e+g*g),
l,r,m,n,k,t,w,u,y,x,p,C,B,D,E,H,M,G,J,O;if(1E-6>Math.abs(c))return null;c=1/c;d*=c;e*=c;g*=c;l=Math.sin(f);r=Math.cos(f);m=1-r;f=b[0];c=b[1];n=b[2];k=b[3];t=b[4];w=b[5];u=b[6];y=b[7];x=b[8];p=b[9];C=b[10];B=b[11];D=d*d*m+r;E=e*d*m+g*l;H=g*d*m-e*l;M=d*e*m-g*l;G=e*e*m+r;J=g*e*m+d*l;O=d*g*m+e*l;d=e*g*m-d*l;e=g*g*m+r;a[0]=f*D+t*E+x*H;a[1]=c*D+w*E+p*H;a[2]=n*D+u*E+C*H;a[3]=k*D+y*E+B*H;a[4]=f*M+t*G+x*J;a[5]=c*M+w*G+p*J;a[6]=n*M+u*G+C*J;a[7]=k*M+y*G+B*J;a[8]=f*O+t*d+x*e;a[9]=c*O+w*d+p*e;a[10]=n*O+u*d+C*
e;a[11]=k*O+y*d+B*e;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}},{}],50:[function(f,l,n){l.exports=function(a,b,f){var g=Math.sin(f);f=Math.cos(f);var d=b[4],e=b[5],c=b[6],l=b[7],n=b[8],m=b[9],z=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=d*f+n*g;a[5]=e*f+m*g;a[6]=c*f+z*g;a[7]=l*f+k*g;a[8]=n*f-d*g;a[9]=m*f-e*g;a[10]=z*f-c*g;a[11]=k*f-l*g;return a}},{}],51:[function(f,l,n){l.exports=function(a,b,f){var g=
Math.sin(f);f=Math.cos(f);var d=b[0],e=b[1],c=b[2],l=b[3],n=b[8],m=b[9],z=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*f-n*g;a[1]=e*f-m*g;a[2]=c*f-z*g;a[3]=l*f-k*g;a[8]=d*g+n*f;a[9]=e*g+m*f;a[10]=c*g+z*f;a[11]=l*g+k*f;return a}},{}],52:[function(f,l,n){l.exports=function(a,b,f){var g=Math.sin(f);f=Math.cos(f);var d=b[0],e=b[1],c=b[2],l=b[3],n=b[4],m=b[5],z=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*f+n*g;a[1]=e*f+m*g;a[2]=c*f+z*g;a[3]=l*f+k*g;a[4]=n*f-d*g;a[5]=m*f-e*g;a[6]=z*f-c*g;a[7]=k*f-l*g;return a}},{}],53:[function(f,l,n){l.exports=function(a,b,f){var g=f[0],d=f[1];f=f[2];a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*f;a[9]=b[9]*f;a[10]=b[10]*f;a[11]=b[11]*f;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],54:[function(f,l,n){l.exports=function(a){return"mat4("+a[0]+
", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],55:[function(f,l,n){l.exports=function(a,b,f){var g=f[0],d=f[1];f=f[2];var e,c,l,n,m,z,k,t,w,u,y,x;b===a?(a[12]=b[0]*g+b[4]*d+b[8]*f+b[12],a[13]=b[1]*g+b[5]*d+b[9]*f+b[13],a[14]=b[2]*g+b[6]*d+b[10]*f+b[14],a[15]=b[3]*g+b[7]*d+b[11]*f+b[15]):(e=b[0],c=b[1],l=b[2],n=b[3],m=b[4],z=b[5],k=b[6],t=b[7],w=b[8],u=b[9],y=b[10],x=b[11],a[0]=e,
a[1]=c,a[2]=l,a[3]=n,a[4]=m,a[5]=z,a[6]=k,a[7]=t,a[8]=w,a[9]=u,a[10]=y,a[11]=x,a[12]=e*g+m*d+w*f+b[12],a[13]=c*g+z*d+u*f+b[13],a[14]=l*g+k*d+y*f+b[14],a[15]=n*g+t*d+x*f+b[15]);return a}},{}],56:[function(f,l,n){l.exports=function(a,b){if(a===b){var f=b[1],g=b[2],d=b[3],e=b[6],c=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=f;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=e;a[11]=b[14];a[12]=d;a[13]=c;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=
b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}},{}],57:[function(f,l,n){function a(a,c,d,f){f[0]=b(255*a);f[1]=b(255*c);f[2]=b(255*d)}var b=Math.round,h=Math.min,g=Math.max,d=Math.ceil;l.exports=function(b,c,f,l){l=l||[0,0,0];b%=360;c=g(0,h(c,1));f=g(0,h(f,1));if(c){c=(1-c)*f;var m=f-c,n=b%60;switch(b/60|0){case 0:a(f,m*b/60+c,c,l);break;case 1:a(m*(60-n)/60+c,f,c,l);break;case 2:a(c,f,m*n/60+c,l);break;case 3:a(c,m*(60-n)/60+c,f,l);break;case 4:a(m*n/60+c,c,
f,l);break;case 5:a(f,c,m*(60-n)/60+c,l)}}else l[0]=l[1]=l[2]=d(255*f);return l}},{}],58:[function(f,l,n){var a=f("./lib/util/extend"),b=f("./lib/dynamic"),h=f("./lib/util/raf"),g=f("./lib/util/clock"),d=f("./lib/strings"),e=f("./lib/webgl"),c=f("./lib/extension"),q=f("./lib/limits"),r=f("./lib/buffer"),m=f("./lib/elements"),z=f("./lib/texture"),k=f("./lib/renderbuffer"),t=f("./lib/framebuffer"),w=f("./lib/attribute"),u=f("./lib/shader"),y=f("./lib/read"),x=f("./lib/core"),p=f("./lib/stats"),C=f("./lib/timer");
l.exports=function(f){function l(){I=h.next(l);L.tick+=1;L.time=(g()-oa)/1E3;J();for(var a=0;a<fa.length;++a)(0,fa[a])(L,null,0);A.flush();S&&S.update()}function n(a){}function H(a){}function M(c){function d(a){var c={},e={};Object.keys(a).forEach(function(d){var f=a[d];b.isDynamic(f)?e[d]=b.unbox(f,d):c[d]=f});return{dynamic:e,"static":c}}function e(a){for(;p.length<a;)p.push(null);return p}var f=d(c.context||{}),g=d(c.uniforms||{}),h=d(c.attributes||{}),k=d(function(b){function c(a){if(a in d){var b=
d[a];delete d[a];Object.keys(b).forEach(function(c){d[a+"."+c]=b[c]})}}var d=a({},b);delete d.uniforms;delete d.attributes;delete d.context;c("blend");c("depth");c("cull");c("stencil");c("polygonOffset");c("scissor");c("sample");return d}(c));c={gpuTime:0,cpuTime:0,count:0};var f=T.compile(k,h,g,f,c),l=f.draw,m=f.batch,n=f.scope,p=[];return a(function(a,b){var c;if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)n.call(this,null,b,
c);else if(Array.isArray(a))for(c=0;c<a.length;++c)n.call(this,a[c],b,c);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:c})}function G(){var a=da.viewport,b=da.scissor_box;a[0]=a[1]=b[0]=b[1]=0;L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=a[2]=b[2]=A.drawingBufferWidth;L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=a[3]=b[3]=
A.drawingBufferHeight}function J(){G();T.procs.poll()}function O(){G();T.procs.refresh();S&&S.update()}var P=e(f);if(!P)return null;var A=P.gl,N=c(A,P);if(!N)return null;f=d();var F=p(),N=N.extensions,S=C(A,N),oa=g(),V=A.drawingBufferWidth,Q=A.drawingBufferHeight,L={tick:0,time:0,viewportWidth:V,viewportHeight:Q,framebufferWidth:V,framebufferHeight:Q,drawingBufferWidth:V,drawingBufferHeight:Q,pixelRatio:P.pixelRatio},K=q(A,N),W=r(A,F),ma=m(A,N,W,F),V=w(A,N,K,W,f),pa=u(A,f,F),ga=z(A,N,K,J,L,F),na=
k(A,N,K,F),ia=t(A,N,K,ga,na,F),Q=y(A,J,L),T=x(A,f,N,K,W,ma,ga,ia,{},V,pa,{elements:null,primitive:4,count:-1,offset:0,instances:-1},L,S,P),da=T.next,ea=A.canvas,fa=[],I=0;ea&&(ea.addEventListener("webglcontextlost",n,!1),ea.addEventListener("webglcontextrestored",H,!1));O();f=a(M,{clear:function(a){var b=0;T.procs.poll();var c=a.color;c&&(A.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(A.clearDepth(+a.depth),b|=256);"stencil"in a&&(A.clearStencil(a.stencil|0),b|=1024);A.clear(b)},
prop:b.define.bind(null,1),context:b.define.bind(null,2),"this":b.define.bind(null,3),draw:M({}),buffer:function(a){return W.create(a,34962)},elements:ma.create,texture:ga.create2D,cube:ga.createCube,renderbuffer:na.create,framebuffer:ia.create,framebufferCube:function(a){},attributes:A.getContextAttributes(),frame:function(a){fa.push(a);!I&&0<fa.length&&l();return{cancel:function(){var b=fa.find(function(b){return b===a});0>b||(fa.splice(b,1),0>=fa.length&&I&&(h.cancel(l),I=0))}}},limits:K,hasExtension:function(a){return 0<=
K.extensions.indexOf(a.toLowerCase())},read:Q,destroy:function(){I&&(h.cancel(l),I=0);ea&&(ea.removeEventListener("webglcontextlost",n),ea.removeEventListener("webglcontextrestored",H));pa.clear();ia.clear();na.clear();ga.clear();ma.clear();W.clear();S&&S.clear();P.onDestroy()},_gl:A,_refresh:O,poll:function(){T.procs.poll();S&&S.update()},stats:F});P.onDone(null,f);return f}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,
"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>