(function e$$0(g,l,a){function b(d,f){if(!l[d]){if(!g[d]){var h="function"==typeof require&&require;if(!f&&h)return h(d,!0);if(c)return c(d,!0);h=Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h;}h=l[d]={exports:{}};g[d][0].call(h.exports,function(a){var c=g[d][1][a];return b(c?c:a)},h,h.exports,e$$0,g,l,a)}return l[d].exports}for(var c="function"==typeof require&&require,d=0;d<a.length;d++)b(a[d]);return b})({1:[function(e,g,l){var a=e("../regl")(),b=e("gl-mat4"),c=e("hsv2rgb");
e=a.buffer(Array(1E4).fill().map(function(){var a=c(360*Math.random(),.6,1);return[10*Math.random(),10*Math.random(),10*Math.random(),10*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),a[0]/255,a[1]/255,a[2]/255]}));var d=a({vert:"\n  precision mediump float;\n  attribute vec4 freq, phase;\n  attribute vec3 color;\n  uniform float time;\n  uniform mat4 view, projection;\n  varying vec3 fragColor;\n  void main() {\n    vec3 position = 8.0 * cos(freq.xyz * time + phase.xyz);\n    gl_PointSize = 5.0 * (1.0 + cos(freq.w * time + phase.w));\n    gl_Position = projection * view * vec4(position, 1);\n    fragColor = color;\n  }",
frag:"\n  precision lowp float;\n  varying vec3 fragColor;\n  void main() {\n    if (length(gl_PointCoord.xy - 0.5) > 0.5) {\n      discard;\n    }\n    gl_FragColor = vec4(fragColor, 1);\n  }",attributes:{freq:{buffer:e,stride:44,offset:0},phase:{buffer:e,stride:44,offset:16},color:{buffer:e,stride:44,offset:32}},uniforms:{view:function(a,d,c){a=.01*c.count;return b.lookAt([],[30*Math.cos(a),2.5,30*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a,d,c){return b.perspective([],Math.PI/4,c.width/
c.height,.01,1E3)},time:function(a,b,d){return.001*d.count}},count:1E4,primitive:"points"});a.frame(function(){a.clear({depth:1,color:[0,0,0,1]});d()})},{"../regl":58,"gl-mat4":42,hsv2rgb:57}],2:[function(e,g,l){function a(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var b=e("./constants/dtypes.json"),c=e("./util/extend");c(a.prototype,{equals:function(a,b){return this.pointer?a.pointer&&this.buffer===
a.buffer&&this.size===b&&this.normalized===a.normalized&&this.type===a.type&&this.offset===a.offset&&this.stride===a.stride&&this.divisor===a.divisor:!a.pointer&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,b){(this.pointer=a.pointer)?(this.buffer=a.buffer,this.size=b,this.normalized=a.normalized,this.type=a.type,this.offset=a.offset,this.stride=a.stride,this.divisor=a.divisor):(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w)}});g.exports=function(d,q,f,h,k){function n(b){for(var d=
Array(16),c=0;16>c;++c)d[c]=new a;this.records=d;this.top=-1;this.name=b}function V(b){for(var c=b.records,d=b.top;c.length-1<=d;)c.push(new a);return c[++b.top]}var e={};f=f.maxAttributes;for(var m=Array(f),u=0;u<f;++u)m[u]=new a;c(n.prototype,{pushVec:function(a,b,c,d){var f=V(this);f.pointer=!1;f.x=a;f.y=b;f.z=c;f.w=d},pushPtr:function(a,b,c,d,f,k,q){var h=V(this);h.pointer=!0;h.buffer=a;h.size=b;h.offset=c;h.stride=d;h.divisor=f;h.normalized=k;h.type=q},pushDyn:function(a){if("number"===typeof a)this.pushVec(a,
0,0,0);else if(Array.isArray(a))this.pushVec(a[0],a[1],a[2],a[3]);else{var c=h.getBuffer(a),d=0,f=0,k=0,q=0,m=!1,n=5126;c?n=c.dtype:(c=h.getBuffer(a.buffer),d=a.size||0,f=a.stride||0,k=a.offset||0,q=a.divisor||0,m=a.normalized||!1,n=c.dtype,"type"in a&&(n=b[a.type]));this.pushPtr(c,d,k,f,q,m,n)}},pop:function(){--this.top}});return{bindings:m,bind:function(a,b,c,f){c=c.records[c.top];f=c.size||f;if(!b.equals(c,f)){if(c.pointer){b.pointer||d.enableVertexAttribArray(a);b.buffer!==c.buffer&&c.buffer.bind();
d.vertexAttribPointer(a,f,c.type,c.normalized,c.stride,c.offset);var k=q.angle_instanced_arrays;k&&k.vertexAttribDivisorANGLE(a,c.divisor)}else b.pointer&&d.disableVertexAttribArray(a),d.vertexAttrib4f(a,c.x,c.y,c.z,c.w);b.set(c,f)}},def:function(a){var b=k.id(a),c=e[b];c||(c=e[b]=new n(a));return c}}}},{"./constants/dtypes.json":6,"./util/extend":24}],3:[function(e,g,l){function a(a,b){switch(a){case 5121:return new Uint8Array(b);case 5123:return new Uint16Array(b);case 5125:return new Uint32Array(b);
case 5120:return new Int8Array(b);case 5122:return new Int16Array(b);case 5124:return new Int32Array(b);case 5126:return new Float32Array(b);default:return null}}var b=e("./util/is-typed-array"),c=e("./util/is-ndarray"),d=e("./constants/arraytypes.json"),q=e("./constants/dtypes.json"),f=e("./util/values"),h={"static":35044,dynamic:35048,stream:35040};g.exports=function(k){function n(a,b){this.id=m++;this.buffer=a;this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=
5121}function e(a){k.isBuffer(a.buffer)||(a.buffer=k.createBuffer());a.bind();k.bufferData(a.type,a.data||a.byteLength,a.usage)}function w(a){var b=a.buffer;k.isBuffer(b)&&k.deleteBuffer(b);a.buffer=null;delete u[a.id]}var m=0,u={};n.prototype.bind=function(){k.bindBuffer(this.type,this.buffer)};return{create:function(f,m,g){function t(f){var k=f||{};if(Array.isArray(k)||b(k)||c(k))k={data:k};else if("number"===typeof k)k={length:k|0};else if(null===k||void 0===k)k={};y.usage="usage"in k?h[k.usage]:
35044;f=0;"type"in k&&(f=q[k.type]);var m=k.dimension|0||1,r=0,n=null;if("data"in k)if(n=k.data,null===n)r=k.length|0;else{if(c(n)){var m=n.shape,r=n.stride,k=n.offset,u=0,w=0,v=0,g=0;1===m.length?(u=m[0],w=1,v=r[0],g=0):2===m.length&&(u=m[0],w=m[1],v=r[0],g=r[1]);f=f||d[Object.prototype.toString.call(n)]|0||5126;for(var m=w,r=a(f,u*w),n=n.data,B=0,Y=0;Y<u;++Y)for(var G=0;G<w;++G)r[B++]=n[v*Y+g*G+k];n=r}else if(Array.isArray(n))if(0<n.length&&Array.isArray(n[0])){m=n[0].length;f=f||5126;k=a(f,n.length*
m);r=n;n=m;for(u=g=0;u<r.length;++u)for(v=r[u],w=0;w<n;++w)k[g++]=v[w];n=k}else f=f||5126,n=a(f,n);else f=f||d[Object.prototype.toString.call(n)]|0;r=n.byteLength}else"length"in k&&(r=k.length|0);y.data=n;y.dtype=f||5121;y.byteLength=r;y.dimension=m;e(y);return t}var x=k.createBuffer(),y=new n(x,m);u[y.id]=y;g||t(f);t._reglType="buffer";t._buffer=y;t.destroy=function(){w(y)};return t},clear:function(){f(u).forEach(w)},refresh:function(){f(u).forEach(e)},getBuffer:function(a){return a&&a._buffer instanceof
n?a._buffer:null}}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":32}],4:[function(e,g,l){function a(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function b(a,b,c,d){var f,k=",";switch(b){case 5126:f="1f";break;case 35664:f="2fv";break;case 35665:f="3fv";break;case 35666:f="4fv";break;case 35670:case 5124:f=
"1i";break;case 35671:case 35667:f="2iv";break;case 35672:case 35668:f="3iv";break;case 35673:case 35669:f="4iv";break;case 35674:f="Matrix2fv";k=",false,";break;case 35675:f="Matrix3fv";k=",false,";break;case 35676:f="Matrix4fv",k=",false,"}return a+".uniform"+f+"("+c+k+d+");"}function c(a){return a+"["+a+".length-1]"}function d(a,b){return"framebuffer"===a||a<b?-1:a>b?1:0}var q=e("./util/codegen"),f=e("./constants/primitives.json"),h=e("./constants/dtypes.json"),k={0:0,1:1,zero:0,one:1,"src color":768,
"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},n={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},V={0:0,zero:0,keep:7680,replace:7681,increment:7682,
decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};g.exports=function(e,m,u,r,g,B,t,x,y,l,C,A,O,T,R){function K(m,h,r,g,v){function t(a){var b=J[a];return b?b:b=J[a]=E(I[a])}function M(a){var b=a.id,c=ha[b];if(c)return c;c=a.func?p.def(E(a.data),"(",R,",",Z,",",Q,")"):p.def(R,".",a.data);return ha[b]=c}function y(a,b){return a.find(function(a){return a.name===b})}function A(a){return ia&&!(a in h||a in v)}var K=q(),E=K.link,p=K.proc("batch"),P=K.block(),L=p.def,W=p.arg,F=E(e),
U=E(m.program),ba=E(C.bind),Q=E(T),ka=E(x),ga=E(O.count),ja=E(O.offset),oa=E(O.instances),fa=E(O.primitive),J={},H=E(B.elements),ga=L(c(ga)),ja=L(c(ja)),fa=L(c(fa)),H=L(c(H)),N,S,la=u.angle_instanced_arrays;la&&(N=L(c(oa)),S=E(la));var ia="elements"in h,oa=W(),W=W(),R=L(),Z=L(),ha={};p(F,".useProgram(",U,");");m.uniforms.forEach(function(a){if(!(a.name in r)){var c=E(a.location),d=E(l.def(a.name)),d=d+"["+d+".length-1]";a=a.info.type;35678===a||35680===a?(a=L(d+"._texture"),p(b(F,5124,c,a+".bind()")),
P(a,".unbind();")):p(b(F,a,c,d))}});m.attributes.forEach(function(b){if(!(g.name in g)){var c=E(C.def(b.name));p(ba,"(",b.location,",",E(C.bindings[b.location]),",",c,",",a(b.info.type),");")}});ia||p("if(",H,"){",F,".bindBuffer(",34963,",",H,".buffer.buffer);","}else{",F,".bindBuffer(",34963,",null);","}");p("for(",Z,"=0;",Z,"<",oa,";++",Z,"){",R,"=",W,"[",Z,"];");Object.keys(h).sort(d).forEach(function(a){function b(a){p("if(",c,"){",F,".enable(",a,");}else{",F,".disable(",a,");}")}var c=M(h[a]);
switch(a){case "framebuffer":a=t("viewport");var d=t("scissor.box");p("if(",ka,".push(",c,"&&",c,"._framebuffer)){",ka,".poll();",a,".setDirty();",d,".setDirty();","}");break;case "cull.enable":b(2884);break;case "blend.enable":b(3042);break;case "dither":b(3024);break;case "stencil.enable":b(2960);break;case "depth.enable":b(2929);break;case "scissor.enable":b(3089);break;case "polygonOffset.enable":b(32823);break;case "sample.alpha":b(32926);break;case "sample.enable":b(32928);break;case "depth.mask":p(F,
".depthMask(",c,");");break;case "depth.func":a=E(n);p(F,".depthFunc(",a,"[",c,"]);");break;case "depth.range":p(F,".depthRange(",c,"[0],",c,"[1]);");break;case "blend.color":p(F,".blendColor(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "blend.equation":a=E(z);p("if(typeof ",c,'==="string"){',F,".blendEquation(",a,"[",c,"]);","}else{",F,".blendEquationSeparate(",a,"[",c,".rgb],",a,"[",c,".alpha]);","}");break;case "blend.func":a=E(k);p(F,".blendFuncSeparate(",a,'["srcRGB" in ',c,"?",c,".srcRGB:",
c,".src],",a,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",a,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",a,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");break;case "stencil.mask":p(F,".stencilMask(",c,");");break;case "stencil.func":a=E(n);p(F,".stencilFunc(",a,"[",c,'.cmp||"always"],',c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":d=E(V);p(F,".stencilOpSeparate(","stencil.opFront"===a?1028:1029,",",d,"[",c,'.fail||"keep"],',d,"[",c,'.zfail||"keep"],',
d,"[",c,'.pass||"keep"]);');break;case "polygonOffset.offset":p(F,".polygonOffset(",c,".factor||0,",c,".units||0);");break;case "cull.face":p(F,".cullFace(",c,'==="front"?',1028,":",1029,");");break;case "lineWidth":p(F,".lineWidth(",c,");");break;case "frontFace":p(F,".frontFace(",c,'==="cw"?',2304,":",2305,");");break;case "colorMask":p(F,".colorMask(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "sample.coverage":p(F,".sampleCoverage(",c,".value,",c,".invert);");break;case "scissor.box":case "viewport":a=
t(a),p(a,".push(",c,".x||0,",c,".y||0,",c,".w||-1,",c,".h||-1);")}});("viewport"in h||"framebuffer"in h)&&p(t("viewport"),".poll();");("scissor.box"in h||"framebuffer"in h)&&p(t("scissor.box"),".poll();");"framebuffer"in h&&p(ka,".pop();");var ra=m.uniforms,ma=[];Object.keys(r).forEach(function(a){var c=y(ra,a);if(c){var d=c.info.type,f=E(c.location);a=M(r[a]);35678===c.info.type||35680===c.info.type?(c=L(a+"._texture"),ma.push(c),p(b(F,5124,f,c+".bind()"))):p(b(F,d,f,a))}});ma.forEach(function(a){p(a,
".unbind();")});var ta=m.attributes;Object.keys(g).forEach(function(b){var c=y(ta,b);c&&p(ba,"(",c.location,",",E(b.bindings[c.location]),",",M(g[b]),",",a(c.info.type),");")});h.count?p(ga,"=",M(h.count),";"):A("count")||p("if(",ga,"){");h.offset&&p(ja,"=",M(h.offset),";");h.primitive&&(m=E(f),p(fa,"=",m,"[",M(h.primitive),"];"));ia&&(m=M(h.elements),p(H,"=",m,"?",m,"._elements:null;"));A("offset")&&p(ja,"=0;");p("if(",H,"){");A("count")&&p(ga,"=",H,".vertCount;","if(",ga,">0){");A("primitive")&&
p(fa,"=",H,".primType;");ia&&p(F,".bindBuffer(",34963,",",H,".buffer.buffer);");la&&(h.instances&&p(N,"=",M(h.instances),";"),p("if(",N,">0){",S,".drawElementsInstancedANGLE(",fa,",",ga,",",H,".type,",ja,",",N,");}else{"));p(F,".drawElements(",fa,",",ga,",",H,".type,",ja,");");la&&p("}");A("count")&&p("}");p("}else{");A("count")||(A("primitive")&&p(fa,"=",4,";"),la&&p("if(",N,">0){",S,".drawArraysInstancedANGLE(",fa,",",ja,",",ga,",",N,");}else{"),p(F,".drawArrays(",fa,",",ja,",",ga,");}"),la&&p("}"));
p("}}",P);return K.compile().batch}var I=y.contextState,z={add:32774,subtract:32778,"reverse subtract":32779};u.ext_blend_minmax&&(z.min=32775,z.max=32776);var M=0;return{draw:function(d){var f=q(),k=f.link,h=f.proc("draw"),m=h.def,n=k(e),r=k(d.program),V=k(C.bind),g=k(O.count),v=k(O.offset),z=k(O.instances),p=k(O.primitive),t=k(B.elements),x=[];h(n,".useProgram(",r,");");d.attributes.forEach(function(b){var c=k(C.def(b.name));h(V,"(",b.location,",",k(C.bindings[b.location]),",",c,",",a(b.info.type),
");")});d.uniforms.forEach(function(a){var c=k(a.location),d=k(l.def(a.name)),d=d+"["+d+".length-1]";a=a.info.type;35678===a||35680===a?(a=m(d+"._texture"),x.push(a),h(b(n,5124,c,a+".bind()"))):h(b(n,a,c,d))});x.forEach(function(a){h(a,".unbind();")});d=m(c(p));g=m(c(g));v=m(c(v));t=m(c(t));h("if(",g,"){");(r=u.angle_instanced_arrays)?(z=m(c(z)),r=k(r),h("if(",t,"){",t,".bind();","if(",z,">0){",r,".drawElementsInstancedANGLE(",d,",",g,",",t,".type,",v,",",z,");}else{",n,".drawElements(",d,",",g,",",
t,".type,",v,");}","}else if(",z,">0){",r,".drawArraysInstancedANGLE(",d,",",v,",",g,",",z,");}else{",n,".drawArrays(",d,",",v,",",g,");}}")):h("if(",t,"){",n,".drawElements(",d,",",g,",",t,".type,",v,");}","}else{",n,".drawArrays(",d,",",v,",",g,");}");return f.compile().draw},command:function(a,b,c,r,e,u,w){function t(a){var b=fa[a];return b?b:b=fa[a]=p(I[a])}function y(a,b){var c=t(a);J(c,".push(",b,");");H(c,".pop();")}function da(a){var b=a.id,c=sa[b];if(c)return c;c=a.func?N.def(p(a.data),"(",
ia,",0,",la,")"):N.def(ia,".",a.data);return sa[b]=c}var E=q(),p=E.link,P=E.block,L=E.proc,W=M++,F=p(R);p(m);var U=p(A),ba=p(x),Q={count:p(O.count),offset:p(O.offset),instances:p(O.instances),primitive:p(O.primitive)},ka=p(B.elements),ga=p(f),ja=p(n),oa=p(V),fa={},J=P(),H=P();Object.keys(a).sort(d).forEach(function(b){var c=a[b];switch(b){case "frag":case "vert":c=m.id(c);A.shader("frag"===b?35632:35633,c);J(U,".",b,".push(",c,");");H(U,".",b,".pop();");break;case "framebuffer":x.getFramebuffer(c);
b=t("viewport");var d=t("scissor.box");J("if(",ba,".push(",p(c&&c._framebuffer),")){",b,".setDirty();",d,".setDirty();","}");H("if(",ba,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":J(Q[b],".push(",c,");");H(Q[b],".pop();");break;case "primitive":J(Q.primitive,".push(",f[c],");");H(Q.primitive,".pop();");break;case "elements":d=B.getElements(c);c=!("primitive"in a);b=!("count"in a);d?(d=p(d),J(ka,".push(",d,");"),c&&J(Q.primitive,".push(",d,".primType);"),
b&&J(Q.count,".push(",d,".vertCount);")):(J(ka,".push(null);"),c&&J(Q.primitive,".push(",4,");"),b&&J(Q.count,".push(0);"));c&&H(Q.primitive,".pop();");b&&H(Q.count,".pop();");"offset"in a||(J(Q.offset,".push(0);"),H(Q.offset,".pop();"));H(ka,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":y(b,c);break;case "depth.func":y(b,n[c]);
break;case "depth.range":b=t(b);J(b,".push(",c[0],",",c[1],");");H(b,".pop();");break;case "blend.func":b=t(b);J(b,".push(",k["srcRGB"in c?c.srcRGB:c.src],",",k["dstRGB"in c?c.dstRGB:c.dst],",",k["srcAlpha"in c?c.srcAlpha:c.src],",",k["dstAlpha"in c?c.dstAlpha:c.dst],");");H(b,".pop();");break;case "blend.equation":b=t(b);"string"===typeof c?J(b,".push(",z[c],",",z[c],");"):"object"===typeof c&&J(b,".push(",z[c.rgb],",",z[c.alpha],");");H(b,".pop();");break;case "blend.color":b=t(b);J(b,".push(",
c[0],",",c[1],",",c[2],",",c[3],");");H(b,".pop();");break;case "stencil.mask":b=t(b);J(b,".push(",c,");");H(b,".pop();");break;case "stencil.func":var d=c.cmp||"keep",h=c.ref||0,c="mask"in c?c.mask:-1;b=t(b);J(b,".push(",n[d],",",h,",",c,");");H(b,".pop();");break;case "stencil.opFront":case "stencil.opBack":d=c.fail||"keep";h=c.zfail||"keep";c=c.pass||"keep";b=t(b);J(b,".push(",V[d],",",V[h],",",V[c],");");H(b,".pop();");break;case "polygonOffset.offset":d=c.factor||0;c=c.units||0;b=t(b);J(b,".push(",
d,",",c,");");H(b,".pop();");break;case "cull.face":d=0;"front"===c?d=1028:"back"===c&&(d=1029);c=t(b);J(c,".push(",d,");");H(c,".pop();");break;case "lineWidth":y(b,c);break;case "frontFace":d=0;"cw"===c?d=2304:"ccw"===c&&(d=2305);c=t(b);J(c,".push(",d,");");H(c,".pop();");break;case "colorMask":b=t(b);J(b,".push(",c.map(function(a){return!!a}).join(),");");H(b,".pop();");break;case "sample.coverage":d="value"in c?c.value:1;c=!!c.invert;b=t(b);J(b,".push(",d,",",c,");");H(b,".pop();");break;case "viewport":case "scissor.box":var d=
c.x||0,h=c.y||0,q=-1,F=-1;"w"in c&&(q=c.w);"h"in c&&(F=c.h);c=t(b);J(c,".push(",d,",",h,",",q,",",F,");");H(c,".pop();")}});Object.keys(b).forEach(function(a){var c=p(l.def(a));a=b[a];a="function"===typeof a&&a._reglType?p(a):Array.isArray(a)?p(a.slice()):+a;J(c,".push(",a,");");H(c,".pop();")});Object.keys(c).forEach(function(a){var b=p(C.def(a));a=c[a];if("number"===typeof a)J(b,".pushVec(",+a,",0,0,0);");else if(Array.isArray(a))J(b,".pushVec(",[a[0]||0,a[1]||0,a[2]||0,a[3]||0],");");else{var d=
g.getBuffer(a),f=0,k=0,m=0,q=0,F=!1,r=5126;d?r=d.dtype:(d=g.getBuffer(a.buffer),f=a.size||0,k=a.stride||0,m=a.offset||0,q=a.divisor||0,F=a.normalized||!1,r=d.dtype,"type"in a&&(r=h[a.type]));J(b,".pushPtr(",[p(d),f,m,k,q,F,r].join(),");")}H(b,".pop();")});var N=E.block(),S=E.block(),la,ia;w&&(la=p(T),ia=J.def());var sa={};Object.keys(r).sort(d).forEach(function(b){var c=da(r[b]);switch(b){case "framebuffer":b=t("viewport");var d=t("scissor.box");N("if(",ba,".push(",c,"&&",c,"._framebuffer)){",b,".setDirty();",
d,".setDirty();","}");S("if(",ba,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":b=t(b);N(b,".push(",c,");");S(b,".pop();");break;case "count":case "offset":case "instances":b=Q[b];N(b,".push(",c,");");S(b,".pop();");break;case "primitive":b=Q.primitive;N(b,".push(",ga,"[",
c,"]);");S(b,".pop();");break;case "depth.func":b=t(b);N(b,".push(",ja,"[",c,"]);");S(b,".pop();");break;case "blend.func":b=t(b);d=p(k);N(b,".push(",d,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",d,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",d,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",d,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");S(b,".pop();");break;case "blend.equation":b=t(b);d=p(z);N("if(typeof ",c,'==="string"){',b,".push(",d,"[",c,"],",d,"[",c,"]);","}else{",b,".push(",d,
"[",c,".rgb],",d,"[",c,".alpha]);","}");S(b,".pop();");break;case "blend.color":b=t(b);N(b,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");S(b,".pop();");break;case "stencil.mask":b=t(b);N(b,".push(",c,");");S(b,".pop();");break;case "stencil.func":b=t(b);N(b,".push(",ja,"[",c,".cmp],",c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");S(b,".pop();");break;case "stencil.opFront":case "stencil.opBack":b=t(b);N(b,".push(",oa,"[",c,'.fail||"keep"],',oa,"[",c,'.zfail||"keep"],',oa,"[",c,'.pass||"keep"]);');
S(b,".pop();");break;case "polygonOffset.offset":b=t(b);N(b,".push(",c,".factor||0,",c,".units||0);");S(b,".pop();");break;case "cull.face":b=t(b);N(b,".push(",c,'==="front"?',1028,":",1029,");");S(b,".pop();");break;case "frontFace":b=t(b);N(b,".push(",c,'==="cw"?',2304,":",2305,");");S(b,".pop();");break;case "colorMask":b=t(b);N(b,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");S(b,".pop();");break;case "sample.coverage":b=t(b);N(b,".push(",c,".value,",c,".invert);");S(b,".pop();");break;case "scissor.box":case "viewport":b=
t(b);N(b,".push(",c,".x||0,",c,".y||0,",'"w" in ',c,"?",c,".w:-1,",'"h" in ',c,"?",c,".h:-1);");S(b,".pop();");break;case "elements":b=!("primitive"in r)&&!("primitive"in a);var d=!("count"in r)&&!("count"in a),f=!("offset"in r)&&!("offset"in a),h=N.def();N("if(",c,"){",h,"=",c,"._elements;",ka,".push(",h,");",b?Q.primitive+".push("+h+".primType);":"",d?Q.count+".push("+h+".vertCount);":"",f?Q.offset+".push("+h+".offset);":"","}else{",ka,".push(null);","}");S(ka,".pop();","if(",c,"){",b?Q.primitive+
".pop();":"",d?Q.count+".pop();":"",f?Q.offset+".pop();":"","}")}});Object.keys(e).forEach(function(a){var b=p(l.def(a));a=da(e[a]);N(b,".push(",a,");");S(b,".pop();")});Object.keys(u).forEach(function(a){var b=p(C.def(a));a=da(u[a]);N(b,".pushDyn(",a,");");S(b,".pop();")});var Z=L("scope"),ha=Z.arg(),ra=Z.arg();Z(J);w&&Z(ia,"=",ha,";",N);Z(ra,"();",w?S:"",H);Z=P();P=Z.def();a.frag&&a.vert?(ha=a.frag,Z(P,"=",p(A.program(m.id(a.vert),m.id(ha))),";")):Z(P,"=",U,".program","(",U,".vert[",U,".vert.length-1]",
",",U,".frag[",U,".frag.length-1]",");");ha=L("draw");ha(J,Z);w&&ha(ia,"=",ha.arg(),";",N);ha(F,"();","if(",P,")",P,".draw(",w?ia:"",");",w?S:"",H);var ma=L("batch");ma(J,Z);w=p(function(b,c,d){var f=b.batchCache[W];f||(f=b.batchCache[W]=K(b,r,e,u,a));return f(c,d)});ma("if(",P,"){",F,"();",w,"(",P,",",ma.arg(),",",ma.arg(),");");Object.keys(r).forEach(function(a){(a=fa[a])&&ma(a,".setDirty();")});ma("}",H);return E.compile()}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/codegen":23}],
5:[function(e,g,l){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(e,g,l){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],7:[function(e,g,l){g.exports={points:0,lines:1,"line loop":2,"line strip":3,
triangles:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(e,g,l){function a(a,q){function f(){var b=window.innerWidth,f=window.innerHeight;a!==document.body&&(f=a.getBoundingClientRect(),b=f.right-f.left,f=f.top-f.bottom);h.width=n*b;h.height=n*f;c(h.style,{width:b+"px",height:f+"px"})}var h=document.createElement("canvas"),k=b(h,q);c(h.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(h);a===document.body&&(h.style.position="absolute",c(a.style,{margin:0,padding:0}));var n=
+k.options.pixelRatio;window.addEventListener("resize",f,!1);var e=k.options.onDestroy;k.options=c(c({},k.options),{onDestroy:function(){window.removeEventListener("resize",f);a.removeChild(h);e&&e()}});f();return k}function b(a,b){function f(b){try{return a.getContext(b,h)}catch(c){return null}}var h=b.glOptions||{};return{gl:f("webgl")||f("experimental-webgl")||f("webgl-experimental"),options:c({pixelRatio:window.devicePixelRatio},b)}}var c=e("./util/extend");g.exports=function(d){if("undefined"===
typeof document||"undefined"===typeof HTMLElement)return{gl:d[0],options:d[1]||{}};var q=document.body,f=d[1]||{};if("string"===typeof d[0])q=document.querySelector(d[0])||document.body;else if("object"===typeof d[0])if(d[0]instanceof HTMLElement)q=d[0];else{if(d[0]instanceof WebGLRenderingContext)return{gl:d[0],options:c({pixelRatio:1},f)};f=d[0]}return q.nodeName&&"CANVAS"===q.nodeName.toUpperCase()?b(q,f):a(q,f)}},{"./util/extend":24}],9:[function(e,g,l){g.exports=function(a){return{primitive:[4],
count:[0],offset:[0],instances:[0]}}},{}],10:[function(e,g,l){function a(a,b){this.id=c++;this.func=a;this.data=b}function b(c,q){switch(typeof c){case "boolean":case "number":case "string":return new a(!1,c);case "function":return new a(!0,c);default:return b}}var c=0;g.exports={define:b,isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(c,q){return c instanceof a?c:"function"===typeof c&&c!==b?new a(!0,c):new a(!1,q)}}},{}],11:[function(e,g,l){var a=
e("./util/is-typed-array"),b=e("./util/is-ndarray"),c=e("./constants/primitives.json");g.exports=function(d,q,f){function h(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}h.prototype.bind=function(){this.buffer.bind()};return{create:function(d){function n(d){var f=q.oes_element_index_uint;if(d)if("number"===typeof d)g(d);else{var k=null,h="static",B=0;Array.isArray(d)||a(d)||b(d)?k=d:("data"in d&&(k=d.data),"usage"in d&&(h=d.usage),"length"in d&&(B=d.length));Array.isArray(k)||b(k)&&
"array"===k.dtype||"type"in d?g({type:d.type||(f?"uint32":"uint16"),usage:h,data:k,length:B}):g({usage:h,data:k,length:B});if(Array.isArray(k)||a(k))g.dimension=3}else g();f=e.buffer.byteLength;k=0;switch(e.buffer.dtype){case 5121:case 5120:k=5121;break;case 5123:case 5122:k=5123;f>>=1;break;case 5125:case 5124:k=5125,f>>=2}h=4;B=e.buffer.dimension;1===B&&(h=0);2===B&&(h=1);3===B&&(h=4);"object"===typeof d&&("primitive"in d&&(h=c[d.primitive]),"count"in d&&(f=d.vertCount|0));e.primType=h;e.vertCount=
f;e.type=k;return n}var e=new h,g=f.create(null,34963,!0);e.buffer=g._buffer;n(d);n._reglType="elements";n._elements=e;n.destroy=function(){g.destroy();e.buffer=null};return n},elements:[null],getElements:function(a){return a&&a._elements instanceof h?a._elements:null}}}},{"./constants/primitives.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26}],12:[function(e,g,l){g.exports=function(a){function b(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(b){try{c[b]=
a.getExtension(b)}catch(q){}})}var c={};b();return{extensions:c,refresh:b}}},{}],13:[function(e,g,l){var a=e("./util/values"),b=e("./util/extend"),c=[1029];g.exports=function(d,q,f,h,k){function n(a,b,c,d){this.target=a;this.level=b;this.texture=c;this.renderbuffer=d}function e(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function g(a,b){var c=b.width,d=b.height;if(a.texture)var f=a.texture._texture,k=Math.max(1,f.params.width>>a.level),h=Math.max(1,
f.params.height>>a.level),c=c||k,d=d||h;else f=a.renderbuffer._renderbuffer,c=c||f.width,d=d||f.height;f.refCount+=1;b.width=c;b.height=d}function m(a,b){b?b.texture?d.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,b.level):d.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer):d.framebufferTexture2D(36160,a,3553,null,0)}function u(a){var b=3553,c=0,d=null,f=null;"object"===typeof a&&("level"in a&&(c=a.level|0),"target"in a&&(b=a.target|0));var k=a._reglType;
"texture"===k?d=a:"renderbuffer"===k&&(f=a,b=36161,c=0);return new n(b,c,d,f)}function r(a){return a&&(a.texture||a.renderbuffer)}function v(){this.id=T++;R[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function B(a){d.isFramebuffer(a.framebuffer)||(a.framebuffer=d.createFramebuffer());I=!0;d.bindFramebuffer(36160,a.framebuffer);for(var b=a.colorAttachments,
c=0;c<b.length;++c)m(36064+c,b[c]);for(c=b.length;c<f.maxColorAttachments;++c)m(36064+c,null);m(36096,a.depthAttachment);m(36128,a.stencilAttachment);m(33306,a.depthStencilAttachment);q.webgl_draw_buffers&&q.webgl_draw_buffers.drawBuffersWEBGL(O[b.length]);d.checkFramebufferStatus(36160)}function t(a){a=a.framebuffer;d.isFramebuffer(a)&&d.deleteFramebuffer(a)}function x(){return K[K.length-1]}var y={rgba:6408},l={rgba4:32854,rgb565:36194,"rgb5 a1":32855};q.ext_srgb&&(l.srgba=35907);q.ext_color_buffer_half_float&&
(l.rgba16f=34842,l.rgb16f=34843);q.webgl_color_buffer_float&&(l.rgba32f=34836);var C=[],A=[];q.webgl_depth_texture&&(C.push(6402),A.push(34041));b(b({},y),l);a(y);a(l);l=5121;C={uint8:5121};q.oes_texture_half_float&&(l=C["half float"]=36193);q.oes_texture_float&&(l=C["float"]=5126);C.best=l;var O=function(){for(var a=Array(f.maxDrawbuffers),b=0;b<=f.maxDrawbuffers;++b)for(var c=a[b]=Array(b),d=0;d<b;++d)c[d]=36064+d;return a}(),T=0,R={},K=[null],I=!0;return{top:x,dirty:function(){return I},push:function(a){a=
a||null;I=I||a!==x();K.push(a);return I},pop:function(){var a=x();K.pop();return I=I||a!==x()},getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof v)?a:null},poll:function(){if(I){var a=K[K.length-1],b=q.webgl_draw_buffers;a?(d.bindFramebuffer(36160,a.framebuffer),b&&b.drawBuffersWEBGL(O[a.colorAttachments.length])):(d.bindFramebuffer(36160,null),b&&b.drawBuffersWEBGL(c));I=!1}},create:function(a){function b(a){var f,q=a||{},m=a=0;if("shape"in
q){var t=q.shape;a=t[0];m=t[1]}else"radius"in q&&(a=m=q.radius),"width"in q&&(a=q.width),"height"in q&&(m=q.height);var v=null,t=!1;if("colorBuffers"in q||"colorBuffer"in q){v=q.colorBuffers||q.colorBuffer;Array.isArray(v)||(v=[v]);c.width=a;c.height=m;v=v.map(u);for(f=0;f<v.length;++f)g(v[f],c);a=c.width;m=c.height}else{var x=!0,l="rgba",C="uint8",A=1,t=!0;c.width=a=a||d.drawingBufferWidth;c.height=m=m||d.drawingBufferHeight;"format"in q&&(l=q.format,x=l in y);"type"in q&&(C=q.type);"colorCount"in
q&&(A=q.colorCount|0);if(c.ownsColor)for(v=c.colorAttachments;v.length>A;)e(v.pop());else v=[];for(f=0;f<v.length;++f){var p;a:{p=v[f];var z=x,D=l,K=a,F=m;if(p.texture){var U=p.texture;if(z){U({format:D,type:C,width:K,height:F});U._texture.refCount+=1;p=!0;break a}}else if(U=p.renderbuffer,!z){U({format:D,width:K,height:F});U._renderbuffer.refCount+=1;p=!0;break a}e(p);p=!1}p||(v[f--]=v[v.length-1],v.pop())}for(;v.length<A;)x?v.push(new n(3553,0,h.create({format:l,type:C,width:a,height:m},3553),null)):
v.push(new n(36161,0,null,k.create({format:l,width:a,height:m})))}c.width=a;c.height=m;l=x=f=null;C=!1;"depthBuffer"in q&&(f=u(q.depthBuffer));"stencilBuffer"in q&&(x=u(q.stencilBuffer));"depthStencilBuffer"in q&&(l=u(q.depthStencilBuffer));if(f||x||l)g(f||x||l,c);else if(A=!0,z=p=!1,"depth"in q&&(A=!!q.depth),"stencil"in q&&(p=!!q.stencil),"depthTexture"in q&&(z=!!q.depthTexture),q=c.depthAttachment||c.stencilAttachment||c.depthStencilAttachment,D=null,A||p)C=!0,z?(z=p?"depth stencil":"depth",c.ownsDepthStencil&&
q.texture?(q.texture({format:z,width:a,height:m}),q.texture._texture.refCount+=1,D=q):D=new n(3553,0,h.create({format:z,width:a,height:m},3553),null)):(z=A?p?"depth stencil":"depth":"stencil",c.ownsDepthStencil&&q.renderbuffer?(q.renderbuffer({format:z,width:a,height:m}),q.renderbuffer._renderbuffer.refCount+=1,D=q):D=new n(36161,0,null,k.create({format:z,width:a,height:m}))),A?p?l=D:f=D:x=D;a=c;a.colorAttachments.forEach(e);e(a.depthAttachment);e(a.stencilAttachment);e(a.depthStencilAttachment);
c.colorAttachments=v;c.depthAttachment=f;c.stencilAttachment=x;c.depthStencilAttachment=l;c.ownsColor=t;c.ownsDepthStencil=C;b.color=v.map(r);b.depth=r(f);b.stencil=r(x);b.depthStencil=r(l);B(c);b.width=c.width;b.height=c.height;return b}var c=new v;b(a);b._reglType="framebuffer";b._framebuffer=c;b._destroy=function(){t(c)};return b},clear:function(){a(R).forEach(t)},refresh:function(){a(R).forEach(B)}}}},{"./util/extend":24,"./util/values":32}],14:[function(e,g,l){g.exports=function(a,b){var c=1;
b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var d=1,q=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),q=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:q,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),
maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),
version:a.getParameter(7938)}}},{}],15:[function(e,g,l){var a=e("./util/is-typed-array");g.exports=function(b,c,d){return function(q){var f=q||{};a(q)?f={data:f}:2===arguments.length?f={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof q&&(f={});c();var h=f.x||0,k=f.y||0,n=f.width||d.width,e=f.height||d.height,f=f.data||new Uint8Array(n*e*4);b.pixelStorei(3333,4);b.readPixels(h,k,n,e,6408,5121,f);return f}}},{"./util/is-typed-array":26}],16:[function(e,g,l){var a=e("./util/values");g.exports=
function(b,c,d){function q(){this.id=n++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function f(a){b.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=b.createRenderbuffer());b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)}function h(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.isRenderbuffer(c)&&b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete e[a.id]}var k={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(k.srgba=35907);c.ext_color_buffer_half_float&&(k.rgba16f=34842,k.rgb16f=34843);c.webgl_color_buffer_float&&(k.rgba32f=34836);var n=0,e={};q.prototype.decRef=function(){0===--this.refCount&&h(this)};return{create:function(a){function b(a){a=a||{};var d=0,h=0;"shape"in a?(h=a.shape,d=h[0]|0,h=h[1]|0):("radius"in a&&(d=h=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(h=a.height|0));b.width=c.width=Math.max(d,1);b.height=c.height=Math.max(h,
1);c.format=32854;"format"in a&&(c.format=k[a.format]);f(c);return b}var c=new q;e[c.id]=c;b(a);b._reglType="renderbuffer";b._renderbuffer=c;b.destroy=function(){c.decRef()};return b},refresh:function(){a(e).forEach(f)},clear:function(){a(e).forEach(h)}}}},{"./util/values":32}],17:[function(e,g,l){function a(a,b,q,f){this.name=a;this.id=b;this.location=q;this.info=f}var b=e("./util/values");g.exports=function(c,d,q,f,h){function k(a,b){var d=35632===a?g:m,f=d[b];if(!f){var k=h.str(b),f=c.createShader(a);
c.shaderSource(f,k);c.compileShader(f);d[b]=f}return f}function n(a,b){this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function e(b){var n,m;n=k(35632,b.fragId);m=k(35633,b.vertId);var r=b.program=c.createProgram();c.attachShader(r,n);c.attachShader(r,m);c.linkProgram(r);var g=c.getProgramParameter(r,35718),u=b.uniforms=[];for(n=0;n<g;++n)if(m=c.getActiveUniform(r,n))if(1<m.size)for(var V=0;V<m.size;++V){var w=m.name.replace("[0]",
"["+V+"]");q.def(w);u.push(new a(w,h.id(w),c.getUniformLocation(r,w),m))}else q.def(m.name),u.push(new a(m.name,h.id(m.name),c.getUniformLocation(r,m.name),m));g=c.getProgramParameter(r,35721);u=b.attributes=[];for(n=0;n<g;++n)if(m=c.getActiveAttrib(r,n))d.def(m.name),u.push(new a(m.name,h.id(m.name),c.getAttribLocation(r,m.name),m));b.draw=f(b);b.batchCache={}}var g={},m={},u={},r=[];return{clear:function(){var a=c.deleteShader.bind(c);b(g).forEach(a);g={};b(m).forEach(a);m={};r.forEach(function(a){c.deleteProgram(a.program)});
r.length=0;u={}},refresh:function(){g={};m={};r.forEach(e)},program:function(a,b){var c=u[b];c||(c=u[b]={});var d=c[a];d||(d=new n(b,a),e(d),c[a]=d,r.push(d));return d},shader:k,frag:[-1],vert:[-1]}}},{"./util/values":32}],18:[function(e,g,l){var a=e("./util/stack"),b=e("./util/codegen");g.exports=function(c,d,q){function f(b,d){var f=a([!!d],function(a){a?c.enable(b):c.disable(b)});f.flag=b;return f}var h={dither:f(3024),"blend.enable":f(3042),"blend.color":a([0,0,0,0],function(a,b,d,f){c.blendColor(a,
b,d,f)}),"blend.equation":a([32774,32774],function(a,b){c.blendEquationSeparate(a,b)}),"blend.func":a([1,0,1,0],function(a,b,d,f){c.blendFuncSeparate(a,b,d,f)}),"depth.enable":f(2929,!0),"depth.func":a([513],function(a){c.depthFunc(a)}),"depth.range":a([0,1],function(a,b){c.depthRange(a,b)}),"depth.mask":a([!0],function(a){c.depthMask(a)}),"cull.enable":f(2884),"cull.face":a([1029],function(a){c.cullFace(a)}),frontFace:a([2305],function(a){c.frontFace(a)}),colorMask:a([!0,!0,!0,!0],function(a,b,d,
f){c.colorMask(a,b,d,f)}),lineWidth:a([1],function(a){c.lineWidth(a)}),"polygonOffset.enable":f(32823),"polygonOffset.offset":a([0,0],function(a,b){c.polygonOffset(a,b)}),"sample.alpha":f(32926),"sample.enable":f(32928),"sample.coverage":a([1,!1],function(a,b){c.sampleCoverage(a,b)}),"stencil.enable":f(2960),"stencil.mask":a([-1],function(a){c.stencilMask(a)}),"stencil.func":a([519,0,-1],function(a,b,d){c.stencilFunc(a,b,d)}),"stencil.opFront":a([7680,7680,7680],function(a,b,d){c.stencilOpSeparate(1028,
a,b,d)}),"stencil.opBack":a([7680,7680,7680],function(a,b,d){c.stencilOpSeparate(1029,a,b,d)}),"scissor.enable":f(3089),"scissor.box":a([0,0,-1,-1],function(a,b,f,k){var h=f,q=d.top();0>f&&(h=q?q.width-a:c.drawingBufferWidth-a);f=k;0>k&&(f=q?q.height-b:c.drawingBufferHeight-b);c.scissor(a,b,h,f)}),viewport:a([0,0,-1,-1],function(a,b,f,k){var h=f,n=d.top();0>f&&(h=n?n.width-a:c.drawingBufferWidth-a);f=k;0>k&&(f=n?n.height-b:c.drawingBufferHeight-b);c.viewport(a,b,h,f);q.width=h;q.height=f})},k=b(),
n=k.proc("poll"),e=k.proc("refresh");Object.keys(h).forEach(function(a){a=k.link(h[a]);n(a,".poll();");e(a,".setDirty();")});var g=k.compile();return{contextState:h,viewport:q,poll:g.poll,refresh:g.refresh,notifyViewportChanged:function(){h.viewport.setDirty();h["scissor.box"].setDirty()}}}},{"./util/codegen":23,"./util/stack":30}],19:[function(e,g,l){g.exports=function(){var a={"":0},b=[""];return{id:function(c){var d=a[c];if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}},
{}],20:[function(e,g,l){function a(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function b(a){if(!Array.isArray(a))return!1;var b=a.length;if(0===b||!Array.isArray(a[0]))return!1;for(var c=a[0].length,d=1;d<b;++d)if(!Array.isArray(a[d])||a[d].length!==c)return!1;return!0}function c(a){return Object.prototype.toString.call(a)}function d(a){return"[object HTMLCanvasElement]"===c(a)}function q(a){return"[object CanvasRenderingContext2D]"===c(a)}var f=e("./util/extend"),h=e("./util/values"),
k=e("./util/is-typed-array"),n=e("./util/is-ndarray"),V=e("./util/load-texture"),w=e("./util/to-half-float"),m=e("./util/parse-dds"),u=[9984,9986,9985,9987];g.exports=function(e,g,l,t,x){function y(a){this.target=a;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=
this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function D(a){this.target=a;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function C(a,b){var c,d,f=0,k=0,h=0,q=0,e=0,n=0,g=!1,m=!1,p=!1;for(c=0;c<b.length;++c)d=b[c],q=q||d.width<<d.miplevel,e=e||d.height<<d.miplevel,f=f||d.type,k=k||d.format,h=h||d.internalformat,
n=n||d.channels,g=g||d.needsPoll,m=m||d.needsListeners,d=d.miplevel,p=p||0<d;a.needsPoll=g;a.needsListeners=m;a.width=q;a.height=e;a.format=k;a.internalformat=h;a.type=f;if(3553!==a.target)for(c=0;6>c;++c);c=0<=u.indexOf(a.minFilter);a.genMipmaps=!p&&(a.genMipmaps||c);p=p||a.genMipmaps;a.minFilter||(a.minFilter=p?9987:9728);a.wrapS=a.wrapS||33071;a.wrapT=a.wrapT||33071;for(c=0;c<b.length;++c)d=b[c],d.channels||(d.channels=n),d.format||(d.format=k),d.internalformat||(d.internalformat=h),d.type||(d.type=
f)}function A(a){this.id=E++;this.refCount=1;this.target=a;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new D(a);this.pixels=[]}function O(a,b){function c(a,d){var f=d.mipmap,h;if(Array.isArray(f))for(var q=0;q<f.length;++q)h=new y(a),h.parseFlags(b),h.parseFlags(d),h.parse(f[q],q),k.push(h);else h=new y(a),h.parseFlags(b),h.parse(d,0),k.push(h)}var d;K(a);var f=a.params;D.call(f,a.target);var k=a.pixels;k.length=0;f.parse(b);if(3553===a.target)c(3553,
b);else{var h=b.faces||b;if(Array.isArray(h))for(d=0;6>d;++d)c(34069+d,h[d]);else if("string"!==typeof h)for(d=0;6>d;++d)c(34069+d,{})}C(f,k);f.needsListeners&&R(a);f.needsPoll&&(a.pollId=P.length,P.push(a));T(a)}function T(a){e.isTexture(a.texture)||(a.texture=e.createTexture());var b=a.target,c=a.unit;0<=c?(e.activeTexture(33984+c),da=c):e.bindTexture(b,a.texture);for(var b=a.pixels,d=a.params,f=0;f<b.length;++f)b[f].upload(d);d.upload();0>c&&((c=W[da])?e.bindTexture(c.target,c.texture):(a.unit=
da,W[da]=a))}function R(a){function b(a,c,d){var k=m(d);k.pixels.forEach(function(b){var d=new y(k.cube?b.target:a);d.channels=k.channels;d.compressed=k.compressed;d.type=k.type;d.internalformat=k.format;d.format=pa[k.format];d.width=b.width;d.height=b.height;d.miplevel=b.miplevel||c;d.data=b.data;f.push(d)})}function c(){for(var k=0;k<f.length;++k){var h=f[k],q=h.image,e=h.video,n=h.xhr;q&&q.complete?(h.width=q.naturalWidth,h.height=q.naturalHeight):e&&2<e.readyState?(h.width=e.width,h.height=e.height):
n&&4===n.readyState&&(f[k]=f[f.length-1],f.pop(),n.removeEventListener("readystatechange",T),b(h.target,h.miplevel,n.response))}C(d,f);T(a)}var d=a.params,f=a.pixels;f.forEach(function(a){a.image&&!a.image.complete?a.image.addEventListener("load",c):a.video&&1>a.readyState?a.video.addEventListener("progress",c):a.xhr&&a.xhr.addEventListener("readystatechange",c)});a.cancelPending=function(){f.forEach(function(a){a.image?a.image.removeEventListener("load",c):a.video?a.video.removeEventListener("progress",
c):a.xhr&&(a.xhr.removeEventListener("readystatechange",c),a.xhr.abort())})}}function K(a){var b=a.cancelPending;b&&(b(),a.cancelPending=null);b=a.pollId;0<=b&&((P[b]=P[P.length-1]).id=b,P.pop(),a.pollId=-1)}function I(a){var b=a.texture,c=a.unit,d=a.target;0<=c&&(e.activeTexture(33984+c),da=c,e.bindTexture(d,null),W[c]=null);K(a);e.isTexture(b)&&e.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete p[a.id]}var z={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
M={repeat:10497,clamp:33071,mirror:33648},Y={nearest:9728,linear:9729},G=f({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},Y),ea={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ca={};g.ext_srgb&&(X.srgb=35904,X.srgba=35906);g.oes_texture_float&&(aa["float"]=5126);g.oes_texture_half_float&&
(aa["half float"]=36193);g.webgl_depth_texture&&(f(X,{depth:6402,"depth stencil":34041}),f(aa,{uint16:5123,uint32:5125,"depth stencil":34042}));g.webgl_compressed_texture_s3tc&&f(ca,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});g.webgl_compressed_texture_atc&&f(ca,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});g.webgl_compressed_texture_pvrtc&&f(ca,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});g.webgl_compressed_texture_etc1&&(ca["rgb etc1"]=36196);var na=Array.prototype.slice.call(e.getParameter(34467));Object.keys(ca).forEach(function(a){var b=ca[a];0<=na.indexOf(b)&&(X[a]=b)});var qa=Object.keys(X);l.textureFormats=qa;var pa=qa.reduce(function(a,b){var c=X[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{});f(y.prototype,{parseFlags:function(a){if("object"===typeof a&&a){"premultiplyAlpha"in
a&&(this.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(this.flipY=a.flipY);"alignment"in a&&(this.unpackAlignment=a.alignment);"colorSpace"in a&&(this.colorSpace=ea[a.colorSpace]);if("format"in a){var b=a.format;this.internalformat=X[b];b in aa&&(this.type=aa[b]);b in ca&&(this.compressed=!0)}"type"in a&&(this.type=aa[a.type]);var b=this.width,c=this.height,d=this.channels;"shape"in a?(b=a.shape[0],c=a.shape[1],3===a.shape.length&&(d=a.shape[2])):("radius"in a&&(b=c=a.radius),"width"in a&&(b=
a.width),"height"in a&&(c=a.height),"channels"in a&&(d=a.channels));this.width=b|0;this.height=c|0;this.channels=d|0;"stride"in a?(b=a.stride,this.strideX=b[0],this.strideY=b[1],this.strideC=3===b.length?b[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*b);"offset"in a&&(this.offset=a.offset|0,this.needsTranspose=!0);"crossOrigin"in a&&(this.crossOrigin=a.crossOrigin)}},parse:function(f,h){this.miplevel=h;this.width>>=h;this.height>>=h;var e=f;switch(typeof f){case "object":if(!f)return;
this.parseFlags(f);var g=f.data;if("string"===typeof g||g&&(k(g)||a(g)||n(g)||d(g)||q(g)||"[object HTMLImageElement]"===c(g)||"[object HTMLVideoElement]"===c(g)||b(g)))e=f.data;break;case "undefined":return}"string"===typeof e&&(e=V(e,this.crossOrigin));var g=null,m=!1;if(null!==e)if(k(e))this.data=e;else if(a(e))g=e,m=!0;else if(n(e)){Array.isArray(e.data)?(g=e.data,m=!0):this.data=e.data;var p=e.shape;this.width=p[0];this.height=p[1];this.channels=3===p.length?p[2]:1;p=e.stride;this.strideX=e.stride[0];
this.strideY=e.stride[1];this.strideC=3===p.length?e.stride[2]:1;this.offset=e.offset;this.needsTranspose=!0}else if(d(e)||q(e))d(e)?this.canvas=e:this.canvas=e.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===c(e))this.image=e,e.complete?(this.width=e.naturalWidth,this.height=e.naturalHeight):(this.width=this.width||e.naturalWidth,this.height=this.height||e.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===c(e))this.video=e,1<e.readyState?(this.width=e.width,this.height=e.height):(this.width=this.width||e.width,this.height=this.height||e.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===c(e))this.xhr=e,this.needsListeners=!0;else if(b(e)){var m=e[0].length,p=e.length,r=1,t,u,l,v;if(Array.isArray(e[0][0]))for(r=e[0][0].length,g=Array(m*p*r),u=v=0;u<p;++u)for(t=0;t<m;++t)for(l=0;l<r;++l)g[v++]=e[u][t][l];
else for(g=Array(m*p),u=v=0;u<p;++u)for(t=0;t<m;++t)g[v++]=e[u][t];this.width=m;this.height=p;this.channels=r;m=!0}else f.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||x.width)|0,this.height=(this.height||x.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,
6410,6407,6408][(this.channels=this.channels||4)-1]);e=this.internalformat;p=this.format=pa[e];if(!this.channels)switch(p){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}p=this.type;5126!==p&&36193!==p&&(p||(p=6402===e?5125:5121));this.type=p;if(m)switch(p){case 5121:this.data=new Uint8Array(g);break;case 5123:this.data=new Uint16Array(g);break;case 5125:this.data=new Uint32Array(g);break;case 5126:this.data=
new Float32Array(g);break;case 36193:this.data=w(g)}if(this.data&&this.needsTranspose){g=this.data;e=this.width;m=this.height;p=this.channels;r=this.strideX;t=this.strideY;u=this.strideC;l=this.offset;v=new g.constructor(e*m*p);for(var z=0,y=0;y<m;++y)for(var C=0;C<e;++C)for(var A=0;A<p;++A)v[z++]=g[t*y+r*C+u*A+l];this.data=v}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(a){e.pixelStorei(37440,
this.flipY);e.pixelStorei(37441,this.premultiplyAlpha);e.pixelStorei(37443,this.colorSpace);e.pixelStorei(3317,this.unpackAlignment);var b=this.target,c=this.miplevel,d=this.image,f=this.canvas,k=this.video,h=this.data,q=this.internalformat,n=this.format,g=this.type,m=this.width||Math.max(1,a.width>>c);a=this.height||Math.max(1,a.height>>c);k&&2<k.readyState?e.texImage2D(b,c,n,n,g,k):d&&d.complete?e.texImage2D(b,c,n,n,g,d):f?e.texImage2D(b,c,n,n,g,f):this.compressed?e.compressedTexImage2D(b,c,q,m,
a,0,h):this.copy?(t(),e.copyTexImage2D(b,c,n,this.x,this.y,m,a,0)):h?e.texImage2D(b,c,n,m,a,0,n,g,h):e.texImage2D(b,c,n,m||1,a||1,0,n,g,null)}});f(D.prototype,{parse:function(a){if("object"===typeof a&&a){"min"in a&&(this.minFilter=G[a.min]);"mag"in a&&(this.magFilter=Y[a.mag]);var b=this.wrapS,c=this.wrapT;if("wrap"in a){var d=a.wrap;"string"===typeof d?b=c=M[d]:Array.isArray(d)&&(b=M[d[0]],c=M[d[1]])}else"wrapS"in a&&(b=M[a.wrapS]),"wrapT"in a&&(c=M[a.wrapT]);this.wrapS=b;this.wrapT=c;"anisotropic"in
a&&(this.anisotropic=a.anisotropic);if("mipmap"in a)switch(a=a.mipmap,typeof a){case "string":this.mipmapHint=z[a];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!a}}},upload:function(){var a=this.target;e.texParameteri(a,10241,this.minFilter);e.texParameteri(a,10240,this.magFilter);e.texParameteri(a,10242,this.wrapS);e.texParameteri(a,10243,this.wrapT);g.ext_texture_filter_anisotropic&&e.texParameteri(a,34046,this.anisotropic);this.genMipmaps&&(e.hint(33170,this.mipmapHint),e.generateMipmap(a))}});
var da=0,E=0,p={},P=[],L=l.maxTextureUnits,W=Array(L).map(function(){return null});f(A.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<L;++b){var c=W[b];if(c){if(0<c.bindCount)continue;c.unit=-1}W[b]=this;a=b;break}this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture);da=a}return a},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&I(this)}});return{create:function(a,b){function c(a,f,k,h,e,q){var n=a||{};34067===b&&
6===arguments.length&&(n=[a,f,k,h,e,q]);O(d,n);c.width=d.params.width;c.height=d.params.height;return c}var d=new A(b);p[d.id]=d;c(a);c._reglType="texture";c._texture=d;c.destroy=function(){d.decRef()};return c},refresh:function(){h(p).forEach(T);for(var a=0;a<L;++a)W[a]=null;da=0;e.activeTexture(33984)},clear:function(){for(var a=0;a<L;++a)e.activeTexture(33984+a),e.bindTexture(3553,null),W[a]=null;e.activeTexture(33984);da=0;h(p).forEach(I)},poll:function(){P.forEach(T)},getTexture:function(a){return null}}}},
{"./util/extend":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/load-texture":27,"./util/parse-dds":28,"./util/to-half-float":31,"./util/values":32}],21:[function(e,g,l){g.exports=function(a){var b={};return{def:function(c){c=a.id(c);var d=b[c];d||(d=b[c]=[]);return d},uniforms:b}}},{}],22:[function(e,g,l){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(e,g,l){var a=e("./extend");g.exports=
function(){function b(){var b=[],d=[];return a(function(){b.push.apply(b,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+c++;d.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,Array.prototype.slice.call(arguments)),b.push(";"));return a},toString:function(){return[0<d.length?"var "+d+";":"",b.join("")].join("")}})}var c=0,d=[],e=[],f={};return{link:function(a){var b="g"+c++;d.push(b);e.push(a);return b},block:b,proc:function(d){var k=[],e=b(),q=e.toString;return f[d]=a(e,
{arg:function(){var a="a"+c++;k.push(a);return a},toString:function(){return["function(",k.join(),"){",q(),"}"].join("")}})},compile:function(){var a=['"use strict";return {'];Object.keys(f).forEach(function(b){a.push('"',b,'":',f[b].toString(),",")});a.push("}");return Function.apply(null,d.concat([a.join("")])).apply(null,e)}}}},{"./extend":24}],24:[function(e,g,l){g.exports=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a}},{}],25:[function(e,g,l){var a=e("./is-typed-array");
g.exports=function(b){return"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":26}],26:[function(e,g,l){var a=e("../constants/arraytypes.json");g.exports=function(b){return Object.prototype.toString.call(b)in a}},{"../constants/arraytypes.json":5}],27:[function(e,g,l){g.exports=function(a,b){if("undefined"!==typeof document){var c;c=(c=/\.(\w+)(\?.*)?$/.exec(a))&&
c[1]?c[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(c))return c=document.createElement("video"),c.autoplay=!0,c.loop=!0,b&&(c.crossOrigin=b),c.src=a,c;if(0<=["dds"].indexOf(c))return c=new XMLHttpRequest,c.responseType="arraybuffer",c.open("GET",a,!0),c.send(),c;c=new Image;b&&(c.crossOrigin=b);c.src=a;return c}return null}},{}],28:[function(e,g,l){g.exports=function(e){function g(a){for(var b=z,c=M,d=0;d<X;++d){var f=Math.max(1,
b+3>>2)*Math.max(1,c+3>>2)*ea;na.pixels.push({target:a,miplevel:d,width:b,height:c,data:new Uint8Array(e,ca,f)});ca+=f;b>>=1;c>>=1}}var l=new Int32Array(e),I=l[t],z=l[y],M=l[x],Y=k,G=0,ea=0,aa=4;switch(l[A]){case m:ea=8;I&w?(aa=3,G=c):G=d;break;case u:ea=16;G=q;break;case r:ea=16;G=f;break;case v:ea=8,G=h}var X=1;l[C]&n&&(X=Math.max(1,l[D]));var ca=l[B]+4,na={width:z,height:M,channels:aa,format:G,type:Y,compressed:!0,cube:!1,pixels:[]};if(l[O]&V)for(na.cube=!0,l=0;6>l;++l)g(b+l);else g(a);return na};
var a=3553,b=34069,c=33776,d=33777,q=33778,f=33779,h=36196,k=5121,n=131072,V=512,w=64,m=827611204,u=861165636,r=894720068,v=826496069,B=1,t=2,x=3,y=4,D=7,C=20,A=21,O=28},{}],29:[function(e,g,l){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(e,g,l){g.exports=function(a,b){var c=
a.length,d=a.slice(),e=a.slice(),f=!1,h=!0;return{push:function(){f=!1;for(var a=0;a<c;++a){var b=arguments[a];f=f||b!==e[a];d.push(b)}},pop:function(){f=!1;d.length-=c;for(var a=0;a<c;++a)f=f||d[d.length-c+a]!==e[a]},poll:function(){var a=d.length-c;if(f||h){switch(c){case 1:b(d[a]);break;case 2:b(d[a],d[a+1]);break;case 3:b(d[a],d[a+1],d[a+2]);break;case 4:b(d[a],d[a+1],d[a+2],d[a+3]);break;case 5:b(d[a],d[a+1],d[a+2],d[a+3],d[a+4]);break;case 6:b(d[a],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]);break;
default:b.apply(null,d.slice(a,d.length))}for(var n=0;n<c;++n)e[n]=d[a+n];h=f=!1}},setDirty:function(){h=!0}}}},{}],31:[function(e,g,l){g.exports=function(a){for(var b=new Float32Array(a),b=new Uint32Array(b.buffer),c=new Uint16Array(a.length),d=0;d<a.length;++d)if(isNaN(a[d]))c[d]=65535;else if(Infinity===a[d])c[d]=31744;else if(-Infinity===a[d])c[d]=64512;else{var e=b[d],f=e>>>31<<15,h=(e<<1>>>24)-127,e=e>>13&1023;c[d]=-24>h?f:-14>h?f+(e+1024>>-14-h):15<h?f+31744:f+(h+15<<10)+e}return c}},{}],32:[function(e,
g,l){g.exports=function(a){return Object.keys(a).map(function(b){return a[b]})}},{}],33:[function(e,g,l){g.exports=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],h=b[4],k=b[5],n=b[6],g=b[7],l=b[8],m=b[9],u=b[10],r=b[11],v=b[12],B=b[13],t=b[14],x=b[15];a[0]=k*(u*x-r*t)-m*(n*x-g*t)+B*(n*r-g*u);a[1]=-(d*(u*x-r*t)-m*(e*x-f*t)+B*(e*r-f*u));a[2]=d*(n*x-g*t)-k*(e*x-f*t)+B*(e*g-f*n);a[3]=-(d*(n*r-g*u)-k*(e*r-f*u)+m*(e*g-f*n));a[4]=-(h*(u*x-r*t)-l*(n*x-g*t)+v*(n*r-g*u));a[5]=c*(u*x-r*t)-l*(e*x-f*t)+v*(e*r-
f*u);a[6]=-(c*(n*x-g*t)-h*(e*x-f*t)+v*(e*g-f*n));a[7]=c*(n*r-g*u)-h*(e*r-f*u)+l*(e*g-f*n);a[8]=h*(m*x-r*B)-l*(k*x-g*B)+v*(k*r-g*m);a[9]=-(c*(m*x-r*B)-l*(d*x-f*B)+v*(d*r-f*m));a[10]=c*(k*x-g*B)-h*(d*x-f*B)+v*(d*g-f*k);a[11]=-(c*(k*r-g*m)-h*(d*r-f*m)+l*(d*g-f*k));a[12]=-(h*(m*t-u*B)-l*(k*t-n*B)+v*(k*u-n*m));a[13]=c*(m*t-u*B)-l*(d*t-e*B)+v*(d*u-e*m);a[14]=-(c*(k*t-n*B)-h*(d*t-e*B)+v*(d*n-e*k));a[15]=c*(k*u-n*m)-h*(d*u-e*m)+l*(d*n-e*k);return a}},{}],34:[function(e,g,l){g.exports=function(a){var b=new Float32Array(16);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],35:[function(e,g,l){g.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],36:[function(e,g,l){g.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],37:[function(e,g,l){g.exports=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],k=a[6],g=a[7],l=a[8],w=a[9],m=a[10],u=a[11],r=a[12],v=a[13],B=a[14];a=a[15];return(b*h-c*f)*(m*a-u*B)-(b*k-d*f)*(w*a-u*v)+(b*g-e*f)*(w*B-m*v)+(c*k-d*h)*(l*a-u*r)-(c*g-e*h)*(l*B-m*r)+(d*g-e*k)*(l*v-w*r)}},{}],38:[function(e,g,l){g.exports=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],h=c+c,k=d+d,g=e+
e,c=c*h,l=d*h,d=d*k,w=e*h,m=e*k,e=e*g,h=f*h,k=f*k,f=f*g;a[0]=1-d-e;a[1]=l+f;a[2]=w-k;a[3]=0;a[4]=l-f;a[5]=1-c-e;a[6]=m+h;a[7]=0;a[8]=w+k;a[9]=m-h;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],39:[function(e,g,l){g.exports=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],k=d+d,g=e+e,l=f+f;b=d*k;var w=d*g,d=d*l,m=e*g,e=e*l,f=f*l,k=h*k,g=h*g,h=h*l;a[0]=1-(m+f);a[1]=w+h;a[2]=d-g;a[3]=0;a[4]=w-h;a[5]=1-(b+f);a[6]=e+k;a[7]=0;a[8]=d+g;a[9]=e-k;a[10]=1-(b+m);a[11]=0;a[12]=c[0];a[13]=c[1];
a[14]=c[2];a[15]=1;return a}},{}],40:[function(e,g,l){g.exports=function(a,b,c,d,e,f,h){var k=1/(c-b),g=1/(e-d),l=1/(f-h);a[0]=2*f*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*g;a[6]=0;a[7]=0;a[8]=(c+b)*k;a[9]=(e+d)*g;a[10]=(h+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*f*2*l;a[15]=0;return a}},{}],41:[function(e,g,l){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(e,g,l){g.exports={create:e("./create"),
clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),
ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":33,"./clone":34,"./copy":35,"./create":36,"./determinant":37,"./fromQuat":38,"./fromRotationTranslation":39,"./frustum":40,"./identity":41,"./invert":43,"./lookAt":44,"./multiply":45,"./ortho":46,"./perspective":47,"./perspectiveFromFieldOfView":48,"./rotate":49,"./rotateX":50,"./rotateY":51,"./rotateZ":52,"./scale":53,"./str":54,"./translate":55,"./transpose":56}],43:[function(e,g,l){g.exports=function(a,b){var c=b[0],d=b[1],e=
b[2],f=b[3],h=b[4],k=b[5],g=b[6],l=b[7],w=b[8],m=b[9],u=b[10],r=b[11],v=b[12],B=b[13],t=b[14],x=b[15],y=c*k-d*h,D=c*g-e*h,C=c*l-f*h,A=d*g-e*k,O=d*l-f*k,T=e*l-f*g,R=w*B-m*v,K=w*t-u*v,I=w*x-r*v,z=m*t-u*B,M=m*x-r*B,Y=u*x-r*t,G=y*Y-D*M+C*z+A*I-O*K+T*R;if(!G)return null;G=1/G;a[0]=(k*Y-g*M+l*z)*G;a[1]=(e*M-d*Y-f*z)*G;a[2]=(B*T-t*O+x*A)*G;a[3]=(u*O-m*T-r*A)*G;a[4]=(g*I-h*Y-l*K)*G;a[5]=(c*Y-e*I+f*K)*G;a[6]=(t*C-v*T-x*D)*G;a[7]=(w*T-u*C+r*D)*G;a[8]=(h*M-k*I+l*R)*G;a[9]=(d*I-c*M-f*R)*G;a[10]=(v*O-B*C+x*y)*
G;a[11]=(m*C-w*O-r*y)*G;a[12]=(k*K-h*z-g*R)*G;a[13]=(c*z-d*K+e*R)*G;a[14]=(B*D-v*A-t*y)*G;a[15]=(w*A-m*D+u*y)*G;return a}},{}],44:[function(e,g,l){var a=e("./identity");g.exports=function(b,c,d,e){var f,h,k,g,l,w,m,u,r=c[0],v=c[1];c=c[2];k=e[0];g=e[1];h=e[2];m=d[0];e=d[1];f=d[2];if(1E-6>Math.abs(r-m)&&1E-6>Math.abs(v-e)&&1E-6>Math.abs(c-f))return a(b);d=r-m;e=v-e;m=c-f;u=1/Math.sqrt(d*d+e*e+m*m);d*=u;e*=u;m*=u;f=g*m-h*e;h=h*d-k*m;k=k*e-g*d;(u=Math.sqrt(f*f+h*h+k*k))?(u=1/u,f*=u,h*=u,k*=u):k=h=f=0;
g=e*k-m*h;l=m*f-d*k;w=d*h-e*f;(u=Math.sqrt(g*g+l*l+w*w))?(u=1/u,g*=u,l*=u,w*=u):w=l=g=0;b[0]=f;b[1]=g;b[2]=d;b[3]=0;b[4]=h;b[5]=l;b[6]=e;b[7]=0;b[8]=k;b[9]=w;b[10]=m;b[11]=0;b[12]=-(f*r+h*v+k*c);b[13]=-(g*r+l*v+w*c);b[14]=-(d*r+e*v+m*c);b[15]=1;return b}},{"./identity":41}],45:[function(e,g,l){g.exports=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],n=b[5],l=b[6],w=b[7],m=b[8],u=b[9],r=b[10],v=b[11],B=b[12],t=b[13],x=b[14];b=b[15];var y=c[0],D=c[1],C=c[2],A=c[3];a[0]=y*d+D*g+C*m+A*B;a[1]=
y*e+D*n+C*u+A*t;a[2]=y*f+D*l+C*r+A*x;a[3]=y*h+D*w+C*v+A*b;y=c[4];D=c[5];C=c[6];A=c[7];a[4]=y*d+D*g+C*m+A*B;a[5]=y*e+D*n+C*u+A*t;a[6]=y*f+D*l+C*r+A*x;a[7]=y*h+D*w+C*v+A*b;y=c[8];D=c[9];C=c[10];A=c[11];a[8]=y*d+D*g+C*m+A*B;a[9]=y*e+D*n+C*u+A*t;a[10]=y*f+D*l+C*r+A*x;a[11]=y*h+D*w+C*v+A*b;y=c[12];D=c[13];C=c[14];A=c[15];a[12]=y*d+D*g+C*m+A*B;a[13]=y*e+D*n+C*u+A*t;a[14]=y*f+D*l+C*r+A*x;a[15]=y*h+D*w+C*v+A*b;return a}},{}],46:[function(e,g,l){g.exports=function(a,b,c,d,e,f,h){var g=1/(b-c),n=1/(d-e),l=
1/(f-h);a[0]=-2*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*n;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*g;a[13]=(e+d)*n;a[14]=(h+f)*l;a[15]=1;return a}},{}],47:[function(e,g,l){g.exports=function(a,b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a}},{}],48:[function(e,g,l){g.exports=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*
Math.PI/180),h=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var g=2/(h+b),n=2/(e+f);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=-((h-b)*g*.5);a[9]=(e-f)*n*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a}},{}],49:[function(e,g,l){g.exports=function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var h=Math.sqrt(e*e+f*f+d*d),g,n,l,w,m,u,r,v,B,t,x,y,D,C,A,O,T,R,K,I;if(1E-6>Math.abs(h))return null;h=1/h;e*=h;f*=h;d*=h;g=Math.sin(c);n=Math.cos(c);
l=1-n;c=b[0];h=b[1];w=b[2];m=b[3];u=b[4];r=b[5];v=b[6];B=b[7];t=b[8];x=b[9];y=b[10];D=b[11];C=e*e*l+n;A=f*e*l+d*g;O=d*e*l-f*g;T=e*f*l-d*g;R=f*f*l+n;K=d*f*l+e*g;I=e*d*l+f*g;e=f*d*l-e*g;f=d*d*l+n;a[0]=c*C+u*A+t*O;a[1]=h*C+r*A+x*O;a[2]=w*C+v*A+y*O;a[3]=m*C+B*A+D*O;a[4]=c*T+u*R+t*K;a[5]=h*T+r*R+x*K;a[6]=w*T+v*R+y*K;a[7]=m*T+B*R+D*K;a[8]=c*I+u*e+t*f;a[9]=h*I+r*e+x*f;a[10]=w*I+v*e+y*f;a[11]=m*I+B*e+D*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}},{}],50:[function(e,g,l){g.exports=
function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],h=b[6],g=b[7],n=b[8],l=b[9],w=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+n*d;a[5]=f*c+l*d;a[6]=h*c+w*d;a[7]=g*c+m*d;a[8]=n*c-e*d;a[9]=l*c-f*d;a[10]=w*c-h*d;a[11]=m*c-g*d;return a}},{}],51:[function(e,g,l){g.exports=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],h=b[2],g=b[3],n=b[8],l=b[9],w=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=
b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-n*d;a[1]=f*c-l*d;a[2]=h*c-w*d;a[3]=g*c-m*d;a[8]=e*d+n*c;a[9]=f*d+l*c;a[10]=h*d+w*c;a[11]=g*d+m*c;return a}},{}],52:[function(e,g,l){g.exports=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],k=b[3],n=b[4],l=b[5],w=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+n*d;a[1]=f*c+l*d;a[2]=g*c+w*d;a[3]=k*c+m*d;a[4]=n*c-e*d;a[5]=l*c-f*d;
a[6]=w*c-g*d;a[7]=m*c-k*d;return a}},{}],53:[function(e,g,l){g.exports=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],54:[function(e,g,l){g.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+
a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],55:[function(e,g,l){g.exports=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,k,n,l,w,m,u,r,v,B,t;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],k=b[2],n=b[3],l=b[4],w=b[5],m=b[6],u=b[7],r=b[8],v=b[9],B=b[10],t=b[11],a[0]=f,a[1]=g,a[2]=k,a[3]=n,a[4]=l,a[5]=w,a[6]=m,a[7]=u,a[8]=r,a[9]=v,a[10]=B,a[11]=t,a[12]=f*d+l*e+r*c+b[12],a[13]=g*d+w*e+
v*c+b[13],a[14]=k*d+m*e+B*c+b[14],a[15]=n*d+u*e+t*c+b[15]);return a}},{}],56:[function(e,g,l){g.exports=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],k=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=k}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}},{}],57:[function(e,g,l){function a(a,
c,d,e){e[0]=b(255*a);e[1]=b(255*c);e[2]=b(255*d)}var b=Math.round,c=Math.min,d=Math.max,q=Math.ceil;g.exports=function(b,e,g,n){n=n||[0,0,0];b%=360;e=d(0,c(e,1));g=d(0,c(g,1));if(e){e=(1-e)*g;var l=g-e,w=b%60;switch(b/60|0){case 0:a(g,l*b/60+e,e,n);break;case 1:a(l*(60-w)/60+e,g,e,n);break;case 2:a(e,g,l*w/60+e,n);break;case 3:a(e,l*(60-w)/60+e,g,n);break;case 4:a(l*w/60+e,e,g,n);break;case 5:a(g,e,l*(60-w)/60+e,n)}}else n[0]=n[1]=n[2]=q(255*g);return n}},{}],58:[function(e,g,l){var a=e("./lib/util/extend"),
b=e("./lib/context"),c=e("./lib/strings"),d=e("./lib/extension"),q=e("./lib/limits"),f=e("./lib/buffer"),h=e("./lib/elements"),k=e("./lib/texture"),n=e("./lib/renderbuffer"),V=e("./lib/framebuffer"),w=e("./lib/uniform"),m=e("./lib/attribute"),u=e("./lib/shader"),r=e("./lib/draw"),v=e("./lib/state"),B=e("./lib/compile"),t=e("./lib/read"),x=e("./lib/dynamic"),y=e("./lib/util/raf"),D=e("./lib/util/clock");g.exports=function(){function e(){Q=y.next(e);L.count+=1;if(L.width!==z.drawingBufferWidth||L.height!==
z.drawingBufferHeight)L.width=z.drawingBufferWidth,L.height=z.drawingBufferHeight,W.notifyViewportChanged();var a=D();L.dt=a-L.t;L.t=a;E.poll();for(var b=0;b<ba.length;++b)(0,ba[b])(L.count,L.t,L.dt);L.renderTime=D()-a}function g(){Q&&(y.cancel(e),Q=0)}function l(a){g();a.preventDefault();if(M.onContextLost)M.onContextLost()}function T(a){z.getError();Y.refresh();X.refresh();E.refresh();p.refresh();P.refresh();pa.refresh();W.refresh();if(M.onContextRestored)M.onContextRestored();e()}function R(b){function c(a){var b=
{},e={};Object.keys(a).forEach(function(c){var f=a[c];x.isDynamic(f)?(d=!0,e[c]=x.unbox(f,c)):b[c]=f});return{dynamic:e,"static":b}}var d=!1,e=c(b.uniforms||{}),f=c(b.attributes||{});b=c(function(b){function c(a){if(a in d){var b=d[a];delete d[a];Object.keys(b).forEach(function(c){d[a+"."+c]=b[c]})}}var d=a({},b);delete d.uniforms;delete d.attributes;c("blend");c("depth");c("cull");c("stencil");c("polygonOffset");c("scissor");c("sample");return d}(b));var e=F.command(b["static"],e["static"],f["static"],
b.dynamic,e.dynamic,f.dynamic,d),g=e.draw,h=e.batch,k=e.scope,l=[];return function(a,b){if("function"===typeof a)return k(null,a);if("function"===typeof b)return k(a,b);if("number"===typeof a){for(var c=a|0;l.length<c;)l.push(null);return h(a|0,l)}return Array.isArray(a)?h(a.length,a):g(a)}}function K(){P.poll();W.poll()}var I=b(Array.prototype.slice.call(arguments)),z=I.gl,M=I.options,I=c(),Y=d(z),G=Y.extensions,ea={width:z.drawingBufferWidth,height:z.drawingBufferHeight},aa=q(z,G),X=f(z),ca=h(z,
G,X),na=w(I),qa=m(z,G,aa,X,I),pa=u(z,qa,na,function(a){return F.draw(a)},I),da=r(z,G,X),E=k(z,G,aa,K,ea),p=n(z,G,aa),P=V(z,G,aa,E,p),L={count:0,start:D(),dt:0,t:D(),renderTime:0,width:z.drawingBufferWidth,height:z.drawingBufferHeight,pixelRatio:M.pixelRatio},W=v(z,P,ea),ea=t(z,K,ea),F=B(z,I,G,aa,X,ca,E,P,W,na,qa,pa,da,L,K),U=z.canvas,ba=[],Q=0;U&&(U.addEventListener("webglcontextlost",l,!1),U.addEventListener("webglcontextrestored",T,!1));return a(R,{clear:function(a){var b=0;K();var c=a.color;c&&
(z.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(z.clearDepth(+a.depth),b|=256);"stencil"in a&&(z.clearStencil(a.stencil|0),b|=1024);z.clear(b)},prop:x.define,draw:R({}),elements:function(a){return ca.create(a)},buffer:function(a){return X.create(a,34962)},texture:function(a){return E.create(a,3553)},cube:function(a){return 6===arguments.length?E.create(Array.prototype.slice.call(arguments),34067):E.create(a,34067)},renderbuffer:function(a){return p.create(a)},framebuffer:function(a){return P.create(a)},
framebufferCube:function(a){},frame:function(a){ba.push(a);!Q&&0<ba.length&&e();return{cancel:function(){var b=ba.find(function(b){return b===a});0>b||(ba.splice(b,1),0>=ba.length&&g())}}},stats:L,limits:aa,read:ea,destroy:function(){g();U&&(U.removeEventListener("webglcontextlost",l),U.removeEventListener("webglcontextrestored",T));pa.clear();P.clear();p.clear();E.clear();X.clear();if(M.onDestroy)M.onDestroy()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/compile":4,"./lib/context":8,"./lib/draw":9,
"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/state":18,"./lib/strings":19,"./lib/texture":20,"./lib/uniform":21,"./lib/util/clock":22,"./lib/util/extend":24,"./lib/util/raf":29}]},{},[1]);
