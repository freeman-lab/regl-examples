<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var e=0;return{next:function(){return e==a.length?{done:!0}:{done:!1,value:a[e++]}}}};
$jscomp.arrayFromIterator=function(a){for(var e,g=[];!(e=a.next()).done;)g.push(e.value);return g};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,e){function g(){}g.prototype=e.prototype;a.prototype=new g;a.prototype.constructor=a;for(var n in e)if($jscomp.global.Object.defineProperties){var m=$jscomp.global.Object.getOwnPropertyDescriptor(e,n);m&&$jscomp.global.Object.defineProperty(a,n,m)}else a[n]=e[n]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,e){a instanceof String&&(a=String(a));var g=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var n={},m=(n.next=function(){if(g<a.length){var b=g++;return{value:e(b,a[b]),done:!1}}m.next=$jscomp.array.done_;return $jscomp.array.done_()},n[Symbol.iterator]=function(){return m},n);return m};
$jscomp.array.findInternal_=function(a,e,g){a instanceof String&&(a=String(a));for(var n=a.length,m=0;m<n;m++){var b=a[m];if(e.call(g,b,m,a))return{i:m,v:b}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,e,g){e=void 0===e?function(d){return d}:e;var n=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var m;!(m=a.next()).done;)n.push(e.call(g,m.value))}else{m=a.length;for(var b=0;b<m;b++)n.push(e.call(g,a[b]))}return n};$jscomp.array.of=function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];return $jscomp.array.from(e)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,e){return[a,e]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,e){return e})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,e,g){var n=this.length;a=Number(a);e=Number(e);g=Number(null!=g?g:n);if(a<e)for(g=Math.min(g,n);e<g;)e in this?this[a++]=this[e++]:(delete this[a++],e++);else for(g=Math.min(g,n+e-a),a+=g-e;g>e;)--g in this?this[--a]=this[g]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,e,g){null!=g&&a.length||(g=this.length||0);g=Number(g);for(e=Number((void 0===e?0:e)||0);e<g;e++)this[e]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,e){return $jscomp.array.findInternal_(this,a,e).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,e){return $jscomp.array.findInternal_(this,a,e).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,this.set(e[0],e[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var e=Object.seal({x:4}),g=new a($jscomp.makeIterator([[e,"s"]]));if("s"!=g.get(e)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var n=g.entries(),m=n.next();if(m.done||m.value[0]!=e||"s"!=m.value[1])return!1;m=n.next();return m.done||4!=m.value[0].x||"t"!=m.value[1]||!n.next().done?!1:!0}catch(b){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,e){var g=this.maybeGetEntry_(a),n=g.id,m=g.list,g=g.entry;m||(m=this.data_[n]=[]);g?g.value=e:(g={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:e},m.push(g),this.head_.previous.next=g,this.head_.previous=g,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var e=this.maybeGetEntry_(a);a=e.id;var g=e.list,n=e.index;return(e=e.entry)&&g?(g.splice(n,1),g.length||delete this.data_[a],e.previous.next=e.next,e.next.previous=e.previous,e.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var e=$jscomp.Map.getId_(a),g=this.data_[e];if(g)for(var n=0;n<g.length;n++){var m=g[n];if(a!==a&&m.key!==m.key||a===m.key)return{id:e,list:g,index:n,entry:m}}return{id:e,list:g,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,e){for(var g=$jscomp.makeIterator(this.entries()),n=g.next();!n.done;n=g.next())n=n.value,a.call(e,n[1],n[0],this)};
$jscomp.Map.prototype.iter_=function(a){var e=this,g=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var n={};return n.next=function(){if(g){for(;g.head!=e.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:a(g)};g=null}return{done:!0,value:void 0}},n[Symbol.iterator]=function(){return this},n};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,e,g){Object.defineProperty(a,e,{value:String(g)})}:function(a,e,g){a[e]=String(g)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var e=0;0===(a&4294901760)&&(a<<=16,e+=16);0===(a&4278190080)&&(a<<=8,e+=8);0===(a&4026531840)&&(a<<=4,e+=4);0===(a&3221225472)&&(a<<=2,e+=2);0===(a&2147483648)&&e++;return e};$jscomp.math.imul=function(a,e){a=Number(a);e=Number(e);var g=a&65535,n=e&65535;return g*n+((a>>>16&65535)*n+g*(e>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var e=a,g=1,n=a,m=0,b=1;m!=n;)e*=a,b*=-1,n=(m=n)+b*e/++g;return n}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var e=a,g=1,n=a,m=0;m!=n;)e*=a/++g,n=(m=n)+e;return n}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var e=Math.exp(2*-Math.abs(a)),e=(1-e)/(1+e);return 0>a?-e:e};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var e=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-e:e};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,e,g){for(var n=[],m=2;m<arguments.length;++m)n[m-2]=arguments[m];a=Number(a);e=Number(e);for(var b=Math.max(Math.abs(a),Math.abs(e)),d=$jscomp.makeIterator(n),m=d.next();!m.done;m=d.next())b=Math.max(b,Math.abs(m.value));if(1E100<b||1E-100>b){a/=b;e/=b;d=a*a+e*e;n=$jscomp.makeIterator(n);for(m=n.next();!m.done;m=n.next())m=m.value,m=Number(m)/b,d+=m*m;return Math.sqrt(d)*b}b=a*a+e*e;n=$jscomp.makeIterator(n);for(m=n.next();!m.done;m=n.next())m=m.value,m=Number(m),b+=
m*m;return Math.sqrt(b)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var e=Math.floor(Math.abs(a));return 0>a?-e:e};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var e=Math.pow(Math.abs(a),1/3);return 0>a?-e:e};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,e){for(var g=[],n=1;n<arguments.length;++n)g[n-1]=arguments[n];g=$jscomp.makeIterator(g);for(n=g.next();!n.done;n=g.next())if(n=n.value)for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(a[m]=n[m]);return a};$jscomp.object.is=function(a,e){return a===e?0!==a||1/a===1/e:a!==a&&e!==e};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())this.add(e.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var e=Object.seal({x:4}),a=new a($jscomp.makeIterator([e]));if(a.has(e)||1!=a.size||a.add(e)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),g=a.next();if(g.done||g.value[0]!=e||g.value[1]!=e)return!1;g=a.next();return g.done||g.value[0]==e||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,e){var g=this;this.map_.forEach(function(n){return a.call(e,n,n,g)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,e){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];for(var g="",e=$jscomp.makeIterator(e),n=e.next();!n.done;n=e.next()){n=n.value;n=+n;if(0>n||1114111<n||n!==Math.floor(n))throw new RangeError("invalid_code_point "+n);65535>=n?g+=String.fromCharCode(n):(n-=65536,g+=String.fromCharCode(n>>>10&1023|55296),g+=String.fromCharCode(n&1023|56320))}return g};
$jscomp.string.repeat=function(a){var e=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var g="";a;)if(a&1&&(g+=e),a>>>=1)e+=e;return g};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var e=this.toString(),g=e.length;a=Number(a)||0;if(0<=a&&a<g){a|=0;var n=e.charCodeAt(a);if(55296>n||56319<n||a+1===g)return n;a=e.charCodeAt(a+1);return 56320>a||57343<a?n:1024*(n-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,e)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(a,"startsWith");var g=this.toString();a+="";for(var n=g.length,m=a.length,b=Math.max(0,Math.min(e|0,g.length)),d=0;d<m&&b<n;)if(g[b++]!=a[d++])return!1;return d>=m};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,e){$jscomp.string.noRegExp_(a,"endsWith");var g=this.toString();a+="";void 0===e&&(e=g.length);for(var n=Math.max(0,Math.min(e|0,g.length)),m=a.length;0<m&&0<n;)if(g[--n]!=a[--m])return!1;return 0>=m};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(e,g,n){function m(d,k){if(!g[d]){if(!e[d]){var y="function"==typeof require&&require;if(!k&&y)return y(d,!0);if(b)return b(d,!0);y=Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y;}y=g[d]={exports:{}};e[d][0].call(y.exports,function(b){var k=e[d][1][b];return m(k?k:b)},y,y.exports,e$$0,e,g,n)}return g[d].exports}for(var b="function"==typeof require&&require,d=0;d<n.length;d++)m(n[d]);return m})({1:[function(a,e,g){e=a("../regl")();g=a("vectorize-text");var n=a("gl-mat4/perspective"),
m=a("gl-mat4/lookAt");a=g("hello regl!",{textAlign:"center",textBaseline:"middle"});var b=e.texture({copy:!0,min:"linear",mag:"linear"}),d=e({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:e.buffer([-2,0,0,-2,2,2])},uniforms:{texture:b,t:function(d,b){return.001*b.count}},depth:{enable:!1},count:3}),w=e({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",
attributes:{position:e.buffer(a.positions)},elements:e.elements(a.edges),uniforms:{t:function(d,b){return.01*b.count},view:function(d,b){var w=.01*b.count;return m([],[5*Math.sin(w),0,-5*Math.cos(w)],[0,0,0],[0,-1,0])},projection:function(d,b){return n([],Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)}},depth:{enable:!1}});e.frame(function(a,m){d();w();b({copy:!0,min:"linear",mag:"linear"})})},{"../regl":163,"gl-mat4/lookAt":38,"gl-mat4/perspective":39,"vectorize-text":40}],2:[function(a,e,g){var n=
a("./constants/dtypes.json");e.exports=function(a,b,d,w,k){function y(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function r(d){this.records=[];this.name=d}function t(d,c,p,l){l=p.size||l;var w;w=c.pointer?p.pointer&&c.buffer===p.buffer&&c.size===l&&c.normalized===p.normalized&&c.type===(p.type||p.buffer.dtype||5126)&&c.offset===p.offset&&c.stride===p.stride&&c.divisor===p.divisor:!p.pointer&&
c.x===p.x&&c.y===p.y&&c.z===p.z&&c.w===p.w;w||(p.pointer?(a.enableVertexAttribArray(d),p.buffer.bind(),a.vertexAttribPointer(d,l,p.type||p.buffer.dtype||5126,p.normalized,p.stride,p.offset),(w=b.angle_instanced_arrays)&&w.vertexAttribDivisorANGLE(d,p.divisor)):(a.disableVertexAttribArray(d),a.vertexAttrib4f(d,p.x,p.y,p.z,p.w)),(c.pointer=p.pointer)?(c.buffer=p.buffer,c.size=l,c.normalized=p.normalized,c.type=p.type||p.buffer.dtype||5126,c.offset=p.offset,c.stride=p.stride,c.divisor=p.divisor):(c.x=
p.x,c.y=p.y,c.z=p.z,c.w=p.w))}var u={};d=d.maxAttributes;for(var q=Array(d),l=0;l<d;++l)q[l]=new y;return{bindings:q,bind:function(d,c,b,l){b=b.records;t(d,c,b[b.length-1],l)},bindRecord:t,def:function(d){var c=k.id(d),b=u[c];b||(b=u[c]=new r(d));return b},box:function(d){var c=[new y];return{alloc:function(d){var b;b=0>=c.length?new y:c.pop();if("number"===typeof d)b.pointer=!1,b.x=d,b.y=0,b.z=0,b.w=0;else if(Array.isArray(d))b.pointer=!1,b.x=d[0],b.y=d[1],b.z=d[2],b.w=d[3];else{var h=w.getBuffer(d),
l=0,f=0,a=0,k=0,A=!1,q=0;h||(h=w.getBuffer(d.buffer),l=d.size||0,f=d.stride||0,a=d.offset||0,k=d.divisor||0,A=d.normalized||!1,q=0,"type"in d&&(q=n[d.type]));b.pointer=!0;b.buffer=h;b.size=l;b.offset=a;b.stride=f;b.divisor=k;b.normalized=A;b.type=q}return b},free:function(d){c.push(d)}}},state:u}}},{"./constants/dtypes.json":6}],3:[function(a,e,g){function n(d,b){switch(d){case 5121:return new Uint8Array(b);case 5123:return new Uint16Array(b);case 5125:return new Uint32Array(b);case 5120:return new Int8Array(b);
case 5122:return new Int16Array(b);case 5124:return new Int32Array(b);case 5126:return new Float32Array(b);default:return null}}var m=a("./util/is-typed-array"),b=a("./util/is-ndarray"),d=a("./constants/arraytypes.json"),w=a("./constants/dtypes.json"),k=a("./util/values"),y={"static":35044,dynamic:35048,stream:35040};e.exports=function(a,t){function u(b,d){this.id=h++;this.buffer=b;this.type=d;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function q(b){t(b);a.isBuffer(b.buffer)||
(b.buffer=a.createBuffer());b.bind();a.bufferData(b.type,b.data||b.byteLength,b.usage)}function l(b){var d=b.buffer;t(b);a.isBuffer(d)&&a.deleteBuffer(d);b.buffer=null;delete c[b.id]}var h=0,c={};u.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};return{create:function(h,k,z){function t(f){var c=f||{};if(Array.isArray(c)||m(c)||b(c))c={data:c};else if("number"===typeof c)c={length:c|0};else if(null===c||void 0===c)c={};x.usage="usage"in c?y[c.usage]:35044;f=0;"type"in c&&(f=w[c.type]);
var h=c.dimension|0||1,p=0,l=null;if("data"in c)if(l=c.data,null===l)p=c.length|0;else{if(b(l)){var h=l.shape,p=l.stride,c=l.offset,a=0,k=0,v=0,r=0;1===h.length?(a=h[0],k=1,v=p[0],r=0):2===h.length&&(a=h[0],k=h[1],v=p[0],r=p[1]);f=f||d[Object.prototype.toString.call(l)]|0||5126;for(var h=k,p=n(f,a*k),l=l.data,u=0,z=0;z<a;++z)for(var K=0;K<k;++K)p[u++]=l[v*z+r*K+c];l=p}else if(Array.isArray(l))if(0<l.length&&Array.isArray(l[0])){h=l[0].length;f=f||5126;c=n(f,l.length*h);p=l;l=h;for(a=r=0;a<p.length;++a)for(v=
p[a],k=0;k<l;++k)c[r++]=v[k];l=c}else f=f||5126,l=n(f,l);else f=f||d[Object.prototype.toString.call(l)]|0;p=l.byteLength}else"length"in c&&(p=c.length|0);x.data=l;x.dtype=f||5121;x.byteLength=p;x.dimension=h;q(x);return t}var f=a.createBuffer(),x=new u(f,k);c[x.id]=x;z||t(h);t._reglType="buffer";t._buffer=x;t.destroy=function(){l(x)};return t},clear:function(){k(c).forEach(l)},refresh:function(){k(c).forEach(q)},getBuffer:function(c){return c&&c._buffer instanceof u?c._buffer:null}}}},{"./constants/arraytypes.json":5,
"./constants/dtypes.json":6,"./util/is-ndarray":24,"./util/is-typed-array":25,"./util/values":31}],4:[function(a,e,g){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function m(b,d,l,h){var c,p=",";switch(d){case 5126:c="1f";break;case 35664:c="2fv";break;case 35665:c="3fv";break;case 35666:c="4fv";break;case 35670:case 5124:c="1i";break;case 35671:case 35667:c="2iv";break;case 35672:case 35668:c=
"3iv";break;case 35673:case 35669:c="4iv";break;case 35674:c="Matrix2fv";p=",false,";break;case 35675:c="Matrix3fv";p=",false,";break;case 35676:c="Matrix4fv",p=",false,"}return b+".uniform"+c+"("+l+p+h+");"}function b(b){return b+"["+b+".length-1]"}function d(b,d){return"framebuffer"===b||b<d?-1:b>d?1:0}var w=a("./util/codegen"),k=a("./constants/primitives.json"),y={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,
"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},r={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};e.exports=function(a,q,l,
h,c,p,v,z,e,f,x,D,A,C,g){function H(c,h,v,q,M){function D(f){var c=sa[f];return c?c:c=sa[f]=I(G[f])}function e(f){var c=f.id,b=ja[c];if(b)return b;switch(f.type){case 0:b=H.def(I(f.data),".call(this,",ba,",",Y,")");break;case 1:b=H.def(ba,f.data);break;case 2:b=H.def(Y,f.data);break;case 3:b=H.def("this",f.data)}return ja[c]=b}function g(f,c){for(var b=0;b<f.length;++b)if(f[b].name===c)return f[b];return null}function B(f){return X&&!(f in h||f in M)}var E=w(),I=E.link,H=E.proc("batch"),L=E.block(),
P=H.def,U=H.arg,J=I(a),ca=I(c.program),da=I(x.bind),ma=I(x.bindRecord),Y=I(C),ha=I(z),ia=I(A.count),na=I(A.offset),ra=I(A.instances),ea=I(A.primitive),sa={},Q=I(p.elements),ia=P(b(ia)),na=P(b(na)),ea=P(b(ea)),Q=P(b(Q)),V,la,oa=l.angle_instanced_arrays;oa&&(V=P(b(ra)),la=I(oa));var X="elements"in h,ra=U(),U=U(),ba=P(),qa=P(),ja={};H(J,".useProgram(",ca,");");c.uniforms.forEach(function(c){if(!(c.name in v)){var b=I(c.location),d=I(f.def(c.name)),d=d+"["+d+".length-1]";c=c.info.type;35678===c||35680===
c?(c=P(d+"._texture"),H(m(J,5124,b,c+".bind()")),L(c,".unbind();")):H(m(J,c,b,d))}});c.attributes.forEach(function(f){if(!(f.name in q)){var c=I(x.def(f.name));H(da,"(",f.location,",",I(x.bindings[f.location]),",",c,",",n(f.info.type),");")}});X||H("if(",Q,")",J,".bindBuffer(",34963,",",Q,".buffer.buffer);");H("for(",qa,"=0;",qa,"<",ra,";++",qa,"){",ba,"=",U,"[",qa,"];",Y,".batchId=",qa,";");Object.keys(h).sort(d).forEach(function(f){function c(f){H("if(",b,"){",J,".enable(",f,");}else{",J,".disable(",
f,");}")}var b=e(h[f]);switch(f){case "framebuffer":f=D("viewport");var d=D("scissor.box");H("if(",ha,".push(",b,"&&",b,"._framebuffer)){",ha,".poll();",f,".setDirty();",d,".setDirty();","}");break;case "cull.enable":c(2884);break;case "blend.enable":c(3042);break;case "dither":c(3024);break;case "stencil.enable":c(2960);break;case "depth.enable":c(2929);break;case "scissor.enable":c(3089);break;case "polygonOffset.enable":c(32823);break;case "sample.alpha":c(32926);break;case "sample.enable":c(32928);
break;case "depth.mask":H(J,".depthMask(",b,");");break;case "depth.func":f=I(r);H(J,".depthFunc(",f,"[",b,"]);");break;case "depth.range":H(J,".depthRange(",b,"[0],",b,"[1]);");break;case "blend.color":H(J,".blendColor(",b,"[0],",b,"[1],",b,"[2],",b,"[3]);");break;case "blend.equation":f=I(F);H("if(typeof ",b,'==="string"){',J,".blendEquation(",f,"[",b,"]);","}else{",J,".blendEquationSeparate(",f,"[",b,".rgb],",f,"[",b,".alpha]);","}");break;case "blend.func":f=I(y);H(J,".blendFuncSeparate(",f,'["srcRGB" in ',
b,"?",b,".srcRGB:",b,".src],",f,'["dstRGB" in ',b,"?",b,".dstRGB:",b,".dst],",f,'["srcAlpha" in ',b,"?",b,".srcAlpha:",b,".src],",f,'["dstAlpha" in ',b,"?",b,".dstAlpha:",b,".dst]);");break;case "stencil.mask":H(J,".stencilMask(",b,");");break;case "stencil.func":f=I(r);H(J,".stencilFunc(",f,"[",b,'.cmp||"always"],',b,".ref|0,",'"mask" in ',b,"?",b,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":d=I(t);H(J,".stencilOpSeparate(","stencil.opFront"===f?1028:1029,",",d,"[",b,'.fail||"keep"],',
d,"[",b,'.zfail||"keep"],',d,"[",b,'.pass||"keep"]);');break;case "polygonOffset.offset":H(J,".polygonOffset(",b,".factor||0,",b,".units||0);");break;case "cull.face":H(J,".cullFace(",b,'==="front"?',1028,":",1029,");");break;case "lineWidth":H(J,".lineWidth(",b,");");break;case "frontFace":H(J,".frontFace(",b,'==="cw"?',2304,":",2305,");");break;case "colorMask":H(J,".colorMask(",b,"[0],",b,"[1],",b,"[2],",b,"[3]);");break;case "sample.coverage":H(J,".sampleCoverage(",b,".value,",b,".invert);");
break;case "scissor.box":case "viewport":f=D(f),H(f,".push(",b,".x||0,",b,".y||0,",b,".w||-1,",b,".h||-1);")}});("viewport"in h||"framebuffer"in h)&&H(D("viewport"),".poll();");("scissor.box"in h||"framebuffer"in h)&&H(D("scissor.box"),".poll();");"framebuffer"in h&&H(ha,".pop();");var ka=c.uniforms,ta=[];Object.keys(v).forEach(function(f){var b=g(ka,f);if(b){var c=b.info.type,d=I(b.location);f=e(v[f]);35678===b.info.type||35680===b.info.type?(b=P(f+"._texture"),ta.push(b),H(m(J,5124,d,b+".bind()"))):
H(m(J,c,d,f))}});ta.forEach(function(f){H(f,".unbind();")});var pa=c.attributes;Object.keys(q).forEach(function(f){var b=g(pa,f);if(b){var c=I(x.box(f));f=e(q[f]);f=P(c+".alloc("+f+")");H(ma,"(",b.location,",",I(x.bindings[b.location]),",",f,",",n(b.info.type),");");L(c,".free(",f,");")}});h.count&&H(ia,"=",e(h.count),";");h.offset&&H(na,"=",e(h.offset),";");h.primitive&&H(ea,"=",I(k),"[",e(h.primitive),"];");oa&&h.instances&&H(V,"=",e(h.instances),";");X&&(c=e(h.elements),H(Q,"=",c,"?",c,"._elements:null;"));
B("offset")&&H(na,"=0;");H("if(",Q,"){");B("count")&&H(ia,"=",Q,".vertCount;");H("if(",ia,">0){");B("primitive")&&H(ea,"=",Q,".primType;");X&&H(J,".bindBuffer(",34963,",",Q,".buffer.buffer);");oa&&H("if(",V,">0){",la,".drawElementsInstancedANGLE(",ea,",",ia,",",Q,".type,",na,",",V,");}else ");H(J,".drawElements(",ea,",",ia,",",Q,".type,",na,");");H("}}else if(",ia,">0){");B("count")||(B("primitive")&&H(ea,"=",4,";"),oa&&H("if(",V,">0){",la,".drawArraysInstancedANGLE(",ea,",",na,",",ia,",",V,");}else{"),
H(J,".drawArrays(",ea,",",na,",",ia,");"),oa&&H("}"));H("}}",L);return E.compile().batch}var G=e.contextState,F={add:32774,subtract:32778,"reverse subtract":32779};l.ext_blend_minmax&&(F.min=32775,F.max=32776);var I=0;return{draw:function(c){var d=w(),h=d.link,k=d.proc("draw"),v=k.def,q=h(a),r=h(c.program),z=h(x.bind),t=h(A.count),y=h(A.offset),C=h(A.instances),D=h(A.primitive),e=h(p.elements),g=[];k(q,".useProgram(",r,");");c.attributes.forEach(function(f){var b=h(x.def(f.name));k(z,"(",f.location,
",",h(x.bindings[f.location]),",",b,",",n(f.info.type),");")});c.uniforms.forEach(function(b){var c=h(b.location),d=h(f.def(b.name)),d=d+"["+d+".length-1]";b=b.info.type;35678===b||35680===b?(b=v(d+"._texture"),g.push(b),k(m(q,5124,c,b+".bind()"))):k(m(q,b,c,d))});g.forEach(function(f){k(f,".unbind();")});c=v(b(D));t=v(b(t));y=v(b(y));e=v(b(e));k("if(",t,"){");(r=l.angle_instanced_arrays)?(C=v(b(C)),r=h(r),k("if(",e,"){",e,".bind();","if(",C,">0){",r,".drawElementsInstancedANGLE(",c,",",t,",",e,".type,",
y,",",C,");}else{",q,".drawElements(",c,",",t,",",e,".type,",y,");}","}else if(",C,">0){",r,".drawArraysInstancedANGLE(",c,",",y,",",t,",",C,");}else{",q,".drawArrays(",c,",",y,",",t,");}}")):k("if(",e,"){",e,".bind();",q,".drawElements(",c,",",t,",",e,".type,",y,");","}else{",q,".drawArrays(",c,",",y,",",t,");}}");return d.compile().draw},command:function(b,c,h,l,a,v,m,u){function n(f){var b=sa[f];return b?b:b=sa[f]=L(G[f])}function e(f,b){var c=n(f);Q(c,".push(",b,");");V(c,".pop();")}function B(f){var b=
f.id,c=qa[b];if(c)return c;switch(f.type){case 0:c=X.def(L(f.data),".call(this,",la,",",ea,")");break;case 1:c=X.def(la,f.data);break;case 2:c=X.def(ea,f.data);break;case 3:c=X.def("this",f.data)}return qa[b]=c}var W=w(),L=W.link,P=W.block,U=W.proc,J=I++,ca=L(g),da=L(D),ma=L(z),Y={count:L(A.count),offset:L(A.offset),instances:L(A.instances),primitive:L(A.primitive)},ha=L(p.elements),ia=L(k),na=L(r),ra=L(t),ea=L(C),sa={},Q=P(),V=P(),la;u&&(la=Q.def());Q(ea,".batchId=0;");var oa=P();Object.keys(m["static"]).forEach(function(f){var b=
Q.def(ea,".",f);oa(ea,".",f,"=",L(m["static"][f]),";");V(ea,".",f,"=",b,";")});Object.keys(m.dynamic).forEach(function(f){var b=Q.def(ea,".",f),c=Q.def(),d=m.dynamic[f];oa(ea,".",f,"=",c,";");switch(d.type){case 0:Q(c,"=",L(d.data),".call(this,",la,",",ea,");");break;case 1:Q(c,"=",la,d.data,";");break;case 2:Q(c,"=",ea,d.data,";");break;case 3:Q(c,"=","this",d.data,";")}V(ea,".",f,"=",b,";")});Q(oa);Object.keys(b).sort(d).forEach(function(f){var c=b[f];switch(f){case "frag":case "vert":c=q.id(c);
D.shader("frag"===f?35632:35633,c);Q(da,".",f,".push(",c,");");V(da,".",f,".pop();");break;case "framebuffer":z.getFramebuffer(c);f=n("viewport");var d=n("scissor.box");Q("if(",ma,".push(",L(c&&c._framebuffer),")){",f,".setDirty();",d,".setDirty();","}");V("if(",ma,".pop()){",f,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":Q(Y[f],".push(",c,");");V(Y[f],".pop();");break;case "primitive":Q(Y.primitive,".push(",k[c],");");V(Y.primitive,".pop();");break;case "elements":d=
p.getElements(c);c=!("primitive"in b);f=!("count"in b);d?(d=L(d),Q(ha,".push(",d,");"),c&&Q(Y.primitive,".push(",d,".primType);"),f&&Q(Y.count,".push(",d,".vertCount);")):(Q(ha,".push(null);"),c&&Q(Y.primitive,".push(",4,");"),f&&Q(Y.count,".push(0);"));c&&V(Y.primitive,".pop();");f&&V(Y.count,".pop();");"offset"in b||(Q(Y.offset,".push(0);"),V(Y.offset,".pop();"));V(ha,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":e(f,
c);break;case "depth.func":e(f,r[c]);break;case "depth.range":f=n(f);Q(f,".push(",c[0],",",c[1],");");V(f,".pop();");break;case "blend.func":f=n(f);Q(f,".push(",y["srcRGB"in c?c.srcRGB:c.src],",",y["dstRGB"in c?c.dstRGB:c.dst],",",y["srcAlpha"in c?c.srcAlpha:c.src],",",y["dstAlpha"in c?c.dstAlpha:c.dst],");");V(f,".pop();");break;case "blend.equation":f=n(f);"string"===typeof c?Q(f,".push(",F[c],",",F[c],");"):"object"===typeof c&&Q(f,".push(",F[c.rgb],",",F[c.alpha],");");V(f,".pop();");break;case "blend.color":f=
n(f);Q(f,".push(",c[0],",",c[1],",",c[2],",",c[3],");");V(f,".pop();");break;case "stencil.mask":f=n(f);Q(f,".push(",c,");");V(f,".pop();");break;case "stencil.func":var d=c.cmp||"keep",h=c.ref||0,c="mask"in c?c.mask:-1;f=n(f);Q(f,".push(",r[d],",",h,",",c,");");V(f,".pop();");break;case "stencil.opFront":case "stencil.opBack":d=c.fail||"keep";h=c.zfail||"keep";c=c.pass||"keep";f=n(f);Q(f,".push(",t[d],",",t[h],",",t[c],");");V(f,".pop();");break;case "polygonOffset.offset":d=c.factor||0;c=c.units||
0;f=n(f);Q(f,".push(",d,",",c,");");V(f,".pop();");break;case "cull.face":d=0;"front"===c?d=1028:"back"===c&&(d=1029);c=n(f);Q(c,".push(",d,");");V(c,".pop();");break;case "lineWidth":e(f,c);break;case "frontFace":d=0;"cw"===c?d=2304:"ccw"===c&&(d=2305);c=n(f);Q(c,".push(",d,");");V(c,".pop();");break;case "colorMask":f=n(f);Q(f,".push(",c.map(function(f){return!!f}).join(),");");V(f,".pop();");break;case "sample.coverage":d="value"in c?c.value:1;c=!!c.invert;f=n(f);Q(f,".push(",d,",",c,");");V(f,
".pop();");break;case "viewport":case "scissor.box":var d=c.x||0,h=c.y||0,l=-1,a=-1;"w"in c&&(l=c.w);"h"in c&&(a=c.h);c=n(f);Q(c,".push(",d,",",h,",",l,",",a,");");V(c,".pop();")}});Object.keys(c).forEach(function(b){var d=L(f.def(b));b=c[b];b="function"===typeof b&&b._reglType?L(b):Array.isArray(b)?L(b.slice()):+b;Q(d,".push(",b,");");V(d,".pop();")});Object.keys(h).forEach(function(f){var c=h[f],b=L(x.def(f));f=L(x.box(f).alloc(c));Q(b,".records.push(",f,");");V(b,".records.pop();")});var X=W.block(),
ba=W.block(),qa={};Object.keys(l).sort(d).forEach(function(f){var c=B(l[f]);switch(f){case "framebuffer":f=n("viewport");var d=n("scissor.box");X("if(",ma,".push(",c,"&&",c,"._framebuffer)){",f,".setDirty();",d,".setDirty();","}");ba("if(",ma,".pop()){",f,".setDirty();",d,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":f=
n(f);X(f,".push(",c,");");ba(f,".pop();");break;case "count":case "offset":case "instances":f=Y[f];X(f,".push(",c,");");ba(f,".pop();");break;case "primitive":f=Y.primitive;X(f,".push(",ia,"[",c,"]);");ba(f,".pop();");break;case "depth.func":f=n(f);X(f,".push(",na,"[",c,"]);");ba(f,".pop();");break;case "blend.func":f=n(f);d=L(y);X(f,".push(",d,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",d,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",d,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",d,'["dstAlpha" in ',
c,"?",c,".dstAlpha:",c,".dst]);");ba(f,".pop();");break;case "blend.equation":f=n(f);d=L(F);X("if(typeof ",c,'==="string"){',f,".push(",d,"[",c,"],",d,"[",c,"]);","}else{",f,".push(",d,"[",c,".rgb],",d,"[",c,".alpha]);","}");ba(f,".pop();");break;case "blend.color":f=n(f);X(f,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ba(f,".pop();");break;case "stencil.mask":f=n(f);X(f,".push(",c,");");ba(f,".pop();");break;case "stencil.func":f=n(f);X(f,".push(",na,"[",c,".cmp],",c,".ref|0,",'"mask" in ',c,
"?",c,".mask:-1);");ba(f,".pop();");break;case "stencil.opFront":case "stencil.opBack":f=n(f);X(f,".push(",ra,"[",c,'.fail||"keep"],',ra,"[",c,'.zfail||"keep"],',ra,"[",c,'.pass||"keep"]);');ba(f,".pop();");break;case "polygonOffset.offset":f=n(f);X(f,".push(",c,".factor||0,",c,".units||0);");ba(f,".pop();");break;case "cull.face":f=n(f);X(f,".push(",c,'==="front"?',1028,":",1029,");");ba(f,".pop();");break;case "frontFace":f=n(f);X(f,".push(",c,'==="cw"?',2304,":",2305,");");ba(f,".pop();");break;
case "colorMask":f=n(f);X(f,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ba(f,".pop();");break;case "sample.coverage":f=n(f);X(f,".push(",c,".value,",c,".invert);");ba(f,".pop();");break;case "scissor.box":case "viewport":f=n(f);X(f,".push(",c,".x||0,",c,".y||0,",'"w" in ',c,"?",c,".w:-1,",'"h" in ',c,"?",c,".h:-1);");ba(f,".pop();");break;case "elements":f=!("primitive"in l)&&!("primitive"in b);var d=!("count"in l)&&!("count"in b),h=!("offset"in l)&&!("offset"in b),p=X.def();X("if(",c,"){",p,"=",
c,"._elements;",ha,".push(",p,");",f?Y.primitive+".push("+p+".primType);":"",d?Y.count+".push("+p+".vertCount);":"",h?Y.offset+".push("+p+".offset);":"","}else{",ha,".push(null);","}");ba(ha,".pop();","if(",c,"){",f?Y.primitive+".pop();":"",d?Y.count+".pop();":"",h?Y.offset+".pop();":"","}")}});Object.keys(a).forEach(function(c){var b=L(f.def(c));c=B(a[c]);X(b,".push(",c,");");ba(b,".pop();")});Object.keys(v).forEach(function(f){var c=L(x.def(f)),b=B(v[f]);f=L(x.box(f));X(c,".records.push(",f,".alloc(",
b,"));");ba(f,".free(",c,".records.pop());")});var ja=U("scope"),ka=ja.arg(),ta=ja.arg();u&&ja(la,"=",ka,";");ja(Q);u&&ja(X);ja(ta,"(",ka,",",ea,");",u?ba:"",V);ja=P();P=ja.def();b.frag&&b.vert?(ka=b.frag,ja(P,"=",L(D.program(q.id(b.vert),q.id(ka))),";")):ja(P,"=",da,".program","(",da,".vert[",da,".vert.length-1]",",",da,".frag[",da,".frag.length-1]",");");ka=U("draw");u&&ka(la,"=",ka.arg(),";");ka(Q,ja);u&&ka(X);ka(ca,"();","if(",P,")",P,".draw.call(this",u?","+la:"",");",u?ba:"",V);var pa=U("batch"),
U=pa.arg(),ka=pa.arg();u&&pa(la,"=",ka,"[0];");pa(Q,ja);u=L(function(f,c,d){var h=f.batchCache[J];h||(h=f.batchCache[J]=H(f,l,a,v,b));return h.call(this,c,d)});pa("if(",P,"){",ca,"();",u,".call(this,",P,",",U,",",ka,");");Object.keys(l).forEach(function(f){(f=sa[f])&&pa(f,".setDirty();")});pa("}",V);return W.compile()}}}},{"./constants/primitives.json":7,"./util/codegen":22}],5:[function(a,e,g){e.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(a,e,g){e.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],7:[function(a,e,g){e.exports={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(a,e,g){e.exports=function(a){return{primitive:[4],count:[-1],
offset:[0],instances:[0]}}},{}],9:[function(a,e,g){function n(b,a){this.id=d++;this.type=b;this.data=a}function m(b){if(0===b.length)return[];var d=b.charAt(0),a=b.charAt(b.length-1);if(1<b.length&&d===a&&('"'===d||"'"===d))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(d=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return m(b.substr(0,d.index)).concat(m(d[1])).concat(m(b.substr(d.index+d[0].length)));d=b.split(".");if(1===d.length)return['"'+b.replace(/\\/g,
"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(a=0;a<d.length;++a)b=b.concat(m(d[a]));return b}function b(b){return"["+m(b).join("][")+"]"}var d=0;e.exports={define:function(d,a){switch(typeof a){case "boolean":case "number":case "string":return new n(d,b(a+""));case "undefined":return new n(d|128,null)}},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof n},unbox:function(d,a){if(d instanceof n){if(d.type&128)return new n(d.type&-129,b(a))}else if("function"===typeof d)return new n(0,
d);return d},accessor:b}},{}],10:[function(a,e,g){var n=a("./util/is-typed-array"),m=a("./util/is-ndarray"),b=a("./constants/primitives.json");e.exports=function(d,a,k){function y(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}y.prototype.bind=function(){this.buffer.bind()};return{create:function(d){function t(d){var h=a.oes_element_index_uint;if(d)if("number"===typeof d)q(d);else{var c=null,p="static",v=0;Array.isArray(d)||n(d)||m(d)?c=d:("data"in d&&(c=d.data),"usage"in d&&(p=d.usage),
"length"in d&&(v=d.length));Array.isArray(c)||m(c)&&"array"===c.dtype||"type"in d?q({type:d.type||(h?"uint32":"uint16"),usage:p,data:c,length:v}):q({usage:p,data:c,length:v});if(Array.isArray(c)||n(c))q.dimension=3}else q();h=u.buffer.byteLength;c=0;switch(u.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;h>>=1;break;case 5125:case 5124:c=5125,h>>=2}p=4;v=u.buffer.dimension;1===v&&(p=0);2===v&&(p=1);3===v&&(p=4);"object"===typeof d&&("primitive"in d&&(p=b[d.primitive]),"count"in
d&&(h=d.vertCount|0));u.primType=p;u.vertCount=h;u.type=c;return t}var u=new y,q=k.create(null,34963,!0);u.buffer=q._buffer;t(d);t._reglType="elements";t._elements=u;t.destroy=function(){q.destroy();u.buffer=null};return t},elements:[null],getElements:function(b){return b&&b._elements instanceof y?b._elements:null}}}},{"./constants/primitives.json":7,"./util/is-ndarray":24,"./util/is-typed-array":25}],11:[function(a,e,g){e.exports=function(a){function m(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(d){try{b[d]=
a.getExtension(d)}catch(w){}})}var b={};m();return{extensions:b,refresh:m}}},{}],12:[function(a,e,g){var n=a("./util/values"),m=a("./util/extend"),b=[1029];e.exports=function(d,a,k,y,r){function t(f,c,b,d){this.target=f;this.level=c;this.texture=b;this.renderbuffer=d}function u(f){f&&(f.texture&&f.texture._texture.decRef(),f.renderbuffer&&f.renderbuffer._renderbuffer.decRef())}function q(f,c){var b=c.width,d=c.height;if(f.texture)var h=f.texture._texture,p=Math.max(1,h.params.width>>f.level),l=Math.max(1,
h.params.height>>f.level),b=b||p,d=d||l;else h=f.renderbuffer._renderbuffer,b=b||h.width,d=d||h.height;h.refCount+=1;c.width=b;c.height=d}function l(f,c){c?c.texture?d.framebufferTexture2D(36160,f,c.target,c.texture._texture.texture,c.level):d.framebufferRenderbuffer(36160,f,36161,c.renderbuffer._renderbuffer.renderbuffer):d.framebufferTexture2D(36160,f,3553,null,0)}function h(f){var c=3553,b=0,d=null,h=null;"object"===typeof f&&("level"in f&&(b=f.level|0),"target"in f&&(c=f.target|0));var p=f._reglType;
"texture"===p?d=f:"renderbuffer"===p&&(h=f,c=36161,b=0);return new t(c,b,d,h)}function c(f){return f&&(f.texture||f.renderbuffer)}function p(){this.id=g++;H[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function v(f){d.isFramebuffer(f.framebuffer)||(f.framebuffer=d.createFramebuffer());F=!0;d.bindFramebuffer(36160,f.framebuffer);for(var c=f.colorAttachments,
b=0;b<c.length;++b)l(36064+b,c[b]);for(b=c.length;b<k.maxColorAttachments;++b)l(36064+b,null);l(36096,f.depthAttachment);l(36128,f.stencilAttachment);l(33306,f.depthStencilAttachment);a.webgl_draw_buffers&&a.webgl_draw_buffers.drawBuffersWEBGL(C[c.length]);d.checkFramebufferStatus(36160)}function z(f){f=f.framebuffer;d.isFramebuffer(f)&&d.deleteFramebuffer(f)}function e(){return G[G.length-1]}var f={rgba:6408},x={rgba4:32854,rgb565:36194,"rgb5 a1":32855};a.ext_srgb&&(x.srgba=35907);a.ext_color_buffer_half_float&&
(x.rgba16f=34842,x.rgb16f=34843);a.webgl_color_buffer_float&&(x.rgba32f=34836);var D=[],A=[];a.webgl_depth_texture&&(D.push(6402),A.push(34041));m(m({},f),x);n(f);n(x);x=5121;D={uint8:5121};a.oes_texture_half_float&&(x=D["half float"]=36193);a.oes_texture_float&&(x=D["float"]=5126);D.best=x;var C=function(){for(var f=Array(k.maxDrawbuffers),c=0;c<=k.maxDrawbuffers;++c)for(var b=f[c]=Array(c),d=0;d<c;++d)b[d]=36064+d;return f}(),g=0,H={},G=[null],F=!0;return{top:e,dirty:function(){return F},push:function(f){f=
f||null;F=F||f!==e();G.push(f);return F},pop:function(){var f=e();G.pop();return F=F||f!==e()},getFramebuffer:function(f){return"function"===typeof f&&"framebuffer"===f._reglType&&(f=f._framebuffer,f instanceof p)?f:null},poll:function(){if(F){var f=G[G.length-1],c=a.webgl_draw_buffers;f?(d.bindFramebuffer(36160,f.framebuffer),c&&c.drawBuffersWEBGL(C[f.colorAttachments.length])):(d.bindFramebuffer(36160,null),c&&c.drawBuffersWEBGL(b));F=!1}},create:function(b){function l(b){var p,k=b||{},A=b=0;if("shape"in
k){var w=k.shape;b=w[0];A=w[1]}else"radius"in k&&(b=A=k.radius),"width"in k&&(b=k.width),"height"in k&&(A=k.height);var x=null,w=!1;if("colorBuffers"in k||"colorBuffer"in k){x=k.colorBuffers||k.colorBuffer;Array.isArray(x)||(x=[x]);a.width=b;a.height=A;x=x.map(h);for(p=0;p<x.length;++p)q(x[p],a);b=a.width;A=a.height}else{var m=!0,n="rgba",z="uint8",C=1,w=!0;a.width=b=b||d.drawingBufferWidth;a.height=A=A||d.drawingBufferHeight;"format"in k&&(n=k.format,m=n in f);"type"in k&&(z=k.type);"colorCount"in
k&&(C=k.colorCount|0);if(a.ownsColor)for(x=a.colorAttachments;x.length>C;)u(x.pop());else x=[];for(p=0;p<x.length;++p){var D;a:{D=x[p];var e=m,g=n,B=b,E=A;if(D.texture){var F=D.texture;if(e){F({format:g,type:z,width:B,height:E});F._texture.refCount+=1;D=!0;break a}}else if(F=D.renderbuffer,!e){F({format:g,width:B,height:E});F._renderbuffer.refCount+=1;D=!0;break a}u(D);D=!1}D||(x[p--]=x[x.length-1],x.pop())}for(;x.length<C;)m?x.push(new t(3553,0,y.create({format:n,type:z,width:b,height:A},3553),null)):
x.push(new t(36161,0,null,r.create({format:n,width:b,height:A})))}a.width=b;a.height=A;n=m=p=null;z=!1;"depthBuffer"in k&&(p=h(k.depthBuffer));"stencilBuffer"in k&&(m=h(k.stencilBuffer));"depthStencilBuffer"in k&&(n=h(k.depthStencilBuffer));if(p||m||n)q(p||m||n,a);else if(C=!0,e=D=!1,"depth"in k&&(C=!!k.depth),"stencil"in k&&(D=!!k.stencil),"depthTexture"in k&&(e=!!k.depthTexture),k=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,g=null,C||D)z=!0,e?(e=D?"depth stencil":"depth",a.ownsDepthStencil&&
k.texture?(k.texture({format:e,width:b,height:A}),k.texture._texture.refCount+=1,g=k):g=new t(3553,0,y.create({format:e,width:b,height:A},3553),null)):(e=C?D?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&k.renderbuffer?(k.renderbuffer({format:e,width:b,height:A}),k.renderbuffer._renderbuffer.refCount+=1,g=k):g=new t(36161,0,null,r.create({format:e,width:b,height:A}))),C?D?n=g:p=g:m=g;b=a;b.colorAttachments.forEach(u);u(b.depthAttachment);u(b.stencilAttachment);u(b.depthStencilAttachment);
a.colorAttachments=x;a.depthAttachment=p;a.stencilAttachment=m;a.depthStencilAttachment=n;a.ownsColor=w;a.ownsDepthStencil=z;l.color=x.map(c);l.depth=c(p);l.stencil=c(m);l.depthStencil=c(n);v(a);l.width=a.width;l.height=a.height;return l}var a=new p;l(b);l._reglType="framebuffer";l._framebuffer=a;l._destroy=function(){z(a)};return l},clear:function(){n(H).forEach(z)},refresh:function(){n(H).forEach(v)}}}},{"./util/extend":23,"./util/values":31}],13:[function(a,e,g){e.exports=function(a,m){var b=1;
m.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));var d=1,w=1;m.webgl_draw_buffers&&(d=a.getParameter(34852),w=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(m).filter(function(b){return!!m[b]}),maxAnisotropic:b,maxDrawbuffers:d,maxColorAttachments:w,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),
maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),
version:a.getParameter(7938)}}},{}],14:[function(a,e,g){var n=a("./util/is-typed-array");e.exports=function(a,b,d){return function(w){var k=w||{};n(w)?k={data:k}:2===arguments.length?k={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof w&&(k={});b();var y=k.x||0,r=k.y||0,t=k.width||d.width,u=k.height||d.height,k=k.data||new Uint8Array(t*u*4);a.pixelStorei(3333,4);a.readPixels(y,r,t,u,6408,5121,k);return k}}},{"./util/is-typed-array":25}],15:[function(a,e,g){var n=a("./util/values");e.exports=
function(a,b,d){function w(){this.id=t++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function k(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function y(b){var d=b.renderbuffer;a.bindRenderbuffer(36161,null);a.isRenderbuffer(d)&&a.deleteRenderbuffer(d);b.renderbuffer=null;b.refCount=0;delete u[b.id]}var r={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(r.srgba=35907);b.ext_color_buffer_half_float&&(r.rgba16f=34842,r.rgb16f=34843);b.webgl_color_buffer_float&&(r.rgba32f=34836);var t=0,u={};w.prototype.decRef=function(){0===--this.refCount&&y(this)};return{create:function(b){function d(c){c=c||{};var b=0,a=0;"shape"in c?(a=c.shape,b=a[0]|0,a=a[1]|0):("radius"in c&&(b=a=c.radius|0),"width"in c&&(b=c.width|0),"height"in c&&(a=c.height|0));d.width=h.width=Math.max(b,1);d.height=h.height=Math.max(a,
1);h.format=32854;"format"in c&&(h.format=r[c.format]);k(h);return d}var h=new w;u[h.id]=h;d(b);d._reglType="renderbuffer";d._renderbuffer=h;d.destroy=function(){h.decRef()};return d},refresh:function(){n(u).forEach(k)},clear:function(){n(u).forEach(y)}}}},{"./util/values":31}],16:[function(a,e,g){function n(b,d,a,k){this.name=b;this.id=d;this.location=a;this.info=k}var m=a("./util/values");e.exports=function(b,d,a,k,y){function r(c,d){var h=35632===c?q:l,a=h[d];if(!a){var f=y.str(d),a=b.createShader(c);
b.shaderSource(a,f);b.compileShader(a);h[d]=a}return a}function t(c,b){this.fragId=c;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function u(c){var h,l;h=r(35632,c.fragId);l=r(35633,c.vertId);var q=c.program=b.createProgram();b.attachShader(q,h);b.attachShader(q,l);b.linkProgram(q);var f=b.getProgramParameter(q,35718),x=c.uniforms=[];for(h=0;h<f;++h)if(l=b.getActiveUniform(q,h))if(1<l.size)for(var m=0;m<l.size;++m){var A=l.name.replace("[0]",
"["+m+"]");a.def(A);x.push(new n(A,y.id(A),b.getUniformLocation(q,A),l))}else a.def(l.name),x.push(new n(l.name,y.id(l.name),b.getUniformLocation(q,l.name),l));f=b.getProgramParameter(q,35721);x=c.attributes=[];for(h=0;h<f;++h)if(l=b.getActiveAttrib(q,h))d.def(l.name),x.push(new n(l.name,y.id(l.name),b.getAttribLocation(q,l.name),l));c.draw=k(c);c.batchCache={}}var q={},l={},h={},c=[];return{clear:function(){var d=b.deleteShader.bind(b);m(q).forEach(d);q={};m(l).forEach(d);l={};c.forEach(function(c){b.deleteProgram(c.program)});
c.length=0;h={}},refresh:function(){q={};l={};c.forEach(u)},program:function(b,d){var a=h[d];a||(a=h[d]={});var l=a[b];l||(l=new t(d,b),u(l),a[b]=l,c.push(l));return l},shader:r,frag:[-1],vert:[-1]}}},{"./util/values":31}],17:[function(a,e,g){var n=a("./util/stack"),m=a("./util/codegen");e.exports=function(b,d,a){function k(d,h){var c=n([!!h],function(c){c?b.enable(d):b.disable(d)});c.flag=d;return c}var y={dither:k(3024),"blend.enable":k(3042),"blend.color":n([0,0,0,0],function(d,h,c,a){b.blendColor(d,
h,c,a)}),"blend.equation":n([32774,32774],function(d,h){b.blendEquationSeparate(d,h)}),"blend.func":n([1,0,1,0],function(d,h,c,a){b.blendFuncSeparate(d,h,c,a)}),"depth.enable":k(2929,!0),"depth.func":n([513],function(d){b.depthFunc(d)}),"depth.range":n([0,1],function(d,h){b.depthRange(d,h)}),"depth.mask":n([!0],function(d){b.depthMask(d)}),"cull.enable":k(2884),"cull.face":n([1029],function(d){b.cullFace(d)}),frontFace:n([2305],function(d){b.frontFace(d)}),colorMask:n([!0,!0,!0,!0],function(d,h,c,
a){b.colorMask(d,h,c,a)}),lineWidth:n([1],function(d){b.lineWidth(d)}),"polygonOffset.enable":k(32823),"polygonOffset.offset":n([0,0],function(d,h){b.polygonOffset(d,h)}),"sample.alpha":k(32926),"sample.enable":k(32928),"sample.coverage":n([1,!1],function(d,h){b.sampleCoverage(d,h)}),"stencil.enable":k(2960),"stencil.mask":n([-1],function(d){b.stencilMask(d)}),"stencil.func":n([519,0,-1],function(d,h,c){b.stencilFunc(d,h,c)}),"stencil.opFront":n([7680,7680,7680],function(d,h,c){b.stencilOpSeparate(1028,
d,h,c)}),"stencil.opBack":n([7680,7680,7680],function(d,h,c){b.stencilOpSeparate(1029,d,h,c)}),"scissor.enable":k(3089),"scissor.box":n([0,0,-1,-1],function(a,h,c,p){var k=c,w=d.top();0>c&&(k=w?w.width-a:b.drawingBufferWidth-a);c=p;0>p&&(c=w?w.height-h:b.drawingBufferHeight-h);b.scissor(a,h,k,c)}),viewport:n([0,0,-1,-1],function(l,h,c,p){var k=c,q=d.top();0>c&&(k=q?q.width-l:b.drawingBufferWidth-l);c=p;0>p&&(c=q?q.height-h:b.drawingBufferHeight-h);b.viewport(l,h,k,c);a.width=k;a.height=c})},r=m(),
t=r.proc("poll"),u=r.proc("refresh");Object.keys(y).forEach(function(b){b=r.link(y[b]);t(b,".poll();");u(b,".setDirty();")});var q=r.compile();return{contextState:y,viewport:a,poll:q.poll,refresh:q.refresh,notifyViewportChanged:function(){y.viewport.setDirty();y["scissor.box"].setDirty()}}}},{"./util/codegen":22,"./util/stack":29}],18:[function(a,e,g){e.exports=function(){var a={"":0},m=[""];return{id:function(b){var d=a[b];if(d)return d;d=a[b]=m.length;m.push(b);return d},str:function(b){return m[b]}}}},
{}],19:[function(a,e,g){function n(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function m(c){if(!Array.isArray(c))return!1;var b=c.length;if(0===b||!Array.isArray(c[0]))return!1;for(var d=c[0].length,h=1;h<b;++h)if(!Array.isArray(c[h])||c[h].length!==d)return!1;return!0}function b(c){return Object.prototype.toString.call(c)}function d(c){return"[object HTMLCanvasElement]"===b(c)}function w(c){return"[object CanvasRenderingContext2D]"===b(c)}var k=a("./util/extend"),y=a("./util/values"),
r=a("./util/is-typed-array"),t=a("./util/is-ndarray"),u=a("./util/load-texture"),q=a("./util/to-half-float"),l=a("./util/parse-dds"),h=[9984,9986,9985,9987];e.exports=function(c,a,v,z,e){function f(f){this.target=f;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=
this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function x(f){this.target=f;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function D(f,c){var b,d,a=0,p=0,l=0,k=0,A=0,x=0,w=!1,v=!1,q=!1;for(b=0;b<c.length;++b)d=c[b],k=k||d.width<<d.miplevel,A=A||d.height<<d.miplevel,a=a||d.type,p=p||d.format,l=l||d.internalformat,
x=x||d.channels,w=w||d.needsPoll,v=v||d.needsListeners,d=d.miplevel,q=q||0<d;f.needsPoll=w;f.needsListeners=v;f.width=k;f.height=A;f.format=p;f.internalformat=l;f.type=a;if(3553!==f.target)for(b=0;6>b;++b);b=0<=h.indexOf(f.minFilter);f.genMipmaps=!q&&(f.genMipmaps||b);q=q||f.genMipmaps;f.minFilter||(f.minFilter=q?9987:9728);f.wrapS=f.wrapS||33071;f.wrapT=f.wrapT||33071;for(b=0;b<c.length;++b)d=c[b],d.channels||(d.channels=x),d.format||(d.format=p),d.internalformat||(d.internalformat=l),d.type||(d.type=
a)}function A(f){this.id=W++;this.refCount=1;this.target=f;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new x(f);this.pixels=[]}function C(c,b){function d(c,h){var a=h.mipmap,l;if(Array.isArray(a))for(var k=0;k<a.length;++k)l=new f(c),l.parseFlags(b),l.parseFlags(h),l.parse(a[k],k),p.push(l);else l=new f(c),l.parseFlags(b),l.parse(h,0),p.push(l)}var h;G(c);var a=c.params;x.call(a,c.target);var p=c.pixels;p.length=0;a.parse(b);if(3553===c.target)d(3553,
b);else{var l=b.faces||b;if(Array.isArray(l))for(h=0;6>h;++h)d(34069+h,l[h]);else if("string"!==typeof l)for(h=0;6>h;++h)d(34069+h,{})}D(a,p);a.needsListeners&&H(c);a.needsPoll&&(c.pollId=P.length,P.push(c));g(c)}function g(f){c.isTexture(f.texture)||(f.texture=c.createTexture());var b=f.target,d=f.unit;0<=d?(c.activeTexture(33984+d),Z=d):c.bindTexture(b,f.texture);for(var b=f.pixels,h=f.params,a=0;a<b.length;++a)b[a].upload(h);h.upload();0>d&&((d=J[Z])?c.bindTexture(d.target,d.texture):(f.unit=Z,
J[Z]=f))}function H(c){function b(c,d,h){var p=l(h);p.pixels.forEach(function(b){var h=new f(p.cube?b.target:c);h.channels=p.channels;h.compressed=p.compressed;h.type=p.type;h.internalformat=p.format;h.format=ga[p.format];h.width=b.width;h.height=b.height;h.miplevel=b.miplevel||d;h.data=b.data;a.push(h)})}function d(){for(var f=0;f<a.length;++f){var p=a[f],l=p.image,k=p.video,A=p.xhr;l&&l.complete?(p.width=l.naturalWidth,p.height=l.naturalHeight):k&&2<k.readyState?(p.width=k.width,p.height=k.height):
A&&4===A.readyState&&(a[f]=a[a.length-1],a.pop(),A.removeEventListener("readystatechange",g),b(p.target,p.miplevel,A.response))}D(h,a);g(c)}var h=c.params,a=c.pixels;a.forEach(function(f){f.image&&!f.image.complete?f.image.addEventListener("load",d):f.video&&1>f.readyState?f.video.addEventListener("progress",d):f.xhr&&f.xhr.addEventListener("readystatechange",d)});c.cancelPending=function(){a.forEach(function(f){f.image?f.image.removeEventListener("load",d):f.video?f.video.removeEventListener("progress",
d):f.xhr&&(f.xhr.removeEventListener("readystatechange",d),f.xhr.abort())})}}function G(f){var c=f.cancelPending;c&&(c(),f.cancelPending=null);c=f.pollId;0<=c&&((P[c]=P[P.length-1]).id=c,P.pop(),f.pollId=-1)}function F(f){var b=f.texture,d=f.unit,h=f.target;0<=d&&(c.activeTexture(33984+d),Z=d,c.bindTexture(h,null),J[d]=null);G(f);c.isTexture(b)&&c.deleteTexture(b);f.texture=null;f.params=null;f.pixels=null;f.refCount=0;delete L[f.id]}var I={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
O={repeat:10497,clamp:33071,mirror:33648},N={nearest:9728,linear:9729},T=k({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},N),K={none:0,browser:37444},M={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},R={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},S={};a.ext_srgb&&(R.srgb=35904,R.srgba=35906);a.oes_texture_float&&(M["float"]=5126);a.oes_texture_half_float&&
(M["half float"]=36193);a.webgl_depth_texture&&(k(R,{depth:6402,"depth stencil":34041}),k(M,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&k(S,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&k(S,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&k(S,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(S["rgb etc1"]=36196);var aa=Array.prototype.slice.call(c.getParameter(34467));Object.keys(S).forEach(function(f){var c=S[f];0<=aa.indexOf(c)&&(R[f]=c)});var fa=Object.keys(R);v.textureFormats=fa;var ga=fa.reduce(function(f,c){var b=R[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b?f[b]=b:32855===b||0<=c.indexOf("rgba")?f[b]=6408:f[b]=6407;return f},{});k(f.prototype,{parseFlags:function(f){if("object"===typeof f&&f){"premultiplyAlpha"in
f&&(this.premultiplyAlpha=f.premultiplyAlpha);"flipY"in f&&(this.flipY=f.flipY);"alignment"in f&&(this.unpackAlignment=f.alignment);"colorSpace"in f&&(this.colorSpace=K[f.colorSpace]);if("format"in f){var c=f.format;this.internalformat=R[c];c in M&&(this.type=M[c]);c in S&&(this.compressed=!0)}"type"in f&&(this.type=M[f.type]);var c=this.width,b=this.height,d=this.channels;"shape"in f?(c=f.shape[0],b=f.shape[1],3===f.shape.length&&(d=f.shape[2])):("radius"in f&&(c=b=f.radius),"width"in f&&(c=f.width),
"height"in f&&(b=f.height),"channels"in f&&(d=f.channels));this.width=c|0;this.height=b|0;this.channels=d|0;"stride"in f?(c=f.stride,this.strideX=c[0],this.strideY=c[1],this.strideC=3===c.length?c[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*c);"offset"in f&&(this.offset=f.offset|0,this.needsTranspose=!0);"crossOrigin"in f&&(this.crossOrigin=f.crossOrigin)}},parse:function(f,c){this.miplevel=c;this.width>>=c;this.height>>=c;var h=f;switch(typeof f){case "object":if(!f)return;
this.parseFlags(f);var a=f.data;if("string"===typeof a||a&&(r(a)||n(a)||t(a)||d(a)||w(a)||"[object HTMLImageElement]"===b(a)||"[object HTMLVideoElement]"===b(a)||m(a)))h=f.data;break;case "undefined":return}"string"===typeof h&&(h=u(h,this.crossOrigin));var a=null,p=!1;if(null!==h)if(r(h))this.data=h;else if(n(h))a=h,p=!0;else if(t(h)){Array.isArray(h.data)?(a=h.data,p=!0):this.data=h.data;var l=h.shape;this.width=l[0];this.height=l[1];this.channels=3===l.length?l[2]:1;l=h.stride;this.strideX=h.stride[0];
this.strideY=h.stride[1];this.strideC=3===l.length?h.stride[2]:1;this.offset=h.offset;this.needsTranspose=!0}else if(d(h)||w(h))d(h)?this.canvas=h:this.canvas=h.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===b(h))this.image=h,h.complete?(this.width=h.naturalWidth,this.height=h.naturalHeight):(this.width=this.width||h.naturalWidth,this.height=this.height||h.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===b(h))this.video=h,1<h.readyState?(this.width=h.width,this.height=h.height):(this.width=this.width||h.width,this.height=this.height||h.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===b(h))this.xhr=h,this.needsListeners=!0;else if(m(h)){var p=h[0].length,l=h.length,k=1,A,x,v,K;if(Array.isArray(h[0][0]))for(k=h[0][0].length,a=Array(p*l*k),x=K=0;x<l;++x)for(A=0;A<p;++A)for(v=0;v<k;++v)a[K++]=h[x][A][v];
else for(a=Array(p*l),x=K=0;x<l;++x)for(A=0;A<p;++A)a[K++]=h[x][A];this.width=p;this.height=l;this.channels=k;p=!0}else f.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||e.width)|0,this.height=(this.height||e.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,
6410,6407,6408][(this.channels=this.channels||4)-1]);h=this.internalformat;l=this.format=ga[h];if(!this.channels)switch(l){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}l=this.type;5126!==l&&36193!==l&&(l||(l=6402===h?5125:5121));this.type=l;if(p)switch(l){case 5121:this.data=new Uint8Array(a);break;case 5123:this.data=new Uint16Array(a);break;case 5125:this.data=new Uint32Array(a);break;case 5126:this.data=
new Float32Array(a);break;case 36193:this.data=q(a)}if(this.data&&this.needsTranspose){a=this.data;h=this.width;p=this.height;l=this.channels;k=this.strideX;A=this.strideY;x=this.strideC;v=this.offset;K=new a.constructor(h*p*l);for(var z=0,y=0;y<p;++y)for(var M=0;M<h;++M)for(var C=0;C<l;++C)K[z++]=a[A*y+k*M+x*C+v];this.data=K}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(f){c.pixelStorei(37440,
this.flipY);c.pixelStorei(37441,this.premultiplyAlpha);c.pixelStorei(37443,this.colorSpace);c.pixelStorei(3317,this.unpackAlignment);var b=this.target,d=this.miplevel,h=this.image,a=this.canvas,p=this.video,l=this.data,k=this.internalformat,A=this.format,x=this.type,v=this.width||Math.max(1,f.width>>d);f=this.height||Math.max(1,f.height>>d);p&&2<p.readyState?c.texImage2D(b,d,A,A,x,p):h&&h.complete?c.texImage2D(b,d,A,A,x,h):a?c.texImage2D(b,d,A,A,x,a):this.compressed?c.compressedTexImage2D(b,d,k,v,
f,0,l):this.copy?(z(),c.copyTexImage2D(b,d,A,this.x,this.y,v,f,0)):l?c.texImage2D(b,d,A,v,f,0,A,x,l):c.texImage2D(b,d,A,v||1,f||1,0,A,x,null)}});k(x.prototype,{parse:function(f){if("object"===typeof f&&f){"min"in f&&(this.minFilter=T[f.min]);"mag"in f&&(this.magFilter=N[f.mag]);var c=this.wrapS,b=this.wrapT;if("wrap"in f){var d=f.wrap;"string"===typeof d?c=b=O[d]:Array.isArray(d)&&(c=O[d[0]],b=O[d[1]])}else"wrapS"in f&&(c=O[f.wrapS]),"wrapT"in f&&(b=O[f.wrapT]);this.wrapS=c;this.wrapT=b;"anisotropic"in
f&&(this.anisotropic=f.anisotropic);if("mipmap"in f)switch(f=f.mipmap,typeof f){case "string":this.mipmapHint=I[f];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!f}}},upload:function(){var f=this.target;c.texParameteri(f,10241,this.minFilter);c.texParameteri(f,10240,this.magFilter);c.texParameteri(f,10242,this.wrapS);c.texParameteri(f,10243,this.wrapT);a.ext_texture_filter_anisotropic&&c.texParameteri(f,34046,this.anisotropic);this.genMipmaps&&(c.hint(33170,this.mipmapHint),c.generateMipmap(f))}});
var Z=0,W=0,L={},P=[],U=v.maxTextureUnits,J=Array(U).map(function(){return null});k(A.prototype,{bind:function(){this.bindCount+=1;var f=this.unit;if(0>f){for(var b=0;b<U;++b){var d=J[b];if(d){if(0<d.bindCount)continue;d.unit=-1}J[b]=this;f=b;break}this.unit=f;c.activeTexture(33984+f);c.bindTexture(this.target,this.texture);Z=f}return f},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&F(this)}});return{create:function(f,c){function b(f,h,a,p,l,k){var A=f||{};34067===c&&
6===arguments.length&&(A=[f,h,a,p,l,k]);C(d,A);b.width=d.params.width;b.height=d.params.height;return b}var d=new A(c);L[d.id]=d;b(f);b._reglType="texture";b._texture=d;b.destroy=function(){d.decRef()};return b},refresh:function(){y(L).forEach(g);for(var f=0;f<U;++f)J[f]=null;Z=0;c.activeTexture(33984)},clear:function(){for(var f=0;f<U;++f)c.activeTexture(33984+f),c.bindTexture(3553,null),J[f]=null;c.activeTexture(33984);Z=0;y(L).forEach(F)},poll:function(){P.forEach(g)},getTexture:function(f){return null}}}},
{"./util/extend":23,"./util/is-ndarray":24,"./util/is-typed-array":25,"./util/load-texture":26,"./util/parse-dds":27,"./util/to-half-float":30,"./util/values":31}],20:[function(a,e,g){e.exports=function(a){var m={};return{def:function(b){b=a.id(b);var d=m[b];d||(d=m[b]=[]);return d},uniforms:m}}},{}],21:[function(a,e,g){e.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,e,g){var n=a("./extend");e.exports=
function(){function a(){var d=[],k=[];return n(function(){d.push.apply(d,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+b++;k.push(a);0<arguments.length&&(d.push(a,"="),d.push.apply(d,Array.prototype.slice.call(arguments)),d.push(";"));return a},toString:function(){return[0<k.length?"var "+k+";":"",d.join("")].join("")}})}var b=0,d=[],w=[],k={};return{link:function(a){var k="g"+b++;d.push(k);w.push(a);return k},block:a,proc:function(d){var w=[],t=a(),u=t.toString;return k[d]=n(t,
{arg:function(){var d="a"+b++;w.push(d);return d},toString:function(){return["function(",w.join(),"){",u(),"}"].join("")}})},compile:function(){var b=['"use strict";return {'];Object.keys(k).forEach(function(d){b.push('"',d,'":',k[d].toString(),",")});b.push("}");return Function.apply(null,d.concat([b.join("")])).apply(null,w)}}}},{"./extend":23}],23:[function(a,e,g){e.exports=function(a,m){for(var b=Object.keys(m),d=0;d<b.length;++d)a[b[d]]=m[b[d]];return a}},{}],24:[function(a,e,g){var n=a("./is-typed-array");
e.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||n(a.data))}},{"./is-typed-array":25}],25:[function(a,e,g){var n=a("../constants/arraytypes.json");e.exports=function(a){return Object.prototype.toString.call(a)in n}},{"../constants/arraytypes.json":5}],26:[function(a,e,g){e.exports=function(a,m){if("undefined"!==typeof document){var b;b=(b=/\.(\w+)(\?.*)?$/.exec(a))&&
b[1]?b[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(b))return b=document.createElement("video"),b.autoplay=!0,b.loop=!0,m&&(b.crossOrigin=m),b.src=a,b;if(0<=["dds"].indexOf(b))return b=new XMLHttpRequest,b.responseType="arraybuffer",b.open("GET",a,!0),b.send(),b;b=new Image;m&&(b.crossOrigin=m);b.src=a;return b}return null}},{}],27:[function(a,e,g){e.exports=function(a){function e(f){for(var c=I,b=O,d=0;d<R;++d){var h=Math.max(1,
c+3>>2)*Math.max(1,b+3>>2)*K;aa.pixels.push({target:f,miplevel:d,width:c,height:b,data:new Uint8Array(a,S,h)});S+=h;c>>=1;b>>=1}}var g=new Int32Array(a),F=g[z],I=g[f],O=g[B],N=r,T=0,K=0,M=4;switch(g[A]){case l:K=8;F&q?(M=3,T=b):T=d;break;case h:K=16;T=w;break;case c:K=16;T=k;break;case p:K=8,T=y}var R=1;g[D]&t&&(R=Math.max(1,g[x]));var S=g[v]+4,aa={width:I,height:O,channels:M,format:T,type:N,compressed:!0,cube:!1,pixels:[]};if(g[C]&u)for(aa.cube=!0,g=0;6>g;++g)e(m+g);else e(n);return aa};var n=3553,
m=34069,b=33776,d=33777,w=33778,k=33779,y=36196,r=5121,t=131072,u=512,q=64,l=827611204,h=861165636,c=894720068,p=826496069,v=1,z=2,B=3,f=4,x=7,D=20,A=21,C=28},{}],28:[function(a,e,g){e.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],29:[function(a,e,g){e.exports=function(a,m){var b=a.length,
d=a.slice(),w=a.slice(),k=!1,y=!0;return{push:function(){k=!1;for(var a=0;a<b;++a){var m=arguments[a];k=k||m!==w[a];d.push(m)}},pop:function(){k=!1;d.length-=b;for(var a=0;a<b;++a)k=k||d[d.length-b+a]!==w[a]},poll:function(){var a=d.length-b;if(k||y){switch(b){case 1:m(d[a]);break;case 2:m(d[a],d[a+1]);break;case 3:m(d[a],d[a+1],d[a+2]);break;case 4:m(d[a],d[a+1],d[a+2],d[a+3]);break;case 5:m(d[a],d[a+1],d[a+2],d[a+3],d[a+4]);break;case 6:m(d[a],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]);break;default:m.apply(null,
d.slice(a,d.length))}for(var n=0;n<b;++n)w[n]=d[a+n];y=k=!1}},setDirty:function(){y=!0}}}},{}],30:[function(a,e,g){e.exports=function(a){for(var m=new Float32Array(a),m=new Uint32Array(m.buffer),b=new Uint16Array(a.length),d=0;d<a.length;++d)if(isNaN(a[d]))b[d]=65535;else if(Infinity===a[d])b[d]=31744;else if(-Infinity===a[d])b[d]=64512;else{var w=m[d],k=w>>>31<<15,y=(w<<1>>>24)-127,w=w>>13&1023;b[d]=-24>y?k:-14>y?k+(w+1024>>-14-y):15<y?k+31744:k+(y+15<<10)+w}return b}},{}],31:[function(a,e,g){e.exports=
function(a){return Object.keys(a).map(function(m){return a[m]})}},{}],32:[function(a,e,g){function n(d,a){function k(){var a=window.innerWidth,l=window.innerHeight;d!==document.body&&(l=d.getBoundingClientRect(),a=l.right-l.left,l=l.top-l.bottom);n.width=t*a;n.height=t*l;b(n.style,{width:a+"px",height:l+"px"})}var n=document.createElement("canvas"),r=m(n,a);b(n.style,{border:0,margin:0,padding:0,top:0,left:0});d.appendChild(n);d===document.body&&(n.style.position="absolute",b(d.style,{margin:0,padding:0}));
var t=+r.options.pixelRatio;window.addEventListener("resize",k,!1);var u=r.options.onDestroy;r.options=b(b({},r.options),{onDestroy:function(){window.removeEventListener("resize",k);d.removeChild(n);u&&u()}});k();return r}function m(d,a){function k(b){try{return d.getContext(b,m)}catch(a){return null}}var m=a.glOptions||{};return{gl:k("webgl")||k("experimental-webgl")||k("webgl-experimental"),options:b({pixelRatio:window.devicePixelRatio},a)}}var b=a("./util/extend");e.exports=function(d){if("undefined"===
typeof document||"undefined"===typeof HTMLElement)return{gl:d[0],options:d[1]||{}};var a=document.body,k=d[1]||{};if("string"===typeof d[0])a=document.querySelector(d[0])||document.body;else if("object"===typeof d[0])if(d[0]instanceof HTMLElement)a=d[0];else{if(d[0]instanceof WebGLRenderingContext)return{gl:d[0],options:b({pixelRatio:1},k)};k=d[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?m(a,k):n(a,k)}},{"./util/extend":23}],33:[function(a,e,g){(function(n){function m(){try{var f=new Uint8Array(1);
f.foo=function(){return 42};return 42===f.foo()&&"function"===typeof f.subarray&&0===f.subarray(1,1).byteLength}catch(c){return!1}}function b(f,c){if((d.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");d.TYPED_ARRAY_SUPPORT?(f=new Uint8Array(c),f.__proto__=d.prototype):(null===f&&(f=new d(c)),f.length=c);return f}function d(f,c,b){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(f,c,b);if("number"===typeof f){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");
return y(this,f)}return w(this,f,c,b)}function w(f,c,a,h){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>a||c.byteLength<a)throw new RangeError("'offset' is out of bounds");if(c.byteLength<a+(h||0))throw new RangeError("'length' is out of bounds");c=void 0===h?new Uint8Array(c,a):new Uint8Array(c,a,h);d.TYPED_ARRAY_SUPPORT?(f=c,f.__proto__=d.prototype):f=r(f,c);return f}if("string"===
typeof c){h=f;if("string"!==typeof a||""===a)a="utf8";if(!d.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');f=q(c,a)|0;h=b(h,f);h.write(c,a);return h}return t(f,c)}function k(f){if("number"!==typeof f)throw new TypeError('"size" argument must be a number');}function y(f,c){k(c);f=b(f,0>c?0:u(c)|0);if(!d.TYPED_ARRAY_SUPPORT)for(var a=0;a<c;a++)f[a]=0;return f}function r(f,c){var d=u(c.length)|0;f=b(f,d);for(var a=0;a<d;a+=1)f[a]=c[a]&255;return f}function t(f,c){if(d.isBuffer(c)){var a=
u(c.length)|0;f=b(f,a);if(0===f.length)return f;c.copy(f,0,0,a);return f}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(a="number"!==typeof c.length)||(a=c.length,a=a!==a),a?b(f,0):r(f,c);if("Buffer"===c.type&&O(c.data))return r(f,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function u(f){if(f>=(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return f|0}function q(f,c){if(d.isBuffer(f))return f.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(f)||f instanceof ArrayBuffer))return f.byteLength;"string"!==typeof f&&(f=""+f);var b=f.length;if(0===b)return 0;for(var a=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return b;case "utf8":case "utf-8":case void 0:return E(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
b;case "hex":return b>>>1;case "base64":return F.toByteArray(C(f)).length;default:if(a)return E(f).length;c=(""+c).toLowerCase();a=!0}}function l(f,c,b){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===b||b>this.length)b=this.length;if(0>=b)return"";b>>>=0;c>>>=0;if(b<=c)return"";for(f||(f="utf8");;)switch(f){case "hex":f=c;c=b;b=this.length;if(!f||0>f)f=0;if(!c||0>c||c>b)c=b;d="";for(b=f;b<c;b++)f=d,d=this[b],d=16>d?"0"+d.toString(16):d.toString(16),d=f+d;return d;case "utf8":case "utf-8":return p(this,
c,b);case "ascii":f="";for(b=Math.min(this.length,b);c<b;c++)f+=String.fromCharCode(this[c]&127);return f;case "binary":f="";for(b=Math.min(this.length,b);c<b;c++)f+=String.fromCharCode(this[c]);return f;case "base64":return c=0===c&&b===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(c,b)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,b);b="";for(f=0;f<c.length;f+=2)b+=String.fromCharCode(c[f]+256*c[f+1]);return b;default:if(d)throw new TypeError("Unknown encoding: "+
f);f=(f+"").toLowerCase();d=!0}}function h(f,c,b){var d=f[c];f[c]=f[b];f[b]=d}function c(f,c,b,d){function a(f,c){return 1===h?f[c]:f.readUInt16BE(c*h)}var h=1,p=f.length,l=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>f.length||2>c.length)return-1;h=2;p/=2;l/=2;b/=2}d=-1;for(var k=0;b+k<p;k++)if(a(f,b+k)===a(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===l)return(b+d)*h}else-1!==d&&(k-=k-d),d=-1;return-1}function p(f,c,b){b=Math.min(f.length,
b);for(var d=[];c<b;){var a=f[c],h=null,p=239<a?4:223<a?3:191<a?2:1;if(c+p<=b){var l,k,A;switch(p){case 1:128>a&&(h=a);break;case 2:l=f[c+1];128===(l&192)&&(a=(a&31)<<6|l&63,127<a&&(h=a));break;case 3:l=f[c+1];k=f[c+2];128===(l&192)&&128===(k&192)&&(a=(a&15)<<12|(l&63)<<6|k&63,2047<a&&(55296>a||57343<a)&&(h=a));break;case 4:l=f[c+1],k=f[c+2],A=f[c+3],128===(l&192)&&128===(k&192)&&128===(A&192)&&(a=(a&15)<<18|(l&63)<<12|(k&63)<<6|A&63,65535<a&&1114112>a&&(h=a))}}null===h?(h=65533,p=1):65535<h&&(h-=
65536,d.push(h>>>10&1023|55296),h=56320|h&1023);d.push(h);c+=p}f=d.length;if(f<=N)d=String.fromCharCode.apply(String,d);else{b="";for(c=0;c<f;)b+=String.fromCharCode.apply(String,d.slice(c,c+=N));d=b}return d}function v(f,c,b){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+c>b)throw new RangeError("Trying to access beyond buffer length");}function z(f,c,b,a,h,p){if(!d.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>h||c<p)throw new RangeError('"value" argument is out of bounds');
if(b+a>f.length)throw new RangeError("Index out of range");}function e(f,c,b,d){0>c&&(c=65535+c+1);for(var a=0,h=Math.min(f.length-b,2);a<h;a++)f[b+a]=(c&255<<8*(d?a:1-a))>>>8*(d?a:1-a)}function f(f,c,b,d){0>c&&(c=4294967295+c+1);for(var a=0,h=Math.min(f.length-b,4);a<h;a++)f[b+a]=c>>>8*(d?a:3-a)&255}function x(f,c,b,d,a,h){if(b+d>f.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function D(f,c,b,d,a){a||x(f,c,b,4,3.4028234663852886E38,-3.4028234663852886E38);
I.write(f,c,b,d,23,4);return b+4}function A(f,c,b,d,a){a||x(f,c,b,8,1.7976931348623157E308,-1.7976931348623157E308);I.write(f,c,b,d,52,8);return b+8}function C(f){f=f.trim?f.trim():f.replace(/^\s+|\s+$/g,"");f=f.replace(T,"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function E(f,c){c=c||Infinity;for(var b,d=f.length,a=null,h=[],p=0;p<d;p++){b=f.charCodeAt(p);if(55295<b&&57344>b){if(!a){if(56319<b){-1<(c-=3)&&h.push(239,191,189);continue}else if(p+1===d){-1<(c-=3)&&h.push(239,191,
189);continue}a=b;continue}if(56320>b){-1<(c-=3)&&h.push(239,191,189);a=b;continue}b=(a-55296<<10|b-56320)+65536}else a&&-1<(c-=3)&&h.push(239,191,189);a=null;if(128>b){if(0>--c)break;h.push(b)}else if(2048>b){if(0>(c-=2))break;h.push(b>>6|192,b&63|128)}else if(65536>b){if(0>(c-=3))break;h.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(c-=4))break;h.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return h}function H(f){for(var c=[],b=0;b<f.length;b++)c.push(f.charCodeAt(b)&
255);return c}function G(f,c,b,d){for(var a=0;a<d&&!(a+b>=c.length||a>=f.length);a++)c[a+b]=f[a];return a}var F=a("base64-js"),I=a("ieee754"),O=a("isarray");g.Buffer=d;g.SlowBuffer=function(f){+f!=f&&(f=0);return d.alloc(+f)};g.INSPECT_MAX_BYTES=50;d.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:m();g.kMaxLength=d.TYPED_ARRAY_SUPPORT?2147483647:1073741823;d.poolSize=8192;d._augment=function(f){f.__proto__=d.prototype;return f};d.from=function(f,c,b){return w(null,f,c,b)};
d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&($jscomp.initSymbol(),Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})));d.alloc=function(f,c,d){k(f);f=0>=f?b(null,f):void 0!==c?"string"===typeof d?b(null,f).fill(c,d):b(null,f).fill(c):b(null,f);return f};d.allocUnsafe=function(f){return y(null,f)};d.allocUnsafeSlow=
function(f){return y(null,f)};d.isBuffer=function(f){return!(null==f||!f._isBuffer)};d.compare=function(f,c){if(!d.isBuffer(f)||!d.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(f===c)return 0;for(var b=f.length,a=c.length,h=0,p=Math.min(b,a);h<p;++h)if(f[h]!==c[h]){b=f[h];a=c[h];break}return b<a?-1:a<b?1:0};d.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};d.concat=function(f,c){if(!O(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return d.alloc(0);var b;if(void 0===c)for(b=c=0;b<f.length;b++)c+=f[b].length;var a=d.allocUnsafe(c),h=0;for(b=0;b<f.length;b++){var p=f[b];if(!d.isBuffer(p))throw new TypeError('"list" argument must be an Array of Buffers');p.copy(a,h);h+=p.length}return a};d.byteLength=q;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var f=this.length;if(0!==f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var c=0;c<f;c+=2)h(this,c,c+1);return this};d.prototype.swap32=function(){var f=this.length;if(0!==f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<f;c+=4)h(this,c,c+3),h(this,c+1,c+2);return this};d.prototype.toString=function(){var f=this.length|0;return 0===f?"":0===arguments.length?p(this,0,f):l.apply(this,arguments)};d.prototype.equals=function(f){if(!d.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:0===d.compare(this,f)};
d.prototype.inspect=function(){var f="",c=g.INSPECT_MAX_BYTES;0<this.length&&(f=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(f+=" ... "));return"<Buffer "+f+">"};d.prototype.compare=function(f,c,b,a,h){if(!d.isBuffer(f))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===b&&(b=f?f.length:0);void 0===a&&(a=0);void 0===h&&(h=this.length);if(0>c||b>f.length||0>a||h>this.length)throw new RangeError("out of range index");if(a>=h&&c>=b)return 0;if(a>=h)return-1;
if(c>=b)return 1;c>>>=0;b>>>=0;a>>>=0;h>>>=0;if(this===f)return 0;var p=h-a,l=b-c,k=Math.min(p,l);a=this.slice(a,h);f=f.slice(c,b);for(c=0;c<k;++c)if(a[c]!==f[c]){p=a[c];l=f[c];break}return p<l?-1:l<p?1:0};d.prototype.indexOf=function(f,b,a){"string"===typeof b?(a=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b>>=0;if(0===this.length||b>=this.length)return-1;0>b&&(b=Math.max(this.length+b,0));"string"===typeof f&&(f=d.from(f,a));if(d.isBuffer(f))return 0===f.length?-1:c(this,f,b,
a);if("number"===typeof f)return d.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,f,b):c(this,[f],b,a);throw new TypeError("val must be string, number or Buffer");};d.prototype.includes=function(f,c,b){return-1!==this.indexOf(f,c,b)};d.prototype.write=function(f,c,b,d){if(void 0===c)d="utf8",b=this.length,c=0;else if(void 0===b&&"string"===typeof c)d=c,b=this.length,c=0;else if(isFinite(c))c|=0,isFinite(b)?(b|=0,void 0===d&&(d="utf8")):(d=b,b=
void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-c;if(void 0===b||b>a)b=a;if(0<f.length&&(0>b||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(a=!1;;)switch(d){case "hex":a:{c=Number(c)||0;d=this.length-c;b?(b=Number(b),b>d&&(b=d)):b=d;d=f.length;if(0!==d%2)throw Error("Invalid hex string");b>d/2&&(b=d/2);for(d=0;d<b;d++){a=parseInt(f.substr(2*d,2),16);if(isNaN(a)){f=d;break a}this[c+
d]=a}f=d}return f;case "utf8":case "utf-8":return G(E(f,this.length-c),this,c,b);case "ascii":return G(H(f),this,c,b);case "binary":return G(H(f),this,c,b);case "base64":return G(F.toByteArray(C(f)),this,c,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-c;for(var h=void 0,h=a=void 0,p=[],l=0;l<f.length&&!(0>(d-=2));l++)h=f.charCodeAt(l),a=h>>8,h%=256,p.push(h),p.push(a);return G(p,this,c,b);default:if(a)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();a=
!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;d.prototype.slice=function(f,c){var b=this.length;f=~~f;c=void 0===c?b:~~c;0>f?(f+=b,0>f&&(f=0)):f>b&&(f=b);0>c?(c+=b,0>c&&(c=0)):c>b&&(c=b);c<f&&(c=f);if(d.TYPED_ARRAY_SUPPORT)b=this.subarray(f,c),b.__proto__=d.prototype;else for(var a=c-f,b=new d(a,void 0),h=0;h<a;h++)b[h]=this[h+f];return b};d.prototype.readUIntLE=function(f,c,b){f|=0;c|=0;b||v(f,c,this.length);b=this[f];for(var d=
1,a=0;++a<c&&(d*=256);)b+=this[f+a]*d;return b};d.prototype.readUIntBE=function(f,c,b){f|=0;c|=0;b||v(f,c,this.length);b=this[f+--c];for(var d=1;0<c&&(d*=256);)b+=this[f+--c]*d;return b};d.prototype.readUInt8=function(f,c){c||v(f,1,this.length);return this[f]};d.prototype.readUInt16LE=function(f,c){c||v(f,2,this.length);return this[f]|this[f+1]<<8};d.prototype.readUInt16BE=function(f,c){c||v(f,2,this.length);return this[f]<<8|this[f+1]};d.prototype.readUInt32LE=function(f,c){c||v(f,4,this.length);
return(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};d.prototype.readUInt32BE=function(f,c){c||v(f,4,this.length);return 16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};d.prototype.readIntLE=function(f,c,b){f|=0;c|=0;b||v(f,c,this.length);b=this[f];for(var d=1,a=0;++a<c&&(d*=256);)b+=this[f+a]*d;b>=128*d&&(b-=Math.pow(2,8*c));return b};d.prototype.readIntBE=function(f,c,b){f|=0;c|=0;b||v(f,c,this.length);b=c;for(var d=1,a=this[f+--b];0<b&&(d*=256);)a+=this[f+--b]*d;a>=128*d&&(a-=
Math.pow(2,8*c));return a};d.prototype.readInt8=function(f,c){c||v(f,1,this.length);return this[f]&128?-1*(255-this[f]+1):this[f]};d.prototype.readInt16LE=function(f,c){c||v(f,2,this.length);var b=this[f]|this[f+1]<<8;return b&32768?b|4294901760:b};d.prototype.readInt16BE=function(f,c){c||v(f,2,this.length);var b=this[f+1]|this[f]<<8;return b&32768?b|4294901760:b};d.prototype.readInt32LE=function(f,c){c||v(f,4,this.length);return this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};d.prototype.readInt32BE=
function(f,c){c||v(f,4,this.length);return this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};d.prototype.readFloatLE=function(f,c){c||v(f,4,this.length);return I.read(this,f,!0,23,4)};d.prototype.readFloatBE=function(f,c){c||v(f,4,this.length);return I.read(this,f,!1,23,4)};d.prototype.readDoubleLE=function(f,c){c||v(f,8,this.length);return I.read(this,f,!0,52,8)};d.prototype.readDoubleBE=function(f,c){c||v(f,8,this.length);return I.read(this,f,!1,52,8)};d.prototype.writeUIntLE=function(f,c,b,d){f=
+f;c|=0;b|=0;d||z(this,f,c,b,Math.pow(2,8*b)-1,0);d=1;var a=0;for(this[c]=f&255;++a<b&&(d*=256);)this[c+a]=f/d&255;return c+b};d.prototype.writeUIntBE=function(f,c,b,d){f=+f;c|=0;b|=0;d||z(this,f,c,b,Math.pow(2,8*b)-1,0);d=b-1;var a=1;for(this[c+d]=f&255;0<=--d&&(a*=256);)this[c+d]=f/a&255;return c+b};d.prototype.writeUInt8=function(f,c,b){f=+f;c|=0;b||z(this,f,c,1,255,0);d.TYPED_ARRAY_SUPPORT||(f=Math.floor(f));this[c]=f&255;return c+1};d.prototype.writeUInt16LE=function(f,c,b){f=+f;c|=0;b||z(this,
f,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=f&255,this[c+1]=f>>>8):e(this,f,c,!0);return c+2};d.prototype.writeUInt16BE=function(f,c,b){f=+f;c|=0;b||z(this,f,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=f>>>8,this[c+1]=f&255):e(this,f,c,!1);return c+2};d.prototype.writeUInt32LE=function(c,b,a){c=+c;b|=0;a||z(this,c,b,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[b+3]=c>>>24,this[b+2]=c>>>16,this[b+1]=c>>>8,this[b]=c&255):f(this,c,b,!0);return b+4};d.prototype.writeUInt32BE=function(c,b,a){c=+c;b|=
0;a||z(this,c,b,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[b]=c>>>24,this[b+1]=c>>>16,this[b+2]=c>>>8,this[b+3]=c&255):f(this,c,b,!1);return b+4};d.prototype.writeIntLE=function(f,c,b,d){f=+f;c|=0;d||(d=Math.pow(2,8*b-1),z(this,f,c,b,d-1,-d));d=0;var a=1,h=0;for(this[c]=f&255;++d<b&&(a*=256);)0>f&&0===h&&0!==this[c+d-1]&&(h=1),this[c+d]=(f/a>>0)-h&255;return c+b};d.prototype.writeIntBE=function(f,c,b,d){f=+f;c|=0;d||(d=Math.pow(2,8*b-1),z(this,f,c,b,d-1,-d));d=b-1;var a=1,h=0;for(this[c+d]=f&255;0<=
--d&&(a*=256);)0>f&&0===h&&0!==this[c+d+1]&&(h=1),this[c+d]=(f/a>>0)-h&255;return c+b};d.prototype.writeInt8=function(f,c,b){f=+f;c|=0;b||z(this,f,c,1,127,-128);d.TYPED_ARRAY_SUPPORT||(f=Math.floor(f));0>f&&(f=255+f+1);this[c]=f&255;return c+1};d.prototype.writeInt16LE=function(f,c,b){f=+f;c|=0;b||z(this,f,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=f&255,this[c+1]=f>>>8):e(this,f,c,!0);return c+2};d.prototype.writeInt16BE=function(f,c,b){f=+f;c|=0;b||z(this,f,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?
(this[c]=f>>>8,this[c+1]=f&255):e(this,f,c,!1);return c+2};d.prototype.writeInt32LE=function(c,b,a){c=+c;b|=0;a||z(this,c,b,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[b]=c&255,this[b+1]=c>>>8,this[b+2]=c>>>16,this[b+3]=c>>>24):f(this,c,b,!0);return b+4};d.prototype.writeInt32BE=function(c,b,a){c=+c;b|=0;a||z(this,c,b,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);d.TYPED_ARRAY_SUPPORT?(this[b]=c>>>24,this[b+1]=c>>>16,this[b+2]=c>>>8,this[b+3]=c&255):f(this,c,b,!1);return b+4};d.prototype.writeFloatLE=
function(f,c,b){return D(this,f,c,!0,b)};d.prototype.writeFloatBE=function(f,c,b){return D(this,f,c,!1,b)};d.prototype.writeDoubleLE=function(f,c,b){return A(this,f,c,!0,b)};d.prototype.writeDoubleBE=function(f,c,b){return A(this,f,c,!1,b)};d.prototype.copy=function(f,c,b,a){b||(b=0);a||0===a||(a=this.length);c>=f.length&&(c=f.length);c||(c=0);0<a&&a<b&&(a=b);if(a===b||0===f.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("sourceStart out of bounds");
if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);f.length-c<a-b&&(a=f.length-c+b);var h=a-b;if(this===f&&b<c&&c<a)for(a=h-1;0<=a;a--)f[a+c]=this[a+b];else if(1E3>h||!d.TYPED_ARRAY_SUPPORT)for(a=0;a<h;a++)f[a+c]=this[a+b];else Uint8Array.prototype.set.call(f,this.subarray(b,b+h),c);return h};d.prototype.fill=function(f,c,b,a){if("string"===typeof f){"string"===typeof c?(a=c,c=0,b=this.length):"string"===typeof b&&(a=b,b=this.length);if(1===f.length){var h=f.charCodeAt(0);
256>h&&(f=h)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!d.isEncoding(a))throw new TypeError("Unknown encoding: "+a);}else"number"===typeof f&&(f&=255);if(0>c||this.length<c||this.length<b)throw new RangeError("Out of range index");if(b<=c)return this;c>>>=0;b=void 0===b?this.length:b>>>0;f||(f=0);if("number"===typeof f)for(a=c;a<b;a++)this[a]=f;else for(f=d.isBuffer(f)?f:E((new d(f,a)).toString()),h=f.length,a=0;a<b-c;a++)this[a+c]=
f[a%h];return this};var T=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":34,ieee754:35,isarray:36}],34:[function(a,e,g){function n(b,d,a){for(var n=[],t=d;t<a;t+=3)d=(b[t]<<16)+(b[t+1]<<8)+b[t+2],n.push(m[d>>18&63]+m[d>>12&63]+m[d>>6&63]+m[d&63]);return n.join("")}g.toByteArray=function(a){var k,m,n,t,u;k=a.length;if(0<k%4)throw Error("Invalid string. Length must be a multiple of 4");t="="===a[k-
2]?2:"="===a[k-1]?1:0;u=new d(3*k/4-t);m=0<t?k-4:k;var q=0;for(k=0;k<m;k+=4)n=b[a.charCodeAt(k)]<<18|b[a.charCodeAt(k+1)]<<12|b[a.charCodeAt(k+2)]<<6|b[a.charCodeAt(k+3)],u[q++]=n>>16&255,u[q++]=n>>8&255,u[q++]=n&255;2===t?(n=b[a.charCodeAt(k)]<<2|b[a.charCodeAt(k+1)]>>4,u[q++]=n&255):1===t&&(n=b[a.charCodeAt(k)]<<10|b[a.charCodeAt(k+1)]<<4|b[a.charCodeAt(k+2)]>>2,u[q++]=n>>8&255,u[q++]=n&255);return u};g.fromByteArray=function(b){for(var d=b.length,a=d%3,r="",t=[],u=0,q=d-a;u<q;u+=16383)t.push(n(b,
u,u+16383>q?q:u+16383));1===a?(b=b[d-1],r+=m[b>>2],r+=m[b<<4&63],r+="=="):2===a&&(b=(b[d-2]<<8)+b[d-1],r+=m[b>>10],r+=m[b>>4&63],r+=m[b<<2&63],r+="=");t.push(r);return t.join("")};var m=[],b=[],d="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var d=0;64>d;++d)m[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=d;b[45]=62;b[95]=63})()},{}],35:[function(a,e,g){g.read=function(a,
m,b,d,w){var k;k=8*w-d-1;var e=(1<<k)-1,r=e>>1,t=-7;w=b?w-1:0;var u=b?-1:1,q=a[m+w];w+=u;b=q&(1<<-t)-1;q>>=-t;for(t+=k;0<t;b=256*b+a[m+w],w+=u,t-=8);k=b&(1<<-t)-1;b>>=-t;for(t+=d;0<t;k=256*k+a[m+w],w+=u,t-=8);if(0===b)b=1-r;else{if(b===e)return k?NaN:Infinity*(q?-1:1);k+=Math.pow(2,d);b-=r}return(q?-1:1)*k*Math.pow(2,b-d)};g.write=function(a,m,b,d,w,k){var e,r=8*k-w-1,t=(1<<r)-1,u=t>>1,q=23===w?Math.pow(2,-24)-Math.pow(2,-77):0;k=d?0:k-1;var l=d?1:-1,h=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);isNaN(m)||
Infinity===m?(m=isNaN(m)?1:0,d=t):(d=Math.floor(Math.log(m)/Math.LN2),1>m*(e=Math.pow(2,-d))&&(d--,e*=2),m=1<=d+u?m+q/e:m+q*Math.pow(2,1-u),2<=m*e&&(d++,e/=2),d+u>=t?(m=0,d=t):1<=d+u?(m=(m*e-1)*Math.pow(2,w),d+=u):(m=m*Math.pow(2,u-1)*Math.pow(2,w),d=0));for(;8<=w;a[b+k]=m&255,k+=l,m/=256,w-=8);d=d<<w|m;for(r+=w;0<r;a[b+k]=d&255,k+=l,d/=256,r-=8);a[b+k-l]|=128*h}},{}],36:[function(a,e,g){var n={}.toString;e.exports=Array.isArray||function(a){return"[object Array]"==n.call(a)}},{}],37:[function(a,
e,g){e.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],38:[function(a,e,g){var n=a("./identity");e.exports=function(a,b,d,w){var k,e,r,t,u,q,l,h,c=b[0],p=b[1];b=b[2];r=w[0];t=w[1];e=w[2];l=d[0];w=d[1];k=d[2];if(1E-6>Math.abs(c-l)&&1E-6>Math.abs(p-w)&&1E-6>Math.abs(b-k))return n(a);d=c-l;w=p-w;l=b-k;h=1/Math.sqrt(d*d+w*w+l*l);d*=h;w*=h;l*=h;k=t*l-e*w;e=e*d-r*l;r=r*w-t*d;(h=Math.sqrt(k*k+e*e+r*r))?
(h=1/h,k*=h,e*=h,r*=h):r=e=k=0;t=w*r-l*e;u=l*k-d*r;q=d*e-w*k;(h=Math.sqrt(t*t+u*u+q*q))?(h=1/h,t*=h,u*=h,q*=h):q=u=t=0;a[0]=k;a[1]=t;a[2]=d;a[3]=0;a[4]=e;a[5]=u;a[6]=w;a[7]=0;a[8]=r;a[9]=q;a[10]=l;a[11]=0;a[12]=-(k*c+e*p+r*b);a[13]=-(t*c+u*p+q*b);a[14]=-(d*c+w*p+l*b);a[15]=1;return a}},{"./identity":37}],39:[function(a,e,g){e.exports=function(a,m,b,d,w){m=1/Math.tan(m/2);var k=1/(d-w);a[0]=m/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(w+d)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=
2*w*d*k;a[15]=0;return a}},{}],40:[function(a,e,g){e.exports=function(d,a){if("object"!==typeof a||null===a)a={};return n(d,a.canvas||m,a.context||b,a)};var n=a("./lib/vtext"),m=null,b=null;"undefined"!==typeof document&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,b=m.getContext("2d"))},{"./lib/vtext":41}],41:[function(a,e,g){function n(b,d,a){for(var h=d.textAlign||"start",c=d.textBaseline||"alphabetic",p=[1073741824,1073741824],k=[0,0],w=b.length,m=0;m<w;++m)for(var f=b[m],x=
0;2>x;++x)p[x]=Math.min(p[x],f[x])|0,k[x]=Math.max(k[x],f[x])|0;var t=0;switch(h){case "center":t=-.5*(p[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-p[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+h+"'");}var A=0;switch(c){case "hanging":case "top":A=-p[1];break;case "middle":A=-.5*(p[1]+k[1]);break;case "alphabetic":case "ideographic":A=-3*a;break;case "bottom":A=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+
c+"'");}var r=1/a;"lineHeight"in d?r*=+d.lineHeight:"width"in d?r=d.width/(k[0]-p[0]):"height"in d&&(r=d.height/(k[1]-p[1]));return b.map(function(f){return[r*(f[0]+t),r*(f[1]+A)]})}function m(b,a,l,h){b=d(b,128);h=h?k(b.cells,b.positions,.25):{edges:b.cells,positions:b.positions};l=n(h.positions,a,l);b=h.edges;h="ccw"===a.orientation;y(l,b);if(a.polygons||a.polygon||a.polyline){a=t(b,l);b=Array(a.length);for(var c=0;c<a.length;++c){for(var p=a[c],v=Array(p.length),w=0;w<p.length;++w){for(var m=p[w],
f=Array(m.length),x=0;x<m.length;++x)f[x]=l[m[x]].slice();h&&f.reverse();v[w]=f}b[c]=v}return b}return a.triangles||a.triangulate||a.triangle?{cells:r(l,b,{delaunay:!1,exterior:!1,interior:!0}),positions:l}:{edges:b,positions:l}}function b(b,d,a){try{return m(b,d,a,!0)}catch(h){}try{return m(b,d,a,!1)}catch(h){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}e.exports=function(d,a,l,h){var c=h.size||64;l.font=c+"px "+
(h.font||"normal");l.textAlign="start";l.textBaseline="alphabetic";l.direction="ltr";var p;p=Math.ceil(l.measureText(d).width+2*c)|0;if(8192<p)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var k=3*c;a.height<k&&(a.height=k);l.fillStyle="#000";l.fillRect(0,0,a.width,a.height);l.fillStyle="#fff";l.fillText(d,c,2*c);d=l.getImageData(0,0,p,k);p=w(d.data,[k,p,4]).pick(-1,-1,0).transpose(1,0);return b(p,h,c)};e.exports.processPixels=b;var d=a("surface-nets"),w=a("ndarray"),
k=a("simplify-planar-graph"),y=a("clean-pslg"),r=a("cdt2d"),t=a("planar-graph-to-polyline")},{cdt2d:42,"clean-pslg":60,ndarray:106,"planar-graph-to-polyline":130,"simplify-planar-graph":140,"surface-nets":162}],42:[function(a,e,g){function n(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function m(b,d){return b[0]-d[0]||b[1]-d[1]}function b(b,d,a){return d in b?b[d]:a}var d=a("./lib/monotone"),w=a("./lib/triangulation"),k=a("./lib/delaunay"),y=a("./lib/filter");e.exports=function(a,t,u){Array.isArray(t)?
(u=u||{},t=t||[]):(u=t||{},t=[]);var q=!!b(u,"delaunay",!0),l=!!b(u,"interior",!0),h=!!b(u,"exterior",!0);u=!!b(u,"infinity",!1);if(!l&&!h||0===a.length)return[];var c=d(a,t);if(q||l!==h||u){t=w(a.length,t.map(n).sort(m));for(var p=0;p<c.length;++p){var v=c[p];t.addTriangle(v[0],v[1],v[2])}q&&k(a,t);return h?l?u?y(t,0,u):t.cells():y(t,1,u):y(t,-1)}return c}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(a,e,g){function n(b,d,a,k,e,r){var t=d.opposite(k,
e);if(!(0>t)){if(e<k){var u=k;k=e;e=u;u=r;r=t;t=u}d.isConstraint(k,e)||0>m(b[k],b[e],b[r],b[t])&&a.push(k,e)}}var m=a("robust-in-sphere")[4];a("binary-search-bounds");e.exports=function(b,d){for(var a=[],k=b.length,e=d.stars,r=0;r<k;++r)for(var t=e[r],u=1;u<t.length;u+=2){var q=t[u];if(!(q<r||d.isConstraint(r,q))){for(var l=t[u-1],h=-1,c=1;c<t.length;c+=2)if(t[c-1]===q){h=t[c];break}0>h||0>m(b[r],b[q],b[l],b[h])&&a.push(r,q)}}for(;0<a.length;){q=a.pop();r=a.pop();h=l=-1;t=e[r];for(k=1;k<t.length;k+=
2)u=t[k-1],c=t[k],u===q?h=c:c===q&&(l=u);0>l||0>h||0<=m(b[r],b[q],b[l],b[h])||(d.flip(r,q),n(b,d,a,l,r,h),n(b,d,a,r,h,l),n(b,d,a,h,q,l),n(b,d,a,q,l,h))}}},{"binary-search-bounds":47,"robust-in-sphere":48}],44:[function(a,e,g){function n(b,a,k,m,e,t,u){this.cells=b;this.neighbor=a;this.flags=m;this.constraint=k;this.active=e;this.next=t;this.boundary=u}function m(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var b=a("binary-search-bounds");e.exports=function(b,a,k){for(var e=b.cells(),r=e.length,t=0;t<
r;++t){var u=e[t],q=u[0],l=u[1],h=u[2];l<h?l<q&&(u[0]=l,u[1]=h,u[2]=q):h<q&&(u[0]=h,u[1]=q,u[2]=l)}e.sort(m);for(var c=Array(r),t=0;t<c.length;++t)c[t]=0;var p=[],v=[],z=Array(3*r),g=Array(3*r),f=null;k&&(f=[]);h=new n(e,z,g,c,p,v,f);for(t=0;t<r;++t)for(var u=e[t],x=0;3>x;++x){var q=u[x],l=u[(x+1)%3],D=z[3*t+x]=h.locate(l,q,b.opposite(l,q)),A=g[3*t+x]=b.isConstraint(q,l);0>D&&(A?v.push(t):(p.push(t),c[t]=1),k&&f.push([l,q,-1]))}if(0===a)return k?h.cells.concat(h.boundary):h.cells;r=1;t=h.active;u=
h.next;b=h.flags;e=h.cells;q=h.constraint;for(l=h.neighbor;0<t.length||0<u.length;){for(;0<t.length;)if(c=t.pop(),b[c]!==-r)for(b[c]=r,p=0;3>p;++p)v=l[3*c+p],0<=v&&0===b[v]&&(q[3*c+p]?u.push(v):(t.push(v),b[v]=r));c=u;u=t;t=c;u.length=0;r=-r}for(t=r=0;t<e.length;++t)b[t]===a&&(e[r++]=e[t]);e.length=r;return k?e.concat(h.boundary):e};n.prototype.locate=function(){var d=[0,0,0];return function(a,k,e){var n=a,t=k,u=e;k<e?k<a&&(n=k,t=e,u=a):e<a&&(n=e,t=a,u=k);if(0>n)return-1;d[0]=n;d[1]=t;d[2]=u;return b.eq(this.cells,
d,m)}}()},{"binary-search-bounds":47}],45:[function(a,e,g){function n(b,d,a,k,l){this.a=b;this.b=d;this.idx=a;this.lowerIds=k;this.upperIds=l}function m(b,d,a,k){this.a=b;this.b=d;this.type=a;this.idx=k}function b(b,d){var a=b.a[0]-d.a[0]||b.a[1]-d.a[1]||b.type-d.type;return a||0!==b.type&&(a=y(b.a,b.b,d.b))?a:b.idx-d.idx}function d(b,d){return y(b.a,b.b,d)}function w(b,d){var a;return(a=b.a[0]<d.a[0]?y(b.a,b.b,d.a):y(d.b,d.a,b.a))?a:(a=d.b[0]<b.b[0]?y(b.a,b.b,d.b):y(d.b,d.a,b.b))||b.idx-d.idx}var k=
a("binary-search-bounds"),y=a("robust-orientation")[3];e.exports=function(a,e){for(var u=a.length,q=e.length,l=[],h=0;h<u;++h)l.push(new m(a[h],null,0,h));for(h=0;h<q;++h){var c=e[h],u=a[c[0]],c=a[c[1]];u[0]<c[0]?l.push(new m(u,c,2,h),new m(c,u,1,h)):u[0]>c[0]&&l.push(new m(c,u,2,h),new m(u,c,1,h))}l.sort(b);h=l[0].a[0]-(1+Math.abs(l[0].a[0]))*Math.pow(2,-52);q=[new n([h,1],[h,0],-1,[],[],[],[])];u=[];h=0;for(c=l.length;h<c;++h){var p=l[h],v=p.type;if(0===v)for(var v=u,z=q,g=a,f=p.a,p=p.idx,x=k.lt(z,
f,d),D=k.gt(z,f,d);x<D;++x){for(var A=z[x],C=A.lowerIds,E=C.length;1<E&&0<y(g[C[E-2]],g[C[E-1]],f);)v.push([C[E-1],C[E-2],p]),--E;C.length=E;C.push(p);A=A.upperIds;for(E=A.length;1<E&&0>y(g[A[E-2]],g[A[E-1]],f);)v.push([A[E-2],A[E-1],p]),--E;A.length=E;A.push(p)}else 2===v?(v=q,z=p,g=k.le(v,z,w),f=v[g],p=f.upperIds,D=p[p.length-1],f.upperIds=[D],v.splice(g+1,0,new n(z.a,z.b,z.idx,[D],p))):(v=q,z=p,g=z.a,z.a=z.b,z.b=g,z=k.eq(v,z,w),v[z-1].upperIds=v[z].upperIds,v.splice(z,1))}return u}},{"binary-search-bounds":47,
"robust-orientation":59}],46:[function(a,e,g){function n(b,a){this.stars=b;this.edges=a}function m(b,a,k){for(var m=1,e=b.length;m<e;m+=2)if(b[m-1]===a&&b[m]===k){b[m-1]=b[e-2];b[m]=b[e-1];b.length=e-2;break}}var b=a("binary-search-bounds");e.exports=function(b,a){for(var k=Array(b),m=0;m<b;++m)k[m]=[];return new n(k,a)};a=n.prototype;a.isConstraint=function(){function d(b,d){return b[0]-d[0]||b[1]-d[1]}var a=[0,0];return function(k,m){a[0]=Math.min(k,m);a[1]=Math.max(k,m);return 0<=b.eq(this.edges,
a,d)}}();a.removeTriangle=function(b,a,k){var e=this.stars;m(e[b],a,k);m(e[a],k,b);m(e[k],b,a)};a.addTriangle=function(b,a,k){var m=this.stars;m[b].push(a,k);m[a].push(k,b);m[k].push(b,a)};a.opposite=function(b,a){for(var k=this.stars[a],m=1,e=k.length;m<e;m+=2)if(k[m]===b)return k[m-1];return-1};a.flip=function(b,a){var k=this.opposite(b,a),m=this.opposite(a,b);this.removeTriangle(b,a,k);this.removeTriangle(a,b,m);this.addTriangle(b,m,k);this.addTriangle(a,k,m)};a.edges=function(){for(var b=this.stars,
a=[],k=0,m=b.length;k<m;++k)for(var e=b[k],n=0,u=e.length;n<u;n+=2)a.push([e[n],e[n+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],k=0,m=b.length;k<m;++k)for(var e=b[k],n=0,u=e.length;n<u;n+=2){var q=e[n],l=e[n+1];k<Math.min(q,l)&&a.push([k,q,l])}return a}},{"binary-search-bounds":47}],47:[function(a,e,g){function n(b,a,m,k,e){b=["function ",b,"(a,l,h,",k.join(","),"){",e?"":"var i=",m?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];e?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):
b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",a,"){i=m;");m?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");e?b.push("return -1};"):b.push("return i};");return b.join("")}function m(b,a,m,k){return(new Function([n("A","x"+b+"y",a,["y"],k),n("P","c(x,y)"+b+"0",a,["y","c"],k),"function dispatchBsearch",m,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",
m].join("")))()}e.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],48:[function(a,e,g){function n(b,c){for(var a=Array(b.length-1),d=1;d<b.length;++d)for(var l=a[d-1]=Array(b.length-1),k=0,f=0;k<b.length;++k)k!==c&&(l[f++]=b[d][k]);return a}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var c=b.length>>1;return["sum(",m(b.slice(0,c)),",",m(b.slice(c)),")"].join("")}function b(a,c){if("m"===
a.charAt(0)){if("w"===c.charAt(0)){var d=a.split("[");return["w",c.substr(1),"m",d[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return b(c,a)}function d(a){if(2===a.length)return[["diff(",b(a[0][0],a[1][1]),",",b(a[1][0],a[0][1]),")"].join("")];for(var c=[],p=0;p<a.length;++p)c.push(["scale(",m(d(n(a,p))),",",p&1?"-":"",a[0][p],")"].join(""));return c}function w(b,c){for(var a=[],d=0;d<c-2;++d)a.push(["prod(m",b,"[",d,"],m",b,"[",d,"])"].join(""));return m(a)}function k(b){for(var c=
[],a=[],l=Array(b),k=0;k<b;++k){l[k]=Array(b);for(var e=0;e<b;++e)l[k][e]=["m",e,"[",b-k-2,"]"].join("")}for(k=0;k<b;++k)l[0][k]="1",l[b-1][k]="w"+k;for(k=0;k<b;++k)0===(k&1)?c.push.apply(c,d(n(l,k))):a.push.apply(a,d(n(l,k)));c=m(c);a=m(a);l="exactInSphere"+b;e=[];for(k=0;k<b;++k)e.push("m"+k);e=["function ",l,"(",e.join(),"){"];for(k=0;k<b;++k){e.push("var w",k,"=",w(k,b),";");for(var f=0;f<b;++f)f!==k&&e.push("var w",k,"m",f,"=scale(w",k,",m",f,"[0]);")}e.push("var p=",c,",n=",a,",d=diff(p,n);return d[d.length-1];}return ",
l);return(new Function("sum","diff","prod","scale",e.join("")))(t,u,r,q)}function y(b){var c=l[b.length];c||(c=l[b.length]=k(b.length));return c.apply(void 0,b)}var r=a("two-product"),t=a("robust-sum"),u=a("robust-subtract"),q=a("robust-scale"),l=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=l.length;)l.push(k(l.length));for(var b=[],c=["slow"],a=0;6>=a;++a)b.push("a"+a),c.push("o"+a);for(var d=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
a=2;6>=a;++a)d.push("case ",a,":return o",a,"(",b.slice(0,a).join(),");");d.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(d.join(""));b=Function.apply(void 0,c);e.exports=b.apply(void 0,[y].concat(l));for(a=0;6>=a;++a)e.exports[a]=l[a]})()},{"robust-scale":50,"robust-subtract":51,"robust-sum":52,"two-product":53}],49:[function(a,e,g){e.exports=function(a,m,b){var d=a+m,e=d-a;m-=e;a-=d-e;return b?(b[0]=a+
m,b[1]=d,b):[a+m,d]}},{}],50:[function(a,e,g){var n=a("two-product"),m=a("two-sum");e.exports=function(b,a){var e=b.length;if(1===e)return e=n(b[0],a),e[0]?e:[e[1]];var k=Array(2*e),g=[.1,.1],r=[.1,.1],t=0;n(b[0],a,g);g[0]&&(k[t++]=g[0]);for(var u=1;u<e;++u){n(b[u],a,r);m(g[1],r[0],g);g[0]&&(k[t++]=g[0]);var q=r[1],l=g[1],h=q+l,q=l-(h-q);g[1]=h;q&&(k[t++]=q)}g[1]&&(k[t++]=g[1]);0===t&&(k[t++]=0);k.length=t;return k}},{"two-product":53,"two-sum":49}],51:[function(a,e,g){e.exports=function(a,m){var b=
a.length|0,d=m.length|0;if(1===b&&1===d){var d=a[0],e=-m[0],b=d+e,k=b-d,b=(d=d-(b-k)+(e-k))?[d,b]:[b];return b}var e=Array(b+d),g=k=0,r=0,t=Math.abs,u=a[g],q=t(u),l=-m[r],h=t(l),c,p;q<h?(p=u,g+=1,g<b&&(u=a[g],q=t(u))):(p=l,r+=1,r<d&&(l=-m[r],h=t(l)));g<b&&q<h||r>=d?(c=u,g+=1,g<b&&(u=a[g],q=t(u))):(c=l,r+=1,r<d&&(l=-m[r],h=t(l)));var v=c+p;p-=v-c;for(var z=v,B;g<b&&r<d;)q<h?(c=u,g+=1,g<b&&(u=a[g],q=t(u))):(c=l,r+=1,r<d&&(l=-m[r],h=t(l))),v=c+p,c=v-c,(c=p-c)&&(e[k++]=c),c=z+v,B=c-z,p=c-B,v-=B,z-=p,
p=z+v,z=c;for(;g<b;)c=u,v=c+p,c=v-c,(c=p-c)&&(e[k++]=c),c=z+v,B=c-z,p=c-B,v-=B,z-=p,p=z+v,z=c,g+=1,g<b&&(u=a[g]);for(;r<d;)c=l,v=c+p,c=v-c,(c=p-c)&&(e[k++]=c),c=z+v,B=c-z,p=c-B,v-=B,z-=p,p=z+v,z=c,r+=1,r<d&&(l=-m[r]);p&&(e[k++]=p);z&&(e[k++]=z);k||(e[k++]=0);e.length=k;return e}},{}],52:[function(a,e,g){e.exports=function(a,e){var b=a.length|0,d=e.length|0;if(1===b&&1===d){var d=a[0],w=e[0],b=d+w,k=b-d,b=(d=d-(b-k)+(w-k))?[d,b]:[b];return b}var w=Array(b+d),g=k=0,r=0,t=Math.abs,u=a[g],q=t(u),l=e[r],
h=t(l),c,p;q<h?(p=u,g+=1,g<b&&(u=a[g],q=t(u))):(p=l,r+=1,r<d&&(l=e[r],h=t(l)));g<b&&q<h||r>=d?(c=u,g+=1,g<b&&(u=a[g],q=t(u))):(c=l,r+=1,r<d&&(l=e[r],h=t(l)));var v=c+p;p-=v-c;for(var z=v,B;g<b&&r<d;)q<h?(c=u,g+=1,g<b&&(u=a[g],q=t(u))):(c=l,r+=1,r<d&&(l=e[r],h=t(l))),v=c+p,c=v-c,(c=p-c)&&(w[k++]=c),c=z+v,B=c-z,p=c-B,v-=B,z-=p,p=z+v,z=c;for(;g<b;)c=u,v=c+p,c=v-c,(c=p-c)&&(w[k++]=c),c=z+v,B=c-z,p=c-B,v-=B,z-=p,p=z+v,z=c,g+=1,g<b&&(u=a[g]);for(;r<d;)c=l,v=c+p,c=v-c,(c=p-c)&&(w[k++]=c),c=z+v,B=c-z,p=c-
B,v-=B,z-=p,p=z+v,z=c,r+=1,r<d&&(l=e[r]);p&&(w[k++]=p);z&&(w[k++]=z);k||(w[k++]=0);w.length=k;return w}},{}],53:[function(a,e,g){e.exports=function(a,b,d){var e=a*b,k=n*a,k=k-(k-a);a-=k;var g=n*b,g=g-(g-b);b-=g;b=a*b-(e-k*g-a*g-k*b);return d?(d[0]=b,d[1]=e,d):[b,e]};var n=+(Math.pow(2,27)+1)},{}],54:[function(a,e,g){arguments[4][49][0].apply(g,arguments)},{dup:49}],55:[function(a,e,g){arguments[4][50][0].apply(g,arguments)},{dup:50,"two-product":58,"two-sum":54}],56:[function(a,e,g){arguments[4][51][0].apply(g,
arguments)},{dup:51}],57:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],58:[function(a,e,g){arguments[4][53][0].apply(g,arguments)},{dup:53}],59:[function(a,e,g){function n(b,c){for(var a=Array(b.length-1),d=1;d<b.length;++d)for(var l=a[d-1]=Array(b.length-1),k=0,f=0;k<b.length;++k)k!==c&&(l[f++]=b[d][k]);return a}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var c=b.length>>1;return["sum(",m(b.slice(0,c)),",",m(b.slice(c)),
")"].join("")}function b(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],d=0;d<a.length;++d)c.push(["scale(",m(b(n(a,d))),",",d&1?"-":"",a[0][d],")"].join(""));return c}function d(a){for(var c=[],d=[],l=Array(a),e=0;e<a;++e){l[e]=Array(a);for(var q=0;q<a;++q)l[e][q]=["m",q,"[",a-e-1,"]"].join("")}e=[];for(q=0;q<a;++q)0===(q&1)?c.push.apply(c,b(n(l,q))):d.push.apply(d,b(n(l,q))),e.push("m"+q);c=m(c);d=m(d);a="orientation"+a+"Exact";
a=["function ",a,"(",e.join(),"){var p=",c,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,k,r,t)}function w(b){var c=l[b.length];c||(c=l[b.length]=d(b.length));return c.apply(void 0,b)}var k=a("two-product"),y=a("robust-sum"),r=a("robust-scale"),t=a("robust-subtract"),u=d(3),q=d(4),l=[function(){return 0},function(){return 0},function(b,c){return c[0]-b[0]},function(b,c,a){var d=(b[1]-a[1])*(c[0]-a[0]),l=(b[0]-a[0])*(c[1]-a[1]),
k=d-l;if(0<d){if(0>=l)return k;d+=l}else if(0>d){if(0<=l)return k;d=-(d+l)}else return k;d*=3.3306690738754716E-16;return k>=d||k<=-d?k:u(b,c,a)},function(b,c,a,d){var l=b[0]-d[0],k=c[0]-d[0],f=a[0]-d[0],x=b[1]-d[1],e=c[1]-d[1],A=a[1]-d[1],m=b[2]-d[2],g=c[2]-d[2],u=a[2]-d[2],w=k*A,n=f*e,f=f*x,A=l*A,l=l*e,x=k*x,k=m*(w-n)+g*(f-A)+u*(l-x),m=7.771561172376103E-16*((Math.abs(w)+Math.abs(n))*Math.abs(m)+(Math.abs(f)+Math.abs(A))*Math.abs(g)+(Math.abs(l)+Math.abs(x))*Math.abs(u));return k>m||-k>m?k:q(b,
c,a,d)}];(function(){for(;5>=l.length;)l.push(d(l.length));for(var b=[],c=["slow"],a=0;5>=a;++a)b.push("a"+a),c.push("o"+a);for(var k=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],a=2;5>=a;++a)k.push("case ",a,":return o",a,"(",b.slice(0,a).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(k.join(""));b=Function.apply(void 0,c);e.exports=b.apply(void 0,
[w].concat(l));for(a=0;5>=a;++a)e.exports[a]=l[a]})()},{"robust-scale":55,"robust-subtract":56,"robust-sum":57,"two-product":58}],60:[function(a,e,g){function n(b){var f=c(b);b=h(l(f),b);return 0>b?[f,v(f,Infinity)]:0<b?[v(f,-Infinity),f]:[f,f]}function m(b,f,c){var a=[];u(c,function(c,d){var h=f[c],l=f[d];h[0]!==l[0]&&h[0]!==l[1]&&h[1]!==l[0]&&h[1]!==l[1]&&q(b[h[0]],b[h[1]],b[l[0]],b[l[1]])&&a.push([c,d])});return a}function b(b,f,c,a){var d=[];u(c,a,function(c,a){var h=f[c];if(h[0]!==a&&h[1]!==
a){var l=b[a];q(b[h[0]],b[h[1]],l,l)&&d.push([c,a])}});return d}function d(b,f,c,a,d){function k(f){if(f>=b.length)return e[f-b.length];f=b[f];return[l(f[0]),l(f[1])]}for(var e=[],v=0;v<c.length;++v){var m=c[v],q=m[0],m=m[1],g=f[q],u=f[m];if(g=z(p(b[g[0]]),p(b[g[1]]),p(b[u[0]]),p(b[u[1]])))u=e.length+b.length,e.push(g),a.push([q,u],[m,u])}a.sort(function(f,b){if(f[0]!==b[0])return f[0]-b[0];var c=k(f[1]),a=k(b[1]);return h(c[0],a[0])||h(c[1],a[1])});for(v=a.length-1;0<=v;--v){m=a[v];q=m[0];g=f[q];
u=g[0];c=g[1];var w=b[u],n=b[c];0>(w[0]-n[0]||w[1]-n[1])&&(w=u,u=c,c=w);g[0]=u;var u=g[1]=m[1],t;for(d&&(t=g[2]);0<v&&a[v-1][0]===q;)m=a[--v],m=m[1],d?f.push([u,m,t]):f.push([u,m]),u=m;d?f.push([u,c,t]):f.push([u,c])}return e}function w(b,f,a){for(var d=b.length+f.length,h=new t(d),l=0;l<f.length;++l){var k=f[l],p=n(k[0]),e=n(k[1]);a.push([p[0],e[0],p[1],e[1]]);b.push([c(k[0]),c(k[1])])}u(a,function(f,b){h.link(f,b)});f=0;a=!0;k=Array(d);for(l=0;l<d;++l)h.find(l)===l?(k[l]=f,b[f++]=b[l]):(a=!1,k[l]=
-1);b.length=f;if(a)return null;for(l=0;l<d;++l)0>k[l]&&(k[l]=k[h.find(l)]);return k}function k(b,f){return b[0]-f[0]||b[1]-f[1]}function y(b,f){var c=b[0]-f[0]||b[1]-f[1];return c?c:b[2]<f[2]?-1:b[2]>f[2]?1:0}function r(c,f,a){for(var h=Array(f.length),l=0;l<f.length;++l){var p=f[l],e=c[p[0]],p=c[p[1]];h[l]=[Math.min(e[0],p[0]),Math.min(e[1],p[1]),Math.max(e[0],p[0]),Math.max(e[1],p[1])]}l=m(c,f,h);e=Array(c.length);for(p=0;p<c.length;++p){var v=c[p];e[p]=[v[0],v[1],v[0],v[1]]}h=b(c,f,h,e);p=d(c,
f,l,h,a);c=w(c,p,e);if(0!==f.length){if(c)for(e=0;e<f.length;++e){var p=f[e],v=c[p[0]],q=c[p[1]];p[0]=Math.min(v,q);p[1]=Math.max(v,q)}else for(e=0;e<f.length;++e)p=f[e],v=p[0],q=p[1],p[0]=Math.min(v,q),p[1]=Math.max(v,q);a?f.sort(y):f.sort(k);for(e=p=1;e<f.length;++e)if(v=f[e-1],q=f[e],q[0]!==v[0]||q[1]!==v[1]||a&&q[2]!==v[2])f[p++]=q;f.length=p}return c?!0:0<l.length||0<h.length}e.exports=function(b,f,c){var a=!1,d;if(c){d=f;for(var h=Array(f.length),l=0;l<f.length;++l){var k=f[l];h[l]=[k[0],k[1],
c[l]]}f=h}for(;r(b,f,!!c);)a=!0;if(c&&a)for(d.length=0,l=c.length=0;l<f.length;++l)k=f[l],d.push([k[0],k[1]]),c.push(k[2]);return a};var t=a("union-find"),u=a("box-intersect");a("compare-cell");var q=a("robust-segment-intersect"),l=a("big-rat"),h=a("big-rat/cmp"),c=a("big-rat/to-float"),p=a("rat-vec"),v=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":61,"big-rat":65,"big-rat/cmp":63,"big-rat/to-float":80,"box-intersect":81,"compare-cell":91,nextafter:92,"rat-vec":95,"robust-segment-intersect":104,
"union-find":105}],61:[function(a,e,g){function n(b,a){return d(m(b[0],a[1]),m(b[1],a[0]))}e.exports=function(a,d,e,l){d=k(d,a);var h=k(l,e);l=n(d,h);if(0===w(l))return null;e=k(a,e);e=n(h,e);e=b(e,l);return y(a,r(d,e))};var m=a("big-rat/mul"),b=a("big-rat/div"),d=a("big-rat/sub"),w=a("big-rat/sign"),k=a("rat-vec/sub"),y=a("rat-vec/add"),r=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":64,"big-rat/mul":74,"big-rat/sign":78,"big-rat/sub":79,"big-rat/to-float":80,"rat-vec/add":94,"rat-vec/muls":96,
"rat-vec/sub":97}],62:[function(a,e,g){var n=a("./lib/rationalize");e.exports=function(a,b){return n(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}},{"./lib/rationalize":72}],63:[function(a,e,g){e.exports=function(a,e){return a[0].mul(e[1]).cmp(e[0].mul(a[1]))}},{}],64:[function(a,e,g){var n=a("./lib/rationalize");e.exports=function(a,b){return n(a[0].mul(b[1]),a[1].mul(b[0]))}},{"./lib/rationalize":72}],65:[function(a,e,g){function n(a,e){if(m(a))return e?y(a,n(e)):[a[0].clone(),a[1].clone()];
var g=0,q,l;if(b(a))q=a.clone();else if("string"===typeof a)q=w(a);else{if(0===a)return[d(0),d(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),g-=256;q=d(a)}if(m(e))q.mul(e[1]),l=e[0].clone();else if(b(e))l=e.clone();else if("string"===typeof e)l=w(e);else if(e){if(e!==Math.floor(e))for(;e!==Math.floor(e);)e*=Math.pow(2,256),g+=256;l=d(e)}else l=d(1);0<g?q=q.shln(g):0>g&&(l=l.shln(-g));return k(q,l)}var m=a("./is-rat"),b=a("./lib/is-bn"),d=a("./lib/num-to-bn"),w=a("./lib/str-to-bn"),
k=a("./lib/rationalize"),y=a("./div");e.exports=n},{"./div":64,"./is-rat":66,"./lib/is-bn":70,"./lib/num-to-bn":71,"./lib/rationalize":72,"./lib/str-to-bn":73}],66:[function(a,e,g){var n=a("./lib/is-bn");e.exports=function(a){return Array.isArray(a)&&2===a.length&&n(a[0])&&n(a[1])}},{"./lib/is-bn":70}],67:[function(a,e,g){var n=a("bn.js");e.exports=function(a){return a.cmp(new n(0))}},{"bn.js":76}],68:[function(a,e,g){e.exports=function(a){var e=a.length,b=a.words,d=0;if(1===e)d=b[0];else if(2===
e)d=b[0]+67108864*b[1];else for(var g=d=0;g<e;g++)d+=b[g]*Math.pow(67108864,g);return a.sign?-d:d}},{}],69:[function(a,e,g){var n=a("double-bits"),m=a("bit-twiddle").countTrailingZeros;e.exports=function(b){var a=m(n.lo(b));if(32>a)return a;b=m(n.hi(b));return 20<b?52:b+32}},{"bit-twiddle":75,"double-bits":77}],70:[function(a,e,g){a("bn.js");e.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":76}],71:[function(a,e,g){var n=a("bn.js"),m=a("double-bits");e.exports=function(b){var a=
m.exponent(b);return 52>a?new n(b):(new n(b*Math.pow(2,52-a))).shln(a-52)}},{"bn.js":76,"double-bits":77}],72:[function(a,e,g){var n=a("./num-to-bn"),m=a("./bn-sign");e.exports=function(b,a){var e=m(b),k=m(a);if(0===e)return[n(0),n(1)];if(0===k)return[n(0),n(0)];0>k&&(b=b.neg(),a=a.neg());e=b.gcd(a);return e.cmpn(1)?[b.div(e),a.div(e)]:[b,a]}},{"./bn-sign":67,"./num-to-bn":71}],73:[function(a,e,g){var n=a("bn.js");e.exports=function(a){return new n(a)}},{"bn.js":76}],74:[function(a,e,g){var n=a("./lib/rationalize");
e.exports=function(a,b){return n(a[0].mul(b[0]),a[1].mul(b[1]))}},{"./lib/rationalize":72}],75:[function(a,e,g){function n(b){var a=32;(b&=-b)&&a--;b&65535&&(a-=16);b&16711935&&(a-=8);b&252645135&&(a-=4);b&858993459&&(a-=2);b&1431655765&&--a;return a}"use restrict";g.INT_BITS=32;g.INT_MAX=2147483647;g.INT_MIN=-2147483648;g.sign=function(b){return(0<b)-(0>b)};g.abs=function(b){var a=b>>31;return(b^a)-a};g.min=function(b,a){return a^(b^a)&-(b<a)};g.max=function(b,a){return b^(b^a)&-(b<a)};g.isPow2=
function(b){return!(b&b-1)&&!!b};g.log2=function(b){var a,e;a=(65535<b)<<4;b>>>=a;e=(255<b)<<3;b>>>=e;a|=e;e=(15<b)<<2;b>>>=e;a|=e;e=(3<b)<<1;return a|e|b>>>e>>1};g.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};g.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};g.countTrailingZeros=n;g.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;return(b|b>>>
16)+1};g.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};g.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var m=Array(256);(function(b){for(var a=0;256>a;++a){for(var e=a,k=a,m=7,e=e>>>1;e;e>>>=1)k<<=1,k|=e&1,--m;b[a]=k<<m&255}})(m);g.reverse=function(b){return m[b&255]<<24|m[b>>>8&255]<<16|m[b>>>16&255]<<8|m[b>>>24&255]};g.interleave2=function(b,a){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;a&=65535;a=(a|a<<
8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|b<<1)&1431655765|((a|a<<1)&1431655765)<<1};g.deinterleave2=function(b,a){b=b>>>a&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};g.interleave3=function(b,a,e){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b=(b|b<<2)&1227133513|((a|a<<2)&1227133513)<<1;e&=1023;e=(e|e<<16)&4278190335;
e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;return b|((e|e<<2)&1227133513)<<2};g.deinterleave3=function(b,a){b=b>>>a&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};g.nextCombination=function(b){var a=b|b-1;return a+1|(~a&-~a)-1>>>n(b)+1}},{}],76:[function(a,e,g){(function(a,e){function b(f,b){if(!f)throw Error(b||"Assertion failed");}function d(f,b){f.super_=b;var c=function(){};c.prototype=b.prototype;f.prototype=new c;f.prototype.constructor=
f}function g(f,b,c){if(null!==f&&"object"===typeof f&&Array.isArray(f.words))return f;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===b||"be"===b)c=b,b=10;null!==f&&this._init(f||0,b||10,c||"be")}function k(f,b,c){var a=0;for(c=Math.min(f.length,c);b<c;b++)var d=f.charCodeAt(b)-48,a=a<<4,a=49<=d&&54>=d?a|d-49+10:17<=d&&22>=d?a|d-17+10:a|d&15;return a}function y(f,b,c,a){var d=0;for(c=Math.min(f.length,c);b<c;b++)var h=f.charCodeAt(b)-48,d=d*a,d=49<=h?d+(h-49+10):17<=h?d+(h-17+10):
d+h;return d}function r(f,b){this.name=f;this.p=new g(b,16);this.n=this.p.bitLength();this.k=(new g(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function t(){r.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){r.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){r.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){r.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function h(f){"string"===typeof f?(f=g._prime(f),this.m=f.p,this.prime=f):(this.m=f,this.prime=null)}function c(f){h.call(this,f);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new g(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=g:e.BN=g;g.BN=g;g.wordSize=26;g.prototype._init=function(f,
c,a){if("number"===typeof f)return this._initNumber(f,c,a);if("object"===typeof f)return this._initArray(f,c,a);"hex"===c&&(c=16);b(c===(c|0)&&2<=c&&36>=c);f=f.toString().replace(/\s+/g,"");var d=0;"-"===f[0]&&d++;16===c?this._parseHex(f,d):this._parseBase(f,c,d);"-"===f[0]&&(this.sign=!0);this.strip();"le"===a&&this._initArray(this.toArray(),c,a)};g.prototype._initNumber=function(f,c,a){0>f&&(this.sign=!0,f=-f);67108864>f?(this.words=[f&67108863],this.length=1):4503599627370496>f?(this.words=[f&
67108863,f/67108864&67108863],this.length=2):(b(9007199254740992>f),this.words=[f&67108863,f/67108864&67108863,1],this.length=3);"le"===a&&this._initArray(this.toArray(),c,a)};g.prototype._initArray=function(f,c,a){b("number"===typeof f.length);if(0>=f.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var d=0;if("be"===a)for(c=f.length-1,a=0;0<=c;c-=3){var h=f[c]|f[c-1]<<8|f[c-2]<<16;this.words[a]|=
h<<d&67108863;this.words[a+1]=h>>>26-d&67108863;d+=24;26<=d&&(d-=26,a++)}else if("le"===a)for(a=c=0;c<f.length;c+=3)h=f[c]|f[c+1]<<8|f[c+2]<<16,this.words[a]|=h<<d&67108863,this.words[a+1]=h>>>26-d&67108863,d+=24,26<=d&&(d-=26,a++);return this.strip()};g.prototype._parseHex=function(f,b){this.length=Math.ceil((f.length-b)/6);this.words=Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var a=0,c=f.length-6,d=0;c>=b;c-=6){var h=k(f,c,c+6);this.words[d]|=h<<a&67108863;this.words[d+
1]|=h>>>26-a&4194303;a+=24;26<=a&&(a-=26,d++)}c+6!==b&&(h=k(f,b,c+6),this.words[d]|=h<<a&67108863,this.words[d+1]|=h>>>26-a&4194303);this.strip()};g.prototype._parseBase=function(f,b,c){this.words=[0];this.length=1;for(var a=0,d=1;67108863>=d;d*=b)a++;a--;for(var d=d/b|0,h=f.length-c,l=h%a,k=Math.min(h,h-l)+c,h=0;c<k;c+=a)h=y(f,c,c+a,b),this.imuln(d),67108864>this.words[0]+h?this.words[0]+=h:this._iaddn(h);if(0!==l){a=1;h=y(f,c,f.length,b);for(c=0;c<l;c++)a*=b;this.imuln(a);67108864>this.words[0]+
h?this.words[0]+=h:this._iaddn(h)}};g.prototype.copy=function(f){f.words=Array(this.length);for(var b=0;b<this.length;b++)f.words[b]=this.words[b];f.length=this.length;f.sign=this.sign;f.red=this.red};g.prototype.clone=function(){var f=new g(null);this.copy(f);return f};g.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};g.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};g.prototype.inspect=
function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,
5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];g.prototype.toString=function(f,c){f=f||10;if(16===f||"hex"===f){var a="",d=0;c=c|0||1;for(var h=0,l=0;l<this.length;l++){var k=this.words[l],e=((k<<d|h)&16777215).toString(16),
h=k>>>24-d&16777215,a=0!==h||l!==this.length-1?p[6-e.length]+e+a:e+a,d=d+2;26<=d&&(d-=26,l--)}for(0!==h&&(a=h.toString(16)+a);0!==a.length%c;)a="0"+a;this.sign&&(a="-"+a);return a}if(f===(f|0)&&2<=f&&36>=f){d=v[f];h=z[f];a="";l=this.clone();for(l.sign=!1;0!==l.cmpn(0);)k=l.modn(h).toString(f),l=l.idivn(h),a=0!==l.cmpn(0)?p[d-k.length]+k+a:k+a;0===this.cmpn(0)&&(a="0"+a);this.sign&&(a="-"+a);return a}b(!1,"Base should be between 2 and 36")};g.prototype.toJSON=function(){return this.toString(16)};g.prototype.toArray=
function(f){this.strip();var b=Array(this.byteLength());b[0]=0;var c=this.clone();if("le"!==f)for(f=0;0!==c.cmpn(0);f++){var a=c.andln(255);c.ishrn(8);b[b.length-f-1]=a}else for(f=0;0!==c.cmpn(0);f++)a=c.andln(255),c.ishrn(8),b[f]=a;return b};g.prototype._countBits=Math.clz32?function(f){return 32-Math.clz32(f)}:function(f){var b=0;4096<=f&&(b+=13,f>>>=13);64<=f&&(b+=7,f>>>=7);8<=f&&(b+=4,f>>>=4);2<=f&&(b+=2,f>>>=2);return b+f};g.prototype._zeroBits=function(f){if(0===f)return 26;var b=0;0===(f&8191)&&
(b+=13,f>>>=13);0===(f&127)&&(b+=7,f>>>=7);0===(f&15)&&(b+=4,f>>>=4);0===(f&3)&&(b+=2,f>>>=2);0===(f&1)&&b++;return b};g.prototype.bitLength=function(){var f=0,f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f};g.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var f=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]),f=f+c;if(26!==c)break}return f};g.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};g.prototype.neg=function(){if(0===
this.cmpn(0))return this.clone();var f=this.clone();f.sign=!this.sign;return f};g.prototype.ior=function(f){for(this.sign=this.sign||f.sign;this.length<f.length;)this.words[this.length++]=0;for(var b=0;b<f.length;b++)this.words[b]|=f.words[b];return this.strip()};g.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)};g.prototype.iand=function(f){this.sign=this.sign&&f.sign;var b;b=this.length>f.length?f:this;for(var c=0;c<b.length;c++)this.words[c]&=f.words[c];
this.length=b.length;return this.strip()};g.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)};g.prototype.ixor=function(f){this.sign=this.sign||f.sign;var b;this.length>f.length?b=this:(b=f,f=this);for(var c=0;c<f.length;c++)this.words[c]=b.words[c]^f.words[c];if(this!==b)for(;c<b.length;c++)this.words[c]=b.words[c];this.length=b.length;return this.strip()};g.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};
g.prototype.setn=function(f,c){b("number"===typeof f&&0<=f);for(var a=f/26|0,d=f%26;this.length<=a;)this.words[this.length++]=0;this.words[a]=c?this.words[a]|1<<d:this.words[a]&~(1<<d);return this.strip()};g.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var a;this.length>b.length?a=this:(a=b,b=this);for(var d=c=0;d<b.length;d++)c=a.words[d]+
b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<a.length;d++)c=a.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=a.length;if(0!==c)this.words[this.length]=c,this.length++;else if(a!==this)for(;d<a.length;d++)this.words[d]=a.words[d];return this};g.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};g.prototype.isub=
function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var a;0<c?a=this:(a=b,b=this);for(var d=0,h=0;h<b.length;h++)c=a.words[h]-b.words[h]+d,d=c>>26,this.words[h]=c&67108863;for(;0!==d&&h<a.length;h++)c=a.words[h]+d,d=c>>26,this.words[h]=c&67108863;if(0===d&&h<a.length&&a!==this)for(;h<a.length;h++)this.words[h]=a.words[h];
this.length=Math.max(this.length,h);a!==this&&(this.sign=!0);return this.strip()};g.prototype.sub=function(b){return this.clone().isub(b)};g.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0;d<c.length-1;d++){for(var h=a>>>26,a=a&67108863,l=Math.min(d,b.length-1),k=Math.max(0,d-this.length+1);k<=l;k++)var p=(this.words[d-k]|0)*(b.words[k]|0),e=p&67108863,h=h+(p/67108864|0)|0,e=e+a|0,a=e&67108863,h=h+(e>>>26)|0;c.words[d]=a;a=h}0!==a?c.words[d]=
a:c.length--;return c.strip()};g.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0,h=0;h<c.length-1;h++){for(var l=d,d=0,a=a&67108863,k=Math.min(h,b.length-1),p=Math.max(0,h-this.length+1);p<=k;p++)var e=(this.words[h-p]|0)*(b.words[p]|0),g=e&67108863,l=l+(e/67108864|0)|0,g=g+a|0,a=g&67108863,l=l+(g>>>26)|0,d=d+(l>>>26),l=l&67108863;c.words[h]=a;a=l}0!==a?c.words[h]=a:c.length--;return c.strip()};g.prototype.mulTo=function(b,c){return 63>this.length+
b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};g.prototype.mul=function(b){var c=new g(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};g.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,a=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var h=0,l=0,k=Math.min(d,a-1),p=Math.max(0,d-c+1);p<=k;p++)var e=d-p,e=this.words[e]*b.words[p],
g=e&67108863,h=h+(e/67108864|0),g=g+l,l=g&67108863,h=h+(g>>>26);this.words[d]=l;this.words[d+1]+=h}h=0;for(e=1;e<this.length;e++)b=this.words[e]+h,this.words[e]=b&67108863,h=b>>>26;return this.strip()};g.prototype.imuln=function(c){b("number"===typeof c);for(var a=0,d=0;d<this.length;d++){var h=this.words[d]*c,l=(h&67108863)+(a&67108863),a=a>>26,a=a+(h/67108864|0),a=a+(l>>>26);this.words[d]=l&67108863}0!==a&&(this.words[d]=a,this.length++);return this};g.prototype.muln=function(b){return this.clone().imuln(b)};
g.prototype.sqr=function(){return this.mul(this)};g.prototype.isqr=function(){return this.mul(this)};g.prototype.ishln=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;var d=67108863>>>26-a<<26-a;if(0!==a){for(var h=0,l=0;l<this.length;l++){var k=this.words[l]&d;this.words[l]=this.words[l]-k<<a|h;h=k>>>26-a}h&&(this.words[l]=h,this.length++)}if(0!==c){for(l=this.length-1;0<=l;l--)this.words[l+c]=this.words[l];for(l=0;l<c;l++)this.words[l]=0;this.length+=c}return this.strip()};g.prototype.ishrn=
function(c,a,d){b("number"===typeof c&&0<=c);var h=c%26,l=Math.min((c-h)/26,this.length);c=67108863^67108863>>>h<<h;a=(a?(a-a%26)/26:0)-l;a=Math.max(0,a);if(d){for(var k=0;k<l;k++)d.words[k]=this.words[k];d.length=l}if(0!==l)if(this.length>l)for(this.length-=l,k=0;k<this.length;k++)this.words[k]=this.words[k+l];else this.words[0]=0,this.length=1;l=0;for(k=this.length-1;0<=k&&(0!==l||k>=a);k--){var p=this.words[k];this.words[k]=l<<26-h|p>>>h;l=p&c}d&&0!==l&&(d.words[d.length++]=l);0===this.length&&
(this.words[0]=0,this.length=1);this.strip();return this};g.prototype.shln=function(b){return this.clone().ishln(b)};g.prototype.shrn=function(b){return this.clone().ishrn(b)};g.prototype.testn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;return this.length<=c?!1:!!(this.words[c]&1<<a)};g.prototype.imaskn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;b(!this.sign,"imaskn works only with positive numbers");0!==a&&c++;this.length=Math.min(c,this.length);0!==a&&(this.words[this.length-
1]&=67108863^67108863>>>a<<a);return this.strip()};g.prototype.maskn=function(b){return this.clone().imaskn(b)};g.prototype.iaddn=function(c){b("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};g.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===
this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};g.prototype.isubn=function(c){b("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};g.prototype.addn=function(b){return this.clone().iaddn(b)};g.prototype.subn=function(b){return this.clone().isubn(b)};g.prototype.iabs=
function(){this.sign=!1;return this};g.prototype.abs=function(){return this.clone().iabs()};g.prototype._ishlnsubmul=function(c,a,d){var h=c.length+d,l;if(this.words.length<h){var k=Array(h);for(l=0;l<this.length;l++)k[l]=this.words[l];this.words=k}else l=this.length;for(this.length=Math.max(this.length,h);l<this.length;l++)this.words[l]=0;for(l=k=0;l<c.length;l++)h=this.words[l+d]+k,k=c.words[l]*a,h-=k&67108863,k=(h>>26)-(k/67108864|0),this.words[l+d]=h&67108863;for(;l<this.length-d;l++)h=this.words[l+
d]+k,k=h>>26,this.words[l+d]=h&67108863;if(0===k)return this.strip();b(-1===k);for(l=k=0;l<this.length;l++)h=-this.words[l]+k,k=h>>26,this.words[l]=h&67108863;this.sign=!0;return this.strip()};g.prototype._wordDiv=function(b,c){var a=this.length-b.length,d=this.clone(),h=b,l=h.words[h.length-1],a=26-this._countBits(l);0!==a&&(h=h.shln(a),d.ishln(a),l=h.words[h.length-1]);var k=d.length-h.length,p;if("mod"!==c){p=new g(null);p.length=k+1;p.words=Array(p.length);for(var e=0;e<p.length;e++)p.words[e]=
0}e=d.clone()._ishlnsubmul(h,1,k);e.sign||(d=e,p&&(p.words[k]=1));for(--k;0<=k;k--){e=67108864*d.words[h.length+k]+d.words[h.length+k-1];e=Math.min(e/l|0,67108863);for(d._ishlnsubmul(h,e,k);d.sign;)e--,d.sign=!1,d._ishlnsubmul(h,1,k),0!==d.cmpn(0)&&(d.sign=!d.sign);p&&(p.words[k]=e)}p&&p.strip();d.strip();"div"!==c&&0!==a&&d.ishrn(a);return{div:p?p:null,mod:d}};g.prototype.divmod=function(c,a){b(0!==c.cmpn(0));if(this.sign&&!c.sign){var d=this.neg().divmod(c,a),h,l;"mod"!==a&&(h=d.div.neg());"div"!==
a&&(l=0===d.mod.cmpn(0)?d.mod:c.sub(d.mod));return{div:h,mod:l}}return!this.sign&&c.sign?(d=this.divmod(c.neg(),a),"mod"!==a&&(h=d.div.neg()),{div:h,mod:d.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),a):c.length>this.length||0>this.cmp(c)?{div:new g(0),mod:this}:1===c.length?"div"===a?{div:this.divn(c.words[0]),mod:null}:"mod"===a?{div:null,mod:new g(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new g(this.modn(c.words[0]))}:this._wordDiv(c,a)};g.prototype.div=function(b){return this.divmod(b,
"div").div};g.prototype.mod=function(b){return this.divmod(b,"mod").mod};g.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var a=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);a=a.cmp(d);return 0>a||1===b&&0===a?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};g.prototype.modn=function(c){b(67108863>=c);for(var a=67108864%c,d=0,h=this.length-1;0<=h;h--)d=(a*d+this.words[h])%c;return d};g.prototype.idivn=function(c){b(67108863>=c);for(var a=0,d=this.length-
1;0<=d;d--)a=this.words[d]+67108864*a,this.words[d]=a/c|0,a%=c;return this.strip()};g.prototype.divn=function(b){return this.clone().idivn(b)};g.prototype.egcd=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new g(1);for(var h=new g(0),l=new g(0),k=new g(1),p=0;a.isEven()&&d.isEven();)a.ishrn(1),d.ishrn(1),++p;for(var e=d.clone(),v=a.clone();0!==a.cmpn(0);){for(;a.isEven();)a.ishrn(1),c.isEven()&&h.isEven()?(c.ishrn(1),h.ishrn(1)):(c.iadd(e).ishrn(1),h.isub(v).ishrn(1));
for(;d.isEven();)d.ishrn(1),l.isEven()&&k.isEven()?(l.ishrn(1),k.ishrn(1)):(l.iadd(e).ishrn(1),k.isub(v).ishrn(1));0<=a.cmp(d)?(a.isub(d),c.isub(l),h.isub(k)):(d.isub(a),l.isub(c),k.isub(h))}return{a:l,b:k,gcd:d.ishln(p)}};g.prototype._invmp=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new g(1);for(var h=new g(0),l=d.clone();0<a.cmpn(1)&&0<d.cmpn(1);){for(;a.isEven();)a.ishrn(1),c.isEven()?c.ishrn(1):c.iadd(l).ishrn(1);for(;d.isEven();)d.ishrn(1),h.isEven()?
h.ishrn(1):h.iadd(l).ishrn(1);0<=a.cmp(d)?(a.isub(d),c.isub(h)):(d.isub(a),h.isub(c))}return 0===a.cmpn(1)?c:h};g.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var a=0;c.isEven()&&b.isEven();a++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(a)};g.prototype.invm=
function(b){return this.egcd(b).a.mod(b)};g.prototype.isEven=function(){return 0===(this.words[0]&1)};g.prototype.isOdd=function(){return 1===(this.words[0]&1)};g.prototype.andln=function(b){return this.words[0]&b};g.prototype.bincn=function(c){b("number"===typeof c);var a=c%26;c=(c-a)/26;var d=1<<a;if(this.length<=c){for(a=this.length;a<c+1;a++)this.words[a]=0;this.words[c]|=d;this.length=c+1;return this}for(a=c;0!==d&&a<this.length;a++)c=this.words[a],c+=d,d=c>>>26,c&=67108863,this.words[a]=c;0!==
d&&(this.words[a]=d,this.length++);return this};g.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};g.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};g.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var c=0,a=this.length-
1;0<=a;a--){var d=this.words[a],h=b.words[a];if(d!==h){d<h?c=-1:d>h&&(c=1);break}}return c};g.red=function(b){return new h(b)};g.prototype.toRed=function(c){b(!this.red,"Already a number in reduction context");b(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};g.prototype.fromRed=function(){b(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};g.prototype._forceRed=function(b){this.red=b;return this};g.prototype.forceRed=
function(c){b(!this.red,"Already a number in reduction context");return this._forceRed(c)};g.prototype.redAdd=function(c){b(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};g.prototype.redIAdd=function(c){b(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};g.prototype.redSub=function(c){b(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};g.prototype.redISub=function(c){b(this.red,"redISub works only with red numbers");
return this.red.isub(this,c)};g.prototype.redShl=function(c){b(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};g.prototype.redMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};g.prototype.redIMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};g.prototype.redSqr=function(){b(this.red,"redSqr works only with red numbers");this.red._verify1(this);
return this.red.sqr(this)};g.prototype.redISqr=function(){b(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};g.prototype.redSqrt=function(){b(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};g.prototype.redInvm=function(){b(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};g.prototype.redNeg=function(){b(this.red,"redNeg works only with red numbers");
this.red._verify1(this);return this.red.neg(this)};g.prototype.redPow=function(c){b(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};r.prototype._tmp=function(){var c=new g(null);c.words=Array(Math.ceil(this.n/13));return c};r.prototype.ireduce=function(c){var b;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);b=b<this.n?-1:c.ucmp(this.p);0===b?(c.words[0]=0,c.length=
1):0<b?c.isub(this.p):c.strip();return c};r.prototype.split=function(c,b){c.ishrn(this.n,0,b)};r.prototype.imulK=function(c){return c.imul(this.k)};d(t,r);t.prototype.split=function(c,b){for(var a=Math.min(c.length,9),d=0;d<a;d++)b.words[d]=c.words[d];b.length=a;if(9>=c.length)c.words[0]=0,c.length=1;else{a=c.words[9];b.words[b.length++]=a&4194303;for(d=10;d<c.length;d++){var h=c.words[d];c.words[d-10]=(h&4194303)<<4|a>>>22;a=h}c.words[d-10]=a>>>22;c.length-=9}};t.prototype.imulK=function(c){c.words[c.length]=
0;c.words[c.length+1]=0;c.length+=2;for(var b,a=0,d=0;d<c.length;d++){var h=c.words[d];b=64*h;a+=977*h;b+=a/67108864|0;a&=67108863;c.words[d]=a;a=b}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};d(u,r);d(q,r);d(l,r);l.prototype.imulK=function(c){for(var b=0,a=0;a<c.length;a++){var b=19*c.words[a]+b,d=b&67108863,b=b>>>26;c.words[a]=d}0!==b&&(c.words[c.length++]=b);return c};g._prime=function(c){if(B[c])return B[c];var b;if("k256"===c)b=new t;else if("p224"===c)b=
new u;else if("p192"===c)b=new q;else if("p25519"===c)b=new l;else throw Error("Unknown prime "+c);return B[c]=b};h.prototype._verify1=function(c){b(!c.sign,"red works only with positives");b(c.red,"red works only with red numbers")};h.prototype._verify2=function(c,a){b(!c.sign&&!a.sign,"red works only with positives");b(c.red&&c.red===a.red,"red works only with red numbers")};h.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.mod(this.m)._forceRed(this)};h.prototype.neg=
function(c){c=c.clone();c.sign=!c.sign;return c.iadd(this.m)._forceRed(this)};h.prototype.add=function(c,b){this._verify2(c,b);var a=c.add(b);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};h.prototype.iadd=function(c,b){this._verify2(c,b);var a=c.iadd(b);0<=a.cmp(this.m)&&a.isub(this.m);return a};h.prototype.sub=function(c,b){this._verify2(c,b);var a=c.sub(b);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};h.prototype.isub=function(c,b){this._verify2(c,b);var a=c.isub(b);0>a.cmpn(0)&&
a.iadd(this.m);return a};h.prototype.shl=function(c,b){this._verify1(c);return this.imod(c.shln(b))};h.prototype.imul=function(c,b){this._verify2(c,b);return this.imod(c.imul(b))};h.prototype.mul=function(c,b){this._verify2(c,b);return this.imod(c.mul(b))};h.prototype.isqr=function(c){return this.imul(c,c)};h.prototype.sqr=function(c){return this.mul(c,c)};h.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var a=this.m.andln(3);b(1===a%2);if(3===a){var a=this.m.add(new g(1)).ishrn(2),
d=this.pow(c,a);return d}for(var h=this.m.subn(1),l=0;0!==h.cmpn(0)&&0===h.andln(1);)l++,h.ishrn(1);b(0!==h.cmpn(0));for(var a=(new g(1)).toRed(this),d=a.redNeg(),k=this.m.subn(1).ishrn(1),p=this.m.bitLength(),p=(new g(2*p*p)).toRed(this);0!==this.pow(p,k).cmp(d);)p.redIAdd(d);k=this.pow(p,h);d=this.pow(c,h.addn(1).ishrn(1));c=this.pow(c,h);for(h=l;0!==c.cmp(a);){p=c;for(l=0;0!==p.cmp(a);l++)p=p.redSqr();b(l<h);k=this.pow(k,(new g(1)).ishln(h-l-1));d=d.redMul(k);k=k.redSqr();c=c.redMul(k);h=l}return d};
h.prototype.invm=function(c){c=c._invmp(this.m);return c.sign?(c.sign=!1,this.imod(c).redNeg()):this.imod(c)};h.prototype.pow=function(c,b){var a=[];if(0===b.cmpn(0))return new g(1);for(var d=b.clone();0!==d.cmpn(0);)a.push(d.andln(1)),d.ishrn(1);for(var h=c,l=0;l<a.length&&0===a[l];l++,h=this.sqr(h));if(++l<a.length)for(d=this.sqr(h);l<a.length;l++,d=this.sqr(d))0!==a[l]&&(h=this.mul(h,d));return h};h.prototype.convertTo=function(c){var b=c.mod(this.m);return b===c?b.clone():b};h.prototype.convertFrom=
function(c){c=c.clone();c.red=null;return c};g.mont=function(b){return new c(b)};d(c,h);c.prototype.convertTo=function(c){return this.imod(c.shln(this.shift))};c.prototype.convertFrom=function(c){c=this.imod(c.mul(this.rinv));c.red=null;return c};c.prototype.imul=function(c,b){if(0===c.cmpn(0)||0===b.cmpn(0))return c.words[0]=0,c.length=1,c;var a=c.imul(b),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&
(d=a.iadd(this.m));return d._forceRed(this)};c.prototype.mul=function(c,b){if(0===c.cmpn(0)||0===b.cmpn(0))return(new g(0))._forceRed(this);var a=c.mul(b),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&(d=a.iadd(this.m));return d._forceRed(this)};c.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof e||e,this)},{}],77:[function(a,e,g){(function(a){var g=
!1;if("undefined"!==typeof Float64Array){var b=new Float64Array(1),d=new Uint32Array(b.buffer);b[0]=1;g=!0;1072693248===d[1]?(e.exports=function(a){b[0]=a;return[d[0],d[1]]},e.exports.pack=function(a,e){d[0]=a;d[1]=e;return b[0]},e.exports.lo=function(a){b[0]=a;return d[0]},e.exports.hi=function(a){b[0]=a;return d[1]}):1072693248===d[0]?(e.exports=function(a){b[0]=a;return[d[1],d[0]]},e.exports.pack=function(a,e){d[1]=a;d[0]=e;return b[0]},e.exports.lo=function(a){b[0]=a;return d[1]},e.exports.hi=
function(a){b[0]=a;return d[0]}):g=!1}if(!g){var w=new a(8);e.exports=function(b){w.writeDoubleLE(b,0,!0);return[w.readUInt32LE(0,!0),w.readUInt32LE(4,!0)]};e.exports.pack=function(b,a){w.writeUInt32LE(b,0,!0);w.writeUInt32LE(a,4,!0);return w.readDoubleLE(0,!0)};e.exports.lo=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(0,!0)};e.exports.hi=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(4,!0)}}e.exports.sign=function(b){return e.exports.hi(b)>>>31};e.exports.exponent=function(b){return(e.exports.hi(b)<<
1>>>21)-1023};e.exports.fraction=function(b){var a=e.exports.lo(b);b=e.exports.hi(b);var d=b&1048575;b&2146435072&&(d+=1048576);return[a,d]};e.exports.denormalized=function(b){return!(e.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:33}],78:[function(a,e,g){var n=a("./lib/bn-sign");e.exports=function(a){return n(a[0])*n(a[1])}},{"./lib/bn-sign":67}],79:[function(a,e,g){var n=a("./lib/rationalize");e.exports=function(a,b){return n(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}},
{"./lib/rationalize":72}],80:[function(a,e,g){var n=a("./lib/bn-to-num"),m=a("./lib/ctz");e.exports=function(b){var a=b[0];b=b[1];if(0===a.cmpn(0))return 0;var e=a.divmod(b),a=n(e.div),e=e.mod;if(0===e.cmpn(0))return a;if(a){var k=m(a)+4;b=n(e.shln(k).divRound(b));0>a&&(b=-b);return a+b*Math.pow(2,-k)}a=b.bitLength()-e.bitLength()+53;b=n(e.shln(a).divRound(b));if(1023>a)return b*Math.pow(2,-a);b*=Math.pow(2,-1023);return b*Math.pow(2,1023-a)}},{"./lib/bn-to-num":68,"./lib/ctz":69}],81:[function(a,
e,g){function n(b,a,d,k){for(var l=0,h=0,c=0,p=b.length;c<p;++c){var e=b[c],g;a:{for(g=0;g<a;++g)if(!(e[g]<=e[g+a])){g=!0;break a}g=!1}if(!g){for(g=0;g<2*a;++g)d[l++]=e[g];k[h++]=c}}return h}function m(b,a,e,g){var l=b.length,h=a.length;if(!(0>=l||0>=h)){var c=b[0].length>>>1;if(!(0>=c)){var p,v=d.mallocDouble(2*c*l),m=d.mallocInt32(l),l=n(b,c,v,m);if(0<l){if(1===c&&g)w.init(l),p=w.sweepComplete(c,e,0,l,v,m,0,l,v,m);else{b=d.mallocDouble(2*c*h);var y=d.mallocInt32(h),h=n(a,c,b,y);0<h&&(w.init(l+h),
p=1===c?w.sweepBipartite(c,e,0,l,v,m,0,h,b,y):k(c,e,g,l,v,m,h,b,y),d.free(b),d.free(y))}d.free(v);d.free(m)}return p}}}function b(b,a){y.push([b,a])}e.exports=function(a,d,k){switch(arguments.length){case 1:return y=[],m(a,a,b,!0),y;case 2:if("function"===typeof d)return m(a,a,d,!0);y=[];m(a,d,b,!1);return y;case 3:return m(a,d,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var d=a("typedarray-pool"),w=a("./lib/sweep"),k=a("./lib/intersect"),y},{"./lib/intersect":83,"./lib/sweep":87,
"typedarray-pool":90}],82:[function(a,e,g){function n(b){function a(d,e){var g,l="bruteForce"+(d?"Red":"Blue")+(e?"Flip":"")+(b?"Full":"");g=["function ",l,"(",m.join(),"){","var ","es","=2*","d",";"];var h="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(b?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";d?g.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",h):g.push(h,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
b?g.push("if(y1<x0||x1<y0)continue;"):e?g.push("if(y0<=x0||x1<y0)continue;"):g.push("if(y0<x0||x1<y0)continue;");g.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");e?g.push("yi,xi"):g.push("xi,yi");g.push(");if(rv!==void 0)return rv;}}}");g=g.join("");k.push(g);n.push("return "+l+"("+m.join()+");")}var e="bruteForce"+(b?"Full":"Partial"),k=[],g=m.slice();b||g.splice(3,0,"fp");var n=["function "+e+"("+g.join()+"){"];n.push("if(re-rs>be-bs){");
b?(a(!0,!1),n.push("}else{"),a(!1,!1)):(n.push("if(fp){"),a(!0,!0),n.push("}else{"),a(!0,!1),n.push("}}else{if(fp){"),a(!1,!0),n.push("}else{"),a(!1,!1),n.push("}"));n.push("}}return "+e);e=k.join("")+n.join("");return(new Function(e))()}var m="d ax vv rs re rb ri bs be bb bi".split(" ");g.partial=n(!1);g.full=n(!0)},{}],83:[function(a,e,g){function n(c,b,a,d,h,l,k,p,e){var g=z*c;f[g]=b;f[g+1]=a;f[g+2]=d;f[g+3]=h;f[g+4]=l;f[g+5]=k;c*=B;x[c]=p;x[c+1]=e}e.exports=function(a,e,g,E,H,G,F,I,O){var N=8*
b.log2(E+F+1)*(a+1)|0,T=b.nextPow2(z*N);f.length<T&&(m.free(f),f=m.mallocInt32(T));N=b.nextPow2(B*N);x<N&&(m.free(x),x=m.mallocDouble(N));var N=0,T=2*a,K;n(N++,0,0,E,0,F,g?16:0,-Infinity,Infinity);for(g||n(N++,0,0,F,0,E,1,-Infinity,Infinity);0<N;){--N;g=N*z;var M=f[g];F=f[g+1];var R=f[g+2],S=f[g+3],aa=f[g+4];g=f[g+5];E=N*B;var fa=x[E],ga=x[E+1],Z=g&1,W=!!(g&16),L=H,P=G,U=I;E=O;Z&&(L=I,P=O,U=H,E=G);if(g&2&&(R=h(a,M,F,R,L,P,ga),F>=R))continue;if(g&4&&(F=c(a,M,F,R,L,P,fa),F>=R))continue;g=R-F;var J=
aa-S;if(W){if(a*g*(g+J)<u){K=k.scanComplete(a,M,e,F,R,L,P,S,aa,U,E);if(void 0!==K)return K;continue}}else if(a*Math.min(g,J)<r){K=d(a,M,e,Z,F,R,L,P,S,aa,U,E);if(void 0!==K)return K;continue}else if(a*g*J<t){K=k.scanBipartite(a,M,e,Z,F,R,L,P,S,aa,U,E);if(void 0!==K)return K;continue}g=q(a,M,F,R,L,P,fa,ga);if(F<g)if(a*(g-F)<r){if(K=w(a,M+1,e,F,g,L,P,S,aa,U,E),void 0!==K)return K}else if(M===a-2){if(K=Z?k.sweepBipartite(a,e,S,aa,U,E,F,g,L,P):k.sweepBipartite(a,e,F,g,L,P,S,aa,U,E),void 0!==K)return K}else n(N++,
M+1,F,g,S,aa,Z,-Infinity,Infinity),n(N++,M+1,S,aa,F,g,Z^1,-Infinity,Infinity);if(g<R)if(F=y(a,M,S,aa,U,E),K=U[T*F+M],J=l(a,M,F,aa,U,E,K),J<aa&&n(N++,M,g,R,J,aa,(Z|4)+(W?16:0),K,ga),S<F&&n(N++,M,g,R,S,F,(Z|2)+(W?16:0),fa,K),F+1===J){if(W)a:{S=a;aa=e;E=E[F];Z=2*S;F*=Z;fa=U[F+M];ga=g;g*=Z;b:for(;ga<R;++ga,g+=Z)if(W=P[ga],W!==E&&(J=L[g+M],K=L[g+M+S],!(fa<J||K<fa))){for(var ca=M+1;ca<S;++ca){J=L[g+ca];K=L[g+ca+S];var da=U[F+ca+S];if(K<U[F+ca]||da<J)continue b}W=aa(W,E);if(void 0!==W){K=W;break a}}K=void 0}else a:{S=
a;aa=e;E=E[F];fa=2*S;F*=fa;ga=U[F+M];W=g;g*=fa;b:for(;W<R;++W,g+=fa)if(J=L[g+M],K=L[g+M+S],!(ga<J||K<ga||Z&&ga===J)){ca=P[W];for(da=M+1;da<S;++da){J=L[g+da];K=L[g+da+S];var ma=U[F+da+S];if(K<U[F+da]||ma<J)continue b}J=Z?aa(E,ca):aa(ca,E);if(void 0!==J){K=J;break a}}K=void 0}if(void 0!==K)return K}else if(F<J)if(W){if(R=p(a,M,g,R,L,P,K),g<R)if(S=l(a,M,g,R,L,P,K),M===a-2){if(g<S&&(K=k.sweepComplete(a,e,g,S,L,P,F,J,U,E),void 0!==K)||S<R&&(K=k.sweepBipartite(a,e,S,R,L,P,F,J,U,E),void 0!==K))return K}else g<
S&&n(N++,M+1,g,S,F,J,16,-Infinity,Infinity),S<R&&(n(N++,M+1,S,R,F,J,0,-Infinity,Infinity),n(N++,M+1,F,J,S,R,1,-Infinity,Infinity))}else R=Z?v(a,M,g,R,L,P,K):p(a,M,g,R,L,P,K),g<R&&(M===a-2?Z?k.sweepBipartite(a,e,F,J,U,E,g,R,L,P):k.sweepBipartite(a,e,g,R,L,P,F,J,U,E):(n(N++,M+1,g,R,F,J,Z,-Infinity,Infinity),n(N++,M+1,F,J,g,R,Z^1,-Infinity,Infinity)))}};var m=a("typedarray-pool"),b=a("bit-twiddle");e=a("./brute");var d=e.partial,w=e.full,k=a("./sweep"),y=a("./median");a=a("./partition");var r=128,t=
4194304,u=4194304,q=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),l=a("lo===p0",["p0"]),h=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),p=a("lo<=p0&&p0<=hi",["p0"]),v=a("lo<p0&&p0<=hi",["p0"]),z=6,B=2,f=m.mallocInt32(1024),x=m.mallocDouble(1024)},{"./brute":82,"./median":84,"./partition":85,"./sweep":87,"bit-twiddle":88,"typedarray-pool":90}],84:[function(a,e,g){e.exports=function(b,a,e,k,g,r){if(k<=e+1)return e;var t=e,u=k;k=k+e>>>1;for(var q=2*b,l=k,h=g[q*k+a];t<u;){if(u-t<m){for(var l=a,h=g,c=r,p=2*b,v=p*(t+
1)+l,z=t+1;z<u;++z,v+=p)for(var B=h[v],f=z,x=p*(z-1);f>t&&h[x+l]>B;--f,x-=p){for(var D=x,A=x+p,C=0;C<p;++C,++D,++A){var E=h[D];h[D]=h[A];h[A]=E}D=c[f];c[f]=c[f-1];c[f-1]=D}break}v=u-t;l=Math.random()*v+t|0;h=g[q*l+a];p=Math.random()*v+t|0;c=g[q*p+a];z=Math.random()*v+t|0;v=g[q*z+a];h<=c?v>=c?(l=p,h=c):h>=v||(l=z,h=v):c>=v?(l=p,h=c):v>=h||(l=z,h=v);c=q*(u-1);p=q*l;for(v=0;v<q;++v,++c,++p)z=g[c],g[c]=g[p],g[p]=z;c=r[u-1];r[u-1]=r[l];r[l]=c;l=n(b,a,t,u-1,g,r,h);c=q*(u-1);p=q*l;for(v=0;v<q;++v,++c,++p)z=
g[c],g[c]=g[p],g[p]=z;c=r[u-1];r[u-1]=r[l];r[l]=c;if(k<l){for(u=l-1;t<u&&g[q*(u-1)+a]===h;)--u;u+=1}else if(l<k)for(t=l+1;t<u&&g[q*t+a]===h;)t+=1;else break}return n(b,a,e,k,g,r,g[q*k+a])};var n=a("./partition")("lo<p0",["p0"]),m=8},{"./partition":85}],85:[function(a,e,g){e.exports=function(a,b){var d="abcdef".split("").concat(b),e=[];0<=a.indexOf("lo")&&e.push("lo=e[k+n]");0<=a.indexOf("hi")&&e.push("hi=e[k+o]");d.push(n.replace("_",e.join()).replace("$",a));return Function.apply(void 0,d)};var n=
"for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],86:[function(a,e,g){function n(b,a,d){for(var l=2*(b+1),h=b+1;h<=a;++h){for(var c=d[l++],k=d[l++],e=h,g=l-2;e-- >b;){var m=d[g-2],f=d[g-1];if(m<c)break;else if(m===c&&f<k)break;d[g]=m;d[g+1]=f;g-=2}d[g]=c;d[g+1]=k}}function m(b,a,d){b*=2;a*=2;var l=d[b],h=d[b+1];d[b]=d[a];d[b+1]=d[a+1];d[a]=l;d[a+1]=h}function b(b,
a,d){b*=2;a*=2;d[b]=d[a];d[b+1]=d[a+1]}function d(b,a,d,l,h){b*=2;a*=2;h[b]=h[a];h[a]=d;h[b+1]=h[a+1];h[a+1]=l}function w(b,a,d){b*=2;a*=2;var l=d[b],h=d[a];return l<h?!1:l===h?d[b+1]>d[a+1]:!0}function k(b,a,d,l){b*=2;var h=l[b];return h<a?!0:h===a?l[b+1]<d:!1}function y(a,g,e){var l=(g-a+1)/6|0,h=a+l,c=g-l,p=a+g>>1,v=p-l,z=p+l,B=h,f=v,x=p,D=z,A=c,l=a+1,C=g-1,E=0;w(B,f,e)&&(E=B,B=f,f=E);w(D,A,e)&&(E=D,D=A,A=E);w(B,x,e)&&(E=B,B=x,x=E);w(f,x,e)&&(E=f,f=x,x=E);w(B,D,e)&&(E=B,B=D,D=E);w(x,D,e)&&(E=x,
x=D,D=E);w(f,A,e)&&(E=f,f=A,A=E);w(f,x,e)&&(E=f,f=x,x=E);w(D,A,e)&&(E=D,D=A,A=E);for(var E=e[2*f],f=e[2*f+1],H=e[2*D],D=e[2*D+1],B=2*B,x=2*x,A=2*A,h=2*h,p=2*p,c=2*c,G=0;2>G;++G){var F=e[x+G],I=e[A+G];e[h+G]=e[B+G];e[p+G]=F;e[c+G]=I}b(v,a,e);b(z,g,e);for(v=l;v<=C;++v)if(k(v,E,f,e))v!==l&&m(v,l,e),++l;else if(!k(v,H,D,e))for(;;)if(k(C,H,D,e)){k(C,E,f,e)?(z=v,c=l,p=C,B=e,z*=2,c*=2,p*=2,h=B[z],x=B[z+1],B[z]=B[c],B[z+1]=B[c+1],B[c]=B[p],B[c+1]=B[p+1],B[p]=h,B[p+1]=x,++l):m(v,C,e);--C;break}else if(--C<
v)break;d(a,l-1,E,f,e);d(g,C+1,H,D,e);l-2-a<=r?n(a,l-2,e):y(a,l-2,e);g-(C+2)<=r?n(C+2,g,e):y(C+2,g,e);C-l<=r?n(l,C,e):y(l,C,e)}e.exports=function(b,a){a<=4*r?n(0,a-1,b):y(0,a-1,b)};var r=32},{}],87:[function(a,e,g){function n(b,c,a,d){d=c[d];a=b[a-1];b[d]=a;c[a]=d}e.exports={init:function(a){a=b.nextPow2(a);k.length<a&&(m.free(k),k=m.mallocInt32(a));y.length<a&&(m.free(y),y=m.mallocInt32(a));r.length<a&&(m.free(r),r=m.mallocInt32(a));t.length<a&&(m.free(t),t=m.mallocInt32(a));u.length<a&&(m.free(u),
u=m.mallocInt32(a));q.length<a&&(m.free(q),q=m.mallocInt32(a));a*=8;l.length<a&&(m.free(l),l=m.mallocDouble(a))},sweepBipartite:function(b,c,a,e,g,m,f,q,u,A){var C=0,E=2*b;--b;for(var H=E-1;a<e;++a){var G=m[a],F=E*a;l[C++]=g[F+b];l[C++]=-(G+1);l[C++]=g[F+H];l[C++]=G}for(a=f;a<q;++a)G=A[a]+w,e=E*a,l[C++]=u[e+b],l[C++]=-G,l[C++]=u[e+H],l[C++]=G;q=C>>>1;d(l,q);for(a=A=u=0;a<q;++a)if(C=l[2*a+1]|0,C>=w)C=C-w|0,n(r,t,A--,C);else if(0<=C)n(k,y,u--,C);else{if(C<=-w){C=-C-w|0;for(E=0;E<u;++E)if(e=c(k[E],C),
void 0!==e)return e;E=t;e=A++;r[e]=C}else{C=-C-1|0;for(E=0;E<A;++E)if(e=c(C,r[E]),void 0!==e)return e;E=y;e=u++;k[e]=C}E[C]=e}},sweepComplete:function(b,c,a,e,g,m,f,w,D,A){var C=0,E=2*b;--b;for(var H=E-1;a<e;++a){var G=m[a]+1<<1,F=E*a;l[C++]=g[F+b];l[C++]=-G;l[C++]=g[F+H];l[C++]=G}for(a=f;a<w;++a)G=A[a]+1<<1,e=E*a,l[C++]=D[e+b],l[C++]=-G|1,l[C++]=D[e+H],l[C++]=G|1;w=C>>>1;d(l,w);for(a=C=A=D=0;a<w;++a)if(E=l[2*a+1]|0,e=E&1,a<w-1&&E>>1===l[2*a+3]>>1&&(e=2,a+=1),0>E){E=-(E>>1)-1;for(g=0;g<C;++g)if(m=
c(u[g],E),void 0!==m)return m;if(0!==e)for(g=0;g<D;++g)if(m=c(k[g],E),void 0!==m)return m;if(1!==e)for(g=0;g<A;++g)if(m=c(r[g],E),void 0!==m)return m;0===e?(e=y,g=D++,k[g]=E,e[E]=g):1===e?(e=t,g=A++,r[g]=E,e[E]=g):2===e&&(e=q,g=C++,u[g]=E,e[E]=g)}else E=(E>>1)-1,0===e?n(k,y,D--,E):1===e?n(r,t,A--,E):2===e&&n(u,q,C--,E)},scanBipartite:function(b,c,a,e,g,m,f,q,u,A,t,r){var H=0,G=2*b,F=c+b,I=1,O=1;for(e?O=w:I=w;g<m;++g){var N=g+I,T=G*g;l[H++]=f[T+c];l[H++]=-N;l[H++]=f[T+F];l[H++]=N}for(g=u;g<A;++g)N=
g+O,m=G*g,l[H++]=t[m+c],l[H++]=-N;A=H>>>1;d(l,A);for(g=H=0;g<A;++g)if(N=l[2*g+1]|0,0>N)if(N=-N,O=!1,N>=w?(O=!e,N-=w):(O=!!e,--N),O)O=y,m=H++,k[m]=N,O[N]=m;else a:for(O=r[N],N*=G,m=t[N+c+1],u=t[N+c+1+b],F=0;F<H;++F){var T=k[F],K=G*T;if(!(u<f[K+c+1]||f[K+c+1+b]<m)){for(var M=c+2;M<b;++M)if(t[N+M+b]<f[K+M]||f[K+M+b]<t[N+M])continue a;T=q[T];T=e?a(O,T):a(T,O);if(void 0!==T)return T}}else n(k,y,H--,N-I)},scanComplete:function(b,c,a,e,g,m,f,q,n,u,t){for(var r=0,y=2*b,G=c+b;e<g;++e){var F=e+w,I=y*e;l[r++]=
m[I+c];l[r++]=-F;l[r++]=m[I+G];l[r++]=F}for(e=q;e<n;++e)F=e+1,g=y*e,l[r++]=u[g+c],l[r++]=-F;n=r>>>1;d(l,n);for(e=r=0;e<n;++e)if(g=l[2*e+1]|0,0>g)if(F=-g,F>=w)k[r++]=F-w;else a:for(--F,g=t[F],F*=y,G=u[F+c+1],I=u[F+c+1+b],q=0;q<r;++q){var O=k[q],N=f[O];if(N===g)break;O*=y;if(!(I<m[O+c+1]||m[O+c+1+b]<G)){for(var T=c+2;T<b;++T)if(u[F+T+b]<m[O+T]||m[O+T+b]<u[F+T])continue a;N=a(N,g);if(void 0!==N)return N}}else{F=g-w;for(q=r-1;0<=q;--q)if(k[q]===F){for(T=q+1;T<r;++T)k[T-1]=k[T];break}--r}}};var m=a("typedarray-pool"),
b=a("bit-twiddle"),d=a("./sort"),w=268435456,k=m.mallocInt32(1024),y=m.mallocInt32(1024),r=m.mallocInt32(1024),t=m.mallocInt32(1024),u=m.mallocInt32(1024),q=m.mallocInt32(1024),l=m.mallocDouble(8192)},{"./sort":86,"bit-twiddle":88,"typedarray-pool":90}],88:[function(a,e,g){arguments[4][75][0].apply(g,arguments)},{dup:75}],89:[function(a,e,g){function n(a,b,d){var e=a[d]|0;if(0>=e)return[];var k=Array(e),g;if(d===a.length-1)for(g=0;g<e;++g)k[g]=b;else for(g=0;g<e;++g)k[g]=n(a,b,d+1);return k}e.exports=
function(a,b){"undefined"===typeof b&&(b=0);switch(typeof a){case "number":if(0<a){var d=a|0,e=b,k,g;k=Array(d);for(g=0;g<d;++g)k[g]=e;return k}break;case "object":if("number"===typeof a.length)return n(a,b,0)}return[]}},{}],90:[function(a,e,g){(function(e,m){function b(b){if(b){var c=v.log2(b.length||b.byteLength);x[c].push(b)}}function d(b){b=v.nextPow2(b);var c=v.log2(b),c=x[c];return 0<c.length?c.pop():new ArrayBuffer(b)}function w(b){return new Uint8Array(d(b),0,b)}function k(b){return new Uint16Array(d(2*
b),0,b)}function y(b){return new Uint32Array(d(4*b),0,b)}function r(b){return new Int8Array(d(b),0,b)}function t(b){return new Int16Array(d(2*b),0,b)}function u(b){return new Int32Array(d(4*b),0,b)}function q(b){return new Float32Array(d(4*b),0,b)}function l(b){return new Float64Array(d(8*b),0,b)}function h(b){return B?new Uint8ClampedArray(d(b),0,b):w(b)}function c(b){return new DataView(d(b),0,b)}function p(b){b=v.nextPow2(b);var c=v.log2(b),c=D[c];return 0<c.length?c.pop():new m(b)}var v=a("bit-twiddle"),
z=a("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,f=e.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=z([32,0]));f.BUFFER||(f.BUFFER=z([32,0]));var x=f.DATA,D=f.BUFFER;g.free=function(b){if(m.isBuffer(b))D[v.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&
(b=b.buffer),b){var c=v.log2(b.length||b.byteLength)|0;x[c].push(b)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=function(c){b(c.buffer)};g.freeArrayBuffer=b;g.freeBuffer=function(b){D[v.log2(b.length)].push(b)};g.malloc=function(b,a){if(void 0===a||"arraybuffer"===a)return d(b);switch(a){case "uint8":return w(b);case "uint16":return k(b);case "uint32":return y(b);case "int8":return r(b);
case "int16":return t(b);case "int32":return u(b);case "float":case "float32":return q(b);case "double":case "float64":return l(b);case "uint8_clamped":return h(b);case "buffer":return p(b);case "data":case "dataview":return c(b);default:return null}};g.mallocArrayBuffer=d;g.mallocUint8=w;g.mallocUint16=k;g.mallocUint32=y;g.mallocInt8=r;g.mallocInt16=t;g.mallocInt32=u;g.mallocFloat32=g.mallocFloat=q;g.mallocFloat64=g.mallocDouble=l;g.mallocUint8Clamped=h;g.mallocDataView=c;g.mallocBuffer=p;g.clearCache=
function(){for(var b=0;32>b;++b)f.UINT8[b].length=0,f.UINT16[b].length=0,f.UINT32[b].length=0,f.INT8[b].length=0,f.INT16[b].length=0,f.INT32[b].length=0,f.FLOAT[b].length=0,f.DOUBLE[b].length=0,f.UINT8C[b].length=0,x[b].length=0,D[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":88,buffer:33,dup:89}],91:[function(a,e,g){function n(b,a){return b-a}e.exports=function(b,a){var e=b.length,
k=b.length-a.length;if(k)return k;switch(e){case 0:return 0;case 1:return b[0]-a[0];case 2:return b[0]+b[1]-a[0]-a[1]||m(b[0],b[1])-m(a[0],a[1]);case 3:var e=b[0]+b[1],g=a[0]+a[1];if(k=e+b[2]-(g+a[2]))return k;var k=m(b[0],b[1]),r=m(a[0],a[1]);return m(k,b[2])-m(r,a[2])||m(k+b[2],e)-m(r+a[2],g);case 4:var k=b[0],e=b[1],g=b[2],r=b[3],t=a[0],u=a[1],q=a[2],l=a[3];return k+e+g+r-(t+u+q+l)||m(k,e,g,r)-m(t,u,q,l,t)||m(k+e,k+g,k+r,e+g,e+r,g+r)-m(t+u,t+q,t+l,u+q,u+l,q+l)||m(k+e+g,k+e+r,k+g+r,e+g+r)-m(t+u+
q,t+u+l,t+q+l,u+q+l);default:g=b.slice().sort(n);r=a.slice().sort(n);for(t=0;t<e;++t)if(k=g[t]-r[t])return k;return 0}};var m=Math.min},{}],92:[function(a,e,g){var n=a("double-bits"),m=Math.pow(2,-1074);e.exports=function(b,a){if(isNaN(b)||isNaN(a))return NaN;if(b===a)return b;if(0===b)return 0>a?-m:m;var e=n.hi(b),k=n.lo(b);a>b===0<b?4294967295===k?(e+=1,k=0):k+=1:0===k?(k=4294967295,--e):--k;return n.pack(k,e)}},{"double-bits":93}],93:[function(a,e,g){(function(a){var g=!1;if("undefined"!==typeof Float64Array){var b=
new Float64Array(1),d=new Uint32Array(b.buffer);b[0]=1;g=!0;1072693248===d[1]?(e.exports=function(a){b[0]=a;return[d[0],d[1]]},e.exports.pack=function(a,e){d[0]=a;d[1]=e;return b[0]},e.exports.lo=function(a){b[0]=a;return d[0]},e.exports.hi=function(a){b[0]=a;return d[1]}):1072693248===d[0]?(e.exports=function(a){b[0]=a;return[d[1],d[0]]},e.exports.pack=function(a,e){d[1]=a;d[0]=e;return b[0]},e.exports.lo=function(a){b[0]=a;return d[1]},e.exports.hi=function(a){b[0]=a;return d[0]}):g=!1}if(!g){var w=
new a(8);e.exports=function(b){w.writeDoubleLE(b,0,!0);return[w.readUInt32LE(0,!0),w.readUInt32LE(4,!0)]};e.exports.pack=function(b,a){w.writeUInt32LE(b,0,!0);w.writeUInt32LE(a,4,!0);return w.readDoubleLE(0,!0)};e.exports.lo=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(0,!0)};e.exports.hi=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(4,!0)}}e.exports.sign=function(b){return e.exports.hi(b)>>>31};e.exports.exponent=function(b){return(e.exports.hi(b)<<1>>>21)-1023};e.exports.fraction=
function(b){var a=e.exports.lo(b);b=e.exports.hi(b);var d=b&1048575;b&2146435072&&(d+=1048576);return[a,d]};e.exports.denormalized=function(b){return!(e.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:33}],94:[function(a,e,g){var n=a("big-rat/add");e.exports=function(a,b){for(var d=a.length,e=Array(d),g=0;g<d;++g)e[g]=n(a[g],b[g]);return e}},{"big-rat/add":62}],95:[function(a,e,g){e.exports=function(a){for(var b=Array(a.length),d=0;d<a.length;++d)b[d]=n(a[d]);return b};var n=a("big-rat")},
{"big-rat":65}],96:[function(a,e,g){var n=a("big-rat"),m=a("big-rat/mul");e.exports=function(b,a){for(var e=n(a),g=b.length,y=Array(g),r=0;r<g;++r)y[r]=m(b[r],e);return y}},{"big-rat":65,"big-rat/mul":74}],97:[function(a,e,g){var n=a("big-rat/sub");e.exports=function(a,b){for(var d=a.length,e=Array(d),g=0;g<d;++g)e[g]=n(a[g],b[g]);return e}},{"big-rat/sub":79}],98:[function(a,e,g){arguments[4][49][0].apply(g,arguments)},{dup:49}],99:[function(a,e,g){arguments[4][50][0].apply(g,arguments)},{dup:50,
"two-product":102,"two-sum":98}],100:[function(a,e,g){arguments[4][51][0].apply(g,arguments)},{dup:51}],101:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],102:[function(a,e,g){arguments[4][53][0].apply(g,arguments)},{dup:53}],103:[function(a,e,g){arguments[4][59][0].apply(g,arguments)},{dup:59,"robust-scale":99,"robust-subtract":100,"robust-sum":101,"two-product":102}],104:[function(a,e,g){e.exports=function(a,b,d,e){var g=n(a,d,e),y=n(b,d,e);if(0<g&&0<y||0>g&&0>y)return!1;var r=
n(d,a,b),t=n(e,a,b);if(0<r&&0<t||0>r&&0>t)return!1;if(0===g&&0===y&&0===r&&0===t){a:{for(g=0;2>g;++g){var y=a[g],r=b[g],t=Math.max(y,r),u=d[g],q=e[g],l=Math.min(u,q);if(Math.max(u,q)<Math.min(y,r)||t<l){a=!1;break a}}a=!0}return a}return!0};var n=a("robust-orientation")[3]},{"robust-orientation":103}],105:[function(a,e,g){function n(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";e.exports=n;a=n.prototype;Object.defineProperty(a,"length",
{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var b=a,d=this.roots;d[a]!==a;)a=d[a];for(;d[b]!==a;){var e=d[b];d[b]=a;b=e}return a};a.link=function(a,b){var d=this.find(a),e=this.find(b);if(d!==e){var g=this.ranks,n=this.roots,r=g[d],t=g[e];r<t?n[d]=e:t<r?n[e]=d:(n[e]=d,++g[d])}}},{}],106:[function(a,e,g){function n(b,a){return b[0]-a[0]}function m(){var b=this.stride,a=Array(b.length),
d;for(d=0;d<a.length;++d)a[d]=[Math.abs(b[d]),d];a.sort(n);b=Array(a.length);for(d=0;d<b.length;++d)b[d]=a[d][1];return b}function b(b,a){var d=["View",a,"d",b].join("");0>a&&(d="View_Nil"+b);var l="generic"===b;if(-1===a){var h,d=new Function("function "+d+"(a){this.data=a;};var proto="+d+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
d+"(a){return new "+d+"(a);}");return d()}if(0===a)return d=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
d+"_get(){return "+(l?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(l?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),d(r[b][0]);h=["'use strict'"];var c=w(a),e=c.map(function(b){return"i"+b}),g="this.offset+"+c.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),k=c.map(function(b){return"b"+b}).join(","),n=c.map(function(b){return"c"+b}).join(",");h.push("function "+
d+"(a,"+k+","+n+",d){this.data=a","this.shape=["+k+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+b+"'","proto.dimension="+a);h.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+c.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===a?h.push("proto.order=[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>a?(h.push("function "+d+"_order(){"),2===a?h.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===a&&h.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):h.push("ORDER})"));h.push("proto.set=function "+d+"_set("+e.join(",")+",v){");l?h.push("return this.data.set("+g+",v)}"):h.push("return this.data["+g+"]=v}");h.push("proto.get=function "+d+"_get("+e.join(",")+"){");l?h.push("return this.data.get("+
g+")}"):h.push("return this.data["+g+"]}");h.push("proto.index=function "+d+"_index(",e.join(),"){return "+g+"}");h.push("proto.hi=function "+d+"_hi("+e.join(",")+"){return new "+d+"(this.data,"+c.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+c.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");l=c.map(function(b){return"a"+b+"=this.shape["+b+"]"});g=c.map(function(b){return"c"+b+"=this.stride["+b+"]"});h.push("proto.lo=function "+
d+"_lo("+e.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+g.join(","));for(l=0;l<a;++l)h.push("if(typeof i"+l+"==='number'&&i"+l+">=0){d=i"+l+"|0;b+=c"+l+"*d;a"+l+"-=d}");h.push("return new "+d+"(this.data,"+c.map(function(b){return"a"+b}).join(",")+","+c.map(function(b){return"c"+b}).join(",")+",b)}");h.push("proto.step=function "+d+"_step("+e.join(",")+"){var "+c.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+c.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(l=0;l<a;++l)h.push("if(typeof i"+l+"==='number'){d=i"+l+"|0;if(d<0){c+=b"+l+"*(a"+l+"-1);a"+l+"=ceil(-a"+l+"/d)}else{a"+l+"=ceil(a"+l+"/d)}b"+l+"*=d}");h.push("return new "+d+"(this.data,"+c.map(function(b){return"a"+b}).join(",")+","+c.map(function(b){return"b"+b}).join(",")+",c)}");g=Array(a);k=Array(a);for(l=0;l<a;++l)g[l]="a[i"+l+"]",k[l]="b[i"+l+"]";h.push("proto.transpose=function "+d+"_transpose("+e+"){"+e.map(function(b,a){return b+"=("+b+"===undefined?"+
a+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+g.join(",")+","+k.join(",")+",this.offset)}");h.push("proto.pick=function "+d+"_pick("+e+"){var a=[],b=[],c=this.offset");for(l=0;l<a;++l)h.push("if(typeof i"+l+"==='number'&&i"+l+">=0){c=(c+this.stride["+l+"]*i"+l+")|0}else{a.push(this.shape["+l+"]);b.push(this.stride["+l+"])}");h.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");h.push("return function construct_"+d+"(data,shape,stride,offset){return new "+
d+"(data,"+c.map(function(b){return"shape["+b+"]"}).join(",")+","+c.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",h.join("\n"));return d(r[b],m)}function d(b){if(k(b))return"buffer";if(y)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var w=a("iota-array"),k=a("is-buffer"),y="undefined"!==typeof Float64Array,r={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in r)r[a].push(b(a,-1))});e.exports=function(a,e,g,l){if(void 0===a){var h=r.array[0];return h([])}"number"===
typeof a&&(a=[a]);void 0===e&&(e=[a.length]);h=e.length;if(void 0===g){g=Array(h);for(var c=h-1,k=1;0<=c;--c)g[c]=k,k*=e[c]}if(void 0===l)for(c=l=0;c<h;++c)0>g[c]&&(l-=(e[c]-1)*g[c]);c=d(a);for(k=r[c];k.length<=h+1;)k.push(b(c,k.length-1));h=k[h+1];return h(a,e,g,l)}},{"iota-array":107,"is-buffer":108}],107:[function(a,e,g){e.exports=function(a){for(var e=Array(a),b=0;b<a;++b)e[b]=b;return e}},{}],108:[function(a,e,g){e.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===
typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],109:[function(a,e,g){e.exports=function(a,b){for(var d=n(a,b.length),e=Array(b.length),g=Array(b.length),y=[],r=0;r<b.length;++r){var t=d[r].length;g[r]=t;e[r]=!0;1>=t&&y.push(r)}for(;0<y.length;)for(t=y.pop(),e[t]=!1,t=d[t],r=0;r<t.length;++r){var u=t[r];0===--g[u]&&y.push(u)}d=Array(b.length);g=[];for(r=0;r<b.length;++r)e[r]?(t=g.length,d[r]=t,g.push(b[r])):d[r]=-1;y=[];for(r=0;r<a.length;++r)t=a[r],e[t[0]]&&e[t[1]]&&y.push([d[t[0]],
d[t[1]]]);return[y,g]};var n=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":110}],110:[function(a,e,g){e.exports=function(a,b){var d=a.length;if("number"!==typeof b){for(var e=b=0;e<d;++e){var g=a[e];b=Math.max(b,g[0],g[1])}b=(b|0)+1}b|=0;for(var y=Array(b),e=0;e<b;++e)y[e]=[];for(e=0;e<d;++e)g=a[e],y[g[0]].push(g[1]),y[g[1]].push(g[0]);for(d=0;d<b;++d)n(y[d],function(b,a){return b-a});return y};var n=a("uniq")},{uniq:129}],111:[function(a,e,g){e.exports=function(a,b){function d(b,a){var d=
t[a][b[a]];d.splice(d.indexOf(b),1)}function e(a,h,l){var g,k,f;for(k=0;2>k;++k)if(0<t[k][h].length){g=t[k][h][0];f=k;break}k=g[f^1];for(var m=0;2>m;++m)for(var q=t[m][h],u=0;u<q.length;++u){var r=q[u],w=r[m^1];0<n(b[a],b[h],b[k],b[w])&&(g=r,k=w,f=m)}if(l)return k;g&&d(g,f);return k}function g(a,h){var l=t[h][a][0],k=[a];d(l,h);for(l=l[h^1];;){for(;l!==a;)k.push(l),l=e(k[k.length-2],l,!1);if(0===t[0][a].length+t[1][a].length)break;var l=k[k.length-1],m=a,f=k[1],q=e(l,m,!0);if(0>n(b[l],b[m],b[f],b[q]))break;
k.push(a);l=e(l,m)}return k}for(var y=b.length|0,r=a.length,t=[Array(y),Array(y)],u=0;u<y;++u)t[0][u]=[],t[1][u]=[];for(u=0;u<r;++u){var q=a[u];t[0][q[0]].push(q);t[1][q[1]].push(q)}r=[];for(u=0;u<y;++u)0===t[0][u].length+t[1][u].length&&r.push([u]);for(u=0;u<y;++u)for(q=0;2>q;++q){for(var l=[];0<t[q][u].length;){var h=g(u,q);h[1]===h[h.length-1]?l.push.apply(l,h):(0<l.length&&r.push(l),l=h)}0<l.length&&r.push(l)}return r};var n=a("compare-angle")},{"compare-angle":112}],112:[function(a,e,g){function n(b,
a,e){var g=d(b[0],-a[0]);b=d(b[1],-a[1]);var m=d(e[0],-a[0]);a=d(e[1],-a[1]);g=k(w(g,m),w(b,a));return 0<=g[g.length-1]}e.exports=function(a,d,e,g){var k=m(d,e,g);if(0===k){var k=b(m(a,d,e)),l=b(m(a,d,g));return k===l?0===k&&(e=n(a,d,e),a=n(a,d,g),e!==a)?e?1:-1:0:0===l?0<k?-1:n(a,d,g)?-1:1:0===k?0<l?1:n(a,d,e)?1:-1:b(l-k)}l=m(a,d,e);return 0<l?0<k&&0<m(a,d,g)?1:-1:0>l?0<k||0<m(a,d,g)?1:-1:0<m(a,d,g)?1:n(a,d,e)?1:-1};var m=a("robust-orientation"),b=a("signum"),d=a("two-sum"),w=a("robust-product"),
k=a("robust-sum")},{"robust-orientation":126,"robust-product":114,"robust-sum":127,signum:115,"two-sum":116}],113:[function(a,e,g){arguments[4][50][0].apply(g,arguments)},{dup:50,"two-product":128,"two-sum":116}],114:[function(a,e,g){var n=a("robust-sum"),m=a("robust-scale");e.exports=function(b,a){if(1===b.length)return m(a,b[0]);if(1===a.length)return m(b,a[0]);if(0===b.length||0===a.length)return[0];var e=[0];if(b.length<a.length)for(var g=0;g<b.length;++g)e=n(e,m(a,b[g]));else for(g=0;g<a.length;++g)e=
n(e,m(b,a[g]));return e}},{"robust-scale":113,"robust-sum":127}],115:[function(a,e,g){e.exports=function(a){return 0>a?-1:0<a?1:0}},{}],116:[function(a,e,g){arguments[4][49][0].apply(g,arguments)},{dup:49}],117:[function(a,e,g){function n(b,a,e,g,m,n){b=["function ",b,"(a,l,h,",g.join(","),"){",n?"":"var i=",e?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",m?".get(m)":"[m]"];n?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",
a,"){i=m;");e?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");n?b.push("return -1};"):b.push("return i};");return b.join("")}function m(b,a,e,g){return(new Function([n("A","x"+b+"y",a,["y"],!1,g),n("B","x"+b+"y",a,["y"],!0,g),n("P","c(x,y)"+b+"0",a,["y","c"],!1,g),n("Q","c(x,y)"+b+"0",a,["y","c"],!0,g),"function dispatchBsearch",e,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
e].join("")))()}e.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],118:[function(a,e,g){function n(b,a,d,h,l){this.mid=b;this.left=a;this.right=d;this.leftPoints=h;this.rightPoints=l;this.count=(a?a.count:0)+(d?d.count:0)+h.length}function m(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function b(b,a){var d=q(a);b.mid=d.mid;b.left=d.left;b.right=d.right;b.leftPoints=
d.leftPoints;b.rightPoints=d.rightPoints;b.count=d.count}function d(a,d){var h=a.intervals([]),l=h.indexOf(d);if(0>l)return 0;h.splice(l,1);b(a,h);return 1}function w(b,a,d){for(var h=0;h<b.length&&b[h][0]<=a;++h){var l=d(b[h]);if(l)return l}}function k(b,a,d){for(var h=b.length-1;0<=h&&b[h][1]>=a;--h){var l=d(b[h]);if(l)return l}}function y(b,a){for(var d=0;d<b.length;++d){var h=a(b[d]);if(h)return h}}function r(b,a){return b-a}function t(b,a){var d=b[0]-a[0];return d?d:b[1]-a[1]}function u(b,a){var d=
b[1]-a[1];return d?d:b[0]-a[0]}function q(b){if(0===b.length)return null;for(var a=[],d=0;d<b.length;++d)a.push(b[d][0],b[d][1]);a.sort(r);for(var a=a[a.length>>1],h=[],l=[],f=[],d=0;d<b.length;++d){var e=b[d];e[1]<a?h.push(e):a<e[0]?l.push(e):f.push(e)}b=f.slice();f.sort(t);b.sort(u);return new n(a,q(h),q(l),f,b)}function l(b){this.root=b}var h=a("binary-search-bounds");e.exports=function(b){return b&&0!==b.length?new l(q(b)):new l(null)};a=n.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);
this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);return b};a.insert=function(a){var d=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),b(this,d)):this.left.insert(a):this.left=q([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),b(this,d)):this.right.insert(a):this.right=q([a]);else{var d=h.ge(this.leftPoints,a,t),l=h.ge(this.rightPoints,a,
u);this.leftPoints.splice(d,0,a);this.rightPoints.splice(l,0,a)}};a.remove=function(b){var a=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return d(this,b);a=this.left.remove(b);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(b[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(a-1))return d(this,b);a=this.right.remove(b);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;
return a}if(1===this.count)return this.leftPoints[0]===b?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var l=this.left;l.right;)b=l,l=l.right;if(b===this)l.right=this.right;else{var e=this.left,a=this.right;b.count-=l.count;b.right=l.left;l.left=e;l.right=a}m(this,l);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?m(this,this.left):m(this,this.right);return 1}for(e=h.ge(this.leftPoints,
b,t);e<this.leftPoints.length&&this.leftPoints[e][0]===b[0];++e)if(this.leftPoints[e]===b)for(--this.count,this.leftPoints.splice(e,1),a=h.ge(this.rightPoints,b,u);a<this.rightPoints.length&&this.rightPoints[a][1]===b[1];++a)if(this.rightPoints[a]===b)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(b,a){if(b<this.mid){if(this.left){var d=this.left.queryPoint(b,a);if(d)return d}return w(this.leftPoints,b,a)}return b>this.mid?this.right&&(d=this.right.queryPoint(b,a))?d:k(this.rightPoints,
b,a):y(this.leftPoints,a)};a.queryInterval=function(b,a,d){if(b<this.mid&&this.left){var h=this.left.queryInterval(b,a,d);if(h)return h}return a>this.mid&&this.right&&(h=this.right.queryInterval(b,a,d))?h:a<this.mid?w(this.leftPoints,a,d):b>this.mid?k(this.rightPoints,b,d):y(this.leftPoints,d)};a=l.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new n(b[0],null,null,[b],[b])};a.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=
function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,a,d){if(b<=a&&this.root)return this.root.queryInterval(b,a,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":117}],119:[function(a,e,g){function n(b,a){var e,g;if(a[0][0]<a[1][0])e=a[0],g=a[1];else if(a[0][0]>a[1][0])e=a[1],g=a[0];else{e=Math.min(b[0][1],
b[1][1]);g=Math.max(b[0][1],b[1][1]);var n=Math.min(a[0][1],a[1][1]),r=Math.max(a[0][1],a[1][1]);return g<n?g-n:e>r?e-r:g-r}b[0][1]<b[1][1]?(r=b[0],n=b[1]):(r=b[1],n=b[0]);return(r=m(g,e,r))?r:(r=m(g,e,n))?r:n-g}e.exports=function(b,a){var e,g;if(a[0][0]<a[1][0])e=a[0],g=a[1];else if(a[0][0]>a[1][0])e=a[1],g=a[0];else return n(a,b);var y,r;if(b[0][0]<b[1][0])y=b[0],r=b[1];else if(b[0][0]>b[1][0])y=b[1],r=b[0];else return-n(b,a);var t=m(e,g,r),u=m(e,g,y);if(0>t){if(0>=u)return t}else if(0<t){if(0<=
u)return t}else if(u)return u;t=m(r,y,g);u=m(r,y,e);if(0>t){if(0>=u)return t}else if(0<t){if(0<=u)return t}else if(u)return u;return g[0]-r[0]};var m=a("robust-orientation")},{"robust-orientation":126}],120:[function(a,e,g){function n(a,b,c,d,e,g){this._color=a;this.key=b;this.value=c;this.left=d;this.right=e;this._count=g}function m(a){return new n(a._color,a.key,a.value,a.left,a.right,a._count)}function b(a,b){return new n(a,b.key,b.value,b.left,b.right,b._count)}function d(a){a._count=1+(a.left?
a.left._count:0)+(a.right?a.right._count:0)}function w(a,b){this._compare=a;this.root=b}function k(a,b){if(b.left){var c=k(a,b.left);if(c)return c}if(c=a(b.key,b.value))return c;if(b.right)return k(a,b.right)}function y(a,b,c,d){if(0>=b(a,d.key)){if(d.left){var e=y(a,b,c,d.left);if(e)return e}if(e=c(d.key,d.value))return e}if(d.right)return y(a,b,c,d.right)}function r(a,b,c,d,e){var g=c(a,e.key),k=c(b,e.key);if(0>=g&&(e.left&&(g=r(a,b,c,d,e.left))||0<k&&(g=d(e.key,e.value))))return g;if(0<k&&e.right)return r(a,
b,c,d,e.right)}function t(a,b){this.tree=a;this._stack=b}function u(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function q(a,b){return a<b?-1:a>b?1:0}e.exports=function(a){return new w(a||q,null)};a=w.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(b,c){a.push(b)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a}});Object.defineProperty(a,
"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,h){for(var c=this._compare,e=this.root,g=[],k=[];e;){var m=c(a,e.key);g.push(e);k.push(m);e=0>=m?e.left:e.right}g.push(new n(0,a,h,null,null,1));for(m=g.length-2;0<=m;--m)e=g[m],g[m]=0>=k[m]?new n(e._color,e.key,e.value,g[m+1],e.right,e._count+1):new n(e._color,e.key,e.value,e.left,g[m+1],e._count+1);for(m=g.length-1;1<m;--m){k=g[m-1];e=g[m];if(1===k._color||1===e._color)break;var f=g[m-2];if(f.left===k)if(k.left===
e){var q=f.right;if(q&&0===q._color)k._color=1,f.right=b(1,q),f._color=0,--m;else{f._color=0;f.left=k.right;k._color=1;k.right=f;g[m-2]=k;g[m-1]=e;d(f);d(k);3<=m&&(m=g[m-3],m.left===f?m.left=k:m.right=k);break}}else if((q=f.right)&&0===q._color)k._color=1,f.right=b(1,q),f._color=0,--m;else{k.right=e.left;f._color=0;f.left=e.right;e._color=1;e.left=k;e.right=f;g[m-2]=e;g[m-1]=k;d(f);d(k);d(e);3<=m&&(m=g[m-3],m.left===f?m.left=e:m.right=e);break}else if(k.right===e)if((q=f.left)&&0===q._color)k._color=
1,f.left=b(1,q),f._color=0,--m;else{f._color=0;f.right=k.left;k._color=1;k.left=f;g[m-2]=k;g[m-1]=e;d(f);d(k);3<=m&&(m=g[m-3],m.right===f?m.right=k:m.left=k);break}else if((q=f.left)&&0===q._color)k._color=1,f.left=b(1,q),f._color=0,--m;else{k.left=e.right;f._color=0;f.right=e.left;e._color=1;e.right=k;e.left=f;g[m-2]=e;g[m-1]=k;d(f);d(k);d(e);3<=m&&(m=g[m-3],m.right===f?m.right=e:m.left=e);break}}g[0]._color=1;return new w(c,g[0])};a.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return k(a,
this.root);case 2:return y(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,c)))return r(b,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new t(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new t(this,a)}});a.at=function(a){if(0>a)return new t(this,[]);for(var b=this.root,c=[];;){c.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new t(this,c);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new t(this,[])};a.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0>=g&&(e=d.length);c=0>=g?c.left:c.right}d.length=e;return new t(this,d)};a.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0>g&&(e=d.length);c=0>g?c.left:c.right}d.length=e;return new t(this,d)};a.lt=function(a){for(var b=this._compare,
c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0<g&&(e=d.length);c=0>=g?c.left:c.right}d.length=e;return new t(this,d)};a.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0<=g&&(e=d.length);c=0>g?c.left:c.right}d.length=e;return new t(this,d)};a.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);d.push(c);if(0===e)return new t(this,d);c=0>=e?c.left:c.right}return new t(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=t.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new t(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),c=a[a.length-1];e[e.length-1]=new n(c._color,c.key,c.value,c.left,c.right,c._count);for(var g=a.length-2;0<=g;--g)c=a[g],e[g]=c.left===a[g+1]?new n(c._color,c.key,c.value,e[g+1],c.right,c._count):new n(c._color,c.key,c.value,c.left,e[g+1],c._count);c=e[e.length-1];if(c.left&&c.right){a=e.length;for(c=c.left;c.right;)e.push(c),c=c.right;g=e[a-1];e.push(new n(c._color,g.key,g.value,c.left,c.right,c._count));e[a-1].key=c.key;e[a-1].value=c.value;for(g=e.length-2;g>=a;--g)c=e[g],e[g]=
new n(c._color,c.key,c.value,c.left,e[g+1],c._count);e[a-1].left=e[a]}c=e[e.length-1];if(0===c._color)for(g=e[e.length-2],g.left===c?g.left=null:g.right===c&&(g.right=null),e.pop(),g=0;g<e.length;++g)e[g]._count--;else if(c.left||c.right)for(c.left?u(c,c.left):c.right&&u(c,c.right),c._color=1,g=0;g<e.length-1;++g)e[g]._count--;else{if(1===e.length)return new w(this.tree._compare,null);for(g=0;g<e.length;++g)e[g]._count--;for(var g=e[e.length-2],k,q,r,f=e.length-1;0<=f;--f){a=e[f];if(0===f){a._color=
1;break}k=e[f-1];if(k.left===a){q=k.right;if(q.right&&0===q.right._color){q=k.right=m(q);r=q.right=m(q.right);k.right=q.left;q.left=k;q.right=r;q._color=k._color;a._color=1;k._color=1;r._color=1;d(k);d(q);if(1<f){var t=e[f-2];t.left===k?t.left=q:t.right=q}e[f-1]=q;break}else if(q.left&&0===q.left._color){q=k.right=m(q);r=q.left=m(q.left);k.right=r.left;q.left=r.right;r.left=k;r.right=q;r._color=k._color;k._color=1;q._color=1;a._color=1;d(k);d(q);d(r);1<f&&(t=e[f-2],t.left===k?t.left=r:t.right=r);
e[f-1]=r;break}if(1===q._color)if(0===k._color){k._color=1;k.right=b(0,q);break}else k.right=b(0,q);else q=m(q),k.right=q.left,q.left=k,q._color=k._color,k._color=0,d(k),d(q),1<f&&(t=e[f-2],t.left===k?t.left=q:t.right=q),e[f-1]=q,e[f]=k,f+1<e.length?e[f+1]=a:e.push(a),f+=2}else{q=k.left;if(q.left&&0===q.left._color){q=k.left=m(q);r=q.left=m(q.left);k.left=q.right;q.right=k;q.left=r;q._color=k._color;a._color=1;k._color=1;r._color=1;d(k);d(q);1<f&&(t=e[f-2],t.right===k?t.right=q:t.left=q);e[f-1]=q;
break}else if(q.right&&0===q.right._color){q=k.left=m(q);r=q.right=m(q.right);k.left=r.right;q.right=r.left;r.right=k;r.left=q;r._color=k._color;k._color=1;q._color=1;a._color=1;d(k);d(q);d(r);1<f&&(t=e[f-2],t.right===k?t.right=r:t.left=r);e[f-1]=r;break}if(1===q._color)if(0===k._color){k._color=1;k.left=b(0,q);break}else k.left=b(0,q);else q=m(q),k.left=q.right,q.right=k,q._color=k._color,k._color=0,d(k),d(q),1<f&&(t=e[f-2],t.right===k?t.right=q:t.left=q),e[f-1]=q,e[f]=k,f+1<e.length?e[f+1]=a:e.push(a),
f+=2}}g.left===c?g.left=null:g.right=null}return new w(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var c=b.length-2;0<=c;--c)b[c+1]===b[c].right&&(++a,b[c].left&&(a+=b[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});a.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var c=Array(b.length),d=b[b.length-1];c[c.length-1]=new n(d._color,d.key,a,d.left,d.right,d._count);for(a=b.length-2;0<=a;--a)d=b[a],c[a]=d.left===b[a+1]?new n(d._color,d.key,d.value,c[a+1],d.right,d._count):new n(d._color,d.key,d.value,d.left,c[a+1],d._count);return new w(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],121:[function(a,e,g){function n(a,b,d){this.slabs=a;this.coordinates=b;this.horizontal=d}function m(a,b){return a.y-b}function b(a,d){for(var e=null;a;){var g=a.key,c,k;g[0][0]<g[1][0]?(c=g[0],
k=g[1]):(c=g[1],k=g[0]);c=r(c,k,d);if(0>c)a=a.left;else if(0<c)if(d[0]!==g[1][0])e=a,a=a.right;else{if(g=b(a.right,d))return g;a=a.left}else{if(d[0]!==g[1][0])return a;if(g=b(a.right,d))return g;a=a.left}}return e}function d(a,b,d,e){this.y=a;this.index=b;this.start=d;this.closed=e}function w(a,b,d,e){this.x=a;this.segment=b;this.create=d;this.index=e}e.exports=function(a){for(var b=a.length,e=2*b,g=Array(e),c=0;c<b;++c){var k=a[c],m=k[0][0]<k[1][0];g[2*c]=new w(k[0][0],k,m,c);g[2*c+1]=new w(k[1][0],
k,!m,c)}g.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(t);b=[];k=[];m=[];for(c=0;c<e;){for(var r=g[c].x,B=[];c<e;){var f=g[c];if(f.x!==r)break;c+=1;f.segment[0][0]===f.x&&f.segment[1][0]===f.x?f.create&&(f.segment[0][1]<f.segment[1][1]?(B.push(new d(f.segment[0][1],f.index,!0,!0)),B.push(new d(f.segment[1][1],f.index,!1,!1))):(B.push(new d(f.segment[1][1],f.index,!0,!1)),B.push(new d(f.segment[0][1],
f.index,!1,!0)))):a=f.create?a.insert(f.segment,f.index):a.remove(f.segment)}b.push(a.root);k.push(r);m.push(B)}return new n(b,k,m)};var k=a("binary-search-bounds"),y=a("functional-red-black-tree"),r=a("robust-orientation"),t=a("./lib/order-segments");n.prototype.castUp=function(a){var d=k.le(this.coordinates,a[0]);if(0>d)return-1;var e=b(this.slabs[d],a),g=-1;e&&(g=e.value);if(this.coordinates[d]===a[0]){var c=null;e&&(c=e.key);0<d&&(e=b(this.slabs[d-1],a))&&(c?0<t(e.key,c)&&(c=e.key,g=e.value):
(g=e.value,c=e.key));e=this.horizontal[d];if(0<e.length){var p=k.ge(e,a[1],m);if(p<e.length){d=e[p];if(a[1]===d.y){if(d.closed)return d.index;for(;p<e.length-1&&e[p+1].y===a[1];)if(p+=1,d=e[p],d.closed)return d.index;if(d.y===a[1]&&!d.start){p+=1;if(p>=e.length)return g;d=e[p]}}d.start?c?(a=r(c[0],c[1],[a[0],d.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(g=d.index)):g=d.index:d.y!==a[1]&&(g=d.index)}}}return g}},{"./lib/order-segments":119,"binary-search-bounds":117,"functional-red-black-tree":120,"robust-orientation":126}],
122:[function(a,e,g){function n(){return!0}function m(a){return function(b,c){var d=a[b];return d?!!d.queryPoint(c,n):!1}}function b(a){for(var b={},c=0;c<a.length;++c){var d=a[c],e=d[0][0],g=d[0][1],d=d[1][1],g=[Math.min(g,d),Math.max(g,d)];e in b?b[e].push(g):b[e]=[g]}a={};e=Object.keys(b);for(c=0;c<e.length;++c)a[e[c]]=u(b[e[c]]);return m(a)}function d(a,b){return function(c){var d=q.le(b,c[0]);if(0>d)return 1;var e=a[d];if(!e)if(0<d&&b[d]===c[0])e=a[d-1];else return 1;for(d=1;e;){var g=e.key,
k=r(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>k)e=e.left;else if(0<k)d=-1,e=e.right;else return 0;else if(0<k)e=e.left;else if(0>k)d=1,e=e.right;else return 0}return d}}function w(a){return 1}function k(a){return function(b){return a(b[0],b[1])?0:1}}function y(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}e.exports=function(a){for(var e=a.length,c=[],g=[],m=0;m<e;++m)for(var n=a[m],q=n.length,f=q-1,r=0;r<q;f=r++){var f=n[f],u=n[r];f[0]===u[0]?g.push([f,u]):c.push([f,u])}if(0===c.length)return 0===
g.length?w:k(b(g));a=t(c);a=d(a.slabs,a.coordinates);return 0===g.length?a:y(b(g),a)};var r=a("robust-orientation")[3],t=a("slab-decomposition"),u=a("interval-tree-1d"),q=a("binary-search-bounds")},{"binary-search-bounds":117,"interval-tree-1d":118,"robust-orientation":126,"slab-decomposition":121}],123:[function(a,e,g){arguments[4][49][0].apply(g,arguments)},{dup:49}],124:[function(a,e,g){arguments[4][50][0].apply(g,arguments)},{dup:50,"two-product":128,"two-sum":123}],125:[function(a,e,g){arguments[4][51][0].apply(g,
arguments)},{dup:51}],126:[function(a,e,g){arguments[4][59][0].apply(g,arguments)},{dup:59,"robust-scale":124,"robust-subtract":125,"robust-sum":127,"two-product":128}],127:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],128:[function(a,e,g){arguments[4][53][0].apply(g,arguments)},{dup:53}],129:[function(a,e,g){e.exports=function(a,e,b){if(0===a.length)return a;if(e){b||a.sort(e);b=1;for(var d=a.length,g=a[0],k=a[0],y=1;y<d;++y)k=g,g=a[y],e(g,k)&&(y===b?b++:a[b++]=g);a.length=b;
return a}b||a.sort();e=1;b=a.length;d=a[0];g=a[0];for(k=1;k<b;++k)g=d,d=a[k],d!==g&&(k===e?e++:a[e++]=d);a.length=e;return a}},{}],130:[function(a,e,g){function n(a,b){for(var d=Array(a),e=0;e<a;++e)d[e]=b;return d}function m(a){for(var b=Array(a),d=0;d<a;++d)b[d]=[];return b}e.exports=function(a,e){function g(a){for(var b=a.length,c=0;c<b;++c)if(!F[a[c]])return!1;return!0}var h=t(a,e);a=h[0];e=h[1];for(var c=e.length,p=b(a,e.length),v=0;v<c;++v)if(1===p[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
for(var p=d(a,e),p=p.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var f=e[a[d]],g=e[a[(d+1)%b]],h=k(-f[0],f[1]),l=k(-f[0],g[1]),f=k(g[0],f[1]),g=k(g[0],g[1]),c=y(c,y(y(h,l),y(f,g)));return 0<c[c.length-1]}),h=p.length,z=Array(h),B=Array(h),v=0;v<h;++v){z[v]=v;var f=Array(h),x=p[v].map(function(a){return e[a]}),D=w([x]),A=0,C=0;a:for(;C<h;++C)if(f[C]=0,v!==C){for(var x=p[C],E=x.length,H=0;H<E;++H){var G=D(e[x[H]]);if(0!==G){0>G&&(f[C]=1,A+=1);continue a}}f[C]=1;A+=1}B[v]=[A,v,f]}B.sort(function(a,
b){return b[0]-a[0]});for(v=0;v<h;++v)for(f=B[v],x=f[1],E=f[2],C=0;C<h;++C)E[C]&&(z[C]=x);B=m(h);for(v=0;v<h;++v)B[v].push(z[v]),B[z[v]].push(v);for(var f={},F=n(c,!1),v=0;v<h;++v)for(x=p[v],E=x.length,C=0;C<E;++C)c=x[C],D=x[(C+1)%E],A=Math.min(c,D)+":"+Math.max(c,D),A in f?(A=f[A],B[A].push(v),B[v].push(A),F[c]=F[D]=!0):f[A]=v;C=[];c=n(h,-1);for(v=0;v<h;++v)z[v]!==v||g(p[v])?c[v]=-1:(C.push(v),c[v]=0);for(h=[];0<C.length;){v=C.pop();z=B[v];r(z,function(a,b){return a-b});var E=z.length,f=c[v],I;0===
f&&(x=p[v],I=[x]);for(v=0;v<E;++v)x=z[v],0<=c[x]||(c[x]=f^1,C.push(x),0===f&&(x=p[x],g(x)||(x.reverse(),I.push(x))));0===f&&h.push(I)}return h};var b=a("edges-to-adjacency-list"),d=a("planar-dual"),w=a("point-in-big-polygon"),k=a("two-product"),y=a("robust-sum"),r=a("uniq"),t=a("./lib/trim-leaves")},{"./lib/trim-leaves":109,"edges-to-adjacency-list":110,"planar-dual":111,"point-in-big-polygon":122,"robust-sum":127,"two-product":128,uniq:129}],131:[function(a,e,g){arguments[4][49][0].apply(g,arguments)},
{dup:49}],132:[function(a,e,g){arguments[4][50][0].apply(g,arguments)},{dup:50,"two-product":135,"two-sum":131}],133:[function(a,e,g){arguments[4][51][0].apply(g,arguments)},{dup:51}],134:[function(a,e,g){arguments[4][52][0].apply(g,arguments)},{dup:52}],135:[function(a,e,g){arguments[4][53][0].apply(g,arguments)},{dup:53}],136:[function(a,e,g){arguments[4][59][0].apply(g,arguments)},{dup:59,"robust-scale":132,"robust-subtract":133,"robust-sum":134,"two-product":135}],137:[function(a,e,g){arguments[4][75][0].apply(g,
arguments)},{dup:75}],138:[function(a,e,g){function n(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";e.exports=n;n.prototype.length=function(){return this.roots.length};n.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};n.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var d=b[a];b[a]=b[d];a=d}return a};n.prototype.link=function(a,b){var d=this.find(a),e=this.find(b);if(d!==
e){var g=this.ranks,n=this.roots,r=g[d],t=g[e];r<t?n[d]=e:t<r?n[e]=d:(n[e]=d,++g[d])}}},{}],139:[function(a,e,g){function n(a,b){var d=a.length,e=a.length-b.length,c=Math.min;if(e)return e;switch(d){case 0:return 0;case 1:return a[0]-b[0];case 2:return(d=a[0]+a[1]-b[0]-b[1])?d:c(a[0],a[1])-c(b[0],b[1]);case 3:var e=a[0]+a[1],g=b[0]+b[1];if(d=e+a[2]-(g+b[2]))return d;var k=c(a[0],a[1]),m=c(b[0],b[1]);return(d=c(k,a[2])-c(m,b[2]))?d:c(k+a[2],e)-c(m+b[2],g);default:c=a.slice(0);c.sort();g=b.slice(0);
g.sort();for(k=0;k<d;++k)if(e=c[k]-g[k])return e;return 0}}function m(a,b){return n(a[0],b[0])}function b(a,b){if(b){for(var d=a.length,e=Array(d),c=0;c<d;++c)e[c]=[a[c],b[c]];e.sort(m);for(c=0;c<d;++c)a[c]=e[c][0],b[c]=e[c][1]}else a.sort(n);return a}function d(a){if(0===a.length)return[];for(var b=1,d=a.length,e=1;e<d;++e){var c=a[e];n(c,a[e-1])&&(e===b?b++:a[b++]=c)}a.length=b;return a}function w(a,b){for(var d=0,e=a.length-1,c=-1;d<=e;){var g=d+e>>1,k=n(a[g],b);0>=k?(0===k&&(c=g),d=g+1):0<k&&
(e=g-1)}return c}function k(a,b){for(var d=Array(a.length),e=0,c=d.length;e<c;++e)d[e]=[];for(var c=[],e=0,g=b.length;e<g;++e)for(var k=b[e],m=k.length,t=1,f=1<<m;t<f;++t){c.length=r.popCount(t);for(var y=0,D=0;D<m;++D)t&1<<D&&(c[y++]=k[D]);y=w(a,c);if(!(0>y))for(;!(d[y++].push(e),y>=a.length||0!==n(a[y],c)););}return d}function y(a,d){if(0>d)return[];for(var e=[],g=(1<<d+1)-1,c=0;c<a.length;++c)for(var k=a[c],m=g;m<1<<k.length;m=r.nextCombination(m)){for(var n=Array(d+1),t=0,f=0;f<k.length;++f)m&
1<<f&&(n[t++]=k[f]);e.push(n)}return b(e)}"use restrict";var r=a("bit-twiddle"),t=a("union-find");g.dimension=function(a){for(var b=0,d=Math.max,e=0,c=a.length;e<c;++e)b=d(b,a[e].length);return b-1};g.countVertices=function(a){for(var b=-1,d=Math.max,e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,m=g.length;k<m;++k)b=d(b,g[k]);return b+1};g.cloneCells=function(a){for(var b=Array(a.length),d=0,e=a.length;d<e;++d)b[d]=a[d].slice(0);return b};g.compareCells=n;g.normalize=b;g.unique=d;g.findCell=w;g.incidence=
k;g.dual=function(a,b){if(!b)return k(d(y(a,0)),a,0);for(var e=Array(b),g=0;g<b;++g)e[g]=[];for(var g=0,c=a.length;g<c;++g)for(var m=a[g],n=0,r=m.length;n<r;++n)e[m[n]].push(g);return e};g.explode=function(a){for(var d=[],e=0,g=a.length;e<g;++e)for(var c=a[e],k=c.length|0,m=1,n=1<<k;m<n;++m){for(var r=[],f=0;f<k;++f)m>>>f&1&&r.push(c[f]);d.push(r)}return b(d)};g.skeleton=y;g.boundary=function(a){for(var d=[],e=0,g=a.length;e<g;++e)for(var c=a[e],k=0,m=c.length;k<m;++k){for(var n=Array(c.length-1),
r=0,f=0;r<m;++r)r!==k&&(n[f++]=c[r]);d.push(n)}return b(d)};g.connectedComponents=function(a,e){if(e){for(var g=new t(e),k=0;k<a.length;++k)for(var c=a[k],m=0;m<c.length;++m)for(var n=m+1;n<c.length;++n)g.link(c[m],c[n]);c=[];m=g.ranks;for(k=0;k<m.length;++k)m[k]=-1;for(k=0;k<a.length;++k)n=g.find(a[k][0]),0>m[n]?(m[n]=c.length,c.push([a[k].slice(0)])):c[m[n]].push(a[k].slice(0));return c}g=d(b(y(a,0)));k=new t(g.length);for(c=0;c<a.length;++c)for(m=a[c],n=0;n<m.length;++n)for(var r=w(g,[m[n]]),B=
n+1;B<m.length;++B)k.link(r,w(g,[m[B]]));m=[];n=k.ranks;for(c=0;c<n.length;++c)n[c]=-1;for(c=0;c<a.length;++c)r=k.find(w(g,[a[c][0]])),0>n[r]?(n[r]=m.length,m.push([a[c].slice(0)])):m[n[r]].push(a[c].slice(0));return m}},{"bit-twiddle":137,"union-find":138}],140:[function(a,e,g){e.exports=function(a,d,e){function g(a){if(f[a])return Infinity;var b=v[a],c=z[a];if(0>b||0>c)return Infinity;b=d[b];c=d[c];return Math.abs(n(d[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}function y(a,
b){var c=C[a],d=C[b];C[a]=d;C[b]=c;E[c]=b;E[d]=a}function r(a){for(var b=B[C[a]];;){var c=b,d=2*a+1,f=2*(a+1),e=a;if(d<H){var g=B[C[d]];g<c&&(e=d,c=g)}f<H&&B[C[f]]<c&&(e=f);if(e===a)return a;y(a,e);a=e}}function t(a){for(var b=B[C[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<B[C[c]])y(a,c),a=c;else return a}}function u(){if(0<H){var a=C[0];y(0,H-1);--H;r(0);return a}return-1}function q(a,b){var c=C[a];if(B[c]===b)return a;B[c]=-Infinity;t(a);u();B[c]=b;H+=1;return t(H-1)}function l(a){if(!f[a]){f[a]=
!0;var b=v[a];a=z[a];0<=v[a]&&(v[a]=b);0<=z[b]&&(z[b]=a);0<=E[b]&&q(E[b],g(b));0<=E[a]&&q(E[a],g(a))}}function h(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=a[d];if(!f[d]||0>e||e===d)break;d=e;e=a[d];if(!f[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var c=d.length,p=a.length,v=Array(c),z=Array(c),B=Array(c),f=Array(c),x=0;x<c;++x)v[x]=z[x]=-1,B[x]=Infinity,f[x]=!1;for(x=0;x<p;++x){var D=a[x];if(2!==D.length)throw Error("Input must be a graph");var A=D[1],
D=D[0];z[D]=-1!==z[D]?-2:A;v[A]=-1!==v[A]?-2:D}for(var C=[],E=Array(c),x=0;x<c;++x)Infinity>(B[x]=g(x))?(E[x]=C.length,C.push(x)):E[x]=-1;for(var H=C.length,x=H>>1;0<=x;--x)r(x);for(;;){x=u();if(0>x||B[x]>e)break;l(x)}e=[];for(x=0;x<c;++x)f[x]||(E[x]=e.length,e.push(d[x].slice()));var G=[];a.forEach(function(a){var b=h(v,a[0]);a=h(z,a[1]);0<=b&&0<=a&&b!==a&&(b=E[b],a=E[a],b!==a&&G.push([b,a]))});m.unique(m.normalize(G));return{positions:e,edges:G}};var n=a("robust-orientation"),m=a("simplicial-complex")},
{"robust-orientation":136,"simplicial-complex":139}],141:[function(a,e,g){function n(a,b,d){for(var e=0,c=0;c<a;++c)b&1<<c&&(e|=1<<d[c]);return e}function m(a,e,g,h,c,m){function v(a,b){C.push("for(","i"+c[a],"=",b,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function z(a){for(var b=0;b<x;++b)C.push("p"+b,"+=","u"+b+"_"+c[a],";");C.push("}")}function B(){for(var a=1;a<1<<D;++a)C.push(t,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",t,";")}function f(a,b){if(0>a){for(var e=0;e<x;++e)m[e]?C.push("c"+
e+"_0","=","d"+e,".get(","p"+e,");"):C.push("c"+e+"_0","=","d"+e,"[","p"+e,"];");for(var g=[],e=0;e<x;++e)g.push("c"+e+"_0");for(e=0;e<h;++e)g.push("x"+e);C.push("b0","=",w,"[",r,"]=phase(",g.join(),");");for(g=1;g<1<<D;++g)C.push("b"+g,"=",w,"[",r,"+","e"+g,"];");e=[];for(g=1;g<1<<D;++g)e.push("(b0!==b"+g+")");C.push("if(",e.join("||"),"){");for(var l=[],e=0;e<D;++e)l.push("i"+e);for(e=0;e<x;++e)for(l.push("c"+e+"_0"),g=1;g<1<<D;++g)m[e]?C.push("c"+e+"_"+g,"=","d"+e,".get(","p"+e,"+","d"+e+"_"+g,
");"):C.push("c"+e+"_"+g,"=","d"+e,"[","p"+e,"+","d"+e+"_"+g,"];"),l.push("c"+e+"_"+g);for(e=0;e<1<<D;++e)l.push("b"+e);for(e=0;e<h;++e)l.push("x"+e);C.push("vertex(",l.join(),");","v0","=",d,"[",r,"]=",k,"++;");e=(1<<D)-1;l="b"+e;for(g=0;g<D;++g)if(0===(b&~(1<<g))){for(var n=e^1<<g,q="b"+n,t=[],A=n;0<A;A=A-1&n)t.push(d+"["+r+"+"+("e"+A)+"]");t.push("v0");for(A=0;A<x;++A)g&1?t.push("c"+A+"_"+e,"c"+A+"_"+n):t.push("c"+A+"_"+n,"c"+A+"_"+e);g&1?t.push(l,q):t.push(q,l);for(A=0;A<h;++A)t.push("x"+A);C.push("if(",
l,"!==",q,"){","face(",t.join(),")}")}C.push("}",r,"+=1;")}else{for(g=a-1;0<=g;--g)v(g,0);e=[];for(g=0;g<x;++g)m[g]?e.push("d"+g+".get("+("p"+g)+")"):e.push("d"+g+"["+("p"+g)+"]");for(g=0;g<h;++g)e.push("x"+g);C.push(w,"[",r,"++]=phase(",e.join(),");");for(g=0;g<a;++g)z(g);for(g=0;g<x;++g)C.push("p"+g,"+=","u"+g+"_"+c[a],";");C.push("if(","s"+c[a],">0){","i"+c[a],"=1;");f(a-1,b|1<<c[a]);for(g=0;g<x;++g)C.push("p"+g,"+=","u"+g+"_"+c[a],";");a===D-1&&(C.push(r,"=0;"),B());v(a,2);f(a-1,b);a===D-1&&(C.push("if(",
"i"+c[D-1],"&1){",r,"=0;}"),B());z(a);C.push("}")}}var x=m.length,D=c.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var A="extractContour"+c.join("_"),C=[],E=[],H=[],G=0;G<x;++G)H.push("a"+G);for(G=0;G<h;++G)H.push("x"+G);for(G=0;G<D;++G)E.push("s"+G+"=a0.shape["+G+"]|0");for(G=0;G<x;++G){E.push("d"+G+"="+("a"+G)+".data","o"+G+"="+("a"+G)+".offset|0");for(var F=0;F<D;++F)E.push("t"+G+"_"+F+"="+("a"+G)+".stride["+F+"]|0")}for(G=0;G<x;++G)for(E.push("p"+G+"="+
("o"+G)),E.push("c"+G+"_0"),F=1;F<1<<D;++F){for(var I=[],O=0;O<D;++O)F&1<<O&&I.push("-"+("t"+G+"_"+O));E.push("d"+G+"_"+F+"=("+I.join("")+")|0");E.push("c"+G+"_"+F+"=0")}for(G=0;G<x;++G)for(F=0;F<D;++F)O=["t"+G+"_"+c[F]],0<F&&O.push("t"+G+"_"+c[F-1]+"*"+("s"+c[F-1])),E.push("u"+G+"_"+c[F]+"=("+O.join("-")+")|0");for(G=0;G<D;++G)E.push("i"+G+"=0");E.push(k+"=0");F=["2"];for(G=D-2;0<=G;--G)F.push("s"+c[G]);E.push(y+"=("+F.join("*")+")|0",w+"=mallocUint32("+y+")",d+"=mallocUint32("+y+")",r+"=0");E.push("b0=0");
for(F=1;F<1<<D;++F){G=[];I=[];for(O=0;O<D;++O)F&1<<O&&(0===I.length?G.push("1"):G.unshift(I.join("*"))),I.push("s"+c[O]);O="";0>G[0].indexOf("s"+c[D-2])&&(O="-");I=n(D,F,c);E.push("e"+I+"=(-"+G.join("-")+")|0","y"+I+"=("+O+G.join("-")+")|0","b"+I+"=0")}E.push("v0=0",t+"=0");f(D-1,0);C.push("freeUint32(",d,");freeUint32(",w,");");A=["'use strict';function ",A,"(",H.join(),"){var ",E.join(),";",C.join(""),"}return ",A].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",
A))(a,e,g,b.mallocUint32,b.freeUint32)}var b=a("typedarray-pool");e.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var d=a.order;Array.isArray(d)||b("Must specify order");var e=a.arrayArguments||1;1>e&&b("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");
"function"!==typeof a.phase&&b("Must specify phase function");for(var g=a.getters||[],k=Array(e),n=0;n<e;++n)0<=g.indexOf(n)?k[n]=!0:k[n]=!1;return m(a.vertex,a.cell,a.phase,c,d,k)};var d="V",w="P",k="N",y="Q",r="X",t="T"},{"typedarray-pool":144}],142:[function(a,e,g){arguments[4][75][0].apply(g,arguments)},{dup:75}],143:[function(a,e,g){arguments[4][89][0].apply(g,arguments)},{dup:89}],144:[function(a,e,g){(function(e,m){function b(a){if(a){var b=v.log2(a.length||a.byteLength);x[b].push(a)}}function d(a){a=
v.nextPow2(a);var b=v.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function w(a){return new Uint8Array(d(a),0,a)}function k(a){return new Uint16Array(d(2*a),0,a)}function y(a){return new Uint32Array(d(4*a),0,a)}function r(a){return new Int8Array(d(a),0,a)}function t(a){return new Int16Array(d(2*a),0,a)}function u(a){return new Int32Array(d(4*a),0,a)}function q(a){return new Float32Array(d(4*a),0,a)}function l(a){return new Float64Array(d(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(d(a),
0,a):w(a)}function c(a){return new DataView(d(a),0,a)}function p(a){a=v.nextPow2(a);var b=v.log2(a),b=D[b];return 0<b.length?b.pop():new m(a)}var v=a("bit-twiddle"),z=a("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,f=e.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=z([32,0]));f.BUFFER||
(f.BUFFER=z([32,0]));var x=f.DATA,D=f.BUFFER;g.free=function(a){if(m.isBuffer(a))D[v.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=v.log2(a.length||a.byteLength)|0;x[b].push(a)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=function(a){b(a.buffer)};g.freeArrayBuffer=b;g.freeBuffer=function(a){D[v.log2(a.length)].push(a)};
g.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return w(a);case "uint16":return k(a);case "uint32":return y(a);case "int8":return r(a);case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return q(a);case "double":case "float64":return l(a);case "uint8_clamped":return h(a);case "buffer":return p(a);case "data":case "dataview":return c(a);default:return null}};g.mallocArrayBuffer=d;g.mallocUint8=w;g.mallocUint16=k;g.mallocUint32=
y;g.mallocInt8=r;g.mallocInt16=t;g.mallocInt32=u;g.mallocFloat32=g.mallocFloat=q;g.mallocFloat64=g.mallocDouble=l;g.mallocUint8Clamped=h;g.mallocDataView=c;g.mallocBuffer=p;g.clearCache=function(){for(var a=0;32>a;++a)f.UINT8[a].length=0,f.UINT16[a].length=0,f.UINT32[a].length=0,f.INT8[a].length=0,f.INT16[a].length=0,f.INT32[a].length=0,f.FLOAT[a].length=0,f.DOUBLE[a].length=0,f.UINT8C[a].length=0,x[a].length=0,D[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":142,buffer:33,dup:143}],145:[function(a,e,g){function n(a){if(0>a)return Number("0/0");for(var e=b[0],g=b.length-1;0<g;--g)e+=b[g]/(a+g);g=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(g)-g+Math.log(e)-Math.log(a)}var m=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],b=[.9999999999999971,
57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];e.exports=function w(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*w(1-a));if(100<a)return Math.exp(n(a));--a;for(var b=m[0],e=1;9>e;e++)b+=m[e]/(a+e);e=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(e,a+.5)*Math.exp(-e)*
b};e.exports.log=n},{}],146:[function(a,e,g){arguments[4][75][0].apply(g,arguments)},{dup:75}],147:[function(a,e,g){arguments[4][89][0].apply(g,arguments)},{dup:89}],148:[function(a,e,g){(function(e,m){function b(a){if(a){var b=v.log2(a.length||a.byteLength);x[b].push(a)}}function d(a){a=v.nextPow2(a);var b=v.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function w(a){return new Uint8Array(d(a),0,a)}function k(a){return new Uint16Array(d(2*a),0,a)}function y(a){return new Uint32Array(d(4*
a),0,a)}function r(a){return new Int8Array(d(a),0,a)}function t(a){return new Int16Array(d(2*a),0,a)}function u(a){return new Int32Array(d(4*a),0,a)}function q(a){return new Float32Array(d(4*a),0,a)}function l(a){return new Float64Array(d(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(d(a),0,a):w(a)}function c(a){return new DataView(d(a),0,a)}function p(a){a=v.nextPow2(a);var b=v.log2(a),b=D[b];return 0<b.length?b.pop():new m(a)}var v=a("bit-twiddle"),z=a("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL=
{UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,f=e.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=z([32,0]));f.BUFFER||(f.BUFFER=z([32,0]));var x=f.DATA,D=f.BUFFER;g.free=function(a){if(m.isBuffer(a))D[v.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=v.log2(a.length||
a.byteLength)|0;x[b].push(a)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=function(a){b(a.buffer)};g.freeArrayBuffer=b;g.freeBuffer=function(a){D[v.log2(a.length)].push(a)};g.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return w(a);case "uint16":return k(a);case "uint32":return y(a);case "int8":return r(a);case "int16":return t(a);case "int32":return u(a);
case "float":case "float32":return q(a);case "double":case "float64":return l(a);case "uint8_clamped":return h(a);case "buffer":return p(a);case "data":case "dataview":return c(a);default:return null}};g.mallocArrayBuffer=d;g.mallocUint8=w;g.mallocUint16=k;g.mallocUint32=y;g.mallocInt8=r;g.mallocInt16=t;g.mallocInt32=u;g.mallocFloat32=g.mallocFloat=q;g.mallocFloat64=g.mallocDouble=l;g.mallocUint8Clamped=h;g.mallocDataView=c;g.mallocBuffer=p;g.clearCache=function(){for(var a=0;32>a;++a)f.UINT8[a].length=
0,f.UINT16[a].length=0,f.UINT32[a].length=0,f.INT8[a].length=0,f.INT16[a].length=0,f.INT32[a].length=0,f.FLOAT[a].length=0,f.DOUBLE[a].length=0,f.UINT8C[a].length=0,x[a].length=0,D[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":146,buffer:33,dup:147}],149:[function(a,e,g){e.exports=function(a){var d=a.length;if(d<n)for(var e=1,g=0;g<d;++g)for(var y=0;y<g;++y)if(a[g]<a[y])e=-e;else{if(a[g]===
a[y])return 0}else{for(var r=m.mallocUint8(d),g=0;g<d;++g)r[g]=0;e=1;for(g=0;g<d;++g)if(!r[g]){var t=1;r[g]=1;for(y=a[g];y!==g;y=a[y]){if(r[y])return m.freeUint8(r),0;t+=1;r[y]=1}t&1||(e=-e)}m.freeUint8(r)}return e};var n=32,m=a("typedarray-pool")},{"typedarray-pool":148}],150:[function(a,e,g){var n=a("typedarray-pool"),m=a("invert-permutation");g.rank=function(a){var d=a.length;switch(d){case 0:case 1:return 0;case 2:return a[1]}var e=n.mallocUint32(d),g=n.mallocUint32(d),y=0,r;m(a,g);for(r=0;r<
d;++r)e[r]=a[r];for(r=d-1;0<r;--r)d=g[r],a=e[r],e[r]=e[d],e[d]=a,g[r]=g[a],g[a]=d,y=(y+a)*r;n.freeUint32(g);n.freeUint32(e);return y};g.unrank=function(a,d,e){switch(a){case 0:return e?e:[];case 1:return e?(e[0]=0,e):[0];case 2:return e?(d?(e[0]=0,e[1]=1):(e[0]=1,e[1]=0),e):d?[0,1]:[1,0]}e=e||Array(a);var g,m,n=1;e[0]=0;for(m=1;m<a;++m)e[m]=m,n=n*m|0;for(m=a-1;0<m;--m)a=d/n|0,d=d-a*n|0,n=n/m|0,g=e[m]|0,e[m]=e[a]|0,e[a]=g|0;return e}},{"invert-permutation":151,"typedarray-pool":154}],151:[function(a,
e,g){e.exports=function(a,e){e=e||Array(a.length);for(var b=0;b<a.length;++b)e[a[b]]=b;return e}},{}],152:[function(a,e,g){arguments[4][75][0].apply(g,arguments)},{dup:75}],153:[function(a,e,g){arguments[4][89][0].apply(g,arguments)},{dup:89}],154:[function(a,e,g){(function(e,m){function b(a){if(a){var b=v.log2(a.length||a.byteLength);x[b].push(a)}}function d(a){a=v.nextPow2(a);var b=v.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function w(a){return new Uint8Array(d(a),0,a)}function k(a){return new Uint16Array(d(2*
a),0,a)}function y(a){return new Uint32Array(d(4*a),0,a)}function r(a){return new Int8Array(d(a),0,a)}function t(a){return new Int16Array(d(2*a),0,a)}function u(a){return new Int32Array(d(4*a),0,a)}function q(a){return new Float32Array(d(4*a),0,a)}function l(a){return new Float64Array(d(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(d(a),0,a):w(a)}function c(a){return new DataView(d(a),0,a)}function p(a){a=v.nextPow2(a);var b=v.log2(a),b=D[b];return 0<b.length?b.pop():new m(a)}var v=a("bit-twiddle"),
z=a("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,f=e.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=z([32,0]));f.BUFFER||(f.BUFFER=z([32,0]));var x=f.DATA,D=f.BUFFER;g.free=function(a){if(m.isBuffer(a))D[v.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=v.log2(a.length||a.byteLength)|0;x[b].push(a)}};g.freeUint8=g.freeUint16=g.freeUint32=g.freeInt8=g.freeInt16=g.freeInt32=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=function(a){b(a.buffer)};g.freeArrayBuffer=b;g.freeBuffer=function(a){D[v.log2(a.length)].push(a)};g.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return w(a);case "uint16":return k(a);case "uint32":return y(a);case "int8":return r(a);
case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return q(a);case "double":case "float64":return l(a);case "uint8_clamped":return h(a);case "buffer":return p(a);case "data":case "dataview":return c(a);default:return null}};g.mallocArrayBuffer=d;g.mallocUint8=w;g.mallocUint16=k;g.mallocUint32=y;g.mallocInt8=r;g.mallocInt16=t;g.mallocInt32=u;g.mallocFloat32=g.mallocFloat=q;g.mallocFloat64=g.mallocDouble=l;g.mallocUint8Clamped=h;g.mallocDataView=c;g.mallocBuffer=p;g.clearCache=
function(){for(var a=0;32>a;++a)f.UINT8[a].length=0,f.UINT16[a].length=0,f.UINT32[a].length=0,f.INT8[a].length=0,f.INT16[a].length=0,f.INT32[a].length=0,f.FLOAT[a].length=0,f.DOUBLE[a].length=0,f.UINT8C[a].length=0,x[a].length=0,D[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":152,buffer:33,dup:153}],155:[function(a,e,g){e.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var e=
Math.round(b(a+1))|0,g=[],y=0;y<e;++y){for(var r=n.unrank(a,y),t=[0],u=0,q=0;q<r.length;++q)u+=1<<r[q],t.push(u);1>m(r)&&(t[0]=u,t[a]=0);g.push(t)}return g};var n=a("permutation-rank"),m=a("permutation-parity"),b=a("gamma")},{gamma:145,"permutation-parity":149,"permutation-rank":150}],156:[function(a,e,g){e.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],157:[function(a,e,g){function n(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var m=a("./lib/thunk.js");e.exports=function(a){var d=new n;d.pre=a.pre;d.body=a.body;d.post=a.post;var e=a.args.slice(0);d.argTypes=e;for(var g=0;g<e.length;++g){var y=e[g];if("array"===y||"object"===typeof y&&y.blockIndices){d.argTypes[g]="array";d.arrayArgs.push(g);d.arrayBlockIndices.push(y.blockIndices?y.blockIndices:0);d.shimArgs.push("array"+g);if(g<
d.pre.args.length&&0<d.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<d.post.args.length&&0<d.post.args[g].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===y)d.scalarArgs.push(g),d.shimArgs.push("scalar"+g);else if("index"===y){d.indexArgs.push(g);if(g<d.pre.args.length&&0<d.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<d.body.args.length&&d.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");
if(g<d.post.args.length&&0<d.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===y){d.shapeArgs.push(g);if(g<d.pre.args.length&&d.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<d.body.args.length&&d.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<d.post.args.length&&d.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof y&&y.offset)d.argTypes[g]="offset",d.offsetArgs.push({array:y.array,offset:y.offset}),d.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+e[g]);}if(0>=d.arrayArgs.length)throw Error("cwise: No array arguments specified");if(d.pre.args.length>e.length)throw Error("cwise: Too many arguments in pre() block");if(d.body.args.length>e.length)throw Error("cwise: Too many arguments in body() block");if(d.post.args.length>e.length)throw Error("cwise: Too many arguments in post() block");
d.debug=!!a.printCode||!!a.debug;d.funcName=a.funcName||"cwise";d.blockSize=a.blockSize||64;return m(d)}},{"./lib/thunk.js":159}],158:[function(a,e,g){function n(a,b,d){var e=a.length,g=b.arrayArgs.length;b=0<b.indexArgs.length;var m=[],l=[],h=0,c=0,n,v;for(n=0;n<e;++n)l.push(["i",n,"=0"].join(""));for(v=0;v<g;++v)for(n=0;n<e;++n)c=h,h=a[n],0===n?l.push(["d",v,"s",n,"=t",v,"p",h].join("")):l.push(["d",v,"s",n,"=(t",v,"p",h,"-s",c,"*t",v,"p",c,")"].join(""));m.push("var "+l.join(","));for(n=e-1;0<=
n;--n)h=a[n],m.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));m.push(d);for(n=0;n<e;++n){c=h;h=a[n];for(v=0;v<g;++v)m.push(["p",v,"+=d",v,"s",n].join(""));b&&(0<n&&m.push(["index[",c,"]-=s",c].join("")),m.push(["++index[",h,"]"].join("")));m.push("}")}return m.join("\n")}function m(a,b,d,e){for(var g=b.length,m=d.arrayArgs.length,l=d.blockSize,h=0<d.indexArgs.length,c=[],p=0;p<m;++p)c.push(["var offset",p,"=p",p].join(""));for(p=a;p<g;++p)c.push(["for(var j"+p+"=SS[",b[p],"]|0;j",p,">0;){"].join("")),
c.push(["if(j",p,"<",l,"){"].join("")),c.push(["s",b[p],"=j",p].join("")),c.push(["j",p,"=0"].join("")),c.push(["}else{s",b[p],"=",l].join("")),c.push(["j",p,"-=",l,"}"].join("")),h&&c.push(["index[",b[p],"]=j",p].join(""));for(p=0;p<m;++p){l=["offset"+p];for(h=a;h<g;++h)l.push(["j",h,"*t",p,"p",b[h]].join(""));c.push(["p",p,"=(",l.join("+"),")"].join(""))}c.push(n(b,d,e));for(p=a;p<g;++p)c.push("}");return c.join("\n")}function b(a,b,d){for(var e=a.body,g=[],m=[],l=0;l<a.args.length;++l){var h=a.args[l];
if(!(0>=h.count)){var c=new RegExp(h.name,"g"),n="",v=b.arrayArgs.indexOf(l);switch(b.argTypes[l]){case "offset":var w=b.offsetArgIndex.indexOf(l),v=b.offsetArgs[w].array,n="+q"+w;case "array":var n="p"+v+n,B="l"+l,w="a"+v;if(0===b.arrayBlockIndices[v])1===h.count?"generic"===d[v]?h.lvalue?(g.push(["var ",B,"=",w,".get(",n,")"].join("")),e=e.replace(c,B),m.push([w,".set(",n,",",B,")"].join(""))):e=e.replace(c,[w,".get(",n,")"].join("")):e=e.replace(c,[w,"[",n,"]"].join("")):"generic"===d[v]?(g.push(["var ",
B,"=",w,".get(",n,")"].join("")),e=e.replace(c,B),h.lvalue&&m.push([w,".set(",n,",",B,")"].join(""))):(g.push(["var ",B,"=",w,"[",n,"]"].join("")),e=e.replace(c,B),h.lvalue&&m.push([w,"[",n,"]=",B].join("")));else{c=[h.name];h=[n];for(n=0;n<Math.abs(b.arrayBlockIndices[v]);n++)c.push("\\s*\\[([^\\]]+)\\]"),h.push("$"+(n+1)+"*t"+v+"b"+n);c=new RegExp(c.join(""),"g");n=h.join("+");if("generic"===d[v])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(c,[w,"[",
n,"]"].join(""))}break;case "scalar":e=e.replace(c,"Y"+b.scalarArgs.indexOf(l));break;case "index":e=e.replace(c,"index");break;case "shape":e=e.replace(c,"shape")}}}return[g.join("\n"),e,m.join("\n")].join("\n").trim()}function d(a){for(var b=Array(a.length),d=!0,e=0;e<a.length;++e){var g=a[e],m=g.match(/\d+/),m=m?m[0]:"";0===g.charAt(0)?b[e]="u"+g.charAt(1)+m:b[e]=g.charAt(0)+m;0<e&&(d=d&&b[e]===b[e-1])}return d?b[0]:b.join("")}var w=a("uniq");e.exports=function(a,e){for(var g=e[1].length-Math.abs(a.arrayBlockIndices[0])|
0,t=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),q=0;q<a.arrayArgs.length;++q)u[q]=e[2*q],t[q]=e[2*q+1];for(var l=[],h=[],c=[],p=[],v=[],q=0;q<a.arrayArgs.length;++q){0>a.arrayBlockIndices[q]?(c.push(0),p.push(g),l.push(g),h.push(g+a.arrayBlockIndices[q])):(c.push(a.arrayBlockIndices[q]),p.push(a.arrayBlockIndices[q]+g),l.push(0),h.push(a.arrayBlockIndices[q]));for(var z=[],B=0;B<t[q].length;B++)c[q]<=t[q][B]&&t[q][B]<p[q]&&z.push(t[q][B]-c[q]);v.push(z)}h=["SS"];p=["'use strict'"];z=[];
for(B=0;B<g;++B)z.push(["s",B,"=SS[",B,"]"].join(""));for(q=0;q<a.arrayArgs.length;++q){h.push("a"+q);h.push("t"+q);h.push("p"+q);for(B=0;B<g;++B)z.push(["t",q,"p",B,"=t",q,"[",c[q]+B,"]"].join(""));for(B=0;B<Math.abs(a.arrayBlockIndices[q]);++B)z.push(["t",q,"b",B,"=t",q,"[",l[q]+B,"]"].join(""))}for(q=0;q<a.scalarArgs.length;++q)h.push("Y"+q);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){B=Array(g);for(q=0;q<g;++q)B[q]="0";z.push(["index=[",B.join(","),"]"].join(""))}for(q=
0;q<a.offsetArgs.length;++q){l=a.offsetArgs[q];c=[];for(B=0;B<l.offset.length;++B)0!==l.offset[B]&&(1===l.offset[B]?c.push(["t",l.array,"p",B].join("")):c.push([l.offset[B],"*t",l.array,"p",B].join("")));0===c.length?z.push("q"+q+"=0"):z.push(["q",q,"=",c.join("+")].join(""))}q=w([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(q);p.push("var "+z.join(","));for(q=0;q<a.arrayArgs.length;++q)p.push("p"+q+"|=0");3<a.pre.body.length&&p.push(b(a.pre,a,u));q=b(a.body,
a,u);a:for(B=0,z=v[0].length;B<z;){for(l=1;l<v.length;++l)if(v[l][B]!==v[0][B])break a;++B}B<g?p.push(m(B,v[0],a,q)):p.push(n(v[0],a,q));3<a.post.body.length&&p.push(b(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");g=[a.funcName||"unnamed","_cwise_loop_",t[0].join("s"),"m",B,d(u)].join("");return(new Function(["function ",g,"(",h.join(","),"){",p.join("\n"),"} return ",g].join("")))()}},{uniq:160}],159:[function(a,e,g){var n=a("./compile.js");
e.exports=function(a){var b=["'use strict'","var CACHED={}"],d=[];b.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var e=[],g=[],y=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],r=[],t=[],u=0;u<a.arrayArgs.length;++u){var q=a.arrayArgs[u];d.push(["t",q,"=array",q,".dtype,r",q,"=array",q,".order"].join(""));e.push("t"+q);e.push("r"+q);g.push("t"+q);g.push("r"+
q+".join()");y.push("array"+q+".data");y.push("array"+q+".stride");y.push("array"+q+".offset|0");0<u&&(r.push("array"+a.arrayArgs[0]+".shape.length===array"+q+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),t.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+q+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(b.push("if (!("+r.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(u=0;u<a.scalarArgs.length;++u)y.push("scalar"+a.scalarArgs[u]);d.push(["type=[",g.join(","),"].join()"].join(""));d.push("proc=CACHED[type]");b.push("var "+d.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",e.join(","),"])}return proc(",y.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(n.bind(void 0,a))}},{"./compile.js":158}],160:[function(a,e,g){arguments[4][129][0].apply(g,arguments)},{dup:129}],161:[function(a,e,g){e.exports=function(a,b){var d=[];b=+b||0;n(a.hi(a.shape[0]-1),d,b);return d};var n=a("./lib/zc-core")},{"./lib/zc-core":156}],162:[function(a,e,g){function n(a,d){var e=a.length,g=["'use strict';"],n="surfaceNets"+a.join("_")+"d"+
d;g.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===d&&g.push("getters:[0],");for(var q=[],l=[],h=0;h<e;++h)q.push("d"+h),l.push("d"+h);for(h=0;h<1<<e;++h)q.push("v"+h),l.push("v"+h);for(h=0;h<1<<e;++h)q.push("p"+h),l.push("p"+h);q.push("a","b","c");l.push("a","c");g.push("vertex:function vertexFunc(",q.join(),"){");q=[];for(h=0;h<1<<e;++h)q.push("(p"+h+"<<"+h+")");g.push("var m=(",q.join("+"),")|0;if(m===0||m===",
(1<<(1<<e))-1,"){return}");var q=[],c=[];128>=1<<(1<<e)?(g.push("switch(m){"),c=g):g.push("switch(m>>>7){");for(h=0;h<1<<(1<<e);++h){128<1<<(1<<e)&&0===h%128&&(0<q.length&&c.push("}}"),c="vExtra"+q.length,g.push("case ",h>>>7,":",c,"(m&0x7f,",l.join(),");break;"),c=["function ",c,"(m,",l.join(),"){switch(m){"],q.push(c));c.push("case ",h&127,":");for(var p=Array(e),v=Array(e),w=Array(e),B=Array(e),f=0,x=0;x<e;++x)p[x]=[],v[x]=[],w[x]=0,B[x]=0;for(x=0;x<1<<e;++x)for(var D=0;D<e;++D){var A=x^1<<D;if(!(A>
x)&&!(h&1<<A)!==!(h&1<<x)){var C=1;h&1<<A?v[D].push("v"+A+"-v"+x):(v[D].push("v"+x+"-v"+A),C=-C);0>C?(p[D].push("-v"+x+"-v"+A),w[D]+=2):(p[D].push("v"+x+"+v"+A),w[D]-=2);f+=1;for(C=0;C<e;++C)C!==D&&(A&1<<C?B[C]+=1:--B[C])}}x=[];for(D=0;D<e;++D)0===p[D].length?x.push("d"+D+"-0.5"):(A="",0>w[D]?A=w[D]+"*c":0<w[D]&&(A="+"+w[D]+"*c"),x.push("d"+D+"-"+(.5+B[D]/f*.5)+"-"+p[D].length/f*.5+"*("+p[D].join("+")+A+")/("+v[D].join("+")+")"));c.push("a.push([",x.join(),"]);","break;")}g.push("}},");0<q.length&&
c.push("}}");l=[];for(h=0;h<1<<e-1;++h)l.push("v"+h);l.push("c0","c1","p0","p1","a","b","c");g.push("cell:function cellFunc(",l.join(),"){");e=b(e-1);g.push("if(p0){b.push(",e.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",e.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",n,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",n,
";");for(h=0;h<q.length;++h)g.push(q[h].join(""));return(new Function("genContour",g.join("")))(m)}e.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var e=d(a,b),g=e.length,m=Array(g),q=Array(g),l=0;l<g;++l)m[l]=[e[l]],q[l]=[l];return{positions:m,cells:q}}e=a.order.join()+"-"+a.dtype;g=w[e];b=+b||0;g||(g=w[e]=n(a.order,a.dtype));return g(a,b)};var m=a("ndarray-extract-contour"),b=a("triangulate-hypercube"),d=a("zero-crossings"),w={}},{"ndarray-extract-contour":141,
"triangulate-hypercube":155,"zero-crossings":161}],163:[function(a,e,g){var n=a("./lib/util/extend"),m=a("./lib/webgl"),b=a("./lib/strings"),d=a("./lib/extension"),w=a("./lib/limits"),k=a("./lib/buffer"),y=a("./lib/elements"),r=a("./lib/texture"),t=a("./lib/renderbuffer"),u=a("./lib/framebuffer"),q=a("./lib/uniform"),l=a("./lib/attribute"),h=a("./lib/shader"),c=a("./lib/draw"),p=a("./lib/state"),v=a("./lib/compile"),z=a("./lib/read"),B=a("./lib/dynamic"),f=a("./lib/util/raf"),x=a("./lib/util/clock");
e.exports=function(){function a(){ia=f.next(a);J.count+=1;ca.count=J.count;if(J.width!==I.drawingBufferWidth||J.height!==I.drawingBufferHeight)ca.viewportWidth=ca.drawingBufferWidth=J.width=I.drawingBufferWidth,ca.viewportHeight=ca.drawingBufferHeight=J.height=I.drawingBufferHeight,da.notifyViewportChanged();var b=x();J.dt=b-J.t;J.t=b;ca.deltaTime=J.dt/1E3;ca.time=(b-U)/1E3;W.poll();for(var c=0;c<ha.length;++c)(0,ha[c])(null,ca);J.renderTime=x()-b}function e(){ia&&(f.cancel(a),ia=0)}function g(a){e();
a.preventDefault();if(O.onContextLost)O.onContextLost()}function E(b){I.getError();N.refresh();R.refresh();W.refresh();L.refresh();P.refresh();ga.refresh();da.refresh();if(O.onContextRestored)O.onContextRestored();a()}function H(a){function b(a){var c={},e={};Object.keys(a).forEach(function(b){var f=a[b];B.isDynamic(f)?(d=!0,e[b]=B.unbox(f,b)):c[b]=f});return{dynamic:e,"static":c}}function c(a){for(;m.length<a;)m.push(null);return m}var d=!1,e=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||
{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var e=ma.command(a["static"],f["static"],g["static"],a.dynamic,f.dynamic,g.dynamic,e,d),h=e.draw,k=e.batch,l=e.scope,m=[];return function(a,b){return"function"===typeof a?l.call(this,null,a):"function"===typeof b?
l.call(this,a,b):"number"===typeof a?k.call(this,a|0,c(a|0)):Array.isArray(a)?k.call(this,a.length,a):h.call(this,a)}}function G(){P.poll();da.poll()}var F=m(Array.prototype.slice.call(arguments)),I=F.gl,O=F.options,F=b(),N=d(I),T=N.extensions,K={width:I.drawingBufferWidth,height:I.drawingBufferHeight},M=w(I,T),R=k(I,function(a){for(var b=0;b<fa.bindings.length;++b){var c=fa.bindings[b];c.pointer&&c.buffer===a&&(c.pointer=!1,c.buffer=null,c.x=c.y=c.z=c.w=NaN,I.disableVertexAttribArray(b))}}),S=y(I,
T,R),aa=q(F),fa=l(I,T,M,R,F),ga=h(I,fa,aa,function(a){return ma.draw(a)},F),Z=c(I,T,R),W=r(I,T,M,G,K),L=t(I,T,M),P=u(I,T,M,W,L),U=x(),J={count:0,start:U,dt:0,t:U,renderTime:0,width:I.drawingBufferWidth,height:I.drawingBufferHeight,pixelRatio:O.pixelRatio},ca={count:0,batchId:0,deltaTime:0,time:0,viewportWidth:J.width,viewportHeight:J.height,drawingBufferWidth:J.width,drawingBufferHeight:J.height,pixelRatio:J.pixelRatio},da=p(I,P,K),K=z(I,G,K),ma=v(I,F,T,M,R,S,W,P,da,aa,fa,ga,Z,ca,G),Y=I.canvas,ha=
[],ia=0;Y&&(Y.addEventListener("webglcontextlost",g,!1),Y.addEventListener("webglcontextrestored",E,!1));return n(H,{clear:function(a){var b=0;G();var c=a.color;c&&(I.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(I.clearDepth(+a.depth),b|=256);"stencil"in a&&(I.clearStencil(a.stencil|0),b|=1024);I.clear(b)},prop:B.define.bind(null,1),context:B.define.bind(null,2),"this":B.define.bind(null,3),draw:H({}),elements:function(a){return S.create(a)},buffer:function(a){return R.create(a,
34962)},texture:function(a){return W.create(a,3553)},cube:function(a){return 6===arguments.length?W.create(Array.prototype.slice.call(arguments),34067):W.create(a,34067)},renderbuffer:function(a){return L.create(a)},framebuffer:function(a){return P.create(a)},framebufferCube:function(a){},frame:function(b){ha.push(b);!ia&&0<ha.length&&a();return{cancel:function(){var a=ha.find(function(a){return a===b});0>a||(ha.splice(a,1),0>=ha.length&&e())}}},stats:J,limits:M,read:K,destroy:function(){e();Y&&(Y.removeEventListener("webglcontextlost",
g),Y.removeEventListener("webglcontextrestored",E));ga.clear();P.clear();L.clear();W.clear();R.clear();if(O.onDestroy)O.onDestroy()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/compile":4,"./lib/draw":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/state":17,"./lib/strings":18,"./lib/texture":19,"./lib/uniform":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":28,
"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>