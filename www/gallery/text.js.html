<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==a.length?{done:!0}:{done:!1,value:a[h++]}}}};
$jscomp.arrayFromIterator=function(a){for(var h,p=[];!(h=a.next()).done;)p.push(h.value);return p};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,h){function p(){}p.prototype=h.prototype;a.prototype=new p;a.prototype.constructor=a;for(var t in h)if($jscomp.global.Object.defineProperties){var n=$jscomp.global.Object.getOwnPropertyDescriptor(h,t);n&&$jscomp.global.Object.defineProperty(a,t,n)}else a[t]=h[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,h){a instanceof String&&(a=String(a));var p=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},n=(t.next=function(){if(p<a.length){var d=p++;return{value:h(d,a[d]),done:!1}}n.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return n},t);return n};
$jscomp.array.findInternal_=function(a,h,p){a instanceof String&&(a=String(a));for(var t=a.length,n=0;n<t;n++){var d=a[n];if(h.call(p,d,n,a))return{i:n,v:d}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,h,p){h=void 0===h?function(d){return d}:h;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var n;!(n=a.next()).done;)t.push(h.call(p,n.value))}else{n=a.length;for(var d=0;d<n;d++)t.push(h.call(p,a[d]))}return t};$jscomp.array.of=function(a){for(var h=[],p=0;p<arguments.length;++p)h[p-0]=arguments[p];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return[a,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,h,p){var t=this.length;a=Number(a);h=Number(h);p=Number(null!=p?p:t);if(a<h)for(p=Math.min(p,t);h<p;)h in this?this[a++]=this[h++]:(delete this[a++],h++);else for(p=Math.min(p,t+h-a),a+=p-h;p>h;)--p in this?this[--a]=this[p]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,h,p){null!=p&&a.length||(p=this.length||0);p=Number(p);for(h=Number((void 0===h?0:h)||0);h<p;h++)this[h]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,h){return $jscomp.array.findInternal_(this,a,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,h){return $jscomp.array.findInternal_(this,a,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),p=new a($jscomp.makeIterator([[h,"s"]]));if("s"!=p.get(h)||1!=p.size||p.get({x:4})||p.set({x:4},"t")!=p||2!=p.size)return!1;var t=p.entries(),n=t.next();if(n.done||n.value[0]!=h||"s"!=n.value[1])return!1;n=t.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!t.next().done?!1:!0}catch(d){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,h){var p=this.maybeGetEntry_(a),t=p.id,n=p.list,p=p.entry;n||(n=this.data_[t]=[]);p?p.value=h:(p={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:h},n.push(p),this.head_.previous.next=p,this.head_.previous=p,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var h=this.maybeGetEntry_(a);a=h.id;var p=h.list,t=h.index;return(h=h.entry)&&p?(p.splice(t,1),p.length||delete this.data_[a],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var h=$jscomp.Map.getId_(a),p=this.data_[h];if(p)for(var t=0;t<p.length;t++){var n=p[t];if(a!==a&&n.key!==n.key||a===n.key)return{id:h,list:p,index:t,entry:n}}return{id:h,list:p,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,h){for(var p=$jscomp.makeIterator(this.entries()),t=p.next();!t.done;t=p.next())t=t.value,a.call(h,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var h=this,p=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(p){for(;p.head!=h.head_;)p=p.previous;for(;p.next!=p.head;)return p=p.next,{done:!1,value:a(p)};p=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,h,p){Object.defineProperty(a,h,{value:String(p)})}:function(a,h,p){a[h]=String(p)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var h=0;0===(a&4294901760)&&(a<<=16,h+=16);0===(a&4278190080)&&(a<<=8,h+=8);0===(a&4026531840)&&(a<<=4,h+=4);0===(a&3221225472)&&(a<<=2,h+=2);0===(a&2147483648)&&h++;return h};$jscomp.math.imul=function(a,h){a=Number(a);h=Number(h);var p=a&65535,t=h&65535;return p*t+((a>>>16&65535)*t+p*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,p=1,t=a,n=0,d=1;n!=t;)h*=a,d*=-1,t=(n=t)+d*h/++p;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,p=1,t=a,n=0;n!=t;)h*=a/++p,t=(n=t)+h;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var h=Math.exp(2*-Math.abs(a)),h=(1-h)/(1+h);return 0>a?-h:h};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var h=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-h:h};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,h,p){for(var t=[],n=2;n<arguments.length;++n)t[n-2]=arguments[n];a=Number(a);h=Number(h);for(var d=Math.max(Math.abs(a),Math.abs(h)),f=$jscomp.makeIterator(t),n=f.next();!n.done;n=f.next())d=Math.max(d,Math.abs(n.value));if(1E100<d||1E-100>d){a/=d;h/=d;f=a*a+h*h;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n)/d,f+=n*n;return Math.sqrt(f)*d}d=a*a+h*h;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n),d+=
n*n;return Math.sqrt(d)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var h=Math.floor(Math.abs(a));return 0>a?-h:h};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var h=Math.pow(Math.abs(a),1/3);return 0>a?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,h){for(var p=[],t=1;t<arguments.length;++t)p[t-1]=arguments[t];p=$jscomp.makeIterator(p);for(t=p.next();!t.done;t=p.next())if(t=t.value)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a};$jscomp.object.is=function(a,h){return a===h?0!==a||1/a===1/h:a!==a&&h!==h};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),a=new a($jscomp.makeIterator([h]));if(a.has(h)||1!=a.size||a.add(h)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),p=a.next();if(p.done||p.value[0]!=h||p.value[1]!=h)return!1;p=a.next();return p.done||p.value[0]==h||4!=p.value[0].x||p.value[1]!=p.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,h){var p=this;this.map_.forEach(function(t){return a.call(h,t,t,p)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,h){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var h=[],p=0;p<arguments.length;++p)h[p-0]=arguments[p];for(var p="",h=$jscomp.makeIterator(h),t=h.next();!t.done;t=h.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?p+=String.fromCharCode(t):(t-=65536,p+=String.fromCharCode(t>>>10&1023|55296),p+=String.fromCharCode(t&1023|56320))}return p};
$jscomp.string.repeat=function(a){var h=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var p="";a;)if(a&1&&(p+=h),a>>>=1)h+=h;return p};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var h=this.toString(),p=h.length;a=Number(a)||0;if(0<=a&&a<p){a|=0;var t=h.charCodeAt(a);if(55296>t||56319<t||a+1===p)return t;a=h.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"startsWith");var p=this.toString();a+="";for(var t=p.length,n=a.length,d=Math.max(0,Math.min(h|0,p.length)),f=0;f<n&&d<t;)if(p[d++]!=a[f++])return!1;return f>=n};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,h){$jscomp.string.noRegExp_(a,"endsWith");var p=this.toString();a+="";void 0===h&&(h=p.length);for(var t=Math.max(0,Math.min(h|0,p.length)),n=a.length;0<n&&0<t;)if(p[--t]!=a[--n])return!1;return 0>=n};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(h,p,t){function n(f,l){if(!p[f]){if(!h[f]){var y="function"==typeof require&&require;if(!l&&y)return y(f,!0);if(d)return d(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=p[f]={exports:{}};h[f][0].call(y.exports,function(d){var l=h[f][1][d];return n(l?l:d)},y,y.exports,e$$0,h,p,t)}return p[f].exports}for(var d="function"==typeof require&&require,f=0;f<t.length;f++)n(t[f]);return n})({1:[function(a,h,p){h=a("../regl")();p=a("vectorize-text");var t=a("gl-mat4/perspective"),
n=a("gl-mat4/lookAt");a=p("hello regl!",{textAlign:"center",textBaseline:"middle"});var d=h.texture({copy:!0,min:"linear",mag:"linear"}),f=h({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d,t:function(d){return.001*d.tick}},depth:{enable:!1},count:3}),g=h({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.tick},view:function(d){d=.01*d.tick;return n([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return t([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});h.frame(function(){f();g();d({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":79,"gl-mat4/perspective":80,"vectorize-text":124}],2:[function(a,h,p){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}h.exports=function(a,d,f,g,l){a=f.maxAttributes;d=Array(a);for(f=0;f<a;++f)d[f]=new t;return{Record:t,scope:{},state:d}}},{}],3:[function(a,h,p){function t(b){return w[Object.prototype.toString.call(b)]|0}function n(b,e){for(var d=0;d<e.length;++d)b[d]=e[d]}function d(b,d,f,k,g,l,c){for(var a=0,r=0;r<f;++r)for(var n=0;n<k;++n)b[a++]=d[g*r+l*n+c]}function f(b,d,f){for(var k=0,g=0;g<d.length;++g)for(var l=d[g],c=0;c<
f;++c)b[k++]=l[c]}var g=a("./util/is-typed-array"),l=a("./util/is-ndarray"),y=a("./util/values"),v=a("./util/pool"),w=a("./constants/arraytypes.json"),u=a("./constants/dtypes.json"),r=a("./constants/usage.json"),k=[];k[5120]=1;k[5122]=2;k[5124]=4;k[5121]=1;k[5123]=2;k[5125]=4;k[5126]=4;h.exports=function(b,e,m){function q(c){this.id=x++;this.buffer=b.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;m.profile&&(this.stats={size:0})}function a(c,d,e){c.byteLength=
d.byteLength;b.bufferData(c.type,d,e)}function w(c,b,e,m,k){c.usage=e;if(Array.isArray(b))c.dtype=m||5126,0<b.length&&(Array.isArray(b[0])?(c.dimension=b[0].length,m=v.allocType(c.dtype,b.length*c.dimension),f(m,b,c.dimension),a(c,m,e),v.freeType(m)):"number"===typeof b[0]?(c.dimension=k,m=v.allocType(c.dtype,b.length),n(m,b),a(c,m,e),v.freeType(m)):g(b[0])&&(c.dimension=b[0].length,c.dtype=m||t(b[0])||5126,m=v.allocType(c.dtype,b.length*c.dimension),f(m,b,c.dimension),a(c,m,e),v.freeType(m)));else if(g(b))c.dtype=
m||t(b),c.dimension=k,a(c,b,e);else if(l(b)){var q=b.shape,x=b.stride;k=b.offset;var r=0,C=0,H=0,G=0;1===q.length?(r=q[0],C=1,H=x[0],G=0):2===q.length&&(r=q[0],C=q[1],H=x[0],G=x[1]);c.dtype=m||t(b.data)||5126;c.dimension=C;m=v.allocType(c.dtype,r*C);d(m,b.data,r,C,H,G,k);a(c,m,e);v.freeType(m)}}function c(c){e.bufferCount--;b.deleteBuffer(c.buffer);c.buffer=null;delete C[c.id]}var x=0,C={};q.prototype.bind=function(){b.bindBuffer(this.type,this.buffer)};q.prototype.destroy=function(){c(this)};var F=
[];m.profile&&(e.getTotalBufferSize=function(){var c=0;Object.keys(C).forEach(function(b){c+=C[b].stats.size});return c});return{create:function(a,x,z){function y(c){var d=35044,e=null,f=0,q=0,a=1;Array.isArray(c)||g(c)||l(c)?e=c:"number"===typeof c?f=c|0:c&&("data"in c&&(e=c.data),"usage"in c&&(d=r[c.usage]),"type"in c&&(q=u[c.type]),"dimension"in c&&(a=c.dimension|0),"length"in c&&(f=c.length|0));F.bind();e?w(F,e,d,q,a):(b.bufferData(F.type,f,d),F.dtype=q||5121,F.usage=d,F.dimension=a,F.byteLength=
f);m.profile&&(F.stats.size=F.byteLength*k[F.dtype]);return y}e.bufferCount++;var F=new q(x);C[F.id]=F;z||y(a);y._reglType="buffer";y._buffer=F;y.subdata=function(c,e){var m=(e||0)|0;F.bind();if(Array.isArray(c)){if(0<c.length)if("number"===typeof c[0]){var k=v.allocType(F.dtype,c.length);n(k,c);b.bufferSubData(F.type,m,k);v.freeType(k)}else if(Array.isArray(c[0])||g(c[0])){var k=c[0].length,q=v.allocType(F.dtype,c.length*k);f(q,c,k);b.bufferSubData(F.type,m,q);v.freeType(q)}}else if(g(c))b.bufferSubData(F.type,
m,c);else if(l(c)){var a=c.shape,x=c.stride,r=q=k=0,C=0;1===a.length?(k=a[0],q=1,r=x[0],C=0):2===a.length&&(k=a[0],q=a[1],r=x[0],C=x[1]);a=Array.isArray(c.data)?F.dtype:t(c.data);a=v.allocType(a,k*q);d(a,c.data,k,q,r,C,c.offset);b.bufferSubData(F.type,m,a);v.freeType(a)}return y};m.profile&&(y.stats=F.stats);y.destroy=function(){c(F)};return y},createStream:function(c,b){var d=F.pop();d||(d=new q(c));d.bind();w(d,b,35040,0,1);return d},destroyStream:function(c){F.push(c)},clear:function(){y(C).forEach(c);
F.forEach(c)},getBuffer:function(c){return c&&c._buffer instanceof q?c._buffer:null},_initBuffer:w}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(a,h,p){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,
"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,h,p){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,h,p){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,h,p){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,h,p){function t(c){return Array.isArray(c)||
w(c)||u(c)}function n(c){return c.sort(function(c,b){return"viewport"===c?-1:"viewport"===b?1:c<b?-1:1})}function d(c,b,d,e){this.thisDep=c;this.contextDep=b;this.propDep=d;this.append=e}function f(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function g(c){return new d(!1,!1,!1,c)}function l(c,b){var e=c.type;return 0===e?(e=c.data.length,new d(!0,1<=e,2<=e,b)):4===e?(e=c.data,new d(e.thisDep,e.contextDep,e.propDep,b)):new d(3===e,2===e,1===e,b)}var y=a("./util/codegen"),v=a("./util/loop"),
w=a("./util/is-typed-array"),u=a("./util/is-ndarray"),r=a("./util/is-array-like"),k=a("./dynamic"),b=a("./constants/primitives.json"),e=a("./constants/dtypes.json"),m=["x","y","z","w"],q="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),z={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},E={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},c={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},x={cw:2304,ccw:2305},C=new d(!1,!1,!1,function(){});h.exports=function(a,
u,w,h,p,D,N,K,J,O,H,G,M,Q,V){function Z(c){return c.replace(".","_")}function R(c,b,e){var d=Z(c);Aa.push(c);ta[d]=ja[d]=!!e;ka[d]=b}function L(c,b,e){var d=Z(c);Aa.push(c);Array.isArray(e)?(ja[d]=e.slice(),ta[d]=e.slice()):ja[d]=ta[d]=e;la[d]=b}function W(){var c=y(),b=c.link,e=c.global;c.id=Ia++;c.batchId="0";var d=b(Ha),f=c.shared={props:"a0"};Object.keys(Ha).forEach(function(c){f[c]=e.def(d,".",c)});var m=c.next={},k=c.current={};Object.keys(la).forEach(function(c){Array.isArray(ja[c])&&(m[c]=
e.def(f.next,".",c),k[c]=e.def(f.current,".",c))});var q=c.constants={};Object.keys(Ba).forEach(function(c){q[c]=e.def(JSON.stringify(Ba[c]))});c.invoke=function(e,d){switch(d.type){case 0:var m=["this",f.context,f.props,c.batchId];return e.def(b(d.data),".call(",m.slice(0,Math.max(d.data.length+1,4)),")");case 1:return e.def(f.props,d.data);case 2:return e.def(f.context,d.data);case 3:return e.def("this",d.data);case 4:return d.data.append(c,e),d.data.ref}};c.attribCache={};var g={};c.scopeAttrib=
function(c){c=u.id(c);if(c in g)return g[c];var e=O.scope[c];e||(e=O.scope[c]=new ua);return g[c]=b(e)};return c}function T(c){var b=c["static"];c=c.dynamic;var e;if("profile"in b){var d=!!b.profile;e=g(function(c,b){return d});e.enable=d}else if("profile"in c){var f=c.profile;e=l(f,function(c,b){return c.invoke(b,f)})}return e}function X(c){var b=c["static"];c=c.dynamic;if("framebuffer"in b){var e=b.framebuffer;return e?(e=K.getFramebuffer(e),g(function(c,b){var d=c.link(e),f=c.shared;b.set(f.framebuffer,
".next",d);f=f.context;b.set(f,".framebufferWidth",d+".width");b.set(f,".framebufferHeight",d+".height");return d})):g(function(c,b){var e=c.shared;b.set(e.framebuffer,".next","null");e=e.context;b.set(e,".framebufferWidth",e+".drawingBufferWidth");b.set(e,".framebufferHeight",e+".drawingBufferHeight");return"null"})}if("framebuffer"in c){var d=c.framebuffer;return l(d,function(c,b){var e=c.invoke(b,d),f=c.shared,m=f.framebuffer,e=b.def(m,".getFramebuffer(",e,")");b.set(m,".next",e);f=f.context;b.set(f,
".framebufferWidth",e+"?"+e+".width:"+f+".drawingBufferWidth");b.set(f,".framebufferHeight",e+"?"+e+".height:"+f+".drawingBufferHeight");return e})}return null}function U(c,b){function e(c){if(c in f){var k=f[c];c=!0;var g=k.x|0,q=k.y|0,a,x;"width"in k?a=k.width|0:c=!1;"height"in k?x=k.height|0:c=!1;return new d(!c&&b&&b.thisDep,!c&&b&&b.contextDep,!c&&b&&b.propDep,function(c,b){var e=c.shared.context,d=a;"width"in k||(d=b.def(e,".","framebufferWidth","-",g));var f=x;"height"in k||(f=b.def(e,".",
"framebufferHeight","-",q));return[g,q,d,f]})}if(c in m){var r=m[c];c=l(r,function(c,b){var e=c.invoke(b,r),d=c.shared.context,f=b.def(e,".x|0"),m=b.def(e,".y|0"),k=b.def('"width" in ',e,"?",e,".width|0:","(",d,".","framebufferWidth","-",f,")"),e=b.def('"height" in ',e,"?",e,".height|0:","(",d,".","framebufferHeight","-",m,")");return[f,m,k,e]});b&&(c.thisDep=c.thisDep||b.thisDep,c.contextDep=c.contextDep||b.contextDep,c.propDep=c.propDep||b.propDep);return c}return b?new d(b.thisDep,b.contextDep,
b.propDep,function(c,b){var e=c.shared.context;return[0,0,b.def(e,".","framebufferWidth"),b.def(e,".","framebufferHeight")]}):null}var f=c["static"],m=c.dynamic,k=e("viewport");if(k)var g=k,k=new d(k.thisDep,k.contextDep,k.propDep,function(c,b){var e=g.append(c,b),d=c.shared.context;b.set(d,".viewportWidth",e[2]);b.set(d,".viewportHeight",e[3]);return e});return{viewport:k,scissor_box:e("scissor.box")}}function S(c){function b(c){if(c in e){var d=u.id(e[c]);c=g(function(){return d});c.id=d;return c}if(c in
m){var f=m[c];return l(f,function(c,b){var e=c.invoke(b,f);return b.def(c.shared.strings,".id(",e,")")})}return null}var e=c["static"],m=c.dynamic,k=b("frag"),q=b("vert"),a=null;f(k)&&f(q)?(a=H.program(q.id,k.id),c=g(function(c,b){return c.link(a)})):c=new d(k&&k.thisDep||q&&q.thisDep,k&&k.contextDep||q&&q.contextDep,k&&k.propDep||q&&q.propDep,function(c,b){var e=c.shared.shader,d;d=k?k.append(c,b):b.def(e,".","frag");var f;f=q?q.append(c,b):b.def(e,".","vert");return b.def(e+".program("+f+","+d+
")")});return{frag:k,vert:q,progVar:c,program:a}}function ba(c){function e(c,b){if(c in m){var d=m[c]|0;return g(function(c,e){b&&(c.OFFSET=d);return d})}if(c in k){var f=k[c];return l(f,function(c,e){var d=c.invoke(e,f);b&&(c.OFFSET=d);return d})}return b&&q?g(function(c,b){c.OFFSET="0";return 0}):null}var m=c["static"],k=c.dynamic,q=function(){if("elements"in m){var c=m.elements;t(c)?c=D.getElements(D.create(c)):c&&(c=D.getElements(c));var b=g(function(b,e){if(c){var d=b.link(c);return b.ELEMENTS=
d}return b.ELEMENTS=null});b.value=c;return b}if("elements"in k){var e=k.elements;return l(e,function(c,b){var d=c.shared,f=d.isBufferArgs,d=d.elements,m=c.invoke(b,e),k=b.def("null"),f=b.def(f,"(",m,")"),m=c.cond(f).then(k,"=",d,".createStream(",m,");")["else"](k,"=",d,".getElements(",m,");");b.entry(m);b.exit(c.cond(f).then(d,".destroyStream(",k,");"));return c.ELEMENTS=k})}return null}(),a=e("offset",!0);return{elements:q,primitive:function(){if("primitive"in m){var c=m.primitive;return g(function(e,
d){return b[c]})}if("primitive"in k){var e=k.primitive;return l(e,function(c,b){var d=c.constants.primTypes,f=c.invoke(b,e);return b.def(d,"[",f,"]")})}return q?f(q)?q.value?g(function(c,b){return b.def(c.ELEMENTS,".primType")}):g(function(){return 4}):new d(q.thisDep,q.contextDep,q.propDep,function(c,b){var e=c.ELEMENTS;return b.def(e,"?",e,".primType:",4)}):null}(),count:function(){if("count"in m){var c=m.count|0;return g(function(){return c})}if("count"in k){var b=k.count;return l(b,function(c,
e){return c.invoke(e,b)})}return q?f(q)?q?a?new d(a.thisDep,a.contextDep,a.propDep,function(c,b){return b.def(c.ELEMENTS,".vertCount-",c.OFFSET)}):g(function(c,b){return b.def(c.ELEMENTS,".vertCount")}):g(function(){return-1}):new d(q.thisDep||a.thisDep,q.contextDep||a.contextDep,q.propDep||a.propDep,function(c,b){var e=c.ELEMENTS;return c.OFFSET?b.def(e,"?",e,".vertCount-",c.OFFSET,":-1"):b.def(e,"?",e,".vertCount:-1")}):null}(),instances:e("instances",!1),offset:a}}function aa(b){var e=b["static"],
d=b.dynamic,f={};Aa.forEach(function(b){function m(c,q){if(b in e){var a=c(e[b]);f[k]=g(function(){return a})}else if(b in d){var x=d[b];f[k]=l(x,function(c,b){return q(c,b,c.invoke(b,x))})}}var k=Z(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return m(function(c){return c},function(c,b,e){return e});case "depth.func":return m(function(c){return E[c]},
function(c,b,e){return b.def(c.constants.compareFuncs,"[",e,"]")});case "depth.range":return m(function(c){return c},function(c,b,e){c=b.def("+",e,"[0]");b=b.def("+",e,"[1]");return[c,b]});case "blend.func":return m(function(c){return[z["srcRGB"in c?c.srcRGB:c.src],z["dstRGB"in c?c.dstRGB:c.dst],z["srcAlpha"in c?c.srcAlpha:c.src],z["dstAlpha"in c?c.dstAlpha:c.dst]]},function(c,b,e){function d(c,m){var k=b.def('"',c,m,'" in ',e,"?",e,".",c,m,":",e,".",c);return b.def(f,"[",k,"]")}var f=c.constants.blendFuncs;
c=d("src","RGB");var m=d("src","Alpha"),k=d("dst","RGB"),q=d("dst","Alpha");return[c,k,m,q]});case "blend.equation":return m(function(c){if("string"===typeof c)return[oa[c],oa[c]];if("object"===typeof c)return[oa[c.rgb],oa[c.alpha]]},function(c,b,e){var d=c.constants.blendEquations,f=b.def(),m=b.def();c=c.cond("typeof ",e,'==="string"');c.then(f,"=",m,"=",d,"[",e,"];");c["else"](f,"=",d,"[",e,".rgb];",m,"=",d,"[",e,".alpha];");b(c);return[f,m]});case "blend.color":return m(function(c){return v(4,
function(b){return+c[b]})},function(c,b,e){return v(4,function(c){return b.def("+",e,"[",c,"]")})});case "stencil.mask":return m(function(c){return c|0},function(c,b,e){return b.def(e,"|0")});case "stencil.func":return m(function(c){return[E[c.cmp||"keep"],c.ref||0,"mask"in c?c.mask:-1]},function(c,b,e){c=b.def('"cmp" in ',e,"?",c.constants.compareFuncs,"[",e,".cmp]",":",7680);var d=b.def(e,".ref|0");b=b.def('"mask" in ',e,"?",e,".mask|0:-1");return[c,d,b]});case "stencil.opFront":case "stencil.opBack":return m(function(e){return["stencil.opBack"===
b?1029:1028,c[e.fail||"keep"],c[e.zfail||"keep"],c[e.pass||"keep"]]},function(c,e,d){function f(c){return e.def('"',c,'" in ',d,"?",m,"[",d,".",c,"]:",7680)}var m=c.constants.stencilOps;return["stencil.opBack"===b?1029:1028,f("fail"),f("zfail"),f("pass")]});case "polygonOffset.offset":return m(function(c){return[c.factor|0,c.units|0]},function(c,b,e){c=b.def(e,".factor|0");b=b.def(e,".units|0");return[c,b]});case "cull.face":return m(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);return b},
function(c,b,e){return b.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return m(function(c){return c},function(c,b,e){return e});case "frontFace":return m(function(c){return x[c]},function(c,b,e){return b.def(e+'==="cw"?2304:2305')});case "colorMask":return m(function(c){return c.map(function(c){return!!c})},function(c,b,e){return v(4,function(c){return"!!"+e+"["+c+"]"})});case "sample.coverage":return m(function(c){return["value"in c?c.value:1,!!c.invert]},function(c,b,e){c=b.def('"value" in ',
e,"?+",e,".value:1");b=b.def("!!",e,".invert");return[c,b]})}});return f}function ia(c){var b=c["static"],e=c.dynamic,d={};Object.keys(b).forEach(function(c){var e=b[c],f;if("number"===typeof e||"boolean"===typeof e)f=g(function(){return e});else if("function"===typeof e){var m=e._reglType;if("texture2d"===m||"textureCube"===m)f=g(function(c){return c.link(e)});else if("framebuffer"===m||"framebufferCube"===m)f=g(function(c){return c.link(e.color[0])})}else r(e)&&(f=g(function(c){return c.global.def("[",
v(e.length,function(c){return e[c]}),"]")}));f.value=e;d[c]=f});Object.keys(e).forEach(function(c){var b=e[c];d[c]=l(b,function(c,e){return c.invoke(e,b)})});return d}function ca(c){var b=c["static"],d=c.dynamic,f={};Object.keys(b).forEach(function(c){var d=b[c],k=u.id(c),q=new ua;if(t(d))q.state=1,q.buffer=p.getBuffer(p.create(d,34962,!1)),q.type=q.buffer.dtype;else{var a=p.getBuffer(d);if(a)q.state=1,q.buffer=a,q.type=a.dtype;else if(d.constant){var l=d.constant;q.buffer="null";q.state=2;"number"===
typeof l?q.x=l:m.forEach(function(c,b){b<l.length&&(q[c]=l[b])})}else{var a=p.getBuffer(d.buffer),x=d.offset|0,r=d.stride|0,C=d.size|0,n=!!d.normalized,G=0;"type"in d&&(G=e[d.type]);d=d.divisor|0;q.buffer=a;q.state=1;q.size=C;q.normalized=n;q.type=G||a.dtype;q.offset=x;q.stride=r;q.divisor=d}}f[c]=g(function(c,b){var e=c.attribCache;if(k in e)return e[k];var d={isStream:!1};Object.keys(q).forEach(function(c){d[c]=q[c]});q.buffer&&(d.buffer=c.link(q.buffer));return e[k]=d})});Object.keys(d).forEach(function(c){var b=
d[c];f[c]=l(b,function(c,e){function d(c){e(a[c],"=",f,".",c,"|0;")}var f=c.invoke(e,b),k=c.shared,q=k.isBufferArgs,g=k.buffer,a={isStream:e.def(!1)},l=new ua;l.state=1;Object.keys(l).forEach(function(c){a[c]=e.def(""+l[c])});var x=a.buffer,r=a.type;e("if(",q,"(",f,")){",a.isStream,"=true;",x,"=",g,".createStream(",34962,",",f,");",r,"=",x,".dtype;","}else{",x,"=",g,".getBuffer(",f,");","if(",x,"){",r,"=",x,".dtype;",'}else if("constant" in ',f,"){",a.state,"=",2,";","if(typeof "+f+'.constant === "number"){',
a[m[0]],"=",f,".constant;",m.slice(1).map(function(c){return a[c]}).join("="),"=0;","}else{",m.map(function(c,b){return a[c]+"="+f+".constant.length>="+b+"?"+f+".constant["+b+"]:0;"}).join(""),"}}else{",x,"=",g,".getBuffer(",f,".buffer);",r,'="type" in ',f,"?",k.glTypes,"[",f,".type]:",x,".dtype;",a.normalized,"=!!",f,".normalized;");d("size");d("offset");d("stride");d("divisor");e("}}");e.exit("if(",a.isStream,"){",g,".destroyStream(",x,");","}");return a})});return f}function Y(c){var b=c["static"],
e=c.dynamic,d={};Object.keys(b).forEach(function(c){var e=b[c];d[c]=g(function(c,b){return"number"===typeof e||"boolean"===typeof e?""+e:c.link(e)})});Object.keys(e).forEach(function(c){var b=e[c];d[c]=l(b,function(c,e){return c.invoke(e,b)})});return d}function da(c,b,e,d){var f;f=X(c);var m=U(c,f),k=ba(c),q=aa(c),a=S(c),g=m.viewport;g&&(q.viewport=g);g=Z("scissor.box");(m=m[g])&&(q[g]=m);m=0<Object.keys(q).length;f={framebuffer:f,draw:k,shader:a,state:q,dirty:m};f.profile=T(c);f.uniforms=ia(e);
f.attributes=ca(b);f.context=Y(d);return f}function ra(c,b,e){var d=c.shared.context,f=c.scope();Object.keys(e).forEach(function(m){b.save(d,"."+m);f(d,".",m,"=",e[m].append(c,b),";")});b(f)}function ea(c,b,e){var d=c.shared,f=d.gl,m=d.framebuffer,k;Ca&&(k=b.def(d.extensions,".webgl_draw_buffers"));var q=c.constants,d=q.drawBuffer,q=q.backBuffer;c=e?e.append(c,b):b.def(m,".next");b("if(",m,".dirty||",c,"!==",m,".cur){","if(",c,"){",f,".bindFramebuffer(",36160,",",c,".framebuffer);");Ca&&b(k,".drawBuffersWEBGL(",
d,"[",c,".colorAttachments.length]);");b("}else{",f,".bindFramebuffer(",36160,",null);");Ca&&b(k,".drawBuffersWEBGL(",q,");");b("}",m,".cur=",c,";",m,".dirty=false;","}")}function va(c,b,e){var d=c.shared,f=d.gl,m=c.current,k=c.next,q=d.current,g=d.next,a=c.cond(q,".dirty");Aa.forEach(function(b){b=Z(b);if(!(b in e.state)){var d,l;if(b in k){d=k[b];l=m[b];var x=v(ja[b].length,function(c){return a.def(d,"[",c,"]")});a(c.cond(x.map(function(c,b){return c+"!=="+l+"["+b+"]"}).join("||")).then(f,".",la[b],
"(",x,");",x.map(function(c,b){return l+"["+b+"]="+c}).join(";"),";"))}else d=a.def(g,".",b),x=c.cond(d,"!==",q,".",b),a(x),b in ka?x(c.cond(d).then(f,".enable(",ka[b],");")["else"](f,".disable(",ka[b],");"),q,".",b,"=",d,";"):x(f,".",la[b],"(",d,");",q,".",b,"=",d,";")}});0===Object.keys(e.state).length&&a(q,".dirty=false;");b(a)}function wa(c,b,e,d){var m=c.shared,k=c.current,q=m.current,a=m.gl;n(Object.keys(e)).forEach(function(m){var g=e[m];if(!d||d(g)){var x=g.append(c,b);if(ka[m]){var l=ka[m];
f(g)?x?b(a,".enable(",l,");"):b(a,".disable(",l,");"):b(c.cond(x).then(a,".enable(",l,");")["else"](a,".disable(",l,");"));b(q,".",m,"=",x,";")}else if(r(x)){var C=k[m];b(a,".",la[m],"(",x,");",x.map(function(c,b){return C+"["+b+"]="+c}).join(";"),";")}else b(a,".",la[m],"(",x,");",q,".",m,"=",x,";")}})}function pa(c,b){xa&&!c.instancing&&(c.instancing=b.def(c.shared.extensions,".angle_instanced_arrays"))}function fa(c,b,e,d,m){function k(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}
function q(c){n=b.def();c(n,"=",k(),";");"string"===typeof m?c(l,".count+=",m,";"):c(l,".count++;");Q&&(d?(G=b.def(),c(G,"=",C,".getNumPendingQueries();")):c(C,".beginQuery(",l,");"))}function a(c){c(l,".cpuTime+=",k(),"-",n,";");Q&&(d?c(C,".pushScopeStats(",G,",",C,".getNumPendingQueries(),",l,");"):c(C,".endQuery();"))}function g(c){var e=b.def(r,".profile");b(r,".profile=",c,";");b.exit(r,".profile=",e,";")}var x=c.shared,l=c.stats,r=x.current,C=x.timer;e=e.profile;var n,G;if(e){if(f(e)){e.enable?
(q(b),a(b.exit),g("true")):g("false");return}e=e.append(c,b);g(e)}else e=b.def(r,".profile");x=c.block();q(x);b("if(",e,"){",x,"}");c=c.block();a(c);b.exit("if(",e,"){",c,"}")}function ga(c,b,e,d,f){function k(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(e,d,f){function k(){b("if(!",r,".buffer){",x,".enableVertexAttribArray(",l,");}");var e=f.type,m;m=f.size?b.def(f.size,"||",
d):d;b("if(",r,".type!==",e,"||",r,".size!==",m,"||",G.map(function(c){return r+"."+c+"!=="+f[c]}).join("||"),"){",x,".bindBuffer(",34962,",",C,".buffer);",x,".vertexAttribPointer(",[l,m,e,f.normalized,f.stride,f.offset],");",r,".type=",e,";",r,".size=",m,";",G.map(function(c){return r+"."+c+"="+f[c]+";"}).join(""),"}");xa&&(e=f.divisor,b("if(",r,".divisor!==",e,"){",c.instancing,".vertexAttribDivisorANGLE(",[l,e],");",r,".divisor=",e,";}"))}function g(){b("if(",r,".buffer){",x,".disableVertexAttribArray(",
l,");","}if(",m.map(function(c,b){return r+"."+c+"!=="+n[b]}).join("||"),"){",x,".vertexAttrib4f(",l,",",n,");",m.map(function(c,b){return r+"."+c+"="+n[b]+";"}).join(""),"}")}var x=a.gl,l=b.def(e,".location"),r=b.def(a.attributes,"[",l,"]");e=f.state;var C=f.buffer,n=[f.x,f.y,f.z,f.w],G=["buffer","normalized","offset","stride"];1===e?k():2===e?g():(b("if(",e,"===",1,"){"),k(),b("}else{"),g(),b("}"))}var a=c.shared;d.forEach(function(d){var m=d.name,a=e.attributes[m],g;if(a){if(!f(a))return;g=a.append(c,
b)}else{if(!f(C))return;var x=c.scopeAttrib(m);g={};Object.keys(new ua).forEach(function(c){g[c]=b.def(x,".",c)})}q(c.link(d),k(d.info.type),g)})}function ha(c,b,e,d,m){for(var k=c.shared,q=k.gl,a,g=0;g<d.length;++g){var x=d[g],l=x.name,n=x.info.type,G=e.uniforms[l],x=c.link(x)+".location",H;if(G){if(!m(G))continue;if(f(G)){l=G.value;if(35678===n||35680===n)n=c.link(l._texture||l.color[0]._texture),b(q,".uniform1i(",x,",",n+".bind());"),b.exit(n,".unbind();");else if(35674===n||35675===n||35676===
n)l=c.global.def("new Float32Array(["+Array.prototype.slice.call(l)+"])"),G=2,35675===n?G=3:35676===n&&(G=4),b(q,".uniformMatrix",G,"fv(",x,",false,",l,");");else{switch(n){case 5126:a="1f";break;case 35664:a="2f";break;case 35665:a="3f";break;case 35666:a="4f";break;case 35670:a="1i";break;case 5124:a="1i";break;case 35671:a="2i";break;case 35667:a="2i";break;case 35672:a="3i";break;case 35668:a="3i";break;case 35673:a="4i";break;case 35669:a="4i"}b(q,".uniform",a,"(",x,",",r(l)?Array.prototype.slice.call(l):
l,");")}continue}else H=G.append(c,b)}else{if(!m(C))continue;H=b.def(k.uniforms,"[",u.id(l),"]")}35678===n?b("if(",H,"&&",H,'._reglType==="framebuffer"){',H,"=",H,".color[0];","}"):35680===n&&b("if(",H,"&&",H,'._reglType==="framebufferCube"){',H,"=",H,".color[0];","}");l=1;switch(n){case 35678:case 35680:n=b.def(H,"._texture");b(q,".uniform1i(",x,",",n,".bind());");b.exit(n,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i";l=2;break;case 35668:case 35672:a="3i";
l=3;break;case 35669:case 35673:a="4i";l=4;break;case 5126:a="1f";break;case 35664:a="2f";l=2;break;case 35665:a="3f";l=3;break;case 35666:a="4f";l=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}b(q,".uniform",a,"(",x,",");if("M"===a.charAt(0)){var x=Math.pow(n-35674+2,2),z=c.global.def("new Float32Array(",x,")");b("false,(Array.isArray(",H,")||",H," instanceof Float32Array)?",H,":(",v(x,function(c){return z+"["+c+"]="+H+"["+c+"]"}),",",z,")")}else 1<
l?b(v(l,function(c){return H+"["+c+"]"})):b(H);b(");")}}function ya(c,b,e,d){function m(f){var k=x[f];return k?k.contextDep&&d.contextDynamic||k.propDep?k.append(c,e):k.append(c,b):b.def(l,".",f)}function k(){function c(){e(z,".drawElementsInstancedANGLE(",[n,G,u,C+"<<(("+u+"-5121)>>1)",H],");")}function b(){e(z,".drawArraysInstancedANGLE(",[n,C,G,H],");")}r?v?c():(e("if(",r,"){"),c(),e("}else{"),b(),e("}")):b()}function q(){function c(){e(g+".drawElements("+[n,G,u,C+"<<(("+u+"-5121)>>1)"]+");")}
function b(){e(g+".drawArrays("+[n,C,G]+");")}r?v?c():(e("if(",r,"){"),c(),e("}else{"),b(),e("}")):b()}var a=c.shared,g=a.gl,l=a.draw,x=d.draw,r=function(){var f=x.elements,m=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)m=e;f=f.append(c,m)}else f=m.def(l,".","elements");f&&m("if("+f+")"+g+".bindBuffer(34963,"+f+".buffer.buffer);");return f}(),n=m("primitive"),C=m("offset"),G=function(){var f=x.count,m=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)m=e;f=f.append(c,m)}else f=m.def(l,
".","count");return f}();if("number"===typeof G){if(0===G)return}else e("if(",G,"){"),e.exit("}");var H,z;xa&&(H=m("instances"),z=c.instancing);var u=r+".type",v=x.elements&&f(x.elements);xa&&("number"!==typeof H||0<=H)?"string"===typeof H?(e("if(",H,">0){"),k(),e("}else if(",H,"<0){"),q(),e("}")):k():q()}function sa(c,b,e,d,f){b=W();f=b.proc("body",f);xa&&(b.instancing=f.def(b.shared.extensions,".angle_instanced_arrays"));c(b,f,e,d);return b.compile().body}function Da(c,b,e,d){pa(c,b);ga(c,b,e,d.attributes,
function(){return!0});ha(c,b,e,d.uniforms,function(){return!0});ya(c,b,b,e)}function Ea(c,b){var e=c.proc("draw",1);pa(c,e);ra(c,e,b.context);ea(c,e,b.framebuffer);va(c,e,b);wa(c,e,b.state);fa(c,e,b,!1,!0);var d=b.shader.progVar.append(c,e);e(c.shared.gl,".useProgram(",d,".program);");if(b.shader.program)Da(c,e,b,b.shader.program);else{var f=c.global.def("{}"),m=e.def(d,".id"),k=e.def(f,"[",m,"]");e(c.cond(k).then(k,".call(this,a0);")["else"](k,"=",f,"[",m,"]=",c.link(function(e){return sa(Da,c,b,
e,1)}),"(",d,");",k,".call(this,a0);"))}0<Object.keys(b.state).length&&e(c.shared.current,".dirty=true;")}function Fa(c,b,e,d){function f(){return!0}c.batchId="a1";pa(c,b);ga(c,b,e,d.attributes,f);ha(c,b,e,d.uniforms,f);ya(c,b,b,e)}function qa(c,b,e,d){function f(c){return c.contextDep&&k||c.propDep}function m(c){return!f(c)}pa(c,b);var k=e.contextDep,q=b.def(),a=b.def();c.shared.props=a;c.batchId=q;var g=c.scope(),l=c.scope();b(g.entry,"for(",q,"=0;",q,"<","a1",";++",q,"){",a,"=","a0","[",q,"];",
l,"}",g.exit);e.needsContext&&ra(c,l,e.context);e.needsFramebuffer&&ea(c,l,e.framebuffer);wa(c,l,e.state,f);e.profile&&f(e.profile)&&fa(c,l,e,!1,!0);d?(ga(c,g,e,d.attributes,m),ga(c,l,e,d.attributes,f),ha(c,g,e,d.uniforms,m),ha(c,l,e,d.uniforms,f),ya(c,g,l,e)):(b=c.global.def("{}"),d=e.shader.progVar.append(c,l),a=l.def(d,".id"),g=l.def(b,"[",a,"]"),l(c.shared.gl,".useProgram(",d,".program);","if(!",g,"){",g,"=",b,"[",a,"]=",c.link(function(b){return sa(Fa,c,e,b,2)}),"(",d,");}",g,".call(this,a0[",
q,"],",q,");"))}function Ga(c,b){function e(c){return c.contextDep&&f||c.propDep}var d=c.proc("batch",2);c.batchId="0";pa(c,d);var f=!1,m=!0;Object.keys(b.context).forEach(function(c){f=f||b.context[c].propDep});f||(ra(c,d,b.context),m=!1);var k=b.framebuffer,q=!1;k?(k.propDep?f=q=!0:k.contextDep&&f&&(q=!0),q||ea(c,d,k)):ea(c,d,null);b.state.viewport&&b.state.viewport.propDep&&(f=!0);va(c,d,b);wa(c,d,b.state,function(c){return!e(c)});b.profile&&e(b.profile)||fa(c,d,b,!1,"a1");b.contextDep=f;b.needsContext=
m;b.needsFramebuffer=q;m=b.shader.progVar;if(m.contextDep&&f||m.propDep)qa(c,d,b,null);else if(m=m.append(c,d),d(c.shared.gl,".useProgram(",m,".program);"),b.shader.program)qa(c,d,b,b.shader.program);else{var k=c.global.def("{}"),q=d.def(m,".id"),a=d.def(k,"[",q,"]");d(c.cond(a).then(a,".call(this,a0,a1);")["else"](a,"=",k,"[",q,"]=",c.link(function(e){return sa(qa,c,b,e,2)}),"(",m,");",a,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(c.shared.current,".dirty=true;")}function ma(c,b){function e(m){var k=
b.shader[m];k&&d.set(f.shader,"."+m,k.append(c,d))}var d=c.proc("scope",3);c.batchId="a2";var f=c.shared,m=f.current;ra(c,d,b.context);b.framebuffer&&b.framebuffer.append(c,d);n(Object.keys(b.state)).forEach(function(e){var m=b.state[e].append(c,d);r(m)?m.forEach(function(b,f){d.set(c.next[e],"["+f+"]",b)}):d.set(f.next,"."+e,m)});fa(c,d,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var m=b.draw[e];m&&d.set(f.draw,"."+e,""+m.append(c,d))});Object.keys(b.uniforms).forEach(function(e){d.set(f.uniforms,
"["+u.id(e)+"]",b.uniforms[e].append(c,d))});Object.keys(b.attributes).forEach(function(e){var f=b.attributes[e].append(c,d),m=c.scopeAttrib(e);Object.keys(new ua).forEach(function(c){d.set(m,"."+c,f[c])})});e("vert");e("frag");0<Object.keys(b.state).length&&(d(m,".dirty=true;"),d.exit(m,".dirty=true;"));d("a1(",c.shared.context,",a0,",c.batchId,");")}function za(c){if("object"===typeof c&&!r(c)){for(var b=Object.keys(c),e=0;e<b.length;++e)if(k.isDynamic(c[b[e]]))return!0;return!1}}function na(c,
b,e){function d(c,b){q.forEach(function(e){var d=f[e];k.isDynamic(d)&&(d=c.invoke(b,d),b(r,".",e,"=",d,";"))})}var f=b["static"][e];if(f&&za(f)){var m=c.global,q=Object.keys(f),a=!1,g=!1,x=!1,r=c.global.def("{}");q.forEach(function(b){var e=f[b];if(k.isDynamic(e))b=l(e,null),a=a||b.thisDep,x=x||b.propDep,g=g||b.contextDep;else{m(r,".",b,"=");switch(typeof e){case "number":m(e);break;case "string":m('"',e,'"');break;case "object":Array.isArray(e)&&m("[",e.join(),"]");break;default:m(c.link(e))}m(";")}});
b.dynamic[e]=new k.DynamicVariable(4,{thisDep:a,contextDep:g,propDep:x,ref:r,append:d});delete b["static"][e]}}var ua=O.Record,oa={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(oa.min=32775,oa.max=32776);var xa=w.angle_instanced_arrays,Ca=w.webgl_draw_buffers,ja={dirty:!0,profile:V.profile},ta={},Aa=[],ka={},la={};R("dither",3024);R("blend.enable",3042);L("blend.color","blendColor",[0,0,0,0]);L("blend.equation","blendEquationSeparate",[32774,32774]);L("blend.func","blendFuncSeparate",
[1,0,1,0]);R("depth.enable",2929,!0);L("depth.func","depthFunc",513);L("depth.range","depthRange",[0,1]);L("depth.mask","depthMask",!0);L("colorMask","colorMask",[!0,!0,!0,!0]);R("cull.enable",2884);L("cull.face","cullFace",1029);L("frontFace","frontFace",2305);L("lineWidth","lineWidth",1);R("polygonOffset.enable",32823);L("polygonOffset.offset","polygonOffset",[0,0]);R("sample.alpha",32926);R("sample.enable",32928);L("sample.coverage","sampleCoverage",[1,!1]);R("stencil.enable",2960);L("stencil.mask",
"stencilMask",-1);L("stencil.func","stencilFunc",[519,0,-1]);L("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);L("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);R("scissor.enable",3089);L("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);L("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ha={gl:a,context:M,strings:u,next:ta,current:ja,draw:G,elements:D,buffer:p,shader:H,attributes:O.state,uniforms:J,framebuffer:K,extensions:w,
timer:Q,isBufferArgs:t},Ba={primTypes:b,compareFuncs:E,blendFuncs:z,blendEquations:oa,stencilOps:c,glTypes:e,orientationType:x};Ca&&(Ba.backBuffer=[1029],Ba.drawBuffer=v(h.maxDrawbuffers,function(c){return 0===c?[0]:v(c,function(c){return 36064+c})}));var Ia=0;return{next:ta,current:ja,procs:function(){var c=W(),b=c.proc("poll"),e=c.proc("refresh"),d=c.block();b(d);e(d);var f=c.shared,m=f.gl,k=f.next,q=f.current;d(q,".dirty=false;");ea(c,b);e(f.framebuffer,".dirty=true;");ea(c,e);Object.keys(ka).forEach(function(f){var a=
ka[f],g=d.def(k,".",f),l=c.block();l("if(",g,"){",m,".enable(",a,")}else{",m,".disable(",a,")}",q,".",f,"=",g,";");e(l);b("if(",g,"!==",q,".",f,"){",l,"}")});Object.keys(la).forEach(function(f){var a=la[f],g=ja[f],l,x,n=c.block();n(m,".",a,"(");r(g)?(a=g.length,l=c.global.def(k,".",f),x=c.global.def(q,".",f),n(v(a,function(c){return l+"["+c+"]"}),");",v(a,function(c){return x+"["+c+"]="+l+"["+c+"];"}).join("")),b("if(",v(a,function(c){return l+"["+c+"]!=="+x+"["+c+"]"}).join("||"),"){",n,"}")):(l=
d.def(k,".",f),x=d.def(q,".",f),n(l,");",q,".",f,"=",l,";"),b("if(",l,"!==",x,"){",n,"}"));e(n)});return c.compile()}(),compile:function(c,b,e,d,f){var m=W();m.stats=m.link(f);Object.keys(b["static"]).forEach(function(c){na(m,b,c)});q.forEach(function(b){na(m,c,b)});e=da(c,b,e,d);Ea(m,e);ma(m,e);Ga(m,e);return m.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],
9:[function(a,h,p){function t(d,a){this.id=f++;this.type=d;this.data=a}function n(d){if(0===d.length)return[];var f=d.charAt(0),a=d.charAt(d.length-1);if(1<d.length&&f===a&&('"'===f||"'"===f))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return n(d.substr(0,f.index)).concat(n(f[1])).concat(n(d.substr(f.index+f[0].length)));f=d.split(".");if(1===f.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+
'"'];d=[];for(a=0;a<f.length;++a)d=d.concat(n(f[a]));return d}function d(d){return"["+n(d).join("][")+"]"}var f=0;h.exports={DynamicVariable:t,define:function(f,a){return new t(f,d(a+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof t},unbox:function(d,f){return"function"===typeof d?new t(0,d):d},accessor:d}},{}],10:[function(a,h,p){var t=a("./util/is-typed-array"),n=a("./util/is-ndarray"),d=a("./util/values"),f=a("./constants/primitives.json"),g=a("./constants/usage.json");
h.exports=function(a,y,v,w){function u(d){this.id=e++;b[this.id]=this;this.buffer=d;this.primType=4;this.type=this.vertCount=0}function r(b,e,c,d,f,m,k){(m=k)||t(e)&&(!n(e)||t(e.data))||(m=y.oes_element_index_uint?5125:5123);b.buffer.bind();v._initBuffer(b.buffer,e,c,m,3);e=k;if(!k){switch(b.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}b.buffer.dtype=e}b.type=e;0>f&&(f=b.buffer.byteLength,5123===e?f>>=1:5125===e&&(f>>=2));b.vertCount=f;
f=d;0>d&&(f=4,d=b.buffer.dimension,1===d&&(f=0),2===d&&(f=1),3===d&&(f=4));b.primType=f}function k(e){w.elementsCount--;delete b[e.id];e.buffer.destroy();e.buffer=null}var b={},e=0,m={uint8:5121,uint16:5123};y.oes_element_index_uint&&(m.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var q=[];return{create:function(b){function e(b){if(b)if("number"===typeof b)c(b),d.primType=4,d.vertCount=b|0,d.type=5121;else{var k=null,q=35044,u=-1,v=-1,z=0,y=0;Array.isArray(b)||t(b)||n(b)?k=b:("data"in
b&&(k=b.data),"usage"in b&&(q=g[b.usage]),"primitive"in b&&(u=f[b.primitive]),"count"in b&&(v=b.count|0),"length"in b&&(z=b.length|0),"type"in b&&(y=m[b.type]));k?r(d,k,q,u,v,z,y):(b=d.buffer,b.bind(),a.bufferData(34963,z,q),b.dtype=y||5121,b.usage=q,b.dimension=3,b.byteLength=z,d.primType=0>u?4:u,d.vertCount=0>v?0:v,d.type=b.dtype)}else c(),d.primType=4,d.vertCount=0,d.type=5121;return e}var c=v.create(null,34963,!0),d=new u(c._buffer);w.elementsCount++;e(b);e._reglType="elements";e._elements=d;
e.subdata=function(b,d){c.subdata(b,d);return e};e.destroy=function(){k(d)};return e},createStream:function(b){var e=q.pop();e||(e=new u(v.create(null,34963,!0)._buffer));r(e,b,35040,-1,-1,0,0);return e},destroyStream:function(b){q.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof u?b._elements:null},clear:function(){d(b).forEach(k)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],
11:[function(a,h,p){h.exports=function(a,n){function d(d){d=d.toLowerCase();if(d in f)return!0;var g;try{g=f[d]=a.getExtension(d)}catch(l){}return!!g}for(var f={},g=0;g<n.extensions.length;++g){var l=n.extensions[g];if(!d(l))return n.onDestroy(),n.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}n.optionalExtensions.forEach(d);return{extensions:f,refresh:function(){n.extensions.forEach(d);n.optionalExtensions.forEach(d)}}}},
{}],12:[function(a,h,p){var t=a("./util/values"),n=a("./util/extend"),d=[];d[6408]=4;var f=[];f[5121]=1;f[5126]=4;f[36193]=2;h.exports=function(a,l,y,v,w,u){function r(c,b,e){this.target=c;this.texture=b;this.renderbuffer=e;var d=c=0;b?(c=b.width,d=b.height):e&&(c=e.width,d=e.height);this.width=c;this.height=d}function k(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function b(c,b,e){c&&(c.texture?c.texture._texture.refCount+=1:c.renderbuffer._renderbuffer.refCount+=
1)}function e(c,b){b?b.texture?a.framebufferTexture2D(36160,c,b.target,b.texture._texture.texture,0):a.framebufferRenderbuffer(36160,c,36161,b.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,c,3553,null,0)}function m(c){var b=3553,e=null,d=null,f=c;"object"===typeof c&&(f=c.data,"target"in c&&(b=c.target|0));c=f._reglType;"texture2d"===c?e=f:"textureCube"===c?e=f:"renderbuffer"===c&&(d=f,b=36161);return new r(b,e,d)}function q(c,b,e,d,f){if(e)return c=v.create2D({width:c,height:b,
format:d,type:f}),c._texture.refCount=0,new r(3553,c,null);c=w.create({width:c,height:b,format:d});c._renderbuffer.refCount=0;return new r(36161,null,c)}function z(c){return c&&(c.texture||c.renderbuffer)}function E(c,b,e){c&&(c.texture?c.texture.resize(b,e):c.renderbuffer&&c.renderbuffer.resize(b,e))}function c(){this.id=N++;K[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function x(c){c.colorAttachments.forEach(k);k(c.depthAttachment);k(c.stencilAttachment);k(c.depthStencilAttachment)}function C(c){a.deleteFramebuffer(c.framebuffer);c.framebuffer=null;u.framebufferCount--;delete K[c.id]}function F(c){var b;a.bindFramebuffer(36160,c.framebuffer);var d=c.colorAttachments;for(b=0;b<d.length;++b)e(36064+b,d[b]);for(b=d.length;b<y.maxColorAttachments;++b)e(36064+b,null);e(36096,c.depthAttachment);e(36128,c.stencilAttachment);e(33306,c.depthStencilAttachment);a.checkFramebufferStatus(36160);
a.bindFramebuffer(36160,h.next);h.current=h.next}function A(e,k){function a(c,e){var k,r=0,n=0,u=!0,C=!0;k=null;var v=!0,y="rgba",w="uint8",t=1,A=null,E=null,h=null,B=!1;if("number"===typeof c)r=c|0,n=e|0||r;else if(c){"shape"in c?(n=c.shape,r=n[0],n=n[1]):("radius"in c&&(r=n=c.radius),"width"in c&&(r=c.width),"height"in c&&(n=c.height));if("color"in c||"colors"in c)k=c.color||c.colors,Array.isArray(k);k||("colorCount"in c&&(t=c.colorCount|0),"colorTexture"in c&&(v=!!c.colorTexture,y="rgba4"),"colorType"in
c&&(w=c.colorType,v||("half float"===w?l.ext_color_buffer_half_float&&(y="rgba16f"):"float"===w&&l.webgl_color_buffer_float&&(y="rgba32f"))),"colorFormat"in c&&(y=c.colorFormat,0<=p.indexOf(y)?v=!0:0<=I.indexOf(y)&&(v=!1)));if("depthTexture"in c||"depthStencilTexture"in c)B=!(!c.depthTexture&&!c.depthStencilTexture);"depth"in c&&("boolean"===typeof c.depth?u=c.depth:(A=c.depth,C=!1));"stencil"in c&&("boolean"===typeof c.stencil?C=c.stencil:(E=c.stencil,u=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?
u=C=c.depthStencil:(h=c.depthStencil,C=u=!1))}else r=n=1;var D=null,J=null,K=null,N=null;if(Array.isArray(k))D=k.map(m);else if(k)D=[m(k)];else for(D=Array(t),k=0;k<t;++k)D[k]=q(r,n,v,y,w);r=r||D[0].width;n=n||D[0].height;A?J=m(A):u&&!C&&(J=q(r,n,B,"depth","uint32"));E?K=m(E):C&&!u&&(K=q(r,n,!1,"stencil","uint8"));h?N=m(h):!A&&!E&&C&&u&&(N=q(r,n,B,"depth stencil","depth stencil"));u=null;for(k=0;k<D.length;++k)b(D[k],r,n),D[k]&&D[k].texture&&(C=d[D[k].texture._texture.format]*f[D[k].texture._texture.type],
null===u&&(u=C));b(J,r,n);b(K,r,n);b(N,r,n);x(g);g.width=r;g.height=n;g.colorAttachments=D;g.depthAttachment=J;g.stencilAttachment=K;g.depthStencilAttachment=N;a.color=D.map(z);a.depth=z(J);a.stencil=z(K);a.depthStencil=z(N);a.width=g.width;a.height=g.height;F(g);return a}var g=new c;u.framebufferCount++;a(e,k);return n(a,{resize:function(c,b){var e=c|0,d=b|0||e;if(e===g.width&&d===g.height)return a;for(var f=g.colorAttachments,m=0;m<f.length;++m)E(f[m],e,d);E(g.depthAttachment,e,d);E(g.stencilAttachment,
e,d);E(g.depthStencilAttachment,e,d);g.width=a.width=e;g.height=a.height=d;F(g);return a},_reglType:"framebuffer",_framebuffer:g,destroy:function(){C(g);x(g)}})}var h={current:null,next:null,dirty:!1},p=["rgba"],I=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&I.push("srgba");l.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");l.webgl_color_buffer_float&&I.push("rgba32f");var D=["uint8"];l.oes_texture_half_float&&D.push("half float");l.oes_texture_float&&D.push("float");var N=0,K={};return n(h,{getFramebuffer:function(b){return"function"===
typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof c)?b:null},create:A,createCube:function(c){function b(c){var d,f={color:null},m=0,k=null;d="rgba";var a="uint8",q=1;if("number"===typeof c)m=c|0;else if(c){"shape"in c?m=c.shape[0]:("radius"in c&&(m=c.radius|0),"width"in c?m=c.width|0:"height"in c&&(m=c.height|0));if("color"in c||"colors"in c)k=c.color||c.colors,Array.isArray(k);k||("colorCount"in c&&(q=c.colorCount|0),"colorType"in c&&(a=c.colorType),"colorFormat"in c&&(d=c.colorFormat));
"depth"in c&&(f.depth=c.depth);"stencil"in c&&(f.stencil=c.stencil);"depthStencil"in c&&(f.depthStencil=c.depthStencil)}else m=1;if(k)if(Array.isArray(k))for(c=[],d=0;d<k.length;++d)c[d]=k[d];else c=[k];else for(c=Array(q),k={radius:m,format:d,type:a},d=0;d<q;++d)c[d]=v.createCube(k);f.color=Array(c.length);for(d=0;d<c.length;++d)q=c[d],m=m||q.width,f.color[d]={target:34069,data:c[d]};for(d=0;6>d;++d){for(q=0;q<c.length;++q)f.color[q].target=34069+d;0<d&&(f.depth=e[0].depth,f.stencil=e[0].stencil,
f.depthStencil=e[0].depthStencil);if(e[d])e[d](f);else e[d]=A(f)}return n(b,{width:m,height:m,color:c})}var e=Array(6);b(c);return n(b,{faces:e,resize:function(c){for(var d=0;6>d;++d)e[d].resize(c);return b},_reglType:"framebufferCube",destroy:function(){e.forEach(function(c){c.destroy()})}})},clear:function(){t(K).forEach(C)}})}},{"./util/extend":23,"./util/values":31}],13:[function(a,h,p){h.exports=function(a,n){var d=1;n.ext_texture_filter_anisotropic&&(d=a.getParameter(34047));var f=1,g=1;n.webgl_draw_buffers&&
(f=a.getParameter(34852),g=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(n).filter(function(d){return!!n[d]}),maxAnisotropic:d,maxDrawbuffers:f,maxColorAttachments:g,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),
maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,h,p){var t=
a("./util/is-typed-array");h.exports=function(a,d,f,g,l,y){return function(l){var y;y=null===d.next?5121:d.next.colorAttachments[0].texture._texture.type;var u=0,r=0,k=g.framebufferWidth,b=g.framebufferHeight,e=null;t(l)?e=l:l&&(u=l.x|0,r=l.y|0,k=(l.width||g.framebufferWidth-u)|0,b=(l.height||g.framebufferHeight-r)|0,e=l.data||null);f();l=k*b*4;e||(5121===y?e=new Uint8Array(l):5126===y&&(e=e||new Float32Array(l)));a.pixelStorei(3333,4);a.readPixels(u,r,k,b,6408,y,e);return e}}},{"./util/is-typed-array":26}],
15:[function(a,h,p){var t=a("./util/values"),n=[];n[32854]=2;n[32855]=2;n[36194]=2;n[33189]=2;n[36168]=1;n[34041]=4;n[35907]=4;n[34836]=16;n[34842]=8;n[34843]=6;h.exports=function(d,f,a,l,y){function v(b){this.id=r++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;y.profile&&(this.stats={size:0})}function w(b){var e=b.renderbuffer;d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete k[b.id];l.renderbufferCount--}var u={rgba4:32854,
rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(u.srgba=35907);f.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);f.webgl_color_buffer_float&&(u.rgba32f=34836);var r=0,k={};v.prototype.decRef=function(){0>=--this.refCount&&w(this)};y.profile&&(l.getTotalRenderbufferSize=function(){var b=0;Object.keys(k).forEach(function(e){b+=k[e].stats.size});return b});return{create:function(b,e){function f(b,e){var c=0,k=0,g=32854;"object"===typeof b&&b?("shape"in
b?(k=b.shape,c=k[0]|0,k=k[1]|0):("radius"in b&&(c=k=b.radius|0),"width"in b&&(c=b.width|0),"height"in b&&(k=b.height|0)),"format"in b&&(g=u[b.format])):"number"===typeof b?(c=b|0,k="number"===typeof e?e|0:c):b||(c=k=1);if(c!==a.width||k!==a.height||g!==a.format)return f.width=a.width=c,f.height=a.height=k,a.format=g,d.bindRenderbuffer(36161,a.renderbuffer),d.renderbufferStorage(36161,g,c,k),y.profile&&(a.stats.size=n[a.format]*a.width*a.height),f}var a=new v(d.createRenderbuffer());k[a.id]=a;l.renderbufferCount++;
f(b,e);f.resize=function(b,e){var c=b|0,k=e|0||c;if(c===a.width&&k===a.height)return f;f.width=a.width=c;f.height=a.height=k;d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,c,k);y.profile&&(a.stats.size=n[a.format]*a.width*a.height);return f};f._reglType="renderbuffer";f._renderbuffer=a;y.profile&&(f.stats=a.stats);f.destroy=function(){a.decRef()};return f},clear:function(){t(k).forEach(w)}}}},{"./util/values":31}],16:[function(a,h,p){var t=a("./util/values");h.exports=
function(a,d,f,g){function l(b,e,d,f){this.name=b;this.id=e;this.location=d;this.info=f}function y(b,e){for(var d=0;d<b.length;++d)if(b[d].id===e.id){b[d].location=e.location;return}b.push(e)}function v(b,e,f){f=35632===b?u:r;var k=f[e];if(!k){var c=d.str(e),k=a.createShader(b);a.shaderSource(k,c);a.compileShader(k);f[e]=k}return k}function w(b,d){this.id=e++;this.fragId=b;this.vertId=d;this.program=null;this.uniforms=[];this.attributes=[];g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}
var u={},r={},k={},b=[],e=0;g.profile&&(f.getMaxUniformsCount=function(){var e=0;b.forEach(function(b){b.stats.uniformsCount>e&&(e=b.stats.uniformsCount)});return e},f.getMaxAttributesCount=function(){var e=0;b.forEach(function(b){b.stats.attributesCount>e&&(e=b.stats.attributesCount)});return e});return{clear:function(){var e=a.deleteShader.bind(a);t(u).forEach(e);u={};t(r).forEach(e);r={};b.forEach(function(b){a.deleteProgram(b.program)});b.length=0;k={};f.shaderCount=0},program:function(e,q,r){f.shaderCount++;
(r=k[q])||(r=k[q]={});var u=r[e];if(!u){var c=u=new w(q,e),x,C;x=v(35632,c.fragId);C=v(35633,c.vertId);q=c.program=a.createProgram();a.attachShader(q,x);a.attachShader(q,C);a.linkProgram(q);var t=a.getProgramParameter(q,35718);g.profile&&(c.stats.uniformsCount=t);var A=c.uniforms;for(x=0;x<t;++x)if(C=a.getActiveUniform(q,x))if(1<C.size)for(var h=0;h<C.size;++h){var p=C.name.replace("[0]","["+h+"]");y(A,new l(p,d.id(p),a.getUniformLocation(q,p),C))}else y(A,new l(C.name,d.id(C.name),a.getUniformLocation(q,
C.name),C));t=a.getProgramParameter(q,35721);g.profile&&(c.stats.attributesCount=t);c=c.attributes;for(x=0;x<t;++x)(C=a.getActiveAttrib(q,x))&&y(c,new l(C.name,d.id(C.name),a.getAttribLocation(q,C.name),C));r[e]=u;b.push(u)}return u},shader:v,frag:null,vert:null}}},{"./util/values":31}],17:[function(a,h,p){h.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(a,h,p){h.exports=
function(){var a={"":0},n=[""];return{id:function(d){var f=a[d];if(f)return f;f=a[d]=n.length;n.push(d);return f},str:function(d){return n[d]}}}},{}],19:[function(a,h,p){function t(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function n(c){return Array.isArray(c)&&0!==c.length&&b(c[0])?!0:!1}function d(c){return Object.prototype.toString.call(c)}function f(c){if(!c)return!1;var b=d(c);return 0<=E.indexOf(b)?!0:t(c)||n(c)||u(c)}function g(c,b){36193===c.type?(c.data=k(b),r.freeType(b)):
c.data=b}function l(b,e,d,f,a,m){b="undefined"!==typeof x[b]?x[b]:z[b]*c[e];m&&(b*=6);if(a){for(f=0;1<=d;)f+=b*d*d,d/=2;return f}return b*d*f}var y=a("./util/extend"),v=a("./util/values"),w=a("./util/is-typed-array"),u=a("./util/is-ndarray"),r=a("./util/pool"),k=a("./util/to-half-float"),b=a("./util/is-array-like");p=a("./constants/arraytypes.json");var e=a("./constants/arraytypes.json"),m=[9984,9986,9985,9987],q=[0,6409,6410,6407,6408],z={};z[6409]=z[6406]=z[6402]=1;z[34041]=z[6410]=2;z[6407]=z[35904]=
3;z[6408]=z[35906]=4;var E=Object.keys(p).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),c=[];c[5121]=1;c[5126]=4;c[36193]=2;c[5123]=2;c[5125]=4;var x=[];x[32854]=2;x[32855]=2;x[36194]=2;x[34041]=4;x[33776]=.5;x[33777]=.5;x[33778]=1;x[33779]=1;x[35986]=.5;x[35987]=1;x[34798]=1;x[35840]=.5;x[35841]=.25;x[35842]=.5;x[35843]=.25;x[36196]=.5;h.exports=function(c,a,x,h,E,p,D){function N(){this.format=this.internalformat=
6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function K(c,b){c.internalformat=b.internalformat;c.format=b.format;c.type=b.type;c.compressed=b.compressed;c.premultiplyAlpha=b.premultiplyAlpha;c.flipY=b.flipY;c.unpackAlignment=b.unpackAlignment;c.colorSpace=b.colorSpace;c.width=b.width;c.height=b.height;c.channels=b.channels}function J(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.premultiplyAlpha=
b.premultiplyAlpha);"flipY"in b&&(c.flipY=b.flipY);"alignment"in b&&(c.unpackAlignment=b.alignment);"colorSpace"in b&&(c.colorSpace=pa[b.colorSpace]);"type"in b&&(c.type=fa[b.type]);var e=c.width,d=c.height,f=c.channels,a=!1;"shape"in b?(e=b.shape[0],d=b.shape[1],3===b.shape.length&&(f=b.shape[2],a=!0)):("radius"in b&&(e=d=b.radius),"width"in b&&(e=b.width),"height"in b&&(d=b.height),"channels"in b&&(f=b.channels,a=!0));c.width=e|0;c.height=d|0;c.channels=f|0;e=!1;"format"in b&&(e=b.format,d=c.internalformat=
ga[e],c.format=Da[d],e in fa&&!("type"in b)&&(c.type=fa[e]),e in ha&&(c.compressed=!0),e=!0);!a&&e?c.channels=z[c.format]:a&&!e&&c.channels!==q[c.format]&&(c.format=c.internalformat=q[c.channels])}}function O(b){c.pixelStorei(37440,b.flipY);c.pixelStorei(37441,b.premultiplyAlpha);c.pixelStorei(37443,b.colorSpace);c.pixelStorei(3317,b.unpackAlignment)}function H(){N.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function G(c,a){var m=null;
f(a)?m=a:a&&(J(c,a),"x"in a&&(c.xOffset=a.x|0),"y"in a&&(c.yOffset=a.y|0),f(a.data)&&(m=a.data));if(a.copy){var l=E.viewportWidth,x=E.viewportHeight;c.width=c.width||l-c.xOffset;c.height=c.height||x-c.yOffset;c.needsCopy=!0}else if(!m)c.width=c.width||1,c.height=c.height||1;else if(w(m))c.data=m,"type"in a||5121!==c.type||(c.type=e[Object.prototype.toString.call(m)]|0);else if(t(m)){l=m;x=c.width*c.height*c.channels;switch(c.type){case 5121:case 5123:case 5125:case 5126:x=r.allocType(c.type,x);x.set(l);
c.data=x;break;case 36193:c.data=k(l)}c.alignment=1;c.needsFree=!0}else if(u(m)){l=m.data;Array.isArray(l)||5121!==c.type||(c.type=e[Object.prototype.toString.call(l)]|0);var x=m.shape,H=m.stride,v,y,G,z;3===x.length?(G=x[2],z=H[2]):z=G=1;v=x[0];y=x[1];x=H[0];H=H[1];c.alignment=1;c.width=v;c.height=y;c.channels=G;c.format=c.internalformat=q[G];c.needsFree=!0;v=z;m=m.offset;G=c.width;z=c.height;y=c.channels;for(var C=r.allocType(36193===c.type?5126:c.type,G*z*y),A=0,F=0;F<z;++F)for(var h=0;h<G;++h)for(var M=
0;M<y;++M)C[A++]=l[x*h+H*F+v*M+m];g(c,C)}else if("[object HTMLCanvasElement]"===d(m)||"[object CanvasRenderingContext2D]"===d(m))"[object HTMLCanvasElement]"===d(m)?c.element=m:c.element=m.canvas,c.width=c.element.width,c.height=c.element.height;else if("[object HTMLImageElement]"===d(m))c.element=m,c.width=m.naturalWidth,c.height=m.naturalHeight;else if("[object HTMLVideoElement]"===d(m))c.element=m,c.width=m.videoWidth,c.height=m.videoHeight,c.needsPoll=!0;else if(n(m)){l=m[0].length;x=m.length;
H=1;if(b(m[0][0])){v=H=m[0][0].length;G=r.allocType(36193===c.type?5126:c.type,l*x*v);for(y=z=0;y<x;++y)for(C=m[y],A=0;A<l;++A)for(F=C[A],h=0;h<v;++h)G[z++]=F[h];g(c,G)}else{v=r.allocType(36193===c.type?5126:c.type,l*x);for(z=G=0;z<x;++z)for(y=m[z],C=0;C<l;++C)v[G++]=y[C];g(c,v)}c.alignment=1;c.width=l;c.height=x;c.channels=H;c.format=c.internalformat=q[H];c.needsFree=!0}}function M(b,e,d,f,m){var a=b.element,k=b.data,q=b.internalformat,g=b.format,l=b.type,x=b.width,r=b.height;O(b);a?c.texSubImage2D(e,
m,d,f,g,l,a):b.compressed?c.compressedTexSubImage2D(e,m,d,f,q,x,r,k):b.needsCopy?(h(),c.copyTexSubImage2D(e,m,d,f,b.xOffset,b.yOffset,x,r)):c.texSubImage2D(e,m,d,f,x,r,g,l,k)}function Q(){return Ea.pop()||new H}function V(c){c.needsFree&&r.freeType(c.data);H.call(c);Ea.push(c)}function Z(){N.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function R(c,b,e){var d=c.images[0]=Q();c.mipmask=1;d.width=c.width=b;d.height=c.height=e}function L(c,b){var e=null;if(f(b))e=
c.images[0]=Q(),K(e,c),G(e,b),c.mipmask=1;else if(J(c,b),Array.isArray(b.mipmap))for(var d=b.mipmap,m=0;m<d.length;++m)e=c.images[m]=Q(),K(e,c),e.width>>=m,e.height>>=m,G(e,d[m]),c.mipmask|=1<<m;else e=c.images[0]=Q(),K(e,c),G(e,b),c.mipmask=1;K(c,c.images[0])}function W(b,e){for(var d=b.images,f=0;f<d.length&&d[f];++f){var m=d[f],a=e,k=f,q=m.element,g=m.data,l=m.internalformat,x=m.format,r=m.type,n=m.width,u=m.height;O(m);q?c.texImage2D(a,k,x,x,r,q):m.compressed?c.compressedTexImage2D(a,k,l,n,u,
0,g):m.needsCopy?(h(),c.copyTexImage2D(a,k,x,m.xOffset,m.yOffset,n,u,0)):c.texImage2D(a,k,x,n,u,0,x,r,g)}}function T(){var c=Fa.pop()||new Z;N.call(c);for(var b=c.mipmask=0;16>b;++b)c.images[b]=null;return c}function X(c){for(var b=c.images,e=0;e<b.length;++e)b[e]&&V(b[e]),b[e]=null;Fa.push(c)}function U(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function S(c,b){"min"in b&&(c.minFilter=wa[b.min],0<=m.indexOf(c.minFilter)&&
(c.genMipmaps=!0));"mag"in b&&(c.magFilter=va[b.mag]);var e=c.wrapS,d=c.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?e=d=ea[f]:Array.isArray(f)&&(e=ea[f[0]],d=ea[f[1]])}else"wrapS"in b&&(e=ea[b.wrapS]),"wrapT"in b&&(d=ea[b.wrapT]);c.wrapS=e;c.wrapT=d;"anisotropic"in b&&(c.anisotropic=b.anisotropic);if("mipmap"in b){e=!1;switch(typeof b.mipmap){case "string":c.mipmapHint=ra[b.mipmap];e=c.genMipmaps=!0;break;case "boolean":e=c.genMipmaps=b.mipmap;break;case "object":c.genMipmaps=!1,e=!0}!e||
"min"in b||(c.minFilter=9984)}}function ba(b,e){c.texParameteri(e,10241,b.minFilter);c.texParameteri(e,10240,b.magFilter);c.texParameteri(e,10242,b.wrapS);c.texParameteri(e,10243,b.wrapT);a.ext_texture_filter_anisotropic&&c.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(c.hint(33170,b.mipmapHint),c.generateMipmap(e))}function aa(){var c=qa.pop()||new U;U.call(c);return c}function ia(b){N.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ga++;this.refCount=1;this.target=b;this.texture=
c.createTexture();this.unit=-1;this.bindCount=0;D.profile&&(this.stats={size:0})}function ca(b){c.activeTexture(33984);c.bindTexture(b.target,b.texture)}function Y(){var b=na[0];b?c.bindTexture(b.target,b.texture):c.bindTexture(3553,null)}function da(b){var e=b.texture,d=b.unit,f=b.target;0<=d&&(c.activeTexture(33984+d),c.bindTexture(f,null),na[d]=null);c.deleteTexture(e);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ma[b.id];p.textureCount--}var ra={"don't care":4352,"dont care":4352,
nice:4354,fast:4353},ea={repeat:10497,clamp:33071,mirror:33648},va={nearest:9728,linear:9729},wa=y({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},va),pa={none:0,browser:37444},fa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ga={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};a.ext_srgb&&(ga.srgb=35904,ga.srgba=35906);a.oes_texture_float&&(fa["float"]=
5126);a.oes_texture_half_float&&(fa.float16=fa["half float"]=36193);a.webgl_depth_texture&&(y(ga,{depth:6402,"depth stencil":34041}),y(fa,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&y(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&y(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&y(ha,{"rgb pvrtc 4bppv1":35840,
"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var ya=Array.prototype.slice.call(c.getParameter(34467));Object.keys(ha).forEach(function(c){var b=ha[c];0<=ya.indexOf(b)&&(ga[c]=b)});var sa=Object.keys(ga);x.textureFormats=sa;var Da=sa.reduce(function(c,b){var e=ga[b];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e?c[e]=e:32855===e||0<=b.indexOf("rgba")?c[e]=6408:c[e]=6407;return c},{}),Ea=[],Fa=[],
qa=[],Ga=0,ma={},za=x.maxTextureUnits,na=Array(za).map(function(){return null});y(ia.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var e=0;e<za;++e){var d=na[e];if(d){if(0<d.bindCount)continue;d.unit=-1}na[e]=this;b=e;break}D.profile&&p.maxTextureUnits<b+1&&(p.maxTextureUnits=b+1);this.unit=b;c.activeTexture(33984+b);c.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&da(this)}});D.profile&&(p.getTotalTextureSize=
function(){var c=0;Object.keys(ma).forEach(function(b){c+=ma[b].stats.size});return c});return{create2D:function(b,e){function d(c,b){var e=aa(),m=T();"number"===typeof c?"number"===typeof b?R(m,c|0,b|0):R(m,c|0,c|0):c?(S(e,c),L(m,c)):R(m,1,1);e.genMipmaps&&(m.mipmask=(m.width<<1)-1);f.mipmask=m.mipmask;K(f,m);f.internalformat=m.internalformat;d.width=m.width;d.height=m.height;ca(f);W(m,3553);ba(e,3553);Y();qa.push(e);X(m);D.profile&&(f.stats.size=l(f.internalformat,f.type,m.width,m.height,e.genMipmaps,
!1));return d}var f=new ia(3553);ma[f.id]=f;p.textureCount++;d(b,e);d.subimage=function(c,b,e,m){b|=0;e|=0;m|=0;var a=Q();K(a,f);a.width>>=m;a.height>>=m;a.width-=b;a.height-=e;G(a,c);ca(f);M(a,3553,b,e,m);Y();V(a);return d};d.resize=function(b,e){var m=b|0,a=e|0||m;if(m===f.width&&a===f.height)return d;d.width=f.width=m;d.height=f.height=a;ca(f);for(var k=0;f.mipmask>>k;++k)c.texImage2D(3553,k,f.format,m>>k,a>>k,0,f.format,f.type,null);Y();D.profile&&(f.stats.size=l(f.internalformat,f.type,m,a,!1,
!1));return d};d._reglType="texture2d";d._texture=f;D.profile&&(d.stats=f.stats);d.destroy=function(){f.decRef()};return d},createCube:function(b,e,d,f,m,a){function k(c,b,e,d,f,m){var a,x=aa();for(a=0;6>a;++a)g[a]=T();if("number"===typeof c||!c)for(c=c|0||1,a=0;6>a;++a)R(g[a],c,c);else if("object"===typeof c)if(b)L(g[0],c),L(g[1],b),L(g[2],e),L(g[3],d),L(g[4],f),L(g[5],m);else if(S(x,c),J(q,c),"faces"in c)for(c=c.faces,a=0;6>a;++a)K(g[a],q),L(g[a],c[a]);else for(a=0;6>a;++a)L(g[a],c);K(q,g[0]);q.mipmask=
x.genMipmaps?(g[0].width<<1)-1:g[0].mipmask;q.internalformat=g[0].internalformat;k.width=g[0].width;k.height=g[0].height;ca(q);for(a=0;6>a;++a)W(g[a],34069+a);ba(x,34067);Y();D.profile&&(q.stats.size=l(q.internalformat,q.type,k.width,k.height,x.genMipmaps,!0));qa.push(x);for(a=0;6>a;++a)X(g[a]);return k}var q=new ia(34067);ma[q.id]=q;p.cubeCount++;var g=Array(6);k(b,e,d,f,m,a);k.subimage=function(c,b,e,d,f){e|=0;d|=0;f|=0;var m=Q();K(m,q);m.width>>=f;m.height>>=f;m.width-=e;m.height-=d;G(m,b);ca(q);
M(m,34069+c,e,d,f);Y();V(m);return k};k.resize=function(b){b|=0;if(b!==q.width){k.width=q.width=b;k.height=q.height=b;ca(q);for(var e=0;6>e;++e)for(var d=0;q.mipmask>>d;++d)c.texImage2D(34069+e,e,q.format,b>>e,b>>e,0,q.format,q.type,null);Y();D.profile&&(q.stats.size=l(q.internalformat,q.type,k.width,k.height,!1,!0));return k}};k._reglType="textureCube";k._texture=q;D.profile&&(k.stats=q.stats);k.destroy=function(){q.decRef()};return k},clear:function(){for(var b=0;b<za;++b)c.activeTexture(33984+
b),c.bindTexture(3553,null),na[b]=null;v(ma).forEach(da);p.cubeCount=0;p.textureCount=0},getTexture:function(c){return null}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],20:[function(a,h,p){h.exports=function(a,n){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function f(f,b,e){var m=v.pop()||new d;m.startQueryIndex=
f;m.endQueryIndex=b;m.sum=0;m.stats=e;w.push(m)}var g=n.ext_disjoint_timer_query;if(!g)return null;var l=[],y=[],v=[],w=[],u=[],r=[];return{beginQuery:function(d){var b=l.pop()||g.createQueryEXT();g.beginQueryEXT(35007,b);y.push(b);f(y.length-1,y.length,d)},endQuery:function(){g.endQueryEXT(35007)},pushScopeStats:f,update:function(){var d,b;d=y.length;if(0!==d){r.length=Math.max(r.length,d+1);u.length=Math.max(u.length,d+1);u[0]=0;var e=r[0]=0;for(b=d=0;b<y.length;++b){var f=y[b];g.getQueryObjectEXT(f,
34919)?(e+=g.getQueryObjectEXT(f,34918),l.push(f)):y[d++]=f;u[b+1]=e;r[b+1]=d}y.length=d;for(b=d=0;b<w.length;++b){var e=w[b],a=e.startQueryIndex,f=e.endQueryIndex;e.sum+=u[f]-u[a];a=r[a];f=r[f];f===a?(e.stats.gpuTime+=e.sum/1E6,v.push(e)):(e.startQueryIndex=a,e.endQueryIndex=f,w[d++]=e)}w.length=d}},getNumPendingQueries:function(){return y.length},clear:function(){l.push.apply(l,y);for(var d=0;d<l.length;d++)g.deleteQueryEXT(l[d]);y.length=0;l.length=0}}}},{}],21:[function(a,h,p){h.exports="undefined"!==
typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,h,p){function t(d){return Array.prototype.slice.call(d)}function n(d){return t(d).join("")}var d=a("./extend");h.exports=function(){function f(){var f=[],a=[];return d(function(){f.push.apply(f,t(arguments))},{def:function(){var b="v"+l++;a.push(b);0<arguments.length&&(f.push(b,"="),f.push.apply(f,t(arguments)),f.push(";"));return b},toString:function(){return n([0<a.length?"var "+
a+";":"",n(f)])}})}function a(){function g(e,d){b(e,d,"=",k.def(e,d),";")}var k=f(),b=f(),e=k.toString,m=b.toString;return d(function(){k.apply(k,t(arguments))},{def:k.def,entry:k,exit:b,save:g,set:function(b,e,d){g(b,e);k(b,e,"=",d,";")},toString:function(){return e()+m()}})}var l=0,y=[],v=[],w=f(),u={};return{global:w,link:function(d){for(var f=0;f<v.length;++f)if(v[f]===d)return y[f];f="g"+l++;y.push(f);v.push(d);return f},block:f,proc:function(f,k){function b(){var b="a"+e.length;e.push(b);return b}
var e=[];k=k||0;for(var m=0;m<k;++m)b();var m=a(),q=m.toString;return u[f]=d(m,{arg:b,toString:function(){return n(["function(",e.join(),"){",q(),"}"])}})},scope:a,cond:function(){var f=n(arguments),k=a(),b=a(),e=k.toString,m=b.toString;return d(k,{then:function(){k.apply(k,t(arguments));return this},"else":function(){b.apply(b,t(arguments));return this},toString:function(){var b=m();b&&(b="else{"+b+"}");return n(["if(",f,"){",e(),"}",b])}})},compile:function(){var d=['"use strict";',w,"return {"];
Object.keys(u).forEach(function(b){d.push('"',b,'":',u[b].toString(),",")});d.push("}");var f=n(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(f)).apply(null,v)}}}},{"./extend":23}],23:[function(a,h,p){h.exports=function(a,n){for(var d=Object.keys(n),f=0;f<d.length;++f)a[d[f]]=n[d[f]];return a}},{}],24:[function(a,h,p){var t=a("./is-typed-array");h.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":26}],25:[function(a,h,p){var t=
a("./is-typed-array");h.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":26}],26:[function(a,h,p){var t=a("../constants/arraytypes.json");h.exports=function(a){return Object.prototype.toString.call(a)in t}},{"../constants/arraytypes.json":4}],27:[function(a,h,p){h.exports=function(a,n){for(var d=Array(a),f=0;f<a;++f)d[f]=n(f);return d}},
{}],28:[function(a,h,p){function t(d){var f,a;f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1}function n(d){a:{for(var a=16;268435456>=a;a*=16)if(d<=a){d=a;break a}d=0}a=f[t(d)>>2];return 0<a.length?a.pop():new ArrayBuffer(d)}function d(d){f[t(d.byteLength)>>2].push(d)}var f=a("./loop")(8,function(){return[]});h.exports={alloc:n,free:d,allocType:function(d,f){var a=null;switch(d){case 5120:a=new Int8Array(n(f),0,f);break;case 5121:a=new Uint8Array(n(f),
0,f);break;case 5122:a=new Int16Array(n(2*f),0,f);break;case 5123:a=new Uint16Array(n(2*f),0,f);break;case 5124:a=new Int32Array(n(4*f),0,f);break;case 5125:a=new Uint32Array(n(4*f),0,f);break;case 5126:a=new Float32Array(n(4*f),0,f);break;default:return null}return a.length!==f?a.subarray(0,f):a},freeType:function(f){d(f.buffer)}}},{"./loop":27}],29:[function(a,h,p){h.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},
cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){return setTimeout(a,16)},cancel:clearTimeout}},{}],30:[function(a,h,p){var t=a("./pool"),n=new Float32Array(1),d=new Uint32Array(n.buffer);h.exports=function(f){for(var a=t.allocType(5123,f.length),l=0;l<f.length;++l)if(isNaN(f[l]))a[l]=65535;else if(Infinity===f[l])a[l]=31744;else if(-Infinity===f[l])a[l]=64512;else{n[0]=f[l];var y=d[0],v=y>>>31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;a[l]=-24>w?v:-14>w?v+(y+1024>>-14-w):15<w?v+31744:
v+(w+15<<10)+y}return a}},{"./pool":28}],31:[function(a,h,p){h.exports=function(a){return Object.keys(a).map(function(n){return a[n]})}},{}],32:[function(a,h,p){function t(d,f,a){function n(){var f=window.innerWidth,k=window.innerHeight;d!==document.body&&(k=d.getBoundingClientRect(),f=k.right-k.left,k=k.top-k.bottom);u.width=a*f;u.height=a*k;g(u.style,{width:f+"px",height:k+"px"})}var u=document.createElement("canvas");g(u.style,{border:0,margin:0,padding:0,top:0,left:0});d.appendChild(u);d===document.body&&
(u.style.position="absolute",g(d.style,{margin:0,padding:0}));window.addEventListener("resize",n,!1);n();return{canvas:u,onDestroy:function(){window.removeEventListener("resize",n);d.removeChild(u)}}}function n(d,f){function a(g){try{return d.getContext(g,f)}catch(n){return null}}return a("webgl")||a("experimental-webgl")||a("webgl-experimental")}function d(d){return"string"===typeof d?d.split():d}function f(d){return"string"===typeof d?document.querySelector(d):d}var g=a("./util/extend");h.exports=
function(a){var g=a||{},v,w,u,r;a={};var k=[],b=[],e="undefined"===typeof window?1:window.devicePixelRatio,m=!1,q=function(b){},z=function(){};"string"===typeof g?v=document.querySelector(g):"object"===typeof g&&("string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?v=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?(r=g,u=r.canvas):("gl"in g?r=g.gl:"canvas"in g?u=f(g.canvas):"container"in g&&(w=f(g.container)),"attributes"in
g&&(a=g.attributes),"extensions"in g&&(k=d(g.extensions)),"optionalExtensions"in g&&(b=d(g.optionalExtensions)),"onDone"in g&&(q=g.onDone),"profile"in g&&(m=!!g.profile),"pixelRatio"in g&&(e=+g.pixelRatio)));v&&("canvas"===v.nodeName.toLowerCase()?u=v:w=v);if(!r){if(!u){v=t(w||document.body,q,e);if(!v)return null;u=v.canvas;z=v.onDestroy}r=n(u,a)}return r?{gl:r,canvas:u,container:w,extensions:k,optionalExtensions:b,pixelRatio:e,profile:m,onDone:q,onDestroy:z}:(z(),q("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/extend":23}],33:[function(a,h,p){function t(d,f,a){for(var v=[],w=f;w<a;w+=3)f=(d[w]<<16)+(d[w+1]<<8)+d[w+2],v.push(n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]);return v.join("")}p.toByteArray=function(a){var l,n,v,w,u;l=a.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[l-2]?2:"="===a[l-1]?1:0;u=new f(3*l/4-w);n=0<w?l-4:l;var r=0;for(l=0;l<n;l+=4)v=d[a.charCodeAt(l)]<<18|d[a.charCodeAt(l+1)]<<12|d[a.charCodeAt(l+2)]<<6|d[a.charCodeAt(l+3)],u[r++]=
v>>16&255,u[r++]=v>>8&255,u[r++]=v&255;2===w?(v=d[a.charCodeAt(l)]<<2|d[a.charCodeAt(l+1)]>>4,u[r++]=v&255):1===w&&(v=d[a.charCodeAt(l)]<<10|d[a.charCodeAt(l+1)]<<4|d[a.charCodeAt(l+2)]>>2,u[r++]=v>>8&255,u[r++]=v&255);return u};p.fromByteArray=function(d){for(var f=d.length,a=f%3,v="",w=[],u=0,r=f-a;u<r;u+=16383)w.push(t(d,u,u+16383>r?r:u+16383));1===a?(d=d[f-1],v+=n[d>>2],v+=n[d<<4&63],v+="=="):2===a&&(d=(d[f-2]<<8)+d[f-1],v+=n[d>>10],v+=n[d>>4&63],v+=n[d<<2&63],v+="=");w.push(v);return w.join("")};
var n=[],d=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var f=0;64>f;++f)n[f]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f],d["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(f)]=f;d[45]=62;d[95]=63})()},{}],34:[function(a,h,p){var t=a("./lib/rationalize");h.exports=function(a,d){return t(a[0].mul(d[1]).add(d[0].mul(a[1])),a[1].mul(d[1]))}},{"./lib/rationalize":44}],35:[function(a,h,p){h.exports=function(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},
{}],36:[function(a,h,p){var t=a("./lib/rationalize");h.exports=function(a,d){return t(a[0].mul(d[1]),a[1].mul(d[0]))}},{"./lib/rationalize":44}],37:[function(a,h,p){function t(a,w){if(n(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var u=0,r,k;if(d(a))r=a.clone();else if("string"===typeof a)r=g(a);else{if(0===a)return[f(0),f(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),u-=256;r=f(a)}if(n(w))r.mul(w[1]),k=w[0].clone();else if(d(w))k=w.clone();else if("string"===typeof w)k=
g(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),u+=256;k=f(w)}else k=f(1);0<u?r=r.shln(u):0>u&&(k=k.shln(-u));return l(r,k)}var n=a("./is-rat"),d=a("./lib/is-bn"),f=a("./lib/num-to-bn"),g=a("./lib/str-to-bn"),l=a("./lib/rationalize"),y=a("./div");h.exports=t},{"./div":36,"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],38:[function(a,h,p){var t=a("./lib/is-bn");h.exports=function(a){return Array.isArray(a)&&2===a.length&&
t(a[0])&&t(a[1])}},{"./lib/is-bn":42}],39:[function(a,h,p){var t=a("bn.js");h.exports=function(a){return a.cmp(new t(0))}},{"bn.js":47}],40:[function(a,h,p){h.exports=function(a){var n=a.length,d=a.words,f=0;if(1===n)f=d[0];else if(2===n)f=d[0]+67108864*d[1];else for(var g=f=0;g<n;g++)f+=d[g]*Math.pow(67108864,g);return a.sign?-f:f}},{}],41:[function(a,h,p){var t=a("double-bits"),n=a("bit-twiddle").countTrailingZeros;h.exports=function(d){var f=n(t.lo(d));if(32>f)return f;d=n(t.hi(d));return 20<d?
52:d+32}},{"bit-twiddle":52,"double-bits":73}],42:[function(a,h,p){a("bn.js");h.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,h,p){var t=a("bn.js"),n=a("double-bits");h.exports=function(d){var f=n.exponent(d);return 52>f?new t(d):(new t(d*Math.pow(2,52-f))).shln(f-52)}},{"bn.js":47,"double-bits":73}],44:[function(a,h,p){var t=a("./num-to-bn"),n=a("./bn-sign");h.exports=function(d,f){var a=n(d),l=n(f);if(0===a)return[t(0),t(1)];if(0===l)return[t(0),t(0)];
0>l&&(d=d.neg(),f=f.neg());a=d.gcd(f);return a.cmpn(1)?[d.div(a),f.div(a)]:[d,f]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,h,p){var t=a("bn.js");h.exports=function(a){return new t(a)}},{"bn.js":47}],46:[function(a,h,p){var t=a("./lib/rationalize");h.exports=function(a,d){return t(a[0].mul(d[0]),a[1].mul(d[1]))}},{"./lib/rationalize":44}],47:[function(a,h,p){(function(a,n){function d(c,b){if(!c)throw Error(b||"Assertion failed");}function f(c,b){c.super_=b;var e=function(){};e.prototype=
b.prototype;c.prototype=new e;c.prototype.constructor=c}function g(c,b,e){if(null!==c&&"object"===typeof c&&Array.isArray(c.words))return c;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===b||"be"===b)e=b,b=10;null!==c&&this._init(c||0,b||10,e||"be")}function l(c,b,e){var d=0;for(e=Math.min(c.length,e);b<e;b++)var f=c.charCodeAt(b)-48,d=d<<4,d=49<=f&&54>=f?d|f-49+10:17<=f&&22>=f?d|f-17+10:d|f&15;return d}function y(c,b,e,d){var f=0;for(e=Math.min(c.length,e);b<e;b++)var a=c.charCodeAt(b)-
48,f=f*d,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function v(c,b){this.name=c;this.p=new g(b,16);this.n=this.p.bitLength();this.k=(new g(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){v.call(this,
"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(c){"string"===typeof c?(c=g._prime(c),this.m=c.p,this.prime=c):(this.m=c,this.prime=null)}function e(c){b.call(this,c);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new g(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===
typeof a?a.exports=g:n.BN=g;g.BN=g;g.wordSize=26;g.prototype._init=function(c,b,e){if("number"===typeof c)return this._initNumber(c,b,e);if("object"===typeof c)return this._initArray(c,b,e);"hex"===b&&(b=16);d(b===(b|0)&&2<=b&&36>=b);c=c.toString().replace(/\s+/g,"");var f=0;"-"===c[0]&&f++;16===b?this._parseHex(c,f):this._parseBase(c,b,f);"-"===c[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),b,e)};g.prototype._initNumber=function(c,b,e){0>c&&(this.sign=!0,c=-c);67108864>
c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(d(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===e&&this._initArray(this.toArray(),b,e)};g.prototype._initArray=function(c,b,e){d("number"===typeof c.length);if(0>=c.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(b=0;b<this.length;b++)this.words[b]=0;var f=0;if("be"===
e)for(b=c.length-1,e=0;0<=b;b-=3){var a=c[b]|c[b-1]<<8|c[b-2]<<16;this.words[e]|=a<<f&67108863;this.words[e+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,e++)}else if("le"===e)for(e=b=0;b<c.length;b+=3)a=c[b]|c[b+1]<<8|c[b+2]<<16,this.words[e]|=a<<f&67108863,this.words[e+1]=a>>>26-f&67108863,f+=24,26<=f&&(f-=26,e++);return this.strip()};g.prototype._parseHex=function(c,b){this.length=Math.ceil((c.length-b)/6);this.words=Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;for(var d=0,e=c.length-
6,f=0;e>=b;e-=6){var a=l(c,e,e+6);this.words[f]|=a<<d&67108863;this.words[f+1]|=a>>>26-d&4194303;d+=24;26<=d&&(d-=26,f++)}e+6!==b&&(a=l(c,b,e+6),this.words[f]|=a<<d&67108863,this.words[f+1]|=a>>>26-d&4194303);this.strip()};g.prototype._parseBase=function(c,b,e){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=b)d++;d--;for(var f=f/b|0,a=c.length-e,m=a%d,k=Math.min(a,a-m)+e,a=0;e<k;e+=d)a=y(c,e,e+d,b),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==m){d=1;a=
y(c,e,c.length,b);for(e=0;e<m;e++)d*=b;this.imuln(d);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};g.prototype.copy=function(c){c.words=Array(this.length);for(var b=0;b<this.length;b++)c.words[b]=this.words[b];c.length=this.length;c.sign=this.sign;c.red=this.red};g.prototype.clone=function(){var c=new g(null);this.copy(c);return c};g.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};g.prototype._normSign=function(){1===
this.length&&0===this.words[0]&&(this.sign=!1);return this};g.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];g.prototype.toString=function(c,b){c=c||10;if(16===c||"hex"===c){var e="",f=0;b=b|0||1;for(var a=0,k=0;k<this.length;k++){var g=
this.words[k],l=((g<<f|a)&16777215).toString(16),a=g>>>24-f&16777215,e=0!==a||k!==this.length-1?m[6-l.length]+l+e:l+e,f=f+2;26<=f&&(f-=26,k--)}for(0!==a&&(e=a.toString(16)+e);0!==e.length%b;)e="0"+e;this.sign&&(e="-"+e);return e}if(c===(c|0)&&2<=c&&36>=c){f=q[c];a=z[c];e="";k=this.clone();for(k.sign=!1;0!==k.cmpn(0);)g=k.modn(a).toString(c),k=k.idivn(a),e=0!==k.cmpn(0)?m[f-g.length]+g+e:g+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}d(!1,"Base should be between 2 and 36")};g.prototype.toJSON=
function(){return this.toString(16)};g.prototype.toArray=function(c){this.strip();var b=Array(this.byteLength());b[0]=0;var e=this.clone();if("le"!==c)for(c=0;0!==e.cmpn(0);c++){var d=e.andln(255);e.ishrn(8);b[b.length-c-1]=d}else for(c=0;0!==e.cmpn(0);c++)d=e.andln(255),e.ishrn(8),b[c]=d;return b};g.prototype._countBits=Math.clz32?function(c){return 32-Math.clz32(c)}:function(c){var b=0;4096<=c&&(b+=13,c>>>=13);64<=c&&(b+=7,c>>>=7);8<=c&&(b+=4,c>>>=4);2<=c&&(b+=2,c>>>=2);return b+c};g.prototype._zeroBits=
function(c){if(0===c)return 26;var b=0;0===(c&8191)&&(b+=13,c>>>=13);0===(c&127)&&(b+=7,c>>>=7);0===(c&15)&&(b+=4,c>>>=4);0===(c&3)&&(b+=2,c>>>=2);0===(c&1)&&b++;return b};g.prototype.bitLength=function(){var c=0,c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c};g.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var c=0,b=0;b<this.length;b++){var e=this._zeroBits(this.words[b]),c=c+e;if(26!==e)break}return c};g.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};g.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var c=this.clone();c.sign=!this.sign;return c};g.prototype.ior=function(c){for(this.sign=this.sign||c.sign;this.length<c.length;)this.words[this.length++]=0;for(var b=0;b<c.length;b++)this.words[b]|=c.words[b];return this.strip()};g.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)};g.prototype.iand=function(c){this.sign=this.sign&&c.sign;var b;b=this.length>c.length?c:this;for(var e=
0;e<b.length;e++)this.words[e]&=c.words[e];this.length=b.length;return this.strip()};g.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)};g.prototype.ixor=function(c){this.sign=this.sign||c.sign;var b;this.length>c.length?b=this:(b=c,c=this);for(var e=0;e<c.length;e++)this.words[e]=b.words[e]^c.words[e];if(this!==b)for(;e<b.length;e++)this.words[e]=b.words[e];this.length=b.length;return this.strip()};g.prototype.xor=function(c){return this.length>c.length?
this.clone().ixor(c):c.clone().ixor(this)};g.prototype.setn=function(c,b){d("number"===typeof c&&0<=c);for(var e=c/26|0,f=c%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=b?this.words[e]|1<<f:this.words[e]&~(1<<f);return this.strip()};g.prototype.iadd=function(c){if(this.sign&&!c.sign){this.sign=!1;var b=this.isub(c);this.sign=!this.sign;return this._normSign()}if(!this.sign&&c.sign)return c.sign=!1,b=this.isub(c),c.sign=!0,b._normSign();var e;this.length>c.length?e=this:(e=c,c=this);
for(var d=b=0;d<c.length;d++)b=e.words[d]+c.words[d]+b,this.words[d]=b&67108863,b>>>=26;for(;0!==b&&d<e.length;d++)b=e.words[d]+b,this.words[d]=b&67108863,b>>>=26;this.length=e.length;if(0!==b)this.words[this.length]=b,this.length++;else if(e!==this)for(;d<e.length;d++)this.words[d]=e.words[d];return this};g.prototype.add=function(c){if(c.sign&&!this.sign){c.sign=!1;var b=this.sub(c);c.sign=!0;return b}return!c.sign&&this.sign?(this.sign=!1,b=c.sub(this),this.sign=!0,b):this.length>c.length?this.clone().iadd(c):
c.clone().iadd(this)};g.prototype.isub=function(c){if(c.sign){c.sign=!1;var b=this.iadd(c);c.sign=!0;return b._normSign()}if(this.sign)return this.sign=!1,this.iadd(c),this.sign=!0,this._normSign();b=this.cmp(c);if(0===b)return this.sign=!1,this.length=1,this.words[0]=0,this;var e;0<b?e=this:(e=c,c=this);for(var d=0,f=0;f<c.length;f++)b=e.words[f]-c.words[f]+d,d=b>>26,this.words[f]=b&67108863;for(;0!==d&&f<e.length;f++)b=e.words[f]+d,d=b>>26,this.words[f]=b&67108863;if(0===d&&f<e.length&&e!==this)for(;f<
e.length;f++)this.words[f]=e.words[f];this.length=Math.max(this.length,f);e!==this&&(this.sign=!0);return this.strip()};g.prototype.sub=function(c){return this.clone().isub(c)};g.prototype._smallMulTo=function(c,b){b.sign=c.sign!==this.sign;b.length=this.length+c.length;for(var e=0,d=0;d<b.length-1;d++){for(var f=e>>>26,e=e&67108863,a=Math.min(d,c.length-1),m=Math.max(0,d-this.length+1);m<=a;m++)var k=(this.words[d-m]|0)*(c.words[m]|0),q=k&67108863,f=f+(k/67108864|0)|0,q=q+e|0,e=q&67108863,f=f+(q>>>
26)|0;b.words[d]=e;e=f}0!==e?b.words[d]=e:b.length--;return b.strip()};g.prototype._bigMulTo=function(c,b){b.sign=c.sign!==this.sign;b.length=this.length+c.length;for(var e=0,d=0,f=0;f<b.length-1;f++){for(var a=d,d=0,e=e&67108863,m=Math.min(f,c.length-1),k=Math.max(0,f-this.length+1);k<=m;k++)var q=(this.words[f-k]|0)*(c.words[k]|0),g=q&67108863,a=a+(q/67108864|0)|0,g=g+e|0,e=g&67108863,a=a+(g>>>26)|0,d=d+(a>>>26),a=a&67108863;b.words[f]=e;e=a}0!==e?b.words[f]=e:b.length--;return b.strip()};g.prototype.mulTo=
function(c,b){return 63>this.length+c.length?this._smallMulTo(c,b):this._bigMulTo(c,b)};g.prototype.mul=function(c){var b=new g(null);b.words=Array(this.length+c.length);return this.mulTo(c,b)};g.prototype.imul=function(c){if(0===this.cmpn(0)||0===c.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,e=c.length;this.sign=c.sign!==this.sign;this.length+=c.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var f=0,a=0,m=Math.min(d,e-1),k=Math.max(0,d-b+1);k<=m;k++)var q=
d-k,q=this.words[q]*c.words[k],g=q&67108863,f=f+(q/67108864|0),g=g+a,a=g&67108863,f=f+(g>>>26);this.words[d]=a;this.words[d+1]+=f}f=0;for(q=1;q<this.length;q++)c=this.words[q]+f,this.words[q]=c&67108863,f=c>>>26;return this.strip()};g.prototype.imuln=function(c){d("number"===typeof c);for(var b=0,e=0;e<this.length;e++){var f=this.words[e]*c,a=(f&67108863)+(b&67108863),b=b>>26,b=b+(f/67108864|0),b=b+(a>>>26);this.words[e]=a&67108863}0!==b&&(this.words[e]=b,this.length++);return this};g.prototype.muln=
function(c){return this.clone().imuln(c)};g.prototype.sqr=function(){return this.mul(this)};g.prototype.isqr=function(){return this.mul(this)};g.prototype.ishln=function(c){d("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;var e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,a=0;a<this.length;a++){var m=this.words[a]&e;this.words[a]=this.words[a]-m<<b|f;f=m>>>26-b}f&&(this.words[a]=f,this.length++)}if(0!==c){for(a=this.length-1;0<=a;a--)this.words[a+c]=this.words[a];for(a=0;a<c;a++)this.words[a]=0;
this.length+=c}return this.strip()};g.prototype.ishrn=function(c,b,e){d("number"===typeof c&&0<=c);var f=c%26,a=Math.min((c-f)/26,this.length);c=67108863^67108863>>>f<<f;b=(b?(b-b%26)/26:0)-a;b=Math.max(0,b);if(e){for(var m=0;m<a;m++)e.words[m]=this.words[m];e.length=a}if(0!==a)if(this.length>a)for(this.length-=a,m=0;m<this.length;m++)this.words[m]=this.words[m+a];else this.words[0]=0,this.length=1;a=0;for(m=this.length-1;0<=m&&(0!==a||m>=b);m--){var k=this.words[m];this.words[m]=a<<26-f|k>>>f;a=
k&c}e&&0!==a&&(e.words[e.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};g.prototype.shln=function(c){return this.clone().ishln(c)};g.prototype.shrn=function(c){return this.clone().ishrn(c)};g.prototype.testn=function(c){d("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;return this.length<=c?!1:!!(this.words[c]&1<<b)};g.prototype.imaskn=function(c){d("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;d(!this.sign,"imaskn works only with positive numbers");0!==
b&&c++;this.length=Math.min(c,this.length);0!==b&&(this.words[this.length-1]&=67108863^67108863>>>b<<b);return this.strip()};g.prototype.maskn=function(c){return this.clone().imaskn(c)};g.prototype.iaddn=function(c){d("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};g.prototype._iaddn=function(c){this.words[0]+=c;for(c=
0;c<this.length&&67108864<=this.words[c];c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;this.length=Math.max(this.length,c+1);return this};g.prototype.isubn=function(c){d("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};g.prototype.addn=function(c){return this.clone().iaddn(c)};
g.prototype.subn=function(c){return this.clone().isubn(c)};g.prototype.iabs=function(){this.sign=!1;return this};g.prototype.abs=function(){return this.clone().iabs()};g.prototype._ishlnsubmul=function(c,b,e){var f=c.length+e,a;if(this.words.length<f){var m=Array(f);for(a=0;a<this.length;a++)m[a]=this.words[a];this.words=m}else a=this.length;for(this.length=Math.max(this.length,f);a<this.length;a++)this.words[a]=0;for(a=m=0;a<c.length;a++)f=this.words[a+e]+m,m=c.words[a]*b,f-=m&67108863,m=(f>>26)-
(m/67108864|0),this.words[a+e]=f&67108863;for(;a<this.length-e;a++)f=this.words[a+e]+m,m=f>>26,this.words[a+e]=f&67108863;if(0===m)return this.strip();d(-1===m);for(a=m=0;a<this.length;a++)f=-this.words[a]+m,m=f>>26,this.words[a]=f&67108863;this.sign=!0;return this.strip()};g.prototype._wordDiv=function(c,b){var e=this.length-c.length,d=this.clone(),f=c,a=f.words[f.length-1],e=26-this._countBits(a);0!==e&&(f=f.shln(e),d.ishln(e),a=f.words[f.length-1]);var m=d.length-f.length,k;if("mod"!==b){k=new g(null);
k.length=m+1;k.words=Array(k.length);for(var q=0;q<k.length;q++)k.words[q]=0}q=d.clone()._ishlnsubmul(f,1,m);q.sign||(d=q,k&&(k.words[m]=1));for(--m;0<=m;m--){q=67108864*d.words[f.length+m]+d.words[f.length+m-1];q=Math.min(q/a|0,67108863);for(d._ishlnsubmul(f,q,m);d.sign;)q--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);k&&(k.words[m]=q)}k&&k.strip();d.strip();"div"!==b&&0!==e&&d.ishrn(e);return{div:k?k:null,mod:d}};g.prototype.divmod=function(c,b){d(0!==c.cmpn(0));if(this.sign&&
!c.sign){var e=this.neg().divmod(c,b),f,a;"mod"!==b&&(f=e.div.neg());"div"!==b&&(a=0===e.mod.cmpn(0)?e.mod:c.sub(e.mod));return{div:f,mod:a}}return!this.sign&&c.sign?(e=this.divmod(c.neg(),b),"mod"!==b&&(f=e.div.neg()),{div:f,mod:e.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),b):c.length>this.length||0>this.cmp(c)?{div:new g(0),mod:this}:1===c.length?"div"===b?{div:this.divn(c.words[0]),mod:null}:"mod"===b?{div:null,mod:new g(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new g(this.modn(c.words[0]))}:
this._wordDiv(c,b)};g.prototype.div=function(c){return this.divmod(c,"div").div};g.prototype.mod=function(c){return this.divmod(c,"mod").mod};g.prototype.divRound=function(c){var b=this.divmod(c);if(0===b.mod.cmpn(0))return b.div;var e=b.div.sign?b.mod.isub(c):b.mod,d=c.shrn(1);c=c.andln(1);e=e.cmp(d);return 0>e||1===c&&0===e?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)};g.prototype.modn=function(c){d(67108863>=c);for(var b=67108864%c,e=0,f=this.length-1;0<=f;f--)e=(b*e+this.words[f])%c;return e};
g.prototype.idivn=function(c){d(67108863>=c);for(var b=0,e=this.length-1;0<=e;e--)b=this.words[e]+67108864*b,this.words[e]=b/c|0,b%=c;return this.strip()};g.prototype.divn=function(c){return this.clone().idivn(c)};g.prototype.egcd=function(c){d(!c.sign);d(0!==c.cmpn(0));var b=this,e=c.clone(),b=b.sign?b.mod(c):b.clone();c=new g(1);for(var f=new g(0),a=new g(0),m=new g(1),k=0;b.isEven()&&e.isEven();)b.ishrn(1),e.ishrn(1),++k;for(var q=e.clone(),l=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.ishrn(1),
c.isEven()&&f.isEven()?(c.ishrn(1),f.ishrn(1)):(c.iadd(q).ishrn(1),f.isub(l).ishrn(1));for(;e.isEven();)e.ishrn(1),a.isEven()&&m.isEven()?(a.ishrn(1),m.ishrn(1)):(a.iadd(q).ishrn(1),m.isub(l).ishrn(1));0<=b.cmp(e)?(b.isub(e),c.isub(a),f.isub(m)):(e.isub(b),a.isub(c),m.isub(f))}return{a:a,b:m,gcd:e.ishln(k)}};g.prototype._invmp=function(c){d(!c.sign);d(0!==c.cmpn(0));var b=this,e=c.clone(),b=b.sign?b.mod(c):b.clone();c=new g(1);for(var f=new g(0),a=e.clone();0<b.cmpn(1)&&0<e.cmpn(1);){for(;b.isEven();)b.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(a).ishrn(1);for(;e.isEven();)e.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(a).ishrn(1);0<=b.cmp(e)?(b.isub(e),c.isub(f)):(e.isub(b),f.isub(c))}return 0===b.cmpn(1)?c:f};g.prototype.gcd=function(c){if(0===this.cmpn(0))return c.clone();if(0===c.cmpn(0))return this.clone();var b=this.clone();c=c.clone();b.sign=!1;c.sign=!1;for(var e=0;b.isEven()&&c.isEven();e++)b.ishrn(1),c.ishrn(1);do{for(;b.isEven();)b.ishrn(1);for(;c.isEven();)c.ishrn(1);var d=b.cmp(c);if(0>d)d=b,b=c,c=d;else if(0===
d||0===c.cmpn(1))break;b.isub(c)}while(1);return c.ishln(e)};g.prototype.invm=function(c){return this.egcd(c).a.mod(c)};g.prototype.isEven=function(){return 0===(this.words[0]&1)};g.prototype.isOdd=function(){return 1===(this.words[0]&1)};g.prototype.andln=function(c){return this.words[0]&c};g.prototype.bincn=function(c){d("number"===typeof c);var b=c%26;c=(c-b)/26;var e=1<<b;if(this.length<=c){for(b=this.length;b<c+1;b++)this.words[b]=0;this.words[c]|=e;this.length=c+1;return this}for(b=c;0!==e&&
b<this.length;b++)c=this.words[b],c+=e,e=c>>>26,c&=67108863,this.words[b]=c;0!==e&&(this.words[b]=e,this.length++);return this};g.prototype.cmpn=function(c){var b=0>c;b&&(c=-c);if(this.sign&&!b)return-1;if(!this.sign&&b)return 1;c&=67108863;this.strip();1<this.length?c=1:(b=this.words[0],c=b===c?0:b<c?-1:1);this.sign&&(c=-c);return c};g.prototype.cmp=function(c){if(this.sign&&!c.sign)return-1;if(!this.sign&&c.sign)return 1;c=this.ucmp(c);return this.sign?-c:c};g.prototype.ucmp=function(c){if(this.length>
c.length)return 1;if(this.length<c.length)return-1;for(var b=0,e=this.length-1;0<=e;e--){var d=this.words[e],f=c.words[e];if(d!==f){d<f?b=-1:d>f&&(b=1);break}}return b};g.red=function(c){return new b(c)};g.prototype.toRed=function(c){d(!this.red,"Already a number in reduction context");d(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};g.prototype.fromRed=function(){d(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
g.prototype._forceRed=function(c){this.red=c;return this};g.prototype.forceRed=function(c){d(!this.red,"Already a number in reduction context");return this._forceRed(c)};g.prototype.redAdd=function(c){d(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};g.prototype.redIAdd=function(c){d(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};g.prototype.redSub=function(c){d(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};g.prototype.redISub=
function(c){d(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};g.prototype.redShl=function(c){d(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};g.prototype.redMul=function(c){d(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};g.prototype.redIMul=function(c){d(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};g.prototype.redSqr=function(){d(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};g.prototype.redISqr=function(){d(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};g.prototype.redSqrt=function(){d(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};g.prototype.redInvm=function(){d(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};g.prototype.redNeg=
function(){d(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};g.prototype.redPow=function(c){d(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var h={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var c=new g(null);c.words=Array(Math.ceil(this.n/13));return c};v.prototype.ireduce=function(c){var b;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);
b=b<this.n?-1:c.ucmp(this.p);0===b?(c.words[0]=0,c.length=1):0<b?c.isub(this.p):c.strip();return c};v.prototype.split=function(c,b){c.ishrn(this.n,0,b)};v.prototype.imulK=function(c){return c.imul(this.k)};f(w,v);w.prototype.split=function(c,b){for(var e=Math.min(c.length,9),d=0;d<e;d++)b.words[d]=c.words[d];b.length=e;if(9>=c.length)c.words[0]=0,c.length=1;else{e=c.words[9];b.words[b.length++]=e&4194303;for(d=10;d<c.length;d++){var f=c.words[d];c.words[d-10]=(f&4194303)<<4|e>>>22;e=f}c.words[d-10]=
e>>>22;c.length-=9}};w.prototype.imulK=function(c){c.words[c.length]=0;c.words[c.length+1]=0;c.length+=2;for(var b,e=0,d=0;d<c.length;d++){var f=c.words[d];b=64*f;e+=977*f;b+=e/67108864|0;e&=67108863;c.words[d]=e;e=b}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};f(u,v);f(r,v);f(k,v);k.prototype.imulK=function(c){for(var b=0,e=0;e<c.length;e++){var b=19*c.words[e]+b,d=b&67108863,b=b>>>26;c.words[e]=d}0!==b&&(c.words[c.length++]=b);return c};g._prime=function(c){if(h[c])return h[c];
var b;if("k256"===c)b=new w;else if("p224"===c)b=new u;else if("p192"===c)b=new r;else if("p25519"===c)b=new k;else throw Error("Unknown prime "+c);return h[c]=b};b.prototype._verify1=function(c){d(!c.sign,"red works only with positives");d(c.red,"red works only with red numbers")};b.prototype._verify2=function(c,b){d(!c.sign&&!b.sign,"red works only with positives");d(c.red&&c.red===b.red,"red works only with red numbers")};b.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):
c.mod(this.m)._forceRed(this)};b.prototype.neg=function(c){c=c.clone();c.sign=!c.sign;return c.iadd(this.m)._forceRed(this)};b.prototype.add=function(c,b){this._verify2(c,b);var e=c.add(b);0<=e.cmp(this.m)&&e.isub(this.m);return e._forceRed(this)};b.prototype.iadd=function(c,b){this._verify2(c,b);var e=c.iadd(b);0<=e.cmp(this.m)&&e.isub(this.m);return e};b.prototype.sub=function(c,b){this._verify2(c,b);var e=c.sub(b);0>e.cmpn(0)&&e.iadd(this.m);return e._forceRed(this)};b.prototype.isub=function(c,
b){this._verify2(c,b);var e=c.isub(b);0>e.cmpn(0)&&e.iadd(this.m);return e};b.prototype.shl=function(c,b){this._verify1(c);return this.imod(c.shln(b))};b.prototype.imul=function(c,b){this._verify2(c,b);return this.imod(c.imul(b))};b.prototype.mul=function(c,b){this._verify2(c,b);return this.imod(c.mul(b))};b.prototype.isqr=function(c){return this.imul(c,c)};b.prototype.sqr=function(c){return this.mul(c,c)};b.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var b=this.m.andln(3);d(1===
b%2);if(3===b){var b=this.m.add(new g(1)).ishrn(2),e=this.pow(c,b);return e}for(var f=this.m.subn(1),a=0;0!==f.cmpn(0)&&0===f.andln(1);)a++,f.ishrn(1);d(0!==f.cmpn(0));for(var b=(new g(1)).toRed(this),e=b.redNeg(),m=this.m.subn(1).ishrn(1),k=this.m.bitLength(),k=(new g(2*k*k)).toRed(this);0!==this.pow(k,m).cmp(e);)k.redIAdd(e);m=this.pow(k,f);e=this.pow(c,f.addn(1).ishrn(1));c=this.pow(c,f);for(f=a;0!==c.cmp(b);){k=c;for(a=0;0!==k.cmp(b);a++)k=k.redSqr();d(a<f);m=this.pow(m,(new g(1)).ishln(f-a-1));
e=e.redMul(m);m=m.redSqr();c=c.redMul(m);f=a}return e};b.prototype.invm=function(c){c=c._invmp(this.m);return c.sign?(c.sign=!1,this.imod(c).redNeg()):this.imod(c)};b.prototype.pow=function(c,b){var e=[];if(0===b.cmpn(0))return new g(1);for(var d=b.clone();0!==d.cmpn(0);)e.push(d.andln(1)),d.ishrn(1);for(var f=c,a=0;a<e.length&&0===e[a];a++,f=this.sqr(f));if(++a<e.length)for(d=this.sqr(f);a<e.length;a++,d=this.sqr(d))0!==e[a]&&(f=this.mul(f,d));return f};b.prototype.convertTo=function(c){var b=c.mod(this.m);
return b===c?b.clone():b};b.prototype.convertFrom=function(c){c=c.clone();c.red=null;return c};g.mont=function(c){return new e(c)};f(e,b);e.prototype.convertTo=function(c){return this.imod(c.shln(this.shift))};e.prototype.convertFrom=function(c){c=this.imod(c.mul(this.rinv));c.red=null;return c};e.prototype.imul=function(c,b){if(0===c.cmpn(0)||0===b.cmpn(0))return c.words[0]=0,c.length=1,c;var e=c.imul(b),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);
0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};e.prototype.mul=function(c,b){if(0===c.cmpn(0)||0===b.cmpn(0))return(new g(0))._forceRed(this);var e=c.mul(b),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};e.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof h||h,this)},{}],48:[function(a,h,p){var t=a("./lib/bn-sign");h.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":39}],49:[function(a,h,p){var t=a("./lib/rationalize");h.exports=function(a,d){return t(a[0].mul(d[1]).sub(a[1].mul(d[0])),a[1].mul(d[1]))}},{"./lib/rationalize":44}],50:[function(a,h,p){var t=a("./lib/bn-to-num"),n=a("./lib/ctz");h.exports=function(d){var f=d[0];d=d[1];if(0===f.cmpn(0))return 0;var a=f.divmod(d),f=t(a.div),a=a.mod;if(0===a.cmpn(0))return f;if(f){var l=
n(f)+4;d=t(a.shln(l).divRound(d));0>f&&(d=-d);return f+d*Math.pow(2,-l)}f=d.bitLength()-a.bitLength()+53;d=t(a.shln(f).divRound(d));if(1023>f)return d*Math.pow(2,-f);d*=Math.pow(2,-1023);return d*Math.pow(2,1023-f)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,h,p){function t(d,f,a,l,n){d=["function ",d,"(a,l,h,",l.join(","),"){",n?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];n?0>f.indexOf("c")?d.push(";if(x===y){return m}else if(x<=y){"):d.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
d.push(";if(",f,"){i=m;");a?d.push("l=m+1}else{h=m-1}"):d.push("h=m-1}else{l=m+1}");d.push("}");n?d.push("return -1};"):d.push("return i};");return d.join("")}function n(d,f,a,l){return(new Function([t("A","x"+d+"y",f,["y"],l),t("P","c(x,y)"+d+"0",f,["y","c"],l),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
h.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],52:[function(a,h,p){function t(d){var f=32;(d&=-d)&&f--;d&65535&&(f-=16);d&16711935&&(f-=8);d&252645135&&(f-=4);d&858993459&&(f-=2);d&1431655765&&--f;return f}"use restrict";p.INT_BITS=32;p.INT_MAX=2147483647;p.INT_MIN=-2147483648;p.sign=function(d){return(0<d)-(0>d)};p.abs=function(d){var f=d>>31;return(d^f)-f};p.min=function(d,f){return f^(d^f)&-(d<f)};p.max=function(d,f){return d^(d^
f)&-(d<f)};p.isPow2=function(d){return!(d&d-1)&&!!d};p.log2=function(d){var f,a;f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1};p.log10=function(d){return 1E9<=d?9:1E8<=d?8:1E7<=d?7:1E6<=d?6:1E5<=d?5:1E4<=d?4:1E3<=d?3:100<=d?2:10<=d?1:0};p.popCount=function(d){d-=d>>>1&1431655765;d=(d&858993459)+(d>>>2&858993459);return 16843009*(d+(d>>>4)&252645135)>>>24};p.countTrailingZeros=t;p.nextPow2=function(d){d+=0===d;--d;d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=
d>>>8;return(d|d>>>16)+1};p.prevPow2=function(d){d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;d|=d>>>16;return d-(d>>>1)};p.parity=function(d){d^=d>>>16;d^=d>>>8;d=(d^d>>>4)&15;return 27030>>>d&1};var n=Array(256);(function(d){for(var f=0;256>f;++f){for(var a=f,l=f,n=7,a=a>>>1;a;a>>>=1)l<<=1,l|=a&1,--n;d[f]=l<<n&255}})(n);p.reverse=function(d){return n[d&255]<<24|n[d>>>8&255]<<16|n[d>>>16&255]<<8|n[d>>>24&255]};p.interleave2=function(d,f){d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;
f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(d|d<<1)&1431655765|((f|f<<1)&1431655765)<<1};p.deinterleave2=function(d,f){d=d>>>f&1431655765;d=(d|d>>>1)&858993459;d=(d|d>>>2)&252645135;d=(d|d>>>4)&16711935;return((d|d>>>16)&65535)<<16>>16};p.interleave3=function(d,f,a){d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;d=(d|d<<2)&1227133513|((f|f<<2)&1227133513)<<1;a&=1023;
a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return d|((a|a<<2)&1227133513)<<2};p.deinterleave3=function(d,f){d=d>>>f&1227133513;d=(d|d>>>2)&3272356035;d=(d|d>>>4)&251719695;d=(d|d>>>8)&4278190335;return((d|d>>>16)&1023)<<22>>22};p.nextCombination=function(d){var f=d|d-1;return f+1|(~f&-~f)-1>>>t(d)+1}},{}],53:[function(a,h,p){function t(d,f,a,g){for(var k=0,b=0,e=0,m=d.length;e<m;++e){var q=d[e],l;a:{for(l=0;l<f;++l)if(!(q[l]<=q[l+f])){l=!0;break a}l=!1}if(!l){for(l=0;l<2*f;++l)a[k++]=
q[l];g[b++]=e}}return b}function n(d,a,n,r){var k=d.length,b=a.length;if(!(0>=k||0>=b)){var e=d[0].length>>>1;if(!(0>=e)){var m,q=f.mallocDouble(2*e*k),z=f.mallocInt32(k),k=t(d,e,q,z);if(0<k){if(1===e&&r)g.init(k),m=g.sweepComplete(e,n,0,k,q,z,0,k,q,z);else{d=f.mallocDouble(2*e*b);var y=f.mallocInt32(b),b=t(a,e,d,y);0<b&&(g.init(k+b),m=1===e?g.sweepBipartite(e,n,0,k,q,z,0,b,d,y):l(e,n,r,k,q,z,b,d,y),f.free(d),f.free(y))}f.free(q);f.free(z)}return m}}}function d(d,f){y.push([d,f])}h.exports=function(f,
a,g){switch(arguments.length){case 1:return y=[],n(f,f,d,!0),y;case 2:if("function"===typeof a)return n(f,f,a,!0);y=[];n(f,a,d,!1);return y;case 3:return n(f,a,g,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),g=a("./lib/sweep"),l=a("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,h,p){function t(d){function f(f,a){var g,k="bruteForce"+(f?"Red":"Blue")+(a?"Flip":"")+(d?"Full":"");g=["function ",k,"(",n.join(),
"){","var ","es","=2*","d",";"];var b="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(d?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?g.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",b):g.push(b,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");d?g.push("if(y1<x0||x1<y0)continue;"):a?g.push("if(y0<=x0||x1<y0)continue;"):g.push("if(y0<x0||x1<y0)continue;");g.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
a?g.push("yi,xi"):g.push("xi,yi");g.push(");if(rv!==void 0)return rv;}}}");g=g.join("");l.push(g);v.push("return "+k+"("+n.join()+");")}var a="bruteForce"+(d?"Full":"Partial"),l=[],y=n.slice();d||y.splice(3,0,"fp");var v=["function "+a+"("+y.join()+"){"];v.push("if(re-rs>be-bs){");d?(f(!0,!1),v.push("}else{"),f(!1,!1)):(v.push("if(fp){"),f(!0,!0),v.push("}else{"),f(!0,!1),v.push("}}else{if(fp){"),f(!1,!0),v.push("}else{"),f(!1,!1),v.push("}"));v.push("}}return "+a);a=l.join("")+v.join("");return(new Function(a))()}
var n="d ax vv rs re rb ri bs be bb bi".split(" ");p.partial=t(!1);p.full=t(!0)},{}],55:[function(a,h,p){function t(b,e,d,f,a,m,k,q,g){var l=z*b;c[l]=e;c[l+1]=d;c[l+2]=f;c[l+3]=a;c[l+4]=m;c[l+5]=k;b*=E;x[b]=q;x[b+1]=g}h.exports=function(a,h,p,B,P,I,D,N,K){var J=8*d.log2(B+D+1)*(a+1)|0,O=d.nextPow2(z*J);c.length<O&&(n.free(c),c=n.mallocInt32(O));J=d.nextPow2(E*J);x<J&&(n.free(x),x=n.mallocDouble(J));var J=0,O=2*a,H;t(J++,0,0,B,0,D,p?16:0,-Infinity,Infinity);for(p||t(J++,0,0,D,0,B,1,-Infinity,Infinity);0<
J;){--J;p=J*z;var G=c[p];D=c[p+1];var M=c[p+2],Q=c[p+3],V=c[p+4];p=c[p+5];B=J*E;var Z=x[B],R=x[B+1],L=p&1,W=!!(p&16),T=P,X=I,U=N;B=K;L&&(T=N,X=K,U=P,B=I);if(p&2&&(M=b(a,G,D,M,T,X,R),D>=M))continue;if(p&4&&(D=e(a,G,D,M,T,X,Z),D>=M))continue;p=M-D;var S=V-Q;if(W){if(a*p*(p+S)<u){H=l.scanComplete(a,G,h,D,M,T,X,Q,V,U,B);if(void 0!==H)return H;continue}}else if(a*Math.min(p,S)<v){H=f(a,G,h,L,D,M,T,X,Q,V,U,B);if(void 0!==H)return H;continue}else if(a*p*S<w){H=l.scanBipartite(a,G,h,L,D,M,T,X,Q,V,U,B);if(void 0!==
H)return H;continue}p=r(a,G,D,M,T,X,Z,R);if(D<p)if(a*(p-D)<v){if(H=g(a,G+1,h,D,p,T,X,Q,V,U,B),void 0!==H)return H}else if(G===a-2){if(H=L?l.sweepBipartite(a,h,Q,V,U,B,D,p,T,X):l.sweepBipartite(a,h,D,p,T,X,Q,V,U,B),void 0!==H)return H}else t(J++,G+1,D,p,Q,V,L,-Infinity,Infinity),t(J++,G+1,Q,V,D,p,L^1,-Infinity,Infinity);if(p<M)if(D=y(a,G,Q,V,U,B),H=U[O*D+G],S=k(a,G,D,V,U,B,H),S<V&&t(J++,G,p,M,S,V,(L|4)+(W?16:0),H,R),Q<D&&t(J++,G,p,M,Q,D,(L|2)+(W?16:0),Z,H),D+1===S){if(W)a:{Q=a;V=h;B=B[D];L=2*Q;D*=
L;Z=U[D+G];R=p;p*=L;b:for(;R<M;++R,p+=L)if(W=X[R],W!==B&&(S=T[p+G],H=T[p+G+Q],!(Z<S||H<Z))){for(var ba=G+1;ba<Q;++ba){S=T[p+ba];H=T[p+ba+Q];var aa=U[D+ba+Q];if(H<U[D+ba]||aa<S)continue b}W=V(W,B);if(void 0!==W){H=W;break a}}H=void 0}else a:{Q=a;V=h;B=B[D];Z=2*Q;D*=Z;R=U[D+G];W=p;p*=Z;b:for(;W<M;++W,p+=Z)if(S=T[p+G],H=T[p+G+Q],!(R<S||H<R||L&&R===S)){ba=X[W];for(aa=G+1;aa<Q;++aa){S=T[p+aa];H=T[p+aa+Q];var ia=U[D+aa+Q];if(H<U[D+aa]||ia<S)continue b}S=L?V(B,ba):V(ba,B);if(void 0!==S){H=S;break a}}H=void 0}if(void 0!==
H)return H}else if(D<S)if(W){if(M=m(a,G,p,M,T,X,H),p<M)if(Q=k(a,G,p,M,T,X,H),G===a-2){if(p<Q&&(H=l.sweepComplete(a,h,p,Q,T,X,D,S,U,B),void 0!==H)||Q<M&&(H=l.sweepBipartite(a,h,Q,M,T,X,D,S,U,B),void 0!==H))return H}else p<Q&&t(J++,G+1,p,Q,D,S,16,-Infinity,Infinity),Q<M&&(t(J++,G+1,Q,M,D,S,0,-Infinity,Infinity),t(J++,G+1,D,S,Q,M,1,-Infinity,Infinity))}else M=L?q(a,G,p,M,T,X,H):m(a,G,p,M,T,X,H),p<M&&(G===a-2?L?l.sweepBipartite(a,h,D,S,U,B,p,M,T,X):l.sweepBipartite(a,h,p,M,T,X,D,S,U,B):(t(J++,G+1,p,M,
D,S,L,-Infinity,Infinity),t(J++,G+1,D,S,p,M,L^1,-Infinity,Infinity)))}};var n=a("typedarray-pool"),d=a("bit-twiddle");h=a("./brute");var f=h.partial,g=h.full,l=a("./sweep"),y=a("./median");a=a("./partition");var v=128,w=4194304,u=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),k=a("lo===p0",["p0"]),b=a("lo<p0",["p0"]),e=a("hi<=p0",["p0"]),m=a("lo<=p0&&p0<=hi",["p0"]),q=a("lo<p0&&p0<=hi",["p0"]),z=6,E=2,c=n.mallocInt32(1024),x=n.mallocDouble(1024)},{"./brute":54,"./median":56,"./partition":57,"./sweep":59,
"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,h,p){h.exports=function(d,f,a,l,y,v){if(l<=a+1)return a;var w=a,u=l;l=l+a>>>1;for(var r=2*d,k=l,b=y[r*l+f];w<u;){if(u-w<n){for(var k=f,b=y,e=v,m=2*d,q=m*(w+1)+k,z=w+1;z<u;++z,q+=m)for(var h=b[q],c=z,x=m*(z-1);c>w&&b[x+k]>h;--c,x-=m){for(var p=x,F=x+m,A=0;A<m;++A,++p,++F){var B=b[p];b[p]=b[F];b[F]=B}p=e[c];e[c]=e[c-1];e[c-1]=p}break}q=u-w;k=Math.random()*q+w|0;b=y[r*k+f];m=Math.random()*q+w|0;e=y[r*m+f];z=Math.random()*q+w|0;q=y[r*z+f];b<=e?q>=
e?(k=m,b=e):b>=q||(k=z,b=q):e>=q?(k=m,b=e):q>=b||(k=z,b=q);e=r*(u-1);m=r*k;for(q=0;q<r;++q,++e,++m)z=y[e],y[e]=y[m],y[m]=z;e=v[u-1];v[u-1]=v[k];v[k]=e;k=t(d,f,w,u-1,y,v,b);e=r*(u-1);m=r*k;for(q=0;q<r;++q,++e,++m)z=y[e],y[e]=y[m],y[m]=z;e=v[u-1];v[u-1]=v[k];v[k]=e;if(l<k){for(u=k-1;w<u&&y[r*(u-1)+f]===b;)--u;u+=1}else if(k<l)for(w=k+1;w<u&&y[r*w+f]===b;)w+=1;else break}return t(d,f,a,l,y,v,y[r*l+f])};var t=a("./partition")("lo<p0",["p0"]),n=8},{"./partition":57}],57:[function(a,h,p){h.exports=function(a,
d){var f="abcdef".split("").concat(d),g=[];0<=a.indexOf("lo")&&g.push("lo=e[k+n]");0<=a.indexOf("hi")&&g.push("hi=e[k+o]");f.push(t.replace("_",g.join()).replace("$",a));return Function.apply(void 0,f)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,h,p){function t(d,f,a){for(var k=2*(d+1),b=d+1;b<=f;++b){for(var e=a[k++],m=a[k++],q=
b,g=k-2;q-- >d;){var l=a[g-2],c=a[g-1];if(l<e)break;else if(l===e&&c<m)break;a[g]=l;a[g+1]=c;g-=2}a[g]=e;a[g+1]=m}}function n(d,f,a){d*=2;f*=2;var k=a[d],b=a[d+1];a[d]=a[f];a[d+1]=a[f+1];a[f]=k;a[f+1]=b}function d(d,f,a){d*=2;f*=2;a[d]=a[f];a[d+1]=a[f+1]}function f(d,f,a,k,b){d*=2;f*=2;b[d]=b[f];b[f]=a;b[d+1]=b[f+1];b[f+1]=k}function g(d,f,a){d*=2;f*=2;var k=a[d],b=a[f];return k<b?!1:k===b?a[d+1]>a[f+1]:!0}function l(d,f,a,k){d*=2;var b=k[d];return b<f?!0:b===f?k[d+1]<a:!1}function y(a,u,r){var k=
(u-a+1)/6|0,b=a+k,e=u-k,m=a+u>>1,q=m-k,z=m+k,h=b,c=q,x=m,p=z,F=e,k=a+1,A=u-1,B=0;g(h,c,r)&&(B=h,h=c,c=B);g(p,F,r)&&(B=p,p=F,F=B);g(h,x,r)&&(B=h,h=x,x=B);g(c,x,r)&&(B=c,c=x,x=B);g(h,p,r)&&(B=h,h=p,p=B);g(x,p,r)&&(B=x,x=p,p=B);g(c,F,r)&&(B=c,c=F,F=B);g(c,x,r)&&(B=c,c=x,x=B);g(p,F,r)&&(B=p,p=F,F=B);for(var B=r[2*c],c=r[2*c+1],P=r[2*p],p=r[2*p+1],h=2*h,x=2*x,F=2*F,b=2*b,m=2*m,e=2*e,I=0;2>I;++I){var D=r[x+I],N=r[F+I];r[b+I]=r[h+I];r[m+I]=D;r[e+I]=N}d(q,a,r);d(z,u,r);for(q=k;q<=A;++q)if(l(q,B,c,r))q!==
k&&n(q,k,r),++k;else if(!l(q,P,p,r))for(;;)if(l(A,P,p,r)){l(A,B,c,r)?(z=q,e=k,m=A,h=r,z*=2,e*=2,m*=2,b=h[z],x=h[z+1],h[z]=h[e],h[z+1]=h[e+1],h[e]=h[m],h[e+1]=h[m+1],h[m]=b,h[m+1]=x,++k):n(q,A,r);--A;break}else if(--A<q)break;f(a,k-1,B,c,r);f(u,A+1,P,p,r);k-2-a<=v?t(a,k-2,r):y(a,k-2,r);u-(A+2)<=v?t(A+2,u,r):y(A+2,u,r);A-k<=v?t(k,A,r):y(k,A,r)}h.exports=function(d,f){f<=4*v?t(0,f-1,d):y(0,f-1,d)};var v=32},{}],59:[function(a,h,p){function t(b,e,d,f){f=e[f];d=b[d-1];b[f]=d;e[d]=f}h.exports={init:function(b){b=
d.nextPow2(b);l.length<b&&(n.free(l),l=n.mallocInt32(b));y.length<b&&(n.free(y),y=n.mallocInt32(b));v.length<b&&(n.free(v),v=n.mallocInt32(b));w.length<b&&(n.free(w),w=n.mallocInt32(b));u.length<b&&(n.free(u),u=n.mallocInt32(b));r.length<b&&(n.free(r),r=n.mallocInt32(b));b*=8;k.length<b&&(n.free(k),k=n.mallocDouble(b))},sweepBipartite:function(b,e,d,a,r,n,c,u,h,p){var A=0,B=2*b;--b;for(var P=B-1;d<a;++d){var I=n[d],D=B*d;k[A++]=r[D+b];k[A++]=-(I+1);k[A++]=r[D+P];k[A++]=I}for(d=c;d<u;++d)I=p[d]+g,
a=B*d,k[A++]=h[a+b],k[A++]=-I,k[A++]=h[a+P],k[A++]=I;u=A>>>1;f(k,u);for(d=p=h=0;d<u;++d)if(A=k[2*d+1]|0,A>=g)A=A-g|0,t(v,w,p--,A);else if(0<=A)t(l,y,h--,A);else{if(A<=-g){A=-A-g|0;for(B=0;B<h;++B)if(a=e(l[B],A),void 0!==a)return a;B=w;a=p++;v[a]=A}else{A=-A-1|0;for(B=0;B<p;++B)if(a=e(A,v[B]),void 0!==a)return a;B=y;a=h++;l[a]=A}B[A]=a}},sweepComplete:function(b,e,d,a,g,n,c,h,p,F){var A=0,B=2*b;--b;for(var P=B-1;d<a;++d){var I=n[d]+1<<1,D=B*d;k[A++]=g[D+b];k[A++]=-I;k[A++]=g[D+P];k[A++]=I}for(d=c;d<
h;++d)I=F[d]+1<<1,a=B*d,k[A++]=p[a+b],k[A++]=-I|1,k[A++]=p[a+P],k[A++]=I|1;h=A>>>1;f(k,h);for(d=A=F=p=0;d<h;++d)if(B=k[2*d+1]|0,a=B&1,d<h-1&&B>>1===k[2*d+3]>>1&&(a=2,d+=1),0>B){B=-(B>>1)-1;for(g=0;g<A;++g)if(n=e(u[g],B),void 0!==n)return n;if(0!==a)for(g=0;g<p;++g)if(n=e(l[g],B),void 0!==n)return n;if(1!==a)for(g=0;g<F;++g)if(n=e(v[g],B),void 0!==n)return n;0===a?(a=y,g=p++,l[g]=B,a[B]=g):1===a?(a=w,g=F++,v[g]=B,a[B]=g):2===a&&(a=r,g=A++,u[g]=B,a[B]=g)}else B=(B>>1)-1,0===a?t(l,y,p--,B):1===a?t(v,
w,F--,B):2===a&&t(u,r,A--,B)},scanBipartite:function(b,e,d,a,n,r,c,u,v,h,w,p){var P=0,I=2*b,D=e+b,N=1,K=1;for(a?K=g:N=g;n<r;++n){var J=n+N,O=I*n;k[P++]=c[O+e];k[P++]=-J;k[P++]=c[O+D];k[P++]=J}for(n=v;n<h;++n)J=n+K,r=I*n,k[P++]=w[r+e],k[P++]=-J;h=P>>>1;f(k,h);for(n=P=0;n<h;++n)if(J=k[2*n+1]|0,0>J)if(J=-J,K=!1,J>=g?(K=!a,J-=g):(K=!!a,--J),K)K=y,r=P++,l[r]=J,K[J]=r;else a:for(K=p[J],J*=I,r=w[J+e+1],v=w[J+e+1+b],D=0;D<P;++D){var O=l[D],H=I*O;if(!(v<c[H+e+1]||c[H+e+1+b]<r)){for(var G=e+2;G<b;++G)if(w[J+
G+b]<c[H+G]||c[H+G+b]<w[J+G])continue a;O=u[O];O=a?d(K,O):d(O,K);if(void 0!==O)return O}}else t(l,y,P--,J-N)},scanComplete:function(b,e,d,a,n,r,c,u,v,y,h){for(var w=0,t=2*b,p=e+b;a<n;++a){var D=a+g,N=t*a;k[w++]=r[N+e];k[w++]=-D;k[w++]=r[N+p];k[w++]=D}for(a=u;a<v;++a)D=a+1,n=t*a,k[w++]=y[n+e],k[w++]=-D;v=w>>>1;f(k,v);for(a=w=0;a<v;++a)if(n=k[2*a+1]|0,0>n)if(D=-n,D>=g)l[w++]=D-g;else a:for(--D,n=h[D],D*=t,p=y[D+e+1],N=y[D+e+1+b],u=0;u<w;++u){var K=l[u],J=c[K];if(J===n)break;K*=t;if(!(N<r[K+e+1]||r[K+
e+1+b]<p)){for(var O=e+2;O<b;++O)if(y[D+O+b]<r[K+O]||r[K+O+b]<y[D+O])continue a;J=d(J,n);if(void 0!==J)return J}}else{D=n-g;for(u=w-1;0<=u;--u)if(l[u]===D){for(O=u+1;O<w;++O)l[O-1]=l[O];break}--w}}};var n=a("typedarray-pool"),d=a("bit-twiddle"),f=a("./sort"),g=268435456,l=n.mallocInt32(1024),y=n.mallocInt32(1024),v=n.mallocInt32(1024),w=n.mallocInt32(1024),u=n.mallocInt32(1024),r=n.mallocInt32(1024),k=n.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],60:[function(a,h,p){(function(h){function n(){try{var c=
new Uint8Array(1);c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===c.foo()&&"function"===typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(b){return!1}}function d(c,b){if((f.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");f.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(b),c.__proto__=f.prototype):(null===c&&(c=new f(b)),c.length=b);return c}function f(c,b,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(c,
b,e);if("number"===typeof c){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return y(this,c)}return g(this,c,b,e)}function g(c,b,e,a){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>e||b.byteLength<e)throw new RangeError("'offset' is out of bounds");if(b.byteLength<e+(a||0))throw new RangeError("'length' is out of bounds");b=
void 0===a?new Uint8Array(b,e):new Uint8Array(b,e,a);f.TYPED_ARRAY_SUPPORT?(c=b,c.__proto__=f.prototype):c=v(c,b);return c}if("string"===typeof b){a=c;if("string"!==typeof e||""===e)e="utf8";if(!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');c=r(b,e)|0;a=d(a,c);a.write(b,e);return a}return w(c,b)}function l(c){if("number"!==typeof c)throw new TypeError('"size" argument must be a number');}function y(c,b){l(b);c=d(c,0>b?0:u(b)|0);if(!f.TYPED_ARRAY_SUPPORT)for(var e=
0;e<b;++e)c[e]=0;return c}function v(c,b){var e=u(b.length)|0;c=d(c,e);for(var a=0;a<e;a+=1)c[a]=b[a]&255;return c}function w(c,b){if(f.isBuffer(b)){var e=u(b.length)|0;c=d(c,e);if(0===c.length)return c;b.copy(c,0,0,e);return c}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(e="number"!==typeof b.length)||(e=b.length,e=e!==e),e?d(c,0):v(c,b);if("Buffer"===b.type&&K(b.data))return v(c,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function u(c){if(c>=(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function r(c,b){if(f.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var e=c.length;if(0===e)return 0;for(var d=!1;;)switch(b){case "ascii":case "binary":case "raw":case "raws":return e;
case "utf8":case "utf-8":case void 0:return B(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return D.toByteArray(A(c)).length;default:if(d)return B(c).length;b=(""+b).toLowerCase();d=!0}}function k(c,b,e){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;b>>>=0;if(e<=b)return"";for(c||(c="utf8");;)switch(c){case "hex":c=b;b=e;e=this.length;if(!c||0>c)c=0;
if(!b||0>b||b>e)b=e;d="";for(e=c;e<b;++e)c=d,d=this[e],d=16>d?"0"+d.toString(16):d.toString(16),d=c+d;return d;case "utf8":case "utf-8":return m(this,b,e);case "ascii":c="";for(e=Math.min(this.length,e);b<e;++b)c+=String.fromCharCode(this[b]&127);return c;case "binary":c="";for(e=Math.min(this.length,e);b<e;++b)c+=String.fromCharCode(this[b]);return c;case "base64":return b=0===b&&e===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(b,e)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=
this.slice(b,e);e="";for(c=0;c<b.length;c+=2)e+=String.fromCharCode(b[c]+256*b[c+1]);return e;default:if(d)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase();d=!0}}function b(c,b,e){var d=c[b];c[b]=c[e];c[e]=d}function e(c,b,e,d){var a=1,f=c.length,m=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>c.length||2>b.length)return-1;a=2;f/=2;m/=2;e/=2}for(d=-1;e<f;++e){var k=1===a?c[e]:c.readUInt16BE(e*a),q;q=-1===d?0:e-d;
q=1===a?b[q]:b.readUInt16BE(q*a);if(k===q){if(-1===d&&(d=e),e-d+1===m)return d*a}else-1!==d&&(e-=e-d),d=-1}return-1}function m(c,b,e){e=Math.min(c.length,e);for(var d=[];b<e;){var a=c[b],f=null,m=239<a?4:223<a?3:191<a?2:1;if(b+m<=e){var k,q,g;switch(m){case 1:128>a&&(f=a);break;case 2:k=c[b+1];128===(k&192)&&(a=(a&31)<<6|k&63,127<a&&(f=a));break;case 3:k=c[b+1];q=c[b+2];128===(k&192)&&128===(q&192)&&(a=(a&15)<<12|(k&63)<<6|q&63,2047<a&&(55296>a||57343<a)&&(f=a));break;case 4:k=c[b+1],q=c[b+2],g=c[b+
3],128===(k&192)&&128===(q&192)&&128===(g&192)&&(a=(a&15)<<18|(k&63)<<12|(q&63)<<6|g&63,65535<a&&1114112>a&&(f=a))}}null===f?(f=65533,m=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=m}c=d.length;if(c<=J)d=String.fromCharCode.apply(String,d);else{e="";for(b=0;b<c;)e+=String.fromCharCode.apply(String,d.slice(b,b+=J));d=e}return d}function q(c,b,e){if(0!==c%1||0>c)throw new RangeError("offset is not uint");if(c+b>e)throw new RangeError("Trying to access beyond buffer length");
}function z(c,b,e,d,a,m){if(!f.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>a||b<m)throw new RangeError('"value" argument is out of bounds');if(e+d>c.length)throw new RangeError("Index out of range");}function E(c,b,e,d){0>b&&(b=65535+b+1);for(var a=0,f=Math.min(c.length-e,2);a<f;++a)c[e+a]=(b&255<<8*(d?a:1-a))>>>8*(d?a:1-a)}function c(c,b,e,d){0>b&&(b=4294967295+b+1);for(var a=0,f=Math.min(c.length-e,4);a<f;++a)c[e+a]=b>>>8*(d?a:3-a)&255}function x(c,b,e,d,
a,f){if(e+d>c.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function C(c,b,e,d,a){a||x(c,b,e,4,3.4028234663852886E38,-3.4028234663852886E38);N.write(c,b,e,d,23,4);return e+4}function F(c,b,e,d,a){a||x(c,b,e,8,1.7976931348623157E308,-1.7976931348623157E308);N.write(c,b,e,d,52,8);return e+8}function A(c){c=c.trim?c.trim():c.replace(/^\s+|\s+$/g,"");c=c.replace(O,"");if(2>c.length)return"";for(;0!==c.length%4;)c+="=";return c}function B(c,b){b=b||
Infinity;for(var e,d=c.length,a=null,f=[],m=0;m<d;++m){e=c.charCodeAt(m);if(55295<e&&57344>e){if(!a){if(56319<e){-1<(b-=3)&&f.push(239,191,189);continue}else if(m+1===d){-1<(b-=3)&&f.push(239,191,189);continue}a=e;continue}if(56320>e){-1<(b-=3)&&f.push(239,191,189);a=e;continue}e=(a-55296<<10|e-56320)+65536}else a&&-1<(b-=3)&&f.push(239,191,189);a=null;if(128>e){if(0>--b)break;f.push(e)}else if(2048>e){if(0>(b-=2))break;f.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(b-=3))break;f.push(e>>12|224,
e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(b-=4))break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return f}function P(c){for(var b=[],e=0;e<c.length;++e)b.push(c.charCodeAt(e)&255);return b}function I(c,b,e,d){for(var a=0;a<d&&!(a+e>=b.length||a>=c.length);++a)b[a+e]=c[a];return a}var D=a("base64-js"),N=a("ieee754"),K=a("isarray");p.Buffer=f;p.SlowBuffer=function(c){+c!=c&&(c=0);return f.alloc(+c)};p.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=void 0!==
h.TYPED_ARRAY_SUPPORT?h.TYPED_ARRAY_SUPPORT:n();p.kMaxLength=f.TYPED_ARRAY_SUPPORT?2147483647:1073741823;f.poolSize=8192;f._augment=function(c){c.__proto__=f.prototype;return c};f.from=function(c,b,e){return g(null,c,b,e)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&($jscomp.initSymbol(),Object.defineProperty(f,Symbol.species,
{value:null,configurable:!0})));f.alloc=function(c,b,e){l(c);c=0>=c?d(null,c):void 0!==b?"string"===typeof e?d(null,c).fill(b,e):d(null,c).fill(b):d(null,c);return c};f.allocUnsafe=function(c){return y(null,c)};f.allocUnsafeSlow=function(c){return y(null,c)};f.isBuffer=function(c){return!(null==c||!c._isBuffer)};f.compare=function(c,b){if(!f.isBuffer(c)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(c===b)return 0;for(var e=c.length,d=b.length,a=0,m=Math.min(e,d);a<m;++a)if(c[a]!==
b[a]){e=c[a];d=b[a];break}return e<d?-1:d<e?1:0};f.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(c,b){if(!K(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return f.alloc(0);var e;if(void 0===b)for(e=b=0;e<c.length;++e)b+=c[e].length;var d=f.allocUnsafe(b),a=0;for(e=
0;e<c.length;++e){var m=c[e];if(!f.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(d,a);a+=m.length}return d};f.byteLength=r;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<c;e+=2)b(this,e,e+1);return this};f.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<c;e+=
4)b(this,e,e+3),b(this,e+1,e+2);return this};f.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?m(this,0,c):k.apply(this,arguments)};f.prototype.equals=function(c){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===f.compare(this,c)};f.prototype.inspect=function(){var c="",b=p.INSPECT_MAX_BYTES;0<this.length&&(c=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(c+=" ... "));return"<Buffer "+c+">"};f.prototype.compare=
function(c,b,e,d,a){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);void 0===e&&(e=c?c.length:0);void 0===d&&(d=0);void 0===a&&(a=this.length);if(0>b||e>c.length||0>d||a>this.length)throw new RangeError("out of range index");if(d>=a&&b>=e)return 0;if(d>=a)return-1;if(b>=e)return 1;b>>>=0;e>>>=0;d>>>=0;a>>>=0;if(this===c)return 0;var m=a-d,k=e-b,q=Math.min(m,k);d=this.slice(d,a);c=c.slice(b,e);for(b=0;b<q;++b)if(d[b]!==c[b]){m=d[b];k=c[b];break}return m<k?-1:k<
m?1:0};f.prototype.indexOf=function(c,b,d){"string"===typeof b?(d=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b>>=0;if(0===this.length||b>=this.length)return-1;0>b&&(b=Math.max(this.length+b,0));"string"===typeof c&&(c=f.from(c,d));if(f.isBuffer(c))return 0===c.length?-1:e(this,c,b,d);if("number"===typeof c)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,c,b):e(this,[c],b,d);throw new TypeError("val must be string, number or Buffer");
};f.prototype.includes=function(c,b,e){return-1!==this.indexOf(c,b,e)};f.prototype.write=function(c,b,e,d){if(void 0===b)d="utf8",e=this.length,b=0;else if(void 0===e&&"string"===typeof b)d=b,e=this.length,b=0;else if(isFinite(b))b|=0,isFinite(e)?(e|=0,void 0===d&&(d="utf8")):(d=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-b;if(void 0===e||e>a)e=a;if(0<c.length&&(0>e||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(a=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;e?(e=Number(e),e>d&&(e=d)):e=d;d=c.length;if(0!==d%2)throw Error("Invalid hex string");e>d/2&&(e=d/2);for(d=0;d<e;++d){a=parseInt(c.substr(2*d,2),16);if(isNaN(a)){c=d;break a}this[b+d]=a}c=d}return c;case "utf8":case "utf-8":return I(B(c,this.length-b),this,b,e);case "ascii":return I(P(c),this,b,e);case "binary":return I(P(c),this,b,e);case "base64":return I(D.toByteArray(A(c)),this,b,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.length-b;for(var f=void 0,f=a=void 0,m=[],k=0;k<c.length&&!(0>(d-=2));++k)f=c.charCodeAt(k),a=f>>8,f%=256,m.push(f),m.push(a);return I(m,this,b,e);default:if(a)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();a=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;f.prototype.slice=function(c,b){var e=this.length;c=~~c;b=void 0===b?e:~~b;0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);b<c&&(b=
c);if(f.TYPED_ARRAY_SUPPORT)e=this.subarray(c,b),e.__proto__=f.prototype;else for(var d=b-c,e=new f(d,void 0),a=0;a<d;++a)e[a]=this[a+c];return e};f.prototype.readUIntLE=function(c,b,e){c|=0;b|=0;e||q(c,b,this.length);e=this[c];for(var d=1,a=0;++a<b&&(d*=256);)e+=this[c+a]*d;return e};f.prototype.readUIntBE=function(c,b,e){c|=0;b|=0;e||q(c,b,this.length);e=this[c+--b];for(var d=1;0<b&&(d*=256);)e+=this[c+--b]*d;return e};f.prototype.readUInt8=function(c,b){b||q(c,1,this.length);return this[c]};f.prototype.readUInt16LE=
function(c,b){b||q(c,2,this.length);return this[c]|this[c+1]<<8};f.prototype.readUInt16BE=function(c,b){b||q(c,2,this.length);return this[c]<<8|this[c+1]};f.prototype.readUInt32LE=function(c,b){b||q(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};f.prototype.readUInt32BE=function(c,b){b||q(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};f.prototype.readIntLE=function(c,b,e){c|=0;b|=0;e||q(c,b,this.length);e=this[c];for(var d=1,a=0;++a<
b&&(d*=256);)e+=this[c+a]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};f.prototype.readIntBE=function(c,b,e){c|=0;b|=0;e||q(c,b,this.length);e=b;for(var d=1,a=this[c+--e];0<e&&(d*=256);)a+=this[c+--e]*d;a>=128*d&&(a-=Math.pow(2,8*b));return a};f.prototype.readInt8=function(c,b){b||q(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};f.prototype.readInt16LE=function(c,b){b||q(c,2,this.length);var e=this[c]|this[c+1]<<8;return e&32768?e|4294901760:e};f.prototype.readInt16BE=function(c,b){b||
q(c,2,this.length);var e=this[c+1]|this[c]<<8;return e&32768?e|4294901760:e};f.prototype.readInt32LE=function(c,b){b||q(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};f.prototype.readInt32BE=function(c,b){b||q(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};f.prototype.readFloatLE=function(c,b){b||q(c,4,this.length);return N.read(this,c,!0,23,4)};f.prototype.readFloatBE=function(c,b){b||q(c,4,this.length);return N.read(this,c,!1,23,4)};f.prototype.readDoubleLE=
function(c,b){b||q(c,8,this.length);return N.read(this,c,!0,52,8)};f.prototype.readDoubleBE=function(c,b){b||q(c,8,this.length);return N.read(this,c,!1,52,8)};f.prototype.writeUIntLE=function(c,b,e,d){c=+c;b|=0;e|=0;d||z(this,c,b,e,Math.pow(2,8*e)-1,0);d=1;var a=0;for(this[b]=c&255;++a<e&&(d*=256);)this[b+a]=c/d&255;return b+e};f.prototype.writeUIntBE=function(c,b,e,d){c=+c;b|=0;e|=0;d||z(this,c,b,e,Math.pow(2,8*e)-1,0);d=e-1;var a=1;for(this[b+d]=c&255;0<=--d&&(a*=256);)this[b+d]=c/a&255;return b+
e};f.prototype.writeUInt8=function(c,b,e){c=+c;b|=0;e||z(this,c,b,1,255,0);f.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[b]=c&255;return b+1};f.prototype.writeUInt16LE=function(c,b,e){c=+c;b|=0;e||z(this,c,b,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[b]=c&255,this[b+1]=c>>>8):E(this,c,b,!0);return b+2};f.prototype.writeUInt16BE=function(c,b,e){c=+c;b|=0;e||z(this,c,b,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[b]=c>>>8,this[b+1]=c&255):E(this,c,b,!1);return b+2};f.prototype.writeUInt32LE=function(b,e,d){b=
+b;e|=0;d||z(this,b,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e+3]=b>>>24,this[e+2]=b>>>16,this[e+1]=b>>>8,this[e]=b&255):c(this,b,e,!0);return e+4};f.prototype.writeUInt32BE=function(b,e,d){b=+b;e|=0;d||z(this,b,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e]=b>>>24,this[e+1]=b>>>16,this[e+2]=b>>>8,this[e+3]=b&255):c(this,b,e,!1);return e+4};f.prototype.writeIntLE=function(c,b,e,d){c=+c;b|=0;d||(d=Math.pow(2,8*e-1),z(this,c,b,e,d-1,-d));d=0;var a=1,f=0;for(this[b]=c&255;++d<e&&(a*=256);)0>c&&
0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(c/a>>0)-f&255;return b+e};f.prototype.writeIntBE=function(c,b,e,d){c=+c;b|=0;d||(d=Math.pow(2,8*e-1),z(this,c,b,e,d-1,-d));d=e-1;var a=1,f=0;for(this[b+d]=c&255;0<=--d&&(a*=256);)0>c&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(c/a>>0)-f&255;return b+e};f.prototype.writeInt8=function(c,b,e){c=+c;b|=0;e||z(this,c,b,1,127,-128);f.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[b]=c&255;return b+1};f.prototype.writeInt16LE=function(c,b,e){c=+c;b|=0;
e||z(this,c,b,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[b]=c&255,this[b+1]=c>>>8):E(this,c,b,!0);return b+2};f.prototype.writeInt16BE=function(c,b,e){c=+c;b|=0;e||z(this,c,b,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[b]=c>>>8,this[b+1]=c&255):E(this,c,b,!1);return b+2};f.prototype.writeInt32LE=function(b,e,d){b=+b;e|=0;d||z(this,b,e,4,2147483647,-2147483648);f.TYPED_ARRAY_SUPPORT?(this[e]=b&255,this[e+1]=b>>>8,this[e+2]=b>>>16,this[e+3]=b>>>24):c(this,b,e,!0);return e+4};f.prototype.writeInt32BE=
function(b,e,d){b=+b;e|=0;d||z(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);f.TYPED_ARRAY_SUPPORT?(this[e]=b>>>24,this[e+1]=b>>>16,this[e+2]=b>>>8,this[e+3]=b&255):c(this,b,e,!1);return e+4};f.prototype.writeFloatLE=function(c,b,e){return C(this,c,b,!0,e)};f.prototype.writeFloatBE=function(c,b,e){return C(this,c,b,!1,e)};f.prototype.writeDoubleLE=function(c,b,e){return F(this,c,b,!0,e)};f.prototype.writeDoubleBE=function(c,b,e){return F(this,c,b,!1,e)};f.prototype.copy=function(c,b,
e,d){e||(e=0);d||0===d||(d=this.length);b>=c.length&&(b=c.length);b||(b=0);0<d&&d<e&&(d=e);if(d===e||0===c.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);c.length-b<d-e&&(d=c.length-b+e);var a=d-e;if(this===c&&e<b&&b<d)for(d=a-1;0<=d;--d)c[d+b]=this[d+e];else if(1E3>a||!f.TYPED_ARRAY_SUPPORT)for(d=
0;d<a;++d)c[d+b]=this[d+e];else Uint8Array.prototype.set.call(c,this.subarray(e,e+a),b);return a};f.prototype.fill=function(c,b,e,d){if("string"===typeof c){"string"===typeof b?(d=b,b=0,e=this.length):"string"===typeof e&&(d=e,e=this.length);if(1===c.length){var a=c.charCodeAt(0);256>a&&(c=a)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof c&&(c&=255);if(0>
b||this.length<b||this.length<e)throw new RangeError("Out of range index");if(e<=b)return this;b>>>=0;e=void 0===e?this.length:e>>>0;c||(c=0);if("number"===typeof c)for(d=b;d<e;++d)this[d]=c;else for(c=f.isBuffer(c)?c:B((new f(c,d)).toString()),a=c.length,d=0;d<e-b;++d)this[d+b]=c[d%a];return this};var O=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:81,isarray:87}],61:[function(a,h,
p){function t(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function n(d,a){return d[0]-a[0]||d[1]-a[1]}function d(d,a,f){return a in d?d[a]:f}var f=a("./lib/monotone"),g=a("./lib/triangulation"),l=a("./lib/delaunay"),y=a("./lib/filter");h.exports=function(a,h,u){Array.isArray(h)?(u=u||{},h=h||[]):(u=h||{},h=[]);var r=!!d(u,"delaunay",!0),k=!!d(u,"interior",!0),b=!!d(u,"exterior",!0);u=!!d(u,"infinity",!1);if(!k&&!b||0===a.length)return[];var e=f(a,h);if(r||k!==b||u){h=g(a.length,h.map(t).sort(n));
for(var m=0;m<e.length;++m){var q=e[m];h.addTriangle(q[0],q[1],q[2])}r&&l(a,h);return b?k?u?y(h,0,u):h.cells():y(h,1,u):y(h,-1)}return e}},{"./lib/delaunay":62,"./lib/filter":63,"./lib/monotone":64,"./lib/triangulation":65}],62:[function(a,h,p){function t(d,a,g,l,y,v){var h=a.opposite(l,y);if(!(0>h)){if(y<l){var u=l;l=y;y=u;u=v;v=h;h=u}a.isConstraint(l,y)||0>n(d[l],d[y],d[v],d[h])&&g.push(l,y)}}var n=a("robust-in-sphere")[4];a("binary-search-bounds");h.exports=function(d,a){for(var g=[],l=d.length,
y=a.stars,v=0;v<l;++v)for(var h=y[v],u=1;u<h.length;u+=2){var r=h[u];if(!(r<v||a.isConstraint(v,r))){for(var k=h[u-1],b=-1,e=1;e<h.length;e+=2)if(h[e-1]===r){b=h[e];break}0>b||0>n(d[v],d[r],d[k],d[b])&&g.push(v,r)}}for(;0<g.length;){r=g.pop();v=g.pop();b=k=-1;h=y[v];for(l=1;l<h.length;l+=2)u=h[l-1],e=h[l],u===r?b=e:e===r&&(k=u);0>k||0>b||0<=n(d[v],d[r],d[k],d[b])||(a.flip(v,r),t(d,a,g,k,v,b),t(d,a,g,v,b,k),t(d,a,g,b,r,k),t(d,a,g,r,k,b))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],63:[function(a,
h,p){function t(d,a,l,n,v,h,u){this.cells=d;this.neighbor=a;this.flags=n;this.constraint=l;this.active=v;this.next=h;this.boundary=u}function n(d,a){return d[0]-a[0]||d[1]-a[1]||d[2]-a[2]}var d=a("binary-search-bounds");h.exports=function(d,a,l){for(var h=d.cells(),v=h.length,w=0;w<v;++w){var u=h[w],r=u[0],k=u[1],b=u[2];k<b?k<r&&(u[0]=k,u[1]=b,u[2]=r):b<r&&(u[0]=b,u[1]=r,u[2]=k)}h.sort(n);for(var e=Array(v),w=0;w<e.length;++w)e[w]=0;var m=[],q=[],z=Array(3*v),p=Array(3*v),c=null;l&&(c=[]);b=new t(h,
z,p,e,m,q,c);for(w=0;w<v;++w)for(var u=h[w],x=0;3>x;++x){var r=u[x],k=u[(x+1)%3],C=z[3*w+x]=b.locate(k,r,d.opposite(k,r)),F=p[3*w+x]=d.isConstraint(r,k);0>C&&(F?q.push(w):(m.push(w),e[w]=1),l&&c.push([k,r,-1]))}if(0===a)return l?b.cells.concat(b.boundary):b.cells;v=1;w=b.active;u=b.next;d=b.flags;h=b.cells;r=b.constraint;for(k=b.neighbor;0<w.length||0<u.length;){for(;0<w.length;)if(e=w.pop(),d[e]!==-v)for(d[e]=v,m=0;3>m;++m)q=k[3*e+m],0<=q&&0===d[q]&&(r[3*e+m]?u.push(q):(w.push(q),d[q]=v));e=u;u=
w;w=e;u.length=0;v=-v}for(w=v=0;w<h.length;++w)d[w]===a&&(h[v++]=h[w]);h.length=v;return l?h.concat(b.boundary):h};t.prototype.locate=function(){var a=[0,0,0];return function(g,l,h){var v=g,t=l,u=h;l<h?l<g&&(v=l,t=h,u=g):h<g&&(v=h,t=g,u=l);if(0>v)return-1;a[0]=v;a[1]=t;a[2]=u;return d.eq(this.cells,a,n)}}()},{"binary-search-bounds":51}],64:[function(a,h,p){function t(d,a,f,g,k){this.a=d;this.b=a;this.idx=f;this.lowerIds=g;this.upperIds=k}function n(d,a,f,g){this.a=d;this.b=a;this.type=f;this.idx=
g}function d(d,a){var f=d.a[0]-a.a[0]||d.a[1]-a.a[1]||d.type-a.type;return f||0!==d.type&&(f=y(d.a,d.b,a.b))?f:d.idx-a.idx}function f(d,a){return y(d.a,d.b,a)}function g(d,a){var f;return(f=d.a[0]<a.a[0]?y(d.a,d.b,a.a):y(a.b,a.a,d.a))?f:(f=a.b[0]<d.b[0]?y(d.a,d.b,a.b):y(a.b,a.a,d.b))||d.idx-a.idx}var l=a("binary-search-bounds"),y=a("robust-orientation")[3];h.exports=function(a,h){for(var u=a.length,r=h.length,k=[],b=0;b<u;++b)k.push(new n(a[b],null,0,b));for(b=0;b<r;++b){var e=h[b],u=a[e[0]],e=a[e[1]];
u[0]<e[0]?k.push(new n(u,e,2,b),new n(e,u,1,b)):u[0]>e[0]&&k.push(new n(e,u,2,b),new n(u,e,1,b))}k.sort(d);b=k[0].a[0]-(1+Math.abs(k[0].a[0]))*Math.pow(2,-52);r=[new t([b,1],[b,0],-1,[],[],[],[])];u=[];b=0;for(e=k.length;b<e;++b){var m=k[b],q=m.type;if(0===q)for(var q=u,z=r,p=a,c=m.a,m=m.idx,x=l.lt(z,c,f),C=l.gt(z,c,f);x<C;++x){for(var F=z[x],A=F.lowerIds,B=A.length;1<B&&0<y(p[A[B-2]],p[A[B-1]],c);)q.push([A[B-1],A[B-2],m]),--B;A.length=B;A.push(m);F=F.upperIds;for(B=F.length;1<B&&0>y(p[F[B-2]],p[F[B-
1]],c);)q.push([F[B-2],F[B-1],m]),--B;F.length=B;F.push(m)}else 2===q?(q=r,z=m,p=l.le(q,z,g),c=q[p],m=c.upperIds,C=m[m.length-1],c.upperIds=[C],q.splice(p+1,0,new t(z.a,z.b,z.idx,[C],m))):(q=r,z=m,p=z.a,z.a=z.b,z.b=p,z=l.eq(q,z,g),q[z-1].upperIds=q[z].upperIds,q.splice(z,1))}return u}},{"binary-search-bounds":51,"robust-orientation":103}],65:[function(a,h,p){function t(d,a){this.stars=d;this.edges=a}function n(d,a,l){for(var n=1,h=d.length;n<h;n+=2)if(d[n-1]===a&&d[n]===l){d[n-1]=d[h-2];d[n]=d[h-
1];d.length=h-2;break}}var d=a("binary-search-bounds");h.exports=function(d,a){for(var l=Array(d),n=0;n<d;++n)l[n]=[];return new t(l,a)};a=t.prototype;a.isConstraint=function(){function a(d,f){return d[0]-f[0]||d[1]-f[1]}var g=[0,0];return function(l,n){g[0]=Math.min(l,n);g[1]=Math.max(l,n);return 0<=d.eq(this.edges,g,a)}}();a.removeTriangle=function(d,a,l){var h=this.stars;n(h[d],a,l);n(h[a],l,d);n(h[l],d,a)};a.addTriangle=function(d,a,l){var n=this.stars;n[d].push(a,l);n[a].push(l,d);n[l].push(d,
a)};a.opposite=function(d,a){for(var l=this.stars[a],n=1,h=l.length;n<h;n+=2)if(l[n]===d)return l[n-1];return-1};a.flip=function(d,a){var l=this.opposite(d,a),n=this.opposite(a,d);this.removeTriangle(d,a,l);this.removeTriangle(a,d,n);this.addTriangle(d,n,l);this.addTriangle(a,l,n)};a.edges=function(){for(var d=this.stars,a=[],l=0,n=d.length;l<n;++l)for(var h=d[l],t=0,u=h.length;t<u;t+=2)a.push([h[t],h[t+1]]);return a};a.cells=function(){for(var d=this.stars,a=[],l=0,n=d.length;l<n;++l)for(var h=d[l],
t=0,u=h.length;t<u;t+=2){var r=h[t],k=h[t+1];l<Math.min(r,k)&&a.push([l,r,k])}return a}},{"binary-search-bounds":51}],66:[function(a,h,p){function t(d){var c=e(d);d=b(k(c),d);return 0>d?[c,q(c,Infinity)]:0<d?[q(c,-Infinity),c]:[c,c]}function n(b,c,e){var d=[];u(e,function(e,a){var f=c[e],m=c[a];f[0]!==m[0]&&f[0]!==m[1]&&f[1]!==m[0]&&f[1]!==m[1]&&r(b[f[0]],b[f[1]],b[m[0]],b[m[1]])&&d.push([e,a])});return d}function d(b,c,e,d){var a=[];u(e,d,function(e,d){var f=c[e];if(f[0]!==d&&f[1]!==d){var m=b[d];
r(b[f[0]],b[f[1]],m,m)&&a.push([e,d])}});return a}function f(e,c,d,a,f){function q(c){if(c>=e.length)return g[c-e.length];c=e[c];return[k(c[0]),k(c[1])]}for(var g=[],l=0;l<d.length;++l){var n=d[l],r=n[0],n=n[1],u=c[r],h=c[n];if(u=z(m(e[u[0]]),m(e[u[1]]),m(e[h[0]]),m(e[h[1]])))h=g.length+e.length,g.push(u),a.push([r,h],[n,h])}a.sort(function(c,e){if(c[0]!==e[0])return c[0]-e[0];var d=q(c[1]),a=q(e[1]);return b(d[0],a[0])||b(d[1],a[1])});for(l=a.length-1;0<=l;--l){n=a[l];r=n[0];u=c[r];h=u[0];d=u[1];
var v=e[h],t=e[d];0>(v[0]-t[0]||v[1]-t[1])&&(v=h,h=d,d=v);u[0]=h;var h=u[1]=n[1],y;for(f&&(y=u[2]);0<l&&a[l-1][0]===r;)n=a[--l],n=n[1],f?c.push([h,n,y]):c.push([h,n]),h=n;f?c.push([h,d,y]):c.push([h,d])}return g}function g(b,c,d){for(var a=b.length+c.length,f=new w(a),m=0;m<c.length;++m){var k=c[m],q=t(k[0]),g=t(k[1]);d.push([q[0],g[0],q[1],g[1]]);b.push([e(k[0]),e(k[1])])}u(d,function(c,b){f.link(c,b)});c=0;d=!0;k=Array(a);for(m=0;m<a;++m)f.find(m)===m?(k[m]=c,b[c++]=b[m]):(d=!1,k[m]=-1);b.length=
c;if(d)return null;for(m=0;m<a;++m)0>k[m]&&(k[m]=k[f.find(m)]);return k}function l(b,c){return b[0]-c[0]||b[1]-c[1]}function y(b,c){var e=b[0]-c[0]||b[1]-c[1];return e?e:b[2]<c[2]?-1:b[2]>c[2]?1:0}function v(b,c,e){for(var a=Array(c.length),m=0;m<c.length;++m){var k=c[m],q=b[k[0]],k=b[k[1]];a[m]=[Math.min(q[0],k[0]),Math.min(q[1],k[1]),Math.max(q[0],k[0]),Math.max(q[1],k[1])]}m=n(b,c,a);q=Array(b.length);for(k=0;k<b.length;++k){var r=b[k];q[k]=[r[0],r[1],r[0],r[1]]}a=d(b,c,a,q);k=f(b,c,m,a,e);b=g(b,
k,q);if(0!==c.length){if(b)for(q=0;q<c.length;++q){var k=c[q],r=b[k[0]],u=b[k[1]];k[0]=Math.min(r,u);k[1]=Math.max(r,u)}else for(q=0;q<c.length;++q)k=c[q],r=k[0],u=k[1],k[0]=Math.min(r,u),k[1]=Math.max(r,u);e?c.sort(y):c.sort(l);for(q=k=1;q<c.length;++q)if(r=c[q-1],u=c[q],u[0]!==r[0]||u[1]!==r[1]||e&&u[2]!==r[2])c[k++]=u;c.length=k}return b?!0:0<m.length||0<a.length}h.exports=function(b,c,e){var d=!1,a;if(e){a=c;for(var f=Array(c.length),m=0;m<c.length;++m){var k=c[m];f[m]=[k[0],k[1],e[m]]}c=f}for(;v(b,
c,!!e);)d=!0;if(e&&d)for(a.length=0,m=e.length=0;m<c.length;++m)k=c[m],a.push([k[0],k[1]]),e.push(k[2]);return d};var w=a("union-find"),u=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),k=a("big-rat"),b=a("big-rat/cmp"),e=a("big-rat/to-float"),m=a("rat-vec"),q=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":67,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":69,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":122}],67:[function(a,h,p){function t(d,a){return f(n(d[0],a[1]),n(d[1],a[0]))}h.exports=function(a,f,n,k){f=l(f,a);var b=l(k,n);k=t(f,b);if(0===g(k))return null;n=l(a,n);n=t(b,n);n=d(n,k);return y(a,v(f,n))};var n=a("big-rat/mul"),d=a("big-rat/div"),f=a("big-rat/sub"),g=a("big-rat/sign"),l=a("rat-vec/sub"),y=a("rat-vec/add"),v=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],68:[function(a,h,p){function t(d,a,n){var u=f(d[0],-a[0]);d=f(d[1],-a[1]);var r=f(n[0],-a[0]);a=f(n[1],-a[1]);u=l(g(u,r),g(d,a));return 0<=u[u.length-1]}h.exports=function(a,f,g,l){var r=n(f,g,l);if(0===r){var r=d(n(a,f,g)),k=d(n(a,f,l));return r===k?0===r&&(g=t(a,f,g),a=t(a,f,l),g!==a)?g?1:-1:0:0===k?0<r?-1:t(a,f,l)?-1:1:0===r?0<k?1:t(a,f,g)?1:-1:d(k-r)}k=n(a,f,g);return 0<k?0<r&&0<n(a,f,l)?1:-1:0>k?0<r||0<n(a,f,l)?1:-1:0<n(a,f,l)?1:t(a,f,g)?1:-1};var n=a("robust-orientation"),
d=a("signum"),f=a("two-sum"),g=a("robust-product"),l=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":120}],69:[function(a,h,p){function t(d,a){return d-a}h.exports=function(d,a){var g=d.length,l=d.length-a.length;if(l)return l;switch(g){case 0:return 0;case 1:return d[0]-a[0];case 2:return d[0]+d[1]-a[0]-a[1]||n(d[0],d[1])-n(a[0],a[1]);case 3:var g=d[0]+d[1],h=a[0]+a[1];if(l=g+d[2]-(h+a[2]))return l;var l=n(d[0],d[1]),v=n(a[0],a[1]);return n(l,
d[2])-n(v,a[2])||n(l+d[2],g)-n(v+a[2],h);case 4:var l=d[0],g=d[1],h=d[2],v=d[3],p=a[0],u=a[1],r=a[2],k=a[3];return l+g+h+v-(p+u+r+k)||n(l,g,h,v)-n(p,u,r,k,p)||n(l+g,l+h,l+v,g+h,g+v,h+v)-n(p+u,p+r,p+k,u+r,u+k,r+k)||n(l+g+h,l+g+v,l+h+v,g+h+v)-n(p+u+r,p+u+k,p+r+k,u+r+k);default:h=d.slice().sort(t);v=a.slice().sort(t);for(p=0;p<g;++p)if(l=h[p]-v[p])return l;return 0}};var n=Math.min},{}],70:[function(a,h,p){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=a("./lib/thunk.js");h.exports=function(d){var a=new t;a.pre=d.pre;a.body=d.body;a.post=d.post;var g=d.args.slice(0);a.argTypes=g;for(var l=0;l<g.length;++l){var h=g[l];if("array"===h||"object"===typeof h&&h.blockIndices){a.argTypes[l]="array";a.arrayArgs.push(l);a.arrayBlockIndices.push(h.blockIndices?h.blockIndices:0);a.shimArgs.push("array"+l);if(l<
a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)a.scalarArgs.push(l),a.shimArgs.push("scalar"+l);else if("index"===h){a.indexArgs.push(l);if(l<a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){a.shapeArgs.push(l);if(l<a.pre.args.length&&a.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<a.post.args.length&&a.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof h&&h.offset)a.argTypes[l]="offset",a.offsetArgs.push({array:h.array,offset:h.offset}),a.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+g[l]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>g.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>g.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>g.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!d.printCode||!!d.debug;a.funcName=d.funcName||"cwise";a.blockSize=d.blockSize||64;return n(a)}},{"./lib/thunk.js":72}],71:[function(a,h,p){function t(d,a,f){var g=d.length,n=a.arrayArgs.length;a=0<a.indexArgs.length;var r=[],k=[],b=0,e=0,m,q;for(m=0;m<g;++m)k.push(["i",m,"=0"].join(""));for(q=0;q<n;++q)for(m=0;m<g;++m)e=b,b=d[m],0===m?k.push(["d",q,"s",m,"=t",q,"p",b].join("")):k.push(["d",q,"s",m,"=(t",q,"p",b,"-s",e,"*t",q,"p",e,")"].join(""));r.push("var "+k.join(","));for(m=g-1;0<=m;--m)b=
d[m],r.push(["for(i",m,"=0;i",m,"<s",b,";++i",m,"){"].join(""));r.push(f);for(m=0;m<g;++m){e=b;b=d[m];for(q=0;q<n;++q)r.push(["p",q,"+=d",q,"s",m].join(""));a&&(0<m&&r.push(["index[",e,"]-=s",e].join("")),r.push(["++index[",b,"]"].join("")));r.push("}")}return r.join("\n")}function n(d,a,f,g){for(var n=a.length,r=f.arrayArgs.length,k=f.blockSize,b=0<f.indexArgs.length,e=[],m=0;m<r;++m)e.push(["var offset",m,"=p",m].join(""));for(m=d;m<n;++m)e.push(["for(var j"+m+"=SS[",a[m],"]|0;j",m,">0;){"].join("")),
e.push(["if(j",m,"<",k,"){"].join("")),e.push(["s",a[m],"=j",m].join("")),e.push(["j",m,"=0"].join("")),e.push(["}else{s",a[m],"=",k].join("")),e.push(["j",m,"-=",k,"}"].join("")),b&&e.push(["index[",a[m],"]=j",m].join(""));for(m=0;m<r;++m){k=["offset"+m];for(b=d;b<n;++b)k.push(["j",b,"*t",m,"p",a[b]].join(""));e.push(["p",m,"=(",k.join("+"),")"].join(""))}e.push(t(a,f,g));for(m=d;m<n;++m)e.push("}");return e.join("\n")}function d(d,a,f){for(var g=d.body,n=[],r=[],k=0;k<d.args.length;++k){var b=d.args[k];
if(!(0>=b.count)){var e=new RegExp(b.name,"g"),m="",q=a.arrayArgs.indexOf(k);switch(a.argTypes[k]){case "offset":var h=a.offsetArgIndex.indexOf(k),q=a.offsetArgs[h].array,m="+q"+h;case "array":var m="p"+q+m,t="l"+k,h="a"+q;if(0===a.arrayBlockIndices[q])1===b.count?"generic"===f[q]?b.lvalue?(n.push(["var ",t,"=",h,".get(",m,")"].join("")),g=g.replace(e,t),r.push([h,".set(",m,",",t,")"].join(""))):g=g.replace(e,[h,".get(",m,")"].join("")):g=g.replace(e,[h,"[",m,"]"].join("")):"generic"===f[q]?(n.push(["var ",
t,"=",h,".get(",m,")"].join("")),g=g.replace(e,t),b.lvalue&&r.push([h,".set(",m,",",t,")"].join(""))):(n.push(["var ",t,"=",h,"[",m,"]"].join("")),g=g.replace(e,t),b.lvalue&&r.push([h,"[",m,"]=",t].join("")));else{e=[b.name];b=[m];for(m=0;m<Math.abs(a.arrayBlockIndices[q]);m++)e.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(m+1)+"*t"+q+"b"+m);e=new RegExp(e.join(""),"g");m=b.join("+");if("generic"===f[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(e,[h,"[",
m,"]"].join(""))}break;case "scalar":g=g.replace(e,"Y"+a.scalarArgs.indexOf(k));break;case "index":g=g.replace(e,"index");break;case "shape":g=g.replace(e,"shape")}}}return[n.join("\n"),g,r.join("\n")].join("\n").trim()}function f(d){for(var a=Array(d.length),f=!0,g=0;g<d.length;++g){var n=d[g],r=n.match(/\d+/),r=r?r[0]:"";0===n.charAt(0)?a[g]="u"+n.charAt(1)+r:a[g]=n.charAt(0)+r;0<g&&(f=f&&a[g]===a[g-1])}return f?a[0]:a.join("")}var g=a("uniq");h.exports=function(a,h){for(var v=h[1].length-Math.abs(a.arrayBlockIndices[0])|
0,p=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)u[r]=h[2*r],p[r]=h[2*r+1];for(var k=[],b=[],e=[],m=[],q=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(e.push(0),m.push(v),k.push(v),b.push(v+a.arrayBlockIndices[r])):(e.push(a.arrayBlockIndices[r]),m.push(a.arrayBlockIndices[r]+v),k.push(0),b.push(a.arrayBlockIndices[r]));for(var z=[],E=0;E<p[r].length;E++)e[r]<=p[r][E]&&p[r][E]<m[r]&&z.push(p[r][E]-e[r]);q.push(z)}b=["SS"];m=["'use strict'"];z=[];
for(E=0;E<v;++E)z.push(["s",E,"=SS[",E,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){b.push("a"+r);b.push("t"+r);b.push("p"+r);for(E=0;E<v;++E)z.push(["t",r,"p",E,"=t",r,"[",e[r]+E,"]"].join(""));for(E=0;E<Math.abs(a.arrayBlockIndices[r]);++E)z.push(["t",r,"b",E,"=t",r,"[",k[r]+E,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)b.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){E=Array(v);for(r=0;r<v;++r)E[r]="0";z.push(["index=[",E.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){k=a.offsetArgs[r];e=[];for(E=0;E<k.offset.length;++E)0!==k.offset[E]&&(1===k.offset[E]?e.push(["t",k.array,"p",E].join("")):e.push([k.offset[E],"*t",k.array,"p",E].join("")));0===e.length?z.push("q"+r+"=0"):z.push(["q",r,"=",e.join("+")].join(""))}r=g([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);m.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)m.push("p"+r+"|=0");3<a.pre.body.length&&m.push(d(a.pre,a,u));r=d(a.body,
a,u);a:for(E=0,z=q[0].length;E<z;){for(k=1;k<q.length;++k)if(q[k][E]!==q[0][E])break a;++E}E<v?m.push(n(E,q[0],a,r)):m.push(t(q[0],a,r));3<a.post.body.length&&m.push(d(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",h,":\n"+m.join("\n")+"\n----------");v=[a.funcName||"unnamed","_cwise_loop_",p[0].join("s"),"m",E,f(u)].join("");return(new Function(["function ",v,"(",b.join(","),"){",m.join("\n"),"} return ",v].join("")))()}},{uniq:123}],72:[function(a,h,p){var t=a("./compile.js");
h.exports=function(a){var d=["'use strict'","var CACHED={}"],f=[];d.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var g=[],l=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],v=[],p=[],u=0;u<a.arrayArgs.length;++u){var r=a.arrayArgs[u];f.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));g.push("t"+r);g.push("r"+r);l.push("t"+r);l.push("r"+
r+".join()");h.push("array"+r+".data");h.push("array"+r+".stride");h.push("array"+r+".offset|0");0<u&&(v.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),p.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(d.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
d.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),d.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(u=0;u<a.scalarArgs.length;++u)h.push("scalar"+a.scalarArgs[u]);f.push(["type=[",l.join(","),"].join()"].join(""));f.push("proc=CACHED[type]");d.push("var "+f.join(","));d.push(["if(!proc){CACHED[type]=proc=compile([",g.join(","),"])}return proc(",h.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+d.join("\n")+"\n----------");return(new Function("compile",d.join("\n")))(t.bind(void 0,a))}},{"./compile.js":71}],73:[function(a,h,p){(function(a){var n=!1;if("undefined"!==typeof Float64Array){var d=new Float64Array(1),f=new Uint32Array(d.buffer);d[0]=1;n=!0;1072693248===f[1]?(h.exports=function(a){d[0]=a;return[f[0],f[1]]},h.exports.pack=function(a,g){f[0]=a;f[1]=g;return d[0]},h.exports.lo=function(a){d[0]=a;return f[0]},h.exports.hi=
function(a){d[0]=a;return f[1]}):1072693248===f[0]?(h.exports=function(a){d[0]=a;return[f[1],f[0]]},h.exports.pack=function(a,g){f[1]=a;f[0]=g;return d[0]},h.exports.lo=function(a){d[0]=a;return f[1]},h.exports.hi=function(a){d[0]=a;return f[0]}):n=!1}if(!n){var g=new a(8);h.exports=function(a){g.writeDoubleLE(a,0,!0);return[g.readUInt32LE(0,!0),g.readUInt32LE(4,!0)]};h.exports.pack=function(a,d){g.writeUInt32LE(a,0,!0);g.writeUInt32LE(d,4,!0);return g.readDoubleLE(0,!0)};h.exports.lo=function(a){g.writeDoubleLE(a,
0,!0);return g.readUInt32LE(0,!0)};h.exports.hi=function(a){g.writeDoubleLE(a,0,!0);return g.readUInt32LE(4,!0)}}h.exports.sign=function(a){return h.exports.hi(a)>>>31};h.exports.exponent=function(a){return(h.exports.hi(a)<<1>>>21)-1023};h.exports.fraction=function(a){var d=h.exports.lo(a);a=h.exports.hi(a);var f=a&1048575;a&2146435072&&(f+=1048576);return[d,f]};h.exports.denormalized=function(a){return!(h.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],74:[function(a,h,p){function t(a,
d,f){var g=a[f]|0;if(0>=g)return[];var l=Array(g),h;if(f===a.length-1)for(h=0;h<g;++h)l[h]=d;else for(h=0;h<g;++h)l[h]=t(a,d,f+1);return l}h.exports=function(a,d){"undefined"===typeof d&&(d=0);switch(typeof a){case "number":if(0<a){var f=a|0,g=d,l,h;l=Array(f);for(h=0;h<f;++h)l[h]=g;return l}break;case "object":if("number"===typeof a.length)return t(a,d,0)}return[]}},{}],75:[function(a,h,p){h.exports=function(a,d){var f=a.length;if("number"!==typeof d){for(var g=d=0;g<f;++g){var l=a[g];d=Math.max(d,
l[0],l[1])}d=(d|0)+1}d|=0;for(var h=Array(d),g=0;g<d;++g)h[g]=[];for(g=0;g<f;++g)l=a[g],h[l[0]].push(l[1]),h[l[1]].push(l[0]);for(f=0;f<d;++f)t(h[f],function(a,d){return a-d});return h};var t=a("uniq")},{uniq:123}],76:[function(a,h,p){function t(a,b,e,d,f,g){this._color=a;this.key=b;this.value=e;this.left=d;this.right=f;this._count=g}function n(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function d(a,b){return new t(a,b.key,b.value,b.left,b.right,b._count)}function f(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function g(a,b){this._compare=a;this.root=b}function l(a,b){if(b.left){var e=l(a,b.left);if(e)return e}if(e=a(b.key,b.value))return e;if(b.right)return l(a,b.right)}function y(a,b,e,d){if(0>=b(a,d.key)){if(d.left){var f=y(a,b,e,d.left);if(f)return f}if(f=e(d.key,d.value))return f}if(d.right)return y(a,b,e,d.right)}function v(a,b,e,d,f){var g=e(a,f.key),n=e(b,f.key);if(0>=g&&(f.left&&(g=v(a,b,e,d,f.left))||0<n&&(g=d(f.key,f.value))))return g;if(0<
n&&f.right)return v(a,b,e,d,f.right)}function w(a,b){this.tree=a;this._stack=b}function u(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function r(a,b){return a<b?-1:a>b?1:0}h.exports=function(a){return new g(a||r,null)};a=g.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(b,e){a.push(b)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(b,e){a.push(e)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,b){for(var e=this._compare,m=this.root,q=[],n=[];m;){var l=e(a,m.key);q.push(m);n.push(l);m=0>=l?m.left:m.right}q.push(new t(0,a,b,null,null,1));for(l=q.length-2;0<=l;--l)m=q[l],q[l]=0>=n[l]?new t(m._color,m.key,m.value,q[l+1],m.right,m._count+1):new t(m._color,m.key,m.value,m.left,q[l+1],m._count+1);for(l=q.length-1;1<l;--l){n=q[l-1];m=q[l];if(1===n._color||1===m._color)break;var c=q[l-2];
if(c.left===n)if(n.left===m){var r=c.right;if(r&&0===r._color)n._color=1,c.right=d(1,r),c._color=0,--l;else{c._color=0;c.left=n.right;n._color=1;n.right=c;q[l-2]=n;q[l-1]=m;f(c);f(n);3<=l&&(l=q[l-3],l.left===c?l.left=n:l.right=n);break}}else if((r=c.right)&&0===r._color)n._color=1,c.right=d(1,r),c._color=0,--l;else{n.right=m.left;c._color=0;c.left=m.right;m._color=1;m.left=n;m.right=c;q[l-2]=m;q[l-1]=n;f(c);f(n);f(m);3<=l&&(l=q[l-3],l.left===c?l.left=m:l.right=m);break}else if(n.right===m)if((r=c.left)&&
0===r._color)n._color=1,c.left=d(1,r),c._color=0,--l;else{c._color=0;c.right=n.left;n._color=1;n.left=c;q[l-2]=n;q[l-1]=m;f(c);f(n);3<=l&&(l=q[l-3],l.right===c?l.right=n:l.left=n);break}else if((r=c.left)&&0===r._color)n._color=1,c.left=d(1,r),c._color=0,--l;else{n.left=m.right;c._color=0;c.right=m.left;m._color=1;m.right=n;m.left=c;q[l-2]=m;q[l-1]=n;f(c);f(n);f(m);3<=l&&(l=q[l-3],l.right===c?l.right=m:l.left=m);break}}q[0]._color=1;return new g(e,q[0])};a.forEach=function(a,b,e){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return y(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,e)))return v(b,e,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var b=this.root,e=[];;){e.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new w(this,e);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new w(this,[])};a.ge=function(a){for(var b=this._compare,e=this.root,d=[],f=0;e;){var g=b(a,e.key);d.push(e);0>=g&&(f=d.length);e=0>=g?e.left:e.right}d.length=f;return new w(this,d)};a.gt=function(a){for(var b=this._compare,e=this.root,d=[],f=0;e;){var g=b(a,e.key);d.push(e);0>g&&(f=d.length);e=0>g?e.left:e.right}d.length=f;return new w(this,d)};a.lt=function(a){for(var b=this._compare,
e=this.root,d=[],f=0;e;){var g=b(a,e.key);d.push(e);0<g&&(f=d.length);e=0>=g?e.left:e.right}d.length=f;return new w(this,d)};a.le=function(a){for(var b=this._compare,e=this.root,d=[],f=0;e;){var g=b(a,e.key);d.push(e);0<=g&&(f=d.length);e=0>g?e.left:e.right}d.length=f;return new w(this,d)};a.find=function(a){for(var b=this._compare,e=this.root,d=[];e;){var f=b(a,e.key);d.push(e);if(0===f)return new w(this,d);e=0>=f?e.left:e.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var b=this._compare,e=this.root;e;){var d=b(a,e.key);if(0===d)return e.value;e=0>=d?e.left:e.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=
Array(a.length),e=a[a.length-1];b[b.length-1]=new t(e._color,e.key,e.value,e.left,e.right,e._count);for(var m=a.length-2;0<=m;--m)e=a[m],b[m]=e.left===a[m+1]?new t(e._color,e.key,e.value,b[m+1],e.right,e._count):new t(e._color,e.key,e.value,e.left,b[m+1],e._count);e=b[b.length-1];if(e.left&&e.right){a=b.length;for(e=e.left;e.right;)b.push(e),e=e.right;m=b[a-1];b.push(new t(e._color,m.key,m.value,e.left,e.right,e._count));b[a-1].key=e.key;b[a-1].value=e.value;for(m=b.length-2;m>=a;--m)e=b[m],b[m]=
new t(e._color,e.key,e.value,e.left,b[m+1],e._count);b[a-1].left=b[a]}e=b[b.length-1];if(0===e._color)for(m=b[b.length-2],m.left===e?m.left=null:m.right===e&&(m.right=null),b.pop(),m=0;m<b.length;++m)b[m]._count--;else if(e.left||e.right)for(e.left?u(e,e.left):e.right&&u(e,e.right),e._color=1,m=0;m<b.length-1;++m)b[m]._count--;else{if(1===b.length)return new g(this.tree._compare,null);for(m=0;m<b.length;++m)b[m]._count--;for(var m=b[b.length-2],q,l,r,c=b.length-1;0<=c;--c){a=b[c];if(0===c){a._color=
1;break}q=b[c-1];if(q.left===a){l=q.right;if(l.right&&0===l.right._color){l=q.right=n(l);r=l.right=n(l.right);q.right=l.left;l.left=q;l.right=r;l._color=q._color;a._color=1;q._color=1;r._color=1;f(q);f(l);if(1<c){var h=b[c-2];h.left===q?h.left=l:h.right=l}b[c-1]=l;break}else if(l.left&&0===l.left._color){l=q.right=n(l);r=l.left=n(l.left);q.right=r.left;l.left=r.right;r.left=q;r.right=l;r._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(r);1<c&&(h=b[c-2],h.left===q?h.left=r:h.right=r);
b[c-1]=r;break}if(1===l._color)if(0===q._color){q._color=1;q.right=d(0,l);break}else q.right=d(0,l);else l=n(l),q.right=l.left,l.left=q,l._color=q._color,q._color=0,f(q),f(l),1<c&&(h=b[c-2],h.left===q?h.left=l:h.right=l),b[c-1]=l,b[c]=q,c+1<b.length?b[c+1]=a:b.push(a),c+=2}else{l=q.left;if(l.left&&0===l.left._color){l=q.left=n(l);r=l.left=n(l.left);q.left=l.right;l.right=q;l.left=r;l._color=q._color;a._color=1;q._color=1;r._color=1;f(q);f(l);1<c&&(h=b[c-2],h.right===q?h.right=l:h.left=l);b[c-1]=l;
break}else if(l.right&&0===l.right._color){l=q.left=n(l);r=l.right=n(l.right);q.left=r.right;l.right=r.left;r.right=q;r.left=l;r._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(r);1<c&&(h=b[c-2],h.right===q?h.right=r:h.left=r);b[c-1]=r;break}if(1===l._color)if(0===q._color){q._color=1;q.left=d(0,l);break}else q.left=d(0,l);else l=n(l),q.left=l.right,l.right=q,l._color=q._color,q._color=0,f(q),f(l),1<c&&(h=b[c-2],h.right===q?h.right=l:h.left=l),b[c-1]=l,b[c]=q,c+1<b.length?b[c+1]=a:b.push(a),
c+=2}}m.left===e?m.left=null:m.right=null}return new g(this.tree._compare,b[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var e=b.length-2;0<=e;--e)b[e+1]===b[e].right&&(++a,b[e].left&&(a+=b[e].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});a.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var e=Array(b.length),d=b[b.length-1];e[e.length-1]=new t(d._color,d.key,a,d.left,d.right,d._count);for(a=b.length-2;0<=a;--a)d=b[a],e[a]=d.left===b[a+1]?new t(d._color,d.key,d.value,e[a+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,e[a+1],d._count);return new g(this.tree._compare,e[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],77:[function(a,h,p){function t(a){if(0>a)return Number("0/0");for(var g=d[0],l=d.length-1;0<l;--l)g+=d[l]/(a+l);l=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(l)-l+Math.log(g)-
Math.log(a)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
h.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(t(a));--a;for(var d=n[0],h=1;9>h;h++)d+=n[h]/(a+h);h=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*d};h.exports.log=t},{}],78:[function(a,h,p){h.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],79:[function(a,h,p){var t=a("./identity");h.exports=function(a,d,f,g){var l,h,p,w,u,
r,k,b,e=d[0],m=d[1];d=d[2];p=g[0];w=g[1];h=g[2];k=f[0];g=f[1];l=f[2];if(1E-6>Math.abs(e-k)&&1E-6>Math.abs(m-g)&&1E-6>Math.abs(d-l))return t(a);f=e-k;g=m-g;k=d-l;b=1/Math.sqrt(f*f+g*g+k*k);f*=b;g*=b;k*=b;l=w*k-h*g;h=h*f-p*k;p=p*g-w*f;(b=Math.sqrt(l*l+h*h+p*p))?(b=1/b,l*=b,h*=b,p*=b):p=h=l=0;w=g*p-k*h;u=k*l-f*p;r=f*h-g*l;(b=Math.sqrt(w*w+u*u+r*r))?(b=1/b,w*=b,u*=b,r*=b):r=u=w=0;a[0]=l;a[1]=w;a[2]=f;a[3]=0;a[4]=h;a[5]=u;a[6]=g;a[7]=0;a[8]=p;a[9]=r;a[10]=k;a[11]=0;a[12]=-(l*e+h*m+p*d);a[13]=-(w*e+u*m+
r*d);a[14]=-(f*e+g*m+k*d);a[15]=1;return a}},{"./identity":78}],80:[function(a,h,p){h.exports=function(a,n,d,f,g){n=1/Math.tan(n/2);var l=1/(f-g);a[0]=n/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*f*l;a[15]=0;return a}},{}],81:[function(a,h,p){p.read=function(a,n,d,f,g){var l;l=8*g-f-1;var h=(1<<l)-1,p=h>>1,w=-7;g=d?g-1:0;var u=d?-1:1,r=a[n+g];g+=u;d=r&(1<<-w)-1;r>>=-w;for(w+=l;0<w;d=256*d+a[n+g],g+=u,w-=8);l=d&(1<<-w)-1;d>>=-w;
for(w+=f;0<w;l=256*l+a[n+g],g+=u,w-=8);if(0===d)d=1-p;else{if(d===h)return l?NaN:Infinity*(r?-1:1);l+=Math.pow(2,f);d-=p}return(r?-1:1)*l*Math.pow(2,d-f)};p.write=function(a,n,d,f,g,l){var h,p=8*l-g-1,w=(1<<p)-1,u=w>>1,r=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=f?0:l-1;var k=f?1:-1,b=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,f=w):(f=Math.floor(Math.log(n)/Math.LN2),1>n*(h=Math.pow(2,-f))&&(f--,h*=2),n=1<=f+u?n+r/h:n+r*Math.pow(2,1-u),2<=n*h&&(f++,h/=2),f+u>=w?(n=
0,f=w):1<=f+u?(n=(n*h-1)*Math.pow(2,g),f+=u):(n=n*Math.pow(2,u-1)*Math.pow(2,g),f=0));for(;8<=g;a[d+l]=n&255,l+=k,n/=256,g-=8);f=f<<g|n;for(p+=g;0<p;a[d+l]=f&255,l+=k,f/=256,p-=8);a[d+l-k]|=128*b}},{}],82:[function(a,h,p){function t(b,a,d,f,k){this.mid=b;this.left=a;this.right=d;this.leftPoints=f;this.rightPoints=k;this.count=(a?a.count:0)+(d?d.count:0)+f.length}function n(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function d(b,
a){var d=r(a);b.mid=d.mid;b.left=d.left;b.right=d.right;b.leftPoints=d.leftPoints;b.rightPoints=d.rightPoints;b.count=d.count}function f(b,a){var f=b.intervals([]),k=f.indexOf(a);if(0>k)return 0;f.splice(k,1);d(b,f);return 1}function g(b,a,d){for(var f=0;f<b.length&&b[f][0]<=a;++f){var k=d(b[f]);if(k)return k}}function l(b,a,d){for(var f=b.length-1;0<=f&&b[f][1]>=a;--f){var k=d(b[f]);if(k)return k}}function y(b,a){for(var d=0;d<b.length;++d){var f=a(b[d]);if(f)return f}}function v(b,a){return b-a}
function w(b,a){var d=b[0]-a[0];return d?d:b[1]-a[1]}function u(b,a){var d=b[1]-a[1];return d?d:b[0]-a[0]}function r(b){if(0===b.length)return null;for(var a=[],d=0;d<b.length;++d)a.push(b[d][0],b[d][1]);a.sort(v);for(var a=a[a.length>>1],f=[],k=[],c=[],d=0;d<b.length;++d){var g=b[d];g[1]<a?f.push(g):a<g[0]?k.push(g):c.push(g)}b=c.slice();c.sort(w);b.sort(u);return new t(a,r(f),r(k),c,b)}function k(b){this.root=b}var b=a("binary-search-bounds");h.exports=function(b){return b&&0!==b.length?new k(r(b)):
new k(null)};a=t.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);return b};a.insert=function(a){var f=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(f+1)?(f=this.intervals([]),f.push(a),d(this,f)):this.left.insert(a):this.left=r([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(f+1)?(f=this.intervals([]),f.push(a),d(this,f)):this.right.insert(a):
this.right=r([a]);else{var f=b.ge(this.leftPoints,a,w),k=b.ge(this.rightPoints,a,u);this.leftPoints.splice(f,0,a);this.rightPoints.splice(k,0,a)}};a.remove=function(a){var d=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(d-1))return f(this,a);d=this.left.remove(a);if(2===d)return this.left=null,--this.count,1;1===d&&--this.count;return d}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(d-1))return f(this,a);
d=this.right.remove(a);if(2===d)return this.right=null,--this.count,1;1===d&&--this.count;return d}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var k=this.left;k.right;)a=k,k=k.right;if(a===this)k.right=this.right;else{var g=this.left,d=this.right;a.count-=k.count;a.right=k.left;k.left=g;k.right=d}n(this,k);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(g=b.ge(this.leftPoints,a,w);g<this.leftPoints.length&&this.leftPoints[g][0]===a[0];++g)if(this.leftPoints[g]===a)for(--this.count,this.leftPoints.splice(g,1),d=b.ge(this.rightPoints,a,u);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),1;return 0};a.queryPoint=function(b,a){if(b<this.mid){if(this.left){var d=this.left.queryPoint(b,a);if(d)return d}return g(this.leftPoints,b,
a)}return b>this.mid?this.right&&(d=this.right.queryPoint(b,a))?d:l(this.rightPoints,b,a):y(this.leftPoints,a)};a.queryInterval=function(b,a,d){if(b<this.mid&&this.left){var f=this.left.queryInterval(b,a,d);if(f)return f}return a>this.mid&&this.right&&(f=this.right.queryInterval(b,a,d))?f:a<this.mid?g(this.leftPoints,a,d):b>this.mid?l(this.rightPoints,b,d):y(this.leftPoints,d)};a=k.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new t(b[0],null,null,[b],[b])};a.remove=function(b){return this.root?
(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,a,d){if(b<=a&&this.root)return this.root.queryInterval(b,a,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],83:[function(a,h,p){function t(a,f,g,l,n,h){a=["function ",a,"(a,l,h,",
l.join(","),"){",h?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];h?0>f.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",f,"){i=m;");g?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");h?a.push("return -1};"):a.push("return i};");return a.join("")}function n(a,f,g,l){return(new Function([t("A","x"+a+"y",f,["y"],!1,l),t("B","x"+a+"y",f,["y"],!0,l),t("P","c(x,y)"+a+"0",
f,["y","c"],!1,l),t("Q","c(x,y)"+a+"0",f,["y","c"],!0,l),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",g].join("")))()}h.exports=
{ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],84:[function(a,h,p){h.exports=function(a,n){n=n||Array(a.length);for(var d=0;d<a.length;++d)n[a[d]]=d;return n}},{}],85:[function(a,h,p){h.exports=function(a){for(var n=Array(a),d=0;d<a;++d)n[d]=d;return n}},{}],86:[function(a,h,p){h.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,h,p){var t=
{}.toString;h.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],88:[function(a,h,p){function t(a,d,f){for(var b=0,e=0;e<a;++e)d&1<<e&&(b|=1<<f[e]);return b}function n(a,n,k,b,e,m){function q(b,c){A.push("for(","i"+e[b],"=",c,";","i"+e[b],"<","s"+e[b],";","++","i"+e[b],"){")}function h(b){for(var c=0;c<x;++c)A.push("p"+c,"+=","u"+c+"_"+e[b],";");A.push("}")}function p(){for(var b=1;b<1<<C;++b)A.push(w,"=","e"+b,";","e"+b,"=","y"+b,";","y"+b,"=",w,";")}function c(a,d){if(0>
a){for(var k=0;k<x;++k)m[k]?A.push("c"+k+"_0","=","d"+k,".get(","p"+k,");"):A.push("c"+k+"_0","=","d"+k,"[","p"+k,"];");for(var n=[],k=0;k<x;++k)n.push("c"+k+"_0");for(k=0;k<b;++k)n.push("x"+k);A.push("b0","=",g,"[",v,"]=phase(",n.join(),");");for(n=1;n<1<<C;++n)A.push("b"+n,"=",g,"[",v,"+","e"+n,"];");k=[];for(n=1;n<1<<C;++n)k.push("(b0!==b"+n+")");A.push("if(",k.join("||"),"){");for(var r=[],k=0;k<C;++k)r.push("i"+k);for(k=0;k<x;++k)for(r.push("c"+k+"_0"),n=1;n<1<<C;++n)m[k]?A.push("c"+k+"_"+n,
"=","d"+k,".get(","p"+k,"+","d"+k+"_"+n,");"):A.push("c"+k+"_"+n,"=","d"+k,"[","p"+k,"+","d"+k+"_"+n,"];"),r.push("c"+k+"_"+n);for(k=0;k<1<<C;++k)r.push("b"+k);for(k=0;k<b;++k)r.push("x"+k);A.push("vertex(",r.join(),");","v0","=",f,"[",v,"]=",l,"++;");k=(1<<C)-1;r="b"+k;for(n=0;n<C;++n)if(0===(d&~(1<<n))){for(var u=k^1<<n,t="b"+u,w=[],y=u;0<y;y=y-1&u)w.push(f+"["+v+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)n&1?w.push("c"+y+"_"+k,"c"+y+"_"+u):w.push("c"+y+"_"+u,"c"+y+"_"+k);n&1?w.push(r,t):w.push(t,
r);for(y=0;y<b;++y)w.push("x"+y);A.push("if(",r,"!==",t,"){","face(",w.join(),")}")}A.push("}",v,"+=1;")}else{for(n=a-1;0<=n;--n)q(n,0);k=[];for(n=0;n<x;++n)m[n]?k.push("d"+n+".get("+("p"+n)+")"):k.push("d"+n+"["+("p"+n)+"]");for(n=0;n<b;++n)k.push("x"+n);A.push(g,"[",v,"++]=phase(",k.join(),");");for(n=0;n<a;++n)h(n);for(n=0;n<x;++n)A.push("p"+n,"+=","u"+n+"_"+e[a],";");A.push("if(","s"+e[a],">0){","i"+e[a],"=1;");c(a-1,d|1<<e[a]);for(n=0;n<x;++n)A.push("p"+n,"+=","u"+n+"_"+e[a],";");a===C-1&&(A.push(v,
"=0;"),p());q(a,2);c(a-1,d);a===C-1&&(A.push("if(","i"+e[C-1],"&1){",v,"=0;}"),p());h(a);A.push("}")}}var x=m.length,C=e.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var F="extractContour"+e.join("_"),A=[],B=[],P=[],I=0;I<x;++I)P.push("a"+I);for(I=0;I<b;++I)P.push("x"+I);for(I=0;I<C;++I)B.push("s"+I+"=a0.shape["+I+"]|0");for(I=0;I<x;++I){B.push("d"+I+"="+("a"+I)+".data","o"+I+"="+("a"+I)+".offset|0");for(var D=0;D<C;++D)B.push("t"+I+"_"+D+"="+("a"+I)+".stride["+
D+"]|0")}for(I=0;I<x;++I)for(B.push("p"+I+"="+("o"+I)),B.push("c"+I+"_0"),D=1;D<1<<C;++D){for(var N=[],K=0;K<C;++K)D&1<<K&&N.push("-"+("t"+I+"_"+K));B.push("d"+I+"_"+D+"=("+N.join("")+")|0");B.push("c"+I+"_"+D+"=0")}for(I=0;I<x;++I)for(D=0;D<C;++D)K=["t"+I+"_"+e[D]],0<D&&K.push("t"+I+"_"+e[D-1]+"*"+("s"+e[D-1])),B.push("u"+I+"_"+e[D]+"=("+K.join("-")+")|0");for(I=0;I<C;++I)B.push("i"+I+"=0");B.push(l+"=0");D=["2"];for(I=C-2;0<=I;--I)D.push("s"+e[I]);B.push(y+"=("+D.join("*")+")|0",g+"=mallocUint32("+
y+")",f+"=mallocUint32("+y+")",v+"=0");B.push("b0=0");for(D=1;D<1<<C;++D){I=[];N=[];for(K=0;K<C;++K)D&1<<K&&(0===N.length?I.push("1"):I.unshift(N.join("*"))),N.push("s"+e[K]);K="";0>I[0].indexOf("s"+e[C-2])&&(K="-");N=t(C,D,e);B.push("e"+N+"=(-"+I.join("-")+")|0","y"+N+"=("+K+I.join("-")+")|0","b"+N+"=0")}B.push("v0=0",w+"=0");c(C-1,0);A.push("freeUint32(",f,");freeUint32(",g,");");F=["'use strict';function ",F,"(",P.join(),"){var ",B.join(),";",A.join(""),"}return ",F].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",F))(a,n,k,d.mallocUint32,d.freeUint32)}var d=a("typedarray-pool");h.exports=function(a){function d(b){throw Error("ndarray-extract-contour: "+b);}"object"!==typeof a&&d("Must specify arguments");var f=a.order;Array.isArray(f)||d("Must specify order");var b=a.arrayArguments||1;1>b&&d("Must have at least one array argument");var e=a.scalarArguments||0;0>e&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");
"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var m=a.getters||[],g=Array(b),l=0;l<b;++l)0<=m.indexOf(l)?g[l]=!0:g[l]=!1;return n(a.vertex,a.cell,a.phase,e,f,g)};var f="V",g="P",l="N",y="Q",v="X",w="T"},{"typedarray-pool":121}],89:[function(a,h,p){function t(a,d){return a[0]-d[0]}function n(){var a=this.stride,d=Array(a.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(a[f]),f];d.sort(t);a=Array(d.length);for(f=
0;f<a.length;++f)a[f]=d[f][1];return a}function d(a,d){var f=["View",d,"d",a].join("");0>d&&(f="View_Nil"+a);var k="generic"===a;if(-1===d){var b,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===d)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(k?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(k?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(v[a][0]);b=["'use strict'"];var e=g(d),m=e.map(function(b){return"i"+b}),l="this.offset+"+e.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),h=e.map(function(b){return"b"+b}).join(","),p=e.map(function(b){return"c"+b}).join(",");b.push("function "+
f+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);b.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+e.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===d?b.push("proto.order=[0]"):(b.push("Object.defineProperty(proto,'order',{get:"),4>d?(b.push("function "+f+"_order(){"),2===d?b.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&b.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):b.push("ORDER})"));b.push("proto.set=function "+f+"_set("+m.join(",")+",v){");k?b.push("return this.data.set("+l+",v)}"):b.push("return this.data["+l+"]=v}");b.push("proto.get=function "+f+"_get("+m.join(",")+"){");k?b.push("return this.data.get("+
l+")}"):b.push("return this.data["+l+"]}");b.push("proto.index=function "+f+"_index(",m.join(),"){return "+l+"}");b.push("proto.hi=function "+f+"_hi("+m.join(",")+"){return new "+f+"(this.data,"+e.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+e.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");k=e.map(function(b){return"a"+b+"=this.shape["+b+"]"});l=e.map(function(b){return"c"+b+"=this.stride["+b+"]"});b.push("proto.lo=function "+
f+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+k.join(",")+","+l.join(","));for(k=0;k<d;++k)b.push("if(typeof i"+k+"==='number'&&i"+k+">=0){d=i"+k+"|0;b+=c"+k+"*d;a"+k+"-=d}");b.push("return new "+f+"(this.data,"+e.map(function(b){return"a"+b}).join(",")+","+e.map(function(b){return"c"+b}).join(",")+",b)}");b.push("proto.step=function "+f+"_step("+m.join(",")+"){var "+e.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+e.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(k=0;k<d;++k)b.push("if(typeof i"+k+"==='number'){d=i"+k+"|0;if(d<0){c+=b"+k+"*(a"+k+"-1);a"+k+"=ceil(-a"+k+"/d)}else{a"+k+"=ceil(a"+k+"/d)}b"+k+"*=d}");b.push("return new "+f+"(this.data,"+e.map(function(b){return"a"+b}).join(",")+","+e.map(function(b){return"b"+b}).join(",")+",c)}");l=Array(d);h=Array(d);for(k=0;k<d;++k)l[k]="a[i"+k+"]",h[k]="b[i"+k+"]";b.push("proto.transpose=function "+f+"_transpose("+m+"){"+m.map(function(b,a){return b+"=("+b+"===undefined?"+
a+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+l.join(",")+","+h.join(",")+",this.offset)}");b.push("proto.pick=function "+f+"_pick("+m+"){var a=[],b=[],c=this.offset");for(k=0;k<d;++k)b.push("if(typeof i"+k+"==='number'&&i"+k+">=0){c=(c+this.stride["+k+"]*i"+k+")|0}else{a.push(this.shape["+k+"]);b.push(this.stride["+k+"])}");b.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");b.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+e.map(function(b){return"shape["+b+"]"}).join(",")+","+e.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",b.join("\n"));return f(v[a],n)}function f(a){if(l(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var g=a("iota-array"),l=a("is-buffer"),y="undefined"!==typeof Float64Array,v={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in v)v[a].push(d(a,-1))});h.exports=function(a,g,l,k){if(void 0===a){var b=v.array[0];return b([])}"number"===
typeof a&&(a=[a]);void 0===g&&(g=[a.length]);b=g.length;if(void 0===l){l=Array(b);for(var e=b-1,m=1;0<=e;--e)l[e]=m,m*=g[e]}if(void 0===k)for(e=k=0;e<b;++e)0>l[e]&&(k-=(g[e]-1)*l[e]);e=f(a);for(m=v[e];m.length<=b+1;)m.push(d(e,m.length-1));b=m[b+1];return b(a,g,l,k)}},{"iota-array":85,"is-buffer":86}],90:[function(a,h,p){var t=a("double-bits"),n=Math.pow(2,-1074);h.exports=function(a,f){if(isNaN(a)||isNaN(f))return NaN;if(a===f)return a;if(0===a)return 0>f?-n:n;var g=t.hi(a),l=t.lo(a);f>a===0<a?4294967295===
l?(g+=1,l=0):l+=1:0===l?(l=4294967295,--g):--l;return t.pack(l,g)}},{"double-bits":73}],91:[function(a,h,p){h.exports=function(a){var f=a.length;if(f<t)for(var g=1,l=0;l<f;++l)for(var h=0;h<l;++h)if(a[l]<a[h])g=-g;else{if(a[l]===a[h])return 0}else{for(var p=n.mallocUint8(f),l=0;l<f;++l)p[l]=0;g=1;for(l=0;l<f;++l)if(!p[l]){var w=1;p[l]=1;for(h=a[l];h!==l;h=a[h]){if(p[h])return n.freeUint8(p),0;w+=1;p[h]=1}w&1||(g=-g)}n.freeUint8(p)}return g};var t=32,n=a("typedarray-pool")},{"typedarray-pool":121}],
92:[function(a,h,p){var t=a("typedarray-pool"),n=a("invert-permutation");p.rank=function(a){var f=a.length;switch(f){case 0:case 1:return 0;case 2:return a[1]}var g=t.mallocUint32(f),l=t.mallocUint32(f),h=0,p;n(a,l);for(p=0;p<f;++p)g[p]=a[p];for(p=f-1;0<p;--p)f=l[p],a=g[p],g[p]=g[f],g[f]=a,l[p]=l[a],l[a]=f,h=(h+a)*p;t.freeUint32(l);t.freeUint32(g);return h};p.unrank=function(a,f,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(f?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
f?[0,1]:[1,0]}g=g||Array(a);var l,n,h=1;g[0]=0;for(n=1;n<a;++n)g[n]=n,h=h*n|0;for(n=a-1;0<n;--n)a=f/h|0,f=f-a*h|0,h=h/n|0,l=g[n]|0,g[n]=g[a]|0,g[a]=l|0;return g}},{"invert-permutation":84,"typedarray-pool":121}],93:[function(a,h,p){h.exports=function(a,d){function f(b,a){var d=w[a][b[a]];d.splice(d.indexOf(b),1)}function g(b,a,k){var g,l,c;for(l=0;2>l;++l)if(0<w[l][a].length){g=w[l][a][0];c=l;break}l=g[c^1];for(var n=0;2>n;++n)for(var h=w[n][a],r=0;r<h.length;++r){var u=h[r],p=u[n^1];0<t(d[b],d[a],
d[l],d[p])&&(g=u,l=p,c=n)}if(k)return l;g&&f(g,c);return l}function l(b,a){var k=w[a][b][0],l=[b];f(k,a);for(k=k[a^1];;){for(;k!==b;)l.push(k),k=g(l[l.length-2],k,!1);if(0===w[0][b].length+w[1][b].length)break;var k=l[l.length-1],n=b,c=l[1],h=g(k,n,!0);if(0>t(d[k],d[n],d[c],d[h]))break;l.push(b);k=g(k,n)}return l}for(var h=d.length|0,p=a.length,w=[Array(h),Array(h)],u=0;u<h;++u)w[0][u]=[],w[1][u]=[];for(u=0;u<p;++u){var r=a[u];w[0][r[0]].push(r);w[1][r[1]].push(r)}p=[];for(u=0;u<h;++u)0===w[0][u].length+
w[1][u].length&&p.push([u]);for(u=0;u<h;++u)for(r=0;2>r;++r){for(var k=[];0<w[r][u].length;){var b=l(u,r);b[1]===b[b.length-1]?k.push.apply(k,b):(0<k.length&&p.push(k),k=b)}0<k.length&&p.push(k)}return p};var t=a("compare-angle")},{"compare-angle":68}],94:[function(a,h,p){h.exports=function(a,d){for(var f=t(a,d.length),g=Array(d.length),l=Array(d.length),h=[],p=0;p<d.length;++p){var w=f[p].length;l[p]=w;g[p]=!0;1>=w&&h.push(p)}for(;0<h.length;)for(w=h.pop(),g[w]=!1,w=f[w],p=0;p<w.length;++p){var u=
w[p];0===--l[u]&&h.push(u)}f=Array(d.length);l=[];for(p=0;p<d.length;++p)g[p]?(w=l.length,f[p]=w,l.push(d[p])):f[p]=-1;h=[];for(p=0;p<a.length;++p)w=a[p],g[w[0]]&&g[w[1]]&&h.push([f[w[0]],f[w[1]]]);return[h,l]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":75}],95:[function(a,h,p){function t(a,d){for(var f=Array(a),b=0;b<a;++b)f[b]=d;return f}function n(a){for(var d=Array(a),f=0;f<a;++f)d[f]=[];return d}h.exports=function(a,h){function k(b){for(var a=b.length,c=0;c<a;++c)if(!D[b[c]])return!1;
return!0}var b=w(a,h);a=b[0];h=b[1];for(var e=h.length,m=d(a,h.length),q=0;q<e;++q)if(1===m[q].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=f(a,h),m=m.filter(function(b){for(var a=b.length,c=[0],d=0;d<a;++d)var e=h[b[d]],f=h[b[(d+1)%a]],m=l(-e[0],e[1]),k=l(-e[0],f[1]),e=l(f[0],e[1]),f=l(f[0],f[1]),c=y(c,y(y(m,k),y(e,f)));return 0<c[c.length-1]}),b=m.length,p=Array(b),E=Array(b),q=0;q<b;++q){p[q]=q;var c=Array(b),x=m[q].map(function(b){return h[b]}),C=g([x]),F=
0,A=0;a:for(;A<b;++A)if(c[A]=0,q!==A){for(var x=m[A],B=x.length,P=0;P<B;++P){var I=C(h[x[P]]);if(0!==I){0>I&&(c[A]=1,F+=1);continue a}}c[A]=1;F+=1}E[q]=[F,q,c]}E.sort(function(b,a){return a[0]-b[0]});for(q=0;q<b;++q)for(c=E[q],x=c[1],B=c[2],A=0;A<b;++A)B[A]&&(p[A]=x);E=n(b);for(q=0;q<b;++q)E[q].push(p[q]),E[p[q]].push(q);for(var c={},D=t(e,!1),q=0;q<b;++q)for(x=m[q],B=x.length,A=0;A<B;++A)e=x[A],C=x[(A+1)%B],F=Math.min(e,C)+":"+Math.max(e,C),F in c?(F=c[F],E[F].push(q),E[q].push(F),D[e]=D[C]=!0):
c[F]=q;A=[];e=t(b,-1);for(q=0;q<b;++q)p[q]!==q||k(m[q])?e[q]=-1:(A.push(q),e[q]=0);for(b=[];0<A.length;){q=A.pop();p=E[q];v(p,function(b,a){return b-a});var B=p.length,c=e[q],N;0===c&&(x=m[q],N=[x]);for(q=0;q<B;++q)x=p[q],0<=e[x]||(e[x]=c^1,A.push(x),0===c&&(x=m[x],k(x)||(x.reverse(),N.push(x))));0===c&&b.push(N)}return b};var d=a("edges-to-adjacency-list"),f=a("planar-dual"),g=a("point-in-big-polygon"),l=a("two-product"),y=a("robust-sum"),v=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,
"edges-to-adjacency-list":75,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":119,uniq:123}],96:[function(a,h,p){arguments[4][83][0].apply(p,arguments)},{dup:83}],97:[function(a,h,p){function t(){return!0}function n(a){return function(b,d){var f=a[b];return f?!!f.queryPoint(d,t):!1}}function d(a){for(var b={},d=0;d<a.length;++d){var f=a[d],g=f[0][0],l=f[0][1],f=f[1][1],l=[Math.min(l,f),Math.max(l,f)];g in b?b[g].push(l):b[g]=[l]}a={};g=Object.keys(b);for(d=0;d<g.length;++d)a[g[d]]=
u(b[g[d]]);return n(a)}function f(a,b){return function(d){var f=r.le(b,d[0]);if(0>f)return 1;var g=a[f];if(!g)if(0<f&&b[f]===d[0])g=a[f-1];else return 1;for(f=1;g;){var l=g.key,n=v(d,l[0],l[1]);if(l[0][0]<l[1][0])if(0>n)g=g.left;else if(0<n)f=-1,g=g.right;else return 0;else if(0<n)g=g.left;else if(0>n)f=1,g=g.right;else return 0}return f}}function g(a){return 1}function l(a){return function(b){return a(b[0],b[1])?0:1}}function y(a,b){return function(d){return a(d[0],d[1])?0:b(d)}}h.exports=function(a){for(var b=
a.length,e=[],m=[],n=0;n<b;++n)for(var h=a[n],r=h.length,c=r-1,p=0;p<r;c=p++){var c=h[c],u=h[p];c[0]===u[0]?m.push([c,u]):e.push([c,u])}if(0===e.length)return 0===m.length?g:l(d(m));a=w(e);a=f(a.slabs,a.coordinates);return 0===m.length?a:y(d(m),a)};var v=a("robust-orientation")[3],w=a("slab-decomposition"),u=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":82,"robust-orientation":103,"slab-decomposition":116}],98:[function(a,h,p){var t=a("big-rat/add");
h.exports=function(a,d){for(var f=a.length,g=Array(f),l=0;l<f;++l)g[l]=t(a[l],d[l]);return g}},{"big-rat/add":34}],99:[function(a,h,p){h.exports=function(a){for(var d=Array(a.length),f=0;f<a.length;++f)d[f]=t(a[f]);return d};var t=a("big-rat")},{"big-rat":37}],100:[function(a,h,p){var t=a("big-rat"),n=a("big-rat/mul");h.exports=function(a,f){for(var g=t(f),l=a.length,h=Array(l),p=0;p<l;++p)h[p]=n(a[p],g);return h}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,h,p){var t=a("big-rat/sub");h.exports=
function(a,d){for(var f=a.length,g=Array(f),l=0;l<f;++l)g[l]=t(a[l],d[l]);return g}},{"big-rat/sub":49}],102:[function(a,h,p){function t(b,a){for(var d=Array(b.length-1),f=1;f<b.length;++f)for(var k=d[f-1]=Array(b.length-1),g=0,c=0;g<b.length;++g)g!==a&&(k[c++]=b[f][g]);return d}function n(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",n(b.slice(0,a)),",",n(b.slice(a)),")"].join("")}function d(b,a){if("m"===b.charAt(0)){if("w"===
a.charAt(0)){var f=b.split("[");return["w",a.substr(1),"m",f[0].substr(1)].join("")}return["prod(",b,",",a,")"].join("")}return d(a,b)}function f(b){if(2===b.length)return[["diff(",d(b[0][0],b[1][1]),",",d(b[1][0],b[0][1]),")"].join("")];for(var a=[],m=0;m<b.length;++m)a.push(["scale(",n(f(t(b,m))),",",m&1?"-":"",b[0][m],")"].join(""));return a}function g(b,a){for(var d=[],f=0;f<a-2;++f)d.push(["prod(m",b,"[",f,"],m",b,"[",f,"])"].join(""));return n(d)}function l(b){for(var a=[],d=[],k=Array(b),l=
0;l<b;++l){k[l]=Array(b);for(var h=0;h<b;++h)k[l][h]=["m",h,"[",b-l-2,"]"].join("")}for(l=0;l<b;++l)k[0][l]="1",k[b-1][l]="w"+l;for(l=0;l<b;++l)0===(l&1)?a.push.apply(a,f(t(k,l))):d.push.apply(d,f(t(k,l)));a=n(a);d=n(d);k="exactInSphere"+b;h=[];for(l=0;l<b;++l)h.push("m"+l);h=["function ",k,"(",h.join(),"){"];for(l=0;l<b;++l){h.push("var w",l,"=",g(l,b),";");for(var c=0;c<b;++c)c!==l&&h.push("var w",l,"m",c,"=scale(w",l,",m",c,"[0]);")}h.push("var p=",a,",n=",d,",d=diff(p,n);return d[d.length-1];}return ",
k);return(new Function("sum","diff","prod","scale",h.join("")))(w,u,v,r)}function y(b){var a=k[b.length];a||(a=k[b.length]=l(b.length));return a.apply(void 0,b)}var v=a("two-product"),w=a("robust-sum"),u=a("robust-subtract"),r=a("robust-scale"),k=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=k.length;)k.push(l(k.length));for(var b=[],a=["slow"],d=0;6>=d;++d)b.push("a"+d),a.push("o"+d);for(var f=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
d=2;6>=d;++d)f.push("case ",d,":return o",d,"(",b.slice(0,d).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");a.push(f.join(""));b=Function.apply(void 0,a);h.exports=b.apply(void 0,[y].concat(k));for(d=0;6>=d;++d)h.exports[d]=k[d]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],103:[function(a,h,p){function t(b,a){for(var d=Array(b.length-1),f=1;f<b.length;++f)for(var k=
d[f-1]=Array(b.length-1),g=0,c=0;g<b.length;++g)g!==a&&(k[c++]=b[f][g]);return d}function n(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",n(b.slice(0,a)),",",n(b.slice(a)),")"].join("")}function d(b){if(2===b.length)return[["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("")];for(var a=[],f=0;f<b.length;++f)a.push(["scale(",n(d(t(b,f))),",",f&1?"-":"",b[0][f],")"].join(""));return a}function f(b){for(var a=
[],f=[],k=Array(b),g=0;g<b;++g){k[g]=Array(b);for(var h=0;h<b;++h)k[g][h]=["m",h,"[",b-g-1,"]"].join("")}g=[];for(h=0;h<b;++h)0===(h&1)?a.push.apply(a,d(t(k,h))):f.push.apply(f,d(t(k,h))),g.push("m"+h);a=n(a);f=n(f);b="orientation"+b+"Exact";b=["function ",b,"(",g.join(),"){var p=",a,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",b].join("");return(new Function("sum","prod","scale","sub",b))(y,l,v,w)}function g(b){var a=k[b.length];a||(a=k[b.length]=f(b.length));return a.apply(void 0,b)}var l=
a("two-product"),y=a("robust-sum"),v=a("robust-scale"),w=a("robust-subtract"),u=f(3),r=f(4),k=[function(){return 0},function(){return 0},function(b,a){return a[0]-b[0]},function(b,a,d){var f=(b[1]-d[1])*(a[0]-d[0]),k=(b[0]-d[0])*(a[1]-d[1]),g=f-k;if(0<f){if(0>=k)return g;f+=k}else if(0>f){if(0<=k)return g;f=-(f+k)}else return g;f*=3.3306690738754716E-16;return g>=f||g<=-f?g:u(b,a,d)},function(b,a,d,f){var k=b[0]-f[0],g=a[0]-f[0],c=d[0]-f[0],l=b[1]-f[1],h=a[1]-f[1],n=d[1]-f[1],p=b[2]-f[2],u=a[2]-f[2],
t=d[2]-f[2],v=g*n,w=c*h,c=c*l,n=k*n,k=k*h,l=g*l,g=p*(v-w)+u*(c-n)+t*(k-l),p=7.771561172376103E-16*((Math.abs(v)+Math.abs(w))*Math.abs(p)+(Math.abs(c)+Math.abs(n))*Math.abs(u)+(Math.abs(k)+Math.abs(l))*Math.abs(t));return g>p||-g>p?g:r(b,a,d,f)}];(function(){for(;5>=k.length;)k.push(f(k.length));for(var b=[],a=["slow"],d=0;5>=d;++d)b.push("a"+d),a.push("o"+d);for(var l=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;5>=d;++d)l.push("case ",d,":return o",
d,"(",b.slice(0,d).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");a.push(l.join(""));b=Function.apply(void 0,a);h.exports=b.apply(void 0,[g].concat(k));for(d=0;5>=d;++d)h.exports[d]=k[d]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],104:[function(a,h,p){var t=a("robust-sum"),n=a("robust-scale");h.exports=function(a,f){if(1===a.length)return n(f,a[0]);if(1===
f.length)return n(a,f[0]);if(0===a.length||0===f.length)return[0];var g=[0];if(a.length<f.length)for(var l=0;l<a.length;++l)g=t(g,n(f,a[l]));else for(l=0;l<f.length;++l)g=t(g,n(a,f[l]));return g}},{"robust-scale":105,"robust-sum":108}],105:[function(a,h,p){var t=a("two-product"),n=a("two-sum");h.exports=function(a,f){var g=a.length;if(1===g)return g=t(a[0],f),g[0]?g:[g[1]];var l=Array(2*g),h=[.1,.1],p=[.1,.1],w=0;t(a[0],f,h);h[0]&&(l[w++]=h[0]);for(var u=1;u<g;++u){t(a[u],f,p);n(h[1],p[0],h);h[0]&&
(l[w++]=h[0]);var r=p[1],k=h[1],b=r+k,r=k-(b-r);h[1]=b;r&&(l[w++]=r)}h[1]&&(l[w++]=h[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":119,"two-sum":120}],106:[function(a,h,p){h.exports=function(a,d,f,g){var l=t(a,f,g),h=t(d,f,g);if(0<l&&0<h||0>l&&0>h)return!1;var p=t(f,a,d),w=t(g,a,d);if(0<p&&0<w||0>p&&0>w)return!1;if(0===l&&0===h&&0===p&&0===w){a:{for(l=0;2>l;++l){var h=a[l],p=d[l],w=Math.max(h,p),u=f[l],r=g[l],k=Math.min(u,r);if(Math.max(u,r)<Math.min(h,p)||w<k){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,h,p){h.exports=function(a,h){var d=a.length|0,f=h.length|0;if(1===d&&1===f){var f=a[0],g=-h[0],d=f+g,l=d-f,d=(f=f-(d-l)+(g-l))?[f,d]:[d];return d}var g=Array(d+f),p=l=0,v=0,w=Math.abs,u=a[p],r=w(u),k=-h[v],b=w(k),e,m;r<b?(m=u,p+=1,p<d&&(u=a[p],r=w(u))):(m=k,v+=1,v<f&&(k=-h[v],b=w(k)));p<d&&r<b||v>=f?(e=u,p+=1,p<d&&(u=a[p],r=w(u))):(e=k,v+=1,v<f&&(k=-h[v],b=w(k)));var q=e+m;m-=q-e;for(var z=q,E;p<d&&v<f;)r<b?(e=u,p+=1,p<
d&&(u=a[p],r=w(u))):(e=k,v+=1,v<f&&(k=-h[v],b=w(k))),q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e;for(;p<d;)e=u,q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e,p+=1,p<d&&(u=a[p]);for(;v<f;)e=k,q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e,v+=1,v<f&&(k=-h[v]);m&&(g[l++]=m);z&&(g[l++]=z);l||(g[l++]=0);g.length=l;return g}},{}],108:[function(a,h,p){h.exports=function(a,h){var d=a.length|0,f=h.length|0;if(1===d&&1===f){var f=a[0],
g=h[0],d=f+g,l=d-f,d=(f=f-(d-l)+(g-l))?[f,d]:[d];return d}var g=Array(d+f),p=l=0,v=0,w=Math.abs,u=a[p],r=w(u),k=h[v],b=w(k),e,m;r<b?(m=u,p+=1,p<d&&(u=a[p],r=w(u))):(m=k,v+=1,v<f&&(k=h[v],b=w(k)));p<d&&r<b||v>=f?(e=u,p+=1,p<d&&(u=a[p],r=w(u))):(e=k,v+=1,v<f&&(k=h[v],b=w(k)));var q=e+m;m-=q-e;for(var z=q,E;p<d&&v<f;)r<b?(e=u,p+=1,p<d&&(u=a[p],r=w(u))):(e=k,v+=1,v<f&&(k=h[v],b=w(k))),q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e;for(;p<d;)e=u,q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=
z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e,p+=1,p<d&&(u=a[p]);for(;v<f;)e=k,q=e+m,e=q-e,(e=m-e)&&(g[l++]=e),e=z+q,E=e-z,m=e-E,q-=E,z-=m,m=z+q,z=e,v+=1,v<f&&(k=h[v]);m&&(g[l++]=m);z&&(g[l++]=z);l||(g[l++]=0);g.length=l;return g}},{}],109:[function(a,h,p){h.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,h,p){arguments[4][52][0].apply(p,arguments)},{dup:52}],111:[function(a,h,p){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";
h.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var d=this.roots;d[a]!==a;){var f=d[a];d[a]=d[f];a=f}return a};t.prototype.link=function(a,d){var f=this.find(a),g=this.find(d);if(f!==g){var l=this.ranks,h=this.roots,p=l[f],t=l[g];p<t?h[f]=g:t<p?h[g]=f:(h[g]=f,++l[f])}}},{}],112:[function(a,h,p){function t(a,d){var f=a.length,b=a.length-d.length,
e=Math.min;if(b)return b;switch(f){case 0:return 0;case 1:return a[0]-d[0];case 2:return(f=a[0]+a[1]-d[0]-d[1])?f:e(a[0],a[1])-e(d[0],d[1]);case 3:var b=a[0]+a[1],g=d[0]+d[1];if(f=b+a[2]-(g+d[2]))return f;var l=e(a[0],a[1]),h=e(d[0],d[1]);return(f=e(l,a[2])-e(h,d[2]))?f:e(l+a[2],b)-e(h+d[2],g);default:e=a.slice(0);e.sort();g=d.slice(0);g.sort();for(l=0;l<f;++l)if(b=e[l]-g[l])return b;return 0}}function n(a,d){return t(a[0],d[0])}function d(a,d){if(d){for(var f=a.length,b=Array(f),e=0;e<f;++e)b[e]=
[a[e],d[e]];b.sort(n);for(e=0;e<f;++e)a[e]=b[e][0],d[e]=b[e][1]}else a.sort(t);return a}function f(a){if(0===a.length)return[];for(var d=1,f=a.length,b=1;b<f;++b){var e=a[b];t(e,a[b-1])&&(b===d?d++:a[d++]=e)}a.length=d;return a}function g(a,d){for(var f=0,b=a.length-1,e=-1;f<=b;){var g=f+b>>1,l=t(a[g],d);0>=l?(0===l&&(e=g),f=g+1):0<l&&(b=g-1)}return e}function l(a,d){for(var f=Array(a.length),b=0,e=f.length;b<e;++b)f[b]=[];for(var e=[],b=0,l=d.length;b<l;++b)for(var h=d[b],n=h.length,p=1,c=1<<n;p<
c;++p){e.length=v.popCount(p);for(var w=0,y=0;y<n;++y)p&1<<y&&(e[w++]=h[y]);w=g(a,e);if(!(0>w))for(;!(f[w++].push(b),w>=a.length||0!==t(a[w],e)););}return f}function y(a,f){if(0>f)return[];for(var k=[],b=(1<<f+1)-1,e=0;e<a.length;++e)for(var g=a[e],l=b;l<1<<g.length;l=v.nextCombination(l)){for(var h=Array(f+1),n=0,c=0;c<g.length;++c)l&1<<c&&(h[n++]=g[c]);k.push(h)}return d(k)}"use restrict";var v=a("bit-twiddle"),w=a("union-find");p.dimension=function(a){for(var d=0,f=Math.max,b=0,e=a.length;b<e;++b)d=
f(d,a[b].length);return d-1};p.countVertices=function(a){for(var d=-1,f=Math.max,b=0,e=a.length;b<e;++b)for(var g=a[b],l=0,h=g.length;l<h;++l)d=f(d,g[l]);return d+1};p.cloneCells=function(a){for(var d=Array(a.length),f=0,b=a.length;f<b;++f)d[f]=a[f].slice(0);return d};p.compareCells=t;p.normalize=d;p.unique=f;p.findCell=g;p.incidence=l;p.dual=function(a,d){if(!d)return l(f(y(a,0)),a,0);for(var k=Array(d),b=0;b<d;++b)k[b]=[];for(var b=0,e=a.length;b<e;++b)for(var g=a[b],h=0,n=g.length;h<n;++h)k[g[h]].push(b);
return k};p.explode=function(a){for(var f=[],k=0,b=a.length;k<b;++k)for(var e=a[k],g=e.length|0,l=1,h=1<<g;l<h;++l){for(var n=[],c=0;c<g;++c)l>>>c&1&&n.push(e[c]);f.push(n)}return d(f)};p.skeleton=y;p.boundary=function(a){for(var f=[],k=0,b=a.length;k<b;++k)for(var e=a[k],g=0,l=e.length;g<l;++g){for(var h=Array(e.length-1),n=0,c=0;n<l;++n)n!==g&&(h[c++]=e[n]);f.push(h)}return d(f)};p.connectedComponents=function(a,l){if(l){for(var k=new w(l),b=0;b<a.length;++b)for(var e=a[b],m=0;m<e.length;++m)for(var h=
m+1;h<e.length;++h)k.link(e[m],e[h]);e=[];m=k.ranks;for(b=0;b<m.length;++b)m[b]=-1;for(b=0;b<a.length;++b)h=k.find(a[b][0]),0>m[h]?(m[h]=e.length,e.push([a[b].slice(0)])):e[m[h]].push(a[b].slice(0));return e}k=f(d(y(a,0)));b=new w(k.length);for(e=0;e<a.length;++e)for(m=a[e],h=0;h<m.length;++h)for(var n=g(k,[m[h]]),p=h+1;p<m.length;++p)b.link(n,g(k,[m[p]]));m=[];h=b.ranks;for(e=0;e<h.length;++e)h[e]=-1;for(e=0;e<a.length;++e)n=b.find(g(k,[a[e][0]])),0>h[n]?(h[n]=m.length,m.push([a[e].slice(0)])):m[h[n]].push(a[e].slice(0));
return m}},{"bit-twiddle":110,"union-find":111}],113:[function(a,h,p){h.exports=function(a,f,g){function l(a){if(c[a])return Infinity;var b=q[a],d=z[a];if(0>b||0>d)return Infinity;b=f[b];d=f[d];return Math.abs(t(f[a],b,d))/Math.sqrt(Math.pow(b[0]-d[0],2)+Math.pow(b[1]-d[1],2))}function h(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function p(a){for(var b=E[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<P){var k=E[A[d]];k<c&&(f=d,c=k)}e<P&&E[A[e]]<c&&(f=e);if(f===a)return a;h(a,f);a=f}}function w(a){for(var b=
E[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[A[c]])h(a,c),a=c;else return a}}function u(){if(0<P){var a=A[0];h(0,P-1);--P;p(0);return a}return-1}function r(a,b){var c=A[a];if(E[c]===b)return a;E[c]=-Infinity;w(a);u();E[c]=b;P+=1;return w(P-1)}function k(a){if(!c[a]){c[a]=!0;var b=q[a];a=z[a];0<=q[a]&&(q[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&r(B[b],l(b));0<=B[a]&&r(B[a],l(a))}}function b(a,b){if(0>a[b])return b;var d=b,e=b;do{var f=a[e];if(!c[e]||0>f||f===e)break;e=f;f=a[e];if(!c[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=b;d!==e;d=a[d])a[d]=e;return e}for(var e=f.length,m=a.length,q=Array(e),z=Array(e),E=Array(e),c=Array(e),x=0;x<e;++x)q[x]=z[x]=-1,E[x]=Infinity,c[x]=!1;for(x=0;x<m;++x){var C=a[x];if(2!==C.length)throw Error("Input must be a graph");var F=C[1],C=C[0];z[C]=-1!==z[C]?-2:F;q[F]=-1!==q[F]?-2:C}for(var A=[],B=Array(e),x=0;x<e;++x)Infinity>(E[x]=l(x))?(B[x]=A.length,A.push(x)):B[x]=-1;for(var P=A.length,x=P>>1;0<=x;--x)p(x);for(;;){x=u();if(0>x||E[x]>g)break;k(x)}g=
[];for(x=0;x<e;++x)c[x]||(B[x]=g.length,g.push(f[x].slice()));var I=[];a.forEach(function(a){var c=b(q,a[0]);a=b(z,a[1]);0<=c&&0<=a&&c!==a&&(c=B[c],a=B[a],c!==a&&I.push([c,a]))});n.unique(n.normalize(I));return{positions:g,edges:I}};var t=a("robust-orientation"),n=a("simplicial-complex")},{"robust-orientation":103,"simplicial-complex":112}],114:[function(a,h,p){function t(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var h=Math.min(f[0][1],f[1][1]),p=Math.max(f[0][1],f[1][1]);return l<h?l-h:g>p?g-p:l-p}a[0][1]<a[1][1]?(p=a[0],h=a[1]):(p=a[1],h=a[0]);return(p=n(l,g,p))?p:(p=n(l,g,h))?p:h-l}h.exports=function(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else return t(f,a);var h,p;if(a[0][0]<a[1][0])h=a[0],p=a[1];else if(a[0][0]>a[1][0])h=a[1],p=a[0];else return-t(a,f);var w=n(g,l,p),u=n(g,l,h);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;
w=n(p,h,l);u=n(p,h,g);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;return l[0]-p[0]};var n=a("robust-orientation")},{"robust-orientation":103}],115:[function(a,h,p){arguments[4][83][0].apply(p,arguments)},{dup:83}],116:[function(a,h,p){function t(a,d,f){this.slabs=a;this.coordinates=d;this.horizontal=f}function n(a,d){return a.y-d}function d(a,f){for(var k=null;a;){var b=a.key,e,g;b[0][0]<b[1][0]?(e=b[0],g=b[1]):(e=b[1],g=b[0]);e=v(e,g,f);if(0>e)a=a.left;else if(0<e)if(f[0]!==
b[1][0])k=a,a=a.right;else{if(b=d(a.right,f))return b;a=a.left}else{if(f[0]!==b[1][0])return a;if(b=d(a.right,f))return b;a=a.left}}return k}function f(a,d,f,b){this.y=a;this.index=d;this.start=f;this.closed=b}function g(a,d,f,b){this.x=a;this.segment=d;this.create=f;this.index=b}h.exports=function(a){for(var d=a.length,k=2*d,b=Array(k),e=0;e<d;++e){var l=a[e],h=l[0][0]<l[1][0];b[2*e]=new g(l[0][0],l,h,e);b[2*e+1]=new g(l[1][0],l,!h,e)}b.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);d=[];l=[];h=[];for(e=0;e<k;){for(var n=b[e].x,p=[];e<k;){var c=b[e];if(c.x!==n)break;e+=1;c.segment[0][0]===c.x&&c.segment[1][0]===c.x?c.create&&(c.segment[0][1]<c.segment[1][1]?(p.push(new f(c.segment[0][1],c.index,!0,!0)),p.push(new f(c.segment[1][1],c.index,!1,!1))):(p.push(new f(c.segment[1][1],c.index,!0,!1)),p.push(new f(c.segment[0][1],c.index,!1,!0)))):a=c.create?a.insert(c.segment,c.index):a.remove(c.segment)}d.push(a.root);
l.push(n);h.push(p)}return new t(d,l,h)};var l=a("binary-search-bounds"),y=a("functional-red-black-tree"),v=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var f=l.le(this.coordinates,a[0]);if(0>f)return-1;var k=d(this.slabs[f],a),b=-1;k&&(b=k.value);if(this.coordinates[f]===a[0]){var e=null;k&&(e=k.key);0<f&&(k=d(this.slabs[f-1],a))&&(e?0<w(k.key,e)&&(e=k.key,b=k.value):(b=k.value,e=k.key));k=this.horizontal[f];if(0<k.length){var g=l.ge(k,a[1],n);if(g<k.length){f=
k[g];if(a[1]===f.y){if(f.closed)return f.index;for(;g<k.length-1&&k[g+1].y===a[1];)if(g+=1,f=k[g],f.closed)return f.index;if(f.y===a[1]&&!f.start){g+=1;if(g>=k.length)return b;f=k[g]}}f.start?e?(a=v(e[0],e[1],[a[0],f.y]),e[0][0]>e[1][0]&&(a=-a),0<a&&(b=f.index)):b=f.index:f.y!==a[1]&&(b=f.index)}}}return b}},{"./lib/order-segments":114,"binary-search-bounds":115,"functional-red-black-tree":76,"robust-orientation":103}],117:[function(a,h,p){function t(a,f){var g=a.length,h=["'use strict';"],p="surfaceNets"+
a.join("_")+"d"+f;h.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&h.push("getters:[0],");for(var r=[],k=[],b=0;b<g;++b)r.push("d"+b),k.push("d"+b);for(b=0;b<1<<g;++b)r.push("v"+b),k.push("v"+b);for(b=0;b<1<<g;++b)r.push("p"+b),k.push("p"+b);r.push("a","b","c");k.push("a","c");h.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(b=0;b<1<<g;++b)r.push("(p"+b+"<<"+b+")");h.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],e=[];128>=1<<(1<<g)?(h.push("switch(m){"),e=h):h.push("switch(m>>>7){");for(b=0;b<1<<(1<<g);++b){128<1<<(1<<g)&&0===b%128&&(0<r.length&&e.push("}}"),e="vExtra"+r.length,h.push("case ",b>>>7,":",e,"(m&0x7f,",k.join(),");break;"),e=["function ",e,"(m,",k.join(),"){switch(m){"],r.push(e));e.push("case ",b&127,":");for(var m=Array(g),q=Array(g),t=Array(g),E=Array(g),c=0,x=0;x<g;++x)m[x]=[],q[x]=[],t[x]=0,E[x]=0;for(x=0;x<1<<g;++x)for(var C=
0;C<g;++C){var F=x^1<<C;if(!(F>x)&&!(b&1<<F)!==!(b&1<<x)){var A=1;b&1<<F?q[C].push("v"+F+"-v"+x):(q[C].push("v"+x+"-v"+F),A=-A);0>A?(m[C].push("-v"+x+"-v"+F),t[C]+=2):(m[C].push("v"+x+"+v"+F),t[C]-=2);c+=1;for(A=0;A<g;++A)A!==C&&(F&1<<A?E[A]+=1:--E[A])}}x=[];for(C=0;C<g;++C)0===m[C].length?x.push("d"+C+"-0.5"):(F="",0>t[C]?F=t[C]+"*c":0<t[C]&&(F="+"+t[C]+"*c"),x.push("d"+C+"-"+(.5+E[C]/c*.5)+"-"+m[C].length/c*.5+"*("+m[C].join("+")+F+")/("+q[C].join("+")+")"));e.push("a.push([",x.join(),"]);","break;")}h.push("}},");
0<r.length&&e.push("}}");k=[];for(b=0;b<1<<g-1;++b)k.push("v"+b);k.push("c0","c1","p0","p1","a","b","c");h.push("cell:function cellFunc(",k.join(),"){");g=d(g-1);h.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",p,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
p,";");for(b=0;b<r.length;++b)h.push(r[b].join(""));return(new Function("genContour",h.join("")))(n)}h.exports=function(a,d){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var h=f(a,d),n=h.length,p=Array(n),r=Array(n),k=0;k<n;++k)p[k]=[h[k]],r[k]=[k];return{positions:p,cells:r}}h=a.order.join()+"-"+a.dtype;n=g[h];d=+d||0;n||(n=g[h]=t(a.order,a.dtype));return n(a,d)};var n=a("ndarray-extract-contour"),d=a("triangulate-hypercube"),f=a("zero-crossings"),g={}},{"ndarray-extract-contour":88,
"triangulate-hypercube":118,"zero-crossings":127}],118:[function(a,h,p){h.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(d(a+1))|0,h=[],p=0;p<g;++p){for(var v=t.unrank(a,p),w=[0],u=0,r=0;r<v.length;++r)u+=1<<v[r],w.push(u);1>n(v)&&(w[0]=u,w[a]=0);h.push(w)}return h};var t=a("permutation-rank"),n=a("permutation-parity"),d=a("gamma")},{gamma:77,"permutation-parity":91,"permutation-rank":92}],119:[function(a,h,p){h.exports=function(a,d,f){var g=a*d,h=t*a,h=h-(h-a);a-=h;
var p=t*d,p=p-(p-d);d-=p;d=a*d-(g-h*p-a*p-h*d);return f?(f[0]=d,f[1]=g,f):[d,g]};var t=+(Math.pow(2,27)+1)},{}],120:[function(a,h,p){h.exports=function(a,h,d){var f=a+h,g=f-a;h-=g;a-=f-g;return d?(d[0]=a+h,d[1]=f,d):[a+h,f]}},{}],121:[function(a,h,p){(function(h,n){function d(a){if(a){var b=q.log2(a.length||a.byteLength);x[b].push(a)}}function f(a){a=q.nextPow2(a);var b=q.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function g(a){return new Uint8Array(f(a),0,a)}function l(a){return new Uint16Array(f(2*
a),0,a)}function y(a){return new Uint32Array(f(4*a),0,a)}function v(a){return new Int8Array(f(a),0,a)}function w(a){return new Int16Array(f(2*a),0,a)}function u(a){return new Int32Array(f(4*a),0,a)}function r(a){return new Float32Array(f(4*a),0,a)}function k(a){return new Float64Array(f(8*a),0,a)}function b(a){return E?new Uint8ClampedArray(f(a),0,a):g(a)}function e(a){return new DataView(f(a),0,a)}function m(a){a=q.nextPow2(a);var b=q.log2(a),b=C[b];return 0<b.length?b.pop():new n(a)}var q=a("bit-twiddle"),
z=a("dup");h.__TYPEDARRAY_POOL||(h.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var E="undefined"!==typeof Uint8ClampedArray,c=h.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=z([32,0]));c.BUFFER||(c.BUFFER=z([32,0]));var x=c.DATA,C=c.BUFFER;p.free=function(a){if(n.isBuffer(a))C[q.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=q.log2(a.length||a.byteLength)|0;x[b].push(a)}};p.freeUint8=p.freeUint16=p.freeUint32=p.freeInt8=p.freeInt16=p.freeInt32=p.freeFloat32=p.freeFloat=p.freeFloat64=p.freeDouble=p.freeUint8Clamped=p.freeDataView=function(a){d(a.buffer)};p.freeArrayBuffer=d;p.freeBuffer=function(a){C[q.log2(a.length)].push(a)};p.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return f(a);switch(c){case "uint8":return g(a);case "uint16":return l(a);case "uint32":return y(a);case "int8":return v(a);
case "int16":return w(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return k(a);case "uint8_clamped":return b(a);case "buffer":return m(a);case "data":case "dataview":return e(a);default:return null}};p.mallocArrayBuffer=f;p.mallocUint8=g;p.mallocUint16=l;p.mallocUint32=y;p.mallocInt8=v;p.mallocInt16=w;p.mallocInt32=u;p.mallocFloat32=p.mallocFloat=r;p.mallocFloat64=p.mallocDouble=k;p.mallocUint8Clamped=b;p.mallocDataView=e;p.mallocBuffer=m;p.clearCache=
function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,x[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:74}],122:[function(a,h,p){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var d=
0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";h.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var d=a,f=this.roots;f[a]!==a;)a=f[a];for(;f[d]!==a;){var g=f[d];f[d]=a;d=g}return a};a.link=function(a,d){var f=this.find(a),g=this.find(d);if(f!==g){var h=this.ranks,p=this.roots,t=h[f],w=h[g];t<w?p[f]=g:w<t?p[g]=f:(p[g]=f,
++h[f])}}},{}],123:[function(a,h,p){h.exports=function(a,h,d){if(0===a.length)return a;if(h){d||a.sort(h);d=1;for(var f=a.length,g=a[0],l=a[0],p=1;p<f;++p)l=g,g=a[p],h(g,l)&&(p===d?d++:a[d++]=g);a.length=d;return a}d||a.sort();h=1;d=a.length;f=a[0];g=a[0];for(l=1;l<d;++l)g=f,f=a[l],f!==g&&(l===h?h++:a[h++]=f);a.length=h;return a}},{}],124:[function(a,h,p){h.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||n,g.context||d,g)};var t=a("./lib/vtext"),n=null,d=null;"undefined"!==
typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,d=n.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,h,p){function t(a,d,f){for(var b=d.textAlign||"start",e=d.textBaseline||"alphabetic",g=[1073741824,1073741824],h=[0,0],l=a.length,n=0;n<l;++n)for(var c=a[n],p=0;2>p;++p)g[p]=Math.min(g[p],c[p])|0,h[p]=Math.max(h[p],c[p])|0;var t=0;switch(b){case "center":t=-.5*(g[0]+h[0]);break;case "right":case "end":t=-h[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
b+"'");}var v=0;switch(e){case "hanging":case "top":v=-g[1];break;case "middle":v=-.5*(g[1]+h[1]);break;case "alphabetic":case "ideographic":v=-3*f;break;case "bottom":v=-h[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var w=1/f;"lineHeight"in d?w*=+d.lineHeight:"width"in d?w=d.width/(h[0]-g[0]):"height"in d&&(w=d.height/(h[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+v)]})}function n(a,d,g,b){a=f(a,128);b=b?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(b.positions,d,g);a=b.edges;b="ccw"===d.orientation;y(g,a);if(d.polygons||d.polygon||d.polyline){d=w(a,g);a=Array(d.length);for(var e=0;e<d.length;++e){for(var h=d[e],n=Array(h.length),p=0;p<h.length;++p){for(var E=h[p],c=Array(E.length),x=0;x<E.length;++x)c[x]=g[E[x]].slice();b&&c.reverse();n[p]=c}a[e]=n}return a}return d.triangles||d.triangulate||d.triangle?{cells:v(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function d(a,d,f){try{return n(a,
d,f,!0)}catch(b){}try{return n(a,d,f,!1)}catch(b){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}h.exports=function(a,f,h,b){var e=b.size||64;h.font=e+"px "+(b.font||"normal");h.textAlign="start";h.textBaseline="alphabetic";h.direction="ltr";var l;l=Math.ceil(h.measureText(a).width+2*e)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var n=3*e;f.height<n&&(f.height=n);
h.fillStyle="#000";h.fillRect(0,0,f.width,f.height);h.fillStyle="#fff";h.fillText(a,e,2*e);a=h.getImageData(0,0,l,n);l=g(a.data,[n,l,4]).pick(-1,-1,0).transpose(1,0);return d(l,b,e)};h.exports.processPixels=d;var f=a("surface-nets"),g=a("ndarray"),l=a("simplify-planar-graph"),y=a("clean-pslg"),v=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:61,"clean-pslg":66,ndarray:89,"planar-graph-to-polyline":95,"simplify-planar-graph":113,"surface-nets":117}],126:[function(a,h,p){h.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":70}],127:[function(a,h,p){h.exports=function(a,d){var f=[];d=+d||0;t(a.hi(a.shape[0]-1),f,d);return f};var t=a("./lib/zc-core")},{"./lib/zc-core":126}],128:[function(a,
h,p){function t(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var n=a("./lib/util/extend"),d=a("./lib/dynamic"),f=a("./lib/util/raf"),g=a("./lib/util/clock"),l=a("./lib/strings"),y=a("./lib/webgl"),v=a("./lib/extension"),w=a("./lib/limits"),u=a("./lib/buffer"),r=a("./lib/elements"),k=a("./lib/texture"),b=a("./lib/renderbuffer"),e=a("./lib/framebuffer"),m=a("./lib/attribute"),q=a("./lib/shader"),z=a("./lib/read"),E=a("./lib/core"),c=a("./lib/stats"),x=a("./lib/timer");h.exports=function(a){function h(){if(0===
Y.length)M&&M.update(),da=null;else{da=f.next(h);D();for(var a=Y.length-1;0<=a;--a){var b=Y[a];b&&b(R,null,0)}J.flush();M&&M.update()}}function p(a){}function B(a){}function P(a){function b(a){var c={},e={};Object.keys(a).forEach(function(b){var f=a[b];d.isDynamic(f)?e[b]=d.unbox(f,b):c[b]=f});return{dynamic:e,"static":c}}function c(a){for(;p.length<a;)p.push(null);return p}var e=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||{}),h=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];
Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var e=aa.compile(h,g,f,e,a),k=e.draw,l=e.batch,m=e.scope,p=[];return n(function(a,b){var d;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function I(){var a=ia.viewport,b=ia.scissor_box;a[0]=a[1]=b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=J.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=J.drawingBufferHeight}function D(){R.tick+=
1;R.time=(g()-Q)/1E3;I();aa.procs.poll()}function N(){I();aa.procs.refresh();M&&M.update()}var K=y(a);if(!K)return null;var J=K.gl;a=J.getContextAttributes();var O=v(J,K);if(!O)return null;var H=l(),G=c(),O=O.extensions,M=x(J,O),Q=g(),V=J.drawingBufferWidth,Z=J.drawingBufferHeight,R={tick:0,time:0,viewportWidth:V,viewportHeight:Z,framebufferWidth:V,framebufferHeight:Z,drawingBufferWidth:V,drawingBufferHeight:Z,pixelRatio:K.pixelRatio},L=w(J,O),W=u(J,G,K),T=r(J,O,W,G),V=m(J,O,L,W,H),X=q(J,H,G,K),U=
k(J,O,L,function(){aa.procs.poll()},R,G,K),S=b(J,O,L,G,K),ba=e(J,O,L,U,S,G),aa=E(J,H,O,L,W,T,U,ba,{},V,X,{elements:null,primitive:4,count:-1,offset:0,instances:-1},R,M,K),H=z(J,ba,aa.procs.poll,R,a,O),ia=aa.next,ca=J.canvas,Y=[],da=null;ca&&(ca.addEventListener("webglcontextlost",p,!1),ca.addEventListener("webglcontextrestored",B,!1));N();a=n(P,{clear:function(a){var b=0;aa.procs.poll();var c=a.color;c&&(J.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(J.clearDepth(+a.depth),
b|=256);"stencil"in a&&(J.clearStencil(a.stencil|0),b|=1024);J.clear(b)},prop:d.define.bind(null,1),context:d.define.bind(null,2),"this":d.define.bind(null,3),draw:P({}),buffer:function(a){return W.create(a,34962)},elements:T.create,texture:U.create2D,cube:U.createCube,renderbuffer:S.create,framebuffer:ba.create,framebufferCube:ba.createCube,attributes:a,frame:function(a){Y.push(a);!da&&0<Y.length&&(da=f.next(h));return{cancel:function(){function b(){var a=t(Y,b);Y[a]=Y[Y.length-1];--Y.length;0>=
Y.length&&da&&(f.cancel(h),da=null)}var c=t(Y,a);Y[c]=b}}},limits:L,hasExtension:function(a){return 0<=L.extensions.indexOf(a.toLowerCase())},read:H,destroy:function(){Y.length=0;da&&(f.cancel(h),da=null);ca&&(ca.removeEventListener("webglcontextlost",p),ca.removeEventListener("webglcontextrestored",B));X.clear();ba.clear();S.clear();U.clear();T.clear();W.clear();M&&M.clear();K.onDestroy()},_gl:J,_refresh:N,poll:function(){D();M&&M.update()},stats:G});K.onDone(null,a);return a}},{"./lib/attribute":2,
"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>