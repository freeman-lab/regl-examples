<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==b.length?{done:!0}:{done:!1,value:b[g++]}}}};
$jscomp.arrayFromIterator=function(b){for(var g,p=[];!(g=b.next()).done;)p.push(g.value);return p};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,g){function p(){}p.prototype=g.prototype;b.prototype=new p;b.prototype.constructor=b;for(var t in g)if($jscomp.global.Object.defineProperties){var q=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);q&&$jscomp.global.Object.defineProperty(b,t,q)}else b[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,g){b instanceof String&&(b=String(b));var p=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},q=(t.next=function(){if(p<b.length){var a=p++;return{value:g(a,b[a]),done:!1}}q.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return q},t);return q};
$jscomp.array.findInternal_=function(b,g,p){b instanceof String&&(b=String(b));for(var t=b.length,q=0;q<t;q++){var a=b[q];if(g.call(p,a,q,b))return{i:q,v:a}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,g,p){g=void 0===g?function(a){return a}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var q;!(q=b.next()).done;)t.push(g.call(p,q.value))}else{q=b.length;for(var a=0;a<q;a++)t.push(g.call(p,b[a]))}return t};$jscomp.array.of=function(b){for(var g=[],p=0;p<arguments.length;++p)g[p-0]=arguments[p];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return[b,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,g,p){var t=this.length;b=Number(b);g=Number(g);p=Number(null!=p?p:t);if(b<g)for(p=Math.min(p,t);g<p;)g in this?this[b++]=this[g++]:(delete this[b++],g++);else for(p=Math.min(p,t+g-b),b+=p-g;p>g;)--p in this?this[--b]=this[p]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,g,p){null!=p&&b.length||(p=this.length||0);p=Number(p);for(g=Number((void 0===g?0:g)||0);g<p;g++)this[g]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,g){return $jscomp.array.findInternal_(this,b,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,g){return $jscomp.array.findInternal_(this,b,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),p=new b($jscomp.makeIterator([[g,"s"]]));if("s"!=p.get(g)||1!=p.size||p.get({x:4})||p.set({x:4},"t")!=p||2!=p.size)return!1;var t=p.entries(),q=t.next();if(q.done||q.value[0]!=g||"s"!=q.value[1])return!1;q=t.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!t.next().done?!1:!0}catch(a){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,g){var p=this.maybeGetEntry_(b),t=p.id,q=p.list,p=p.entry;q||(q=this.data_[t]=[]);p?p.value=g:(p={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:g},q.push(p),this.head_.previous.next=p,this.head_.previous=p,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(b){var g=this.maybeGetEntry_(b);b=g.id;var p=g.list,t=g.index;return(g=g.entry)&&p?(p.splice(t,1),p.length||delete this.data_[b],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var g=$jscomp.Map.getId_(b),p=this.data_[g];if(p)for(var t=0;t<p.length;t++){var q=p[t];if(b!==b&&q.key!==q.key||b===q.key)return{id:g,list:p,index:t,entry:q}}return{id:g,list:p,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,g){for(var p=$jscomp.makeIterator(this.entries()),t=p.next();!t.done;t=p.next())t=t.value,b.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(b){var g=this,p=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(p){for(;p.head!=g.head_;)p=p.previous;for(;p.next!=p.head;)return p=p.next,{done:!1,value:b(p)};p=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,g,p){Object.defineProperty(b,g,{value:String(p)})}:function(b,g,p){b[g]=String(p)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var g=0;0===(b&4294901760)&&(b<<=16,g+=16);0===(b&4278190080)&&(b<<=8,g+=8);0===(b&4026531840)&&(b<<=4,g+=4);0===(b&3221225472)&&(b<<=2,g+=2);0===(b&2147483648)&&g++;return g};$jscomp.math.imul=function(b,g){b=Number(b);g=Number(g);var p=b&65535,t=g&65535;return p*t+((b>>>16&65535)*t+p*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,p=1,t=b,q=0,a=1;q!=t;)g*=b,a*=-1,t=(q=t)+a*g/++p;return t}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,p=1,t=b,q=0;q!=t;)g*=b/++p,t=(q=t)+g;return t}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var g=Math.exp(2*-Math.abs(b)),g=(1-g)/(1+g);return 0>b?-g:g};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var g=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-g:g};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,g,p){for(var t=[],q=2;q<arguments.length;++q)t[q-2]=arguments[q];b=Number(b);g=Number(g);for(var a=Math.max(Math.abs(b),Math.abs(g)),e=$jscomp.makeIterator(t),q=e.next();!q.done;q=e.next())a=Math.max(a,Math.abs(q.value));if(1E100<a||1E-100>a){b/=a;g/=a;e=b*b+g*g;t=$jscomp.makeIterator(t);for(q=t.next();!q.done;q=t.next())q=q.value,q=Number(q)/a,e+=q*q;return Math.sqrt(e)*a}a=b*b+g*g;t=$jscomp.makeIterator(t);for(q=t.next();!q.done;q=t.next())q=q.value,q=Number(q),a+=
q*q;return Math.sqrt(a)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var g=Math.floor(Math.abs(b));return 0>b?-g:g};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var g=Math.pow(Math.abs(b),1/3);return 0>b?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,g){for(var p=[],t=1;t<arguments.length;++t)p[t-1]=arguments[t];p=$jscomp.makeIterator(p);for(t=p.next();!t.done;t=p.next())if(t=t.value)for(var q in t)Object.prototype.hasOwnProperty.call(t,q)&&(b[q]=t[q]);return b};$jscomp.object.is=function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),b=new b($jscomp.makeIterator([g]));if(b.has(g)||1!=b.size||b.add(g)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),p=b.next();if(p.done||p.value[0]!=g||p.value[1]!=g)return!1;p=b.next();return p.done||p.value[0]==g||4!=p.value[0].x||p.value[1]!=p.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(b){b=this.map_["delete"](b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,g){var p=this;this.map_.forEach(function(t){return b.call(g,t,t,p)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,g){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var g=[],p=0;p<arguments.length;++p)g[p-0]=arguments[p];for(var p="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?p+=String.fromCharCode(t):(t-=65536,p+=String.fromCharCode(t>>>10&1023|55296),p+=String.fromCharCode(t&1023|56320))}return p};
$jscomp.string.repeat=function(b){var g=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var p="";b;)if(b&1&&(p+=g),b>>>=1)g+=g;return p};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var g=this.toString(),p=g.length;b=Number(b)||0;if(0<=b&&b<p){b|=0;var t=g.charCodeAt(b);if(55296>t||56319<t||b+1===p)return t;b=g.charCodeAt(b+1);return 56320>b||57343<b?t:1024*(t-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"startsWith");var p=this.toString();b+="";for(var t=p.length,q=b.length,a=Math.max(0,Math.min(g|0,p.length)),e=0;e<q&&a<t;)if(p[a++]!=b[e++])return!1;return e>=q};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,g){$jscomp.string.noRegExp_(b,"endsWith");var p=this.toString();b+="";void 0===g&&(g=p.length);for(var t=Math.max(0,Math.min(g|0,p.length)),q=b.length;0<q&&0<t;)if(p[--t]!=b[--q])return!1;return 0>=q};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,p,t){function q(e,l){if(!p[e]){if(!g[e]){var y="function"==typeof require&&require;if(!l&&y)return y(e,!0);if(a)return a(e,!0);y=Error("Cannot find module '"+e+"'");throw y.code="MODULE_NOT_FOUND",y;}y=p[e]={exports:{}};g[e][0].call(y.exports,function(a){var l=g[e][1][a];return q(l?l:a)},y,y.exports,e$$0,g,p,t)}return p[e].exports}for(var a="function"==typeof require&&require,e=0;e<t.length;e++)q(t[e]);return q})({1:[function(b,g,p){g=b("../regl")();p=b("vectorize-text");var t=b("gl-mat4/perspective"),
q=b("gl-mat4/lookAt");b=p("hello regl!",{textAlign:"center",textBaseline:"middle"});var a=g.texture({copy:!0,min:"linear",mag:"linear"}),e=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:a,t:function(a){return.001*a.tick}},depth:{enable:!1},count:3}),k=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:b.positions},
elements:b.edges,uniforms:{t:function(a){return.01*a.tick},view:function(a){a=.01*a.tick;return q([],[5*Math.sin(a),0,-5*Math.cos(a)],[0,0,0],[0,-1,0])},projection:function(a){return t([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){e();k();a({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":79,"gl-mat4/perspective":80,"vectorize-text":124}],2:[function(b,g,p){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(b,a,e,k,l){b=e.maxAttributes;a=Array(b);for(e=0;e<b;++e)a[e]=new t;return{Record:t,scope:{},state:a}}},{}],3:[function(b,g,p){function t(d){return w[Object.prototype.toString.call(d)]|0}function q(d,a){for(var e=0;e<a.length;++e)d[e]=a[e]}function a(d,a,e,h,k,l,c){for(var x=0,b=0;b<e;++b)for(var r=0;r<h;++r)d[x++]=a[k*b+l*r+c]}function e(d,a,e){for(var h=0,k=0;k<a.length;++k)for(var l=a[k],c=0;c<
e;++c)d[h++]=l[c]}var k=b("./util/is-typed-array"),l=b("./util/is-ndarray"),y=b("./util/values"),v=b("./util/pool"),w=b("./constants/arraytypes.json"),u=b("./constants/dtypes.json"),r=b("./constants/usage.json"),h=[];h[5120]=1;h[5122]=2;h[5124]=4;h[5121]=1;h[5123]=2;h[5125]=4;h[5126]=4;g.exports=function(d,f,m){function n(c){this.id=x++;this.buffer=d.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;m.profile&&(this.stats={size:0})}function b(c,a,e){c.byteLength=
a.byteLength;d.bufferData(c.type,a,e)}function w(c,d,f,m,h){c.usage=f;if(Array.isArray(d))c.dtype=m||5126,0<d.length&&(Array.isArray(d[0])?(c.dimension=d[0].length,m=v.allocType(c.dtype,d.length*c.dimension),e(m,d,c.dimension),b(c,m,f),v.freeType(m)):"number"===typeof d[0]?(c.dimension=h,m=v.allocType(c.dtype,d.length),q(m,d),b(c,m,f),v.freeType(m)):k(d[0])&&(c.dimension=d[0].length,c.dtype=m||t(d[0])||5126,m=v.allocType(c.dtype,d.length*c.dimension),e(m,d,c.dimension),b(c,m,f),v.freeType(m)));else if(k(d))c.dtype=
m||t(d),c.dimension=h,b(c,d,f);else if(l(d)){var n=d.shape,x=d.stride;h=d.offset;var r=0,C=0,H=0,G=0;1===n.length?(r=n[0],C=1,H=x[0],G=0):2===n.length&&(r=n[0],C=n[1],H=x[0],G=x[1]);c.dtype=m||t(d.data)||5126;c.dimension=C;m=v.allocType(c.dtype,r*C);a(m,d.data,r,C,H,G,h);b(c,m,f);v.freeType(m)}}function c(c){f.bufferCount--;d.deleteBuffer(c.buffer);c.buffer=null;delete C[c.id]}var x=0,C={};n.prototype.bind=function(){d.bindBuffer(this.type,this.buffer)};n.prototype.destroy=function(){c(this)};var F=
[];m.profile&&(f.getTotalBufferSize=function(){var c=0;Object.keys(C).forEach(function(d){c+=C[d].stats.size});return c});return{create:function(x,b,z){function y(c){var a=35044,f=null,e=0,n=0,x=1;Array.isArray(c)||k(c)||l(c)?f=c:"number"===typeof c?e=c|0:c&&("data"in c&&(f=c.data),"usage"in c&&(a=r[c.usage]),"type"in c&&(n=u[c.type]),"dimension"in c&&(x=c.dimension|0),"length"in c&&(e=c.length|0));F.bind();f?w(F,f,a,n,x):(d.bufferData(F.type,e,a),F.dtype=n||5121,F.usage=a,F.dimension=x,F.byteLength=
e);m.profile&&(F.stats.size=F.byteLength*h[F.dtype]);return y}f.bufferCount++;var F=new n(b);C[F.id]=F;z||y(x);y._reglType="buffer";y._buffer=F;y.subdata=function(c,f){var m=(f||0)|0;F.bind();if(Array.isArray(c)){if(0<c.length)if("number"===typeof c[0]){var h=v.allocType(F.dtype,c.length);q(h,c);d.bufferSubData(F.type,m,h);v.freeType(h)}else if(Array.isArray(c[0])||k(c[0])){var h=c[0].length,n=v.allocType(F.dtype,c.length*h);e(n,c,h);d.bufferSubData(F.type,m,n);v.freeType(n)}}else if(k(c))d.bufferSubData(F.type,
m,c);else if(l(c)){var x=c.shape,b=c.stride,r=n=h=0,C=0;1===x.length?(h=x[0],n=1,r=b[0],C=0):2===x.length&&(h=x[0],n=x[1],r=b[0],C=b[1]);x=Array.isArray(c.data)?F.dtype:t(c.data);x=v.allocType(x,h*n);a(x,c.data,h,n,r,C,c.offset);d.bufferSubData(F.type,m,x);v.freeType(x)}return y};m.profile&&(y.stats=F.stats);y.destroy=function(){c(F)};return y},createStream:function(c,d){var a=F.pop();a||(a=new n(c));a.bind();w(a,d,35040,0,1);return a},destroyStream:function(c){F.push(c)},clear:function(){y(C).forEach(c);
F.forEach(c)},getBuffer:function(c){return c&&c._buffer instanceof n?c._buffer:null},_initBuffer:w}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(b,g,p){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,
"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(b,g,p){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(b,g,p){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(b,g,p){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(b,g,p){function t(c){return Array.isArray(c)||
w(c)||u(c)}function q(c){return c.sort(function(c,d){return"viewport"===c?-1:"viewport"===d?1:c<d?-1:1})}function a(c,d,a,f){this.thisDep=c;this.contextDep=d;this.propDep=a;this.append=f}function e(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function k(c){return new a(!1,!1,!1,c)}function l(c,d){var f=c.type;return 0===f?(f=c.data.length,new a(!0,1<=f,2<=f,d)):new a(3===f,2===f,1===f,d)}var y=b("./util/codegen"),v=b("./util/loop"),w=b("./util/is-typed-array"),u=b("./util/is-ndarray"),r=b("./util/is-array-like"),
h=b("./constants/primitives.json"),d=b("./constants/dtypes.json"),f=["x","y","z","w"],m={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},n={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,
greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},E={cw:2304,ccw:2305},c=new a(!1,!1,!1,function(){});g.exports=function(x,b,u,w,g,p,I,D,L,K,J,P,H,G,M){function N(c){return c.replace(".","_")}function Q(c,d,a){var f=N(c);wa.push(c);ta[f]=da[f]=!!a;na[f]=d}function T(c,d,a){var f=N(c);wa.push(c);Array.isArray(a)?(da[f]=a.slice(),ta[f]=a.slice()):
da[f]=ta[f]=a;oa[f]=d}function V(){var c=y(),d=c.link,a=c.global;c.id=Da++;c.batchId="0";var f=d(Ca),e=c.shared={props:"a0"};Object.keys(Ca).forEach(function(c){e[c]=a.def(f,".",c)});var m=c.next={},h=c.current={};Object.keys(oa).forEach(function(c){Array.isArray(da[c])&&(m[c]=a.def(e.next,".",c),h[c]=a.def(e.current,".",c))});var n=c.constants={};Object.keys(xa).forEach(function(c){n[c]=a.def(JSON.stringify(xa[c]))});c.invoke=function(a,f){switch(f.type){case 0:var m=["this",e.context,e.props,c.batchId];
return a.def(d(f.data),".call(",m.slice(0,Math.max(f.data.length+1,4)),")");case 1:return a.def(e.props,f.data);case 2:return a.def(e.context,f.data);case 3:return a.def("this",f.data)}};c.attribCache={};var k={};c.scopeAttrib=function(c){c=b.id(c);if(c in k)return k[c];var a=K.scope[c];a||(a=K.scope[c]=new la);return k[c]=d(a)};return c}function R(c){var d=c["static"];c=c.dynamic;var a;if("profile"in d){var f=!!d.profile;a=k(function(c,d){return f});a.enable=f}else if("profile"in c){var e=c.profile;
a=l(e,function(c,d){return c.invoke(d,e)})}return a}function Z(c){var d=c["static"];c=c.dynamic;if("framebuffer"in d){var a=d.framebuffer;return a?(a=D.getFramebuffer(a),k(function(c,d){var f=c.link(a),e=c.shared;d.set(e.framebuffer,".next",f);e=e.context;d.set(e,".framebufferWidth",f+".width");d.set(e,".framebufferHeight",f+".height");return f})):k(function(c,d){var a=c.shared;d.set(a.framebuffer,".next","null");a=a.context;d.set(a,".framebufferWidth",a+".drawingBufferWidth");d.set(a,".framebufferHeight",
a+".drawingBufferHeight");return"null"})}if("framebuffer"in c){var f=c.framebuffer;return l(f,function(c,d){var a=c.invoke(d,f),e=c.shared,m=e.framebuffer,a=d.def(m,".getFramebuffer(",a,")");d.set(m,".next",a);e=e.context;d.set(e,".framebufferWidth",a+"?"+a+".width:"+e+".drawingBufferWidth");d.set(e,".framebufferHeight",a+"?"+a+".height:"+e+".drawingBufferHeight");return a})}return null}function U(c,d){function f(c){if(c in e){var h=e[c];c=!0;var n=h.x|0,k=h.y|0,x,b;"width"in h?x=h.width|0:c=!1;"height"in
h?b=h.height|0:c=!1;return new a(!c&&d&&d.thisDep,!c&&d&&d.contextDep,!c&&d&&d.propDep,function(c,d){var a=c.shared.context,f=x;"width"in h||(f=d.def(a,".","framebufferWidth","-",n));var e=b;"height"in h||(e=d.def(a,".","framebufferHeight","-",k));return[n,k,f,e]})}if(c in m){var r=m[c];c=l(r,function(c,d){var a=c.invoke(d,r),f=c.shared.context,e=d.def(a,".x|0"),m=d.def(a,".y|0"),h=d.def('"width" in ',a,"?",a,".width|0:","(",f,".","framebufferWidth","-",e,")"),a=d.def('"height" in ',a,"?",a,".height|0:",
"(",f,".","framebufferHeight","-",m,")");return[e,m,h,a]});d&&(c.thisDep=c.thisDep||d.thisDep,c.contextDep=c.contextDep||d.contextDep,c.propDep=c.propDep||d.propDep);return c}return d?new a(d.thisDep,d.contextDep,d.propDep,function(c,d){var a=c.shared.context;return[0,0,d.def(a,".","framebufferWidth"),d.def(a,".","framebufferHeight")]}):null}var e=c["static"],m=c.dynamic,h=f("viewport");if(h)var n=h,h=new a(h.thisDep,h.contextDep,h.propDep,function(c,d){var a=n.append(c,d),f=c.shared.context;d.set(f,
".viewportWidth",a[2]);d.set(f,".viewportHeight",a[3]);return a});return{viewport:h,scissor_box:f("scissor.box")}}function X(c){function d(c){if(c in f){var a=b.id(f[c]);c=k(function(){return a});c.id=a;return c}if(c in m){var e=m[c];return l(e,function(c,d){var a=c.invoke(d,e);return d.def(c.shared.strings,".id(",a,")")})}return null}var f=c["static"],m=c.dynamic,h=d("frag"),n=d("vert"),x=null;e(h)&&e(n)?(x=J.program(n.id,h.id),c=k(function(c,d){return c.link(x)})):c=new a(h&&h.thisDep||n&&n.thisDep,
h&&h.contextDep||n&&n.contextDep,h&&h.propDep||n&&n.propDep,function(c,d){var a=c.shared.shader,f;f=h?h.append(c,d):d.def(a,".","frag");var e;e=n?n.append(c,d):d.def(a,".","vert");return d.def(a+".program("+e+","+f+")")});return{frag:h,vert:n,progVar:c,program:x}}function W(c){function d(c,a){if(c in f){var e=f[c]|0;return k(function(c,d){a&&(c.OFFSET=e);return e})}if(c in m){var h=m[c];return l(h,function(c,d){var f=c.invoke(d,h);a&&(c.OFFSET=f);return f})}return a&&n?k(function(c,d){c.OFFSET="0";
return 0}):null}var f=c["static"],m=c.dynamic,n=function(){if("elements"in f){var c=f.elements;t(c)?c=p.getElements(p.create(c)):c&&(c=p.getElements(c));var d=k(function(d,a){if(c){var f=d.link(c);return d.ELEMENTS=f}return d.ELEMENTS=null});d.value=c;return d}if("elements"in m){var a=m.elements;return l(a,function(c,d){var f=c.shared,e=f.isBufferArgs,f=f.elements,m=c.invoke(d,a),h=d.def("null"),e=d.def(e,"(",m,")"),m=c.cond(e).then(h,"=",f,".createStream(",m,");")["else"](h,"=",f,".getElements(",
m,");");d.entry(m);d.exit(c.cond(e).then(f,".destroyStream(",h,");"));return c.ELEMENTS=h})}return null}(),x=d("offset",!0);return{elements:n,primitive:function(){if("primitive"in f){var c=f.primitive;return k(function(d,a){return h[c]})}if("primitive"in m){var d=m.primitive;return l(d,function(c,a){var f=c.constants.primTypes,e=c.invoke(a,d);return a.def(f,"[",e,"]")})}return n?e(n)?n.value?k(function(c,d){return d.def(c.ELEMENTS,".primType")}):k(function(){return 4}):new a(n.thisDep,n.contextDep,
n.propDep,function(c,d){var a=c.ELEMENTS;return d.def(a,"?",a,".primType:",4)}):null}(),count:function(){if("count"in f){var c=f.count|0;return k(function(){return c})}if("count"in m){var d=m.count;return l(d,function(c,a){return c.invoke(a,d)})}return n?e(n)?n?x?new a(x.thisDep,x.contextDep,x.propDep,function(c,d){return d.def(c.ELEMENTS,".vertCount-",c.OFFSET)}):k(function(c,d){return d.def(c.ELEMENTS,".vertCount")}):k(function(){return-1}):new a(n.thisDep||x.thisDep,n.contextDep||x.contextDep,
n.propDep||x.propDep,function(c,d){var a=c.ELEMENTS;return c.OFFSET?d.def(a,"?",a,".vertCount-",c.OFFSET,":-1"):d.def(a,"?",a,".vertCount:-1")}):null}(),instances:d("instances",!1),offset:x}}function S(c){var d=c["static"],a=c.dynamic,f={};wa.forEach(function(c){function e(m,n){if(c in d){var x=m(d[c]);f[h]=k(function(){return x})}else if(c in a){var b=a[c];f[h]=l(b,function(c,d){return n(c,d,c.invoke(d,b))})}}var h=N(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return e(function(c){return c},
function(c,d,a){return a});case "depth.func":return e(function(c){return n[c]},function(c,d,a){return d.def(c.constants.compareFuncs,"[",a,"]")});case "depth.range":return e(function(c){return c},function(c,d,a){c=d.def("+",a,"[0]");d=d.def("+",a,"[1]");return[c,d]});case "blend.func":return e(function(c){return[m["srcRGB"in c?c.srcRGB:c.src],m["dstRGB"in c?c.dstRGB:c.dst],m["srcAlpha"in c?c.srcAlpha:c.src],m["dstAlpha"in c?c.dstAlpha:c.dst]]},function(c,d,a){function f(c,m){var h=d.def('"',c,m,'" in ',
a,"?",a,".",c,m,":",a,".",c);return d.def(e,"[",h,"]")}var e=c.constants.blendFuncs;c=f("src","RGB");var m=f("src","Alpha"),h=f("dst","RGB"),n=f("dst","Alpha");return[c,h,m,n]});case "blend.equation":return e(function(c){if("string"===typeof c)return[ma[c],ma[c]];if("object"===typeof c)return[ma[c.rgb],ma[c.alpha]]},function(c,d,a){var f=c.constants.blendEquations,e=d.def(),m=d.def();c=c.cond("typeof ",a,'==="string"');c.then(e,"=",m,"=",f,"[",a,"];");c["else"](e,"=",f,"[",a,".rgb];",m,"=",f,"[",
a,".alpha];");d(c);return[e,m]});case "blend.color":return e(function(c){return v(4,function(d){return+c[d]})},function(c,d,a){return v(4,function(c){return d.def("+",a,"[",c,"]")})});case "stencil.mask":return e(function(c){return c|0},function(c,d,a){return d.def(a,"|0")});case "stencil.func":return e(function(c){return[n[c.cmp||"keep"],c.ref||0,"mask"in c?c.mask:-1]},function(c,d,a){c=d.def('"cmp" in ',a,"?",c.constants.compareFuncs,"[",a,".cmp]",":",7680);var f=d.def(a,".ref|0");d=d.def('"mask" in ',
a,"?",a,".mask|0:-1");return[c,f,d]});case "stencil.opFront":case "stencil.opBack":return e(function(d){return["stencil.opBack"===c?1029:1028,z[d.fail||"keep"],z[d.zfail||"keep"],z[d.pass||"keep"]]},function(d,a,f){function e(c){return a.def('"',c,'" in ',f,"?",m,"[",f,".",c,"]:",7680)}var m=d.constants.stencilOps;return["stencil.opBack"===c?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return e(function(c){return[c.factor|0,c.units|0]},function(c,d,a){c=d.def(a,".factor|0");
d=d.def(a,".units|0");return[c,d]});case "cull.face":return e(function(c){var d=0;"front"===c?d=1028:"back"===c&&(d=1029);return d},function(c,d,a){return d.def(a,'==="front"?',1028,":",1029)});case "lineWidth":return e(function(c){return c},function(c,d,a){return a});case "frontFace":return e(function(c){return E[c]},function(c,d,a){return d.def(a+'==="cw"?2304:2305')});case "colorMask":return e(function(c){return c.map(function(c){return!!c})},function(c,d,a){return v(4,function(c){return"!!"+a+
"["+c+"]"})});case "sample.coverage":return e(function(c){return["value"in c?c.value:1,!!c.invert]},function(c,d,a){c=d.def('"value" in ',a,"?+",a,".value:1");d=d.def("!!",a,".invert");return[c,d]})}});return f}function ba(c){var d=c["static"],a=c.dynamic,f={};Object.keys(d).forEach(function(c){var a=d[c],e;"number"===typeof a||"boolean"===typeof a?e=k(function(){return a}):"function"!==typeof a||"texture2d"!==a._reglType&&"textureCube"!==a._reglType?r(a)&&(e=k(function(c){return c.global.def("[",
v(a.length,function(c){return a[c]}),"]")})):e=k(function(c){return c.link(a)});e.value=a;f[c]=e});Object.keys(a).forEach(function(c){var d=a[c];f[c]=l(d,function(c,a){return c.invoke(a,d)})});return f}function aa(c){var a=c["static"],e=c.dynamic,m={};Object.keys(a).forEach(function(c){var e=a[c],h=b.id(c),n=new la;if(t(e))n.state=1,n.buffer=g.getBuffer(g.create(e,34962,!1)),n.type=n.buffer.dtype;else{var x=g.getBuffer(e);if(x)n.state=1,n.buffer=x,n.type=x.dtype;else if(e.constant){var l=e.constant;
n.state=2;"number"===typeof l?n.x=l:f.forEach(function(c,d){d<l.length&&(n[c]=l[d])})}else{var x=g.getBuffer(e.buffer),r=e.offset|0,G=e.stride|0,q=e.size|0,H=!!e.normalized,z=0;"type"in e&&(z=d[e.type]);e=e.divisor|0;n.buffer=x;n.state=1;n.size=q;n.normalized=H;n.type=z||x.dtype;n.offset=r;n.stride=G;n.divisor=e}}m[c]=k(function(c,d){var a=c.attribCache;if(h in a)return a[h];var f={isStream:!1};Object.keys(n).forEach(function(c){f[c]=n[c]});n.buffer&&(f.buffer=c.link(n.buffer));return a[h]=f})});
Object.keys(e).forEach(function(c){var d=e[c];m[c]=l(d,function(c,a){function e(c){a(x[c],"=",m,".",c,"|0;")}var m=c.invoke(a,d),h=c.shared,n=h.isBufferArgs,k=h.buffer,x={isStream:a.def(!1)},b=new la;b.state=1;Object.keys(b).forEach(function(c){x[c]=a.def(""+b[c])});var l=x.buffer,r=x.type;a("if(",n,"(",m,")){",x.isStream,"=true;",l,"=",k,".createStream(",34962,",",m,");",r,"=",l,".dtype;","}else{",l,"=",k,".getBuffer(",m,");","if(",l,"){",r,"=",l,".dtype;","}else if(",m,".constant){",x.state,"=",
2,";",f.map(function(c,d){return x[c]+"="+m+".length>="+d+"?"+m+"["+d+"]:0;"}).join(""),"}else{",l,"=",k,".getBuffer(",m,".buffer);",r,'="type" in ',m,"?",h.glTypes,"[",m,".type]:",l,".dtype;",x.normalized,"=!!",m,".normalized;");e("size");e("offset");e("stride");e("divisor");a("}}");a.exit("if(",x.isStream,"){",k,".destroyStream(",l,");","}");return x})});return m}function ja(c){var d=c["static"],a=c.dynamic,f={};Object.keys(d).forEach(function(c){var a=d[c];f[c]=k(function(c,d){return"number"===
typeof a||"boolean"===typeof a?""+a:c.link(a)})});Object.keys(a).forEach(function(c){var d=a[c];f[c]=l(d,function(c,a){return c.invoke(a,d)})});return f}function ca(c,d,a){var f=c.shared.context,e=c.scope();Object.keys(a).forEach(function(m){d.save(f,"."+m);e(f,".",m,"=",a[m].append(c,d),";")});d(e)}function Y(c,d,a){var f=c.shared,e=f.gl,m=f.framebuffer,h;pa&&(h=d.def(f.extensions,".webgl_draw_buffers"));var n=c.constants,f=n.drawBuffer,n=n.backBuffer;c=a?a.append(c,d):d.def(m,".next");d("if(",m,
".dirty||",c,"!==",m,".cur){","if(",c,"){",e,".bindFramebuffer(",36160,",",c,".framebuffer);");pa&&d(h,".drawBuffersWEBGL(",f,"[",c,".colorAttachments.length]);");d("}else{",e,".bindFramebuffer(",36160,",null);");pa&&d(h,".drawBuffersWEBGL(",n,");");d("}",m,".cur=",c,";",m,".dirty=false;","}")}function ea(c,d,a){var f=c.shared,e=f.gl,m=c.current,h=c.next,n=f.current,k=f.next,x=c.cond(n,".dirty");wa.forEach(function(d){d=N(d);if(!(d in a.state)){var f,b;if(d in h){f=h[d];b=m[d];var l=v(da[d].length,
function(c){return x.def(f,"[",c,"]")});x(c.cond(l.map(function(c,d){return c+"!=="+b+"["+d+"]"}).join("||")).then(e,".",oa[d],"(",l,");",l.map(function(c,d){return b+"["+d+"]="+c}).join(";"),";"))}else f=x.def(k,".",d),l=c.cond(f,"!==",n,".",d),x(l),d in na?l(c.cond(f).then(e,".enable(",na[d],");")["else"](e,".disable(",na[d],");"),n,".",d,"=",f,";"):l(e,".",oa[d],"(",f,");",n,".",d,"=",f,";")}});0===Object.keys(a.state).length&&x(n,".dirty=false;");d(x)}function ua(c,d,a,f){var m=c.shared,h=c.current,
n=m.current,k=m.gl;q(Object.keys(a)).forEach(function(m){var x=a[m];if(!f||f(x)){var l=x.append(c,d);if(na[m]){var b=na[m];e(x)?l?d(k,".enable(",b,");"):d(k,".disable(",b,");"):d(c.cond(l).then(k,".enable(",b,");")["else"](k,".disable(",b,");"));d(n,".",m,"=",l,";")}else if(r(l)){var G=h[m];d(k,".",oa[m],"(",l,");",l.map(function(c,d){return G+"["+d+"]="+c}).join(";"),";")}else d(k,".",oa[m],"(",l,");",n,".",m,"=",l,";")}})}function ga(c,d){fa&&!c.instancing&&(c.instancing=d.def(c.shared.extensions,
".angle_instanced_arrays"))}function qa(c,d,a,f,m){function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(c){q=d.def();c(q,"=",h(),";");"string"===typeof m?c(b,".count+=",m,";"):c(b,".count++;");G&&(f?(H=d.def(),c(H,"=",C,".getNumPendingQueries();")):c(C,".beginQuery(",b,");"))}function k(c){c(b,".cpuTime+=",h(),"-",q,";");G&&(f?c(C,".pushScopeStats(",H,",",C,".getNumPendingQueries(),",b,");"):c(C,".endQuery();"))}function x(c){var a=d.def(r,".profile");d(r,
".profile=",c,";");d.exit(r,".profile=",a,";")}var l=c.shared,b=c.stats,r=l.current,C=l.timer;a=a.profile;var q,H;if(a){if(e(a)){a.enable?(n(d),k(d.exit),x("true")):x("false");return}a=a.append(c,d);x(a)}else a=d.def(r,".profile");l=c.block();n(l);d("if(",a,"){",l,"}");c=c.block();k(c);d.exit("if(",a,"){",c,"}")}function ra(d,a,e,m,h){function n(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function k(c,e,m){function h(){a("if(!",r,".pointer){",l,".enableVertexAttribArray(",b,");",r,".pointer=true;}");var c=m.type,f;f=m.size?a.def(m.size,"||",e):e;a("if(",r,".type!==",c,"||",r,".size!==",f,"||",q.map(function(c){return r+"."+c+"!=="+m[c]}).join("||"),"){",l,".bindBuffer(",34962,",",G,".buffer);",l,".vertexAttribPointer(",[b,f,c,m.normalized,m.stride,m.offset],");",r,".type=",c,";",r,".size=",f,";",q.map(function(c){return r+"."+c+"="+m[c]+";"}).join(""),"}");fa&&(c=m.divisor,a("if(",
r,".divisor!==",c,"){",d.instancing,".vertexAttribDivisorANGLE(",[b,c],");",r,".divisor=",c,";}"))}function n(){a("if(",r,".pointer){",l,".disableVertexAttribArray(",b,");",r,".pointer=false;","}if(",f.map(function(c,d){return r+"."+c+"!=="+C[d]}).join("||"),"){",l,".vertexAttrib4f(",b,",",C,");",f.map(function(c,d){return r+"."+c+"="+C[d]+";"}).join(""),"}")}var l=x.gl,b=a.def(c,".location"),r=a.def(x.attributes,"[",b,"]");c=m.state;var G=m.buffer,C=[m.x,m.y,m.z,m.w],q=["buffer","normalized","offset",
"stride"];1===c?h():2===c?n():(a("if(",c,"===",1,"){"),h(),a("}else{"),n(),a("}"))}var x=d.shared;m.forEach(function(f){var m=f.name,x=e.attributes[m],l;if(x){if(!h(x))return;l=x.append(d,a)}else{if(!h(c))return;var b=d.scopeAttrib(m);l={};Object.keys(new la).forEach(function(c){l[c]=a.def(b,".",c)})}k(d.link(f),n(f.info.type),l)})}function sa(d,a,f,m,h){for(var n=d.shared,x=n.gl,k,l=0;l<m.length;++l){var G=m[l],q=G.name,H=G.info.type,z=f.uniforms[q],G=d.link(G)+".location",u;if(z){if(!h(z))continue;
if(e(z)){q=z.value;if(35678===H||35680===H)H=d.link(q._texture),a(x,".uniform1i(",G,",",H+".bind());"),a.exit(H,".unbind();");else if(35674===H||35675===H||35676===H)q=d.global.def("new Float32Array(["+Array.prototype.slice.call(q)+"])"),z=2,35675===H?z=3:35676===H&&(z=4),a(x,".uniformMatrix",z,"fv(",G,",false,",q,");");else{switch(H){case 5126:k="1f";break;case 35664:k="2f";break;case 35665:k="3f";break;case 35666:k="4f";break;case 35670:k="1i";break;case 5124:k="1i";break;case 35671:k="2i";break;
case 35667:k="2i";break;case 35672:k="3i";break;case 35668:k="3i";break;case 35673:k="4i";break;case 35669:k="4i"}a(x,".uniform",k,"(",G,",",r(q)?Array.prototype.slice.call(q):q,");")}continue}else u=z.append(d,a)}else{if(!h(c))continue;u=a.def(n.uniforms,"[",b.id(q),"]")}q=1;switch(H){case 35678:case 35680:H=a.def(u,"._texture");a(x,".uniform1i(",G,",",H,".bind());");a.exit(H,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2i";q=2;break;case 35668:case 35672:k="3i";
q=3;break;case 35669:case 35673:k="4i";q=4;break;case 5126:k="1f";break;case 35664:k="2f";q=2;break;case 35665:k="3f";q=3;break;case 35666:k="4f";q=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}a(x,".uniform",k,"(",G,",");if("M"===k.charAt(0)){var G=Math.pow(H-35674+2,2),y=d.global.def("new Float32Array(",G,")");a("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",v(G,function(c){return y+"["+c+"]="+u+"["+c+"]"}),",",y,")")}else 1<
q?a(v(q,function(c){return u+"["+c+"]"})):a(u);a(");")}}function ha(c,d,a,f){function m(e){var h=b[e];return h?h.contextDep&&f.contextDynamic||h.propDep?h.append(c,a):h.append(c,d):d.def(l,".",e)}function h(){function c(){a(z,".drawElementsInstancedANGLE(",[G,H,u,q+"<<(("+u+"-5121)>>1)",C],");")}function d(){a(z,".drawArraysInstancedANGLE(",[G,q,H,C],");")}r?y?c():(a("if(",r,"){"),c(),a("}else{"),d(),a("}")):d()}function n(){function c(){a(x+".drawElements("+[G,H,u,q+"<<(("+u+"-5121)>>1)"]+");")}
function d(){a(x+".drawArrays("+[G,q,H]+");")}r?y?c():(a("if(",r,"){"),c(),a("}else{"),d(),a("}")):d()}var k=c.shared,x=k.gl,l=k.draw,b=f.draw,r=function(){var e=b.elements,m=d;if(e){if(e.contextDep&&f.contextDynamic||e.propDep)m=a;e=e.append(c,m)}else e=m.def(l,".","elements");e&&m("if("+e+")"+x+".bindBuffer(34963,"+e+".buffer.buffer);");return e}(),G=m("primitive"),q=m("offset"),H=function(){var e=b.count,m=d;if(e){if(e.contextDep&&f.contextDynamic||e.propDep)m=a;e=e.append(c,m)}else e=m.def(l,
".","count");return e}();if("number"===typeof H){if(0===H)return}else a("if(",H,"){"),a.exit("}");var C,z;fa&&(C=m("instances"),z=c.instancing);var u=r+".type",y=b.elements&&e(b.elements);fa&&("number"!==typeof C||0<=C)?"string"===typeof C?(a("if(",C,">0){"),h(),a("}else if(",C,"<0){"),n(),a("}")):h():n()}function ia(c,d,a,f,e){d=V();e=d.proc("body",e);fa&&(d.instancing=e.def(d.shared.extensions,".angle_instanced_arrays"));c(d,e,a,f);return d.compile().body}function ka(c,d,a,f){ga(c,d);ra(c,d,a,f.attributes,
function(){return!0});sa(c,d,a,f.uniforms,function(){return!0});ha(c,d,d,a)}function Ba(c,d){var a=c.proc("draw",1);ga(c,a);ca(c,a,d.context);Y(c,a,d.framebuffer);ea(c,a,d);ua(c,a,d.state);qa(c,a,d,!1,!0);var f=d.shader.progVar.append(c,a);a(c.shared.gl,".useProgram(",f,".program);");if(d.shader.program)ka(c,a,d,d.shader.program);else{var e=c.global.def("{}"),m=a.def(f,".id"),h=a.def(e,"[",m,"]");a(c.cond(h).then(h,".call(this,a0);")["else"](h,"=",e,"[",m,"]=",c.link(function(a){return ia(ka,c,d,
a,1)}),"(",f,");",h,".call(this,a0);"))}0<Object.keys(d.state).length&&a(c.shared.current,".dirty=true;")}function ya(c,d,a,f){function e(){return!0}c.batchId="a1";ga(c,d);ra(c,d,a,f.attributes,e);sa(c,d,a,f.uniforms,e);ha(c,d,d,a)}function va(c,d,a,f){function e(c){return c.contextDep&&h||c.propDep}function m(c){return!e(c)}ga(c,d);var h=a.contextDep,n=d.def(),k=d.def();c.shared.props=k;c.batchId=n;var x=c.scope(),l=c.scope();d(x.entry,"for(",n,"=0;",n,"<","a1",";++",n,"){",k,"=","a0","[",n,"];",
l,"}",x.exit);a.needsContext&&ca(c,l,a.context);a.needsFramebuffer&&Y(c,l,a.framebuffer);ua(c,l,a.state,e);a.profile&&e(a.profile)&&qa(c,l,a,!1,!0);f?(ra(c,x,a,f.attributes,m),ra(c,l,a,f.attributes,e),sa(c,x,a,f.uniforms,m),sa(c,l,a,f.uniforms,e),ha(c,x,l,a)):(d=c.global.def("{}"),f=a.shader.progVar.append(c,l),k=l.def(f,".id"),x=l.def(d,"[",k,"]"),l(c.shared.gl,".useProgram(",f,".program);","if(!",x,"){",x,"=",d,"[",k,"]=",c.link(function(d){return ia(ya,c,a,d,2)}),"(",f,");}",x,".call(this,a0[",
n,"],",n,");"))}function za(c,d){function a(c){return c.contextDep&&e||c.propDep}var f=c.proc("batch",2);c.batchId="0";ga(c,f);var e=!1,m=!0;Object.keys(d.context).forEach(function(c){e=e||d.context[c].propDep});e||(ca(c,f,d.context),m=!1);var h=d.framebuffer,n=!1;h?(h.propDep?e=n=!0:h.contextDep&&e&&(n=!0),n||Y(c,f,h)):Y(c,f,null);d.state.viewport&&d.state.viewport.propDep&&(e=!0);ea(c,f,d);ua(c,f,d.state,function(c){return!a(c)});d.profile&&a(d.profile)||qa(c,f,d,!1,"a1");d.contextDep=e;d.needsContext=
m;d.needsFramebuffer=n;m=d.shader.progVar;if(m.contextDep&&e||m.propDep)va(c,f,d,null);else if(m=m.append(c,f),f(c.shared.gl,".useProgram(",m,".program);"),d.shader.program)va(c,f,d,d.shader.program);else{var h=c.global.def("{}"),n=f.def(m,".id"),k=f.def(h,"[",n,"]");f(c.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",n,"]=",c.link(function(a){return ia(va,c,d,a,2)}),"(",m,");",k,".call(this,a0,a1);"))}0<Object.keys(d.state).length&&f(c.shared.current,".dirty=true;")}function Aa(c,d){function a(m){var h=
d.shader[m];h&&f.set(e.shader,"."+m,h.append(c,f))}var f=c.proc("scope",3);c.batchId="a2";var e=c.shared,m=e.current;ca(c,f,d.context);d.framebuffer&&d.framebuffer.append(c,f);q(Object.keys(d.state)).forEach(function(a){var m=d.state[a].append(c,f);r(m)?m.forEach(function(d,e){f.set(c.next[a],"["+e+"]",d)}):f.set(e.next,"."+a,m)});qa(c,f,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(a){var m=d.draw[a];m&&f.set(e.draw,"."+a,""+m.append(c,f))});Object.keys(d.uniforms).forEach(function(a){f.set(e.uniforms,
"["+b.id(a)+"]",d.uniforms[a].append(c,f))});Object.keys(d.attributes).forEach(function(a){var e=d.attributes[a].append(c,f),m=c.scopeAttrib(a);Object.keys(new la).forEach(function(c){f.set(m,"."+c,e[c])})});a("vert");a("frag");0<Object.keys(d.state).length&&(f(m,".dirty=true;"),f.exit(m,".dirty=true;"));f("a1(",c.shared.context,",a0,0);")}var la=K.Record,ma={add:32774,subtract:32778,"reverse subtract":32779};u.ext_blend_minmax&&(ma.min=32775,ma.max=32776);var fa=u.angle_instanced_arrays,pa=u.webgl_draw_buffers,
da={dirty:!0,profile:M.profile},ta={},wa=[],na={},oa={};Q("dither",3024);Q("blend.enable",3042);T("blend.color","blendColor",[0,0,0,0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",[1,0,1,0]);Q("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);Q("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth",
"lineWidth",1);Q("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);Q("sample.alpha",32926);Q("sample.enable",32928);T("sample.coverage","sampleCoverage",[1,!1]);Q("stencil.enable",2960);T("stencil.mask","stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Q("scissor.enable",3089);T("scissor.box","scissor",[0,0,x.drawingBufferWidth,x.drawingBufferHeight]);
T("viewport","viewport",[0,0,x.drawingBufferWidth,x.drawingBufferHeight]);var Ca={gl:x,context:H,strings:b,next:ta,current:da,draw:P,elements:p,buffer:g,shader:J,attributes:K.state,uniforms:L,framebuffer:D,extensions:u,timer:G,isBufferArgs:t},xa={primTypes:h,compareFuncs:n,blendFuncs:m,blendEquations:ma,stencilOps:z,glTypes:d,orientationType:E};pa&&(xa.backBuffer=[1029],xa.drawBuffer=v(w.maxDrawbuffers,function(c){return 0===c?[0]:v(c,function(c){return 36064+c})}));var Da=0;return{next:ta,current:da,
procs:function(){var c=V(),d=c.proc("poll"),a=c.proc("refresh"),f=c.block();d(f);a(f);var e=c.shared,m=e.gl,h=e.next,n=e.current;f(n,".dirty=false;");Y(c,d);a(e.framebuffer,".dirty=true;");Y(c,a);Object.keys(na).forEach(function(e){var k=na[e],x=f.def(h,".",e),l=c.block();l("if(",x,"){",m,".enable(",k,")}else{",m,".disable(",k,")}",n,".",e,"=",x,";");a(l);d("if(",x,"!==",n,".",e,"){",l,"}")});Object.keys(oa).forEach(function(e){var k=oa[e],x=da[e],l,b,G=c.block();G(m,".",k,"(");r(x)?(k=x.length,l=
c.global.def(h,".",e),b=c.global.def(n,".",e),G(v(k,function(c){return l+"["+c+"]"}),");",v(k,function(c){return b+"["+c+"]="+l+"["+c+"];"}).join("")),d("if(",v(k,function(c){return l+"["+c+"]!=="+b+"["+c+"]"}).join("||"),"){",G,"}")):(l=f.def(h,".",e),b=f.def(n,".",e),G(l,");",n,".",e,"=",l,";"),d("if(",l,"!==",b,"){",G,"}"));a(G)});return c.compile()}(),compile:function(c,d,a,f,e){var m=V();m.stats=m.link(e);e=Z(c);var h=U(c,e),n=W(c),k=S(c),x=X(c),l=h.viewport;l&&(k.viewport=l);l=N("scissor.box");
(h=h[l])&&(k[l]=h);h=0<Object.keys(k).length;e={framebuffer:e,draw:n,shader:x,state:k,dirty:h};e.profile=R(c);e.uniforms=ba(a);e.attributes=aa(d);e.context=ja(f);Ba(m,e);Aa(m,e);za(m,e);return m.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(b,g,p){function t(a,l){this.id=e++;this.type=a;this.data=l}function q(a){if(0===a.length)return[];var e=
a.charAt(0),b=a.charAt(a.length-1);if(1<a.length&&e===b&&('"'===e||"'"===e))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return q(a.substr(0,e.index)).concat(q(e[1])).concat(q(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(b=0;b<e.length;++b)a=a.concat(q(e[b]));return a}function a(a){return"["+q(a).join("][")+"]"}var e=0;
g.exports={define:function(e,l){return new t(e,a(l+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof t},unbox:function(a,e){return"function"===typeof a?new t(0,a):a},accessor:a}},{}],10:[function(b,g,p){var t=b("./util/is-typed-array"),q=b("./util/is-ndarray"),a=b("./util/values"),e=b("./constants/primitives.json"),k=b("./constants/usage.json");g.exports=function(l,b,v,w){function u(a){this.id=f++;d[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=
0}function r(d,a,c,e,f,m,h){(m=h)||t(a)&&(!q(a)||t(a.data))||(m=b.oes_element_index_uint?5125:5123);d.buffer.bind();v._initBuffer(d.buffer,a,c,m,3);a=h;if(!h){switch(d.buffer.dtype){case 5121:case 5120:a=5121;break;case 5123:case 5122:a=5123;break;case 5125:case 5124:a=5125}d.buffer.dtype=a}d.type=a;0>f&&(f=d.buffer.byteLength,5123===a?f>>=1:5125===a&&(f>>=2));d.vertCount=f;f=e;0>e&&(f=4,e=d.buffer.dimension,1===e&&(f=0),2===e&&(f=1),3===e&&(f=4));d.primType=f}function h(a){w.elementsCount--;delete d[a.id];
a.buffer.destroy();a.buffer=null}var d={},f=0,m={uint8:5121,uint16:5123};b.oes_element_index_uint&&(m.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(d){function a(d){if(d)if("number"===typeof d)c(d),f.primType=4,f.vertCount=d|0,f.type=5121;else{var h=null,n=35044,b=-1,u=-1,z=0,v=0;Array.isArray(d)||t(d)||q(d)?h=d:("data"in d&&(h=d.data),"usage"in d&&(n=k[d.usage]),"primitive"in d&&(b=e[d.primitive]),"count"in d&&(u=d.count|0),"length"in d&&(z=d.length|
0),"type"in d&&(v=m[d.type]));h?r(f,h,n,b,u,z,v):(d=f.buffer,d.bind(),l.bufferData(34963,z,n),d.dtype=v||5121,d.usage=n,d.dimension=3,d.byteLength=z,f.primType=0>b?4:b,f.vertCount=0>u?0:u,f.type=d.dtype)}else c(),f.primType=4,f.vertCount=0,f.type=5121;return a}var c=v.create(null,34963,!0),f=new u(c._buffer);w.elementsCount++;a(d);a._reglType="elements";a._elements=f;a.subdata=function(d,f){c.subdata(d,f);return a};a.destroy=function(){h(f)};return a},createStream:function(d){var a=n.pop();a||(a=
new u(v.create(null,34963,!0)._buffer));r(a,d,35040,-1,-1,0,0);return a},destroyStream:function(d){n.push(d)},getElements:function(d){return"function"===typeof d&&d._elements instanceof u?d._elements:null},clear:function(){a(d).forEach(h)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(b,g,p){g.exports=function(b,q){function a(a){a=a.toLowerCase();if(a in e)return!0;var k;try{k=e[a]=b.getExtension(a)}catch(l){}return!!k}
for(var e={},k=0;k<q.extensions.length;++k){var l=q.extensions[k];if(!a(l))return q.onDestroy(),q.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}q.optionalExtensions.forEach(a);return{extensions:e,refresh:function(){q.extensions.forEach(a);q.optionalExtensions.forEach(a)}}}},{}],12:[function(b,g,p){var t=b("./util/values"),q=b("./util/extend"),a=[];a[6408]=4;var e=[];e[5121]=1;e[5126]=4;e[36193]=2;g.exports=function(k,
l,b,v,w,u){function r(c,d,a){this.target=c;this.texture=d;this.renderbuffer=a;var f=c=0;d?(c=d.width,f=d.height):a&&(c=a.width,f=a.height);this.width=c;this.height=f}function h(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function d(c,d,a){c&&(c.texture?c.texture._texture.refCount+=1:c.renderbuffer._renderbuffer.refCount+=1)}function f(c,d){d?d.texture?k.framebufferTexture2D(36160,c,d.target,d.texture._texture.texture,0):k.framebufferRenderbuffer(36160,
c,36161,d.renderbuffer._renderbuffer.renderbuffer):k.framebufferTexture2D(36160,c,3553,null,0)}function m(c){var d=3553,a=null,f=null,e=c;"object"===typeof c&&(e=c.data,"target"in c&&(d=c.target|0));c=e._reglType;"texture2d"===c?a=e:"textureCube"===c?a=e:"renderbuffer"===c&&(f=e,d=36161);return new r(d,a,f)}function n(c,d,a,f,e){if(a)return c=v.create2D({width:c,height:d,format:f,type:e}),c._texture.refCount=0,new r(3553,c,null);c=w.create({width:c,height:d,format:f});c._renderbuffer.refCount=0;return new r(36161,
null,c)}function z(c){return c&&(c.texture||c.renderbuffer)}function E(c,d,a){c&&(c.texture?c.texture.resize(d,a):c.renderbuffer&&c.renderbuffer.resize(d,a))}function c(){this.id=L++;K[this.id]=this;this.framebuffer=k.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function x(c){c.colorAttachments.forEach(h);h(c.depthAttachment);h(c.stencilAttachment);h(c.depthStencilAttachment)}function C(c){k.deleteFramebuffer(c.framebuffer);
c.framebuffer=null;u.framebufferCount--;delete K[c.id]}function F(c){var d;k.bindFramebuffer(36160,c.framebuffer);var a=c.colorAttachments;for(d=0;d<a.length;++d)f(36064+d,a[d]);for(d=a.length;d<b.maxColorAttachments;++d)f(36064+d,null);f(36096,c.depthAttachment);f(36128,c.stencilAttachment);f(33306,c.depthStencilAttachment);k.checkFramebufferStatus(36160);k.bindFramebuffer(36160,g.next);g.current=g.next}function A(f,h){function k(c,f){var h,r=0,q=0,u=!0,C=!0;h=null;var v=!0,y="rgba",w="uint8",t=
1,A=null,E=null,g=null,B=!1;if("number"===typeof c)r=c|0,q=f|0||r;else if(c){"shape"in c?(q=c.shape,r=q[0],q=q[1]):("radius"in c&&(r=q=c.radius),"width"in c&&(r=c.width),"height"in c&&(q=c.height));if("color"in c||"colors"in c)h=c.color||c.colors,Array.isArray(h);h||("colorCount"in c&&(t=c.colorCount|0),"colorTexture"in c&&(v=!!c.colorTexture,y="rgba4"),"colorType"in c&&(w=c.colorType,v||("half float"===w?l.ext_color_buffer_half_float&&(y="rgba16f"):"float"===w&&l.webgl_color_buffer_float&&(y="rgba32f"))),
"colorFormat"in c&&(y=c.colorFormat,0<=p.indexOf(y)?v=!0:0<=I.indexOf(y)&&(v=!1)));if("depthTexture"in c||"depthStencilTexture"in c)B=!(!c.depthTexture&&!c.depthStencilTexture);"depth"in c&&("boolean"===typeof c.depth?u=c.depth:(A=c.depth,C=!1));"stencil"in c&&("boolean"===typeof c.stencil?C=c.stencil:(E=c.stencil,u=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?u=C=c.depthStencil:(g=c.depthStencil,C=u=!1))}else r=q=1;var D=null,J=null,K=null,L=null;if(Array.isArray(h))D=h.map(m);else if(h)D=
[m(h)];else for(D=Array(t),h=0;h<t;++h)D[h]=n(r,q,v,y,w);r=r||D[0].width;q=q||D[0].height;A?J=m(A):u&&!C&&(J=n(r,q,B,"depth","uint32"));E?K=m(E):C&&!u&&(K=n(r,q,!1,"stencil","uint8"));g?L=m(g):!A&&!E&&C&&u&&(L=n(r,q,B,"depth stencil","depth stencil"));u=null;for(h=0;h<D.length;++h)d(D[h],r,q),D[h]&&D[h].texture&&(C=a[D[h].texture._texture.format]*e[D[h].texture._texture.type],null===u&&(u=C));d(J,r,q);d(K,r,q);d(L,r,q);x(b);b.width=r;b.height=q;b.colorAttachments=D;b.depthAttachment=J;b.stencilAttachment=
K;b.depthStencilAttachment=L;k.color=D.map(z);k.depth=z(J);k.stencil=z(K);k.depthStencil=z(L);k.width=b.width;k.height=b.height;F(b);return k}var b=new c;u.framebufferCount++;k(f,h);return q(k,{resize:function(c,d){var a=c|0,f=d|0||a;if(a===b.width&&f===b.height)return k;for(var e=b.colorAttachments,m=0;m<e.length;++m)E(e[m],a,f);E(b.depthAttachment,a,f);E(b.stencilAttachment,a,f);E(b.depthStencilAttachment,a,f);b.width=k.width=a;b.height=k.height=f;F(b);return k},_reglType:"framebuffer",_framebuffer:b,
destroy:function(){C(b);x(b)}})}var g={current:null,next:null,dirty:!1},p=["rgba"],I=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&I.push("srgba");l.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");l.webgl_color_buffer_float&&I.push("rgba32f");var D=["uint8"];l.oes_texture_half_float&&D.push("half float");l.oes_texture_float&&D.push("float");var L=0,K={};return q(g,{getFramebuffer:function(d){return"function"===typeof d&&"framebuffer"===d._reglType&&(d=d._framebuffer,d instanceof c)?d:null},create:A,
createCube:function(c){function d(c){var f={color:null},e=0,m=null,h="rgba",n="uint8",k=1;if("number"===typeof c)e=c|0;else if(c){"shape"in c?e=c.shape[0]:("radius"in c&&(e=c.radius|0),"width"in c?e=c.width|0:"height"in c&&(e=c.height|0));if("color"in c||"colors"in c)m=c.color||c.colors,Array.isArray(m);m||("colorCount"in c&&(k=c.colorCount|0),"colorType"in c&&(n=c.colorType),"colorFormat"in c&&(h=c.colorFormat));"depth"in c&&(f.depth=c.depth);"stencil"in c&&(f.stencil=c.stencil);"depthStencil"in
c&&(f.depthStencil=c.depthStencil)}else e=1;var b;if(m)if(Array.isArray(m))for(c=0;c<m.length;++c);else b=[m];else for(b=Array(k),m={radius:e,format:h,type:n},c=0;c<k;++c)b[c]=v.createCube(m);f.color=Array(b.length);for(c=0;c<b.length;++c)k=b[c],e=e||k.width,f.color[c]={target:34069,data:b[c]};for(c=0;6>c;++c){for(k=0;k<b.length;++k)f.color[k].target=34069+c;0<c&&(f.depth=a[0].depth,f.stencil=a[0].stencil,f.depthStencil=a[0].depthStencil);if(a[c])a[c](f);else a[c]=A(f)}return q(d,{width:e,height:e,
color:b})}var a=Array(6);d(c);return q(d,{faces:a,resize:function(c){for(var f=0;6>f;++f)a[f].resize(c);return d},_reglType:"framebufferCube",destroy:function(){a.forEach(function(c){c.destroy()})}})},clear:function(){t(K).forEach(C)}})}},{"./util/extend":23,"./util/values":31}],13:[function(b,g,p){g.exports=function(b,q){var a=1;q.ext_texture_filter_anisotropic&&(a=b.getParameter(34047));var e=1,k=1;q.webgl_draw_buffers&&(e=b.getParameter(34852),k=b.getParameter(36063));return{colorBits:[b.getParameter(3410),
b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(q).filter(function(a){return!!q[a]}),maxAnisotropic:a,maxDrawbuffers:e,maxColorAttachments:k,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),
maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938)}}},{}],14:[function(b,g,p){var t=b("./util/is-typed-array");g.exports=function(b,a,e,k,l){return function(a){var l=
0,w=0,u=k.framebufferWidth,r=k.framebufferHeight,h=null;t(a)?h=a:a&&(l=a.x|0,w=a.y|0,u=(a.width||k.framebufferWidth-l)|0,r=(a.height||k.framebufferHeight-w)|0,h=a.data||null);e();h=h||new Uint8Array(u*r*4);b.pixelStorei(3333,4);b.readPixels(l,w,u,r,6408,5121,h);return h}}},{"./util/is-typed-array":26}],15:[function(b,g,p){var t=b("./util/values"),q=[];q[32854]=2;q[32855]=2;q[36194]=2;q[33189]=2;q[36168]=1;q[34041]=4;q[35907]=4;q[34836]=16;q[34842]=8;q[34843]=6;g.exports=function(a,e,b,l,y){function v(d){this.id=
r++;this.refCount=1;this.renderbuffer=d;this.format=32854;this.height=this.width=0;y.profile&&(this.stats={size:0})}function w(d){var f=d.renderbuffer;a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(f);d.renderbuffer=null;d.refCount=0;delete h[d.id];l.renderbufferCount--}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(u.srgba=35907);e.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);e.webgl_color_buffer_float&&(u.rgba32f=
34836);var r=0,h={};v.prototype.decRef=function(){0>=--this.refCount&&w(this)};y.profile&&(l.getTotalRenderbufferSize=function(){var d=0;Object.keys(h).forEach(function(a){d+=h[a].stats.size});return d});return{create:function(d,f){function e(d,f){var c=0,h=0,b=32854;"object"===typeof d&&d?("shape"in d?(h=d.shape,c=h[0]|0,h=h[1]|0):("radius"in d&&(c=h=d.radius|0),"width"in d&&(c=d.width|0),"height"in d&&(h=d.height|0)),"format"in d&&(b=u[d.format])):"number"===typeof d?(c=d|0,h="number"===typeof f?
f|0:c):d||(c=h=1);if(c!==n.width||h!==n.height||b!==n.format)return e.width=n.width=c,e.height=n.height=h,n.format=b,a.bindRenderbuffer(36161,n.renderbuffer),a.renderbufferStorage(36161,b,c,h),y.profile&&(n.stats.size=q[n.format]*n.width*n.height),e}var n=new v(a.createRenderbuffer());h[n.id]=n;l.renderbufferCount++;e(d,f);e.resize=function(d,f){var c=d|0,h=f|0||c;if(c===n.width&&h===n.height)return e;e.width=n.width=c;e.height=n.height=h;a.bindRenderbuffer(36161,n.renderbuffer);a.renderbufferStorage(36161,
n.format,c,h);y.profile&&(n.stats.size=q[n.format]*n.width*n.height);return e};e._reglType="renderbuffer";e._renderbuffer=n;y.profile&&(e.stats=n.stats);e.destroy=function(){n.decRef()};return e},clear:function(){t(h).forEach(w)}}}},{"./util/values":31}],16:[function(b,g,p){var t=b("./util/values");g.exports=function(b,a,e,k){function l(d,a,f,e){this.name=d;this.id=a;this.location=f;this.info=e}function y(d,a){for(var f=0;f<d.length;++f)if(d[f].id===a.id){d[f].location=a.location;return}d.push(a)}
function v(d,f,e){e=35632===d?u:r;var h=e[f];if(!h){var c=a.str(f),h=b.createShader(d);b.shaderSource(h,c);b.compileShader(h);e[f]=h}return h}function w(d,a){this.id=f++;this.fragId=d;this.vertId=a;this.program=null;this.uniforms=[];this.attributes=[];k.profile&&(this.stats={uniformsCount:0,attributesCount:0})}var u={},r={},h={},d=[],f=0;k.profile&&(e.getMaxUniformsCount=function(){var a=0;d.forEach(function(d){d.stats.uniformsCount>a&&(a=d.stats.uniformsCount)});return a},e.getMaxAttributesCount=
function(){var a=0;d.forEach(function(d){d.stats.attributesCount>a&&(a=d.stats.attributesCount)});return a});return{clear:function(){var a=b.deleteShader.bind(b);t(u).forEach(a);u={};t(r).forEach(a);r={};d.forEach(function(d){b.deleteProgram(d.program)});d.length=0;h={};e.shaderCount=0},program:function(f,n,r){e.shaderCount++;(r=h[n])||(r=h[n]={});var u=r[f];if(!u){var c=u=new w(n,f),x,C;x=v(35632,c.fragId);C=v(35633,c.vertId);n=c.program=b.createProgram();b.attachShader(n,x);b.attachShader(n,C);
b.linkProgram(n);var t=b.getProgramParameter(n,35718);k.profile&&(c.stats.uniformsCount=t);var A=c.uniforms;for(x=0;x<t;++x)if(C=b.getActiveUniform(n,x))if(1<C.size)for(var g=0;g<C.size;++g){var p=C.name.replace("[0]","["+g+"]");y(A,new l(p,a.id(p),b.getUniformLocation(n,p),C))}else y(A,new l(C.name,a.id(C.name),b.getUniformLocation(n,C.name),C));t=b.getProgramParameter(n,35721);k.profile&&(c.stats.attributesCount=t);c=c.attributes;for(x=0;x<t;++x)(C=b.getActiveAttrib(n,x))&&y(c,new l(C.name,a.id(C.name),
b.getAttribLocation(n,C.name),C));r[f]=u;d.push(u)}return u},shader:v,frag:null,vert:null}}},{"./util/values":31}],17:[function(b,g,p){g.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(b,g,p){g.exports=function(){var b={"":0},q=[""];return{id:function(a){var e=b[a];if(e)return e;e=b[a]=q.length;q.push(a);return e},str:function(a){return q[a]}}}},{}],19:[function(b,g,p){function t(c){return Array.isArray(c)&&
(0===c.length||"number"===typeof c[0])}function q(c){return Array.isArray(c)&&0!==c.length&&d(c[0])?!0:!1}function a(c){return Object.prototype.toString.call(c)}function e(c){if(!c)return!1;var d=a(c);return 0<=E.indexOf(d)?!0:t(c)||q(c)||u(c)}function k(c,d){36193===c.type?(c.data=h(d),r.freeType(d)):c.data=d}function l(d,a,f,e,m,h){d="undefined"!==typeof x[d]?x[d]:z[d]*c[a];h&&(d*=6);if(m){for(e=0;1<=f;)e+=d*f*f,f/=2;return e}return d*f*e}var y=b("./util/extend"),v=b("./util/values"),w=b("./util/is-typed-array"),
u=b("./util/is-ndarray"),r=b("./util/pool"),h=b("./util/to-half-float"),d=b("./util/is-array-like");p=b("./constants/arraytypes.json");var f=b("./constants/arraytypes.json"),m=[9984,9986,9985,9987],n=[0,6409,6410,6407,6408],z={};z[6409]=z[6406]=z[6402]=1;z[34041]=z[6410]=2;z[6407]=z[35904]=3;z[6408]=z[35906]=4;var E=Object.keys(p).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),c=[];c[5121]=1;c[5126]=4;c[36193]=2;c[5123]=
2;c[5125]=4;var x=[];x[32854]=2;x[32855]=2;x[36194]=2;x[34041]=4;x[33776]=.5;x[33777]=.5;x[33778]=1;x[33779]=1;x[35986]=.5;x[35987]=1;x[34798]=1;x[35840]=.5;x[35841]=.25;x[35842]=.5;x[35843]=.25;x[36196]=.5;g.exports=function(c,b,x,g,E,p,D){function L(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function K(c,d){c.internalformat=d.internalformat;c.format=d.format;
c.type=d.type;c.compressed=d.compressed;c.premultiplyAlpha=d.premultiplyAlpha;c.flipY=d.flipY;c.unpackAlignment=d.unpackAlignment;c.colorSpace=d.colorSpace;c.width=d.width;c.height=d.height;c.channels=d.channels}function J(c,d){if("object"===typeof d&&d){"premultiplyAlpha"in d&&(c.premultiplyAlpha=d.premultiplyAlpha);"flipY"in d&&(c.flipY=d.flipY);"alignment"in d&&(c.unpackAlignment=d.alignment);"colorSpace"in d&&(c.colorSpace=sa[d.colorSpace]);"type"in d&&(c.type=ha[d.type]);var a=c.width,f=c.height,
e=c.channels,m=!1;"shape"in d?(a=d.shape[0],f=d.shape[1],3===d.shape.length&&(e=d.shape[2],m=!0)):("radius"in d&&(a=f=d.radius),"width"in d&&(a=d.width),"height"in d&&(f=d.height),"channels"in d&&(e=d.channels,m=!0));c.width=a|0;c.height=f|0;c.channels=e|0;a=!1;"format"in d&&(a=d.format,f=c.internalformat=ia[a],c.format=va[f],a in ha&&!("type"in d)&&(c.type=ha[a]),a in ka&&(c.compressed=!0),a=!0);!m&&a?c.channels=z[c.format]:m&&!a&&c.channels!==n[c.format]&&(c.format=c.internalformat=n[c.channels])}}
function P(d){c.pixelStorei(37440,d.flipY);c.pixelStorei(37441,d.premultiplyAlpha);c.pixelStorei(37443,d.colorSpace);c.pixelStorei(3317,d.unpackAlignment)}function H(){L.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function G(c,m){var b=null;e(m)?b=m:m&&(J(c,m),"x"in m&&(c.xOffset=m.x|0),"y"in m&&(c.yOffset=m.y|0),e(m.data)&&(b=m.data));if(m.copy){var l=E.viewportWidth,x=E.viewportHeight;c.width=c.width||l-c.xOffset;c.height=c.height||
x-c.yOffset;c.needsCopy=!0}else if(!b)c.width=c.width||1,c.height=c.height||1;else if(w(b))c.data=b,"type"in m||5121!==c.type||(c.type=f[Object.prototype.toString.call(b)]|0);else if(t(b)){l=b;x=c.width*c.height*c.channels;switch(c.type){case 5121:case 5123:case 5125:case 5126:x=r.allocType(c.type,x);x.set(l);c.data=x;break;case 36193:c.data=h(l)}c.alignment=1;c.needsFree=!0}else if(u(b)){l=b.data;Array.isArray(l)||5121!==c.type||(c.type=f[Object.prototype.toString.call(l)]|0);var x=b.shape,H=b.stride,
v,G,y,z;3===x.length?(y=x[2],z=H[2]):z=y=1;v=x[0];G=x[1];x=H[0];H=H[1];c.alignment=1;c.width=v;c.height=G;c.channels=y;c.format=c.internalformat=n[y];c.needsFree=!0;v=z;b=b.offset;y=c.width;z=c.height;G=c.channels;for(var C=r.allocType(36193===c.type?5126:c.type,y*z*G),A=0,F=0;F<z;++F)for(var g=0;g<y;++g)for(var M=0;M<G;++M)C[A++]=l[x*g+H*F+v*M+b];k(c,C)}else if("[object HTMLCanvasElement]"===a(b)||"[object CanvasRenderingContext2D]"===a(b))"[object HTMLCanvasElement]"===a(b)?c.element=b:c.element=
b.canvas,c.width=c.element.width,c.height=c.element.height;else if("[object HTMLImageElement]"===a(b))c.element=b,c.width=b.naturalWidth,c.height=b.naturalHeight;else if("[object HTMLVideoElement]"===a(b))c.element=b,c.width=b.videoWidth,c.height=b.videoHeight,c.needsPoll=!0;else if(q(b)){l=b[0].length;x=b.length;H=1;if(d(b[0][0])){v=H=b[0][0].length;y=r.allocType(36193===c.type?5126:c.type,l*x*v);for(G=z=0;G<x;++G)for(C=b[G],A=0;A<l;++A)for(F=C[A],g=0;g<v;++g)y[z++]=F[g];k(c,y)}else{v=r.allocType(36193===
c.type?5126:c.type,l*x);for(z=y=0;z<x;++z)for(G=b[z],C=0;C<l;++C)v[y++]=G[C];k(c,v)}c.alignment=1;c.width=l;c.height=x;c.channels=H;c.format=c.internalformat=n[H];c.needsFree=!0}}function M(d,a,f,e,m){var h=d.element,b=d.data,n=d.internalformat,k=d.format,l=d.type,x=d.width,r=d.height;P(d);h?c.texSubImage2D(a,m,f,e,k,l,h):d.compressed?c.compressedTexSubImage2D(a,m,f,e,n,x,r,b):d.needsCopy?(g(),c.copyTexSubImage2D(a,m,f,e,d.xOffset,d.yOffset,x,r)):c.texSubImage2D(a,m,f,e,x,r,k,l,b)}function N(){return za.pop()||
new H}function Q(c){c.needsFree&&r.freeType(c.data);H.call(c);za.push(c)}function T(){L.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function V(c,d,a){var f=c.images[0]=N();c.mipmask=1;f.width=c.width=d;f.height=c.height=a}function R(c,d){var a=null;if(e(d))a=c.images[0]=N(),K(a,c),G(a,d),c.mipmask=1;else if(J(c,d),Array.isArray(d.mipmap))for(var f=d.mipmap,m=0;m<f.length;++m)a=c.images[m]=N(),K(a,c),a.width>>=m,a.height>>=m,G(a,f[m]),c.mipmask|=1<<m;else a=
c.images[0]=N(),K(a,c),G(a,d),c.mipmask=1;K(c,c.images[0])}function Z(d,a){for(var f=d.images,e=0;e<f.length&&f[e];++e){var m=f[e],h=a,b=e,n=m.element,k=m.data,l=m.internalformat,x=m.format,r=m.type,q=m.width,u=m.height;P(m);n?c.texImage2D(h,b,x,x,r,n):m.compressed?c.compressedTexImage2D(h,b,l,q,u,0,k):m.needsCopy?(g(),c.copyTexImage2D(h,b,x,m.xOffset,m.yOffset,q,u,0)):c.texImage2D(h,b,x,q,u,0,x,r,k)}}function U(){var c=Aa.pop()||new T;L.call(c);for(var d=c.mipmask=0;16>d;++d)c.images[d]=null;return c}
function X(c){for(var d=c.images,a=0;a<d.length;++a)d[a]&&Q(d[a]),d[a]=null;Aa.push(c)}function W(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function S(c,d){"min"in d&&(c.minFilter=ra[d.min],0<=m.indexOf(c.minFilter)&&(c.genMipmaps=!0));"mag"in d&&(c.magFilter=qa[d.mag]);var a=c.wrapS,f=c.wrapT;if("wrap"in d){var e=d.wrap;"string"===typeof e?a=f=ga[e]:Array.isArray(e)&&(a=ga[e[0]],f=ga[e[1]])}else"wrapS"in d&&(a=ga[d.wrapS]),
"wrapT"in d&&(f=ga[d.wrapT]);c.wrapS=a;c.wrapT=f;"anisotropic"in d&&(c.anisotropic=d.anisotropic);if("mipmap"in d){a=!1;switch(typeof d.mipmap){case "string":c.mipmapHint=ua[d.mipmap];a=c.genMipmaps=!0;break;case "boolean":a=c.genMipmaps=d.mipmap;break;case "object":c.genMipmaps=!1,a=!0}!a||"min"in d||(c.minFilter=9984)}}function ba(d,a){c.texParameteri(a,10241,d.minFilter);c.texParameteri(a,10240,d.magFilter);c.texParameteri(a,10242,d.wrapS);c.texParameteri(a,10243,d.wrapT);b.ext_texture_filter_anisotropic&&
c.texParameteri(a,34046,d.anisotropic);d.genMipmaps&&(c.hint(33170,d.mipmapHint),c.generateMipmap(a))}function aa(){var c=la.pop()||new W;W.call(c);return c}function ja(d){L.call(this);this.mipmask=0;this.internalformat=6408;this.id=ma++;this.refCount=1;this.target=d;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;D.profile&&(this.stats={size:0})}function ca(d){c.activeTexture(33984);c.bindTexture(d.target,d.texture)}function Y(){var d=da[0];d?c.bindTexture(d.target,d.texture):c.bindTexture(3553,
null)}function ea(d){var a=d.texture,f=d.unit,e=d.target;0<=f&&(c.activeTexture(33984+f),c.bindTexture(e,null),da[f]=null);c.deleteTexture(a);d.texture=null;d.params=null;d.pixels=null;d.refCount=0;delete fa[d.id];p.textureCount--}var ua={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ga={repeat:10497,clamp:33071,mirror:33648},qa={nearest:9728,linear:9729},ra=y({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},
qa),sa={none:0,browser:37444},ha={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ia={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ka={};b.ext_srgb&&(ia.srgb=35904,ia.srgba=35906);b.oes_texture_float&&(ha["float"]=5126);b.oes_texture_half_float&&(ha.float16=ha["half float"]=36193);b.webgl_depth_texture&&(y(ia,{depth:6402,"depth stencil":34041}),y(ha,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&
y(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&y(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&y(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Ba=Array.prototype.slice.call(c.getParameter(34467));Object.keys(ka).forEach(function(c){var d=
ka[c];0<=Ba.indexOf(d)&&(ia[c]=d)});var ya=Object.keys(ia);x.textureFormats=ya;var va=ya.reduce(function(c,d){var a=ia[d];6409===a||6406===a||6409===a||6410===a||6402===a||34041===a?c[a]=a:32855===a||0<=d.indexOf("rgba")?c[a]=6408:c[a]=6407;return c},{}),za=[],Aa=[],la=[],ma=0,fa={},pa=x.maxTextureUnits,da=Array(pa).map(function(){return null});y(ja.prototype,{bind:function(){this.bindCount+=1;var d=this.unit;if(0>d){for(var a=0;a<pa;++a){var f=da[a];if(f){if(0<f.bindCount)continue;f.unit=-1}da[a]=
this;d=a;break}D.profile&&p.maxTextureUnits<d+1&&(p.maxTextureUnits=d+1);this.unit=d;c.activeTexture(33984+d);c.bindTexture(this.target,this.texture)}return d},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ea(this)}});D.profile&&(p.getTotalTextureSize=function(){var c=0;Object.keys(fa).forEach(function(d){c+=fa[d].stats.size});return c});return{create2D:function(d,a){function f(c,d){var a=aa(),m=U();"number"===typeof c?"number"===typeof d?V(m,c|0,d|0):V(m,c|0,c|0):c?(S(a,
c),R(m,c)):V(m,1,1);a.genMipmaps&&(m.mipmask=(m.width<<1)-1);e.mipmask=m.mipmask;K(e,m);e.internalformat=m.internalformat;f.width=m.width;f.height=m.height;ca(e);Z(m,3553);ba(a,3553);Y();la.push(a);X(m);D.profile&&(e.stats.size=l(e.internalformat,e.type,m.width,m.height,a.genMipmaps,!1));return f}var e=new ja(3553);fa[e.id]=e;p.textureCount++;f(d,a);f.subimage=function(c,d,a,m){d|=0;a|=0;m|=0;var h=N();K(h,e);h.width>>=m;h.height>>=m;h.width-=d;h.height-=a;G(h,c);ca(e);M(h,3553,d,a,m);Y();Q(h);return f};
f.resize=function(d,a){var m=d|0,h=a|0||m;if(m===e.width&&h===e.height)return f;f.width=e.width=m;f.height=e.height=h;ca(e);c.texImage2D(3553,0,e.format,m,h,0,e.format,e.type,null);Y();D.profile&&(e.stats.size=l(e.internalformat,e.type,m,h,!1,!1));return f};f._reglType="texture2d";f._texture=e;D.profile&&(f.stats=e.stats);f.destroy=function(){e.decRef()};return f},createCube:function(d,a,f,e,m,h){function b(c,d,a,f,e,m){var h,x=aa();for(h=0;6>h;++h)k[h]=U();if("number"===typeof c||!c)for(c=c|0||1,
h=0;6>h;++h)V(k[h],c,c);else if("object"===typeof c)if(d)R(k[0],c),R(k[1],d),R(k[2],a),R(k[3],f),R(k[4],e),R(k[5],m);else if(S(x,c),J(n,c),"faces"in c)for(c=c.faces,h=0;6>h;++h)K(k[h],n),R(k[h],c[h]);else for(h=0;6>h;++h)R(k[h],c);K(n,k[0]);n.mipmask=x.genMipmaps?(k[0].width<<1)-1:k[0].mipmask;n.internalformat=k[0].internalformat;b.width=k[0].width;b.height=k[0].height;ca(n);for(h=0;6>h;++h)Z(k[h],34069+h);ba(x,34067);Y();D.profile&&(n.stats.size=l(n.internalformat,n.type,b.width,b.height,x.genMipmaps,
!0));la.push(x);for(h=0;6>h;++h)X(k[h]);return b}var n=new ja(34067);fa[n.id]=n;p.cubeCount++;var k=Array(6);b(d,a,f,e,m,h);b.subimage=function(c,d,a,f,e){a|=0;f|=0;e|=0;var m=N();K(m,n);m.width>>=e;m.height>>=e;m.width-=a;m.height-=f;G(m,d);ca(n);M(m,34069+c,a,f,e);Y();Q(m);return b};b.resize=function(d){d|=0;if(d!==n.width){b.width=n.width=d;b.height=n.height=d;ca(n);for(var a=0;6>a;++a)c.texImage2D(34069+a,0,n.format,d,d,0,n.format,n.type,null);Y();D.profile&&(n.stats.size=l(n.internalformat,n.type,
b.width,b.height,!1,!0));return b}};b._reglType="textureCube";b._texture=n;D.profile&&(b.stats=n.stats);b.destroy=function(){n.decRef()};return b},clear:function(){for(var d=0;d<pa;++d)c.activeTexture(33984+d),c.bindTexture(3553,null),da[d]=null;v(fa).forEach(ea);p.cubeCount=0;p.textureCount=0},getTexture:function(c){return null}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,
"./util/values":31}],20:[function(b,g,p){g.exports=function(b,q){function a(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function e(e,d,f){var m=v.pop()||new a;m.startQueryIndex=e;m.endQueryIndex=d;m.sum=0;m.stats=f;w.push(m)}var k=q.ext_disjoint_timer_query;if(!k)return null;var l=[],y=[],v=[],w=[],u=[],r=[];return{beginQuery:function(a){var d=l.pop()||k.createQueryEXT();k.beginQueryEXT(35007,d);y.push(d);e(y.length-1,y.length,a)},endQuery:function(){k.endQueryEXT(35007)},
pushScopeStats:e,update:function(){var a,d;a=y.length;if(0!==a){r.length=Math.max(r.length,a+1);u.length=Math.max(u.length,a+1);u[0]=0;var f=r[0]=0;for(d=a=0;d<y.length;++d){var e=y[d];k.getQueryObjectEXT(e,34919)?(f+=k.getQueryObjectEXT(e,34918),l.push(e)):y[a++]=e;u[d+1]=f;r[d+1]=a}y.length=a;for(d=a=0;d<w.length;++d){var f=w[d],b=f.startQueryIndex,e=f.endQueryIndex;f.sum+=u[e]-u[b];b=r[b];e=r[e];e===b?(f.stats.gpuTime+=f.sum/1E6,v.push(f)):(f.startQueryIndex=b,f.endQueryIndex=e,w[a++]=f)}w.length=
a}},getNumPendingQueries:function(){return y.length},clear:function(){l.push.apply(l,y);for(var a=0;a<l.length;a++)k.deleteQueryEXT(l[a]);y.length=0;l.length=0}}}},{}],21:[function(b,g,p){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(b,g,p){function t(a){return Array.prototype.slice.call(a)}function q(a){return t(a).join("")}var a=b("./extend");g.exports=function(){function e(){var e=[],h=[];return a(function(){e.push.apply(e,
t(arguments))},{def:function(){var d="v"+l++;h.push(d);0<arguments.length&&(e.push(d,"="),e.push.apply(e,t(arguments)),e.push(";"));return d},toString:function(){return q([0<h.length?"var "+h+";":"",q(e)])}})}function b(){function k(a,f){d(a,f,"=",h.def(a,f),";")}var h=e(),d=e(),f=h.toString,m=d.toString;return a(function(){h.apply(h,t(arguments))},{def:h.def,entry:h,exit:d,save:k,set:function(d,a,f){k(d,a);h(d,a,"=",f,";")},toString:function(){return f()+m()}})}var l=0,y=[],v=[],w=e(),u={};return{global:w,
link:function(a){for(var e=0;e<v.length;++e)if(v[e]===a)return y[e];e="g"+l++;y.push(e);v.push(a);return e},block:e,proc:function(e,h){function d(){var d="a"+f.length;f.push(d);return d}var f=[];h=h||0;for(var m=0;m<h;++m)d();var m=b(),n=m.toString;return u[e]=a(m,{arg:d,toString:function(){return q(["function(",f.join(),"){",n(),"}"])}})},scope:b,cond:function(){var e=q(arguments),h=b(),d=b(),f=h.toString,m=d.toString;return a(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){d.apply(d,
t(arguments));return this},toString:function(){var d=m();d&&(d="else{"+d+"}");return q(["if(",e,"){",f(),"}",d])}})},compile:function(){var a=['"use strict";',w,"return {"];Object.keys(u).forEach(function(d){a.push('"',d,'":',u[d].toString(),",")});a.push("}");var e=q(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(e)).apply(null,v)}}}},{"./extend":23}],23:[function(b,g,p){g.exports=function(b,q){for(var a=Object.keys(q),e=0;e<a.length;++e)b[a[e]]=
q[a[e]];return b}},{}],24:[function(b,g,p){var t=b("./is-typed-array");g.exports=function(b){return Array.isArray(b)||t(b)}},{"./is-typed-array":26}],25:[function(b,g,p){var t=b("./is-typed-array");g.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||t(b.data))}},{"./is-typed-array":26}],26:[function(b,g,p){var t=b("../constants/arraytypes.json");g.exports=function(b){return Object.prototype.toString.call(b)in
t}},{"../constants/arraytypes.json":4}],27:[function(b,g,p){g.exports=function(b,q){for(var a=Array(b),e=0;e<b;++e)a[e]=q(e);return a}},{}],28:[function(b,g,p){function t(a){var e,b;e=(65535<a)<<4;a>>>=e;b=(255<a)<<3;a>>>=b;e|=b;b=(15<a)<<2;a>>>=b;e|=b;b=(3<a)<<1;return e|b|a>>>b>>1}function q(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=e[t(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}function a(a){e[t(a.byteLength)>>2].push(a)}var e=b("./loop")(8,function(){return[]});
g.exports={alloc:q,free:a,allocType:function(a,e){var b=null;switch(a){case 5120:b=new Int8Array(q(e),0,e);break;case 5121:b=new Uint8Array(q(e),0,e);break;case 5122:b=new Int16Array(q(2*e),0,e);break;case 5123:b=new Uint16Array(q(2*e),0,e);break;case 5124:b=new Int32Array(q(4*e),0,e);break;case 5125:b=new Uint32Array(q(4*e),0,e);break;case 5126:b=new Float32Array(q(4*e),0,e);break;default:return null}return b.length!==e?b.subarray(0,e):b},freeType:function(e){a(e.buffer)}}},{"./loop":27}],29:[function(b,
g,p){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(b){return requestAnimationFrame(b)},cancel:function(b){return cancelAnimationFrame(b)}}:{next:function(b){return setTimeout(b,16)},cancel:clearTimeout}},{}],30:[function(b,g,p){var t=b("./pool"),q=new Float32Array(1),a=new Uint32Array(q.buffer);g.exports=function(e){for(var b=t.allocType(5123,e.length),l=0;l<e.length;++l)if(isNaN(e[l]))b[l]=65535;else if(Infinity===e[l])b[l]=31744;else if(-Infinity===
e[l])b[l]=64512;else{q[0]=e[l];var y=a[0],v=y>>>31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;b[l]=-24>w?v:-14>w?v+(y+1024>>-14-w):15<w?v+31744:v+(w+15<<10)+y}return b}},{"./pool":28}],31:[function(b,g,p){g.exports=function(b){return Object.keys(b).map(function(q){return b[q]})}},{}],32:[function(b,g,p){function t(a,e,b){function q(){var e=window.innerWidth,h=window.innerHeight;a!==document.body&&(h=a.getBoundingClientRect(),e=h.right-h.left,h=h.top-h.bottom);u.width=b*e;u.height=b*h;k(u.style,{width:e+"px",
height:h+"px"})}var u=document.createElement("canvas");k(u.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(u);a===document.body&&(u.style.position="absolute",k(a.style,{margin:0,padding:0}));window.addEventListener("resize",q,!1);q();return{canvas:u,onDestroy:function(){window.removeEventListener("resize",q);a.removeChild(u)}}}function q(a,e){function b(k){try{return a.getContext(k,e)}catch(q){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function a(a){return"string"===
typeof a?a.split():a}function e(a){return"string"===typeof a?document.querySelector(a):a}var k=b("./util/extend");g.exports=function(b){var k=b||{},v,w,u,r;b={};var h=[],d=[],f="undefined"===typeof window?1:window.devicePixelRatio,m=!1,n=function(d){},z=function(){};"string"===typeof k?v=document.querySelector(k):"object"===typeof k&&("string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?v=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?
(r=k,u=r.canvas):("gl"in k?r=k.gl:"canvas"in k?u=e(k.canvas):"container"in k&&(w=e(k.container)),"attributes"in k&&(b=k.attributes),"extensions"in k&&(h=a(k.extensions)),"optionalExtensions"in k&&(d=a(k.optionalExtensions)),"onDone"in k&&(n=k.onDone),"profile"in k&&(m=!!k.profile),"pixelRatio"in k&&(f=+k.pixelRatio)));v&&("canvas"===v.nodeName.toLowerCase()?u=v:w=v);if(!r){if(!u){v=t(w||document.body,n,f);if(!v)return null;u=v.canvas;z=v.onDestroy}r=q(u,b)}return r?{gl:r,canvas:u,container:w,extensions:h,
optionalExtensions:d,pixelRatio:f,profile:m,onDone:n,onDestroy:z}:(z(),n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],33:[function(b,g,p){function t(a,e,b){for(var v=[],w=e;w<b;w+=3)e=(a[w]<<16)+(a[w+1]<<8)+a[w+2],v.push(q[e>>18&63]+q[e>>12&63]+q[e>>6&63]+q[e&63]);return v.join("")}p.toByteArray=function(b){var l,q,v,w,u;l=b.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===b[l-2]?2:"="===
b[l-1]?1:0;u=new e(3*l/4-w);q=0<w?l-4:l;var r=0;for(l=0;l<q;l+=4)v=a[b.charCodeAt(l)]<<18|a[b.charCodeAt(l+1)]<<12|a[b.charCodeAt(l+2)]<<6|a[b.charCodeAt(l+3)],u[r++]=v>>16&255,u[r++]=v>>8&255,u[r++]=v&255;2===w?(v=a[b.charCodeAt(l)]<<2|a[b.charCodeAt(l+1)]>>4,u[r++]=v&255):1===w&&(v=a[b.charCodeAt(l)]<<10|a[b.charCodeAt(l+1)]<<4|a[b.charCodeAt(l+2)]>>2,u[r++]=v>>8&255,u[r++]=v&255);return u};p.fromByteArray=function(a){for(var e=a.length,b=e%3,v="",w=[],u=0,r=e-b;u<r;u+=16383)w.push(t(a,u,u+16383>
r?r:u+16383));1===b?(a=a[e-1],v+=q[a>>2],v+=q[a<<4&63],v+="=="):2===b&&(a=(a[e-2]<<8)+a[e-1],v+=q[a>>10],v+=q[a>>4&63],v+=q[a<<2&63],v+="=");w.push(v);return w.join("")};var q=[],a=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var e=0;64>e;++e)q[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;a[45]=62;a[95]=63})()},{}],34:[function(b,g,p){var t=b("./lib/rationalize");
g.exports=function(b,a){return t(b[0].mul(a[1]).add(a[0].mul(b[1])),b[1].mul(a[1]))}},{"./lib/rationalize":44}],35:[function(b,g,p){g.exports=function(b,q){return b[0].mul(q[1]).cmp(q[0].mul(b[1]))}},{}],36:[function(b,g,p){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[1]),b[1].mul(a[0]))}},{"./lib/rationalize":44}],37:[function(b,g,p){function t(b,w){if(q(b))return w?y(b,t(w)):[b[0].clone(),b[1].clone()];var u=0,r,h;if(a(b))r=b.clone();else if("string"===typeof b)r=k(b);
else{if(0===b)return[e(0),e(1)];if(b!==Math.floor(b))for(;b!==Math.floor(b);)b*=Math.pow(2,256),u-=256;r=e(b)}if(q(w))r.mul(w[1]),h=w[0].clone();else if(a(w))h=w.clone();else if("string"===typeof w)h=k(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),u+=256;h=e(w)}else h=e(1);0<u?r=r.shln(u):0>u&&(h=h.shln(-u));return l(r,h)}var q=b("./is-rat"),a=b("./lib/is-bn"),e=b("./lib/num-to-bn"),k=b("./lib/str-to-bn"),l=b("./lib/rationalize"),y=b("./div");g.exports=t},{"./div":36,
"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],38:[function(b,g,p){var t=b("./lib/is-bn");g.exports=function(b){return Array.isArray(b)&&2===b.length&&t(b[0])&&t(b[1])}},{"./lib/is-bn":42}],39:[function(b,g,p){var t=b("bn.js");g.exports=function(b){return b.cmp(new t(0))}},{"bn.js":47}],40:[function(b,g,p){g.exports=function(b){var q=b.length,a=b.words,e=0;if(1===q)e=a[0];else if(2===q)e=a[0]+67108864*a[1];else for(var k=e=0;k<q;k++)e+=a[k]*Math.pow(67108864,
k);return b.sign?-e:e}},{}],41:[function(b,g,p){var t=b("double-bits"),q=b("bit-twiddle").countTrailingZeros;g.exports=function(a){var e=q(t.lo(a));if(32>e)return e;a=q(t.hi(a));return 20<a?52:a+32}},{"bit-twiddle":52,"double-bits":73}],42:[function(b,g,p){b("bn.js");g.exports=function(b){return b&&"object"===typeof b&&!!b.words}},{"bn.js":47}],43:[function(b,g,p){var t=b("bn.js"),q=b("double-bits");g.exports=function(a){var e=q.exponent(a);return 52>e?new t(a):(new t(a*Math.pow(2,52-e))).shln(e-
52)}},{"bn.js":47,"double-bits":73}],44:[function(b,g,p){var t=b("./num-to-bn"),q=b("./bn-sign");g.exports=function(a,e){var b=q(a),l=q(e);if(0===b)return[t(0),t(1)];if(0===l)return[t(0),t(0)];0>l&&(a=a.neg(),e=e.neg());b=a.gcd(e);return b.cmpn(1)?[a.div(b),e.div(b)]:[a,e]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(b,g,p){var t=b("bn.js");g.exports=function(b){return new t(b)}},{"bn.js":47}],46:[function(b,g,p){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[0]),b[1].mul(a[1]))}},
{"./lib/rationalize":44}],47:[function(b,g,p){(function(b,q){function a(c,d){if(!c)throw Error(d||"Assertion failed");}function e(c,d){c.super_=d;var a=function(){};a.prototype=d.prototype;c.prototype=new a;c.prototype.constructor=c}function k(c,d,a){if(null!==c&&"object"===typeof c&&Array.isArray(c.words))return c;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===d||"be"===d)a=d,d=10;null!==c&&this._init(c||0,d||10,a||"be")}function l(c,d,a){var e=0;for(a=Math.min(c.length,a);d<
a;d++)var f=c.charCodeAt(d)-48,e=e<<4,e=49<=f&&54>=f?e|f-49+10:17<=f&&22>=f?e|f-17+10:e|f&15;return e}function y(c,d,a,e){var f=0;for(a=Math.min(c.length,a);d<a;d++)var b=c.charCodeAt(d)-48,f=f*e,f=49<=b?f+(b-49+10):17<=b?f+(b-17+10):f+b;return f}function v(c,d){this.name=c;this.p=new k(d,16);this.n=this.p.bitLength();this.k=(new k(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){v.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function d(c){"string"===typeof c?(c=k._prime(c),this.m=c.p,this.prime=c):(this.m=c,this.prime=null)}function f(c){d.call(this,c);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new k(1)).ishln(this.shift);
this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof b?b.exports=k:q.BN=k;k.BN=k;k.wordSize=26;k.prototype._init=function(c,d,e){if("number"===typeof c)return this._initNumber(c,d,e);if("object"===typeof c)return this._initArray(c,d,e);"hex"===d&&(d=16);a(d===(d|0)&&2<=d&&36>=d);c=c.toString().replace(/\s+/g,"");var f=0;"-"===c[0]&&f++;16===d?this._parseHex(c,f):this._parseBase(c,
d,f);"-"===c[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),d,e)};k.prototype._initNumber=function(c,d,e){0>c&&(this.sign=!0,c=-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(a(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===e&&this._initArray(this.toArray(),d,e)};k.prototype._initArray=function(c,d,e){a("number"===typeof c.length);if(0>=c.length)return this.words=
[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(d=0;d<this.length;d++)this.words[d]=0;var f=0;if("be"===e)for(d=c.length-1,e=0;0<=d;d-=3){var b=c[d]|c[d-1]<<8|c[d-2]<<16;this.words[e]|=b<<f&67108863;this.words[e+1]=b>>>26-f&67108863;f+=24;26<=f&&(f-=26,e++)}else if("le"===e)for(e=d=0;d<c.length;d+=3)b=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[e]|=b<<f&67108863,this.words[e+1]=b>>>26-f&67108863,f+=24,26<=f&&(f-=26,e++);return this.strip()};k.prototype._parseHex=
function(c,d){this.length=Math.ceil((c.length-d)/6);this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;for(var e=0,a=c.length-6,f=0;a>=d;a-=6){var b=l(c,a,a+6);this.words[f]|=b<<e&67108863;this.words[f+1]|=b>>>26-e&4194303;e+=24;26<=e&&(e-=26,f++)}a+6!==d&&(b=l(c,d,a+6),this.words[f]|=b<<e&67108863,this.words[f+1]|=b>>>26-e&4194303);this.strip()};k.prototype._parseBase=function(c,d,a){this.words=[0];this.length=1;for(var e=0,f=1;67108863>=f;f*=d)e++;e--;for(var f=f/d|0,b=
c.length-a,m=b%e,h=Math.min(b,b-m)+a,b=0;a<h;a+=e)b=y(c,a,a+e,d),this.imuln(f),67108864>this.words[0]+b?this.words[0]+=b:this._iaddn(b);if(0!==m){e=1;b=y(c,a,c.length,d);for(a=0;a<m;a++)e*=d;this.imuln(e);67108864>this.words[0]+b?this.words[0]+=b:this._iaddn(b)}};k.prototype.copy=function(c){c.words=Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length;c.sign=this.sign;c.red=this.red};k.prototype.clone=function(){var c=new k(null);this.copy(c);return c};k.prototype.strip=
function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};k.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(c,d){c=c||10;if(16===c||"hex"===c){var e="",f=0;d=d|0||1;for(var b=0,h=0;h<this.length;h++){var k=
this.words[h],l=((k<<f|b)&16777215).toString(16),b=k>>>24-f&16777215,e=0!==b||h!==this.length-1?m[6-l.length]+l+e:l+e,f=f+2;26<=f&&(f-=26,h--)}for(0!==b&&(e=b.toString(16)+e);0!==e.length%d;)e="0"+e;this.sign&&(e="-"+e);return e}if(c===(c|0)&&2<=c&&36>=c){f=n[c];b=z[c];e="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)k=h.modn(b).toString(c),h=h.idivn(b),e=0!==h.cmpn(0)?m[f-k.length]+k+e:k+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}a(!1,"Base should be between 2 and 36")};k.prototype.toJSON=
function(){return this.toString(16)};k.prototype.toArray=function(c){this.strip();var d=Array(this.byteLength());d[0]=0;var a=this.clone();if("le"!==c)for(c=0;0!==a.cmpn(0);c++){var e=a.andln(255);a.ishrn(8);d[d.length-c-1]=e}else for(c=0;0!==a.cmpn(0);c++)e=a.andln(255),a.ishrn(8),d[c]=e;return d};k.prototype._countBits=Math.clz32?function(c){return 32-Math.clz32(c)}:function(c){var d=0;4096<=c&&(d+=13,c>>>=13);64<=c&&(d+=7,c>>>=7);8<=c&&(d+=4,c>>>=4);2<=c&&(d+=2,c>>>=2);return d+c};k.prototype._zeroBits=
function(c){if(0===c)return 26;var d=0;0===(c&8191)&&(d+=13,c>>>=13);0===(c&127)&&(d+=7,c>>>=7);0===(c&15)&&(d+=4,c>>>=4);0===(c&3)&&(d+=2,c>>>=2);0===(c&1)&&d++;return d};k.prototype.bitLength=function(){var c=0,c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c};k.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var c=0,d=0;d<this.length;d++){var a=this._zeroBits(this.words[d]),c=c+a;if(26!==a)break}return c};k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};k.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var c=this.clone();c.sign=!this.sign;return c};k.prototype.ior=function(c){for(this.sign=this.sign||c.sign;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]|=c.words[d];return this.strip()};k.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)};k.prototype.iand=function(c){this.sign=this.sign&&c.sign;var d;d=this.length>c.length?c:this;for(var a=
0;a<d.length;a++)this.words[a]&=c.words[a];this.length=d.length;return this.strip()};k.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)};k.prototype.ixor=function(c){this.sign=this.sign||c.sign;var d;this.length>c.length?d=this:(d=c,c=this);for(var a=0;a<c.length;a++)this.words[a]=d.words[a]^c.words[a];if(this!==d)for(;a<d.length;a++)this.words[a]=d.words[a];this.length=d.length;return this.strip()};k.prototype.xor=function(c){return this.length>c.length?
this.clone().ixor(c):c.clone().ixor(this)};k.prototype.setn=function(c,d){a("number"===typeof c&&0<=c);for(var e=c/26|0,f=c%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=d?this.words[e]|1<<f:this.words[e]&~(1<<f);return this.strip()};k.prototype.iadd=function(c){if(this.sign&&!c.sign){this.sign=!1;var d=this.isub(c);this.sign=!this.sign;return this._normSign()}if(!this.sign&&c.sign)return c.sign=!1,d=this.isub(c),c.sign=!0,d._normSign();var a;this.length>c.length?a=this:(a=c,c=this);
for(var e=d=0;e<c.length;e++)d=a.words[e]+c.words[e]+d,this.words[e]=d&67108863,d>>>=26;for(;0!==d&&e<a.length;e++)d=a.words[e]+d,this.words[e]=d&67108863,d>>>=26;this.length=a.length;if(0!==d)this.words[this.length]=d,this.length++;else if(a!==this)for(;e<a.length;e++)this.words[e]=a.words[e];return this};k.prototype.add=function(c){if(c.sign&&!this.sign){c.sign=!1;var d=this.sub(c);c.sign=!0;return d}return!c.sign&&this.sign?(this.sign=!1,d=c.sub(this),this.sign=!0,d):this.length>c.length?this.clone().iadd(c):
c.clone().iadd(this)};k.prototype.isub=function(c){if(c.sign){c.sign=!1;var d=this.iadd(c);c.sign=!0;return d._normSign()}if(this.sign)return this.sign=!1,this.iadd(c),this.sign=!0,this._normSign();d=this.cmp(c);if(0===d)return this.sign=!1,this.length=1,this.words[0]=0,this;var a;0<d?a=this:(a=c,c=this);for(var e=0,f=0;f<c.length;f++)d=a.words[f]-c.words[f]+e,e=d>>26,this.words[f]=d&67108863;for(;0!==e&&f<a.length;f++)d=a.words[f]+e,e=d>>26,this.words[f]=d&67108863;if(0===e&&f<a.length&&a!==this)for(;f<
a.length;f++)this.words[f]=a.words[f];this.length=Math.max(this.length,f);a!==this&&(this.sign=!0);return this.strip()};k.prototype.sub=function(c){return this.clone().isub(c)};k.prototype._smallMulTo=function(c,d){d.sign=c.sign!==this.sign;d.length=this.length+c.length;for(var a=0,e=0;e<d.length-1;e++){for(var f=a>>>26,a=a&67108863,b=Math.min(e,c.length-1),m=Math.max(0,e-this.length+1);m<=b;m++)var h=(this.words[e-m]|0)*(c.words[m]|0),n=h&67108863,f=f+(h/67108864|0)|0,n=n+a|0,a=n&67108863,f=f+(n>>>
26)|0;d.words[e]=a;a=f}0!==a?d.words[e]=a:d.length--;return d.strip()};k.prototype._bigMulTo=function(c,d){d.sign=c.sign!==this.sign;d.length=this.length+c.length;for(var a=0,e=0,f=0;f<d.length-1;f++){for(var b=e,e=0,a=a&67108863,m=Math.min(f,c.length-1),h=Math.max(0,f-this.length+1);h<=m;h++)var n=(this.words[f-h]|0)*(c.words[h]|0),k=n&67108863,b=b+(n/67108864|0)|0,k=k+a|0,a=k&67108863,b=b+(k>>>26)|0,e=e+(b>>>26),b=b&67108863;d.words[f]=a;a=b}0!==a?d.words[f]=a:d.length--;return d.strip()};k.prototype.mulTo=
function(c,d){return 63>this.length+c.length?this._smallMulTo(c,d):this._bigMulTo(c,d)};k.prototype.mul=function(c){var d=new k(null);d.words=Array(this.length+c.length);return this.mulTo(c,d)};k.prototype.imul=function(c){if(0===this.cmpn(0)||0===c.cmpn(0))return this.words[0]=0,this.length=1,this;var d=this.length,a=c.length;this.sign=c.sign!==this.sign;this.length+=c.length;this.words[this.length-1]=0;for(var e=this.length-2;0<=e;e--){for(var f=0,b=0,m=Math.min(e,a-1),h=Math.max(0,e-d+1);h<=m;h++)var n=
e-h,n=this.words[n]*c.words[h],k=n&67108863,f=f+(n/67108864|0),k=k+b,b=k&67108863,f=f+(k>>>26);this.words[e]=b;this.words[e+1]+=f}f=0;for(n=1;n<this.length;n++)c=this.words[n]+f,this.words[n]=c&67108863,f=c>>>26;return this.strip()};k.prototype.imuln=function(c){a("number"===typeof c);for(var d=0,e=0;e<this.length;e++){var f=this.words[e]*c,b=(f&67108863)+(d&67108863),d=d>>26,d=d+(f/67108864|0),d=d+(b>>>26);this.words[e]=b&67108863}0!==d&&(this.words[e]=d,this.length++);return this};k.prototype.muln=
function(c){return this.clone().imuln(c)};k.prototype.sqr=function(){return this.mul(this)};k.prototype.isqr=function(){return this.mul(this)};k.prototype.ishln=function(c){a("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;var e=67108863>>>26-d<<26-d;if(0!==d){for(var f=0,b=0;b<this.length;b++){var m=this.words[b]&e;this.words[b]=this.words[b]-m<<d|f;f=m>>>26-d}f&&(this.words[b]=f,this.length++)}if(0!==c){for(b=this.length-1;0<=b;b--)this.words[b+c]=this.words[b];for(b=0;b<c;b++)this.words[b]=0;
this.length+=c}return this.strip()};k.prototype.ishrn=function(c,d,e){a("number"===typeof c&&0<=c);var f=c%26,b=Math.min((c-f)/26,this.length);c=67108863^67108863>>>f<<f;d=(d?(d-d%26)/26:0)-b;d=Math.max(0,d);if(e){for(var m=0;m<b;m++)e.words[m]=this.words[m];e.length=b}if(0!==b)if(this.length>b)for(this.length-=b,m=0;m<this.length;m++)this.words[m]=this.words[m+b];else this.words[0]=0,this.length=1;b=0;for(m=this.length-1;0<=m&&(0!==b||m>=d);m--){var h=this.words[m];this.words[m]=b<<26-f|h>>>f;b=
h&c}e&&0!==b&&(e.words[e.length++]=b);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};k.prototype.shln=function(c){return this.clone().ishln(c)};k.prototype.shrn=function(c){return this.clone().ishrn(c)};k.prototype.testn=function(c){a("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;return this.length<=c?!1:!!(this.words[c]&1<<d)};k.prototype.imaskn=function(c){a("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;a(!this.sign,"imaskn works only with positive numbers");0!==
d&&c++;this.length=Math.min(c,this.length);0!==d&&(this.words[this.length-1]&=67108863^67108863>>>d<<d);return this.strip()};k.prototype.maskn=function(c){return this.clone().imaskn(c)};k.prototype.iaddn=function(c){a("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};k.prototype._iaddn=function(c){this.words[0]+=c;for(c=
0;c<this.length&&67108864<=this.words[c];c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;this.length=Math.max(this.length,c+1);return this};k.prototype.isubn=function(c){a("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};k.prototype.addn=function(c){return this.clone().iaddn(c)};
k.prototype.subn=function(c){return this.clone().isubn(c)};k.prototype.iabs=function(){this.sign=!1;return this};k.prototype.abs=function(){return this.clone().iabs()};k.prototype._ishlnsubmul=function(c,d,e){var f=c.length+e,b;if(this.words.length<f){var m=Array(f);for(b=0;b<this.length;b++)m[b]=this.words[b];this.words=m}else b=this.length;for(this.length=Math.max(this.length,f);b<this.length;b++)this.words[b]=0;for(b=m=0;b<c.length;b++)f=this.words[b+e]+m,m=c.words[b]*d,f-=m&67108863,m=(f>>26)-
(m/67108864|0),this.words[b+e]=f&67108863;for(;b<this.length-e;b++)f=this.words[b+e]+m,m=f>>26,this.words[b+e]=f&67108863;if(0===m)return this.strip();a(-1===m);for(b=m=0;b<this.length;b++)f=-this.words[b]+m,m=f>>26,this.words[b]=f&67108863;this.sign=!0;return this.strip()};k.prototype._wordDiv=function(c,d){var a=this.length-c.length,e=this.clone(),f=c,b=f.words[f.length-1],a=26-this._countBits(b);0!==a&&(f=f.shln(a),e.ishln(a),b=f.words[f.length-1]);var m=e.length-f.length,h;if("mod"!==d){h=new k(null);
h.length=m+1;h.words=Array(h.length);for(var n=0;n<h.length;n++)h.words[n]=0}n=e.clone()._ishlnsubmul(f,1,m);n.sign||(e=n,h&&(h.words[m]=1));for(--m;0<=m;m--){n=67108864*e.words[f.length+m]+e.words[f.length+m-1];n=Math.min(n/b|0,67108863);for(e._ishlnsubmul(f,n,m);e.sign;)n--,e.sign=!1,e._ishlnsubmul(f,1,m),0!==e.cmpn(0)&&(e.sign=!e.sign);h&&(h.words[m]=n)}h&&h.strip();e.strip();"div"!==d&&0!==a&&e.ishrn(a);return{div:h?h:null,mod:e}};k.prototype.divmod=function(c,d){a(0!==c.cmpn(0));if(this.sign&&
!c.sign){var e=this.neg().divmod(c,d),f,b;"mod"!==d&&(f=e.div.neg());"div"!==d&&(b=0===e.mod.cmpn(0)?e.mod:c.sub(e.mod));return{div:f,mod:b}}return!this.sign&&c.sign?(e=this.divmod(c.neg(),d),"mod"!==d&&(f=e.div.neg()),{div:f,mod:e.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),d):c.length>this.length||0>this.cmp(c)?{div:new k(0),mod:this}:1===c.length?"div"===d?{div:this.divn(c.words[0]),mod:null}:"mod"===d?{div:null,mod:new k(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new k(this.modn(c.words[0]))}:
this._wordDiv(c,d)};k.prototype.div=function(c){return this.divmod(c,"div").div};k.prototype.mod=function(c){return this.divmod(c,"mod").mod};k.prototype.divRound=function(c){var d=this.divmod(c);if(0===d.mod.cmpn(0))return d.div;var a=d.div.sign?d.mod.isub(c):d.mod,e=c.shrn(1);c=c.andln(1);a=a.cmp(e);return 0>a||1===c&&0===a?d.div:d.div.sign?d.div.isubn(1):d.div.iaddn(1)};k.prototype.modn=function(c){a(67108863>=c);for(var d=67108864%c,e=0,f=this.length-1;0<=f;f--)e=(d*e+this.words[f])%c;return e};
k.prototype.idivn=function(c){a(67108863>=c);for(var d=0,e=this.length-1;0<=e;e--)d=this.words[e]+67108864*d,this.words[e]=d/c|0,d%=c;return this.strip()};k.prototype.divn=function(c){return this.clone().idivn(c)};k.prototype.egcd=function(c){a(!c.sign);a(0!==c.cmpn(0));var d=this,e=c.clone(),d=d.sign?d.mod(c):d.clone();c=new k(1);for(var f=new k(0),b=new k(0),m=new k(1),h=0;d.isEven()&&e.isEven();)d.ishrn(1),e.ishrn(1),++h;for(var n=e.clone(),l=d.clone();0!==d.cmpn(0);){for(;d.isEven();)d.ishrn(1),
c.isEven()&&f.isEven()?(c.ishrn(1),f.ishrn(1)):(c.iadd(n).ishrn(1),f.isub(l).ishrn(1));for(;e.isEven();)e.ishrn(1),b.isEven()&&m.isEven()?(b.ishrn(1),m.ishrn(1)):(b.iadd(n).ishrn(1),m.isub(l).ishrn(1));0<=d.cmp(e)?(d.isub(e),c.isub(b),f.isub(m)):(e.isub(d),b.isub(c),m.isub(f))}return{a:b,b:m,gcd:e.ishln(h)}};k.prototype._invmp=function(c){a(!c.sign);a(0!==c.cmpn(0));var d=this,e=c.clone(),d=d.sign?d.mod(c):d.clone();c=new k(1);for(var f=new k(0),b=e.clone();0<d.cmpn(1)&&0<e.cmpn(1);){for(;d.isEven();)d.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(b).ishrn(1);for(;e.isEven();)e.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(b).ishrn(1);0<=d.cmp(e)?(d.isub(e),c.isub(f)):(e.isub(d),f.isub(c))}return 0===d.cmpn(1)?c:f};k.prototype.gcd=function(c){if(0===this.cmpn(0))return c.clone();if(0===c.cmpn(0))return this.clone();var d=this.clone();c=c.clone();d.sign=!1;c.sign=!1;for(var a=0;d.isEven()&&c.isEven();a++)d.ishrn(1),c.ishrn(1);do{for(;d.isEven();)d.ishrn(1);for(;c.isEven();)c.ishrn(1);var e=d.cmp(c);if(0>e)e=d,d=c,c=e;else if(0===
e||0===c.cmpn(1))break;d.isub(c)}while(1);return c.ishln(a)};k.prototype.invm=function(c){return this.egcd(c).a.mod(c)};k.prototype.isEven=function(){return 0===(this.words[0]&1)};k.prototype.isOdd=function(){return 1===(this.words[0]&1)};k.prototype.andln=function(c){return this.words[0]&c};k.prototype.bincn=function(c){a("number"===typeof c);var d=c%26;c=(c-d)/26;var e=1<<d;if(this.length<=c){for(d=this.length;d<c+1;d++)this.words[d]=0;this.words[c]|=e;this.length=c+1;return this}for(d=c;0!==e&&
d<this.length;d++)c=this.words[d],c+=e,e=c>>>26,c&=67108863,this.words[d]=c;0!==e&&(this.words[d]=e,this.length++);return this};k.prototype.cmpn=function(c){var d=0>c;d&&(c=-c);if(this.sign&&!d)return-1;if(!this.sign&&d)return 1;c&=67108863;this.strip();1<this.length?c=1:(d=this.words[0],c=d===c?0:d<c?-1:1);this.sign&&(c=-c);return c};k.prototype.cmp=function(c){if(this.sign&&!c.sign)return-1;if(!this.sign&&c.sign)return 1;c=this.ucmp(c);return this.sign?-c:c};k.prototype.ucmp=function(c){if(this.length>
c.length)return 1;if(this.length<c.length)return-1;for(var d=0,a=this.length-1;0<=a;a--){var e=this.words[a],f=c.words[a];if(e!==f){e<f?d=-1:e>f&&(d=1);break}}return d};k.red=function(c){return new d(c)};k.prototype.toRed=function(c){a(!this.red,"Already a number in reduction context");a(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};k.prototype.fromRed=function(){a(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
k.prototype._forceRed=function(c){this.red=c;return this};k.prototype.forceRed=function(c){a(!this.red,"Already a number in reduction context");return this._forceRed(c)};k.prototype.redAdd=function(c){a(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};k.prototype.redIAdd=function(c){a(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};k.prototype.redSub=function(c){a(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};k.prototype.redISub=
function(c){a(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};k.prototype.redShl=function(c){a(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};k.prototype.redMul=function(c){a(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};k.prototype.redIMul=function(c){a(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};k.prototype.redSqr=function(){a(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};k.prototype.redISqr=function(){a(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};k.prototype.redSqrt=function(){a(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};k.prototype.redInvm=function(){a(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};k.prototype.redNeg=
function(){a(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};k.prototype.redPow=function(c){a(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var g={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var c=new k(null);c.words=Array(Math.ceil(this.n/13));return c};v.prototype.ireduce=function(c){var d;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),d=c.bitLength();while(d>this.n);
d=d<this.n?-1:c.ucmp(this.p);0===d?(c.words[0]=0,c.length=1):0<d?c.isub(this.p):c.strip();return c};v.prototype.split=function(c,d){c.ishrn(this.n,0,d)};v.prototype.imulK=function(c){return c.imul(this.k)};e(w,v);w.prototype.split=function(c,d){for(var a=Math.min(c.length,9),e=0;e<a;e++)d.words[e]=c.words[e];d.length=a;if(9>=c.length)c.words[0]=0,c.length=1;else{a=c.words[9];d.words[d.length++]=a&4194303;for(e=10;e<c.length;e++){var f=c.words[e];c.words[e-10]=(f&4194303)<<4|a>>>22;a=f}c.words[e-10]=
a>>>22;c.length-=9}};w.prototype.imulK=function(c){c.words[c.length]=0;c.words[c.length+1]=0;c.length+=2;for(var d,a=0,e=0;e<c.length;e++){var f=c.words[e];d=64*f;a+=977*f;d+=a/67108864|0;a&=67108863;c.words[e]=a;a=d}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};e(u,v);e(r,v);e(h,v);h.prototype.imulK=function(c){for(var d=0,a=0;a<c.length;a++){var d=19*c.words[a]+d,e=d&67108863,d=d>>>26;c.words[a]=e}0!==d&&(c.words[c.length++]=d);return c};k._prime=function(c){if(g[c])return g[c];
var d;if("k256"===c)d=new w;else if("p224"===c)d=new u;else if("p192"===c)d=new r;else if("p25519"===c)d=new h;else throw Error("Unknown prime "+c);return g[c]=d};d.prototype._verify1=function(c){a(!c.sign,"red works only with positives");a(c.red,"red works only with red numbers")};d.prototype._verify2=function(c,d){a(!c.sign&&!d.sign,"red works only with positives");a(c.red&&c.red===d.red,"red works only with red numbers")};d.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):
c.mod(this.m)._forceRed(this)};d.prototype.neg=function(c){c=c.clone();c.sign=!c.sign;return c.iadd(this.m)._forceRed(this)};d.prototype.add=function(c,d){this._verify2(c,d);var a=c.add(d);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};d.prototype.iadd=function(c,d){this._verify2(c,d);var a=c.iadd(d);0<=a.cmp(this.m)&&a.isub(this.m);return a};d.prototype.sub=function(c,d){this._verify2(c,d);var a=c.sub(d);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};d.prototype.isub=function(c,
d){this._verify2(c,d);var a=c.isub(d);0>a.cmpn(0)&&a.iadd(this.m);return a};d.prototype.shl=function(c,d){this._verify1(c);return this.imod(c.shln(d))};d.prototype.imul=function(c,d){this._verify2(c,d);return this.imod(c.imul(d))};d.prototype.mul=function(c,d){this._verify2(c,d);return this.imod(c.mul(d))};d.prototype.isqr=function(c){return this.imul(c,c)};d.prototype.sqr=function(c){return this.mul(c,c)};d.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var d=this.m.andln(3);a(1===
d%2);if(3===d){var d=this.m.add(new k(1)).ishrn(2),e=this.pow(c,d);return e}for(var f=this.m.subn(1),b=0;0!==f.cmpn(0)&&0===f.andln(1);)b++,f.ishrn(1);a(0!==f.cmpn(0));for(var d=(new k(1)).toRed(this),e=d.redNeg(),m=this.m.subn(1).ishrn(1),h=this.m.bitLength(),h=(new k(2*h*h)).toRed(this);0!==this.pow(h,m).cmp(e);)h.redIAdd(e);m=this.pow(h,f);e=this.pow(c,f.addn(1).ishrn(1));c=this.pow(c,f);for(f=b;0!==c.cmp(d);){h=c;for(b=0;0!==h.cmp(d);b++)h=h.redSqr();a(b<f);m=this.pow(m,(new k(1)).ishln(f-b-1));
e=e.redMul(m);m=m.redSqr();c=c.redMul(m);f=b}return e};d.prototype.invm=function(c){c=c._invmp(this.m);return c.sign?(c.sign=!1,this.imod(c).redNeg()):this.imod(c)};d.prototype.pow=function(c,d){var a=[];if(0===d.cmpn(0))return new k(1);for(var e=d.clone();0!==e.cmpn(0);)a.push(e.andln(1)),e.ishrn(1);for(var f=c,b=0;b<a.length&&0===a[b];b++,f=this.sqr(f));if(++b<a.length)for(e=this.sqr(f);b<a.length;b++,e=this.sqr(e))0!==a[b]&&(f=this.mul(f,e));return f};d.prototype.convertTo=function(c){var d=c.mod(this.m);
return d===c?d.clone():d};d.prototype.convertFrom=function(c){c=c.clone();c.red=null;return c};k.mont=function(c){return new f(c)};e(f,d);f.prototype.convertTo=function(c){return this.imod(c.shln(this.shift))};f.prototype.convertFrom=function(c){c=this.imod(c.mul(this.rinv));c.red=null;return c};f.prototype.imul=function(c,d){if(0===c.cmpn(0)||0===d.cmpn(0))return c.words[0]=0,c.length=1,c;var a=c.imul(d),e=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=a=a.isub(e).ishrn(this.shift);
0<=a.cmp(this.m)?e=a.isub(this.m):0>a.cmpn(0)&&(e=a.iadd(this.m));return e._forceRed(this)};f.prototype.mul=function(c,d){if(0===c.cmpn(0)||0===d.cmpn(0))return(new k(0))._forceRed(this);var a=c.mul(d),e=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=a=a.isub(e).ishrn(this.shift);0<=a.cmp(this.m)?e=a.isub(this.m):0>a.cmpn(0)&&(e=a.iadd(this.m));return e._forceRed(this)};f.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],48:[function(b,g,p){var t=b("./lib/bn-sign");g.exports=function(b){return t(b[0])*t(b[1])}},{"./lib/bn-sign":39}],49:[function(b,g,p){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[1]).sub(b[1].mul(a[0])),b[1].mul(a[1]))}},{"./lib/rationalize":44}],50:[function(b,g,p){var t=b("./lib/bn-to-num"),q=b("./lib/ctz");g.exports=function(a){var e=a[0];a=a[1];if(0===e.cmpn(0))return 0;var b=e.divmod(a),e=t(b.div),b=b.mod;if(0===b.cmpn(0))return e;if(e){var l=
q(e)+4;a=t(b.shln(l).divRound(a));0>e&&(a=-a);return e+a*Math.pow(2,-l)}e=a.bitLength()-b.bitLength()+53;a=t(b.shln(e).divRound(a));if(1023>e)return a*Math.pow(2,-e);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-e)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(b,g,p){function t(a,e,b,l,q){a=["function ",a,"(a,l,h,",l.join(","),"){",q?"":"var i=",b?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];q?0>e.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",e,"){i=m;");b?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");q?a.push("return -1};"):a.push("return i};");return a.join("")}function q(a,e,b,l){return(new Function([t("A","x"+a+"y",e,["y"],l),t("P","c(x,y)"+a+"0",e,["y","c"],l),"function dispatchBsearch",b,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",b].join("")))()}
g.exports={ge:q(">=",!1,"GE"),gt:q(">",!1,"GT"),lt:q("<",!0,"LT"),le:q("<=",!0,"LE"),eq:q("-",!0,"EQ",!0)}},{}],52:[function(b,g,p){function t(a){var e=32;(a&=-a)&&e--;a&65535&&(e-=16);a&16711935&&(e-=8);a&252645135&&(e-=4);a&858993459&&(e-=2);a&1431655765&&--e;return e}"use restrict";p.INT_BITS=32;p.INT_MAX=2147483647;p.INT_MIN=-2147483648;p.sign=function(a){return(0<a)-(0>a)};p.abs=function(a){var e=a>>31;return(a^e)-e};p.min=function(a,e){return e^(a^e)&-(a<e)};p.max=function(a,e){return a^(a^
e)&-(a<e)};p.isPow2=function(a){return!(a&a-1)&&!!a};p.log2=function(a){var e,b;e=(65535<a)<<4;a>>>=e;b=(255<a)<<3;a>>>=b;e|=b;b=(15<a)<<2;a>>>=b;e|=b;b=(3<a)<<1;return e|b|a>>>b>>1};p.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};p.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};p.countTrailingZeros=t;p.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};p.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};p.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var q=Array(256);(function(a){for(var e=0;256>e;++e){for(var b=e,l=e,q=7,b=b>>>1;b;b>>>=1)l<<=1,l|=b&1,--q;a[e]=l<<q&255}})(q);p.reverse=function(a){return q[a&255]<<24|q[a>>>8&255]<<16|q[a>>>16&255]<<8|q[a>>>24&255]};p.interleave2=function(a,e){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1};p.deinterleave2=function(a,e){a=a>>>e&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};p.interleave3=function(a,e,b){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;a=(a|a<<2)&1227133513|((e|e<<2)&1227133513)<<1;b&=1023;
b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return a|((b|b<<2)&1227133513)<<2};p.deinterleave3=function(a,e){a=a>>>e&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};p.nextCombination=function(a){var e=a|a-1;return e+1|(~e&-~e)-1>>>t(a)+1}},{}],53:[function(b,g,p){function t(a,e,b,k){for(var h=0,d=0,f=0,m=a.length;f<m;++f){var n=a[f],l;a:{for(l=0;l<e;++l)if(!(n[l]<=n[l+e])){l=!0;break a}l=!1}if(!l){for(l=0;l<2*e;++l)b[h++]=
n[l];k[d++]=f}}return d}function q(a,b,u,r){var h=a.length,d=b.length;if(!(0>=h||0>=d)){var f=a[0].length>>>1;if(!(0>=f)){var m,n=e.mallocDouble(2*f*h),q=e.mallocInt32(h),h=t(a,f,n,q);if(0<h){if(1===f&&r)k.init(h),m=k.sweepComplete(f,u,0,h,n,q,0,h,n,q);else{a=e.mallocDouble(2*f*d);var y=e.mallocInt32(d),d=t(b,f,a,y);0<d&&(k.init(h+d),m=1===f?k.sweepBipartite(f,u,0,h,n,q,0,d,a,y):l(f,u,r,h,n,q,d,a,y),e.free(a),e.free(y))}e.free(n);e.free(q)}return m}}}function a(a,e){y.push([a,e])}g.exports=function(e,
b,k){switch(arguments.length){case 1:return y=[],q(e,e,a,!0),y;case 2:if("function"===typeof b)return q(e,e,b,!0);y=[];q(e,b,a,!1);return y;case 3:return q(e,b,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=b("typedarray-pool"),k=b("./lib/sweep"),l=b("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(b,g,p){function t(a){function e(e,b){var k,h="bruteForce"+(e?"Red":"Blue")+(b?"Flip":"")+(a?"Full":"");k=["function ",h,"(",q.join(),
"){","var ","es","=2*","d",";"];var d="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";e?k.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",d):k.push(d,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");a?k.push("if(y1<x0||x1<y0)continue;"):b?k.push("if(y0<=x0||x1<y0)continue;"):k.push("if(y0<x0||x1<y0)continue;");k.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
b?k.push("yi,xi"):k.push("xi,yi");k.push(");if(rv!==void 0)return rv;}}}");k=k.join("");l.push(k);v.push("return "+h+"("+q.join()+");")}var b="bruteForce"+(a?"Full":"Partial"),l=[],y=q.slice();a||y.splice(3,0,"fp");var v=["function "+b+"("+y.join()+"){"];v.push("if(re-rs>be-bs){");a?(e(!0,!1),v.push("}else{"),e(!1,!1)):(v.push("if(fp){"),e(!0,!0),v.push("}else{"),e(!0,!1),v.push("}}else{if(fp){"),e(!1,!0),v.push("}else{"),e(!1,!1),v.push("}"));v.push("}}return "+b);b=l.join("")+v.join("");return(new Function(b))()}
var q="d ax vv rs re rb ri bs be bb bi".split(" ");p.partial=t(!1);p.full=t(!0)},{}],55:[function(b,g,p){function t(d,a,e,f,b,m,h,n,k){var l=z*d;c[l]=a;c[l+1]=e;c[l+2]=f;c[l+3]=b;c[l+4]=m;c[l+5]=h;d*=E;x[d]=n;x[d+1]=k}g.exports=function(b,g,p,B,O,I,D,L,K){var J=8*a.log2(B+D+1)*(b+1)|0,P=a.nextPow2(z*J);c.length<P&&(q.free(c),c=q.mallocInt32(P));J=a.nextPow2(E*J);x<J&&(q.free(x),x=q.mallocDouble(J));var J=0,P=2*b,H;t(J++,0,0,B,0,D,p?16:0,-Infinity,Infinity);for(p||t(J++,0,0,D,0,B,1,-Infinity,Infinity);0<
J;){--J;p=J*z;var G=c[p];D=c[p+1];var M=c[p+2],N=c[p+3],Q=c[p+4];p=c[p+5];B=J*E;var T=x[B],V=x[B+1],R=p&1,Z=!!(p&16),U=O,X=I,W=L;B=K;R&&(U=L,X=K,W=O,B=I);if(p&2&&(M=d(b,G,D,M,U,X,V),D>=M))continue;if(p&4&&(D=f(b,G,D,M,U,X,T),D>=M))continue;p=M-D;var S=Q-N;if(Z){if(b*p*(p+S)<u){H=l.scanComplete(b,G,g,D,M,U,X,N,Q,W,B);if(void 0!==H)return H;continue}}else if(b*Math.min(p,S)<v){H=e(b,G,g,R,D,M,U,X,N,Q,W,B);if(void 0!==H)return H;continue}else if(b*p*S<w){H=l.scanBipartite(b,G,g,R,D,M,U,X,N,Q,W,B);if(void 0!==
H)return H;continue}p=r(b,G,D,M,U,X,T,V);if(D<p)if(b*(p-D)<v){if(H=k(b,G+1,g,D,p,U,X,N,Q,W,B),void 0!==H)return H}else if(G===b-2){if(H=R?l.sweepBipartite(b,g,N,Q,W,B,D,p,U,X):l.sweepBipartite(b,g,D,p,U,X,N,Q,W,B),void 0!==H)return H}else t(J++,G+1,D,p,N,Q,R,-Infinity,Infinity),t(J++,G+1,N,Q,D,p,R^1,-Infinity,Infinity);if(p<M)if(D=y(b,G,N,Q,W,B),H=W[P*D+G],S=h(b,G,D,Q,W,B,H),S<Q&&t(J++,G,p,M,S,Q,(R|4)+(Z?16:0),H,V),N<D&&t(J++,G,p,M,N,D,(R|2)+(Z?16:0),T,H),D+1===S){if(Z)a:{N=b;Q=g;B=B[D];R=2*N;D*=
R;T=W[D+G];V=p;p*=R;b:for(;V<M;++V,p+=R)if(Z=X[V],Z!==B&&(S=U[p+G],H=U[p+G+N],!(T<S||H<T))){for(var ba=G+1;ba<N;++ba){S=U[p+ba];H=U[p+ba+N];var aa=W[D+ba+N];if(H<W[D+ba]||aa<S)continue b}Z=Q(Z,B);if(void 0!==Z){H=Z;break a}}H=void 0}else a:{N=b;Q=g;B=B[D];T=2*N;D*=T;V=W[D+G];Z=p;p*=T;b:for(;Z<M;++Z,p+=T)if(S=U[p+G],H=U[p+G+N],!(V<S||H<V||R&&V===S)){ba=X[Z];for(aa=G+1;aa<N;++aa){S=U[p+aa];H=U[p+aa+N];var ja=W[D+aa+N];if(H<W[D+aa]||ja<S)continue b}S=R?Q(B,ba):Q(ba,B);if(void 0!==S){H=S;break a}}H=void 0}if(void 0!==
H)return H}else if(D<S)if(Z){if(M=m(b,G,p,M,U,X,H),p<M)if(N=h(b,G,p,M,U,X,H),G===b-2){if(p<N&&(H=l.sweepComplete(b,g,p,N,U,X,D,S,W,B),void 0!==H)||N<M&&(H=l.sweepBipartite(b,g,N,M,U,X,D,S,W,B),void 0!==H))return H}else p<N&&t(J++,G+1,p,N,D,S,16,-Infinity,Infinity),N<M&&(t(J++,G+1,N,M,D,S,0,-Infinity,Infinity),t(J++,G+1,D,S,N,M,1,-Infinity,Infinity))}else M=R?n(b,G,p,M,U,X,H):m(b,G,p,M,U,X,H),p<M&&(G===b-2?R?l.sweepBipartite(b,g,D,S,W,B,p,M,U,X):l.sweepBipartite(b,g,p,M,U,X,D,S,W,B):(t(J++,G+1,p,M,
D,S,R,-Infinity,Infinity),t(J++,G+1,D,S,p,M,R^1,-Infinity,Infinity)))}};var q=b("typedarray-pool"),a=b("bit-twiddle");g=b("./brute");var e=g.partial,k=g.full,l=b("./sweep"),y=b("./median");b=b("./partition");var v=128,w=4194304,u=4194304,r=b("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=b("lo===p0",["p0"]),d=b("lo<p0",["p0"]),f=b("hi<=p0",["p0"]),m=b("lo<=p0&&p0<=hi",["p0"]),n=b("lo<p0&&p0<=hi",["p0"]),z=6,E=2,c=q.mallocInt32(1024),x=q.mallocDouble(1024)},{"./brute":54,"./median":56,"./partition":57,"./sweep":59,
"bit-twiddle":52,"typedarray-pool":121}],56:[function(b,g,p){g.exports=function(a,e,b,l,y,v){if(l<=b+1)return b;var w=b,u=l;l=l+b>>>1;for(var r=2*a,h=l,d=y[r*l+e];w<u;){if(u-w<q){for(var h=e,d=y,f=v,m=2*a,n=m*(w+1)+h,z=w+1;z<u;++z,n+=m)for(var g=d[n],c=z,x=m*(z-1);c>w&&d[x+h]>g;--c,x-=m){for(var p=x,F=x+m,A=0;A<m;++A,++p,++F){var B=d[p];d[p]=d[F];d[F]=B}p=f[c];f[c]=f[c-1];f[c-1]=p}break}n=u-w;h=Math.random()*n+w|0;d=y[r*h+e];m=Math.random()*n+w|0;f=y[r*m+e];z=Math.random()*n+w|0;n=y[r*z+e];d<=f?n>=
f?(h=m,d=f):d>=n||(h=z,d=n):f>=n?(h=m,d=f):n>=d||(h=z,d=n);f=r*(u-1);m=r*h;for(n=0;n<r;++n,++f,++m)z=y[f],y[f]=y[m],y[m]=z;f=v[u-1];v[u-1]=v[h];v[h]=f;h=t(a,e,w,u-1,y,v,d);f=r*(u-1);m=r*h;for(n=0;n<r;++n,++f,++m)z=y[f],y[f]=y[m],y[m]=z;f=v[u-1];v[u-1]=v[h];v[h]=f;if(l<h){for(u=h-1;w<u&&y[r*(u-1)+e]===d;)--u;u+=1}else if(h<l)for(w=h+1;w<u&&y[r*w+e]===d;)w+=1;else break}return t(a,e,b,l,y,v,y[r*l+e])};var t=b("./partition")("lo<p0",["p0"]),q=8},{"./partition":57}],57:[function(b,g,p){g.exports=function(b,
a){var e="abcdef".split("").concat(a),k=[];0<=b.indexOf("lo")&&k.push("lo=e[k+n]");0<=b.indexOf("hi")&&k.push("hi=e[k+o]");e.push(t.replace("_",k.join()).replace("$",b));return Function.apply(void 0,e)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(b,g,p){function t(a,e,b){for(var h=2*(a+1),d=a+1;d<=e;++d){for(var f=b[h++],m=b[h++],n=
d,k=h-2;n-- >a;){var l=b[k-2],c=b[k-1];if(l<f)break;else if(l===f&&c<m)break;b[k]=l;b[k+1]=c;k-=2}b[k]=f;b[k+1]=m}}function q(a,e,b){a*=2;e*=2;var h=b[a],d=b[a+1];b[a]=b[e];b[a+1]=b[e+1];b[e]=h;b[e+1]=d}function a(a,e,b){a*=2;e*=2;b[a]=b[e];b[a+1]=b[e+1]}function e(a,e,b,h,d){a*=2;e*=2;d[a]=d[e];d[e]=b;d[a+1]=d[e+1];d[e+1]=h}function k(a,e,b){a*=2;e*=2;var h=b[a],d=b[e];return h<d?!1:h===d?b[a+1]>b[e+1]:!0}function l(a,e,b,h){a*=2;var d=h[a];return d<e?!0:d===e?h[a+1]<b:!1}function y(b,u,r){var h=
(u-b+1)/6|0,d=b+h,f=u-h,m=b+u>>1,n=m-h,z=m+h,g=d,c=n,x=m,p=z,F=f,h=b+1,A=u-1,B=0;k(g,c,r)&&(B=g,g=c,c=B);k(p,F,r)&&(B=p,p=F,F=B);k(g,x,r)&&(B=g,g=x,x=B);k(c,x,r)&&(B=c,c=x,x=B);k(g,p,r)&&(B=g,g=p,p=B);k(x,p,r)&&(B=x,x=p,p=B);k(c,F,r)&&(B=c,c=F,F=B);k(c,x,r)&&(B=c,c=x,x=B);k(p,F,r)&&(B=p,p=F,F=B);for(var B=r[2*c],c=r[2*c+1],O=r[2*p],p=r[2*p+1],g=2*g,x=2*x,F=2*F,d=2*d,m=2*m,f=2*f,I=0;2>I;++I){var D=r[x+I],L=r[F+I];r[d+I]=r[g+I];r[m+I]=D;r[f+I]=L}a(n,b,r);a(z,u,r);for(n=h;n<=A;++n)if(l(n,B,c,r))n!==
h&&q(n,h,r),++h;else if(!l(n,O,p,r))for(;;)if(l(A,O,p,r)){l(A,B,c,r)?(z=n,f=h,m=A,g=r,z*=2,f*=2,m*=2,d=g[z],x=g[z+1],g[z]=g[f],g[z+1]=g[f+1],g[f]=g[m],g[f+1]=g[m+1],g[m]=d,g[m+1]=x,++h):q(n,A,r);--A;break}else if(--A<n)break;e(b,h-1,B,c,r);e(u,A+1,O,p,r);h-2-b<=v?t(b,h-2,r):y(b,h-2,r);u-(A+2)<=v?t(A+2,u,r):y(A+2,u,r);A-h<=v?t(h,A,r):y(h,A,r)}g.exports=function(a,e){e<=4*v?t(0,e-1,a):y(0,e-1,a)};var v=32},{}],59:[function(b,g,p){function t(d,a,e,b){b=a[b];e=d[e-1];d[b]=e;a[e]=b}g.exports={init:function(d){d=
a.nextPow2(d);l.length<d&&(q.free(l),l=q.mallocInt32(d));y.length<d&&(q.free(y),y=q.mallocInt32(d));v.length<d&&(q.free(v),v=q.mallocInt32(d));w.length<d&&(q.free(w),w=q.mallocInt32(d));u.length<d&&(q.free(u),u=q.mallocInt32(d));r.length<d&&(q.free(r),r=q.mallocInt32(d));d*=8;h.length<d&&(q.free(h),h=q.mallocDouble(d))},sweepBipartite:function(d,a,b,n,r,q,c,u,g,p){var A=0,B=2*d;--d;for(var O=B-1;b<n;++b){var I=q[b],D=B*b;h[A++]=r[D+d];h[A++]=-(I+1);h[A++]=r[D+O];h[A++]=I}for(b=c;b<u;++b)I=p[b]+k,
n=B*b,h[A++]=g[n+d],h[A++]=-I,h[A++]=g[n+O],h[A++]=I;u=A>>>1;e(h,u);for(b=p=g=0;b<u;++b)if(A=h[2*b+1]|0,A>=k)A=A-k|0,t(v,w,p--,A);else if(0<=A)t(l,y,g--,A);else{if(A<=-k){A=-A-k|0;for(B=0;B<g;++B)if(n=a(l[B],A),void 0!==n)return n;B=w;n=p++;v[n]=A}else{A=-A-1|0;for(B=0;B<p;++B)if(n=a(A,v[B]),void 0!==n)return n;B=y;n=g++;l[n]=A}B[A]=n}},sweepComplete:function(d,a,b,n,k,q,c,g,p,F){var A=0,B=2*d;--d;for(var O=B-1;b<n;++b){var I=q[b]+1<<1,D=B*b;h[A++]=k[D+d];h[A++]=-I;h[A++]=k[D+O];h[A++]=I}for(b=c;b<
g;++b)I=F[b]+1<<1,n=B*b,h[A++]=p[n+d],h[A++]=-I|1,h[A++]=p[n+O],h[A++]=I|1;g=A>>>1;e(h,g);for(b=A=F=p=0;b<g;++b)if(B=h[2*b+1]|0,n=B&1,b<g-1&&B>>1===h[2*b+3]>>1&&(n=2,b+=1),0>B){B=-(B>>1)-1;for(k=0;k<A;++k)if(q=a(u[k],B),void 0!==q)return q;if(0!==n)for(k=0;k<p;++k)if(q=a(l[k],B),void 0!==q)return q;if(1!==n)for(k=0;k<F;++k)if(q=a(v[k],B),void 0!==q)return q;0===n?(n=y,k=p++,l[k]=B,n[B]=k):1===n?(n=w,k=F++,v[k]=B,n[B]=k):2===n&&(n=r,k=A++,u[k]=B,n[B]=k)}else B=(B>>1)-1,0===n?t(l,y,p--,B):1===n?t(v,
w,F--,B):2===n&&t(u,r,A--,B)},scanBipartite:function(d,a,b,n,r,q,c,u,v,g,w,p){var O=0,I=2*d,D=a+d,L=1,K=1;for(n?K=k:L=k;r<q;++r){var J=r+L,P=I*r;h[O++]=c[P+a];h[O++]=-J;h[O++]=c[P+D];h[O++]=J}for(r=v;r<g;++r)J=r+K,q=I*r,h[O++]=w[q+a],h[O++]=-J;g=O>>>1;e(h,g);for(r=O=0;r<g;++r)if(J=h[2*r+1]|0,0>J)if(J=-J,K=!1,J>=k?(K=!n,J-=k):(K=!!n,--J),K)K=y,q=O++,l[q]=J,K[J]=q;else a:for(K=p[J],J*=I,q=w[J+a+1],v=w[J+a+1+d],D=0;D<O;++D){var P=l[D],H=I*P;if(!(v<c[H+a+1]||c[H+a+1+d]<q)){for(var G=a+2;G<d;++G)if(w[J+
G+d]<c[H+G]||c[H+G+d]<w[J+G])continue a;P=u[P];P=n?b(K,P):b(P,K);if(void 0!==P)return P}}else t(l,y,O--,J-L)},scanComplete:function(d,a,b,n,r,q,c,u,v,y,g){for(var w=0,t=2*d,p=a+d;n<r;++n){var D=n+k,L=t*n;h[w++]=q[L+a];h[w++]=-D;h[w++]=q[L+p];h[w++]=D}for(n=u;n<v;++n)D=n+1,r=t*n,h[w++]=y[r+a],h[w++]=-D;v=w>>>1;e(h,v);for(n=w=0;n<v;++n)if(r=h[2*n+1]|0,0>r)if(D=-r,D>=k)l[w++]=D-k;else a:for(--D,r=g[D],D*=t,p=y[D+a+1],L=y[D+a+1+d],u=0;u<w;++u){var K=l[u],J=c[K];if(J===r)break;K*=t;if(!(L<q[K+a+1]||q[K+
a+1+d]<p)){for(var P=a+2;P<d;++P)if(y[D+P+d]<q[K+P]||q[K+P+d]<y[D+P])continue a;J=b(J,r);if(void 0!==J)return J}}else{D=r-k;for(u=w-1;0<=u;--u)if(l[u]===D){for(P=u+1;P<w;++P)l[P-1]=l[P];break}--w}}};var q=b("typedarray-pool"),a=b("bit-twiddle"),e=b("./sort"),k=268435456,l=q.mallocInt32(1024),y=q.mallocInt32(1024),v=q.mallocInt32(1024),w=q.mallocInt32(1024),u=q.mallocInt32(1024),r=q.mallocInt32(1024),h=q.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],60:[function(b,g,p){(function(g){function q(){try{var c=
new Uint8Array(1);c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===c.foo()&&"function"===typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(d){return!1}}function a(c,d){if((e.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<d)throw new RangeError("Invalid typed array length");e.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(d),c.__proto__=e.prototype):(null===c&&(c=new e(d)),c.length=d);return c}function e(c,d,a){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(c,
d,a);if("number"===typeof c){if("string"===typeof d)throw Error("If encoding is specified then the first argument must be a string");return y(this,c)}return k(this,c,d,a)}function k(c,d,b,f){if("number"===typeof d)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer){d.byteLength;if(0>b||d.byteLength<b)throw new RangeError("'offset' is out of bounds");if(d.byteLength<b+(f||0))throw new RangeError("'length' is out of bounds");d=
void 0===f?new Uint8Array(d,b):new Uint8Array(d,b,f);e.TYPED_ARRAY_SUPPORT?(c=d,c.__proto__=e.prototype):c=v(c,d);return c}if("string"===typeof d){f=c;if("string"!==typeof b||""===b)b="utf8";if(!e.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');c=r(d,b)|0;f=a(f,c);f.write(d,b);return f}return w(c,d)}function l(c){if("number"!==typeof c)throw new TypeError('"size" argument must be a number');}function y(c,d){l(d);c=a(c,0>d?0:u(d)|0);if(!e.TYPED_ARRAY_SUPPORT)for(var b=
0;b<d;++b)c[b]=0;return c}function v(c,d){var e=u(d.length)|0;c=a(c,e);for(var b=0;b<e;b+=1)c[b]=d[b]&255;return c}function w(c,d){if(e.isBuffer(d)){var b=u(d.length)|0;c=a(c,b);if(0===c.length)return c;d.copy(c,0,0,b);return c}if(d){if("undefined"!==typeof ArrayBuffer&&d.buffer instanceof ArrayBuffer||"length"in d)return(b="number"!==typeof d.length)||(b=d.length,b=b!==b),b?a(c,0):v(c,d);if("Buffer"===d.type&&K(d.data))return v(c,d.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function u(c){if(c>=(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function r(c,d){if(e.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var a=c.length;if(0===a)return 0;for(var b=!1;;)switch(d){case "ascii":case "binary":case "raw":case "raws":return a;
case "utf8":case "utf-8":case void 0:return B(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*a;case "hex":return a>>>1;case "base64":return D.toByteArray(A(c)).length;default:if(b)return B(c).length;d=(""+d).toLowerCase();b=!0}}function h(c,d,a){var e=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=0;d>>>=0;if(a<=d)return"";for(c||(c="utf8");;)switch(c){case "hex":c=d;d=a;a=this.length;if(!c||0>c)c=0;
if(!d||0>d||d>a)d=a;e="";for(a=c;a<d;++a)c=e,e=this[a],e=16>e?"0"+e.toString(16):e.toString(16),e=c+e;return e;case "utf8":case "utf-8":return m(this,d,a);case "ascii":c="";for(a=Math.min(this.length,a);d<a;++d)c+=String.fromCharCode(this[d]&127);return c;case "binary":c="";for(a=Math.min(this.length,a);d<a;++d)c+=String.fromCharCode(this[d]);return c;case "base64":return d=0===d&&a===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(d,a)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.slice(d,a);a="";for(c=0;c<d.length;c+=2)a+=String.fromCharCode(d[c]+256*d[c+1]);return a;default:if(e)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase();e=!0}}function d(c,d,a){var e=c[d];c[d]=c[a];c[a]=e}function f(c,d,a,e){var b=1,f=c.length,m=d.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>c.length||2>d.length)return-1;b=2;f/=2;m/=2;a/=2}for(e=-1;a<f;++a){var h=1===b?c[a]:c.readUInt16BE(a*b),n;n=-1===e?0:a-e;
n=1===b?d[n]:d.readUInt16BE(n*b);if(h===n){if(-1===e&&(e=a),a-e+1===m)return e*b}else-1!==e&&(a-=a-e),e=-1}return-1}function m(c,d,a){a=Math.min(c.length,a);for(var e=[];d<a;){var b=c[d],f=null,m=239<b?4:223<b?3:191<b?2:1;if(d+m<=a){var h,n,k;switch(m){case 1:128>b&&(f=b);break;case 2:h=c[d+1];128===(h&192)&&(b=(b&31)<<6|h&63,127<b&&(f=b));break;case 3:h=c[d+1];n=c[d+2];128===(h&192)&&128===(n&192)&&(b=(b&15)<<12|(h&63)<<6|n&63,2047<b&&(55296>b||57343<b)&&(f=b));break;case 4:h=c[d+1],n=c[d+2],k=c[d+
3],128===(h&192)&&128===(n&192)&&128===(k&192)&&(b=(b&15)<<18|(h&63)<<12|(n&63)<<6|k&63,65535<b&&1114112>b&&(f=b))}}null===f?(f=65533,m=1):65535<f&&(f-=65536,e.push(f>>>10&1023|55296),f=56320|f&1023);e.push(f);d+=m}c=e.length;if(c<=J)e=String.fromCharCode.apply(String,e);else{a="";for(d=0;d<c;)a+=String.fromCharCode.apply(String,e.slice(d,d+=J));e=a}return e}function n(c,d,a){if(0!==c%1||0>c)throw new RangeError("offset is not uint");if(c+d>a)throw new RangeError("Trying to access beyond buffer length");
}function z(c,d,a,b,f,m){if(!e.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>f||d<m)throw new RangeError('"value" argument is out of bounds');if(a+b>c.length)throw new RangeError("Index out of range");}function E(c,d,a,e){0>d&&(d=65535+d+1);for(var b=0,f=Math.min(c.length-a,2);b<f;++b)c[a+b]=(d&255<<8*(e?b:1-b))>>>8*(e?b:1-b)}function c(c,d,a,e){0>d&&(d=4294967295+d+1);for(var b=0,f=Math.min(c.length-a,4);b<f;++b)c[a+b]=d>>>8*(e?b:3-b)&255}function x(c,d,a,e,
b,f){if(a+e>c.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function C(c,d,a,e,b){b||x(c,d,a,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(c,d,a,e,23,4);return a+4}function F(c,d,a,e,b){b||x(c,d,a,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(c,d,a,e,52,8);return a+8}function A(c){c=c.trim?c.trim():c.replace(/^\s+|\s+$/g,"");c=c.replace(P,"");if(2>c.length)return"";for(;0!==c.length%4;)c+="=";return c}function B(c,d){d=d||
Infinity;for(var a,e=c.length,b=null,f=[],m=0;m<e;++m){a=c.charCodeAt(m);if(55295<a&&57344>a){if(!b){if(56319<a){-1<(d-=3)&&f.push(239,191,189);continue}else if(m+1===e){-1<(d-=3)&&f.push(239,191,189);continue}b=a;continue}if(56320>a){-1<(d-=3)&&f.push(239,191,189);b=a;continue}a=(b-55296<<10|a-56320)+65536}else b&&-1<(d-=3)&&f.push(239,191,189);b=null;if(128>a){if(0>--d)break;f.push(a)}else if(2048>a){if(0>(d-=2))break;f.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(d-=3))break;f.push(a>>12|224,
a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(d-=4))break;f.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return f}function O(c){for(var d=[],a=0;a<c.length;++a)d.push(c.charCodeAt(a)&255);return d}function I(c,d,a,e){for(var b=0;b<e&&!(b+a>=d.length||b>=c.length);++b)d[b+a]=c[b];return b}var D=b("base64-js"),L=b("ieee754"),K=b("isarray");p.Buffer=e;p.SlowBuffer=function(c){+c!=c&&(c=0);return e.alloc(+c)};p.INSPECT_MAX_BYTES=50;e.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:q();p.kMaxLength=e.TYPED_ARRAY_SUPPORT?2147483647:1073741823;e.poolSize=8192;e._augment=function(c){c.__proto__=e.prototype;return c};e.from=function(c,d,a){return k(null,c,d,a)};e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&($jscomp.initSymbol(),Object.defineProperty(e,Symbol.species,
{value:null,configurable:!0})));e.alloc=function(c,d,e){l(c);c=0>=c?a(null,c):void 0!==d?"string"===typeof e?a(null,c).fill(d,e):a(null,c).fill(d):a(null,c);return c};e.allocUnsafe=function(c){return y(null,c)};e.allocUnsafeSlow=function(c){return y(null,c)};e.isBuffer=function(c){return!(null==c||!c._isBuffer)};e.compare=function(c,d){if(!e.isBuffer(c)||!e.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(c===d)return 0;for(var a=c.length,b=d.length,f=0,m=Math.min(a,b);f<m;++f)if(c[f]!==
d[f]){a=c[f];b=d[f];break}return a<b?-1:b<a?1:0};e.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};e.concat=function(c,d){if(!K(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return e.alloc(0);var a;if(void 0===d)for(a=d=0;a<c.length;++a)d+=c[a].length;var b=e.allocUnsafe(d),f=0;for(a=
0;a<c.length;++a){var m=c[a];if(!e.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(b,f);f+=m.length}return b};e.byteLength=r;e.prototype._isBuffer=!0;e.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<c;a+=2)d(this,a,a+1);return this};e.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<c;a+=
4)d(this,a,a+3),d(this,a+1,a+2);return this};e.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?m(this,0,c):h.apply(this,arguments)};e.prototype.equals=function(c){if(!e.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===e.compare(this,c)};e.prototype.inspect=function(){var c="",d=p.INSPECT_MAX_BYTES;0<this.length&&(c=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(c+=" ... "));return"<Buffer "+c+">"};e.prototype.compare=
function(c,d,a,b,f){if(!e.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===d&&(d=0);void 0===a&&(a=c?c.length:0);void 0===b&&(b=0);void 0===f&&(f=this.length);if(0>d||a>c.length||0>b||f>this.length)throw new RangeError("out of range index");if(b>=f&&d>=a)return 0;if(b>=f)return-1;if(d>=a)return 1;d>>>=0;a>>>=0;b>>>=0;f>>>=0;if(this===c)return 0;var m=f-b,h=a-d,n=Math.min(m,h);b=this.slice(b,f);c=c.slice(d,a);for(d=0;d<n;++d)if(b[d]!==c[d]){m=b[d];h=c[d];break}return m<h?-1:h<
m?1:0};e.prototype.indexOf=function(c,d,a){"string"===typeof d?(a=d,d=0):2147483647<d?d=2147483647:-2147483648>d&&(d=-2147483648);d>>=0;if(0===this.length||d>=this.length)return-1;0>d&&(d=Math.max(this.length+d,0));"string"===typeof c&&(c=e.from(c,a));if(e.isBuffer(c))return 0===c.length?-1:f(this,c,d,a);if("number"===typeof c)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,c,d):f(this,[c],d,a);throw new TypeError("val must be string, number or Buffer");
};e.prototype.includes=function(c,d,a){return-1!==this.indexOf(c,d,a)};e.prototype.write=function(c,d,a,e){if(void 0===d)e="utf8",a=this.length,d=0;else if(void 0===a&&"string"===typeof d)e=d,a=this.length,d=0;else if(isFinite(d))d|=0,isFinite(a)?(a|=0,void 0===e&&(e="utf8")):(e=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var b=this.length-d;if(void 0===a||a>b)a=b;if(0<c.length&&(0>a||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
e||(e="utf8");for(b=!1;;)switch(e){case "hex":a:{d=Number(d)||0;e=this.length-d;a?(a=Number(a),a>e&&(a=e)):a=e;e=c.length;if(0!==e%2)throw Error("Invalid hex string");a>e/2&&(a=e/2);for(e=0;e<a;++e){b=parseInt(c.substr(2*e,2),16);if(isNaN(b)){c=e;break a}this[d+e]=b}c=e}return c;case "utf8":case "utf-8":return I(B(c,this.length-d),this,d,a);case "ascii":return I(O(c),this,d,a);case "binary":return I(O(c),this,d,a);case "base64":return I(D.toByteArray(A(c)),this,d,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=
this.length-d;for(var f=void 0,f=b=void 0,m=[],h=0;h<c.length&&!(0>(e-=2));++h)f=c.charCodeAt(h),b=f>>8,f%=256,m.push(f),m.push(b);return I(m,this,d,a);default:if(b)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();b=!0}};e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;e.prototype.slice=function(c,d){var a=this.length;c=~~c;d=void 0===d?a:~~d;0>c?(c+=a,0>c&&(c=0)):c>a&&(c=a);0>d?(d+=a,0>d&&(d=0)):d>a&&(d=a);d<c&&(d=
c);if(e.TYPED_ARRAY_SUPPORT)a=this.subarray(c,d),a.__proto__=e.prototype;else for(var b=d-c,a=new e(b,void 0),f=0;f<b;++f)a[f]=this[f+c];return a};e.prototype.readUIntLE=function(c,d,a){c|=0;d|=0;a||n(c,d,this.length);a=this[c];for(var e=1,b=0;++b<d&&(e*=256);)a+=this[c+b]*e;return a};e.prototype.readUIntBE=function(c,d,a){c|=0;d|=0;a||n(c,d,this.length);a=this[c+--d];for(var e=1;0<d&&(e*=256);)a+=this[c+--d]*e;return a};e.prototype.readUInt8=function(c,d){d||n(c,1,this.length);return this[c]};e.prototype.readUInt16LE=
function(c,d){d||n(c,2,this.length);return this[c]|this[c+1]<<8};e.prototype.readUInt16BE=function(c,d){d||n(c,2,this.length);return this[c]<<8|this[c+1]};e.prototype.readUInt32LE=function(c,d){d||n(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};e.prototype.readUInt32BE=function(c,d){d||n(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};e.prototype.readIntLE=function(c,d,a){c|=0;d|=0;a||n(c,d,this.length);a=this[c];for(var e=1,b=0;++b<
d&&(e*=256);)a+=this[c+b]*e;a>=128*e&&(a-=Math.pow(2,8*d));return a};e.prototype.readIntBE=function(c,d,a){c|=0;d|=0;a||n(c,d,this.length);a=d;for(var e=1,b=this[c+--a];0<a&&(e*=256);)b+=this[c+--a]*e;b>=128*e&&(b-=Math.pow(2,8*d));return b};e.prototype.readInt8=function(c,d){d||n(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};e.prototype.readInt16LE=function(c,d){d||n(c,2,this.length);var a=this[c]|this[c+1]<<8;return a&32768?a|4294901760:a};e.prototype.readInt16BE=function(c,d){d||
n(c,2,this.length);var a=this[c+1]|this[c]<<8;return a&32768?a|4294901760:a};e.prototype.readInt32LE=function(c,d){d||n(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};e.prototype.readInt32BE=function(c,d){d||n(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};e.prototype.readFloatLE=function(c,d){d||n(c,4,this.length);return L.read(this,c,!0,23,4)};e.prototype.readFloatBE=function(c,d){d||n(c,4,this.length);return L.read(this,c,!1,23,4)};e.prototype.readDoubleLE=
function(c,d){d||n(c,8,this.length);return L.read(this,c,!0,52,8)};e.prototype.readDoubleBE=function(c,d){d||n(c,8,this.length);return L.read(this,c,!1,52,8)};e.prototype.writeUIntLE=function(c,d,a,e){c=+c;d|=0;a|=0;e||z(this,c,d,a,Math.pow(2,8*a)-1,0);e=1;var b=0;for(this[d]=c&255;++b<a&&(e*=256);)this[d+b]=c/e&255;return d+a};e.prototype.writeUIntBE=function(c,d,a,e){c=+c;d|=0;a|=0;e||z(this,c,d,a,Math.pow(2,8*a)-1,0);e=a-1;var b=1;for(this[d+e]=c&255;0<=--e&&(b*=256);)this[d+e]=c/b&255;return d+
a};e.prototype.writeUInt8=function(c,d,a){c=+c;d|=0;a||z(this,c,d,1,255,0);e.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[d]=c&255;return d+1};e.prototype.writeUInt16LE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):E(this,c,d,!0);return d+2};e.prototype.writeUInt16BE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):E(this,c,d,!1);return d+2};e.prototype.writeUInt32LE=function(d,a,b){d=
+d;a|=0;b||z(this,d,a,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[a+3]=d>>>24,this[a+2]=d>>>16,this[a+1]=d>>>8,this[a]=d&255):c(this,d,a,!0);return a+4};e.prototype.writeUInt32BE=function(d,a,b){d=+d;a|=0;b||z(this,d,a,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[a]=d>>>24,this[a+1]=d>>>16,this[a+2]=d>>>8,this[a+3]=d&255):c(this,d,a,!1);return a+4};e.prototype.writeIntLE=function(c,d,a,e){c=+c;d|=0;e||(e=Math.pow(2,8*a-1),z(this,c,d,a,e-1,-e));e=0;var b=1,f=0;for(this[d]=c&255;++e<a&&(b*=256);)0>c&&
0===f&&0!==this[d+e-1]&&(f=1),this[d+e]=(c/b>>0)-f&255;return d+a};e.prototype.writeIntBE=function(c,d,a,e){c=+c;d|=0;e||(e=Math.pow(2,8*a-1),z(this,c,d,a,e-1,-e));e=a-1;var b=1,f=0;for(this[d+e]=c&255;0<=--e&&(b*=256);)0>c&&0===f&&0!==this[d+e+1]&&(f=1),this[d+e]=(c/b>>0)-f&255;return d+a};e.prototype.writeInt8=function(c,d,a){c=+c;d|=0;a||z(this,c,d,1,127,-128);e.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[d]=c&255;return d+1};e.prototype.writeInt16LE=function(c,d,a){c=+c;d|=0;
a||z(this,c,d,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):E(this,c,d,!0);return d+2};e.prototype.writeInt16BE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):E(this,c,d,!1);return d+2};e.prototype.writeInt32LE=function(d,a,b){d=+d;a|=0;b||z(this,d,a,4,2147483647,-2147483648);e.TYPED_ARRAY_SUPPORT?(this[a]=d&255,this[a+1]=d>>>8,this[a+2]=d>>>16,this[a+3]=d>>>24):c(this,d,a,!0);return a+4};e.prototype.writeInt32BE=
function(d,a,b){d=+d;a|=0;b||z(this,d,a,4,2147483647,-2147483648);0>d&&(d=4294967295+d+1);e.TYPED_ARRAY_SUPPORT?(this[a]=d>>>24,this[a+1]=d>>>16,this[a+2]=d>>>8,this[a+3]=d&255):c(this,d,a,!1);return a+4};e.prototype.writeFloatLE=function(c,d,a){return C(this,c,d,!0,a)};e.prototype.writeFloatBE=function(c,d,a){return C(this,c,d,!1,a)};e.prototype.writeDoubleLE=function(c,d,a){return F(this,c,d,!0,a)};e.prototype.writeDoubleBE=function(c,d,a){return F(this,c,d,!1,a)};e.prototype.copy=function(c,d,
a,b){a||(a=0);b||0===b||(b=this.length);d>=c.length&&(d=c.length);d||(d=0);0<b&&b<a&&(b=a);if(b===a||0===c.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);c.length-d<b-a&&(b=c.length-d+a);var f=b-a;if(this===c&&a<d&&d<b)for(b=f-1;0<=b;--b)c[b+d]=this[b+a];else if(1E3>f||!e.TYPED_ARRAY_SUPPORT)for(b=
0;b<f;++b)c[b+d]=this[b+a];else Uint8Array.prototype.set.call(c,this.subarray(a,a+f),d);return f};e.prototype.fill=function(c,d,a,b){if("string"===typeof c){"string"===typeof d?(b=d,d=0,a=this.length):"string"===typeof a&&(b=a,a=this.length);if(1===c.length){var f=c.charCodeAt(0);256>f&&(c=f)}if(void 0!==b&&"string"!==typeof b)throw new TypeError("encoding must be a string");if("string"===typeof b&&!e.isEncoding(b))throw new TypeError("Unknown encoding: "+b);}else"number"===typeof c&&(c&=255);if(0>
d||this.length<d||this.length<a)throw new RangeError("Out of range index");if(a<=d)return this;d>>>=0;a=void 0===a?this.length:a>>>0;c||(c=0);if("number"===typeof c)for(b=d;b<a;++b)this[b]=c;else for(c=e.isBuffer(c)?c:B((new e(c,b)).toString()),f=c.length,b=0;b<a-d;++b)this[b+d]=c[b%f];return this};var P=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:81,isarray:87}],61:[function(b,g,
p){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function q(a,e){return a[0]-e[0]||a[1]-e[1]}function a(a,e,b){return e in a?a[e]:b}var e=b("./lib/monotone"),k=b("./lib/triangulation"),l=b("./lib/delaunay"),y=b("./lib/filter");g.exports=function(b,g,u){Array.isArray(g)?(u=u||{},g=g||[]):(u=g||{},g=[]);var r=!!a(u,"delaunay",!0),h=!!a(u,"interior",!0),d=!!a(u,"exterior",!0);u=!!a(u,"infinity",!1);if(!h&&!d||0===b.length)return[];var f=e(b,g);if(r||h!==d||u){g=k(b.length,g.map(t).sort(q));
for(var m=0;m<f.length;++m){var n=f[m];g.addTriangle(n[0],n[1],n[2])}r&&l(b,g);return d?h?u?y(g,0,u):g.cells():y(g,1,u):y(g,-1)}return f}},{"./lib/delaunay":62,"./lib/filter":63,"./lib/monotone":64,"./lib/triangulation":65}],62:[function(b,g,p){function t(a,e,b,l,y,v){var g=e.opposite(l,y);if(!(0>g)){if(y<l){var u=l;l=y;y=u;u=v;v=g;g=u}e.isConstraint(l,y)||0>q(a[l],a[y],a[v],a[g])&&b.push(l,y)}}var q=b("robust-in-sphere")[4];b("binary-search-bounds");g.exports=function(a,e){for(var b=[],l=a.length,
g=e.stars,v=0;v<l;++v)for(var w=g[v],u=1;u<w.length;u+=2){var r=w[u];if(!(r<v||e.isConstraint(v,r))){for(var h=w[u-1],d=-1,f=1;f<w.length;f+=2)if(w[f-1]===r){d=w[f];break}0>d||0>q(a[v],a[r],a[h],a[d])&&b.push(v,r)}}for(;0<b.length;){r=b.pop();v=b.pop();d=h=-1;w=g[v];for(l=1;l<w.length;l+=2)u=w[l-1],f=w[l],u===r?d=f:f===r&&(h=u);0>h||0>d||0<=q(a[v],a[r],a[h],a[d])||(e.flip(v,r),t(a,e,b,h,v,d),t(a,e,b,v,d,h),t(a,e,b,d,r,h),t(a,e,b,r,h,d))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],63:[function(b,
g,p){function t(a,b,l,q,v,g,u){this.cells=a;this.neighbor=b;this.flags=q;this.constraint=l;this.active=v;this.next=g;this.boundary=u}function q(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}var a=b("binary-search-bounds");g.exports=function(a,b,l){for(var g=a.cells(),v=g.length,w=0;w<v;++w){var u=g[w],r=u[0],h=u[1],d=u[2];h<d?h<r&&(u[0]=h,u[1]=d,u[2]=r):d<r&&(u[0]=d,u[1]=r,u[2]=h)}g.sort(q);for(var f=Array(v),w=0;w<f.length;++w)f[w]=0;var m=[],n=[],z=Array(3*v),p=Array(3*v),c=null;l&&(c=[]);d=new t(g,
z,p,f,m,n,c);for(w=0;w<v;++w)for(var u=g[w],x=0;3>x;++x){var r=u[x],h=u[(x+1)%3],C=z[3*w+x]=d.locate(h,r,a.opposite(h,r)),F=p[3*w+x]=a.isConstraint(r,h);0>C&&(F?n.push(w):(m.push(w),f[w]=1),l&&c.push([h,r,-1]))}if(0===b)return l?d.cells.concat(d.boundary):d.cells;v=1;w=d.active;u=d.next;a=d.flags;g=d.cells;r=d.constraint;for(h=d.neighbor;0<w.length||0<u.length;){for(;0<w.length;)if(f=w.pop(),a[f]!==-v)for(a[f]=v,m=0;3>m;++m)n=h[3*f+m],0<=n&&0===a[n]&&(r[3*f+m]?u.push(n):(w.push(n),a[n]=v));f=u;u=
w;w=f;u.length=0;v=-v}for(w=v=0;w<g.length;++w)a[w]===b&&(g[v++]=g[w]);g.length=v;return l?g.concat(d.boundary):g};t.prototype.locate=function(){var e=[0,0,0];return function(b,l,g){var v=b,t=l,u=g;l<g?l<b&&(v=l,t=g,u=b):g<b&&(v=g,t=b,u=l);if(0>v)return-1;e[0]=v;e[1]=t;e[2]=u;return a.eq(this.cells,e,q)}}()},{"binary-search-bounds":51}],64:[function(b,g,p){function t(a,e,b,k,h){this.a=a;this.b=e;this.idx=b;this.lowerIds=k;this.upperIds=h}function q(a,e,b,k){this.a=a;this.b=e;this.type=b;this.idx=
k}function a(a,e){var b=a.a[0]-e.a[0]||a.a[1]-e.a[1]||a.type-e.type;return b||0!==a.type&&(b=y(a.a,a.b,e.b))?b:a.idx-e.idx}function e(a,e){return y(a.a,a.b,e)}function k(a,e){var b;return(b=a.a[0]<e.a[0]?y(a.a,a.b,e.a):y(e.b,e.a,a.a))?b:(b=e.b[0]<a.b[0]?y(a.a,a.b,e.b):y(e.b,e.a,a.b))||a.idx-e.idx}var l=b("binary-search-bounds"),y=b("robust-orientation")[3];g.exports=function(b,g){for(var u=b.length,r=g.length,h=[],d=0;d<u;++d)h.push(new q(b[d],null,0,d));for(d=0;d<r;++d){var f=g[d],u=b[f[0]],f=b[f[1]];
u[0]<f[0]?h.push(new q(u,f,2,d),new q(f,u,1,d)):u[0]>f[0]&&h.push(new q(f,u,2,d),new q(u,f,1,d))}h.sort(a);d=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);r=[new t([d,1],[d,0],-1,[],[],[],[])];u=[];d=0;for(f=h.length;d<f;++d){var m=h[d],n=m.type;if(0===n)for(var n=u,z=r,p=b,c=m.a,m=m.idx,x=l.lt(z,c,e),C=l.gt(z,c,e);x<C;++x){for(var F=z[x],A=F.lowerIds,B=A.length;1<B&&0<y(p[A[B-2]],p[A[B-1]],c);)n.push([A[B-1],A[B-2],m]),--B;A.length=B;A.push(m);F=F.upperIds;for(B=F.length;1<B&&0>y(p[F[B-2]],p[F[B-
1]],c);)n.push([F[B-2],F[B-1],m]),--B;F.length=B;F.push(m)}else 2===n?(n=r,z=m,p=l.le(n,z,k),c=n[p],m=c.upperIds,C=m[m.length-1],c.upperIds=[C],n.splice(p+1,0,new t(z.a,z.b,z.idx,[C],m))):(n=r,z=m,p=z.a,z.a=z.b,z.b=p,z=l.eq(n,z,k),n[z-1].upperIds=n[z].upperIds,n.splice(z,1))}return u}},{"binary-search-bounds":51,"robust-orientation":103}],65:[function(b,g,p){function t(a,b){this.stars=a;this.edges=b}function q(a,b,l){for(var q=1,g=a.length;q<g;q+=2)if(a[q-1]===b&&a[q]===l){a[q-1]=a[g-2];a[q]=a[g-
1];a.length=g-2;break}}var a=b("binary-search-bounds");g.exports=function(a,b){for(var l=Array(a),q=0;q<a;++q)l[q]=[];return new t(l,b)};b=t.prototype;b.isConstraint=function(){function e(a,e){return a[0]-e[0]||a[1]-e[1]}var b=[0,0];return function(l,q){b[0]=Math.min(l,q);b[1]=Math.max(l,q);return 0<=a.eq(this.edges,b,e)}}();b.removeTriangle=function(a,b,l){var g=this.stars;q(g[a],b,l);q(g[b],l,a);q(g[l],a,b)};b.addTriangle=function(a,b,l){var q=this.stars;q[a].push(b,l);q[b].push(l,a);q[l].push(a,
b)};b.opposite=function(a,b){for(var l=this.stars[b],q=1,g=l.length;q<g;q+=2)if(l[q]===a)return l[q-1];return-1};b.flip=function(a,b){var l=this.opposite(a,b),q=this.opposite(b,a);this.removeTriangle(a,b,l);this.removeTriangle(b,a,q);this.addTriangle(a,q,l);this.addTriangle(b,l,q)};b.edges=function(){for(var a=this.stars,b=[],l=0,q=a.length;l<q;++l)for(var g=a[l],t=0,u=g.length;t<u;t+=2)b.push([g[t],g[t+1]]);return b};b.cells=function(){for(var a=this.stars,b=[],l=0,q=a.length;l<q;++l)for(var g=a[l],
t=0,u=g.length;t<u;t+=2){var r=g[t],h=g[t+1];l<Math.min(r,h)&&b.push([l,r,h])}return b}},{"binary-search-bounds":51}],66:[function(b,g,p){function t(a){var c=f(a);a=d(h(c),a);return 0>a?[c,n(c,Infinity)]:0<a?[n(c,-Infinity),c]:[c,c]}function q(d,c,a){var b=[];u(a,function(a,e){var f=c[a],m=c[e];f[0]!==m[0]&&f[0]!==m[1]&&f[1]!==m[0]&&f[1]!==m[1]&&r(d[f[0]],d[f[1]],d[m[0]],d[m[1]])&&b.push([a,e])});return b}function a(d,c,a,b){var e=[];u(a,b,function(a,b){var f=c[a];if(f[0]!==b&&f[1]!==b){var m=d[b];
r(d[f[0]],d[f[1]],m,m)&&e.push([a,b])}});return e}function e(a,c,b,e,f){function n(c){if(c>=a.length)return k[c-a.length];c=a[c];return[h(c[0]),h(c[1])]}for(var k=[],l=0;l<b.length;++l){var q=b[l],r=q[0],q=q[1],u=c[r],g=c[q];if(u=z(m(a[u[0]]),m(a[u[1]]),m(a[g[0]]),m(a[g[1]])))g=k.length+a.length,k.push(u),e.push([r,g],[q,g])}e.sort(function(c,a){if(c[0]!==a[0])return c[0]-a[0];var b=n(c[1]),e=n(a[1]);return d(b[0],e[0])||d(b[1],e[1])});for(l=e.length-1;0<=l;--l){q=e[l];r=q[0];u=c[r];g=u[0];b=u[1];
var t=a[g],v=a[b];0>(t[0]-v[0]||t[1]-v[1])&&(t=g,g=b,b=t);u[0]=g;var g=u[1]=q[1],y;for(f&&(y=u[2]);0<l&&e[l-1][0]===r;)q=e[--l],q=q[1],f?c.push([g,q,y]):c.push([g,q]),g=q;f?c.push([g,b,y]):c.push([g,b])}return k}function k(d,c,a){for(var b=d.length+c.length,e=new w(b),m=0;m<c.length;++m){var h=c[m],n=t(h[0]),l=t(h[1]);a.push([n[0],l[0],n[1],l[1]]);d.push([f(h[0]),f(h[1])])}u(a,function(c,d){e.link(c,d)});c=0;a=!0;h=Array(b);for(m=0;m<b;++m)e.find(m)===m?(h[m]=c,d[c++]=d[m]):(a=!1,h[m]=-1);d.length=
c;if(a)return null;for(m=0;m<b;++m)0>h[m]&&(h[m]=h[e.find(m)]);return h}function l(d,c){return d[0]-c[0]||d[1]-c[1]}function y(d,c){var a=d[0]-c[0]||d[1]-c[1];return a?a:d[2]<c[2]?-1:d[2]>c[2]?1:0}function v(d,c,b){for(var f=Array(c.length),m=0;m<c.length;++m){var h=c[m],n=d[h[0]],h=d[h[1]];f[m]=[Math.min(n[0],h[0]),Math.min(n[1],h[1]),Math.max(n[0],h[0]),Math.max(n[1],h[1])]}m=q(d,c,f);n=Array(d.length);for(h=0;h<d.length;++h){var r=d[h];n[h]=[r[0],r[1],r[0],r[1]]}f=a(d,c,f,n);h=e(d,c,m,f,b);d=k(d,
h,n);if(0!==c.length){if(d)for(n=0;n<c.length;++n){var h=c[n],r=d[h[0]],u=d[h[1]];h[0]=Math.min(r,u);h[1]=Math.max(r,u)}else for(n=0;n<c.length;++n)h=c[n],r=h[0],u=h[1],h[0]=Math.min(r,u),h[1]=Math.max(r,u);b?c.sort(y):c.sort(l);for(n=h=1;n<c.length;++n)if(r=c[n-1],u=c[n],u[0]!==r[0]||u[1]!==r[1]||b&&u[2]!==r[2])c[h++]=u;c.length=h}return d?!0:0<m.length||0<f.length}g.exports=function(d,c,a){var b=!1,e;if(a){e=c;for(var f=Array(c.length),m=0;m<c.length;++m){var h=c[m];f[m]=[h[0],h[1],a[m]]}c=f}for(;v(d,
c,!!a);)b=!0;if(a&&b)for(e.length=0,m=a.length=0;m<c.length;++m)h=c[m],e.push([h[0],h[1]]),a.push(h[2]);return b};var w=b("union-find"),u=b("box-intersect");b("compare-cell");var r=b("robust-segment-intersect"),h=b("big-rat"),d=b("big-rat/cmp"),f=b("big-rat/to-float"),m=b("rat-vec"),n=b("nextafter"),z=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":67,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":69,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":122}],67:[function(b,g,p){function t(a,b){return e(q(a[0],b[1]),q(a[1],b[0]))}g.exports=function(b,e,q,h){e=l(e,b);var d=l(h,q);h=t(e,d);if(0===k(h))return null;q=l(b,q);q=t(d,q);q=a(q,h);return y(b,v(e,q))};var q=b("big-rat/mul"),a=b("big-rat/div"),e=b("big-rat/sub"),k=b("big-rat/sign"),l=b("rat-vec/sub"),y=b("rat-vec/add"),v=b("rat-vec/muls");b("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],68:[function(b,g,p){function t(a,b,q){var u=e(a[0],-b[0]);a=e(a[1],-b[1]);var r=e(q[0],-b[0]);b=e(q[1],-b[1]);u=l(k(u,r),k(a,b));return 0<=u[u.length-1]}g.exports=function(b,e,l,k){var r=q(e,l,k);if(0===r){var r=a(q(b,e,l)),h=a(q(b,e,k));return r===h?0===r&&(l=t(b,e,l),b=t(b,e,k),l!==b)?l?1:-1:0:0===h?0<r?-1:t(b,e,k)?-1:1:0===r?0<h?1:t(b,e,l)?1:-1:a(h-r)}h=q(b,e,l);return 0<h?0<r&&0<q(b,e,k)?1:-1:0>h?0<r||0<q(b,e,k)?1:-1:0<q(b,e,k)?1:t(b,e,l)?1:-1};var q=b("robust-orientation"),
a=b("signum"),e=b("two-sum"),k=b("robust-product"),l=b("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":120}],69:[function(b,g,p){function t(a,b){return a-b}g.exports=function(a,b){var k=a.length,l=a.length-b.length;if(l)return l;switch(k){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||q(a[0],a[1])-q(b[0],b[1]);case 3:var k=a[0]+a[1],g=b[0]+b[1];if(l=k+a[2]-(g+b[2]))return l;var l=q(a[0],a[1]),v=q(b[0],b[1]);return q(l,
a[2])-q(v,b[2])||q(l+a[2],k)-q(v+b[2],g);case 4:var l=a[0],k=a[1],g=a[2],v=a[3],p=b[0],u=b[1],r=b[2],h=b[3];return l+k+g+v-(p+u+r+h)||q(l,k,g,v)-q(p,u,r,h,p)||q(l+k,l+g,l+v,k+g,k+v,g+v)-q(p+u,p+r,p+h,u+r,u+h,r+h)||q(l+k+g,l+k+v,l+g+v,k+g+v)-q(p+u+r,p+u+h,p+r+h,u+r+h);default:g=a.slice().sort(t);v=b.slice().sort(t);for(p=0;p<k;++p)if(l=g[p]-v[p])return l;return 0}};var q=Math.min},{}],70:[function(b,g,p){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var q=b("./lib/thunk.js");g.exports=function(a){var b=new t;b.pre=a.pre;b.body=a.body;b.post=a.post;var k=a.args.slice(0);b.argTypes=k;for(var l=0;l<k.length;++l){var g=k[l];if("array"===g||"object"===typeof g&&g.blockIndices){b.argTypes[l]="array";b.arrayArgs.push(l);b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);b.shimArgs.push("array"+l);if(l<
b.pre.args.length&&0<b.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<b.post.args.length&&0<b.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)b.scalarArgs.push(l),b.shimArgs.push("scalar"+l);else if("index"===g){b.indexArgs.push(l);if(l<b.pre.args.length&&0<b.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<b.body.args.length&&b.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<b.post.args.length&&0<b.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){b.shapeArgs.push(l);if(l<b.pre.args.length&&b.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<b.body.args.length&&b.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<b.post.args.length&&b.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)b.argTypes[l]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+k[l]);}if(0>=b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;return q(b)}},{"./lib/thunk.js":72}],71:[function(b,g,p){function t(a,b,e){var k=a.length,q=b.arrayArgs.length;b=0<b.indexArgs.length;var r=[],h=[],d=0,f=0,m,n;for(m=0;m<k;++m)h.push(["i",m,"=0"].join(""));for(n=0;n<q;++n)for(m=0;m<k;++m)f=d,d=a[m],0===m?h.push(["d",n,"s",m,"=t",n,"p",d].join("")):h.push(["d",n,"s",m,"=(t",n,"p",d,"-s",f,"*t",n,"p",f,")"].join(""));r.push("var "+h.join(","));for(m=k-1;0<=m;--m)d=
a[m],r.push(["for(i",m,"=0;i",m,"<s",d,";++i",m,"){"].join(""));r.push(e);for(m=0;m<k;++m){f=d;d=a[m];for(n=0;n<q;++n)r.push(["p",n,"+=d",n,"s",m].join(""));b&&(0<m&&r.push(["index[",f,"]-=s",f].join("")),r.push(["++index[",d,"]"].join("")));r.push("}")}return r.join("\n")}function q(a,b,e,k){for(var q=b.length,r=e.arrayArgs.length,h=e.blockSize,d=0<e.indexArgs.length,f=[],m=0;m<r;++m)f.push(["var offset",m,"=p",m].join(""));for(m=a;m<q;++m)f.push(["for(var j"+m+"=SS[",b[m],"]|0;j",m,">0;){"].join("")),
f.push(["if(j",m,"<",h,"){"].join("")),f.push(["s",b[m],"=j",m].join("")),f.push(["j",m,"=0"].join("")),f.push(["}else{s",b[m],"=",h].join("")),f.push(["j",m,"-=",h,"}"].join("")),d&&f.push(["index[",b[m],"]=j",m].join(""));for(m=0;m<r;++m){h=["offset"+m];for(d=a;d<q;++d)h.push(["j",d,"*t",m,"p",b[d]].join(""));f.push(["p",m,"=(",h.join("+"),")"].join(""))}f.push(t(b,e,k));for(m=a;m<q;++m)f.push("}");return f.join("\n")}function a(a,b,e){for(var k=a.body,q=[],r=[],h=0;h<a.args.length;++h){var d=a.args[h];
if(!(0>=d.count)){var f=new RegExp(d.name,"g"),m="",n=b.arrayArgs.indexOf(h);switch(b.argTypes[h]){case "offset":var g=b.offsetArgIndex.indexOf(h),n=b.offsetArgs[g].array,m="+q"+g;case "array":var m="p"+n+m,t="l"+h,g="a"+n;if(0===b.arrayBlockIndices[n])1===d.count?"generic"===e[n]?d.lvalue?(q.push(["var ",t,"=",g,".get(",m,")"].join("")),k=k.replace(f,t),r.push([g,".set(",m,",",t,")"].join(""))):k=k.replace(f,[g,".get(",m,")"].join("")):k=k.replace(f,[g,"[",m,"]"].join("")):"generic"===e[n]?(q.push(["var ",
t,"=",g,".get(",m,")"].join("")),k=k.replace(f,t),d.lvalue&&r.push([g,".set(",m,",",t,")"].join(""))):(q.push(["var ",t,"=",g,"[",m,"]"].join("")),k=k.replace(f,t),d.lvalue&&r.push([g,"[",m,"]=",t].join("")));else{f=[d.name];d=[m];for(m=0;m<Math.abs(b.arrayBlockIndices[n]);m++)f.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(m+1)+"*t"+n+"b"+m);f=new RegExp(f.join(""),"g");m=d.join("+");if("generic"===e[n])throw Error("cwise: Generic arrays not supported in combination with blocks!");k=k.replace(f,[g,"[",
m,"]"].join(""))}break;case "scalar":k=k.replace(f,"Y"+b.scalarArgs.indexOf(h));break;case "index":k=k.replace(f,"index");break;case "shape":k=k.replace(f,"shape")}}}return[q.join("\n"),k,r.join("\n")].join("\n").trim()}function e(a){for(var b=Array(a.length),e=!0,k=0;k<a.length;++k){var q=a[k],r=q.match(/\d+/),r=r?r[0]:"";0===q.charAt(0)?b[k]="u"+q.charAt(1)+r:b[k]=q.charAt(0)+r;0<k&&(e=e&&b[k]===b[k-1])}return e?b[0]:b.join("")}var k=b("uniq");g.exports=function(b,g){for(var v=g[1].length-Math.abs(b.arrayBlockIndices[0])|
0,p=Array(b.arrayArgs.length),u=Array(b.arrayArgs.length),r=0;r<b.arrayArgs.length;++r)u[r]=g[2*r],p[r]=g[2*r+1];for(var h=[],d=[],f=[],m=[],n=[],r=0;r<b.arrayArgs.length;++r){0>b.arrayBlockIndices[r]?(f.push(0),m.push(v),h.push(v),d.push(v+b.arrayBlockIndices[r])):(f.push(b.arrayBlockIndices[r]),m.push(b.arrayBlockIndices[r]+v),h.push(0),d.push(b.arrayBlockIndices[r]));for(var z=[],E=0;E<p[r].length;E++)f[r]<=p[r][E]&&p[r][E]<m[r]&&z.push(p[r][E]-f[r]);n.push(z)}d=["SS"];m=["'use strict'"];z=[];
for(E=0;E<v;++E)z.push(["s",E,"=SS[",E,"]"].join(""));for(r=0;r<b.arrayArgs.length;++r){d.push("a"+r);d.push("t"+r);d.push("p"+r);for(E=0;E<v;++E)z.push(["t",r,"p",E,"=t",r,"[",f[r]+E,"]"].join(""));for(E=0;E<Math.abs(b.arrayBlockIndices[r]);++E)z.push(["t",r,"b",E,"=t",r,"[",h[r]+E,"]"].join(""))}for(r=0;r<b.scalarArgs.length;++r)d.push("Y"+r);0<b.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<b.indexArgs.length){E=Array(v);for(r=0;r<v;++r)E[r]="0";z.push(["index=[",E.join(","),"]"].join(""))}for(r=
0;r<b.offsetArgs.length;++r){h=b.offsetArgs[r];f=[];for(E=0;E<h.offset.length;++E)0!==h.offset[E]&&(1===h.offset[E]?f.push(["t",h.array,"p",E].join("")):f.push([h.offset[E],"*t",h.array,"p",E].join("")));0===f.length?z.push("q"+r+"=0"):z.push(["q",r,"=",f.join("+")].join(""))}r=k([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));z=z.concat(r);m.push("var "+z.join(","));for(r=0;r<b.arrayArgs.length;++r)m.push("p"+r+"|=0");3<b.pre.body.length&&m.push(a(b.pre,b,u));r=a(b.body,
b,u);a:for(E=0,z=n[0].length;E<z;){for(h=1;h<n.length;++h)if(n[h][E]!==n[0][E])break a;++E}E<v?m.push(q(E,n[0],b,r)):m.push(t(n[0],b,r));3<b.post.body.length&&m.push(a(b.post,b,u));b.debug&&console.log("-----Generated cwise routine for ",g,":\n"+m.join("\n")+"\n----------");v=[b.funcName||"unnamed","_cwise_loop_",p[0].join("s"),"m",E,e(u)].join("");return(new Function(["function ",v,"(",d.join(","),"){",m.join("\n"),"} return ",v].join("")))()}},{uniq:123}],72:[function(b,g,p){var t=b("./compile.js");
g.exports=function(b){var a=["'use strict'","var CACHED={}"],e=[];a.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var k=[],l=[],g=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],v=[],p=[],u=0;u<b.arrayArgs.length;++u){var r=b.arrayArgs[u];e.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));k.push("t"+r);k.push("r"+r);l.push("t"+r);l.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<u&&(v.push("array"+b.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[u]))),p.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[u])+"]"))}1<b.arrayArgs.length&&(a.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
a.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),a.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(u=0;u<b.scalarArgs.length;++u)g.push("scalar"+b.scalarArgs[u]);e.push(["type=[",l.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");a.push("var "+e.join(","));a.push(["if(!proc){CACHED[type]=proc=compile([",k.join(","),"])}return proc(",g.join(","),
")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------");return(new Function("compile",a.join("\n")))(t.bind(void 0,b))}},{"./compile.js":71}],73:[function(b,g,p){(function(b){var q=!1;if("undefined"!==typeof Float64Array){var a=new Float64Array(1),e=new Uint32Array(a.buffer);a[0]=1;q=!0;1072693248===e[1]?(g.exports=function(b){a[0]=b;return[e[0],e[1]]},g.exports.pack=function(b,k){e[0]=b;e[1]=k;return a[0]},g.exports.lo=function(b){a[0]=b;return e[0]},g.exports.hi=
function(b){a[0]=b;return e[1]}):1072693248===e[0]?(g.exports=function(b){a[0]=b;return[e[1],e[0]]},g.exports.pack=function(b,k){e[1]=b;e[0]=k;return a[0]},g.exports.lo=function(b){a[0]=b;return e[1]},g.exports.hi=function(b){a[0]=b;return e[0]}):q=!1}if(!q){var k=new b(8);g.exports=function(a){k.writeDoubleLE(a,0,!0);return[k.readUInt32LE(0,!0),k.readUInt32LE(4,!0)]};g.exports.pack=function(a,b){k.writeUInt32LE(a,0,!0);k.writeUInt32LE(b,4,!0);return k.readDoubleLE(0,!0)};g.exports.lo=function(a){k.writeDoubleLE(a,
0,!0);return k.readUInt32LE(0,!0)};g.exports.hi=function(a){k.writeDoubleLE(a,0,!0);return k.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var b=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:60}],74:[function(b,g,p){function t(b,
a,e){var k=b[e]|0;if(0>=k)return[];var l=Array(k),g;if(e===b.length-1)for(g=0;g<k;++g)l[g]=a;else for(g=0;g<k;++g)l[g]=t(b,a,e+1);return l}g.exports=function(b,a){"undefined"===typeof a&&(a=0);switch(typeof b){case "number":if(0<b){var e=b|0,k=a,l,g;l=Array(e);for(g=0;g<e;++g)l[g]=k;return l}break;case "object":if("number"===typeof b.length)return t(b,a,0)}return[]}},{}],75:[function(b,g,p){g.exports=function(b,a){var e=b.length;if("number"!==typeof a){for(var k=a=0;k<e;++k){var l=b[k];a=Math.max(a,
l[0],l[1])}a=(a|0)+1}a|=0;for(var g=Array(a),k=0;k<a;++k)g[k]=[];for(k=0;k<e;++k)l=b[k],g[l[0]].push(l[1]),g[l[1]].push(l[0]);for(e=0;e<a;++e)t(g[e],function(a,b){return a-b});return g};var t=b("uniq")},{uniq:123}],76:[function(b,g,p){function t(a,d,b,e,n,k){this._color=a;this.key=d;this.value=b;this.left=e;this.right=n;this._count=k}function q(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function a(a,d){return new t(a,d.key,d.value,d.left,d.right,d._count)}function e(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function k(a,d){this._compare=a;this.root=d}function l(a,d){if(d.left){var b=l(a,d.left);if(b)return b}if(b=a(d.key,d.value))return b;if(d.right)return l(a,d.right)}function y(a,d,b,e){if(0>=d(a,e.key)){if(e.left){var n=y(a,d,b,e.left);if(n)return n}if(n=b(e.key,e.value))return n}if(e.right)return y(a,d,b,e.right)}function v(a,d,b,e,n){var k=b(a,n.key),q=b(d,n.key);if(0>=k&&(n.left&&(k=v(a,d,b,e,n.left))||0<q&&(k=e(n.key,n.value))))return k;if(0<
q&&n.right)return v(a,d,b,e,n.right)}function w(a,d){this.tree=a;this._stack=d}function u(a,d){a.key=d.key;a.value=d.value;a.left=d.left;a.right=d.right;a._color=d._color;a._count=d._count}function r(a,d){return a<d?-1:a>d?1:0}g.exports=function(a){return new k(a||r,null)};b=k.prototype;Object.defineProperty(b,"keys",{get:function(){var a=[];this.forEach(function(d,b){a.push(d)});return a}});Object.defineProperty(b,"values",{get:function(){var a=[];this.forEach(function(d,b){a.push(b)});return a}});
Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(b,d){for(var f=this._compare,m=this.root,n=[],q=[];m;){var l=f(b,m.key);n.push(m);q.push(l);m=0>=l?m.left:m.right}n.push(new t(0,b,d,null,null,1));for(l=n.length-2;0<=l;--l)m=n[l],n[l]=0>=q[l]?new t(m._color,m.key,m.value,n[l+1],m.right,m._count+1):new t(m._color,m.key,m.value,m.left,n[l+1],m._count+1);for(l=n.length-1;1<l;--l){q=n[l-1];m=n[l];if(1===q._color||1===m._color)break;var c=n[l-2];
if(c.left===q)if(q.left===m){var r=c.right;if(r&&0===r._color)q._color=1,c.right=a(1,r),c._color=0,--l;else{c._color=0;c.left=q.right;q._color=1;q.right=c;n[l-2]=q;n[l-1]=m;e(c);e(q);3<=l&&(l=n[l-3],l.left===c?l.left=q:l.right=q);break}}else if((r=c.right)&&0===r._color)q._color=1,c.right=a(1,r),c._color=0,--l;else{q.right=m.left;c._color=0;c.left=m.right;m._color=1;m.left=q;m.right=c;n[l-2]=m;n[l-1]=q;e(c);e(q);e(m);3<=l&&(l=n[l-3],l.left===c?l.left=m:l.right=m);break}else if(q.right===m)if((r=c.left)&&
0===r._color)q._color=1,c.left=a(1,r),c._color=0,--l;else{c._color=0;c.right=q.left;q._color=1;q.left=c;n[l-2]=q;n[l-1]=m;e(c);e(q);3<=l&&(l=n[l-3],l.right===c?l.right=q:l.left=q);break}else if((r=c.left)&&0===r._color)q._color=1,c.left=a(1,r),c._color=0,--l;else{q.left=m.right;c._color=0;c.right=m.left;m._color=1;m.right=q;m.left=c;n[l-2]=m;n[l-1]=q;e(c);e(q);e(m);3<=l&&(l=n[l-3],l.right===c?l.right=m:l.left=m);break}}n[0]._color=1;return new k(f,n[0])};b.forEach=function(a,d,b){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return y(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,b)))return v(d,b,this._compare,a,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.left;return new w(this,a)}});Object.defineProperty(b,"end",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.right;return new w(this,a)}});b.at=function(a){if(0>a)return new w(this,[]);for(var d=this.root,b=[];;){b.push(d);if(d.left){if(a<d.left._count){d=d.left;continue}a-=
d.left._count}if(!a)return new w(this,b);--a;if(d.right){if(a>=d.right._count)break;d=d.right}else break}return new w(this,[])};b.ge=function(a){for(var d=this._compare,b=this.root,e=[],n=0;b;){var k=d(a,b.key);e.push(b);0>=k&&(n=e.length);b=0>=k?b.left:b.right}e.length=n;return new w(this,e)};b.gt=function(a){for(var d=this._compare,b=this.root,e=[],n=0;b;){var k=d(a,b.key);e.push(b);0>k&&(n=e.length);b=0>k?b.left:b.right}e.length=n;return new w(this,e)};b.lt=function(a){for(var d=this._compare,
b=this.root,e=[],n=0;b;){var k=d(a,b.key);e.push(b);0<k&&(n=e.length);b=0>=k?b.left:b.right}e.length=n;return new w(this,e)};b.le=function(a){for(var d=this._compare,b=this.root,e=[],n=0;b;){var k=d(a,b.key);e.push(b);0<=k&&(n=e.length);b=0>k?b.left:b.right}e.length=n;return new w(this,e)};b.find=function(a){for(var d=this._compare,b=this.root,e=[];b;){var n=d(a,b.key);e.push(b);if(0===n)return new w(this,e);b=0>=n?b.left:b.right}return new w(this,[])};b.remove=function(a){return(a=this.find(a))?
a.remove():this};b.get=function(a){for(var d=this._compare,b=this.root;b;){var e=d(a,b.key);if(0===e)return b.value;b=0>=e?b.left:b.right}};b=w.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new w(this.tree,this._stack.slice())};b.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var d=
Array(b.length),f=b[b.length-1];d[d.length-1]=new t(f._color,f.key,f.value,f.left,f.right,f._count);for(var m=b.length-2;0<=m;--m)f=b[m],d[m]=f.left===b[m+1]?new t(f._color,f.key,f.value,d[m+1],f.right,f._count):new t(f._color,f.key,f.value,f.left,d[m+1],f._count);f=d[d.length-1];if(f.left&&f.right){b=d.length;for(f=f.left;f.right;)d.push(f),f=f.right;m=d[b-1];d.push(new t(f._color,m.key,m.value,f.left,f.right,f._count));d[b-1].key=f.key;d[b-1].value=f.value;for(m=d.length-2;m>=b;--m)f=d[m],d[m]=
new t(f._color,f.key,f.value,f.left,d[m+1],f._count);d[b-1].left=d[b]}f=d[d.length-1];if(0===f._color)for(m=d[d.length-2],m.left===f?m.left=null:m.right===f&&(m.right=null),d.pop(),m=0;m<d.length;++m)d[m]._count--;else if(f.left||f.right)for(f.left?u(f,f.left):f.right&&u(f,f.right),f._color=1,m=0;m<d.length-1;++m)d[m]._count--;else{if(1===d.length)return new k(this.tree._compare,null);for(m=0;m<d.length;++m)d[m]._count--;for(var m=d[d.length-2],n,l,r,c=d.length-1;0<=c;--c){b=d[c];if(0===c){b._color=
1;break}n=d[c-1];if(n.left===b){l=n.right;if(l.right&&0===l.right._color){l=n.right=q(l);r=l.right=q(l.right);n.right=l.left;l.left=n;l.right=r;l._color=n._color;b._color=1;n._color=1;r._color=1;e(n);e(l);if(1<c){var g=d[c-2];g.left===n?g.left=l:g.right=l}d[c-1]=l;break}else if(l.left&&0===l.left._color){l=n.right=q(l);r=l.left=q(l.left);n.right=r.left;l.left=r.right;r.left=n;r.right=l;r._color=n._color;n._color=1;l._color=1;b._color=1;e(n);e(l);e(r);1<c&&(g=d[c-2],g.left===n?g.left=r:g.right=r);
d[c-1]=r;break}if(1===l._color)if(0===n._color){n._color=1;n.right=a(0,l);break}else n.right=a(0,l);else l=q(l),n.right=l.left,l.left=n,l._color=n._color,n._color=0,e(n),e(l),1<c&&(g=d[c-2],g.left===n?g.left=l:g.right=l),d[c-1]=l,d[c]=n,c+1<d.length?d[c+1]=b:d.push(b),c+=2}else{l=n.left;if(l.left&&0===l.left._color){l=n.left=q(l);r=l.left=q(l.left);n.left=l.right;l.right=n;l.left=r;l._color=n._color;b._color=1;n._color=1;r._color=1;e(n);e(l);1<c&&(g=d[c-2],g.right===n?g.right=l:g.left=l);d[c-1]=l;
break}else if(l.right&&0===l.right._color){l=n.left=q(l);r=l.right=q(l.right);n.left=r.right;l.right=r.left;r.right=n;r.left=l;r._color=n._color;n._color=1;l._color=1;b._color=1;e(n);e(l);e(r);1<c&&(g=d[c-2],g.right===n?g.right=r:g.left=r);d[c-1]=r;break}if(1===l._color)if(0===n._color){n._color=1;n.left=a(0,l);break}else n.left=a(0,l);else l=q(l),n.left=l.right,l.right=n,l._color=n._color,n._color=0,e(n),e(l),1<c&&(g=d[c-2],g.right===n?g.right=l:g.left=l),d[c-1]=l,d[c]=n,c+1<d.length?d[c+1]=b:d.push(b),
c+=2}}m.left===f?m.left=null:m.right=null}return new k(this.tree._compare,d[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-
1].left._count);for(var b=d.length-2;0<=b;--b)d[b+1]===d[b].right&&(++a,d[b].left&&(a+=d[b].left._count));return a},enumerable:!0});b.next=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===
a[d])return!0;return!1}});b.update=function(a){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var b=Array(d.length),e=d[d.length-1];b[b.length-1]=new t(e._color,e.key,a,e.left,e.right,e._count);for(a=d.length-2;0<=a;--a)e=d[a],b[a]=e.left===d[a+1]?new t(e._color,e.key,e.value,b[a+1],e.right,e._count):new t(e._color,e.key,e.value,e.left,b[a+1],e._count);return new k(this.tree._compare,b[0])};b.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=
d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-1].left===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}})},{}],77:[function(b,g,p){function t(b){if(0>b)return Number("0/0");for(var k=a[0],l=a.length-1;0<l;--l)k+=a[l]/(b+l);l=b+4.7421875+.5;return.5*Math.log(2*Math.PI)+(b+.5)*Math.log(l)-l+Math.log(k)-
Math.log(b)}var q=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function k(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*k(1-a));if(100<a)return Math.exp(t(a));--a;for(var b=q[0],g=1;9>g;g++)b+=q[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*b};g.exports.log=t},{}],78:[function(b,g,p){g.exports=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],79:[function(b,g,p){var t=b("./identity");g.exports=function(b,a,e,k){var l,g,p,w,u,
r,h,d,f=a[0],m=a[1];a=a[2];p=k[0];w=k[1];g=k[2];h=e[0];k=e[1];l=e[2];if(1E-6>Math.abs(f-h)&&1E-6>Math.abs(m-k)&&1E-6>Math.abs(a-l))return t(b);e=f-h;k=m-k;h=a-l;d=1/Math.sqrt(e*e+k*k+h*h);e*=d;k*=d;h*=d;l=w*h-g*k;g=g*e-p*h;p=p*k-w*e;(d=Math.sqrt(l*l+g*g+p*p))?(d=1/d,l*=d,g*=d,p*=d):p=g=l=0;w=k*p-h*g;u=h*l-e*p;r=e*g-k*l;(d=Math.sqrt(w*w+u*u+r*r))?(d=1/d,w*=d,u*=d,r*=d):r=u=w=0;b[0]=l;b[1]=w;b[2]=e;b[3]=0;b[4]=g;b[5]=u;b[6]=k;b[7]=0;b[8]=p;b[9]=r;b[10]=h;b[11]=0;b[12]=-(l*f+g*m+p*a);b[13]=-(w*f+u*m+
r*a);b[14]=-(e*f+k*m+h*a);b[15]=1;return b}},{"./identity":78}],80:[function(b,g,p){g.exports=function(b,q,a,e,k){q=1/Math.tan(q/2);var l=1/(e-k);b[0]=q/a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=q;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(k+e)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*k*e*l;b[15]=0;return b}},{}],81:[function(b,g,p){p.read=function(b,q,a,e,k){var l;l=8*k-e-1;var g=(1<<l)-1,p=g>>1,w=-7;k=a?k-1:0;var u=a?-1:1,r=b[q+k];k+=u;a=r&(1<<-w)-1;r>>=-w;for(w+=l;0<w;a=256*a+b[q+k],k+=u,w-=8);l=a&(1<<-w)-1;a>>=-w;
for(w+=e;0<w;l=256*l+b[q+k],k+=u,w-=8);if(0===a)a=1-p;else{if(a===g)return l?NaN:Infinity*(r?-1:1);l+=Math.pow(2,e);a-=p}return(r?-1:1)*l*Math.pow(2,a-e)};p.write=function(b,q,a,e,k,l){var g,p=8*l-k-1,w=(1<<p)-1,u=w>>1,r=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;l=e?0:l-1;var h=e?1:-1,d=0>q||0===q&&0>1/q?1:0;q=Math.abs(q);isNaN(q)||Infinity===q?(q=isNaN(q)?1:0,e=w):(e=Math.floor(Math.log(q)/Math.LN2),1>q*(g=Math.pow(2,-e))&&(e--,g*=2),q=1<=e+u?q+r/g:q+r*Math.pow(2,1-u),2<=q*g&&(e++,g/=2),e+u>=w?(q=
0,e=w):1<=e+u?(q=(q*g-1)*Math.pow(2,k),e+=u):(q=q*Math.pow(2,u-1)*Math.pow(2,k),e=0));for(;8<=k;b[a+l]=q&255,l+=h,q/=256,k-=8);e=e<<k|q;for(p+=k;0<p;b[a+l]=e&255,l+=h,e/=256,p-=8);b[a+l-h]|=128*d}},{}],82:[function(b,g,p){function t(a,d,b,e,h){this.mid=a;this.left=d;this.right=b;this.leftPoints=e;this.rightPoints=h;this.count=(d?d.count:0)+(b?b.count:0)+e.length}function q(a,d){a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function a(a,
d){var b=r(d);a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function e(d,b){var e=d.intervals([]),h=e.indexOf(b);if(0>h)return 0;e.splice(h,1);a(d,e);return 1}function k(a,d,b){for(var e=0;e<a.length&&a[e][0]<=d;++e){var h=b(a[e]);if(h)return h}}function l(a,d,b){for(var e=a.length-1;0<=e&&a[e][1]>=d;--e){var h=b(a[e]);if(h)return h}}function y(a,d){for(var b=0;b<a.length;++b){var e=d(a[b]);if(e)return e}}function v(a,d){return a-d}
function w(a,d){var b=a[0]-d[0];return b?b:a[1]-d[1]}function u(a,d){var b=a[1]-d[1];return b?b:a[0]-d[0]}function r(a){if(0===a.length)return null;for(var d=[],b=0;b<a.length;++b)d.push(a[b][0],a[b][1]);d.sort(v);for(var d=d[d.length>>1],e=[],h=[],c=[],b=0;b<a.length;++b){var k=a[b];k[1]<d?e.push(k):d<k[0]?h.push(k):c.push(k)}a=c.slice();c.sort(w);a.sort(u);return new t(d,r(e),r(h),c,a)}function h(a){this.root=a}var d=b("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(r(a)):
new h(null)};b=t.prototype;b.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};b.insert=function(b){var e=this.count-this.leftPoints.length;this.count+=1;if(b[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?(e=this.intervals([]),e.push(b),a(this,e)):this.left.insert(b):this.left=r([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?(e=this.intervals([]),e.push(b),a(this,e)):this.right.insert(b):
this.right=r([b]);else{var e=d.ge(this.leftPoints,b,w),h=d.ge(this.rightPoints,b,u);this.leftPoints.splice(e,0,b);this.rightPoints.splice(h,0,b)}};b.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(b-1))return e(this,a);b=this.left.remove(a);if(2===b)return this.left=null,--this.count,1;1===b&&--this.count;return b}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(b-1))return e(this,a);
b=this.right.remove(a);if(2===b)return this.right=null,--this.count,1;1===b&&--this.count;return b}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var k=this.left,b=this.right;a.count-=h.count;a.right=h.left;h.left=k;h.right=b}q(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
q(this,this.left):q(this,this.right);return 1}for(k=d.ge(this.leftPoints,a,w);k<this.leftPoints.length&&this.leftPoints[k][0]===a[0];++k)if(this.leftPoints[k]===a)for(--this.count,this.leftPoints.splice(k,1),b=d.ge(this.rightPoints,a,u);b<this.rightPoints.length&&this.rightPoints[b][1]===a[1];++b)if(this.rightPoints[b]===a)return this.rightPoints.splice(b,1),1;return 0};b.queryPoint=function(a,d){if(a<this.mid){if(this.left){var b=this.left.queryPoint(a,d);if(b)return b}return k(this.leftPoints,a,
d)}return a>this.mid?this.right&&(b=this.right.queryPoint(a,d))?b:l(this.rightPoints,a,d):y(this.leftPoints,d)};b.queryInterval=function(a,d,b){if(a<this.mid&&this.left){var e=this.left.queryInterval(a,d,b);if(e)return e}return d>this.mid&&this.right&&(e=this.right.queryInterval(a,d,b))?e:d<this.mid?k(this.leftPoints,d,b):a>this.mid?l(this.rightPoints,a,b):y(this.leftPoints,b)};b=h.prototype;b.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};b.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};b.queryPoint=function(a,d){if(this.root)return this.root.queryPoint(a,d)};b.queryInterval=function(a,d,b){if(a<=d&&this.root)return this.root.queryInterval(a,d,b)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],83:[function(b,g,p){function t(a,b,k,l,q,g){a=["function ",a,"(a,l,h,",
l.join(","),"){",g?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",q?".get(m)":"[m]"];g?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",b,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");g?a.push("return -1};"):a.push("return i};");return a.join("")}function q(a,b,k,l){return(new Function([t("A","x"+a+"y",b,["y"],!1,l),t("B","x"+a+"y",b,["y"],!0,l),t("P","c(x,y)"+a+"0",
b,["y","c"],!1,l),t("Q","c(x,y)"+a+"0",b,["y","c"],!0,l),"function dispatchBsearch",k,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",k].join("")))()}g.exports=
{ge:q(">=",!1,"GE"),gt:q(">",!1,"GT"),lt:q("<",!0,"LT"),le:q("<=",!0,"LE"),eq:q("-",!0,"EQ",!0)}},{}],84:[function(b,g,p){g.exports=function(b,g){g=g||Array(b.length);for(var a=0;a<b.length;++a)g[b[a]]=a;return g}},{}],85:[function(b,g,p){g.exports=function(b){for(var g=Array(b),a=0;a<b;++a)g[a]=a;return g}},{}],86:[function(b,g,p){g.exports=function(b){return!(null==b||!(b._isBuffer||b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)))}},{}],87:[function(b,g,p){var t=
{}.toString;g.exports=Array.isArray||function(b){return"[object Array]"==t.call(b)}},{}],88:[function(b,g,p){function t(a,b,e){for(var d=0,f=0;f<a;++f)b&1<<f&&(d|=1<<e[f]);return d}function q(b,g,h,d,f,m){function n(a,c){A.push("for(","i"+f[a],"=",c,";","i"+f[a],"<","s"+f[a],";","++","i"+f[a],"){")}function q(a){for(var c=0;c<x;++c)A.push("p"+c,"+=","u"+c+"_"+f[a],";");A.push("}")}function p(){for(var a=1;a<1<<C;++a)A.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function c(a,b){if(0>
a){for(var h=0;h<x;++h)m[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<x;++h)g.push("c"+h+"_0");for(h=0;h<d;++h)g.push("x"+h);A.push("b0","=",k,"[",v,"]=phase(",g.join(),");");for(g=1;g<1<<C;++g)A.push("b"+g,"=",k,"[",v,"+","e"+g,"];");h=[];for(g=1;g<1<<C;++g)h.push("(b0!==b"+g+")");A.push("if(",h.join("||"),"){");for(var r=[],h=0;h<C;++h)r.push("i"+h);for(h=0;h<x;++h)for(r.push("c"+h+"_0"),g=1;g<1<<C;++g)m[h]?A.push("c"+h+"_"+g,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):A.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),r.push("c"+h+"_"+g);for(h=0;h<1<<C;++h)r.push("b"+h);for(h=0;h<d;++h)r.push("x"+h);A.push("vertex(",r.join(),");","v0","=",e,"[",v,"]=",l,"++;");h=(1<<C)-1;r="b"+h;for(g=0;g<C;++g)if(0===(b&~(1<<g))){for(var u=h^1<<g,t="b"+u,w=[],y=u;0<y;y=y-1&u)w.push(e+"["+v+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)g&1?w.push("c"+y+"_"+h,"c"+y+"_"+u):w.push("c"+y+"_"+u,"c"+y+"_"+h);g&1?w.push(r,t):w.push(t,
r);for(y=0;y<d;++y)w.push("x"+y);A.push("if(",r,"!==",t,"){","face(",w.join(),")}")}A.push("}",v,"+=1;")}else{for(g=a-1;0<=g;--g)n(g,0);h=[];for(g=0;g<x;++g)m[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<d;++g)h.push("x"+g);A.push(k,"[",v,"++]=phase(",h.join(),");");for(g=0;g<a;++g)q(g);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+f[a],";");A.push("if(","s"+f[a],">0){","i"+f[a],"=1;");c(a-1,b|1<<f[a]);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+f[a],";");a===C-1&&(A.push(v,
"=0;"),p());n(a,2);c(a-1,b);a===C-1&&(A.push("if(","i"+f[C-1],"&1){",v,"=0;}"),p());q(a);A.push("}")}}var x=m.length,C=f.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var F="extractContour"+f.join("_"),A=[],B=[],O=[],I=0;I<x;++I)O.push("a"+I);for(I=0;I<d;++I)O.push("x"+I);for(I=0;I<C;++I)B.push("s"+I+"=a0.shape["+I+"]|0");for(I=0;I<x;++I){B.push("d"+I+"="+("a"+I)+".data","o"+I+"="+("a"+I)+".offset|0");for(var D=0;D<C;++D)B.push("t"+I+"_"+D+"="+("a"+I)+".stride["+
D+"]|0")}for(I=0;I<x;++I)for(B.push("p"+I+"="+("o"+I)),B.push("c"+I+"_0"),D=1;D<1<<C;++D){for(var L=[],K=0;K<C;++K)D&1<<K&&L.push("-"+("t"+I+"_"+K));B.push("d"+I+"_"+D+"=("+L.join("")+")|0");B.push("c"+I+"_"+D+"=0")}for(I=0;I<x;++I)for(D=0;D<C;++D)K=["t"+I+"_"+f[D]],0<D&&K.push("t"+I+"_"+f[D-1]+"*"+("s"+f[D-1])),B.push("u"+I+"_"+f[D]+"=("+K.join("-")+")|0");for(I=0;I<C;++I)B.push("i"+I+"=0");B.push(l+"=0");D=["2"];for(I=C-2;0<=I;--I)D.push("s"+f[I]);B.push(y+"=("+D.join("*")+")|0",k+"=mallocUint32("+
y+")",e+"=mallocUint32("+y+")",v+"=0");B.push("b0=0");for(D=1;D<1<<C;++D){I=[];L=[];for(K=0;K<C;++K)D&1<<K&&(0===L.length?I.push("1"):I.unshift(L.join("*"))),L.push("s"+f[K]);K="";0>I[0].indexOf("s"+f[C-2])&&(K="-");L=t(C,D,f);B.push("e"+L+"=(-"+I.join("-")+")|0","y"+L+"=("+K+I.join("-")+")|0","b"+L+"=0")}B.push("v0=0",w+"=0");c(C-1,0);A.push("freeUint32(",e,");freeUint32(",k,");");F=["'use strict';function ",F,"(",O.join(),"){var ",B.join(),";",A.join(""),"}return ",F].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",F))(b,g,h,a.mallocUint32,a.freeUint32)}var a=b("typedarray-pool");g.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var d=a.arrayArguments||1;1>d&&b("Must have at least one array argument");var f=a.scalarArguments||0;0>f&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");
"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var m=a.getters||[],n=Array(d),k=0;k<d;++k)0<=m.indexOf(k)?n[k]=!0:n[k]=!1;return q(a.vertex,a.cell,a.phase,f,e,n)};var e="V",k="P",l="N",y="Q",v="X",w="T"},{"typedarray-pool":121}],89:[function(b,g,p){function t(a,b){return a[0]-b[0]}function q(){var a=this.stride,b=Array(a.length),e;for(e=0;e<b.length;++e)b[e]=[Math.abs(a[e]),e];b.sort(t);a=Array(b.length);for(e=
0;e<a.length;++e)a[e]=b[e][1];return a}function a(a,b){var e=["View",b,"d",a].join("");0>b&&(e="View_Nil"+a);var h="generic"===a;if(-1===b){var d,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
e+"(a){return new "+e+"(a);}");return e()}if(0===b)return e=new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
e+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(v[a][0]);d=["'use strict'"];var f=k(b),m=f.map(function(a){return"i"+a}),n="this.offset+"+f.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),l=f.map(function(a){return"b"+a}).join(","),g=f.map(function(a){return"c"+a}).join(",");d.push("function "+
e+"(a,"+l+","+g+",d){this.data=a","this.shape=["+l+"]","this.stride=["+g+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);d.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+f.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),4>b?(d.push("function "+e+"_order(){"),2===b?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===b&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):d.push("ORDER})"));d.push("proto.set=function "+e+"_set("+m.join(",")+",v){");h?d.push("return this.data.set("+n+",v)}"):d.push("return this.data["+n+"]=v}");d.push("proto.get=function "+e+"_get("+m.join(",")+"){");h?d.push("return this.data.get("+
n+")}"):d.push("return this.data["+n+"]}");d.push("proto.index=function "+e+"_index(",m.join(),"){return "+n+"}");d.push("proto.hi=function "+e+"_hi("+m.join(",")+"){return new "+e+"(this.data,"+f.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+f.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=f.map(function(a){return"a"+a+"=this.shape["+a+"]"});n=f.map(function(a){return"c"+a+"=this.stride["+a+"]"});d.push("proto.lo=function "+
e+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+n.join(","));for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");d.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"c"+a}).join(",")+",b)}");d.push("proto.step=function "+e+"_step("+m.join(",")+"){var "+f.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+f.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");d.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+a}).join(",")+","+f.map(function(a){return"b"+a}).join(",")+",c)}");n=Array(b);l=Array(b);for(h=0;h<b;++h)n[h]="a[i"+h+"]",l[h]="b[i"+h+"]";d.push("proto.transpose=function "+e+"_transpose("+m+"){"+m.map(function(a,d){return a+"=("+a+"===undefined?"+
d+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+n.join(",")+","+l.join(",")+",this.offset)}");d.push("proto.pick=function "+e+"_pick("+m+"){var a=[],b=[],c=this.offset");for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");d.push("return function construct_"+e+"(data,shape,stride,offset){return new "+
e+"(data,"+f.map(function(a){return"shape["+a+"]"}).join(",")+","+f.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",d.join("\n"));return e(v[a],q)}function e(a){if(l(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var k=b("iota-array"),l=b("is-buffer"),y="undefined"!==typeof Float64Array,v={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in v)v[b].push(a(b,-1))});g.exports=function(b,k,l,h){if(void 0===b){var d=v.array[0];return d([])}"number"===
typeof b&&(b=[b]);void 0===k&&(k=[b.length]);d=k.length;if(void 0===l){l=Array(d);for(var f=d-1,m=1;0<=f;--f)l[f]=m,m*=k[f]}if(void 0===h)for(f=h=0;f<d;++f)0>l[f]&&(h-=(k[f]-1)*l[f]);f=e(b);for(m=v[f];m.length<=d+1;)m.push(a(f,m.length-1));d=m[d+1];return d(b,k,l,h)}},{"iota-array":85,"is-buffer":86}],90:[function(b,g,p){var t=b("double-bits"),q=Math.pow(2,-1074);g.exports=function(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-q:q;var k=t.hi(a),l=t.lo(a);b>a===0<a?4294967295===
l?(k+=1,l=0):l+=1:0===l?(l=4294967295,--k):--l;return t.pack(l,k)}},{"double-bits":73}],91:[function(b,g,p){g.exports=function(a){var b=a.length;if(b<t)for(var k=1,l=0;l<b;++l)for(var g=0;g<l;++g)if(a[l]<a[g])k=-k;else{if(a[l]===a[g])return 0}else{for(var p=q.mallocUint8(b),l=0;l<b;++l)p[l]=0;k=1;for(l=0;l<b;++l)if(!p[l]){var w=1;p[l]=1;for(g=a[l];g!==l;g=a[g]){if(p[g])return q.freeUint8(p),0;w+=1;p[g]=1}w&1||(k=-k)}q.freeUint8(p)}return k};var t=32,q=b("typedarray-pool")},{"typedarray-pool":121}],
92:[function(b,g,p){var t=b("typedarray-pool"),q=b("invert-permutation");p.rank=function(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var k=t.mallocUint32(b),l=t.mallocUint32(b),g=0,p;q(a,l);for(p=0;p<b;++p)k[p]=a[p];for(p=b-1;0<p;--p)b=l[p],a=k[p],k[p]=k[b],k[b]=a,l[p]=l[a],l[a]=b,g=(g+a)*p;t.freeUint32(l);t.freeUint32(k);return g};p.unrank=function(a,b,k){switch(a){case 0:return k?k:[];case 1:return k?(k[0]=0,k):[0];case 2:return k?(b?(k[0]=0,k[1]=1):(k[0]=1,k[1]=0),k):
b?[0,1]:[1,0]}k=k||Array(a);var l,g,q=1;k[0]=0;for(g=1;g<a;++g)k[g]=g,q=q*g|0;for(g=a-1;0<g;--g)a=b/q|0,b=b-a*q|0,q=q/g|0,l=k[g]|0,k[g]=k[a]|0,k[a]=l|0;return k}},{"invert-permutation":84,"typedarray-pool":121}],93:[function(b,g,p){g.exports=function(b,a){function e(a,d){var b=w[d][a[d]];b.splice(b.indexOf(a),1)}function k(d,b,h){var k,l,c;for(l=0;2>l;++l)if(0<w[l][b].length){k=w[l][b][0];c=l;break}l=k[c^1];for(var g=0;2>g;++g)for(var q=w[g][b],r=0;r<q.length;++r){var u=q[r],p=u[g^1];0<t(a[d],a[b],
a[l],a[p])&&(k=u,l=p,c=g)}if(h)return l;k&&e(k,c);return l}function l(d,b){var h=w[b][d][0],l=[d];e(h,b);for(h=h[b^1];;){for(;h!==d;)l.push(h),h=k(l[l.length-2],h,!1);if(0===w[0][d].length+w[1][d].length)break;var h=l[l.length-1],g=d,c=l[1],q=k(h,g,!0);if(0>t(a[h],a[g],a[c],a[q]))break;l.push(d);h=k(h,g)}return l}for(var g=a.length|0,p=b.length,w=[Array(g),Array(g)],u=0;u<g;++u)w[0][u]=[],w[1][u]=[];for(u=0;u<p;++u){var r=b[u];w[0][r[0]].push(r);w[1][r[1]].push(r)}p=[];for(u=0;u<g;++u)0===w[0][u].length+
w[1][u].length&&p.push([u]);for(u=0;u<g;++u)for(r=0;2>r;++r){for(var h=[];0<w[r][u].length;){var d=l(u,r);d[1]===d[d.length-1]?h.push.apply(h,d):(0<h.length&&p.push(h),h=d)}0<h.length&&p.push(h)}return p};var t=b("compare-angle")},{"compare-angle":68}],94:[function(b,g,p){g.exports=function(b,a){for(var e=t(b,a.length),k=Array(a.length),l=Array(a.length),g=[],p=0;p<a.length;++p){var w=e[p].length;l[p]=w;k[p]=!0;1>=w&&g.push(p)}for(;0<g.length;)for(w=g.pop(),k[w]=!1,w=e[w],p=0;p<w.length;++p){var u=
w[p];0===--l[u]&&g.push(u)}e=Array(a.length);l=[];for(p=0;p<a.length;++p)k[p]?(w=l.length,e[p]=w,l.push(a[p])):e[p]=-1;g=[];for(p=0;p<b.length;++p)w=b[p],k[w[0]]&&k[w[1]]&&g.push([e[w[0]],e[w[1]]]);return[g,l]};var t=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":75}],95:[function(b,g,p){function t(a,b){for(var e=Array(a),d=0;d<a;++d)e[d]=b;return e}function q(a){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return b}g.exports=function(b,g){function h(a){for(var d=a.length,c=0;c<d;++c)if(!D[a[c]])return!1;
return!0}var d=w(b,g);b=d[0];g=d[1];for(var f=g.length,m=a(b,g.length),n=0;n<f;++n)if(1===m[n].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=e(b,g),m=m.filter(function(a){for(var d=a.length,c=[0],b=0;b<d;++b)var e=g[a[b]],f=g[a[(b+1)%d]],h=l(-e[0],e[1]),m=l(-e[0],f[1]),e=l(f[0],e[1]),f=l(f[0],f[1]),c=y(c,y(y(h,m),y(e,f)));return 0<c[c.length-1]}),d=m.length,p=Array(d),E=Array(d),n=0;n<d;++n){p[n]=n;var c=Array(d),x=m[n].map(function(a){return g[a]}),C=k([x]),F=
0,A=0;a:for(;A<d;++A)if(c[A]=0,n!==A){for(var x=m[A],B=x.length,O=0;O<B;++O){var I=C(g[x[O]]);if(0!==I){0>I&&(c[A]=1,F+=1);continue a}}c[A]=1;F+=1}E[n]=[F,n,c]}E.sort(function(a,d){return d[0]-a[0]});for(n=0;n<d;++n)for(c=E[n],x=c[1],B=c[2],A=0;A<d;++A)B[A]&&(p[A]=x);E=q(d);for(n=0;n<d;++n)E[n].push(p[n]),E[p[n]].push(n);for(var c={},D=t(f,!1),n=0;n<d;++n)for(x=m[n],B=x.length,A=0;A<B;++A)f=x[A],C=x[(A+1)%B],F=Math.min(f,C)+":"+Math.max(f,C),F in c?(F=c[F],E[F].push(n),E[n].push(F),D[f]=D[C]=!0):
c[F]=n;A=[];f=t(d,-1);for(n=0;n<d;++n)p[n]!==n||h(m[n])?f[n]=-1:(A.push(n),f[n]=0);for(d=[];0<A.length;){n=A.pop();p=E[n];v(p,function(a,d){return a-d});var B=p.length,c=f[n],L;0===c&&(x=m[n],L=[x]);for(n=0;n<B;++n)x=p[n],0<=f[x]||(f[x]=c^1,A.push(x),0===c&&(x=m[x],h(x)||(x.reverse(),L.push(x))));0===c&&d.push(L)}return d};var a=b("edges-to-adjacency-list"),e=b("planar-dual"),k=b("point-in-big-polygon"),l=b("two-product"),y=b("robust-sum"),v=b("uniq"),w=b("./lib/trim-leaves")},{"./lib/trim-leaves":94,
"edges-to-adjacency-list":75,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":119,uniq:123}],96:[function(b,g,p){arguments[4][83][0].apply(p,arguments)},{dup:83}],97:[function(b,g,p){function t(){return!0}function q(a){return function(d,b){var e=a[d];return e?!!e.queryPoint(b,t):!1}}function a(a){for(var d={},b=0;b<a.length;++b){var e=a[b],k=e[0][0],g=e[0][1],e=e[1][1],g=[Math.min(g,e),Math.max(g,e)];k in d?d[k].push(g):d[k]=[g]}a={};k=Object.keys(d);for(b=0;b<k.length;++b)a[k[b]]=
u(d[k[b]]);return q(a)}function e(a,d){return function(b){var e=r.le(d,b[0]);if(0>e)return 1;var k=a[e];if(!k)if(0<e&&d[e]===b[0])k=a[e-1];else return 1;for(e=1;k;){var g=k.key,l=v(b,g[0],g[1]);if(g[0][0]<g[1][0])if(0>l)k=k.left;else if(0<l)e=-1,k=k.right;else return 0;else if(0<l)k=k.left;else if(0>l)e=1,k=k.right;else return 0}return e}}function k(a){return 1}function l(a){return function(d){return a(d[0],d[1])?0:1}}function y(a,d){return function(b){return a(b[0],b[1])?0:d(b)}}g.exports=function(b){for(var d=
b.length,f=[],m=[],g=0;g<d;++g)for(var q=b[g],r=q.length,c=r-1,p=0;p<r;c=p++){var c=q[c],u=q[p];c[0]===u[0]?m.push([c,u]):f.push([c,u])}if(0===f.length)return 0===m.length?k:l(a(m));b=w(f);b=e(b.slabs,b.coordinates);return 0===m.length?b:y(a(m),b)};var v=b("robust-orientation")[3],w=b("slab-decomposition"),u=b("interval-tree-1d"),r=b("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":82,"robust-orientation":103,"slab-decomposition":116}],98:[function(b,g,p){var t=b("big-rat/add");
g.exports=function(b,a){for(var e=b.length,k=Array(e),g=0;g<e;++g)k[g]=t(b[g],a[g]);return k}},{"big-rat/add":34}],99:[function(b,g,p){g.exports=function(b){for(var a=Array(b.length),e=0;e<b.length;++e)a[e]=t(b[e]);return a};var t=b("big-rat")},{"big-rat":37}],100:[function(b,g,p){var t=b("big-rat"),q=b("big-rat/mul");g.exports=function(a,b){for(var k=t(b),g=a.length,p=Array(g),v=0;v<g;++v)p[v]=q(a[v],k);return p}},{"big-rat":37,"big-rat/mul":46}],101:[function(b,g,p){var t=b("big-rat/sub");g.exports=
function(b,a){for(var e=b.length,k=Array(e),g=0;g<e;++g)k[g]=t(b[g],a[g]);return k}},{"big-rat/sub":49}],102:[function(b,g,p){function t(a,b){for(var e=Array(a.length-1),h=1;h<a.length;++h)for(var k=e[h-1]=Array(a.length-1),g=0,c=0;g<a.length;++g)g!==b&&(k[c++]=a[h][g]);return e}function q(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",q(a.slice(0,b)),",",q(a.slice(b)),")"].join("")}function a(d,b){if("m"===d.charAt(0)){if("w"===
b.charAt(0)){var e=d.split("[");return["w",b.substr(1),"m",e[0].substr(1)].join("")}return["prod(",d,",",b,")"].join("")}return a(b,d)}function e(d){if(2===d.length)return[["diff(",a(d[0][0],d[1][1]),",",a(d[1][0],d[0][1]),")"].join("")];for(var b=[],h=0;h<d.length;++h)b.push(["scale(",q(e(t(d,h))),",",h&1?"-":"",d[0][h],")"].join(""));return b}function k(a,b){for(var e=[],h=0;h<b-2;++h)e.push(["prod(m",a,"[",h,"],m",a,"[",h,"])"].join(""));return q(e)}function l(a){for(var b=[],h=[],g=Array(a),l=
0;l<a;++l){g[l]=Array(a);for(var p=0;p<a;++p)g[l][p]=["m",p,"[",a-l-2,"]"].join("")}for(l=0;l<a;++l)g[0][l]="1",g[a-1][l]="w"+l;for(l=0;l<a;++l)0===(l&1)?b.push.apply(b,e(t(g,l))):h.push.apply(h,e(t(g,l)));b=q(b);h=q(h);g="exactInSphere"+a;p=[];for(l=0;l<a;++l)p.push("m"+l);p=["function ",g,"(",p.join(),"){"];for(l=0;l<a;++l){p.push("var w",l,"=",k(l,a),";");for(var c=0;c<a;++c)c!==l&&p.push("var w",l,"m",c,"=scale(w",l,",m",c,"[0]);")}p.push("var p=",b,",n=",h,",d=diff(p,n);return d[d.length-1];}return ",
g);return(new Function("sum","diff","prod","scale",p.join("")))(w,u,v,r)}function y(a){var b=h[a.length];b||(b=h[a.length]=l(a.length));return b.apply(void 0,a)}var v=b("two-product"),w=b("robust-sum"),u=b("robust-subtract"),r=b("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],b=["slow"],e=0;6>=e;++e)a.push("a"+e),b.push("o"+e);for(var k=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
e=2;6>=e;++e)k.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");b.push(k.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[y].concat(h));for(e=0;6>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],103:[function(b,g,p){function t(a,b){for(var e=Array(a.length-1),h=1;h<a.length;++h)for(var k=
e[h-1]=Array(a.length-1),g=0,c=0;g<a.length;++g)g!==b&&(k[c++]=a[h][g]);return e}function q(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",q(a.slice(0,b)),",",q(a.slice(b)),")"].join("")}function a(d){if(2===d.length)return[["sum(prod(",d[0][0],",",d[1][1],"),prod(-",d[0][1],",",d[1][0],"))"].join("")];for(var b=[],e=0;e<d.length;++e)b.push(["scale(",q(a(t(d,e))),",",e&1?"-":"",d[0][e],")"].join(""));return b}function e(d){for(var b=
[],e=[],h=Array(d),g=0;g<d;++g){h[g]=Array(d);for(var k=0;k<d;++k)h[g][k]=["m",k,"[",d-g-1,"]"].join("")}g=[];for(k=0;k<d;++k)0===(k&1)?b.push.apply(b,a(t(h,k))):e.push.apply(e,a(t(h,k))),g.push("m"+k);b=q(b);e=q(e);d="orientation"+d+"Exact";d=["function ",d,"(",g.join(),"){var p=",b,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",d].join("");return(new Function("sum","prod","scale","sub",d))(y,l,v,w)}function k(a){var b=h[a.length];b||(b=h[a.length]=e(a.length));return b.apply(void 0,a)}var l=
b("two-product"),y=b("robust-sum"),v=b("robust-scale"),w=b("robust-subtract"),u=e(3),r=e(4),h=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,e){var h=(a[1]-e[1])*(b[0]-e[0]),k=(a[0]-e[0])*(b[1]-e[1]),g=h-k;if(0<h){if(0>=k)return g;h+=k}else if(0>h){if(0<=k)return g;h=-(h+k)}else return g;h*=3.3306690738754716E-16;return g>=h||g<=-h?g:u(a,b,e)},function(a,b,e,h){var g=a[0]-h[0],k=b[0]-h[0],c=e[0]-h[0],l=a[1]-h[1],q=b[1]-h[1],p=e[1]-h[1],u=a[2]-h[2],t=b[2]-h[2],
v=e[2]-h[2],w=k*p,y=c*q,c=c*l,p=g*p,g=g*q,l=k*l,k=u*(w-y)+t*(c-p)+v*(g-l),u=7.771561172376103E-16*((Math.abs(w)+Math.abs(y))*Math.abs(u)+(Math.abs(c)+Math.abs(p))*Math.abs(t)+(Math.abs(g)+Math.abs(l))*Math.abs(v));return k>u||-k>u?k:r(a,b,e,h)}];(function(){for(;5>=h.length;)h.push(e(h.length));for(var a=[],b=["slow"],m=0;5>=m;++m)a.push("a"+m),b.push("o"+m);for(var l=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],m=2;5>=m;++m)l.push("case ",m,":return o",
m,"(",a.slice(0,m).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");b.push(l.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[k].concat(h));for(m=0;5>=m;++m)g.exports[m]=h[m]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],104:[function(b,g,p){var t=b("robust-sum"),q=b("robust-scale");g.exports=function(a,b){if(1===a.length)return q(b,a[0]);if(1===
b.length)return q(a,b[0]);if(0===a.length||0===b.length)return[0];var k=[0];if(a.length<b.length)for(var g=0;g<a.length;++g)k=t(k,q(b,a[g]));else for(g=0;g<b.length;++g)k=t(k,q(a,b[g]));return k}},{"robust-scale":105,"robust-sum":108}],105:[function(b,g,p){var t=b("two-product"),q=b("two-sum");g.exports=function(a,b){var g=a.length;if(1===g)return g=t(a[0],b),g[0]?g:[g[1]];var l=Array(2*g),p=[.1,.1],v=[.1,.1],w=0;t(a[0],b,p);p[0]&&(l[w++]=p[0]);for(var u=1;u<g;++u){t(a[u],b,v);q(p[1],v[0],p);p[0]&&
(l[w++]=p[0]);var r=v[1],h=p[1],d=r+h,r=h-(d-r);p[1]=d;r&&(l[w++]=r)}p[1]&&(l[w++]=p[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":119,"two-sum":120}],106:[function(b,g,p){g.exports=function(b,a,e,g){var l=t(b,e,g),p=t(a,e,g);if(0<l&&0<p||0>l&&0>p)return!1;var v=t(e,b,a),w=t(g,b,a);if(0<v&&0<w||0>v&&0>w)return!1;if(0===l&&0===p&&0===v&&0===w){a:{for(l=0;2>l;++l){var p=b[l],v=a[l],w=Math.max(p,v),u=e[l],r=g[l],h=Math.min(u,r);if(Math.max(u,r)<Math.min(p,v)||w<h){b=!1;break a}}b=!0}return b}return!0};
var t=b("robust-orientation")[3]},{"robust-orientation":103}],107:[function(b,g,p){g.exports=function(b,g){var a=b.length|0,e=g.length|0;if(1===a&&1===e){var e=b[0],k=-g[0],a=e+k,l=a-e,a=(e=e-(a-l)+(k-l))?[e,a]:[a];return a}var k=Array(a+e),p=l=0,v=0,w=Math.abs,u=b[p],r=w(u),h=-g[v],d=w(h),f,m;r<d?(m=u,p+=1,p<a&&(u=b[p],r=w(u))):(m=h,v+=1,v<e&&(h=-g[v],d=w(h)));p<a&&r<d||v>=e?(f=u,p+=1,p<a&&(u=b[p],r=w(u))):(f=h,v+=1,v<e&&(h=-g[v],d=w(h)));var n=f+m;m-=n-f;for(var z=n,E;p<a&&v<e;)r<d?(f=u,p+=1,p<
a&&(u=b[p],r=w(u))):(f=h,v+=1,v<e&&(h=-g[v],d=w(h))),n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f;for(;p<a;)f=u,n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f,p+=1,p<a&&(u=b[p]);for(;v<e;)f=h,n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f,v+=1,v<e&&(h=-g[v]);m&&(k[l++]=m);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],108:[function(b,g,p){g.exports=function(b,g){var a=b.length|0,e=g.length|0;if(1===a&&1===e){var e=b[0],
k=g[0],a=e+k,l=a-e,a=(e=e-(a-l)+(k-l))?[e,a]:[a];return a}var k=Array(a+e),p=l=0,v=0,w=Math.abs,u=b[p],r=w(u),h=g[v],d=w(h),f,m;r<d?(m=u,p+=1,p<a&&(u=b[p],r=w(u))):(m=h,v+=1,v<e&&(h=g[v],d=w(h)));p<a&&r<d||v>=e?(f=u,p+=1,p<a&&(u=b[p],r=w(u))):(f=h,v+=1,v<e&&(h=g[v],d=w(h)));var n=f+m;m-=n-f;for(var z=n,E;p<a&&v<e;)r<d?(f=u,p+=1,p<a&&(u=b[p],r=w(u))):(f=h,v+=1,v<e&&(h=g[v],d=w(h))),n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f;for(;p<a;)f=u,n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=
z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f,p+=1,p<a&&(u=b[p]);for(;v<e;)f=h,n=f+m,f=n-f,(f=m-f)&&(k[l++]=f),f=z+n,E=f-z,m=f-E,n-=E,z-=m,m=z+n,z=f,v+=1,v<e&&(h=g[v]);m&&(k[l++]=m);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],109:[function(b,g,p){g.exports=function(b){return 0>b?-1:0<b?1:0}},{}],110:[function(b,g,p){arguments[4][52][0].apply(p,arguments)},{dup:52}],111:[function(b,g,p){function t(b){this.roots=Array(b);this.ranks=Array(b);for(var a=0;a<b;++a)this.roots[a]=a,this.ranks[a]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};t.prototype.find=function(b){for(var a=this.roots;a[b]!==b;){var e=a[b];a[b]=a[e];b=e}return b};t.prototype.link=function(b,a){var e=this.find(b),g=this.find(a);if(e!==g){var l=this.ranks,p=this.roots,t=l[e],w=l[g];t<w?p[e]=g:w<t?p[g]=e:(p[g]=e,++l[e])}}},{}],112:[function(b,g,p){function t(a,b){var e=a.length,d=a.length-b.length,
f=Math.min;if(d)return d;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:f(a[0],a[1])-f(b[0],b[1]);case 3:var d=a[0]+a[1],g=b[0]+b[1];if(e=d+a[2]-(g+b[2]))return e;var k=f(a[0],a[1]),l=f(b[0],b[1]);return(e=f(k,a[2])-f(l,b[2]))?e:f(k+a[2],d)-f(l+b[2],g);default:f=a.slice(0);f.sort();g=b.slice(0);g.sort();for(k=0;k<e;++k)if(d=f[k]-g[k])return d;return 0}}function q(a,b){return t(a[0],b[0])}function a(a,b){if(b){for(var e=a.length,d=Array(e),f=0;f<e;++f)d[f]=
[a[f],b[f]];d.sort(q);for(f=0;f<e;++f)a[f]=d[f][0],b[f]=d[f][1]}else a.sort(t);return a}function e(a){if(0===a.length)return[];for(var b=1,e=a.length,d=1;d<e;++d){var f=a[d];t(f,a[d-1])&&(d===b?b++:a[b++]=f)}a.length=b;return a}function k(a,b){for(var e=0,d=a.length-1,f=-1;e<=d;){var g=e+d>>1,k=t(a[g],b);0>=k?(0===k&&(f=g),e=g+1):0<k&&(d=g-1)}return f}function l(a,b){for(var e=Array(a.length),d=0,f=e.length;d<f;++d)e[d]=[];for(var f=[],d=0,g=b.length;d<g;++d)for(var l=b[d],q=l.length,p=1,c=1<<q;p<
c;++p){f.length=v.popCount(p);for(var w=0,y=0;y<q;++y)p&1<<y&&(f[w++]=l[y]);w=k(a,f);if(!(0>w))for(;!(e[w++].push(d),w>=a.length||0!==t(a[w],f)););}return e}function y(b,e){if(0>e)return[];for(var h=[],d=(1<<e+1)-1,f=0;f<b.length;++f)for(var g=b[f],k=d;k<1<<g.length;k=v.nextCombination(k)){for(var l=Array(e+1),q=0,c=0;c<g.length;++c)k&1<<c&&(l[q++]=g[c]);h.push(l)}return a(h)}"use restrict";var v=b("bit-twiddle"),w=b("union-find");p.dimension=function(a){for(var b=0,e=Math.max,d=0,f=a.length;d<f;++d)b=
e(b,a[d].length);return b-1};p.countVertices=function(a){for(var b=-1,e=Math.max,d=0,f=a.length;d<f;++d)for(var g=a[d],k=0,l=g.length;k<l;++k)b=e(b,g[k]);return b+1};p.cloneCells=function(a){for(var b=Array(a.length),e=0,d=a.length;e<d;++e)b[e]=a[e].slice(0);return b};p.compareCells=t;p.normalize=a;p.unique=e;p.findCell=k;p.incidence=l;p.dual=function(a,b){if(!b)return l(e(y(a,0)),a,0);for(var h=Array(b),d=0;d<b;++d)h[d]=[];for(var d=0,f=a.length;d<f;++d)for(var g=a[d],k=0,q=g.length;k<q;++k)h[g[k]].push(d);
return h};p.explode=function(b){for(var e=[],h=0,d=b.length;h<d;++h)for(var f=b[h],g=f.length|0,k=1,l=1<<g;k<l;++k){for(var q=[],c=0;c<g;++c)k>>>c&1&&q.push(f[c]);e.push(q)}return a(e)};p.skeleton=y;p.boundary=function(b){for(var e=[],h=0,d=b.length;h<d;++h)for(var f=b[h],g=0,k=f.length;g<k;++g){for(var l=Array(f.length-1),q=0,c=0;q<k;++q)q!==g&&(l[c++]=f[q]);e.push(l)}return a(e)};p.connectedComponents=function(b,g){if(g){for(var h=new w(g),d=0;d<b.length;++d)for(var f=b[d],l=0;l<f.length;++l)for(var n=
l+1;n<f.length;++n)h.link(f[l],f[n]);f=[];l=h.ranks;for(d=0;d<l.length;++d)l[d]=-1;for(d=0;d<b.length;++d)n=h.find(b[d][0]),0>l[n]?(l[n]=f.length,f.push([b[d].slice(0)])):f[l[n]].push(b[d].slice(0));return f}h=e(a(y(b,0)));d=new w(h.length);for(f=0;f<b.length;++f)for(l=b[f],n=0;n<l.length;++n)for(var q=k(h,[l[n]]),p=n+1;p<l.length;++p)d.link(q,k(h,[l[p]]));l=[];n=d.ranks;for(f=0;f<n.length;++f)n[f]=-1;for(f=0;f<b.length;++f)q=d.find(k(h,[b[f][0]])),0>n[q]?(n[q]=l.length,l.push([b[f].slice(0)])):l[n[q]].push(b[f].slice(0));
return l}},{"bit-twiddle":110,"union-find":111}],113:[function(b,g,p){g.exports=function(a,b,g){function l(a){if(c[a])return Infinity;var d=n[a],f=z[a];if(0>d||0>f)return Infinity;d=b[d];f=b[f];return Math.abs(t(b[a],d,f))/Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2))}function p(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function v(a){for(var b=E[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<O){var h=E[A[d]];h<c&&(f=d,c=h)}e<O&&E[A[e]]<c&&(f=e);if(f===a)return a;p(a,f);a=f}}function w(a){for(var b=
E[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[A[c]])p(a,c),a=c;else return a}}function u(){if(0<O){var a=A[0];p(0,O-1);--O;v(0);return a}return-1}function r(a,b){var c=A[a];if(E[c]===b)return a;E[c]=-Infinity;w(a);u();E[c]=b;O+=1;return w(O-1)}function h(a){if(!c[a]){c[a]=!0;var b=n[a];a=z[a];0<=n[a]&&(n[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&r(B[b],l(b));0<=B[a]&&r(B[a],l(a))}}function d(a,b){if(0>a[b])return b;var d=b,e=b;do{var f=a[e];if(!c[e]||0>f||f===e)break;e=f;f=a[e];if(!c[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=b;d!==e;d=a[d])a[d]=e;return e}for(var f=b.length,m=a.length,n=Array(f),z=Array(f),E=Array(f),c=Array(f),x=0;x<f;++x)n[x]=z[x]=-1,E[x]=Infinity,c[x]=!1;for(x=0;x<m;++x){var C=a[x];if(2!==C.length)throw Error("Input must be a graph");var F=C[1],C=C[0];z[C]=-1!==z[C]?-2:F;n[F]=-1!==n[F]?-2:C}for(var A=[],B=Array(f),x=0;x<f;++x)Infinity>(E[x]=l(x))?(B[x]=A.length,A.push(x)):B[x]=-1;for(var O=A.length,x=O>>1;0<=x;--x)v(x);for(;;){x=u();if(0>x||E[x]>g)break;h(x)}g=
[];for(x=0;x<f;++x)c[x]||(B[x]=g.length,g.push(b[x].slice()));var I=[];a.forEach(function(a){var b=d(n,a[0]);a=d(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&I.push([b,a]))});q.unique(q.normalize(I));return{positions:g,edges:I}};var t=b("robust-orientation"),q=b("simplicial-complex")},{"robust-orientation":103,"simplicial-complex":112}],114:[function(b,g,p){function t(a,b){var g,l;if(b[0][0]<b[1][0])g=b[0],l=b[1];else if(b[0][0]>b[1][0])g=b[1],l=b[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var p=Math.min(b[0][1],b[1][1]),t=Math.max(b[0][1],b[1][1]);return l<p?l-p:g>t?g-t:l-t}a[0][1]<a[1][1]?(t=a[0],p=a[1]):(t=a[1],p=a[0]);return(t=q(l,g,t))?t:(t=q(l,g,p))?t:p-l}g.exports=function(a,b){var g,l;if(b[0][0]<b[1][0])g=b[0],l=b[1];else if(b[0][0]>b[1][0])g=b[1],l=b[0];else return t(b,a);var p,v;if(a[0][0]<a[1][0])p=a[0],v=a[1];else if(a[0][0]>a[1][0])p=a[1],v=a[0];else return-t(a,b);var w=q(g,l,v),u=q(g,l,p);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;
w=q(v,p,l);u=q(v,p,g);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;return l[0]-v[0]};var q=b("robust-orientation")},{"robust-orientation":103}],115:[function(b,g,p){arguments[4][83][0].apply(p,arguments)},{dup:83}],116:[function(b,g,p){function t(a,b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function q(a,b){return a.y-b}function a(b,e){for(var h=null;b;){var d=b.key,f,g;d[0][0]<d[1][0]?(f=d[0],g=d[1]):(f=d[1],g=d[0]);f=v(f,g,e);if(0>f)b=b.left;else if(0<f)if(e[0]!==
d[1][0])h=b,b=b.right;else{if(d=a(b.right,e))return d;b=b.left}else{if(e[0]!==d[1][0])return b;if(d=a(b.right,e))return d;b=b.left}}return h}function e(a,b,e,d){this.y=a;this.index=b;this.start=e;this.closed=d}function k(a,b,e,d){this.x=a;this.segment=b;this.create=e;this.index=d}g.exports=function(a){for(var b=a.length,g=2*b,d=Array(g),f=0;f<b;++f){var l=a[f],n=l[0][0]<l[1][0];d[2*f]=new k(l[0][0],l,n,f);d[2*f+1]=new k(l[1][0],l,!n,f)}d.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);b=[];l=[];n=[];for(f=0;f<g;){for(var q=d[f].x,p=[];f<g;){var c=d[f];if(c.x!==q)break;f+=1;c.segment[0][0]===c.x&&c.segment[1][0]===c.x?c.create&&(c.segment[0][1]<c.segment[1][1]?(p.push(new e(c.segment[0][1],c.index,!0,!0)),p.push(new e(c.segment[1][1],c.index,!1,!1))):(p.push(new e(c.segment[1][1],c.index,!0,!1)),p.push(new e(c.segment[0][1],c.index,!1,!0)))):a=c.create?a.insert(c.segment,c.index):a.remove(c.segment)}b.push(a.root);
l.push(q);n.push(p)}return new t(b,l,n)};var l=b("binary-search-bounds"),y=b("functional-red-black-tree"),v=b("robust-orientation"),w=b("./lib/order-segments");t.prototype.castUp=function(b){var e=l.le(this.coordinates,b[0]);if(0>e)return-1;var g=a(this.slabs[e],b),d=-1;g&&(d=g.value);if(this.coordinates[e]===b[0]){var f=null;g&&(f=g.key);0<e&&(g=a(this.slabs[e-1],b))&&(f?0<w(g.key,f)&&(f=g.key,d=g.value):(d=g.value,f=g.key));g=this.horizontal[e];if(0<g.length){var k=l.ge(g,b[1],q);if(k<g.length){e=
g[k];if(b[1]===e.y){if(e.closed)return e.index;for(;k<g.length-1&&g[k+1].y===b[1];)if(k+=1,e=g[k],e.closed)return e.index;if(e.y===b[1]&&!e.start){k+=1;if(k>=g.length)return d;e=g[k]}}e.start?f?(b=v(f[0],f[1],[b[0],e.y]),f[0][0]>f[1][0]&&(b=-b),0<b&&(d=e.index)):d=e.index:e.y!==b[1]&&(d=e.index)}}}return d}},{"./lib/order-segments":114,"binary-search-bounds":115,"functional-red-black-tree":76,"robust-orientation":103}],117:[function(b,g,p){function t(b,e){var g=b.length,k=["'use strict';"],p="surfaceNets"+
b.join("_")+"d"+e;k.push("var contour=genContour({","order:[",b.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===e&&k.push("getters:[0],");for(var r=[],h=[],d=0;d<g;++d)r.push("d"+d),h.push("d"+d);for(d=0;d<1<<g;++d)r.push("v"+d),h.push("v"+d);for(d=0;d<1<<g;++d)r.push("p"+d),h.push("p"+d);r.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(d=0;d<1<<g;++d)r.push("(p"+d+"<<"+d+")");k.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],f=[];128>=1<<(1<<g)?(k.push("switch(m){"),f=k):k.push("switch(m>>>7){");for(d=0;d<1<<(1<<g);++d){128<1<<(1<<g)&&0===d%128&&(0<r.length&&f.push("}}"),f="vExtra"+r.length,k.push("case ",d>>>7,":",f,"(m&0x7f,",h.join(),");break;"),f=["function ",f,"(m,",h.join(),"){switch(m){"],r.push(f));f.push("case ",d&127,":");for(var m=Array(g),n=Array(g),t=Array(g),E=Array(g),c=0,x=0;x<g;++x)m[x]=[],n[x]=[],t[x]=0,E[x]=0;for(x=0;x<1<<g;++x)for(var C=
0;C<g;++C){var F=x^1<<C;if(!(F>x)&&!(d&1<<F)!==!(d&1<<x)){var A=1;d&1<<F?n[C].push("v"+F+"-v"+x):(n[C].push("v"+x+"-v"+F),A=-A);0>A?(m[C].push("-v"+x+"-v"+F),t[C]+=2):(m[C].push("v"+x+"+v"+F),t[C]-=2);c+=1;for(A=0;A<g;++A)A!==C&&(F&1<<A?E[A]+=1:--E[A])}}x=[];for(C=0;C<g;++C)0===m[C].length?x.push("d"+C+"-0.5"):(F="",0>t[C]?F=t[C]+"*c":0<t[C]&&(F="+"+t[C]+"*c"),x.push("d"+C+"-"+(.5+E[C]/c*.5)+"-"+m[C].length/c*.5+"*("+m[C].join("+")+F+")/("+n[C].join("+")+")"));f.push("a.push([",x.join(),"]);","break;")}k.push("}},");
0<r.length&&f.push("}}");h=[];for(d=0;d<1<<g-1;++d)h.push("v"+d);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=a(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",p,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
p,";");for(d=0;d<r.length;++d)k.push(r[d].join(""));return(new Function("genContour",k.join("")))(q)}g.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=e(a,b),q=g.length,p=Array(q),r=Array(q),h=0;h<q;++h)p[h]=[g[h]],r[h]=[h];return{positions:p,cells:r}}g=a.order.join()+"-"+a.dtype;q=k[g];b=+b||0;q||(q=k[g]=t(a.order,a.dtype));return q(a,b)};var q=b("ndarray-extract-contour"),a=b("triangulate-hypercube"),e=b("zero-crossings"),k={}},{"ndarray-extract-contour":88,
"triangulate-hypercube":118,"zero-crossings":127}],118:[function(b,g,p){g.exports=function(b){if(0>b)return[];if(0===b)return[[0]];for(var g=Math.round(a(b+1))|0,l=[],p=0;p<g;++p){for(var v=t.unrank(b,p),w=[0],u=0,r=0;r<v.length;++r)u+=1<<v[r],w.push(u);1>q(v)&&(w[0]=u,w[b]=0);l.push(w)}return l};var t=b("permutation-rank"),q=b("permutation-parity"),a=b("gamma")},{gamma:77,"permutation-parity":91,"permutation-rank":92}],119:[function(b,g,p){g.exports=function(b,a,e){var g=b*a,l=t*b,l=l-(l-b);b-=l;
var p=t*a,p=p-(p-a);a-=p;a=b*a-(g-l*p-b*p-l*a);return e?(e[0]=a,e[1]=g,e):[a,g]};var t=+(Math.pow(2,27)+1)},{}],120:[function(b,g,p){g.exports=function(b,g,a){var e=b+g,k=e-b;g-=k;b-=e-k;return a?(a[0]=b+g,a[1]=e,a):[b+g,e]}},{}],121:[function(b,g,p){(function(g,q){function a(a){if(a){var b=n.log2(a.length||a.byteLength);x[b].push(a)}}function e(a){a=n.nextPow2(a);var b=n.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function k(a){return new Uint8Array(e(a),0,a)}function l(a){return new Uint16Array(e(2*
a),0,a)}function y(a){return new Uint32Array(e(4*a),0,a)}function v(a){return new Int8Array(e(a),0,a)}function w(a){return new Int16Array(e(2*a),0,a)}function u(a){return new Int32Array(e(4*a),0,a)}function r(a){return new Float32Array(e(4*a),0,a)}function h(a){return new Float64Array(e(8*a),0,a)}function d(a){return E?new Uint8ClampedArray(e(a),0,a):k(a)}function f(a){return new DataView(e(a),0,a)}function m(a){a=n.nextPow2(a);var b=n.log2(a),b=C[b];return 0<b.length?b.pop():new q(a)}var n=b("bit-twiddle"),
z=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var E="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=z([32,0]));c.BUFFER||(c.BUFFER=z([32,0]));var x=c.DATA,C=c.BUFFER;p.free=function(a){if(q.isBuffer(a))C[n.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=n.log2(a.length||a.byteLength)|0;x[b].push(a)}};p.freeUint8=p.freeUint16=p.freeUint32=p.freeInt8=p.freeInt16=p.freeInt32=p.freeFloat32=p.freeFloat=p.freeFloat64=p.freeDouble=p.freeUint8Clamped=p.freeDataView=function(b){a(b.buffer)};p.freeArrayBuffer=a;p.freeBuffer=function(a){C[n.log2(a.length)].push(a)};p.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return e(a);switch(b){case "uint8":return k(a);case "uint16":return l(a);case "uint32":return y(a);case "int8":return v(a);
case "int16":return w(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return h(a);case "uint8_clamped":return d(a);case "buffer":return m(a);case "data":case "dataview":return f(a);default:return null}};p.mallocArrayBuffer=e;p.mallocUint8=k;p.mallocUint16=l;p.mallocUint32=y;p.mallocInt8=v;p.mallocInt16=w;p.mallocInt32=u;p.mallocFloat32=p.mallocFloat=r;p.mallocFloat64=p.mallocDouble=h;p.mallocUint8Clamped=d;p.mallocDataView=f;p.mallocBuffer=m;p.clearCache=
function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,x[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:74}],122:[function(b,g,p){function t(b){this.roots=Array(b);this.ranks=Array(b);for(var a=
0;a<b;++a)this.roots[a]=a,this.ranks[a]=0}"use restrict";g.exports=t;b=t.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};b.find=function(b){for(var a=b,e=this.roots;e[b]!==b;)b=e[b];for(;e[a]!==b;){var g=e[a];e[a]=b;a=g}return b};b.link=function(b,a){var e=this.find(b),g=this.find(a);if(e!==g){var l=this.ranks,p=this.roots,t=l[e],w=l[g];t<w?p[e]=g:w<t?p[g]=e:(p[g]=e,
++l[e])}}},{}],123:[function(b,g,p){g.exports=function(b,g,a){if(0===b.length)return b;if(g){a||b.sort(g);a=1;for(var e=b.length,k=b[0],l=b[0],p=1;p<e;++p)l=k,k=b[p],g(k,l)&&(p===a?a++:b[a++]=k);b.length=a;return b}a||b.sort();g=1;a=b.length;e=b[0];k=b[0];for(l=1;l<a;++l)k=e,e=b[l],e!==k&&(l===g?g++:b[g++]=e);b.length=g;return b}},{}],124:[function(b,g,p){g.exports=function(b,g){if("object"!==typeof g||null===g)g={};return t(b,g.canvas||q,g.context||a,g)};var t=b("./lib/vtext"),q=null,a=null;"undefined"!==
typeof document&&(q=document.createElement("canvas"),q.width=8192,q.height=1024,a=q.getContext("2d"))},{"./lib/vtext":125}],125:[function(b,g,p){function t(a,b,e){for(var d=b.textAlign||"start",f=b.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],l=a.length,p=0;p<l;++p)for(var c=a[p],q=0;2>q;++q)g[q]=Math.min(g[q],c[q])|0,k[q]=Math.max(k[q],c[q])|0;var t=0;switch(d){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
d+"'");}var v=0;switch(f){case "hanging":case "top":v=-g[1];break;case "middle":v=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":v=-3*e;break;case "bottom":v=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+f+"'");}var w=1/e;"lineHeight"in b?w*=+b.lineHeight:"width"in b?w=b.width/(k[0]-g[0]):"height"in b&&(w=b.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+v)]})}function q(a,b,g,d){a=e(a,128);d=d?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(d.positions,b,g);a=d.edges;d="ccw"===b.orientation;y(g,a);if(b.polygons||b.polygon||b.polyline){b=w(a,g);a=Array(b.length);for(var f=0;f<b.length;++f){for(var k=b[f],n=Array(k.length),p=0;p<k.length;++p){for(var q=k[p],c=Array(q.length),x=0;x<q.length;++x)c[x]=g[q[x]].slice();d&&c.reverse();n[p]=c}a[f]=n}return a}return b.triangles||b.triangulate||b.triangle?{cells:v(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function a(a,b,e){try{return q(a,
b,e,!0)}catch(d){}try{return q(a,b,e,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(b,e,g,d){var f=d.size||64;g.font=f+"px "+(d.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(b).width+2*f)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var n=3*f;e.height<n&&(e.height=n);
g.fillStyle="#000";g.fillRect(0,0,e.width,e.height);g.fillStyle="#fff";g.fillText(b,f,2*f);b=g.getImageData(0,0,l,n);l=k(b.data,[n,l,4]).pick(-1,-1,0).transpose(1,0);return a(l,d,f)};g.exports.processPixels=a;var e=b("surface-nets"),k=b("ndarray"),l=b("simplify-planar-graph"),y=b("clean-pslg"),v=b("cdt2d"),w=b("planar-graph-to-polyline")},{cdt2d:61,"clean-pslg":66,ndarray:89,"planar-graph-to-polyline":95,"simplify-planar-graph":113,"surface-nets":117}],126:[function(b,g,p){g.exports=b("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":70}],127:[function(b,g,p){g.exports=function(b,a){var e=[];a=+a||0;t(b.hi(b.shape[0]-1),e,a);return e};var t=b("./lib/zc-core")},{"./lib/zc-core":126}],128:[function(b,
g,p){function t(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var q=b("./lib/util/extend"),a=b("./lib/dynamic"),e=b("./lib/util/raf"),k=b("./lib/util/clock"),l=b("./lib/strings"),y=b("./lib/webgl"),v=b("./lib/extension"),w=b("./lib/limits"),u=b("./lib/buffer"),r=b("./lib/elements"),h=b("./lib/texture"),d=b("./lib/renderbuffer"),f=b("./lib/framebuffer"),m=b("./lib/attribute"),n=b("./lib/shader"),z=b("./lib/read"),E=b("./lib/core"),c=b("./lib/stats"),x=b("./lib/timer");g.exports=function(b){function g(){if(0===
Y.length)M&&M.update(),ea=null;else{ea=e.next(g);D();for(var a=Y.length-1;0<=a;--a){var b=Y[a];b&&b(V,null,0)}J.flush();M&&M.update()}}function p(a){}function B(a){}function O(b){function c(b){var d={},e={};Object.keys(b).forEach(function(c){var f=b[c];a.isDynamic(f)?e[c]=a.unbox(f,c):d[c]=f});return{dynamic:e,"static":d}}function d(a){for(;n.length<a;)n.push(null);return n}var e=c(b.context||{}),f=c(b.uniforms||{}),g=c(b.attributes||{}),h=c(function(a){function b(a){if(a in c){var d=c[a];delete c[a];
Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=q({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(b));b={gpuTime:0,cpuTime:0,count:0};var e=aa.compile(h,g,f,e,b),k=e.draw,l=e.batch,m=e.scope,n=[];return q(function(a,b){var c;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)m.call(this,null,b,c);else if(Array.isArray(a))for(c=
0;c<a.length;++c)m.call(this,a[c],b,c);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:b})}function I(){var a=ja.viewport,b=ja.scissor_box;a[0]=a[1]=b[0]=b[1]=0;V.viewportWidth=V.framebufferWidth=V.drawingBufferWidth=a[2]=b[2]=J.drawingBufferWidth;V.viewportHeight=V.framebufferHeight=V.drawingBufferHeight=a[3]=b[3]=J.drawingBufferHeight}function D(){V.tick+=
1;V.time=(k()-N)/1E3;I();aa.procs.poll()}function L(){I();aa.procs.refresh();M&&M.update()}var K=y(b);if(!K)return null;var J=K.gl;b=J.getContextAttributes();var P=v(J,K);if(!P)return null;var H=l(),G=c(),P=P.extensions,M=x(J,P),N=k(),Q=J.drawingBufferWidth,T=J.drawingBufferHeight,V={tick:0,time:0,viewportWidth:Q,viewportHeight:T,framebufferWidth:Q,framebufferHeight:T,drawingBufferWidth:Q,drawingBufferHeight:T,pixelRatio:K.pixelRatio},R=w(J,P),Z=u(J,G,K),U=r(J,P,Z,G),Q=m(J,P,R,Z,H),X=n(J,H,G,K),W=
h(J,P,R,function(){aa.procs.poll()},V,G,K),S=d(J,P,R,G,K),ba=f(J,P,R,W,S,G),aa=E(J,H,P,R,Z,U,W,ba,{},Q,X,{elements:null,primitive:4,count:-1,offset:0,instances:-1},V,M,K),H=z(J,ba,aa.procs.poll,V,b),ja=aa.next,ca=J.canvas,Y=[],ea=null;ca&&(ca.addEventListener("webglcontextlost",p,!1),ca.addEventListener("webglcontextrestored",B,!1));L();b=q(O,{clear:function(a){var b=0;aa.procs.poll();var c=a.color;c&&(J.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(J.clearDepth(+a.depth),
b|=256);"stencil"in a&&(J.clearStencil(a.stencil|0),b|=1024);J.clear(b)},prop:a.define.bind(null,1),context:a.define.bind(null,2),"this":a.define.bind(null,3),draw:O({}),buffer:function(a){return Z.create(a,34962)},elements:U.create,texture:W.create2D,cube:W.createCube,renderbuffer:S.create,framebuffer:ba.create,framebufferCube:ba.createCube,attributes:b,frame:function(a){Y.push(a);!ea&&0<Y.length&&(ea=e.next(g));return{cancel:function(){function b(){var a=t(Y,b);Y[a]=Y[Y.length-1];--Y.length;0>=
Y.length&&ea&&(e.cancel(g),ea=null)}var c=t(Y,a);Y[c]=b}}},limits:R,hasExtension:function(a){return 0<=R.extensions.indexOf(a.toLowerCase())},read:H,destroy:function(){Y.length=0;ea&&(e.cancel(g),ea=null);ca&&(ca.removeEventListener("webglcontextlost",p),ca.removeEventListener("webglcontextrestored",B));X.clear();ba.clear();S.clear();W.clear();U.clear();Z.clear();M&&M.clear();K.onDestroy()},_gl:J,_refresh:L,poll:function(){D();M&&M.update()},stats:G});K.onDone(null,b);return b}},{"./lib/attribute":2,
"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>