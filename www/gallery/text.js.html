<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,m=[];!(g=a.next()).done;)m.push(g.value);return m};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function m(){}m.prototype=g.prototype;a.prototype=new m;a.prototype.constructor=a;for(var t in g)if($jscomp.global.Object.defineProperties){var n=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);n&&$jscomp.global.Object.defineProperty(a,t,n)}else a[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var m=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},n=(t.next=function(){if(m<a.length){var d=m++;return{value:g(d,a[d]),done:!1}}n.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return n},t);return n};
$jscomp.array.findInternal_=function(a,g,m){a instanceof String&&(a=String(a));for(var t=a.length,n=0;n<t;n++){var d=a[n];if(g.call(m,d,n,a))return{i:n,v:d}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,m){g=void 0===g?function(d){return d}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var n;!(n=a.next()).done;)t.push(g.call(m,n.value))}else{n=a.length;for(var d=0;d<n;d++)t.push(g.call(m,a[d]))}return t};$jscomp.array.of=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,m){var t=this.length;a=Number(a);g=Number(g);m=Number(null!=m?m:t);if(a<g)for(m=Math.min(m,t);g<m;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(m=Math.min(m,t+g-a),a+=m-g;m>g;)--m in this?this[--a]=this[m]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,m){null!=m&&a.length||(m=this.length||0);m=Number(m);for(g=Number((void 0===g?0:g)||0);g<m;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),m=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=m.get(g)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var t=m.entries(),n=t.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=t.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!t.next().done?!1:!0}catch(d){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var m=this.maybeGetEntry_(a),t=m.id,n=m.list,m=m.entry;n||(n=this.data_[t]=[]);m?m.value=g:(m={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},n.push(m),this.head_.previous.next=m,this.head_.previous=m,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var m=g.list,t=g.index;return(g=g.entry)&&m?(m.splice(t,1),m.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),m=this.data_[g];if(m)for(var t=0;t<m.length;t++){var n=m[t];if(a!==a&&n.key!==n.key||a===n.key)return{id:g,list:m,index:t,entry:n}}return{id:g,list:m,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var m=$jscomp.makeIterator(this.entries()),t=m.next();!t.done;t=m.next())t=t.value,a.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,m=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(m){for(;m.head!=g.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:a(m)};m=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,m){Object.defineProperty(a,g,{value:String(m)})}:function(a,g,m){a[g]=String(m)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var m=a&65535,t=g&65535;return m*t+((a>>>16&65535)*t+m*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,n=0,d=1;n!=t;)g*=a,d*=-1,t=(n=t)+d*g/++m;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,n=0;n!=t;)g*=a/++m,t=(n=t)+g;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,m){for(var t=[],n=2;n<arguments.length;++n)t[n-2]=arguments[n];a=Number(a);g=Number(g);for(var d=Math.max(Math.abs(a),Math.abs(g)),f=$jscomp.makeIterator(t),n=f.next();!n.done;n=f.next())d=Math.max(d,Math.abs(n.value));if(1E100<d||1E-100>d){a/=d;g/=d;f=a*a+g*g;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n)/d,f+=n*n;return Math.sqrt(f)*d}d=a*a+g*g;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n),d+=
n*n;return Math.sqrt(d)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var m=[],t=1;t<arguments.length;++t)m[t-1]=arguments[t];m=$jscomp.makeIterator(m);for(t=m.next();!t.done;t=m.next())if(t=t.value)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),m=a.next();if(m.done||m.value[0]!=g||m.value[1]!=g)return!1;m=a.next();return m.done||m.value[0]==g||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var m=this;this.map_.forEach(function(t){return a.call(g,t,t,m)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];for(var m="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?m+=String.fromCharCode(t):(t-=65536,m+=String.fromCharCode(t>>>10&1023|55296),m+=String.fromCharCode(t&1023|56320))}return m};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var m="";a;)if(a&1&&(m+=g),a>>>=1)g+=g;return m};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),m=g.length;a=Number(a)||0;if(0<=a&&a<m){a|=0;var t=g.charCodeAt(a);if(55296>t||56319<t||a+1===m)return t;a=g.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var m=this.toString();a+="";for(var t=m.length,n=a.length,d=Math.max(0,Math.min(g|0,m.length)),f=0;f<n&&d<t;)if(m[d++]!=a[f++])return!1;return f>=n};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var m=this.toString();a+="";void 0===g&&(g=m.length);for(var t=Math.max(0,Math.min(g|0,m.length)),n=a.length;0<n&&0<t;)if(m[--t]!=a[--n])return!1;return 0>=n};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,m,t){function n(f,l){if(!m[f]){if(!g[f]){var y="function"==typeof require&&require;if(!l&&y)return y(f,!0);if(d)return d(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=m[f]={exports:{}};g[f][0].call(y.exports,function(d){var l=g[f][1][d];return n(l?l:d)},y,y.exports,e$$0,g,m,t)}return m[f].exports}for(var d="function"==typeof require&&require,f=0;f<t.length;f++)n(t[f]);return n})({1:[function(a,g,m){g=a("../regl")();m=a("vectorize-text");var t=a("gl-mat4/perspective"),
n=a("gl-mat4/lookAt");a=m("hello regl!",{textAlign:"center",textBaseline:"middle"});var d=g.texture({copy:!0,min:"linear",mag:"linear"}),f=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d,t:function(d){return.001*d.tick}},depth:{enable:!1},count:3}),k=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.tick},view:function(d){d=.01*d.tick;return n([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return t([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){f();k();d({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":79,"gl-mat4/perspective":80,"vectorize-text":124}],2:[function(a,g,m){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(a,d,f,k,l){a=f.maxAttributes;d=Array(a);for(f=0;f<a;++f)d[f]=new t;return{Record:t,scope:{},state:d}}},{}],3:[function(a,g,m){function t(e){return w[Object.prototype.toString.call(e)]|0}function n(e,c){for(var d=0;d<c.length;++d)e[d]=c[d]}function d(e,c,d,f,h,k,b){for(var l=0,a=0;a<d;++a)for(var r=0;r<f;++r)e[l++]=c[h*a+k*r+b]}function f(e,d,f){for(var h=0,k=0;k<d.length;++k)for(var l=d[k],b=0;b<
f;++b)e[h++]=l[b]}var k=a("./util/is-typed-array"),l=a("./util/is-ndarray"),y=a("./util/values"),u=a("./util/pool"),w=a("./constants/arraytypes.json"),v=a("./constants/dtypes.json"),r=a("./constants/usage.json"),h=[];h[5120]=1;h[5122]=2;h[5124]=4;h[5121]=1;h[5123]=2;h[5125]=4;h[5126]=4;g.exports=function(e,c,p){function q(b){this.id=x++;this.buffer=e.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;p.profile&&(this.stats={size:0})}
function a(b,d,c){b.byteLength=d.byteLength;e.bufferData(b.type,d,c)}function w(b,e,c,h,p,q){b.usage=c;if(Array.isArray(e))b.dtype=h||5126,0<e.length&&(Array.isArray(e[0])?(b.dimension=e[0].length,h=u.allocType(b.dtype,e.length*b.dimension),f(h,e,b.dimension),a(b,h,c),q?b.persistentData=h:u.freeType(h)):"number"===typeof e[0]?(b.dimension=p,h=u.allocType(b.dtype,e.length),n(h,e),a(b,h,c),q?b.persistentData=h:u.freeType(h)):k(e[0])&&(b.dimension=e[0].length,b.dtype=h||t(e[0])||5126,h=u.allocType(b.dtype,
e.length*b.dimension),f(h,e,b.dimension),a(b,h,c),q?b.persistentData=h:u.freeType(h)));else if(k(e))b.dtype=h||t(e),b.dimension=p,a(b,e,c),q&&(b.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(l(e)){var x=e.shape,r=e.stride;p=e.offset;var F=0,G=0,C=0,v=0;1===x.length?(F=x[0],G=1,C=r[0],v=0):2===x.length&&(F=x[0],G=x[1],C=r[0],v=r[1]);b.dtype=h||t(e.data)||5126;b.dimension=G;h=u.allocType(b.dtype,F*G);d(h,e.data,F,G,C,v,p);a(b,h,c);q?b.persistentData=h:u.freeType(h)}}function b(b){c.bufferCount--;
e.deleteBuffer(b.buffer);b.buffer=null;delete F[b.id]}var x=0,F={};q.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)};q.prototype.destroy=function(){b(this)};var I=[];p.profile&&(c.getTotalBufferSize=function(){var b=0;Object.keys(F).forEach(function(e){b+=F[e].stats.size});return b});return{create:function(a,x,z,y){function I(b){var d=35044,c=null,f=0,q=0,a=1;Array.isArray(b)||k(b)||l(b)?c=b:"number"===typeof b?f=b|0:b&&("data"in b&&(c=b.data),"usage"in b&&(d=r[b.usage]),"type"in b&&
(q=v[b.type]),"dimension"in b&&(a=b.dimension|0),"length"in b&&(f=b.length|0));g.bind();c?w(g,c,d,q,a,y):(e.bufferData(g.type,f,d),g.dtype=q||5121,g.usage=d,g.dimension=a,g.byteLength=f);p.profile&&(g.stats.size=g.byteLength*h[g.dtype]);return I}c.bufferCount++;var g=new q(x);F[g.id]=g;z||I(a);I._reglType="buffer";I._buffer=g;I.subdata=function(b,c){var h=(c||0)|0;g.bind();if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var p=u.allocType(g.dtype,b.length);n(p,b);e.bufferSubData(g.type,
h,p);u.freeType(p)}else if(Array.isArray(b[0])||k(b[0])){var p=b[0].length,q=u.allocType(g.dtype,b.length*p);f(q,b,p);e.bufferSubData(g.type,h,q);u.freeType(q)}}else if(k(b))e.bufferSubData(g.type,h,b);else if(l(b)){var a=b.shape,x=b.stride,r=q=p=0,z=0;1===a.length?(p=a[0],q=1,r=x[0],z=0):2===a.length&&(p=a[0],q=a[1],r=x[0],z=x[1]);a=Array.isArray(b.data)?g.dtype:t(b.data);a=u.allocType(a,p*q);d(a,b.data,p,q,r,z,b.offset);e.bufferSubData(g.type,h,a);u.freeType(a)}return I};p.profile&&(I.stats=g.stats);
I.destroy=function(){b(g)};return I},createStream:function(b,e){var c=I.pop();c||(c=new q(b));c.bind();w(c,e,35040,0,1,!1);return c},destroyStream:function(b){I.push(b)},clear:function(){y(F).forEach(b);I.forEach(b)},getBuffer:function(b){return b&&b._buffer instanceof q?b._buffer:null},restore:function(){y(F).forEach(function(b){b.buffer=e.createBuffer();e.bindBuffer(b.type,b.buffer);e.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:w}}},{"./constants/arraytypes.json":4,
"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(a,g,m){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,g,m){g.exports={int8:5120,
int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,g,m){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,g,m){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,g,m){function t(b){return Array.isArray(b)||w(b)||v(b)}function n(b){return b.sort(function(b,e){return"viewport"===b?-1:"viewport"===e?1:b<e?-1:1})}function d(b,e,
c,d){this.thisDep=b;this.contextDep=e;this.propDep=c;this.append=d}function f(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function k(b){return new d(!1,!1,!1,b)}function l(b,e){var c=b.type;return 0===c?(c=b.data.length,new d(!0,1<=c,2<=c,e)):4===c?(c=b.data,new d(c.thisDep,c.contextDep,c.propDep,e)):new d(3===c,2===c,1===c,e)}var y=a("./util/codegen"),u=a("./util/loop"),w=a("./util/is-typed-array"),v=a("./util/is-ndarray"),r=a("./util/is-array-like"),h=a("./dynamic"),e=a("./constants/primitives.json"),
c=a("./constants/dtypes.json"),p=["x","y","z","w"],q="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),z={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
E={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},b={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},x={cw:2304,ccw:2305},F=new d(!1,!1,!1,function(){});g.exports=function(a,v,w,g,m,D,P,J,K,R,G,C,O,M,V){function X(b){return b.replace(".","_")}function U(b,e,c){var d=X(b);Aa.push(b);ua[d]=oa[d]=!!c;pa[d]=
e}function L(b,e,c){var d=X(b);Aa.push(b);Array.isArray(c)?(oa[d]=c.slice(),ua[d]=c.slice()):oa[d]=ua[d]=c;qa[d]=e}function Y(){var b=y(),e=b.link,c=b.global;b.id=Ha++;b.batchId="0";var d=e(Fa),f=b.shared={props:"a0"};Object.keys(Fa).forEach(function(b){f[b]=c.def(d,".",b)});var h=b.next={},p=b.current={};Object.keys(qa).forEach(function(b){Array.isArray(oa[b])&&(h[b]=c.def(f.next,".",b),p[b]=c.def(f.current,".",b))});var q=b.constants={};Object.keys(Ba).forEach(function(b){q[b]=c.def(JSON.stringify(Ba[b]))});
b.invoke=function(c,d){switch(d.type){case 0:var h=["this",f.context,f.props,b.batchId];return c.def(e(d.data),".call(",h.slice(0,Math.max(d.data.length+1,4)),")");case 1:return c.def(f.props,d.data);case 2:return c.def(f.context,d.data);case 3:return c.def("this",d.data);case 4:return d.data.append(b,c),d.data.ref}};b.attribCache={};var k={};b.scopeAttrib=function(b){b=v.id(b);if(b in k)return k[b];var c=R.scope[b];c||(c=R.scope[b]=new va);return k[b]=e(c)};return b}function T(b){var e=b["static"];
b=b.dynamic;var c;if("profile"in e){var d=!!e.profile;c=k(function(b,e){return d});c.enable=d}else if("profile"in b){var f=b.profile;c=l(f,function(b,e){return b.invoke(e,f)})}return c}function W(b,e){var c=b["static"],d=b.dynamic;if("framebuffer"in c){var f=c.framebuffer;return f?(f=J.getFramebuffer(f),k(function(b,e){var c=b.link(f),d=b.shared;e.set(d.framebuffer,".next",c);d=d.context;e.set(d,".framebufferWidth",c+".width");e.set(d,".framebufferHeight",c+".height");return c})):k(function(b,e){var c=
b.shared;e.set(c.framebuffer,".next","null");c=c.context;e.set(c,".framebufferWidth",c+".drawingBufferWidth");e.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in d){var h=d.framebuffer;return l(h,function(b,e){var c=b.invoke(e,h),d=b.shared,f=d.framebuffer,c=e.def(f,".getFramebuffer(",c,")");e.set(f,".next",c);d=d.context;e.set(d,".framebufferWidth",c+"?"+c+".width:"+d+".drawingBufferWidth");e.set(d,".framebufferHeight",c+"?"+c+".height:"+d+".drawingBufferHeight");
return c})}return null}function S(b,c,e){function f(b){if(b in h){var e=h[b];b=!0;var q=e.x|0,k=e.y|0,a,x;"width"in e?a=e.width|0:b=!1;"height"in e?x=e.height|0:b=!1;return new d(!b&&c&&c.thisDep,!b&&c&&c.contextDep,!b&&c&&c.propDep,function(b,c){var d=b.shared.context,f=a;"width"in e||(f=c.def(d,".","framebufferWidth","-",q));var h=x;"height"in e||(h=c.def(d,".","framebufferHeight","-",k));return[q,k,f,h]})}if(b in p){var r=p[b];b=l(r,function(b,c){var e=b.invoke(c,r),d=b.shared.context,f=c.def(e,
".x|0"),h=c.def(e,".y|0"),p=c.def('"width" in ',e,"?",e,".width|0:","(",d,".","framebufferWidth","-",f,")"),e=c.def('"height" in ',e,"?",e,".height|0:","(",d,".","framebufferHeight","-",h,")");return[f,h,p,e]});c&&(b.thisDep=b.thisDep||c.thisDep,b.contextDep=b.contextDep||c.contextDep,b.propDep=b.propDep||c.propDep);return b}return c?new d(c.thisDep,c.contextDep,c.propDep,function(b,c){var e=b.shared.context;return[0,0,c.def(e,".","framebufferWidth"),c.def(e,".","framebufferHeight")]}):null}var h=
b["static"],p=b.dynamic;if(b=f("viewport")){var q=b;b=new d(b.thisDep,b.contextDep,b.propDep,function(b,c){var e=q.append(b,c),d=b.shared.context;c.set(d,".viewportWidth",e[2]);c.set(d,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:f("scissor.box")}}function Q(b){function c(b){if(b in e){var d=v.id(e[b]);b=k(function(){return d});b.id=d;return b}if(b in h){var f=h[b];return l(f,function(b,c){var e=b.invoke(c,f);return c.def(b.shared.strings,".id(",e,")")})}return null}var e=b["static"],
h=b.dynamic,p=c("frag"),q=c("vert"),a=null;f(p)&&f(q)?(a=G.program(q.id,p.id),b=k(function(b,c){return b.link(a)})):b=new d(p&&p.thisDep||q&&q.thisDep,p&&p.contextDep||q&&q.contextDep,p&&p.propDep||q&&q.propDep,function(b,c){var e=b.shared.shader,d;d=p?p.append(b,c):c.def(e,".","frag");var f;f=q?q.append(b,c):c.def(e,".","vert");return c.def(e+".program("+f+","+d+")")});return{frag:p,vert:q,progVar:b,program:a}}function Z(b,c){function h(b,c){if(b in p){var e=p[b]|0;return k(function(b,d){c&&(b.OFFSET=
e);return e})}if(b in q){var d=q[b];return l(d,function(b,e){var f=b.invoke(e,d);c&&(b.OFFSET=f);return f})}return c&&a?k(function(b,c){b.OFFSET="0";return 0}):null}var p=b["static"],q=b.dynamic,a=function(){if("elements"in p){var b=p.elements;t(b)?b=D.getElements(D.create(b,!0)):b&&(b=D.getElements(b));var c=k(function(c,e){if(b){var d=c.link(b);return c.ELEMENTS=d}return c.ELEMENTS=null});c.value=b;return c}if("elements"in q){var e=q.elements;return l(e,function(b,c){var d=b.shared,f=d.isBufferArgs,
d=d.elements,h=b.invoke(c,e),p=c.def("null"),f=c.def(f,"(",h,")"),h=b.cond(f).then(p,"=",d,".createStream(",h,");")["else"](p,"=",d,".getElements(",h,");");c.entry(h);c.exit(b.cond(f).then(d,".destroyStream(",p,");"));return b.ELEMENTS=p})}return null}(),x=h("offset",!0);return{elements:a,primitive:function(){if("primitive"in p){var b=p.primitive;return k(function(c,d){return e[b]})}if("primitive"in q){var c=q.primitive;return l(c,function(b,e){var d=b.constants.primTypes,f=b.invoke(e,c);return e.def(d,
"[",f,"]")})}return a?f(a)?a.value?k(function(b,c){return c.def(b.ELEMENTS,".primType")}):k(function(){return 4}):new d(a.thisDep,a.contextDep,a.propDep,function(b,c){var e=b.ELEMENTS;return c.def(e,"?",e,".primType:",4)}):null}(),count:function(){if("count"in p){var b=p.count|0;return k(function(){return b})}if("count"in q){var c=q.count;return l(c,function(b,e){return b.invoke(e,c)})}return a?f(a)?a?x?new d(x.thisDep,x.contextDep,x.propDep,function(b,c){return c.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):
k(function(b,c){return c.def(b.ELEMENTS,".vertCount")}):k(function(){return-1}):new d(a.thisDep||x.thisDep,a.contextDep||x.contextDep,a.propDep||x.propDep,function(b,c){var e=b.ELEMENTS;return b.OFFSET?c.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):c.def(e,"?",e,".vertCount:-1")}):null}(),instances:h("instances",!1),offset:x}}function ca(c,e){var d=c["static"],f=c.dynamic,h={};Aa.forEach(function(c){function e(b,q){if(c in d){var a=b(d[c]);h[p]=k(function(){return a})}else if(c in f){var x=f[c];h[p]=
l(x,function(b,c){return q(b,c,b.invoke(c,x))})}}var p=X(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return e(function(b){return b},function(b,c,e){return e});case "depth.func":return e(function(b){return E[b]},function(b,c,e){return c.def(b.constants.compareFuncs,"[",e,"]")});case "depth.range":return e(function(b){return b},
function(b,c,e){b=c.def("+",e,"[0]");c=c.def("+",e,"[1]");return[b,c]});case "blend.func":return e(function(b){return[z["srcRGB"in b?b.srcRGB:b.src],z["dstRGB"in b?b.dstRGB:b.dst],z["srcAlpha"in b?b.srcAlpha:b.src],z["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,c,e){function d(b,f){return c.def('"',b,f,'" in ',e,"?",e,".",b,f,":",e,".",b)}b=b.constants.blendFuncs;var f=d("src","RGB"),h=d("dst","RGB"),f=c.def(b,"[",f,"]"),p=c.def(b,"[",d("src","Alpha"),"]"),h=c.def(b,"[",h,"]");b=c.def(b,"[",d("dst",
"Alpha"),"]");return[f,h,p,b]});case "blend.equation":return e(function(b){if("string"===typeof b)return[ra[b],ra[b]];if("object"===typeof b)return[ra[b.rgb],ra[b.alpha]]},function(b,c,e){var d=b.constants.blendEquations,f=c.def(),h=c.def();b=b.cond("typeof ",e,'==="string"');b.then(f,"=",h,"=",d,"[",e,"];");b["else"](f,"=",d,"[",e,".rgb];",h,"=",d,"[",e,".alpha];");c(b);return[f,h]});case "blend.color":return e(function(b){return u(4,function(c){return+b[c]})},function(b,c,e){return u(4,function(b){return c.def("+",
e,"[",b,"]")})});case "stencil.mask":return e(function(b){return b|0},function(b,c,e){return c.def(e,"|0")});case "stencil.func":return e(function(b){return[E[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,c,e){b=c.def('"cmp" in ',e,"?",b.constants.compareFuncs,"[",e,".cmp]",":",7680);var d=c.def(e,".ref|0");c=c.def('"mask" in ',e,"?",e,".mask|0:-1");return[b,d,c]});case "stencil.opFront":case "stencil.opBack":return e(function(e){return["stencil.opBack"===c?1029:1028,b[e.fail||"keep"],
b[e.zfail||"keep"],b[e.zpass||"keep"]]},function(b,e,d){function f(b){return e.def('"',b,'" in ',d,"?",h,"[",d,".",b,"]:",7680)}var h=b.constants.stencilOps;return["stencil.opBack"===c?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return e(function(b){return[b.factor|0,b.units|0]},function(b,c,e){b=c.def(e,".factor|0");c=c.def(e,".units|0");return[b,c]});case "cull.face":return e(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);return c},function(b,c,e){return c.def(e,
'==="front"?',1028,":",1029)});case "lineWidth":return e(function(b){return b},function(b,c,e){return e});case "frontFace":return e(function(b){return x[b]},function(b,c,e){return c.def(e+'==="cw"?2304:2305')});case "colorMask":return e(function(b){return b.map(function(b){return!!b})},function(b,c,e){return u(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return e(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,c,e){b=c.def('"value" in ',e,"?+",e,".value:1");c=c.def("!!",
e,".invert");return[b,c]})}});return h}function ha(b,c){var e=b["static"],d=b.dynamic,f={};Object.keys(e).forEach(function(b){var c=e[b],d;if("number"===typeof c||"boolean"===typeof c)d=k(function(){return c});else if("function"===typeof c){var h=c._reglType;if("texture2d"===h||"textureCube"===h)d=k(function(b){return b.link(c)});else if("framebuffer"===h||"framebufferCube"===h)d=k(function(b){return b.link(c.color[0])})}else r(c)&&(d=k(function(b){return b.global.def("[",u(c.length,function(b){return c[b]}),
"]")}));d.value=c;f[b]=d});Object.keys(d).forEach(function(b){var c=d[b];f[b]=l(c,function(b,e){return b.invoke(e,c)})});return f}function ea(b,e){var d=b["static"],f=b.dynamic,h={};Object.keys(d).forEach(function(b){var e=d[b],f=v.id(b),q=new va;if(t(e))q.state=1,q.buffer=m.getBuffer(m.create(e,34962,!1,!0)),q.type=q.buffer.dtype;else{var a=m.getBuffer(e);if(a)q.state=1,q.buffer=a,q.type=a.dtype;else if(e.constant){var x=e.constant;q.buffer="null";q.state=2;"number"===typeof x?q.x=x:p.forEach(function(b,
c){c<x.length&&(q[b]=x[c])})}else{var a=t(e.buffer)?m.getBuffer(m.create(e.buffer,34962,!1,!0)):m.getBuffer(e.buffer),l=e.offset|0,r=e.stride|0,C=e.size|0,G=!!e.normalized,n=0;"type"in e&&(n=c[e.type]);e=e.divisor|0;q.buffer=a;q.state=1;q.size=C;q.normalized=G;q.type=n||a.dtype;q.offset=l;q.stride=r;q.divisor=e}}h[b]=k(function(b,c){var e=b.attribCache;if(f in e)return e[f];var d={isStream:!1};Object.keys(q).forEach(function(b){d[b]=q[b]});q.buffer&&(d.buffer=b.link(q.buffer));return e[f]=d})});Object.keys(f).forEach(function(b){var c=
f[b];h[b]=l(c,function(b,e){function d(b){e(k[b],"=",f,".",b,"|0;")}var f=b.invoke(e,c),h=b.shared,q=h.isBufferArgs,a=h.buffer,k={isStream:e.def(!1)},x=new va;x.state=1;Object.keys(x).forEach(function(b){k[b]=e.def(""+x[b])});var l=k.buffer,r=k.type;e("if(",q,"(",f,")){",k.isStream,"=true;",l,"=",a,".createStream(",34962,",",f,");",r,"=",l,".dtype;","}else{",l,"=",a,".getBuffer(",f,");","if(",l,"){",r,"=",l,".dtype;",'}else if("constant" in ',f,"){",k.state,"=",2,";","if(typeof "+f+'.constant === "number"){',
k[p[0]],"=",f,".constant;",p.slice(1).map(function(b){return k[b]}).join("="),"=0;","}else{",p.map(function(b,c){return k[b]+"="+f+".constant.length>="+c+"?"+f+".constant["+c+"]:0;"}).join(""),"}}else{","if(",q,"(",f,".buffer)){",l,"=",a,".createStream(",34962,",",f,".buffer);","}else{",l,"=",a,".getBuffer(",f,".buffer);","}",r,'="type" in ',f,"?",h.glTypes,"[",f,".type]:",l,".dtype;",k.normalized,"=!!",f,".normalized;");d("size");d("offset");d("stride");d("divisor");e("}}");e.exit("if(",k.isStream,
"){",a,".destroyStream(",l,");","}");return k})});return h}function na(b){var c=b["static"],e=b.dynamic,d={};Object.keys(c).forEach(function(b){var e=c[b];d[b]=k(function(b,c){return"number"===typeof e||"boolean"===typeof e?""+e:b.link(e)})});Object.keys(e).forEach(function(b){var c=e[b];d[b]=l(c,function(b,e){return b.invoke(e,c)})});return d}function ma(b,c,e,d,f){var h=W(b,f),p=S(b,h,f),q=Z(b,f),k=ca(b,f),a=Q(b,f),x=p.viewport;x&&(k.viewport=x);x=X("scissor.box");(p=p[x])&&(k[x]=p);p=0<Object.keys(k).length;
h={framebuffer:h,draw:q,shader:a,state:k,dirty:p};h.profile=T(b,f);h.uniforms=ha(e,f);h.attributes=ea(c,f);h.context=na(d,f);return h}function ba(b,c,e){var d=b.shared.context,f=b.scope();Object.keys(e).forEach(function(h){c.save(d,"."+h);f(d,".",h,"=",e[h].append(b,c),";")});c(f)}function ja(b,c,e,d){var f=b.shared,h=f.gl,p=f.framebuffer,q;Ca&&(q=c.def(f.extensions,".webgl_draw_buffers"));var k=b.constants,f=k.drawBuffer,k=k.backBuffer;b=e?e.append(b,c):c.def(p,".next");d||c("if(",b,"!==",p,".cur){");
c("if(",b,"){",h,".bindFramebuffer(",36160,",",b,".framebuffer);");Ca&&c(q,".drawBuffersWEBGL(",f,"[",b,".colorAttachments.length]);");c("}else{",h,".bindFramebuffer(",36160,",null);");Ca&&c(q,".drawBuffersWEBGL(",k,");");c("}",p,".cur=",b,";");d||c("}")}function ka(b,c,e){var d=b.shared,f=d.gl,h=b.current,p=b.next,q=d.current,k=d.next,a=b.cond(q,".dirty");Aa.forEach(function(c){c=X(c);if(!(c in e.state)){var d,x;if(c in p){d=p[c];x=h[c];var l=u(oa[c].length,function(b){return a.def(d,"[",b,"]")});
a(b.cond(l.map(function(b,c){return b+"!=="+x+"["+c+"]"}).join("||")).then(f,".",qa[c],"(",l,");",l.map(function(b,c){return x+"["+c+"]="+b}).join(";"),";"))}else d=a.def(k,".",c),l=b.cond(d,"!==",q,".",c),a(l),c in pa?l(b.cond(d).then(f,".enable(",pa[c],");")["else"](f,".disable(",pa[c],");"),q,".",c,"=",d,";"):l(f,".",qa[c],"(",d,");",q,".",c,"=",d,";")}});0===Object.keys(e.state).length&&a(q,".dirty=false;");c(a)}function aa(b,c,e,d){var h=b.shared,p=b.current,q=h.current,k=h.gl;n(Object.keys(e)).forEach(function(h){var a=
e[h];if(!d||d(a)){var x=a.append(b,c);if(pa[h]){var l=pa[h];f(a)?x?c(k,".enable(",l,");"):c(k,".disable(",l,");"):c(b.cond(x).then(k,".enable(",l,");")["else"](k,".disable(",l,");"));c(q,".",h,"=",x,";")}else if(r(x)){var C=p[h];c(k,".",qa[h],"(",x,");",x.map(function(b,c){return C+"["+c+"]="+b}).join(";"),";")}else c(k,".",qa[h],"(",x,");",q,".",h,"=",x,";")}})}function da(b,c){wa&&!b.instancing&&(b.instancing=c.def(b.shared.extensions,".angle_instanced_arrays"))}function fa(b,c,e,d,h){function p(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function q(b){n=c.def();b(n,"=",p(),";");"string"===typeof h?b(l,".count+=",h,";"):b(l,".count++;");M&&(d?(G=c.def(),b(G,"=",C,".getNumPendingQueries();")):b(C,".beginQuery(",l,");"))}function k(b){b(l,".cpuTime+=",p(),"-",n,";");M&&(d?b(C,".pushScopeStats(",G,",",C,".getNumPendingQueries(),",l,");"):b(C,".endQuery();"))}function a(b){var e=c.def(r,".profile");c(r,".profile=",b,";");c.exit(r,".profile=",e,";")}var x=b.shared,l=b.stats,r=x.current,
C=x.timer;e=e.profile;var n,G;if(e){if(f(e)){e.enable?(q(c),k(c.exit),a("true")):a("false");return}e=e.append(b,c);a(e)}else e=c.def(r,".profile");x=b.block();q(x);c("if(",e,"){",x,"}");b=b.block();k(b);c.exit("if(",e,"){",b,"}")}function ga(b,c,e,d,f){function h(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(e,d,f){function h(){c("if(!",r,".buffer){",x,".enableVertexAttribArray(",
l,");}");var e=f.type,p;p=f.size?c.def(f.size,"||",d):d;c("if(",r,".type!==",e,"||",r,".size!==",p,"||",G.map(function(b){return r+"."+b+"!=="+f[b]}).join("||"),"){",x,".bindBuffer(",34962,",",C,".buffer);",x,".vertexAttribPointer(",[l,p,e,f.normalized,f.stride,f.offset],");",r,".type=",e,";",r,".size=",p,";",G.map(function(b){return r+"."+b+"="+f[b]+";"}).join(""),"}");wa&&(e=f.divisor,c("if(",r,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[l,e],");",r,".divisor=",e,";}"))}function a(){c("if(",
r,".buffer){",x,".disableVertexAttribArray(",l,");","}if(",p.map(function(b,c){return r+"."+b+"!=="+n[c]}).join("||"),"){",x,".vertexAttrib4f(",l,",",n,");",p.map(function(b,c){return r+"."+b+"="+n[c]+";"}).join(""),"}")}var x=k.gl,l=c.def(e,".location"),r=c.def(k.attributes,"[",l,"]");e=f.state;var C=f.buffer,n=[f.x,f.y,f.z,f.w],G=["buffer","normalized","offset","stride"];1===e?h():2===e?a():(c("if(",e,"===",1,"){"),h(),c("}else{"),a(),c("}"))}var k=b.shared;d.forEach(function(d){var p=d.name,k=
e.attributes[p],a;if(k){if(!f(k))return;a=k.append(b,c)}else{if(!f(F))return;var x=b.scopeAttrib(p);a={};Object.keys(new va).forEach(function(b){a[b]=c.def(x,".",b)})}q(b.link(d),h(d.info.type),a)})}function ia(b,c,e,d,h){for(var p=b.shared,q=p.gl,k,a=0;a<d.length;++a){var x=d[a],l=x.name,C=x.info.type,n=e.uniforms[l],x=b.link(x)+".location",G;if(n){if(!h(n))continue;if(f(n)){l=n.value;if(35678===C||35680===C)C=b.link(l._texture||l.color[0]._texture),c(q,".uniform1i(",x,",",C+".bind());"),c.exit(C,
".unbind();");else if(35674===C||35675===C||35676===C)l=b.global.def("new Float32Array(["+Array.prototype.slice.call(l)+"])"),n=2,35675===C?n=3:35676===C&&(n=4),c(q,".uniformMatrix",n,"fv(",x,",false,",l,");");else{switch(C){case 5126:k="1f";break;case 35664:k="2f";break;case 35665:k="3f";break;case 35666:k="4f";break;case 35670:k="1i";break;case 5124:k="1i";break;case 35671:k="2i";break;case 35667:k="2i";break;case 35672:k="3i";break;case 35668:k="3i";break;case 35673:k="4i";break;case 35669:k="4i"}c(q,
".uniform",k,"(",x,",",r(l)?Array.prototype.slice.call(l):l,");")}continue}else G=n.append(b,c)}else{if(!h(F))continue;G=c.def(p.uniforms,"[",v.id(l),"]")}35678===C?c("if(",G,"&&",G,'._reglType==="framebuffer"){',G,"=",G,".color[0];","}"):35680===C&&c("if(",G,"&&",G,'._reglType==="framebufferCube"){',G,"=",G,".color[0];","}");l=1;switch(C){case 35678:case 35680:C=c.def(G,"._texture");c(q,".uniform1i(",x,",",C,".bind());");c.exit(C,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k=
"2i";l=2;break;case 35668:case 35672:k="3i";l=3;break;case 35669:case 35673:k="4i";l=4;break;case 5126:k="1f";break;case 35664:k="2f";l=2;break;case 35665:k="3f";l=3;break;case 35666:k="4f";l=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}c(q,".uniform",k,"(",x,",");if("M"===k.charAt(0)){var x=Math.pow(C-35674+2,2),z=b.global.def("new Float32Array(",x,")");c("false,(Array.isArray(",G,")||",G," instanceof Float32Array)?",G,":(",u(x,function(b){return z+
"["+b+"]="+G+"["+b+"]"}),",",z,")")}else 1<l?c(u(l,function(b){return G+"["+b+"]"})):c(G);c(");")}}function ta(b,c,e,d){function h(f){var p=l[f];return p?p.contextDep&&d.contextDynamic||p.propDep?p.append(b,e):p.append(b,c):c.def(x,".",f)}function p(){function b(){e(F,".drawElementsInstancedANGLE(",[C,n,v,G+"<<(("+v+"-5121)>>1)",z],");")}function c(){e(F,".drawArraysInstancedANGLE(",[C,G,n,z],");")}r?u?b():(e("if(",r,"){"),b(),e("}else{"),c(),e("}")):c()}function q(){function b(){e(a+".drawElements("+
[C,n,v,G+"<<(("+v+"-5121)>>1)"]+");")}function c(){e(a+".drawArrays("+[C,G,n]+");")}r?u?b():(e("if(",r,"){"),b(),e("}else{"),c(),e("}")):c()}var k=b.shared,a=k.gl,x=k.draw,l=d.draw,r=function(){var f=l.elements,h=c;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)h=e;f=f.append(b,h)}else f=h.def(x,".","elements");f&&h("if("+f+")"+a+".bindBuffer(34963,"+f+".buffer.buffer);");return f}(),C=h("primitive"),G=h("offset"),n=function(){var f=l.count,h=c;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)h=
e;f=f.append(b,h)}else f=h.def(x,".","count");return f}();if("number"===typeof n){if(0===n)return}else e("if(",n,"){"),e.exit("}");var z,F;wa&&(z=h("instances"),F=b.instancing);var v=r+".type",u=l.elements&&f(l.elements);wa&&("number"!==typeof z||0<=z)?"string"===typeof z?(e("if(",z,">0){"),p(),e("}else if(",z,"<0){"),q(),e("}")):p():q()}function xa(b,c,e,d,f){c=Y();f=c.proc("body",f);wa&&(c.instancing=f.def(c.shared.extensions,".angle_instanced_arrays"));b(c,f,e,d);return c.compile().body}function ya(b,
c,e,d){da(b,c);ga(b,c,e,d.attributes,function(){return!0});ia(b,c,e,d.uniforms,function(){return!0});ta(b,c,c,e)}function Da(b,c){var e=b.proc("draw",1);da(b,e);ba(b,e,c.context);ja(b,e,c.framebuffer);ka(b,e,c);aa(b,e,c.state);fa(b,e,c,!1,!0);var d=c.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",d,".program);");if(c.shader.program)ya(b,e,c,c.shader.program);else{var f=b.global.def("{}"),h=e.def(d,".id"),p=e.def(f,"[",h,"]");e(b.cond(p).then(p,".call(this,a0);")["else"](p,"=",f,"[",h,"]=",
b.link(function(e){return xa(ya,b,c,e,1)}),"(",d,");",p,".call(this,a0);"))}0<Object.keys(c.state).length&&e(b.shared.current,".dirty=true;")}function Ea(b,c,e,d){function f(){return!0}b.batchId="a1";da(b,c);ga(b,c,e,d.attributes,f);ia(b,c,e,d.uniforms,f);ta(b,c,c,e)}function la(b,c,e,d){function f(b){return b.contextDep&&p||b.propDep}function h(b){return!f(b)}da(b,c);var p=e.contextDep,q=c.def(),k=c.def();b.shared.props=k;b.batchId=q;var a=b.scope(),x=b.scope();c(a.entry,"for(",q,"=0;",q,"<","a1",
";++",q,"){",k,"=","a0","[",q,"];",x,"}",a.exit);e.needsContext&&ba(b,x,e.context);e.needsFramebuffer&&ja(b,x,e.framebuffer);aa(b,x,e.state,f);e.profile&&f(e.profile)&&fa(b,x,e,!1,!0);d?(ga(b,a,e,d.attributes,h),ga(b,x,e,d.attributes,f),ia(b,a,e,d.uniforms,h),ia(b,x,e,d.uniforms,f),ta(b,a,x,e)):(c=b.global.def("{}"),d=e.shader.progVar.append(b,x),k=x.def(d,".id"),a=x.def(c,"[",k,"]"),x(b.shared.gl,".useProgram(",d,".program);","if(!",a,"){",a,"=",c,"[",k,"]=",b.link(function(c){return xa(Ea,b,e,c,
2)}),"(",d,");}",a,".call(this,a0[",q,"],",q,");"))}function za(b,c){function e(b){return b.contextDep&&f||b.propDep}var d=b.proc("batch",2);b.batchId="0";da(b,d);var f=!1,h=!0;Object.keys(c.context).forEach(function(b){f=f||c.context[b].propDep});f||(ba(b,d,c.context),h=!1);var p=c.framebuffer,q=!1;p?(p.propDep?f=q=!0:p.contextDep&&f&&(q=!0),q||ja(b,d,p)):ja(b,d,null);c.state.viewport&&c.state.viewport.propDep&&(f=!0);ka(b,d,c);aa(b,d,c.state,function(b){return!e(b)});c.profile&&e(c.profile)||fa(b,
d,c,!1,"a1");c.contextDep=f;c.needsContext=h;c.needsFramebuffer=q;h=c.shader.progVar;if(h.contextDep&&f||h.propDep)la(b,d,c,null);else if(h=h.append(b,d),d(b.shared.gl,".useProgram(",h,".program);"),c.shader.program)la(b,d,c,c.shader.program);else{var p=b.global.def("{}"),q=d.def(h,".id"),k=d.def(p,"[",q,"]");d(b.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",p,"[",q,"]=",b.link(function(e){return xa(la,b,c,e,2)}),"(",h,");",k,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&d(b.shared.current,
".dirty=true;")}function sa(b,c){function e(h){var p=c.shader[h];p&&d.set(f.shader,"."+h,p.append(b,d))}var d=b.proc("scope",3);b.batchId="a2";var f=b.shared,h=f.current;ba(b,d,c.context);c.framebuffer&&c.framebuffer.append(b,d);n(Object.keys(c.state)).forEach(function(e){var h=c.state[e].append(b,d);r(h)?h.forEach(function(c,f){d.set(b.next[e],"["+f+"]",c)}):d.set(f.next,"."+e,h)});fa(b,d,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var h=c.draw[e];h&&d.set(f.draw,
"."+e,""+h.append(b,d))});Object.keys(c.uniforms).forEach(function(e){d.set(f.uniforms,"["+v.id(e)+"]",c.uniforms[e].append(b,d))});Object.keys(c.attributes).forEach(function(e){var f=c.attributes[e].append(b,d),h=b.scopeAttrib(e);Object.keys(new va).forEach(function(b){d.set(h,"."+b,f[b])})});e("vert");e("frag");0<Object.keys(c.state).length&&(d(h,".dirty=true;"),d.exit(h,".dirty=true;"));d("a1(",b.shared.context,",a0,",b.batchId,");")}function Ia(b){if("object"===typeof b&&!r(b)){for(var c=Object.keys(b),
e=0;e<c.length;++e)if(h.isDynamic(b[c[e]]))return!0;return!1}}function Ga(b,c,e){function d(b,c){q.forEach(function(e){var d=f[e];h.isDynamic(d)&&(d=b.invoke(c,d),c(r,".",e,"=",d,";"))})}var f=c["static"][e];if(f&&Ia(f)){var p=b.global,q=Object.keys(f),k=!1,a=!1,x=!1,r=b.global.def("{}");q.forEach(function(c){var e=f[c];if(h.isDynamic(e))"function"===typeof e&&(e=f[c]=h.unbox(e)),c=l(e,null),k=k||c.thisDep,x=x||c.propDep,a=a||c.contextDep;else{p(r,".",c,"=");switch(typeof e){case "number":p(e);break;
case "string":p('"',e,'"');break;case "object":Array.isArray(e)&&p("[",e.join(),"]");break;default:p(b.link(e))}p(";")}});c.dynamic[e]=new h.DynamicVariable(4,{thisDep:k,contextDep:a,propDep:x,ref:r,append:d});delete c["static"][e]}}var va=R.Record,ra={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(ra.min=32775,ra.max=32776);var wa=w.angle_instanced_arrays,Ca=w.webgl_draw_buffers,oa={dirty:!0,profile:V.profile},ua={},Aa=[],pa={},qa={};U("dither",3024);U("blend.enable",3042);
L("blend.color","blendColor",[0,0,0,0]);L("blend.equation","blendEquationSeparate",[32774,32774]);L("blend.func","blendFuncSeparate",[1,0,1,0]);U("depth.enable",2929,!0);L("depth.func","depthFunc",513);L("depth.range","depthRange",[0,1]);L("depth.mask","depthMask",!0);L("colorMask","colorMask",[!0,!0,!0,!0]);U("cull.enable",2884);L("cull.face","cullFace",1029);L("frontFace","frontFace",2305);L("lineWidth","lineWidth",1);U("polygonOffset.enable",32823);L("polygonOffset.offset","polygonOffset",[0,0]);
U("sample.alpha",32926);U("sample.enable",32928);L("sample.coverage","sampleCoverage",[1,!1]);U("stencil.enable",2960);L("stencil.mask","stencilMask",-1);L("stencil.func","stencilFunc",[519,0,-1]);L("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);L("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);U("scissor.enable",3089);L("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);L("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Fa=
{gl:a,context:O,strings:v,next:ua,current:oa,draw:C,elements:D,buffer:m,shader:G,attributes:R.state,uniforms:K,framebuffer:J,extensions:w,timer:M,isBufferArgs:t},Ba={primTypes:e,compareFuncs:E,blendFuncs:z,blendEquations:ra,stencilOps:b,glTypes:c,orientationType:x};Ca&&(Ba.backBuffer=[1029],Ba.drawBuffer=u(g.maxDrawbuffers,function(b){return 0===b?[0]:u(b,function(b){return 36064+b})}));var Ha=0;return{next:ua,current:oa,procs:function(){var b=Y(),c=b.proc("poll"),e=b.proc("refresh"),d=b.block();
c(d);e(d);var f=b.shared,h=f.gl,p=f.next,q=f.current;d(q,".dirty=false;");ja(b,c);ja(b,e,null,!0);var k=a.getExtension("angle_instanced_arrays"),x;k&&(x=b.link(k));for(var l=0;l<g.maxAttributes;++l){var C=e.def(f.attributes,"[",l,"]"),G=b.cond(C,".buffer");G.then(h,".enableVertexAttribArray(",l,");",h,".bindBuffer(",34962,",",C,".buffer.buffer);",h,".vertexAttribPointer(",l,",",C,".size,",C,".type,",C,".normalized,",C,".stride,",C,".offset);")["else"](h,".disableVertexAttribArray(",l,");",h,".vertexAttrib4f(",
l,",",C,".x,",C,".y,",C,".z,",C,".w);",C,".buffer=null;");e(G);k&&e(x,".vertexAttribDivisorANGLE(",l,",",C,".divisor);")}Object.keys(pa).forEach(function(f){var k=pa[f],a=d.def(p,".",f),x=b.block();x("if(",a,"){",h,".enable(",k,")}else{",h,".disable(",k,")}",q,".",f,"=",a,";");e(x);c("if(",a,"!==",q,".",f,"){",x,"}")});Object.keys(qa).forEach(function(f){var k=qa[f],a=oa[f],x,l,C=b.block();C(h,".",k,"(");r(a)?(k=a.length,x=b.global.def(p,".",f),l=b.global.def(q,".",f),C(u(k,function(b){return x+"["+
b+"]"}),");",u(k,function(b){return l+"["+b+"]="+x+"["+b+"];"}).join("")),c("if(",u(k,function(b){return x+"["+b+"]!=="+l+"["+b+"]"}).join("||"),"){",C,"}")):(x=d.def(p,".",f),l=d.def(q,".",f),C(x,");",q,".",f,"=",x,";"),c("if(",x,"!==",l,"){",C,"}"));e(C)});return b.compile()}(),compile:function(b,c,e,d,f){var h=Y();h.stats=h.link(f);Object.keys(c["static"]).forEach(function(b){Ga(h,c,b)});q.forEach(function(c){Ga(h,b,c)});e=ma(b,c,e,d,h);Da(h,e);sa(h,e);za(h,e);return h.compile()}}}},{"./constants/dtypes.json":5,
"./constants/primitives.json":6,"./dynamic":9,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(a,g,m){function t(d,a){this.id=f++;this.type=d;this.data=a}function n(d){if(0===d.length)return[];var f=d.charAt(0),a=d.charAt(d.length-1);if(1<d.length&&f===a&&('"'===f||"'"===f))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return n(d.substr(0,
f.index)).concat(n(f[1])).concat(n(d.substr(f.index+f[0].length)));f=d.split(".");if(1===f.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(a=0;a<f.length;++a)d=d.concat(n(f[a]));return d}function d(d){return"["+n(d).join("][")+"]"}var f=0;g.exports={DynamicVariable:t,define:function(f,a){return new t(f,d(a+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof t},unbox:function(d,f){return"function"===typeof d?new t(0,d):d},accessor:d}},{}],
10:[function(a,g,m){var t=a("./util/is-typed-array"),n=a("./util/is-ndarray"),d=a("./util/values"),f=a("./constants/primitives.json"),k=a("./constants/usage.json");g.exports=function(a,y,u,w){function v(d){this.id=c++;e[this.id]=this;this.buffer=d;this.primType=4;this.type=this.vertCount=0}function r(c,e,b,d,f,h,p){(h=p)||t(e)&&(!n(e)||t(e.data))||(h=y.oes_element_index_uint?5125:5123);c.buffer.bind();u._initBuffer(c.buffer,e,b,h,3);e=p;if(!p){switch(c.buffer.dtype){case 5121:case 5120:e=5121;break;
case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}c.buffer.dtype=e}c.type=e;0>f&&(f=c.buffer.byteLength,5123===e?f>>=1:5125===e&&(f>>=2));c.vertCount=f;f=d;0>d&&(f=4,d=c.buffer.dimension,1===d&&(f=0),2===d&&(f=1),3===d&&(f=4));c.primType=f}function h(c){w.elementsCount--;delete e[c.id];c.buffer.destroy();c.buffer=null}var e={},c=0,p={uint8:5121,uint16:5123};y.oes_element_index_uint&&(p.uint32=5125);v.prototype.bind=function(){this.buffer.bind()};var q=[];return{create:function(c,e){function b(c){if(c)if("number"===
typeof c)d(c),q.primType=4,q.vertCount=c|0,q.type=5121;else{var e=null,h=35044,z=-1,v=-1,u=0,y=0;Array.isArray(c)||t(c)||n(c)?e=c:("data"in c&&(e=c.data),"usage"in c&&(h=k[c.usage]),"primitive"in c&&(z=f[c.primitive]),"count"in c&&(v=c.count|0),"length"in c&&(u=c.length|0),"type"in c&&(y=p[c.type]));e?r(q,e,h,z,v,u,y):(c=q.buffer,c.bind(),a.bufferData(34963,u,h),c.dtype=y||5121,c.usage=h,c.dimension=3,c.byteLength=u,q.primType=0>z?4:z,q.vertCount=0>v?0:v,q.type=c.dtype)}else d(),q.primType=4,q.vertCount=
0,q.type=5121;return b}var d=u.create(null,34963,!0),q=new v(d._buffer);w.elementsCount++;b(c);b._reglType="elements";b._elements=q;b.subdata=function(c,e){d.subdata(c,e);return b};b.destroy=function(){h(q)};return b},createStream:function(c){var e=q.pop();e||(e=new v(u.create(null,34963,!0,!1)._buffer));r(e,c,35040,-1,-1,0,0);return e},destroyStream:function(c){q.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof v?c._elements:null},clear:function(){d(e).forEach(h)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(a,g,m){g.exports=function(a,n){function d(d){d=d.toLowerCase();var k;try{k=f[d]=a.getExtension(d)}catch(l){}return!!k}for(var f={},k=0;k<n.extensions.length;++k){var l=n.extensions[k];if(!d(l))return n.onDestroy(),n.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}n.optionalExtensions.forEach(d);
return{extensions:f,restore:function(){Object.keys(f).forEach(function(f){if(!d(f))throw Error("(regl): error restoring extension "+f);})}}}},{}],12:[function(a,g,m){var t=a("./util/values"),n=a("./util/extend"),d=[];d[6408]=4;var f=[];f[5121]=1;f[5126]=4;f[36193]=2;g.exports=function(a,l,y,u,w,v){function r(b,c,e){this.target=b;this.texture=c;this.renderbuffer=e;var d=b=0;c?(b=c.width,d=c.height):e&&(b=e.width,d=e.height);this.width=b;this.height=d}function h(b){b&&(b.texture&&b.texture._texture.decRef(),
b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function e(b,c,e){b&&(b.texture?b.texture._texture.refCount+=1:b.renderbuffer._renderbuffer.refCount+=1)}function c(b,c){c?c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,b,3553,null,0)}function p(b){var c=3553,e=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(c=b.target|0));b=f._reglType;
"texture2d"===b?e=f:"textureCube"===b?e=f:"renderbuffer"===b&&(d=f,c=36161);return new r(c,e,d)}function q(b,c,e,d,f){if(e)return b=u.create2D({width:b,height:c,format:d,type:f}),b._texture.refCount=0,new r(3553,b,null);b=w.create({width:b,height:c,format:d});b._renderbuffer.refCount=0;return new r(36161,null,b)}function z(b){return b&&(b.texture||b.renderbuffer)}function E(b,c,e){b&&(b.texture?b.texture.resize(c,e):b.renderbuffer&&b.renderbuffer.resize(c,e))}function b(){this.id=P++;J[this.id]=this;
this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function x(b){b.colorAttachments.forEach(h);h(b.depthAttachment);h(b.stencilAttachment);h(b.depthStencilAttachment)}function F(b){a.deleteFramebuffer(b.framebuffer);b.framebuffer=null;v.framebufferCount--;delete J[b.id]}function I(b){var e;a.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(e=0;e<d.length;++e)c(36064+
e,d[e]);for(e=d.length;e<y.maxColorAttachments;++e)c(36064+e,null);c(36096,b.depthAttachment);c(36128,b.stencilAttachment);c(33306,b.depthStencilAttachment);a.checkFramebufferStatus(36160);a.bindFramebuffer(36160,g.next);g.cur=g.next;a.getError()}function B(c,h){function a(b,c){var h,l=0,r=0,n=!0,v=!0;h=null;var u=!0,F="rgba",y="uint8",w=1,t=null,B=null,E=null,g=!1;if("number"===typeof b)l=b|0,r=c|0||l;else if(b){"shape"in b?(r=b.shape,l=r[0],r=r[1]):("radius"in b&&(l=r=b.radius),"width"in b&&(l=
b.width),"height"in b&&(r=b.height));if("color"in b||"colors"in b)h=b.color||b.colors,Array.isArray(h);if(!h){"colorCount"in b&&(w=b.colorCount|0);"colorTexture"in b&&(u=!!b.colorTexture,F="rgba4");if("colorType"in b&&(y=b.colorType,!u))if("half float"===y||"float16"===y)F="rgba16f";else if("float"===y||"float32"===y)F="rgba32f";"colorFormat"in b&&(F=b.colorFormat,0<=m.indexOf(F)?u=!0:0<=H.indexOf(F)&&(u=!1))}if("depthTexture"in b||"depthStencilTexture"in b)g=!(!b.depthTexture&&!b.depthStencilTexture);
"depth"in b&&("boolean"===typeof b.depth?n=b.depth:(t=b.depth,v=!1));"stencil"in b&&("boolean"===typeof b.stencil?v=b.stencil:(B=b.stencil,n=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?n=v=b.depthStencil:(E=b.depthStencil,v=n=!1))}else l=r=1;var A=null,D=null,K=null,J=null;if(Array.isArray(h))A=h.map(p);else if(h)A=[p(h)];else for(A=Array(w),h=0;h<w;++h)A[h]=q(l,r,u,F,y);l=l||A[0].width;r=r||A[0].height;t?D=p(t):n&&!v&&(D=q(l,r,g,"depth","uint32"));B?K=p(B):v&&!n&&(K=q(l,r,!1,"stencil",
"uint8"));E?J=p(E):!t&&!B&&v&&n&&(J=q(l,r,g,"depth stencil","depth stencil"));n=null;for(h=0;h<A.length;++h)e(A[h],l,r),A[h]&&A[h].texture&&(v=d[A[h].texture._texture.format]*f[A[h].texture._texture.type],null===n&&(n=v));e(D,l,r);e(K,l,r);e(J,l,r);x(k);k.width=l;k.height=r;k.colorAttachments=A;k.depthAttachment=D;k.stencilAttachment=K;k.depthStencilAttachment=J;a.color=A.map(z);a.depth=z(D);a.stencil=z(K);a.depthStencil=z(J);a.width=k.width;a.height=k.height;I(k);return a}var k=new b;v.framebufferCount++;
a(c,h);return n(a,{resize:function(b,c){var e=b|0,d=c|0||e;if(e===k.width&&d===k.height)return a;for(var f=k.colorAttachments,h=0;h<f.length;++h)E(f[h],e,d);E(k.depthAttachment,e,d);E(k.stencilAttachment,e,d);E(k.depthStencilAttachment,e,d);k.width=a.width=e;k.height=a.height=d;I(k);return a},_reglType:"framebuffer",_framebuffer:k,destroy:function(){F(k);x(k)}})}var g={cur:null,next:null,dirty:!1},m=["rgba"],H=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&H.push("srgba");l.ext_color_buffer_half_float&&
H.push("rgba16f","rgb16f");l.webgl_color_buffer_float&&H.push("rgba32f");var D=["uint8"];l.oes_texture_half_float&&D.push("half float","float16");l.oes_texture_float&&D.push("float","float32");var P=0,J={};return n(g,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof b)?c:null},create:B,createCube:function(b){function c(b){var d,f={color:null},h=0,p=null;d="rgba";var q="uint8",a=1;if("number"===typeof b)h=b|0;else if(b){"shape"in b?
h=b.shape[0]:("radius"in b&&(h=b.radius|0),"width"in b?h=b.width|0:"height"in b&&(h=b.height|0));if("color"in b||"colors"in b)p=b.color||b.colors,Array.isArray(p);p||("colorCount"in b&&(a=b.colorCount|0),"colorType"in b&&(q=b.colorType),"colorFormat"in b&&(d=b.colorFormat));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(b=[],d=0;d<p.length;++d)b[d]=p[d];else b=[p];else for(b=Array(a),p={radius:h,
format:d,type:q},d=0;d<a;++d)b[d]=u.createCube(p);f.color=Array(b.length);for(d=0;d<b.length;++d)a=b[d],h=h||a.width,f.color[d]={target:34069,data:b[d]};for(d=0;6>d;++d){for(a=0;a<b.length;++a)f.color[a].target=34069+d;0<d&&(f.depth=e[0].depth,f.stencil=e[0].stencil,f.depthStencil=e[0].depthStencil);if(e[d])e[d](f);else e[d]=B(f)}return n(c,{width:h,height:h,color:b})}var e=Array(6);c(b);return n(c,{faces:e,resize:function(b){var d=b|0;if(d===c.width)return c;var f=c.color;for(b=0;b<f.length;++b)f[b].resize(d);
for(b=0;6>b;++b)e[b].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",destroy:function(){e.forEach(function(b){b.destroy()})}})},clear:function(){t(J).forEach(F)},restore:function(){t(J).forEach(function(b){b.framebuffer=a.createFramebuffer();I(b)})}})}},{"./util/extend":23,"./util/values":31}],13:[function(a,g,m){g.exports=function(a,n){var d=1;n.ext_texture_filter_anisotropic&&(d=a.getParameter(34047));var f=1,k=1;n.webgl_draw_buffers&&(f=a.getParameter(34852),k=a.getParameter(36063));
return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(n).filter(function(d){return!!n[d]}),maxAnisotropic:d,maxDrawbuffers:f,maxColorAttachments:k,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),
maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,g,m){var t=a("./util/is-typed-array");g.exports=
function(a,d,f,k,l,y){return function(l){var y;y=null===d.next?5121:d.next.colorAttachments[0].texture._texture.type;var v=0,r=0,h=k.framebufferWidth,e=k.framebufferHeight,c=null;t(l)?c=l:l&&(v=l.x|0,r=l.y|0,h=(l.width||k.framebufferWidth-v)|0,e=(l.height||k.framebufferHeight-r)|0,c=l.data||null);f();l=h*e*4;c||(5121===y?c=new Uint8Array(l):5126===y&&(c=c||new Float32Array(l)));a.pixelStorei(3333,4);a.readPixels(v,r,h,e,6408,y,c);return c}}},{"./util/is-typed-array":26}],15:[function(a,g,m){var t=
a("./util/values"),n=[];n[32854]=2;n[32855]=2;n[36194]=2;n[33189]=2;n[36168]=1;n[34041]=4;n[35907]=4;n[34836]=16;n[34842]=8;n[34843]=6;g.exports=function(d,f,a,l,y){function u(e){this.id=r++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=this.width=0;y.profile&&(this.stats={size:0})}function w(e){var c=e.renderbuffer;d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(c);e.renderbuffer=null;e.refCount=0;delete h[e.id];l.renderbufferCount--}var v={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(v.srgba=35907);f.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);f.webgl_color_buffer_float&&(v.rgba32f=34836);var r=0,h={};u.prototype.decRef=function(){0>=--this.refCount&&w(this)};y.profile&&(l.getTotalRenderbufferSize=function(){var e=0;Object.keys(h).forEach(function(c){e+=h[c].stats.size});return e});return{create:function(e,c){function f(c,e){var b=0,h=0,k=32854;"object"===typeof c&&c?("shape"in c?(h=c.shape,b=h[0]|
0,h=h[1]|0):("radius"in c&&(b=h=c.radius|0),"width"in c&&(b=c.width|0),"height"in c&&(h=c.height|0)),"format"in c&&(k=v[c.format])):"number"===typeof c?(b=c|0,h="number"===typeof e?e|0:b):c||(b=h=1);if(b!==a.width||h!==a.height||k!==a.format)return f.width=a.width=b,f.height=a.height=h,a.format=k,d.bindRenderbuffer(36161,a.renderbuffer),d.renderbufferStorage(36161,k,b,h),y.profile&&(a.stats.size=n[a.format]*a.width*a.height),f}var a=new u(d.createRenderbuffer());h[a.id]=a;l.renderbufferCount++;f(e,
c);f.resize=function(c,e){var b=c|0,h=e|0||b;if(b===a.width&&h===a.height)return f;f.width=a.width=b;f.height=a.height=h;d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,b,h);y.profile&&(a.stats.size=n[a.format]*a.width*a.height);return f};f._reglType="renderbuffer";f._renderbuffer=a;y.profile&&(f.stats=a.stats);f.destroy=function(){a.decRef()};return f},clear:function(){t(h).forEach(w)},restore:function(){t(h).forEach(function(e){e.renderbuffer=d.createRenderbuffer();
d.bindRenderbuffer(36161,e.renderbuffer);d.renderbufferStorage(36161,e.format,e.width,e.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/values":31}],16:[function(a,g,m){var t=a("./util/values");g.exports=function(a,d,f,k){function l(c,e,d,b){this.name=c;this.id=e;this.location=d;this.info=b}function y(c,e){for(var d=0;d<c.length;++d)if(c[d].id===e.id){c[d].location=e.location;return}c.push(e)}function u(c,e,f){f=35632===c?r:h;var b=f[e];if(!b){var p=d.str(e),b=a.createShader(c);a.shaderSource(b,
p);a.compileShader(b);f[e]=b}return b}function w(c,e){this.id=p++;this.fragId=c;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];k.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function v(c,e){var f,b;f=u(35632,c.fragId);b=u(35633,c.vertId);var h=c.program=a.createProgram();a.attachShader(h,f);a.attachShader(h,b);a.linkProgram(h);var p=a.getProgramParameter(h,35718);k.profile&&(c.stats.uniformsCount=p);var r=c.uniforms;for(f=0;f<p;++f)if(b=a.getActiveUniform(h,f))if(1<
b.size)for(var v=0;v<b.size;++v){var w=b.name.replace("[0]","["+v+"]");y(r,new l(w,d.id(w),a.getUniformLocation(h,w),b))}else y(r,new l(b.name,d.id(b.name),a.getUniformLocation(h,b.name),b));p=a.getProgramParameter(h,35721);k.profile&&(c.stats.attributesCount=p);r=c.attributes;for(f=0;f<p;++f)(b=a.getActiveAttrib(h,f))&&y(r,new l(b.name,d.id(b.name),a.getAttribLocation(h,b.name),b))}var r={},h={},e={},c=[],p=0;k.profile&&(f.getMaxUniformsCount=function(){var e=0;c.forEach(function(c){c.stats.uniformsCount>
e&&(e=c.stats.uniformsCount)});return e},f.getMaxAttributesCount=function(){var e=0;c.forEach(function(c){c.stats.attributesCount>e&&(e=c.stats.attributesCount)});return e});return{clear:function(){var d=a.deleteShader.bind(a);t(r).forEach(d);r={};t(h).forEach(d);h={};c.forEach(function(c){a.deleteProgram(c.program)});c.length=0;e={};f.shaderCount=0},program:function(d,h,a){f.shaderCount++;var b=e[h];b||(b=e[h]={});var p=b[d];p||(p=new w(h,d),v(p,a),b[d]=p,c.push(p));return p},restore:function(){r=
{};h={};for(var e=0;e<c.length;++e)v(c[e])},shader:u,frag:-1,vert:-1}}},{"./util/values":31}],17:[function(a,g,m){g.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(a,g,m){g.exports=function(){var a={"":0},n=[""];return{id:function(d){var f=a[d];if(f)return f;f=a[d]=n.length;n.push(d);return f},str:function(d){return n[d]}}}},{}],19:[function(a,g,m){function t(b){return Array.isArray(b)&&
(0===b.length||"number"===typeof b[0])}function n(b){return Array.isArray(b)&&0!==b.length&&e(b[0])?!0:!1}function d(b){return Object.prototype.toString.call(b)}function f(b){if(!b)return!1;var c=d(b);return 0<=E.indexOf(c)?!0:t(b)||n(b)||v(b)}function k(b,c){36193===b.type?(b.data=h(c),r.freeType(c)):b.data=c}function l(c,e,d,f,h,a){c="undefined"!==typeof x[c]?x[c]:z[c]*b[e];a&&(c*=6);if(h){for(f=0;1<=d;)f+=c*d*d,d/=2;return f}return c*d*f}var y=a("./util/extend"),u=a("./util/values"),w=a("./util/is-typed-array"),
v=a("./util/is-ndarray"),r=a("./util/pool"),h=a("./util/to-half-float"),e=a("./util/is-array-like");m=a("./constants/arraytypes.json");var c=a("./constants/arraytypes.json"),p=[9984,9986,9985,9987],q=[0,6409,6410,6407,6408],z={};z[6409]=z[6406]=z[6402]=1;z[34041]=z[6410]=2;z[6407]=z[35904]=3;z[6408]=z[35906]=4;var E=Object.keys(m).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),b=[];b[5121]=1;b[5126]=4;b[36193]=2;b[5123]=
2;b[5125]=4;var x=[];x[32854]=2;x[32855]=2;x[36194]=2;x[34041]=4;x[33776]=.5;x[33777]=.5;x[33778]=1;x[33779]=1;x[35986]=.5;x[35987]=1;x[34798]=1;x[35840]=.5;x[35841]=.25;x[35842]=.5;x[35843]=.25;x[36196]=.5;g.exports=function(b,a,x,g,E,m,D){function P(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function J(b,c){b.internalformat=c.internalformat;b.format=c.format;
b.type=c.type;b.compressed=c.compressed;b.premultiplyAlpha=c.premultiplyAlpha;b.flipY=c.flipY;b.unpackAlignment=c.unpackAlignment;b.colorSpace=c.colorSpace;b.width=c.width;b.height=c.height;b.channels=c.channels}function K(b,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(b.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(b.flipY=c.flipY);"alignment"in c&&(b.unpackAlignment=c.alignment);"colorSpace"in c&&(b.colorSpace=aa[c.colorSpace]);"type"in c&&(b.type=da[c.type]);var e=b.width,d=b.height,
f=b.channels,h=!1;"shape"in c?(e=c.shape[0],d=c.shape[1],3===c.shape.length&&(f=c.shape[2],h=!0)):("radius"in c&&(e=d=c.radius),"width"in c&&(e=c.width),"height"in c&&(d=c.height),"channels"in c&&(f=c.channels,h=!0));b.width=e|0;b.height=d|0;b.channels=f|0;e=!1;"format"in c&&(e=c.format,d=b.internalformat=fa[e],b.format=xa[d],e in da&&!("type"in c)&&(b.type=da[e]),e in ga&&(b.compressed=!0),e=!0);!h&&e?b.channels=z[b.format]:h&&!e&&b.channels!==q[b.format]&&(b.format=b.internalformat=q[b.channels])}}
function R(c){b.pixelStorei(37440,c.flipY);b.pixelStorei(37441,c.premultiplyAlpha);b.pixelStorei(37443,c.colorSpace);b.pixelStorei(3317,c.unpackAlignment)}function G(){P.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function C(b,a){var p=null;f(a)?p=a:a&&(K(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),f(a.data)&&(p=a.data));if(a.copy){var l=E.viewportWidth,x=E.viewportHeight;b.width=b.width||l-b.xOffset;b.height=b.height||
x-b.yOffset;b.needsCopy=!0}else if(!p)b.width=b.width||1,b.height=b.height||1;else if(w(p))b.data=p,"type"in a||5121!==b.type||(b.type=c[Object.prototype.toString.call(p)]|0);else if(t(p)){l=p;x=b.width*b.height*b.channels;switch(b.type){case 5121:case 5123:case 5125:case 5126:x=r.allocType(b.type,x);x.set(l);b.data=x;break;case 36193:b.data=h(l)}b.alignment=1;b.needsFree=!0}else if(v(p)){l=p.data;Array.isArray(l)||5121!==b.type||(b.type=c[Object.prototype.toString.call(l)]|0);var x=p.shape,C=p.stride,
G,u,y,z;3===x.length?(y=x[2],z=C[2]):z=y=1;G=x[0];u=x[1];x=C[0];C=C[1];b.alignment=1;b.width=G;b.height=u;b.channels=y;b.format=b.internalformat=q[y];b.needsFree=!0;G=z;p=p.offset;y=b.width;z=b.height;u=b.channels;for(var F=r.allocType(36193===b.type?5126:b.type,y*z*u),B=0,g=0;g<z;++g)for(var I=0;I<y;++I)for(var O=0;O<u;++O)F[B++]=l[x*I+C*g+G*O+p];k(b,F)}else if("[object HTMLCanvasElement]"===d(p)||"[object CanvasRenderingContext2D]"===d(p))"[object HTMLCanvasElement]"===d(p)?b.element=p:b.element=
p.canvas,b.width=b.element.width,b.height=b.element.height;else if("[object HTMLImageElement]"===d(p))b.element=p,b.width=p.naturalWidth,b.height=p.naturalHeight;else if("[object HTMLVideoElement]"===d(p))b.element=p,b.width=p.videoWidth,b.height=p.videoHeight,b.needsPoll=!0;else if(n(p)){l=p[0].length;x=p.length;C=1;if(e(p[0][0])){G=C=p[0][0].length;y=r.allocType(36193===b.type?5126:b.type,l*x*G);for(u=z=0;u<x;++u)for(F=p[u],B=0;B<l;++B)for(g=F[B],I=0;I<G;++I)y[z++]=g[I];k(b,y)}else{G=r.allocType(36193===
b.type?5126:b.type,l*x);for(z=y=0;z<x;++z)for(u=p[z],F=0;F<l;++F)G[y++]=u[F];k(b,G)}b.alignment=1;b.width=l;b.height=x;b.channels=C;b.format=b.internalformat=q[C];b.needsFree=!0}}function O(c,e,d,f,h){var a=c.element,p=c.data,k=c.internalformat,q=c.format,l=c.type,x=c.width,r=c.height;R(c);a?b.texSubImage2D(e,h,d,f,q,l,a):c.compressed?b.compressedTexSubImage2D(e,h,d,f,k,x,r,p):c.needsCopy?(g(),b.copyTexSubImage2D(e,h,d,f,c.xOffset,c.yOffset,x,r)):b.texSubImage2D(e,h,d,f,x,r,q,l,p)}function M(){return ya.pop()||
new G}function V(b){b.needsFree&&r.freeType(b.data);G.call(b);ya.push(b)}function X(){P.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function U(b,c,e){var d=b.images[0]=M();b.mipmask=1;d.width=b.width=c;d.height=b.height=e}function L(b,c){var e=null;if(f(c))e=b.images[0]=M(),J(e,b),C(e,c),b.mipmask=1;else if(K(b,c),Array.isArray(c.mipmap))for(var d=c.mipmap,h=0;h<d.length;++h)e=b.images[h]=M(),J(e,b),e.width>>=h,e.height>>=h,C(e,d[h]),b.mipmask|=1<<h;else e=
b.images[0]=M(),J(e,b),C(e,c),b.mipmask=1;J(b,b.images[0])}function Y(c,e){for(var d=c.images,f=0;f<d.length&&d[f];++f){var h=d[f],a=e,p=f,k=h.element,q=h.data,l=h.internalformat,x=h.format,r=h.type,n=h.width,C=h.height;R(h);k?b.texImage2D(a,p,x,x,r,k):h.compressed?b.compressedTexImage2D(a,p,l,n,C,0,q):h.needsCopy?(g(),b.copyTexImage2D(a,p,x,h.xOffset,h.yOffset,n,C,0)):b.texImage2D(a,p,x,n,C,0,x,r,q)}}function T(){var b=Da.pop()||new X;P.call(b);for(var c=b.mipmask=0;16>c;++c)b.images[c]=null;return b}
function W(b){for(var c=b.images,e=0;e<c.length;++e)c[e]&&V(c[e]),c[e]=null;Da.push(b)}function S(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Q(b,c){"min"in c&&(b.minFilter=ka[c.min],0<=p.indexOf(b.minFilter)&&(b.genMipmaps=!0));"mag"in c&&(b.magFilter=ja[c.mag]);var e=b.wrapS,d=b.wrapT;if("wrap"in c){var f=c.wrap;"string"===typeof f?e=d=ba[f]:Array.isArray(f)&&(e=ba[f[0]],d=ba[f[1]])}else"wrapS"in c&&(e=ba[c.wrapS]),
"wrapT"in c&&(d=ba[c.wrapT]);b.wrapS=e;b.wrapT=d;"anisotropic"in c&&(b.anisotropic=c.anisotropic);if("mipmap"in c){e=!1;switch(typeof c.mipmap){case "string":b.mipmapHint=ma[c.mipmap];e=b.genMipmaps=!0;break;case "boolean":e=b.genMipmaps=c.mipmap;break;case "object":b.genMipmaps=!1,e=!0}!e||"min"in c||(b.minFilter=9984)}}function Z(c,e){b.texParameteri(e,10241,c.minFilter);b.texParameteri(e,10240,c.magFilter);b.texParameteri(e,10242,c.wrapS);b.texParameteri(e,10243,c.wrapT);a.ext_texture_filter_anisotropic&&
b.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(b.hint(33170,c.mipmapHint),b.generateMipmap(e))}function ca(c){P.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=c;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new S;D.profile&&(this.stats={size:0})}function ha(c){b.activeTexture(33984);b.bindTexture(c.target,c.texture)}function ea(){var c=sa[0];c?b.bindTexture(c.target,c.texture):b.bindTexture(3553,null)}function na(c){var e=
c.texture,d=c.unit,f=c.target;0<=d&&(b.activeTexture(33984+d),b.bindTexture(f,null),sa[d]=null);b.deleteTexture(e);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete la[c.id];m.textureCount--}var ma={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ba={repeat:10497,clamp:33071,mirror:33648},ja={nearest:9728,linear:9729},ka=y({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ja),aa={none:0,browser:37444},
da={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fa={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ga={};a.ext_srgb&&(fa.srgb=35904,fa.srgba=35906);a.oes_texture_float&&(da.float32=da["float"]=5126);a.oes_texture_half_float&&(da.float16=da["half float"]=36193);a.webgl_depth_texture&&(y(fa,{depth:6402,"depth stencil":34041}),y(da,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&y(ga,{"rgb s3tc dxt1":33776,
"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&y(ga,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&y(ga,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(ga["rgb etc1"]=36196);var ia=Array.prototype.slice.call(b.getParameter(34467));Object.keys(ga).forEach(function(b){var c=ga[b];0<=
ia.indexOf(c)&&(fa[b]=c)});var ta=Object.keys(fa);x.textureFormats=ta;var xa=ta.reduce(function(b,c){var e=fa[c];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e?b[e]=e:32855===e||0<=c.indexOf("rgba")?b[e]=6408:b[e]=6407;return b},{}),ya=[],Da=[],Ea=0,la={},za=x.maxTextureUnits,sa=Array(za).map(function(){return null});y(ca.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var e=0;e<za;++e){var d=sa[e];if(d){if(0<d.bindCount)continue;d.unit=-1}sa[e]=this;c=e;break}D.profile&&
m.maxTextureUnits<c+1&&(m.maxTextureUnits=c+1);this.unit=c;b.activeTexture(33984+c);b.bindTexture(this.target,this.texture)}return c},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&na(this)}});D.profile&&(m.getTotalTextureSize=function(){var b=0;Object.keys(la).forEach(function(c){b+=la[c].stats.size});return b});return{create2D:function(c,e){function d(b,c){var e=f.texInfo;S.call(e);var h=T();"number"===typeof b?"number"===typeof c?U(h,b|0,c|0):U(h,b|0,b|0):b?(Q(e,b),L(h,
b)):U(h,1,1);e.genMipmaps&&(h.mipmask=(h.width<<1)-1);f.mipmask=h.mipmask;J(f,h);f.internalformat=h.internalformat;d.width=h.width;d.height=h.height;ha(f);Y(h,3553);Z(e,3553);ea();W(h);D.profile&&(f.stats.size=l(f.internalformat,f.type,h.width,h.height,e.genMipmaps,!1));return d}var f=new ca(3553);la[f.id]=f;m.textureCount++;d(c,e);d.subimage=function(b,c,e,h){c|=0;e|=0;h|=0;var a=M();J(a,f);a.width>>=h;a.height>>=h;a.width-=c;a.height-=e;C(a,b);ha(f);O(a,3553,c,e,h);ea();V(a);return d};d.resize=
function(c,e){var h=c|0,a=e|0||h;if(h===f.width&&a===f.height)return d;d.width=f.width=h;d.height=f.height=a;ha(f);for(var p=0;f.mipmask>>p;++p)b.texImage2D(3553,p,f.format,h>>p,a>>p,0,f.format,f.type,null);ea();D.profile&&(f.stats.size=l(f.internalformat,f.type,h,a,!1,!1));return d};d._reglType="texture2d";d._texture=f;D.profile&&(d.stats=f.stats);d.destroy=function(){f.decRef()};return d},createCube:function(c,e,d,f,h,a){function p(b,c,e,d,f,h){var a,x=k.texInfo;S.call(x);for(a=0;6>a;++a)q[a]=T();
if("number"===typeof b||!b)for(b=b|0||1,a=0;6>a;++a)U(q[a],b,b);else if("object"===typeof b)if(c)L(q[0],b),L(q[1],c),L(q[2],e),L(q[3],d),L(q[4],f),L(q[5],h);else if(Q(x,b),K(k,b),"faces"in b)for(b=b.faces,a=0;6>a;++a)J(q[a],k),L(q[a],b[a]);else for(a=0;6>a;++a)L(q[a],b);J(k,q[0]);k.mipmask=x.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;k.internalformat=q[0].internalformat;p.width=q[0].width;p.height=q[0].height;ha(k);for(a=0;6>a;++a)Y(q[a],34069+a);Z(x,34067);ea();D.profile&&(k.stats.size=l(k.internalformat,
k.type,p.width,p.height,x.genMipmaps,!0));for(a=0;6>a;++a)W(q[a]);return p}var k=new ca(34067);la[k.id]=k;m.cubeCount++;var q=Array(6);p(c,e,d,f,h,a);p.subimage=function(b,c,e,d,f){e|=0;d|=0;f|=0;var h=M();J(h,k);h.width>>=f;h.height>>=f;h.width-=e;h.height-=d;C(h,c);ha(k);O(h,34069+b,e,d,f);ea();V(h);return p};p.resize=function(c){c|=0;if(c!==k.width){p.width=k.width=c;p.height=k.height=c;ha(k);for(var e=0;6>e;++e)for(var d=0;k.mipmask>>d;++d)b.texImage2D(34069+e,d,k.format,c>>d,c>>d,0,k.format,
k.type,null);ea();D.profile&&(k.stats.size=l(k.internalformat,k.type,p.width,p.height,!1,!0));return p}};p._reglType="textureCube";p._texture=k;D.profile&&(p.stats=k.stats);p.destroy=function(){k.decRef()};return p},clear:function(){for(var c=0;c<za;++c)b.activeTexture(33984+c),b.bindTexture(3553,null),sa[c]=null;u(la).forEach(na);m.cubeCount=0;m.textureCount=0},getTexture:function(b){return null},restore:function(){u(la).forEach(function(c){c.texture=b.createTexture();b.bindTexture(c.target,c.texture);
for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===c.target)b.texImage2D(3553,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);else for(var d=0;6>d;++d)b.texImage2D(34069+d,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);Z(c.texInfo,c.target)})}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],20:[function(a,
g,m){g.exports=function(a,n){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function f(f,e,c){var a=u.pop()||new d;a.startQueryIndex=f;a.endQueryIndex=e;a.sum=0;a.stats=c;w.push(a)}var k=n.ext_disjoint_timer_query;if(!k)return null;var l=[],y=[],u=[],w=[],v=[],r=[];return{beginQuery:function(d){var e=l.pop()||k.createQueryEXT();k.beginQueryEXT(35007,e);y.push(e);f(y.length-1,y.length,d)},endQuery:function(){k.endQueryEXT(35007)},pushScopeStats:f,update:function(){var d,
e;d=y.length;if(0!==d){r.length=Math.max(r.length,d+1);v.length=Math.max(v.length,d+1);v[0]=0;var c=r[0]=0;for(e=d=0;e<y.length;++e){var f=y[e];k.getQueryObjectEXT(f,34919)?(c+=k.getQueryObjectEXT(f,34918),l.push(f)):y[d++]=f;v[e+1]=c;r[e+1]=d}y.length=d;for(e=d=0;e<w.length;++e){var c=w[e],a=c.startQueryIndex,f=c.endQueryIndex;c.sum+=v[f]-v[a];a=r[a];f=r[f];f===a?(c.stats.gpuTime+=c.sum/1E6,u.push(c)):(c.startQueryIndex=a,c.endQueryIndex=f,w[d++]=c)}w.length=d}},getNumPendingQueries:function(){return y.length},
clear:function(){l.push.apply(l,y);for(var d=0;d<l.length;d++)k.deleteQueryEXT(l[d]);y.length=0;l.length=0},restore:function(){y.length=0;l.length=0}}}},{}],21:[function(a,g,m){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,g,m){function t(d){return Array.prototype.slice.call(d)}function n(d){return t(d).join("")}var d=a("./extend");g.exports=function(){function f(){var f=[],h=[];return d(function(){f.push.apply(f,
t(arguments))},{def:function(){var e="v"+l++;h.push(e);0<arguments.length&&(f.push(e,"="),f.push.apply(f,t(arguments)),f.push(";"));return e},toString:function(){return n([0<h.length?"var "+h+";":"",n(f)])}})}function a(){function k(c,d){e(c,d,"=",h.def(c,d),";")}var h=f(),e=f(),c=h.toString,p=e.toString;return d(function(){h.apply(h,t(arguments))},{def:h.def,entry:h,exit:e,save:k,set:function(c,e,d){k(c,e);h(c,e,"=",d,";")},toString:function(){return c()+p()}})}var l=0,y=[],u=[],w=f(),v={};return{global:w,
link:function(d){for(var f=0;f<u.length;++f)if(u[f]===d)return y[f];f="g"+l++;y.push(f);u.push(d);return f},block:f,proc:function(f,h){function e(){var e="a"+c.length;c.push(e);return e}var c=[];h=h||0;for(var p=0;p<h;++p)e();var p=a(),q=p.toString;return v[f]=d(p,{arg:e,toString:function(){return n(["function(",c.join(),"){",q(),"}"])}})},scope:a,cond:function(){var f=n(arguments),h=a(),e=a(),c=h.toString,p=e.toString;return d(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){e.apply(e,
t(arguments));return this},toString:function(){var e=p();e&&(e="else{"+e+"}");return n(["if(",f,"){",c(),"}",e])}})},compile:function(){var d=['"use strict";',w,"return {"];Object.keys(v).forEach(function(e){d.push('"',e,'":',v[e].toString(),",")});d.push("}");var f=n(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(f)).apply(null,u)}}}},{"./extend":23}],23:[function(a,g,m){g.exports=function(a,n){for(var d=Object.keys(n),f=0;f<d.length;++f)a[d[f]]=
n[d[f]];return a}},{}],24:[function(a,g,m){var t=a("./is-typed-array");g.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":26}],25:[function(a,g,m){var t=a("./is-typed-array");g.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":26}],26:[function(a,g,m){var t=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in
t}},{"../constants/arraytypes.json":4}],27:[function(a,g,m){g.exports=function(a,n){for(var d=Array(a),f=0;f<a;++f)d[f]=n(f);return d}},{}],28:[function(a,g,m){function t(d){var f,a;f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1}function n(d){a:{for(var a=16;268435456>=a;a*=16)if(d<=a){d=a;break a}d=0}a=f[t(d)>>2];return 0<a.length?a.pop():new ArrayBuffer(d)}function d(d){f[t(d.byteLength)>>2].push(d)}var f=a("./loop")(8,function(){return[]});
g.exports={alloc:n,free:d,allocType:function(d,f){var a=null;switch(d){case 5120:a=new Int8Array(n(f),0,f);break;case 5121:a=new Uint8Array(n(f),0,f);break;case 5122:a=new Int16Array(n(2*f),0,f);break;case 5123:a=new Uint16Array(n(2*f),0,f);break;case 5124:a=new Int32Array(n(4*f),0,f);break;case 5125:a=new Uint32Array(n(4*f),0,f);break;case 5126:a=new Float32Array(n(4*f),0,f);break;default:return null}return a.length!==f?a.subarray(0,f):a},freeType:function(f){d(f.buffer)}}},{"./loop":27}],29:[function(a,
g,m){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){return setTimeout(a,16)},cancel:clearTimeout}},{}],30:[function(a,g,m){var t=a("./pool"),n=new Float32Array(1),d=new Uint32Array(n.buffer);g.exports=function(f){for(var a=t.allocType(5123,f.length),l=0;l<f.length;++l)if(isNaN(f[l]))a[l]=65535;else if(Infinity===f[l])a[l]=31744;else if(-Infinity===
f[l])a[l]=64512;else{n[0]=f[l];var y=d[0],u=y>>>31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;a[l]=-24>w?u:-14>w?u+(y+1024>>-14-w):15<w?u+31744:u+(w+15<<10)+y}return a}},{"./pool":28}],31:[function(a,g,m){g.exports=function(a){return Object.keys(a).map(function(n){return a[n]})}},{}],32:[function(a,g,m){function t(d,f,a){function n(){var f=window.innerWidth,h=window.innerHeight;d!==document.body&&(h=d.getBoundingClientRect(),f=h.right-h.left,h=h.top-h.bottom);v.width=a*f;v.height=a*h;k(v.style,{width:f+"px",
height:h+"px"})}var v=document.createElement("canvas");k(v.style,{border:0,margin:0,padding:0,top:0,left:0});d.appendChild(v);d===document.body&&(v.style.position="absolute",k(d.style,{margin:0,padding:0}));window.addEventListener("resize",n,!1);n();return{canvas:v,onDestroy:function(){window.removeEventListener("resize",n);d.removeChild(v)}}}function n(d,f){function a(k){try{return d.getContext(k,f)}catch(n){return null}}return a("webgl")||a("experimental-webgl")||a("webgl-experimental")}function d(d){return"string"===
typeof d?d.split():d}function f(d){return"string"===typeof d?document.querySelector(d):d}var k=a("./util/extend");g.exports=function(a){var k=a||{},u,w,v,r;a={};var h=[],e=[],c="undefined"===typeof window?1:window.devicePixelRatio,p=!1,q=function(c){},z=function(){};"string"===typeof k?u=document.querySelector(k):"object"===typeof k&&("string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?u=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?
(r=k,v=r.canvas):("gl"in k?r=k.gl:"canvas"in k?v=f(k.canvas):"container"in k&&(w=f(k.container)),"attributes"in k&&(a=k.attributes),"extensions"in k&&(h=d(k.extensions)),"optionalExtensions"in k&&(e=d(k.optionalExtensions)),"onDone"in k&&(q=k.onDone),"profile"in k&&(p=!!k.profile),"pixelRatio"in k&&(c=+k.pixelRatio)));u&&("canvas"===u.nodeName.toLowerCase()?v=u:w=u);if(!r){if(!v){u=t(w||document.body,q,c);if(!u)return null;v=u.canvas;z=u.onDestroy}r=n(v,a)}return r?{gl:r,canvas:v,container:w,extensions:h,
optionalExtensions:e,pixelRatio:c,profile:p,onDone:q,onDestroy:z}:(z(),q("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],33:[function(a,g,m){function t(d,f,a){for(var u=[],w=f;w<a;w+=3)f=(d[w]<<16)+(d[w+1]<<8)+d[w+2],u.push(n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]);return u.join("")}m.toByteArray=function(a){var l,n,u,w,v;l=a.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[l-2]?2:"="===
a[l-1]?1:0;v=new f(3*l/4-w);n=0<w?l-4:l;var r=0;for(l=0;l<n;l+=4)u=d[a.charCodeAt(l)]<<18|d[a.charCodeAt(l+1)]<<12|d[a.charCodeAt(l+2)]<<6|d[a.charCodeAt(l+3)],v[r++]=u>>16&255,v[r++]=u>>8&255,v[r++]=u&255;2===w?(u=d[a.charCodeAt(l)]<<2|d[a.charCodeAt(l+1)]>>4,v[r++]=u&255):1===w&&(u=d[a.charCodeAt(l)]<<10|d[a.charCodeAt(l+1)]<<4|d[a.charCodeAt(l+2)]>>2,v[r++]=u>>8&255,v[r++]=u&255);return v};m.fromByteArray=function(d){for(var f=d.length,a=f%3,u="",w=[],v=0,r=f-a;v<r;v+=16383)w.push(t(d,v,v+16383>
r?r:v+16383));1===a?(d=d[f-1],u+=n[d>>2],u+=n[d<<4&63],u+="=="):2===a&&(d=(d[f-2]<<8)+d[f-1],u+=n[d>>10],u+=n[d>>4&63],u+=n[d<<2&63],u+="=");w.push(u);return w.join("")};var n=[],d=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var f=0;64>f;++f)n[f]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f],d["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(f)]=f;d[45]=62;d[95]=63})()},{}],34:[function(a,g,m){var t=a("./lib/rationalize");
g.exports=function(a,d){return t(a[0].mul(d[1]).add(d[0].mul(a[1])),a[1].mul(d[1]))}},{"./lib/rationalize":44}],35:[function(a,g,m){g.exports=function(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],36:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,d){return t(a[0].mul(d[1]),a[1].mul(d[0]))}},{"./lib/rationalize":44}],37:[function(a,g,m){function t(a,w){if(n(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var v=0,r,h;if(d(a))r=a.clone();else if("string"===typeof a)r=k(a);
else{if(0===a)return[f(0),f(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;r=f(a)}if(n(w))r.mul(w[1]),h=w[0].clone();else if(d(w))h=w.clone();else if("string"===typeof w)h=k(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),v+=256;h=f(w)}else h=f(1);0<v?r=r.shln(v):0>v&&(h=h.shln(-v));return l(r,h)}var n=a("./is-rat"),d=a("./lib/is-bn"),f=a("./lib/num-to-bn"),k=a("./lib/str-to-bn"),l=a("./lib/rationalize"),y=a("./div");g.exports=t},{"./div":36,
"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],38:[function(a,g,m){var t=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&t(a[0])&&t(a[1])}},{"./lib/is-bn":42}],39:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return a.cmp(new t(0))}},{"bn.js":47}],40:[function(a,g,m){g.exports=function(a){var n=a.length,d=a.words,f=0;if(1===n)f=d[0];else if(2===n)f=d[0]+67108864*d[1];else for(var k=f=0;k<n;k++)f+=d[k]*Math.pow(67108864,
k);return a.sign?-f:f}},{}],41:[function(a,g,m){var t=a("double-bits"),n=a("bit-twiddle").countTrailingZeros;g.exports=function(d){var f=n(t.lo(d));if(32>f)return f;d=n(t.hi(d));return 20<d?52:d+32}},{"bit-twiddle":52,"double-bits":73}],42:[function(a,g,m){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,g,m){var t=a("bn.js"),n=a("double-bits");g.exports=function(d){var f=n.exponent(d);return 52>f?new t(d):(new t(d*Math.pow(2,52-f))).shln(f-
52)}},{"bn.js":47,"double-bits":73}],44:[function(a,g,m){var t=a("./num-to-bn"),n=a("./bn-sign");g.exports=function(d,f){var a=n(d),l=n(f);if(0===a)return[t(0),t(1)];if(0===l)return[t(0),t(0)];0>l&&(d=d.neg(),f=f.neg());a=d.gcd(f);return a.cmpn(1)?[d.div(a),f.div(a)]:[d,f]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return new t(a)}},{"bn.js":47}],46:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,d){return t(a[0].mul(d[0]),a[1].mul(d[1]))}},
{"./lib/rationalize":44}],47:[function(a,g,m){(function(a,n){function d(b,c){if(!b)throw Error(c||"Assertion failed");}function f(b,c){b.super_=c;var e=function(){};e.prototype=c.prototype;b.prototype=new e;b.prototype.constructor=b}function k(b,c,e){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)e=c,c=10;null!==b&&this._init(b||0,c||10,e||"be")}function l(b,c,e){var d=0;for(e=Math.min(b.length,e);c<
e;c++)var f=b.charCodeAt(c)-48,d=d<<4,d=49<=f&&54>=f?d|f-49+10:17<=f&&22>=f?d|f-17+10:d|f&15;return d}function y(b,c,e,d){var f=0;for(e=Math.min(b.length,e);c<e;c++)var a=b.charCodeAt(c)-48,f=f*d,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function u(b,c){this.name=b;this.p=new k(c,16);this.n=this.p.bitLength();this.k=(new k(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){u.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function e(b){"string"===typeof b?(b=k._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function c(b){e.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new k(1)).ishln(this.shift);
this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=k:n.BN=k;k.BN=k;k.wordSize=26;k.prototype._init=function(b,c,e){if("number"===typeof b)return this._initNumber(b,c,e);if("object"===typeof b)return this._initArray(b,c,e);"hex"===c&&(c=16);d(c===(c|0)&&2<=c&&36>=c);b=b.toString().replace(/\s+/g,"");var f=0;"-"===b[0]&&f++;16===c?this._parseHex(b,f):this._parseBase(b,
c,f);"-"===b[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),c,e)};k.prototype._initNumber=function(b,c,e){0>b&&(this.sign=!0,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(d(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===e&&this._initArray(this.toArray(),c,e)};k.prototype._initArray=function(b,c,e){d("number"===typeof b.length);if(0>=b.length)return this.words=
[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var f=0;if("be"===e)for(c=b.length-1,e=0;0<=c;c-=3){var a=b[c]|b[c-1]<<8|b[c-2]<<16;this.words[e]|=a<<f&67108863;this.words[e+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,e++)}else if("le"===e)for(e=c=0;c<b.length;c+=3)a=b[c]|b[c+1]<<8|b[c+2]<<16,this.words[e]|=a<<f&67108863,this.words[e+1]=a>>>26-f&67108863,f+=24,26<=f&&(f-=26,e++);return this.strip()};k.prototype._parseHex=
function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;for(var d=0,e=b.length-6,f=0;e>=c;e-=6){var a=l(b,e,e+6);this.words[f]|=a<<d&67108863;this.words[f+1]|=a>>>26-d&4194303;d+=24;26<=d&&(d-=26,f++)}e+6!==c&&(a=l(b,c,e+6),this.words[f]|=a<<d&67108863,this.words[f+1]|=a>>>26-d&4194303);this.strip()};k.prototype._parseBase=function(b,c,e){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=c)d++;d--;for(var f=f/c|0,a=
b.length-e,h=a%d,p=Math.min(a,a-h)+e,a=0;e<p;e+=d)a=y(b,e,e+d,c),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==h){d=1;a=y(b,e,b.length,c);for(e=0;e<h;e++)d*=c;this.imuln(d);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};k.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};k.prototype.clone=function(){var b=new k(null);this.copy(b);return b};k.prototype.strip=
function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};k.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(b,c){b=b||10;if(16===b||"hex"===b){var e="",f=0;c=c|0||1;for(var a=0,h=0;h<this.length;h++){var k=
this.words[h],l=((k<<f|a)&16777215).toString(16),a=k>>>24-f&16777215,e=0!==a||h!==this.length-1?p[6-l.length]+l+e:l+e,f=f+2;26<=f&&(f-=26,h--)}for(0!==a&&(e=a.toString(16)+e);0!==e.length%c;)e="0"+e;this.sign&&(e="-"+e);return e}if(b===(b|0)&&2<=b&&36>=b){f=q[b];a=z[b];e="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)k=h.modn(a).toString(b),h=h.idivn(a),e=0!==h.cmpn(0)?p[f-k.length]+k+e:k+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}d(!1,"Base should be between 2 and 36")};k.prototype.toJSON=
function(){return this.toString(16)};k.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var e=this.clone();if("le"!==b)for(b=0;0!==e.cmpn(0);b++){var d=e.andln(255);e.ishrn(8);c[c.length-b-1]=d}else for(b=0;0!==e.cmpn(0);b++)d=e.andln(255),e.ishrn(8),c[b]=d;return c};k.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};k.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};k.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};k.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var e=this._zeroBits(this.words[c]),b=b+e;if(26!==e)break}return b};k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};k.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};k.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};k.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};k.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var e=
0;e<c.length;e++)this.words[e]&=b.words[e];this.length=c.length;return this.strip()};k.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};k.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var e=0;e<b.length;e++)this.words[e]=c.words[e]^b.words[e];if(this!==c)for(;e<c.length;e++)this.words[e]=c.words[e];this.length=c.length;return this.strip()};k.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};k.prototype.setn=function(b,c){d("number"===typeof b&&0<=b);for(var e=b/26|0,f=b%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=c?this.words[e]|1<<f:this.words[e]&~(1<<f);return this.strip()};k.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var e;this.length>b.length?e=this:(e=b,b=this);
for(var d=c=0;d<b.length;d++)c=e.words[d]+b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<e.length;d++)c=e.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=e.length;if(0!==c)this.words[this.length]=c,this.length++;else if(e!==this)for(;d<e.length;d++)this.words[d]=e.words[d];return this};k.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};k.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var e;0<c?e=this:(e=b,b=this);for(var d=0,f=0;f<b.length;f++)c=e.words[f]-b.words[f]+d,d=c>>26,this.words[f]=c&67108863;for(;0!==d&&f<e.length;f++)c=e.words[f]+d,d=c>>26,this.words[f]=c&67108863;if(0===d&&f<e.length&&e!==this)for(;f<
e.length;f++)this.words[f]=e.words[f];this.length=Math.max(this.length,f);e!==this&&(this.sign=!0);return this.strip()};k.prototype.sub=function(b){return this.clone().isub(b)};k.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0;d<c.length-1;d++){for(var f=e>>>26,e=e&67108863,a=Math.min(d,b.length-1),h=Math.max(0,d-this.length+1);h<=a;h++)var p=(this.words[d-h]|0)*(b.words[h]|0),k=p&67108863,f=f+(p/67108864|0)|0,k=k+e|0,e=k&67108863,f=f+(k>>>
26)|0;c.words[d]=e;e=f}0!==e?c.words[d]=e:c.length--;return c.strip()};k.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0,f=0;f<c.length-1;f++){for(var a=d,d=0,e=e&67108863,h=Math.min(f,b.length-1),p=Math.max(0,f-this.length+1);p<=h;p++)var k=(this.words[f-p]|0)*(b.words[p]|0),q=k&67108863,a=a+(k/67108864|0)|0,q=q+e|0,e=q&67108863,a=a+(q>>>26)|0,d=d+(a>>>26),a=a&67108863;c.words[f]=e;e=a}0!==e?c.words[f]=e:c.length--;return c.strip()};k.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};k.prototype.mul=function(b){var c=new k(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};k.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,e=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var f=0,a=0,h=Math.min(d,e-1),p=Math.max(0,d-c+1);p<=h;p++)var k=
d-p,k=this.words[k]*b.words[p],q=k&67108863,f=f+(k/67108864|0),q=q+a,a=q&67108863,f=f+(q>>>26);this.words[d]=a;this.words[d+1]+=f}f=0;for(k=1;k<this.length;k++)b=this.words[k]+f,this.words[k]=b&67108863,f=b>>>26;return this.strip()};k.prototype.imuln=function(b){d("number"===typeof b);for(var c=0,e=0;e<this.length;e++){var f=this.words[e]*b,a=(f&67108863)+(c&67108863),c=c>>26,c=c+(f/67108864|0),c=c+(a>>>26);this.words[e]=a&67108863}0!==c&&(this.words[e]=c,this.length++);return this};k.prototype.muln=
function(b){return this.clone().imuln(b)};k.prototype.sqr=function(){return this.mul(this)};k.prototype.isqr=function(){return this.mul(this)};k.prototype.ishln=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var e=67108863>>>26-c<<26-c;if(0!==c){for(var f=0,a=0;a<this.length;a++){var h=this.words[a]&e;this.words[a]=this.words[a]-h<<c|f;f=h>>>26-c}f&&(this.words[a]=f,this.length++)}if(0!==b){for(a=this.length-1;0<=a;a--)this.words[a+b]=this.words[a];for(a=0;a<b;a++)this.words[a]=0;
this.length+=b}return this.strip()};k.prototype.ishrn=function(b,c,e){d("number"===typeof b&&0<=b);var f=b%26,a=Math.min((b-f)/26,this.length);b=67108863^67108863>>>f<<f;c=(c?(c-c%26)/26:0)-a;c=Math.max(0,c);if(e){for(var h=0;h<a;h++)e.words[h]=this.words[h];e.length=a}if(0!==a)if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;a=0;for(h=this.length-1;0<=h&&(0!==a||h>=c);h--){var p=this.words[h];this.words[h]=a<<26-f|p>>>f;a=
p&b}e&&0!==a&&(e.words[e.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};k.prototype.shln=function(b){return this.clone().ishln(b)};k.prototype.shrn=function(b){return this.clone().ishrn(b)};k.prototype.testn=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};k.prototype.imaskn=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;d(!this.sign,"imaskn works only with positive numbers");0!==
c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};k.prototype.maskn=function(b){return this.clone().imaskn(b)};k.prototype.iaddn=function(b){d("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};k.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};k.prototype.isubn=function(b){d("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};k.prototype.addn=function(b){return this.clone().iaddn(b)};
k.prototype.subn=function(b){return this.clone().isubn(b)};k.prototype.iabs=function(){this.sign=!1;return this};k.prototype.abs=function(){return this.clone().iabs()};k.prototype._ishlnsubmul=function(b,c,e){var f=b.length+e,a;if(this.words.length<f){var h=Array(f);for(a=0;a<this.length;a++)h[a]=this.words[a];this.words=h}else a=this.length;for(this.length=Math.max(this.length,f);a<this.length;a++)this.words[a]=0;for(a=h=0;a<b.length;a++)f=this.words[a+e]+h,h=b.words[a]*c,f-=h&67108863,h=(f>>26)-
(h/67108864|0),this.words[a+e]=f&67108863;for(;a<this.length-e;a++)f=this.words[a+e]+h,h=f>>26,this.words[a+e]=f&67108863;if(0===h)return this.strip();d(-1===h);for(a=h=0;a<this.length;a++)f=-this.words[a]+h,h=f>>26,this.words[a]=f&67108863;this.sign=!0;return this.strip()};k.prototype._wordDiv=function(b,c){var e=this.length-b.length,d=this.clone(),f=b,a=f.words[f.length-1],e=26-this._countBits(a);0!==e&&(f=f.shln(e),d.ishln(e),a=f.words[f.length-1]);var h=d.length-f.length,p;if("mod"!==c){p=new k(null);
p.length=h+1;p.words=Array(p.length);for(var q=0;q<p.length;q++)p.words[q]=0}q=d.clone()._ishlnsubmul(f,1,h);q.sign||(d=q,p&&(p.words[h]=1));for(--h;0<=h;h--){q=67108864*d.words[f.length+h]+d.words[f.length+h-1];q=Math.min(q/a|0,67108863);for(d._ishlnsubmul(f,q,h);d.sign;)q--,d.sign=!1,d._ishlnsubmul(f,1,h),0!==d.cmpn(0)&&(d.sign=!d.sign);p&&(p.words[h]=q)}p&&p.strip();d.strip();"div"!==c&&0!==e&&d.ishrn(e);return{div:p?p:null,mod:d}};k.prototype.divmod=function(b,c){d(0!==b.cmpn(0));if(this.sign&&
!b.sign){var e=this.neg().divmod(b,c),f,a;"mod"!==c&&(f=e.div.neg());"div"!==c&&(a=0===e.mod.cmpn(0)?e.mod:b.sub(e.mod));return{div:f,mod:a}}return!this.sign&&b.sign?(e=this.divmod(b.neg(),c),"mod"!==c&&(f=e.div.neg()),{div:f,mod:e.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new k(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new k(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new k(this.modn(b.words[0]))}:
this._wordDiv(b,c)};k.prototype.div=function(b){return this.divmod(b,"div").div};k.prototype.mod=function(b){return this.divmod(b,"mod").mod};k.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var e=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);e=e.cmp(d);return 0>e||1===b&&0===e?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};k.prototype.modn=function(b){d(67108863>=b);for(var c=67108864%b,e=0,f=this.length-1;0<=f;f--)e=(c*e+this.words[f])%b;return e};
k.prototype.idivn=function(b){d(67108863>=b);for(var c=0,e=this.length-1;0<=e;e--)c=this.words[e]+67108864*c,this.words[e]=c/b|0,c%=b;return this.strip()};k.prototype.divn=function(b){return this.clone().idivn(b)};k.prototype.egcd=function(b){d(!b.sign);d(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var f=new k(0),a=new k(0),h=new k(1),p=0;c.isEven()&&e.isEven();)c.ishrn(1),e.ishrn(1),++p;for(var q=e.clone(),l=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&f.isEven()?(b.ishrn(1),f.ishrn(1)):(b.iadd(q).ishrn(1),f.isub(l).ishrn(1));for(;e.isEven();)e.ishrn(1),a.isEven()&&h.isEven()?(a.ishrn(1),h.ishrn(1)):(a.iadd(q).ishrn(1),h.isub(l).ishrn(1));0<=c.cmp(e)?(c.isub(e),b.isub(a),f.isub(h)):(e.isub(c),a.isub(b),h.isub(f))}return{a:a,b:h,gcd:e.ishln(p)}};k.prototype._invmp=function(b){d(!b.sign);d(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var f=new k(0),a=e.clone();0<c.cmpn(1)&&0<e.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(a).ishrn(1);for(;e.isEven();)e.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(a).ishrn(1);0<=c.cmp(e)?(c.isub(e),b.isub(f)):(e.isub(c),f.isub(b))}return 0===c.cmpn(1)?b:f};k.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var e=0;c.isEven()&&b.isEven();e++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(e)};k.prototype.invm=function(b){return this.egcd(b).a.mod(b)};k.prototype.isEven=function(){return 0===(this.words[0]&1)};k.prototype.isOdd=function(){return 1===(this.words[0]&1)};k.prototype.andln=function(b){return this.words[0]&b};k.prototype.bincn=function(b){d("number"===typeof b);var c=b%26;b=(b-c)/26;var e=1<<c;if(this.length<=b){for(c=this.length;c<b+1;c++)this.words[c]=0;this.words[b]|=e;this.length=b+1;return this}for(c=b;0!==e&&
c<this.length;c++)b=this.words[c],b+=e,e=b>>>26,b&=67108863,this.words[c]=b;0!==e&&(this.words[c]=e,this.length++);return this};k.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};k.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};k.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,e=this.length-1;0<=e;e--){var d=this.words[e],f=b.words[e];if(d!==f){d<f?c=-1:d>f&&(c=1);break}}return c};k.red=function(b){return new e(b)};k.prototype.toRed=function(b){d(!this.red,"Already a number in reduction context");d(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};k.prototype.fromRed=function(){d(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
k.prototype._forceRed=function(b){this.red=b;return this};k.prototype.forceRed=function(b){d(!this.red,"Already a number in reduction context");return this._forceRed(b)};k.prototype.redAdd=function(b){d(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};k.prototype.redIAdd=function(b){d(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};k.prototype.redSub=function(b){d(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};k.prototype.redISub=
function(b){d(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};k.prototype.redShl=function(b){d(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};k.prototype.redMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};k.prototype.redIMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};k.prototype.redSqr=function(){d(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};k.prototype.redISqr=function(){d(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};k.prototype.redSqrt=function(){d(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};k.prototype.redInvm=function(){d(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};k.prototype.redNeg=
function(){d(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};k.prototype.redPow=function(b){d(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var b=new k(null);b.words=Array(Math.ceil(this.n/13));return b};u.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};u.prototype.split=function(b,c){b.ishrn(this.n,0,c)};u.prototype.imulK=function(b){return b.imul(this.k)};f(w,u);w.prototype.split=function(b,c){for(var e=Math.min(b.length,9),d=0;d<e;d++)c.words[d]=b.words[d];c.length=e;if(9>=b.length)b.words[0]=0,b.length=1;else{e=b.words[9];c.words[c.length++]=e&4194303;for(d=10;d<b.length;d++){var f=b.words[d];b.words[d-10]=(f&4194303)<<4|e>>>22;e=f}b.words[d-10]=
e>>>22;b.length-=9}};w.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,e=0,d=0;d<b.length;d++){var f=b.words[d];c=64*f;e+=977*f;c+=e/67108864|0;e&=67108863;b.words[d]=e;e=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};f(v,u);f(r,u);f(h,u);h.prototype.imulK=function(b){for(var c=0,e=0;e<b.length;e++){var c=19*b.words[e]+c,d=c&67108863,c=c>>>26;b.words[e]=d}0!==c&&(b.words[b.length++]=c);return b};k._prime=function(b){if(g[b])return g[b];
var c;if("k256"===b)c=new w;else if("p224"===b)c=new v;else if("p192"===b)c=new r;else if("p25519"===b)c=new h;else throw Error("Unknown prime "+b);return g[b]=c};e.prototype._verify1=function(b){d(!b.sign,"red works only with positives");d(b.red,"red works only with red numbers")};e.prototype._verify2=function(b,c){d(!b.sign&&!c.sign,"red works only with positives");d(b.red&&b.red===c.red,"red works only with red numbers")};e.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};e.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};e.prototype.add=function(b,c){this._verify2(b,c);var e=b.add(c);0<=e.cmp(this.m)&&e.isub(this.m);return e._forceRed(this)};e.prototype.iadd=function(b,c){this._verify2(b,c);var e=b.iadd(c);0<=e.cmp(this.m)&&e.isub(this.m);return e};e.prototype.sub=function(b,c){this._verify2(b,c);var e=b.sub(c);0>e.cmpn(0)&&e.iadd(this.m);return e._forceRed(this)};e.prototype.isub=function(b,
c){this._verify2(b,c);var e=b.isub(c);0>e.cmpn(0)&&e.iadd(this.m);return e};e.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};e.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};e.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};e.prototype.isqr=function(b){return this.imul(b,b)};e.prototype.sqr=function(b){return this.mul(b,b)};e.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);d(1===
c%2);if(3===c){var c=this.m.add(new k(1)).ishrn(2),e=this.pow(b,c);return e}for(var f=this.m.subn(1),a=0;0!==f.cmpn(0)&&0===f.andln(1);)a++,f.ishrn(1);d(0!==f.cmpn(0));for(var c=(new k(1)).toRed(this),e=c.redNeg(),h=this.m.subn(1).ishrn(1),p=this.m.bitLength(),p=(new k(2*p*p)).toRed(this);0!==this.pow(p,h).cmp(e);)p.redIAdd(e);h=this.pow(p,f);e=this.pow(b,f.addn(1).ishrn(1));b=this.pow(b,f);for(f=a;0!==b.cmp(c);){p=b;for(a=0;0!==p.cmp(c);a++)p=p.redSqr();d(a<f);h=this.pow(h,(new k(1)).ishln(f-a-1));
e=e.redMul(h);h=h.redSqr();b=b.redMul(h);f=a}return e};e.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};e.prototype.pow=function(b,c){var e=[];if(0===c.cmpn(0))return new k(1);for(var d=c.clone();0!==d.cmpn(0);)e.push(d.andln(1)),d.ishrn(1);for(var f=b,a=0;a<e.length&&0===e[a];a++,f=this.sqr(f));if(++a<e.length)for(d=this.sqr(f);a<e.length;a++,d=this.sqr(d))0!==e[a]&&(f=this.mul(f,d));return f};e.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};e.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};k.mont=function(b){return new c(b)};f(c,e);c.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};c.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};c.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var e=b.imul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);
0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new k(0))._forceRed(this);var e=b.mul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],48:[function(a,g,m){var t=a("./lib/bn-sign");g.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":39}],49:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,d){return t(a[0].mul(d[1]).sub(a[1].mul(d[0])),a[1].mul(d[1]))}},{"./lib/rationalize":44}],50:[function(a,g,m){var t=a("./lib/bn-to-num"),n=a("./lib/ctz");g.exports=function(d){var f=d[0];d=d[1];if(0===f.cmpn(0))return 0;var a=f.divmod(d),f=t(a.div),a=a.mod;if(0===a.cmpn(0))return f;if(f){var l=
n(f)+4;d=t(a.shln(l).divRound(d));0>f&&(d=-d);return f+d*Math.pow(2,-l)}f=d.bitLength()-a.bitLength()+53;d=t(a.shln(f).divRound(d));if(1023>f)return d*Math.pow(2,-f);d*=Math.pow(2,-1023);return d*Math.pow(2,1023-f)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,g,m){function t(d,f,a,l,n){d=["function ",d,"(a,l,h,",l.join(","),"){",n?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];n?0>f.indexOf("c")?d.push(";if(x===y){return m}else if(x<=y){"):d.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
d.push(";if(",f,"){i=m;");a?d.push("l=m+1}else{h=m-1}"):d.push("h=m-1}else{l=m+1}");d.push("}");n?d.push("return -1};"):d.push("return i};");return d.join("")}function n(d,f,a,l){return(new Function([t("A","x"+d+"y",f,["y"],l),t("P","c(x,y)"+d+"0",f,["y","c"],l),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],52:[function(a,g,m){function t(d){var f=32;(d&=-d)&&f--;d&65535&&(f-=16);d&16711935&&(f-=8);d&252645135&&(f-=4);d&858993459&&(f-=2);d&1431655765&&--f;return f}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(d){return(0<d)-(0>d)};m.abs=function(d){var f=d>>31;return(d^f)-f};m.min=function(d,f){return f^(d^f)&-(d<f)};m.max=function(d,f){return d^(d^
f)&-(d<f)};m.isPow2=function(d){return!(d&d-1)&&!!d};m.log2=function(d){var f,a;f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1};m.log10=function(d){return 1E9<=d?9:1E8<=d?8:1E7<=d?7:1E6<=d?6:1E5<=d?5:1E4<=d?4:1E3<=d?3:100<=d?2:10<=d?1:0};m.popCount=function(d){d-=d>>>1&1431655765;d=(d&858993459)+(d>>>2&858993459);return 16843009*(d+(d>>>4)&252645135)>>>24};m.countTrailingZeros=t;m.nextPow2=function(d){d+=0===d;--d;d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=
d>>>8;return(d|d>>>16)+1};m.prevPow2=function(d){d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;d|=d>>>16;return d-(d>>>1)};m.parity=function(d){d^=d>>>16;d^=d>>>8;d=(d^d>>>4)&15;return 27030>>>d&1};var n=Array(256);(function(d){for(var f=0;256>f;++f){for(var a=f,l=f,n=7,a=a>>>1;a;a>>>=1)l<<=1,l|=a&1,--n;d[f]=l<<n&255}})(n);m.reverse=function(d){return n[d&255]<<24|n[d>>>8&255]<<16|n[d>>>16&255]<<8|n[d>>>24&255]};m.interleave2=function(d,f){d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;
f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(d|d<<1)&1431655765|((f|f<<1)&1431655765)<<1};m.deinterleave2=function(d,f){d=d>>>f&1431655765;d=(d|d>>>1)&858993459;d=(d|d>>>2)&252645135;d=(d|d>>>4)&16711935;return((d|d>>>16)&65535)<<16>>16};m.interleave3=function(d,f,a){d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;d=(d|d<<2)&1227133513|((f|f<<2)&1227133513)<<1;a&=1023;
a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return d|((a|a<<2)&1227133513)<<2};m.deinterleave3=function(d,f){d=d>>>f&1227133513;d=(d|d>>>2)&3272356035;d=(d|d>>>4)&251719695;d=(d|d>>>8)&4278190335;return((d|d>>>16)&1023)<<22>>22};m.nextCombination=function(d){var f=d|d-1;return f+1|(~f&-~f)-1>>>t(d)+1}},{}],53:[function(a,g,m){function t(d,f,a,k){for(var h=0,e=0,c=0,p=d.length;c<p;++c){var q=d[c],l;a:{for(l=0;l<f;++l)if(!(q[l]<=q[l+f])){l=!0;break a}l=!1}if(!l){for(l=0;l<2*f;++l)a[h++]=
q[l];k[e++]=c}}return e}function n(d,a,v,r){var h=d.length,e=a.length;if(!(0>=h||0>=e)){var c=d[0].length>>>1;if(!(0>=c)){var p,q=f.mallocDouble(2*c*h),n=f.mallocInt32(h),h=t(d,c,q,n);if(0<h){if(1===c&&r)k.init(h),p=k.sweepComplete(c,v,0,h,q,n,0,h,q,n);else{d=f.mallocDouble(2*c*e);var y=f.mallocInt32(e),e=t(a,c,d,y);0<e&&(k.init(h+e),p=1===c?k.sweepBipartite(c,v,0,h,q,n,0,e,d,y):l(c,v,r,h,q,n,e,d,y),f.free(d),f.free(y))}f.free(q);f.free(n)}return p}}}function d(d,f){y.push([d,f])}g.exports=function(f,
a,k){switch(arguments.length){case 1:return y=[],n(f,f,d,!0),y;case 2:if("function"===typeof a)return n(f,f,a,!0);y=[];n(f,a,d,!1);return y;case 3:return n(f,a,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),k=a("./lib/sweep"),l=a("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,g,m){function t(d){function f(f,a){var k,h="bruteForce"+(f?"Red":"Blue")+(a?"Flip":"")+(d?"Full":"");k=["function ",h,"(",n.join(),
"){","var ","es","=2*","d",";"];var e="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(d?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?k.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",e):k.push(e,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");d?k.push("if(y1<x0||x1<y0)continue;"):a?k.push("if(y0<=x0||x1<y0)continue;"):k.push("if(y0<x0||x1<y0)continue;");k.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
a?k.push("yi,xi"):k.push("xi,yi");k.push(");if(rv!==void 0)return rv;}}}");k=k.join("");l.push(k);u.push("return "+h+"("+n.join()+");")}var a="bruteForce"+(d?"Full":"Partial"),l=[],y=n.slice();d||y.splice(3,0,"fp");var u=["function "+a+"("+y.join()+"){"];u.push("if(re-rs>be-bs){");d?(f(!0,!1),u.push("}else{"),f(!1,!1)):(u.push("if(fp){"),f(!0,!0),u.push("}else{"),f(!0,!1),u.push("}}else{if(fp){"),f(!1,!0),u.push("}else{"),f(!1,!1),u.push("}"));u.push("}}return "+a);a=l.join("")+u.join("");return(new Function(a))()}
var n="d ax vv rs re rb ri bs be bb bi".split(" ");m.partial=t(!1);m.full=t(!0)},{}],55:[function(a,g,m){function t(c,e,d,f,a,h,p,q,k){var l=z*c;b[l]=e;b[l+1]=d;b[l+2]=f;b[l+3]=a;b[l+4]=h;b[l+5]=p;c*=E;x[c]=q;x[c+1]=k}g.exports=function(a,g,m,A,N,H,D,P,J){var K=8*d.log2(A+D+1)*(a+1)|0,R=d.nextPow2(z*K);b.length<R&&(n.free(b),b=n.mallocInt32(R));K=d.nextPow2(E*K);x<K&&(n.free(x),x=n.mallocDouble(K));var K=0,R=2*a,G;t(K++,0,0,A,0,D,m?16:0,-Infinity,Infinity);for(m||t(K++,0,0,D,0,A,1,-Infinity,Infinity);0<
K;){--K;m=K*z;var C=b[m];D=b[m+1];var O=b[m+2],M=b[m+3],V=b[m+4];m=b[m+5];A=K*E;var X=x[A],U=x[A+1],L=m&1,Y=!!(m&16),T=N,W=H,S=P;A=J;L&&(T=P,W=J,S=N,A=H);if(m&2&&(O=e(a,C,D,O,T,W,U),D>=O))continue;if(m&4&&(D=c(a,C,D,O,T,W,X),D>=O))continue;m=O-D;var Q=V-M;if(Y){if(a*m*(m+Q)<v){G=l.scanComplete(a,C,g,D,O,T,W,M,V,S,A);if(void 0!==G)return G;continue}}else if(a*Math.min(m,Q)<u){G=f(a,C,g,L,D,O,T,W,M,V,S,A);if(void 0!==G)return G;continue}else if(a*m*Q<w){G=l.scanBipartite(a,C,g,L,D,O,T,W,M,V,S,A);if(void 0!==
G)return G;continue}m=r(a,C,D,O,T,W,X,U);if(D<m)if(a*(m-D)<u){if(G=k(a,C+1,g,D,m,T,W,M,V,S,A),void 0!==G)return G}else if(C===a-2){if(G=L?l.sweepBipartite(a,g,M,V,S,A,D,m,T,W):l.sweepBipartite(a,g,D,m,T,W,M,V,S,A),void 0!==G)return G}else t(K++,C+1,D,m,M,V,L,-Infinity,Infinity),t(K++,C+1,M,V,D,m,L^1,-Infinity,Infinity);if(m<O)if(D=y(a,C,M,V,S,A),G=S[R*D+C],Q=h(a,C,D,V,S,A,G),Q<V&&t(K++,C,m,O,Q,V,(L|4)+(Y?16:0),G,U),M<D&&t(K++,C,m,O,M,D,(L|2)+(Y?16:0),X,G),D+1===Q){if(Y)a:{M=a;V=g;A=A[D];L=2*M;D*=
L;X=S[D+C];U=m;m*=L;b:for(;U<O;++U,m+=L)if(Y=W[U],Y!==A&&(Q=T[m+C],G=T[m+C+M],!(X<Q||G<X))){for(var Z=C+1;Z<M;++Z){Q=T[m+Z];G=T[m+Z+M];var ca=S[D+Z+M];if(G<S[D+Z]||ca<Q)continue b}Y=V(Y,A);if(void 0!==Y){G=Y;break a}}G=void 0}else a:{M=a;V=g;A=A[D];X=2*M;D*=X;U=S[D+C];Y=m;m*=X;b:for(;Y<O;++Y,m+=X)if(Q=T[m+C],G=T[m+C+M],!(U<Q||G<U||L&&U===Q)){Z=W[Y];for(ca=C+1;ca<M;++ca){Q=T[m+ca];G=T[m+ca+M];var ha=S[D+ca+M];if(G<S[D+ca]||ha<Q)continue b}Q=L?V(A,Z):V(Z,A);if(void 0!==Q){G=Q;break a}}G=void 0}if(void 0!==
G)return G}else if(D<Q)if(Y){if(O=p(a,C,m,O,T,W,G),m<O)if(M=h(a,C,m,O,T,W,G),C===a-2){if(m<M&&(G=l.sweepComplete(a,g,m,M,T,W,D,Q,S,A),void 0!==G)||M<O&&(G=l.sweepBipartite(a,g,M,O,T,W,D,Q,S,A),void 0!==G))return G}else m<M&&t(K++,C+1,m,M,D,Q,16,-Infinity,Infinity),M<O&&(t(K++,C+1,M,O,D,Q,0,-Infinity,Infinity),t(K++,C+1,D,Q,M,O,1,-Infinity,Infinity))}else O=L?q(a,C,m,O,T,W,G):p(a,C,m,O,T,W,G),m<O&&(C===a-2?L?l.sweepBipartite(a,g,D,Q,S,A,m,O,T,W):l.sweepBipartite(a,g,m,O,T,W,D,Q,S,A):(t(K++,C+1,m,O,
D,Q,L,-Infinity,Infinity),t(K++,C+1,D,Q,m,O,L^1,-Infinity,Infinity)))}};var n=a("typedarray-pool"),d=a("bit-twiddle");g=a("./brute");var f=g.partial,k=g.full,l=a("./sweep"),y=a("./median");a=a("./partition");var u=128,w=4194304,v=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=a("lo===p0",["p0"]),e=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),p=a("lo<=p0&&p0<=hi",["p0"]),q=a("lo<p0&&p0<=hi",["p0"]),z=6,E=2,b=n.mallocInt32(1024),x=n.mallocDouble(1024)},{"./brute":54,"./median":56,"./partition":57,"./sweep":59,
"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,g,m){g.exports=function(d,f,a,l,y,u){if(l<=a+1)return a;var w=a,v=l;l=l+a>>>1;for(var r=2*d,h=l,e=y[r*l+f];w<v;){if(v-w<n){for(var h=f,e=y,c=u,p=2*d,q=p*(w+1)+h,z=w+1;z<v;++z,q+=p)for(var g=e[q],b=z,x=p*(z-1);b>w&&e[x+h]>g;--b,x-=p){for(var m=x,I=x+p,B=0;B<p;++B,++m,++I){var A=e[m];e[m]=e[I];e[I]=A}m=c[b];c[b]=c[b-1];c[b-1]=m}break}q=v-w;h=Math.random()*q+w|0;e=y[r*h+f];p=Math.random()*q+w|0;c=y[r*p+f];z=Math.random()*q+w|0;q=y[r*z+f];e<=c?q>=
c?(h=p,e=c):e>=q||(h=z,e=q):c>=q?(h=p,e=c):q>=e||(h=z,e=q);c=r*(v-1);p=r*h;for(q=0;q<r;++q,++c,++p)z=y[c],y[c]=y[p],y[p]=z;c=u[v-1];u[v-1]=u[h];u[h]=c;h=t(d,f,w,v-1,y,u,e);c=r*(v-1);p=r*h;for(q=0;q<r;++q,++c,++p)z=y[c],y[c]=y[p],y[p]=z;c=u[v-1];u[v-1]=u[h];u[h]=c;if(l<h){for(v=h-1;w<v&&y[r*(v-1)+f]===e;)--v;v+=1}else if(h<l)for(w=h+1;w<v&&y[r*w+f]===e;)w+=1;else break}return t(d,f,a,l,y,u,y[r*l+f])};var t=a("./partition")("lo<p0",["p0"]),n=8},{"./partition":57}],57:[function(a,g,m){g.exports=function(a,
d){var f="abcdef".split("").concat(d),k=[];0<=a.indexOf("lo")&&k.push("lo=e[k+n]");0<=a.indexOf("hi")&&k.push("hi=e[k+o]");f.push(t.replace("_",k.join()).replace("$",a));return Function.apply(void 0,f)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,g,m){function t(d,f,a){for(var h=2*(d+1),e=d+1;e<=f;++e){for(var c=a[h++],p=a[h++],q=
e,k=h-2;q-- >d;){var l=a[k-2],b=a[k-1];if(l<c)break;else if(l===c&&b<p)break;a[k]=l;a[k+1]=b;k-=2}a[k]=c;a[k+1]=p}}function n(d,f,a){d*=2;f*=2;var h=a[d],e=a[d+1];a[d]=a[f];a[d+1]=a[f+1];a[f]=h;a[f+1]=e}function d(d,f,a){d*=2;f*=2;a[d]=a[f];a[d+1]=a[f+1]}function f(d,f,a,h,e){d*=2;f*=2;e[d]=e[f];e[f]=a;e[d+1]=e[f+1];e[f+1]=h}function k(d,f,a){d*=2;f*=2;var h=a[d],e=a[f];return h<e?!1:h===e?a[d+1]>a[f+1]:!0}function l(d,f,a,h){d*=2;var e=h[d];return e<f?!0:e===f?h[d+1]<a:!1}function y(a,v,r){var h=
(v-a+1)/6|0,e=a+h,c=v-h,p=a+v>>1,q=p-h,z=p+h,g=e,b=q,x=p,m=z,I=c,h=a+1,B=v-1,A=0;k(g,b,r)&&(A=g,g=b,b=A);k(m,I,r)&&(A=m,m=I,I=A);k(g,x,r)&&(A=g,g=x,x=A);k(b,x,r)&&(A=b,b=x,x=A);k(g,m,r)&&(A=g,g=m,m=A);k(x,m,r)&&(A=x,x=m,m=A);k(b,I,r)&&(A=b,b=I,I=A);k(b,x,r)&&(A=b,b=x,x=A);k(m,I,r)&&(A=m,m=I,I=A);for(var A=r[2*b],b=r[2*b+1],N=r[2*m],m=r[2*m+1],g=2*g,x=2*x,I=2*I,e=2*e,p=2*p,c=2*c,H=0;2>H;++H){var D=r[x+H],P=r[I+H];r[e+H]=r[g+H];r[p+H]=D;r[c+H]=P}d(q,a,r);d(z,v,r);for(q=h;q<=B;++q)if(l(q,A,b,r))q!==
h&&n(q,h,r),++h;else if(!l(q,N,m,r))for(;;)if(l(B,N,m,r)){l(B,A,b,r)?(z=q,c=h,p=B,g=r,z*=2,c*=2,p*=2,e=g[z],x=g[z+1],g[z]=g[c],g[z+1]=g[c+1],g[c]=g[p],g[c+1]=g[p+1],g[p]=e,g[p+1]=x,++h):n(q,B,r);--B;break}else if(--B<q)break;f(a,h-1,A,b,r);f(v,B+1,N,m,r);h-2-a<=u?t(a,h-2,r):y(a,h-2,r);v-(B+2)<=u?t(B+2,v,r):y(B+2,v,r);B-h<=u?t(h,B,r):y(h,B,r)}g.exports=function(d,f){f<=4*u?t(0,f-1,d):y(0,f-1,d)};var u=32},{}],59:[function(a,g,m){function t(e,c,d,f){f=c[f];d=e[d-1];e[f]=d;c[d]=f}g.exports={init:function(e){e=
d.nextPow2(e);l.length<e&&(n.free(l),l=n.mallocInt32(e));y.length<e&&(n.free(y),y=n.mallocInt32(e));u.length<e&&(n.free(u),u=n.mallocInt32(e));w.length<e&&(n.free(w),w=n.mallocInt32(e));v.length<e&&(n.free(v),v=n.mallocInt32(e));r.length<e&&(n.free(r),r=n.mallocInt32(e));e*=8;h.length<e&&(n.free(h),h=n.mallocDouble(e))},sweepBipartite:function(e,c,d,a,r,n,b,v,g,m){var B=0,A=2*e;--e;for(var N=A-1;d<a;++d){var H=n[d],D=A*d;h[B++]=r[D+e];h[B++]=-(H+1);h[B++]=r[D+N];h[B++]=H}for(d=b;d<v;++d)H=m[d]+k,
a=A*d,h[B++]=g[a+e],h[B++]=-H,h[B++]=g[a+N],h[B++]=H;v=B>>>1;f(h,v);for(d=m=g=0;d<v;++d)if(B=h[2*d+1]|0,B>=k)B=B-k|0,t(u,w,m--,B);else if(0<=B)t(l,y,g--,B);else{if(B<=-k){B=-B-k|0;for(A=0;A<g;++A)if(a=c(l[A],B),void 0!==a)return a;A=w;a=m++;u[a]=B}else{B=-B-1|0;for(A=0;A<m;++A)if(a=c(B,u[A]),void 0!==a)return a;A=y;a=g++;l[a]=B}A[B]=a}},sweepComplete:function(e,c,d,a,k,n,b,g,m,I){var B=0,A=2*e;--e;for(var N=A-1;d<a;++d){var H=n[d]+1<<1,D=A*d;h[B++]=k[D+e];h[B++]=-H;h[B++]=k[D+N];h[B++]=H}for(d=b;d<
g;++d)H=I[d]+1<<1,a=A*d,h[B++]=m[a+e],h[B++]=-H|1,h[B++]=m[a+N],h[B++]=H|1;g=B>>>1;f(h,g);for(d=B=I=m=0;d<g;++d)if(A=h[2*d+1]|0,a=A&1,d<g-1&&A>>1===h[2*d+3]>>1&&(a=2,d+=1),0>A){A=-(A>>1)-1;for(k=0;k<B;++k)if(n=c(v[k],A),void 0!==n)return n;if(0!==a)for(k=0;k<m;++k)if(n=c(l[k],A),void 0!==n)return n;if(1!==a)for(k=0;k<I;++k)if(n=c(u[k],A),void 0!==n)return n;0===a?(a=y,k=m++,l[k]=A,a[A]=k):1===a?(a=w,k=I++,u[k]=A,a[A]=k):2===a&&(a=r,k=B++,v[k]=A,a[A]=k)}else A=(A>>1)-1,0===a?t(l,y,m--,A):1===a?t(u,
w,I--,A):2===a&&t(v,r,B--,A)},scanBipartite:function(e,c,d,a,r,n,b,v,u,g,w,m){var N=0,H=2*e,D=c+e,P=1,J=1;for(a?J=k:P=k;r<n;++r){var K=r+P,R=H*r;h[N++]=b[R+c];h[N++]=-K;h[N++]=b[R+D];h[N++]=K}for(r=u;r<g;++r)K=r+J,n=H*r,h[N++]=w[n+c],h[N++]=-K;g=N>>>1;f(h,g);for(r=N=0;r<g;++r)if(K=h[2*r+1]|0,0>K)if(K=-K,J=!1,K>=k?(J=!a,K-=k):(J=!!a,--K),J)J=y,n=N++,l[n]=K,J[K]=n;else a:for(J=m[K],K*=H,n=w[K+c+1],u=w[K+c+1+e],D=0;D<N;++D){var R=l[D],G=H*R;if(!(u<b[G+c+1]||b[G+c+1+e]<n)){for(var C=c+2;C<e;++C)if(w[K+
C+e]<b[G+C]||b[G+C+e]<w[K+C])continue a;R=v[R];R=a?d(J,R):d(R,J);if(void 0!==R)return R}}else t(l,y,N--,K-P)},scanComplete:function(e,c,d,a,r,n,b,v,u,y,g){for(var w=0,t=2*e,m=c+e;a<r;++a){var D=a+k,P=t*a;h[w++]=n[P+c];h[w++]=-D;h[w++]=n[P+m];h[w++]=D}for(a=v;a<u;++a)D=a+1,r=t*a,h[w++]=y[r+c],h[w++]=-D;u=w>>>1;f(h,u);for(a=w=0;a<u;++a)if(r=h[2*a+1]|0,0>r)if(D=-r,D>=k)l[w++]=D-k;else a:for(--D,r=g[D],D*=t,m=y[D+c+1],P=y[D+c+1+e],v=0;v<w;++v){var J=l[v],K=b[J];if(K===r)break;J*=t;if(!(P<n[J+c+1]||n[J+
c+1+e]<m)){for(var R=c+2;R<e;++R)if(y[D+R+e]<n[J+R]||n[J+R+e]<y[D+R])continue a;K=d(K,r);if(void 0!==K)return K}}else{D=r-k;for(v=w-1;0<=v;--v)if(l[v]===D){for(R=v+1;R<w;++R)l[R-1]=l[R];break}--w}}};var n=a("typedarray-pool"),d=a("bit-twiddle"),f=a("./sort"),k=268435456,l=n.mallocInt32(1024),y=n.mallocInt32(1024),u=n.mallocInt32(1024),w=n.mallocInt32(1024),v=n.mallocInt32(1024),r=n.mallocInt32(1024),h=n.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],60:[function(a,g,m){(function(g){function n(){try{var b=
new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function d(b,c){if((f.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");f.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=f.prototype):(null===b&&(b=new f(c)),b.length=c);return b}function f(b,c,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(b,
c,e);if("number"===typeof b){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return y(this,b)}return k(this,b,c,e)}function k(b,c,e,a){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>e||c.byteLength<e)throw new RangeError("'offset' is out of bounds");if(c.byteLength<e+(a||0))throw new RangeError("'length' is out of bounds");c=
void 0===a?new Uint8Array(c,e):new Uint8Array(c,e,a);f.TYPED_ARRAY_SUPPORT?(b=c,b.__proto__=f.prototype):b=u(b,c);return b}if("string"===typeof c){a=b;if("string"!==typeof e||""===e)e="utf8";if(!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');b=r(c,e)|0;a=d(a,b);a.write(c,e);return a}return w(b,c)}function l(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');}function y(b,c){l(c);b=d(b,0>c?0:v(c)|0);if(!f.TYPED_ARRAY_SUPPORT)for(var e=
0;e<c;++e)b[e]=0;return b}function u(b,c){var e=v(c.length)|0;b=d(b,e);for(var a=0;a<e;a+=1)b[a]=c[a]&255;return b}function w(b,c){if(f.isBuffer(c)){var e=v(c.length)|0;b=d(b,e);if(0===b.length)return b;c.copy(b,0,0,e);return b}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(e="number"!==typeof c.length)||(e=c.length,e=e!==e),e?d(b,0):u(b,c);if("Buffer"===c.type&&J(c.data))return u(b,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function v(b){if(b>=(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function r(b,c){if(f.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var e=b.length;if(0===e)return 0;for(var d=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return e;
case "utf8":case "utf-8":case void 0:return A(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return D.toByteArray(B(b)).length;default:if(d)return A(b).length;c=(""+c).toLowerCase();d=!0}}function h(b,c,e){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;c>>>=0;if(e<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=e;e=this.length;if(!b||0>b)b=0;
if(!c||0>c||c>e)c=e;d="";for(e=b;e<c;++e)b=d,d=this[e],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return p(this,c,e);case "ascii":b="";for(e=Math.min(this.length,e);c<e;++c)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(e=Math.min(this.length,e);c<e;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&e===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(c,e)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,e);e="";for(b=0;b<c.length;b+=2)e+=String.fromCharCode(c[b]+256*c[b+1]);return e;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function e(b,c,e){var d=b[c];b[c]=b[e];b[e]=d}function c(b,c,e,d){var a=1,f=b.length,h=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>c.length)return-1;a=2;f/=2;h/=2;e/=2}for(d=-1;e<f;++e){var p=1===a?b[e]:b.readUInt16BE(e*a),k;k=-1===d?0:e-d;
k=1===a?c[k]:c.readUInt16BE(k*a);if(p===k){if(-1===d&&(d=e),e-d+1===h)return d*a}else-1!==d&&(e-=e-d),d=-1}return-1}function p(b,c,e){e=Math.min(b.length,e);for(var d=[];c<e;){var a=b[c],f=null,h=239<a?4:223<a?3:191<a?2:1;if(c+h<=e){var p,k,q;switch(h){case 1:128>a&&(f=a);break;case 2:p=b[c+1];128===(p&192)&&(a=(a&31)<<6|p&63,127<a&&(f=a));break;case 3:p=b[c+1];k=b[c+2];128===(p&192)&&128===(k&192)&&(a=(a&15)<<12|(p&63)<<6|k&63,2047<a&&(55296>a||57343<a)&&(f=a));break;case 4:p=b[c+1],k=b[c+2],q=b[c+
3],128===(p&192)&&128===(k&192)&&128===(q&192)&&(a=(a&15)<<18|(p&63)<<12|(k&63)<<6|q&63,65535<a&&1114112>a&&(f=a))}}null===f?(f=65533,h=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);c+=h}b=d.length;if(b<=K)d=String.fromCharCode.apply(String,d);else{e="";for(c=0;c<b;)e+=String.fromCharCode.apply(String,d.slice(c,c+=K));d=e}return d}function q(b,c,e){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>e)throw new RangeError("Trying to access beyond buffer length");
}function z(b,c,e,d,a,h){if(!f.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>a||c<h)throw new RangeError('"value" argument is out of bounds');if(e+d>b.length)throw new RangeError("Index out of range");}function E(b,c,e,d){0>c&&(c=65535+c+1);for(var a=0,f=Math.min(b.length-e,2);a<f;++a)b[e+a]=(c&255<<8*(d?a:1-a))>>>8*(d?a:1-a)}function b(b,c,e,d){0>c&&(c=4294967295+c+1);for(var a=0,f=Math.min(b.length-e,4);a<f;++a)b[e+a]=c>>>8*(d?a:3-a)&255}function x(b,c,e,d,
a,f){if(e+d>b.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function F(b,c,e,d,a){a||x(b,c,e,4,3.4028234663852886E38,-3.4028234663852886E38);P.write(b,c,e,d,23,4);return e+4}function I(b,c,e,d,a){a||x(b,c,e,8,1.7976931348623157E308,-1.7976931348623157E308);P.write(b,c,e,d,52,8);return e+8}function B(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(R,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function A(b,c){c=c||
Infinity;for(var e,d=b.length,a=null,f=[],h=0;h<d;++h){e=b.charCodeAt(h);if(55295<e&&57344>e){if(!a){if(56319<e){-1<(c-=3)&&f.push(239,191,189);continue}else if(h+1===d){-1<(c-=3)&&f.push(239,191,189);continue}a=e;continue}if(56320>e){-1<(c-=3)&&f.push(239,191,189);a=e;continue}e=(a-55296<<10|e-56320)+65536}else a&&-1<(c-=3)&&f.push(239,191,189);a=null;if(128>e){if(0>--c)break;f.push(e)}else if(2048>e){if(0>(c-=2))break;f.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(c-=3))break;f.push(e>>12|224,
e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(c-=4))break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return f}function N(b){for(var c=[],e=0;e<b.length;++e)c.push(b.charCodeAt(e)&255);return c}function H(b,c,e,d){for(var a=0;a<d&&!(a+e>=c.length||a>=b.length);++a)c[a+e]=b[a];return a}var D=a("base64-js"),P=a("ieee754"),J=a("isarray");m.Buffer=f;m.SlowBuffer=function(b){+b!=b&&(b=0);return f.alloc(+b)};m.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:n();m.kMaxLength=f.TYPED_ARRAY_SUPPORT?2147483647:1073741823;f.poolSize=8192;f._augment=function(b){b.__proto__=f.prototype;return b};f.from=function(b,c,e){return k(null,b,c,e)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&($jscomp.initSymbol(),Object.defineProperty(f,Symbol.species,
{value:null,configurable:!0})));f.alloc=function(b,c,e){l(b);b=0>=b?d(null,b):void 0!==c?"string"===typeof e?d(null,b).fill(c,e):d(null,b).fill(c):d(null,b);return b};f.allocUnsafe=function(b){return y(null,b)};f.allocUnsafeSlow=function(b){return y(null,b)};f.isBuffer=function(b){return!(null==b||!b._isBuffer)};f.compare=function(b,c){if(!f.isBuffer(b)||!f.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var e=b.length,d=c.length,a=0,h=Math.min(e,d);a<h;++a)if(b[a]!==
c[a]){e=b[a];d=c[a];break}return e<d?-1:d<e?1:0};f.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(b,c){if(!J(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return f.alloc(0);var e;if(void 0===c)for(e=c=0;e<b.length;++e)c+=b[e].length;var d=f.allocUnsafe(c),a=0;for(e=
0;e<b.length;++e){var h=b[e];if(!f.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(d,a);a+=h.length}return d};f.byteLength=r;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)e(this,c,c+1);return this};f.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=
4)e(this,c,c+3),e(this,c+1,c+2);return this};f.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?p(this,0,b):h.apply(this,arguments)};f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===f.compare(this,b)};f.prototype.inspect=function(){var b="",c=m.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};f.prototype.compare=
function(b,c,e,d,a){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===e&&(e=b?b.length:0);void 0===d&&(d=0);void 0===a&&(a=this.length);if(0>c||e>b.length||0>d||a>this.length)throw new RangeError("out of range index");if(d>=a&&c>=e)return 0;if(d>=a)return-1;if(c>=e)return 1;c>>>=0;e>>>=0;d>>>=0;a>>>=0;if(this===b)return 0;var h=a-d,p=e-c,k=Math.min(h,p);d=this.slice(d,a);b=b.slice(c,e);for(c=0;c<k;++c)if(d[c]!==b[c]){h=d[c];p=b[c];break}return h<p?-1:p<
h?1:0};f.prototype.indexOf=function(b,e,d){"string"===typeof e?(d=e,e=0):2147483647<e?e=2147483647:-2147483648>e&&(e=-2147483648);e>>=0;if(0===this.length||e>=this.length)return-1;0>e&&(e=Math.max(this.length+e,0));"string"===typeof b&&(b=f.from(b,d));if(f.isBuffer(b))return 0===b.length?-1:c(this,b,e,d);if("number"===typeof b)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,e):c(this,[b],e,d);throw new TypeError("val must be string, number or Buffer");
};f.prototype.includes=function(b,c,e){return-1!==this.indexOf(b,c,e)};f.prototype.write=function(b,c,e,d){if(void 0===c)d="utf8",e=this.length,c=0;else if(void 0===e&&"string"===typeof c)d=c,e=this.length,c=0;else if(isFinite(c))c|=0,isFinite(e)?(e|=0,void 0===d&&(d="utf8")):(d=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-c;if(void 0===e||e>a)e=a;if(0<b.length&&(0>e||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(a=!1;;)switch(d){case "hex":a:{c=Number(c)||0;d=this.length-c;e?(e=Number(e),e>d&&(e=d)):e=d;d=b.length;if(0!==d%2)throw Error("Invalid hex string");e>d/2&&(e=d/2);for(d=0;d<e;++d){a=parseInt(b.substr(2*d,2),16);if(isNaN(a)){b=d;break a}this[c+d]=a}b=d}return b;case "utf8":case "utf-8":return H(A(b,this.length-c),this,c,e);case "ascii":return H(N(b),this,c,e);case "binary":return H(N(b),this,c,e);case "base64":return H(D.toByteArray(B(b)),this,c,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.length-c;for(var f=void 0,f=a=void 0,h=[],p=0;p<b.length&&!(0>(d-=2));++p)f=b.charCodeAt(p),a=f>>8,f%=256,h.push(f),h.push(a);return H(h,this,c,e);default:if(a)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();a=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;f.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=
b);if(f.TYPED_ARRAY_SUPPORT)e=this.subarray(b,c),e.__proto__=f.prototype;else for(var d=c-b,e=new f(d,void 0),a=0;a<d;++a)e[a]=this[a+b];return e};f.prototype.readUIntLE=function(b,c,e){b|=0;c|=0;e||q(b,c,this.length);e=this[b];for(var d=1,a=0;++a<c&&(d*=256);)e+=this[b+a]*d;return e};f.prototype.readUIntBE=function(b,c,e){b|=0;c|=0;e||q(b,c,this.length);e=this[b+--c];for(var d=1;0<c&&(d*=256);)e+=this[b+--c]*d;return e};f.prototype.readUInt8=function(b,c){c||q(b,1,this.length);return this[b]};f.prototype.readUInt16LE=
function(b,c){c||q(b,2,this.length);return this[b]|this[b+1]<<8};f.prototype.readUInt16BE=function(b,c){c||q(b,2,this.length);return this[b]<<8|this[b+1]};f.prototype.readUInt32LE=function(b,c){c||q(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};f.prototype.readUInt32BE=function(b,c){c||q(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};f.prototype.readIntLE=function(b,c,e){b|=0;c|=0;e||q(b,c,this.length);e=this[b];for(var d=1,a=0;++a<
c&&(d*=256);)e+=this[b+a]*d;e>=128*d&&(e-=Math.pow(2,8*c));return e};f.prototype.readIntBE=function(b,c,e){b|=0;c|=0;e||q(b,c,this.length);e=c;for(var d=1,a=this[b+--e];0<e&&(d*=256);)a+=this[b+--e]*d;a>=128*d&&(a-=Math.pow(2,8*c));return a};f.prototype.readInt8=function(b,c){c||q(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};f.prototype.readInt16LE=function(b,c){c||q(b,2,this.length);var e=this[b]|this[b+1]<<8;return e&32768?e|4294901760:e};f.prototype.readInt16BE=function(b,c){c||
q(b,2,this.length);var e=this[b+1]|this[b]<<8;return e&32768?e|4294901760:e};f.prototype.readInt32LE=function(b,c){c||q(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};f.prototype.readInt32BE=function(b,c){c||q(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};f.prototype.readFloatLE=function(b,c){c||q(b,4,this.length);return P.read(this,b,!0,23,4)};f.prototype.readFloatBE=function(b,c){c||q(b,4,this.length);return P.read(this,b,!1,23,4)};f.prototype.readDoubleLE=
function(b,c){c||q(b,8,this.length);return P.read(this,b,!0,52,8)};f.prototype.readDoubleBE=function(b,c){c||q(b,8,this.length);return P.read(this,b,!1,52,8)};f.prototype.writeUIntLE=function(b,c,e,d){b=+b;c|=0;e|=0;d||z(this,b,c,e,Math.pow(2,8*e)-1,0);d=1;var a=0;for(this[c]=b&255;++a<e&&(d*=256);)this[c+a]=b/d&255;return c+e};f.prototype.writeUIntBE=function(b,c,e,d){b=+b;c|=0;e|=0;d||z(this,b,c,e,Math.pow(2,8*e)-1,0);d=e-1;var a=1;for(this[c+d]=b&255;0<=--d&&(a*=256);)this[c+d]=b/a&255;return c+
e};f.prototype.writeUInt8=function(b,c,e){b=+b;c|=0;e||z(this,b,c,1,255,0);f.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};f.prototype.writeUInt16LE=function(b,c,e){b=+b;c|=0;e||z(this,b,c,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):E(this,b,c,!0);return c+2};f.prototype.writeUInt16BE=function(b,c,e){b=+b;c|=0;e||z(this,b,c,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):E(this,b,c,!1);return c+2};f.prototype.writeUInt32LE=function(c,e,d){c=
+c;e|=0;d||z(this,c,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e+3]=c>>>24,this[e+2]=c>>>16,this[e+1]=c>>>8,this[e]=c&255):b(this,c,e,!0);return e+4};f.prototype.writeUInt32BE=function(c,e,d){c=+c;e|=0;d||z(this,c,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e]=c>>>24,this[e+1]=c>>>16,this[e+2]=c>>>8,this[e+3]=c&255):b(this,c,e,!1);return e+4};f.prototype.writeIntLE=function(b,c,e,d){b=+b;c|=0;d||(d=Math.pow(2,8*e-1),z(this,b,c,e,d-1,-d));d=0;var a=1,f=0;for(this[c]=b&255;++d<e&&(a*=256);)0>b&&
0===f&&0!==this[c+d-1]&&(f=1),this[c+d]=(b/a>>0)-f&255;return c+e};f.prototype.writeIntBE=function(b,c,e,d){b=+b;c|=0;d||(d=Math.pow(2,8*e-1),z(this,b,c,e,d-1,-d));d=e-1;var a=1,f=0;for(this[c+d]=b&255;0<=--d&&(a*=256);)0>b&&0===f&&0!==this[c+d+1]&&(f=1),this[c+d]=(b/a>>0)-f&255;return c+e};f.prototype.writeInt8=function(b,c,e){b=+b;c|=0;e||z(this,b,c,1,127,-128);f.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};f.prototype.writeInt16LE=function(b,c,e){b=+b;c|=0;
e||z(this,b,c,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):E(this,b,c,!0);return c+2};f.prototype.writeInt16BE=function(b,c,e){b=+b;c|=0;e||z(this,b,c,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):E(this,b,c,!1);return c+2};f.prototype.writeInt32LE=function(c,e,d){c=+c;e|=0;d||z(this,c,e,4,2147483647,-2147483648);f.TYPED_ARRAY_SUPPORT?(this[e]=c&255,this[e+1]=c>>>8,this[e+2]=c>>>16,this[e+3]=c>>>24):b(this,c,e,!0);return e+4};f.prototype.writeInt32BE=
function(c,e,d){c=+c;e|=0;d||z(this,c,e,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);f.TYPED_ARRAY_SUPPORT?(this[e]=c>>>24,this[e+1]=c>>>16,this[e+2]=c>>>8,this[e+3]=c&255):b(this,c,e,!1);return e+4};f.prototype.writeFloatLE=function(b,c,e){return F(this,b,c,!0,e)};f.prototype.writeFloatBE=function(b,c,e){return F(this,b,c,!1,e)};f.prototype.writeDoubleLE=function(b,c,e){return I(this,b,c,!0,e)};f.prototype.writeDoubleBE=function(b,c,e){return I(this,b,c,!1,e)};f.prototype.copy=function(b,c,
e,d){e||(e=0);d||0===d||(d=this.length);c>=b.length&&(c=b.length);c||(c=0);0<d&&d<e&&(d=e);if(d===e||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-c<d-e&&(d=b.length-c+e);var a=d-e;if(this===b&&e<c&&c<d)for(d=a-1;0<=d;--d)b[d+c]=this[d+e];else if(1E3>a||!f.TYPED_ARRAY_SUPPORT)for(d=
0;d<a;++d)b[d+c]=this[d+e];else Uint8Array.prototype.set.call(b,this.subarray(e,e+a),c);return a};f.prototype.fill=function(b,c,e,d){if("string"===typeof b){"string"===typeof c?(d=c,c=0,e=this.length):"string"===typeof e&&(d=e,e=this.length);if(1===b.length){var a=b.charCodeAt(0);256>a&&(b=a)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof b&&(b&=255);if(0>
c||this.length<c||this.length<e)throw new RangeError("Out of range index");if(e<=c)return this;c>>>=0;e=void 0===e?this.length:e>>>0;b||(b=0);if("number"===typeof b)for(d=c;d<e;++d)this[d]=b;else for(b=f.isBuffer(b)?b:A((new f(b,d)).toString()),a=b.length,d=0;d<e-c;++d)this[d+c]=b[d%a];return this};var R=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:81,isarray:87}],61:[function(a,g,
m){function t(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function n(d,a){return d[0]-a[0]||d[1]-a[1]}function d(d,a,f){return a in d?d[a]:f}var f=a("./lib/monotone"),k=a("./lib/triangulation"),l=a("./lib/delaunay"),y=a("./lib/filter");g.exports=function(a,g,v){Array.isArray(g)?(v=v||{},g=g||[]):(v=g||{},g=[]);var r=!!d(v,"delaunay",!0),h=!!d(v,"interior",!0),e=!!d(v,"exterior",!0);v=!!d(v,"infinity",!1);if(!h&&!e||0===a.length)return[];var c=f(a,g);if(r||h!==e||v){g=k(a.length,g.map(t).sort(n));
for(var p=0;p<c.length;++p){var q=c[p];g.addTriangle(q[0],q[1],q[2])}r&&l(a,g);return e?h?v?y(g,0,v):g.cells():y(g,1,v):y(g,-1)}return c}},{"./lib/delaunay":62,"./lib/filter":63,"./lib/monotone":64,"./lib/triangulation":65}],62:[function(a,g,m){function t(d,a,k,l,g,u){var t=a.opposite(l,g);if(!(0>t)){if(g<l){var v=l;l=g;g=v;v=u;u=t;t=v}a.isConstraint(l,g)||0>n(d[l],d[g],d[u],d[t])&&k.push(l,g)}}var n=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(d,a){for(var k=[],l=d.length,
g=a.stars,u=0;u<l;++u)for(var w=g[u],v=1;v<w.length;v+=2){var r=w[v];if(!(r<u||a.isConstraint(u,r))){for(var h=w[v-1],e=-1,c=1;c<w.length;c+=2)if(w[c-1]===r){e=w[c];break}0>e||0>n(d[u],d[r],d[h],d[e])&&k.push(u,r)}}for(;0<k.length;){r=k.pop();u=k.pop();e=h=-1;w=g[u];for(l=1;l<w.length;l+=2)v=w[l-1],c=w[l],v===r?e=c:c===r&&(h=v);0>h||0>e||0<=n(d[u],d[r],d[h],d[e])||(a.flip(u,r),t(d,a,k,h,u,e),t(d,a,k,u,e,h),t(d,a,k,e,r,h),t(d,a,k,r,h,e))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],63:[function(a,
g,m){function t(d,a,l,n,u,g,v){this.cells=d;this.neighbor=a;this.flags=n;this.constraint=l;this.active=u;this.next=g;this.boundary=v}function n(d,a){return d[0]-a[0]||d[1]-a[1]||d[2]-a[2]}var d=a("binary-search-bounds");g.exports=function(d,a,l){for(var g=d.cells(),u=g.length,w=0;w<u;++w){var v=g[w],r=v[0],h=v[1],e=v[2];h<e?h<r&&(v[0]=h,v[1]=e,v[2]=r):e<r&&(v[0]=e,v[1]=r,v[2]=h)}g.sort(n);for(var c=Array(u),w=0;w<c.length;++w)c[w]=0;var p=[],q=[],z=Array(3*u),m=Array(3*u),b=null;l&&(b=[]);e=new t(g,
z,m,c,p,q,b);for(w=0;w<u;++w)for(var v=g[w],x=0;3>x;++x){var r=v[x],h=v[(x+1)%3],F=z[3*w+x]=e.locate(h,r,d.opposite(h,r)),I=m[3*w+x]=d.isConstraint(r,h);0>F&&(I?q.push(w):(p.push(w),c[w]=1),l&&b.push([h,r,-1]))}if(0===a)return l?e.cells.concat(e.boundary):e.cells;u=1;w=e.active;v=e.next;d=e.flags;g=e.cells;r=e.constraint;for(h=e.neighbor;0<w.length||0<v.length;){for(;0<w.length;)if(c=w.pop(),d[c]!==-u)for(d[c]=u,p=0;3>p;++p)q=h[3*c+p],0<=q&&0===d[q]&&(r[3*c+p]?v.push(q):(w.push(q),d[q]=u));c=v;v=
w;w=c;v.length=0;u=-u}for(w=u=0;w<g.length;++w)d[w]===a&&(g[u++]=g[w]);g.length=u;return l?g.concat(e.boundary):g};t.prototype.locate=function(){var a=[0,0,0];return function(k,l,g){var u=k,t=l,v=g;l<g?l<k&&(u=l,t=g,v=k):g<k&&(u=g,t=k,v=l);if(0>u)return-1;a[0]=u;a[1]=t;a[2]=v;return d.eq(this.cells,a,n)}}()},{"binary-search-bounds":51}],64:[function(a,g,m){function t(d,a,f,k,h){this.a=d;this.b=a;this.idx=f;this.lowerIds=k;this.upperIds=h}function n(d,a,f,k){this.a=d;this.b=a;this.type=f;this.idx=
k}function d(d,a){var f=d.a[0]-a.a[0]||d.a[1]-a.a[1]||d.type-a.type;return f||0!==d.type&&(f=y(d.a,d.b,a.b))?f:d.idx-a.idx}function f(d,a){return y(d.a,d.b,a)}function k(d,a){var f;return(f=d.a[0]<a.a[0]?y(d.a,d.b,a.a):y(a.b,a.a,d.a))?f:(f=a.b[0]<d.b[0]?y(d.a,d.b,a.b):y(a.b,a.a,d.b))||d.idx-a.idx}var l=a("binary-search-bounds"),y=a("robust-orientation")[3];g.exports=function(a,g){for(var v=a.length,r=g.length,h=[],e=0;e<v;++e)h.push(new n(a[e],null,0,e));for(e=0;e<r;++e){var c=g[e],v=a[c[0]],c=a[c[1]];
v[0]<c[0]?h.push(new n(v,c,2,e),new n(c,v,1,e)):v[0]>c[0]&&h.push(new n(c,v,2,e),new n(v,c,1,e))}h.sort(d);e=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);r=[new t([e,1],[e,0],-1,[],[],[],[])];v=[];e=0;for(c=h.length;e<c;++e){var p=h[e],q=p.type;if(0===q)for(var q=v,z=r,m=a,b=p.a,p=p.idx,x=l.lt(z,b,f),F=l.gt(z,b,f);x<F;++x){for(var I=z[x],B=I.lowerIds,A=B.length;1<A&&0<y(m[B[A-2]],m[B[A-1]],b);)q.push([B[A-1],B[A-2],p]),--A;B.length=A;B.push(p);I=I.upperIds;for(A=I.length;1<A&&0>y(m[I[A-2]],m[I[A-
1]],b);)q.push([I[A-2],I[A-1],p]),--A;I.length=A;I.push(p)}else 2===q?(q=r,z=p,m=l.le(q,z,k),b=q[m],p=b.upperIds,F=p[p.length-1],b.upperIds=[F],q.splice(m+1,0,new t(z.a,z.b,z.idx,[F],p))):(q=r,z=p,m=z.a,z.a=z.b,z.b=m,z=l.eq(q,z,k),q[z-1].upperIds=q[z].upperIds,q.splice(z,1))}return v}},{"binary-search-bounds":51,"robust-orientation":103}],65:[function(a,g,m){function t(d,a){this.stars=d;this.edges=a}function n(d,a,l){for(var n=1,g=d.length;n<g;n+=2)if(d[n-1]===a&&d[n]===l){d[n-1]=d[g-2];d[n]=d[g-
1];d.length=g-2;break}}var d=a("binary-search-bounds");g.exports=function(d,a){for(var l=Array(d),n=0;n<d;++n)l[n]=[];return new t(l,a)};a=t.prototype;a.isConstraint=function(){function a(d,f){return d[0]-f[0]||d[1]-f[1]}var k=[0,0];return function(l,n){k[0]=Math.min(l,n);k[1]=Math.max(l,n);return 0<=d.eq(this.edges,k,a)}}();a.removeTriangle=function(d,a,l){var g=this.stars;n(g[d],a,l);n(g[a],l,d);n(g[l],d,a)};a.addTriangle=function(d,a,l){var n=this.stars;n[d].push(a,l);n[a].push(l,d);n[l].push(d,
a)};a.opposite=function(d,a){for(var l=this.stars[a],n=1,g=l.length;n<g;n+=2)if(l[n]===d)return l[n-1];return-1};a.flip=function(d,a){var l=this.opposite(d,a),n=this.opposite(a,d);this.removeTriangle(d,a,l);this.removeTriangle(a,d,n);this.addTriangle(d,n,l);this.addTriangle(a,l,n)};a.edges=function(){for(var d=this.stars,a=[],l=0,n=d.length;l<n;++l)for(var g=d[l],t=0,v=g.length;t<v;t+=2)a.push([g[t],g[t+1]]);return a};a.cells=function(){for(var d=this.stars,a=[],l=0,n=d.length;l<n;++l)for(var g=d[l],
t=0,v=g.length;t<v;t+=2){var r=g[t],h=g[t+1];l<Math.min(r,h)&&a.push([l,r,h])}return a}},{"binary-search-bounds":51}],66:[function(a,g,m){function t(d){var b=c(d);d=e(h(b),d);return 0>d?[b,q(b,Infinity)]:0<d?[q(b,-Infinity),b]:[b,b]}function n(c,b,e){var d=[];v(e,function(e,a){var f=b[e],h=b[a];f[0]!==h[0]&&f[0]!==h[1]&&f[1]!==h[0]&&f[1]!==h[1]&&r(c[f[0]],c[f[1]],c[h[0]],c[h[1]])&&d.push([e,a])});return d}function d(c,b,e,d){var a=[];v(e,d,function(e,d){var f=b[e];if(f[0]!==d&&f[1]!==d){var h=c[d];
r(c[f[0]],c[f[1]],h,h)&&a.push([e,d])}});return a}function f(c,b,d,a,f){function k(b){if(b>=c.length)return q[b-c.length];b=c[b];return[h(b[0]),h(b[1])]}for(var q=[],l=0;l<d.length;++l){var n=d[l],r=n[0],n=n[1],g=b[r],v=b[n];if(g=z(p(c[g[0]]),p(c[g[1]]),p(c[v[0]]),p(c[v[1]])))v=q.length+c.length,q.push(g),a.push([r,v],[n,v])}a.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var d=k(b[1]),a=k(c[1]);return e(d[0],a[0])||e(d[1],a[1])});for(l=a.length-1;0<=l;--l){n=a[l];r=n[0];g=b[r];v=g[0];d=g[1];
var u=c[v],t=c[d];0>(u[0]-t[0]||u[1]-t[1])&&(u=v,v=d,d=u);g[0]=v;var v=g[1]=n[1],y;for(f&&(y=g[2]);0<l&&a[l-1][0]===r;)n=a[--l],n=n[1],f?b.push([v,n,y]):b.push([v,n]),v=n;f?b.push([v,d,y]):b.push([v,d])}return q}function k(e,b,d){for(var a=e.length+b.length,f=new w(a),h=0;h<b.length;++h){var p=b[h],k=t(p[0]),q=t(p[1]);d.push([k[0],q[0],k[1],q[1]]);e.push([c(p[0]),c(p[1])])}v(d,function(b,c){f.link(b,c)});b=0;d=!0;p=Array(a);for(h=0;h<a;++h)f.find(h)===h?(p[h]=b,e[b++]=e[h]):(d=!1,p[h]=-1);e.length=
b;if(d)return null;for(h=0;h<a;++h)0>p[h]&&(p[h]=p[f.find(h)]);return p}function l(c,b){return c[0]-b[0]||c[1]-b[1]}function y(c,b){var e=c[0]-b[0]||c[1]-b[1];return e?e:c[2]<b[2]?-1:c[2]>b[2]?1:0}function u(c,b,e){for(var a=Array(b.length),h=0;h<b.length;++h){var p=b[h],q=c[p[0]],p=c[p[1]];a[h]=[Math.min(q[0],p[0]),Math.min(q[1],p[1]),Math.max(q[0],p[0]),Math.max(q[1],p[1])]}h=n(c,b,a);q=Array(c.length);for(p=0;p<c.length;++p){var r=c[p];q[p]=[r[0],r[1],r[0],r[1]]}a=d(c,b,a,q);p=f(c,b,h,a,e);c=k(c,
p,q);if(0!==b.length){if(c)for(q=0;q<b.length;++q){var p=b[q],r=c[p[0]],v=c[p[1]];p[0]=Math.min(r,v);p[1]=Math.max(r,v)}else for(q=0;q<b.length;++q)p=b[q],r=p[0],v=p[1],p[0]=Math.min(r,v),p[1]=Math.max(r,v);e?b.sort(y):b.sort(l);for(q=p=1;q<b.length;++q)if(r=b[q-1],v=b[q],v[0]!==r[0]||v[1]!==r[1]||e&&v[2]!==r[2])b[p++]=v;b.length=p}return c?!0:0<h.length||0<a.length}g.exports=function(c,b,e){var d=!1,a;if(e){a=b;for(var f=Array(b.length),h=0;h<b.length;++h){var p=b[h];f[h]=[p[0],p[1],e[h]]}b=f}for(;u(c,
b,!!e);)d=!0;if(e&&d)for(a.length=0,h=e.length=0;h<b.length;++h)p=b[h],a.push([p[0],p[1]]),e.push(p[2]);return d};var w=a("union-find"),v=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),h=a("big-rat"),e=a("big-rat/cmp"),c=a("big-rat/to-float"),p=a("rat-vec"),q=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":67,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":69,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":122}],67:[function(a,g,m){function t(d,a){return f(n(d[0],a[1]),n(d[1],a[0]))}g.exports=function(a,f,n,h){f=l(f,a);var e=l(h,n);h=t(f,e);if(0===k(h))return null;n=l(a,n);n=t(e,n);n=d(n,h);return y(a,u(f,n))};var n=a("big-rat/mul"),d=a("big-rat/div"),f=a("big-rat/sub"),k=a("big-rat/sign"),l=a("rat-vec/sub"),y=a("rat-vec/add"),u=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],68:[function(a,g,m){function t(d,a,n){var v=f(d[0],-a[0]);d=f(d[1],-a[1]);var r=f(n[0],-a[0]);a=f(n[1],-a[1]);v=l(k(v,r),k(d,a));return 0<=v[v.length-1]}g.exports=function(a,f,k,l){var r=n(f,k,l);if(0===r){var r=d(n(a,f,k)),h=d(n(a,f,l));return r===h?0===r&&(k=t(a,f,k),a=t(a,f,l),k!==a)?k?1:-1:0:0===h?0<r?-1:t(a,f,l)?-1:1:0===r?0<h?1:t(a,f,k)?1:-1:d(h-r)}h=n(a,f,k);return 0<h?0<r&&0<n(a,f,l)?1:-1:0>h?0<r||0<n(a,f,l)?1:-1:0<n(a,f,l)?1:t(a,f,k)?1:-1};var n=a("robust-orientation"),
d=a("signum"),f=a("two-sum"),k=a("robust-product"),l=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":120}],69:[function(a,g,m){function t(d,a){return d-a}g.exports=function(d,a){var k=d.length,l=d.length-a.length;if(l)return l;switch(k){case 0:return 0;case 1:return d[0]-a[0];case 2:return d[0]+d[1]-a[0]-a[1]||n(d[0],d[1])-n(a[0],a[1]);case 3:var k=d[0]+d[1],g=a[0]+a[1];if(l=k+d[2]-(g+a[2]))return l;var l=n(d[0],d[1]),u=n(a[0],a[1]);return n(l,
d[2])-n(u,a[2])||n(l+d[2],k)-n(u+a[2],g);case 4:var l=d[0],k=d[1],g=d[2],u=d[3],m=a[0],v=a[1],r=a[2],h=a[3];return l+k+g+u-(m+v+r+h)||n(l,k,g,u)-n(m,v,r,h,m)||n(l+k,l+g,l+u,k+g,k+u,g+u)-n(m+v,m+r,m+h,v+r,v+h,r+h)||n(l+k+g,l+k+u,l+g+u,k+g+u)-n(m+v+r,m+v+h,m+r+h,v+r+h);default:g=d.slice().sort(t);u=a.slice().sort(t);for(m=0;m<k;++m)if(l=g[m]-u[m])return l;return 0}};var n=Math.min},{}],70:[function(a,g,m){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=a("./lib/thunk.js");g.exports=function(d){var a=new t;a.pre=d.pre;a.body=d.body;a.post=d.post;var k=d.args.slice(0);a.argTypes=k;for(var l=0;l<k.length;++l){var g=k[l];if("array"===g||"object"===typeof g&&g.blockIndices){a.argTypes[l]="array";a.arrayArgs.push(l);a.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);a.shimArgs.push("array"+l);if(l<
a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)a.scalarArgs.push(l),a.shimArgs.push("scalar"+l);else if("index"===g){a.indexArgs.push(l);if(l<a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){a.shapeArgs.push(l);if(l<a.pre.args.length&&a.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<a.post.args.length&&a.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)a.argTypes[l]="offset",a.offsetArgs.push({array:g.array,offset:g.offset}),a.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+k[l]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!d.printCode||!!d.debug;a.funcName=d.funcName||"cwise";a.blockSize=d.blockSize||64;return n(a)}},{"./lib/thunk.js":72}],71:[function(a,g,m){function t(d,a,f){var k=d.length,n=a.arrayArgs.length;a=0<a.indexArgs.length;var r=[],h=[],e=0,c=0,p,q;for(p=0;p<k;++p)h.push(["i",p,"=0"].join(""));for(q=0;q<n;++q)for(p=0;p<k;++p)c=e,e=d[p],0===p?h.push(["d",q,"s",p,"=t",q,"p",e].join("")):h.push(["d",q,"s",p,"=(t",q,"p",e,"-s",c,"*t",q,"p",c,")"].join(""));r.push("var "+h.join(","));for(p=k-1;0<=p;--p)e=
d[p],r.push(["for(i",p,"=0;i",p,"<s",e,";++i",p,"){"].join(""));r.push(f);for(p=0;p<k;++p){c=e;e=d[p];for(q=0;q<n;++q)r.push(["p",q,"+=d",q,"s",p].join(""));a&&(0<p&&r.push(["index[",c,"]-=s",c].join("")),r.push(["++index[",e,"]"].join("")));r.push("}")}return r.join("\n")}function n(d,a,f,k){for(var n=a.length,r=f.arrayArgs.length,h=f.blockSize,e=0<f.indexArgs.length,c=[],p=0;p<r;++p)c.push(["var offset",p,"=p",p].join(""));for(p=d;p<n;++p)c.push(["for(var j"+p+"=SS[",a[p],"]|0;j",p,">0;){"].join("")),
c.push(["if(j",p,"<",h,"){"].join("")),c.push(["s",a[p],"=j",p].join("")),c.push(["j",p,"=0"].join("")),c.push(["}else{s",a[p],"=",h].join("")),c.push(["j",p,"-=",h,"}"].join("")),e&&c.push(["index[",a[p],"]=j",p].join(""));for(p=0;p<r;++p){h=["offset"+p];for(e=d;e<n;++e)h.push(["j",e,"*t",p,"p",a[e]].join(""));c.push(["p",p,"=(",h.join("+"),")"].join(""))}c.push(t(a,f,k));for(p=d;p<n;++p)c.push("}");return c.join("\n")}function d(d,a,f){for(var k=d.body,n=[],r=[],h=0;h<d.args.length;++h){var e=d.args[h];
if(!(0>=e.count)){var c=new RegExp(e.name,"g"),p="",q=a.arrayArgs.indexOf(h);switch(a.argTypes[h]){case "offset":var g=a.offsetArgIndex.indexOf(h),q=a.offsetArgs[g].array,p="+q"+g;case "array":var p="p"+q+p,t="l"+h,g="a"+q;if(0===a.arrayBlockIndices[q])1===e.count?"generic"===f[q]?e.lvalue?(n.push(["var ",t,"=",g,".get(",p,")"].join("")),k=k.replace(c,t),r.push([g,".set(",p,",",t,")"].join(""))):k=k.replace(c,[g,".get(",p,")"].join("")):k=k.replace(c,[g,"[",p,"]"].join("")):"generic"===f[q]?(n.push(["var ",
t,"=",g,".get(",p,")"].join("")),k=k.replace(c,t),e.lvalue&&r.push([g,".set(",p,",",t,")"].join(""))):(n.push(["var ",t,"=",g,"[",p,"]"].join("")),k=k.replace(c,t),e.lvalue&&r.push([g,"[",p,"]=",t].join("")));else{c=[e.name];e=[p];for(p=0;p<Math.abs(a.arrayBlockIndices[q]);p++)c.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(p+1)+"*t"+q+"b"+p);c=new RegExp(c.join(""),"g");p=e.join("+");if("generic"===f[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");k=k.replace(c,[g,"[",
p,"]"].join(""))}break;case "scalar":k=k.replace(c,"Y"+a.scalarArgs.indexOf(h));break;case "index":k=k.replace(c,"index");break;case "shape":k=k.replace(c,"shape")}}}return[n.join("\n"),k,r.join("\n")].join("\n").trim()}function f(d){for(var a=Array(d.length),f=!0,k=0;k<d.length;++k){var n=d[k],r=n.match(/\d+/),r=r?r[0]:"";0===n.charAt(0)?a[k]="u"+n.charAt(1)+r:a[k]=n.charAt(0)+r;0<k&&(f=f&&a[k]===a[k-1])}return f?a[0]:a.join("")}var k=a("uniq");g.exports=function(a,g){for(var u=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,m=Array(a.arrayArgs.length),v=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)v[r]=g[2*r],m[r]=g[2*r+1];for(var h=[],e=[],c=[],p=[],q=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(c.push(0),p.push(u),h.push(u),e.push(u+a.arrayBlockIndices[r])):(c.push(a.arrayBlockIndices[r]),p.push(a.arrayBlockIndices[r]+u),h.push(0),e.push(a.arrayBlockIndices[r]));for(var z=[],E=0;E<m[r].length;E++)c[r]<=m[r][E]&&m[r][E]<p[r]&&z.push(m[r][E]-c[r]);q.push(z)}e=["SS"];p=["'use strict'"];z=[];
for(E=0;E<u;++E)z.push(["s",E,"=SS[",E,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){e.push("a"+r);e.push("t"+r);e.push("p"+r);for(E=0;E<u;++E)z.push(["t",r,"p",E,"=t",r,"[",c[r]+E,"]"].join(""));for(E=0;E<Math.abs(a.arrayBlockIndices[r]);++E)z.push(["t",r,"b",E,"=t",r,"[",h[r]+E,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)e.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){E=Array(u);for(r=0;r<u;++r)E[r]="0";z.push(["index=[",E.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){h=a.offsetArgs[r];c=[];for(E=0;E<h.offset.length;++E)0!==h.offset[E]&&(1===h.offset[E]?c.push(["t",h.array,"p",E].join("")):c.push([h.offset[E],"*t",h.array,"p",E].join("")));0===c.length?z.push("q"+r+"=0"):z.push(["q",r,"=",c.join("+")].join(""))}r=k([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);p.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)p.push("p"+r+"|=0");3<a.pre.body.length&&p.push(d(a.pre,a,v));r=d(a.body,
a,v);a:for(E=0,z=q[0].length;E<z;){for(h=1;h<q.length;++h)if(q[h][E]!==q[0][E])break a;++E}E<u?p.push(n(E,q[0],a,r)):p.push(t(q[0],a,r));3<a.post.body.length&&p.push(d(a.post,a,v));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+p.join("\n")+"\n----------");u=[a.funcName||"unnamed","_cwise_loop_",m[0].join("s"),"m",E,f(v)].join("");return(new Function(["function ",u,"(",e.join(","),"){",p.join("\n"),"} return ",u].join("")))()}},{uniq:123}],72:[function(a,g,m){var t=a("./compile.js");
g.exports=function(a){var d=["'use strict'","var CACHED={}"],f=[];d.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var k=[],l=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],u=[],m=[],v=0;v<a.arrayArgs.length;++v){var r=a.arrayArgs[v];f.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));k.push("t"+r);k.push("r"+r);l.push("t"+r);l.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<v&&(u.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[v]))),m.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[v])+"]"))}1<a.arrayArgs.length&&(d.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
d.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),d.push("if (!("+m.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(v=0;v<a.scalarArgs.length;++v)g.push("scalar"+a.scalarArgs[v]);f.push(["type=[",l.join(","),"].join()"].join(""));f.push("proc=CACHED[type]");d.push("var "+f.join(","));d.push(["if(!proc){CACHED[type]=proc=compile([",k.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+d.join("\n")+"\n----------");return(new Function("compile",d.join("\n")))(t.bind(void 0,a))}},{"./compile.js":71}],73:[function(a,g,m){(function(a){var n=!1;if("undefined"!==typeof Float64Array){var d=new Float64Array(1),f=new Uint32Array(d.buffer);d[0]=1;n=!0;1072693248===f[1]?(g.exports=function(a){d[0]=a;return[f[0],f[1]]},g.exports.pack=function(a,k){f[0]=a;f[1]=k;return d[0]},g.exports.lo=function(a){d[0]=a;return f[0]},g.exports.hi=
function(a){d[0]=a;return f[1]}):1072693248===f[0]?(g.exports=function(a){d[0]=a;return[f[1],f[0]]},g.exports.pack=function(a,k){f[1]=a;f[0]=k;return d[0]},g.exports.lo=function(a){d[0]=a;return f[1]},g.exports.hi=function(a){d[0]=a;return f[0]}):n=!1}if(!n){var k=new a(8);g.exports=function(a){k.writeDoubleLE(a,0,!0);return[k.readUInt32LE(0,!0),k.readUInt32LE(4,!0)]};g.exports.pack=function(a,d){k.writeUInt32LE(a,0,!0);k.writeUInt32LE(d,4,!0);return k.readDoubleLE(0,!0)};g.exports.lo=function(a){k.writeDoubleLE(a,
0,!0);return k.readUInt32LE(0,!0)};g.exports.hi=function(a){k.writeDoubleLE(a,0,!0);return k.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var d=g.exports.lo(a);a=g.exports.hi(a);var f=a&1048575;a&2146435072&&(f+=1048576);return[d,f]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],74:[function(a,g,m){function t(a,
d,f){var k=a[f]|0;if(0>=k)return[];var l=Array(k),g;if(f===a.length-1)for(g=0;g<k;++g)l[g]=d;else for(g=0;g<k;++g)l[g]=t(a,d,f+1);return l}g.exports=function(a,d){"undefined"===typeof d&&(d=0);switch(typeof a){case "number":if(0<a){var f=a|0,k=d,l,g;l=Array(f);for(g=0;g<f;++g)l[g]=k;return l}break;case "object":if("number"===typeof a.length)return t(a,d,0)}return[]}},{}],75:[function(a,g,m){g.exports=function(a,d){var f=a.length;if("number"!==typeof d){for(var k=d=0;k<f;++k){var l=a[k];d=Math.max(d,
l[0],l[1])}d=(d|0)+1}d|=0;for(var g=Array(d),k=0;k<d;++k)g[k]=[];for(k=0;k<f;++k)l=a[k],g[l[0]].push(l[1]),g[l[1]].push(l[0]);for(f=0;f<d;++f)t(g[f],function(a,d){return a-d});return g};var t=a("uniq")},{uniq:123}],76:[function(a,g,m){function t(a,e,c,d,f,k){this._color=a;this.key=e;this.value=c;this.left=d;this.right=f;this._count=k}function n(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function d(a,e){return new t(a,e.key,e.value,e.left,e.right,e._count)}function f(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function k(a,e){this._compare=a;this.root=e}function l(a,e){if(e.left){var c=l(a,e.left);if(c)return c}if(c=a(e.key,e.value))return c;if(e.right)return l(a,e.right)}function y(a,e,c,d){if(0>=e(a,d.key)){if(d.left){var f=y(a,e,c,d.left);if(f)return f}if(f=c(d.key,d.value))return f}if(d.right)return y(a,e,c,d.right)}function u(a,e,c,d,f){var k=c(a,f.key),l=c(e,f.key);if(0>=k&&(f.left&&(k=u(a,e,c,d,f.left))||0<l&&(k=d(f.key,f.value))))return k;if(0<
l&&f.right)return u(a,e,c,d,f.right)}function w(a,e){this.tree=a;this._stack=e}function v(a,e){a.key=e.key;a.value=e.value;a.left=e.left;a.right=e.right;a._color=e._color;a._count=e._count}function r(a,e){return a<e?-1:a>e?1:0}g.exports=function(a){return new k(a||r,null)};a=k.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(e,c){a.push(e)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(e,c){a.push(c)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,e){for(var c=this._compare,p=this.root,q=[],l=[];p;){var n=c(a,p.key);q.push(p);l.push(n);p=0>=n?p.left:p.right}q.push(new t(0,a,e,null,null,1));for(n=q.length-2;0<=n;--n)p=q[n],q[n]=0>=l[n]?new t(p._color,p.key,p.value,q[n+1],p.right,p._count+1):new t(p._color,p.key,p.value,p.left,q[n+1],p._count+1);for(n=q.length-1;1<n;--n){l=q[n-1];p=q[n];if(1===l._color||1===p._color)break;var b=q[n-2];
if(b.left===l)if(l.left===p){var r=b.right;if(r&&0===r._color)l._color=1,b.right=d(1,r),b._color=0,--n;else{b._color=0;b.left=l.right;l._color=1;l.right=b;q[n-2]=l;q[n-1]=p;f(b);f(l);3<=n&&(n=q[n-3],n.left===b?n.left=l:n.right=l);break}}else if((r=b.right)&&0===r._color)l._color=1,b.right=d(1,r),b._color=0,--n;else{l.right=p.left;b._color=0;b.left=p.right;p._color=1;p.left=l;p.right=b;q[n-2]=p;q[n-1]=l;f(b);f(l);f(p);3<=n&&(n=q[n-3],n.left===b?n.left=p:n.right=p);break}else if(l.right===p)if((r=b.left)&&
0===r._color)l._color=1,b.left=d(1,r),b._color=0,--n;else{b._color=0;b.right=l.left;l._color=1;l.left=b;q[n-2]=l;q[n-1]=p;f(b);f(l);3<=n&&(n=q[n-3],n.right===b?n.right=l:n.left=l);break}else if((r=b.left)&&0===r._color)l._color=1,b.left=d(1,r),b._color=0,--n;else{l.left=p.right;b._color=0;b.right=p.left;p._color=1;p.right=l;p.left=b;q[n-2]=p;q[n-1]=l;f(b);f(l);f(p);3<=n&&(n=q[n-3],n.right===b?n.right=p:n.left=p);break}}q[0]._color=1;return new k(c,q[0])};a.forEach=function(a,e,c){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return y(e,this._compare,a,this.root);case 3:if(!(0<=this._compare(e,c)))return u(e,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var e=this.root,c=[];;){c.push(e);if(e.left){if(a<e.left._count){e=e.left;continue}a-=
e.left._count}if(!a)return new w(this,c);--a;if(e.right){if(a>=e.right._count)break;e=e.right}else break}return new w(this,[])};a.ge=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0>=k&&(f=d.length);c=0>=k?c.left:c.right}d.length=f;return new w(this,d)};a.gt=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0>k&&(f=d.length);c=0>k?c.left:c.right}d.length=f;return new w(this,d)};a.lt=function(a){for(var e=this._compare,
c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0<k&&(f=d.length);c=0>=k?c.left:c.right}d.length=f;return new w(this,d)};a.le=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0<=k&&(f=d.length);c=0>k?c.left:c.right}d.length=f;return new w(this,d)};a.find=function(a){for(var e=this._compare,c=this.root,d=[];c;){var f=e(a,c.key);d.push(c);if(0===f)return new w(this,d);c=0>=f?c.left:c.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var e=this._compare,c=this.root;c;){var d=e(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),c=a[a.length-1];e[e.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var p=a.length-2;0<=p;--p)c=a[p],e[p]=c.left===a[p+1]?new t(c._color,c.key,c.value,e[p+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,e[p+1],c._count);c=e[e.length-1];if(c.left&&c.right){a=e.length;for(c=c.left;c.right;)e.push(c),c=c.right;p=e[a-1];e.push(new t(c._color,p.key,p.value,c.left,c.right,c._count));e[a-1].key=c.key;e[a-1].value=c.value;for(p=e.length-2;p>=a;--p)c=e[p],e[p]=
new t(c._color,c.key,c.value,c.left,e[p+1],c._count);e[a-1].left=e[a]}c=e[e.length-1];if(0===c._color)for(p=e[e.length-2],p.left===c?p.left=null:p.right===c&&(p.right=null),e.pop(),p=0;p<e.length;++p)e[p]._count--;else if(c.left||c.right)for(c.left?v(c,c.left):c.right&&v(c,c.right),c._color=1,p=0;p<e.length-1;++p)e[p]._count--;else{if(1===e.length)return new k(this.tree._compare,null);for(p=0;p<e.length;++p)e[p]._count--;for(var p=e[e.length-2],q,l,r,b=e.length-1;0<=b;--b){a=e[b];if(0===b){a._color=
1;break}q=e[b-1];if(q.left===a){l=q.right;if(l.right&&0===l.right._color){l=q.right=n(l);r=l.right=n(l.right);q.right=l.left;l.left=q;l.right=r;l._color=q._color;a._color=1;q._color=1;r._color=1;f(q);f(l);if(1<b){var g=e[b-2];g.left===q?g.left=l:g.right=l}e[b-1]=l;break}else if(l.left&&0===l.left._color){l=q.right=n(l);r=l.left=n(l.left);q.right=r.left;l.left=r.right;r.left=q;r.right=l;r._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(r);1<b&&(g=e[b-2],g.left===q?g.left=r:g.right=r);
e[b-1]=r;break}if(1===l._color)if(0===q._color){q._color=1;q.right=d(0,l);break}else q.right=d(0,l);else l=n(l),q.right=l.left,l.left=q,l._color=q._color,q._color=0,f(q),f(l),1<b&&(g=e[b-2],g.left===q?g.left=l:g.right=l),e[b-1]=l,e[b]=q,b+1<e.length?e[b+1]=a:e.push(a),b+=2}else{l=q.left;if(l.left&&0===l.left._color){l=q.left=n(l);r=l.left=n(l.left);q.left=l.right;l.right=q;l.left=r;l._color=q._color;a._color=1;q._color=1;r._color=1;f(q);f(l);1<b&&(g=e[b-2],g.right===q?g.right=l:g.left=l);e[b-1]=l;
break}else if(l.right&&0===l.right._color){l=q.left=n(l);r=l.right=n(l.right);q.left=r.right;l.right=r.left;r.right=q;r.left=l;r._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(r);1<b&&(g=e[b-2],g.right===q?g.right=r:g.left=r);e[b-1]=r;break}if(1===l._color)if(0===q._color){q._color=1;q.left=d(0,l);break}else q.left=d(0,l);else l=n(l),q.left=l.right,l.right=q,l._color=q._color,q._color=0,f(q),f(l),1<b&&(g=e[b-2],g.right===q?g.right=l:g.left=l),e[b-1]=l,e[b]=q,b+1<e.length?e[b+1]=a:e.push(a),
b+=2}}p.left===c?p.left=null:p.right=null}return new k(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,e=this._stack;if(0===e.length)return(a=this.tree.root)?a._count:0;e[e.length-1].left&&(a=e[e.length-
1].left._count);for(var c=e.length-2;0<=c;--c)e[c+1]===e[c].right&&(++a,e[c].left&&(a+=e[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.right)for(e=e.right;e;)a.push(e),e=e.left;else for(a.pop();0<a.length&&a[a.length-1].right===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].left===
a[e])return!0;return!1}});a.update=function(a){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var c=Array(e.length),d=e[e.length-1];c[c.length-1]=new t(d._color,d.key,a,d.left,d.right,d._count);for(a=e.length-2;0<=a;--a)d=e[a],c[a]=d.left===e[a+1]?new t(d._color,d.key,d.value,c[a+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,c[a+1],d._count);return new k(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.left)for(e=
e.left;e;)a.push(e),e=e.right;else for(a.pop();0<a.length&&a[a.length-1].left===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].right===a[e])return!0;return!1}})},{}],77:[function(a,g,m){function t(a){if(0>a)return Number("0/0");for(var k=d[0],l=d.length-1;0<l;--l)k+=d[l]/(a+l);l=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(l)-l+Math.log(k)-
Math.log(a)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function k(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*k(1-a));if(100<a)return Math.exp(t(a));--a;for(var d=n[0],g=1;9>g;g++)d+=n[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*d};g.exports.log=t},{}],78:[function(a,g,m){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],79:[function(a,g,m){var t=a("./identity");g.exports=function(a,d,f,k){var l,g,m,w,v,
r,h,e,c=d[0],p=d[1];d=d[2];m=k[0];w=k[1];g=k[2];h=f[0];k=f[1];l=f[2];if(1E-6>Math.abs(c-h)&&1E-6>Math.abs(p-k)&&1E-6>Math.abs(d-l))return t(a);f=c-h;k=p-k;h=d-l;e=1/Math.sqrt(f*f+k*k+h*h);f*=e;k*=e;h*=e;l=w*h-g*k;g=g*f-m*h;m=m*k-w*f;(e=Math.sqrt(l*l+g*g+m*m))?(e=1/e,l*=e,g*=e,m*=e):m=g=l=0;w=k*m-h*g;v=h*l-f*m;r=f*g-k*l;(e=Math.sqrt(w*w+v*v+r*r))?(e=1/e,w*=e,v*=e,r*=e):r=v=w=0;a[0]=l;a[1]=w;a[2]=f;a[3]=0;a[4]=g;a[5]=v;a[6]=k;a[7]=0;a[8]=m;a[9]=r;a[10]=h;a[11]=0;a[12]=-(l*c+g*p+m*d);a[13]=-(w*c+v*p+
r*d);a[14]=-(f*c+k*p+h*d);a[15]=1;return a}},{"./identity":78}],80:[function(a,g,m){g.exports=function(a,n,d,f,k){n=1/Math.tan(n/2);var l=1/(f-k);a[0]=n/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*f*l;a[15]=0;return a}},{}],81:[function(a,g,m){m.read=function(a,n,d,f,k){var l;l=8*k-f-1;var g=(1<<l)-1,m=g>>1,w=-7;k=d?k-1:0;var v=d?-1:1,r=a[n+k];k+=v;d=r&(1<<-w)-1;r>>=-w;for(w+=l;0<w;d=256*d+a[n+k],k+=v,w-=8);l=d&(1<<-w)-1;d>>=-w;
for(w+=f;0<w;l=256*l+a[n+k],k+=v,w-=8);if(0===d)d=1-m;else{if(d===g)return l?NaN:Infinity*(r?-1:1);l+=Math.pow(2,f);d-=m}return(r?-1:1)*l*Math.pow(2,d-f)};m.write=function(a,g,d,f,k,l){var m,u=8*l-k-1,w=(1<<u)-1,v=w>>1,r=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;l=f?0:l-1;var h=f?1:-1,e=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,f=w):(f=Math.floor(Math.log(g)/Math.LN2),1>g*(m=Math.pow(2,-f))&&(f--,m*=2),g=1<=f+v?g+r/m:g+r*Math.pow(2,1-v),2<=g*m&&(f++,m/=2),f+v>=w?(g=
0,f=w):1<=f+v?(g=(g*m-1)*Math.pow(2,k),f+=v):(g=g*Math.pow(2,v-1)*Math.pow(2,k),f=0));for(;8<=k;a[d+l]=g&255,l+=h,g/=256,k-=8);f=f<<k|g;for(u+=k;0<u;a[d+l]=f&255,l+=h,f/=256,u-=8);a[d+l-h]|=128*e}},{}],82:[function(a,g,m){function t(c,a,e,d,f){this.mid=c;this.left=a;this.right=e;this.leftPoints=d;this.rightPoints=f;this.count=(a?a.count:0)+(e?e.count:0)+d.length}function n(c,a){c.mid=a.mid;c.left=a.left;c.right=a.right;c.leftPoints=a.leftPoints;c.rightPoints=a.rightPoints;c.count=a.count}function d(c,
a){var e=r(a);c.mid=e.mid;c.left=e.left;c.right=e.right;c.leftPoints=e.leftPoints;c.rightPoints=e.rightPoints;c.count=e.count}function f(c,a){var e=c.intervals([]),f=e.indexOf(a);if(0>f)return 0;e.splice(f,1);d(c,e);return 1}function k(c,a,e){for(var d=0;d<c.length&&c[d][0]<=a;++d){var f=e(c[d]);if(f)return f}}function l(c,a,e){for(var d=c.length-1;0<=d&&c[d][1]>=a;--d){var f=e(c[d]);if(f)return f}}function y(c,a){for(var e=0;e<c.length;++e){var d=a(c[e]);if(d)return d}}function u(c,a){return c-a}
function w(c,a){var e=c[0]-a[0];return e?e:c[1]-a[1]}function v(c,a){var e=c[1]-a[1];return e?e:c[0]-a[0]}function r(c){if(0===c.length)return null;for(var a=[],e=0;e<c.length;++e)a.push(c[e][0],c[e][1]);a.sort(u);for(var a=a[a.length>>1],d=[],f=[],b=[],e=0;e<c.length;++e){var h=c[e];h[1]<a?d.push(h):a<h[0]?f.push(h):b.push(h)}c=b.slice();b.sort(w);c.sort(v);return new t(a,r(d),r(f),b,c)}function h(c){this.root=c}var e=a("binary-search-bounds");g.exports=function(c){return c&&0!==c.length?new h(r(c)):
new h(null)};a=t.prototype;a.intervals=function(c){c.push.apply(c,this.leftPoints);this.left&&this.left.intervals(c);this.right&&this.right.intervals(c);return c};a.insert=function(c){var a=this.count-this.leftPoints.length;this.count+=1;if(c[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(c),d(this,a)):this.left.insert(c):this.left=r([c]);else if(c[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(c),d(this,a)):this.right.insert(c):
this.right=r([c]);else{var a=e.ge(this.leftPoints,c,w),f=e.ge(this.rightPoints,c,v);this.leftPoints.splice(a,0,c);this.rightPoints.splice(f,0,c)}};a.remove=function(c){var a=this.count-this.leftPoints;if(c[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return f(this,c);a=this.left.remove(c);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(c[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(a-1))return f(this,c);
a=this.right.remove(c);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;return a}if(1===this.count)return this.leftPoints[0]===c?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===c){if(this.left&&this.right){c=this;for(var d=this.left;d.right;)c=d,d=d.right;if(c===this)d.right=this.right;else{var h=this.left,a=this.right;c.count-=d.count;c.right=d.left;d.left=h;d.right=a}n(this,d);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(h=e.ge(this.leftPoints,c,w);h<this.leftPoints.length&&this.leftPoints[h][0]===c[0];++h)if(this.leftPoints[h]===c)for(--this.count,this.leftPoints.splice(h,1),a=e.ge(this.rightPoints,c,v);a<this.rightPoints.length&&this.rightPoints[a][1]===c[1];++a)if(this.rightPoints[a]===c)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(c,a){if(c<this.mid){if(this.left){var e=this.left.queryPoint(c,a);if(e)return e}return k(this.leftPoints,c,
a)}return c>this.mid?this.right&&(e=this.right.queryPoint(c,a))?e:l(this.rightPoints,c,a):y(this.leftPoints,a)};a.queryInterval=function(c,a,e){if(c<this.mid&&this.left){var d=this.left.queryInterval(c,a,e);if(d)return d}return a>this.mid&&this.right&&(d=this.right.queryInterval(c,a,e))?d:a<this.mid?k(this.leftPoints,a,e):c>this.mid?l(this.rightPoints,c,e):y(this.leftPoints,e)};a=h.prototype;a.insert=function(c){this.root?this.root.insert(c):this.root=new t(c[0],null,null,[c],[c])};a.remove=function(c){return this.root?
(c=this.root.remove(c),2===c&&(this.root=null),0!==c):!1};a.queryPoint=function(c,a){if(this.root)return this.root.queryPoint(c,a)};a.queryInterval=function(c,a,e){if(c<=a&&this.root)return this.root.queryInterval(c,a,e)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],83:[function(a,g,m){function t(a,f,k,l,g,n){a=["function ",a,"(a,l,h,",
l.join(","),"){",n?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",g?".get(m)":"[m]"];n?0>f.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",f,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");n?a.push("return -1};"):a.push("return i};");return a.join("")}function n(a,f,k,l){return(new Function([t("A","x"+a+"y",f,["y"],!1,l),t("B","x"+a+"y",f,["y"],!0,l),t("P","c(x,y)"+a+"0",
f,["y","c"],!1,l),t("Q","c(x,y)"+a+"0",f,["y","c"],!0,l),"function dispatchBsearch",k,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",k].join("")))()}g.exports=
{ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],84:[function(a,g,m){g.exports=function(a,g){g=g||Array(a.length);for(var d=0;d<a.length;++d)g[a[d]]=d;return g}},{}],85:[function(a,g,m){g.exports=function(a){for(var g=Array(a),d=0;d<a;++d)g[d]=d;return g}},{}],86:[function(a,g,m){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,g,m){var t=
{}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],88:[function(a,g,m){function t(a,d,f){for(var e=0,c=0;c<a;++c)d&1<<c&&(e|=1<<f[c]);return e}function n(a,g,h,e,c,p){function q(b,a){B.push("for(","i"+c[b],"=",a,";","i"+c[b],"<","s"+c[b],";","++","i"+c[b],"){")}function n(b){for(var a=0;a<x;++a)B.push("p"+a,"+=","u"+a+"_"+c[b],";");B.push("}")}function m(){for(var b=1;b<1<<F;++b)B.push(w,"=","e"+b,";","e"+b,"=","y"+b,";","y"+b,"=",w,";")}function b(a,d){if(0>
a){for(var h=0;h<x;++h)p[h]?B.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):B.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<x;++h)g.push("c"+h+"_0");for(h=0;h<e;++h)g.push("x"+h);B.push("b0","=",k,"[",u,"]=phase(",g.join(),");");for(g=1;g<1<<F;++g)B.push("b"+g,"=",k,"[",u,"+","e"+g,"];");h=[];for(g=1;g<1<<F;++g)h.push("(b0!==b"+g+")");B.push("if(",h.join("||"),"){");for(var r=[],h=0;h<F;++h)r.push("i"+h);for(h=0;h<x;++h)for(r.push("c"+h+"_0"),g=1;g<1<<F;++g)p[h]?B.push("c"+h+"_"+g,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):B.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),r.push("c"+h+"_"+g);for(h=0;h<1<<F;++h)r.push("b"+h);for(h=0;h<e;++h)r.push("x"+h);B.push("vertex(",r.join(),");","v0","=",f,"[",u,"]=",l,"++;");h=(1<<F)-1;r="b"+h;for(g=0;g<F;++g)if(0===(d&~(1<<g))){for(var v=h^1<<g,t="b"+v,w=[],y=v;0<y;y=y-1&v)w.push(f+"["+u+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)g&1?w.push("c"+y+"_"+h,"c"+y+"_"+v):w.push("c"+y+"_"+v,"c"+y+"_"+h);g&1?w.push(r,t):w.push(t,
r);for(y=0;y<e;++y)w.push("x"+y);B.push("if(",r,"!==",t,"){","face(",w.join(),")}")}B.push("}",u,"+=1;")}else{for(g=a-1;0<=g;--g)q(g,0);h=[];for(g=0;g<x;++g)p[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<e;++g)h.push("x"+g);B.push(k,"[",u,"++]=phase(",h.join(),");");for(g=0;g<a;++g)n(g);for(g=0;g<x;++g)B.push("p"+g,"+=","u"+g+"_"+c[a],";");B.push("if(","s"+c[a],">0){","i"+c[a],"=1;");b(a-1,d|1<<c[a]);for(g=0;g<x;++g)B.push("p"+g,"+=","u"+g+"_"+c[a],";");a===F-1&&(B.push(u,
"=0;"),m());q(a,2);b(a-1,d);a===F-1&&(B.push("if(","i"+c[F-1],"&1){",u,"=0;}"),m());n(a);B.push("}")}}var x=p.length,F=c.length;if(2>F)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var I="extractContour"+c.join("_"),B=[],A=[],N=[],H=0;H<x;++H)N.push("a"+H);for(H=0;H<e;++H)N.push("x"+H);for(H=0;H<F;++H)A.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<x;++H){A.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var D=0;D<F;++D)A.push("t"+H+"_"+D+"="+("a"+H)+".stride["+
D+"]|0")}for(H=0;H<x;++H)for(A.push("p"+H+"="+("o"+H)),A.push("c"+H+"_0"),D=1;D<1<<F;++D){for(var P=[],J=0;J<F;++J)D&1<<J&&P.push("-"+("t"+H+"_"+J));A.push("d"+H+"_"+D+"=("+P.join("")+")|0");A.push("c"+H+"_"+D+"=0")}for(H=0;H<x;++H)for(D=0;D<F;++D)J=["t"+H+"_"+c[D]],0<D&&J.push("t"+H+"_"+c[D-1]+"*"+("s"+c[D-1])),A.push("u"+H+"_"+c[D]+"=("+J.join("-")+")|0");for(H=0;H<F;++H)A.push("i"+H+"=0");A.push(l+"=0");D=["2"];for(H=F-2;0<=H;--H)D.push("s"+c[H]);A.push(y+"=("+D.join("*")+")|0",k+"=mallocUint32("+
y+")",f+"=mallocUint32("+y+")",u+"=0");A.push("b0=0");for(D=1;D<1<<F;++D){H=[];P=[];for(J=0;J<F;++J)D&1<<J&&(0===P.length?H.push("1"):H.unshift(P.join("*"))),P.push("s"+c[J]);J="";0>H[0].indexOf("s"+c[F-2])&&(J="-");P=t(F,D,c);A.push("e"+P+"=(-"+H.join("-")+")|0","y"+P+"=("+J+H.join("-")+")|0","b"+P+"=0")}A.push("v0=0",w+"=0");b(F-1,0);B.push("freeUint32(",f,");freeUint32(",k,");");I=["'use strict';function ",I,"(",N.join(),"){var ",A.join(),";",B.join(""),"}return ",I].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",I))(a,g,h,d.mallocUint32,d.freeUint32)}var d=a("typedarray-pool");g.exports=function(a){function d(c){throw Error("ndarray-extract-contour: "+c);}"object"!==typeof a&&d("Must specify arguments");var f=a.order;Array.isArray(f)||d("Must specify order");var e=a.arrayArguments||1;1>e&&d("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");
"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var k=a.getters||[],g=Array(e),l=0;l<e;++l)0<=k.indexOf(l)?g[l]=!0:g[l]=!1;return n(a.vertex,a.cell,a.phase,c,f,g)};var f="V",k="P",l="N",y="Q",u="X",w="T"},{"typedarray-pool":121}],89:[function(a,g,m){function t(a,d){return a[0]-d[0]}function n(){var a=this.stride,d=Array(a.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(a[f]),f];d.sort(t);a=Array(d.length);for(f=
0;f<a.length;++f)a[f]=d[f][1];return a}function d(a,d){var f=["View",d,"d",a].join("");0>d&&(f="View_Nil"+a);var h="generic"===a;if(-1===d){var e,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===d)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(u[a][0]);e=["'use strict'"];var c=k(d),p=c.map(function(b){return"i"+b}),g="this.offset+"+c.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),l=c.map(function(b){return"b"+b}).join(","),m=c.map(function(b){return"c"+b}).join(",");e.push("function "+
f+"(a,"+l+","+m+",d){this.data=a","this.shape=["+l+"]","this.stride=["+m+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);e.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+c.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===d?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>d?(e.push("function "+f+"_order(){"),2===d?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+f+"_set("+p.join(",")+",v){");h?e.push("return this.data.set("+g+",v)}"):e.push("return this.data["+g+"]=v}");e.push("proto.get=function "+f+"_get("+p.join(",")+"){");h?e.push("return this.data.get("+
g+")}"):e.push("return this.data["+g+"]}");e.push("proto.index=function "+f+"_index(",p.join(),"){return "+g+"}");e.push("proto.hi=function "+f+"_hi("+p.join(",")+"){return new "+f+"(this.data,"+c.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+c.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");h=c.map(function(b){return"a"+b+"=this.shape["+b+"]"});g=c.map(function(b){return"c"+b+"=this.stride["+b+"]"});e.push("proto.lo=function "+
f+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+g.join(","));for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");e.push("return new "+f+"(this.data,"+c.map(function(b){return"a"+b}).join(",")+","+c.map(function(b){return"c"+b}).join(",")+",b)}");e.push("proto.step=function "+f+"_step("+p.join(",")+"){var "+c.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+c.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");e.push("return new "+f+"(this.data,"+c.map(function(b){return"a"+b}).join(",")+","+c.map(function(b){return"b"+b}).join(",")+",c)}");g=Array(d);l=Array(d);for(h=0;h<d;++h)g[h]="a[i"+h+"]",l[h]="b[i"+h+"]";e.push("proto.transpose=function "+f+"_transpose("+p+"){"+p.map(function(b,c){return b+"=("+b+"===undefined?"+
c+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+g.join(",")+","+l.join(",")+",this.offset)}");e.push("proto.pick=function "+f+"_pick("+p+"){var a=[],b=[],c=this.offset");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+c.map(function(b){return"shape["+b+"]"}).join(",")+","+c.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",e.join("\n"));return f(u[a],n)}function f(a){if(l(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var k=a("iota-array"),l=a("is-buffer"),y="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in u)u[a].push(d(a,-1))});g.exports=function(a,k,g,h){if(void 0===a){var e=u.array[0];return e([])}"number"===
typeof a&&(a=[a]);void 0===k&&(k=[a.length]);e=k.length;if(void 0===g){g=Array(e);for(var c=e-1,p=1;0<=c;--c)g[c]=p,p*=k[c]}if(void 0===h)for(c=h=0;c<e;++c)0>g[c]&&(h-=(k[c]-1)*g[c]);c=f(a);for(p=u[c];p.length<=e+1;)p.push(d(c,p.length-1));e=p[e+1];return e(a,k,g,h)}},{"iota-array":85,"is-buffer":86}],90:[function(a,g,m){var t=a("double-bits"),n=Math.pow(2,-1074);g.exports=function(a,f){if(isNaN(a)||isNaN(f))return NaN;if(a===f)return a;if(0===a)return 0>f?-n:n;var k=t.hi(a),g=t.lo(a);f>a===0<a?4294967295===
g?(k+=1,g=0):g+=1:0===g?(g=4294967295,--k):--g;return t.pack(g,k)}},{"double-bits":73}],91:[function(a,g,m){g.exports=function(a){var f=a.length;if(f<t)for(var k=1,g=0;g<f;++g)for(var m=0;m<g;++m)if(a[g]<a[m])k=-k;else{if(a[g]===a[m])return 0}else{for(var u=n.mallocUint8(f),g=0;g<f;++g)u[g]=0;k=1;for(g=0;g<f;++g)if(!u[g]){var w=1;u[g]=1;for(m=a[g];m!==g;m=a[m]){if(u[m])return n.freeUint8(u),0;w+=1;u[m]=1}w&1||(k=-k)}n.freeUint8(u)}return k};var t=32,n=a("typedarray-pool")},{"typedarray-pool":121}],
92:[function(a,g,m){var t=a("typedarray-pool"),n=a("invert-permutation");m.rank=function(a){var f=a.length;switch(f){case 0:case 1:return 0;case 2:return a[1]}var k=t.mallocUint32(f),g=t.mallocUint32(f),m=0,u;n(a,g);for(u=0;u<f;++u)k[u]=a[u];for(u=f-1;0<u;--u)f=g[u],a=k[u],k[u]=k[f],k[f]=a,g[u]=g[a],g[a]=f,m=(m+a)*u;t.freeUint32(g);t.freeUint32(k);return m};m.unrank=function(a,f,k){switch(a){case 0:return k?k:[];case 1:return k?(k[0]=0,k):[0];case 2:return k?(f?(k[0]=0,k[1]=1):(k[0]=1,k[1]=0),k):
f?[0,1]:[1,0]}k=k||Array(a);var g,n,m=1;k[0]=0;for(n=1;n<a;++n)k[n]=n,m=m*n|0;for(n=a-1;0<n;--n)a=f/m|0,f=f-a*m|0,m=m/n|0,g=k[n]|0,k[n]=k[a]|0,k[a]=g|0;return k}},{"invert-permutation":84,"typedarray-pool":121}],93:[function(a,g,m){g.exports=function(a,d){function f(c,a){var e=w[a][c[a]];e.splice(e.indexOf(c),1)}function k(c,a,e){var h,k,b;for(k=0;2>k;++k)if(0<w[k][a].length){h=w[k][a][0];b=k;break}k=h[b^1];for(var g=0;2>g;++g)for(var l=w[g][a],n=0;n<l.length;++n){var r=l[n],v=r[g^1];0<t(d[c],d[a],
d[k],d[v])&&(h=r,k=v,b=g)}if(e)return k;h&&f(h,b);return k}function g(c,a){var e=w[a][c][0],h=[c];f(e,a);for(e=e[a^1];;){for(;e!==c;)h.push(e),e=k(h[h.length-2],e,!1);if(0===w[0][c].length+w[1][c].length)break;var e=h[h.length-1],l=c,b=h[1],n=k(e,l,!0);if(0>t(d[e],d[l],d[b],d[n]))break;h.push(c);e=k(e,l)}return h}for(var m=d.length|0,u=a.length,w=[Array(m),Array(m)],v=0;v<m;++v)w[0][v]=[],w[1][v]=[];for(v=0;v<u;++v){var r=a[v];w[0][r[0]].push(r);w[1][r[1]].push(r)}u=[];for(v=0;v<m;++v)0===w[0][v].length+
w[1][v].length&&u.push([v]);for(v=0;v<m;++v)for(r=0;2>r;++r){for(var h=[];0<w[r][v].length;){var e=g(v,r);e[1]===e[e.length-1]?h.push.apply(h,e):(0<h.length&&u.push(h),h=e)}0<h.length&&u.push(h)}return u};var t=a("compare-angle")},{"compare-angle":68}],94:[function(a,g,m){g.exports=function(a,d){for(var f=t(a,d.length),k=Array(d.length),g=Array(d.length),m=[],u=0;u<d.length;++u){var w=f[u].length;g[u]=w;k[u]=!0;1>=w&&m.push(u)}for(;0<m.length;)for(w=m.pop(),k[w]=!1,w=f[w],u=0;u<w.length;++u){var v=
w[u];0===--g[v]&&m.push(v)}f=Array(d.length);g=[];for(u=0;u<d.length;++u)k[u]?(w=g.length,f[u]=w,g.push(d[u])):f[u]=-1;m=[];for(u=0;u<a.length;++u)w=a[u],k[w[0]]&&k[w[1]]&&m.push([f[w[0]],f[w[1]]]);return[m,g]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":75}],95:[function(a,g,m){function t(a,d){for(var f=Array(a),e=0;e<a;++e)f[e]=d;return f}function n(a){for(var d=Array(a),f=0;f<a;++f)d[f]=[];return d}g.exports=function(a,g){function h(b){for(var c=b.length,a=0;a<c;++a)if(!D[b[a]])return!1;
return!0}var e=w(a,g);a=e[0];g=e[1];for(var c=g.length,p=d(a,g.length),q=0;q<c;++q)if(1===p[q].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var p=f(a,g),p=p.filter(function(b){for(var c=b.length,a=[0],e=0;e<c;++e)var d=g[b[e]],f=g[b[(e+1)%c]],h=l(-d[0],d[1]),k=l(-d[0],f[1]),d=l(f[0],d[1]),f=l(f[0],f[1]),a=y(a,y(y(h,k),y(d,f)));return 0<a[a.length-1]}),e=p.length,m=Array(e),E=Array(e),q=0;q<e;++q){m[q]=q;var b=Array(e),x=p[q].map(function(b){return g[b]}),F=k([x]),I=
0,B=0;a:for(;B<e;++B)if(b[B]=0,q!==B){for(var x=p[B],A=x.length,N=0;N<A;++N){var H=F(g[x[N]]);if(0!==H){0>H&&(b[B]=1,I+=1);continue a}}b[B]=1;I+=1}E[q]=[I,q,b]}E.sort(function(b,c){return c[0]-b[0]});for(q=0;q<e;++q)for(b=E[q],x=b[1],A=b[2],B=0;B<e;++B)A[B]&&(m[B]=x);E=n(e);for(q=0;q<e;++q)E[q].push(m[q]),E[m[q]].push(q);for(var b={},D=t(c,!1),q=0;q<e;++q)for(x=p[q],A=x.length,B=0;B<A;++B)c=x[B],F=x[(B+1)%A],I=Math.min(c,F)+":"+Math.max(c,F),I in b?(I=b[I],E[I].push(q),E[q].push(I),D[c]=D[F]=!0):
b[I]=q;B=[];c=t(e,-1);for(q=0;q<e;++q)m[q]!==q||h(p[q])?c[q]=-1:(B.push(q),c[q]=0);for(e=[];0<B.length;){q=B.pop();m=E[q];u(m,function(b,c){return b-c});var A=m.length,b=c[q],P;0===b&&(x=p[q],P=[x]);for(q=0;q<A;++q)x=m[q],0<=c[x]||(c[x]=b^1,B.push(x),0===b&&(x=p[x],h(x)||(x.reverse(),P.push(x))));0===b&&e.push(P)}return e};var d=a("edges-to-adjacency-list"),f=a("planar-dual"),k=a("point-in-big-polygon"),l=a("two-product"),y=a("robust-sum"),u=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,
"edges-to-adjacency-list":75,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":119,uniq:123}],96:[function(a,g,m){arguments[4][83][0].apply(m,arguments)},{dup:83}],97:[function(a,g,m){function t(){return!0}function n(a){return function(e,c){var d=a[e];return d?!!d.queryPoint(c,t):!1}}function d(a){for(var e={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],k=d[0][1],d=d[1][1],k=[Math.min(k,d),Math.max(k,d)];f in e?e[f].push(k):e[f]=[k]}a={};f=Object.keys(e);for(c=0;c<f.length;++c)a[f[c]]=
v(e[f[c]]);return n(a)}function f(a,e){return function(c){var d=r.le(e,c[0]);if(0>d)return 1;var f=a[d];if(!f)if(0<d&&e[d]===c[0])f=a[d-1];else return 1;for(d=1;f;){var k=f.key,g=u(c,k[0],k[1]);if(k[0][0]<k[1][0])if(0>g)f=f.left;else if(0<g)d=-1,f=f.right;else return 0;else if(0<g)f=f.left;else if(0>g)d=1,f=f.right;else return 0}return d}}function k(a){return 1}function l(a){return function(e){return a(e[0],e[1])?0:1}}function y(a,e){return function(c){return a(c[0],c[1])?0:e(c)}}g.exports=function(a){for(var e=
a.length,c=[],g=[],n=0;n<e;++n)for(var r=a[n],m=r.length,b=m-1,v=0;v<m;b=v++){var b=r[b],t=r[v];b[0]===t[0]?g.push([b,t]):c.push([b,t])}if(0===c.length)return 0===g.length?k:l(d(g));a=w(c);a=f(a.slabs,a.coordinates);return 0===g.length?a:y(d(g),a)};var u=a("robust-orientation")[3],w=a("slab-decomposition"),v=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":82,"robust-orientation":103,"slab-decomposition":116}],98:[function(a,g,m){var t=a("big-rat/add");
g.exports=function(a,d){for(var f=a.length,k=Array(f),g=0;g<f;++g)k[g]=t(a[g],d[g]);return k}},{"big-rat/add":34}],99:[function(a,g,m){g.exports=function(a){for(var d=Array(a.length),f=0;f<a.length;++f)d[f]=t(a[f]);return d};var t=a("big-rat")},{"big-rat":37}],100:[function(a,g,m){var t=a("big-rat"),n=a("big-rat/mul");g.exports=function(a,f){for(var k=t(f),g=a.length,m=Array(g),u=0;u<g;++u)m[u]=n(a[u],k);return m}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,g,m){var t=a("big-rat/sub");g.exports=
function(a,d){for(var f=a.length,k=Array(f),g=0;g<f;++g)k[g]=t(a[g],d[g]);return k}},{"big-rat/sub":49}],102:[function(a,g,m){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var h=d[f-1]=Array(a.length-1),k=0,b=0;k<a.length;++k)k!==c&&(h[b++]=a[f][k]);return d}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",n(a.slice(0,c)),",",n(a.slice(c)),")"].join("")}function d(a,c){if("m"===a.charAt(0)){if("w"===
c.charAt(0)){var f=a.split("[");return["w",c.substr(1),"m",f[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return d(c,a)}function f(a){if(2===a.length)return[["diff(",d(a[0][0],a[1][1]),",",d(a[1][0],a[0][1]),")"].join("")];for(var c=[],h=0;h<a.length;++h)c.push(["scale(",n(f(t(a,h))),",",h&1?"-":"",a[0][h],")"].join(""));return c}function k(a,c){for(var d=[],f=0;f<c-2;++f)d.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return n(d)}function l(a){for(var c=[],d=[],h=Array(a),g=
0;g<a;++g){h[g]=Array(a);for(var l=0;l<a;++l)h[g][l]=["m",l,"[",a-g-2,"]"].join("")}for(g=0;g<a;++g)h[0][g]="1",h[a-1][g]="w"+g;for(g=0;g<a;++g)0===(g&1)?c.push.apply(c,f(t(h,g))):d.push.apply(d,f(t(h,g)));c=n(c);d=n(d);h="exactInSphere"+a;l=[];for(g=0;g<a;++g)l.push("m"+g);l=["function ",h,"(",l.join(),"){"];for(g=0;g<a;++g){l.push("var w",g,"=",k(g,a),";");for(var b=0;b<a;++b)b!==g&&l.push("var w",g,"m",b,"=scale(w",g,",m",b,"[0]);")}l.push("var p=",c,",n=",d,",d=diff(p,n);return d[d.length-1];}return ",
h);return(new Function("sum","diff","prod","scale",l.join("")))(w,v,u,r)}function y(a){var c=h[a.length];c||(c=h[a.length]=l(a.length));return c.apply(void 0,a)}var u=a("two-product"),w=a("robust-sum"),v=a("robust-subtract"),r=a("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],c=["slow"],d=0;6>=d;++d)a.push("a"+d),c.push("o"+d);for(var f=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
d=2;6>=d;++d)f.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(f.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[y].concat(h));for(d=0;6>=d;++d)g.exports[d]=h[d]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],103:[function(a,g,m){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var h=
d[f-1]=Array(a.length-1),g=0,b=0;g<a.length;++g)g!==c&&(h[b++]=a[f][g]);return d}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",n(a.slice(0,c)),",",n(a.slice(c)),")"].join("")}function d(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],f=0;f<a.length;++f)c.push(["scale(",n(d(t(a,f))),",",f&1?"-":"",a[0][f],")"].join(""));return c}function f(a){for(var c=
[],f=[],h=Array(a),g=0;g<a;++g){h[g]=Array(a);for(var k=0;k<a;++k)h[g][k]=["m",k,"[",a-g-1,"]"].join("")}g=[];for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,d(t(h,k))):f.push.apply(f,d(t(h,k))),g.push("m"+k);c=n(c);f=n(f);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",c,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,l,u,w)}function k(a){var c=h[a.length];c||(c=h[a.length]=f(a.length));return c.apply(void 0,a)}var l=
a("two-product"),y=a("robust-sum"),u=a("robust-scale"),w=a("robust-subtract"),v=f(3),r=f(4),h=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,d){var f=(a[1]-d[1])*(c[0]-d[0]),h=(a[0]-d[0])*(c[1]-d[1]),g=f-h;if(0<f){if(0>=h)return g;f+=h}else if(0>f){if(0<=h)return g;f=-(f+h)}else return g;f*=3.3306690738754716E-16;return g>=f||g<=-f?g:v(a,c,d)},function(a,c,d,f){var h=a[0]-f[0],g=c[0]-f[0],b=d[0]-f[0],k=a[1]-f[1],l=c[1]-f[1],n=d[1]-f[1],m=a[2]-f[2],v=c[2]-f[2],
t=d[2]-f[2],u=g*n,w=b*l,b=b*k,n=h*n,h=h*l,k=g*k,g=m*(u-w)+v*(b-n)+t*(h-k),m=7.771561172376103E-16*((Math.abs(u)+Math.abs(w))*Math.abs(m)+(Math.abs(b)+Math.abs(n))*Math.abs(v)+(Math.abs(h)+Math.abs(k))*Math.abs(t));return g>m||-g>m?g:r(a,c,d,f)}];(function(){for(;5>=h.length;)h.push(f(h.length));for(var a=[],c=["slow"],d=0;5>=d;++d)a.push("a"+d),c.push("o"+d);for(var l=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;5>=d;++d)l.push("case ",d,":return o",
d,"(",a.slice(0,d).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(l.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[k].concat(h));for(d=0;5>=d;++d)g.exports[d]=h[d]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],104:[function(a,g,m){var t=a("robust-sum"),n=a("robust-scale");g.exports=function(a,f){if(1===a.length)return n(f,a[0]);if(1===
f.length)return n(a,f[0]);if(0===a.length||0===f.length)return[0];var g=[0];if(a.length<f.length)for(var l=0;l<a.length;++l)g=t(g,n(f,a[l]));else for(l=0;l<f.length;++l)g=t(g,n(a,f[l]));return g}},{"robust-scale":105,"robust-sum":108}],105:[function(a,g,m){var t=a("two-product"),n=a("two-sum");g.exports=function(a,f){var g=a.length;if(1===g)return g=t(a[0],f),g[0]?g:[g[1]];var l=Array(2*g),m=[.1,.1],u=[.1,.1],w=0;t(a[0],f,m);m[0]&&(l[w++]=m[0]);for(var v=1;v<g;++v){t(a[v],f,u);n(m[1],u[0],m);m[0]&&
(l[w++]=m[0]);var r=u[1],h=m[1],e=r+h,r=h-(e-r);m[1]=e;r&&(l[w++]=r)}m[1]&&(l[w++]=m[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":119,"two-sum":120}],106:[function(a,g,m){g.exports=function(a,d,f,g){var l=t(a,f,g),m=t(d,f,g);if(0<l&&0<m||0>l&&0>m)return!1;var u=t(f,a,d),w=t(g,a,d);if(0<u&&0<w||0>u&&0>w)return!1;if(0===l&&0===m&&0===u&&0===w){a:{for(l=0;2>l;++l){var m=a[l],u=d[l],w=Math.max(m,u),v=f[l],r=g[l],h=Math.min(v,r);if(Math.max(v,r)<Math.min(m,u)||w<h){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,g,m){g.exports=function(a,g){var d=a.length|0,f=g.length|0;if(1===d&&1===f){var f=a[0],k=-g[0],d=f+k,l=d-f,d=(f=f-(d-l)+(k-l))?[f,d]:[d];return d}var k=Array(d+f),m=l=0,u=0,w=Math.abs,v=a[m],r=w(v),h=-g[u],e=w(h),c,p;r<e?(p=v,m+=1,m<d&&(v=a[m],r=w(v))):(p=h,u+=1,u<f&&(h=-g[u],e=w(h)));m<d&&r<e||u>=f?(c=v,m+=1,m<d&&(v=a[m],r=w(v))):(c=h,u+=1,u<f&&(h=-g[u],e=w(h)));var q=c+p;p-=q-c;for(var z=q,E;m<d&&u<f;)r<e?(c=v,m+=1,m<
d&&(v=a[m],r=w(v))):(c=h,u+=1,u<f&&(h=-g[u],e=w(h))),q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c;for(;m<d;)c=v,q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c,m+=1,m<d&&(v=a[m]);for(;u<f;)c=h,q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c,u+=1,u<f&&(h=-g[u]);p&&(k[l++]=p);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],108:[function(a,g,m){g.exports=function(a,g){var d=a.length|0,f=g.length|0;if(1===d&&1===f){var f=a[0],
k=g[0],d=f+k,l=d-f,d=(f=f-(d-l)+(k-l))?[f,d]:[d];return d}var k=Array(d+f),m=l=0,u=0,w=Math.abs,v=a[m],r=w(v),h=g[u],e=w(h),c,p;r<e?(p=v,m+=1,m<d&&(v=a[m],r=w(v))):(p=h,u+=1,u<f&&(h=g[u],e=w(h)));m<d&&r<e||u>=f?(c=v,m+=1,m<d&&(v=a[m],r=w(v))):(c=h,u+=1,u<f&&(h=g[u],e=w(h)));var q=c+p;p-=q-c;for(var z=q,E;m<d&&u<f;)r<e?(c=v,m+=1,m<d&&(v=a[m],r=w(v))):(c=h,u+=1,u<f&&(h=g[u],e=w(h))),q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c;for(;m<d;)c=v,q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=
z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c,m+=1,m<d&&(v=a[m]);for(;u<f;)c=h,q=c+p,c=q-c,(c=p-c)&&(k[l++]=c),c=z+q,E=c-z,p=c-E,q-=E,z-=p,p=z+q,z=c,u+=1,u<f&&(h=g[u]);p&&(k[l++]=p);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],109:[function(a,g,m){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,g,m){arguments[4][52][0].apply(m,arguments)},{dup:52}],111:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var d=this.roots;d[a]!==a;){var f=d[a];d[a]=d[f];a=f}return a};t.prototype.link=function(a,d){var f=this.find(a),g=this.find(d);if(f!==g){var l=this.ranks,m=this.roots,t=l[f],w=l[g];t<w?m[f]=g:w<t?m[g]=f:(m[g]=f,++l[f])}}},{}],112:[function(a,g,m){function t(a,d){var f=a.length,e=a.length-d.length,
c=Math.min;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-d[0];case 2:return(f=a[0]+a[1]-d[0]-d[1])?f:c(a[0],a[1])-c(d[0],d[1]);case 3:var e=a[0]+a[1],g=d[0]+d[1];if(f=e+a[2]-(g+d[2]))return f;var k=c(a[0],a[1]),l=c(d[0],d[1]);return(f=c(k,a[2])-c(l,d[2]))?f:c(k+a[2],e)-c(l+d[2],g);default:c=a.slice(0);c.sort();g=d.slice(0);g.sort();for(k=0;k<f;++k)if(e=c[k]-g[k])return e;return 0}}function n(a,d){return t(a[0],d[0])}function d(a,d){if(d){for(var f=a.length,e=Array(f),c=0;c<f;++c)e[c]=
[a[c],d[c]];e.sort(n);for(c=0;c<f;++c)a[c]=e[c][0],d[c]=e[c][1]}else a.sort(t);return a}function f(a){if(0===a.length)return[];for(var d=1,f=a.length,e=1;e<f;++e){var c=a[e];t(c,a[e-1])&&(e===d?d++:a[d++]=c)}a.length=d;return a}function k(a,d){for(var f=0,e=a.length-1,c=-1;f<=e;){var g=f+e>>1,k=t(a[g],d);0>=k?(0===k&&(c=g),f=g+1):0<k&&(e=g-1)}return c}function l(a,d){for(var f=Array(a.length),e=0,c=f.length;e<c;++e)f[e]=[];for(var c=[],e=0,g=d.length;e<g;++e)for(var l=d[e],n=l.length,m=1,b=1<<n;m<
b;++m){c.length=u.popCount(m);for(var w=0,y=0;y<n;++y)m&1<<y&&(c[w++]=l[y]);w=k(a,c);if(!(0>w))for(;!(f[w++].push(e),w>=a.length||0!==t(a[w],c)););}return f}function y(a,f){if(0>f)return[];for(var h=[],e=(1<<f+1)-1,c=0;c<a.length;++c)for(var g=a[c],k=e;k<1<<g.length;k=u.nextCombination(k)){for(var l=Array(f+1),n=0,b=0;b<g.length;++b)k&1<<b&&(l[n++]=g[b]);h.push(l)}return d(h)}"use restrict";var u=a("bit-twiddle"),w=a("union-find");m.dimension=function(a){for(var d=0,f=Math.max,e=0,c=a.length;e<c;++e)d=
f(d,a[e].length);return d-1};m.countVertices=function(a){for(var d=-1,f=Math.max,e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,l=g.length;k<l;++k)d=f(d,g[k]);return d+1};m.cloneCells=function(a){for(var d=Array(a.length),f=0,e=a.length;f<e;++f)d[f]=a[f].slice(0);return d};m.compareCells=t;m.normalize=d;m.unique=f;m.findCell=k;m.incidence=l;m.dual=function(a,d){if(!d)return l(f(y(a,0)),a,0);for(var h=Array(d),e=0;e<d;++e)h[e]=[];for(var e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,n=g.length;k<n;++k)h[g[k]].push(e);
return h};m.explode=function(a){for(var f=[],h=0,e=a.length;h<e;++h)for(var c=a[h],g=c.length|0,k=1,l=1<<g;k<l;++k){for(var n=[],b=0;b<g;++b)k>>>b&1&&n.push(c[b]);f.push(n)}return d(f)};m.skeleton=y;m.boundary=function(a){for(var f=[],h=0,e=a.length;h<e;++h)for(var c=a[h],g=0,k=c.length;g<k;++g){for(var l=Array(c.length-1),n=0,b=0;n<k;++n)n!==g&&(l[b++]=c[n]);f.push(l)}return d(f)};m.connectedComponents=function(a,g){if(g){for(var h=new w(g),e=0;e<a.length;++e)for(var c=a[e],l=0;l<c.length;++l)for(var n=
l+1;n<c.length;++n)h.link(c[l],c[n]);c=[];l=h.ranks;for(e=0;e<l.length;++e)l[e]=-1;for(e=0;e<a.length;++e)n=h.find(a[e][0]),0>l[n]?(l[n]=c.length,c.push([a[e].slice(0)])):c[l[n]].push(a[e].slice(0));return c}h=f(d(y(a,0)));e=new w(h.length);for(c=0;c<a.length;++c)for(l=a[c],n=0;n<l.length;++n)for(var m=k(h,[l[n]]),t=n+1;t<l.length;++t)e.link(m,k(h,[l[t]]));l=[];n=e.ranks;for(c=0;c<n.length;++c)n[c]=-1;for(c=0;c<a.length;++c)m=e.find(k(h,[a[c][0]])),0>n[m]?(n[m]=l.length,l.push([a[c].slice(0)])):l[n[m]].push(a[c].slice(0));
return l}},{"bit-twiddle":110,"union-find":111}],113:[function(a,g,m){g.exports=function(a,f,g){function l(a){if(b[a])return Infinity;var c=q[a],d=z[a];if(0>c||0>d)return Infinity;c=f[c];d=f[d];return Math.abs(t(f[a],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2))}function m(a,b){var c=B[a],d=B[b];B[a]=d;B[b]=c;A[c]=b;A[d]=a}function u(a){for(var b=E[B[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<N){var h=E[B[d]];h<c&&(f=d,c=h)}e<N&&E[B[e]]<c&&(f=e);if(f===a)return a;m(a,f);a=f}}function w(a){for(var b=
E[B[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[B[c]])m(a,c),a=c;else return a}}function v(){if(0<N){var a=B[0];m(0,N-1);--N;u(0);return a}return-1}function r(a,b){var c=B[a];if(E[c]===b)return a;E[c]=-Infinity;w(a);v();E[c]=b;N+=1;return w(N-1)}function h(a){if(!b[a]){b[a]=!0;var c=q[a];a=z[a];0<=q[a]&&(q[a]=c);0<=z[c]&&(z[c]=a);0<=A[c]&&r(A[c],l(c));0<=A[a]&&r(A[a],l(a))}}function e(a,c){if(0>a[c])return c;var d=c,e=c;do{var f=a[e];if(!b[e]||0>f||f===e)break;e=f;f=a[e];if(!b[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=c;d!==e;d=a[d])a[d]=e;return e}for(var c=f.length,p=a.length,q=Array(c),z=Array(c),E=Array(c),b=Array(c),x=0;x<c;++x)q[x]=z[x]=-1,E[x]=Infinity,b[x]=!1;for(x=0;x<p;++x){var F=a[x];if(2!==F.length)throw Error("Input must be a graph");var I=F[1],F=F[0];z[F]=-1!==z[F]?-2:I;q[I]=-1!==q[I]?-2:F}for(var B=[],A=Array(c),x=0;x<c;++x)Infinity>(E[x]=l(x))?(A[x]=B.length,B.push(x)):A[x]=-1;for(var N=B.length,x=N>>1;0<=x;--x)u(x);for(;;){x=v();if(0>x||E[x]>g)break;h(x)}g=
[];for(x=0;x<c;++x)b[x]||(A[x]=g.length,g.push(f[x].slice()));var H=[];a.forEach(function(a){var b=e(q,a[0]);a=e(z,a[1]);0<=b&&0<=a&&b!==a&&(b=A[b],a=A[a],b!==a&&H.push([b,a]))});n.unique(n.normalize(H));return{positions:g,edges:H}};var t=a("robust-orientation"),n=a("simplicial-complex")},{"robust-orientation":103,"simplicial-complex":112}],114:[function(a,g,m){function t(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var m=Math.min(f[0][1],f[1][1]),t=Math.max(f[0][1],f[1][1]);return l<m?l-m:g>t?g-t:l-t}a[0][1]<a[1][1]?(t=a[0],m=a[1]):(t=a[1],m=a[0]);return(t=n(l,g,t))?t:(t=n(l,g,m))?t:m-l}g.exports=function(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else return t(f,a);var m,u;if(a[0][0]<a[1][0])m=a[0],u=a[1];else if(a[0][0]>a[1][0])m=a[1],u=a[0];else return-t(a,f);var w=n(g,l,u),v=n(g,l,m);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;
w=n(u,m,l);v=n(u,m,g);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;return l[0]-u[0]};var n=a("robust-orientation")},{"robust-orientation":103}],115:[function(a,g,m){arguments[4][83][0].apply(m,arguments)},{dup:83}],116:[function(a,g,m){function t(a,d,f){this.slabs=a;this.coordinates=d;this.horizontal=f}function n(a,d){return a.y-d}function d(a,f){for(var h=null;a;){var e=a.key,c,g;e[0][0]<e[1][0]?(c=e[0],g=e[1]):(c=e[1],g=e[0]);c=u(c,g,f);if(0>c)a=a.left;else if(0<c)if(f[0]!==
e[1][0])h=a,a=a.right;else{if(e=d(a.right,f))return e;a=a.left}else{if(f[0]!==e[1][0])return a;if(e=d(a.right,f))return e;a=a.left}}return h}function f(a,d,f,e){this.y=a;this.index=d;this.start=f;this.closed=e}function k(a,d,f,e){this.x=a;this.segment=d;this.create=f;this.index=e}g.exports=function(a){for(var d=a.length,h=2*d,e=Array(h),c=0;c<d;++c){var g=a[c],l=g[0][0]<g[1][0];e[2*c]=new k(g[0][0],g,l,c);e[2*c+1]=new k(g[1][0],g,!l,c)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);d=[];g=[];l=[];for(c=0;c<h;){for(var n=e[c].x,m=[];c<h;){var b=e[c];if(b.x!==n)break;c+=1;b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(m.push(new f(b.segment[0][1],b.index,!0,!0)),m.push(new f(b.segment[1][1],b.index,!1,!1))):(m.push(new f(b.segment[1][1],b.index,!0,!1)),m.push(new f(b.segment[0][1],b.index,!1,!0)))):a=b.create?a.insert(b.segment,b.index):a.remove(b.segment)}d.push(a.root);
g.push(n);l.push(m)}return new t(d,g,l)};var l=a("binary-search-bounds"),y=a("functional-red-black-tree"),u=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var f=l.le(this.coordinates,a[0]);if(0>f)return-1;var h=d(this.slabs[f],a),e=-1;h&&(e=h.value);if(this.coordinates[f]===a[0]){var c=null;h&&(c=h.key);0<f&&(h=d(this.slabs[f-1],a))&&(c?0<w(h.key,c)&&(c=h.key,e=h.value):(e=h.value,c=h.key));h=this.horizontal[f];if(0<h.length){var g=l.ge(h,a[1],n);if(g<h.length){f=
h[g];if(a[1]===f.y){if(f.closed)return f.index;for(;g<h.length-1&&h[g+1].y===a[1];)if(g+=1,f=h[g],f.closed)return f.index;if(f.y===a[1]&&!f.start){g+=1;if(g>=h.length)return e;f=h[g]}}f.start?c?(a=u(c[0],c[1],[a[0],f.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(e=f.index)):e=f.index:f.y!==a[1]&&(e=f.index)}}}return e}},{"./lib/order-segments":114,"binary-search-bounds":115,"functional-red-black-tree":76,"robust-orientation":103}],117:[function(a,g,m){function t(a,f){var g=a.length,k=["'use strict';"],m="surfaceNets"+
a.join("_")+"d"+f;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&k.push("getters:[0],");for(var r=[],h=[],e=0;e<g;++e)r.push("d"+e),h.push("d"+e);for(e=0;e<1<<g;++e)r.push("v"+e),h.push("v"+e);for(e=0;e<1<<g;++e)r.push("p"+e),h.push("p"+e);r.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(e=0;e<1<<g;++e)r.push("(p"+e+"<<"+e+")");k.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],c=[];128>=1<<(1<<g)?(k.push("switch(m){"),c=k):k.push("switch(m>>>7){");for(e=0;e<1<<(1<<g);++e){128<1<<(1<<g)&&0===e%128&&(0<r.length&&c.push("}}"),c="vExtra"+r.length,k.push("case ",e>>>7,":",c,"(m&0x7f,",h.join(),");break;"),c=["function ",c,"(m,",h.join(),"){switch(m){"],r.push(c));c.push("case ",e&127,":");for(var p=Array(g),q=Array(g),t=Array(g),E=Array(g),b=0,x=0;x<g;++x)p[x]=[],q[x]=[],t[x]=0,E[x]=0;for(x=0;x<1<<g;++x)for(var F=
0;F<g;++F){var I=x^1<<F;if(!(I>x)&&!(e&1<<I)!==!(e&1<<x)){var B=1;e&1<<I?q[F].push("v"+I+"-v"+x):(q[F].push("v"+x+"-v"+I),B=-B);0>B?(p[F].push("-v"+x+"-v"+I),t[F]+=2):(p[F].push("v"+x+"+v"+I),t[F]-=2);b+=1;for(B=0;B<g;++B)B!==F&&(I&1<<B?E[B]+=1:--E[B])}}x=[];for(F=0;F<g;++F)0===p[F].length?x.push("d"+F+"-0.5"):(I="",0>t[F]?I=t[F]+"*c":0<t[F]&&(I="+"+t[F]+"*c"),x.push("d"+F+"-"+(.5+E[F]/b*.5)+"-"+p[F].length/b*.5+"*("+p[F].join("+")+I+")/("+q[F].join("+")+")"));c.push("a.push([",x.join(),"]);","break;")}k.push("}},");
0<r.length&&c.push("}}");h=[];for(e=0;e<1<<g-1;++e)h.push("v"+e);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=d(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",m,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
m,";");for(e=0;e<r.length;++e)k.push(r[e].join(""));return(new Function("genContour",k.join("")))(n)}g.exports=function(a,d){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=f(a,d),n=g.length,m=Array(n),r=Array(n),h=0;h<n;++h)m[h]=[g[h]],r[h]=[h];return{positions:m,cells:r}}g=a.order.join()+"-"+a.dtype;n=k[g];d=+d||0;n||(n=k[g]=t(a.order,a.dtype));return n(a,d)};var n=a("ndarray-extract-contour"),d=a("triangulate-hypercube"),f=a("zero-crossings"),k={}},{"ndarray-extract-contour":88,
"triangulate-hypercube":118,"zero-crossings":127}],118:[function(a,g,m){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(d(a+1))|0,l=[],m=0;m<g;++m){for(var u=t.unrank(a,m),w=[0],v=0,r=0;r<u.length;++r)v+=1<<u[r],w.push(v);1>n(u)&&(w[0]=v,w[a]=0);l.push(w)}return l};var t=a("permutation-rank"),n=a("permutation-parity"),d=a("gamma")},{gamma:77,"permutation-parity":91,"permutation-rank":92}],119:[function(a,g,m){g.exports=function(a,d,f){var g=a*d,l=t*a,l=l-(l-a);a-=l;
var m=t*d,m=m-(m-d);d-=m;d=a*d-(g-l*m-a*m-l*d);return f?(f[0]=d,f[1]=g,f):[d,g]};var t=+(Math.pow(2,27)+1)},{}],120:[function(a,g,m){g.exports=function(a,g,d){var f=a+g,k=f-a;g-=k;a-=f-k;return d?(d[0]=a+g,d[1]=f,d):[a+g,f]}},{}],121:[function(a,g,m){(function(g,n){function d(a){if(a){var b=q.log2(a.length||a.byteLength);x[b].push(a)}}function f(a){a=q.nextPow2(a);var b=q.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function k(a){return new Uint8Array(f(a),0,a)}function l(a){return new Uint16Array(f(2*
a),0,a)}function y(a){return new Uint32Array(f(4*a),0,a)}function u(a){return new Int8Array(f(a),0,a)}function w(a){return new Int16Array(f(2*a),0,a)}function v(a){return new Int32Array(f(4*a),0,a)}function r(a){return new Float32Array(f(4*a),0,a)}function h(a){return new Float64Array(f(8*a),0,a)}function e(a){return E?new Uint8ClampedArray(f(a),0,a):k(a)}function c(a){return new DataView(f(a),0,a)}function p(a){a=q.nextPow2(a);var b=q.log2(a),b=F[b];return 0<b.length?b.pop():new n(a)}var q=a("bit-twiddle"),
z=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var E="undefined"!==typeof Uint8ClampedArray,b=g.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=z([32,0]));b.BUFFER||(b.BUFFER=z([32,0]));var x=b.DATA,F=b.BUFFER;m.free=function(a){if(n.isBuffer(a))F[q.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=q.log2(a.length||a.byteLength)|0;x[b].push(a)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeInt8=m.freeInt16=m.freeInt32=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(a){d(a.buffer)};m.freeArrayBuffer=d;m.freeBuffer=function(a){F[q.log2(a.length)].push(a)};m.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return f(a);switch(b){case "uint8":return k(a);case "uint16":return l(a);case "uint32":return y(a);case "int8":return u(a);
case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return r(a);case "double":case "float64":return h(a);case "uint8_clamped":return e(a);case "buffer":return p(a);case "data":case "dataview":return c(a);default:return null}};m.mallocArrayBuffer=f;m.mallocUint8=k;m.mallocUint16=l;m.mallocUint32=y;m.mallocInt8=u;m.mallocInt16=w;m.mallocInt32=v;m.mallocFloat32=m.mallocFloat=r;m.mallocFloat64=m.mallocDouble=h;m.mallocUint8Clamped=e;m.mallocDataView=c;m.mallocBuffer=p;m.clearCache=
function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.UINT8C[a].length=0,x[a].length=0,F[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:74}],122:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var d=
0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";g.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var d=a,f=this.roots;f[a]!==a;)a=f[a];for(;f[d]!==a;){var g=f[d];f[d]=a;d=g}return a};a.link=function(a,d){var f=this.find(a),g=this.find(d);if(f!==g){var l=this.ranks,m=this.roots,t=l[f],w=l[g];t<w?m[f]=g:w<t?m[g]=f:(m[g]=f,
++l[f])}}},{}],123:[function(a,g,m){g.exports=function(a,g,d){if(0===a.length)return a;if(g){d||a.sort(g);d=1;for(var f=a.length,k=a[0],l=a[0],m=1;m<f;++m)l=k,k=a[m],g(k,l)&&(m===d?d++:a[d++]=k);a.length=d;return a}d||a.sort();g=1;d=a.length;f=a[0];k=a[0];for(l=1;l<d;++l)k=f,f=a[l],f!==k&&(l===g?g++:a[g++]=f);a.length=g;return a}},{}],124:[function(a,g,m){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||n,g.context||d,g)};var t=a("./lib/vtext"),n=null,d=null;"undefined"!==
typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,d=n.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,g,m){function t(a,d,f){for(var e=d.textAlign||"start",c=d.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],l=a.length,m=0;m<l;++m)for(var b=a[m],n=0;2>n;++n)g[n]=Math.min(g[n],b[n])|0,k[n]=Math.max(k[n],b[n])|0;var t=0;switch(e){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
e+"'");}var u=0;switch(c){case "hanging":case "top":u=-g[1];break;case "middle":u=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":u=-3*f;break;case "bottom":u=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+c+"'");}var w=1/f;"lineHeight"in d?w*=+d.lineHeight:"width"in d?w=d.width/(k[0]-g[0]):"height"in d&&(w=d.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+u)]})}function n(a,d,g,e){a=f(a,128);e=e?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(e.positions,d,g);a=e.edges;e="ccw"===d.orientation;y(g,a);if(d.polygons||d.polygon||d.polyline){d=w(a,g);a=Array(d.length);for(var c=0;c<d.length;++c){for(var k=d[c],m=Array(k.length),n=0;n<k.length;++n){for(var E=k[n],b=Array(E.length),x=0;x<E.length;++x)b[x]=g[E[x]].slice();e&&b.reverse();m[n]=b}a[c]=m}return a}return d.triangles||d.triangulate||d.triangle?{cells:u(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function d(a,d,f){try{return n(a,
d,f,!0)}catch(e){}try{return n(a,d,f,!1)}catch(e){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,f,g,e){var c=e.size||64;g.font=c+"px "+(e.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(a).width+2*c)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var m=3*c;f.height<m&&(f.height=m);
g.fillStyle="#000";g.fillRect(0,0,f.width,f.height);g.fillStyle="#fff";g.fillText(a,c,2*c);a=g.getImageData(0,0,l,m);l=k(a.data,[m,l,4]).pick(-1,-1,0).transpose(1,0);return d(l,e,c)};g.exports.processPixels=d;var f=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),y=a("clean-pslg"),u=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:61,"clean-pslg":66,ndarray:89,"planar-graph-to-polyline":95,"simplify-planar-graph":113,"surface-nets":117}],126:[function(a,g,m){g.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":70}],127:[function(a,g,m){g.exports=function(a,d){var f=[];d=+d||0;t(a.hi(a.shape[0]-1),f,d);return f};var t=a("./lib/zc-core")},{"./lib/zc-core":126}],128:[function(a,
g,m){function t(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var n=a("./lib/util/extend"),d=a("./lib/dynamic"),f=a("./lib/util/raf"),k=a("./lib/util/clock"),l=a("./lib/strings"),y=a("./lib/webgl"),u=a("./lib/extension"),w=a("./lib/limits"),v=a("./lib/buffer"),r=a("./lib/elements"),h=a("./lib/texture"),e=a("./lib/renderbuffer"),c=a("./lib/framebuffer"),p=a("./lib/attribute"),q=a("./lib/shader"),z=a("./lib/read"),E=a("./lib/core"),b=a("./lib/stats"),x=a("./lib/timer");g.exports=function(a){function g(){if(0===
aa.length)L&&L.update(),ia=null;else{ia=f.next(g);K();for(var a=aa.length-1;0<=a;--a){var b=aa[a];b&&b(S,null,0)}C.flush();L&&L.update()}}function m(){!ia&&0<aa.length&&(ia=f.next(g))}function A(){ia&&(f.cancel(g),ia=null)}function N(a){a.preventDefault();A();da.forEach(function(a){a()})}function H(a){C.getError();M.restore();ha.restore();Z.restore();ea.restore();na.restore();ma.restore();L&&L.restore();ba.procs.refresh();m();fa.forEach(function(a){a()})}function D(a){function b(a){var c={},e={};
Object.keys(a).forEach(function(b){var f=a[b];d.isDynamic(f)?e[b]=d.unbox(f,b):c[b]=f});return{dynamic:e,"static":c}}function c(a){for(;p.length<a;)p.push(null);return p}var e=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||{}),h=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);
b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var e=ba.compile(h,g,f,e,a),k=e.draw,l=e.batch,m=e.scope,p=[];return n(function(a,b){var d;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function P(a){aa.push(a);m();return{cancel:function(){function b(){var a=t(aa,b);aa[a]=aa[aa.length-1];--aa.length;0>=aa.length&&A()}var c=t(aa,a);aa[c]=b}}}function J(){var a=ja.viewport,b=ja.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=C.drawingBufferWidth;S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=
a[3]=b[3]=C.drawingBufferHeight}function K(){S.tick+=1;S.time=G();J();ba.procs.poll()}function R(){J();ba.procs.refresh();L&&L.update()}function G(){return(k()-Y)/1E3}a=y(a);if(!a)return null;var C=a.gl,O=C.getContextAttributes();C.isContextLost();var M=u(C,a);if(!M)return null;var V=l(),X=b(),U=M.extensions,L=x(C,U),Y=k(),T=C.drawingBufferWidth,W=C.drawingBufferHeight,S={tick:0,time:0,viewportWidth:T,viewportHeight:W,framebufferWidth:T,framebufferHeight:W,drawingBufferWidth:T,drawingBufferHeight:W,
pixelRatio:a.pixelRatio},Q=w(C,U),Z=v(C,X,a),ca=r(C,U,Z,X),T=p(C,U,Q,Z,V),ha=q(C,V,X,a),ea=h(C,U,Q,function(){ba.procs.poll()},S,X,a),na=e(C,U,Q,X,a),ma=c(C,U,Q,ea,na,X),ba=E(C,V,U,Q,Z,ca,ea,ma,{},T,ha,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,L,a),V=z(C,ma,ba.procs.poll,S,O,U),ja=ba.next,ka=C.canvas,aa=[],da=[],fa=[],ga=[a.onDestroy],ia=null;ka&&(ka.addEventListener("webglcontextlost",N,!1),ka.addEventListener("webglcontextrestored",H,!1));R();O=n(D,{clear:function(a){var b=0;
ba.procs.poll();var c=a.color;c&&(C.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(C.clearDepth(+a.depth),b|=256);"stencil"in a&&(C.clearStencil(a.stencil|0),b|=1024);C.clear(b)},prop:d.define.bind(null,1),context:d.define.bind(null,2),"this":d.define.bind(null,3),draw:D({}),buffer:function(a){return Z.create(a,34962,!1,!1)},elements:function(a){return ca.create(a,!1)},texture:ea.create2D,cube:ea.createCube,renderbuffer:na.create,framebuffer:ma.create,framebufferCube:ma.createCube,
attributes:O,frame:P,on:function(a,b){var c;switch(a){case "frame":return P(b);case "lost":c=da;break;case "restore":c=fa;break;case "destroy":c=ga}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Q,hasExtension:function(a){return 0<=Q.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){aa.length=0;A();ka&&(ka.removeEventListener("webglcontextlost",N),ka.removeEventListener("webglcontextrestored",H));ha.clear();ma.clear();
na.clear();ea.clear();ca.clear();Z.clear();L&&L.clear();ga.forEach(function(a){a()})},_gl:C,_refresh:R,poll:function(){K();L&&L.update()},now:G,stats:X});a.onDone(null,O);return O}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,
"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>