<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,m=[];!(g=a.next()).done;)m.push(g.value);return m};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function m(){}m.prototype=g.prototype;a.prototype=new m;a.prototype.constructor=a;for(var t in g)if($jscomp.global.Object.defineProperties){var p=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);p&&$jscomp.global.Object.defineProperty(a,t,p)}else a[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var m=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},p=(t.next=function(){if(m<a.length){var e=m++;return{value:g(e,a[e]),done:!1}}p.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return p},t);return p};
$jscomp.array.findInternal_=function(a,g,m){a instanceof String&&(a=String(a));for(var t=a.length,p=0;p<t;p++){var e=a[p];if(g.call(m,e,p,a))return{i:p,v:e}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,m){g=void 0===g?function(b){return b}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var p;!(p=a.next()).done;)t.push(g.call(m,p.value))}else{p=a.length;for(var e=0;e<p;e++)t.push(g.call(m,a[e]))}return t};$jscomp.array.of=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,m){var t=this.length;a=Number(a);g=Number(g);m=Number(null!=m?m:t);if(a<g)for(m=Math.min(m,t);g<m;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(m=Math.min(m,t+g-a),a+=m-g;m>g;)--m in this?this[--a]=this[m]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,m){null!=m&&a.length||(m=this.length||0);m=Number(m);for(g=Number((void 0===g?0:g)||0);g<m;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),m=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=m.get(g)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var t=m.entries(),p=t.next();if(p.done||p.value[0]!=g||"s"!=p.value[1])return!1;p=t.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!t.next().done?!1:!0}catch(e){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var m=this.maybeGetEntry_(a),t=m.id,p=m.list,m=m.entry;p||(p=this.data_[t]=[]);m?m.value=g:(m={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},p.push(m),this.head_.previous.next=m,this.head_.previous=m,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var m=g.list,t=g.index;return(g=g.entry)&&m?(m.splice(t,1),m.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),m=this.data_[g];if(m)for(var t=0;t<m.length;t++){var p=m[t];if(a!==a&&p.key!==p.key||a===p.key)return{id:g,list:m,index:t,entry:p}}return{id:g,list:m,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var m=$jscomp.makeIterator(this.entries()),t=m.next();!t.done;t=m.next())t=t.value,a.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,m=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(m){for(;m.head!=g.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:a(m)};m=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,m){Object.defineProperty(a,g,{value:String(m)})}:function(a,g,m){a[g]=String(m)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var m=a&65535,t=g&65535;return m*t+((a>>>16&65535)*t+m*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,p=0,e=1;p!=t;)g*=a,e*=-1,t=(p=t)+e*g/++m;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,p=0;p!=t;)g*=a/++m,t=(p=t)+g;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,m){for(var t=[],p=2;p<arguments.length;++p)t[p-2]=arguments[p];a=Number(a);g=Number(g);for(var e=Math.max(Math.abs(a),Math.abs(g)),b=$jscomp.makeIterator(t),p=b.next();!p.done;p=b.next())e=Math.max(e,Math.abs(p.value));if(1E100<e||1E-100>e){a/=e;g/=e;b=a*a+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p)/e,b+=p*p;return Math.sqrt(b)*e}e=a*a+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p),e+=
p*p;return Math.sqrt(e)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var m=[],t=1;t<arguments.length;++t)m[t-1]=arguments[t];m=$jscomp.makeIterator(m);for(t=m.next();!t.done;t=m.next())if(t=t.value)for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(a[p]=t[p]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),m=a.next();if(m.done||m.value[0]!=g||m.value[1]!=g)return!1;m=a.next();return m.done||m.value[0]==g||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var m=this;this.map_.forEach(function(t){return a.call(g,t,t,m)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];for(var m="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?m+=String.fromCharCode(t):(t-=65536,m+=String.fromCharCode(t>>>10&1023|55296),m+=String.fromCharCode(t&1023|56320))}return m};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var m="";a;)if(a&1&&(m+=g),a>>>=1)g+=g;return m};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),m=g.length;a=Number(a)||0;if(0<=a&&a<m){a|=0;var t=g.charCodeAt(a);if(55296>t||56319<t||a+1===m)return t;a=g.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var m=this.toString();a+="";for(var t=m.length,p=a.length,e=Math.max(0,Math.min(g|0,m.length)),b=0;b<p&&e<t;)if(m[e++]!=a[b++])return!1;return b>=p};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var m=this.toString();a+="";void 0===g&&(g=m.length);for(var t=Math.max(0,Math.min(g|0,m.length)),p=a.length;0<p&&0<t;)if(m[--t]!=a[--p])return!1;return 0>=p};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,m,t){function p(b,q){if(!m[b]){if(!g[b]){var y="function"==typeof require&&require;if(!q&&y)return y(b,!0);if(e)return e(b,!0);y=Error("Cannot find module '"+b+"'");throw y.code="MODULE_NOT_FOUND",y;}y=m[b]={exports:{}};g[b][0].call(y.exports,function(e){var q=g[b][1][e];return p(q?q:e)},y,y.exports,e$$0,g,m,t)}return m[b].exports}for(var e="function"==typeof require&&require,b=0;b<t.length;b++)p(t[b]);return p})({1:[function(a,g,m){g=a("../regl")();m=a("vectorize-text");var t=a("gl-mat4/perspective"),
p=a("gl-mat4/lookAt");a=m("hello regl!",{textAlign:"center",textBaseline:"middle"});var e=g.texture({copy:!0,min:"linear",mag:"linear"}),b=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:e,t:function(b){return.001*b.tick}},depth:{enable:!1},count:3}),k=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(b){return.01*b.tick},view:function(b){b=.01*b.tick;return p([],[5*Math.sin(b),0,-5*Math.cos(b)],[0,0,0],[0,-1,0])},projection:function(b){return t([],Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){b();k();e({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":79,"gl-mat4/perspective":80,"vectorize-text":124}],2:[function(a,g,m){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(a,e,b,k,q){a=b.maxAttributes;e=Array(a);for(b=0;b<a;++b)e[b]=new t;return{Record:t,scope:{},state:e}}},{}],3:[function(a,g,m){function t(b){return w[Object.prototype.toString.call(b)]|0}function p(b,f){for(var d=0;d<f.length;++d)b[d]=f[d]}function e(b,f,d,e,k,q,a){for(var c=0,x=0;x<d;++x)for(var r=0;r<e;++r)b[c++]=f[k*x+q*r+a]}function b(b,f,d){for(var e=0,k=0;k<f.length;++k)for(var q=f[k],a=0;a<
d;++a)b[e++]=q[a]}var k=a("./util/is-typed-array"),q=a("./util/is-ndarray"),y=a("./util/values"),u=a("./util/pool"),w=a("./constants/arraytypes.json"),v=a("./constants/dtypes.json"),r=a("./constants/usage.json");g.exports=function(h,f){function d(c){this.id=C++;this.buffer=h.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function l(c,b,d){c.byteLength=b.byteLength;h.bufferData(c.type,b,d)}function a(c,d,f,h,x){c.usage=f;if(Array.isArray(d))c.dtype=h||
5126,0<d.length&&(Array.isArray(d[0])?(c.dimension=d[0].length,h=u.allocType(c.dtype,d.length*c.dimension),b(h,d,c.dimension),l(c,h,f),u.freeType(h)):"number"===typeof d[0]?(c.dimension=x,h=u.allocType(c.dtype,d.length),p(h,d),l(c,h,f),u.freeType(h)):k(d[0])&&(c.dimension=d[0].length,c.dtype=h||t(d[0])||5126,h=u.allocType(c.dtype,d.length*c.dimension),b(h,d,c.dimension),l(c,h,f),u.freeType(h)));else if(k(d))c.dtype=h||t(d),c.dimension=x,l(c,d,f);else if(q(d)){var n=d.shape,r=d.stride;x=d.offset;var z=
0,v=0,C=0,w=0;1===n.length?(z=n[0],v=1,C=r[0],w=0):2===n.length&&(z=n[0],v=n[1],C=r[0],w=r[1]);c.dtype=h||t(d.data)||5126;c.dimension=v;h=u.allocType(c.dtype,z*v);e(h,d.data,z,v,C,w,x);l(c,h,f);u.freeType(h)}}function z(b){f.bufferCount--;var d=b.buffer;h.isBuffer(d)&&h.deleteBuffer(d);b.buffer=null;delete c[b.id]}var C=0,c={};d.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)};d.prototype.destroy=function(){z(this)};var x=[];return{create:function(l,x,C){function w(c){var b=35044,d=
null,f=0,e=0,l=1;Array.isArray(c)||k(c)||q(c)?d=c:"number"===typeof c?f=c|0:c&&("data"in c&&(d=c.data),"usage"in c&&(b=r[c.usage]),"type"in c&&(e=v[c.type]),"dimension"in c&&(l=c.dimension|0),"length"in c&&(f=c.length|0));y.bind();d?a(y,d,b,e,l):(h.bufferData(y.type,f,b),y.dtype=e||5121,y.usage=b,y.dimension=l,y.byteLength=f);return w}f.bufferCount++;var y=new d(x);c[y.id]=y;C||w(l);w._reglType="buffer";w._buffer=y;w.subdata=function(c,d){var f=(d||0)|0;y.bind();if(Array.isArray(c)){if(0<c.length)if("number"===
typeof c[0]){var l=u.allocType(y.dtype,c.length);p(l,c);h.bufferSubData(y.type,f,l);u.freeType(l)}else if(Array.isArray(c[0])||k(c[0])){var l=c[0].length,a=u.allocType(y.dtype,c.length*l);b(a,c,l);h.bufferSubData(y.type,f,a);u.freeType(a)}}else if(k(c))h.bufferSubData(y.type,f,c);else if(q(c)){var x=c.shape,n=c.stride,r=a=l=0,z=0;1===x.length?(l=x[0],a=1,r=n[0],z=0):2===x.length&&(l=x[0],a=x[1],r=n[0],z=n[1]);x=Array.isArray(c.data)?y.dtype:t(c.data);x=u.allocType(x,l*a);e(x,c.data,l,a,r,z,c.offset);
h.bufferSubData(y.type,f,x);u.freeType(x)}return w};w.destroy=function(){z(y)};return w},createStream:function(c,b){var f=x.pop();f||(f=new d(c),f.buffer=h.createBuffer());f.bind();a(f,b,35040,0,1);return f},destroyStream:function(c){x.push(c)},clear:function(){y(c).forEach(z)},getBuffer:function(c){return c&&c._buffer instanceof d?c._buffer:null},_initBuffer:a}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,
"./util/pool":28,"./util/values":31}],4:[function(a,g,m){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,g,m){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,g,
m){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,g,m){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,g,m){function t(c){return Array.isArray(c)||w(c)||v(c)}function p(c){return c.sort(function(c,b){return"viewport"===c?-1:"viewport"===b?1:c<b?-1:1})}function e(c,b,d,f){this.thisDep=c;this.contextDep=b;this.propDep=d;this.append=f}function b(c){return c&&!(c.thisDep||c.contextDep||
c.propDep)}function k(c){return new e(!1,!1,!1,c)}function q(c,b){var d=c.type;return 0===d?(d=c.data.length,new e(!0,1<=d,2<=d,b)):new e(3===d,2===d,1===d,b)}var y=a("./util/codegen"),u=a("./util/loop"),w=a("./util/is-typed-array"),v=a("./util/is-ndarray"),r=a("./util/is-array-like"),h=a("./constants/primitives.json"),f=a("./constants/dtypes.json"),d=["x","y","z","w"],l={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,
"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},n={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},C={cw:2304,ccw:2305},c=new e(!1,
!1,!1,function(){});g.exports=function(a,v,w,A,g,m,F,D,J,M,I,Q,G,K){function O(c){return c.replace(".","_")}function L(c,b,d){var f=O(c);ta.push(c);qa[f]=ia[f]=!!d;ja[f]=b}function N(c,b,d){var f=O(c);ta.push(c);Array.isArray(d)?(ia[f]=d.slice(),qa[f]=d.slice()):ia[f]=qa[f]=d;ka[f]=b}function W(){var c=y(),d=c.link,b=c.global;c.id=Ca++;c.batchId="0";var f=d(Ba),e=c.shared={props:"a0"};Object.keys(Ba).forEach(function(c){e[c]=b.def(f,".",c)});var l=c.next={},h=c.current={};Object.keys(ka).forEach(function(c){Array.isArray(ia[c])&&
(l[c]=b.def(e.next,".",c),h[c]=b.def(e.current,".",c))});var k=c.constants={};Object.keys(ua).forEach(function(c){k[c]=b.def(JSON.stringify(ua[c]))});c.invoke=function(b,f){switch(f.type){case 0:var l=["this",e.context,e.props,c.batchId];return b.def(d(f.data),".call(",l.slice(0,Math.max(f.data.length+1,4)),")");case 1:return b.def(e.props,f.data);case 2:return b.def(e.context,f.data);case 3:return b.def("this",f.data)}};c.attribCache={};var a={};c.scopeAttrib=function(c){c=v.id(c);if(c in a)return a[c];
var b=M.scope[c];b||(b=M.scope[c]=new ha);return a[c]=d(b)};return c}function Z(c){var b=c["static"];c=c.dynamic;if("framebuffer"in b){var d=b.framebuffer;return d?(d=D.getFramebuffer(d),k(function(c,b){var f=c.link(d),e=c.shared;b.set(e.framebuffer,".next",f);e=e.context;b.set(e,".framebufferWidth",f+".width");b.set(e,".framebufferHeight",f+".height");return f})):k(function(c,b){var d=c.shared;b.set(d.framebuffer,".next","null");d=d.context;b.set(d,".framebufferWidth",d+".drawingBufferWidth");b.set(d,
".framebufferHeight",d+".drawingBufferHeight");return null})}if("framebuffer"in c){var f=c.framebuffer;return q(f,function(c,b){var d=c.invoke(b,f),e=c.shared,l=e.framebuffer,d=b.def(l,".getFramebuffer(",d,")");b.set(l,".next",d);e=e.context;b.set(e,".framebufferWidth",d+"?"+d+".width:"+e+".drawingBufferWidth");b.set(e,".framebufferHeight",d+"?"+d+".height:"+e+".drawingBufferHeight");return d})}return null}function V(c,b){function d(c){if(c in f){var h=f[c];c=!0;var k=h.x|0,a=h.y|0,n,x;"w"in h?n=
h.w|0:c=!1;"h"in h?x=h.h|0:c=!1;return new e(c&&b&&b.thisDep,c&&b&&b.contextDep,c&&b&&b.propDep,function(c,b){var d=c.shared.context,f=n;"w"in h||(f=b.def(d,".","framebufferWidth","-",k));var e=x;"h"in h||(e=b.def(d,".","framebufferHeight","-",a));return[k,a,f,e]})}if(c in l){var r=l[c];c=q(r,function(c,b){var d=c.invoke(b,r),f=c.shared.context,e=b.def(d,".x|0"),l=b.def(d,".y|0"),h=b.def('"w" in ',d,"?",d,".w|0:","(",f,".","framebufferWidth","-",e,")"),d=b.def('"h" in ',d,"?",d,".h|0:","(",f,".",
"framebufferHeight","-",l,")");return[e,l,h,d]});b&&(c.thisDep=c.thisDep||b.thisDep,c.contextDep=c.contextDep||b.contextDep,c.propDep=c.propDep||b.prpoDep);return c}return b?new e(b.thisDep,b.contextDep,b.propDep,function(c,b){var d=c.shared.context;return[0,0,b.def(d,".","framebufferWidth"),b.def(d,".","framebufferHeight")]}):null}var f=c["static"],l=c.dynamic,h=d("viewport");if(h)var k=h,h=new e(h.thisDep,h.contextDep,h.propDep,function(c,b){var d=k.append(c,b),f=c.shared.context;b.set(f,".viewportWidth",
d[2]);b.set(f,".viewportHeight",d[3]);return d});return{viewport:h,scissor_box:d("scissor.box")}}function X(c){function d(c){if(c in f){var b=v.id(f[c]);c=k(function(){return b});c.id=b;return c}if(c in l){var e=l[c];return q(e,function(c,b){var d=c.invoke(b,e);return b.def(c.shared.strings,".id(",d,")")})}return null}var f=c["static"],l=c.dynamic,h=d("frag"),a=d("vert"),n=null;b(h)&&b(a)?(n=I.program(a.id,h.id),c=k(function(c,b){return c.link(n)})):c=new e(h&&h.thisDep||a&&a.thisDep,h&&h.contextDep||
a&&a.contextDep,h&&h.propDep||a&&a.propDep,function(c,b){var d=c.shared.shader,f;f=h?h.append(c,b):b.def(d,".","frag");var e;e=a?a.append(c,b):b.def(d,".","vert");return b.def(d+".program("+e+","+f+")")});return{frag:h,vert:a,progVar:c,program:n}}function S(c){function d(c,b){if(c in f){var e=f[c]|0;return k(function(c,d){b&&(c.OFFSET=e);return e})}if(c in l){var h=l[c];return q(h,function(c,d){var f=c.invoke(d,h);b&&(c.OFFSET=f);return f})}return b&&a?k(function(c,b){c.OFFSET="0";return 0}):null}
var f=c["static"],l=c.dynamic,a=function(){if("elements"in f){var c=f.elements;t(c)?c=m.getElements(m.create(c)):c&&(c=m.getElements(c));var b=k(function(b,d){if(c){var f=b.link(c);return b.ELEMENTS=f}return b.ELEMENTS=null});b.value=c;return b}if("elements"in l){var d=l.elements;return q(d,function(c,b){var f=c.shared,e=f.isBufferArgs,f=f.elements,l=c.invoke(b,d),h=b.def("null"),e=b.def(e,"(",l,")"),l=c.cond(e).then(h,"=",f,".createStream(",l,");")["else"](h,"=",f,".getElements(",l,");");b.entry(l);
b.exit(c.cond(e).then(f,".destroyStream(",h,");"));return c.ELEMENTS=h})}return null}(),n=d("offset",!0);return{elements:a,primitive:function(){if("primitive"in f){var c=f.primitive;return k(function(b,d){return h[c]})}if("primitive"in l){var d=l.primitive;return q(d,function(c,b){var f=c.constants.primTypes,e=c.invoke(b,d);return b.def(f,"[",e,"]")})}return a?b(a)?a.value?k(function(c,b){return b.def(c.ELEMENTS,".primType")}):k(function(){return 4}):new e(a.thisDep,a.contextDep,a.propDep,function(c,
b){var d=c.ELEMENTS;return b.def(d,"?",d,".primType:",4)}):null}(),count:function(){if("count"in f){var c=f.count|0;return k(function(){return c})}if("count"in l){var d=l.count;return q(d,function(c,b){return c.invoke(b,d)})}return a?b(a)?a?n?new e(n.thisDep,n.contextDep,n.propDep,function(c,b){return b.def(c.ELEMENTS,".vertCount-",c.OFFSET)}):k(function(c,b){return b.def(c.ELEMENTS,".vertCount")}):k(function(){return-1}):new e(a.thisDep||n.thisDep,a.contextDep||n.contextDep,a.propDep||n.propDep,
function(c,b){var d=c.ELEMENTS;return c.OFFSET?b.def(d,"?",d,".vertCount-",c.OFFSET,":-1"):b.def(d,"?",d,".vertCount:-1")}):null}(),instances:d("instances",!1),offset:n}}function U(c){var b=c["static"],d=c.dynamic,f={};ta.forEach(function(c){function e(l,a){if(c in b){var n=l(b[c]);f[h]=k(function(){return n})}else if(c in d){var x=d[c];f[h]=q(x,function(c,b){return a(c,b,c.invoke(b,x))})}}var h=O(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return e(function(c){return c},
function(c,b,d){return d});case "depth.func":return e(function(c){return n[c]},function(c,b,d){return b.def(c.constants.compareFuncs,"[",d,"]")});case "depth.range":return e(function(c){return c},function(c,b,d){c=b.def("+",d,"[0]");b=b.def("+",d,"[1]");return[c,b]});case "blend.func":return e(function(c){return[l["srcRGB"in c?c.srcRGB:c.src],l["dstRGB"in c?c.dstRGB:c.dst],l["srcAlpha"in c?c.srcAlpha:c.src],l["dstAlpha"in c?c.dstAlpha:c.dst]]},function(c,b,d){function f(c,l){var h=b.def('"',c,l,'" in ',
d,"?",d,".",c,l,":",d,".",c);return b.def(e,"[",h,"]")}var e=c.constants.blendFuncs;c=f("src","RGB");var l=f("src","Alpha"),h=f("dst","RGB"),k=f("dst","Alpha");return[c,h,l,k]});case "blend.equation":return e(function(c){if("string"===typeof c)return[da[c],da[c]];if("object"===typeof c)return[da[c.rgb],da[c.alpha]]},function(c,b,d){var f=c.constants.blendEquations,e=b.def(),l=b.def();c=c.cond("typeof ",d,'==="string"');c.then(e,"=",l,"=",f,"[",d,"];");c["else"](e,"=",f,"[",d,".rgb];",l,"=",f,"[",
d,".alpha];");b(c);return[e,l]});case "blend.color":return e(function(c){return u(4,function(b){return+c[b]})},function(c,b,d){return u(4,function(c){return b.def("+",d,"[",c,"]")})});case "stencil.mask":return e(function(c){return c|0},function(c,b,d){return b.def(d,"|0")});case "stencil.func":return e(function(c){return[n[c.cmp||"keep"],c.ref||0,"mask"in c?c.mask:-1]},function(c,b,d){c=b.def('"cmp" in ',d,"?",c.constants.compareFuncs,"[",d,".cmp]",":",7680);var f=b.def(d,".ref|0");b=b.def('"mask" in ',
d,"?",d,".mask|0:-1");return[c,f,b]});case "stencil.opFront":case "stencil.opBack":return e(function(b){return["stencil.opBack"===c?1029:1028,z[b.fail||"keep"],z[b.zfail||"keep"],z[b.pass||"keep"]]},function(b,d,f){function e(c){return d.def('"',c,'" in ',f,"?",l,"[",f,".",c,"]:",7680)}var l=b.constants.stencilOps;return["stencil.opBack"===c?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return e(function(c){return[c.factor|0,c.units|0]},function(c,b,d){c=b.def(d,".factor|0");
b=b.def(d,".units|0");return[c,b]});case "cull.face":return e(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);return b},function(c,b,d){return b.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return e(function(c){return c},function(c,b,d){return d});case "frontFace":return e(function(c){return C[c]},function(c,b,d){return b.def(d+'==="cw"?2304:2305')});case "colorMask":return e(function(c){return c.map(function(c){return!!c})},function(c,b,d){return u(4,function(c){return"!!"+d+
"["+c+"]"})});case "sample.coverage":return e(function(c){return["value"in c?c.value:1,!!c.invert]},function(c,b,d){c=b.def('"value" in ',d,"?+",d,".value:1");b=b.def("!!",d,".invert");return[c,b]})}});return f}function T(c){var b=c["static"],d=c.dynamic,f={};Object.keys(b).forEach(function(c){var d=b[c],e;"number"===typeof d||"boolean"===typeof d?e=k(function(){return d}):"function"!==typeof d||"texture2d"!==d._reglType&&"textureCube"!==d._reglType?r(d)&&(e=k(function(c){return c.global.def("[",
u(d.length,function(c){return d[c]}),"]")})):e=k(function(c){return c.link(d)});e.value=d;f[c]=e});Object.keys(d).forEach(function(c){var b=d[c];f[c]=q(b,function(c,d){return c.invoke(d,b)})});return f}function R(c){var b=c["static"],e=c.dynamic,l={};Object.keys(b).forEach(function(c){var e=b[c],h=v.id(c),a=new ha;if(t(e))a.state=1,a.buffer=g.getBuffer(g.create(e,34962,!1)),a.type=a.buffer.dtype;else{var n=g.getBuffer(e);if(n)a.state=1,a.buffer=n,a.type=n.dtype;else if(e.constant){var q=e.constant;
a.state=2;"number"===typeof q?a.x=q:d.forEach(function(c,b){b<q.length&&(a[c]=q[b])})}else{var n=g.getBuffer(e.buffer),x=e.offset|0,r=e.stride|0,p=e.size|0,z=!!e.normalized,G=0;"type"in e&&(G=f[e.type]);e=e.divisor|0;a.buffer=n;a.state=1;a.size=p;a.normalized=z;a.type=G||n.dtype;a.offset=x;a.stride=r;a.divisor=e}}l[c]=k(function(c,b){var d=c.attribCache;if(h in d)return d[h];var f={isStream:!1};Object.keys(a).forEach(function(c){f[c]=a[c]});a.buffer&&(f.buffer=c.link(a.buffer));return d[h]=f})});
Object.keys(e).forEach(function(c){var b=e[c];l[c]=q(b,function(c,f){function e(c){f(n[c],"=",l,".",c,"|0;")}var l=c.invoke(f,b),h=c.shared,a=h.isBufferArgs,k=h.buffer,n={isStream:f.def(!1)},q=new ha;q.state=1;Object.keys(q).forEach(function(c){n[c]=f.def(""+q[c])});var x=n.buffer,r=n.type;f("if(",a,"(",l,")){",n.isStream,"=true;",x,"=",k,".createStream(",34962,",",l,");",r,"=",x,".dtype;","}else{",x,"=",k,".getBuffer(",l,");","if(",x,"){",r,"=",x,".dtype;","}else if(",l,".constant){",n.state,"=",
2,";",d.map(function(c,b){return n[c]+"="+l+".length>="+b+"?"+l+"["+b+"]:0;"}).join(""),"}else{",x,"=",k,".getBuffer(",l,".buffer);",r,'="type" in ',l,"?",h.glTypes,"[",l,".type]:",x,".dtype;",n.normalized,"=!!",l,".normalized;");e("size");e("offset");e("stride");e("divisor");f("}}");return n})});return l}function aa(c){var b=c["static"],d=c.dynamic,f={};Object.keys(b).forEach(function(c){var d=b[c];f[c]=k(function(c,b){return"number"===typeof d||"boolean"===typeof d?""+d:c.link(d)})});Object.keys(d).forEach(function(c){var b=
d[c];f[c]=q(b,function(c,d){return c.invoke(d,b)})});return f}function Y(c,b,d){var f=c.shared.context,e=c.scope();Object.keys(d).forEach(function(l){b.save(f,"."+l);e(f,".",l,"=",d[l].append(c,b),";")});b(e)}function ba(c,b,d){var f=c.shared,e=f.gl,l=f.framebuffer,h;va&&(h=b.def(f.extensions,".webgl_draw_buffers"));var a=c.constants,f=a.drawBuffer,a=a.backBuffer;c=d?d.append(c,b):b.def(l,".next");b("if(",l,".dirty||",c,"!==",l,".cur){","if(",c,"){",e,".bindFramebuffer(",36160,",",c,".framebuffer);");
va&&b(h,".drawBuffersWEBGL(",f,"[",c,".colorAttachments.length]);");b("}else{",e,".bindFramebuffer(",36160,",null);");va&&b(h,".drawBuffersWEBGL(",a,");");b("}",l,".cur=",c,";",l,".dirty=false;","}")}function ca(c,b,d){var f=c.shared,e=f.gl,l=c.current,h=c.next,a=f.current,k=f.next,n=c.cond(a,".dirty");ta.forEach(function(b){b=O(b);if(!(b in d.state)){var f,q;if(b in h){f=h[b];q=l[b];var x=u(ia[b].length,function(c){return n.def(f,"[",c,"]")});n(c.cond(x.map(function(c,b){return c+"==="+q+"["+b+"]"}).join("&&")).then(e,
".",ka[b],"(",x,");",x.map(function(c,b){return q+"["+b+"]="+c}).join(";"),";"))}else f=n.def(k,".",b),x=c.cond(f,"!==",a,".",b),n(x),b in ja?x(c.cond(f).then(e,".enable(",ja[b],");")["else"](e,".disable(",ja[b],");"),a,".",b,"=",f,";"):x(e,".",ka[b],"(",f,");",a,".",b,"=",f,";")}});0===Object.keys(d.state).length&&n(a,".dirty=false;");b(n)}function na(c,d,f,e){var l=c.shared,h=c.current,a=l.current,k=l.gl;p(Object.keys(f)).forEach(function(l){var n=f[l];if(!e||e(n)){var q=n.append(c,d);if(ja[l]){var x=
ja[l];b(n)?q?d(k,".enable(",x,");"):d(k,".disable(",x,");"):d(c.cond(q).then(k,".enable(",x,");")["else"](k,".disable(",x,");"));d(a,".",l,"=",q,";")}else if(r(q)){var p=h[l];d(k,".",ka[l],"(",q,");",q.map(function(c,b){return p+"["+b+"]="+c}).join(";"),";")}else d(k,".",ka[l],"(",q,");",a,".",l,"=",q,";")}})}function la(c,b){ra&&!c.instancing&&(c.instancing=b.def(c.shared.extensions,".angle_instanced_arrays"))}function wa(c,b,d){d=c.stats;c=c.shared;K&&b(c.timer,".beginQuery(",d,");")}function ga(c,
b,d){c=c.shared;K&&b(c.timer,".endQuery();")}function ea(b,f,e,l,h){function a(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function k(c,e,l){function h(){f("if(!",r,".pointer){",q,".enableVertexAttribArray(",x,");",r,".pointer=true;}");var c=l.type,d;d=l.size?f.def(l.size,"||",e):e;f("if(",r,".type!==",c,"||",r,".size!==",d,"||",v.map(function(c){return r+"."+c+"!=="+l[c]}).join("||"),
"){",q,".bindBuffer(",34962,",",p,".buffer);",q,".vertexAttribPointer(",[x,d,c,l.normalized,l.stride,l.offset],");",r,".type=",c,";",r,".size=",d,";",v.map(function(c){return r+"."+c+"="+l[c]+";"}).join(""),"}");ra&&(c=l.divisor,f("if(",r,".divisor!==",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[x,c],");",r,".divisor=",c,";}"))}function a(){f("if(",r,".pointer){",q,".disableVertexAttribArray(",x,");",r,".pointer=false;","}if(",d.map(function(c,b){return r+"."+c+"!=="+z[b]}).join("||"),"){",
q,".vertexAttrib4f(",x,",",z,");",d.map(function(c,b){return r+"."+c+"="+z[b]+";"}).join(""),"}")}var q=n.gl,x=f.def(c,".location"),r=f.def(n.attributes,"[",x,"]");c=l.state;var p=l.buffer,z=[l.x,l.y,l.z,l.w],v=["buffer","normalized","offset","stride"];1===c?h():2===c?a():(f("if(",c,"===",1,"){"),h(),f("}else{"),a(),f("}"))}var n=b.shared;l.forEach(function(d){var l=d.name,n=e.attributes[l],q;if(n){if(!h(n))return;q=n.append(b,f)}else{if(!h(c))return;var x=b.scopeAttrib(l);q={};Object.keys(new ha).forEach(function(c){q[c]=
f.def(x,".",c)})}k(b.link(d),a(d.info.type),q)})}function fa(d,f,e,l,h){for(var a=d.shared,k=a.gl,n,q=0;q<l.length;++q){var x=l[q],p=x.name,z=x.info.type,G=e.uniforms[p],x=d.link(x)+".location",w;if(G){if(!h(G))continue;if(b(G)){p=G.value;if(35678===z||35680===z)z=d.link(p._texture),f(k,".uniform1i(",x,",",z+".bind());"),f.exit(z,".unbind();");else if(35674===z||35675===z||35676===z)p=d.global.def("new Float32Array(["+Array.prototype.slice.call(p)+"])"),G=2,35675===z?G=3:35676===z&&(G=4),f(k,".uniformMatrix",
G,"fv(",x,",false,",p,");");else{switch(z){case 5126:n="1f";break;case 35664:n="2f";break;case 35665:n="3f";break;case 35666:n="4f";break;case 35670:n="1i";break;case 5124:n="1i";break;case 35671:n="2i";break;case 35667:n="2i";break;case 35672:n="3i";break;case 35668:n="3i";break;case 35673:n="4i";break;case 35669:n="4i"}f(k,".uniform",n,"(",x,",",r(p)?Array.prototype.slice.call(p):p,");")}continue}else w=G.append(d,f)}else{if(!h(c))continue;w=f.def(a.uniforms,"[",v.id(p),"]")}p=1;switch(z){case 35678:case 35680:z=
f.def(w,"._texture");f(k,".uniform1i(",x,",",z,".bind());");f.exit(z,".unbind();");continue;case 5124:case 35670:n="1i";break;case 35667:case 35671:n="2i";p=2;break;case 35668:case 35672:n="3i";p=3;break;case 35669:case 35673:n="4i";p=4;break;case 5126:n="1f";break;case 35664:n="2f";p=2;break;case 35665:n="3f";p=3;break;case 35666:n="4f";p=4;break;case 35674:n="Matrix2fv";break;case 35675:n="Matrix3fv";break;case 35676:n="Matrix4fv"}f(k,".uniform",n,"(",x,",");if("M"===n.charAt(0)){var x=Math.pow(z-
35674+2,2),C=d.global.def("new Float32Array(",x,")");f("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",u(x,function(c){return C+"["+c+"]="+w+"["+c+"]"}),",",C,")")}else 1<p?f(u(p,function(c){return w+"["+c+"]"})):f(w);f(");")}}function sa(c,d,f,e){function l(b){var h=x[b];return h?h.contextDep&&e.contextDynamic||h.propDep?h.append(c,f):h.append(c,d):d.def(q,".",b)}function h(){function c(){f(u,".drawElementsInstancedANGLE(",[p,G,w,z+"<<(("+w+"-5121)>>1)",v],");")}function b(){f(u,
".drawArraysInstancedANGLE(",[p,z,G,v],");")}r?C?c():(f("if(",r,"){"),c(),f("}else{"),b(),f("}")):b()}function a(){function c(){f(n+".drawElements("+[p,G,w,z+"<<(("+w+"-5121)>>1)"]+");")}function b(){f(n+".drawArrays("+[p,z,G]+");")}r?C?c():(f("if(",r,"){"),c(),f("}else{"),b(),f("}")):b()}var k=c.shared,n=k.gl,q=k.draw,x=e.draw,r=function(){var b=x.elements,l=d;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)l=f;b=b.append(c,l)}else b=l.def(q,".","elements");b&&l("if("+b+")"+n+".bindBuffer(34963,"+
b+".buffer.buffer);");return b}(),p=l("primitive"),z=l("offset"),G=function(){var b=x.count,l=d;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)l=f;b=b.append(c,l)}else b=l.def(q,".","count");return b}();if("number"===typeof G){if(0===G)return}else f("if(",G,"){"),f.exit("}");var v,u;ra&&(v=l("instances"),u=c.instancing);var w=r+".type",C=x.elements&&b(x.elements);ra&&("number"!==typeof v||0<=v)?"string"===typeof v?(f("if(",v,">0){"),h(),f("}else if(",v,"<0){"),a(),f("}")):h():a()}function oa(c,
b,d,f,e){b=W();e=b.proc("body",e);ra&&(b.instancing=e.def(b.shared.extensions,".angle_instanced_arrays"));c(b,e,d,f);return b.compile().body}function xa(c,b,d,f){la(c,b);ea(c,b,d,f.attributes,function(){return!0});fa(c,b,d,f.uniforms,function(){return!0});sa(c,b,b,d)}function ya(c,b){var d=c.proc("draw",1);la(c,d);Y(c,d,b.context);ba(c,d,b.framebuffer);ca(c,d,b);na(c,d,b.state);wa(c,d,b);var f=b.shader.progVar.append(c,d);d(c.shared.gl,".useProgram(",f,".program);");if(b.shader.program)xa(c,d,b,b.shader.program);
else{var e=c.global.def("{}"),l=d.def(f,".id"),h=d.def(e,"[",l,"]");d(c.cond(h).then(h,".call(this,a0);")["else"](h,"=",e,"[",l,"]=",c.link(function(d){return oa(xa,c,b,d,1)}),"(",f,");",h,".call(this,a0);"))}0<Object.keys(b.state).length&&d(c.shared.current,".dirty=true;");ga(c,d,b)}function za(c,b,d,f){function e(){return!0}c.batchId="a1";la(c,b);ea(c,b,d,f.attributes,e);fa(c,b,d,f.uniforms,e);sa(c,b,b,d)}function ma(c,b,d,f){function e(c){return c.contextDep&&h||c.propDep}function l(c){return!e(c)}
la(c,b);var h=d.contextDynamic,a=b.def(),k=b.def();c.shared.props=k;c.batchId=a;var n=c.scope(),q=c.scope();b(n.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",k,"=","a0","[",a,"];",q,"}",n.exit);d.needsContext&&Y(c,q,d.context);d.needsFramebuffer&&ba(c,q,d.framebuffer);na(c,q,d.state,e);f?(ea(c,n,d,f.attributes,l),ea(c,q,d,f.attributes,e),fa(c,n,d,f.uniforms,l),fa(c,q,d,f.uniforms,e),sa(c,n,q,d)):(b=c.global.def("{}"),f=d.shader.progVar.append(c,q),k=q.def(f,".id"),n=q.def(b,"[",k,"]"),q(c.shared.gl,
".useProgram(",f,".program);","if(!",n,"){",n,"=",b,"[",k,"]=",c.link(function(b){return oa(za,c,d,b,2)}),"(",f,");}",n,".call(this,a0[",a,"],",a,");"))}function Aa(c,b){var d=c.proc("batch",2);c.batchId="0";la(c,d);var f=!1,e=!0;Object.keys(b.context).forEach(function(c){f=f||b.context[c].propDep});f||(Y(c,d,b.context),e=!1);var l=b.framebuffer,h=!1;l&&(l.propDep?f=h=!0:l.contextDep&&f&&(h=!0),h||ba(c,d,l));b.state.viewport&&b.state.viewport.propDynamic&&(f=!0);ca(c,d,b);na(c,d,b.state,function(c){return!(c.contextDep&&
f||c.propDep)});wa(c,d,b);b.contextDep=f;b.needsContext=e;b.needsFramebuffer=h;e=b.shader.progVar;if(e.contextDep&&f||e.propDep)ma(c,d,b,null);else if(e=e.append(c,d),d(c.shared.gl,".useProgram(",e,".program);"),b.shader.program)ma(c,d,b,b.shader.program);else{var l=c.global.def("{}"),h=d.def(e,".id"),a=d.def(l,"[",h,"]");d(c.cond(a).then(a,".call(this,a0,a1);")["else"](a,"=",l,"[",h,"]=",c.link(function(d){return oa(ma,c,b,d,2)}),"(",e,");",a,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&
d(c.shared.current,".dirty=true;");ga(c,d,b)}function pa(c,b){function d(l){var h=b.shader[l];h&&f.set(e.shader,"."+l,h.append(c,f))}var f=c.proc("scope",3);c.batchId="a2";var e=c.shared,l=e.current,h=e.timer,a;K&&(a=f.def(h,".getNumPendingQueries()"));Y(c,f,b.context);b.framebuffer&&b.framebuffer.append(c,f);p(Object.keys(b.state)).forEach(function(d){var l=b.state[d].append(c,f);r(l)?l.forEach(function(b,e){f.set(c.next[d],"["+e+"]",b)}):f.set(e.next,"."+d,l)});["elements","offset","count","instances",
"primitive"].forEach(function(d){var l=b.draw[d];l&&f.set(e.draw,"."+d,""+l.append(c,f))});Object.keys(b.uniforms).forEach(function(d){f.set(e.uniforms,"["+v.id(d)+"]",b.uniforms[d].append(c,f))});Object.keys(b.attributes).forEach(function(d){var e=b.attributes[d].append(c,f),l=c.scopeAttrib(d);Object.keys(new ha).forEach(function(c){f.set(l,"."+c,e[c])})});d("vert");d("frag");0<Object.keys(b.state).length&&(f(l,".dirty=true;"),f.exit(l,".dirty=true;"));f("a1(",c.shared.context,",a0,0);");if(K){var k=
c.stats,l=f.def(h,".getNumPendingQueries()-1");f(h,".pushScopeStats(",a,",",l,",",k,");")}}var ha=M.Record,da={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(da.min=32775,da.max=32776);var ra=w.angle_instanced_arrays,va=w.webgl_draw_buffers,ia={dirty:!0},qa={},ta=[],ja={},ka={};L("dither",3024);L("blend.enable",3042);N("blend.color","blendColor",[0,0,0,0]);N("blend.equation","blendEquationSeparate",[32774,32774]);N("blend.func","blendFuncSeparate",[1,0,1,0]);L("depth.enable",
2929,!0);N("depth.func","depthFunc",513);N("depth.range","depthRange",[0,1]);N("depth.mask","depthMask",!0);N("colorMask","colorMask",[!0,!0,!0,!0]);L("cull.enable",2884);N("cull.face","cullFace",1029);N("frontFace","frontFace",2305);N("lineWidth","lineWidth",1);L("polygonOffset.enable",32823);N("polygonOffset.offset","polygonOffset",[0,0]);L("sample.alpha",32926);L("sample.enable",32928);N("sample.coverage","sampleCoverage",[1,!1]);L("stencil.enable",2960);N("stencil.mask","stencilMask",-1);N("stencil.func",
"stencilFunc",[519,0,-1]);N("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);N("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);L("scissor.enable",3089);N("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);N("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ba={gl:a,context:G,strings:v,next:qa,current:ia,draw:Q,elements:m,buffer:g,shader:I,attributes:M.state,uniforms:J,framebuffer:D,extensions:w,timer:K,isBufferArgs:t},ua={primTypes:h,
compareFuncs:n,blendFuncs:l,blendEquations:da,stencilOps:z,glTypes:f,orientationType:C};va&&(ua.backBuffer=[1029],ua.drawBuffer=u(A.maxDrawbuffers,function(c){return 0===c?[0]:u(c,function(c){return 36064+c})}));var Ca=0;return{next:qa,current:ia,procs:function(){var c=W(),b=c.proc("poll"),d=c.proc("refresh"),f=c.block();b(f);d(f);var e=c.shared,l=e.gl,h=e.next,a=e.current;f(a,".dirty=false;");ba(c,b);d(e.framebuffer,".dirty=true;");ba(c,d);Object.keys(ja).forEach(function(e){var k=ja[e],n=f.def(h,
".",e),q=c.block();q("if(",n,"){",l,".enable(",k,")}else{",l,".disable(",k,")}",a,".",e,"=",n,";");d(q);b("if(",n,"!==",a,".",e,"){",q,"}")});Object.keys(ka).forEach(function(e){var k=ka[e],n=ia[e],q,x,p=c.block();p(l,".",k,"(");r(n)?(k=n.length,q=c.global.def(h,".",e),x=c.global.def(a,".",e),p(u(k,function(c){return q+"["+c+"]"}),");",u(k,function(c){return x+"["+c+"]="+q+"["+c+"];"}).join("")),b("if(",u(k,function(c){return q+"["+c+"]!=="+x+"["+c+"]"}).join("||"),"){",p,"}")):(q=f.def(h,".",e),
x=f.def(a,".",e),p(q,");",a,".",e,"=",q,";"),b("if(",q,"!==",x,"){",p,"}"));d(p)});return c.compile()}(),compile:function(c,b,d,f,e){var l=W();l.stats=l.link(e);e=Z(c);var h=V(c,e),a=S(c),k=U(c);c=X(c);var n=h.viewport;n&&(k.viewport=n);n=O("scissor.box");(h=h[n])&&(k[n]=h);h=0<Object.keys(k).length;e={framebuffer:e,draw:a,shader:c,state:k,dirty:h};e.uniforms=T(d);e.attributes=R(b);e.context=aa(f);ya(l,e);pa(l,e);Aa(l,e);return l.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(a,g,m){function t(e,a){this.id=b++;this.type=e;this.data=a}function p(b){if(0===b.length)return[];var e=b.charAt(0),a=b.charAt(b.length-1);if(1<b.length&&e===a&&('"'===e||"'"===e))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return p(b.substr(0,e.index)).concat(p(e[1])).concat(p(b.substr(e.index+
e[0].length)));e=b.split(".");if(1===e.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(a=0;a<e.length;++a)b=b.concat(p(e[a]));return b}function e(b){return"["+p(b).join("][")+"]"}var b=0;g.exports={define:function(b,a){switch(typeof a){case "boolean":case "number":case "string":return new t(b,e(a+""));case "undefined":return new t(b|128,null)}},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof t},unbox:function(b,a){if(b instanceof t){if(b.type&
128)return new t(b.type&-129,e(a))}else if("function"===typeof b)return new t(0,b);return b},accessor:e}},{}],10:[function(a,g,m){var t=a("./util/is-typed-array"),p=a("./util/is-ndarray"),e=a("./util/values"),b=a("./constants/primitives.json"),k=a("./constants/usage.json");g.exports=function(a,y,u,w){function v(b){this.id=d++;f[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function r(b,d,c,f,e,l,h){(l=h)||t(d)&&(!p(d)||t(d.data))||(l=y.oes_element_index_uint?5125:5123);b.buffer.bind();
u._initBuffer(b.buffer,d,c,l,3);d=h;if(!h){switch(b.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;break;case 5125:case 5124:d=5125}b.buffer.dtype=d}b.type=d;0>e&&(e=b.buffer.byteLength,5123===d?e>>=1:5125===d&&(e>>=2));b.vertCount=e;e=f;0>f&&(e=4,f=b.buffer.dimension,1===f&&(e=0),2===f&&(e=1),3===f&&(e=4));b.primType=e}function h(b){w.elementsCount--;delete f[b.id];b.buffer.destroy();b.buffer=null}var f={},d=0,l={uint8:5121,uint16:5123};y.oes_element_index_uint&&(l.uint32=
5125);v.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(d){function f(d){if(d)if("number"===typeof d)c(d),e.primType=4,e.vertCount=d|0,e.type=5121;else{var h=null,n=35044,z=-1,v=-1,u=0,w=0;Array.isArray(d)||t(d)||p(d)?h=d:("data"in d&&(h=d.data),"usage"in d&&(n=k[d.usage]),"primitive"in d&&(z=b[d.primitive]),"count"in d&&(v=d.count|0),"length"in d&&(u=d.length|0),"type"in d&&(w=l[d.type]));h?r(e,h,n,z,v,u,w):(d=e.buffer,d.bind(),a.bufferData(34963,u,n),d.dtype=w||5121,
d.usage=n,d.dimension=3,d.byteLength=u,e.primType=0>z?4:z,e.vertCount=0>v?0:v,e.type=d.dtype)}else c(),e.primType=4,e.vertCount=0,e.type=5121;return f}var c=u.create(null,34963,!0),e=new v(c._buffer);w.elementsCount++;f(d);f._reglType="elements";f._elements=e;f.subdata=function(b,d){c.subdata(b,d);return f};f.destroy=function(){h(e)};return f},createStream:function(b){var d=n.pop();d||(d=new v(u.create(null,34963,!0)._buffer));r(d,b,35040,-1,-1,0,0);return d},destroyStream:function(b){n.push(b)},
getElements:function(b){return"function"===typeof b&&b._elements instanceof v?b._elements:null},clear:function(){e(f).forEach(h)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(a,g,m){g.exports=function(a){function p(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb ext_disjoint_timer_query angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(b){try{e[b]=
a.getExtension(b)}catch(k){}})}var e={};p();return{extensions:e,refresh:p}}},{}],12:[function(a,g,m){var t=a("./util/values"),p=a("./util/extend");g.exports=function(e,b,a,q,y,u){function w(c,b,d,f){this.target=c;this.level=b;this.texture=d;this.renderbuffer=f}function v(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function r(c,b){var d=b.width,f=b.height;if(c.texture)var e=c.texture._texture,l=Math.max(1,e.width>>c.level),h=Math.max(1,e.height>>
c.level),d=d||l,f=f||h;else e=c.renderbuffer._renderbuffer,d=d||e.width,f=f||e.height;e.refCount+=1;b.width=d;b.height=f}function h(c,b){b?b.texture?e.framebufferTexture2D(36160,c,b.target,b.texture._texture.texture,b.level):e.framebufferRenderbuffer(36160,c,36161,b.renderbuffer._renderbuffer.renderbuffer):e.framebufferTexture2D(36160,c,3553,null,0)}function f(c){var b=3553,d=0,f=null,e=null;"object"===typeof c&&("level"in c&&(d=c.level|0),"target"in c&&(b=c.target|0));var l=c._reglType;"texture2d"===
l?f=c:"textureCube"===l?f=c:"renderbuffer"===l&&(e=c,b=36161,d=0);return new w(b,d,f,e)}function d(c){return c&&(c.texture||c.renderbuffer)}function l(){this.id=g++;m[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function n(c){e.isFramebuffer(c.framebuffer)||(c.framebuffer=e.createFramebuffer());C.dirty=!0;e.bindFramebuffer(36160,c.framebuffer);
for(var d=c.colorAttachments,f=0;f<d.length;++f)h(36064+f,d[f]);for(f=d.length;f<a.maxColorAttachments;++f)h(36064+f,null);h(36096,c.depthAttachment);h(36128,c.stencilAttachment);h(33306,c.depthStencilAttachment);b.webgl_draw_buffers&&b.webgl_draw_buffers.drawBuffersWEBGL(A[d.length]);e.checkFramebufferStatus(36160)}function z(c){e.deleteFramebuffer(c.framebuffer);u.framebufferCount--;delete m[c.id]}var C={current:null,next:null,dirty:!1},c={rgba:6408},x={rgba4:32854,rgb565:36194,"rgb5 a1":32855};
b.ext_srgb&&(x.srgba=35907);b.ext_color_buffer_half_float&&(x.rgba16f=34842,x.rgb16f=34843);b.webgl_color_buffer_float&&(x.rgba32f=34836);var E=[],H=[];b.webgl_depth_texture&&(E.push(6402),H.push(34041));p(p({},c),x);t(c);t(x);x=5121;E={uint8:5121};b.oes_texture_half_float&&(x=E["half float"]=36193);b.oes_texture_float&&(x=E["float"]=5126);E.best=x;var A=function(){for(var c=Array(a.maxDrawbuffers),b=0;b<=a.maxDrawbuffers;++b)for(var d=c[b]=Array(b),f=0;f<b;++f)d[f]=36064+f;return c}(),g=0,m={};return p(C,
{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof l)?c:null},create:function(b){function h(b){var l,k=b||{},x=b=0;if("shape"in k){var p=k.shape;b=p[0];x=p[1]}else"radius"in k&&(b=x=k.radius),"width"in k&&(b=k.width),"height"in k&&(x=k.height);var z=null,p=!1;if("colorBuffers"in k||"colorBuffer"in k){z=k.colorBuffers||k.colorBuffer;Array.isArray(z)||(z=[z]);a.width=b;a.height=x;z=z.map(f);for(l=0;l<z.length;++l)r(z[l],a);b=a.width;
x=a.height}else{var u=!0,t="rgba",C="uint8",E=1,p=!0;a.width=b=b||e.drawingBufferWidth;a.height=x=x||e.drawingBufferHeight;"format"in k&&(t=k.format,u=t in c);"type"in k&&(C=k.type);"colorCount"in k&&(E=k.colorCount|0);if(a.ownsColor)for(z=a.colorAttachments;z.length>E;)v(z.pop());else z=[];for(l=0;l<z.length;++l){var A;a:{A=z[l];var H=u,g=t,B=b,m=x;if(A.texture){var F=A.texture;if(H){F({format:g,type:C,width:B,height:m});F._texture.refCount+=1;A=!0;break a}}else if(F=A.renderbuffer,!H){F({format:g,
width:B,height:m});F._renderbuffer.refCount+=1;A=!0;break a}v(A);A=!1}A||(z[l--]=z[z.length-1],z.pop())}for(;z.length<E;)u?z.push(new w(3553,0,q.create2D({format:t,type:C,width:b,height:x},3553),null)):z.push(new w(36161,0,null,y.create({format:t,width:b,height:x})))}a.width=b;a.height=x;t=u=l=null;C=!1;"depthBuffer"in k&&(l=f(k.depthBuffer));"stencilBuffer"in k&&(u=f(k.stencilBuffer));"depthStencilBuffer"in k&&(t=f(k.depthStencilBuffer));if(l||u||t)r(l||u||t,a);else if(E=!0,H=A=!1,"depth"in k&&(E=
!!k.depth),"stencil"in k&&(A=!!k.stencil),"depthTexture"in k&&(H=!!k.depthTexture),k=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,g=null,E||A)C=!0,H?(H=A?"depth stencil":"depth",a.ownsDepthStencil&&k.texture?(k.texture({format:H,width:b,height:x}),k.texture._texture.refCount+=1,g=k):g=new w(3553,0,q.create({format:H,width:b,height:x},3553),null)):(H=E?A?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&k.renderbuffer?(k.renderbuffer({format:H,width:b,height:x}),k.renderbuffer._renderbuffer.refCount+=
1,g=k):g=new w(36161,0,null,y.create({format:H,width:b,height:x}))),E?A?t=g:l=g:u=g;b=a;b.colorAttachments.forEach(v);v(b.depthAttachment);v(b.stencilAttachment);v(b.depthStencilAttachment);a.colorAttachments=z;a.depthAttachment=l;a.stencilAttachment=u;a.depthStencilAttachment=t;a.ownsColor=p;a.ownsDepthStencil=C;h.color=z.map(d);h.depth=d(l);h.stencil=d(u);h.depthStencil=d(t);n(a);h.width=a.width;h.height=a.height;return h}var a=new l;u.framebufferCount++;h(b);h._reglType="framebuffer";h._framebuffer=
a;h._destroy=function(){z(a)};return h},clear:function(){t(m).forEach(z)},refresh:function(){t(m).forEach(n)}})}},{"./util/extend":23,"./util/values":31}],13:[function(a,g,m){g.exports=function(a,p){var e=1;p.ext_texture_filter_anisotropic&&(e=a.getParameter(34047));var b=1,k=1;p.webgl_draw_buffers&&(b=a.getParameter(34852),k=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),
subpixelBits:a.getParameter(3408),extensions:Object.keys(p).filter(function(b){return!!p[b]}),maxAnisotropic:e,maxDrawbuffers:b,maxColorAttachments:k,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),
maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,g,m){var t=a("./util/is-typed-array");g.exports=function(a,e,b){return function(k){var q=k||{};t(k)?q={data:q}:2===arguments.length?q={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof k&&(q={});e();var y=q.x||0,u=q.y||0,w=q.width||
b.viewportWidth,v=q.height||b.viewportHeight,q=q.data||new Uint8Array(w*v*4);a.pixelStorei(3333,4);a.readPixels(y,u,w,v,6408,5121,q);return q}}},{"./util/is-typed-array":26}],15:[function(a,g,m){var t=a("./util/values");g.exports=function(a,e,b,k){function q(b){this.id=w++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0}function y(b){var e=b.renderbuffer;a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete v[b.id];k.renderbufferCount--}
var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(u.srgba=35907);e.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);e.webgl_color_buffer_float&&(u.rgba32f=34836);var w=0,v={};q.prototype.decRef=function(){0===--this.refCount&&y(this)};return{create:function(b,e){function f(b,e){var h=0,k=0,c=32854;"object"===typeof b&&b?("shape"in b?(k=b.shape,h=k[0]|0,k=k[1]|0):("radius"in b&&(h=k=b.radius|0),"width"in b&&(h=b.width|0),"height"in
b&&(k=b.height|0)),"format"in b&&(c=u[b.format])):"number"===typeof b?(h=b|0,"number"===typeof e?k=e|0:h=k):b||(h=k=1);if(h!==d.width||k!==d.height||c!==d.format)return f.width=d.width=h,f.height=d.height=k,d.format=c,a.bindRenderbuffer(36161,d.renderbuffer),a.renderbufferStorage(36161,c,h,k),f}var d=new q(a.createRenderbuffer());v[d.id]=d;k.renderbufferCount++;f(b,e);f.resize=function(b,e){var h=b|0,k=e|0||h;if(h!==d.width||k!==d.height)return f.width=d.width=h,f.height=d.height=k,a.bindRenderbuffer(36161,
d.renderbuffer),a.renderbufferStorage(36161,d.format,h,k),f};f._reglType="renderbuffer";f._renderbuffer=d;f.destroy=function(){d.decRef()};return f},clear:function(){t(v).forEach(y)}}}},{"./util/values":31}],16:[function(a,g,m){var t=a("./util/values");g.exports=function(a,e,b){function k(b,d,f,e){this.name=b;this.id=d;this.location=f;this.info=e}function q(b,d){for(var f=0;f<b.length;++f)if(b[f].id===d.id){b[f].location=d.location;return}b.push(d)}function y(b,d,f){f=35632===b?v:r;var h=f[d];if(!h){var c=
e.str(d),h=a.createShader(b);a.shaderSource(h,c);a.compileShader(h);f[d]=h}return h}function u(b,f){this.id=d++;this.fragId=b;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[]}function w(b,d){var f,h;f=y(35632,b.fragId);h=y(35633,b.vertId);var c=b.program=a.createProgram();a.attachShader(c,f);a.attachShader(c,h);a.linkProgram(c);var x=a.getProgramParameter(c,35718),r=b.uniforms;for(f=0;f<x;++f)if(h=a.getActiveUniform(c,f))if(1<h.size)for(var v=0;v<h.size;++v){var u=h.name.replace("[0]",
"["+v+"]");q(r,new k(u,e.id(u),a.getUniformLocation(c,u),h))}else q(r,new k(h.name,e.id(h.name),a.getUniformLocation(c,h.name),h));x=a.getProgramParameter(c,35721);r=b.attributes;for(f=0;f<x;++f)(h=a.getActiveAttrib(c,f))&&q(r,new k(h.name,e.id(h.name),a.getAttribLocation(c,h.name),h))}var v={},r={},h={},f=[],d=0;return{clear:function(){var d=a.deleteShader.bind(a);t(v).forEach(d);v={};t(r).forEach(d);r={};f.forEach(function(b){a.deleteProgram(b.program)});f.length=0;h={};b.shaderCount=0},refresh:function(){v=
{};r={};f.forEach(w)},program:function(d,e,a){b.shaderCount++;var k=h[e];k||(k=h[e]={});var c=k[d];c||(c=new u(e,d),w(c,a),k[d]=c,f.push(c));return c},shader:y,frag:null,vert:null}}},{"./util/values":31}],17:[function(a,g,m){g.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0}}},{}],18:[function(a,g,m){g.exports=function(){var a={"":0},p=[""];return{id:function(e){var b=a[e];if(b)return b;b=a[e]=p.length;p.push(e);
return b},str:function(e){return p[e]}}}},{}],19:[function(a,g,m){function t(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function p(b){return Array.isArray(b)&&0!==b.length&&h(b[0])?!0:!1}function e(b){return Object.prototype.toString.call(b)}function b(b){if(!b)return!1;var c=e(b);return 0<=z.indexOf(c)?!0:t(b)||p(b)||w(b)}function k(b,c){36193===b.type?(b.data=r(c),v.freeType(c)):b.data=c}var q=a("./util/extend"),y=a("./util/values"),u=a("./util/is-typed-array"),w=a("./util/is-ndarray"),
v=a("./util/pool"),r=a("./util/to-half-float"),h=a("./util/is-array-like");m=a("./constants/arraytypes.json");var f=a("./constants/arraytypes.json"),d=[9984,9986,9985,9987],l=[0,6409,6410,6407,6408],n={};n[6409]=n[6406]=n[6402]=1;n[34041]=n[6410]=2;n[6407]=3;n[6408]=4;var z=Object.keys(m).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]);g.exports=function(a,c,x,z,H,A){function g(){this.format=this.internalformat=6408;
this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function m(c,b){c.internalformat=b.internalformat;c.format=b.format;c.type=b.type;c.compressed=b.compressed;c.premultiplyAlpha=b.premultiplyAlpha;c.flipY=b.flipY;c.unpackAlignment=b.unpackAlignment;c.colorSpace=b.colorSpace;c.width=b.width;c.height=b.height;c.channels=b.channels}function F(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.premultiplyAlpha=
b.premultiplyAlpha);"flipY"in b&&(c.flipY=b.flipY);"alignment"in b&&(c.unpackAlignment=b.alignment);"colorSpace"in b&&(c.colorSpace=wa[b.colorSpace]);"type"in b&&(c.type=ga[b.type]);var d=c.width,f=c.height,e=c.channels,a=!1;"shape"in b?(d=b.shape[0],f=b.shape[1],3===b.shape.length&&(e=b.shape[2],a=!0)):("radius"in b&&(d=f=b.radius),"width"in b&&(d=b.width),"height"in b&&(f=b.height),"channels"in b&&(e=b.channels,a=!0));c.width=d|0;c.height=f|0;c.channels=e|0;d=!1;"format"in b&&(d=b.format,f=c.internalformat=
ea[d],c.format=xa[f],d in ga&&!("type"in b)&&(c.type=ga[d]),d in fa&&(c.compressed=!0),d=!0);!a&&d?c.channels=n[c.format]:a&&!d&&c.channels!==l[c.format]&&(c.format=c.internalformat=l[c.channels])}}function D(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function J(){g.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function M(c,d){var a=null;
b(d)?a=d:d&&(F(c,d),"x"in d&&(c.xOffset=d.x|0),"y"in d&&(c.yOffset=d.y|0),b(d.data)&&(a=d.data));if(d.copy){var n=H.viewportWidth,q=H.viewportHeight;c.width=c.width||n-c.xOffset;c.height=c.height||q-c.yOffset;c.needsCopy=!0}else if(!a)c.width=c.width||1,c.height=c.height||1;else if(u(a))c.data=a,"type"in d||5121!==c.type||(c.type=f[Object.prototype.toString.call(a)]|0);else if(t(a)){n=a;q=c.width*c.height*c.channels;switch(c.type){case 5121:case 5123:case 5125:case 5126:q=v.allocType(c.type,q);q.set(n);
c.data=q;break;case 36193:c.data=r(n)}c.alignment=1;c.needsFree=!0}else if(w(a)){n=a.data;Array.isArray(n)||5121!==c.type||(c.type=f[Object.prototype.toString.call(n)]|0);var q=a.shape,x=a.stride,z,G,y,K;3===q.length?(y=q[2],K=x[2]):K=y=1;z=q[0];G=q[1];q=x[0];x=x[1];c.alignment=1;c.width=z;c.height=G;c.channels=y;c.format=c.internalformat=l[y];c.needsFree=!0;z=K;a=a.offset;y=c.width;K=c.height;G=c.channels;for(var E=v.allocType(36193===c.type?5126:c.type,y*K*G),A=0,g=0;g<K;++g)for(var C=0;C<y;++C)for(var O=
0;O<G;++O)E[A++]=n[q*C+x*g+z*O+a];k(c,E)}else if("[object HTMLCanvasElement]"===e(a)||"[object CanvasRenderingContext2D]"===e(a))"[object HTMLCanvasElement]"===e(a)?c.element=a:c.element=a.canvas,c.width=c.element.width,c.height=c.element.height;else if("[object HTMLImageElement]"===e(a))c.element=a,c.width=a.naturalWidth,c.height=a.naturalHeight;else if("[object HTMLVideoElement]"===e(a))c.element=a,c.width=a.videoWidth,c.height=a.videoHeight,c.needsPoll=!0;else if(p(a)){n=a[0].length;q=a.length;
x=1;if(h(a[0][0])){z=x=a[0][0].length;y=v.allocType(36193===c.type?5126:c.type,n*q*z);for(G=K=0;G<q;++G)for(E=a[G],A=0;A<n;++A)for(g=E[A],C=0;C<z;++C)y[K++]=g[C];k(c,y)}else{z=v.allocType(36193===c.type?5126:c.type,n*q);for(K=y=0;K<q;++K)for(G=a[K],E=0;E<n;++E)z[y++]=G[E];k(c,z)}c.alignment=1;c.width=n;c.height=q;c.channels=x;c.format=c.internalformat=l[x];c.needsFree=!0}}function I(c,b,d,f,e){var h=c.element,l=c.data,k=c.internalformat,n=c.format,q=c.type,x=c.width,r=c.height;D(c);h?a.texSubImage2D(b,
e,d,f,n,q,h):c.compressed?a.compressedTexSubImage2D(b,e,d,f,k,x,r,l):c.needsCopy?(z(),a.copyTexSubImage2D(b,e,d,f,c.xOffset,c.yOffset,x,r)):a.texSubImage2D(b,e,d,f,x,r,n,q,l)}function Q(){return ya.pop()||new J}function G(c){c.needsFree&&v.freeType(c.data);J.call(c);ya.push(c)}function K(){g.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function O(c,b,d){var f=c.images[0]=Q();c.mipmask=1;f.width=c.width=b;f.height=c.height=d}function L(c,d){var f=null;if(b(d))f=
c.images[0]=Q(),m(f,c),M(f,d),c.mipmask=1;else if(F(c,d),Array.isArray(d.mipmap))for(var e=d.mipmap,a=0;a<e.length;++a)f=c.images[a]=Q(),m(f,c),f.width>>=a,f.height>>=a,M(f,e[a]),c.mipmask|=1<<a;else f=c.images[0]=Q(),m(f,c),M(f,d),c.mipmask=1;m(c,c.images[0])}function N(c,b){for(var d=c.images,f=0;f<d.length&&d[f];++f){var e=d[f],h=b,l=f,k=e.element,n=e.data,q=e.internalformat,x=e.format,r=e.type,p=e.width,v=e.height;D(e);k?a.texImage2D(h,l,x,x,r,k):e.compressed?a.compressedTexImage2D(h,l,q,p,v,
0,n):e.needsCopy?(z(),a.copyTexImage2D(h,l,x,e.xOffset,e.yOffset,p,v,0)):a.texImage2D(h,l,x,p,v,0,x,r,n)}}function W(){var c=za.pop()||new K;g.call(c);for(var b=c.mipmask=0;16>b;++b)c.images[b]=null;return c}function Z(c){for(var b=c.images,d=0;d<b.length;++d)b[d]&&G(b[d]),b[d]=null;za.push(c)}function V(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function X(c,b){"min"in b&&(c.minFilter=la[b.min],0<=d.indexOf(c.minFilter)&&
(c.genMipmaps=!0));"mag"in b&&(c.magFilter=na[b.mag]);var f=c.wrapS,e=c.wrapT;if("wrap"in b){var a=b.wrap;"string"===typeof a?f=e=ca[a]:Array.isArray(a)&&(f=ca[a[0]],e=ca[a[1]])}else"wrapS"in b&&(f=ca[b.wrapS]),"wrapT"in b&&(e=ca[b.wrapT]);c.wrapS=f;c.wrapT=e;"anisotropic"in b&&(c.anisotropic=b.anisotropic);if("mipmap"in b){f=!1;switch(typeof b.mipmap){case "string":c.mipmapHint=ba[b.mipmap];f=c.genMipmaps=!0;break;case "boolean":f=c.genMipmaps=b.mipmap;break;case "object":c.genMipmaps=!1,f=!0}!f||
"min"in b||(c.minFilter=9984)}}function S(b,d){a.texParameteri(d,10241,b.minFilter);a.texParameteri(d,10240,b.magFilter);a.texParameteri(d,10242,b.wrapS);a.texParameteri(d,10243,b.wrapT);c.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(d))}function U(){var c=ma.pop()||new V;V.call(c);return c}function T(c){g.call(this);this.mipmask=0;this.internalformat=6408;this.id=Aa++;this.refCount=1;this.target=c;this.texture=a.createTexture();
this.unit=-1;this.bindCount=0}function R(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function aa(){var c=da[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,null)}function Y(c){var b=c.texture,d=c.unit,f=c.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(f,null),da[d]=null);a.deleteTexture(b);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete pa[c.id]}var ba={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ca={repeat:10497,clamp:33071,mirror:33648},
na={nearest:9728,linear:9729},la=q({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},na),wa={none:0,browser:37444},ga={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ea={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},fa={};c.ext_srgb&&(ea.srgb=35904,ea.srgba=35906);c.oes_texture_float&&(ga["float"]=5126);c.oes_texture_half_float&&(ga.float16=ga["half float"]=
36193);c.webgl_depth_texture&&(q(ea,{depth:6402,"depth stencil":34041}),q(ga,{uint16:5123,uint32:5125,"depth stencil":34042}));c.webgl_compressed_texture_s3tc&&q(fa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});c.webgl_compressed_texture_atc&&q(fa,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});c.webgl_compressed_texture_pvrtc&&q(fa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});
c.webgl_compressed_texture_etc1&&(fa["rgb etc1"]=36196);var sa=Array.prototype.slice.call(a.getParameter(34467));Object.keys(fa).forEach(function(c){var b=fa[c];0<=sa.indexOf(b)&&(ea[c]=b)});var oa=Object.keys(ea);x.textureFormats=oa;var xa=oa.reduce(function(c,b){var d=ea[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?c[d]=d:32855===d||0<=b.indexOf("rgba")?c[d]=6408:c[d]=6407;return c},{}),ya=[],za=[],ma=[],Aa=0,pa={},ha=x.maxTextureUnits,da=Array(ha).map(function(){return null});
q(T.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var b=0;b<ha;++b){var d=da[b];if(d){if(0<d.bindCount)continue;d.unit=-1}da[b]=this;c=b;break}this.unit=c;a.activeTexture(33984+c);a.bindTexture(this.target,this.texture)}return c},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&Y(this)}});return{create2D:function(c,b){function d(c,b){var e=U(),a=W();"number"===typeof c?"number"===typeof b?O(a,c|0,b|0):O(a,c|0,c|0):c?(X(e,c),L(a,c)):O(a,1,1);e.genMipmaps&&
(a.mipmask=(a.width<<1)-1);f.mipmask=a.mipmask;m(f,a);f.internalformat=a.internalformat;d.width=a.width;d.height=a.height;R(f);N(a,3553);S(e,3553);aa();ma.push(e);Z(a);return d}var f=new T(3553);pa[f.id]=f;A.textureCount++;d(c,b);d.subimage=function(c,b,e,a){b|=0;e|=0;a|=0;var h=Q();m(h,f);h.width>>=a;h.height>>=a;h.width-=b;h.height-=e;M(h,c);R(f);I(h,3553,b,e,a);aa();G(h);return d};d._reglType="texture2d";d._texture=f;d.destroy=function(){f.decRef()};return d},createCube:function(c,b,d,f,e,a){function h(c,
b,d,f,e,a){var n,q=U();for(n=0;6>n;++n)k[n]=W();if("number"===typeof c||!c)for(c=c|0||1,n=0;6>n;++n)O(k[n],c,c);else if("object"===typeof c)if(b)L(k[0],c),L(k[1],b),L(k[2],d),L(k[3],f),L(k[4],e),L(k[5],a);else if(X(q,c),F(l,c),"faces"in c)for(c=c.faces,n=0;6>n;++n)m(k[n],l),L(k[n],c[n]);else for(n=0;6>n;++n)L(k[n],c);m(l,k[0]);l.mipmask=q.genMipmaps?(k[0].width<<1)-1:k[0].mipmask;l.internalformat=k[0].internalformat;h.width=k[0].width;h.height=k[0].height;R(l);for(n=0;6>n;++n)N(k[n],34069+n);S(q,
34067);aa();ma.push(q);for(n=0;6>n;++n)Z(k[n]);return h}var l=new T(34067);pa[l.id]=l;A.cubeCount++;var k=Array(6);h(c,b,d,f,e,a);h.subimage=function(c,b,d,f,e){d|=0;f|=0;e|=0;var a=Q();m(a,l);a.width>>=e;a.height>>=e;a.width-=d;a.height-=f;M(a,b);R(l);I(a,34069+c,d,f,e);aa();G(a);return h};h._reglType="textureCube";h._texture=l;h.destroy=function(){l.decRef()};return h},clear:function(){for(var c=0;c<ha;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),da[c]=null;y(pa).forEach(Y);A.cubeCount=
0;A.textureCount=0},getTexture:function(c){return null}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],20:[function(a,g,m){g.exports=function(a,p){function e(){this.endQueryIndex=this.startQueryIndex=-1;this.stats=null}var b=p.ext_disjoint_timer_query;if(!b)return null;var k=[],q=[],y,u,w=[],v=[];return{beginQuery:function(e){y=e;u=w.pop()||b.createQueryEXT();
b.beginQueryEXT(b.TIME_ELAPSED_EXT,u)},endQuery:function(){b.endQueryEXT(b.TIME_ELAPSED_EXT);var a=v.pop()||new e;a.startQueryIndex=k.length;a.endQueryIndex=a.startQueryIndex;a.stats=y;q.push(a);k.push(u)},update:function(){if(0!==k.length){var e=[],a,f;for(a=0;a<k.length;a++)e[a]=1E-6*b.getQueryObjectEXT(k[a],b.QUERY_RESULT_EXT),w.push(k[a]);k=[];for(a=0;a<q.length;a++){var d=q[a];for(f=d.startQueryIndex;f<=d.endQueryIndex;f++)d.stats.gpuTime+=e[f];v.push(d)}q=[]}},getNumPendingQueries:function(){return k.length},
pushScopeStats:function(b,a,f){var d=v.pop()||new e;d.startQueryIndex=b;d.endQueryIndex=a;d.stats=f;q.push(d)},clear:function(){for(var e=0;e<w.length;e++)b.deleteQueryEXT(w[e])}}}},{}],21:[function(a,g,m){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,g,m){function t(b){return Array.prototype.slice.call(b)}function p(b){return t(b).join("")}var e=a("./extend");g.exports=function(){function b(){var b=
[],a=[];return e(function(){b.push.apply(b,t(arguments))},{def:function(){var f="v"+q++;a.push(f);0<arguments.length&&(b.push(f,"="),b.push.apply(b,t(arguments)),b.push(";"));return f},toString:function(){return p([0<a.length?"var "+a+";":"",p(b)])}})}function a(){function k(b,d){f(b,d,"=",h.def(b,d),";")}var h=b(),f=b(),d=h.toString,l=f.toString;return e(h,{entry:h,exit:f,save:k,set:function(b,d,f){k(b,d);h(b,d,"=",f,";")},toString:function(){return d()+l()}})}var q=0,y=[],u=[],w=b(),v={};return{global:w,
link:function(b){for(var e=0;e<u.length;++e)if(u[e]===b)return y[e];e="g"+q++;y.push(e);u.push(b);return e},block:b,proc:function(b,h){function f(){var b="a"+d.length;d.push(b);return b}var d=[];h=h||0;for(var l=0;l<h;++l)f();var l=a(),n=l.toString;return v[b]=e(l,{arg:f,toString:function(){return p(["function(",d.join(),"){",n(),"}"])}})},scope:a,cond:function(){var b=p(arguments),h=a(),f=a(),d=h.toString,l=f.toString;return e(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){f.apply(f,
t(arguments));return this},toString:function(){var f=l();f&&(f="else{"+f+"}");return p(["if(",b,"){",d(),"}",f])}})},compile:function(){var b=['"use strict";',w,"return {"];Object.keys(v).forEach(function(f){b.push('"',f,'":',v[f].toString(),",")});b.push("}");var e=p(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(e)).apply(null,u)}}}},{"./extend":23}],23:[function(a,g,m){g.exports=function(a,p){for(var e=Object.keys(p),b=0;b<e.length;++b)a[e[b]]=
p[e[b]];return a}},{}],24:[function(a,g,m){var t=a("./is-typed-array");g.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":26}],25:[function(a,g,m){var t=a("./is-typed-array");g.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":26}],26:[function(a,g,m){var t=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in
t}},{"../constants/arraytypes.json":4}],27:[function(a,g,m){g.exports=function(a,p){for(var e=Array(a),b=0;b<a;++b)e[b]=p(b);return e}},{}],28:[function(a,g,m){function t(b){var e,a;e=(65535<b)<<4;b>>>=e;a=(255<b)<<3;b>>>=a;e|=a;a=(15<b)<<2;b>>>=a;e|=a;a=(3<b)<<1;return e|a|b>>>a>>1}function p(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=b[t(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}function e(e){b[t(e.byteLength)>>2].push(e)}var b=a("./loop")(8,function(){return[]});
g.exports={alloc:p,free:e,allocType:function(b,e){var a=null;switch(b){case 5120:a=new Int8Array(p(e),0,e);break;case 5121:a=new Uint8Array(p(e),0,e);break;case 5122:a=new Int16Array(p(2*e),0,e);break;case 5123:a=new Uint16Array(p(2*e),0,e);break;case 5124:a=new Int32Array(p(4*e),0,e);break;case 5125:a=new Uint32Array(p(4*e),0,e);break;case 5126:a=new Float32Array(p(4*e),0,e);break;default:return null}return a.length!==e?a.subarray(0,e):a},freeType:function(b){e(b.buffer)}}},{"./loop":27}],29:[function(a,
g,m){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(a,g,m){var t=a("./pool"),p=new Float32Array(1),e=new Uint32Array(p.buffer);g.exports=function(b){for(var a=t.allocType(5123,b.length),q=0;q<b.length;++q)if(isNaN(b[q]))a[q]=65535;else if(Infinity===b[q])a[q]=31744;else if(-Infinity===
b[q])a[q]=64512;else{p[0]=b[q];var y=e[0],u=y>>>31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;a[q]=-24>w?u:-14>w?u+(y+1024>>-14-w):15<w?u+31744:u+(w+15<<10)+y}return a}},{"./pool":28}],31:[function(a,g,m){g.exports=function(a){return Object.keys(a).map(function(p){return a[p]})}},{}],32:[function(a,g,m){function t(b,a){function q(){var a=window.innerWidth,h=window.innerHeight;b!==document.body&&(h=b.getBoundingClientRect(),a=h.right-h.left,h=h.top-h.bottom);y.width=w*a;y.height=w*h;e(y.style,{width:a+"px",
height:h+"px"})}var y=document.createElement("canvas"),u=p(y,a);e(y.style,{border:0,margin:0,padding:0,top:0,left:0});b.appendChild(y);b===document.body&&(y.style.position="absolute",e(b.style,{margin:0,padding:0}));var w=+u.options.pixelRatio;window.addEventListener("resize",q,!1);var v=u.options.onDestroy;u.options=e(e({},u.options),{onDestroy:function(){window.removeEventListener("resize",q);b.removeChild(y);v&&v()}});q();return u}function p(b,a){function q(e){try{return b.getContext(e,p)}catch(a){return null}}
var p=a.glOptions||{};return{gl:q("webgl")||q("experimental-webgl")||q("webgl-experimental"),options:e({pixelRatio:window.devicePixelRatio},a)}}var e=a("./util/extend");g.exports=function(b){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:b[0],options:b[1]||{}};var a=document.body,q=b[1]||{};if("string"===typeof b[0])a=document.querySelector(b[0])||document.body;else if("object"===typeof b[0])if(b[0]instanceof HTMLElement)a=b[0];else{if(b[0]instanceof WebGLRenderingContext)return{gl:b[0],
options:e({pixelRatio:1},q)};q=b[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?p(a,q):t(a,q)}},{"./util/extend":23}],33:[function(a,g,m){function t(b,e,a){for(var u=[],w=e;w<a;w+=3)e=(b[w]<<16)+(b[w+1]<<8)+b[w+2],u.push(p[e>>18&63]+p[e>>12&63]+p[e>>6&63]+p[e&63]);return u.join("")}m.toByteArray=function(a){var q,p,u,w,v;q=a.length;if(0<q%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[q-2]?2:"="===a[q-1]?1:0;v=new b(3*q/4-w);p=0<w?q-4:q;var r=0;for(q=0;q<p;q+=
4)u=e[a.charCodeAt(q)]<<18|e[a.charCodeAt(q+1)]<<12|e[a.charCodeAt(q+2)]<<6|e[a.charCodeAt(q+3)],v[r++]=u>>16&255,v[r++]=u>>8&255,v[r++]=u&255;2===w?(u=e[a.charCodeAt(q)]<<2|e[a.charCodeAt(q+1)]>>4,v[r++]=u&255):1===w&&(u=e[a.charCodeAt(q)]<<10|e[a.charCodeAt(q+1)]<<4|e[a.charCodeAt(q+2)]>>2,v[r++]=u>>8&255,v[r++]=u&255);return v};m.fromByteArray=function(b){for(var e=b.length,a=e%3,u="",w=[],v=0,r=e-a;v<r;v+=16383)w.push(t(b,v,v+16383>r?r:v+16383));1===a?(b=b[e-1],u+=p[b>>2],u+=p[b<<4&63],u+="=="):
2===a&&(b=(b[e-2]<<8)+b[e-1],u+=p[b>>10],u+=p[b>>4&63],u+=p[b<<2&63],u+="=");w.push(u);return w.join("")};var p=[],e=[],b="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var b=0;64>b;++b)p[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;e[45]=62;e[95]=63})()},{}],34:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]).add(e[0].mul(a[1])),
a[1].mul(e[1]))}},{"./lib/rationalize":44}],35:[function(a,g,m){g.exports=function(a,p){return a[0].mul(p[1]).cmp(p[0].mul(a[1]))}},{}],36:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]),a[1].mul(e[0]))}},{"./lib/rationalize":44}],37:[function(a,g,m){function t(a,w){if(p(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var v=0,r,h;if(e(a))r=a.clone();else if("string"===typeof a)r=k(a);else{if(0===a)return[b(0),b(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=
Math.pow(2,256),v-=256;r=b(a)}if(p(w))r.mul(w[1]),h=w[0].clone();else if(e(w))h=w.clone();else if("string"===typeof w)h=k(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),v+=256;h=b(w)}else h=b(1);0<v?r=r.shln(v):0>v&&(h=h.shln(-v));return q(r,h)}var p=a("./is-rat"),e=a("./lib/is-bn"),b=a("./lib/num-to-bn"),k=a("./lib/str-to-bn"),q=a("./lib/rationalize"),y=a("./div");g.exports=t},{"./div":36,"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],
38:[function(a,g,m){var t=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&t(a[0])&&t(a[1])}},{"./lib/is-bn":42}],39:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return a.cmp(new t(0))}},{"bn.js":47}],40:[function(a,g,m){g.exports=function(a){var p=a.length,e=a.words,b=0;if(1===p)b=e[0];else if(2===p)b=e[0]+67108864*e[1];else for(var k=b=0;k<p;k++)b+=e[k]*Math.pow(67108864,k);return a.sign?-b:b}},{}],41:[function(a,g,m){var t=a("double-bits"),p=a("bit-twiddle").countTrailingZeros;
g.exports=function(e){var b=p(t.lo(e));if(32>b)return b;e=p(t.hi(e));return 20<e?52:e+32}},{"bit-twiddle":52,"double-bits":73}],42:[function(a,g,m){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,g,m){var t=a("bn.js"),p=a("double-bits");g.exports=function(e){var b=p.exponent(e);return 52>b?new t(e):(new t(e*Math.pow(2,52-b))).shln(b-52)}},{"bn.js":47,"double-bits":73}],44:[function(a,g,m){var t=a("./num-to-bn"),p=a("./bn-sign");g.exports=function(e,
b){var a=p(e),q=p(b);if(0===a)return[t(0),t(1)];if(0===q)return[t(0),t(0)];0>q&&(e=e.neg(),b=b.neg());a=e.gcd(b);return a.cmpn(1)?[e.div(a),b.div(a)]:[e,b]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return new t(a)}},{"bn.js":47}],46:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[0]),a[1].mul(e[1]))}},{"./lib/rationalize":44}],47:[function(a,g,m){(function(a,p){function e(c,b){if(!c)throw Error(b||"Assertion failed");
}function b(c,b){c.super_=b;var d=function(){};d.prototype=b.prototype;c.prototype=new d;c.prototype.constructor=c}function k(c,b,d){if(null!==c&&"object"===typeof c&&Array.isArray(c.words))return c;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===b||"be"===b)d=b,b=10;null!==c&&this._init(c||0,b||10,d||"be")}function q(c,b,d){var f=0;for(d=Math.min(c.length,d);b<d;b++)var a=c.charCodeAt(b)-48,f=f<<4,f=49<=a&&54>=a?f|a-49+10:17<=a&&22>=a?f|a-17+10:f|a&15;return f}function y(c,b,d,
f){var a=0;for(d=Math.min(c.length,d);b<d;b++)var e=c.charCodeAt(b)-48,a=a*f,a=49<=e?a+(e-49+10):17<=e?a+(e-17+10):a+e;return a}function u(c,b){this.name=c;this.p=new k(b,16);this.n=this.p.bitLength();this.k=(new k(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){u.call(this,"p192",
"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function f(c){"string"===typeof c?(c=k._prime(c),this.m=c.p,this.prime=c):(this.m=c,this.prime=null)}function d(c){f.call(this,c);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new k(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);
this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=k:p.BN=k;k.BN=k;k.wordSize=26;k.prototype._init=function(c,b,d){if("number"===typeof c)return this._initNumber(c,b,d);if("object"===typeof c)return this._initArray(c,b,d);"hex"===b&&(b=16);e(b===(b|0)&&2<=b&&36>=b);c=c.toString().replace(/\s+/g,"");var f=0;"-"===c[0]&&f++;16===b?this._parseHex(c,f):this._parseBase(c,b,f);"-"===c[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),b,d)};k.prototype._initNumber=
function(c,b,d){0>c&&(this.sign=!0,c=-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(e(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),b,d)};k.prototype._initArray=function(c,b,d){e("number"===typeof c.length);if(0>=c.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(b=0;b<
this.length;b++)this.words[b]=0;var f=0;if("be"===d)for(b=c.length-1,d=0;0<=b;b-=3){var a=c[b]|c[b-1]<<8|c[b-2]<<16;this.words[d]|=a<<f&67108863;this.words[d+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,d++)}else if("le"===d)for(d=b=0;b<c.length;b+=3)a=c[b]|c[b+1]<<8|c[b+2]<<16,this.words[d]|=a<<f&67108863,this.words[d+1]=a>>>26-f&67108863,f+=24,26<=f&&(f-=26,d++);return this.strip()};k.prototype._parseHex=function(c,b){this.length=Math.ceil((c.length-b)/6);this.words=Array(this.length);for(var d=0;d<
this.length;d++)this.words[d]=0;for(var f=0,d=c.length-6,a=0;d>=b;d-=6){var e=q(c,d,d+6);this.words[a]|=e<<f&67108863;this.words[a+1]|=e>>>26-f&4194303;f+=24;26<=f&&(f-=26,a++)}d+6!==b&&(e=q(c,b,d+6),this.words[a]|=e<<f&67108863,this.words[a+1]|=e>>>26-f&4194303);this.strip()};k.prototype._parseBase=function(c,b,d){this.words=[0];this.length=1;for(var f=0,a=1;67108863>=a;a*=b)f++;f--;for(var a=a/b|0,e=c.length-d,l=e%f,h=Math.min(e,e-l)+d,e=0;d<h;d+=f)e=y(c,d,d+f,b),this.imuln(a),67108864>this.words[0]+
e?this.words[0]+=e:this._iaddn(e);if(0!==l){f=1;e=y(c,d,c.length,b);for(d=0;d<l;d++)f*=b;this.imuln(f);67108864>this.words[0]+e?this.words[0]+=e:this._iaddn(e)}};k.prototype.copy=function(c){c.words=Array(this.length);for(var b=0;b<this.length;b++)c.words[b]=this.words[b];c.length=this.length;c.sign=this.sign;c.red=this.red};k.prototype.clone=function(){var c=new k(null);this.copy(c);return c};k.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};
k.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(c,b){c=c||10;if(16===c||"hex"===c){var d="",f=0;b=b|0||1;for(var a=0,h=0;h<this.length;h++){var k=
this.words[h],q=((k<<f|a)&16777215).toString(16),a=k>>>24-f&16777215,d=0!==a||h!==this.length-1?l[6-q.length]+q+d:q+d,f=f+2;26<=f&&(f-=26,h--)}for(0!==a&&(d=a.toString(16)+d);0!==d.length%b;)d="0"+d;this.sign&&(d="-"+d);return d}if(c===(c|0)&&2<=c&&36>=c){f=n[c];a=z[c];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)k=h.modn(a).toString(c),h=h.idivn(a),d=0!==h.cmpn(0)?l[f-k.length]+k+d:k+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}e(!1,"Base should be between 2 and 36")};k.prototype.toJSON=
function(){return this.toString(16)};k.prototype.toArray=function(c){this.strip();var b=Array(this.byteLength());b[0]=0;var d=this.clone();if("le"!==c)for(c=0;0!==d.cmpn(0);c++){var f=d.andln(255);d.ishrn(8);b[b.length-c-1]=f}else for(c=0;0!==d.cmpn(0);c++)f=d.andln(255),d.ishrn(8),b[c]=f;return b};k.prototype._countBits=Math.clz32?function(c){return 32-Math.clz32(c)}:function(c){var b=0;4096<=c&&(b+=13,c>>>=13);64<=c&&(b+=7,c>>>=7);8<=c&&(b+=4,c>>>=4);2<=c&&(b+=2,c>>>=2);return b+c};k.prototype._zeroBits=
function(c){if(0===c)return 26;var b=0;0===(c&8191)&&(b+=13,c>>>=13);0===(c&127)&&(b+=7,c>>>=7);0===(c&15)&&(b+=4,c>>>=4);0===(c&3)&&(b+=2,c>>>=2);0===(c&1)&&b++;return b};k.prototype.bitLength=function(){var c=0,c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c};k.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var c=0,b=0;b<this.length;b++){var d=this._zeroBits(this.words[b]),c=c+d;if(26!==d)break}return c};k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};k.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var c=this.clone();c.sign=!this.sign;return c};k.prototype.ior=function(c){for(this.sign=this.sign||c.sign;this.length<c.length;)this.words[this.length++]=0;for(var b=0;b<c.length;b++)this.words[b]|=c.words[b];return this.strip()};k.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)};k.prototype.iand=function(c){this.sign=this.sign&&c.sign;var b;b=this.length>c.length?c:this;for(var d=
0;d<b.length;d++)this.words[d]&=c.words[d];this.length=b.length;return this.strip()};k.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)};k.prototype.ixor=function(c){this.sign=this.sign||c.sign;var b;this.length>c.length?b=this:(b=c,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];this.length=b.length;return this.strip()};k.prototype.xor=function(c){return this.length>c.length?
this.clone().ixor(c):c.clone().ixor(this)};k.prototype.setn=function(c,b){e("number"===typeof c&&0<=c);for(var d=c/26|0,f=c%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=b?this.words[d]|1<<f:this.words[d]&~(1<<f);return this.strip()};k.prototype.iadd=function(c){if(this.sign&&!c.sign){this.sign=!1;var b=this.isub(c);this.sign=!this.sign;return this._normSign()}if(!this.sign&&c.sign)return c.sign=!1,b=this.isub(c),c.sign=!0,b._normSign();var d;this.length>c.length?d=this:(d=c,c=this);
for(var f=b=0;f<c.length;f++)b=d.words[f]+c.words[f]+b,this.words[f]=b&67108863,b>>>=26;for(;0!==b&&f<d.length;f++)b=d.words[f]+b,this.words[f]=b&67108863,b>>>=26;this.length=d.length;if(0!==b)this.words[this.length]=b,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this};k.prototype.add=function(c){if(c.sign&&!this.sign){c.sign=!1;var b=this.sub(c);c.sign=!0;return b}return!c.sign&&this.sign?(this.sign=!1,b=c.sub(this),this.sign=!0,b):this.length>c.length?this.clone().iadd(c):
c.clone().iadd(this)};k.prototype.isub=function(c){if(c.sign){c.sign=!1;var b=this.iadd(c);c.sign=!0;return b._normSign()}if(this.sign)return this.sign=!1,this.iadd(c),this.sign=!0,this._normSign();b=this.cmp(c);if(0===b)return this.sign=!1,this.length=1,this.words[0]=0,this;var d;0<b?d=this:(d=c,c=this);for(var f=0,a=0;a<c.length;a++)b=d.words[a]-c.words[a]+f,f=b>>26,this.words[a]=b&67108863;for(;0!==f&&a<d.length;a++)b=d.words[a]+f,f=b>>26,this.words[a]=b&67108863;if(0===f&&a<d.length&&d!==this)for(;a<
d.length;a++)this.words[a]=d.words[a];this.length=Math.max(this.length,a);d!==this&&(this.sign=!0);return this.strip()};k.prototype.sub=function(c){return this.clone().isub(c)};k.prototype._smallMulTo=function(c,b){b.sign=c.sign!==this.sign;b.length=this.length+c.length;for(var d=0,f=0;f<b.length-1;f++){for(var a=d>>>26,d=d&67108863,e=Math.min(f,c.length-1),l=Math.max(0,f-this.length+1);l<=e;l++)var h=(this.words[f-l]|0)*(c.words[l]|0),n=h&67108863,a=a+(h/67108864|0)|0,n=n+d|0,d=n&67108863,a=a+(n>>>
26)|0;b.words[f]=d;d=a}0!==d?b.words[f]=d:b.length--;return b.strip()};k.prototype._bigMulTo=function(c,b){b.sign=c.sign!==this.sign;b.length=this.length+c.length;for(var d=0,f=0,a=0;a<b.length-1;a++){for(var e=f,f=0,d=d&67108863,l=Math.min(a,c.length-1),h=Math.max(0,a-this.length+1);h<=l;h++)var n=(this.words[a-h]|0)*(c.words[h]|0),k=n&67108863,e=e+(n/67108864|0)|0,k=k+d|0,d=k&67108863,e=e+(k>>>26)|0,f=f+(e>>>26),e=e&67108863;b.words[a]=d;d=e}0!==d?b.words[a]=d:b.length--;return b.strip()};k.prototype.mulTo=
function(c,b){return 63>this.length+c.length?this._smallMulTo(c,b):this._bigMulTo(c,b)};k.prototype.mul=function(c){var b=new k(null);b.words=Array(this.length+c.length);return this.mulTo(c,b)};k.prototype.imul=function(c){if(0===this.cmpn(0)||0===c.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,d=c.length;this.sign=c.sign!==this.sign;this.length+=c.length;this.words[this.length-1]=0;for(var f=this.length-2;0<=f;f--){for(var a=0,e=0,h=Math.min(f,d-1),l=Math.max(0,f-b+1);l<=h;l++)var n=
f-l,n=this.words[n]*c.words[l],k=n&67108863,a=a+(n/67108864|0),k=k+e,e=k&67108863,a=a+(k>>>26);this.words[f]=e;this.words[f+1]+=a}a=0;for(n=1;n<this.length;n++)c=this.words[n]+a,this.words[n]=c&67108863,a=c>>>26;return this.strip()};k.prototype.imuln=function(c){e("number"===typeof c);for(var b=0,d=0;d<this.length;d++){var f=this.words[d]*c,a=(f&67108863)+(b&67108863),b=b>>26,b=b+(f/67108864|0),b=b+(a>>>26);this.words[d]=a&67108863}0!==b&&(this.words[d]=b,this.length++);return this};k.prototype.muln=
function(c){return this.clone().imuln(c)};k.prototype.sqr=function(){return this.mul(this)};k.prototype.isqr=function(){return this.mul(this)};k.prototype.ishln=function(c){e("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;var d=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,a=0;a<this.length;a++){var l=this.words[a]&d;this.words[a]=this.words[a]-l<<b|f;f=l>>>26-b}f&&(this.words[a]=f,this.length++)}if(0!==c){for(a=this.length-1;0<=a;a--)this.words[a+c]=this.words[a];for(a=0;a<c;a++)this.words[a]=0;
this.length+=c}return this.strip()};k.prototype.ishrn=function(c,b,d){e("number"===typeof c&&0<=c);var f=c%26,a=Math.min((c-f)/26,this.length);c=67108863^67108863>>>f<<f;b=(b?(b-b%26)/26:0)-a;b=Math.max(0,b);if(d){for(var l=0;l<a;l++)d.words[l]=this.words[l];d.length=a}if(0!==a)if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;a=0;for(l=this.length-1;0<=l&&(0!==a||l>=b);l--){var h=this.words[l];this.words[l]=a<<26-f|h>>>f;a=
h&c}d&&0!==a&&(d.words[d.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};k.prototype.shln=function(c){return this.clone().ishln(c)};k.prototype.shrn=function(c){return this.clone().ishrn(c)};k.prototype.testn=function(c){e("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;return this.length<=c?!1:!!(this.words[c]&1<<b)};k.prototype.imaskn=function(c){e("number"===typeof c&&0<=c);var b=c%26;c=(c-b)/26;e(!this.sign,"imaskn works only with positive numbers");0!==
b&&c++;this.length=Math.min(c,this.length);0!==b&&(this.words[this.length-1]&=67108863^67108863>>>b<<b);return this.strip()};k.prototype.maskn=function(c){return this.clone().imaskn(c)};k.prototype.iaddn=function(c){e("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};k.prototype._iaddn=function(c){this.words[0]+=c;for(c=
0;c<this.length&&67108864<=this.words[c];c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;this.length=Math.max(this.length,c+1);return this};k.prototype.isubn=function(c){e("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};k.prototype.addn=function(c){return this.clone().iaddn(c)};
k.prototype.subn=function(c){return this.clone().isubn(c)};k.prototype.iabs=function(){this.sign=!1;return this};k.prototype.abs=function(){return this.clone().iabs()};k.prototype._ishlnsubmul=function(c,b,d){var f=c.length+d,a;if(this.words.length<f){var l=Array(f);for(a=0;a<this.length;a++)l[a]=this.words[a];this.words=l}else a=this.length;for(this.length=Math.max(this.length,f);a<this.length;a++)this.words[a]=0;for(a=l=0;a<c.length;a++)f=this.words[a+d]+l,l=c.words[a]*b,f-=l&67108863,l=(f>>26)-
(l/67108864|0),this.words[a+d]=f&67108863;for(;a<this.length-d;a++)f=this.words[a+d]+l,l=f>>26,this.words[a+d]=f&67108863;if(0===l)return this.strip();e(-1===l);for(a=l=0;a<this.length;a++)f=-this.words[a]+l,l=f>>26,this.words[a]=f&67108863;this.sign=!0;return this.strip()};k.prototype._wordDiv=function(c,b){var d=this.length-c.length,a=this.clone(),f=c,e=f.words[f.length-1],d=26-this._countBits(e);0!==d&&(f=f.shln(d),a.ishln(d),e=f.words[f.length-1]);var l=a.length-f.length,h;if("mod"!==b){h=new k(null);
h.length=l+1;h.words=Array(h.length);for(var n=0;n<h.length;n++)h.words[n]=0}n=a.clone()._ishlnsubmul(f,1,l);n.sign||(a=n,h&&(h.words[l]=1));for(--l;0<=l;l--){n=67108864*a.words[f.length+l]+a.words[f.length+l-1];n=Math.min(n/e|0,67108863);for(a._ishlnsubmul(f,n,l);a.sign;)n--,a.sign=!1,a._ishlnsubmul(f,1,l),0!==a.cmpn(0)&&(a.sign=!a.sign);h&&(h.words[l]=n)}h&&h.strip();a.strip();"div"!==b&&0!==d&&a.ishrn(d);return{div:h?h:null,mod:a}};k.prototype.divmod=function(c,b){e(0!==c.cmpn(0));if(this.sign&&
!c.sign){var d=this.neg().divmod(c,b),a,f;"mod"!==b&&(a=d.div.neg());"div"!==b&&(f=0===d.mod.cmpn(0)?d.mod:c.sub(d.mod));return{div:a,mod:f}}return!this.sign&&c.sign?(d=this.divmod(c.neg(),b),"mod"!==b&&(a=d.div.neg()),{div:a,mod:d.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),b):c.length>this.length||0>this.cmp(c)?{div:new k(0),mod:this}:1===c.length?"div"===b?{div:this.divn(c.words[0]),mod:null}:"mod"===b?{div:null,mod:new k(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new k(this.modn(c.words[0]))}:
this._wordDiv(c,b)};k.prototype.div=function(c){return this.divmod(c,"div").div};k.prototype.mod=function(c){return this.divmod(c,"mod").mod};k.prototype.divRound=function(c){var b=this.divmod(c);if(0===b.mod.cmpn(0))return b.div;var d=b.div.sign?b.mod.isub(c):b.mod,a=c.shrn(1);c=c.andln(1);d=d.cmp(a);return 0>d||1===c&&0===d?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)};k.prototype.modn=function(c){e(67108863>=c);for(var b=67108864%c,d=0,a=this.length-1;0<=a;a--)d=(b*d+this.words[a])%c;return d};
k.prototype.idivn=function(c){e(67108863>=c);for(var b=0,d=this.length-1;0<=d;d--)b=this.words[d]+67108864*b,this.words[d]=b/c|0,b%=c;return this.strip()};k.prototype.divn=function(c){return this.clone().idivn(c)};k.prototype.egcd=function(c){e(!c.sign);e(0!==c.cmpn(0));var b=this,d=c.clone(),b=b.sign?b.mod(c):b.clone();c=new k(1);for(var a=new k(0),f=new k(0),l=new k(1),h=0;b.isEven()&&d.isEven();)b.ishrn(1),d.ishrn(1),++h;for(var n=d.clone(),q=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.ishrn(1),
c.isEven()&&a.isEven()?(c.ishrn(1),a.ishrn(1)):(c.iadd(n).ishrn(1),a.isub(q).ishrn(1));for(;d.isEven();)d.ishrn(1),f.isEven()&&l.isEven()?(f.ishrn(1),l.ishrn(1)):(f.iadd(n).ishrn(1),l.isub(q).ishrn(1));0<=b.cmp(d)?(b.isub(d),c.isub(f),a.isub(l)):(d.isub(b),f.isub(c),l.isub(a))}return{a:f,b:l,gcd:d.ishln(h)}};k.prototype._invmp=function(c){e(!c.sign);e(0!==c.cmpn(0));var b=this,d=c.clone(),b=b.sign?b.mod(c):b.clone();c=new k(1);for(var a=new k(0),f=d.clone();0<b.cmpn(1)&&0<d.cmpn(1);){for(;b.isEven();)b.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(f).ishrn(1);for(;d.isEven();)d.ishrn(1),a.isEven()?a.ishrn(1):a.iadd(f).ishrn(1);0<=b.cmp(d)?(b.isub(d),c.isub(a)):(d.isub(b),a.isub(c))}return 0===b.cmpn(1)?c:a};k.prototype.gcd=function(c){if(0===this.cmpn(0))return c.clone();if(0===c.cmpn(0))return this.clone();var b=this.clone();c=c.clone();b.sign=!1;c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);do{for(;b.isEven();)b.ishrn(1);for(;c.isEven();)c.ishrn(1);var a=b.cmp(c);if(0>a)a=b,b=c,c=a;else if(0===
a||0===c.cmpn(1))break;b.isub(c)}while(1);return c.ishln(d)};k.prototype.invm=function(c){return this.egcd(c).a.mod(c)};k.prototype.isEven=function(){return 0===(this.words[0]&1)};k.prototype.isOdd=function(){return 1===(this.words[0]&1)};k.prototype.andln=function(c){return this.words[0]&c};k.prototype.bincn=function(c){e("number"===typeof c);var b=c%26;c=(c-b)/26;var d=1<<b;if(this.length<=c){for(b=this.length;b<c+1;b++)this.words[b]=0;this.words[c]|=d;this.length=c+1;return this}for(b=c;0!==d&&
b<this.length;b++)c=this.words[b],c+=d,d=c>>>26,c&=67108863,this.words[b]=c;0!==d&&(this.words[b]=d,this.length++);return this};k.prototype.cmpn=function(c){var b=0>c;b&&(c=-c);if(this.sign&&!b)return-1;if(!this.sign&&b)return 1;c&=67108863;this.strip();1<this.length?c=1:(b=this.words[0],c=b===c?0:b<c?-1:1);this.sign&&(c=-c);return c};k.prototype.cmp=function(c){if(this.sign&&!c.sign)return-1;if(!this.sign&&c.sign)return 1;c=this.ucmp(c);return this.sign?-c:c};k.prototype.ucmp=function(c){if(this.length>
c.length)return 1;if(this.length<c.length)return-1;for(var b=0,d=this.length-1;0<=d;d--){var a=this.words[d],f=c.words[d];if(a!==f){a<f?b=-1:a>f&&(b=1);break}}return b};k.red=function(c){return new f(c)};k.prototype.toRed=function(c){e(!this.red,"Already a number in reduction context");e(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};k.prototype.fromRed=function(){e(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
k.prototype._forceRed=function(c){this.red=c;return this};k.prototype.forceRed=function(c){e(!this.red,"Already a number in reduction context");return this._forceRed(c)};k.prototype.redAdd=function(c){e(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};k.prototype.redIAdd=function(c){e(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};k.prototype.redSub=function(c){e(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};k.prototype.redISub=
function(c){e(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};k.prototype.redShl=function(c){e(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};k.prototype.redMul=function(c){e(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};k.prototype.redIMul=function(c){e(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};k.prototype.redSqr=function(){e(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};k.prototype.redISqr=function(){e(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};k.prototype.redSqrt=function(){e(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};k.prototype.redInvm=function(){e(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};k.prototype.redNeg=
function(){e(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};k.prototype.redPow=function(c){e(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var c=new k(null);c.words=Array(Math.ceil(this.n/13));return c};u.prototype.ireduce=function(c){var b;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);
b=b<this.n?-1:c.ucmp(this.p);0===b?(c.words[0]=0,c.length=1):0<b?c.isub(this.p):c.strip();return c};u.prototype.split=function(c,b){c.ishrn(this.n,0,b)};u.prototype.imulK=function(c){return c.imul(this.k)};b(w,u);w.prototype.split=function(c,b){for(var d=Math.min(c.length,9),a=0;a<d;a++)b.words[a]=c.words[a];b.length=d;if(9>=c.length)c.words[0]=0,c.length=1;else{d=c.words[9];b.words[b.length++]=d&4194303;for(a=10;a<c.length;a++){var f=c.words[a];c.words[a-10]=(f&4194303)<<4|d>>>22;d=f}c.words[a-10]=
d>>>22;c.length-=9}};w.prototype.imulK=function(c){c.words[c.length]=0;c.words[c.length+1]=0;c.length+=2;for(var b,d=0,a=0;a<c.length;a++){var f=c.words[a];b=64*f;d+=977*f;b+=d/67108864|0;d&=67108863;c.words[a]=d;d=b}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};b(v,u);b(r,u);b(h,u);h.prototype.imulK=function(c){for(var b=0,d=0;d<c.length;d++){var b=19*c.words[d]+b,a=b&67108863,b=b>>>26;c.words[d]=a}0!==b&&(c.words[c.length++]=b);return c};k._prime=function(c){if(g[c])return g[c];
var b;if("k256"===c)b=new w;else if("p224"===c)b=new v;else if("p192"===c)b=new r;else if("p25519"===c)b=new h;else throw Error("Unknown prime "+c);return g[c]=b};f.prototype._verify1=function(b){e(!b.sign,"red works only with positives");e(b.red,"red works only with red numbers")};f.prototype._verify2=function(b,d){e(!b.sign&&!d.sign,"red works only with positives");e(b.red&&b.red===d.red,"red works only with red numbers")};f.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};f.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};f.prototype.add=function(b,d){this._verify2(b,d);var a=b.add(d);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};f.prototype.iadd=function(b,d){this._verify2(b,d);var a=b.iadd(d);0<=a.cmp(this.m)&&a.isub(this.m);return a};f.prototype.sub=function(b,d){this._verify2(b,d);var a=b.sub(d);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};f.prototype.isub=function(b,
d){this._verify2(b,d);var a=b.isub(d);0>a.cmpn(0)&&a.iadd(this.m);return a};f.prototype.shl=function(b,d){this._verify1(b);return this.imod(b.shln(d))};f.prototype.imul=function(b,d){this._verify2(b,d);return this.imod(b.imul(d))};f.prototype.mul=function(b,d){this._verify2(b,d);return this.imod(b.mul(d))};f.prototype.isqr=function(b){return this.imul(b,b)};f.prototype.sqr=function(b){return this.mul(b,b)};f.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var d=this.m.andln(3);e(1===
d%2);if(3===d){var d=this.m.add(new k(1)).ishrn(2),a=this.pow(b,d);return a}for(var f=this.m.subn(1),l=0;0!==f.cmpn(0)&&0===f.andln(1);)l++,f.ishrn(1);e(0!==f.cmpn(0));for(var d=(new k(1)).toRed(this),a=d.redNeg(),h=this.m.subn(1).ishrn(1),n=this.m.bitLength(),n=(new k(2*n*n)).toRed(this);0!==this.pow(n,h).cmp(a);)n.redIAdd(a);h=this.pow(n,f);a=this.pow(b,f.addn(1).ishrn(1));b=this.pow(b,f);for(f=l;0!==b.cmp(d);){n=b;for(l=0;0!==n.cmp(d);l++)n=n.redSqr();e(l<f);h=this.pow(h,(new k(1)).ishln(f-l-1));
a=a.redMul(h);h=h.redSqr();b=b.redMul(h);f=l}return a};f.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};f.prototype.pow=function(b,d){var a=[];if(0===d.cmpn(0))return new k(1);for(var f=d.clone();0!==f.cmpn(0);)a.push(f.andln(1)),f.ishrn(1);for(var e=b,l=0;l<a.length&&0===a[l];l++,e=this.sqr(e));if(++l<a.length)for(f=this.sqr(e);l<a.length;l++,f=this.sqr(f))0!==a[l]&&(e=this.mul(e,f));return e};f.prototype.convertTo=function(b){var d=b.mod(this.m);
return d===b?d.clone():d};f.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};k.mont=function(b){return new d(b)};b(d,f);d.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};d.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};d.prototype.imul=function(b,d){if(0===b.cmpn(0)||0===d.cmpn(0))return b.words[0]=0,b.length=1,b;var a=b.imul(d),f=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=a=a.isub(f).ishrn(this.shift);
0<=a.cmp(this.m)?f=a.isub(this.m):0>a.cmpn(0)&&(f=a.iadd(this.m));return f._forceRed(this)};d.prototype.mul=function(b,d){if(0===b.cmpn(0)||0===d.cmpn(0))return(new k(0))._forceRed(this);var a=b.mul(d),f=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=a=a.isub(f).ishrn(this.shift);0<=a.cmp(this.m)?f=a.isub(this.m):0>a.cmpn(0)&&(f=a.iadd(this.m));return f._forceRed(this)};d.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],48:[function(a,g,m){var t=a("./lib/bn-sign");g.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":39}],49:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]).sub(a[1].mul(e[0])),a[1].mul(e[1]))}},{"./lib/rationalize":44}],50:[function(a,g,m){var t=a("./lib/bn-to-num"),p=a("./lib/ctz");g.exports=function(a){var b=a[0];a=a[1];if(0===b.cmpn(0))return 0;var k=b.divmod(a),b=t(k.div),k=k.mod;if(0===k.cmpn(0))return b;if(b){var q=
p(b)+4;a=t(k.shln(q).divRound(a));0>b&&(a=-a);return b+a*Math.pow(2,-q)}b=a.bitLength()-k.bitLength()+53;a=t(k.shln(b).divRound(a));if(1023>b)return a*Math.pow(2,-b);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-b)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,g,m){function t(a,b,k,q,p){a=["function ",a,"(a,l,h,",q.join(","),"){",p?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];p?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",b,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,b,k,q){return(new Function([t("A","x"+a+"y",b,["y"],q),t("P","c(x,y)"+a+"0",b,["y","c"],q),"function dispatchBsearch",k,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",k].join("")))()}
g.exports={ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],52:[function(a,g,m){function t(a){var b=32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&--b;return b}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(a){return(0<a)-(0>a)};m.abs=function(a){var b=a>>31;return(a^b)-b};m.min=function(a,b){return b^(a^b)&-(a<b)};m.max=function(a,b){return a^(a^
b)&-(a<b)};m.isPow2=function(a){return!(a&a-1)&&!!a};m.log2=function(a){var b,k;b=(65535<a)<<4;a>>>=b;k=(255<a)<<3;a>>>=k;b|=k;k=(15<a)<<2;a>>>=k;b|=k;k=(3<a)<<1;return b|k|a>>>k>>1};m.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};m.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};m.countTrailingZeros=t;m.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};m.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};m.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var p=Array(256);(function(a){for(var b=0;256>b;++b){for(var k=b,q=b,p=7,k=k>>>1;k;k>>>=1)q<<=1,q|=k&1,--p;a[b]=q<<p&255}})(p);m.reverse=function(a){return p[a&255]<<24|p[a>>>8&255]<<16|p[a>>>16&255]<<8|p[a>>>24&255]};m.interleave2=function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};m.deinterleave2=function(a,b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};m.interleave3=function(a,b,k){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a=(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1;k&=1023;
k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;return a|((k|k<<2)&1227133513)<<2};m.deinterleave3=function(a,b){a=a>>>b&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};m.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>t(a)+1}},{}],53:[function(a,g,m){function t(b,a,e,k){for(var h=0,f=0,d=0,l=b.length;d<l;++d){var n=b[d],q;a:{for(q=0;q<a;++q)if(!(n[q]<=n[q+a])){q=!0;break a}q=!1}if(!q){for(q=0;q<2*a;++q)e[h++]=
n[q];k[f++]=d}}return f}function p(a,e,v,r){var h=a.length,f=e.length;if(!(0>=h||0>=f)){var d=a[0].length>>>1;if(!(0>=d)){var l,n=b.mallocDouble(2*d*h),p=b.mallocInt32(h),h=t(a,d,n,p);if(0<h){if(1===d&&r)k.init(h),l=k.sweepComplete(d,v,0,h,n,p,0,h,n,p);else{a=b.mallocDouble(2*d*f);var y=b.mallocInt32(f),f=t(e,d,a,y);0<f&&(k.init(h+f),l=1===d?k.sweepBipartite(d,v,0,h,n,p,0,f,a,y):q(d,v,r,h,n,p,f,a,y),b.free(a),b.free(y))}b.free(n);b.free(p)}return l}}}function e(b,a){y.push([b,a])}g.exports=function(b,
a,k){switch(arguments.length){case 1:return y=[],p(b,b,e,!0),y;case 2:if("function"===typeof a)return p(b,b,a,!0);y=[];p(b,a,e,!1);return y;case 3:return p(b,a,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var b=a("typedarray-pool"),k=a("./lib/sweep"),q=a("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,g,m){function t(a){function b(b,k){var r,h="bruteForce"+(b?"Red":"Blue")+(k?"Flip":"")+(a?"Full":"");r=["function ",h,"(",p.join(),
"){","var ","es","=2*","d",";"];var f="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";b?r.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",f):r.push(f,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");a?r.push("if(y1<x0||x1<y0)continue;"):k?r.push("if(y0<=x0||x1<y0)continue;"):r.push("if(y0<x0||x1<y0)continue;");r.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
k?r.push("yi,xi"):r.push("xi,yi");r.push(");if(rv!==void 0)return rv;}}}");r=r.join("");q.push(r);u.push("return "+h+"("+p.join()+");")}var k="bruteForce"+(a?"Full":"Partial"),q=[],y=p.slice();a||y.splice(3,0,"fp");var u=["function "+k+"("+y.join()+"){"];u.push("if(re-rs>be-bs){");a?(b(!0,!1),u.push("}else{"),b(!1,!1)):(u.push("if(fp){"),b(!0,!0),u.push("}else{"),b(!0,!1),u.push("}}else{if(fp){"),b(!1,!0),u.push("}else{"),b(!1,!1),u.push("}"));u.push("}}return "+k);k=q.join("")+u.join("");return(new Function(k))()}
var p="d ax vv rs re rb ri bs be bb bi".split(" ");m.partial=t(!1);m.full=t(!0)},{}],55:[function(a,g,m){function t(b,a,d,f,e,l,h,n,k){var q=z*b;c[q]=a;c[q+1]=d;c[q+2]=f;c[q+3]=e;c[q+4]=l;c[q+5]=h;b*=C;x[b]=n;x[b+1]=k}g.exports=function(a,g,m,B,P,F,D,J,M){var I=8*e.log2(B+D+1)*(a+1)|0,Q=e.nextPow2(z*I);c.length<Q&&(p.free(c),c=p.mallocInt32(Q));I=e.nextPow2(C*I);x<I&&(p.free(x),x=p.mallocDouble(I));var I=0,Q=2*a,G;t(I++,0,0,B,0,D,m?16:0,-Infinity,Infinity);for(m||t(I++,0,0,D,0,B,1,-Infinity,Infinity);0<
I;){--I;m=I*z;var K=c[m];D=c[m+1];var O=c[m+2],L=c[m+3],N=c[m+4];m=c[m+5];B=I*C;var W=x[B],Z=x[B+1],V=m&1,X=!!(m&16),S=P,U=F,T=J;B=M;V&&(S=J,U=M,T=P,B=F);if(m&2&&(O=f(a,K,D,O,S,U,Z),D>=O))continue;if(m&4&&(D=d(a,K,D,O,S,U,W),D>=O))continue;m=O-D;var R=N-L;if(X){if(a*m*(m+R)<v){G=q.scanComplete(a,K,g,D,O,S,U,L,N,T,B);if(void 0!==G)return G;continue}}else if(a*Math.min(m,R)<u){G=b(a,K,g,V,D,O,S,U,L,N,T,B);if(void 0!==G)return G;continue}else if(a*m*R<w){G=q.scanBipartite(a,K,g,V,D,O,S,U,L,N,T,B);if(void 0!==
G)return G;continue}m=r(a,K,D,O,S,U,W,Z);if(D<m)if(a*(m-D)<u){if(G=k(a,K+1,g,D,m,S,U,L,N,T,B),void 0!==G)return G}else if(K===a-2){if(G=V?q.sweepBipartite(a,g,L,N,T,B,D,m,S,U):q.sweepBipartite(a,g,D,m,S,U,L,N,T,B),void 0!==G)return G}else t(I++,K+1,D,m,L,N,V,-Infinity,Infinity),t(I++,K+1,L,N,D,m,V^1,-Infinity,Infinity);if(m<O)if(D=y(a,K,L,N,T,B),G=T[Q*D+K],R=h(a,K,D,N,T,B,G),R<N&&t(I++,K,m,O,R,N,(V|4)+(X?16:0),G,Z),L<D&&t(I++,K,m,O,L,D,(V|2)+(X?16:0),W,G),D+1===R){if(X)a:{L=a;N=g;B=B[D];V=2*L;D*=
V;W=T[D+K];Z=m;m*=V;b:for(;Z<O;++Z,m+=V)if(X=U[Z],X!==B&&(R=S[m+K],G=S[m+K+L],!(W<R||G<W))){for(var aa=K+1;aa<L;++aa){R=S[m+aa];G=S[m+aa+L];var Y=T[D+aa+L];if(G<T[D+aa]||Y<R)continue b}X=N(X,B);if(void 0!==X){G=X;break a}}G=void 0}else a:{L=a;N=g;B=B[D];W=2*L;D*=W;Z=T[D+K];X=m;m*=W;b:for(;X<O;++X,m+=W)if(R=S[m+K],G=S[m+K+L],!(Z<R||G<Z||V&&Z===R)){aa=U[X];for(Y=K+1;Y<L;++Y){R=S[m+Y];G=S[m+Y+L];var ba=T[D+Y+L];if(G<T[D+Y]||ba<R)continue b}R=V?N(B,aa):N(aa,B);if(void 0!==R){G=R;break a}}G=void 0}if(void 0!==
G)return G}else if(D<R)if(X){if(O=l(a,K,m,O,S,U,G),m<O)if(L=h(a,K,m,O,S,U,G),K===a-2){if(m<L&&(G=q.sweepComplete(a,g,m,L,S,U,D,R,T,B),void 0!==G)||L<O&&(G=q.sweepBipartite(a,g,L,O,S,U,D,R,T,B),void 0!==G))return G}else m<L&&t(I++,K+1,m,L,D,R,16,-Infinity,Infinity),L<O&&(t(I++,K+1,L,O,D,R,0,-Infinity,Infinity),t(I++,K+1,D,R,L,O,1,-Infinity,Infinity))}else O=V?n(a,K,m,O,S,U,G):l(a,K,m,O,S,U,G),m<O&&(K===a-2?V?q.sweepBipartite(a,g,D,R,T,B,m,O,S,U):q.sweepBipartite(a,g,m,O,S,U,D,R,T,B):(t(I++,K+1,m,O,
D,R,V,-Infinity,Infinity),t(I++,K+1,D,R,m,O,V^1,-Infinity,Infinity)))}};var p=a("typedarray-pool"),e=a("bit-twiddle");g=a("./brute");var b=g.partial,k=g.full,q=a("./sweep"),y=a("./median");a=a("./partition");var u=128,w=4194304,v=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=a("lo===p0",["p0"]),f=a("lo<p0",["p0"]),d=a("hi<=p0",["p0"]),l=a("lo<=p0&&p0<=hi",["p0"]),n=a("lo<p0&&p0<=hi",["p0"]),z=6,C=2,c=p.mallocInt32(1024),x=p.mallocDouble(1024)},{"./brute":54,"./median":56,"./partition":57,"./sweep":59,
"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,g,m){g.exports=function(a,b,k,q,y,u){if(q<=k+1)return k;var w=k,v=q;q=q+k>>>1;for(var r=2*a,h=q,f=y[r*q+b];w<v;){if(v-w<p){for(var h=b,f=y,d=u,l=2*a,n=l*(w+1)+h,z=w+1;z<v;++z,n+=l)for(var g=f[n],c=z,m=l*(z-1);c>w&&f[m+h]>g;--c,m-=l){for(var E=m,H=m+l,A=0;A<l;++A,++E,++H){var B=f[E];f[E]=f[H];f[H]=B}E=d[c];d[c]=d[c-1];d[c-1]=E}break}n=v-w;h=Math.random()*n+w|0;f=y[r*h+b];l=Math.random()*n+w|0;d=y[r*l+b];z=Math.random()*n+w|0;n=y[r*z+b];f<=d?n>=
d?(h=l,f=d):f>=n||(h=z,f=n):d>=n?(h=l,f=d):n>=f||(h=z,f=n);d=r*(v-1);l=r*h;for(n=0;n<r;++n,++d,++l)z=y[d],y[d]=y[l],y[l]=z;d=u[v-1];u[v-1]=u[h];u[h]=d;h=t(a,b,w,v-1,y,u,f);d=r*(v-1);l=r*h;for(n=0;n<r;++n,++d,++l)z=y[d],y[d]=y[l],y[l]=z;d=u[v-1];u[v-1]=u[h];u[h]=d;if(q<h){for(v=h-1;w<v&&y[r*(v-1)+b]===f;)--v;v+=1}else if(h<q)for(w=h+1;w<v&&y[r*w+b]===f;)w+=1;else break}return t(a,b,k,q,y,u,y[r*q+b])};var t=a("./partition")("lo<p0",["p0"]),p=8},{"./partition":57}],57:[function(a,g,m){g.exports=function(a,
e){var b="abcdef".split("").concat(e),k=[];0<=a.indexOf("lo")&&k.push("lo=e[k+n]");0<=a.indexOf("hi")&&k.push("hi=e[k+o]");b.push(t.replace("_",k.join()).replace("$",a));return Function.apply(void 0,b)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,g,m){function t(b,a,e){for(var h=2*(b+1),f=b+1;f<=a;++f){for(var d=e[h++],l=e[h++],n=
f,k=h-2;n-- >b;){var q=e[k-2],c=e[k-1];if(q<d)break;else if(q===d&&c<l)break;e[k]=q;e[k+1]=c;k-=2}e[k]=d;e[k+1]=l}}function p(b,a,e){b*=2;a*=2;var h=e[b],f=e[b+1];e[b]=e[a];e[b+1]=e[a+1];e[a]=h;e[a+1]=f}function e(b,a,e){b*=2;a*=2;e[b]=e[a];e[b+1]=e[a+1]}function b(b,a,e,h,f){b*=2;a*=2;f[b]=f[a];f[a]=e;f[b+1]=f[a+1];f[a+1]=h}function k(b,a,e){b*=2;a*=2;var h=e[b],f=e[a];return h<f?!1:h===f?e[b+1]>e[a+1]:!0}function q(b,a,e,h){b*=2;var f=h[b];return f<a?!0:f===a?h[b+1]<e:!1}function y(a,v,r){var h=
(v-a+1)/6|0,f=a+h,d=v-h,l=a+v>>1,n=l-h,z=l+h,g=f,c=n,m=l,E=z,H=d,h=a+1,A=v-1,B=0;k(g,c,r)&&(B=g,g=c,c=B);k(E,H,r)&&(B=E,E=H,H=B);k(g,m,r)&&(B=g,g=m,m=B);k(c,m,r)&&(B=c,c=m,m=B);k(g,E,r)&&(B=g,g=E,E=B);k(m,E,r)&&(B=m,m=E,E=B);k(c,H,r)&&(B=c,c=H,H=B);k(c,m,r)&&(B=c,c=m,m=B);k(E,H,r)&&(B=E,E=H,H=B);for(var B=r[2*c],c=r[2*c+1],P=r[2*E],E=r[2*E+1],g=2*g,m=2*m,H=2*H,f=2*f,l=2*l,d=2*d,F=0;2>F;++F){var D=r[m+F],J=r[H+F];r[f+F]=r[g+F];r[l+F]=D;r[d+F]=J}e(n,a,r);e(z,v,r);for(n=h;n<=A;++n)if(q(n,B,c,r))n!==
h&&p(n,h,r),++h;else if(!q(n,P,E,r))for(;;)if(q(A,P,E,r)){q(A,B,c,r)?(z=n,d=h,l=A,g=r,z*=2,d*=2,l*=2,f=g[z],m=g[z+1],g[z]=g[d],g[z+1]=g[d+1],g[d]=g[l],g[d+1]=g[l+1],g[l]=f,g[l+1]=m,++h):p(n,A,r);--A;break}else if(--A<n)break;b(a,h-1,B,c,r);b(v,A+1,P,E,r);h-2-a<=u?t(a,h-2,r):y(a,h-2,r);v-(A+2)<=u?t(A+2,v,r):y(A+2,v,r);A-h<=u?t(h,A,r):y(h,A,r)}g.exports=function(b,a){a<=4*u?t(0,a-1,b):y(0,a-1,b)};var u=32},{}],59:[function(a,g,m){function t(b,a,e,h){h=a[h];e=b[e-1];b[h]=e;a[e]=h}g.exports={init:function(b){b=
e.nextPow2(b);q.length<b&&(p.free(q),q=p.mallocInt32(b));y.length<b&&(p.free(y),y=p.mallocInt32(b));u.length<b&&(p.free(u),u=p.mallocInt32(b));w.length<b&&(p.free(w),w=p.mallocInt32(b));v.length<b&&(p.free(v),v=p.mallocInt32(b));r.length<b&&(p.free(r),r=p.mallocInt32(b));b*=8;h.length<b&&(p.free(h),h=p.mallocDouble(b))},sweepBipartite:function(a,d,e,n,r,p,c,v,g,m){var A=0,B=2*a;--a;for(var P=B-1;e<n;++e){var F=p[e],D=B*e;h[A++]=r[D+a];h[A++]=-(F+1);h[A++]=r[D+P];h[A++]=F}for(e=c;e<v;++e)F=m[e]+k,
n=B*e,h[A++]=g[n+a],h[A++]=-F,h[A++]=g[n+P],h[A++]=F;v=A>>>1;b(h,v);for(e=m=g=0;e<v;++e)if(A=h[2*e+1]|0,A>=k)A=A-k|0,t(u,w,m--,A);else if(0<=A)t(q,y,g--,A);else{if(A<=-k){A=-A-k|0;for(B=0;B<g;++B)if(n=d(q[B],A),void 0!==n)return n;B=w;n=m++;u[n]=A}else{A=-A-1|0;for(B=0;B<m;++B)if(n=d(A,u[B]),void 0!==n)return n;B=y;n=g++;q[n]=A}B[A]=n}},sweepComplete:function(a,d,e,n,k,p,c,g,m,H){var A=0,B=2*a;--a;for(var P=B-1;e<n;++e){var F=p[e]+1<<1,D=B*e;h[A++]=k[D+a];h[A++]=-F;h[A++]=k[D+P];h[A++]=F}for(e=c;e<
g;++e)F=H[e]+1<<1,n=B*e,h[A++]=m[n+a],h[A++]=-F|1,h[A++]=m[n+P],h[A++]=F|1;g=A>>>1;b(h,g);for(e=A=H=m=0;e<g;++e)if(B=h[2*e+1]|0,n=B&1,e<g-1&&B>>1===h[2*e+3]>>1&&(n=2,e+=1),0>B){B=-(B>>1)-1;for(k=0;k<A;++k)if(p=d(v[k],B),void 0!==p)return p;if(0!==n)for(k=0;k<m;++k)if(p=d(q[k],B),void 0!==p)return p;if(1!==n)for(k=0;k<H;++k)if(p=d(u[k],B),void 0!==p)return p;0===n?(n=y,k=m++,q[k]=B,n[B]=k):1===n?(n=w,k=H++,u[k]=B,n[B]=k):2===n&&(n=r,k=A++,v[k]=B,n[B]=k)}else B=(B>>1)-1,0===n?t(q,y,m--,B):1===n?t(u,
w,H--,B):2===n&&t(v,r,A--,B)},scanBipartite:function(a,d,e,n,p,r,c,v,u,w,g,m){var P=0,F=2*a,D=d+a,J=1,M=1;for(n?M=k:J=k;p<r;++p){var I=p+J,Q=F*p;h[P++]=c[Q+d];h[P++]=-I;h[P++]=c[Q+D];h[P++]=I}for(p=u;p<w;++p)I=p+M,r=F*p,h[P++]=g[r+d],h[P++]=-I;w=P>>>1;b(h,w);for(p=P=0;p<w;++p)if(I=h[2*p+1]|0,0>I)if(I=-I,M=!1,I>=k?(M=!n,I-=k):(M=!!n,--I),M)M=y,r=P++,q[r]=I,M[I]=r;else a:for(M=m[I],I*=F,r=g[I+d+1],u=g[I+d+1+a],D=0;D<P;++D){var Q=q[D],G=F*Q;if(!(u<c[G+d+1]||c[G+d+1+a]<r)){for(var K=d+2;K<a;++K)if(g[I+
K+a]<c[G+K]||c[G+K+a]<g[I+K])continue a;Q=v[Q];Q=n?e(M,Q):e(Q,M);if(void 0!==Q)return Q}}else t(q,y,P--,I-J)},scanComplete:function(a,d,e,n,p,r,c,v,u,y,w){for(var g=0,t=2*a,m=d+a;n<p;++n){var D=n+k,J=t*n;h[g++]=r[J+d];h[g++]=-D;h[g++]=r[J+m];h[g++]=D}for(n=v;n<u;++n)D=n+1,p=t*n,h[g++]=y[p+d],h[g++]=-D;u=g>>>1;b(h,u);for(n=g=0;n<u;++n)if(p=h[2*n+1]|0,0>p)if(D=-p,D>=k)q[g++]=D-k;else a:for(--D,p=w[D],D*=t,m=y[D+d+1],J=y[D+d+1+a],v=0;v<g;++v){var M=q[v],I=c[M];if(I===p)break;M*=t;if(!(J<r[M+d+1]||r[M+
d+1+a]<m)){for(var Q=d+2;Q<a;++Q)if(y[D+Q+a]<r[M+Q]||r[M+Q+a]<y[D+Q])continue a;I=e(I,p);if(void 0!==I)return I}}else{D=p-k;for(v=g-1;0<=v;--v)if(q[v]===D){for(Q=v+1;Q<g;++Q)q[Q-1]=q[Q];break}--g}}};var p=a("typedarray-pool"),e=a("bit-twiddle"),b=a("./sort"),k=268435456,q=p.mallocInt32(1024),y=p.mallocInt32(1024),u=p.mallocInt32(1024),w=p.mallocInt32(1024),v=p.mallocInt32(1024),r=p.mallocInt32(1024),h=p.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],60:[function(a,g,m){(function(g){function p(){try{var b=
new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(c,a){if((b.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<a)throw new RangeError("Invalid typed array length");b.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(a),c.__proto__=b.prototype):(null===c&&(c=new b(a)),c.length=a);return c}function b(c,a,d){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(c,
a,d);if("number"===typeof c){if("string"===typeof a)throw Error("If encoding is specified then the first argument must be a string");return y(this,c)}return k(this,c,a,d)}function k(c,a,d,f){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer){a.byteLength;if(0>d||a.byteLength<d)throw new RangeError("'offset' is out of bounds");if(a.byteLength<d+(f||0))throw new RangeError("'length' is out of bounds");a=
void 0===f?new Uint8Array(a,d):new Uint8Array(a,d,f);b.TYPED_ARRAY_SUPPORT?(c=a,c.__proto__=b.prototype):c=u(c,a);return c}if("string"===typeof a){f=c;if("string"!==typeof d||""===d)d="utf8";if(!b.isEncoding(d))throw new TypeError('"encoding" must be a valid string encoding');c=r(a,d)|0;f=e(f,c);f.write(a,d);return f}return w(c,a)}function q(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');}function y(c,a){q(a);c=e(c,0>a?0:v(a)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var d=
0;d<a;++d)c[d]=0;return c}function u(b,c){var a=v(c.length)|0;b=e(b,a);for(var d=0;d<a;d+=1)b[d]=c[d]&255;return b}function w(c,a){if(b.isBuffer(a)){var d=v(a.length)|0;c=e(c,d);if(0===c.length)return c;a.copy(c,0,0,d);return c}if(a){if("undefined"!==typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return(d="number"!==typeof a.length)||(d=a.length,d=d!==d),d?e(c,0):u(c,a);if("Buffer"===a.type&&M(a.data))return u(c,a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function v(c){if(c>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function r(c,a){if(b.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var d=c.length;if(0===d)return 0;for(var f=!1;;)switch(a){case "ascii":case "binary":case "raw":case "raws":return d;
case "utf8":case "utf-8":case void 0:return B(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*d;case "hex":return d>>>1;case "base64":return D.toByteArray(A(c)).length;default:if(f)return B(c).length;a=(""+a).toLowerCase();f=!0}}function h(b,c,a){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=0;c>>>=0;if(a<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=a;a=this.length;if(!b||0>b)b=0;
if(!c||0>c||c>a)c=a;d="";for(a=b;a<c;++a)b=d,d=this[a],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return l(this,c,a);case "ascii":b="";for(a=Math.min(this.length,a);c<a;++c)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(a=Math.min(this.length,a);c<a;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&a===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(c,a)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,a);a="";for(b=0;b<c.length;b+=2)a+=String.fromCharCode(c[b]+256*c[b+1]);return a;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function f(b,c,a){var d=b[c];b[c]=b[a];b[a]=d}function d(b,c,a,d){var f=1,e=b.length,h=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>c.length)return-1;f=2;e/=2;h/=2;a/=2}for(d=-1;a<e;++a){var l=1===f?b[a]:b.readUInt16BE(a*f),n;n=-1===d?0:a-d;
n=1===f?c[n]:c.readUInt16BE(n*f);if(l===n){if(-1===d&&(d=a),a-d+1===h)return d*f}else-1!==d&&(a-=a-d),d=-1}return-1}function l(b,c,a){a=Math.min(b.length,a);for(var d=[];c<a;){var f=b[c],e=null,h=239<f?4:223<f?3:191<f?2:1;if(c+h<=a){var l,n,k;switch(h){case 1:128>f&&(e=f);break;case 2:l=b[c+1];128===(l&192)&&(f=(f&31)<<6|l&63,127<f&&(e=f));break;case 3:l=b[c+1];n=b[c+2];128===(l&192)&&128===(n&192)&&(f=(f&15)<<12|(l&63)<<6|n&63,2047<f&&(55296>f||57343<f)&&(e=f));break;case 4:l=b[c+1],n=b[c+2],k=b[c+
3],128===(l&192)&&128===(n&192)&&128===(k&192)&&(f=(f&15)<<18|(l&63)<<12|(n&63)<<6|k&63,65535<f&&1114112>f&&(e=f))}}null===e?(e=65533,h=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|e&1023);d.push(e);c+=h}b=d.length;if(b<=I)d=String.fromCharCode.apply(String,d);else{a="";for(c=0;c<b;)a+=String.fromCharCode.apply(String,d.slice(c,c+=I));d=a}return d}function n(b,c,a){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>a)throw new RangeError("Trying to access beyond buffer length");
}function z(c,a,d,f,e,h){if(!b.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>e||a<h)throw new RangeError('"value" argument is out of bounds');if(d+f>c.length)throw new RangeError("Index out of range");}function C(b,c,a,d){0>c&&(c=65535+c+1);for(var f=0,e=Math.min(b.length-a,2);f<e;++f)b[a+f]=(c&255<<8*(d?f:1-f))>>>8*(d?f:1-f)}function c(b,c,a,d){0>c&&(c=4294967295+c+1);for(var f=0,e=Math.min(b.length-a,4);f<e;++f)b[a+f]=c>>>8*(d?f:3-f)&255}function x(b,c,a,d,
f,e){if(a+d>b.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function E(b,c,a,d,f){f||x(b,c,a,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(b,c,a,d,23,4);return a+4}function H(b,c,a,d,f){f||x(b,c,a,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(b,c,a,d,52,8);return a+8}function A(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(Q,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function B(b,c){c=c||
Infinity;for(var a,d=b.length,f=null,e=[],h=0;h<d;++h){a=b.charCodeAt(h);if(55295<a&&57344>a){if(!f){if(56319<a){-1<(c-=3)&&e.push(239,191,189);continue}else if(h+1===d){-1<(c-=3)&&e.push(239,191,189);continue}f=a;continue}if(56320>a){-1<(c-=3)&&e.push(239,191,189);f=a;continue}a=(f-55296<<10|a-56320)+65536}else f&&-1<(c-=3)&&e.push(239,191,189);f=null;if(128>a){if(0>--c)break;e.push(a)}else if(2048>a){if(0>(c-=2))break;e.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(c-=3))break;e.push(a>>12|224,
a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(c-=4))break;e.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return e}function P(b){for(var c=[],a=0;a<b.length;++a)c.push(b.charCodeAt(a)&255);return c}function F(b,c,a,d){for(var f=0;f<d&&!(f+a>=c.length||f>=b.length);++f)c[f+a]=b[f];return f}var D=a("base64-js"),J=a("ieee754"),M=a("isarray");m.Buffer=b;m.SlowBuffer=function(c){+c!=c&&(c=0);return b.alloc(+c)};m.INSPECT_MAX_BYTES=50;b.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:p();m.kMaxLength=b.TYPED_ARRAY_SUPPORT?2147483647:1073741823;b.poolSize=8192;b._augment=function(c){c.__proto__=b.prototype;return c};b.from=function(b,c,a){return k(null,b,c,a)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.species,
{value:null,configurable:!0})));b.alloc=function(b,c,a){q(b);b=0>=b?e(null,b):void 0!==c?"string"===typeof a?e(null,b).fill(c,a):e(null,b).fill(c):e(null,b);return b};b.allocUnsafe=function(b){return y(null,b)};b.allocUnsafeSlow=function(b){return y(null,b)};b.isBuffer=function(b){return!(null==b||!b._isBuffer)};b.compare=function(c,a){if(!b.isBuffer(c)||!b.isBuffer(a))throw new TypeError("Arguments must be Buffers");if(c===a)return 0;for(var d=c.length,f=a.length,e=0,h=Math.min(d,f);e<h;++e)if(c[e]!==
a[e]){d=c[e];f=a[e];break}return d<f?-1:f<d?1:0};b.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(c,a){if(!M(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return b.alloc(0);var d;if(void 0===a)for(d=a=0;d<c.length;++d)a+=c[d].length;var f=b.allocUnsafe(a),e=0;for(d=
0;d<c.length;++d){var h=c[d];if(!b.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(f,e);e+=h.length}return f};b.byteLength=r;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)f(this,c,c+1);return this};b.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=
4)f(this,c,c+3),f(this,c+1,c+2);return this};b.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?l(this,0,b):h.apply(this,arguments)};b.prototype.equals=function(c){if(!b.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===b.compare(this,c)};b.prototype.inspect=function(){var b="",c=m.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};b.prototype.compare=
function(c,a,d,f,e){if(!b.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===a&&(a=0);void 0===d&&(d=c?c.length:0);void 0===f&&(f=0);void 0===e&&(e=this.length);if(0>a||d>c.length||0>f||e>this.length)throw new RangeError("out of range index");if(f>=e&&a>=d)return 0;if(f>=e)return-1;if(a>=d)return 1;a>>>=0;d>>>=0;f>>>=0;e>>>=0;if(this===c)return 0;var h=e-f,l=d-a,n=Math.min(h,l);f=this.slice(f,e);c=c.slice(a,d);for(a=0;a<n;++a)if(f[a]!==c[a]){h=f[a];l=c[a];break}return h<l?-1:l<
h?1:0};b.prototype.indexOf=function(c,a,f){"string"===typeof a?(f=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648);a>>=0;if(0===this.length||a>=this.length)return-1;0>a&&(a=Math.max(this.length+a,0));"string"===typeof c&&(c=b.from(c,f));if(b.isBuffer(c))return 0===c.length?-1:d(this,c,a,f);if("number"===typeof c)return b.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,c,a):d(this,[c],a,f);throw new TypeError("val must be string, number or Buffer");
};b.prototype.includes=function(b,c,a){return-1!==this.indexOf(b,c,a)};b.prototype.write=function(b,c,a,d){if(void 0===c)d="utf8",a=this.length,c=0;else if(void 0===a&&"string"===typeof c)d=c,a=this.length,c=0;else if(isFinite(c))c|=0,isFinite(a)?(a|=0,void 0===d&&(d="utf8")):(d=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-c;if(void 0===a||a>f)a=f;if(0<b.length&&(0>a||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(f=!1;;)switch(d){case "hex":a:{c=Number(c)||0;d=this.length-c;a?(a=Number(a),a>d&&(a=d)):a=d;d=b.length;if(0!==d%2)throw Error("Invalid hex string");a>d/2&&(a=d/2);for(d=0;d<a;++d){f=parseInt(b.substr(2*d,2),16);if(isNaN(f)){b=d;break a}this[c+d]=f}b=d}return b;case "utf8":case "utf-8":return F(B(b,this.length-c),this,c,a);case "ascii":return F(P(b),this,c,a);case "binary":return F(P(b),this,c,a);case "base64":return F(D.toByteArray(A(b)),this,c,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.length-c;for(var e=void 0,e=f=void 0,h=[],l=0;l<b.length&&!(0>(d-=2));++l)e=b.charCodeAt(l),f=e>>8,e%=256,h.push(e),h.push(f);return F(h,this,c,a);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();f=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;b.prototype.slice=function(c,a){var d=this.length;c=~~c;a=void 0===a?d:~~a;0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);a<c&&(a=
c);if(b.TYPED_ARRAY_SUPPORT)d=this.subarray(c,a),d.__proto__=b.prototype;else for(var f=a-c,d=new b(f,void 0),e=0;e<f;++e)d[e]=this[e+c];return d};b.prototype.readUIntLE=function(b,c,a){b|=0;c|=0;a||n(b,c,this.length);a=this[b];for(var d=1,f=0;++f<c&&(d*=256);)a+=this[b+f]*d;return a};b.prototype.readUIntBE=function(b,c,a){b|=0;c|=0;a||n(b,c,this.length);a=this[b+--c];for(var d=1;0<c&&(d*=256);)a+=this[b+--c]*d;return a};b.prototype.readUInt8=function(b,c){c||n(b,1,this.length);return this[b]};b.prototype.readUInt16LE=
function(b,c){c||n(b,2,this.length);return this[b]|this[b+1]<<8};b.prototype.readUInt16BE=function(b,c){c||n(b,2,this.length);return this[b]<<8|this[b+1]};b.prototype.readUInt32LE=function(b,c){c||n(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};b.prototype.readUInt32BE=function(b,c){c||n(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};b.prototype.readIntLE=function(b,c,a){b|=0;c|=0;a||n(b,c,this.length);a=this[b];for(var d=1,f=0;++f<
c&&(d*=256);)a+=this[b+f]*d;a>=128*d&&(a-=Math.pow(2,8*c));return a};b.prototype.readIntBE=function(b,c,a){b|=0;c|=0;a||n(b,c,this.length);a=c;for(var d=1,f=this[b+--a];0<a&&(d*=256);)f+=this[b+--a]*d;f>=128*d&&(f-=Math.pow(2,8*c));return f};b.prototype.readInt8=function(b,c){c||n(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};b.prototype.readInt16LE=function(b,c){c||n(b,2,this.length);var a=this[b]|this[b+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(b,c){c||
n(b,2,this.length);var a=this[b+1]|this[b]<<8;return a&32768?a|4294901760:a};b.prototype.readInt32LE=function(b,c){c||n(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};b.prototype.readInt32BE=function(b,c){c||n(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};b.prototype.readFloatLE=function(b,c){c||n(b,4,this.length);return J.read(this,b,!0,23,4)};b.prototype.readFloatBE=function(b,c){c||n(b,4,this.length);return J.read(this,b,!1,23,4)};b.prototype.readDoubleLE=
function(b,c){c||n(b,8,this.length);return J.read(this,b,!0,52,8)};b.prototype.readDoubleBE=function(b,c){c||n(b,8,this.length);return J.read(this,b,!1,52,8)};b.prototype.writeUIntLE=function(b,c,a,d){b=+b;c|=0;a|=0;d||z(this,b,c,a,Math.pow(2,8*a)-1,0);d=1;var f=0;for(this[c]=b&255;++f<a&&(d*=256);)this[c+f]=b/d&255;return c+a};b.prototype.writeUIntBE=function(b,c,a,d){b=+b;c|=0;a|=0;d||z(this,b,c,a,Math.pow(2,8*a)-1,0);d=a-1;var f=1;for(this[c+d]=b&255;0<=--d&&(f*=256);)this[c+d]=b/f&255;return c+
a};b.prototype.writeUInt8=function(c,a,d){c=+c;a|=0;d||z(this,c,a,1,255,0);b.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[a]=c&255;return a+1};b.prototype.writeUInt16LE=function(c,a,d){c=+c;a|=0;d||z(this,c,a,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):C(this,c,a,!0);return a+2};b.prototype.writeUInt16BE=function(c,a,d){c=+c;a|=0;d||z(this,c,a,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):C(this,c,a,!1);return a+2};b.prototype.writeUInt32LE=function(a,d,f){a=
+a;d|=0;f||z(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d+3]=a>>>24,this[d+2]=a>>>16,this[d+1]=a>>>8,this[d]=a&255):c(this,a,d,!0);return d+4};b.prototype.writeUInt32BE=function(a,d,f){a=+a;d|=0;f||z(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):c(this,a,d,!1);return d+4};b.prototype.writeIntLE=function(b,c,a,d){b=+b;c|=0;d||(d=Math.pow(2,8*a-1),z(this,b,c,a,d-1,-d));d=0;var f=1,e=0;for(this[c]=b&255;++d<a&&(f*=256);)0>b&&
0===e&&0!==this[c+d-1]&&(e=1),this[c+d]=(b/f>>0)-e&255;return c+a};b.prototype.writeIntBE=function(b,c,a,d){b=+b;c|=0;d||(d=Math.pow(2,8*a-1),z(this,b,c,a,d-1,-d));d=a-1;var f=1,e=0;for(this[c+d]=b&255;0<=--d&&(f*=256);)0>b&&0===e&&0!==this[c+d+1]&&(e=1),this[c+d]=(b/f>>0)-e&255;return c+a};b.prototype.writeInt8=function(c,a,d){c=+c;a|=0;d||z(this,c,a,1,127,-128);b.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[a]=c&255;return a+1};b.prototype.writeInt16LE=function(c,a,d){c=+c;a|=0;
d||z(this,c,a,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):C(this,c,a,!0);return a+2};b.prototype.writeInt16BE=function(c,a,d){c=+c;a|=0;d||z(this,c,a,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):C(this,c,a,!1);return a+2};b.prototype.writeInt32LE=function(a,d,f){a=+a;d|=0;f||z(this,a,d,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[d]=a&255,this[d+1]=a>>>8,this[d+2]=a>>>16,this[d+3]=a>>>24):c(this,a,d,!0);return d+4};b.prototype.writeInt32BE=
function(a,d,f){a=+a;d|=0;f||z(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):c(this,a,d,!1);return d+4};b.prototype.writeFloatLE=function(b,c,a){return E(this,b,c,!0,a)};b.prototype.writeFloatBE=function(b,c,a){return E(this,b,c,!1,a)};b.prototype.writeDoubleLE=function(b,c,a){return H(this,b,c,!0,a)};b.prototype.writeDoubleBE=function(b,c,a){return H(this,b,c,!1,a)};b.prototype.copy=function(c,a,
d,f){d||(d=0);f||0===f||(f=this.length);a>=c.length&&(a=c.length);a||(a=0);0<f&&f<d&&(f=d);if(f===d||0===c.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>f)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length);c.length-a<f-d&&(f=c.length-a+d);var e=f-d;if(this===c&&d<a&&a<f)for(f=e-1;0<=f;--f)c[f+a]=this[f+d];else if(1E3>e||!b.TYPED_ARRAY_SUPPORT)for(f=
0;f<e;++f)c[f+a]=this[f+d];else Uint8Array.prototype.set.call(c,this.subarray(d,d+e),a);return e};b.prototype.fill=function(c,a,d,f){if("string"===typeof c){"string"===typeof a?(f=a,a=0,d=this.length):"string"===typeof d&&(f=d,d=this.length);if(1===c.length){var e=c.charCodeAt(0);256>e&&(c=e)}if(void 0!==f&&"string"!==typeof f)throw new TypeError("encoding must be a string");if("string"===typeof f&&!b.isEncoding(f))throw new TypeError("Unknown encoding: "+f);}else"number"===typeof c&&(c&=255);if(0>
a||this.length<a||this.length<d)throw new RangeError("Out of range index");if(d<=a)return this;a>>>=0;d=void 0===d?this.length:d>>>0;c||(c=0);if("number"===typeof c)for(f=a;f<d;++f)this[f]=c;else for(c=b.isBuffer(c)?c:B((new b(c,f)).toString()),e=c.length,f=0;f<d-a;++f)this[f+a]=c[f%e];return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:81,isarray:87}],61:[function(a,g,
m){function t(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function p(b,a){return b[0]-a[0]||b[1]-a[1]}function e(b,a,e){return a in b?b[a]:e}var b=a("./lib/monotone"),k=a("./lib/triangulation"),q=a("./lib/delaunay"),y=a("./lib/filter");g.exports=function(a,g,v){Array.isArray(g)?(v=v||{},g=g||[]):(v=g||{},g=[]);var r=!!e(v,"delaunay",!0),h=!!e(v,"interior",!0),f=!!e(v,"exterior",!0);v=!!e(v,"infinity",!1);if(!h&&!f||0===a.length)return[];var d=b(a,g);if(r||h!==f||v){g=k(a.length,g.map(t).sort(p));
for(var l=0;l<d.length;++l){var n=d[l];g.addTriangle(n[0],n[1],n[2])}r&&q(a,g);return f?h?v?y(g,0,v):g.cells():y(g,1,v):y(g,-1)}return d}},{"./lib/delaunay":62,"./lib/filter":63,"./lib/monotone":64,"./lib/triangulation":65}],62:[function(a,g,m){function t(a,b,k,q,g,u){var t=b.opposite(q,g);if(!(0>t)){if(g<q){var v=q;q=g;g=v;v=u;u=t;t=v}b.isConstraint(q,g)||0>p(a[q],a[g],a[u],a[t])&&k.push(q,g)}}var p=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(a,b){for(var k=[],q=a.length,
g=b.stars,u=0;u<q;++u)for(var w=g[u],v=1;v<w.length;v+=2){var r=w[v];if(!(r<u||b.isConstraint(u,r))){for(var h=w[v-1],f=-1,d=1;d<w.length;d+=2)if(w[d-1]===r){f=w[d];break}0>f||0>p(a[u],a[r],a[h],a[f])&&k.push(u,r)}}for(;0<k.length;){r=k.pop();u=k.pop();f=h=-1;w=g[u];for(q=1;q<w.length;q+=2)v=w[q-1],d=w[q],v===r?f=d:d===r&&(h=v);0>h||0>f||0<=p(a[u],a[r],a[h],a[f])||(b.flip(u,r),t(a,b,k,h,u,f),t(a,b,k,u,f,h),t(a,b,k,f,r,h),t(a,b,k,r,h,f))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],63:[function(a,
g,m){function t(b,a,e,p,g,t,v){this.cells=b;this.neighbor=a;this.flags=p;this.constraint=e;this.active=g;this.next=t;this.boundary=v}function p(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var e=a("binary-search-bounds");g.exports=function(b,a,e){for(var g=b.cells(),u=g.length,w=0;w<u;++w){var v=g[w],r=v[0],h=v[1],f=v[2];h<f?h<r&&(v[0]=h,v[1]=f,v[2]=r):f<r&&(v[0]=f,v[1]=r,v[2]=h)}g.sort(p);for(var d=Array(u),w=0;w<d.length;++w)d[w]=0;var l=[],n=[],z=Array(3*u),m=Array(3*u),c=null;e&&(c=[]);f=new t(g,
z,m,d,l,n,c);for(w=0;w<u;++w)for(var v=g[w],x=0;3>x;++x){var r=v[x],h=v[(x+1)%3],E=z[3*w+x]=f.locate(h,r,b.opposite(h,r)),H=m[3*w+x]=b.isConstraint(r,h);0>E&&(H?n.push(w):(l.push(w),d[w]=1),e&&c.push([h,r,-1]))}if(0===a)return e?f.cells.concat(f.boundary):f.cells;u=1;w=f.active;v=f.next;b=f.flags;g=f.cells;r=f.constraint;for(h=f.neighbor;0<w.length||0<v.length;){for(;0<w.length;)if(d=w.pop(),b[d]!==-u)for(b[d]=u,l=0;3>l;++l)n=h[3*d+l],0<=n&&0===b[n]&&(r[3*d+l]?v.push(n):(w.push(n),b[n]=u));d=v;v=
w;w=d;v.length=0;u=-u}for(w=u=0;w<g.length;++w)b[w]===a&&(g[u++]=g[w]);g.length=u;return e?g.concat(f.boundary):g};t.prototype.locate=function(){var b=[0,0,0];return function(a,q,g){var u=a,t=q,v=g;q<g?q<a&&(u=q,t=g,v=a):g<a&&(u=g,t=a,v=q);if(0>u)return-1;b[0]=u;b[1]=t;b[2]=v;return e.eq(this.cells,b,p)}}()},{"binary-search-bounds":51}],64:[function(a,g,m){function t(b,a,e,k,h){this.a=b;this.b=a;this.idx=e;this.lowerIds=k;this.upperIds=h}function p(b,a,e,k){this.a=b;this.b=a;this.type=e;this.idx=
k}function e(b,a){var e=b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return e||0!==b.type&&(e=y(b.a,b.b,a.b))?e:b.idx-a.idx}function b(b,a){return y(b.a,b.b,a)}function k(b,a){var e;return(e=b.a[0]<a.a[0]?y(b.a,b.b,a.a):y(a.b,a.a,b.a))?e:(e=a.b[0]<b.b[0]?y(b.a,b.b,a.b):y(a.b,a.a,b.b))||b.idx-a.idx}var q=a("binary-search-bounds"),y=a("robust-orientation")[3];g.exports=function(a,g){for(var v=a.length,r=g.length,h=[],f=0;f<v;++f)h.push(new p(a[f],null,0,f));for(f=0;f<r;++f){var d=g[f],v=a[d[0]],d=a[d[1]];
v[0]<d[0]?h.push(new p(v,d,2,f),new p(d,v,1,f)):v[0]>d[0]&&h.push(new p(d,v,2,f),new p(v,d,1,f))}h.sort(e);f=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);r=[new t([f,1],[f,0],-1,[],[],[],[])];v=[];f=0;for(d=h.length;f<d;++f){var l=h[f],n=l.type;if(0===n)for(var n=v,z=r,m=a,c=l.a,l=l.idx,x=q.lt(z,c,b),E=q.gt(z,c,b);x<E;++x){for(var H=z[x],A=H.lowerIds,B=A.length;1<B&&0<y(m[A[B-2]],m[A[B-1]],c);)n.push([A[B-1],A[B-2],l]),--B;A.length=B;A.push(l);H=H.upperIds;for(B=H.length;1<B&&0>y(m[H[B-2]],m[H[B-
1]],c);)n.push([H[B-2],H[B-1],l]),--B;H.length=B;H.push(l)}else 2===n?(n=r,z=l,m=q.le(n,z,k),c=n[m],l=c.upperIds,E=l[l.length-1],c.upperIds=[E],n.splice(m+1,0,new t(z.a,z.b,z.idx,[E],l))):(n=r,z=l,m=z.a,z.a=z.b,z.b=m,z=q.eq(n,z,k),n[z-1].upperIds=n[z].upperIds,n.splice(z,1))}return v}},{"binary-search-bounds":51,"robust-orientation":103}],65:[function(a,g,m){function t(b,a){this.stars=b;this.edges=a}function p(b,a,e){for(var p=1,g=b.length;p<g;p+=2)if(b[p-1]===a&&b[p]===e){b[p-1]=b[g-2];b[p]=b[g-
1];b.length=g-2;break}}var e=a("binary-search-bounds");g.exports=function(b,a){for(var e=Array(b),p=0;p<b;++p)e[p]=[];return new t(e,a)};a=t.prototype;a.isConstraint=function(){function b(b,a){return b[0]-a[0]||b[1]-a[1]}var a=[0,0];return function(q,p){a[0]=Math.min(q,p);a[1]=Math.max(q,p);return 0<=e.eq(this.edges,a,b)}}();a.removeTriangle=function(b,a,e){var g=this.stars;p(g[b],a,e);p(g[a],e,b);p(g[e],b,a)};a.addTriangle=function(b,a,e){var p=this.stars;p[b].push(a,e);p[a].push(e,b);p[e].push(b,
a)};a.opposite=function(b,a){for(var e=this.stars[a],p=1,g=e.length;p<g;p+=2)if(e[p]===b)return e[p-1];return-1};a.flip=function(b,a){var e=this.opposite(b,a),p=this.opposite(a,b);this.removeTriangle(b,a,e);this.removeTriangle(a,b,p);this.addTriangle(b,p,e);this.addTriangle(a,e,p)};a.edges=function(){for(var b=this.stars,a=[],e=0,p=b.length;e<p;++e)for(var g=b[e],t=0,v=g.length;t<v;t+=2)a.push([g[t],g[t+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],e=0,p=b.length;e<p;++e)for(var g=b[e],
t=0,v=g.length;t<v;t+=2){var r=g[t],h=g[t+1];e<Math.min(r,h)&&a.push([e,r,h])}return a}},{"binary-search-bounds":51}],66:[function(a,g,m){function t(b){var a=d(b);b=f(h(a),b);return 0>b?[a,n(a,Infinity)]:0<b?[n(a,-Infinity),a]:[a,a]}function p(b,a,d){var f=[];v(d,function(d,e){var h=a[d],l=a[e];h[0]!==l[0]&&h[0]!==l[1]&&h[1]!==l[0]&&h[1]!==l[1]&&r(b[h[0]],b[h[1]],b[l[0]],b[l[1]])&&f.push([d,e])});return f}function e(b,a,d,f){var e=[];v(d,f,function(d,f){var h=a[d];if(h[0]!==f&&h[1]!==f){var l=b[f];
r(b[h[0]],b[h[1]],l,l)&&e.push([d,f])}});return e}function b(b,a,d,e,n){function k(a){if(a>=b.length)return q[a-b.length];a=b[a];return[h(a[0]),h(a[1])]}for(var q=[],p=0;p<d.length;++p){var r=d[p],g=r[0],r=r[1],v=a[g],t=a[r];if(v=z(l(b[v[0]]),l(b[v[1]]),l(b[t[0]]),l(b[t[1]])))t=q.length+b.length,q.push(v),e.push([g,t],[r,t])}e.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];var c=k(b[1]),d=k(a[1]);return f(c[0],d[0])||f(c[1],d[1])});for(p=e.length-1;0<=p;--p){r=e[p];g=r[0];v=a[g];t=v[0];d=v[1];
var u=b[t],y=b[d];0>(u[0]-y[0]||u[1]-y[1])&&(u=t,t=d,d=u);v[0]=t;var t=v[1]=r[1],w;for(n&&(w=v[2]);0<p&&e[p-1][0]===g;)r=e[--p],r=r[1],n?a.push([t,r,w]):a.push([t,r]),t=r;n?a.push([t,d,w]):a.push([t,d])}return q}function k(b,a,f){for(var e=b.length+a.length,h=new w(e),l=0;l<a.length;++l){var n=a[l],k=t(n[0]),q=t(n[1]);f.push([k[0],q[0],k[1],q[1]]);b.push([d(n[0]),d(n[1])])}v(f,function(b,a){h.link(b,a)});a=0;f=!0;n=Array(e);for(l=0;l<e;++l)h.find(l)===l?(n[l]=a,b[a++]=b[l]):(f=!1,n[l]=-1);b.length=
a;if(f)return null;for(l=0;l<e;++l)0>n[l]&&(n[l]=n[h.find(l)]);return n}function q(b,a){return b[0]-a[0]||b[1]-a[1]}function y(b,a){var d=b[0]-a[0]||b[1]-a[1];return d?d:b[2]<a[2]?-1:b[2]>a[2]?1:0}function u(a,c,d){for(var f=Array(c.length),h=0;h<c.length;++h){var l=c[h],n=a[l[0]],l=a[l[1]];f[h]=[Math.min(n[0],l[0]),Math.min(n[1],l[1]),Math.max(n[0],l[0]),Math.max(n[1],l[1])]}h=p(a,c,f);n=Array(a.length);for(l=0;l<a.length;++l){var r=a[l];n[l]=[r[0],r[1],r[0],r[1]]}f=e(a,c,f,n);l=b(a,c,h,f,d);a=k(a,
l,n);if(0!==c.length){if(a)for(n=0;n<c.length;++n){var l=c[n],r=a[l[0]],g=a[l[1]];l[0]=Math.min(r,g);l[1]=Math.max(r,g)}else for(n=0;n<c.length;++n)l=c[n],r=l[0],g=l[1],l[0]=Math.min(r,g),l[1]=Math.max(r,g);d?c.sort(y):c.sort(q);for(n=l=1;n<c.length;++n)if(r=c[n-1],g=c[n],g[0]!==r[0]||g[1]!==r[1]||d&&g[2]!==r[2])c[l++]=g;c.length=l}return a?!0:0<h.length||0<f.length}g.exports=function(b,a,d){var f=!1,e;if(d){e=a;for(var l=Array(a.length),h=0;h<a.length;++h){var n=a[h];l[h]=[n[0],n[1],d[h]]}a=l}for(;u(b,
a,!!d);)f=!0;if(d&&f)for(e.length=0,h=d.length=0;h<a.length;++h)n=a[h],e.push([n[0],n[1]]),d.push(n[2]);return f};var w=a("union-find"),v=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),h=a("big-rat"),f=a("big-rat/cmp"),d=a("big-rat/to-float"),l=a("rat-vec"),n=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":67,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":69,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":122}],67:[function(a,g,m){function t(a,e){return b(p(a[0],e[1]),p(a[1],e[0]))}g.exports=function(b,a,p,h){a=q(a,b);var f=q(h,p);h=t(a,f);if(0===k(h))return null;p=q(b,p);p=t(f,p);p=e(p,h);return y(b,u(a,p))};var p=a("big-rat/mul"),e=a("big-rat/div"),b=a("big-rat/sub"),k=a("big-rat/sign"),q=a("rat-vec/sub"),y=a("rat-vec/add"),u=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],68:[function(a,g,m){function t(a,e,p){var g=b(a[0],-e[0]);a=b(a[1],-e[1]);var r=b(p[0],-e[0]);e=b(p[1],-e[1]);g=q(k(g,r),k(a,e));return 0<=g[g.length-1]}g.exports=function(b,a,k,q){var r=p(a,k,q);if(0===r){var r=e(p(b,a,k)),h=e(p(b,a,q));return r===h?0===r&&(k=t(b,a,k),b=t(b,a,q),k!==b)?k?1:-1:0:0===h?0<r?-1:t(b,a,q)?-1:1:0===r?0<h?1:t(b,a,k)?1:-1:e(h-r)}h=p(b,a,k);return 0<h?0<r&&0<p(b,a,q)?1:-1:0>h?0<r||0<p(b,a,q)?1:-1:0<p(b,a,q)?1:t(b,a,k)?1:-1};var p=a("robust-orientation"),
e=a("signum"),b=a("two-sum"),k=a("robust-product"),q=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":120}],69:[function(a,g,m){function t(a,b){return a-b}g.exports=function(a,b){var k=a.length,q=a.length-b.length;if(q)return q;switch(k){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||p(a[0],a[1])-p(b[0],b[1]);case 3:var k=a[0]+a[1],g=b[0]+b[1];if(q=k+a[2]-(g+b[2]))return q;var q=p(a[0],a[1]),u=p(b[0],b[1]);return p(q,
a[2])-p(u,b[2])||p(q+a[2],k)-p(u+b[2],g);case 4:var q=a[0],k=a[1],g=a[2],u=a[3],m=b[0],v=b[1],r=b[2],h=b[3];return q+k+g+u-(m+v+r+h)||p(q,k,g,u)-p(m,v,r,h,m)||p(q+k,q+g,q+u,k+g,k+u,g+u)-p(m+v,m+r,m+h,v+r,v+h,r+h)||p(q+k+g,q+k+u,q+g+u,k+g+u)-p(m+v+r,m+v+h,m+r+h,v+r+h);default:g=a.slice().sort(t);u=b.slice().sort(t);for(m=0;m<k;++m)if(q=g[m]-u[m])return q;return 0}};var p=Math.min},{}],70:[function(a,g,m){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var p=a("./lib/thunk.js");g.exports=function(a){var b=new t;b.pre=a.pre;b.body=a.body;b.post=a.post;var k=a.args.slice(0);b.argTypes=k;for(var q=0;q<k.length;++q){var g=k[q];if("array"===g||"object"===typeof g&&g.blockIndices){b.argTypes[q]="array";b.arrayArgs.push(q);b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);b.shimArgs.push("array"+q);if(q<
b.pre.args.length&&0<b.pre.args[q].count)throw Error("cwise: pre() block may not reference array args");if(q<b.post.args.length&&0<b.post.args[q].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)b.scalarArgs.push(q),b.shimArgs.push("scalar"+q);else if("index"===g){b.indexArgs.push(q);if(q<b.pre.args.length&&0<b.pre.args[q].count)throw Error("cwise: pre() block may not reference array index");if(q<b.body.args.length&&b.body.args[q].lvalue)throw Error("cwise: body() block may not write to array index");
if(q<b.post.args.length&&0<b.post.args[q].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){b.shapeArgs.push(q);if(q<b.pre.args.length&&b.pre.args[q].lvalue)throw Error("cwise: pre() block may not write to array shape");if(q<b.body.args.length&&b.body.args[q].lvalue)throw Error("cwise: body() block may not write to array shape");if(q<b.post.args.length&&b.post.args[q].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)b.argTypes[q]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(q);else throw Error("cwise: Unknown argument type "+k[q]);}if(0>=b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;return p(b)}},{"./lib/thunk.js":72}],71:[function(a,g,m){function t(a,b,e){var k=a.length,p=b.arrayArgs.length;b=0<b.indexArgs.length;var r=[],h=[],f=0,d=0,l,n;for(l=0;l<k;++l)h.push(["i",l,"=0"].join(""));for(n=0;n<p;++n)for(l=0;l<k;++l)d=f,f=a[l],0===l?h.push(["d",n,"s",l,"=t",n,"p",f].join("")):h.push(["d",n,"s",l,"=(t",n,"p",f,"-s",d,"*t",n,"p",d,")"].join(""));r.push("var "+h.join(","));for(l=k-1;0<=l;--l)f=
a[l],r.push(["for(i",l,"=0;i",l,"<s",f,";++i",l,"){"].join(""));r.push(e);for(l=0;l<k;++l){d=f;f=a[l];for(n=0;n<p;++n)r.push(["p",n,"+=d",n,"s",l].join(""));b&&(0<l&&r.push(["index[",d,"]-=s",d].join("")),r.push(["++index[",f,"]"].join("")));r.push("}")}return r.join("\n")}function p(a,b,e,k){for(var p=b.length,r=e.arrayArgs.length,h=e.blockSize,f=0<e.indexArgs.length,d=[],l=0;l<r;++l)d.push(["var offset",l,"=p",l].join(""));for(l=a;l<p;++l)d.push(["for(var j"+l+"=SS[",b[l],"]|0;j",l,">0;){"].join("")),
d.push(["if(j",l,"<",h,"){"].join("")),d.push(["s",b[l],"=j",l].join("")),d.push(["j",l,"=0"].join("")),d.push(["}else{s",b[l],"=",h].join("")),d.push(["j",l,"-=",h,"}"].join("")),f&&d.push(["index[",b[l],"]=j",l].join(""));for(l=0;l<r;++l){h=["offset"+l];for(f=a;f<p;++f)h.push(["j",f,"*t",l,"p",b[f]].join(""));d.push(["p",l,"=(",h.join("+"),")"].join(""))}d.push(t(b,e,k));for(l=a;l<p;++l)d.push("}");return d.join("\n")}function e(a,b,e){for(var k=a.body,p=[],r=[],h=0;h<a.args.length;++h){var f=a.args[h];
if(!(0>=f.count)){var d=new RegExp(f.name,"g"),l="",n=b.arrayArgs.indexOf(h);switch(b.argTypes[h]){case "offset":var g=b.offsetArgIndex.indexOf(h),n=b.offsetArgs[g].array,l="+q"+g;case "array":var l="p"+n+l,t="l"+h,g="a"+n;if(0===b.arrayBlockIndices[n])1===f.count?"generic"===e[n]?f.lvalue?(p.push(["var ",t,"=",g,".get(",l,")"].join("")),k=k.replace(d,t),r.push([g,".set(",l,",",t,")"].join(""))):k=k.replace(d,[g,".get(",l,")"].join("")):k=k.replace(d,[g,"[",l,"]"].join("")):"generic"===e[n]?(p.push(["var ",
t,"=",g,".get(",l,")"].join("")),k=k.replace(d,t),f.lvalue&&r.push([g,".set(",l,",",t,")"].join(""))):(p.push(["var ",t,"=",g,"[",l,"]"].join("")),k=k.replace(d,t),f.lvalue&&r.push([g,"[",l,"]=",t].join("")));else{d=[f.name];f=[l];for(l=0;l<Math.abs(b.arrayBlockIndices[n]);l++)d.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(l+1)+"*t"+n+"b"+l);d=new RegExp(d.join(""),"g");l=f.join("+");if("generic"===e[n])throw Error("cwise: Generic arrays not supported in combination with blocks!");k=k.replace(d,[g,"[",
l,"]"].join(""))}break;case "scalar":k=k.replace(d,"Y"+b.scalarArgs.indexOf(h));break;case "index":k=k.replace(d,"index");break;case "shape":k=k.replace(d,"shape")}}}return[p.join("\n"),k,r.join("\n")].join("\n").trim()}function b(a){for(var b=Array(a.length),e=!0,k=0;k<a.length;++k){var p=a[k],g=p.match(/\d+/),g=g?g[0]:"";0===p.charAt(0)?b[k]="u"+p.charAt(1)+g:b[k]=p.charAt(0)+g;0<k&&(e=e&&b[k]===b[k-1])}return e?b[0]:b.join("")}var k=a("uniq");g.exports=function(a,g){for(var u=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,m=Array(a.arrayArgs.length),v=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)v[r]=g[2*r],m[r]=g[2*r+1];for(var h=[],f=[],d=[],l=[],n=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(d.push(0),l.push(u),h.push(u),f.push(u+a.arrayBlockIndices[r])):(d.push(a.arrayBlockIndices[r]),l.push(a.arrayBlockIndices[r]+u),h.push(0),f.push(a.arrayBlockIndices[r]));for(var z=[],C=0;C<m[r].length;C++)d[r]<=m[r][C]&&m[r][C]<l[r]&&z.push(m[r][C]-d[r]);n.push(z)}f=["SS"];l=["'use strict'"];z=[];
for(C=0;C<u;++C)z.push(["s",C,"=SS[",C,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){f.push("a"+r);f.push("t"+r);f.push("p"+r);for(C=0;C<u;++C)z.push(["t",r,"p",C,"=t",r,"[",d[r]+C,"]"].join(""));for(C=0;C<Math.abs(a.arrayBlockIndices[r]);++C)z.push(["t",r,"b",C,"=t",r,"[",h[r]+C,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)f.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){C=Array(u);for(r=0;r<u;++r)C[r]="0";z.push(["index=[",C.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){h=a.offsetArgs[r];d=[];for(C=0;C<h.offset.length;++C)0!==h.offset[C]&&(1===h.offset[C]?d.push(["t",h.array,"p",C].join("")):d.push([h.offset[C],"*t",h.array,"p",C].join("")));0===d.length?z.push("q"+r+"=0"):z.push(["q",r,"=",d.join("+")].join(""))}r=k([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);l.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)l.push("p"+r+"|=0");3<a.pre.body.length&&l.push(e(a.pre,a,v));r=e(a.body,
a,v);a:for(C=0,z=n[0].length;C<z;){for(h=1;h<n.length;++h)if(n[h][C]!==n[0][C])break a;++C}C<u?l.push(p(C,n[0],a,r)):l.push(t(n[0],a,r));3<a.post.body.length&&l.push(e(a.post,a,v));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+l.join("\n")+"\n----------");u=[a.funcName||"unnamed","_cwise_loop_",m[0].join("s"),"m",C,b(v)].join("");return(new Function(["function ",u,"(",f.join(","),"){",l.join("\n"),"} return ",u].join("")))()}},{uniq:123}],72:[function(a,g,m){var t=a("./compile.js");
g.exports=function(a){var e=["'use strict'","var CACHED={}"],b=[];e.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var k=[],q=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],u=[],m=[],v=0;v<a.arrayArgs.length;++v){var r=a.arrayArgs[v];b.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));k.push("t"+r);k.push("r"+r);q.push("t"+r);q.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<v&&(u.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[v]))),m.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[v])+"]"))}1<a.arrayArgs.length&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
e.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+m.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(v=0;v<a.scalarArgs.length;++v)g.push("scalar"+a.scalarArgs[v]);b.push(["type=[",q.join(","),"].join()"].join(""));b.push("proc=CACHED[type]");e.push("var "+b.join(","));e.push(["if(!proc){CACHED[type]=proc=compile([",k.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");return(new Function("compile",e.join("\n")))(t.bind(void 0,a))}},{"./compile.js":71}],73:[function(a,g,m){(function(a){var p=!1;if("undefined"!==typeof Float64Array){var e=new Float64Array(1),b=new Uint32Array(e.buffer);e[0]=1;p=!0;1072693248===b[1]?(g.exports=function(a){e[0]=a;return[b[0],b[1]]},g.exports.pack=function(a,k){b[0]=a;b[1]=k;return e[0]},g.exports.lo=function(a){e[0]=a;return b[0]},g.exports.hi=
function(a){e[0]=a;return b[1]}):1072693248===b[0]?(g.exports=function(a){e[0]=a;return[b[1],b[0]]},g.exports.pack=function(a,k){b[1]=a;b[0]=k;return e[0]},g.exports.lo=function(a){e[0]=a;return b[1]},g.exports.hi=function(a){e[0]=a;return b[0]}):p=!1}if(!p){var k=new a(8);g.exports=function(a){k.writeDoubleLE(a,0,!0);return[k.readUInt32LE(0,!0),k.readUInt32LE(4,!0)]};g.exports.pack=function(a,b){k.writeUInt32LE(a,0,!0);k.writeUInt32LE(b,4,!0);return k.readDoubleLE(0,!0)};g.exports.lo=function(a){k.writeDoubleLE(a,
0,!0);return k.readUInt32LE(0,!0)};g.exports.hi=function(a){k.writeDoubleLE(a,0,!0);return k.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var b=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],74:[function(a,g,m){function t(a,
e,b){var k=a[b]|0;if(0>=k)return[];var g=Array(k),m;if(b===a.length-1)for(m=0;m<k;++m)g[m]=e;else for(m=0;m<k;++m)g[m]=t(a,e,b+1);return g}g.exports=function(a,e){"undefined"===typeof e&&(e=0);switch(typeof a){case "number":if(0<a){var b=a|0,k=e,g,m;g=Array(b);for(m=0;m<b;++m)g[m]=k;return g}break;case "object":if("number"===typeof a.length)return t(a,e,0)}return[]}},{}],75:[function(a,g,m){g.exports=function(a,e){var b=a.length;if("number"!==typeof e){for(var k=e=0;k<b;++k){var g=a[k];e=Math.max(e,
g[0],g[1])}e=(e|0)+1}e|=0;for(var m=Array(e),k=0;k<e;++k)m[k]=[];for(k=0;k<b;++k)g=a[k],m[g[0]].push(g[1]),m[g[1]].push(g[0]);for(b=0;b<e;++b)t(m[b],function(a,b){return a-b});return m};var t=a("uniq")},{uniq:123}],76:[function(a,g,m){function t(a,b,d,e,n,k){this._color=a;this.key=b;this.value=d;this.left=e;this.right=n;this._count=k}function p(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function e(a,b){return new t(a,b.key,b.value,b.left,b.right,b._count)}function b(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function k(a,b){this._compare=a;this.root=b}function q(a,b){if(b.left){var d=q(a,b.left);if(d)return d}if(d=a(b.key,b.value))return d;if(b.right)return q(a,b.right)}function y(a,b,d,e){if(0>=b(a,e.key)){if(e.left){var n=y(a,b,d,e.left);if(n)return n}if(n=d(e.key,e.value))return n}if(e.right)return y(a,b,d,e.right)}function u(a,b,d,e,n){var k=d(a,n.key),g=d(b,n.key);if(0>=k&&(n.left&&(k=u(a,b,d,e,n.left))||0<g&&(k=e(n.key,n.value))))return k;if(0<
g&&n.right)return u(a,b,d,e,n.right)}function w(a,b){this.tree=a;this._stack=b}function v(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function r(a,b){return a<b?-1:a>b?1:0}g.exports=function(a){return new k(a||r,null)};a=k.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(b,d){a.push(b)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(b,d){a.push(d)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,f){for(var d=this._compare,l=this.root,n=[],g=[];l;){var p=d(a,l.key);n.push(l);g.push(p);l=0>=p?l.left:l.right}n.push(new t(0,a,f,null,null,1));for(p=n.length-2;0<=p;--p)l=n[p],n[p]=0>=g[p]?new t(l._color,l.key,l.value,n[p+1],l.right,l._count+1):new t(l._color,l.key,l.value,l.left,n[p+1],l._count+1);for(p=n.length-1;1<p;--p){g=n[p-1];l=n[p];if(1===g._color||1===l._color)break;var c=n[p-2];
if(c.left===g)if(g.left===l){var r=c.right;if(r&&0===r._color)g._color=1,c.right=e(1,r),c._color=0,--p;else{c._color=0;c.left=g.right;g._color=1;g.right=c;n[p-2]=g;n[p-1]=l;b(c);b(g);3<=p&&(p=n[p-3],p.left===c?p.left=g:p.right=g);break}}else if((r=c.right)&&0===r._color)g._color=1,c.right=e(1,r),c._color=0,--p;else{g.right=l.left;c._color=0;c.left=l.right;l._color=1;l.left=g;l.right=c;n[p-2]=l;n[p-1]=g;b(c);b(g);b(l);3<=p&&(p=n[p-3],p.left===c?p.left=l:p.right=l);break}else if(g.right===l)if((r=c.left)&&
0===r._color)g._color=1,c.left=e(1,r),c._color=0,--p;else{c._color=0;c.right=g.left;g._color=1;g.left=c;n[p-2]=g;n[p-1]=l;b(c);b(g);3<=p&&(p=n[p-3],p.right===c?p.right=g:p.left=g);break}else if((r=c.left)&&0===r._color)g._color=1,c.left=e(1,r),c._color=0,--p;else{g.left=l.right;c._color=0;c.right=l.left;l._color=1;l.right=g;l.left=c;n[p-2]=l;n[p-1]=g;b(c);b(g);b(l);3<=p&&(p=n[p-3],p.right===c?p.right=l:p.left=l);break}}n[0]._color=1;return new k(d,n[0])};a.forEach=function(a,b,d){if(this.root)switch(arguments.length){case 1:return q(a,
this.root);case 2:return y(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,d)))return u(b,d,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var b=this.root,d=[];;){d.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new w(this,d);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new w(this,[])};a.ge=function(a){for(var b=this._compare,d=this.root,e=[],n=0;d;){var k=b(a,d.key);e.push(d);0>=k&&(n=e.length);d=0>=k?d.left:d.right}e.length=n;return new w(this,e)};a.gt=function(a){for(var b=this._compare,d=this.root,e=[],n=0;d;){var k=b(a,d.key);e.push(d);0>k&&(n=e.length);d=0>k?d.left:d.right}e.length=n;return new w(this,e)};a.lt=function(a){for(var b=this._compare,
d=this.root,e=[],n=0;d;){var k=b(a,d.key);e.push(d);0<k&&(n=e.length);d=0>=k?d.left:d.right}e.length=n;return new w(this,e)};a.le=function(a){for(var b=this._compare,d=this.root,e=[],n=0;d;){var k=b(a,d.key);e.push(d);0<=k&&(n=e.length);d=0>k?d.left:d.right}e.length=n;return new w(this,e)};a.find=function(a){for(var b=this._compare,d=this.root,e=[];d;){var n=b(a,d.key);e.push(d);if(0===n)return new w(this,e);d=0>=n?d.left:d.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var b=this._compare,d=this.root;d;){var e=b(a,d.key);if(0===e)return d.value;d=0>=e?d.left:d.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var f=
Array(a.length),d=a[a.length-1];f[f.length-1]=new t(d._color,d.key,d.value,d.left,d.right,d._count);for(var l=a.length-2;0<=l;--l)d=a[l],f[l]=d.left===a[l+1]?new t(d._color,d.key,d.value,f[l+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,f[l+1],d._count);d=f[f.length-1];if(d.left&&d.right){a=f.length;for(d=d.left;d.right;)f.push(d),d=d.right;l=f[a-1];f.push(new t(d._color,l.key,l.value,d.left,d.right,d._count));f[a-1].key=d.key;f[a-1].value=d.value;for(l=f.length-2;l>=a;--l)d=f[l],f[l]=
new t(d._color,d.key,d.value,d.left,f[l+1],d._count);f[a-1].left=f[a]}d=f[f.length-1];if(0===d._color)for(l=f[f.length-2],l.left===d?l.left=null:l.right===d&&(l.right=null),f.pop(),l=0;l<f.length;++l)f[l]._count--;else if(d.left||d.right)for(d.left?v(d,d.left):d.right&&v(d,d.right),d._color=1,l=0;l<f.length-1;++l)f[l]._count--;else{if(1===f.length)return new k(this.tree._compare,null);for(l=0;l<f.length;++l)f[l]._count--;for(var l=f[f.length-2],n,g,r,c=f.length-1;0<=c;--c){a=f[c];if(0===c){a._color=
1;break}n=f[c-1];if(n.left===a){g=n.right;if(g.right&&0===g.right._color){g=n.right=p(g);r=g.right=p(g.right);n.right=g.left;g.left=n;g.right=r;g._color=n._color;a._color=1;n._color=1;r._color=1;b(n);b(g);if(1<c){var q=f[c-2];q.left===n?q.left=g:q.right=g}f[c-1]=g;break}else if(g.left&&0===g.left._color){g=n.right=p(g);r=g.left=p(g.left);n.right=r.left;g.left=r.right;r.left=n;r.right=g;r._color=n._color;n._color=1;g._color=1;a._color=1;b(n);b(g);b(r);1<c&&(q=f[c-2],q.left===n?q.left=r:q.right=r);
f[c-1]=r;break}if(1===g._color)if(0===n._color){n._color=1;n.right=e(0,g);break}else n.right=e(0,g);else g=p(g),n.right=g.left,g.left=n,g._color=n._color,n._color=0,b(n),b(g),1<c&&(q=f[c-2],q.left===n?q.left=g:q.right=g),f[c-1]=g,f[c]=n,c+1<f.length?f[c+1]=a:f.push(a),c+=2}else{g=n.left;if(g.left&&0===g.left._color){g=n.left=p(g);r=g.left=p(g.left);n.left=g.right;g.right=n;g.left=r;g._color=n._color;a._color=1;n._color=1;r._color=1;b(n);b(g);1<c&&(q=f[c-2],q.right===n?q.right=g:q.left=g);f[c-1]=g;
break}else if(g.right&&0===g.right._color){g=n.left=p(g);r=g.right=p(g.right);n.left=r.right;g.right=r.left;r.right=n;r.left=g;r._color=n._color;n._color=1;g._color=1;a._color=1;b(n);b(g);b(r);1<c&&(q=f[c-2],q.right===n?q.right=r:q.left=r);f[c-1]=r;break}if(1===g._color)if(0===n._color){n._color=1;n.left=e(0,g);break}else n.left=e(0,g);else g=p(g),n.left=g.right,g.right=n,g._color=n._color,n._color=0,b(n),b(g),1<c&&(q=f[c-2],q.right===n?q.right=g:q.left=g),f[c-1]=g,f[c]=n,c+1<f.length?f[c+1]=a:f.push(a),
c+=2}}l.left===d?l.left=null:l.right=null}return new k(this.tree._compare,f[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var d=b.length-2;0<=d;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});a.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var d=Array(b.length),e=b[b.length-1];d[d.length-1]=new t(e._color,e.key,a,e.left,e.right,e._count);for(a=b.length-2;0<=a;--a)e=b[a],d[a]=e.left===b[a+1]?new t(e._color,e.key,e.value,d[a+1],e.right,e._count):new t(e._color,e.key,e.value,e.left,d[a+1],e._count);return new k(this.tree._compare,d[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],77:[function(a,g,m){function t(a){if(0>a)return Number("0/0");for(var k=e[0],g=e.length-1;0<g;--g)k+=e[g]/(a+g);g=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(g)-g+Math.log(k)-
Math.log(a)}var p=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],e=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function k(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*k(1-a));if(100<a)return Math.exp(t(a));--a;for(var e=p[0],g=1;9>g;g++)e+=p[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*e};g.exports.log=t},{}],78:[function(a,g,m){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],79:[function(a,g,m){var t=a("./identity");g.exports=function(a,e,b,k){var g,m,u,w,v,
r,h,f,d=e[0],l=e[1];e=e[2];u=k[0];w=k[1];m=k[2];h=b[0];k=b[1];g=b[2];if(1E-6>Math.abs(d-h)&&1E-6>Math.abs(l-k)&&1E-6>Math.abs(e-g))return t(a);b=d-h;k=l-k;h=e-g;f=1/Math.sqrt(b*b+k*k+h*h);b*=f;k*=f;h*=f;g=w*h-m*k;m=m*b-u*h;u=u*k-w*b;(f=Math.sqrt(g*g+m*m+u*u))?(f=1/f,g*=f,m*=f,u*=f):u=m=g=0;w=k*u-h*m;v=h*g-b*u;r=b*m-k*g;(f=Math.sqrt(w*w+v*v+r*r))?(f=1/f,w*=f,v*=f,r*=f):r=v=w=0;a[0]=g;a[1]=w;a[2]=b;a[3]=0;a[4]=m;a[5]=v;a[6]=k;a[7]=0;a[8]=u;a[9]=r;a[10]=h;a[11]=0;a[12]=-(g*d+m*l+u*e);a[13]=-(w*d+v*l+
r*e);a[14]=-(b*d+k*l+h*e);a[15]=1;return a}},{"./identity":78}],80:[function(a,g,m){g.exports=function(a,g,e,b,k){g=1/Math.tan(g/2);var q=1/(b-k);a[0]=g/e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+b)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*b*q;a[15]=0;return a}},{}],81:[function(a,g,m){m.read=function(a,g,e,b,k){var q;q=8*k-b-1;var m=(1<<q)-1,u=m>>1,w=-7;k=e?k-1:0;var v=e?-1:1,r=a[g+k];k+=v;e=r&(1<<-w)-1;r>>=-w;for(w+=q;0<w;e=256*e+a[g+k],k+=v,w-=8);q=e&(1<<-w)-1;e>>=-w;
for(w+=b;0<w;q=256*q+a[g+k],k+=v,w-=8);if(0===e)e=1-u;else{if(e===m)return q?NaN:Infinity*(r?-1:1);q+=Math.pow(2,b);e-=u}return(r?-1:1)*q*Math.pow(2,e-b)};m.write=function(a,g,e,b,k,q){var m,u=8*q-k-1,w=(1<<u)-1,v=w>>1,r=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;q=b?0:q-1;var h=b?1:-1,f=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,b=w):(b=Math.floor(Math.log(g)/Math.LN2),1>g*(m=Math.pow(2,-b))&&(b--,m*=2),g=1<=b+v?g+r/m:g+r*Math.pow(2,1-v),2<=g*m&&(b++,m/=2),b+v>=w?(g=
0,b=w):1<=b+v?(g=(g*m-1)*Math.pow(2,k),b+=v):(g=g*Math.pow(2,v-1)*Math.pow(2,k),b=0));for(;8<=k;a[e+q]=g&255,q+=h,g/=256,k-=8);b=b<<k|g;for(u+=k;0<u;a[e+q]=b&255,q+=h,b/=256,u-=8);a[e+q-h]|=128*f}},{}],82:[function(a,g,m){function t(a,b,f,e,h){this.mid=a;this.left=b;this.right=f;this.leftPoints=e;this.rightPoints=h;this.count=(b?b.count:0)+(f?f.count:0)+e.length}function p(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function e(a,
b){var f=r(b);a.mid=f.mid;a.left=f.left;a.right=f.right;a.leftPoints=f.leftPoints;a.rightPoints=f.rightPoints;a.count=f.count}function b(a,b){var f=a.intervals([]),h=f.indexOf(b);if(0>h)return 0;f.splice(h,1);e(a,f);return 1}function k(a,b,f){for(var e=0;e<a.length&&a[e][0]<=b;++e){var h=f(a[e]);if(h)return h}}function q(a,b,f){for(var e=a.length-1;0<=e&&a[e][1]>=b;--e){var h=f(a[e]);if(h)return h}}function y(a,b){for(var f=0;f<a.length;++f){var e=b(a[f]);if(e)return e}}function u(a,b){return a-b}
function w(a,b){var f=a[0]-b[0];return f?f:a[1]-b[1]}function v(a,b){var f=a[1]-b[1];return f?f:a[0]-b[0]}function r(a){if(0===a.length)return null;for(var b=[],f=0;f<a.length;++f)b.push(a[f][0],a[f][1]);b.sort(u);for(var b=b[b.length>>1],e=[],h=[],c=[],f=0;f<a.length;++f){var k=a[f];k[1]<b?e.push(k):b<k[0]?h.push(k):c.push(k)}a=c.slice();c.sort(w);a.sort(v);return new t(b,r(e),r(h),c,a)}function h(a){this.root=a}var f=a("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(r(a)):
new h(null)};a=t.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var b=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),e(this,b)):this.left.insert(a):this.left=r([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),e(this,b)):this.right.insert(a):
this.right=r([a]);else{var b=f.ge(this.leftPoints,a,w),h=f.ge(this.rightPoints,a,v);this.leftPoints.splice(b,0,a);this.rightPoints.splice(h,0,a)}};a.remove=function(a){var e=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return b(this,a);e=this.left.remove(a);if(2===e)return this.left=null,--this.count,1;1===e&&--this.count;return e}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return b(this,a);
e=this.right.remove(a);if(2===e)return this.right=null,--this.count,1;1===e&&--this.count;return e}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var k=this.left,e=this.right;a.count-=h.count;a.right=h.left;h.left=k;h.right=e}p(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
p(this,this.left):p(this,this.right);return 1}for(k=f.ge(this.leftPoints,a,w);k<this.leftPoints.length&&this.leftPoints[k][0]===a[0];++k)if(this.leftPoints[k]===a)for(--this.count,this.leftPoints.splice(k,1),e=f.ge(this.rightPoints,a,v);e<this.rightPoints.length&&this.rightPoints[e][1]===a[1];++e)if(this.rightPoints[e]===a)return this.rightPoints.splice(e,1),1;return 0};a.queryPoint=function(a,b){if(a<this.mid){if(this.left){var f=this.left.queryPoint(a,b);if(f)return f}return k(this.leftPoints,a,
b)}return a>this.mid?this.right&&(f=this.right.queryPoint(a,b))?f:q(this.rightPoints,a,b):y(this.leftPoints,b)};a.queryInterval=function(a,b,f){if(a<this.mid&&this.left){var e=this.left.queryInterval(a,b,f);if(e)return e}return b>this.mid&&this.right&&(e=this.right.queryInterval(a,b,f))?e:b<this.mid?k(this.leftPoints,b,f):a>this.mid?q(this.rightPoints,a,f):y(this.leftPoints,f)};a=h.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)};a.queryInterval=function(a,b,f){if(a<=b&&this.root)return this.root.queryInterval(a,b,f)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],83:[function(a,g,m){function t(a,b,k,g,p,m){a=["function ",a,"(a,l,h,",
g.join(","),"){",m?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",p?".get(m)":"[m]"];m?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",b,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");m?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,b,k,g){return(new Function([t("A","x"+a+"y",b,["y"],!1,g),t("B","x"+a+"y",b,["y"],!0,g),t("P","c(x,y)"+a+"0",
b,["y","c"],!1,g),t("Q","c(x,y)"+a+"0",b,["y","c"],!0,g),"function dispatchBsearch",k,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",k].join("")))()}g.exports=
{ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],84:[function(a,g,m){g.exports=function(a,g){g=g||Array(a.length);for(var e=0;e<a.length;++e)g[a[e]]=e;return g}},{}],85:[function(a,g,m){g.exports=function(a){for(var g=Array(a),e=0;e<a;++e)g[e]=e;return g}},{}],86:[function(a,g,m){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,g,m){var t=
{}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],88:[function(a,g,m){function t(a,b,e){for(var f=0,d=0;d<a;++d)b&1<<d&&(f|=1<<e[d]);return f}function p(a,g,h,f,d,l){function n(a,b){A.push("for(","i"+d[a],"=",b,";","i"+d[a],"<","s"+d[a],";","++","i"+d[a],"){")}function p(a){for(var b=0;b<x;++b)A.push("p"+b,"+=","u"+b+"_"+d[a],";");A.push("}")}function m(){for(var a=1;a<1<<E;++a)A.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function c(a,e){if(0>
a){for(var h=0;h<x;++h)l[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<x;++h)g.push("c"+h+"_0");for(h=0;h<f;++h)g.push("x"+h);A.push("b0","=",k,"[",u,"]=phase(",g.join(),");");for(g=1;g<1<<E;++g)A.push("b"+g,"=",k,"[",u,"+","e"+g,"];");h=[];for(g=1;g<1<<E;++g)h.push("(b0!==b"+g+")");A.push("if(",h.join("||"),"){");for(var r=[],h=0;h<E;++h)r.push("i"+h);for(h=0;h<x;++h)for(r.push("c"+h+"_0"),g=1;g<1<<E;++g)l[h]?A.push("c"+h+"_"+g,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):A.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),r.push("c"+h+"_"+g);for(h=0;h<1<<E;++h)r.push("b"+h);for(h=0;h<f;++h)r.push("x"+h);A.push("vertex(",r.join(),");","v0","=",b,"[",u,"]=",q,"++;");h=(1<<E)-1;r="b"+h;for(g=0;g<E;++g)if(0===(e&~(1<<g))){for(var v=h^1<<g,t="b"+v,w=[],y=v;0<y;y=y-1&v)w.push(b+"["+u+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)g&1?w.push("c"+y+"_"+h,"c"+y+"_"+v):w.push("c"+y+"_"+v,"c"+y+"_"+h);g&1?w.push(r,t):w.push(t,
r);for(y=0;y<f;++y)w.push("x"+y);A.push("if(",r,"!==",t,"){","face(",w.join(),")}")}A.push("}",u,"+=1;")}else{for(g=a-1;0<=g;--g)n(g,0);h=[];for(g=0;g<x;++g)l[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<f;++g)h.push("x"+g);A.push(k,"[",u,"++]=phase(",h.join(),");");for(g=0;g<a;++g)p(g);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+d[a],";");A.push("if(","s"+d[a],">0){","i"+d[a],"=1;");c(a-1,e|1<<d[a]);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+d[a],";");a===E-1&&(A.push(u,
"=0;"),m());n(a,2);c(a-1,e);a===E-1&&(A.push("if(","i"+d[E-1],"&1){",u,"=0;}"),m());p(a);A.push("}")}}var x=l.length,E=d.length;if(2>E)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var H="extractContour"+d.join("_"),A=[],B=[],P=[],F=0;F<x;++F)P.push("a"+F);for(F=0;F<f;++F)P.push("x"+F);for(F=0;F<E;++F)B.push("s"+F+"=a0.shape["+F+"]|0");for(F=0;F<x;++F){B.push("d"+F+"="+("a"+F)+".data","o"+F+"="+("a"+F)+".offset|0");for(var D=0;D<E;++D)B.push("t"+F+"_"+D+"="+("a"+F)+".stride["+
D+"]|0")}for(F=0;F<x;++F)for(B.push("p"+F+"="+("o"+F)),B.push("c"+F+"_0"),D=1;D<1<<E;++D){for(var J=[],M=0;M<E;++M)D&1<<M&&J.push("-"+("t"+F+"_"+M));B.push("d"+F+"_"+D+"=("+J.join("")+")|0");B.push("c"+F+"_"+D+"=0")}for(F=0;F<x;++F)for(D=0;D<E;++D)M=["t"+F+"_"+d[D]],0<D&&M.push("t"+F+"_"+d[D-1]+"*"+("s"+d[D-1])),B.push("u"+F+"_"+d[D]+"=("+M.join("-")+")|0");for(F=0;F<E;++F)B.push("i"+F+"=0");B.push(q+"=0");D=["2"];for(F=E-2;0<=F;--F)D.push("s"+d[F]);B.push(y+"=("+D.join("*")+")|0",k+"=mallocUint32("+
y+")",b+"=mallocUint32("+y+")",u+"=0");B.push("b0=0");for(D=1;D<1<<E;++D){F=[];J=[];for(M=0;M<E;++M)D&1<<M&&(0===J.length?F.push("1"):F.unshift(J.join("*"))),J.push("s"+d[M]);M="";0>F[0].indexOf("s"+d[E-2])&&(M="-");J=t(E,D,d);B.push("e"+J+"=(-"+F.join("-")+")|0","y"+J+"=("+M+F.join("-")+")|0","b"+J+"=0")}B.push("v0=0",w+"=0");c(E-1,0);A.push("freeUint32(",b,");freeUint32(",k,");");H=["'use strict';function ",H,"(",P.join(),"){var ",B.join(),";",A.join(""),"}return ",H].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",H))(a,g,h,e.mallocUint32,e.freeUint32)}var e=a("typedarray-pool");g.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var f=a.arrayArguments||1;1>f&&b("Must have at least one array argument");var d=a.scalarArguments||0;0>d&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");
"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var l=a.getters||[],g=Array(f),k=0;k<f;++k)0<=l.indexOf(k)?g[k]=!0:g[k]=!1;return p(a.vertex,a.cell,a.phase,d,e,g)};var b="V",k="P",q="N",y="Q",u="X",w="T"},{"typedarray-pool":121}],89:[function(a,g,m){function t(a,b){return a[0]-b[0]}function p(){var a=this.stride,b=Array(a.length),e;for(e=0;e<b.length;++e)b[e]=[Math.abs(a[e]),e];b.sort(t);a=Array(b.length);for(e=
0;e<a.length;++e)a[e]=b[e][1];return a}function e(a,b){var e=["View",b,"d",a].join("");0>b&&(e="View_Nil"+a);var h="generic"===a;if(-1===b){var f,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
e+"(a){return new "+e+"(a);}");return e()}if(0===b)return e=new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
e+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(u[a][0]);f=["'use strict'"];var d=k(b),g=d.map(function(a){return"i"+a}),n="this.offset+"+d.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),q=d.map(function(a){return"b"+a}).join(","),m=d.map(function(a){return"c"+a}).join(",");f.push("function "+
e+"(a,"+q+","+m+",d){this.data=a","this.shape=["+q+"]","this.stride=["+m+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);f.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+d.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+e+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})"));f.push("proto.set=function "+e+"_set("+g.join(",")+",v){");h?f.push("return this.data.set("+n+",v)}"):f.push("return this.data["+n+"]=v}");f.push("proto.get=function "+e+"_get("+g.join(",")+"){");h?f.push("return this.data.get("+
n+")}"):f.push("return this.data["+n+"]}");f.push("proto.index=function "+e+"_index(",g.join(),"){return "+n+"}");f.push("proto.hi=function "+e+"_hi("+g.join(",")+"){return new "+e+"(this.data,"+d.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+d.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=d.map(function(a){return"a"+a+"=this.shape["+a+"]"});n=d.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+
e+"_lo("+g.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+n.join(","));for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");f.push("return new "+e+"(this.data,"+d.map(function(a){return"a"+a}).join(",")+","+d.map(function(a){return"c"+a}).join(",")+",b)}");f.push("proto.step=function "+e+"_step("+g.join(",")+"){var "+d.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+d.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");f.push("return new "+e+"(this.data,"+d.map(function(a){return"a"+a}).join(",")+","+d.map(function(a){return"b"+a}).join(",")+",c)}");n=Array(b);q=Array(b);for(h=0;h<b;++h)n[h]="a[i"+h+"]",q[h]="b[i"+h+"]";f.push("proto.transpose=function "+e+"_transpose("+g+"){"+g.map(function(a,b){return a+"=("+a+"===undefined?"+
b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+n.join(",")+","+q.join(",")+",this.offset)}");f.push("proto.pick=function "+e+"_pick("+g+"){var a=[],b=[],c=this.offset");for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+e+"(data,shape,stride,offset){return new "+
e+"(data,"+d.map(function(a){return"shape["+a+"]"}).join(",")+","+d.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",f.join("\n"));return e(u[a],p)}function b(a){if(q(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var k=a("iota-array"),q=a("is-buffer"),y="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in u)u[a].push(e(a,-1))});g.exports=function(a,g,k,h){if(void 0===a){var f=u.array[0];return f([])}"number"===
typeof a&&(a=[a]);void 0===g&&(g=[a.length]);f=g.length;if(void 0===k){k=Array(f);for(var d=f-1,l=1;0<=d;--d)k[d]=l,l*=g[d]}if(void 0===h)for(d=h=0;d<f;++d)0>k[d]&&(h-=(g[d]-1)*k[d]);d=b(a);for(l=u[d];l.length<=f+1;)l.push(e(d,l.length-1));f=l[f+1];return f(a,g,k,h)}},{"iota-array":85,"is-buffer":86}],90:[function(a,g,m){var t=a("double-bits"),p=Math.pow(2,-1074);g.exports=function(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-p:p;var g=t.hi(a),q=t.lo(a);b>a===0<a?4294967295===
q?(g+=1,q=0):q+=1:0===q?(q=4294967295,--g):--q;return t.pack(q,g)}},{"double-bits":73}],91:[function(a,g,m){g.exports=function(a){var b=a.length;if(b<t)for(var g=1,q=0;q<b;++q)for(var m=0;m<q;++m)if(a[q]<a[m])g=-g;else{if(a[q]===a[m])return 0}else{for(var u=p.mallocUint8(b),q=0;q<b;++q)u[q]=0;g=1;for(q=0;q<b;++q)if(!u[q]){var w=1;u[q]=1;for(m=a[q];m!==q;m=a[m]){if(u[m])return p.freeUint8(u),0;w+=1;u[m]=1}w&1||(g=-g)}p.freeUint8(u)}return g};var t=32,p=a("typedarray-pool")},{"typedarray-pool":121}],
92:[function(a,g,m){var t=a("typedarray-pool"),p=a("invert-permutation");m.rank=function(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var g=t.mallocUint32(b),q=t.mallocUint32(b),m=0,u;p(a,q);for(u=0;u<b;++u)g[u]=a[u];for(u=b-1;0<u;--u)b=q[u],a=g[u],g[u]=g[b],g[b]=a,q[u]=q[a],q[a]=b,m=(m+a)*u;t.freeUint32(q);t.freeUint32(g);return m};m.unrank=function(a,b,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(b?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
b?[0,1]:[1,0]}g=g||Array(a);var p,m,t=1;g[0]=0;for(m=1;m<a;++m)g[m]=m,t=t*m|0;for(m=a-1;0<m;--m)a=b/t|0,b=b-a*t|0,t=t/m|0,p=g[m]|0,g[m]=g[a]|0,g[a]=p|0;return g}},{"invert-permutation":84,"typedarray-pool":121}],93:[function(a,g,m){g.exports=function(a,e){function b(a,b){var f=w[b][a[b]];f.splice(f.indexOf(a),1)}function g(a,f,h){var k,p,c;for(p=0;2>p;++p)if(0<w[p][f].length){k=w[p][f][0];c=p;break}p=k[c^1];for(var q=0;2>q;++q)for(var r=w[q][f],m=0;m<r.length;++m){var v=r[m],u=v[q^1];0<t(e[a],e[f],
e[p],e[u])&&(k=v,p=u,c=q)}if(h)return p;k&&b(k,c);return p}function q(a,f){var h=w[f][a][0],p=[a];b(h,f);for(h=h[f^1];;){for(;h!==a;)p.push(h),h=g(p[p.length-2],h,!1);if(0===w[0][a].length+w[1][a].length)break;var h=p[p.length-1],q=a,c=p[1],r=g(h,q,!0);if(0>t(e[h],e[q],e[c],e[r]))break;p.push(a);h=g(h,q)}return p}for(var m=e.length|0,u=a.length,w=[Array(m),Array(m)],v=0;v<m;++v)w[0][v]=[],w[1][v]=[];for(v=0;v<u;++v){var r=a[v];w[0][r[0]].push(r);w[1][r[1]].push(r)}u=[];for(v=0;v<m;++v)0===w[0][v].length+
w[1][v].length&&u.push([v]);for(v=0;v<m;++v)for(r=0;2>r;++r){for(var h=[];0<w[r][v].length;){var f=q(v,r);f[1]===f[f.length-1]?h.push.apply(h,f):(0<h.length&&u.push(h),h=f)}0<h.length&&u.push(h)}return u};var t=a("compare-angle")},{"compare-angle":68}],94:[function(a,g,m){g.exports=function(a,e){for(var b=t(a,e.length),g=Array(e.length),q=Array(e.length),m=[],u=0;u<e.length;++u){var w=b[u].length;q[u]=w;g[u]=!0;1>=w&&m.push(u)}for(;0<m.length;)for(w=m.pop(),g[w]=!1,w=b[w],u=0;u<w.length;++u){var v=
w[u];0===--q[v]&&m.push(v)}b=Array(e.length);q=[];for(u=0;u<e.length;++u)g[u]?(w=q.length,b[u]=w,q.push(e[u])):b[u]=-1;m=[];for(u=0;u<a.length;++u)w=a[u],g[w[0]]&&g[w[1]]&&m.push([b[w[0]],b[w[1]]]);return[m,q]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":75}],95:[function(a,g,m){function t(a,b){for(var e=Array(a),f=0;f<a;++f)e[f]=b;return e}function p(a){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return b}g.exports=function(a,g){function h(a){for(var b=a.length,c=0;c<b;++c)if(!D[a[c]])return!1;
return!0}var f=w(a,g);a=f[0];g=f[1];for(var d=g.length,l=e(a,g.length),n=0;n<d;++n)if(1===l[n].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var l=b(a,g),l=l.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var f=g[a[d]],e=g[a[(d+1)%b]],h=q(-f[0],f[1]),l=q(-f[0],e[1]),f=q(e[0],f[1]),e=q(e[0],e[1]),c=y(c,y(y(h,l),y(f,e)));return 0<c[c.length-1]}),f=l.length,m=Array(f),C=Array(f),n=0;n<f;++n){m[n]=n;var c=Array(f),x=l[n].map(function(a){return g[a]}),E=k([x]),H=
0,A=0;a:for(;A<f;++A)if(c[A]=0,n!==A){for(var x=l[A],B=x.length,P=0;P<B;++P){var F=E(g[x[P]]);if(0!==F){0>F&&(c[A]=1,H+=1);continue a}}c[A]=1;H+=1}C[n]=[H,n,c]}C.sort(function(a,b){return b[0]-a[0]});for(n=0;n<f;++n)for(c=C[n],x=c[1],B=c[2],A=0;A<f;++A)B[A]&&(m[A]=x);C=p(f);for(n=0;n<f;++n)C[n].push(m[n]),C[m[n]].push(n);for(var c={},D=t(d,!1),n=0;n<f;++n)for(x=l[n],B=x.length,A=0;A<B;++A)d=x[A],E=x[(A+1)%B],H=Math.min(d,E)+":"+Math.max(d,E),H in c?(H=c[H],C[H].push(n),C[n].push(H),D[d]=D[E]=!0):
c[H]=n;A=[];d=t(f,-1);for(n=0;n<f;++n)m[n]!==n||h(l[n])?d[n]=-1:(A.push(n),d[n]=0);for(f=[];0<A.length;){n=A.pop();m=C[n];u(m,function(a,b){return a-b});var B=m.length,c=d[n],J;0===c&&(x=l[n],J=[x]);for(n=0;n<B;++n)x=m[n],0<=d[x]||(d[x]=c^1,A.push(x),0===c&&(x=l[x],h(x)||(x.reverse(),J.push(x))));0===c&&f.push(J)}return f};var e=a("edges-to-adjacency-list"),b=a("planar-dual"),k=a("point-in-big-polygon"),q=a("two-product"),y=a("robust-sum"),u=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,
"edges-to-adjacency-list":75,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":119,uniq:123}],96:[function(a,g,m){arguments[4][83][0].apply(m,arguments)},{dup:83}],97:[function(a,g,m){function t(){return!0}function p(a){return function(b,d){var e=a[b];return e?!!e.queryPoint(d,t):!1}}function e(a){for(var b={},d=0;d<a.length;++d){var e=a[d],g=e[0][0],k=e[0][1],e=e[1][1],k=[Math.min(k,e),Math.max(k,e)];g in b?b[g].push(k):b[g]=[k]}a={};g=Object.keys(b);for(d=0;d<g.length;++d)a[g[d]]=
v(b[g[d]]);return p(a)}function b(a,b){return function(d){var e=r.le(b,d[0]);if(0>e)return 1;var g=a[e];if(!g)if(0<e&&b[e]===d[0])g=a[e-1];else return 1;for(e=1;g;){var k=g.key,p=u(d,k[0],k[1]);if(k[0][0]<k[1][0])if(0>p)g=g.left;else if(0<p)e=-1,g=g.right;else return 0;else if(0<p)g=g.left;else if(0>p)e=1,g=g.right;else return 0}return e}}function k(a){return 1}function q(a){return function(b){return a(b[0],b[1])?0:1}}function y(a,b){return function(d){return a(d[0],d[1])?0:b(d)}}g.exports=function(a){for(var f=
a.length,d=[],g=[],n=0;n<f;++n)for(var p=a[n],r=p.length,c=r-1,m=0;m<r;c=m++){var c=p[c],v=p[m];c[0]===v[0]?g.push([c,v]):d.push([c,v])}if(0===d.length)return 0===g.length?k:q(e(g));a=w(d);a=b(a.slabs,a.coordinates);return 0===g.length?a:y(e(g),a)};var u=a("robust-orientation")[3],w=a("slab-decomposition"),v=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":82,"robust-orientation":103,"slab-decomposition":116}],98:[function(a,g,m){var t=a("big-rat/add");
g.exports=function(a,e){for(var b=a.length,g=Array(b),q=0;q<b;++q)g[q]=t(a[q],e[q]);return g}},{"big-rat/add":34}],99:[function(a,g,m){g.exports=function(a){for(var e=Array(a.length),b=0;b<a.length;++b)e[b]=t(a[b]);return e};var t=a("big-rat")},{"big-rat":37}],100:[function(a,g,m){var t=a("big-rat"),p=a("big-rat/mul");g.exports=function(a,b){for(var g=t(b),q=a.length,m=Array(q),u=0;u<q;++u)m[u]=p(a[u],g);return m}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,g,m){var t=a("big-rat/sub");g.exports=
function(a,e){for(var b=a.length,g=Array(b),q=0;q<b;++q)g[q]=t(a[q],e[q]);return g}},{"big-rat/sub":49}],102:[function(a,g,m){function t(a,b){for(var e=Array(a.length-1),g=1;g<a.length;++g)for(var h=e[g-1]=Array(a.length-1),k=0,c=0;k<a.length;++k)k!==b&&(h[c++]=a[g][k]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",p(a.slice(0,b)),",",p(a.slice(b)),")"].join("")}function e(a,b){if("m"===a.charAt(0)){if("w"===
b.charAt(0)){var g=a.split("[");return["w",b.substr(1),"m",g[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return e(b,a)}function b(a){if(2===a.length)return[["diff(",e(a[0][0],a[1][1]),",",e(a[1][0],a[0][1]),")"].join("")];for(var d=[],g=0;g<a.length;++g)d.push(["scale(",p(b(t(a,g))),",",g&1?"-":"",a[0][g],")"].join(""));return d}function k(a,b){for(var e=[],g=0;g<b-2;++g)e.push(["prod(m",a,"[",g,"],m",a,"[",g,"])"].join(""));return p(e)}function q(a){for(var d=[],e=[],g=Array(a),h=
0;h<a;++h){g[h]=Array(a);for(var q=0;q<a;++q)g[h][q]=["m",q,"[",a-h-2,"]"].join("")}for(h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(h=0;h<a;++h)0===(h&1)?d.push.apply(d,b(t(g,h))):e.push.apply(e,b(t(g,h)));d=p(d);e=p(e);g="exactInSphere"+a;q=[];for(h=0;h<a;++h)q.push("m"+h);q=["function ",g,"(",q.join(),"){"];for(h=0;h<a;++h){q.push("var w",h,"=",k(h,a),";");for(var c=0;c<a;++c)c!==h&&q.push("var w",h,"m",c,"=scale(w",h,",m",c,"[0]);")}q.push("var p=",d,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",
g);return(new Function("sum","diff","prod","scale",q.join("")))(w,v,u,r)}function y(a){var b=h[a.length];b||(b=h[a.length]=q(a.length));return b.apply(void 0,a)}var u=a("two-product"),w=a("robust-sum"),v=a("robust-subtract"),r=a("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(q(h.length));for(var a=[],b=["slow"],e=0;6>=e;++e)a.push("a"+e),b.push("o"+e);for(var k=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
e=2;6>=e;++e)k.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");b.push(k.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[y].concat(h));for(e=0;6>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],103:[function(a,g,m){function t(a,b){for(var e=Array(a.length-1),g=1;g<a.length;++g)for(var h=
e[g-1]=Array(a.length-1),k=0,c=0;k<a.length;++k)k!==b&&(h[c++]=a[g][k]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",p(a.slice(0,b)),",",p(a.slice(b)),")"].join("")}function e(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],g=0;g<a.length;++g)b.push(["scale(",p(e(t(a,g))),",",g&1?"-":"",a[0][g],")"].join(""));return b}function b(a){for(var b=
[],g=[],h=Array(a),k=0;k<a;++k){h[k]=Array(a);for(var r=0;r<a;++r)h[k][r]=["m",r,"[",a-k-1,"]"].join("")}k=[];for(r=0;r<a;++r)0===(r&1)?b.push.apply(b,e(t(h,r))):g.push.apply(g,e(t(h,r))),k.push("m"+r);b=p(b);g=p(g);a="orientation"+a+"Exact";a=["function ",a,"(",k.join(),"){var p=",b,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,q,u,w)}function k(a){var d=h[a.length];d||(d=h[a.length]=b(a.length));return d.apply(void 0,a)}var q=
a("two-product"),y=a("robust-sum"),u=a("robust-scale"),w=a("robust-subtract"),v=b(3),r=b(4),h=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,e){var g=(a[1]-e[1])*(b[0]-e[0]),h=(a[0]-e[0])*(b[1]-e[1]),k=g-h;if(0<g){if(0>=h)return k;g+=h}else if(0>g){if(0<=h)return k;g=-(g+h)}else return k;g*=3.3306690738754716E-16;return k>=g||k<=-g?k:v(a,b,e)},function(a,b,e,g){var h=a[0]-g[0],k=b[0]-g[0],c=e[0]-g[0],p=a[1]-g[1],q=b[1]-g[1],m=e[1]-g[1],v=a[2]-g[2],t=b[2]-g[2],
u=e[2]-g[2],w=k*m,y=c*q,c=c*p,m=h*m,h=h*q,p=k*p,k=v*(w-y)+t*(c-m)+u*(h-p),v=7.771561172376103E-16*((Math.abs(w)+Math.abs(y))*Math.abs(v)+(Math.abs(c)+Math.abs(m))*Math.abs(t)+(Math.abs(h)+Math.abs(p))*Math.abs(u));return k>v||-k>v?k:r(a,b,e,g)}];(function(){for(;5>=h.length;)h.push(b(h.length));for(var a=[],d=["slow"],e=0;5>=e;++e)a.push("a"+e),d.push("o"+e);for(var n=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;5>=e;++e)n.push("case ",e,":return o",
e,"(",a.slice(0,e).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");d.push(n.join(""));a=Function.apply(void 0,d);g.exports=a.apply(void 0,[k].concat(h));for(e=0;5>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],104:[function(a,g,m){var t=a("robust-sum"),p=a("robust-scale");g.exports=function(a,b){if(1===a.length)return p(b,a[0]);if(1===
b.length)return p(a,b[0]);if(0===a.length||0===b.length)return[0];var g=[0];if(a.length<b.length)for(var q=0;q<a.length;++q)g=t(g,p(b,a[q]));else for(q=0;q<b.length;++q)g=t(g,p(a,b[q]));return g}},{"robust-scale":105,"robust-sum":108}],105:[function(a,g,m){var t=a("two-product"),p=a("two-sum");g.exports=function(a,b){var g=a.length;if(1===g)return g=t(a[0],b),g[0]?g:[g[1]];var q=Array(2*g),m=[.1,.1],u=[.1,.1],w=0;t(a[0],b,m);m[0]&&(q[w++]=m[0]);for(var v=1;v<g;++v){t(a[v],b,u);p(m[1],u[0],m);m[0]&&
(q[w++]=m[0]);var r=u[1],h=m[1],f=r+h,r=h-(f-r);m[1]=f;r&&(q[w++]=r)}m[1]&&(q[w++]=m[1]);0===w&&(q[w++]=0);q.length=w;return q}},{"two-product":119,"two-sum":120}],106:[function(a,g,m){g.exports=function(a,e,b,g){var q=t(a,b,g),m=t(e,b,g);if(0<q&&0<m||0>q&&0>m)return!1;var u=t(b,a,e),w=t(g,a,e);if(0<u&&0<w||0>u&&0>w)return!1;if(0===q&&0===m&&0===u&&0===w){a:{for(q=0;2>q;++q){var m=a[q],u=e[q],w=Math.max(m,u),v=b[q],r=g[q],h=Math.min(v,r);if(Math.max(v,r)<Math.min(m,u)||w<h){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,g,m){g.exports=function(a,g){var e=a.length|0,b=g.length|0;if(1===e&&1===b){var b=a[0],k=-g[0],e=b+k,q=e-b,e=(b=b-(e-q)+(k-q))?[b,e]:[e];return e}var k=Array(e+b),m=q=0,u=0,w=Math.abs,v=a[m],r=w(v),h=-g[u],f=w(h),d,l;r<f?(l=v,m+=1,m<e&&(v=a[m],r=w(v))):(l=h,u+=1,u<b&&(h=-g[u],f=w(h)));m<e&&r<f||u>=b?(d=v,m+=1,m<e&&(v=a[m],r=w(v))):(d=h,u+=1,u<b&&(h=-g[u],f=w(h)));var n=d+l;l-=n-d;for(var z=n,C;m<e&&u<b;)r<f?(d=v,m+=1,m<
e&&(v=a[m],r=w(v))):(d=h,u+=1,u<b&&(h=-g[u],f=w(h))),n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d;for(;m<e;)d=v,n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d,m+=1,m<e&&(v=a[m]);for(;u<b;)d=h,n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d,u+=1,u<b&&(h=-g[u]);l&&(k[q++]=l);z&&(k[q++]=z);q||(k[q++]=0);k.length=q;return k}},{}],108:[function(a,g,m){g.exports=function(a,g){var e=a.length|0,b=g.length|0;if(1===e&&1===b){var b=a[0],
k=g[0],e=b+k,q=e-b,e=(b=b-(e-q)+(k-q))?[b,e]:[e];return e}var k=Array(e+b),m=q=0,u=0,w=Math.abs,v=a[m],r=w(v),h=g[u],f=w(h),d,l;r<f?(l=v,m+=1,m<e&&(v=a[m],r=w(v))):(l=h,u+=1,u<b&&(h=g[u],f=w(h)));m<e&&r<f||u>=b?(d=v,m+=1,m<e&&(v=a[m],r=w(v))):(d=h,u+=1,u<b&&(h=g[u],f=w(h)));var n=d+l;l-=n-d;for(var z=n,C;m<e&&u<b;)r<f?(d=v,m+=1,m<e&&(v=a[m],r=w(v))):(d=h,u+=1,u<b&&(h=g[u],f=w(h))),n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d;for(;m<e;)d=v,n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=
z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d,m+=1,m<e&&(v=a[m]);for(;u<b;)d=h,n=d+l,d=n-d,(d=l-d)&&(k[q++]=d),d=z+n,C=d-z,l=d-C,n-=C,z-=l,l=z+n,z=d,u+=1,u<b&&(h=g[u]);l&&(k[q++]=l);z&&(k[q++]=z);q||(k[q++]=0);k.length=q;return k}},{}],109:[function(a,g,m){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,g,m){arguments[4][52][0].apply(m,arguments)},{dup:52}],111:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var e=0;e<a;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var e=this.roots;e[a]!==a;){var b=e[a];e[a]=e[b];a=b}return a};t.prototype.link=function(a,e){var b=this.find(a),g=this.find(e);if(b!==g){var m=this.ranks,t=this.roots,u=m[b],w=m[g];u<w?t[b]=g:w<u?t[g]=b:(t[g]=b,++m[b])}}},{}],112:[function(a,g,m){function t(a,b){var e=a.length,f=a.length-b.length,
d=Math.min;if(f)return f;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:d(a[0],a[1])-d(b[0],b[1]);case 3:var f=a[0]+a[1],g=b[0]+b[1];if(e=f+a[2]-(g+b[2]))return e;var k=d(a[0],a[1]),p=d(b[0],b[1]);return(e=d(k,a[2])-d(p,b[2]))?e:d(k+a[2],f)-d(p+b[2],g);default:d=a.slice(0);d.sort();g=b.slice(0);g.sort();for(k=0;k<e;++k)if(f=d[k]-g[k])return f;return 0}}function p(a,b){return t(a[0],b[0])}function e(a,b){if(b){for(var e=a.length,f=Array(e),d=0;d<e;++d)f[d]=
[a[d],b[d]];f.sort(p);for(d=0;d<e;++d)a[d]=f[d][0],b[d]=f[d][1]}else a.sort(t);return a}function b(a){if(0===a.length)return[];for(var b=1,e=a.length,f=1;f<e;++f){var d=a[f];t(d,a[f-1])&&(f===b?b++:a[b++]=d)}a.length=b;return a}function k(a,b){for(var e=0,f=a.length-1,d=-1;e<=f;){var g=e+f>>1,k=t(a[g],b);0>=k?(0===k&&(d=g),e=g+1):0<k&&(f=g-1)}return d}function q(a,b){for(var e=Array(a.length),f=0,d=e.length;f<d;++f)e[f]=[];for(var d=[],f=0,g=b.length;f<g;++f)for(var n=b[f],p=n.length,m=1,c=1<<p;m<
c;++m){d.length=u.popCount(m);for(var q=0,w=0;w<p;++w)m&1<<w&&(d[q++]=n[w]);q=k(a,d);if(!(0>q))for(;!(e[q++].push(f),q>=a.length||0!==t(a[q],d)););}return e}function y(a,b){if(0>b)return[];for(var g=[],f=(1<<b+1)-1,d=0;d<a.length;++d)for(var k=a[d],n=f;n<1<<k.length;n=u.nextCombination(n)){for(var p=Array(b+1),m=0,c=0;c<k.length;++c)n&1<<c&&(p[m++]=k[c]);g.push(p)}return e(g)}"use restrict";var u=a("bit-twiddle"),w=a("union-find");m.dimension=function(a){for(var b=0,e=Math.max,f=0,d=a.length;f<d;++f)b=
e(b,a[f].length);return b-1};m.countVertices=function(a){for(var b=-1,e=Math.max,f=0,d=a.length;f<d;++f)for(var g=a[f],k=0,p=g.length;k<p;++k)b=e(b,g[k]);return b+1};m.cloneCells=function(a){for(var b=Array(a.length),e=0,f=a.length;e<f;++e)b[e]=a[e].slice(0);return b};m.compareCells=t;m.normalize=e;m.unique=b;m.findCell=k;m.incidence=q;m.dual=function(a,e){if(!e)return q(b(y(a,0)),a,0);for(var g=Array(e),f=0;f<e;++f)g[f]=[];for(var f=0,d=a.length;f<d;++f)for(var k=a[f],n=0,p=k.length;n<p;++n)g[k[n]].push(f);
return g};m.explode=function(a){for(var b=[],g=0,f=a.length;g<f;++g)for(var d=a[g],k=d.length|0,n=1,p=1<<k;n<p;++n){for(var m=[],c=0;c<k;++c)n>>>c&1&&m.push(d[c]);b.push(m)}return e(b)};m.skeleton=y;m.boundary=function(a){for(var b=[],g=0,f=a.length;g<f;++g)for(var d=a[g],k=0,n=d.length;k<n;++k){for(var p=Array(d.length-1),m=0,c=0;m<n;++m)m!==k&&(p[c++]=d[m]);b.push(p)}return e(b)};m.connectedComponents=function(a,g){if(g){for(var h=new w(g),f=0;f<a.length;++f)for(var d=a[f],l=0;l<d.length;++l)for(var n=
l+1;n<d.length;++n)h.link(d[l],d[n]);d=[];l=h.ranks;for(f=0;f<l.length;++f)l[f]=-1;for(f=0;f<a.length;++f)n=h.find(a[f][0]),0>l[n]?(l[n]=d.length,d.push([a[f].slice(0)])):d[l[n]].push(a[f].slice(0));return d}h=b(e(y(a,0)));f=new w(h.length);for(d=0;d<a.length;++d)for(l=a[d],n=0;n<l.length;++n)for(var p=k(h,[l[n]]),m=n+1;m<l.length;++m)f.link(p,k(h,[l[m]]));l=[];n=f.ranks;for(d=0;d<n.length;++d)n[d]=-1;for(d=0;d<a.length;++d)p=f.find(k(h,[a[d][0]])),0>n[p]?(n[p]=l.length,l.push([a[d].slice(0)])):l[n[p]].push(a[d].slice(0));
return l}},{"bit-twiddle":110,"union-find":111}],113:[function(a,g,m){g.exports=function(a,b,g){function m(a){if(c[a])return Infinity;var d=n[a],e=z[a];if(0>d||0>e)return Infinity;d=b[d];e=b[e];return Math.abs(t(b[a],d,e))/Math.sqrt(Math.pow(d[0]-e[0],2)+Math.pow(d[1]-e[1],2))}function y(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function u(a){for(var b=C[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<P){var g=C[A[d]];g<c&&(f=d,c=g)}e<P&&C[A[e]]<c&&(f=e);if(f===a)return a;y(a,f);a=f}}function w(a){for(var b=
C[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<C[A[c]])y(a,c),a=c;else return a}}function v(){if(0<P){var a=A[0];y(0,P-1);--P;u(0);return a}return-1}function r(a,b){var c=A[a];if(C[c]===b)return a;C[c]=-Infinity;w(a);v();C[c]=b;P+=1;return w(P-1)}function h(a){if(!c[a]){c[a]=!0;var b=n[a];a=z[a];0<=n[a]&&(n[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&r(B[b],m(b));0<=B[a]&&r(B[a],m(a))}}function f(a,b){if(0>a[b])return b;var d=b,e=b;do{var f=a[e];if(!c[e]||0>f||f===e)break;e=f;f=a[e];if(!c[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=b;d!==e;d=a[d])a[d]=e;return e}for(var d=b.length,l=a.length,n=Array(d),z=Array(d),C=Array(d),c=Array(d),x=0;x<d;++x)n[x]=z[x]=-1,C[x]=Infinity,c[x]=!1;for(x=0;x<l;++x){var E=a[x];if(2!==E.length)throw Error("Input must be a graph");var H=E[1],E=E[0];z[E]=-1!==z[E]?-2:H;n[H]=-1!==n[H]?-2:E}for(var A=[],B=Array(d),x=0;x<d;++x)Infinity>(C[x]=m(x))?(B[x]=A.length,A.push(x)):B[x]=-1;for(var P=A.length,x=P>>1;0<=x;--x)u(x);for(;;){x=v();if(0>x||C[x]>g)break;h(x)}g=
[];for(x=0;x<d;++x)c[x]||(B[x]=g.length,g.push(b[x].slice()));var F=[];a.forEach(function(a){var b=f(n,a[0]);a=f(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&F.push([b,a]))});p.unique(p.normalize(F));return{positions:g,edges:F}};var t=a("robust-orientation"),p=a("simplicial-complex")},{"robust-orientation":103,"simplicial-complex":112}],114:[function(a,g,m){function t(a,b){var g,m;if(b[0][0]<b[1][0])g=b[0],m=b[1];else if(b[0][0]>b[1][0])g=b[1],m=b[0];else{g=Math.min(a[0][1],a[1][1]);m=Math.max(a[0][1],
a[1][1]);var t=Math.min(b[0][1],b[1][1]),u=Math.max(b[0][1],b[1][1]);return m<t?m-t:g>u?g-u:m-u}a[0][1]<a[1][1]?(u=a[0],t=a[1]):(u=a[1],t=a[0]);return(u=p(m,g,u))?u:(u=p(m,g,t))?u:t-m}g.exports=function(a,b){var g,m;if(b[0][0]<b[1][0])g=b[0],m=b[1];else if(b[0][0]>b[1][0])g=b[1],m=b[0];else return t(b,a);var y,u;if(a[0][0]<a[1][0])y=a[0],u=a[1];else if(a[0][0]>a[1][0])y=a[1],u=a[0];else return-t(a,b);var w=p(g,m,u),v=p(g,m,y);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;
w=p(u,y,m);v=p(u,y,g);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;return m[0]-u[0]};var p=a("robust-orientation")},{"robust-orientation":103}],115:[function(a,g,m){arguments[4][83][0].apply(m,arguments)},{dup:83}],116:[function(a,g,m){function t(a,b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function p(a,b){return a.y-b}function e(a,b){for(var g=null;a;){var f=a.key,d,k;f[0][0]<f[1][0]?(d=f[0],k=f[1]):(d=f[1],k=f[0]);d=u(d,k,b);if(0>d)a=a.left;else if(0<d)if(b[0]!==
f[1][0])g=a,a=a.right;else{if(f=e(a.right,b))return f;a=a.left}else{if(b[0]!==f[1][0])return a;if(f=e(a.right,b))return f;a=a.left}}return g}function b(a,b,e,f){this.y=a;this.index=b;this.start=e;this.closed=f}function k(a,b,e,f){this.x=a;this.segment=b;this.create=e;this.index=f}g.exports=function(a){for(var e=a.length,g=2*e,f=Array(g),d=0;d<e;++d){var l=a[d],n=l[0][0]<l[1][0];f[2*d]=new k(l[0][0],l,n,d);f[2*d+1]=new k(l[1][0],l,!n,d)}f.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);e=[];l=[];n=[];for(d=0;d<g;){for(var m=f[d].x,p=[];d<g;){var c=f[d];if(c.x!==m)break;d+=1;c.segment[0][0]===c.x&&c.segment[1][0]===c.x?c.create&&(c.segment[0][1]<c.segment[1][1]?(p.push(new b(c.segment[0][1],c.index,!0,!0)),p.push(new b(c.segment[1][1],c.index,!1,!1))):(p.push(new b(c.segment[1][1],c.index,!0,!1)),p.push(new b(c.segment[0][1],c.index,!1,!0)))):a=c.create?a.insert(c.segment,c.index):a.remove(c.segment)}e.push(a.root);
l.push(m);n.push(p)}return new t(e,l,n)};var q=a("binary-search-bounds"),y=a("functional-red-black-tree"),u=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var b=q.le(this.coordinates,a[0]);if(0>b)return-1;var g=e(this.slabs[b],a),f=-1;g&&(f=g.value);if(this.coordinates[b]===a[0]){var d=null;g&&(d=g.key);0<b&&(g=e(this.slabs[b-1],a))&&(d?0<w(g.key,d)&&(d=g.key,f=g.value):(f=g.value,d=g.key));g=this.horizontal[b];if(0<g.length){var k=q.ge(g,a[1],p);if(k<g.length){b=
g[k];if(a[1]===b.y){if(b.closed)return b.index;for(;k<g.length-1&&g[k+1].y===a[1];)if(k+=1,b=g[k],b.closed)return b.index;if(b.y===a[1]&&!b.start){k+=1;if(k>=g.length)return f;b=g[k]}}b.start?d?(a=u(d[0],d[1],[a[0],b.y]),d[0][0]>d[1][0]&&(a=-a),0<a&&(f=b.index)):f=b.index:b.y!==a[1]&&(f=b.index)}}}return f}},{"./lib/order-segments":114,"binary-search-bounds":115,"functional-red-black-tree":76,"robust-orientation":103}],117:[function(a,g,m){function t(a,b){var g=a.length,k=["'use strict';"],m="surfaceNets"+
a.join("_")+"d"+b;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&k.push("getters:[0],");for(var r=[],h=[],f=0;f<g;++f)r.push("d"+f),h.push("d"+f);for(f=0;f<1<<g;++f)r.push("v"+f),h.push("v"+f);for(f=0;f<1<<g;++f)r.push("p"+f),h.push("p"+f);r.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(f=0;f<1<<g;++f)r.push("(p"+f+"<<"+f+")");k.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],d=[];128>=1<<(1<<g)?(k.push("switch(m){"),d=k):k.push("switch(m>>>7){");for(f=0;f<1<<(1<<g);++f){128<1<<(1<<g)&&0===f%128&&(0<r.length&&d.push("}}"),d="vExtra"+r.length,k.push("case ",f>>>7,":",d,"(m&0x7f,",h.join(),");break;"),d=["function ",d,"(m,",h.join(),"){switch(m){"],r.push(d));d.push("case ",f&127,":");for(var l=Array(g),n=Array(g),t=Array(g),C=Array(g),c=0,x=0;x<g;++x)l[x]=[],n[x]=[],t[x]=0,C[x]=0;for(x=0;x<1<<g;++x)for(var E=
0;E<g;++E){var H=x^1<<E;if(!(H>x)&&!(f&1<<H)!==!(f&1<<x)){var A=1;f&1<<H?n[E].push("v"+H+"-v"+x):(n[E].push("v"+x+"-v"+H),A=-A);0>A?(l[E].push("-v"+x+"-v"+H),t[E]+=2):(l[E].push("v"+x+"+v"+H),t[E]-=2);c+=1;for(A=0;A<g;++A)A!==E&&(H&1<<A?C[A]+=1:--C[A])}}x=[];for(E=0;E<g;++E)0===l[E].length?x.push("d"+E+"-0.5"):(H="",0>t[E]?H=t[E]+"*c":0<t[E]&&(H="+"+t[E]+"*c"),x.push("d"+E+"-"+(.5+C[E]/c*.5)+"-"+l[E].length/c*.5+"*("+l[E].join("+")+H+")/("+n[E].join("+")+")"));d.push("a.push([",x.join(),"]);","break;")}k.push("}},");
0<r.length&&d.push("}}");h=[];for(f=0;f<1<<g-1;++f)h.push("v"+f);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=e(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",m,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
m,";");for(f=0;f<r.length;++f)k.push(r[f].join(""));return(new Function("genContour",k.join("")))(p)}g.exports=function(a,e){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=b(a,e),m=g.length,p=Array(m),r=Array(m),h=0;h<m;++h)p[h]=[g[h]],r[h]=[h];return{positions:p,cells:r}}g=a.order.join()+"-"+a.dtype;m=k[g];e=+e||0;m||(m=k[g]=t(a.order,a.dtype));return m(a,e)};var p=a("ndarray-extract-contour"),e=a("triangulate-hypercube"),b=a("zero-crossings"),k={}},{"ndarray-extract-contour":88,
"triangulate-hypercube":118,"zero-crossings":127}],118:[function(a,g,m){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(e(a+1))|0,m=[],y=0;y<g;++y){for(var u=t.unrank(a,y),w=[0],v=0,r=0;r<u.length;++r)v+=1<<u[r],w.push(v);1>p(u)&&(w[0]=v,w[a]=0);m.push(w)}return m};var t=a("permutation-rank"),p=a("permutation-parity"),e=a("gamma")},{gamma:77,"permutation-parity":91,"permutation-rank":92}],119:[function(a,g,m){g.exports=function(a,e,b){var g=a*e,m=t*a,m=m-(m-a);a-=m;
var y=t*e,y=y-(y-e);e-=y;e=a*e-(g-m*y-a*y-m*e);return b?(b[0]=e,b[1]=g,b):[e,g]};var t=+(Math.pow(2,27)+1)},{}],120:[function(a,g,m){g.exports=function(a,g,e){var b=a+g,k=b-a;g-=k;a-=b-k;return e?(e[0]=a+g,e[1]=b,e):[a+g,b]}},{}],121:[function(a,g,m){(function(g,p){function e(a){if(a){var b=n.log2(a.length||a.byteLength);x[b].push(a)}}function b(a){a=n.nextPow2(a);var b=n.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function k(a){return new Uint8Array(b(a),0,a)}function q(a){return new Uint16Array(b(2*
a),0,a)}function y(a){return new Uint32Array(b(4*a),0,a)}function u(a){return new Int8Array(b(a),0,a)}function w(a){return new Int16Array(b(2*a),0,a)}function v(a){return new Int32Array(b(4*a),0,a)}function r(a){return new Float32Array(b(4*a),0,a)}function h(a){return new Float64Array(b(8*a),0,a)}function f(a){return C?new Uint8ClampedArray(b(a),0,a):k(a)}function d(a){return new DataView(b(a),0,a)}function l(a){a=n.nextPow2(a);var b=n.log2(a),b=E[b];return 0<b.length?b.pop():new p(a)}var n=a("bit-twiddle"),
z=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var C="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=z([32,0]));c.BUFFER||(c.BUFFER=z([32,0]));var x=c.DATA,E=c.BUFFER;m.free=function(a){if(p.isBuffer(a))E[n.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=n.log2(a.length||a.byteLength)|0;x[b].push(a)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeInt8=m.freeInt16=m.freeInt32=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(a){e(a.buffer)};m.freeArrayBuffer=e;m.freeBuffer=function(a){E[n.log2(a.length)].push(a)};m.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return b(a);switch(c){case "uint8":return k(a);case "uint16":return q(a);case "uint32":return y(a);case "int8":return u(a);
case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return r(a);case "double":case "float64":return h(a);case "uint8_clamped":return f(a);case "buffer":return l(a);case "data":case "dataview":return d(a);default:return null}};m.mallocArrayBuffer=b;m.mallocUint8=k;m.mallocUint16=q;m.mallocUint32=y;m.mallocInt8=u;m.mallocInt16=w;m.mallocInt32=v;m.mallocFloat32=m.mallocFloat=r;m.mallocFloat64=m.mallocDouble=h;m.mallocUint8Clamped=f;m.mallocDataView=d;m.mallocBuffer=l;m.clearCache=
function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,x[a].length=0,E[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:74}],122:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var e=
0;e<a;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";g.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var e=a,b=this.roots;b[a]!==a;)a=b[a];for(;b[e]!==a;){var g=b[e];b[e]=a;e=g}return a};a.link=function(a,e){var b=this.find(a),g=this.find(e);if(b!==g){var m=this.ranks,t=this.roots,u=m[b],w=m[g];u<w?t[b]=g:w<u?t[g]=b:(t[g]=b,
++m[b])}}},{}],123:[function(a,g,m){g.exports=function(a,g,e){if(0===a.length)return a;if(g){e||a.sort(g);e=1;for(var b=a.length,k=a[0],m=a[0],y=1;y<b;++y)m=k,k=a[y],g(k,m)&&(y===e?e++:a[e++]=k);a.length=e;return a}e||a.sort();g=1;e=a.length;b=a[0];k=a[0];for(m=1;m<e;++m)k=b,b=a[m],b!==k&&(m===g?g++:a[g++]=b);a.length=g;return a}},{}],124:[function(a,g,m){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||p,g.context||e,g)};var t=a("./lib/vtext"),p=null,e=null;"undefined"!==
typeof document&&(p=document.createElement("canvas"),p.width=8192,p.height=1024,e=p.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,g,m){function t(a,b,e){for(var f=b.textAlign||"start",d=b.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],m=a.length,p=0;p<m;++p)for(var c=a[p],q=0;2>q;++q)g[q]=Math.min(g[q],c[q])|0,k[q]=Math.max(k[q],c[q])|0;var t=0;switch(f){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
f+"'");}var u=0;switch(d){case "hanging":case "top":u=-g[1];break;case "middle":u=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":u=-3*e;break;case "bottom":u=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+d+"'");}var w=1/e;"lineHeight"in b?w*=+b.lineHeight:"width"in b?w=b.width/(k[0]-g[0]):"height"in b&&(w=b.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+u)]})}function p(a,e,g,f){a=b(a,128);f=f?q(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(f.positions,e,g);a=f.edges;f="ccw"===e.orientation;y(g,a);if(e.polygons||e.polygon||e.polyline){e=w(a,g);a=Array(e.length);for(var d=0;d<e.length;++d){for(var k=e[d],m=Array(k.length),p=0;p<k.length;++p){for(var C=k[p],c=Array(C.length),x=0;x<C.length;++x)c[x]=g[C[x]].slice();f&&c.reverse();m[p]=c}a[d]=m}return a}return e.triangles||e.triangulate||e.triangle?{cells:u(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function e(a,b,e){try{return p(a,
b,e,!0)}catch(f){}try{return p(a,b,e,!1)}catch(f){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,b,g,f){var d=f.size||64;g.font=d+"px "+(f.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(a).width+2*d)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var m=3*d;b.height<m&&(b.height=m);
g.fillStyle="#000";g.fillRect(0,0,b.width,b.height);g.fillStyle="#fff";g.fillText(a,d,2*d);a=g.getImageData(0,0,l,m);l=k(a.data,[m,l,4]).pick(-1,-1,0).transpose(1,0);return e(l,f,d)};g.exports.processPixels=e;var b=a("surface-nets"),k=a("ndarray"),q=a("simplify-planar-graph"),y=a("clean-pslg"),u=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:61,"clean-pslg":66,ndarray:89,"planar-graph-to-polyline":95,"simplify-planar-graph":113,"surface-nets":117}],126:[function(a,g,m){g.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":70}],127:[function(a,g,m){g.exports=function(a,e){var b=[];e=+e||0;t(a.hi(a.shape[0]-1),b,e);return b};var t=a("./lib/zc-core")},{"./lib/zc-core":126}],128:[function(a,
g,m){var t=a("./lib/util/extend"),p=a("./lib/dynamic"),e=a("./lib/util/raf"),b=a("./lib/util/clock"),k=a("./lib/strings"),q=a("./lib/webgl"),y=a("./lib/extension"),u=a("./lib/limits"),w=a("./lib/buffer"),v=a("./lib/elements"),r=a("./lib/texture"),h=a("./lib/renderbuffer"),f=a("./lib/framebuffer"),d=a("./lib/attribute"),l=a("./lib/shader"),n=a("./lib/read"),z=a("./lib/core"),C=a("./lib/stats"),c=a("./lib/timer");g.exports=function(){function a(){ca=e.next(a);N.tick+=1;N.time=(b()-K)/1E3;P();for(var c=
0;c<ba.length;++c)(0,ba[c])(N,null,0);J.flush()}function g(a){}function m(a){}function A(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];p.isDynamic(e)?d[b]=p.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;m.length<a;)m.push(null);return m}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{}),g=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;
delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0};var d=R.compile(g,f,e,d,a),h=d.draw,k=d.batch,l=d.scope,m=[];return t(function(a,b){var d;if("function"===typeof a)return l.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)l.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)l.call(this,a[d],b,d);else return l.call(this,a,b,0);else if("number"===
typeof a){if(0<a)return k.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return k.call(this,a,a.length)}else return h.call(this,a)},{stats:a})}function B(){var a=aa.viewport,b=aa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.frameBufferWidth=N.drawingBufferWidth=a[2]=b[2]=J.drawingBufferWidth;N.viewportHeight=N.frameBufferWidth=N.drawingBufferHeight=a[3]=b[3]=J.drawingBufferHeight}function P(){B();R.procs.poll()}function F(){B();R.procs.refresh()}var D=q(Array.prototype.slice.call(arguments)),
J=D.gl,M=D.options,D=k(),I=C(),Q=y(J).extensions,G=c(J,Q),K=b(),O=J.drawingBufferWidth,L=J.drawingBufferHeight,N={tick:0,time:0,viewportWidth:O,viewportHeight:L,framebufferWidth:O,framebufferHeight:L,drawingBufferWidth:O,drawingBufferHeight:L,pixelRatio:M.pixelRatio},W=u(J,Q),Z=w(J,I),V=v(J,Q,Z,I),O=d(J,Q,W,Z,D),X=l(J,D,I),S=r(J,Q,W,P,N,I),U=h(J,Q,W,I),T=f(J,Q,W,S,U,I),L=n(J,P,N),R=z(J,D,Q,W,Z,V,S,T,{},O,X,{elements:null,primitive:4,count:-1,offset:0,instances:-1},N,G),aa=R.next,Y=J.canvas,ba=[],
ca=0;Y&&(Y.addEventListener("webglcontextlost",g,!1),Y.addEventListener("webglcontextrestored",m,!1));F();return t(A,{clear:function(a){var b=0;R.procs.poll();var c=a.color;c&&(J.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(J.clearDepth(+a.depth),b|=256);"stencil"in a&&(J.clearStencil(a.stencil|0),b|=1024);J.clear(b)},prop:p.define.bind(null,1),context:p.define.bind(null,2),"this":p.define.bind(null,3),draw:A({}),buffer:function(a){return Z.create(a,34962)},elements:V.create,
texture:S.create2D,cube:S.createCube,renderbuffer:U.create,framebuffer:T.create,framebufferCube:function(a){},attributes:J.getContextAttributes(),frame:function(b){ba.push(b);!ca&&0<ba.length&&a();return{cancel:function(){var c=ba.find(function(a){return a===b});0>c||(ba.splice(c,1),0>=ba.length&&ca&&(e.cancel(a),ca=0))}}},limits:W,hasExtension:function(a){return 0<=W.extensions.indexOf(a.toLowerCase())},read:L,destroy:function(){ca&&(e.cancel(a),ca=0);Y&&(Y.removeEventListener("webglcontextlost",
g),Y.removeEventListener("webglcontextrestored",m));X.clear();T.clear();U.clear();S.clear();V.clear();Z.clear();G&&G.clear();if(M.onDestroy)M.onDestroy()},_gl:J,_refresh:F,stats:I,updateTimer:function(){G.update()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,
"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);

        </script>
        </body>
      </html>