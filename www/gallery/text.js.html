<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,k=[];!(g=a.next()).done;)k.push(g.value);return k};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function k(){}k.prototype=g.prototype;a.prototype=new k;a.prototype.constructor=a;for(var m in g)if($jscomp.global.Object.defineProperties){var n=$jscomp.global.Object.getOwnPropertyDescriptor(g,m);n&&$jscomp.global.Object.defineProperty(a,m,n)}else a[m]=g[m]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var k=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m={},n=(m.next=function(){if(k<a.length){var b=k++;return{value:g(b,a[b]),done:!1}}n.next=$jscomp.array.done_;return $jscomp.array.done_()},m[Symbol.iterator]=function(){return n},m);return n};
$jscomp.array.findInternal_=function(a,g,k){a instanceof String&&(a=String(a));for(var m=a.length,n=0;n<m;n++){var b=a[n];if(g.call(k,b,n,a))return{i:n,v:b}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,k){g=void 0===g?function(b){return b}:g;var m=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var n;!(n=a.next()).done;)m.push(g.call(k,n.value))}else{n=a.length;for(var b=0;b<n;b++)m.push(g.call(k,a[b]))}return m};$jscomp.array.of=function(a){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,k){var m=this.length;a=Number(a);g=Number(g);k=Number(null!=k?k:m);if(a<g)for(k=Math.min(k,m);g<k;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(k=Math.min(k,m+g-a),a+=k-g;k>g;)--k in this?this[--a]=this[k]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,k){null!=k&&a.length||(k=this.length||0);k=Number(k);for(g=Number((void 0===g?0:g)||0);g<k;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var m=k.entries(),n=m.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=m.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!m.next().done?!1:!0}catch(b){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var k=this.maybeGetEntry_(a),m=k.id,n=k.list,k=k.entry;n||(n=this.data_[m]=[]);k?k.value=g:(k={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},n.push(k),this.head_.previous.next=k,this.head_.previous=k,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var k=g.list,m=g.index;return(g=g.entry)&&k?(k.splice(m,1),k.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),k=this.data_[g];if(k)for(var m=0;m<k.length;m++){var n=k[m];if(a!==a&&n.key!==n.key||a===n.key)return{id:g,list:k,index:m,entry:n}}return{id:g,list:k,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var k=$jscomp.makeIterator(this.entries()),m=k.next();!m.done;m=k.next())m=m.value,a.call(g,m[1],m[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,k=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m={};return m.next=function(){if(k){for(;k.head!=g.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:a(k)};k=null}return{done:!0,value:void 0}},m[Symbol.iterator]=function(){return this},m};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,k){Object.defineProperty(a,g,{value:String(k)})}:function(a,g,k){a[g]=String(k)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var k=a&65535,m=g&65535;return k*m+((a>>>16&65535)*m+k*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,k=1,m=a,n=0,b=1;n!=m;)g*=a,b*=-1,m=(n=m)+b*g/++k;return m}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,k=1,m=a,n=0;n!=m;)g*=a/++k,m=(n=m)+g;return m}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,k){for(var m=[],n=2;n<arguments.length;++n)m[n-2]=arguments[n];a=Number(a);g=Number(g);for(var b=Math.max(Math.abs(a),Math.abs(g)),f=$jscomp.makeIterator(m),n=f.next();!n.done;n=f.next())b=Math.max(b,Math.abs(n.value));if(1E100<b||1E-100>b){a/=b;g/=b;f=a*a+g*g;m=$jscomp.makeIterator(m);for(n=m.next();!n.done;n=m.next())n=n.value,n=Number(n)/b,f+=n*n;return Math.sqrt(f)*b}b=a*a+g*g;m=$jscomp.makeIterator(m);for(n=m.next();!n.done;n=m.next())n=n.value,n=Number(n),b+=
n*n;return Math.sqrt(b)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var k=[],m=1;m<arguments.length;++m)k[m-1]=arguments[m];k=$jscomp.makeIterator(k);for(m=k.next();!m.done;m=k.next())if(m=m.value)for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(a[n]=m[n]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),k=a.next();if(k.done||k.value[0]!=g||k.value[1]!=g)return!1;k=a.next();return k.done||k.value[0]==g||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var k=this;this.map_.forEach(function(m){return a.call(g,m,m,k)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];for(var k="",g=$jscomp.makeIterator(g),m=g.next();!m.done;m=g.next()){m=m.value;m=+m;if(0>m||1114111<m||m!==Math.floor(m))throw new RangeError("invalid_code_point "+m);65535>=m?k+=String.fromCharCode(m):(m-=65536,k+=String.fromCharCode(m>>>10&1023|55296),k+=String.fromCharCode(m&1023|56320))}return k};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var k="";a;)if(a&1&&(k+=g),a>>>=1)g+=g;return k};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),k=g.length;a=Number(a)||0;if(0<=a&&a<k){a|=0;var m=g.charCodeAt(a);if(55296>m||56319<m||a+1===k)return m;a=g.charCodeAt(a+1);return 56320>a||57343<a?m:1024*(m-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var k=this.toString();a+="";for(var m=k.length,n=a.length,b=Math.max(0,Math.min(g|0,k.length)),f=0;f<n&&b<m;)if(k[b++]!=a[f++])return!1;return f>=n};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var k=this.toString();a+="";void 0===g&&(g=k.length);for(var m=Math.max(0,Math.min(g|0,k.length)),n=a.length;0<n&&0<m;)if(k[--m]!=a[--n])return!1;return 0>=n};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,k,m){function n(f,h){if(!k[f]){if(!g[f]){var x="function"==typeof require&&require;if(!h&&x)return x(f,!0);if(b)return b(f,!0);x=Error("Cannot find module '"+f+"'");throw x.code="MODULE_NOT_FOUND",x;}x=k[f]={exports:{}};g[f][0].call(x.exports,function(b){var h=g[f][1][b];return n(h?h:b)},x,x.exports,e$$0,g,k,m)}return k[f].exports}for(var b="function"==typeof require&&require,f=0;f<m.length;f++)n(m[f]);return n})({1:[function(a,g,k){g=a("../regl")();k=a("vectorize-text");var m=a("gl-mat4/perspective"),
n=a("gl-mat4/lookAt");a=k("hello regl!",{textAlign:"center",textBaseline:"middle"});var b=g.texture({copy:!0,min:"linear",mag:"linear"}),f=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:g.buffer([-2,0,0,-2,2,2])},uniforms:{texture:b,t:function(b,f,a){return.001*a.count}},depth:{enable:!1},count:3}),l=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",
attributes:{position:g.buffer(a.positions)},elements:g.elements(a.edges),uniforms:{t:function(b,f,a){return.01*a.count},view:function(b,f,a){b=.01*a.count;return n([],[5*Math.sin(b),0,-5*Math.cos(b)],[0,0,0],[0,-1,0])},projection:function(b,f,a){return m([],Math.PI/4,a.width/a.height,.01,1E3)}},depth:{enable:!1}});g.frame(function(){f();l();b({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":80,"gl-mat4/perspective":81,"vectorize-text":124}],2:[function(a,g,k){function m(){this.pointer=
!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var n=a("./constants/dtypes.json"),b=a("./util/extend");b(m.prototype,{equals:function(b,a){return this.pointer?b.pointer&&this.buffer===b.buffer&&this.size===a&&this.normalized===b.normalized&&this.type===b.type&&this.offset===b.offset&&this.stride===b.stride&&this.divisor===b.divisor:!b.pointer&&this.x===b.x&&this.y===b.y&&this.z===b.z&&this.w===b.w},set:function(b,
a){(this.pointer=b.pointer)?(this.buffer=b.buffer,this.size=a,this.normalized=b.normalized,this.type=b.type,this.offset=b.offset,this.stride=b.stride,this.divisor=b.divisor):(this.x=b.x,this.y=b.y,this.z=b.z,this.w=b.w)}});g.exports=function(f,a,h,x,v){function t(b){for(var c=Array(16),e=0;16>e;++e)c[e]=new m;this.records=c;this.top=-1;this.name=b}function u(b){for(var c=b.records,e=b.top;c.length-1<=e;)c.push(new m);return c[++b.top]}var r={};h=h.maxAttributes;for(var e=Array(h),c=0;c<h;++c)e[c]=
new m;b(t.prototype,{pushVec:function(b,c,e,f){var a=u(this);a.pointer=!1;a.x=b;a.y=c;a.z=e;a.w=f},pushPtr:function(b,c,e,f,a,q,l){var h=u(this);h.pointer=!0;h.buffer=b;h.size=c;h.offset=e;h.stride=f;h.divisor=a;h.normalized=q;h.type=l},pushDyn:function(b){if("number"===typeof b)this.pushVec(b,0,0,0);else if(Array.isArray(b))this.pushVec(b[0],b[1],b[2],b[3]);else{var c=x.getBuffer(b),e=0,f=0,a=0,q=0,l=!1,h=5126;c?h=c.dtype:(c=x.getBuffer(b.buffer),e=b.size||0,f=b.stride||0,a=b.offset||0,q=b.divisor||
0,l=b.normalized||!1,h=c.dtype,"type"in b&&(h=n[b.type]));this.pushPtr(c,e,a,f,q,l,h)}},pop:function(){--this.top}});return{bindings:e,bind:function(b,c,e,h){e=e.records[e.top];h=e.size||h;if(!c.equals(e,h)){if(e.pointer){c.pointer||f.enableVertexAttribArray(b);c.buffer!==e.buffer&&e.buffer.bind();f.vertexAttribPointer(b,h,e.type,e.normalized,e.stride,e.offset);var r=a.angle_instanced_arrays;r&&r.vertexAttribDivisorANGLE(b,e.divisor)}else c.pointer&&f.disableVertexAttribArray(b),f.vertexAttrib4f(b,
e.x,e.y,e.z,e.w);c.set(e,h)}},def:function(b){var c=v.id(b),e=r[c];e||(e=r[c]=new t(b));return e}}}},{"./constants/dtypes.json":6,"./util/extend":24}],3:[function(a,g,k){function m(b,f){switch(b){case 5121:return new Uint8Array(f);case 5123:return new Uint16Array(f);case 5125:return new Uint32Array(f);case 5120:return new Int8Array(f);case 5122:return new Int16Array(f);case 5124:return new Int32Array(f);case 5126:return new Float32Array(f);default:return null}}var n=a("./util/is-typed-array"),b=a("./util/is-ndarray"),
f=a("./constants/arraytypes.json"),l=a("./constants/dtypes.json"),h=a("./util/values"),x={"static":35044,dynamic:35048,stream:35040};g.exports=function(a){function t(b,c){this.id=e++;this.buffer=b;this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function u(b){a.isBuffer(b.buffer)||(b.buffer=a.createBuffer());b.bind();a.bufferData(b.type,b.data||b.byteLength,b.usage)}function r(b){var e=b.buffer;a.isBuffer(e)&&a.deleteBuffer(e);b.buffer=null;delete c[b.id]}
var e=0,c={};t.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};return{create:function(d,e,h){function y(d){var c=d||{};if(Array.isArray(c)||n(c)||b(c))c={data:c};else if("number"===typeof c)c={length:c|0};else if(null===c||void 0===c)c={};q.usage="usage"in c?x[c.usage]:35044;d=0;"type"in c&&(d=l[c.type]);var e=c.dimension|0||1,p=0,a=null;if("data"in c)if(a=c.data,null===a)p=c.length|0;else{if(b(a)){var e=a.shape,p=a.stride,c=a.offset,h=0,w=0,r=0,v=0;1===e.length?(h=e[0],w=1,r=p[0],
v=0):2===e.length&&(h=e[0],w=e[1],r=p[0],v=p[1]);d=d||f[Object.prototype.toString.call(a)]|0||5126;for(var e=w,p=m(d,h*w),a=a.data,t=0,L=0;L<h;++L)for(var E=0;E<w;++E)p[t++]=a[r*L+v*E+c];a=p}else if(Array.isArray(a))if(0<a.length&&Array.isArray(a[0])){e=a[0].length;d=d||5126;c=m(d,a.length*e);p=a;a=e;for(h=v=0;h<p.length;++h)for(r=p[h],w=0;w<a;++w)c[v++]=r[w];a=c}else d=d||5126,a=m(d,a);else d=d||f[Object.prototype.toString.call(a)]|0;p=a.byteLength}else"length"in c&&(p=c.length|0);q.data=a;q.dtype=
d||5121;q.byteLength=p;q.dimension=e;u(q);return y}var E=a.createBuffer(),q=new t(E,e);c[q.id]=q;h||y(d);y._reglType="buffer";y._buffer=q;y.destroy=function(){r(q)};return y},clear:function(){h(c).forEach(r)},refresh:function(){h(c).forEach(u)},getBuffer:function(b){return b&&b._buffer instanceof t?b._buffer:null}}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":32}],4:[function(a,g,k){function m(b){switch(b){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function n(b,e,c,d){var f,a=",";switch(e){case 5126:f="1f";break;case 35664:f="2fv";break;case 35665:f="3fv";break;case 35666:f="4fv";break;case 35670:case 5124:f="1i";break;case 35671:case 35667:f="2iv";break;case 35672:case 35668:f="3iv";break;case 35673:case 35669:f="4iv";break;case 35674:f="Matrix2fv";a=",false,";break;case 35675:f="Matrix3fv";a=",false,";break;case 35676:f="Matrix4fv",a=",false,"}return b+
".uniform"+f+"("+c+a+d+");"}function b(b){return b+"["+b+".length-1]"}function f(b,e){return"framebuffer"===b||b<e?-1:b>e?1:0}var l=a("./util/codegen"),h=a("./constants/primitives.json"),x=a("./constants/dtypes.json"),v={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,
"src alpha saturate":776},t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},u={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};g.exports=function(a,e,c,d,p,w,y,E,q,z,D,G,A,g,k){function H(q,d,e,p,y){function J(b){var q=W[b];return q?q:q=W[b]=I(C[b])}function x(b){var q=b.id,d=ka[q];if(d)return d;d=b.func?
F.def(I(b.data),"(",ra,",",fa,",",ba,")"):F.def(ra,".",b.data);return ka[q]=d}function G(b,q){return b.find(function(b){return b.name===q})}function k(b){return la&&!(b in d||b in y)}var H=l(),I=H.link,F=H.proc("batch"),S=H.block(),O=F.def,Q=F.arg,U=I(a),da=I(q.program),ga=I(D.bind),ba=I(g),na=I(E),ja=I(A.count),ma=I(A.offset),qa=I(A.instances),ia=I(A.primitive),W={},V=I(w.elements),ja=O(b(ja)),ma=O(b(ma)),ia=O(b(ia)),V=O(b(V)),Z,ca,oa=c.angle_instanced_arrays;oa&&(Z=O(b(qa)),ca=I(oa));var la="elements"in
d,qa=Q(),Q=Q(),ra=O(),fa=O(),ka={};F(U,".useProgram(",da,");");q.uniforms.forEach(function(b){if(!(b.name in e)){var q=I(b.location),d=I(z.def(b.name)),d=d+"["+d+".length-1]";b=b.info.type;35678===b||35680===b?(b=O(d+"._texture"),F(n(U,5124,q,b+".bind()")),S(b,".unbind();")):F(n(U,b,q,d))}});q.attributes.forEach(function(b){if(!(p.name in p)){var q=I(D.def(b.name));F(ga,"(",b.location,",",I(D.bindings[b.location]),",",q,",",m(b.info.type),");")}});la||F("if(",V,"){",U,".bindBuffer(",34963,",",V,".buffer.buffer);",
"}else{",U,".bindBuffer(",34963,",null);","}");F("for(",fa,"=0;",fa,"<",qa,";++",fa,"){",ra,"=",Q,"[",fa,"];");Object.keys(d).sort(f).forEach(function(b){function q(b){F("if(",c,"){",U,".enable(",b,");}else{",U,".disable(",b,");}")}var c=x(d[b]);switch(b){case "framebuffer":b=J("viewport");var e=J("scissor.box");F("if(",na,".push(",c,"&&",c,"._framebuffer)){",na,".poll();",b,".setDirty();",e,".setDirty();","}");break;case "cull.enable":q(2884);break;case "blend.enable":q(3042);break;case "dither":q(3024);
break;case "stencil.enable":q(2960);break;case "depth.enable":q(2929);break;case "scissor.enable":q(3089);break;case "polygonOffset.enable":q(32823);break;case "sample.alpha":q(32926);break;case "sample.enable":q(32928);break;case "depth.mask":F(U,".depthMask(",c,");");break;case "depth.func":b=I(t);F(U,".depthFunc(",b,"[",c,"]);");break;case "depth.range":F(U,".depthRange(",c,"[0],",c,"[1]);");break;case "blend.color":F(U,".blendColor(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "blend.equation":b=
I(K);F("if(typeof ",c,'==="string"){',U,".blendEquation(",b,"[",c,"]);","}else{",U,".blendEquationSeparate(",b,"[",c,".rgb],",b,"[",c,".alpha]);","}");break;case "blend.func":b=I(v);F(U,".blendFuncSeparate(",b,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",b,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",b,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",b,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");break;case "stencil.mask":F(U,".stencilMask(",c,");");break;case "stencil.func":b=I(t);F(U,
".stencilFunc(",b,"[",c,'.cmp||"always"],',c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":e=I(u);F(U,".stencilOpSeparate(","stencil.opFront"===b?1028:1029,",",e,"[",c,'.fail||"keep"],',e,"[",c,'.zfail||"keep"],',e,"[",c,'.pass||"keep"]);');break;case "polygonOffset.offset":F(U,".polygonOffset(",c,".factor||0,",c,".units||0);");break;case "cull.face":F(U,".cullFace(",c,'==="front"?',1028,":",1029,");");break;case "lineWidth":F(U,".lineWidth(",c,");");
break;case "frontFace":F(U,".frontFace(",c,'==="cw"?',2304,":",2305,");");break;case "colorMask":F(U,".colorMask(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "sample.coverage":F(U,".sampleCoverage(",c,".value,",c,".invert);");break;case "scissor.box":case "viewport":b=J(b),F(b,".push(",c,".x||0,",c,".y||0,",c,".w||-1,",c,".h||-1);")}});("viewport"in d||"framebuffer"in d)&&F(J("viewport"),".poll();");("scissor.box"in d||"framebuffer"in d)&&F(J("scissor.box"),".poll();");"framebuffer"in d&&F(na,
".pop();");var sa=q.uniforms,pa=[];Object.keys(e).forEach(function(b){var q=G(sa,b);if(q){var c=q.info.type,d=I(q.location);b=x(e[b]);35678===q.info.type||35680===q.info.type?(q=O(b+"._texture"),pa.push(q),F(n(U,5124,d,q+".bind()"))):F(n(U,c,d,b))}});pa.forEach(function(b){F(b,".unbind();")});var ta=q.attributes;Object.keys(p).forEach(function(b){var q=G(ta,b);q&&F(ga,"(",q.location,",",I(b.bindings[q.location]),",",x(p[b]),",",m(q.info.type),");")});d.count?F(ja,"=",x(d.count),";"):k("count")||F("if(",
ja,"){");d.offset&&F(ma,"=",x(d.offset),";");d.primitive&&(q=I(h),F(ia,"=",q,"[",x(d.primitive),"];"));la&&(q=x(d.elements),F(V,"=",q,"?",q,"._elements:null;"));k("offset")&&F(ma,"=0;");F("if(",V,"){");k("count")&&F(ja,"=",V,".vertCount;","if(",ja,">0){");k("primitive")&&F(ia,"=",V,".primType;");la&&F(U,".bindBuffer(",34963,",",V,".buffer.buffer);");oa&&(d.instances&&F(Z,"=",x(d.instances),";"),F("if(",Z,">0){",ca,".drawElementsInstancedANGLE(",ia,",",ja,",",V,".type,",ma,",",Z,");}else{"));F(U,".drawElements(",
ia,",",ja,",",V,".type,",ma,");");oa&&F("}");k("count")&&F("}");F("}else{");k("count")||(k("primitive")&&F(ia,"=",4,";"),oa&&F("if(",Z,">0){",ca,".drawArraysInstancedANGLE(",ia,",",ma,",",ja,",",Z,");}else{"),F(U,".drawArrays(",ia,",",ma,",",ja,");}"),oa&&F("}"));F("}}",S);return H.compile().batch}var C=q.contextState,K={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(K.min=32775,K.max=32776);var J=0;return{draw:function(q){var d=l(),e=d.link,f=d.proc("draw"),p=f.def,h=e(a),
v=e(q.program),u=e(D.bind),y=e(A.count),t=e(A.offset),J=e(A.instances),x=e(A.primitive),G=e(w.elements),E=[];f(h,".useProgram(",v,");");q.attributes.forEach(function(b){var q=e(D.def(b.name));f(u,"(",b.location,",",e(D.bindings[b.location]),",",q,",",m(b.info.type),");")});q.uniforms.forEach(function(b){var q=e(b.location),c=e(z.def(b.name)),c=c+"["+c+".length-1]";b=b.info.type;35678===b||35680===b?(b=p(c+"._texture"),E.push(b),f(n(h,5124,q,b+".bind()"))):f(n(h,b,q,c))});E.forEach(function(b){f(b,
".unbind();")});q=p(b(x));y=p(b(y));t=p(b(t));G=p(b(G));f("if(",y,"){");(v=c.angle_instanced_arrays)?(J=p(b(J)),v=e(v),f("if(",G,"){",G,".bind();","if(",J,">0){",v,".drawElementsInstancedANGLE(",q,",",y,",",G,".type,",t,",",J,");}else{",h,".drawElements(",q,",",y,",",G,".type,",t,");}","}else if(",J,">0){",v,".drawArraysInstancedANGLE(",q,",",t,",",y,",",J,");}else{",h,".drawArrays(",q,",",t,",",y,");}}")):f("if(",G,"){",h,".drawElements(",q,",",y,",",G,".type,",t,");}","}else{",h,".drawArrays(",
q,",",t,",",y,");}");return d.compile().draw},command:function(b,q,c,d,a,r,n){function m(b){var q=ia[b];return q?q:q=ia[b]=F(C[b])}function y(b,q){var c=m(b);W(c,".push(",q,");");V(c,".pop();")}function Y(b){var q=b.id,c=ra[q];if(c)return c;c=b.func?Z.def(F(b.data),"(",la,",0,",oa,")"):Z.def(la,".",b.data);return ra[q]=c}var X=l(),F=X.link,S=X.block,O=X.proc,Q=J++,U=F(k);F(e);var da=F(G),ga=F(E),ba={count:F(A.count),offset:F(A.offset),instances:F(A.instances),primitive:F(A.primitive)},na=F(w.elements),
ja=F(h),ma=F(t),qa=F(u),ia={},W=S(),V=S();Object.keys(b).sort(f).forEach(function(q){var c=b[q];switch(q){case "frag":case "vert":c=e.id(c);G.shader("frag"===q?35632:35633,c);W(da,".",q,".push(",c,");");V(da,".",q,".pop();");break;case "framebuffer":E.getFramebuffer(c);q=m("viewport");var d=m("scissor.box");W("if(",ga,".push(",F(c&&c._framebuffer),")){",q,".setDirty();",d,".setDirty();","}");V("if(",ga,".pop()){",q,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":W(ba[q],
".push(",c,");");V(ba[q],".pop();");break;case "primitive":W(ba.primitive,".push(",h[c],");");V(ba.primitive,".pop();");break;case "elements":d=w.getElements(c);c=!("primitive"in b);q=!("count"in b);d?(d=F(d),W(na,".push(",d,");"),c&&W(ba.primitive,".push(",d,".primType);"),q&&W(ba.count,".push(",d,".vertCount);")):(W(na,".push(null);"),c&&W(ba.primitive,".push(",4,");"),q&&W(ba.count,".push(0);"));c&&V(ba.primitive,".pop();");q&&V(ba.count,".pop();");"offset"in b||(W(ba.offset,".push(0);"),V(ba.offset,
".pop();"));V(na,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":y(q,c);break;case "depth.func":y(q,t[c]);break;case "depth.range":q=m(q);W(q,".push(",c[0],",",c[1],");");V(q,".pop();");break;case "blend.func":q=m(q);W(q,".push(",v["srcRGB"in c?c.srcRGB:c.src],",",v["dstRGB"in c?c.dstRGB:c.dst],",",v["srcAlpha"in c?c.srcAlpha:
c.src],",",v["dstAlpha"in c?c.dstAlpha:c.dst],");");V(q,".pop();");break;case "blend.equation":q=m(q);"string"===typeof c?W(q,".push(",K[c],",",K[c],");"):"object"===typeof c&&W(q,".push(",K[c.rgb],",",K[c.alpha],");");V(q,".pop();");break;case "blend.color":q=m(q);W(q,".push(",c[0],",",c[1],",",c[2],",",c[3],");");V(q,".pop();");break;case "stencil.mask":q=m(q);W(q,".push(",c,");");V(q,".pop();");break;case "stencil.func":var d=c.cmp||"keep",f=c.ref||0,c="mask"in c?c.mask:-1;q=m(q);W(q,".push(",
t[d],",",f,",",c,");");V(q,".pop();");break;case "stencil.opFront":case "stencil.opBack":d=c.fail||"keep";f=c.zfail||"keep";c=c.pass||"keep";q=m(q);W(q,".push(",u[d],",",u[f],",",u[c],");");V(q,".pop();");break;case "polygonOffset.offset":d=c.factor||0;c=c.units||0;q=m(q);W(q,".push(",d,",",c,");");V(q,".pop();");break;case "cull.face":d=0;"front"===c?d=1028:"back"===c&&(d=1029);c=m(q);W(c,".push(",d,");");V(c,".pop();");break;case "lineWidth":y(q,c);break;case "frontFace":d=0;"cw"===c?d=2304:"ccw"===
c&&(d=2305);c=m(q);W(c,".push(",d,");");V(c,".pop();");break;case "colorMask":q=m(q);W(q,".push(",c.map(function(b){return!!b}).join(),");");V(q,".pop();");break;case "sample.coverage":d="value"in c?c.value:1;c=!!c.invert;q=m(q);W(q,".push(",d,",",c,");");V(q,".pop();");break;case "viewport":case "scissor.box":var d=c.x||0,f=c.y||0,p=-1,a=-1;"w"in c&&(p=c.w);"h"in c&&(a=c.h);c=m(q);W(c,".push(",d,",",f,",",p,",",a,");");V(c,".pop();")}});Object.keys(q).forEach(function(b){var c=F(z.def(b));b=q[b];
b="function"===typeof b&&b._reglType?F(b):Array.isArray(b)?F(b.slice()):+b;W(c,".push(",b,");");V(c,".pop();")});Object.keys(c).forEach(function(b){var q=F(D.def(b));b=c[b];if("number"===typeof b)W(q,".pushVec(",+b,",0,0,0);");else if(Array.isArray(b))W(q,".pushVec(",[b[0]||0,b[1]||0,b[2]||0,b[3]||0],");");else{var d=p.getBuffer(b),e=0,f=0,a=0,h=0,l=!1,w=5126;d?w=d.dtype:(d=p.getBuffer(b.buffer),e=b.size||0,f=b.stride||0,a=b.offset||0,h=b.divisor||0,l=b.normalized||!1,w=d.dtype,"type"in b&&(w=x[b.type]));
W(q,".pushPtr(",[F(d),e,a,f,h,l,w].join(),");")}V(q,".pop();")});var Z=X.block(),ca=X.block(),oa,la;n&&(oa=F(g),la=W.def());var ra={};Object.keys(d).sort(f).forEach(function(q){var c=Y(d[q]);switch(q){case "framebuffer":q=m("viewport");var e=m("scissor.box");Z("if(",ga,".push(",c,"&&",c,"._framebuffer)){",q,".setDirty();",e,".setDirty();","}");ca("if(",ga,".pop()){",q,".setDirty();",e,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":q=
m(q);Z(q,".push(",c,");");ca(q,".pop();");break;case "count":case "offset":case "instances":q=ba[q];Z(q,".push(",c,");");ca(q,".pop();");break;case "primitive":q=ba.primitive;Z(q,".push(",ja,"[",c,"]);");ca(q,".pop();");break;case "depth.func":q=m(q);Z(q,".push(",ma,"[",c,"]);");ca(q,".pop();");break;case "blend.func":q=m(q);e=F(v);Z(q,".push(",e,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",e,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",e,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",e,'["dstAlpha" in ',
c,"?",c,".dstAlpha:",c,".dst]);");ca(q,".pop();");break;case "blend.equation":q=m(q);e=F(K);Z("if(typeof ",c,'==="string"){',q,".push(",e,"[",c,"],",e,"[",c,"]);","}else{",q,".push(",e,"[",c,".rgb],",e,"[",c,".alpha]);","}");ca(q,".pop();");break;case "blend.color":q=m(q);Z(q,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ca(q,".pop();");break;case "stencil.mask":q=m(q);Z(q,".push(",c,");");ca(q,".pop();");break;case "stencil.func":q=m(q);Z(q,".push(",ma,"[",c,".cmp],",c,".ref|0,",'"mask" in ',c,
"?",c,".mask:-1);");ca(q,".pop();");break;case "stencil.opFront":case "stencil.opBack":q=m(q);Z(q,".push(",qa,"[",c,'.fail||"keep"],',qa,"[",c,'.zfail||"keep"],',qa,"[",c,'.pass||"keep"]);');ca(q,".pop();");break;case "polygonOffset.offset":q=m(q);Z(q,".push(",c,".factor||0,",c,".units||0);");ca(q,".pop();");break;case "cull.face":q=m(q);Z(q,".push(",c,'==="front"?',1028,":",1029,");");ca(q,".pop();");break;case "frontFace":q=m(q);Z(q,".push(",c,'==="cw"?',2304,":",2305,");");ca(q,".pop();");break;
case "colorMask":q=m(q);Z(q,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ca(q,".pop();");break;case "sample.coverage":q=m(q);Z(q,".push(",c,".value,",c,".invert);");ca(q,".pop();");break;case "scissor.box":case "viewport":q=m(q);Z(q,".push(",c,".x||0,",c,".y||0,",'"w" in ',c,"?",c,".w:-1,",'"h" in ',c,"?",c,".h:-1);");ca(q,".pop();");break;case "elements":q=!("primitive"in d)&&!("primitive"in b);var e=!("count"in d)&&!("count"in b),f=!("offset"in d)&&!("offset"in b),p=Z.def();Z("if(",c,"){",p,"=",
c,"._elements;",na,".push(",p,");",q?ba.primitive+".push("+p+".primType);":"",e?ba.count+".push("+p+".vertCount);":"",f?ba.offset+".push("+p+".offset);":"","}else{",na,".push(null);","}");ca(na,".pop();","if(",c,"){",q?ba.primitive+".pop();":"",e?ba.count+".pop();":"",f?ba.offset+".pop();":"","}")}});Object.keys(a).forEach(function(b){var q=F(z.def(b));b=Y(a[b]);Z(q,".push(",b,");");ca(q,".pop();")});Object.keys(r).forEach(function(b){var q=F(D.def(b));b=Y(r[b]);Z(q,".pushDyn(",b,");");ca(q,".pop();")});
var fa=O("scope"),ka=fa.arg(),sa=fa.arg();fa(W);n&&fa(la,"=",ka,";",Z);fa(sa,"();",n?ca:"",V);fa=S();S=fa.def();b.frag&&b.vert?(ka=b.frag,fa(S,"=",F(G.program(e.id(b.vert),e.id(ka))),";")):fa(S,"=",da,".program","(",da,".vert[",da,".vert.length-1]",",",da,".frag[",da,".frag.length-1]",");");ka=O("draw");ka(W,fa);n&&ka(la,"=",ka.arg(),";",Z);ka(U,"();","if(",S,")",S,".draw(",n?la:"",");",n?ca:"",V);var pa=O("batch");pa(W,fa);n=F(function(q,c,e){var f=q.batchCache[Q];f||(f=q.batchCache[Q]=H(q,d,a,r,
b));return f(c,e)});pa("if(",S,"){",U,"();",n,"(",S,",",pa.arg(),",",pa.arg(),");");Object.keys(d).forEach(function(b){(b=ia[b])&&pa(b,".setDirty();")});pa("}",V);return X.compile()}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/codegen":23}],5:[function(a,g,k){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(a,g,k){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],7:[function(a,g,k){g.exports={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(a,g,k){function m(f,a){function h(){var a=window.innerWidth,e=window.innerHeight;f!==document.body&&(e=f.getBoundingClientRect(),a=e.right-e.left,e=e.top-e.bottom);m.width=t*a;m.height=
t*e;b(m.style,{width:a+"px",height:e+"px"})}var m=document.createElement("canvas"),v=n(m,a);b(m.style,{border:0,margin:0,padding:0,top:0,left:0});f.appendChild(m);f===document.body&&(m.style.position="absolute",b(f.style,{margin:0,padding:0}));var t=+v.options.pixelRatio;window.addEventListener("resize",h,!1);var u=v.options.onDestroy;v.options=b(b({},v.options),{onDestroy:function(){window.removeEventListener("resize",h);f.removeChild(m);u&&u()}});h();return v}function n(f,a){function h(b){try{return f.getContext(b,
m)}catch(a){return null}}var m=a.glOptions||{};return{gl:h("webgl")||h("experimental-webgl")||h("webgl-experimental"),options:b({pixelRatio:window.devicePixelRatio},a)}}var b=a("./util/extend");g.exports=function(f){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:f[0],options:f[1]||{}};var a=document.body,h=f[1]||{};if("string"===typeof f[0])a=document.querySelector(f[0])||document.body;else if("object"===typeof f[0])if(f[0]instanceof HTMLElement)a=f[0];else{if(f[0]instanceof
WebGLRenderingContext)return{gl:f[0],options:b({pixelRatio:1},h)};h=f[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?n(a,h):m(a,h)}},{"./util/extend":24}],9:[function(a,g,k){g.exports=function(a){return{primitive:[4],count:[0],offset:[0],instances:[0]}}},{}],10:[function(a,g,k){function m(f,a){this.id=b++;this.func=f;this.data=a}function n(b,a){switch(typeof b){case "boolean":case "number":case "string":return new m(!1,b);case "function":return new m(!0,b);default:return n}}var b=0;g.exports=
{define:n,isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof m},unbox:function(b,a){return b instanceof m?b:"function"===typeof b&&b!==n?new m(!0,b):new m(!1,a)}}},{}],11:[function(a,g,k){var m=a("./util/is-typed-array"),n=a("./util/is-ndarray"),b=a("./constants/primitives.json");g.exports=function(f,a,h){function x(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}x.prototype.bind=function(){this.buffer.bind()};return{create:function(f){function t(e){var c=
a.oes_element_index_uint;if(e)if("number"===typeof e)r(e);else{var d=null,f="static",h=0;Array.isArray(e)||m(e)||n(e)?d=e:("data"in e&&(d=e.data),"usage"in e&&(f=e.usage),"length"in e&&(h=e.length));Array.isArray(d)||n(d)&&"array"===d.dtype||"type"in e?r({type:e.type||(c?"uint32":"uint16"),usage:f,data:d,length:h}):r({usage:f,data:d,length:h});if(Array.isArray(d)||m(d))r.dimension=3}else r();c=u.buffer.byteLength;d=0;switch(u.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;
c>>=1;break;case 5125:case 5124:d=5125,c>>=2}f=4;h=u.buffer.dimension;1===h&&(f=0);2===h&&(f=1);3===h&&(f=4);"object"===typeof e&&("primitive"in e&&(f=b[e.primitive]),"count"in e&&(c=e.vertCount|0));u.primType=f;u.vertCount=c;u.type=d;return t}var u=new x,r=h.create(null,34963,!0);u.buffer=r._buffer;t(f);t._reglType="elements";t._elements=u;t.destroy=function(){r.destroy();u.buffer=null};return t},elements:[null],getElements:function(b){return b&&b._elements instanceof x?b._elements:null}}}},{"./constants/primitives.json":7,
"./util/is-ndarray":25,"./util/is-typed-array":26}],12:[function(a,g,k){g.exports=function(a){function n(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(f){try{b[f]=
a.getExtension(f)}catch(l){}})}var b={};n();return{extensions:b,refresh:n}}},{}],13:[function(a,g,k){var m=a("./util/values"),n=a("./util/extend"),b=[1029];g.exports=function(f,a,h,x,v){function t(b,q,c,d){this.target=b;this.level=q;this.texture=c;this.renderbuffer=d}function u(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function r(b,q){var c=q.width,d=q.height;if(b.texture)var e=b.texture._texture,f=Math.max(1,e.params.width>>b.level),a=Math.max(1,
e.params.height>>b.level),c=c||f,d=d||a;else e=b.renderbuffer._renderbuffer,c=c||e.width,d=d||e.height;e.refCount+=1;q.width=c;q.height=d}function e(b,q){q?q.texture?f.framebufferTexture2D(36160,b,q.target,q.texture._texture.texture,q.level):f.framebufferRenderbuffer(36160,b,36161,q.renderbuffer._renderbuffer.renderbuffer):f.framebufferTexture2D(36160,b,3553,null,0)}function c(b){var q=3553,c=0,d=null,e=null;"object"===typeof b&&("level"in b&&(c=b.level|0),"target"in b&&(q=b.target|0));var f=b._reglType;
"texture"===f?d=b:"renderbuffer"===f&&(e=b,q=36161,c=0);return new t(q,c,d,e)}function d(b){return b&&(b.texture||b.renderbuffer)}function p(){this.id=g++;k[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function w(b){f.isFramebuffer(b.framebuffer)||(b.framebuffer=f.createFramebuffer());C=!0;f.bindFramebuffer(36160,b.framebuffer);for(var q=b.colorAttachments,
c=0;c<q.length;++c)e(36064+c,q[c]);for(c=q.length;c<h.maxColorAttachments;++c)e(36064+c,null);e(36096,b.depthAttachment);e(36128,b.stencilAttachment);e(33306,b.depthStencilAttachment);a.webgl_draw_buffers&&a.webgl_draw_buffers.drawBuffersWEBGL(A[q.length]);f.checkFramebufferStatus(36160)}function y(b){b=b.framebuffer;f.isFramebuffer(b)&&f.deleteFramebuffer(b)}function E(){return H[H.length-1]}var q={rgba:6408},z={rgba4:32854,rgb565:36194,"rgb5 a1":32855};a.ext_srgb&&(z.srgba=35907);a.ext_color_buffer_half_float&&
(z.rgba16f=34842,z.rgb16f=34843);a.webgl_color_buffer_float&&(z.rgba32f=34836);var D=[],G=[];a.webgl_depth_texture&&(D.push(6402),G.push(34041));n(n({},q),z);m(q);m(z);z=5121;D={uint8:5121};a.oes_texture_half_float&&(z=D["half float"]=36193);a.oes_texture_float&&(z=D["float"]=5126);D.best=z;var A=function(){for(var b=Array(h.maxDrawbuffers),q=0;q<=h.maxDrawbuffers;++q)for(var c=b[q]=Array(q),d=0;d<q;++d)c[d]=36064+d;return b}(),g=0,k={},H=[null],C=!0;return{top:E,dirty:function(){return C},push:function(b){b=
b||null;C=C||b!==E();H.push(b);return C},pop:function(){var b=E();H.pop();return C=C||b!==E()},getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof p)?b:null},poll:function(){if(C){var q=H[H.length-1],c=a.webgl_draw_buffers;q?(f.bindFramebuffer(36160,q.framebuffer),c&&c.drawBuffersWEBGL(A[q.colorAttachments.length])):(f.bindFramebuffer(36160,null),c&&c.drawBuffersWEBGL(b));C=!1}},create:function(b){function e(b){var p,h=b||{},l=b=0;if("shape"in
h){var z=h.shape;b=z[0];l=z[1]}else"radius"in h&&(b=l=h.radius),"width"in h&&(b=h.width),"height"in h&&(l=h.height);var m=null,z=!1;if("colorBuffers"in h||"colorBuffer"in h){m=h.colorBuffers||h.colorBuffer;Array.isArray(m)||(m=[m]);a.width=b;a.height=l;m=m.map(c);for(p=0;p<m.length;++p)r(m[p],a);b=a.width;l=a.height}else{var n=!0,y="rgba",D="uint8",A=1,z=!0;a.width=b=b||f.drawingBufferWidth;a.height=l=l||f.drawingBufferHeight;"format"in h&&(y=h.format,n=y in q);"type"in h&&(D=h.type);"colorCount"in
h&&(A=h.colorCount|0);if(a.ownsColor)for(m=a.colorAttachments;m.length>A;)u(m.pop());else m=[];for(p=0;p<m.length;++p){var G;a:{G=m[p];var E=n,g=y,B=b,k=l;if(G.texture){var C=G.texture;if(E){C({format:g,type:D,width:B,height:k});C._texture.refCount+=1;G=!0;break a}}else if(C=G.renderbuffer,!E){C({format:g,width:B,height:k});C._renderbuffer.refCount+=1;G=!0;break a}u(G);G=!1}G||(m[p--]=m[m.length-1],m.pop())}for(;m.length<A;)n?m.push(new t(3553,0,x.create({format:y,type:D,width:b,height:l},3553),null)):
m.push(new t(36161,0,null,v.create({format:y,width:b,height:l})))}a.width=b;a.height=l;y=n=p=null;D=!1;"depthBuffer"in h&&(p=c(h.depthBuffer));"stencilBuffer"in h&&(n=c(h.stencilBuffer));"depthStencilBuffer"in h&&(y=c(h.depthStencilBuffer));if(p||n||y)r(p||n||y,a);else if(A=!0,E=G=!1,"depth"in h&&(A=!!h.depth),"stencil"in h&&(G=!!h.stencil),"depthTexture"in h&&(E=!!h.depthTexture),h=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,g=null,A||G)D=!0,E?(E=G?"depth stencil":"depth",a.ownsDepthStencil&&
h.texture?(h.texture({format:E,width:b,height:l}),h.texture._texture.refCount+=1,g=h):g=new t(3553,0,x.create({format:E,width:b,height:l},3553),null)):(E=A?G?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&h.renderbuffer?(h.renderbuffer({format:E,width:b,height:l}),h.renderbuffer._renderbuffer.refCount+=1,g=h):g=new t(36161,0,null,v.create({format:E,width:b,height:l}))),A?G?y=g:p=g:n=g;b=a;b.colorAttachments.forEach(u);u(b.depthAttachment);u(b.stencilAttachment);u(b.depthStencilAttachment);
a.colorAttachments=m;a.depthAttachment=p;a.stencilAttachment=n;a.depthStencilAttachment=y;a.ownsColor=z;a.ownsDepthStencil=D;e.color=m.map(d);e.depth=d(p);e.stencil=d(n);e.depthStencil=d(y);w(a);e.width=a.width;e.height=a.height;return e}var a=new p;e(b);e._reglType="framebuffer";e._framebuffer=a;e._destroy=function(){y(a)};return e},clear:function(){m(k).forEach(y)},refresh:function(){m(k).forEach(w)}}}},{"./util/extend":24,"./util/values":32}],14:[function(a,g,k){g.exports=function(a,n){var b=1;
n.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));var f=1,l=1;n.webgl_draw_buffers&&(f=a.getParameter(34852),l=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(n).filter(function(b){return!!n[b]}),maxAnisotropic:b,maxDrawbuffers:f,maxColorAttachments:l,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),
maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),
version:a.getParameter(7938)}}},{}],15:[function(a,g,k){var m=a("./util/is-typed-array");g.exports=function(a,b,f){return function(l){var h=l||{};m(l)?h={data:h}:2===arguments.length?h={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof l&&(h={});b();var x=h.x||0,v=h.y||0,t=h.width||f.width,u=h.height||f.height,h=h.data||new Uint8Array(t*u*4);a.pixelStorei(3333,4);a.readPixels(x,v,t,u,6408,5121,h);return h}}},{"./util/is-typed-array":26}],16:[function(a,g,k){var m=a("./util/values");g.exports=
function(a,b,f){function l(){this.id=t++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function h(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function x(b){var e=b.renderbuffer;a.bindRenderbuffer(36161,null);a.isRenderbuffer(e)&&a.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete u[b.id]}var v={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(v.srgba=35907);b.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);b.webgl_color_buffer_float&&(v.rgba32f=34836);var t=0,u={};l.prototype.decRef=function(){0===--this.refCount&&x(this)};return{create:function(b){function e(b){b=b||{};var a=0,f=0;"shape"in b?(f=b.shape,a=f[0]|0,f=f[1]|0):("radius"in b&&(a=f=b.radius|0),"width"in b&&(a=b.width|0),"height"in b&&(f=b.height|0));e.width=c.width=Math.max(a,1);e.height=c.height=Math.max(f,
1);c.format=32854;"format"in b&&(c.format=v[b.format]);h(c);return e}var c=new l;u[c.id]=c;e(b);e._reglType="renderbuffer";e._renderbuffer=c;e.destroy=function(){c.decRef()};return e},refresh:function(){m(u).forEach(h)},clear:function(){m(u).forEach(x)}}}},{"./util/values":32}],17:[function(a,g,k){function m(b,a,l,h){this.name=b;this.id=a;this.location=l;this.info=h}var n=a("./util/values");g.exports=function(b,a,l,h,x){function v(c,d){var a=35632===c?r:e,f=a[d];if(!f){var q=x.str(d),f=b.createShader(c);
b.shaderSource(f,q);b.compileShader(f);a[d]=f}return f}function t(b,c){this.fragId=b;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function u(c){var d,e;d=v(35632,c.fragId);e=v(35633,c.vertId);var r=c.program=b.createProgram();b.attachShader(r,d);b.attachShader(r,e);b.linkProgram(r);var q=b.getProgramParameter(r,35718),z=c.uniforms=[];for(d=0;d<q;++d)if(e=b.getActiveUniform(r,d))if(1<e.size)for(var n=0;n<e.size;++n){var u=e.name.replace("[0]",
"["+n+"]");l.def(u);z.push(new m(u,x.id(u),b.getUniformLocation(r,u),e))}else l.def(e.name),z.push(new m(e.name,x.id(e.name),b.getUniformLocation(r,e.name),e));q=b.getProgramParameter(r,35721);z=c.attributes=[];for(d=0;d<q;++d)if(e=b.getActiveAttrib(r,d))a.def(e.name),z.push(new m(e.name,x.id(e.name),b.getAttribLocation(r,e.name),e));c.draw=h(c);c.batchCache={}}var r={},e={},c={},d=[];return{clear:function(){var a=b.deleteShader.bind(b);n(r).forEach(a);r={};n(e).forEach(a);e={};d.forEach(function(c){b.deleteProgram(c.program)});
d.length=0;c={}},refresh:function(){r={};e={};d.forEach(u)},program:function(b,e){var a=c[e];a||(a=c[e]={});var f=a[b];f||(f=new t(e,b),u(f),a[b]=f,d.push(f));return f},shader:v,frag:[-1],vert:[-1]}}},{"./util/values":32}],18:[function(a,g,k){var m=a("./util/stack"),n=a("./util/codegen");g.exports=function(b,a,l){function h(e,c){var d=m([!!c],function(c){c?b.enable(e):b.disable(e)});d.flag=e;return d}var x={dither:h(3024),"blend.enable":h(3042),"blend.color":m([0,0,0,0],function(e,c,d,a){b.blendColor(e,
c,d,a)}),"blend.equation":m([32774,32774],function(e,c){b.blendEquationSeparate(e,c)}),"blend.func":m([1,0,1,0],function(e,c,d,a){b.blendFuncSeparate(e,c,d,a)}),"depth.enable":h(2929,!0),"depth.func":m([513],function(e){b.depthFunc(e)}),"depth.range":m([0,1],function(e,c){b.depthRange(e,c)}),"depth.mask":m([!0],function(e){b.depthMask(e)}),"cull.enable":h(2884),"cull.face":m([1029],function(e){b.cullFace(e)}),frontFace:m([2305],function(e){b.frontFace(e)}),colorMask:m([!0,!0,!0,!0],function(e,c,d,
a){b.colorMask(e,c,d,a)}),lineWidth:m([1],function(e){b.lineWidth(e)}),"polygonOffset.enable":h(32823),"polygonOffset.offset":m([0,0],function(e,c){b.polygonOffset(e,c)}),"sample.alpha":h(32926),"sample.enable":h(32928),"sample.coverage":m([1,!1],function(e,c){b.sampleCoverage(e,c)}),"stencil.enable":h(2960),"stencil.mask":m([-1],function(e){b.stencilMask(e)}),"stencil.func":m([519,0,-1],function(e,c,d){b.stencilFunc(e,c,d)}),"stencil.opFront":m([7680,7680,7680],function(e,c,d){b.stencilOpSeparate(1028,
e,c,d)}),"stencil.opBack":m([7680,7680,7680],function(e,c,d){b.stencilOpSeparate(1029,e,c,d)}),"scissor.enable":h(3089),"scissor.box":m([0,0,-1,-1],function(e,c,d,p){var h=d,l=a.top();0>d&&(h=l?l.width-e:b.drawingBufferWidth-e);d=p;0>p&&(d=l?l.height-c:b.drawingBufferHeight-c);b.scissor(e,c,h,d)}),viewport:m([0,0,-1,-1],function(e,c,d,p){var h=d,r=a.top();0>d&&(h=r?r.width-e:b.drawingBufferWidth-e);d=p;0>p&&(d=r?r.height-c:b.drawingBufferHeight-c);b.viewport(e,c,h,d);l.width=h;l.height=d})},v=n(),
t=v.proc("poll"),u=v.proc("refresh");Object.keys(x).forEach(function(b){b=v.link(x[b]);t(b,".poll();");u(b,".setDirty();")});var r=v.compile();return{contextState:x,viewport:l,poll:r.poll,refresh:r.refresh,notifyViewportChanged:function(){x.viewport.setDirty();x["scissor.box"].setDirty()}}}},{"./util/codegen":23,"./util/stack":30}],19:[function(a,g,k){g.exports=function(){var a={"":0},n=[""];return{id:function(b){var f=a[b];if(f)return f;f=a[b]=n.length;n.push(b);return f},str:function(b){return n[b]}}}},
{}],20:[function(a,g,k){function m(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function n(b){if(!Array.isArray(b))return!1;var c=b.length;if(0===c||!Array.isArray(b[0]))return!1;for(var e=b[0].length,a=1;a<c;++a)if(!Array.isArray(b[a])||b[a].length!==e)return!1;return!0}function b(b){return Object.prototype.toString.call(b)}function f(c){return"[object HTMLCanvasElement]"===b(c)}function l(c){return"[object CanvasRenderingContext2D]"===b(c)}var h=a("./util/extend"),x=a("./util/values"),
v=a("./util/is-typed-array"),t=a("./util/is-ndarray"),u=a("./util/load-texture"),r=a("./util/to-half-float"),e=a("./util/parse-dds"),c=[9984,9986,9985,9987];g.exports=function(d,a,w,y,E){function q(b){this.target=b;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=
this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function z(b){this.target=b;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function D(b,q){var d,e,a=0,f=0,p=0,h=0,l=0,z=0,w=!1,r=!1,n=!1;for(d=0;d<q.length;++d)e=q[d],h=h||e.width<<e.miplevel,l=l||e.height<<e.miplevel,a=a||e.type,f=f||e.format,p=p||e.internalformat,
z=z||e.channels,w=w||e.needsPoll,r=r||e.needsListeners,e=e.miplevel,n=n||0<e;b.needsPoll=w;b.needsListeners=r;b.width=h;b.height=l;b.format=f;b.internalformat=p;b.type=a;if(3553!==b.target)for(d=0;6>d;++d);d=0<=c.indexOf(b.minFilter);b.genMipmaps=!n&&(b.genMipmaps||d);n=n||b.genMipmaps;b.minFilter||(b.minFilter=n?9987:9728);b.wrapS=b.wrapS||33071;b.wrapT=b.wrapT||33071;for(d=0;d<q.length;++d)e=q[d],e.channels||(e.channels=z),e.format||(e.format=f),e.internalformat||(e.internalformat=p),e.type||(e.type=
a)}function G(b){this.id=X++;this.refCount=1;this.target=b;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new z(b);this.pixels=[]}function A(b,c){function d(b,e){var a=e.mipmap,p;if(Array.isArray(a))for(var h=0;h<a.length;++h)p=new q(b),p.parseFlags(c),p.parseFlags(e),p.parse(a[h],h),f.push(p);else p=new q(b),p.parseFlags(c),p.parse(e,0),f.push(p)}var e;H(b);var a=b.params;z.call(a,b.target);var f=b.pixels;f.length=0;a.parse(c);if(3553===b.target)d(3553,
c);else{var p=c.faces||c;if(Array.isArray(p))for(e=0;6>e;++e)d(34069+e,p[e]);else if("string"!==typeof p)for(e=0;6>e;++e)d(34069+e,{})}D(a,f);a.needsListeners&&k(b);a.needsPoll&&(b.pollId=S.length,S.push(b));g(b)}function g(b){d.isTexture(b.texture)||(b.texture=d.createTexture());var q=b.target,c=b.unit;0<=c?(d.activeTexture(33984+c),Y=c):d.bindTexture(q,b.texture);for(var q=b.pixels,e=b.params,a=0;a<q.length;++a)q[a].upload(e);e.upload();0>c&&((c=Q[Y])?d.bindTexture(c.target,c.texture):(b.unit=Y,
Q[Y]=b))}function k(b){function c(b,d,a){var p=e(a);p.pixels.forEach(function(c){var e=new q(p.cube?c.target:b);e.channels=p.channels;e.compressed=p.compressed;e.type=p.type;e.internalformat=p.format;e.format=ea[p.format];e.width=c.width;e.height=c.height;e.miplevel=c.miplevel||d;e.data=c.data;f.push(e)})}function d(){for(var q=0;q<f.length;++q){var e=f[q],p=e.image,h=e.video,l=e.xhr;p&&p.complete?(e.width=p.naturalWidth,e.height=p.naturalHeight):h&&2<h.readyState?(e.width=h.width,e.height=h.height):
l&&4===l.readyState&&(f[q]=f[f.length-1],f.pop(),l.removeEventListener("readystatechange",g),c(e.target,e.miplevel,l.response))}D(a,f);g(b)}var a=b.params,f=b.pixels;f.forEach(function(b){b.image&&!b.image.complete?b.image.addEventListener("load",d):b.video&&1>b.readyState?b.video.addEventListener("progress",d):b.xhr&&b.xhr.addEventListener("readystatechange",d)});b.cancelPending=function(){f.forEach(function(b){b.image?b.image.removeEventListener("load",d):b.video?b.video.removeEventListener("progress",
d):b.xhr&&(b.xhr.removeEventListener("readystatechange",d),b.xhr.abort())})}}function H(b){var q=b.cancelPending;q&&(q(),b.cancelPending=null);q=b.pollId;0<=q&&((S[q]=S[S.length-1]).id=q,S.pop(),b.pollId=-1)}function C(b){var q=b.texture,c=b.unit,e=b.target;0<=c&&(d.activeTexture(33984+c),Y=c,d.bindTexture(e,null),Q[c]=null);H(b);d.isTexture(q)&&d.deleteTexture(q);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete F[b.id]}var K={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
J={repeat:10497,clamp:33071,mirror:33648},L={nearest:9728,linear:9729},T=h({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},L),M={none:0,browser:37444},N={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},P={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},R={};a.ext_srgb&&(P.srgb=35904,P.srgba=35906);a.oes_texture_float&&(N["float"]=5126);a.oes_texture_half_float&&
(N["half float"]=36193);a.webgl_depth_texture&&(h(P,{depth:6402,"depth stencil":34041}),h(N,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&h(R,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&h(R,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&h(R,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(R["rgb etc1"]=36196);var aa=Array.prototype.slice.call(d.getParameter(34467));Object.keys(R).forEach(function(b){var q=R[b];0<=aa.indexOf(q)&&(P[b]=q)});var ha=Object.keys(P);w.textureFormats=ha;var ea=ha.reduce(function(b,q){var c=P[q];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?b[c]=c:32855===c||0<=q.indexOf("rgba")?b[c]=6408:b[c]=6407;return b},{});h(q.prototype,{parseFlags:function(b){if("object"===typeof b&&b){"premultiplyAlpha"in
b&&(this.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(this.flipY=b.flipY);"alignment"in b&&(this.unpackAlignment=b.alignment);"colorSpace"in b&&(this.colorSpace=M[b.colorSpace]);if("format"in b){var q=b.format;this.internalformat=P[q];q in N&&(this.type=N[q]);q in R&&(this.compressed=!0)}"type"in b&&(this.type=N[b.type]);var q=this.width,c=this.height,d=this.channels;"shape"in b?(q=b.shape[0],c=b.shape[1],3===b.shape.length&&(d=b.shape[2])):("radius"in b&&(q=c=b.radius),"width"in b&&(q=b.width),
"height"in b&&(c=b.height),"channels"in b&&(d=b.channels));this.width=q|0;this.height=c|0;this.channels=d|0;"stride"in b?(q=b.stride,this.strideX=q[0],this.strideY=q[1],this.strideC=3===q.length?q[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*q);"offset"in b&&(this.offset=b.offset|0,this.needsTranspose=!0);"crossOrigin"in b&&(this.crossOrigin=b.crossOrigin)}},parse:function(q,c){this.miplevel=c;this.width>>=c;this.height>>=c;var d=q;switch(typeof q){case "object":if(!q)return;
this.parseFlags(q);var e=q.data;if("string"===typeof e||e&&(v(e)||m(e)||t(e)||f(e)||l(e)||"[object HTMLImageElement]"===b(e)||"[object HTMLVideoElement]"===b(e)||n(e)))d=q.data;break;case "undefined":return}"string"===typeof d&&(d=u(d,this.crossOrigin));var e=null,a=!1;if(null!==d)if(v(d))this.data=d;else if(m(d))e=d,a=!0;else if(t(d)){Array.isArray(d.data)?(e=d.data,a=!0):this.data=d.data;var p=d.shape;this.width=p[0];this.height=p[1];this.channels=3===p.length?p[2]:1;p=d.stride;this.strideX=d.stride[0];
this.strideY=d.stride[1];this.strideC=3===p.length?d.stride[2]:1;this.offset=d.offset;this.needsTranspose=!0}else if(f(d)||l(d))f(d)?this.canvas=d:this.canvas=d.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===b(d))this.image=d,d.complete?(this.width=d.naturalWidth,this.height=d.naturalHeight):(this.width=this.width||d.naturalWidth,this.height=this.height||d.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===b(d))this.video=d,1<d.readyState?(this.width=d.width,this.height=d.height):(this.width=this.width||d.width,this.height=this.height||d.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===b(d))this.xhr=d,this.needsListeners=!0;else if(n(d)){var a=d[0].length,p=d.length,h=1,z,w,y,x;if(Array.isArray(d[0][0]))for(h=d[0][0].length,e=Array(a*p*h),w=x=0;w<p;++w)for(z=0;z<a;++z)for(y=0;y<h;++y)e[x++]=d[w][z][y];
else for(e=Array(a*p),w=x=0;w<p;++w)for(z=0;z<a;++z)e[x++]=d[w][z];this.width=a;this.height=p;this.channels=h;a=!0}else q.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||E.width)|0,this.height=(this.height||E.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,
6410,6407,6408][(this.channels=this.channels||4)-1]);d=this.internalformat;p=this.format=ea[d];if(!this.channels)switch(p){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}p=this.type;5126!==p&&36193!==p&&(p||(p=6402===d?5125:5121));this.type=p;if(a)switch(p){case 5121:this.data=new Uint8Array(e);break;case 5123:this.data=new Uint16Array(e);break;case 5125:this.data=new Uint32Array(e);break;case 5126:this.data=
new Float32Array(e);break;case 36193:this.data=r(e)}if(this.data&&this.needsTranspose){e=this.data;d=this.width;a=this.height;p=this.channels;h=this.strideX;z=this.strideY;w=this.strideC;y=this.offset;x=new e.constructor(d*a*p);for(var D=0,J=0;J<a;++J)for(var A=0;A<d;++A)for(var L=0;L<p;++L)x[D++]=e[z*J+h*A+w*L+y];this.data=x}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(b){d.pixelStorei(37440,
this.flipY);d.pixelStorei(37441,this.premultiplyAlpha);d.pixelStorei(37443,this.colorSpace);d.pixelStorei(3317,this.unpackAlignment);var q=this.target,c=this.miplevel,e=this.image,a=this.canvas,f=this.video,p=this.data,h=this.internalformat,l=this.format,z=this.type,w=this.width||Math.max(1,b.width>>c);b=this.height||Math.max(1,b.height>>c);f&&2<f.readyState?d.texImage2D(q,c,l,l,z,f):e&&e.complete?d.texImage2D(q,c,l,l,z,e):a?d.texImage2D(q,c,l,l,z,a):this.compressed?d.compressedTexImage2D(q,c,h,w,
b,0,p):this.copy?(y(),d.copyTexImage2D(q,c,l,this.x,this.y,w,b,0)):p?d.texImage2D(q,c,l,w,b,0,l,z,p):d.texImage2D(q,c,l,w||1,b||1,0,l,z,null)}});h(z.prototype,{parse:function(b){if("object"===typeof b&&b){"min"in b&&(this.minFilter=T[b.min]);"mag"in b&&(this.magFilter=L[b.mag]);var q=this.wrapS,c=this.wrapT;if("wrap"in b){var d=b.wrap;"string"===typeof d?q=c=J[d]:Array.isArray(d)&&(q=J[d[0]],c=J[d[1]])}else"wrapS"in b&&(q=J[b.wrapS]),"wrapT"in b&&(c=J[b.wrapT]);this.wrapS=q;this.wrapT=c;"anisotropic"in
b&&(this.anisotropic=b.anisotropic);if("mipmap"in b)switch(b=b.mipmap,typeof b){case "string":this.mipmapHint=K[b];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!b}}},upload:function(){var b=this.target;d.texParameteri(b,10241,this.minFilter);d.texParameteri(b,10240,this.magFilter);d.texParameteri(b,10242,this.wrapS);d.texParameteri(b,10243,this.wrapT);a.ext_texture_filter_anisotropic&&d.texParameteri(b,34046,this.anisotropic);this.genMipmaps&&(d.hint(33170,this.mipmapHint),d.generateMipmap(b))}});
var Y=0,X=0,F={},S=[],O=w.maxTextureUnits,Q=Array(O).map(function(){return null});h(G.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var q=0;q<O;++q){var c=Q[q];if(c){if(0<c.bindCount)continue;c.unit=-1}Q[q]=this;b=q;break}this.unit=b;d.activeTexture(33984+b);d.bindTexture(this.target,this.texture);Y=b}return b},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&C(this)}});return{create:function(b,q){function c(b,e,a,f,p,h){var l=b||{};34067===q&&
6===arguments.length&&(l=[b,e,a,f,p,h]);A(d,l);c.width=d.params.width;c.height=d.params.height;return c}var d=new G(q);F[d.id]=d;c(b);c._reglType="texture";c._texture=d;c.destroy=function(){d.decRef()};return c},refresh:function(){x(F).forEach(g);for(var b=0;b<O;++b)Q[b]=null;Y=0;d.activeTexture(33984)},clear:function(){for(var b=0;b<O;++b)d.activeTexture(33984+b),d.bindTexture(3553,null),Q[b]=null;d.activeTexture(33984);Y=0;x(F).forEach(C)},poll:function(){S.forEach(g)},getTexture:function(b){return null}}}},
{"./util/extend":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/load-texture":27,"./util/parse-dds":28,"./util/to-half-float":31,"./util/values":32}],21:[function(a,g,k){g.exports=function(a){var n={};return{def:function(b){b=a.id(b);var f=n[b];f||(f=n[b]=[]);return f},uniforms:n}}},{}],22:[function(a,g,k){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(a,g,k){var m=a("./extend");g.exports=
function(){function a(){var f=[],h=[];return m(function(){f.push.apply(f,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+b++;h.push(a);0<arguments.length&&(f.push(a,"="),f.push.apply(f,Array.prototype.slice.call(arguments)),f.push(";"));return a},toString:function(){return[0<h.length?"var "+h+";":"",f.join("")].join("")}})}var b=0,f=[],l=[],h={};return{link:function(a){var h="g"+b++;f.push(h);l.push(a);return h},block:a,proc:function(f){var l=[],t=a(),u=t.toString;return h[f]=m(t,
{arg:function(){var a="a"+b++;l.push(a);return a},toString:function(){return["function(",l.join(),"){",u(),"}"].join("")}})},compile:function(){var b=['"use strict";return {'];Object.keys(h).forEach(function(a){b.push('"',a,'":',h[a].toString(),",")});b.push("}");return Function.apply(null,f.concat([b.join("")])).apply(null,l)}}}},{"./extend":24}],24:[function(a,g,k){g.exports=function(a,n){for(var b=Object.keys(n),f=0;f<b.length;++f)a[b[f]]=n[b[f]];return a}},{}],25:[function(a,g,k){var m=a("./is-typed-array");
g.exports=function(a){return"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||m(a.data))}},{"./is-typed-array":26}],26:[function(a,g,k){var m=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in m}},{"../constants/arraytypes.json":5}],27:[function(a,g,k){g.exports=function(a,n){if("undefined"!==typeof document){var b;b=(b=/\.(\w+)(\?.*)?$/.exec(a))&&
b[1]?b[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(b))return b=document.createElement("video"),b.autoplay=!0,b.loop=!0,n&&(b.crossOrigin=n),b.src=a,b;if(0<=["dds"].indexOf(b))return b=new XMLHttpRequest,b.responseType="arraybuffer",b.open("GET",a,!0),b.send(),b;b=new Image;n&&(b.crossOrigin=n);b.src=a;return b}return null}},{}],28:[function(a,g,k){g.exports=function(a){function g(b){for(var q=K,c=J,d=0;d<P;++d){var e=Math.max(1,
q+3>>2)*Math.max(1,c+3>>2)*M;aa.pixels.push({target:b,miplevel:d,width:q,height:c,data:new Uint8Array(a,R,e)});R+=e;q>>=1;c>>=1}}var k=new Int32Array(a),C=k[y],K=k[q],J=k[E],L=v,T=0,M=0,N=4;switch(k[G]){case e:M=8;C&r?(N=3,T=b):T=f;break;case c:M=16;T=l;break;case d:M=16;T=h;break;case p:M=8,T=x}var P=1;k[D]&t&&(P=Math.max(1,k[z]));var R=k[w]+4,aa={width:K,height:J,channels:N,format:T,type:L,compressed:!0,cube:!1,pixels:[]};if(k[A]&u)for(aa.cube=!0,k=0;6>k;++k)g(n+k);else g(m);return aa};var m=3553,
n=34069,b=33776,f=33777,l=33778,h=33779,x=36196,v=5121,t=131072,u=512,r=64,e=827611204,c=861165636,d=894720068,p=826496069,w=1,y=2,E=3,q=4,z=7,D=20,G=21,A=28},{}],29:[function(a,g,k){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(a,g,k){g.exports=function(a,n){var b=a.length,
f=a.slice(),l=a.slice(),h=!1,x=!0;return{push:function(){h=!1;for(var a=0;a<b;++a){var n=arguments[a];h=h||n!==l[a];f.push(n)}},pop:function(){h=!1;f.length-=b;for(var a=0;a<b;++a)h=h||f[f.length-b+a]!==l[a]},poll:function(){var a=f.length-b;if(h||x){switch(b){case 1:n(f[a]);break;case 2:n(f[a],f[a+1]);break;case 3:n(f[a],f[a+1],f[a+2]);break;case 4:n(f[a],f[a+1],f[a+2],f[a+3]);break;case 5:n(f[a],f[a+1],f[a+2],f[a+3],f[a+4]);break;case 6:n(f[a],f[a+1],f[a+2],f[a+3],f[a+4],f[a+5]);break;default:n.apply(null,
f.slice(a,f.length))}for(var m=0;m<b;++m)l[m]=f[a+m];x=h=!1}},setDirty:function(){x=!0}}}},{}],31:[function(a,g,k){g.exports=function(a){for(var n=new Float32Array(a),n=new Uint32Array(n.buffer),b=new Uint16Array(a.length),f=0;f<a.length;++f)if(isNaN(a[f]))b[f]=65535;else if(Infinity===a[f])b[f]=31744;else if(-Infinity===a[f])b[f]=64512;else{var l=n[f],h=l>>>31<<15,x=(l<<1>>>24)-127,l=l>>13&1023;b[f]=-24>x?h:-14>x?h+(l+1024>>-14-x):15<x?h+31744:h+(x+15<<10)+l}return b}},{}],32:[function(a,g,k){g.exports=
function(a){return Object.keys(a).map(function(n){return a[n]})}},{}],33:[function(a,g,k){function m(b,a,f){for(var m=[],t=a;t<f;t+=3)a=(b[t]<<16)+(b[t+1]<<8)+b[t+2],m.push(n[a>>18&63]+n[a>>12&63]+n[a>>6&63]+n[a&63]);return m.join("")}k.toByteArray=function(a){var h,n,m,t,u;h=a.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");t="="===a[h-2]?2:"="===a[h-1]?1:0;u=new f(3*h/4-t);n=0<t?h-4:h;var r=0;for(h=0;h<n;h+=4)m=b[a.charCodeAt(h)]<<18|b[a.charCodeAt(h+1)]<<12|b[a.charCodeAt(h+
2)]<<6|b[a.charCodeAt(h+3)],u[r++]=m>>16&255,u[r++]=m>>8&255,u[r++]=m&255;2===t?(m=b[a.charCodeAt(h)]<<2|b[a.charCodeAt(h+1)]>>4,u[r++]=m&255):1===t&&(m=b[a.charCodeAt(h)]<<10|b[a.charCodeAt(h+1)]<<4|b[a.charCodeAt(h+2)]>>2,u[r++]=m>>8&255,u[r++]=m&255);return u};k.fromByteArray=function(b){for(var a=b.length,f=a%3,v="",t=[],u=0,r=a-f;u<r;u+=16383)t.push(m(b,u,u+16383>r?r:u+16383));1===f?(b=b[a-1],v+=n[b>>2],v+=n[b<<4&63],v+="=="):2===f&&(b=(b[a-2]<<8)+b[a-1],v+=n[b>>10],v+=n[b>>4&63],v+=n[b<<2&63],
v+="=");t.push(v);return t.join("")};var n=[],b=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var a=0;64>a;++a)n[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;b[45]=62;b[95]=63})()},{}],34:[function(a,g,k){var m=a("./lib/rationalize");g.exports=function(a,b){return m(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}},{"./lib/rationalize":44}],35:[function(a,g,
k){g.exports=function(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],36:[function(a,g,k){var m=a("./lib/rationalize");g.exports=function(a,b){return m(a[0].mul(b[1]),a[1].mul(b[0]))}},{"./lib/rationalize":44}],37:[function(a,g,k){function m(a,t){if(n(a))return t?x(a,m(t)):[a[0].clone(),a[1].clone()];var u=0,r,e;if(b(a))r=a.clone();else if("string"===typeof a)r=l(a);else{if(0===a)return[f(0),f(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),u-=256;r=f(a)}if(n(t))r.mul(t[1]),
e=t[0].clone();else if(b(t))e=t.clone();else if("string"===typeof t)e=l(t);else if(t){if(t!==Math.floor(t))for(;t!==Math.floor(t);)t*=Math.pow(2,256),u+=256;e=f(t)}else e=f(1);0<u?r=r.shln(u):0>u&&(e=e.shln(-u));return h(r,e)}var n=a("./is-rat"),b=a("./lib/is-bn"),f=a("./lib/num-to-bn"),l=a("./lib/str-to-bn"),h=a("./lib/rationalize"),x=a("./div");g.exports=m},{"./div":36,"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],38:[function(a,g,k){var m=a("./lib/is-bn");
g.exports=function(a){return Array.isArray(a)&&2===a.length&&m(a[0])&&m(a[1])}},{"./lib/is-bn":42}],39:[function(a,g,k){var m=a("bn.js");g.exports=function(a){return a.cmp(new m(0))}},{"bn.js":47}],40:[function(a,g,k){g.exports=function(a){var n=a.length,b=a.words,f=0;if(1===n)f=b[0];else if(2===n)f=b[0]+67108864*b[1];else for(var l=f=0;l<n;l++)f+=b[l]*Math.pow(67108864,l);return a.sign?-f:f}},{}],41:[function(a,g,k){var m=a("double-bits"),n=a("bit-twiddle").countTrailingZeros;g.exports=function(b){var a=
n(m.lo(b));if(32>a)return a;b=n(m.hi(b));return 20<b?52:b+32}},{"bit-twiddle":52,"double-bits":75}],42:[function(a,g,k){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,g,k){var m=a("bn.js"),n=a("double-bits");g.exports=function(b){var a=n.exponent(b);return 52>a?new m(b):(new m(b*Math.pow(2,52-a))).shln(a-52)}},{"bn.js":47,"double-bits":75}],44:[function(a,g,k){var m=a("./num-to-bn"),n=a("./bn-sign");g.exports=function(b,a){var l=n(b),h=n(a);
if(0===l)return[m(0),m(1)];if(0===h)return[m(0),m(0)];0>h&&(b=b.neg(),a=a.neg());l=b.gcd(a);return l.cmpn(1)?[b.div(l),a.div(l)]:[b,a]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,g,k){var m=a("bn.js");g.exports=function(a){return new m(a)}},{"bn.js":47}],46:[function(a,g,k){var m=a("./lib/rationalize");g.exports=function(a,b){return m(a[0].mul(b[0]),a[1].mul(b[1]))}},{"./lib/rationalize":44}],47:[function(a,g,k){(function(a,n){function b(b,c){if(!b)throw Error(c||"Assertion failed");}function f(b,
c){b.super_=c;var a=function(){};a.prototype=c.prototype;b.prototype=new a;b.prototype.constructor=b}function l(b,c,a){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)a=c,c=10;null!==b&&this._init(b||0,c||10,a||"be")}function h(b,c,a){var d=0;for(a=Math.min(b.length,a);c<a;c++)var e=b.charCodeAt(c)-48,d=d<<4,d=49<=e&&54>=e?d|e-49+10:17<=e&&22>=e?d|e-17+10:d|e&15;return d}function x(b,c,a,d){var e=0;for(a=
Math.min(b.length,a);c<a;c++)var f=b.charCodeAt(c)-48,e=e*d,e=49<=f?e+(f-49+10):17<=f?e+(f-17+10):e+f;return e}function v(b,c){this.name=b;this.p=new l(c,16);this.n=this.p.bitLength();this.k=(new l(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function t(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function e(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function c(b){"string"===typeof b?(b=l._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function d(b){c.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new l(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}
"object"===typeof a?a.exports=l:n.BN=l;l.BN=l;l.wordSize=26;l.prototype._init=function(q,c,a){if("number"===typeof q)return this._initNumber(q,c,a);if("object"===typeof q)return this._initArray(q,c,a);"hex"===c&&(c=16);b(c===(c|0)&&2<=c&&36>=c);q=q.toString().replace(/\s+/g,"");var d=0;"-"===q[0]&&d++;16===c?this._parseHex(q,d):this._parseBase(q,c,d);"-"===q[0]&&(this.sign=!0);this.strip();"le"===a&&this._initArray(this.toArray(),c,a)};l.prototype._initNumber=function(c,a,d){0>c&&(this.sign=!0,c=
-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(b(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),a,d)};l.prototype._initArray=function(c,a,d){b("number"===typeof c.length);if(0>=c.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var e=
0;if("be"===d)for(a=c.length-1,d=0;0<=a;a-=3){var f=c[a]|c[a-1]<<8|c[a-2]<<16;this.words[d]|=f<<e&67108863;this.words[d+1]=f>>>26-e&67108863;e+=24;26<=e&&(e-=26,d++)}else if("le"===d)for(d=a=0;a<c.length;a+=3)f=c[a]|c[a+1]<<8|c[a+2]<<16,this.words[d]|=f<<e&67108863,this.words[d+1]=f>>>26-e&67108863,e+=24,26<=e&&(e-=26,d++);return this.strip()};l.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;for(var d=
0,a=b.length-6,e=0;a>=c;a-=6){var f=h(b,a,a+6);this.words[e]|=f<<d&67108863;this.words[e+1]|=f>>>26-d&4194303;d+=24;26<=d&&(d-=26,e++)}a+6!==c&&(f=h(b,c,a+6),this.words[e]|=f<<d&67108863,this.words[e+1]|=f>>>26-d&4194303);this.strip()};l.prototype._parseBase=function(b,c,a){this.words=[0];this.length=1;for(var d=0,e=1;67108863>=e;e*=c)d++;d--;for(var e=e/c|0,f=b.length-a,p=f%d,h=Math.min(f,f-p)+a,f=0;a<h;a+=d)f=x(b,a,a+d,c),this.imuln(e),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!==
p){d=1;f=x(b,a,b.length,c);for(a=0;a<p;a++)d*=c;this.imuln(d);67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}};l.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};l.prototype.clone=function(){var b=new l(null);this.copy(b);return b};l.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};l.prototype._normSign=function(){1===
this.length&&0===this.words[0]&&(this.sign=!1);return this};l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(c,a){c=c||10;if(16===c||"hex"===c){var d="",e=0;a=a|0||1;for(var f=0,h=0;h<this.length;h++){var l=
this.words[h],r=((l<<e|f)&16777215).toString(16),f=l>>>24-e&16777215,d=0!==f||h!==this.length-1?p[6-r.length]+r+d:r+d,e=e+2;26<=e&&(e-=26,h--)}for(0!==f&&(d=f.toString(16)+d);0!==d.length%a;)d="0"+d;this.sign&&(d="-"+d);return d}if(c===(c|0)&&2<=c&&36>=c){e=w[c];f=y[c];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)l=h.modn(f).toString(c),h=h.idivn(f),d=0!==h.cmpn(0)?p[e-l.length]+l+d:l+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}b(!1,"Base should be between 2 and 36")};l.prototype.toJSON=
function(){return this.toString(16)};l.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var a=this.clone();if("le"!==b)for(b=0;0!==a.cmpn(0);b++){var d=a.andln(255);a.ishrn(8);c[c.length-b-1]=d}else for(b=0;0!==a.cmpn(0);b++)d=a.andln(255),a.ishrn(8),c[b]=d;return c};l.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};l.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};l.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};l.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var a=this._zeroBits(this.words[c]),b=b+a;if(26!==a)break}return b};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};l.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};l.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};l.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};l.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var a=
0;a<c.length;a++)this.words[a]&=b.words[a];this.length=c.length;return this.strip()};l.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};l.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var a=0;a<b.length;a++)this.words[a]=c.words[a]^b.words[a];if(this!==c)for(;a<c.length;a++)this.words[a]=c.words[a];this.length=c.length;return this.strip()};l.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};l.prototype.setn=function(c,a){b("number"===typeof c&&0<=c);for(var d=c/26|0,e=c%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=a?this.words[d]|1<<e:this.words[d]&~(1<<e);return this.strip()};l.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var a;this.length>b.length?a=this:(a=b,b=this);
for(var d=c=0;d<b.length;d++)c=a.words[d]+b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<a.length;d++)c=a.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=a.length;if(0!==c)this.words[this.length]=c,this.length++;else if(a!==this)for(;d<a.length;d++)this.words[d]=a.words[d];return this};l.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};l.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var a;0<c?a=this:(a=b,b=this);for(var d=0,e=0;e<b.length;e++)c=a.words[e]-b.words[e]+d,d=c>>26,this.words[e]=c&67108863;for(;0!==d&&e<a.length;e++)c=a.words[e]+d,d=c>>26,this.words[e]=c&67108863;if(0===d&&e<a.length&&a!==this)for(;e<
a.length;e++)this.words[e]=a.words[e];this.length=Math.max(this.length,e);a!==this&&(this.sign=!0);return this.strip()};l.prototype.sub=function(b){return this.clone().isub(b)};l.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0;d<c.length-1;d++){for(var e=a>>>26,a=a&67108863,f=Math.min(d,b.length-1),p=Math.max(0,d-this.length+1);p<=f;p++)var h=(this.words[d-p]|0)*(b.words[p]|0),l=h&67108863,e=e+(h/67108864|0)|0,l=l+a|0,a=l&67108863,e=e+(l>>>
26)|0;c.words[d]=a;a=e}0!==a?c.words[d]=a:c.length--;return c.strip()};l.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0,e=0;e<c.length-1;e++){for(var f=d,d=0,a=a&67108863,p=Math.min(e,b.length-1),h=Math.max(0,e-this.length+1);h<=p;h++)var l=(this.words[e-h]|0)*(b.words[h]|0),w=l&67108863,f=f+(l/67108864|0)|0,w=w+a|0,a=w&67108863,f=f+(w>>>26)|0,d=d+(f>>>26),f=f&67108863;c.words[e]=a;a=f}0!==a?c.words[e]=a:c.length--;return c.strip()};l.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};l.prototype.mul=function(b){var c=new l(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};l.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,a=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var e=0,f=0,p=Math.min(d,a-1),h=Math.max(0,d-c+1);h<=p;h++)var l=
d-h,l=this.words[l]*b.words[h],w=l&67108863,e=e+(l/67108864|0),w=w+f,f=w&67108863,e=e+(w>>>26);this.words[d]=f;this.words[d+1]+=e}e=0;for(l=1;l<this.length;l++)b=this.words[l]+e,this.words[l]=b&67108863,e=b>>>26;return this.strip()};l.prototype.imuln=function(c){b("number"===typeof c);for(var a=0,d=0;d<this.length;d++){var e=this.words[d]*c,f=(e&67108863)+(a&67108863),a=a>>26,a=a+(e/67108864|0),a=a+(f>>>26);this.words[d]=f&67108863}0!==a&&(this.words[d]=a,this.length++);return this};l.prototype.muln=
function(b){return this.clone().imuln(b)};l.prototype.sqr=function(){return this.mul(this)};l.prototype.isqr=function(){return this.mul(this)};l.prototype.ishln=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;var d=67108863>>>26-a<<26-a;if(0!==a){for(var e=0,f=0;f<this.length;f++){var p=this.words[f]&d;this.words[f]=this.words[f]-p<<a|e;e=p>>>26-a}e&&(this.words[f]=e,this.length++)}if(0!==c){for(f=this.length-1;0<=f;f--)this.words[f+c]=this.words[f];for(f=0;f<c;f++)this.words[f]=0;
this.length+=c}return this.strip()};l.prototype.ishrn=function(c,a,d){b("number"===typeof c&&0<=c);var e=c%26,f=Math.min((c-e)/26,this.length);c=67108863^67108863>>>e<<e;a=(a?(a-a%26)/26:0)-f;a=Math.max(0,a);if(d){for(var p=0;p<f;p++)d.words[p]=this.words[p];d.length=f}if(0!==f)if(this.length>f)for(this.length-=f,p=0;p<this.length;p++)this.words[p]=this.words[p+f];else this.words[0]=0,this.length=1;f=0;for(p=this.length-1;0<=p&&(0!==f||p>=a);p--){var h=this.words[p];this.words[p]=f<<26-e|h>>>e;f=
h&c}d&&0!==f&&(d.words[d.length++]=f);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};l.prototype.shln=function(b){return this.clone().ishln(b)};l.prototype.shrn=function(b){return this.clone().ishrn(b)};l.prototype.testn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;return this.length<=c?!1:!!(this.words[c]&1<<a)};l.prototype.imaskn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;b(!this.sign,"imaskn works only with positive numbers");0!==
a&&c++;this.length=Math.min(c,this.length);0!==a&&(this.words[this.length-1]&=67108863^67108863>>>a<<a);return this.strip()};l.prototype.maskn=function(b){return this.clone().imaskn(b)};l.prototype.iaddn=function(c){b("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};l.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};l.prototype.isubn=function(c){b("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};l.prototype.addn=function(b){return this.clone().iaddn(b)};
l.prototype.subn=function(b){return this.clone().isubn(b)};l.prototype.iabs=function(){this.sign=!1;return this};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=function(c,a,d){var e=c.length+d,f;if(this.words.length<e){var p=Array(e);for(f=0;f<this.length;f++)p[f]=this.words[f];this.words=p}else f=this.length;for(this.length=Math.max(this.length,e);f<this.length;f++)this.words[f]=0;for(f=p=0;f<c.length;f++)e=this.words[f+d]+p,p=c.words[f]*a,e-=p&67108863,p=(e>>26)-
(p/67108864|0),this.words[f+d]=e&67108863;for(;f<this.length-d;f++)e=this.words[f+d]+p,p=e>>26,this.words[f+d]=e&67108863;if(0===p)return this.strip();b(-1===p);for(f=p=0;f<this.length;f++)e=-this.words[f]+p,p=e>>26,this.words[f]=e&67108863;this.sign=!0;return this.strip()};l.prototype._wordDiv=function(b,c){var a=this.length-b.length,d=this.clone(),e=b,f=e.words[e.length-1],a=26-this._countBits(f);0!==a&&(e=e.shln(a),d.ishln(a),f=e.words[e.length-1]);var p=d.length-e.length,h;if("mod"!==c){h=new l(null);
h.length=p+1;h.words=Array(h.length);for(var w=0;w<h.length;w++)h.words[w]=0}w=d.clone()._ishlnsubmul(e,1,p);w.sign||(d=w,h&&(h.words[p]=1));for(--p;0<=p;p--){w=67108864*d.words[e.length+p]+d.words[e.length+p-1];w=Math.min(w/f|0,67108863);for(d._ishlnsubmul(e,w,p);d.sign;)w--,d.sign=!1,d._ishlnsubmul(e,1,p),0!==d.cmpn(0)&&(d.sign=!d.sign);h&&(h.words[p]=w)}h&&h.strip();d.strip();"div"!==c&&0!==a&&d.ishrn(a);return{div:h?h:null,mod:d}};l.prototype.divmod=function(c,a){b(0!==c.cmpn(0));if(this.sign&&
!c.sign){var d=this.neg().divmod(c,a),e,f;"mod"!==a&&(e=d.div.neg());"div"!==a&&(f=0===d.mod.cmpn(0)?d.mod:c.sub(d.mod));return{div:e,mod:f}}return!this.sign&&c.sign?(d=this.divmod(c.neg(),a),"mod"!==a&&(e=d.div.neg()),{div:e,mod:d.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),a):c.length>this.length||0>this.cmp(c)?{div:new l(0),mod:this}:1===c.length?"div"===a?{div:this.divn(c.words[0]),mod:null}:"mod"===a?{div:null,mod:new l(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new l(this.modn(c.words[0]))}:
this._wordDiv(c,a)};l.prototype.div=function(b){return this.divmod(b,"div").div};l.prototype.mod=function(b){return this.divmod(b,"mod").mod};l.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var a=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);a=a.cmp(d);return 0>a||1===b&&0===a?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};l.prototype.modn=function(c){b(67108863>=c);for(var a=67108864%c,d=0,e=this.length-1;0<=e;e--)d=(a*d+this.words[e])%c;return d};
l.prototype.idivn=function(c){b(67108863>=c);for(var a=0,d=this.length-1;0<=d;d--)a=this.words[d]+67108864*a,this.words[d]=a/c|0,a%=c;return this.strip()};l.prototype.divn=function(b){return this.clone().idivn(b)};l.prototype.egcd=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new l(1);for(var e=new l(0),f=new l(0),p=new l(1),h=0;a.isEven()&&d.isEven();)a.ishrn(1),d.ishrn(1),++h;for(var w=d.clone(),r=a.clone();0!==a.cmpn(0);){for(;a.isEven();)a.ishrn(1),
c.isEven()&&e.isEven()?(c.ishrn(1),e.ishrn(1)):(c.iadd(w).ishrn(1),e.isub(r).ishrn(1));for(;d.isEven();)d.ishrn(1),f.isEven()&&p.isEven()?(f.ishrn(1),p.ishrn(1)):(f.iadd(w).ishrn(1),p.isub(r).ishrn(1));0<=a.cmp(d)?(a.isub(d),c.isub(f),e.isub(p)):(d.isub(a),f.isub(c),p.isub(e))}return{a:f,b:p,gcd:d.ishln(h)}};l.prototype._invmp=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new l(1);for(var e=new l(0),f=d.clone();0<a.cmpn(1)&&0<d.cmpn(1);){for(;a.isEven();)a.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(f).ishrn(1);for(;d.isEven();)d.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(f).ishrn(1);0<=a.cmp(d)?(a.isub(d),c.isub(e)):(d.isub(a),e.isub(c))}return 0===a.cmpn(1)?c:e};l.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var a=0;c.isEven()&&b.isEven();a++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(a)};l.prototype.invm=function(b){return this.egcd(b).a.mod(b)};l.prototype.isEven=function(){return 0===(this.words[0]&1)};l.prototype.isOdd=function(){return 1===(this.words[0]&1)};l.prototype.andln=function(b){return this.words[0]&b};l.prototype.bincn=function(c){b("number"===typeof c);var a=c%26;c=(c-a)/26;var d=1<<a;if(this.length<=c){for(a=this.length;a<c+1;a++)this.words[a]=0;this.words[c]|=d;this.length=c+1;return this}for(a=c;0!==d&&
a<this.length;a++)c=this.words[a],c+=d,d=c>>>26,c&=67108863,this.words[a]=c;0!==d&&(this.words[a]=d,this.length++);return this};l.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};l.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};l.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,a=this.length-1;0<=a;a--){var d=this.words[a],e=b.words[a];if(d!==e){d<e?c=-1:d>e&&(c=1);break}}return c};l.red=function(b){return new c(b)};l.prototype.toRed=function(c){b(!this.red,"Already a number in reduction context");b(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};l.prototype.fromRed=function(){b(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
l.prototype._forceRed=function(b){this.red=b;return this};l.prototype.forceRed=function(c){b(!this.red,"Already a number in reduction context");return this._forceRed(c)};l.prototype.redAdd=function(c){b(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};l.prototype.redIAdd=function(c){b(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};l.prototype.redSub=function(c){b(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};l.prototype.redISub=
function(c){b(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};l.prototype.redShl=function(c){b(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};l.prototype.redMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};l.prototype.redIMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};l.prototype.redSqr=function(){b(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};l.prototype.redISqr=function(){b(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};l.prototype.redSqrt=function(){b(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};l.prototype.redInvm=function(){b(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};l.prototype.redNeg=
function(){b(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};l.prototype.redPow=function(c){b(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var g={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var b=new l(null);b.words=Array(Math.ceil(this.n/13));return b};v.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};v.prototype.split=function(b,c){b.ishrn(this.n,0,c)};v.prototype.imulK=function(b){return b.imul(this.k)};f(t,v);t.prototype.split=function(b,c){for(var a=Math.min(b.length,9),d=0;d<a;d++)c.words[d]=b.words[d];c.length=a;if(9>=b.length)b.words[0]=0,b.length=1;else{a=b.words[9];c.words[c.length++]=a&4194303;for(d=10;d<b.length;d++){var e=b.words[d];b.words[d-10]=(e&4194303)<<4|a>>>22;a=e}b.words[d-10]=
a>>>22;b.length-=9}};t.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,a=0,d=0;d<b.length;d++){var e=b.words[d];c=64*e;a+=977*e;c+=a/67108864|0;a&=67108863;b.words[d]=a;a=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};f(u,v);f(r,v);f(e,v);e.prototype.imulK=function(b){for(var c=0,a=0;a<b.length;a++){var c=19*b.words[a]+c,d=c&67108863,c=c>>>26;b.words[a]=d}0!==c&&(b.words[b.length++]=c);return b};l._prime=function(b){if(g[b])return g[b];
var c;if("k256"===b)c=new t;else if("p224"===b)c=new u;else if("p192"===b)c=new r;else if("p25519"===b)c=new e;else throw Error("Unknown prime "+b);return g[b]=c};c.prototype._verify1=function(c){b(!c.sign,"red works only with positives");b(c.red,"red works only with red numbers")};c.prototype._verify2=function(c,a){b(!c.sign&&!a.sign,"red works only with positives");b(c.red&&c.red===a.red,"red works only with red numbers")};c.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};c.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};c.prototype.add=function(b,c){this._verify2(b,c);var a=b.add(c);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};c.prototype.iadd=function(b,c){this._verify2(b,c);var a=b.iadd(c);0<=a.cmp(this.m)&&a.isub(this.m);return a};c.prototype.sub=function(b,c){this._verify2(b,c);var a=b.sub(c);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};c.prototype.isub=function(b,
c){this._verify2(b,c);var a=b.isub(c);0>a.cmpn(0)&&a.iadd(this.m);return a};c.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};c.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};c.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};c.prototype.isqr=function(b){return this.imul(b,b)};c.prototype.sqr=function(b){return this.mul(b,b)};c.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var a=this.m.andln(3);b(1===
a%2);if(3===a){var a=this.m.add(new l(1)).ishrn(2),d=this.pow(c,a);return d}for(var e=this.m.subn(1),f=0;0!==e.cmpn(0)&&0===e.andln(1);)f++,e.ishrn(1);b(0!==e.cmpn(0));for(var a=(new l(1)).toRed(this),d=a.redNeg(),p=this.m.subn(1).ishrn(1),h=this.m.bitLength(),h=(new l(2*h*h)).toRed(this);0!==this.pow(h,p).cmp(d);)h.redIAdd(d);p=this.pow(h,e);d=this.pow(c,e.addn(1).ishrn(1));c=this.pow(c,e);for(e=f;0!==c.cmp(a);){h=c;for(f=0;0!==h.cmp(a);f++)h=h.redSqr();b(f<e);p=this.pow(p,(new l(1)).ishln(e-f-1));
d=d.redMul(p);p=p.redSqr();c=c.redMul(p);e=f}return d};c.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};c.prototype.pow=function(b,c){var a=[];if(0===c.cmpn(0))return new l(1);for(var d=c.clone();0!==d.cmpn(0);)a.push(d.andln(1)),d.ishrn(1);for(var e=b,f=0;f<a.length&&0===a[f];f++,e=this.sqr(e));if(++f<a.length)for(d=this.sqr(e);f<a.length;f++,d=this.sqr(d))0!==a[f]&&(e=this.mul(e,d));return e};c.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};c.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};l.mont=function(b){return new d(b)};f(d,c);d.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};d.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};d.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var a=b.imul(c),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);
0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&(d=a.iadd(this.m));return d._forceRed(this)};d.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new l(0))._forceRed(this);var a=b.mul(c),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&(d=a.iadd(this.m));return d._forceRed(this)};d.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],48:[function(a,g,k){var m=a("./lib/bn-sign");g.exports=function(a){return m(a[0])*m(a[1])}},{"./lib/bn-sign":39}],49:[function(a,g,k){var m=a("./lib/rationalize");g.exports=function(a,b){return m(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}},{"./lib/rationalize":44}],50:[function(a,g,k){var m=a("./lib/bn-to-num"),n=a("./lib/ctz");g.exports=function(b){var a=b[0];b=b[1];if(0===a.cmpn(0))return 0;var l=a.divmod(b),a=m(l.div),l=l.mod;if(0===l.cmpn(0))return a;if(a){var h=
n(a)+4;b=m(l.shln(h).divRound(b));0>a&&(b=-b);return a+b*Math.pow(2,-h)}a=b.bitLength()-l.bitLength()+53;b=m(l.shln(a).divRound(b));if(1023>a)return b*Math.pow(2,-a);b*=Math.pow(2,-1023);return b*Math.pow(2,1023-a)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,g,k){function m(b,a,l,h,n){b=["function ",b,"(a,l,h,",h.join(","),"){",n?"":"var i=",l?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];n?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
b.push(";if(",a,"){i=m;");l?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");n?b.push("return -1};"):b.push("return i};");return b.join("")}function n(b,a,l,h){return(new Function([m("A","x"+b+"y",a,["y"],h),m("P","c(x,y)"+b+"0",a,["y","c"],h),"function dispatchBsearch",l,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",l].join("")))()}
g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],52:[function(a,g,k){function m(b){var a=32;(b&=-b)&&a--;b&65535&&(a-=16);b&16711935&&(a-=8);b&252645135&&(a-=4);b&858993459&&(a-=2);b&1431655765&&--a;return a}"use restrict";k.INT_BITS=32;k.INT_MAX=2147483647;k.INT_MIN=-2147483648;k.sign=function(b){return(0<b)-(0>b)};k.abs=function(b){var a=b>>31;return(b^a)-a};k.min=function(b,a){return a^(b^a)&-(b<a)};k.max=function(b,a){return b^(b^
a)&-(b<a)};k.isPow2=function(b){return!(b&b-1)&&!!b};k.log2=function(b){var a,l;a=(65535<b)<<4;b>>>=a;l=(255<b)<<3;b>>>=l;a|=l;l=(15<b)<<2;b>>>=l;a|=l;l=(3<b)<<1;return a|l|b>>>l>>1};k.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};k.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};k.countTrailingZeros=m;k.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=
b>>>8;return(b|b>>>16)+1};k.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};k.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var n=Array(256);(function(b){for(var a=0;256>a;++a){for(var l=a,h=a,n=7,l=l>>>1;l;l>>>=1)h<<=1,h|=l&1,--n;b[a]=h<<n&255}})(n);k.reverse=function(b){return n[b&255]<<24|n[b>>>8&255]<<16|n[b>>>16&255]<<8|n[b>>>24&255]};k.interleave2=function(b,a){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;
a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|b<<1)&1431655765|((a|a<<1)&1431655765)<<1};k.deinterleave2=function(b,a){b=b>>>a&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};k.interleave3=function(b,a,l){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b=(b|b<<2)&1227133513|((a|a<<2)&1227133513)<<1;l&=1023;
l=(l|l<<16)&4278190335;l=(l|l<<8)&251719695;l=(l|l<<4)&3272356035;return b|((l|l<<2)&1227133513)<<2};k.deinterleave3=function(b,a){b=b>>>a&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};k.nextCombination=function(b){var a=b|b-1;return a+1|(~a&-~a)-1>>>m(b)+1}},{}],53:[function(a,g,k){function m(b,a,f,h){for(var e=0,c=0,d=0,p=b.length;d<p;++d){var l=b[d],n;a:{for(n=0;n<a;++n)if(!(l[n]<=l[n+a])){n=!0;break a}n=!1}if(!n){for(n=0;n<2*a;++n)f[e++]=
l[n];h[c++]=d}}return c}function n(b,a,n,r){var e=b.length,c=a.length;if(!(0>=e||0>=c)){var d=b[0].length>>>1;if(!(0>=d)){var p,w=f.mallocDouble(2*d*e),y=f.mallocInt32(e),e=m(b,d,w,y);if(0<e){if(1===d&&r)l.init(e),p=l.sweepComplete(d,n,0,e,w,y,0,e,w,y);else{b=f.mallocDouble(2*d*c);var x=f.mallocInt32(c),c=m(a,d,b,x);0<c&&(l.init(e+c),p=1===d?l.sweepBipartite(d,n,0,e,w,y,0,c,b,x):h(d,n,r,e,w,y,c,b,x),f.free(b),f.free(x))}f.free(w);f.free(y)}return p}}}function b(b,a){x.push([b,a])}g.exports=function(a,
f,h){switch(arguments.length){case 1:return x=[],n(a,a,b,!0),x;case 2:if("function"===typeof f)return n(a,a,f,!0);x=[];n(a,f,b,!1);return x;case 3:return n(a,f,h,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),l=a("./lib/sweep"),h=a("./lib/intersect"),x},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,g,k){function m(b){function a(f,l){var r,e="bruteForce"+(f?"Red":"Blue")+(l?"Flip":"")+(b?"Full":"");r=["function ",e,"(",n.join(),
"){","var ","es","=2*","d",";"];var c="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(b?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?r.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",c):r.push(c,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");b?r.push("if(y1<x0||x1<y0)continue;"):l?r.push("if(y0<=x0||x1<y0)continue;"):r.push("if(y0<x0||x1<y0)continue;");r.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
l?r.push("yi,xi"):r.push("xi,yi");r.push(");if(rv!==void 0)return rv;}}}");r=r.join("");h.push(r);v.push("return "+e+"("+n.join()+");")}var l="bruteForce"+(b?"Full":"Partial"),h=[],m=n.slice();b||m.splice(3,0,"fp");var v=["function "+l+"("+m.join()+"){"];v.push("if(re-rs>be-bs){");b?(a(!0,!1),v.push("}else{"),a(!1,!1)):(v.push("if(fp){"),a(!0,!0),v.push("}else{"),a(!0,!1),v.push("}}else{if(fp){"),a(!1,!0),v.push("}else{"),a(!1,!1),v.push("}"));v.push("}}return "+l);l=h.join("")+v.join("");return(new Function(l))()}
var n="d ax vv rs re rb ri bs be bb bi".split(" ");k.partial=m(!1);k.full=m(!0)},{}],55:[function(a,g,k){function m(b,c,a,d,e,f,p,h,l){var w=y*b;q[w]=c;q[w+1]=a;q[w+2]=d;q[w+3]=e;q[w+4]=f;q[w+5]=p;b*=E;z[b]=h;z[b+1]=l}g.exports=function(a,g,k,B,I,H,C,K,J){var L=8*b.log2(B+C+1)*(a+1)|0,T=b.nextPow2(y*L);q.length<T&&(n.free(q),q=n.mallocInt32(T));L=b.nextPow2(E*L);z<L&&(n.free(z),z=n.mallocDouble(L));var L=0,T=2*a,M;m(L++,0,0,B,0,C,k?16:0,-Infinity,Infinity);for(k||m(L++,0,0,C,0,B,1,-Infinity,Infinity);0<
L;){--L;k=L*y;var N=q[k];C=q[k+1];var P=q[k+2],R=q[k+3],aa=q[k+4];k=q[k+5];B=L*E;var ha=z[B],ea=z[B+1],Y=k&1,X=!!(k&16),F=I,S=H,O=K;B=J;Y&&(F=K,S=J,O=I,B=H);if(k&2&&(P=c(a,N,C,P,F,S,ea),C>=P))continue;if(k&4&&(C=d(a,N,C,P,F,S,ha),C>=P))continue;k=P-C;var Q=aa-R;if(X){if(a*k*(k+Q)<u){M=h.scanComplete(a,N,g,C,P,F,S,R,aa,O,B);if(void 0!==M)return M;continue}}else if(a*Math.min(k,Q)<v){M=f(a,N,g,Y,C,P,F,S,R,aa,O,B);if(void 0!==M)return M;continue}else if(a*k*Q<t){M=h.scanBipartite(a,N,g,Y,C,P,F,S,R,aa,
O,B);if(void 0!==M)return M;continue}k=r(a,N,C,P,F,S,ha,ea);if(C<k)if(a*(k-C)<v){if(M=l(a,N+1,g,C,k,F,S,R,aa,O,B),void 0!==M)return M}else if(N===a-2){if(M=Y?h.sweepBipartite(a,g,R,aa,O,B,C,k,F,S):h.sweepBipartite(a,g,C,k,F,S,R,aa,O,B),void 0!==M)return M}else m(L++,N+1,C,k,R,aa,Y,-Infinity,Infinity),m(L++,N+1,R,aa,C,k,Y^1,-Infinity,Infinity);if(k<P)if(C=x(a,N,R,aa,O,B),M=O[T*C+N],Q=e(a,N,C,aa,O,B,M),Q<aa&&m(L++,N,k,P,Q,aa,(Y|4)+(X?16:0),M,ea),R<C&&m(L++,N,k,P,R,C,(Y|2)+(X?16:0),ha,M),C+1===Q){if(X)a:{R=
a;aa=g;B=B[C];Y=2*R;C*=Y;ha=O[C+N];ea=k;k*=Y;b:for(;ea<P;++ea,k+=Y)if(X=S[ea],X!==B&&(Q=F[k+N],M=F[k+N+R],!(ha<Q||M<ha))){for(var U=N+1;U<R;++U){Q=F[k+U];M=F[k+U+R];var da=O[C+U+R];if(M<O[C+U]||da<Q)continue b}X=aa(X,B);if(void 0!==X){M=X;break a}}M=void 0}else a:{R=a;aa=g;B=B[C];ha=2*R;C*=ha;ea=O[C+N];X=k;k*=ha;b:for(;X<P;++X,k+=ha)if(Q=F[k+N],M=F[k+N+R],!(ea<Q||M<ea||Y&&ea===Q)){U=S[X];for(da=N+1;da<R;++da){Q=F[k+da];M=F[k+da+R];var ga=O[C+da+R];if(M<O[C+da]||ga<Q)continue b}Q=Y?aa(B,U):aa(U,B);
if(void 0!==Q){M=Q;break a}}M=void 0}if(void 0!==M)return M}else if(C<Q)if(X){if(P=p(a,N,k,P,F,S,M),k<P)if(R=e(a,N,k,P,F,S,M),N===a-2){if(k<R&&(M=h.sweepComplete(a,g,k,R,F,S,C,Q,O,B),void 0!==M)||R<P&&(M=h.sweepBipartite(a,g,R,P,F,S,C,Q,O,B),void 0!==M))return M}else k<R&&m(L++,N+1,k,R,C,Q,16,-Infinity,Infinity),R<P&&(m(L++,N+1,R,P,C,Q,0,-Infinity,Infinity),m(L++,N+1,C,Q,R,P,1,-Infinity,Infinity))}else P=Y?w(a,N,k,P,F,S,M):p(a,N,k,P,F,S,M),k<P&&(N===a-2?Y?h.sweepBipartite(a,g,C,Q,O,B,k,P,F,S):h.sweepBipartite(a,
g,k,P,F,S,C,Q,O,B):(m(L++,N+1,k,P,C,Q,Y,-Infinity,Infinity),m(L++,N+1,C,Q,k,P,Y^1,-Infinity,Infinity)))}};var n=a("typedarray-pool"),b=a("bit-twiddle");g=a("./brute");var f=g.partial,l=g.full,h=a("./sweep"),x=a("./median");a=a("./partition");var v=128,t=4194304,u=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),e=a("lo===p0",["p0"]),c=a("lo<p0",["p0"]),d=a("hi<=p0",["p0"]),p=a("lo<=p0&&p0<=hi",["p0"]),w=a("lo<p0&&p0<=hi",["p0"]),y=6,E=2,q=n.mallocInt32(1024),z=n.mallocDouble(1024)},{"./brute":54,"./median":56,
"./partition":57,"./sweep":59,"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,g,k){g.exports=function(b,a,l,h,x,v){if(h<=l+1)return l;var t=l,u=h;h=h+l>>>1;for(var r=2*b,e=h,c=x[r*h+a];t<u;){if(u-t<n){for(var e=a,c=x,d=v,p=2*b,w=p*(t+1)+e,y=t+1;y<u;++y,w+=p)for(var g=c[w],q=y,k=p*(y-1);q>t&&c[k+e]>g;--q,k-=p){for(var D=k,G=k+p,A=0;A<p;++A,++D,++G){var B=c[D];c[D]=c[G];c[G]=B}D=d[q];d[q]=d[q-1];d[q-1]=D}break}w=u-t;e=Math.random()*w+t|0;c=x[r*e+a];p=Math.random()*w+t|0;d=x[r*p+a];y=Math.random()*
w+t|0;w=x[r*y+a];c<=d?w>=d?(e=p,c=d):c>=w||(e=y,c=w):d>=w?(e=p,c=d):w>=c||(e=y,c=w);d=r*(u-1);p=r*e;for(w=0;w<r;++w,++d,++p)y=x[d],x[d]=x[p],x[p]=y;d=v[u-1];v[u-1]=v[e];v[e]=d;e=m(b,a,t,u-1,x,v,c);d=r*(u-1);p=r*e;for(w=0;w<r;++w,++d,++p)y=x[d],x[d]=x[p],x[p]=y;d=v[u-1];v[u-1]=v[e];v[e]=d;if(h<e){for(u=e-1;t<u&&x[r*(u-1)+a]===c;)--u;u+=1}else if(e<h)for(t=e+1;t<u&&x[r*t+a]===c;)t+=1;else break}return m(b,a,l,h,x,v,x[r*h+a])};var m=a("./partition")("lo<p0",["p0"]),n=8},{"./partition":57}],57:[function(a,
g,k){g.exports=function(a,b){var f="abcdef".split("").concat(b),l=[];0<=a.indexOf("lo")&&l.push("lo=e[k+n]");0<=a.indexOf("hi")&&l.push("hi=e[k+o]");f.push(m.replace("_",l.join()).replace("$",a));return Function.apply(void 0,f)};var m="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,g,k){function m(b,a,f){for(var e=2*(b+1),c=b+1;c<=a;++c){for(var d=
f[e++],p=f[e++],h=c,l=e-2;h-- >b;){var n=f[l-2],q=f[l-1];if(n<d)break;else if(n===d&&q<p)break;f[l]=n;f[l+1]=q;l-=2}f[l]=d;f[l+1]=p}}function n(b,a,f){b*=2;a*=2;var e=f[b],c=f[b+1];f[b]=f[a];f[b+1]=f[a+1];f[a]=e;f[a+1]=c}function b(b,a,f){b*=2;a*=2;f[b]=f[a];f[b+1]=f[a+1]}function f(b,a,f,e,c){b*=2;a*=2;c[b]=c[a];c[a]=f;c[b+1]=c[a+1];c[a+1]=e}function l(b,a,f){b*=2;a*=2;var e=f[b],c=f[a];return e<c?!1:e===c?f[b+1]>f[a+1]:!0}function h(b,a,f,e){b*=2;var c=e[b];return c<a?!0:c===a?e[b+1]<f:!1}function x(a,
u,r){var e=(u-a+1)/6|0,c=a+e,d=u-e,p=a+u>>1,w=p-e,y=p+e,g=c,q=w,k=p,D=y,G=d,e=a+1,A=u-1,B=0;l(g,q,r)&&(B=g,g=q,q=B);l(D,G,r)&&(B=D,D=G,G=B);l(g,k,r)&&(B=g,g=k,k=B);l(q,k,r)&&(B=q,q=k,k=B);l(g,D,r)&&(B=g,g=D,D=B);l(k,D,r)&&(B=k,k=D,D=B);l(q,G,r)&&(B=q,q=G,G=B);l(q,k,r)&&(B=q,q=k,k=B);l(D,G,r)&&(B=D,D=G,G=B);for(var B=r[2*q],q=r[2*q+1],I=r[2*D],D=r[2*D+1],g=2*g,k=2*k,G=2*G,c=2*c,p=2*p,d=2*d,H=0;2>H;++H){var C=r[k+H],K=r[G+H];r[c+H]=r[g+H];r[p+H]=C;r[d+H]=K}b(w,a,r);b(y,u,r);for(w=e;w<=A;++w)if(h(w,
B,q,r))w!==e&&n(w,e,r),++e;else if(!h(w,I,D,r))for(;;)if(h(A,I,D,r)){h(A,B,q,r)?(y=w,d=e,p=A,g=r,y*=2,d*=2,p*=2,c=g[y],k=g[y+1],g[y]=g[d],g[y+1]=g[d+1],g[d]=g[p],g[d+1]=g[p+1],g[p]=c,g[p+1]=k,++e):n(w,A,r);--A;break}else if(--A<w)break;f(a,e-1,B,q,r);f(u,A+1,I,D,r);e-2-a<=v?m(a,e-2,r):x(a,e-2,r);u-(A+2)<=v?m(A+2,u,r):x(A+2,u,r);A-e<=v?m(e,A,r):x(e,A,r)}g.exports=function(b,a){a<=4*v?m(0,a-1,b):x(0,a-1,b)};var v=32},{}],59:[function(a,g,k){function m(b,a,e,f){f=a[f];e=b[e-1];b[f]=e;a[e]=f}g.exports=
{init:function(c){c=b.nextPow2(c);h.length<c&&(n.free(h),h=n.mallocInt32(c));x.length<c&&(n.free(x),x=n.mallocInt32(c));v.length<c&&(n.free(v),v=n.mallocInt32(c));t.length<c&&(n.free(t),t=n.mallocInt32(c));u.length<c&&(n.free(u),u=n.mallocInt32(c));r.length<c&&(n.free(r),r=n.mallocInt32(c));c*=8;e.length<c&&(n.free(e),e=n.mallocDouble(c))},sweepBipartite:function(b,a,p,w,n,r,q,u,g,k){var A=0,B=2*b;--b;for(var I=B-1;p<w;++p){var H=r[p],C=B*p;e[A++]=n[C+b];e[A++]=-(H+1);e[A++]=n[C+I];e[A++]=H}for(p=
q;p<u;++p)H=k[p]+l,w=B*p,e[A++]=g[w+b],e[A++]=-H,e[A++]=g[w+I],e[A++]=H;u=A>>>1;f(e,u);for(p=k=g=0;p<u;++p)if(A=e[2*p+1]|0,A>=l)A=A-l|0,m(v,t,k--,A);else if(0<=A)m(h,x,g--,A);else{if(A<=-l){A=-A-l|0;for(B=0;B<g;++B)if(w=a(h[B],A),void 0!==w)return w;B=t;w=k++;v[w]=A}else{A=-A-1|0;for(B=0;B<k;++B)if(w=a(A,v[B]),void 0!==w)return w;B=x;w=g++;h[w]=A}B[A]=w}},sweepComplete:function(b,a,p,l,n,g,q,k,D,G){var A=0,B=2*b;--b;for(var I=B-1;p<l;++p){var H=g[p]+1<<1,C=B*p;e[A++]=n[C+b];e[A++]=-H;e[A++]=n[C+I];
e[A++]=H}for(p=q;p<k;++p)H=G[p]+1<<1,l=B*p,e[A++]=D[l+b],e[A++]=-H|1,e[A++]=D[l+I],e[A++]=H|1;k=A>>>1;f(e,k);for(p=A=G=D=0;p<k;++p)if(B=e[2*p+1]|0,l=B&1,p<k-1&&B>>1===e[2*p+3]>>1&&(l=2,p+=1),0>B){B=-(B>>1)-1;for(n=0;n<A;++n)if(g=a(u[n],B),void 0!==g)return g;if(0!==l)for(n=0;n<D;++n)if(g=a(h[n],B),void 0!==g)return g;if(1!==l)for(n=0;n<G;++n)if(g=a(v[n],B),void 0!==g)return g;0===l?(l=x,n=D++,h[n]=B,l[B]=n):1===l?(l=t,n=G++,v[n]=B,l[B]=n):2===l&&(l=r,n=A++,u[n]=B,l[B]=n)}else B=(B>>1)-1,0===l?m(h,
x,D--,B):1===l?m(v,t,G--,B):2===l&&m(u,r,A--,B)},scanBipartite:function(b,a,p,w,n,r,q,u,v,g,t,k){var I=0,H=2*b,C=a+b,K=1,J=1;for(w?J=l:K=l;n<r;++n){var L=n+K,T=H*n;e[I++]=q[T+a];e[I++]=-L;e[I++]=q[T+C];e[I++]=L}for(n=v;n<g;++n)L=n+J,r=H*n,e[I++]=t[r+a],e[I++]=-L;g=I>>>1;f(e,g);for(n=I=0;n<g;++n)if(L=e[2*n+1]|0,0>L)if(L=-L,J=!1,L>=l?(J=!w,L-=l):(J=!!w,--L),J)J=x,r=I++,h[r]=L,J[L]=r;else a:for(J=k[L],L*=H,r=t[L+a+1],v=t[L+a+1+b],C=0;C<I;++C){var T=h[C],M=H*T;if(!(v<q[M+a+1]||q[M+a+1+b]<r)){for(var N=
a+2;N<b;++N)if(t[L+N+b]<q[M+N]||q[M+N+b]<t[L+N])continue a;T=u[T];T=w?p(J,T):p(T,J);if(void 0!==T)return T}}else m(h,x,I--,L-K)},scanComplete:function(b,a,p,w,n,r,q,m,u,g,v){for(var x=0,t=2*b,k=a+b;w<n;++w){var C=w+l,K=t*w;e[x++]=r[K+a];e[x++]=-C;e[x++]=r[K+k];e[x++]=C}for(w=m;w<u;++w)C=w+1,n=t*w,e[x++]=g[n+a],e[x++]=-C;u=x>>>1;f(e,u);for(w=x=0;w<u;++w)if(n=e[2*w+1]|0,0>n)if(C=-n,C>=l)h[x++]=C-l;else a:for(--C,n=v[C],C*=t,k=g[C+a+1],K=g[C+a+1+b],m=0;m<x;++m){var J=h[m],L=q[J];if(L===n)break;J*=t;
if(!(K<r[J+a+1]||r[J+a+1+b]<k)){for(var T=a+2;T<b;++T)if(g[C+T+b]<r[J+T]||r[J+T+b]<g[C+T])continue a;L=p(L,n);if(void 0!==L)return L}}else{C=n-l;for(m=x-1;0<=m;--m)if(h[m]===C){for(T=m+1;T<x;++T)h[T-1]=h[T];break}--x}}};var n=a("typedarray-pool"),b=a("bit-twiddle"),f=a("./sort"),l=268435456,h=n.mallocInt32(1024),x=n.mallocInt32(1024),v=n.mallocInt32(1024),t=n.mallocInt32(1024),u=n.mallocInt32(1024),r=n.mallocInt32(1024),e=n.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],
60:[function(a,g,k){(function(m){function n(){try{var b=new Uint8Array(1);b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function b(c){if(!(this instanceof b))return 1<arguments.length?new b(c,arguments[1]):new b(c);b.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0);if("number"===typeof c){var a;a=h(this,0>c?0:x(c)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var d=0;d<c;d++)a[d]=0;return a}if("string"===typeof c){a=this;
d=1<arguments.length?arguments[1]:"utf8";if("string"!==typeof d||""===d)d="utf8";var e=t(c,d)|0;a=h(a,e);a.write(c,d);return a}return f(this,c)}function f(c,a){if(b.isBuffer(a)){var d=c,e=x(a.length)|0,d=h(d,e);a.copy(d,0,0,e);return d}if(I(a)){for(var d=c,e=x(a.length)|0,d=h(d,e),f=0;f<e;f+=1)d[f]=a[f]&255;return d}if(null==a)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(a.buffer instanceof ArrayBuffer)return l(c,a);if(a instanceof
ArrayBuffer)return d=c,a.byteLength,b.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(a),d.__proto__=b.prototype):d=l(d,new Uint8Array(a)),d}if(a.length){d=c;e=x(a.length)|0;d=h(d,e);for(f=0;f<e;f+=1)d[f]=a[f]&255;return d}d=c;f=0;"Buffer"===a.type&&I(a.data)&&(e=a.data,f=x(e.length)|0);for(var d=h(d,f),p=0;p<f;p+=1)d[p]=e[p]&255;return d}function l(b,a){var c=x(a.length)|0;b=h(b,c);for(var d=0;d<c;d+=1)b[d]=a[d]&255;return b}function h(a,c){b.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(c),a.__proto__=b.prototype):
a.length=c;0!==c&&c<=b.poolSize>>>1&&(a.parent=H);return a}function x(a){if(a>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function g(a,c){if(!(this instanceof g))return new g(a,c);var d=new b(a,c);delete d.parent;return d}function t(b,a){"string"!==typeof b&&(b=""+b);var c=b.length;if(0===c)return 0;for(var d=!1;;)switch(a){case "ascii":case "binary":case "raw":case "raws":return c;
case "utf8":case "utf-8":return z(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return A.toByteArray(q(b)).length;default:if(d)return z(b).length;a=(""+a).toLowerCase();d=!0}}function u(b,a,c){var d=!1;a|=0;c=void 0===c||Infinity===c?this.length:c|0;b||(b="utf8");0>a&&(a=0);c>this.length&&(c=this.length);if(c<=a)return"";for(;;)switch(b){case "hex":b=a;a=c;c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;d="";for(c=b;c<a;c++)b=d,
d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return r(this,a,c);case "ascii":b="";for(c=Math.min(this.length,c);a<c;a++)b+=String.fromCharCode(this[a]&127);return b;case "binary":b="";for(c=Math.min(this.length,c);a<c;a++)b+=String.fromCharCode(this[a]);return b;case "base64":return a=0===a&&c===this.length?A.fromByteArray(this):A.fromByteArray(this.slice(a,c)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,c);c="";for(b=0;b<
a.length;b+=2)c+=String.fromCharCode(a[b]+256*a[b+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function r(b,a,c){c=Math.min(b.length,c);for(var d=[];a<c;){var e=b[a],f=null,p=239<e?4:223<e?3:191<e?2:1;if(a+p<=c){var h,l,q;switch(p){case 1:128>e&&(f=e);break;case 2:h=b[a+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=b[a+1];l=b[a+2];128===(h&192)&&128===(l&192)&&(e=(e&15)<<12|(h&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(f=e));break;
case 4:h=b[a+1],l=b[a+2],q=b[a+3],128===(h&192)&&128===(l&192)&&128===(q&192)&&(e=(e&15)<<18|(h&63)<<12|(l&63)<<6|q&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,p=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);a+=p}b=d.length;if(b<=C)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=C));d=c}return d}function e(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>c)throw new RangeError("Trying to access beyond buffer length");
}function c(a,c,d,e,f,p){if(!b.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(c>f||c<p)throw new RangeError("value is out of bounds");if(d+e>a.length)throw new RangeError("index out of range");}function d(b,a,c,d){0>a&&(a=65535+a+1);for(var e=0,f=Math.min(b.length-c,2);e<f;e++)b[c+e]=(a&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function p(b,a,c,d){0>a&&(a=4294967295+a+1);for(var e=0,f=Math.min(b.length-c,4);e<f;e++)b[c+e]=a>>>8*(d?e:3-e)&255}function w(b,a,c,d,e,f){if(c+d>b.length)throw new RangeError("index out of range");
if(0>c)throw new RangeError("index out of range");}function y(b,a,c,d,e){e||w(b,a,c,4,3.4028234663852886E38,-3.4028234663852886E38);B.write(b,a,c,d,23,4);return c+4}function E(b,a,c,d,e){e||w(b,a,c,8,1.7976931348623157E308,-1.7976931348623157E308);B.write(b,a,c,d,52,8);return c+8}function q(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(K,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function z(b,a){a=a||Infinity;for(var c,d=b.length,e=null,f=[],p=0;p<d;p++){c=b.charCodeAt(p);
if(55295<c&&57344>c){if(!e){if(56319<c){-1<(a-=3)&&f.push(239,191,189);continue}else if(p+1===d){-1<(a-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(a-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(a-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--a)break;f.push(c)}else if(2048>c){if(0>(a-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;f.push(c>>18|
240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function D(b){for(var a=[],c=0;c<b.length;c++)a.push(b.charCodeAt(c)&255);return a}function G(b,a,c,d){for(var e=0;e<d&&!(e+c>=a.length||e>=b.length);e++)a[e+c]=b[e];return e}var A=a("base64-js"),B=a("ieee754"),I=a("isarray");k.Buffer=b;k.SlowBuffer=g;k.INSPECT_MAX_BYTES=50;b.poolSize=8192;var H={};b.TYPED_ARRAY_SUPPORT=void 0!==m.TYPED_ARRAY_SUPPORT?m.TYPED_ARRAY_SUPPORT:n();b._augment=function(a){a.__proto__=
b.prototype;return a};b.TYPED_ARRAY_SUPPORT?(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.species,{value:null,configurable:!0}))):(b.prototype.length=void 0,b.prototype.parent=void 0);b.isBuffer=function(b){return!(null==b||!b._isBuffer)};b.compare=function(a,c){if(!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError("Arguments must be Buffers");
if(a===c)return 0;for(var d=a.length,e=c.length,f=0,p=Math.min(d,e);f<p;++f)if(a[f]!==c[f]){d=a[f];e=c[f];break}return d<e?-1:e<d?1:0};b.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(a,c){if(!I(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new b(0);var d;if(void 0===
c)for(d=c=0;d<a.length;d++)c+=a[d].length;var e=new b(c),f=0;for(d=0;d<a.length;d++){var p=a[d];p.copy(e,f);f+=p.length}return e};b.byteLength=t;b.prototype._isBuffer=!0;b.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?r(this,0,b):u.apply(this,arguments)};b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var b="",a=k.INSPECT_MAX_BYTES;0<this.length&&
(b=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(b+=" ... "));return"<Buffer "+b+">"};b.prototype.compare=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return b.compare(this,a)};b.prototype.indexOf=function(a,c){function d(b,a,c){for(var e=-1,f=0;c+f<b.length;f++)if(b[c+f]===a[-1===e?0:f-e]){if(-1===e&&(e=f),f-e+1===a.length)return c+e}else e=-1;return-1}2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c>>=0;if(0===this.length||c>=this.length)return-1;
0>c&&(c=Math.max(this.length+c,0));if("string"===typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,c);if(b.isBuffer(a))return d(this,a,c);if("number"===typeof a)return b.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,c):d(this,[a],c);throw new TypeError("val must be string, number or Buffer");};b.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=this.length,a=0;else if(void 0===c&&"string"===typeof a)d=a,c=this.length,
a=0;else if(isFinite(a))a|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=a;a=c|0;c=e}e=this.length-a;if(void 0===c||c>e)c=e;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=d)):c=d;d=b.length;if(0!==d%2)throw Error("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;d++){e=parseInt(b.substr(2*d,2),16);if(isNaN(e))throw Error("Invalid hex string");
this[a+d]=e}return d;case "utf8":case "utf-8":return G(z(b,this.length-a),this,a,c);case "ascii":return G(D(b),this,a,c);case "binary":return G(D(b),this,a,c);case "base64":return G(A.toByteArray(q(b)),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-a;for(var f=void 0,f=e=void 0,p=[],h=0;h<b.length&&!(0>(d-=2));h++)f=b.charCodeAt(h),e=f>>8,f%=256,p.push(f),p.push(e);return G(p,this,a,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();
e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;b.prototype.slice=function(a,c){var d=this.length;a=~~a;c=void 0===c?d:~~c;0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<a&&(c=a);if(b.TYPED_ARRAY_SUPPORT)d=this.subarray(a,c),d.__proto__=b.prototype;else for(var e=c-a,d=new b(e,void 0),f=0;f<e;f++)d[f]=this[f+a];d.length&&(d.parent=this.parent||this);return d};b.prototype.readUIntLE=function(b,a,c){b|=0;
a|=0;c||e(b,a,this.length);c=this[b];for(var d=1,f=0;++f<a&&(d*=256);)c+=this[b+f]*d;return c};b.prototype.readUIntBE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};b.prototype.readUInt8=function(b,a){a||e(b,1,this.length);return this[b]};b.prototype.readUInt16LE=function(b,a){a||e(b,2,this.length);return this[b]|this[b+1]<<8};b.prototype.readUInt16BE=function(b,a){a||e(b,2,this.length);return this[b]<<8|this[b+1]};b.prototype.readUInt32LE=
function(b,a){a||e(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};b.prototype.readUInt32BE=function(b,a){a||e(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};b.prototype.readIntLE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=this[b];for(var d=1,f=0;++f<a&&(d*=256);)c+=this[b+f]*d;c>=128*d&&(c-=Math.pow(2,8*a));return c};b.prototype.readIntBE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=a;for(var d=1,f=this[b+--c];0<c&&(d*=
256);)f+=this[b+--c]*d;f>=128*d&&(f-=Math.pow(2,8*a));return f};b.prototype.readInt8=function(b,a){a||e(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};b.prototype.readInt16LE=function(b,a){a||e(b,2,this.length);var c=this[b]|this[b+1]<<8;return c&32768?c|4294901760:c};b.prototype.readInt16BE=function(b,a){a||e(b,2,this.length);var c=this[b+1]|this[b]<<8;return c&32768?c|4294901760:c};b.prototype.readInt32LE=function(b,a){a||e(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<
16|this[b+3]<<24};b.prototype.readInt32BE=function(b,a){a||e(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};b.prototype.readFloatLE=function(b,a){a||e(b,4,this.length);return B.read(this,b,!0,23,4)};b.prototype.readFloatBE=function(b,a){a||e(b,4,this.length);return B.read(this,b,!1,23,4)};b.prototype.readDoubleLE=function(b,a){a||e(b,8,this.length);return B.read(this,b,!0,52,8)};b.prototype.readDoubleBE=function(b,a){a||e(b,8,this.length);return B.read(this,b,!1,52,8)};
b.prototype.writeUIntLE=function(b,a,d,e){b=+b;a|=0;d|=0;e||c(this,b,a,d,Math.pow(2,8*d),0);e=1;var f=0;for(this[a]=b&255;++f<d&&(e*=256);)this[a+f]=b/e&255;return a+d};b.prototype.writeUIntBE=function(b,a,d,e){b=+b;a|=0;d|=0;e||c(this,b,a,d,Math.pow(2,8*d),0);e=d-1;var f=1;for(this[a+e]=b&255;0<=--e&&(f*=256);)this[a+e]=b/f&255;return a+d};b.prototype.writeUInt8=function(a,d,e){a=+a;d|=0;e||c(this,a,d,1,255,0);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[d]=a&255;return d+1};b.prototype.writeUInt16LE=
function(a,e,f){a=+a;e|=0;f||c(this,a,e,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[e]=a&255,this[e+1]=a>>>8):d(this,a,e,!0);return e+2};b.prototype.writeUInt16BE=function(a,e,f){a=+a;e|=0;f||c(this,a,e,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[e]=a>>>8,this[e+1]=a&255):d(this,a,e,!1);return e+2};b.prototype.writeUInt32LE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d+3]=a>>>24,this[d+2]=a>>>16,this[d+1]=a>>>8,this[d]=a&255):p(this,a,d,!0);return d+4};b.prototype.writeUInt32BE=
function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):p(this,a,d,!1);return d+4};b.prototype.writeIntLE=function(b,a,d,e){b=+b;a|=0;e||(e=Math.pow(2,8*d-1),c(this,b,a,d,e-1,-e));e=0;var f=1,p=0>b?1:0;for(this[a]=b&255;++e<d&&(f*=256);)this[a+e]=(b/f>>0)-p&255;return a+d};b.prototype.writeIntBE=function(b,a,d,e){b=+b;a|=0;e||(e=Math.pow(2,8*d-1),c(this,b,a,d,e-1,-e));e=d-1;var f=1,p=0>b?1:0;for(this[a+e]=b&255;0<=
--e&&(f*=256);)this[a+e]=(b/f>>0)-p&255;return a+d};b.prototype.writeInt8=function(a,d,e){a=+a;d|=0;e||c(this,a,d,1,127,-128);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[d]=a&255;return d+1};b.prototype.writeInt16LE=function(a,e,f){a=+a;e|=0;f||c(this,a,e,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[e]=a&255,this[e+1]=a>>>8):d(this,a,e,!0);return e+2};b.prototype.writeInt16BE=function(a,e,f){a=+a;e|=0;f||c(this,a,e,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[e]=a>>>8,this[e+1]=a&
255):d(this,a,e,!1);return e+2};b.prototype.writeInt32LE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[d]=a&255,this[d+1]=a>>>8,this[d+2]=a>>>16,this[d+3]=a>>>24):p(this,a,d,!0);return d+4};b.prototype.writeInt32BE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):p(this,a,d,!1);return d+4};b.prototype.writeFloatLE=function(b,
a,c){return y(this,b,a,!0,c)};b.prototype.writeFloatBE=function(b,a,c){return y(this,b,a,!1,c)};b.prototype.writeDoubleLE=function(b,a,c){return E(this,b,a,!0,c)};b.prototype.writeDoubleBE=function(b,a,c){return E(this,b,a,!1,c)};b.prototype.copy=function(a,c,d,e){d||(d=0);e||0===e||(e=this.length);c>=a.length&&(c=a.length);c||(c=0);0<e&&e<d&&(e=d);if(e===d||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");
if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-c<e-d&&(e=a.length-c+d);var f=e-d;if(this===a&&d<c&&c<e)for(e=f-1;0<=e;e--)a[e+c]=this[e+d];else if(1E3>f||!b.TYPED_ARRAY_SUPPORT)for(e=0;e<f;e++)a[e+c]=this[e+d];else Uint8Array.prototype.set.call(a,this.subarray(d,d+f),c);return f};b.prototype.fill=function(b,a,c){b||(b=0);a||(a=0);c||(c=this.length);if(c<a)throw new RangeError("end < start");if(c!==a&&0!==this.length){if(0>a||a>=this.length)throw new RangeError("start out of bounds");
if(0>c||c>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;a<c;a++)this[a]=b;else{b=z(b.toString());for(var d=b.length;a<c;a++)this[a]=b[a%d]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:82,isarray:61}],61:[function(a,g,k){var m={}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==m.call(a)}},{}],62:[function(a,
g,k){function m(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function n(b,a){return b[0]-a[0]||b[1]-a[1]}function b(b,a,f){return a in b?b[a]:f}var f=a("./lib/monotone"),l=a("./lib/triangulation"),h=a("./lib/delaunay"),x=a("./lib/filter");g.exports=function(a,g,u){Array.isArray(g)?(u=u||{},g=g||[]):(u=g||{},g=[]);var r=!!b(u,"delaunay",!0),e=!!b(u,"interior",!0),c=!!b(u,"exterior",!0);u=!!b(u,"infinity",!1);if(!e&&!c||0===a.length)return[];var d=f(a,g);if(r||e!==c||u){g=l(a.length,g.map(m).sort(n));
for(var p=0;p<d.length;++p){var w=d[p];g.addTriangle(w[0],w[1],w[2])}r&&h(a,g);return c?e?u?x(g,0,u):g.cells():x(g,1,u):x(g,-1)}return d}},{"./lib/delaunay":63,"./lib/filter":64,"./lib/monotone":65,"./lib/triangulation":66}],63:[function(a,g,k){function m(b,a,l,h,m,g){var t=a.opposite(h,m);if(!(0>t)){if(m<h){var u=h;h=m;m=u;u=g;g=t;t=u}a.isConstraint(h,m)||0>n(b[h],b[m],b[g],b[t])&&l.push(h,m)}}var n=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(b,a){for(var l=[],h=b.length,
g=a.stars,v=0;v<h;++v)for(var t=g[v],u=1;u<t.length;u+=2){var r=t[u];if(!(r<v||a.isConstraint(v,r))){for(var e=t[u-1],c=-1,d=1;d<t.length;d+=2)if(t[d-1]===r){c=t[d];break}0>c||0>n(b[v],b[r],b[e],b[c])&&l.push(v,r)}}for(;0<l.length;){r=l.pop();v=l.pop();c=e=-1;t=g[v];for(h=1;h<t.length;h+=2)u=t[h-1],d=t[h],u===r?c=d:d===r&&(e=u);0>e||0>c||0<=n(b[v],b[r],b[e],b[c])||(a.flip(v,r),m(b,a,l,e,v,c),m(b,a,l,v,c,e),m(b,a,l,c,r,e),m(b,a,l,r,e,c))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],64:[function(a,
g,k){function m(b,a,h,n,m,g,u){this.cells=b;this.neighbor=a;this.flags=n;this.constraint=h;this.active=m;this.next=g;this.boundary=u}function n(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var b=a("binary-search-bounds");g.exports=function(b,a,h){for(var g=b.cells(),v=g.length,t=0;t<v;++t){var u=g[t],r=u[0],e=u[1],c=u[2];e<c?e<r&&(u[0]=e,u[1]=c,u[2]=r):c<r&&(u[0]=c,u[1]=r,u[2]=e)}g.sort(n);for(var d=Array(v),t=0;t<d.length;++t)d[t]=0;var p=[],w=[],y=Array(3*v),k=Array(3*v),q=null;h&&(q=[]);c=new m(g,
y,k,d,p,w,q);for(t=0;t<v;++t)for(var u=g[t],z=0;3>z;++z){var r=u[z],e=u[(z+1)%3],D=y[3*t+z]=c.locate(e,r,b.opposite(e,r)),G=k[3*t+z]=b.isConstraint(r,e);0>D&&(G?w.push(t):(p.push(t),d[t]=1),h&&q.push([e,r,-1]))}if(0===a)return h?c.cells.concat(c.boundary):c.cells;v=1;t=c.active;u=c.next;b=c.flags;g=c.cells;r=c.constraint;for(e=c.neighbor;0<t.length||0<u.length;){for(;0<t.length;)if(d=t.pop(),b[d]!==-v)for(b[d]=v,p=0;3>p;++p)w=e[3*d+p],0<=w&&0===b[w]&&(r[3*d+p]?u.push(w):(t.push(w),b[w]=v));d=u;u=
t;t=d;u.length=0;v=-v}for(t=v=0;t<g.length;++t)b[t]===a&&(g[v++]=g[t]);g.length=v;return h?g.concat(c.boundary):g};m.prototype.locate=function(){var a=[0,0,0];return function(l,h,m){var g=l,t=h,u=m;h<m?h<l&&(g=h,t=m,u=l):m<l&&(g=m,t=l,u=h);if(0>g)return-1;a[0]=g;a[1]=t;a[2]=u;return b.eq(this.cells,a,n)}}()},{"binary-search-bounds":51}],65:[function(a,g,k){function m(b,a,f,h,e){this.a=b;this.b=a;this.idx=f;this.lowerIds=h;this.upperIds=e}function n(b,a,f,h){this.a=b;this.b=a;this.type=f;this.idx=
h}function b(b,a){var f=b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return f||0!==b.type&&(f=x(b.a,b.b,a.b))?f:b.idx-a.idx}function f(b,a){return x(b.a,b.b,a)}function l(b,a){var f;return(f=b.a[0]<a.a[0]?x(b.a,b.b,a.a):x(a.b,a.a,b.a))?f:(f=a.b[0]<b.b[0]?x(b.a,b.b,a.b):x(a.b,a.a,b.b))||b.idx-a.idx}var h=a("binary-search-bounds"),x=a("robust-orientation")[3];g.exports=function(a,g){for(var u=a.length,r=g.length,e=[],c=0;c<u;++c)e.push(new n(a[c],null,0,c));for(c=0;c<r;++c){var d=g[c],u=a[d[0]],d=a[d[1]];
u[0]<d[0]?e.push(new n(u,d,2,c),new n(d,u,1,c)):u[0]>d[0]&&e.push(new n(d,u,2,c),new n(u,d,1,c))}e.sort(b);c=e[0].a[0]-(1+Math.abs(e[0].a[0]))*Math.pow(2,-52);r=[new m([c,1],[c,0],-1,[],[],[],[])];u=[];c=0;for(d=e.length;c<d;++c){var p=e[c],w=p.type;if(0===w)for(var w=u,y=r,k=a,q=p.a,p=p.idx,z=h.lt(y,q,f),D=h.gt(y,q,f);z<D;++z){for(var G=y[z],A=G.lowerIds,B=A.length;1<B&&0<x(k[A[B-2]],k[A[B-1]],q);)w.push([A[B-1],A[B-2],p]),--B;A.length=B;A.push(p);G=G.upperIds;for(B=G.length;1<B&&0>x(k[G[B-2]],k[G[B-
1]],q);)w.push([G[B-2],G[B-1],p]),--B;G.length=B;G.push(p)}else 2===w?(w=r,y=p,k=h.le(w,y,l),q=w[k],p=q.upperIds,D=p[p.length-1],q.upperIds=[D],w.splice(k+1,0,new m(y.a,y.b,y.idx,[D],p))):(w=r,y=p,k=y.a,y.a=y.b,y.b=k,y=h.eq(w,y,l),w[y-1].upperIds=w[y].upperIds,w.splice(y,1))}return u}},{"binary-search-bounds":51,"robust-orientation":103}],66:[function(a,g,k){function m(b,a){this.stars=b;this.edges=a}function n(b,a,h){for(var n=1,m=b.length;n<m;n+=2)if(b[n-1]===a&&b[n]===h){b[n-1]=b[m-2];b[n]=b[m-
1];b.length=m-2;break}}var b=a("binary-search-bounds");g.exports=function(b,a){for(var h=Array(b),n=0;n<b;++n)h[n]=[];return new m(h,a)};a=m.prototype;a.isConstraint=function(){function a(b,f){return b[0]-f[0]||b[1]-f[1]}var l=[0,0];return function(h,n){l[0]=Math.min(h,n);l[1]=Math.max(h,n);return 0<=b.eq(this.edges,l,a)}}();a.removeTriangle=function(b,a,h){var m=this.stars;n(m[b],a,h);n(m[a],h,b);n(m[h],b,a)};a.addTriangle=function(b,a,h){var n=this.stars;n[b].push(a,h);n[a].push(h,b);n[h].push(b,
a)};a.opposite=function(b,a){for(var h=this.stars[a],n=1,m=h.length;n<m;n+=2)if(h[n]===b)return h[n-1];return-1};a.flip=function(b,a){var h=this.opposite(b,a),n=this.opposite(a,b);this.removeTriangle(b,a,h);this.removeTriangle(a,b,n);this.addTriangle(b,n,h);this.addTriangle(a,h,n)};a.edges=function(){for(var b=this.stars,a=[],h=0,n=b.length;h<n;++h)for(var m=b[h],g=0,u=m.length;g<u;g+=2)a.push([m[g],m[g+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],h=0,n=b.length;h<n;++h)for(var m=b[h],
g=0,u=m.length;g<u;g+=2){var r=m[g],e=m[g+1];h<Math.min(r,e)&&a.push([h,r,e])}return a}},{"binary-search-bounds":51}],67:[function(a,g,k){function m(b){var a=d(b);b=c(e(a),b);return 0>b?[a,w(a,Infinity)]:0<b?[w(a,-Infinity),a]:[a,a]}function n(b,a,c){var d=[];u(c,function(c,e){var f=a[c],p=a[e];f[0]!==p[0]&&f[0]!==p[1]&&f[1]!==p[0]&&f[1]!==p[1]&&r(b[f[0]],b[f[1]],b[p[0]],b[p[1]])&&d.push([c,e])});return d}function b(b,a,c,d){var e=[];u(c,d,function(c,d){var f=a[c];if(f[0]!==d&&f[1]!==d){var p=b[d];
r(b[f[0]],b[f[1]],p,p)&&e.push([c,d])}});return e}function f(b,a,d,f,h){function l(a){if(a>=b.length)return n[a-b.length];a=b[a];return[e(a[0]),e(a[1])]}for(var n=[],w=0;w<d.length;++w){var m=d[w],r=m[0],m=m[1],g=a[r],u=a[m];if(g=y(p(b[g[0]]),p(b[g[1]]),p(b[u[0]]),p(b[u[1]])))u=n.length+b.length,n.push(g),f.push([r,u],[m,u])}f.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];var d=l(b[1]),e=l(a[1]);return c(d[0],e[0])||c(d[1],e[1])});for(w=f.length-1;0<=w;--w){m=f[w];r=m[0];g=a[r];u=g[0];d=g[1];
var k=b[u],x=b[d];0>(k[0]-x[0]||k[1]-x[1])&&(k=u,u=d,d=k);g[0]=u;var u=g[1]=m[1],t;for(h&&(t=g[2]);0<w&&f[w-1][0]===r;)m=f[--w],m=m[1],h?a.push([u,m,t]):a.push([u,m]),u=m;h?a.push([u,d,t]):a.push([u,d])}return n}function l(b,a,c){for(var e=b.length+a.length,f=new t(e),p=0;p<a.length;++p){var h=a[p],l=m(h[0]),n=m(h[1]);c.push([l[0],n[0],l[1],n[1]]);b.push([d(h[0]),d(h[1])])}u(c,function(b,a){f.link(b,a)});a=0;c=!0;h=Array(e);for(p=0;p<e;++p)f.find(p)===p?(h[p]=a,b[a++]=b[p]):(c=!1,h[p]=-1);b.length=
a;if(c)return null;for(p=0;p<e;++p)0>h[p]&&(h[p]=h[f.find(p)]);return h}function h(b,a){return b[0]-a[0]||b[1]-a[1]}function x(b,a){var c=b[0]-a[0]||b[1]-a[1];return c?c:b[2]<a[2]?-1:b[2]>a[2]?1:0}function v(a,c,d){for(var e=Array(c.length),p=0;p<c.length;++p){var w=c[p],m=a[w[0]],w=a[w[1]];e[p]=[Math.min(m[0],w[0]),Math.min(m[1],w[1]),Math.max(m[0],w[0]),Math.max(m[1],w[1])]}p=n(a,c,e);m=Array(a.length);for(w=0;w<a.length;++w){var r=a[w];m[w]=[r[0],r[1],r[0],r[1]]}e=b(a,c,e,m);w=f(a,c,p,e,d);a=l(a,
w,m);if(0!==c.length){if(a)for(m=0;m<c.length;++m){var w=c[m],r=a[w[0]],g=a[w[1]];w[0]=Math.min(r,g);w[1]=Math.max(r,g)}else for(m=0;m<c.length;++m)w=c[m],r=w[0],g=w[1],w[0]=Math.min(r,g),w[1]=Math.max(r,g);d?c.sort(x):c.sort(h);for(m=w=1;m<c.length;++m)if(r=c[m-1],g=c[m],g[0]!==r[0]||g[1]!==r[1]||d&&g[2]!==r[2])c[w++]=g;c.length=w}return a?!0:0<p.length||0<e.length}g.exports=function(b,a,c){var d=!1,e;if(c){e=a;for(var f=Array(a.length),p=0;p<a.length;++p){var h=a[p];f[p]=[h[0],h[1],c[p]]}a=f}for(;v(b,
a,!!c);)d=!0;if(c&&d)for(e.length=0,p=c.length=0;p<a.length;++p)h=a[p],e.push([h[0],h[1]]),c.push(h[2]);return d};var t=a("union-find"),u=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),e=a("big-rat"),c=a("big-rat/cmp"),d=a("big-rat/to-float"),p=a("rat-vec"),w=a("nextafter"),y=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":68,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":71,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":69}],68:[function(a,g,k){function m(b,a){return f(n(b[0],a[1]),n(b[1],a[0]))}g.exports=function(a,f,n,e){f=h(f,a);var c=h(e,n);e=m(f,c);if(0===l(e))return null;n=h(a,n);n=m(c,n);n=b(n,e);return x(a,v(f,n))};var n=a("big-rat/mul"),b=a("big-rat/div"),f=a("big-rat/sub"),l=a("big-rat/sign"),h=a("rat-vec/sub"),x=a("rat-vec/add"),v=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],69:[function(a,g,k){function m(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";g.exports=m;a=m.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var b=a,f=this.roots;f[a]!==a;)a=f[a];for(;f[b]!==a;){var l=f[b];f[b]=a;b=l}return a};a.link=function(a,b){var f=this.find(a),
l=this.find(b);if(f!==l){var h=this.ranks,m=this.roots,g=h[f],k=h[l];g<k?m[f]=l:k<g?m[l]=f:(m[l]=f,++h[f])}}},{}],70:[function(a,g,k){function m(b,a,n){var m=f(b[0],-a[0]);b=f(b[1],-a[1]);var r=f(n[0],-a[0]);a=f(n[1],-a[1]);m=h(l(m,r),l(b,a));return 0<=m[m.length-1]}g.exports=function(a,f,h,l){var r=n(f,h,l);if(0===r){var r=b(n(a,f,h)),e=b(n(a,f,l));return r===e?0===r&&(h=m(a,f,h),a=m(a,f,l),h!==a)?h?1:-1:0:0===e?0<r?-1:m(a,f,l)?-1:1:0===r?0<e?1:m(a,f,h)?1:-1:b(e-r)}e=n(a,f,h);return 0<e?0<r&&0<n(a,
f,l)?1:-1:0>e?0<r||0<n(a,f,l)?1:-1:0<n(a,f,l)?1:m(a,f,h)?1:-1};var n=a("robust-orientation"),b=a("signum"),f=a("two-sum"),l=a("robust-product"),h=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":119}],71:[function(a,g,k){function m(b,a){return b-a}g.exports=function(b,a){var l=b.length,h=b.length-a.length;if(h)return h;switch(l){case 0:return 0;case 1:return b[0]-a[0];case 2:return b[0]+b[1]-a[0]-a[1]||n(b[0],b[1])-n(a[0],a[1]);case 3:var l=b[0]+
b[1],g=a[0]+a[1];if(h=l+b[2]-(g+a[2]))return h;var h=n(b[0],b[1]),k=n(a[0],a[1]);return n(h,b[2])-n(k,a[2])||n(h+b[2],l)-n(k+a[2],g);case 4:var h=b[0],l=b[1],g=b[2],k=b[3],t=a[0],u=a[1],r=a[2],e=a[3];return h+l+g+k-(t+u+r+e)||n(h,l,g,k)-n(t,u,r,e,t)||n(h+l,h+g,h+k,l+g,l+k,g+k)-n(t+u,t+r,t+e,u+r,u+e,r+e)||n(h+l+g,h+l+k,h+g+k,l+g+k)-n(t+u+r,t+u+e,t+r+e,u+r+e);default:g=b.slice().sort(m);k=a.slice().sort(m);for(t=0;t<l;++t)if(h=g[t]-k[t])return h;return 0}};var n=Math.min},{}],72:[function(a,g,k){function m(){this.argTypes=
[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=a("./lib/thunk.js");g.exports=function(b){var a=new m;a.pre=b.pre;a.body=b.body;a.post=b.post;var l=b.args.slice(0);a.argTypes=l;for(var h=0;h<l.length;++h){var g=l[h];if("array"===g||"object"===typeof g&&g.blockIndices){a.argTypes[h]="array";a.arrayArgs.push(h);a.arrayBlockIndices.push(g.blockIndices?
g.blockIndices:0);a.shimArgs.push("array"+h);if(h<a.pre.args.length&&0<a.pre.args[h].count)throw Error("cwise: pre() block may not reference array args");if(h<a.post.args.length&&0<a.post.args[h].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)a.scalarArgs.push(h),a.shimArgs.push("scalar"+h);else if("index"===g){a.indexArgs.push(h);if(h<a.pre.args.length&&0<a.pre.args[h].count)throw Error("cwise: pre() block may not reference array index");if(h<a.body.args.length&&
a.body.args[h].lvalue)throw Error("cwise: body() block may not write to array index");if(h<a.post.args.length&&0<a.post.args[h].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){a.shapeArgs.push(h);if(h<a.pre.args.length&&a.pre.args[h].lvalue)throw Error("cwise: pre() block may not write to array shape");if(h<a.body.args.length&&a.body.args[h].lvalue)throw Error("cwise: body() block may not write to array shape");if(h<a.post.args.length&&a.post.args[h].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof g&&g.offset)a.argTypes[h]="offset",a.offsetArgs.push({array:g.array,offset:g.offset}),a.offsetArgIndex.push(h);else throw Error("cwise: Unknown argument type "+l[h]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>l.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>l.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>l.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!b.printCode||!!b.debug;a.funcName=b.funcName||"cwise";a.blockSize=b.blockSize||64;return n(a)}},{"./lib/thunk.js":74}],73:[function(a,g,k){function m(b,a,f){var l=b.length,n=a.arrayArgs.length;a=0<a.indexArgs.length;var m=[],e=[],c=0,d=0,p,w;for(p=0;p<l;++p)e.push(["i",p,"=0"].join(""));for(w=0;w<n;++w)for(p=0;p<l;++p)d=c,c=b[p],0===p?e.push(["d",w,"s",p,"=t",w,"p",c].join("")):e.push(["d",w,"s",p,"=(t",w,"p",c,"-s",d,"*t",w,"p",d,")"].join(""));m.push("var "+e.join(","));for(p=l-1;0<=p;--p)c=
b[p],m.push(["for(i",p,"=0;i",p,"<s",c,";++i",p,"){"].join(""));m.push(f);for(p=0;p<l;++p){d=c;c=b[p];for(w=0;w<n;++w)m.push(["p",w,"+=d",w,"s",p].join(""));a&&(0<p&&m.push(["index[",d,"]-=s",d].join("")),m.push(["++index[",c,"]"].join("")));m.push("}")}return m.join("\n")}function n(b,a,f,l){for(var n=a.length,g=f.arrayArgs.length,e=f.blockSize,c=0<f.indexArgs.length,d=[],p=0;p<g;++p)d.push(["var offset",p,"=p",p].join(""));for(p=b;p<n;++p)d.push(["for(var j"+p+"=SS[",a[p],"]|0;j",p,">0;){"].join("")),
d.push(["if(j",p,"<",e,"){"].join("")),d.push(["s",a[p],"=j",p].join("")),d.push(["j",p,"=0"].join("")),d.push(["}else{s",a[p],"=",e].join("")),d.push(["j",p,"-=",e,"}"].join("")),c&&d.push(["index[",a[p],"]=j",p].join(""));for(p=0;p<g;++p){e=["offset"+p];for(c=b;c<n;++c)e.push(["j",c,"*t",p,"p",a[c]].join(""));d.push(["p",p,"=(",e.join("+"),")"].join(""))}d.push(m(a,f,l));for(p=b;p<n;++p)d.push("}");return d.join("\n")}function b(b,a,f){for(var l=b.body,n=[],m=[],e=0;e<b.args.length;++e){var c=b.args[e];
if(!(0>=c.count)){var d=new RegExp(c.name,"g"),p="",w=a.arrayArgs.indexOf(e);switch(a.argTypes[e]){case "offset":var g=a.offsetArgIndex.indexOf(e),w=a.offsetArgs[g].array,p="+q"+g;case "array":var p="p"+w+p,k="l"+e,g="a"+w;if(0===a.arrayBlockIndices[w])1===c.count?"generic"===f[w]?c.lvalue?(n.push(["var ",k,"=",g,".get(",p,")"].join("")),l=l.replace(d,k),m.push([g,".set(",p,",",k,")"].join(""))):l=l.replace(d,[g,".get(",p,")"].join("")):l=l.replace(d,[g,"[",p,"]"].join("")):"generic"===f[w]?(n.push(["var ",
k,"=",g,".get(",p,")"].join("")),l=l.replace(d,k),c.lvalue&&m.push([g,".set(",p,",",k,")"].join(""))):(n.push(["var ",k,"=",g,"[",p,"]"].join("")),l=l.replace(d,k),c.lvalue&&m.push([g,"[",p,"]=",k].join("")));else{d=[c.name];c=[p];for(p=0;p<Math.abs(a.arrayBlockIndices[w]);p++)d.push("\\s*\\[([^\\]]+)\\]"),c.push("$"+(p+1)+"*t"+w+"b"+p);d=new RegExp(d.join(""),"g");p=c.join("+");if("generic"===f[w])throw Error("cwise: Generic arrays not supported in combination with blocks!");l=l.replace(d,[g,"[",
p,"]"].join(""))}break;case "scalar":l=l.replace(d,"Y"+a.scalarArgs.indexOf(e));break;case "index":l=l.replace(d,"index");break;case "shape":l=l.replace(d,"shape")}}}return[n.join("\n"),l,m.join("\n")].join("\n").trim()}function f(b){for(var a=Array(b.length),f=!0,l=0;l<b.length;++l){var n=b[l],m=n.match(/\d+/),m=m?m[0]:"";0===n.charAt(0)?a[l]="u"+n.charAt(1)+m:a[l]=n.charAt(0)+m;0<l&&(f=f&&a[l]===a[l-1])}return f?a[0]:a.join("")}var l=a("uniq");g.exports=function(a,g){for(var k=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,t=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)u[r]=g[2*r],t[r]=g[2*r+1];for(var e=[],c=[],d=[],p=[],w=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(d.push(0),p.push(k),e.push(k),c.push(k+a.arrayBlockIndices[r])):(d.push(a.arrayBlockIndices[r]),p.push(a.arrayBlockIndices[r]+k),e.push(0),c.push(a.arrayBlockIndices[r]));for(var y=[],E=0;E<t[r].length;E++)d[r]<=t[r][E]&&t[r][E]<p[r]&&y.push(t[r][E]-d[r]);w.push(y)}c=["SS"];p=["'use strict'"];y=[];
for(E=0;E<k;++E)y.push(["s",E,"=SS[",E,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){c.push("a"+r);c.push("t"+r);c.push("p"+r);for(E=0;E<k;++E)y.push(["t",r,"p",E,"=t",r,"[",d[r]+E,"]"].join(""));for(E=0;E<Math.abs(a.arrayBlockIndices[r]);++E)y.push(["t",r,"b",E,"=t",r,"[",e[r]+E,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)c.push("Y"+r);0<a.shapeArgs.length&&y.push("shape=SS.slice(0)");if(0<a.indexArgs.length){E=Array(k);for(r=0;r<k;++r)E[r]="0";y.push(["index=[",E.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){e=a.offsetArgs[r];d=[];for(E=0;E<e.offset.length;++E)0!==e.offset[E]&&(1===e.offset[E]?d.push(["t",e.array,"p",E].join("")):d.push([e.offset[E],"*t",e.array,"p",E].join("")));0===d.length?y.push("q"+r+"=0"):y.push(["q",r,"=",d.join("+")].join(""))}r=l([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));y=y.concat(r);p.push("var "+y.join(","));for(r=0;r<a.arrayArgs.length;++r)p.push("p"+r+"|=0");3<a.pre.body.length&&p.push(b(a.pre,a,u));r=b(a.body,
a,u);a:for(E=0,y=w[0].length;E<y;){for(e=1;e<w.length;++e)if(w[e][E]!==w[0][E])break a;++E}E<k?p.push(n(E,w[0],a,r)):p.push(m(w[0],a,r));3<a.post.body.length&&p.push(b(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+p.join("\n")+"\n----------");k=[a.funcName||"unnamed","_cwise_loop_",t[0].join("s"),"m",E,f(u)].join("");return(new Function(["function ",k,"(",c.join(","),"){",p.join("\n"),"} return ",k].join("")))()}},{uniq:123}],74:[function(a,g,k){var m=a("./compile.js");
g.exports=function(a){var b=["'use strict'","var CACHED={}"],f=[];b.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var l=[],h=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],k=[],t=[],u=0;u<a.arrayArgs.length;++u){var r=a.arrayArgs[u];f.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));l.push("t"+r);l.push("r"+r);h.push("t"+r);h.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<u&&(k.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),t.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(b.push("if (!("+k.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(u=0;u<a.scalarArgs.length;++u)g.push("scalar"+a.scalarArgs[u]);f.push(["type=[",h.join(","),"].join()"].join(""));f.push("proc=CACHED[type]");b.push("var "+f.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",l.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(m.bind(void 0,a))}},{"./compile.js":73}],75:[function(a,g,k){(function(a){var n=!1;if("undefined"!==typeof Float64Array){var b=new Float64Array(1),f=new Uint32Array(b.buffer);b[0]=1;n=!0;1072693248===f[1]?(g.exports=function(a){b[0]=a;return[f[0],f[1]]},g.exports.pack=function(a,l){f[0]=a;f[1]=l;return b[0]},g.exports.lo=function(a){b[0]=a;return f[0]},g.exports.hi=
function(a){b[0]=a;return f[1]}):1072693248===f[0]?(g.exports=function(a){b[0]=a;return[f[1],f[0]]},g.exports.pack=function(a,l){f[1]=a;f[0]=l;return b[0]},g.exports.lo=function(a){b[0]=a;return f[1]},g.exports.hi=function(a){b[0]=a;return f[0]}):n=!1}if(!n){var l=new a(8);g.exports=function(b){l.writeDoubleLE(b,0,!0);return[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]};g.exports.pack=function(b,a){l.writeUInt32LE(b,0,!0);l.writeUInt32LE(a,4,!0);return l.readDoubleLE(0,!0)};g.exports.lo=function(b){l.writeDoubleLE(b,
0,!0);return l.readUInt32LE(0,!0)};g.exports.hi=function(b){l.writeDoubleLE(b,0,!0);return l.readUInt32LE(4,!0)}}g.exports.sign=function(b){return g.exports.hi(b)>>>31};g.exports.exponent=function(b){return(g.exports.hi(b)<<1>>>21)-1023};g.exports.fraction=function(b){var a=g.exports.lo(b);b=g.exports.hi(b);var f=b&1048575;b&2146435072&&(f+=1048576);return[a,f]};g.exports.denormalized=function(b){return!(g.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],76:[function(a,g,k){g.exports=
function(a,b){var f=a.length;if("number"!==typeof b){for(var l=b=0;l<f;++l){var h=a[l];b=Math.max(b,h[0],h[1])}b=(b|0)+1}b|=0;for(var g=Array(b),l=0;l<b;++l)g[l]=[];for(l=0;l<f;++l)h=a[l],g[h[0]].push(h[1]),g[h[1]].push(h[0]);for(f=0;f<b;++f)m(g[f],function(b,a){return b-a});return g};var m=a("uniq")},{uniq:123}],77:[function(a,g,k){function m(b,a,d,f,h,l){this._color=b;this.key=a;this.value=d;this.left=f;this.right=h;this._count=l}function n(b){return new m(b._color,b.key,b.value,b.left,b.right,
b._count)}function b(b,a){return new m(b,a.key,a.value,a.left,a.right,a._count)}function f(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function l(b,a){this._compare=b;this.root=a}function h(b,a){if(a.left){var d=h(b,a.left);if(d)return d}if(d=b(a.key,a.value))return d;if(a.right)return h(b,a.right)}function x(b,a,d,f){if(0>=a(b,f.key)){if(f.left){var h=x(b,a,d,f.left);if(h)return h}if(h=d(f.key,f.value))return h}if(f.right)return x(b,a,d,f.right)}function v(b,a,d,f,h){var l=
d(b,h.key),m=d(a,h.key);if(0>=l&&(h.left&&(l=v(b,a,d,f,h.left))||0<m&&(l=f(h.key,h.value))))return l;if(0<m&&h.right)return v(b,a,d,f,h.right)}function t(b,a){this.tree=b;this._stack=a}function u(b,a){b.key=a.key;b.value=a.value;b.left=a.left;b.right=a.right;b._color=a._color;b._count=a._count}function r(b,a){return b<a?-1:b>a?1:0}g.exports=function(b){return new l(b||r,null)};a=l.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(a,d){b.push(a)});return b}});
Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(a,d){b.push(d)});return b}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,c){for(var d=this._compare,p=this.root,h=[],n=[];p;){var g=d(a,p.key);h.push(p);n.push(g);p=0>=g?p.left:p.right}h.push(new m(0,a,c,null,null,1));for(g=h.length-2;0<=g;--g)p=h[g],h[g]=0>=n[g]?new m(p._color,p.key,p.value,h[g+1],p.right,p._count+1):new m(p._color,p.key,p.value,p.left,h[g+
1],p._count+1);for(g=h.length-1;1<g;--g){n=h[g-1];p=h[g];if(1===n._color||1===p._color)break;var q=h[g-2];if(q.left===n)if(n.left===p){var r=q.right;if(r&&0===r._color)n._color=1,q.right=b(1,r),q._color=0,--g;else{q._color=0;q.left=n.right;n._color=1;n.right=q;h[g-2]=n;h[g-1]=p;f(q);f(n);3<=g&&(g=h[g-3],g.left===q?g.left=n:g.right=n);break}}else if((r=q.right)&&0===r._color)n._color=1,q.right=b(1,r),q._color=0,--g;else{n.right=p.left;q._color=0;q.left=p.right;p._color=1;p.left=n;p.right=q;h[g-2]=
p;h[g-1]=n;f(q);f(n);f(p);3<=g&&(g=h[g-3],g.left===q?g.left=p:g.right=p);break}else if(n.right===p)if((r=q.left)&&0===r._color)n._color=1,q.left=b(1,r),q._color=0,--g;else{q._color=0;q.right=n.left;n._color=1;n.left=q;h[g-2]=n;h[g-1]=p;f(q);f(n);3<=g&&(g=h[g-3],g.right===q?g.right=n:g.left=n);break}else if((r=q.left)&&0===r._color)n._color=1,q.left=b(1,r),q._color=0,--g;else{n.left=p.right;q._color=0;q.right=p.left;p._color=1;p.right=n;p.left=q;h[g-2]=p;h[g-1]=n;f(q);f(n);f(p);3<=g&&(g=h[g-3],g.right===
q?g.right=p:g.left=p);break}}h[0]._color=1;return new l(d,h[0])};a.forEach=function(b,a,d){if(this.root)switch(arguments.length){case 1:return h(b,this.root);case 2:return x(a,this._compare,b,this.root);case 3:if(!(0<=this._compare(a,d)))return v(a,d,this._compare,b,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.left;return new t(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.right;return new t(this,
b)}});a.at=function(b){if(0>b)return new t(this,[]);for(var a=this.root,d=[];;){d.push(a);if(a.left){if(b<a.left._count){a=a.left;continue}b-=a.left._count}if(!b)return new t(this,d);--b;if(a.right){if(b>=a.right._count)break;a=a.right}else break}return new t(this,[])};a.ge=function(b){for(var a=this._compare,d=this.root,f=[],h=0;d;){var l=a(b,d.key);f.push(d);0>=l&&(h=f.length);d=0>=l?d.left:d.right}f.length=h;return new t(this,f)};a.gt=function(b){for(var a=this._compare,d=this.root,f=[],h=0;d;){var l=
a(b,d.key);f.push(d);0>l&&(h=f.length);d=0>l?d.left:d.right}f.length=h;return new t(this,f)};a.lt=function(b){for(var a=this._compare,d=this.root,f=[],h=0;d;){var l=a(b,d.key);f.push(d);0<l&&(h=f.length);d=0>=l?d.left:d.right}f.length=h;return new t(this,f)};a.le=function(b){for(var a=this._compare,d=this.root,f=[],h=0;d;){var l=a(b,d.key);f.push(d);0<=l&&(h=f.length);d=0>l?d.left:d.right}f.length=h;return new t(this,f)};a.find=function(b){for(var a=this._compare,d=this.root,f=[];d;){var h=a(b,d.key);
f.push(d);if(0===h)return new t(this,f);d=0>=h?d.left:d.right}return new t(this,[])};a.remove=function(b){return(b=this.find(b))?b.remove():this};a.get=function(b){for(var a=this._compare,d=this.root;d;){var f=a(b,d.key);if(0===f)return d.value;d=0>=f?d.left:d.right}};a=t.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=
function(){return new t(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var c=Array(a.length),d=a[a.length-1];c[c.length-1]=new m(d._color,d.key,d.value,d.left,d.right,d._count);for(var p=a.length-2;0<=p;--p)d=a[p],c[p]=d.left===a[p+1]?new m(d._color,d.key,d.value,c[p+1],d.right,d._count):new m(d._color,d.key,d.value,d.left,c[p+1],d._count);d=c[c.length-1];if(d.left&&d.right){a=c.length;for(d=d.left;d.right;)c.push(d),d=d.right;p=c[a-1];c.push(new m(d._color,
p.key,p.value,d.left,d.right,d._count));c[a-1].key=d.key;c[a-1].value=d.value;for(p=c.length-2;p>=a;--p)d=c[p],c[p]=new m(d._color,d.key,d.value,d.left,c[p+1],d._count);c[a-1].left=c[a]}d=c[c.length-1];if(0===d._color)for(p=c[c.length-2],p.left===d?p.left=null:p.right===d&&(p.right=null),c.pop(),p=0;p<c.length;++p)c[p]._count--;else if(d.left||d.right)for(d.left?u(d,d.left):d.right&&u(d,d.right),d._color=1,p=0;p<c.length-1;++p)c[p]._count--;else{if(1===c.length)return new l(this.tree._compare,null);
for(p=0;p<c.length;++p)c[p]._count--;for(var p=c[c.length-2],h,g,r,q=c.length-1;0<=q;--q){a=c[q];if(0===q){a._color=1;break}h=c[q-1];if(h.left===a){g=h.right;if(g.right&&0===g.right._color){g=h.right=n(g);r=g.right=n(g.right);h.right=g.left;g.left=h;g.right=r;g._color=h._color;a._color=1;h._color=1;r._color=1;f(h);f(g);if(1<q){var k=c[q-2];k.left===h?k.left=g:k.right=g}c[q-1]=g;break}else if(g.left&&0===g.left._color){g=h.right=n(g);r=g.left=n(g.left);h.right=r.left;g.left=r.right;r.left=h;r.right=
g;r._color=h._color;h._color=1;g._color=1;a._color=1;f(h);f(g);f(r);1<q&&(k=c[q-2],k.left===h?k.left=r:k.right=r);c[q-1]=r;break}if(1===g._color)if(0===h._color){h._color=1;h.right=b(0,g);break}else h.right=b(0,g);else g=n(g),h.right=g.left,g.left=h,g._color=h._color,h._color=0,f(h),f(g),1<q&&(k=c[q-2],k.left===h?k.left=g:k.right=g),c[q-1]=g,c[q]=h,q+1<c.length?c[q+1]=a:c.push(a),q+=2}else{g=h.left;if(g.left&&0===g.left._color){g=h.left=n(g);r=g.left=n(g.left);h.left=g.right;g.right=h;g.left=r;g._color=
h._color;a._color=1;h._color=1;r._color=1;f(h);f(g);1<q&&(k=c[q-2],k.right===h?k.right=g:k.left=g);c[q-1]=g;break}else if(g.right&&0===g.right._color){g=h.left=n(g);r=g.right=n(g.right);h.left=r.right;g.right=r.left;r.right=h;r.left=g;r._color=h._color;h._color=1;g._color=1;a._color=1;f(h);f(g);f(r);1<q&&(k=c[q-2],k.right===h?k.right=r:k.left=r);c[q-1]=r;break}if(1===g._color)if(0===h._color){h._color=1;h.left=b(0,g);break}else h.left=b(0,g);else g=n(g),h.left=g.right,g.right=h,g._color=h._color,
h._color=0,f(h),f(g),1<q&&(k=c[q-2],k.right===h?k.right=g:k.left=g),c[q-1]=g,c[q]=h,q+1<c.length?c[q+1]=a:c.push(a),q+=2}}p.left===d?p.left=null:p.right=null}return new l(this.tree._compare,c[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=
0,a=this._stack;if(0===a.length)return(b=this.tree.root)?b._count:0;a[a.length-1].left&&(b=a[a.length-1].left._count);for(var d=a.length-2;0<=d;--d)a[d+1]===a[d].right&&(++b,a[d].left&&(b+=a[d].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.right)for(a=a.right;a;)b.push(a),a=a.left;else for(b.pop();0<b.length&&b[b.length-1].right===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].left===b[a])return!0;return!1}});a.update=function(b){var a=this._stack;if(0===a.length)throw Error("Can't update empty node!");var d=Array(a.length),f=a[a.length-1];d[d.length-1]=new m(f._color,f.key,b,f.left,f.right,f._count);for(b=a.length-2;0<=b;--b)f=a[b],d[b]=f.left===a[b+1]?new m(f._color,f.key,f.value,d[b+1],f.right,f._count):new m(f._color,f.key,f.value,f.left,d[b+1],f._count);return new l(this.tree._compare,
d[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.left)for(a=a.left;a;)b.push(a),a=a.right;else for(b.pop();0<b.length&&b[b.length-1].left===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].right===b[a])return!0;return!1}})},{}],78:[function(a,g,k){function m(a){if(0>a)return Number("0/0");for(var g=b[0],h=b.length-1;0<h;--h)g+=
b[h]/(a+h);h=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(h)-h+Math.log(g)-Math.log(a)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],b=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,
-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];g.exports=function l(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*l(1-b));if(100<b)return Math.exp(m(b));--b;for(var a=n[0],g=1;9>g;g++)a+=n[g]/(b+g);g=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,b+.5)*Math.exp(-g)*a};g.exports.log=m},{}],79:[function(a,g,k){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},
{}],80:[function(a,g,k){var m=a("./identity");g.exports=function(a,b,f,g){var h,k,v,t,u,r,e,c,d=b[0],p=b[1];b=b[2];v=g[0];t=g[1];k=g[2];e=f[0];g=f[1];h=f[2];if(1E-6>Math.abs(d-e)&&1E-6>Math.abs(p-g)&&1E-6>Math.abs(b-h))return m(a);f=d-e;g=p-g;e=b-h;c=1/Math.sqrt(f*f+g*g+e*e);f*=c;g*=c;e*=c;h=t*e-k*g;k=k*f-v*e;v=v*g-t*f;(c=Math.sqrt(h*h+k*k+v*v))?(c=1/c,h*=c,k*=c,v*=c):v=k=h=0;t=g*v-e*k;u=e*h-f*v;r=f*k-g*h;(c=Math.sqrt(t*t+u*u+r*r))?(c=1/c,t*=c,u*=c,r*=c):r=u=t=0;a[0]=h;a[1]=t;a[2]=f;a[3]=0;a[4]=k;
a[5]=u;a[6]=g;a[7]=0;a[8]=v;a[9]=r;a[10]=e;a[11]=0;a[12]=-(h*d+k*p+v*b);a[13]=-(t*d+u*p+r*b);a[14]=-(f*d+g*p+e*b);a[15]=1;return a}},{"./identity":79}],81:[function(a,g,k){g.exports=function(a,g,b,f,l){g=1/Math.tan(g/2);var h=1/(f-l);a[0]=g/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(l+f)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*l*f*h;a[15]=0;return a}},{}],82:[function(a,g,k){k.read=function(a,g,b,f,l){var h;h=8*l-f-1;var k=(1<<h)-1,v=k>>1,t=-7;l=b?l-1:0;var u=b?-1:1,r=a[g+
l];l+=u;b=r&(1<<-t)-1;r>>=-t;for(t+=h;0<t;b=256*b+a[g+l],l+=u,t-=8);h=b&(1<<-t)-1;b>>=-t;for(t+=f;0<t;h=256*h+a[g+l],l+=u,t-=8);if(0===b)b=1-v;else{if(b===k)return h?NaN:Infinity*(r?-1:1);h+=Math.pow(2,f);b-=v}return(r?-1:1)*h*Math.pow(2,b-f)};k.write=function(a,g,b,f,l,h){var k,v=8*h-l-1,t=(1<<v)-1,u=t>>1,r=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;h=f?0:h-1;var e=f?1:-1,c=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,f=t):(f=Math.floor(Math.log(g)/Math.LN2),1>g*(k=Math.pow(2,
-f))&&(f--,k*=2),g=1<=f+u?g+r/k:g+r*Math.pow(2,1-u),2<=g*k&&(f++,k/=2),f+u>=t?(g=0,f=t):1<=f+u?(g=(g*k-1)*Math.pow(2,l),f+=u):(g=g*Math.pow(2,u-1)*Math.pow(2,l),f=0));for(;8<=l;a[b+h]=g&255,h+=e,g/=256,l-=8);f=f<<l|g;for(v+=l;0<v;a[b+h]=f&255,h+=e,f/=256,v-=8);a[b+h-e]|=128*c}},{}],83:[function(a,g,k){function m(a,b,c,e,f){this.mid=a;this.left=b;this.right=c;this.leftPoints=e;this.rightPoints=f;this.count=(b?b.count:0)+(c?c.count:0)+e.length}function n(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;
a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function b(a,b){var c=r(b);a.mid=c.mid;a.left=c.left;a.right=c.right;a.leftPoints=c.leftPoints;a.rightPoints=c.rightPoints;a.count=c.count}function f(a,c){var e=a.intervals([]),f=e.indexOf(c);if(0>f)return 0;e.splice(f,1);b(a,e);return 1}function l(a,b,c){for(var e=0;e<a.length&&a[e][0]<=b;++e){var f=c(a[e]);if(f)return f}}function h(a,b,c){for(var e=a.length-1;0<=e&&a[e][1]>=b;--e){var f=c(a[e]);if(f)return f}}function x(a,b){for(var c=
0;c<a.length;++c){var e=b(a[c]);if(e)return e}}function v(a,b){return a-b}function t(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function u(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function r(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(v);for(var b=b[b.length>>1],e=[],f=[],h=[],c=0;c<a.length;++c){var g=a[c];g[1]<b?e.push(g):b<g[0]?f.push(g):h.push(g)}a=h.slice();h.sort(t);a.sort(u);return new m(b,r(e),r(f),h,a)}function e(a){this.root=a}var c=a("binary-search-bounds");
g.exports=function(a){return a&&0!==a.length?new e(r(a)):new e(null)};a=m.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var e=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?(e=this.intervals([]),e.push(a),b(this,e)):this.left.insert(a):this.left=r([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?(e=this.intervals([]),
e.push(a),b(this,e)):this.right.insert(a):this.right=r([a]);else{var e=c.ge(this.leftPoints,a,t),f=c.ge(this.rightPoints,a,u);this.leftPoints.splice(e,0,a);this.rightPoints.splice(f,0,a)}};a.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(b-1))return f(this,a);b=this.left.remove(a);if(2===b)return this.left=null,--this.count,1;1===b&&--this.count;return b}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?
this.left.count:0)>3*(b-1))return f(this,a);b=this.right.remove(a);if(2===b)return this.right=null,--this.count,1;1===b&&--this.count;return b}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var e=this.left;e.right;)a=e,e=e.right;if(a===this)e.right=this.right;else{var h=this.left,b=this.right;a.count-=e.count;a.right=e.left;e.left=h;e.right=b}n(this,e);this.count=(this.left?this.left.count:0)+(this.right?
this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return 1}for(h=c.ge(this.leftPoints,a,t);h<this.leftPoints.length&&this.leftPoints[h][0]===a[0];++h)if(this.leftPoints[h]===a)for(--this.count,this.leftPoints.splice(h,1),b=c.ge(this.rightPoints,a,u);b<this.rightPoints.length&&this.rightPoints[b][1]===a[1];++b)if(this.rightPoints[b]===a)return this.rightPoints.splice(b,1),1;return 0};a.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,
b);if(c)return c}return l(this.leftPoints,a,b)}return a>this.mid?this.right&&(c=this.right.queryPoint(a,b))?c:h(this.rightPoints,a,b):x(this.leftPoints,b)};a.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var e=this.left.queryInterval(a,b,c);if(e)return e}return b>this.mid&&this.right&&(e=this.right.queryInterval(a,b,c))?e:b<this.mid?l(this.leftPoints,b,c):a>this.mid?h(this.rightPoints,a,c):x(this.leftPoints,c)};a=e.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new m(a[0],
null,null,[a],[a])};a.remove=function(a){return this.root?(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)};a.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":84}],84:[function(a,
g,k){function m(a,f,g,h,n,m){a=["function ",a,"(a,l,h,",h.join(","),"){",m?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];m?0>f.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",f,"){i=m;");g?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");m?a.push("return -1};"):a.push("return i};");return a.join("")}function n(a,f,g,h){return(new Function([m("A","x"+a+"y",f,["y"],
!1,h),m("B","x"+a+"y",f,["y"],!0,h),m("P","c(x,y)"+a+"0",f,["y","c"],!1,h),m("Q","c(x,y)"+a+"0",f,["y","c"],!0,h),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
g].join("")))()}g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],85:[function(a,g,k){g.exports=function(a,g){g=g||Array(a.length);for(var b=0;b<a.length;++b)g[a[b]]=b;return g}},{}],86:[function(a,g,k){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,g,k){function m(a,b,e){for(var c=0,d=0;d<a;++d)b&1<<d&&(c|=1<<e[d]);return c}
function n(a,g,e,c,d,p){function n(a,b){A.push("for(","i"+d[a],"=",b,";","i"+d[a],"<","s"+d[a],";","++","i"+d[a],"){")}function k(a){for(var b=0;b<z;++b)A.push("p"+b,"+=","u"+b+"_"+d[a],";");A.push("}")}function E(){for(var a=1;a<1<<D;++a)A.push(t,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",t,";")}function q(a,b){if(0>a){for(var e=0;e<z;++e)p[e]?A.push("c"+e+"_0","=","d"+e,".get(","p"+e,");"):A.push("c"+e+"_0","=","d"+e,"[","p"+e,"];");for(var g=[],e=0;e<z;++e)g.push("c"+e+"_0");for(e=0;e<c;++e)g.push("x"+
e);A.push("b0","=",l,"[",v,"]=phase(",g.join(),");");for(g=1;g<1<<D;++g)A.push("b"+g,"=",l,"[",v,"+","e"+g,"];");e=[];for(g=1;g<1<<D;++g)e.push("(b0!==b"+g+")");A.push("if(",e.join("||"),"){");for(var r=[],e=0;e<D;++e)r.push("i"+e);for(e=0;e<z;++e)for(r.push("c"+e+"_0"),g=1;g<1<<D;++g)p[e]?A.push("c"+e+"_"+g,"=","d"+e,".get(","p"+e,"+","d"+e+"_"+g,");"):A.push("c"+e+"_"+g,"=","d"+e,"[","p"+e,"+","d"+e+"_"+g,"];"),r.push("c"+e+"_"+g);for(e=0;e<1<<D;++e)r.push("b"+e);for(e=0;e<c;++e)r.push("x"+e);A.push("vertex(",
r.join(),");","v0","=",f,"[",v,"]=",h,"++;");e=(1<<D)-1;r="b"+e;for(g=0;g<D;++g)if(0===(b&~(1<<g))){for(var m=e^1<<g,u="b"+m,t=[],x=m;0<x;x=x-1&m)t.push(f+"["+v+"+"+("e"+x)+"]");t.push("v0");for(x=0;x<z;++x)g&1?t.push("c"+x+"_"+e,"c"+x+"_"+m):t.push("c"+x+"_"+m,"c"+x+"_"+e);g&1?t.push(r,u):t.push(u,r);for(x=0;x<c;++x)t.push("x"+x);A.push("if(",r,"!==",u,"){","face(",t.join(),")}")}A.push("}",v,"+=1;")}else{for(g=a-1;0<=g;--g)n(g,0);e=[];for(g=0;g<z;++g)p[g]?e.push("d"+g+".get("+("p"+g)+")"):e.push("d"+
g+"["+("p"+g)+"]");for(g=0;g<c;++g)e.push("x"+g);A.push(l,"[",v,"++]=phase(",e.join(),");");for(g=0;g<a;++g)k(g);for(g=0;g<z;++g)A.push("p"+g,"+=","u"+g+"_"+d[a],";");A.push("if(","s"+d[a],">0){","i"+d[a],"=1;");q(a-1,b|1<<d[a]);for(g=0;g<z;++g)A.push("p"+g,"+=","u"+g+"_"+d[a],";");a===D-1&&(A.push(v,"=0;"),E());n(a,2);q(a-1,b);a===D-1&&(A.push("if(","i"+d[D-1],"&1){",v,"=0;}"),E());k(a);A.push("}")}}var z=p.length,D=d.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var G="extractContour"+d.join("_"),A=[],B=[],I=[],H=0;H<z;++H)I.push("a"+H);for(H=0;H<c;++H)I.push("x"+H);for(H=0;H<D;++H)B.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<z;++H){B.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var C=0;C<D;++C)B.push("t"+H+"_"+C+"="+("a"+H)+".stride["+C+"]|0")}for(H=0;H<z;++H)for(B.push("p"+H+"="+("o"+H)),B.push("c"+H+"_0"),C=1;C<1<<D;++C){for(var K=[],J=0;J<D;++J)C&1<<J&&K.push("-"+("t"+H+"_"+J));B.push("d"+H+"_"+C+"=("+K.join("")+")|0");B.push("c"+
H+"_"+C+"=0")}for(H=0;H<z;++H)for(C=0;C<D;++C)J=["t"+H+"_"+d[C]],0<C&&J.push("t"+H+"_"+d[C-1]+"*"+("s"+d[C-1])),B.push("u"+H+"_"+d[C]+"=("+J.join("-")+")|0");for(H=0;H<D;++H)B.push("i"+H+"=0");B.push(h+"=0");C=["2"];for(H=D-2;0<=H;--H)C.push("s"+d[H]);B.push(x+"=("+C.join("*")+")|0",l+"=mallocUint32("+x+")",f+"=mallocUint32("+x+")",v+"=0");B.push("b0=0");for(C=1;C<1<<D;++C){H=[];K=[];for(J=0;J<D;++J)C&1<<J&&(0===K.length?H.push("1"):H.unshift(K.join("*"))),K.push("s"+d[J]);J="";0>H[0].indexOf("s"+
d[D-2])&&(J="-");K=m(D,C,d);B.push("e"+K+"=(-"+H.join("-")+")|0","y"+K+"=("+J+H.join("-")+")|0","b"+K+"=0")}B.push("v0=0",t+"=0");q(D-1,0);A.push("freeUint32(",f,");freeUint32(",l,");");G=["'use strict';function ",G,"(",I.join(),"){var ",B.join(),";",A.join(""),"}return ",G].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",G))(a,g,e,b.mallocUint32,b.freeUint32)}var b=a("typedarray-pool");g.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);
}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var c=a.arrayArguments||1;1>c&&b("Must have at least one array argument");var d=a.scalarArguments||0;0>d&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],g=Array(c),h=0;h<c;++h)0<=f.indexOf(h)?
g[h]=!0:g[h]=!1;return n(a.vertex,a.cell,a.phase,d,e,g)};var f="V",l="P",h="N",x="Q",v="X",t="T"},{"typedarray-pool":121}],88:[function(a,g,k){function m(a,b){return a[0]-b[0]}function n(){var a=this.stride,b=Array(a.length),f;for(f=0;f<b.length;++f)b[f]=[Math.abs(a[f]),f];b.sort(m);a=Array(b.length);for(f=0;f<a.length;++f)a[f]=b[f][1];return a}function b(a,b){var f=["View",b,"d",a].join("");0>b&&(f="View_Nil"+a);var e="generic"===a;if(-1===b){var c,f=new Function("function "+f+"(a){this.data=a;};var proto="+
f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+f+"(a){return new "+f+"(a);}");return f()}if(0===b)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+
a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+f+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+
"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(v[a][0]);c=["'use strict'"];var d=l(b),g=d.map(function(a){return"i"+a}),h="this.offset+"+d.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=d.map(function(a){return"b"+a}).join(","),k=d.map(function(a){return"c"+a}).join(",");c.push("function "+f+"(a,"+m+","+k+",d){this.data=a","this.shape=["+m+"]","this.stride=["+k+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);c.push("Object.defineProperty(proto,'size',{get:function "+
f+"_size(){return "+d.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),4>b?(c.push("function "+f+"_order(){"),2===b?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
c.push("ORDER})"));c.push("proto.set=function "+f+"_set("+g.join(",")+",v){");e?c.push("return this.data.set("+h+",v)}"):c.push("return this.data["+h+"]=v}");c.push("proto.get=function "+f+"_get("+g.join(",")+"){");e?c.push("return this.data.get("+h+")}"):c.push("return this.data["+h+"]}");c.push("proto.index=function "+f+"_index(",g.join(),"){return "+h+"}");c.push("proto.hi=function "+f+"_hi("+g.join(",")+"){return new "+f+"(this.data,"+d.map(function(a){return["(typeof i",a,"!=='number'||i",a,
"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+d.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");e=d.map(function(a){return"a"+a+"=this.shape["+a+"]"});h=d.map(function(a){return"c"+a+"=this.stride["+a+"]"});c.push("proto.lo=function "+f+"_lo("+g.join(",")+"){var b=this.offset,d=0,"+e.join(",")+","+h.join(","));for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'&&i"+e+">=0){d=i"+e+"|0;b+=c"+e+"*d;a"+e+"-=d}");c.push("return new "+f+"(this.data,"+d.map(function(a){return"a"+
a}).join(",")+","+d.map(function(a){return"c"+a}).join(",")+",b)}");c.push("proto.step=function "+f+"_step("+g.join(",")+"){var "+d.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+d.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'){d=i"+e+"|0;if(d<0){c+=b"+e+"*(a"+e+"-1);a"+e+"=ceil(-a"+e+"/d)}else{a"+e+"=ceil(a"+e+"/d)}b"+e+"*=d}");c.push("return new "+f+"(this.data,"+d.map(function(a){return"a"+
a}).join(",")+","+d.map(function(a){return"b"+a}).join(",")+",c)}");h=Array(b);m=Array(b);for(e=0;e<b;++e)h[e]="a[i"+e+"]",m[e]="b[i"+e+"]";c.push("proto.transpose=function "+f+"_transpose("+g+"){"+g.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+h.join(",")+","+m.join(",")+",this.offset)}");c.push("proto.pick=function "+f+"_pick("+g+"){var a=[],b=[],c=this.offset");for(e=0;e<b;++e)c.push("if(typeof i"+e+"==='number'&&i"+
e+">=0){c=(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");c.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+d.map(function(a){return"shape["+a+"]"}).join(",")+","+d.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",c.join("\n"));return f(v[a],n)}function f(a){if(h(a))return"buffer";if(x)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var l=a("iota-array"),h=a("is-buffer"),x="undefined"!==typeof Float64Array,v={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in v)v[a].push(b(a,-1))});g.exports=function(a,g,h,e){if(void 0===a){var c=v.array[0];return c([])}"number"===typeof a&&(a=[a]);void 0===g&&(g=[a.length]);c=g.length;if(void 0===h){h=Array(c);for(var d=c-1,p=1;0<=d;--d)h[d]=p,p*=g[d]}if(void 0===e)for(d=e=0;d<c;++d)0>h[d]&&(e-=(g[d]-1)*h[d]);d=f(a);for(p=v[d];p.length<=c+1;)p.push(b(d,p.length-1));c=p[c+1];return c(a,g,h,e)}},{"iota-array":89,
"is-buffer":86}],89:[function(a,g,k){g.exports=function(a){for(var g=Array(a),b=0;b<a;++b)g[b]=b;return g}},{}],90:[function(a,g,k){var m=a("double-bits"),n=Math.pow(2,-1074);g.exports=function(a,f){if(isNaN(a)||isNaN(f))return NaN;if(a===f)return a;if(0===a)return 0>f?-n:n;var g=m.hi(a),h=m.lo(a);f>a===0<a?4294967295===h?(g+=1,h=0):h+=1:0===h?(h=4294967295,--g):--h;return m.pack(h,g)}},{"double-bits":75}],91:[function(a,g,k){g.exports=function(a){var f=a.length;if(f<m)for(var g=1,h=0;h<f;++h)for(var k=
0;k<h;++k)if(a[h]<a[k])g=-g;else{if(a[h]===a[k])return 0}else{for(var v=n.mallocUint8(f),h=0;h<f;++h)v[h]=0;g=1;for(h=0;h<f;++h)if(!v[h]){var t=1;v[h]=1;for(k=a[h];k!==h;k=a[k]){if(v[k])return n.freeUint8(v),0;t+=1;v[k]=1}t&1||(g=-g)}n.freeUint8(v)}return g};var m=32,n=a("typedarray-pool")},{"typedarray-pool":121}],92:[function(a,g,k){var m=a("typedarray-pool"),n=a("invert-permutation");k.rank=function(a){var f=a.length;switch(f){case 0:case 1:return 0;case 2:return a[1]}var g=m.mallocUint32(f),h=
m.mallocUint32(f),k=0,v;n(a,h);for(v=0;v<f;++v)g[v]=a[v];for(v=f-1;0<v;--v)f=h[v],a=g[v],g[v]=g[f],g[f]=a,h[v]=h[a],h[a]=f,k=(k+a)*v;m.freeUint32(h);m.freeUint32(g);return k};k.unrank=function(a,f,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(f?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):f?[0,1]:[1,0]}g=g||Array(a);var h,n,m=1;g[0]=0;for(n=1;n<a;++n)g[n]=n,m=m*n|0;for(n=a-1;0<n;--n)a=f/m|0,f=f-a*m|0,m=m/n|0,h=g[n]|0,g[n]=g[a]|0,g[a]=h|0;return g}},{"invert-permutation":85,
"typedarray-pool":121}],93:[function(a,g,k){g.exports=function(a,b){function f(a,b){var c=t[b][a[b]];c.splice(c.indexOf(a),1)}function g(a,c,e){var h,l,n;for(l=0;2>l;++l)if(0<t[l][c].length){h=t[l][c][0];n=l;break}l=h[n^1];for(var r=0;2>r;++r)for(var k=t[r][c],u=0;u<k.length;++u){var v=k[u],x=v[r^1];0<m(b[a],b[c],b[l],b[x])&&(h=v,l=x,n=r)}if(e)return l;h&&f(h,n);return l}function h(a,c){var e=t[c][a][0],h=[a];f(e,c);for(e=e[c^1];;){for(;e!==a;)h.push(e),e=g(h[h.length-2],e,!1);if(0===t[0][a].length+
t[1][a].length)break;var e=h[h.length-1],n=a,q=h[1],r=g(e,n,!0);if(0>m(b[e],b[n],b[q],b[r]))break;h.push(a);e=g(e,n)}return h}for(var k=b.length|0,v=a.length,t=[Array(k),Array(k)],u=0;u<k;++u)t[0][u]=[],t[1][u]=[];for(u=0;u<v;++u){var r=a[u];t[0][r[0]].push(r);t[1][r[1]].push(r)}v=[];for(u=0;u<k;++u)0===t[0][u].length+t[1][u].length&&v.push([u]);for(u=0;u<k;++u)for(r=0;2>r;++r){for(var e=[];0<t[r][u].length;){var c=h(u,r);c[1]===c[c.length-1]?e.push.apply(e,c):(0<e.length&&v.push(e),e=c)}0<e.length&&
v.push(e)}return v};var m=a("compare-angle")},{"compare-angle":70}],94:[function(a,g,k){g.exports=function(a,b){for(var f=m(a,b.length),g=Array(b.length),h=Array(b.length),k=[],v=0;v<b.length;++v){var t=f[v].length;h[v]=t;g[v]=!0;1>=t&&k.push(v)}for(;0<k.length;)for(t=k.pop(),g[t]=!1,t=f[t],v=0;v<t.length;++v){var u=t[v];0===--h[u]&&k.push(u)}f=Array(b.length);h=[];for(v=0;v<b.length;++v)g[v]?(t=h.length,f[v]=t,h.push(b[v])):f[v]=-1;k=[];for(v=0;v<a.length;++v)t=a[v],g[t[0]]&&g[t[1]]&&k.push([f[t[0]],
f[t[1]]]);return[k,h]};var m=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":76}],95:[function(a,g,k){function m(a,b){for(var e=Array(a),c=0;c<a;++c)e[c]=b;return e}function n(a){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return b}g.exports=function(a,g){function e(a){for(var b=a.length,c=0;c<b;++c)if(!C[a[c]])return!1;return!0}var c=t(a,g);a=c[0];g=c[1];for(var d=g.length,p=b(a,g.length),k=0;k<d;++k)if(1===p[k].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var p=
f(a,g),p=p.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var e=g[a[d]],f=g[a[(d+1)%b]],p=h(-e[0],e[1]),l=h(-e[0],f[1]),e=h(f[0],e[1]),f=h(f[0],f[1]),c=x(c,x(x(p,l),x(e,f)));return 0<c[c.length-1]}),c=p.length,y=Array(c),E=Array(c),k=0;k<c;++k){y[k]=k;var q=Array(c),z=p[k].map(function(a){return g[a]}),D=l([z]),G=0,A=0;a:for(;A<c;++A)if(q[A]=0,k!==A){for(var z=p[A],B=z.length,I=0;I<B;++I){var H=D(g[z[I]]);if(0!==H){0>H&&(q[A]=1,G+=1);continue a}}q[A]=1;G+=1}E[k]=[G,k,q]}E.sort(function(a,
b){return b[0]-a[0]});for(k=0;k<c;++k)for(q=E[k],z=q[1],B=q[2],A=0;A<c;++A)B[A]&&(y[A]=z);E=n(c);for(k=0;k<c;++k)E[k].push(y[k]),E[y[k]].push(k);for(var q={},C=m(d,!1),k=0;k<c;++k)for(z=p[k],B=z.length,A=0;A<B;++A)d=z[A],D=z[(A+1)%B],G=Math.min(d,D)+":"+Math.max(d,D),G in q?(G=q[G],E[G].push(k),E[k].push(G),C[d]=C[D]=!0):q[G]=k;A=[];d=m(c,-1);for(k=0;k<c;++k)y[k]!==k||e(p[k])?d[k]=-1:(A.push(k),d[k]=0);for(c=[];0<A.length;){k=A.pop();y=E[k];v(y,function(a,b){return a-b});var B=y.length,q=d[k],K;0===
q&&(z=p[k],K=[z]);for(k=0;k<B;++k)z=y[k],0<=d[z]||(d[z]=q^1,A.push(z),0===q&&(z=p[z],e(z)||(z.reverse(),K.push(z))));0===q&&c.push(K)}return c};var b=a("edges-to-adjacency-list"),f=a("planar-dual"),l=a("point-in-big-polygon"),h=a("two-product"),x=a("robust-sum"),v=a("uniq"),t=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,"edges-to-adjacency-list":76,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":118,uniq:123}],96:[function(a,g,k){arguments[4][84][0].apply(k,arguments)},
{dup:84}],97:[function(a,g,k){function m(){return!0}function n(a){return function(b,d){var f=a[b];return f?!!f.queryPoint(d,m):!1}}function b(a){for(var b={},d=0;d<a.length;++d){var f=a[d],g=f[0][0],h=f[0][1],f=f[1][1],h=[Math.min(h,f),Math.max(h,f)];g in b?b[g].push(h):b[g]=[h]}a={};g=Object.keys(b);for(d=0;d<g.length;++d)a[g[d]]=u(b[g[d]]);return n(a)}function f(a,b){return function(d){var f=r.le(b,d[0]);if(0>f)return 1;var g=a[f];if(!g)if(0<f&&b[f]===d[0])g=a[f-1];else return 1;for(f=1;g;){var h=
g.key,l=v(d,h[0],h[1]);if(h[0][0]<h[1][0])if(0>l)g=g.left;else if(0<l)f=-1,g=g.right;else return 0;else if(0<l)g=g.left;else if(0>l)f=1,g=g.right;else return 0}return f}}function l(a){return 1}function h(a){return function(b){return a(b[0],b[1])?0:1}}function x(a,b){return function(d){return a(d[0],d[1])?0:b(d)}}g.exports=function(a){for(var c=a.length,d=[],g=[],n=0;n<c;++n)for(var m=a[n],k=m.length,q=k-1,r=0;r<k;q=r++){var q=m[q],u=m[r];q[0]===u[0]?g.push([q,u]):d.push([q,u])}if(0===d.length)return 0===
g.length?l:h(b(g));a=t(d);a=f(a.slabs,a.coordinates);return 0===g.length?a:x(b(g),a)};var v=a("robust-orientation")[3],t=a("slab-decomposition"),u=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":83,"robust-orientation":103,"slab-decomposition":115}],98:[function(a,g,k){var m=a("big-rat/add");g.exports=function(a,b){for(var f=a.length,g=Array(f),h=0;h<f;++h)g[h]=m(a[h],b[h]);return g}},{"big-rat/add":34}],99:[function(a,g,k){g.exports=function(a){for(var b=
Array(a.length),f=0;f<a.length;++f)b[f]=m(a[f]);return b};var m=a("big-rat")},{"big-rat":37}],100:[function(a,g,k){var m=a("big-rat"),n=a("big-rat/mul");g.exports=function(a,f){for(var g=m(f),h=a.length,k=Array(h),v=0;v<h;++v)k[v]=n(a[v],g);return k}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,g,k){var m=a("big-rat/sub");g.exports=function(a,b){for(var f=a.length,g=Array(f),h=0;h<f;++h)g[h]=m(a[h],b[h]);return g}},{"big-rat/sub":49}],102:[function(a,g,k){function m(a,b){for(var e=Array(a.length-
1),f=1;f<a.length;++f)for(var g=e[f-1]=Array(a.length-1),h=0,l=0;h<a.length;++h)h!==b&&(g[l++]=a[f][h]);return e}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",n(a.slice(0,b)),",",n(a.slice(b)),")"].join("")}function b(a,d){if("m"===a.charAt(0)){if("w"===d.charAt(0)){var e=a.split("[");return["w",d.substr(1),"m",e[0].substr(1)].join("")}return["prod(",a,",",d,")"].join("")}return b(d,a)}function f(a){if(2===a.length)return[["diff(",
b(a[0][0],a[1][1]),",",b(a[1][0],a[0][1]),")"].join("")];for(var d=[],e=0;e<a.length;++e)d.push(["scale(",n(f(m(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return d}function l(a,b){for(var e=[],f=0;f<b-2;++f)e.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return n(e)}function h(a){for(var b=[],e=[],g=Array(a),h=0;h<a;++h){g[h]=Array(a);for(var k=0;k<a;++k)g[h][k]=["m",k,"[",a-h-2,"]"].join("")}for(h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(h=0;h<a;++h)0===(h&1)?b.push.apply(b,f(m(g,h))):
e.push.apply(e,f(m(g,h)));b=n(b);e=n(e);g="exactInSphere"+a;k=[];for(h=0;h<a;++h)k.push("m"+h);k=["function ",g,"(",k.join(),"){"];for(h=0;h<a;++h){k.push("var w",h,"=",l(h,a),";");for(var q=0;q<a;++q)q!==h&&k.push("var w",h,"m",q,"=scale(w",h,",m",q,"[0]);")}k.push("var p=",b,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",g);return(new Function("sum","diff","prod","scale",k.join("")))(t,u,v,r)}function x(a){var b=e[a.length];b||(b=e[a.length]=h(a.length));return b.apply(void 0,a)}var v=a("two-product"),
t=a("robust-sum"),u=a("robust-subtract"),r=a("robust-scale"),e=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=e.length;)e.push(h(e.length));for(var a=[],b=["slow"],f=0;6>=f;++f)a.push("a"+f),b.push("o"+f);for(var l=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],f=2;6>=f;++f)l.push("case ",f,":return o",f,"(",a.slice(0,f).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");
b.push(l.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[x].concat(e));for(f=0;6>=f;++f)g.exports[f]=e[f]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":118}],103:[function(a,g,k){function m(a,b){for(var e=Array(a.length-1),f=1;f<a.length;++f)for(var g=e[f-1]=Array(a.length-1),h=0,l=0;h<a.length;++h)h!==b&&(g[l++]=a[f][h]);return e}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",
n(a.slice(0,b)),",",n(a.slice(b)),")"].join("")}function b(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var d=[],e=0;e<a.length;++e)d.push(["scale(",n(b(m(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return d}function f(a){for(var d=[],e=[],f=Array(a),g=0;g<a;++g){f[g]=Array(a);for(var l=0;l<a;++l)f[g][l]=["m",l,"[",a-g-1,"]"].join("")}g=[];for(l=0;l<a;++l)0===(l&1)?d.push.apply(d,b(m(f,l))):e.push.apply(e,b(m(f,l))),g.push("m"+l);d=
n(d);e=n(e);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",d,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(x,h,v,t)}function l(a){var b=e[a.length];b||(b=e[a.length]=f(a.length));return b.apply(void 0,a)}var h=a("two-product"),x=a("robust-sum"),v=a("robust-scale"),t=a("robust-subtract"),u=f(3),r=f(4),e=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,e){var f=(a[1]-e[1])*
(b[0]-e[0]),g=(a[0]-e[0])*(b[1]-e[1]),h=f-g;if(0<f){if(0>=g)return h;f+=g}else if(0>f){if(0<=g)return h;f=-(f+g)}else return h;f*=3.3306690738754716E-16;return h>=f||h<=-f?h:u(a,b,e)},function(a,b,e,f){var g=a[0]-f[0],h=b[0]-f[0],l=e[0]-f[0],n=a[1]-f[1],m=b[1]-f[1],k=e[1]-f[1],u=a[2]-f[2],t=b[2]-f[2],v=e[2]-f[2],x=h*k,C=l*m,l=l*n,k=g*k,g=g*m,n=h*n,h=u*(x-C)+t*(l-k)+v*(g-n),u=7.771561172376103E-16*((Math.abs(x)+Math.abs(C))*Math.abs(u)+(Math.abs(l)+Math.abs(k))*Math.abs(t)+(Math.abs(g)+Math.abs(n))*
Math.abs(v));return h>u||-h>u?h:r(a,b,e,f)}];(function(){for(;5>=e.length;)e.push(f(e.length));for(var a=[],b=["slow"],h=0;5>=h;++h)a.push("a"+h),b.push("o"+h);for(var n=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],h=2;5>=h;++h)n.push("case ",h,":return o",h,"(",a.slice(0,h).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");b.push(n.join(""));a=Function.apply(void 0,
b);g.exports=a.apply(void 0,[l].concat(e));for(h=0;5>=h;++h)g.exports[h]=e[h]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":118}],104:[function(a,g,k){var m=a("robust-sum"),n=a("robust-scale");g.exports=function(a,f){if(1===a.length)return n(f,a[0]);if(1===f.length)return n(a,f[0]);if(0===a.length||0===f.length)return[0];var g=[0];if(a.length<f.length)for(var h=0;h<a.length;++h)g=m(g,n(f,a[h]));else for(h=0;h<f.length;++h)g=m(g,n(a,f[h]));return g}},{"robust-scale":105,
"robust-sum":108}],105:[function(a,g,k){var m=a("two-product"),n=a("two-sum");g.exports=function(a,f){var g=a.length;if(1===g)return g=m(a[0],f),g[0]?g:[g[1]];var h=Array(2*g),k=[.1,.1],v=[.1,.1],t=0;m(a[0],f,k);k[0]&&(h[t++]=k[0]);for(var u=1;u<g;++u){m(a[u],f,v);n(k[1],v[0],k);k[0]&&(h[t++]=k[0]);var r=v[1],e=k[1],c=r+e,r=e-(c-r);k[1]=c;r&&(h[t++]=r)}k[1]&&(h[t++]=k[1]);0===t&&(h[t++]=0);h.length=t;return h}},{"two-product":118,"two-sum":119}],106:[function(a,g,k){g.exports=function(a,b,f,g){var h=
m(a,f,g),k=m(b,f,g);if(0<h&&0<k||0>h&&0>k)return!1;var v=m(f,a,b),t=m(g,a,b);if(0<v&&0<t||0>v&&0>t)return!1;if(0===h&&0===k&&0===v&&0===t){a:{for(h=0;2>h;++h){var k=a[h],v=b[h],t=Math.max(k,v),u=f[h],r=g[h],e=Math.min(u,r);if(Math.max(u,r)<Math.min(k,v)||t<e){a=!1;break a}}a=!0}return a}return!0};var m=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,g,k){g.exports=function(a,g){var b=a.length|0,f=g.length|0;if(1===b&&1===f){var f=a[0],l=-g[0],b=f+l,h=b-f,b=(f=f-(b-h)+(l-h))?
[f,b]:[b];return b}var l=Array(b+f),k=h=0,v=0,t=Math.abs,u=a[k],r=t(u),e=-g[v],c=t(e),d,p;r<c?(p=u,k+=1,k<b&&(u=a[k],r=t(u))):(p=e,v+=1,v<f&&(e=-g[v],c=t(e)));k<b&&r<c||v>=f?(d=u,k+=1,k<b&&(u=a[k],r=t(u))):(d=e,v+=1,v<f&&(e=-g[v],c=t(e)));var w=d+p;p-=w-d;for(var y=w,E;k<b&&v<f;)r<c?(d=u,k+=1,k<b&&(u=a[k],r=t(u))):(d=e,v+=1,v<f&&(e=-g[v],c=t(e))),w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=d;for(;k<b;)d=u,w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=
d,k+=1,k<b&&(u=a[k]);for(;v<f;)d=e,w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=d,v+=1,v<f&&(e=-g[v]);p&&(l[h++]=p);y&&(l[h++]=y);h||(l[h++]=0);l.length=h;return l}},{}],108:[function(a,g,k){g.exports=function(a,g){var b=a.length|0,f=g.length|0;if(1===b&&1===f){var f=a[0],l=g[0],b=f+l,h=b-f,b=(f=f-(b-h)+(l-h))?[f,b]:[b];return b}var l=Array(b+f),k=h=0,v=0,t=Math.abs,u=a[k],r=t(u),e=g[v],c=t(e),d,p;r<c?(p=u,k+=1,k<b&&(u=a[k],r=t(u))):(p=e,v+=1,v<f&&(e=g[v],c=t(e)));k<b&&r<c||
v>=f?(d=u,k+=1,k<b&&(u=a[k],r=t(u))):(d=e,v+=1,v<f&&(e=g[v],c=t(e)));var w=d+p;p-=w-d;for(var y=w,E;k<b&&v<f;)r<c?(d=u,k+=1,k<b&&(u=a[k],r=t(u))):(d=e,v+=1,v<f&&(e=g[v],c=t(e))),w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=d;for(;k<b;)d=u,w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=d,k+=1,k<b&&(u=a[k]);for(;v<f;)d=e,w=d+p,d=w-d,(d=p-d)&&(l[h++]=d),d=y+w,E=d-y,p=d-E,w-=E,y-=p,p=y+w,y=d,v+=1,v<f&&(e=g[v]);p&&(l[h++]=p);y&&(l[h++]=y);h||(l[h++]=0);l.length=
h;return l}},{}],109:[function(a,g,k){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,g,k){arguments[4][52][0].apply(k,arguments)},{dup:52}],111:[function(a,g,k){function m(a,b){var e=a.length,c=a.length-b.length,d=Math.min;if(c)return c;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:d(a[0],a[1])-d(b[0],b[1]);case 3:var c=a[0]+a[1],f=b[0]+b[1];if(e=c+a[2]-(f+b[2]))return e;var g=d(a[0],a[1]),h=d(b[0],b[1]);return(e=d(g,a[2])-d(h,b[2]))?e:
d(g+a[2],c)-d(h+b[2],f);default:d=a.slice(0);d.sort();f=b.slice(0);f.sort();for(g=0;g<e;++g)if(c=d[g]-f[g])return c;return 0}}function n(a,b){return m(a[0],b[0])}function b(a,b){if(b){for(var e=a.length,c=Array(e),d=0;d<e;++d)c[d]=[a[d],b[d]];c.sort(n);for(d=0;d<e;++d)a[d]=c[d][0],b[d]=c[d][1]}else a.sort(m);return a}function f(a){if(0===a.length)return[];for(var b=1,e=a.length,c=1;c<e;++c){var d=a[c];m(d,a[c-1])&&(c===b?b++:a[b++]=d)}a.length=b;return a}function l(a,b){for(var e=0,c=a.length-1,d=
-1;e<=c;){var f=e+c>>1,g=m(a[f],b);0>=g?(0===g&&(d=f),e=f+1):0<g&&(c=f-1)}return d}function h(a,b){for(var e=Array(a.length),c=0,d=e.length;c<d;++c)e[c]=[];for(var d=[],c=0,f=b.length;c<f;++c)for(var g=b[c],h=g.length,k=1,n=1<<h;k<n;++k){d.length=v.popCount(k);for(var t=0,x=0;x<h;++x)k&1<<x&&(d[t++]=g[x]);t=l(a,d);if(!(0>t))for(;!(e[t++].push(c),t>=a.length||0!==m(a[t],d)););}return e}function x(a,f){if(0>f)return[];for(var e=[],c=(1<<f+1)-1,d=0;d<a.length;++d)for(var g=a[d],h=c;h<1<<g.length;h=v.nextCombination(h)){for(var k=
Array(f+1),l=0,n=0;n<g.length;++n)h&1<<n&&(k[l++]=g[n]);e.push(k)}return b(e)}"use restrict";var v=a("bit-twiddle"),t=a("union-find");k.dimension=function(a){for(var b=0,e=Math.max,c=0,d=a.length;c<d;++c)b=e(b,a[c].length);return b-1};k.countVertices=function(a){for(var b=-1,e=Math.max,c=0,d=a.length;c<d;++c)for(var f=a[c],g=0,h=f.length;g<h;++g)b=e(b,f[g]);return b+1};k.cloneCells=function(a){for(var b=Array(a.length),e=0,c=a.length;e<c;++e)b[e]=a[e].slice(0);return b};k.compareCells=m;k.normalize=
b;k.unique=f;k.findCell=l;k.incidence=h;k.dual=function(a,b){if(!b)return h(f(x(a,0)),a,0);for(var e=Array(b),c=0;c<b;++c)e[c]=[];for(var c=0,d=a.length;c<d;++c)for(var g=a[c],k=0,l=g.length;k<l;++k)e[g[k]].push(c);return e};k.explode=function(a){for(var f=[],e=0,c=a.length;e<c;++e)for(var d=a[e],g=d.length|0,h=1,k=1<<g;h<k;++h){for(var l=[],n=0;n<g;++n)h>>>n&1&&l.push(d[n]);f.push(l)}return b(f)};k.skeleton=x;k.boundary=function(a){for(var f=[],e=0,c=a.length;e<c;++e)for(var d=a[e],g=0,h=d.length;g<
h;++g){for(var k=Array(d.length-1),l=0,n=0;l<h;++l)l!==g&&(k[n++]=d[l]);f.push(k)}return b(f)};k.connectedComponents=function(a,g){if(g){for(var e=new t(g),c=0;c<a.length;++c)for(var d=a[c],h=0;h<d.length;++h)for(var k=h+1;k<d.length;++k)e.link(d[h],d[k]);d=[];h=e.ranks;for(c=0;c<h.length;++c)h[c]=-1;for(c=0;c<a.length;++c)k=e.find(a[c][0]),0>h[k]?(h[k]=d.length,d.push([a[c].slice(0)])):d[h[k]].push(a[c].slice(0));return d}e=f(b(x(a,0)));c=new t(e.length);for(d=0;d<a.length;++d)for(h=a[d],k=0;k<h.length;++k)for(var n=
l(e,[h[k]]),m=k+1;m<h.length;++m)c.link(n,l(e,[h[m]]));h=[];k=c.ranks;for(d=0;d<k.length;++d)k[d]=-1;for(d=0;d<a.length;++d)n=c.find(l(e,[a[d][0]])),0>k[n]?(k[n]=h.length,h.push([a[d].slice(0)])):h[k[n]].push(a[d].slice(0));return h}},{"bit-twiddle":110,"union-find":122}],112:[function(a,g,k){g.exports=function(a,f,g){function h(a){if(q[a])return Infinity;var b=w[a],c=y[a];if(0>b||0>c)return Infinity;b=f[b];c=f[c];return Math.abs(m(f[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}
function k(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function v(a){for(var b=E[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<I){var g=E[A[d]];g<c&&(f=d,c=g)}e<I&&E[A[e]]<c&&(f=e);if(f===a)return a;k(a,f);a=f}}function t(a){for(var b=E[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[A[c]])k(a,c),a=c;else return a}}function u(){if(0<I){var a=A[0];k(0,I-1);--I;v(0);return a}return-1}function r(a,b){var c=A[a];if(E[c]===b)return a;E[c]=-Infinity;t(a);u();E[c]=b;I+=1;return t(I-1)}function e(a){if(!q[a]){q[a]=
!0;var b=w[a];a=y[a];0<=w[a]&&(w[a]=b);0<=y[b]&&(y[b]=a);0<=B[b]&&r(B[b],h(b));0<=B[a]&&r(B[a],h(a))}}function c(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=a[d];if(!q[d]||0>e||e===d)break;d=e;e=a[d];if(!q[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var d=f.length,p=a.length,w=Array(d),y=Array(d),E=Array(d),q=Array(d),z=0;z<d;++z)w[z]=y[z]=-1,E[z]=Infinity,q[z]=!1;for(z=0;z<p;++z){var D=a[z];if(2!==D.length)throw Error("Input must be a graph");var G=D[1],
D=D[0];y[D]=-1!==y[D]?-2:G;w[G]=-1!==w[G]?-2:D}for(var A=[],B=Array(d),z=0;z<d;++z)Infinity>(E[z]=h(z))?(B[z]=A.length,A.push(z)):B[z]=-1;for(var I=A.length,z=I>>1;0<=z;--z)v(z);for(;;){z=u();if(0>z||E[z]>g)break;e(z)}g=[];for(z=0;z<d;++z)q[z]||(B[z]=g.length,g.push(f[z].slice()));var H=[];a.forEach(function(a){var b=c(w,a[0]);a=c(y,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&H.push([b,a]))});n.unique(n.normalize(H));return{positions:g,edges:H}};var m=a("robust-orientation"),n=a("simplicial-complex")},
{"robust-orientation":103,"simplicial-complex":111}],113:[function(a,g,k){function m(a,f){var g,h;if(f[0][0]<f[1][0])g=f[0],h=f[1];else if(f[0][0]>f[1][0])g=f[1],h=f[0];else{g=Math.min(a[0][1],a[1][1]);h=Math.max(a[0][1],a[1][1]);var k=Math.min(f[0][1],f[1][1]),m=Math.max(f[0][1],f[1][1]);return h<k?h-k:g>m?g-m:h-m}a[0][1]<a[1][1]?(m=a[0],k=a[1]):(m=a[1],k=a[0]);return(m=n(h,g,m))?m:(m=n(h,g,k))?m:k-h}g.exports=function(a,f){var g,h;if(f[0][0]<f[1][0])g=f[0],h=f[1];else if(f[0][0]>f[1][0])g=f[1],
h=f[0];else return m(f,a);var k,v;if(a[0][0]<a[1][0])k=a[0],v=a[1];else if(a[0][0]>a[1][0])k=a[1],v=a[0];else return-m(a,f);var t=n(g,h,v),u=n(g,h,k);if(0>t){if(0>=u)return t}else if(0<t){if(0<=u)return t}else if(u)return u;t=n(v,k,h);u=n(v,k,g);if(0>t){if(0>=u)return t}else if(0<t){if(0<=u)return t}else if(u)return u;return h[0]-v[0]};var n=a("robust-orientation")},{"robust-orientation":103}],114:[function(a,g,k){arguments[4][84][0].apply(k,arguments)},{dup:84}],115:[function(a,g,k){function m(a,
b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function n(a,b){return a.y-b}function b(a,f){for(var e=null;a;){var c=a.key,d,g;c[0][0]<c[1][0]?(d=c[0],g=c[1]):(d=c[1],g=c[0]);d=v(d,g,f);if(0>d)a=a.left;else if(0<d)if(f[0]!==c[1][0])e=a,a=a.right;else{if(c=b(a.right,f))return c;a=a.left}else{if(f[0]!==c[1][0])return a;if(c=b(a.right,f))return c;a=a.left}}return e}function f(a,b,e,c){this.y=a;this.index=b;this.start=e;this.closed=c}function l(a,b,e,c){this.x=a;this.segment=b;this.create=e;this.index=
c}g.exports=function(a){for(var b=a.length,e=2*b,c=Array(e),d=0;d<b;++d){var g=a[d],h=g[0][0]<g[1][0];c[2*d]=new l(g[0][0],g,h,d);c[2*d+1]=new l(g[1][0],g,!h,d)}c.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=x(t);b=[];g=[];h=[];for(d=0;d<e;){for(var k=c[d].x,n=[];d<e;){var q=c[d];if(q.x!==k)break;d+=1;q.segment[0][0]===q.x&&q.segment[1][0]===q.x?q.create&&(q.segment[0][1]<q.segment[1][1]?
(n.push(new f(q.segment[0][1],q.index,!0,!0)),n.push(new f(q.segment[1][1],q.index,!1,!1))):(n.push(new f(q.segment[1][1],q.index,!0,!1)),n.push(new f(q.segment[0][1],q.index,!1,!0)))):a=q.create?a.insert(q.segment,q.index):a.remove(q.segment)}b.push(a.root);g.push(k);h.push(n)}return new m(b,g,h)};var h=a("binary-search-bounds"),x=a("functional-red-black-tree"),v=a("robust-orientation"),t=a("./lib/order-segments");m.prototype.castUp=function(a){var f=h.le(this.coordinates,a[0]);if(0>f)return-1;var e=
b(this.slabs[f],a),c=-1;e&&(c=e.value);if(this.coordinates[f]===a[0]){var d=null;e&&(d=e.key);0<f&&(e=b(this.slabs[f-1],a))&&(d?0<t(e.key,d)&&(d=e.key,c=e.value):(c=e.value,d=e.key));e=this.horizontal[f];if(0<e.length){var g=h.ge(e,a[1],n);if(g<e.length){f=e[g];if(a[1]===f.y){if(f.closed)return f.index;for(;g<e.length-1&&e[g+1].y===a[1];)if(g+=1,f=e[g],f.closed)return f.index;if(f.y===a[1]&&!f.start){g+=1;if(g>=e.length)return c;f=e[g]}}f.start?d?(a=v(d[0],d[1],[a[0],f.y]),d[0][0]>d[1][0]&&(a=-a),
0<a&&(c=f.index)):c=f.index:f.y!==a[1]&&(c=f.index)}}}return c}},{"./lib/order-segments":113,"binary-search-bounds":114,"functional-red-black-tree":77,"robust-orientation":103}],116:[function(a,g,k){function m(a,f){var g=a.length,k=["'use strict';"],l="surfaceNets"+a.join("_")+"d"+f;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&k.push("getters:[0],");for(var m=[],e=[],c=0;c<g;++c)m.push("d"+
c),e.push("d"+c);for(c=0;c<1<<g;++c)m.push("v"+c),e.push("v"+c);for(c=0;c<1<<g;++c)m.push("p"+c),e.push("p"+c);m.push("a","b","c");e.push("a","c");k.push("vertex:function vertexFunc(",m.join(),"){");m=[];for(c=0;c<1<<g;++c)m.push("(p"+c+"<<"+c+")");k.push("var m=(",m.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var m=[],d=[];128>=1<<(1<<g)?(k.push("switch(m){"),d=k):k.push("switch(m>>>7){");for(c=0;c<1<<(1<<g);++c){128<1<<(1<<g)&&0===c%128&&(0<m.length&&d.push("}}"),d="vExtra"+m.length,
k.push("case ",c>>>7,":",d,"(m&0x7f,",e.join(),");break;"),d=["function ",d,"(m,",e.join(),"){switch(m){"],m.push(d));d.push("case ",c&127,":");for(var p=Array(g),w=Array(g),y=Array(g),E=Array(g),q=0,z=0;z<g;++z)p[z]=[],w[z]=[],y[z]=0,E[z]=0;for(z=0;z<1<<g;++z)for(var D=0;D<g;++D){var G=z^1<<D;if(!(G>z)&&!(c&1<<G)!==!(c&1<<z)){var A=1;c&1<<G?w[D].push("v"+G+"-v"+z):(w[D].push("v"+z+"-v"+G),A=-A);0>A?(p[D].push("-v"+z+"-v"+G),y[D]+=2):(p[D].push("v"+z+"+v"+G),y[D]-=2);q+=1;for(A=0;A<g;++A)A!==D&&(G&
1<<A?E[A]+=1:--E[A])}}z=[];for(D=0;D<g;++D)0===p[D].length?z.push("d"+D+"-0.5"):(G="",0>y[D]?G=y[D]+"*c":0<y[D]&&(G="+"+y[D]+"*c"),z.push("d"+D+"-"+(.5+E[D]/q*.5)+"-"+p[D].length/q*.5+"*("+p[D].join("+")+G+")/("+w[D].join("+")+")"));d.push("a.push([",z.join(),"]);","break;")}k.push("}},");0<m.length&&d.push("}}");e=[];for(c=0;c<1<<g-1;++c)e.push("v"+c);e.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",e.join(),"){");g=b(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+
a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",l,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",l,";");for(c=0;c<m.length;++c)k.push(m[c].join(""));return(new Function("genContour",k.join("")))(n)}g.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=f(a,
b),k=g.length,n=Array(k),r=Array(k),e=0;e<k;++e)n[e]=[g[e]],r[e]=[e];return{positions:n,cells:r}}g=a.order.join()+"-"+a.dtype;k=l[g];b=+b||0;k||(k=l[g]=m(a.order,a.dtype));return k(a,b)};var n=a("ndarray-extract-contour"),b=a("triangulate-hypercube"),f=a("zero-crossings"),l={}},{"ndarray-extract-contour":87,"triangulate-hypercube":117,"zero-crossings":127}],117:[function(a,g,k){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(b(a+1))|0,h=[],k=0;k<g;++k){for(var v=m.unrank(a,
k),t=[0],u=0,r=0;r<v.length;++r)u+=1<<v[r],t.push(u);1>n(v)&&(t[0]=u,t[a]=0);h.push(t)}return h};var m=a("permutation-rank"),n=a("permutation-parity"),b=a("gamma")},{gamma:78,"permutation-parity":91,"permutation-rank":92}],118:[function(a,g,k){g.exports=function(a,b,f){var g=a*b,h=m*a,h=h-(h-a);a-=h;var k=m*b,k=k-(k-b);b-=k;b=a*b-(g-h*k-a*k-h*b);return f?(f[0]=b,f[1]=g,f):[b,g]};var m=+(Math.pow(2,27)+1)},{}],119:[function(a,g,k){g.exports=function(a,g,b){var f=a+g,k=f-a;g-=k;a-=f-k;return b?(b[0]=
a+g,b[1]=f,b):[a+g,f]}},{}],120:[function(a,g,k){function m(a,b,f){var g=a[f]|0;if(0>=g)return[];var h=Array(g),k;if(f===a.length-1)for(k=0;k<g;++k)h[k]=b;else for(k=0;k<g;++k)h[k]=m(a,b,f+1);return h}g.exports=function(a,b){"undefined"===typeof b&&(b=0);switch(typeof a){case "number":if(0<a){var f=a|0,g=b,h,k;h=Array(f);for(k=0;k<f;++k)h[k]=g;return h}break;case "object":if("number"===typeof a.length)return m(a,b,0)}return[]}},{}],121:[function(a,g,k){(function(g,n){function b(a){if(a){var b=w.log2(a.length||
a.byteLength);z[b].push(a)}}function f(a){a=w.nextPow2(a);var b=w.log2(a),b=z[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function l(a){return new Uint8Array(f(a),0,a)}function h(a){return new Uint16Array(f(2*a),0,a)}function x(a){return new Uint32Array(f(4*a),0,a)}function v(a){return new Int8Array(f(a),0,a)}function t(a){return new Int16Array(f(2*a),0,a)}function u(a){return new Int32Array(f(4*a),0,a)}function r(a){return new Float32Array(f(4*a),0,a)}function e(a){return new Float64Array(f(8*
a),0,a)}function c(a){return E?new Uint8ClampedArray(f(a),0,a):l(a)}function d(a){return new DataView(f(a),0,a)}function p(a){a=w.nextPow2(a);var b=w.log2(a),b=D[b];return 0<b.length?b.pop():new n(a)}var w=a("bit-twiddle"),y=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var E="undefined"!==typeof Uint8ClampedArray,
q=g.__TYPEDARRAY_POOL;q.UINT8C||(q.UINT8C=y([32,0]));q.BUFFER||(q.BUFFER=y([32,0]));var z=q.DATA,D=q.BUFFER;k.free=function(a){if(n.isBuffer(a))D[w.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=w.log2(a.length||a.byteLength)|0;z[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){b(a.buffer)};k.freeArrayBuffer=
b;k.freeBuffer=function(a){D[w.log2(a.length)].push(a)};k.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return f(a);switch(b){case "uint8":return l(a);case "uint16":return h(a);case "uint32":return x(a);case "int8":return v(a);case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return e(a);case "uint8_clamped":return c(a);case "buffer":return p(a);case "data":case "dataview":return d(a);default:return null}};k.mallocArrayBuffer=
f;k.mallocUint8=l;k.mallocUint16=h;k.mallocUint32=x;k.mallocInt8=v;k.mallocInt16=t;k.mallocInt32=u;k.mallocFloat32=k.mallocFloat=r;k.mallocFloat64=k.mallocDouble=e;k.mallocUint8Clamped=c;k.mallocDataView=d;k.mallocBuffer=p;k.clearCache=function(){for(var a=0;32>a;++a)q.UINT8[a].length=0,q.UINT16[a].length=0,q.UINT32[a].length=0,q.INT8[a].length=0,q.INT16[a].length=0,q.INT32[a].length=0,q.FLOAT[a].length=0,q.DOUBLE[a].length=0,q.UINT8C[a].length=0,z[a].length=0,D[a].length=0}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:120}],122:[function(a,g,k){function m(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";g.exports=m;m.prototype.length=function(){return this.roots.length};m.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};m.prototype.find=function(a){for(var b=
this.roots;b[a]!==a;){var f=b[a];b[a]=b[f];a=f}return a};m.prototype.link=function(a,b){var f=this.find(a),g=this.find(b);if(f!==g){var h=this.ranks,k=this.roots,m=h[f],t=h[g];m<t?k[f]=g:t<m?k[g]=f:(k[g]=f,++h[f])}}},{}],123:[function(a,g,k){g.exports=function(a,g,b){if(0===a.length)return a;if(g){b||a.sort(g);b=1;for(var f=a.length,k=a[0],h=a[0],x=1;x<f;++x)h=k,k=a[x],g(k,h)&&(x===b?b++:a[b++]=k);a.length=b;return a}b||a.sort();g=1;b=a.length;f=a[0];k=a[0];for(h=1;h<b;++h)k=f,f=a[h],f!==k&&(h===
g?g++:a[g++]=f);a.length=g;return a}},{}],124:[function(a,g,k){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return m(a,g.canvas||n,g.context||b,g)};var m=a("./lib/vtext"),n=null,b=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,b=n.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,g,k){function m(a,b,e){for(var c=b.textAlign||"start",d=b.textBaseline||"alphabetic",f=[1073741824,1073741824],g=[0,0],h=a.length,k=0;k<h;++k)for(var l=
a[k],m=0;2>m;++m)f[m]=Math.min(f[m],l[m])|0,g[m]=Math.max(g[m],l[m])|0;var n=0;switch(c){case "center":n=-.5*(f[0]+g[0]);break;case "right":case "end":n=-g[0];break;case "left":case "start":n=-f[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+c+"'");}var t=0;switch(d){case "hanging":case "top":t=-f[1];break;case "middle":t=-.5*(f[1]+g[1]);break;case "alphabetic":case "ideographic":t=-3*e;break;case "bottom":t=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+
d+"'");}var v=1/e;"lineHeight"in b?v*=+b.lineHeight:"width"in b?v=b.width/(g[0]-f[0]):"height"in b&&(v=b.height/(g[1]-f[1]));return a.map(function(a){return[v*(a[0]+n),v*(a[1]+t)]})}function n(a,b,e,c){a=f(a,128);c=c?h(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};e=m(c.positions,b,e);a=c.edges;c="ccw"===b.orientation;x(e,a);if(b.polygons||b.polygon||b.polyline){b=t(a,e);a=Array(b.length);for(var d=0;d<b.length;++d){for(var g=b[d],k=Array(g.length),l=0;l<g.length;++l){for(var n=g[l],
q=Array(n.length),z=0;z<n.length;++z)q[z]=e[n[z]].slice();c&&q.reverse();k[l]=q}a[d]=k}return a}return b.triangles||b.triangulate||b.triangle?{cells:v(e,a,{delaunay:!1,exterior:!1,interior:!0}),positions:e}:{edges:a,positions:e}}function b(a,b,e){try{return n(a,b,e,!0)}catch(c){}try{return n(a,b,e,!1)}catch(c){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,f,e,c){var d=c.size||64;e.font=d+"px "+
(c.font||"normal");e.textAlign="start";e.textBaseline="alphabetic";e.direction="ltr";var g;g=Math.ceil(e.measureText(a).width+2*d)|0;if(8192<g)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var h=3*d;f.height<h&&(f.height=h);e.fillStyle="#000";e.fillRect(0,0,f.width,f.height);e.fillStyle="#fff";e.fillText(a,d,2*d);a=e.getImageData(0,0,g,h);g=l(a.data,[h,g,4]).pick(-1,-1,0).transpose(1,0);return b(g,c,d)};g.exports.processPixels=b;var f=a("surface-nets"),l=a("ndarray"),
h=a("simplify-planar-graph"),x=a("clean-pslg"),v=a("cdt2d"),t=a("planar-graph-to-polyline")},{cdt2d:62,"clean-pslg":67,ndarray:88,"planar-graph-to-polyline":95,"simplify-planar-graph":112,"surface-nets":116}],126:[function(a,g,k){g.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":72}],127:[function(a,g,k){g.exports=function(a,b){var f=[];b=+b||0;m(a.hi(a.shape[0]-1),f,b);return f};var m=a("./lib/zc-core")},
{"./lib/zc-core":126}],128:[function(a,g,k){var m=a("./lib/util/extend"),n=a("./lib/context"),b=a("./lib/strings"),f=a("./lib/extension"),l=a("./lib/limits"),h=a("./lib/buffer"),x=a("./lib/elements"),v=a("./lib/texture"),t=a("./lib/renderbuffer"),u=a("./lib/framebuffer"),r=a("./lib/uniform"),e=a("./lib/attribute"),c=a("./lib/shader"),d=a("./lib/draw"),p=a("./lib/state"),w=a("./lib/compile"),y=a("./lib/read"),E=a("./lib/dynamic"),q=a("./lib/util/raf"),z=a("./lib/util/clock");g.exports=function(){function a(){ba=
q.next(a);O.count+=1;if(O.width!==K.drawingBufferWidth||O.height!==K.drawingBufferHeight)O.width=K.drawingBufferWidth,O.height=K.drawingBufferHeight,Q.notifyViewportChanged();var b=z();O.dt=b-O.t;O.t=b;X.poll();for(var c=0;c<ga.length;++c)(0,ga[c])(O.count,O.t,O.dt);O.renderTime=z()-b}function g(){ba&&(q.cancel(a),ba=0)}function k(a){g();a.preventDefault();if(J.onContextLost)J.onContextLost()}function B(b){K.getError();L.refresh();P.refresh();X.refresh();F.refresh();S.refresh();ea.refresh();Q.refresh();
if(J.onContextRestored)J.onContextRestored();a()}function I(a){function b(a){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];E.isDynamic(f)?(c=!0,e[b]=E.unbox(f,b)):d[b]=f});return{dynamic:e,"static":d}}var c=!1,d=b(a.uniforms||{}),e=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=m({},a);delete c.uniforms;delete c.attributes;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");
b("sample");return c}(a));var d=U.command(a["static"],d["static"],e["static"],a.dynamic,d.dynamic,e.dynamic,c),f=d.draw,g=d.batch,h=d.scope,k=[];return function(a,b){if("function"===typeof a)return h(null,a);if("function"===typeof b)return h(a,b);if("number"===typeof a){for(var c=a|0;k.length<c;)k.push(null);return g(a|0,k)}return Array.isArray(a)?g(a.length,a):f(a)}}function H(){S.poll();Q.poll()}var C=n(Array.prototype.slice.call(arguments)),K=C.gl,J=C.options,C=b(),L=f(K),T=L.extensions,M={width:K.drawingBufferWidth,
height:K.drawingBufferHeight},N=l(K,T),P=h(K),R=x(K,T,P),aa=r(C),ha=e(K,T,N,P,C),ea=c(K,ha,aa,function(a){return U.draw(a)},C),Y=d(K,T,P),X=v(K,T,N,H,M),F=t(K,T,N),S=u(K,T,N,X,F),O={count:0,start:z(),dt:0,t:z(),renderTime:0,width:K.drawingBufferWidth,height:K.drawingBufferHeight,pixelRatio:J.pixelRatio},Q=p(K,S,M),M=y(K,H,M),U=w(K,C,T,N,P,R,X,S,Q,aa,ha,ea,Y,O,H),da=K.canvas,ga=[],ba=0;da&&(da.addEventListener("webglcontextlost",k,!1),da.addEventListener("webglcontextrestored",B,!1));return m(I,{clear:function(a){var b=
0;H();var c=a.color;c&&(K.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(K.clearDepth(+a.depth),b|=256);"stencil"in a&&(K.clearStencil(a.stencil|0),b|=1024);K.clear(b)},prop:E.define,draw:I({}),elements:function(a){return R.create(a)},buffer:function(a){return P.create(a,34962)},texture:function(a){return X.create(a,3553)},cube:function(a){return 6===arguments.length?X.create(Array.prototype.slice.call(arguments),34067):X.create(a,34067)},renderbuffer:function(a){return F.create(a)},
framebuffer:function(a){return S.create(a)},framebufferCube:function(a){},frame:function(b){ga.push(b);!ba&&0<ga.length&&a();return{cancel:function(){var a=ga.find(function(a){return a===b});0>a||(ga.splice(a,1),0>=ga.length&&g())}}},stats:O,limits:N,read:M,destroy:function(){g();da&&(da.removeEventListener("webglcontextlost",k),da.removeEventListener("webglcontextrestored",B));ea.clear();S.clear();F.clear();X.clear();P.clear();if(J.onDestroy)J.onDestroy()}})}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/compile":4,"./lib/context":8,"./lib/draw":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/state":18,"./lib/strings":19,"./lib/texture":20,"./lib/uniform":21,"./lib/util/clock":22,"./lib/util/extend":24,"./lib/util/raf":29}]},{},[1]);

        </script>
        </body>
      </html>