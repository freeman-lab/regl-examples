<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var f=0;return{next:function(){return f==a.length?{done:!0}:{done:!1,value:a[f++]}}}};
$jscomp.arrayFromIterator=function(a){for(var f,e=[];!(f=a.next()).done;)e.push(f.value);return e};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,f){function e(){}e.prototype=f.prototype;a.prototype=new e;a.prototype.constructor=a;for(var p in f)if($jscomp.global.Object.defineProperties){var m=$jscomp.global.Object.getOwnPropertyDescriptor(f,p);m&&$jscomp.global.Object.defineProperty(a,p,m)}else a[p]=f[p]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,f){a instanceof String&&(a=String(a));var e=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={},m=(p.next=function(){if(e<a.length){var c=e++;return{value:f(c,a[c]),done:!1}}m.next=$jscomp.array.done_;return $jscomp.array.done_()},p[Symbol.iterator]=function(){return m},p);return m};
$jscomp.array.findInternal_=function(a,f,e){a instanceof String&&(a=String(a));for(var p=a.length,m=0;m<p;m++){var c=a[m];if(f.call(e,c,m,a))return{i:m,v:c}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,f,e){f=void 0===f?function(b){return b}:f;var p=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var m;!(m=a.next()).done;)p.push(f.call(e,m.value))}else{m=a.length;for(var c=0;c<m;c++)p.push(f.call(e,a[c]))}return p};$jscomp.array.of=function(a){for(var f=[],e=0;e<arguments.length;++e)f[e-0]=arguments[e];return $jscomp.array.from(f)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,f){return[a,f]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,f){return f})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,f,e){var p=this.length;a=Number(a);f=Number(f);e=Number(null!=e?e:p);if(a<f)for(e=Math.min(e,p);f<e;)f in this?this[a++]=this[f++]:(delete this[a++],f++);else for(e=Math.min(e,p+f-a),a+=e-f;e>f;)--e in this?this[--a]=this[e]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,f,e){null!=e&&a.length||(e=this.length||0);e=Number(e);for(f=Number((void 0===f?0:f)||0);f<e;f++)this[f]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,f){return $jscomp.array.findInternal_(this,a,f).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,f){return $jscomp.array.findInternal_(this,a,f).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())f=f.value,this.set(f[0],f[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var f=Object.seal({x:4}),e=new a($jscomp.makeIterator([[f,"s"]]));if("s"!=e.get(f)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var p=e.entries(),m=p.next();if(m.done||m.value[0]!=f||"s"!=m.value[1])return!1;m=p.next();return m.done||4!=m.value[0].x||"t"!=m.value[1]||!p.next().done?!1:!0}catch(c){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,f){var e=this.maybeGetEntry_(a),p=e.id,m=e.list,e=e.entry;m||(m=this.data_[p]=[]);e?e.value=f:(e={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:f},m.push(e),this.head_.previous.next=e,this.head_.previous=e,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var f=this.maybeGetEntry_(a);a=f.id;var e=f.list,p=f.index;return(f=f.entry)&&e?(e.splice(p,1),e.length||delete this.data_[a],f.previous.next=f.next,f.next.previous=f.previous,f.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var f=$jscomp.Map.getId_(a),e=this.data_[f];if(e)for(var p=0;p<e.length;p++){var m=e[p];if(a!==a&&m.key!==m.key||a===m.key)return{id:f,list:e,index:p,entry:m}}return{id:f,list:e,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,f){for(var e=$jscomp.makeIterator(this.entries()),p=e.next();!p.done;p=e.next())p=p.value,a.call(f,p[1],p[0],this)};
$jscomp.Map.prototype.iter_=function(a){var f=this,e=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={};return p.next=function(){if(e){for(;e.head!=f.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:a(e)};e=null}return{done:!0,value:void 0}},p[Symbol.iterator]=function(){return this},p};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,f,e){Object.defineProperty(a,f,{value:String(e)})}:function(a,f,e){a[f]=String(e)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var f=0;0===(a&4294901760)&&(a<<=16,f+=16);0===(a&4278190080)&&(a<<=8,f+=8);0===(a&4026531840)&&(a<<=4,f+=4);0===(a&3221225472)&&(a<<=2,f+=2);0===(a&2147483648)&&f++;return f};$jscomp.math.imul=function(a,f){a=Number(a);f=Number(f);var e=a&65535,p=f&65535;return e*p+((a>>>16&65535)*p+e*(f>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var f=a,e=1,p=a,m=0,c=1;m!=p;)f*=a,c*=-1,p=(m=p)+c*f/++e;return p}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var f=a,e=1,p=a,m=0;m!=p;)f*=a/++e,p=(m=p)+f;return p}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var f=Math.exp(2*-Math.abs(a)),f=(1-f)/(1+f);return 0>a?-f:f};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var f=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-f:f};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,f,e){for(var p=[],m=2;m<arguments.length;++m)p[m-2]=arguments[m];a=Number(a);f=Number(f);for(var c=Math.max(Math.abs(a),Math.abs(f)),b=$jscomp.makeIterator(p),m=b.next();!m.done;m=b.next())c=Math.max(c,Math.abs(m.value));if(1E100<c||1E-100>c){a/=c;f/=c;b=a*a+f*f;p=$jscomp.makeIterator(p);for(m=p.next();!m.done;m=p.next())m=m.value,m=Number(m)/c,b+=m*m;return Math.sqrt(b)*c}c=a*a+f*f;p=$jscomp.makeIterator(p);for(m=p.next();!m.done;m=p.next())m=m.value,m=Number(m),c+=
m*m;return Math.sqrt(c)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var f=Math.floor(Math.abs(a));return 0>a?-f:f};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var f=Math.pow(Math.abs(a),1/3);return 0>a?-f:f};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,f){for(var e=[],p=1;p<arguments.length;++p)e[p-1]=arguments[p];e=$jscomp.makeIterator(e);for(p=e.next();!p.done;p=e.next())if(p=p.value)for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(a[m]=p[m]);return a};$jscomp.object.is=function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())this.add(f.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var f=Object.seal({x:4}),a=new a($jscomp.makeIterator([f]));if(a.has(f)||1!=a.size||a.add(f)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),e=a.next();if(e.done||e.value[0]!=f||e.value[1]!=f)return!1;e=a.next();return e.done||e.value[0]==f||4!=e.value[0].x||e.value[1]!=e.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,f){var e=this;this.map_.forEach(function(p){return a.call(f,p,p,e)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,f){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var f=[],e=0;e<arguments.length;++e)f[e-0]=arguments[e];for(var e="",f=$jscomp.makeIterator(f),p=f.next();!p.done;p=f.next()){p=p.value;p=+p;if(0>p||1114111<p||p!==Math.floor(p))throw new RangeError("invalid_code_point "+p);65535>=p?e+=String.fromCharCode(p):(p-=65536,e+=String.fromCharCode(p>>>10&1023|55296),e+=String.fromCharCode(p&1023|56320))}return e};
$jscomp.string.repeat=function(a){var f=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var e="";a;)if(a&1&&(e+=f),a>>>=1)f+=f;return e};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var f=this.toString(),e=f.length;a=Number(a)||0;if(0<=a&&a<e){a|=0;var p=f.charCodeAt(a);if(55296>p||56319<p||a+1===e)return p;a=f.charCodeAt(a+1);return 56320>a||57343<a?p:1024*(p-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,f)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(a,"startsWith");var e=this.toString();a+="";for(var p=e.length,m=a.length,c=Math.max(0,Math.min(f|0,e.length)),b=0;b<m&&c<p;)if(e[c++]!=a[b++])return!1;return b>=m};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,f){$jscomp.string.noRegExp_(a,"endsWith");var e=this.toString();a+="";void 0===f&&(f=e.length);for(var p=Math.max(0,Math.min(f|0,e.length)),m=a.length;0<m&&0<p;)if(e[--p]!=a[--m])return!1;return 0>=m};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(f,e,p){function m(b,l){if(!e[b]){if(!f[b]){var x="function"==typeof require&&require;if(!l&&x)return x(b,!0);if(c)return c(b,!0);x=Error("Cannot find module '"+b+"'");throw x.code="MODULE_NOT_FOUND",x;}x=e[b]={exports:{}};f[b][0].call(x.exports,function(c){var l=f[b][1][c];return m(l?l:c)},x,x.exports,e$$0,f,e,p)}return e[b].exports}for(var c="function"==typeof require&&require,b=0;b<p.length;b++)m(p[b]);return m})({1:[function(a,f,e){f=a("../regl")();e=a("vectorize-text");var p=a("gl-mat4/perspective"),
m=a("gl-mat4/lookAt");a=e("hello regl!",{textAlign:"center",textBaseline:"middle"});var c=f.texture({copy:!0,min:"linear",mag:"linear"}),b=f({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:f.buffer([-2,0,0,-2,2,2])},uniforms:{texture:c,t:function(b,c,a){return.001*a.count}},depth:{enable:!1},count:3}),w=f({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",
attributes:{position:f.buffer(a.positions)},elements:f.elements(a.edges),uniforms:{t:function(b,c,a){return.01*a.count},view:function(b,c,a){b=.01*a.count;return m([],[5*Math.sin(b),0,-5*Math.cos(b)],[0,0,0],[0,-1,0])},projection:function(b,c,a){return p([],Math.PI/4,a.width/a.height,.01,1E3)}},depth:{enable:!1}});f.frame(function(){b();w();c({copy:!0,min:"linear",mag:"linear"})})},{"../regl":163,"gl-mat4/lookAt":38,"gl-mat4/perspective":39,"vectorize-text":40}],2:[function(a,f,e){var p=a("./constants/dtypes.json");
f.exports=function(a,c,b,w,l){function x(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function q(b){this.records=[];this.name=b}function t(b,d,n,k){k=n.size||k;var w;w=d.pointer?n.pointer&&d.buffer===n.buffer&&d.size===k&&d.normalized===n.normalized&&d.type===n.type&&d.offset===n.offset&&d.stride===n.stride&&d.divisor===n.divisor:!n.pointer&&d.x===n.x&&d.y===n.y&&d.z===n.z&&d.w===n.w;w||(n.pointer?
(d.pointer||a.enableVertexAttribArray(b),d.buffer!==n.buffer&&n.buffer.bind(),a.vertexAttribPointer(b,k,n.type,n.normalized,n.stride,n.offset),(w=c.angle_instanced_arrays)&&w.vertexAttribDivisorANGLE(b,n.divisor)):(d.pointer&&a.disableVertexAttribArray(b),a.vertexAttrib4f(b,n.x,n.y,n.z,n.w)),(d.pointer=n.pointer)?(d.buffer=n.buffer,d.size=k,d.normalized=n.normalized,d.type=n.type,d.offset=n.offset,d.stride=n.stride,d.divisor=n.divisor):(d.x=n.x,d.y=n.y,d.z=n.z,d.w=n.w))}var u={};b=b.maxAttributes;
for(var r=Array(b),k=0;k<b;++k)r[k]=new x;return{bindings:r,bind:function(b,d,c,k){c=c.records;t(b,d,c[c.length-1],k)},bindRecord:t,def:function(b){var d=l.id(b),c=u[d];c||(c=u[d]=new q(b));return c},box:function(b){var d=[new x];return{alloc:function(b){var c;c=0>=d.length?new x:d.pop();if("number"===typeof b)c.pointer=!1,c.x=b,c.y=0,c.z=0,c.w=0;else if(Array.isArray(b))c.pointer=!1,c.x=b[0],c.y=b[1],c.z=b[2],c.w=b[3];else{var h=w.getBuffer(b),k=0,g=0,a=0,l=0,A=!1,r=5126;h?r=h.dtype:(h=w.getBuffer(b.buffer),
k=b.size||0,g=b.stride||0,a=b.offset||0,l=b.divisor||0,A=b.normalized||!1,r=h.dtype,"type"in b&&(r=p[b.type]));c.pointer=!0;c.buffer=h;c.size=k;c.offset=a;c.stride=g;c.divisor=l;c.normalized=A;c.type=r}return c},free:function(b){d.push(b)}}},state:u}}},{"./constants/dtypes.json":6}],3:[function(a,f,e){function p(b,c){switch(b){case 5121:return new Uint8Array(c);case 5123:return new Uint16Array(c);case 5125:return new Uint32Array(c);case 5120:return new Int8Array(c);case 5122:return new Int16Array(c);
case 5124:return new Int32Array(c);case 5126:return new Float32Array(c);default:return null}}var m=a("./util/is-typed-array"),c=a("./util/is-ndarray"),b=a("./constants/arraytypes.json"),w=a("./constants/dtypes.json"),l=a("./util/values"),x={"static":35044,dynamic:35048,stream:35040};f.exports=function(a){function t(b,c){this.id=k++;this.buffer=b;this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function u(b){a.isBuffer(b.buffer)||(b.buffer=a.createBuffer());
b.bind();a.bufferData(b.type,b.data||b.byteLength,b.usage)}function r(b){var c=b.buffer;a.isBuffer(c)&&a.deleteBuffer(c);b.buffer=null;delete h[b.id]}var k=0,h={};t.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};return{create:function(d,n,k){function l(d){var h=d||{};if(Array.isArray(h)||m(h)||c(h))h={data:h};else if("number"===typeof h)h={length:h|0};else if(null===h||void 0===h)h={};g.usage="usage"in h?x[h.usage]:35044;d=0;"type"in h&&(d=w[h.type]);var n=h.dimension|0||1,k=0,a=null;
if("data"in h)if(a=h.data,null===a)k=h.length|0;else{if(c(a)){var n=a.shape,k=a.stride,h=a.offset,v=0,r=0,q=0,t=0;1===n.length?(v=n[0],r=1,q=k[0],t=0):2===n.length&&(v=n[0],r=n[1],q=k[0],t=k[1]);d=d||b[Object.prototype.toString.call(a)]|0||5126;for(var n=r,k=p(d,v*r),a=a.data,f=0,e=0;e<v;++e)for(var B=0;B<r;++B)k[f++]=a[q*e+t*B+h];a=k}else if(Array.isArray(a))if(0<a.length&&Array.isArray(a[0])){n=a[0].length;d=d||5126;h=p(d,a.length*n);k=a;a=n;for(v=t=0;v<k.length;++v)for(q=k[v],r=0;r<a;++r)h[t++]=
q[r];a=h}else d=d||5126,a=p(d,a);else d=d||b[Object.prototype.toString.call(a)]|0;k=a.byteLength}else"length"in h&&(k=h.length|0);g.data=a;g.dtype=d||5121;g.byteLength=k;g.dimension=n;u(g);return l}var f=a.createBuffer(),g=new t(f,n);h[g.id]=g;k||l(d);l._reglType="buffer";l._buffer=g;l.destroy=function(){r(g)};return l},clear:function(){l(h).forEach(r)},refresh:function(){l(h).forEach(u)},getBuffer:function(b){return b&&b._buffer instanceof t?b._buffer:null}}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,
"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":32}],4:[function(a,f,e){function p(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function m(b,c,k,h){var d,n=",";switch(c){case 5126:d="1f";break;case 35664:d="2fv";break;case 35665:d="3fv";break;case 35666:d="4fv";break;case 35670:case 5124:d="1i";break;case 35671:case 35667:d="2iv";break;case 35672:case 35668:d="3iv";break;
case 35673:case 35669:d="4iv";break;case 35674:d="Matrix2fv";n=",false,";break;case 35675:d="Matrix3fv";n=",false,";break;case 35676:d="Matrix4fv",n=",false,"}return b+".uniform"+d+"("+k+n+h+");"}function c(b){return b+"["+b+".length-1]"}function b(b,c){return"framebuffer"===b||b<c?-1:b>c?1:0}var w=a("./util/codegen"),l=a("./constants/primitives.json"),x={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,
"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},q={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};f.exports=function(a,r,k,
h,d,n,v,z,f,g,y,D,A,C,e){function G(d,h,v,r,L){function D(g){var b=Y[g];return b?b:b=Y[g]=I(H[g])}function f(g){var b=g.id,d=ra[b];if(d)return d;d=g.func?G.def(I(g.data),"(",ga,",",ha,",",ia,")"):G.def(ga,".",g.data);return ra[b]=d}function e(g,b){for(var d=0;d<g.length;++d)if(g[d].name===b)return g[d];return null}function B(g){return na&&!(g in h||g in L)}var E=w(),I=E.link,G=E.proc("batch"),Q=E.block(),R=G.def,T=G.arg,J=I(a),ca=I(d.program),da=I(y.bind),X=I(y.bindRecord),ia=I(C),qa=I(z),ja=I(A.count),
la=I(A.offset),oa=I(A.instances),V=I(A.primitive),Y={},W=I(n.elements),ja=R(c(ja)),la=R(c(la)),V=R(c(V)),W=R(c(W)),aa,pa,ka=k.angle_instanced_arrays;ka&&(aa=R(c(oa)),pa=I(ka));var na="elements"in h,oa=T(),T=T(),ga=R(),ha=R(),ra={};G(J,".useProgram(",ca,");");d.uniforms.forEach(function(b){if(!(b.name in v)){var d=I(b.location),c=I(g.def(b.name)),c=c+"["+c+".length-1]";b=b.info.type;35678===b||35680===b?(b=R(c+"._texture"),G(m(J,5124,d,b+".bind()")),Q(b,".unbind();")):G(m(J,b,d,c))}});d.attributes.forEach(function(g){if(!(g.name in
r)){var b=I(y.def(g.name));G(da,"(",g.location,",",I(y.bindings[g.location]),",",b,",",p(g.info.type),");")}});na||G("if(",W,")",J,".bindBuffer(",34963,",",W,".buffer.buffer);");G("for(",ha,"=0;",ha,"<",oa,";++",ha,"){",ga,"=",T,"[",ha,"];");Object.keys(h).sort(b).forEach(function(g){function b(g){G("if(",d,"){",J,".enable(",g,");}else{",J,".disable(",g,");}")}var d=f(h[g]);switch(g){case "framebuffer":g=D("viewport");var c=D("scissor.box");G("if(",qa,".push(",d,"&&",d,"._framebuffer)){",qa,".poll();",
g,".setDirty();",c,".setDirty();","}");break;case "cull.enable":b(2884);break;case "blend.enable":b(3042);break;case "dither":b(3024);break;case "stencil.enable":b(2960);break;case "depth.enable":b(2929);break;case "scissor.enable":b(3089);break;case "polygonOffset.enable":b(32823);break;case "sample.alpha":b(32926);break;case "sample.enable":b(32928);break;case "depth.mask":G(J,".depthMask(",d,");");break;case "depth.func":g=I(q);G(J,".depthFunc(",g,"[",d,"]);");break;case "depth.range":G(J,".depthRange(",
d,"[0],",d,"[1]);");break;case "blend.color":G(J,".blendColor(",d,"[0],",d,"[1],",d,"[2],",d,"[3]);");break;case "blend.equation":g=I(F);G("if(typeof ",d,'==="string"){',J,".blendEquation(",g,"[",d,"]);","}else{",J,".blendEquationSeparate(",g,"[",d,".rgb],",g,"[",d,".alpha]);","}");break;case "blend.func":g=I(x);G(J,".blendFuncSeparate(",g,'["srcRGB" in ',d,"?",d,".srcRGB:",d,".src],",g,'["dstRGB" in ',d,"?",d,".dstRGB:",d,".dst],",g,'["srcAlpha" in ',d,"?",d,".srcAlpha:",d,".src],",g,'["dstAlpha" in ',
d,"?",d,".dstAlpha:",d,".dst]);");break;case "stencil.mask":G(J,".stencilMask(",d,");");break;case "stencil.func":g=I(q);G(J,".stencilFunc(",g,"[",d,'.cmp||"always"],',d,".ref|0,",'"mask" in ',d,"?",d,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":c=I(t);G(J,".stencilOpSeparate(","stencil.opFront"===g?1028:1029,",",c,"[",d,'.fail||"keep"],',c,"[",d,'.zfail||"keep"],',c,"[",d,'.pass||"keep"]);');break;case "polygonOffset.offset":G(J,".polygonOffset(",d,".factor||0,",d,".units||0);");
break;case "cull.face":G(J,".cullFace(",d,'==="front"?',1028,":",1029,");");break;case "lineWidth":G(J,".lineWidth(",d,");");break;case "frontFace":G(J,".frontFace(",d,'==="cw"?',2304,":",2305,");");break;case "colorMask":G(J,".colorMask(",d,"[0],",d,"[1],",d,"[2],",d,"[3]);");break;case "sample.coverage":G(J,".sampleCoverage(",d,".value,",d,".invert);");break;case "scissor.box":case "viewport":g=D(g),G(g,".push(",d,".x||0,",d,".y||0,",d,".w||-1,",d,".h||-1);")}});("viewport"in h||"framebuffer"in
h)&&G(D("viewport"),".poll();");("scissor.box"in h||"framebuffer"in h)&&G(D("scissor.box"),".poll();");"framebuffer"in h&&G(qa,".pop();");var ma=d.uniforms,sa=[];Object.keys(v).forEach(function(g){var d=e(ma,g);if(d){var b=d.info.type,c=I(d.location);g=f(v[g]);35678===d.info.type||35680===d.info.type?(d=R(g+"._texture"),sa.push(d),G(m(J,5124,c,d+".bind()"))):G(m(J,b,c,g))}});sa.forEach(function(g){G(g,".unbind();")});var ta=d.attributes;Object.keys(r).forEach(function(g){var d=e(ta,g);if(d){var b=
I(y.box(g));g=f(r[g]);g=R(b+".alloc("+g+")");G(X,"(",d.location,",",I(y.bindings[d.location]),",",g,",",p(d.info.type),");");Q(b,".free(",g,");")}});h.count&&G(ja,"=",f(h.count),";");h.offset&&G(la,"=",f(h.offset),";");h.primitive&&G(V,"=",I(l),"[",f(h.primitive),"];");ka&&h.instances&&G(aa,"=",f(h.instances),";");na&&(d=f(h.elements),G(W,"=",d,"?",d,"._elements:null;"));B("offset")&&G(la,"=0;");G("if(",W,"){");B("count")&&G(ja,"=",W,".vertCount;");G("if(",ja,">0){");B("primitive")&&G(V,"=",W,".primType;");
na&&G(J,".bindBuffer(",34963,",",W,".buffer.buffer);");ka&&G("if(",aa,">0){",pa,".drawElementsInstancedANGLE(",V,",",ja,",",W,".type,",la,",",aa,");}else ");G(J,".drawElements(",V,",",ja,",",W,".type,",la,");");G("}}else if(",ja,">0){");B("count")||(B("primitive")&&G(V,"=",4,";"),ka&&G("if(",aa,">0){",pa,".drawArraysInstancedANGLE(",V,",",la,",",ja,",",aa,");}else{"),G(J,".drawArrays(",V,",",la,",",ja,");"),ka&&G("}"));G("}}",Q);return E.compile().batch}var H=f.contextState,F={add:32774,subtract:32778,
"reverse subtract":32779};k.ext_blend_minmax&&(F.min=32775,F.max=32776);var I=0;return{draw:function(d){var b=w(),h=b.link,v=b.proc("draw"),l=v.def,r=h(a),q=h(d.program),z=h(y.bind),t=h(A.count),x=h(A.offset),C=h(A.instances),D=h(A.primitive),f=h(n.elements),e=[];v(r,".useProgram(",q,");");d.attributes.forEach(function(g){var d=h(y.def(g.name));v(z,"(",g.location,",",h(y.bindings[g.location]),",",d,",",p(g.info.type),");")});d.uniforms.forEach(function(d){var b=h(d.location),c=h(g.def(d.name)),c=
c+"["+c+".length-1]";d=d.info.type;35678===d||35680===d?(d=l(c+"._texture"),e.push(d),v(m(r,5124,b,d+".bind()"))):v(m(r,d,b,c))});e.forEach(function(g){v(g,".unbind();")});d=l(c(D));t=l(c(t));x=l(c(x));f=l(c(f));v("if(",t,"){");(q=k.angle_instanced_arrays)?(C=l(c(C)),q=h(q),v("if(",f,"){",f,".bind();","if(",C,">0){",q,".drawElementsInstancedANGLE(",d,",",t,",",f,".type,",x,",",C,");}else{",r,".drawElements(",d,",",t,",",f,".type,",x,");}","}else if(",C,">0){",q,".drawArraysInstancedANGLE(",d,",",
x,",",t,",",C,");}else{",r,".drawArrays(",d,",",x,",",t,");}}")):v("if(",f,"){",f,".bind();",r,".drawElements(",d,",",t,",",f,".type,",x,");","}else{",r,".drawArrays(",d,",",x,",",t,");}}");return b.compile().draw},command:function(d,c,h,k,a,v,m){function u(g){var d=oa[g];return d?d:d=oa[g]=O(H[g])}function p(g,d){var b=u(g);V(b,".push(",d,");");Y(b,".pop();")}function f(g){var d=g.id,b=na[d];if(b)return b;b=g.func?W.def(O(g.data),"(",ka,",0,",pa,")"):W.def(ka,".",g.data);return na[d]=b}var B=w(),
O=B.link,Q=B.block,R=B.proc,T=I++,J=O(e),ca=O(D),da=O(z),X={count:O(A.count),offset:O(A.offset),instances:O(A.instances),primitive:O(A.primitive)},ia=O(n.elements),qa=O(l),ja=O(q),la=O(t),oa={},V=Q(),Y=Q();Object.keys(d).sort(b).forEach(function(g){var b=d[g];switch(g){case "frag":case "vert":b=r.id(b);D.shader("frag"===g?35632:35633,b);V(ca,".",g,".push(",b,");");Y(ca,".",g,".pop();");break;case "framebuffer":z.getFramebuffer(b);g=u("viewport");var c=u("scissor.box");V("if(",da,".push(",O(b&&b._framebuffer),
")){",g,".setDirty();",c,".setDirty();","}");Y("if(",da,".pop()){",g,".setDirty();",c,".setDirty();","}");break;case "count":case "offset":case "instances":V(X[g],".push(",b,");");Y(X[g],".pop();");break;case "primitive":V(X.primitive,".push(",l[b],");");Y(X.primitive,".pop();");break;case "elements":c=n.getElements(b);b=!("primitive"in d);g=!("count"in d);c?(c=O(c),V(ia,".push(",c,");"),b&&V(X.primitive,".push(",c,".primType);"),g&&V(X.count,".push(",c,".vertCount);")):(V(ia,".push(null);"),b&&V(X.primitive,
".push(",4,");"),g&&V(X.count,".push(0);"));b&&Y(X.primitive,".pop();");g&&Y(X.count,".pop();");"offset"in d||(V(X.offset,".push(0);"),Y(X.offset,".pop();"));Y(ia,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":p(g,b);break;case "depth.func":p(g,q[b]);break;case "depth.range":g=u(g);V(g,".push(",b[0],",",b[1],");");Y(g,".pop();");
break;case "blend.func":g=u(g);V(g,".push(",x["srcRGB"in b?b.srcRGB:b.src],",",x["dstRGB"in b?b.dstRGB:b.dst],",",x["srcAlpha"in b?b.srcAlpha:b.src],",",x["dstAlpha"in b?b.dstAlpha:b.dst],");");Y(g,".pop();");break;case "blend.equation":g=u(g);"string"===typeof b?V(g,".push(",F[b],",",F[b],");"):"object"===typeof b&&V(g,".push(",F[b.rgb],",",F[b.alpha],");");Y(g,".pop();");break;case "blend.color":g=u(g);V(g,".push(",b[0],",",b[1],",",b[2],",",b[3],");");Y(g,".pop();");break;case "stencil.mask":g=
u(g);V(g,".push(",b,");");Y(g,".pop();");break;case "stencil.func":var c=b.cmp||"keep",h=b.ref||0,b="mask"in b?b.mask:-1;g=u(g);V(g,".push(",q[c],",",h,",",b,");");Y(g,".pop();");break;case "stencil.opFront":case "stencil.opBack":c=b.fail||"keep";h=b.zfail||"keep";b=b.pass||"keep";g=u(g);V(g,".push(",t[c],",",t[h],",",t[b],");");Y(g,".pop();");break;case "polygonOffset.offset":c=b.factor||0;b=b.units||0;g=u(g);V(g,".push(",c,",",b,");");Y(g,".pop();");break;case "cull.face":c=0;"front"===b?c=1028:
"back"===b&&(c=1029);b=u(g);V(b,".push(",c,");");Y(b,".pop();");break;case "lineWidth":p(g,b);break;case "frontFace":c=0;"cw"===b?c=2304:"ccw"===b&&(c=2305);b=u(g);V(b,".push(",c,");");Y(b,".pop();");break;case "colorMask":g=u(g);V(g,".push(",b.map(function(g){return!!g}).join(),");");Y(g,".pop();");break;case "sample.coverage":c="value"in b?b.value:1;b=!!b.invert;g=u(g);V(g,".push(",c,",",b,");");Y(g,".pop();");break;case "viewport":case "scissor.box":var c=b.x||0,h=b.y||0,k=-1,a=-1;"w"in b&&(k=
b.w);"h"in b&&(a=b.h);b=u(g);V(b,".push(",c,",",h,",",k,",",a,");");Y(b,".pop();")}});Object.keys(c).forEach(function(b){var d=O(g.def(b));b=c[b];b="function"===typeof b&&b._reglType?O(b):Array.isArray(b)?O(b.slice()):+b;V(d,".push(",b,");");Y(d,".pop();")});Object.keys(h).forEach(function(g){var b=h[g],d=O(y.def(g));g=O(y.box(g).alloc(b));V(d,".records.push(",g,");");Y(d,".records.pop();")});var W=B.block(),aa=B.block(),pa,ka;m&&(pa=O(C),ka=V.def());var na={};Object.keys(k).sort(b).forEach(function(g){var b=
f(k[g]);switch(g){case "framebuffer":g=u("viewport");var c=u("scissor.box");W("if(",da,".push(",b,"&&",b,"._framebuffer)){",g,".setDirty();",c,".setDirty();","}");aa("if(",da,".pop()){",g,".setDirty();",c,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":g=u(g);W(g,".push(",b,");");aa(g,".pop();");break;
case "count":case "offset":case "instances":g=X[g];W(g,".push(",b,");");aa(g,".pop();");break;case "primitive":g=X.primitive;W(g,".push(",qa,"[",b,"]);");aa(g,".pop();");break;case "depth.func":g=u(g);W(g,".push(",ja,"[",b,"]);");aa(g,".pop();");break;case "blend.func":g=u(g);c=O(x);W(g,".push(",c,'["srcRGB" in ',b,"?",b,".srcRGB:",b,".src],",c,'["dstRGB" in ',b,"?",b,".dstRGB:",b,".dst],",c,'["srcAlpha" in ',b,"?",b,".srcAlpha:",b,".src],",c,'["dstAlpha" in ',b,"?",b,".dstAlpha:",b,".dst]);");aa(g,
".pop();");break;case "blend.equation":g=u(g);c=O(F);W("if(typeof ",b,'==="string"){',g,".push(",c,"[",b,"],",c,"[",b,"]);","}else{",g,".push(",c,"[",b,".rgb],",c,"[",b,".alpha]);","}");aa(g,".pop();");break;case "blend.color":g=u(g);W(g,".push(",b,"[0],",b,"[1],",b,"[2],",b,"[3]);");aa(g,".pop();");break;case "stencil.mask":g=u(g);W(g,".push(",b,");");aa(g,".pop();");break;case "stencil.func":g=u(g);W(g,".push(",ja,"[",b,".cmp],",b,".ref|0,",'"mask" in ',b,"?",b,".mask:-1);");aa(g,".pop();");break;
case "stencil.opFront":case "stencil.opBack":g=u(g);W(g,".push(",la,"[",b,'.fail||"keep"],',la,"[",b,'.zfail||"keep"],',la,"[",b,'.pass||"keep"]);');aa(g,".pop();");break;case "polygonOffset.offset":g=u(g);W(g,".push(",b,".factor||0,",b,".units||0);");aa(g,".pop();");break;case "cull.face":g=u(g);W(g,".push(",b,'==="front"?',1028,":",1029,");");aa(g,".pop();");break;case "frontFace":g=u(g);W(g,".push(",b,'==="cw"?',2304,":",2305,");");aa(g,".pop();");break;case "colorMask":g=u(g);W(g,".push(",b,"[0],",
b,"[1],",b,"[2],",b,"[3]);");aa(g,".pop();");break;case "sample.coverage":g=u(g);W(g,".push(",b,".value,",b,".invert);");aa(g,".pop();");break;case "scissor.box":case "viewport":g=u(g);W(g,".push(",b,".x||0,",b,".y||0,",'"w" in ',b,"?",b,".w:-1,",'"h" in ',b,"?",b,".h:-1);");aa(g,".pop();");break;case "elements":g=!("primitive"in k)&&!("primitive"in d);var c=!("count"in k)&&!("count"in d),h=!("offset"in k)&&!("offset"in d),n=W.def();W("if(",b,"){",n,"=",b,"._elements;",ia,".push(",n,");",g?X.primitive+
".push("+n+".primType);":"",c?X.count+".push("+n+".vertCount);":"",h?X.offset+".push("+n+".offset);":"","}else{",ia,".push(null);","}");aa(ia,".pop();","if(",b,"){",g?X.primitive+".pop();":"",c?X.count+".pop();":"",h?X.offset+".pop();":"","}")}});Object.keys(a).forEach(function(b){var d=O(g.def(b));b=f(a[b]);W(d,".push(",b,");");aa(d,".pop();")});Object.keys(v).forEach(function(g){var b=O(y.def(g)),d=f(v[g]);g=O(y.box(g));W(b,".records.push(",g,".alloc(",d,"));");aa(g,".free(",b,".records.pop());")});
var ga=R("scope"),ha=ga.arg(),ra=ga.arg();ga(V);m&&ga(ka,"=",ha,";",W);ga(ra,"();",m?aa:"",Y);ga=Q();Q=ga.def();d.frag&&d.vert?(ha=d.frag,ga(Q,"=",O(D.program(r.id(d.vert),r.id(ha))),";")):ga(Q,"=",ca,".program","(",ca,".vert[",ca,".vert.length-1]",",",ca,".frag[",ca,".frag.length-1]",");");ha=R("draw");ha(V,ga);m&&ha(ka,"=",ha.arg(),";",W);ha(J,"();","if(",Q,")",Q,".draw(",m?ka:"",");",m?aa:"",Y);var ma=R("batch");ma(V,ga);m=O(function(g,b,c){var h=g.batchCache[T];h||(h=g.batchCache[T]=G(g,k,a,v,
d));return h(b,c)});ma("if(",Q,"){",J,"();",m,"(",Q,",",ma.arg(),",",ma.arg(),");");Object.keys(k).forEach(function(g){(g=oa[g])&&ma(g,".setDirty();")});ma("}",Y);return B.compile()}}}},{"./constants/primitives.json":7,"./util/codegen":23}],5:[function(a,f,e){f.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,
"[object ArrayBuffer]":5121}},{}],6:[function(a,f,e){f.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],7:[function(a,f,e){f.exports={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(a,f,e){function p(b,a){function l(){var a=window.innerWidth,k=window.innerHeight;b!==document.body&&(k=b.getBoundingClientRect(),a=k.right-k.left,k=k.top-k.bottom);p.width=t*a;p.height=t*k;c(p.style,{width:a+"px",
height:k+"px"})}var p=document.createElement("canvas"),q=m(p,a);c(p.style,{border:0,margin:0,padding:0,top:0,left:0});b.appendChild(p);b===document.body&&(p.style.position="absolute",c(b.style,{margin:0,padding:0}));var t=+q.options.pixelRatio;window.addEventListener("resize",l,!1);var u=q.options.onDestroy;q.options=c(c({},q.options),{onDestroy:function(){window.removeEventListener("resize",l);b.removeChild(p);u&&u()}});l();return q}function m(b,a){function l(c){try{return b.getContext(c,m)}catch(a){return null}}
var m=a.glOptions||{};return{gl:l("webgl")||l("experimental-webgl")||l("webgl-experimental"),options:c({pixelRatio:window.devicePixelRatio},a)}}var c=a("./util/extend");f.exports=function(b){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:b[0],options:b[1]||{}};var a=document.body,l=b[1]||{};if("string"===typeof b[0])a=document.querySelector(b[0])||document.body;else if("object"===typeof b[0])if(b[0]instanceof HTMLElement)a=b[0];else{if(b[0]instanceof WebGLRenderingContext)return{gl:b[0],
options:c({pixelRatio:1},l)};l=b[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?m(a,l):p(a,l)}},{"./util/extend":24}],9:[function(a,f,e){f.exports=function(a){return{primitive:[4],count:[-1],offset:[0],instances:[0]}}},{}],10:[function(a,f,e){function p(b,a){this.id=c++;this.func=b;this.data=a}function m(b,c){switch(typeof b){case "boolean":case "number":case "string":return new p(!1,b);case "function":return new p(!0,b);default:return m}}var c=0;f.exports={define:m,isDynamic:function(b){return"function"===
typeof b&&!b._reglType||b instanceof p},unbox:function(b,c){return b instanceof p?b:"function"===typeof b&&b!==m?new p(!0,b):new p(!1,c)}}},{}],11:[function(a,f,e){var p=a("./util/is-typed-array"),m=a("./util/is-ndarray"),c=a("./constants/primitives.json");f.exports=function(b,a,l){function x(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}x.prototype.bind=function(){this.buffer.bind()};return{create:function(b){function t(b){var h=a.oes_element_index_uint;if(b)if("number"===typeof b)r(b);
else{var d=null,n="static",v=0;Array.isArray(b)||p(b)||m(b)?d=b:("data"in b&&(d=b.data),"usage"in b&&(n=b.usage),"length"in b&&(v=b.length));Array.isArray(d)||m(d)&&"array"===d.dtype||"type"in b?r({type:b.type||(h?"uint32":"uint16"),usage:n,data:d,length:v}):r({usage:n,data:d,length:v});if(Array.isArray(d)||p(d))r.dimension=3}else r();h=u.buffer.byteLength;d=0;switch(u.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;h>>=1;break;case 5125:case 5124:d=5125,h>>=2}n=4;v=u.buffer.dimension;
1===v&&(n=0);2===v&&(n=1);3===v&&(n=4);"object"===typeof b&&("primitive"in b&&(n=c[b.primitive]),"count"in b&&(h=b.vertCount|0));u.primType=n;u.vertCount=h;u.type=d;return t}var u=new x,r=l.create(null,34963,!0);u.buffer=r._buffer;t(b);t._reglType="elements";t._elements=u;t.destroy=function(){r.destroy();u.buffer=null};return t},elements:[null],getElements:function(b){return b&&b._elements instanceof x?b._elements:null}}}},{"./constants/primitives.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26}],
12:[function(a,f,e){f.exports=function(a){function m(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(b){try{c[b]=
a.getExtension(b)}catch(w){}})}var c={};m();return{extensions:c,refresh:m}}},{}],13:[function(a,f,e){var p=a("./util/values"),m=a("./util/extend"),c=[1029];f.exports=function(b,a,l,x,q){function t(g,b,d,c){this.target=g;this.level=b;this.texture=d;this.renderbuffer=c}function u(g){g&&(g.texture&&g.texture._texture.decRef(),g.renderbuffer&&g.renderbuffer._renderbuffer.decRef())}function r(g,b){var d=b.width,c=b.height;if(g.texture)var h=g.texture._texture,n=Math.max(1,h.params.width>>g.level),a=Math.max(1,
h.params.height>>g.level),d=d||n,c=c||a;else h=g.renderbuffer._renderbuffer,d=d||h.width,c=c||h.height;h.refCount+=1;b.width=d;b.height=c}function k(g,d){d?d.texture?b.framebufferTexture2D(36160,g,d.target,d.texture._texture.texture,d.level):b.framebufferRenderbuffer(36160,g,36161,d.renderbuffer._renderbuffer.renderbuffer):b.framebufferTexture2D(36160,g,3553,null,0)}function h(g){var b=3553,d=0,c=null,h=null;"object"===typeof g&&("level"in g&&(d=g.level|0),"target"in g&&(b=g.target|0));var n=g._reglType;
"texture"===n?c=g:"renderbuffer"===n&&(h=g,b=36161,d=0);return new t(b,d,c,h)}function d(g){return g&&(g.texture||g.renderbuffer)}function n(){this.id=e++;G[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function v(g){b.isFramebuffer(g.framebuffer)||(g.framebuffer=b.createFramebuffer());F=!0;b.bindFramebuffer(36160,g.framebuffer);for(var d=g.colorAttachments,
c=0;c<d.length;++c)k(36064+c,d[c]);for(c=d.length;c<l.maxColorAttachments;++c)k(36064+c,null);k(36096,g.depthAttachment);k(36128,g.stencilAttachment);k(33306,g.depthStencilAttachment);a.webgl_draw_buffers&&a.webgl_draw_buffers.drawBuffersWEBGL(C[d.length]);b.checkFramebufferStatus(36160)}function z(g){g=g.framebuffer;b.isFramebuffer(g)&&b.deleteFramebuffer(g)}function f(){return H[H.length-1]}var g={rgba:6408},y={rgba4:32854,rgb565:36194,"rgb5 a1":32855};a.ext_srgb&&(y.srgba=35907);a.ext_color_buffer_half_float&&
(y.rgba16f=34842,y.rgb16f=34843);a.webgl_color_buffer_float&&(y.rgba32f=34836);var D=[],A=[];a.webgl_depth_texture&&(D.push(6402),A.push(34041));m(m({},g),y);p(g);p(y);y=5121;D={uint8:5121};a.oes_texture_half_float&&(y=D["half float"]=36193);a.oes_texture_float&&(y=D["float"]=5126);D.best=y;var C=function(){for(var g=Array(l.maxDrawbuffers),b=0;b<=l.maxDrawbuffers;++b)for(var d=g[b]=Array(b),c=0;c<b;++c)d[c]=36064+c;return g}(),e=0,G={},H=[null],F=!0;return{top:f,dirty:function(){return F},push:function(g){g=
g||null;F=F||g!==f();H.push(g);return F},pop:function(){var g=f();H.pop();return F=F||g!==f()},getFramebuffer:function(g){return"function"===typeof g&&"framebuffer"===g._reglType&&(g=g._framebuffer,g instanceof n)?g:null},poll:function(){if(F){var g=H[H.length-1],d=a.webgl_draw_buffers;g?(b.bindFramebuffer(36160,g.framebuffer),d&&d.drawBuffersWEBGL(C[g.colorAttachments.length])):(b.bindFramebuffer(36160,null),d&&d.drawBuffersWEBGL(c));F=!1}},create:function(c){function a(c){var n,A=c||{},l=c=0;if("shape"in
A){var w=A.shape;c=w[0];l=w[1]}else"radius"in A&&(c=l=A.radius),"width"in A&&(c=A.width),"height"in A&&(l=A.height);var y=null,w=!1;if("colorBuffers"in A||"colorBuffer"in A){y=A.colorBuffers||A.colorBuffer;Array.isArray(y)||(y=[y]);k.width=c;k.height=l;y=y.map(h);for(n=0;n<y.length;++n)r(y[n],k);c=k.width;l=k.height}else{var m=!0,z="rgba",p="uint8",C=1,w=!0;k.width=c=c||b.drawingBufferWidth;k.height=l=l||b.drawingBufferHeight;"format"in A&&(z=A.format,m=z in g);"type"in A&&(p=A.type);"colorCount"in
A&&(C=A.colorCount|0);if(k.ownsColor)for(y=k.colorAttachments;y.length>C;)u(y.pop());else y=[];for(n=0;n<y.length;++n){var D;a:{D=y[n];var f=m,e=z,B=c,E=l;if(D.texture){var F=D.texture;if(f){F({format:e,type:p,width:B,height:E});F._texture.refCount+=1;D=!0;break a}}else if(F=D.renderbuffer,!f){F({format:e,width:B,height:E});F._renderbuffer.refCount+=1;D=!0;break a}u(D);D=!1}D||(y[n--]=y[y.length-1],y.pop())}for(;y.length<C;)m?y.push(new t(3553,0,x.create({format:z,type:p,width:c,height:l},3553),null)):
y.push(new t(36161,0,null,q.create({format:z,width:c,height:l})))}k.width=c;k.height=l;z=m=n=null;p=!1;"depthBuffer"in A&&(n=h(A.depthBuffer));"stencilBuffer"in A&&(m=h(A.stencilBuffer));"depthStencilBuffer"in A&&(z=h(A.depthStencilBuffer));if(n||m||z)r(n||m||z,k);else if(C=!0,f=D=!1,"depth"in A&&(C=!!A.depth),"stencil"in A&&(D=!!A.stencil),"depthTexture"in A&&(f=!!A.depthTexture),A=k.depthAttachment||k.stencilAttachment||k.depthStencilAttachment,e=null,C||D)p=!0,f?(f=D?"depth stencil":"depth",k.ownsDepthStencil&&
A.texture?(A.texture({format:f,width:c,height:l}),A.texture._texture.refCount+=1,e=A):e=new t(3553,0,x.create({format:f,width:c,height:l},3553),null)):(f=C?D?"depth stencil":"depth":"stencil",k.ownsDepthStencil&&A.renderbuffer?(A.renderbuffer({format:f,width:c,height:l}),A.renderbuffer._renderbuffer.refCount+=1,e=A):e=new t(36161,0,null,q.create({format:f,width:c,height:l}))),C?D?z=e:n=e:m=e;c=k;c.colorAttachments.forEach(u);u(c.depthAttachment);u(c.stencilAttachment);u(c.depthStencilAttachment);
k.colorAttachments=y;k.depthAttachment=n;k.stencilAttachment=m;k.depthStencilAttachment=z;k.ownsColor=w;k.ownsDepthStencil=p;a.color=y.map(d);a.depth=d(n);a.stencil=d(m);a.depthStencil=d(z);v(k);a.width=k.width;a.height=k.height;return a}var k=new n;a(c);a._reglType="framebuffer";a._framebuffer=k;a._destroy=function(){z(k)};return a},clear:function(){p(G).forEach(z)},refresh:function(){p(G).forEach(v)}}}},{"./util/extend":24,"./util/values":32}],14:[function(a,f,e){f.exports=function(a,m){var c=1;
m.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var b=1,w=1;m.webgl_draw_buffers&&(b=a.getParameter(34852),w=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(m).filter(function(b){return!!m[b]}),maxAnisotropic:c,maxDrawbuffers:b,maxColorAttachments:w,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),
maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),
version:a.getParameter(7938)}}},{}],15:[function(a,f,e){var p=a("./util/is-typed-array");f.exports=function(a,c,b){return function(w){var l=w||{};p(w)?l={data:l}:2===arguments.length?l={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof w&&(l={});c();var x=l.x||0,q=l.y||0,t=l.width||b.width,u=l.height||b.height,l=l.data||new Uint8Array(t*u*4);a.pixelStorei(3333,4);a.readPixels(x,q,t,u,6408,5121,l);return l}}},{"./util/is-typed-array":26}],16:[function(a,f,e){var p=a("./util/values");f.exports=
function(a,c,b){function w(){this.id=t++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function l(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function x(b){var c=b.renderbuffer;a.bindRenderbuffer(36161,null);a.isRenderbuffer(c)&&a.deleteRenderbuffer(c);b.renderbuffer=null;b.refCount=0;delete u[b.id]}var q={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(q.srgba=35907);c.ext_color_buffer_half_float&&(q.rgba16f=34842,q.rgb16f=34843);c.webgl_color_buffer_float&&(q.rgba32f=34836);var t=0,u={};w.prototype.decRef=function(){0===--this.refCount&&x(this)};return{create:function(b){function c(b){b=b||{};var a=0,v=0;"shape"in b?(v=b.shape,a=v[0]|0,v=v[1]|0):("radius"in b&&(a=v=b.radius|0),"width"in b&&(a=b.width|0),"height"in b&&(v=b.height|0));c.width=h.width=Math.max(a,1);c.height=h.height=Math.max(v,
1);h.format=32854;"format"in b&&(h.format=q[b.format]);l(h);return c}var h=new w;u[h.id]=h;c(b);c._reglType="renderbuffer";c._renderbuffer=h;c.destroy=function(){h.decRef()};return c},refresh:function(){p(u).forEach(l)},clear:function(){p(u).forEach(x)}}}},{"./util/values":32}],17:[function(a,f,e){function p(c,b,a,l){this.name=c;this.id=b;this.location=a;this.info=l}var m=a("./util/values");f.exports=function(c,b,a,l,x){function q(b,d){var h=35632===b?r:k,a=h[d];if(!a){var g=x.str(d),a=c.createShader(b);
c.shaderSource(a,g);c.compileShader(a);h[d]=a}return a}function t(b,d){this.fragId=b;this.vertId=d;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function u(d){var h,k;h=q(35632,d.fragId);k=q(35633,d.vertId);var r=d.program=c.createProgram();c.attachShader(r,h);c.attachShader(r,k);c.linkProgram(r);var g=c.getProgramParameter(r,35718),y=d.uniforms=[];for(h=0;h<g;++h)if(k=c.getActiveUniform(r,h))if(1<k.size)for(var u=0;u<k.size;++u){var A=k.name.replace("[0]",
"["+u+"]");a.def(A);y.push(new p(A,x.id(A),c.getUniformLocation(r,A),k))}else a.def(k.name),y.push(new p(k.name,x.id(k.name),c.getUniformLocation(r,k.name),k));g=c.getProgramParameter(r,35721);y=d.attributes=[];for(h=0;h<g;++h)if(k=c.getActiveAttrib(r,h))b.def(k.name),y.push(new p(k.name,x.id(k.name),c.getAttribLocation(r,k.name),k));d.draw=l(d);d.batchCache={}}var r={},k={},h={},d=[];return{clear:function(){var b=c.deleteShader.bind(c);m(r).forEach(b);r={};m(k).forEach(b);k={};d.forEach(function(b){c.deleteProgram(b.program)});
d.length=0;h={}},refresh:function(){r={};k={};d.forEach(u)},program:function(b,c){var a=h[c];a||(a=h[c]={});var k=a[b];k||(k=new t(c,b),u(k),a[b]=k,d.push(k));return k},shader:q,frag:[-1],vert:[-1]}}},{"./util/values":32}],18:[function(a,f,e){var p=a("./util/stack"),m=a("./util/codegen");f.exports=function(c,b,a){function l(b,h){var d=p([!!h],function(d){d?c.enable(b):c.disable(b)});d.flag=b;return d}var x={dither:l(3024),"blend.enable":l(3042),"blend.color":p([0,0,0,0],function(b,h,d,a){c.blendColor(b,
h,d,a)}),"blend.equation":p([32774,32774],function(b,h){c.blendEquationSeparate(b,h)}),"blend.func":p([1,0,1,0],function(b,h,d,a){c.blendFuncSeparate(b,h,d,a)}),"depth.enable":l(2929,!0),"depth.func":p([513],function(b){c.depthFunc(b)}),"depth.range":p([0,1],function(b,h){c.depthRange(b,h)}),"depth.mask":p([!0],function(b){c.depthMask(b)}),"cull.enable":l(2884),"cull.face":p([1029],function(b){c.cullFace(b)}),frontFace:p([2305],function(b){c.frontFace(b)}),colorMask:p([!0,!0,!0,!0],function(b,h,d,
a){c.colorMask(b,h,d,a)}),lineWidth:p([1],function(b){c.lineWidth(b)}),"polygonOffset.enable":l(32823),"polygonOffset.offset":p([0,0],function(b,h){c.polygonOffset(b,h)}),"sample.alpha":l(32926),"sample.enable":l(32928),"sample.coverage":p([1,!1],function(b,h){c.sampleCoverage(b,h)}),"stencil.enable":l(2960),"stencil.mask":p([-1],function(b){c.stencilMask(b)}),"stencil.func":p([519,0,-1],function(b,h,d){c.stencilFunc(b,h,d)}),"stencil.opFront":p([7680,7680,7680],function(b,h,d){c.stencilOpSeparate(1028,
b,h,d)}),"stencil.opBack":p([7680,7680,7680],function(b,h,d){c.stencilOpSeparate(1029,b,h,d)}),"scissor.enable":l(3089),"scissor.box":p([0,0,-1,-1],function(a,h,d,n){var l=d,w=b.top();0>d&&(l=w?w.width-a:c.drawingBufferWidth-a);d=n;0>n&&(d=w?w.height-h:c.drawingBufferHeight-h);c.scissor(a,h,l,d)}),viewport:p([0,0,-1,-1],function(k,h,d,n){var l=d,r=b.top();0>d&&(l=r?r.width-k:c.drawingBufferWidth-k);d=n;0>n&&(d=r?r.height-h:c.drawingBufferHeight-h);c.viewport(k,h,l,d);a.width=l;a.height=d})},q=m(),
t=q.proc("poll"),u=q.proc("refresh");Object.keys(x).forEach(function(b){b=q.link(x[b]);t(b,".poll();");u(b,".setDirty();")});var r=q.compile();return{contextState:x,viewport:a,poll:r.poll,refresh:r.refresh,notifyViewportChanged:function(){x.viewport.setDirty();x["scissor.box"].setDirty()}}}},{"./util/codegen":23,"./util/stack":30}],19:[function(a,f,e){f.exports=function(){var a={"":0},m=[""];return{id:function(c){var b=a[c];if(b)return b;b=a[c]=m.length;m.push(c);return b},str:function(c){return m[c]}}}},
{}],20:[function(a,f,e){function p(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function m(b){if(!Array.isArray(b))return!1;var c=b.length;if(0===c||!Array.isArray(b[0]))return!1;for(var h=b[0].length,a=1;a<c;++a)if(!Array.isArray(b[a])||b[a].length!==h)return!1;return!0}function c(b){return Object.prototype.toString.call(b)}function b(b){return"[object HTMLCanvasElement]"===c(b)}function w(b){return"[object CanvasRenderingContext2D]"===c(b)}var l=a("./util/extend"),x=a("./util/values"),
q=a("./util/is-typed-array"),t=a("./util/is-ndarray"),u=a("./util/load-texture"),r=a("./util/to-half-float"),k=a("./util/parse-dds"),h=[9984,9986,9985,9987];f.exports=function(d,a,v,z,f){function g(b){this.target=b;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=
this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function y(b){this.target=b;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function D(b,g){var d,c,a=0,n=0,k=0,A=0,l=0,v=0,y=!1,w=!1,r=!1;for(d=0;d<g.length;++d)c=g[d],A=A||c.width<<c.miplevel,l=l||c.height<<c.miplevel,a=a||c.type,n=n||c.format,k=k||c.internalformat,
v=v||c.channels,y=y||c.needsPoll,w=w||c.needsListeners,c=c.miplevel,r=r||0<c;b.needsPoll=y;b.needsListeners=w;b.width=A;b.height=l;b.format=n;b.internalformat=k;b.type=a;if(3553!==b.target)for(d=0;6>d;++d);d=0<=h.indexOf(b.minFilter);b.genMipmaps=!r&&(b.genMipmaps||d);r=r||b.genMipmaps;b.minFilter||(b.minFilter=r?9987:9728);b.wrapS=b.wrapS||33071;b.wrapT=b.wrapT||33071;for(d=0;d<g.length;++d)c=g[d],c.channels||(c.channels=v),c.format||(c.format=n),c.internalformat||(c.internalformat=k),c.type||(c.type=
a)}function A(b){this.id=O++;this.refCount=1;this.target=b;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new y(b);this.pixels=[]}function C(b,d){function c(b,h){var a=h.mipmap,k;if(Array.isArray(a))for(var A=0;A<a.length;++A)k=new g(b),k.parseFlags(d),k.parseFlags(h),k.parse(a[A],A),n.push(k);else k=new g(b),k.parseFlags(d),k.parse(h,0),n.push(k)}var h;H(b);var a=b.params;y.call(a,b.target);var n=b.pixels;n.length=0;a.parse(d);if(3553===b.target)c(3553,
d);else{var k=d.faces||d;if(Array.isArray(k))for(h=0;6>h;++h)c(34069+h,k[h]);else if("string"!==typeof k)for(h=0;6>h;++h)c(34069+h,{})}D(a,n);a.needsListeners&&G(b);a.needsPoll&&(b.pollId=R.length,R.push(b));e(b)}function e(b){d.isTexture(b.texture)||(b.texture=d.createTexture());var g=b.target,c=b.unit;0<=c?(d.activeTexture(33984+c),Z=c):d.bindTexture(g,b.texture);for(var g=b.pixels,h=b.params,a=0;a<g.length;++a)g[a].upload(h);h.upload();0>c&&((c=J[Z])?d.bindTexture(c.target,c.texture):(b.unit=Z,
J[Z]=b))}function G(b){function d(b,c,h){var n=k(h);n.pixels.forEach(function(d){var h=new g(n.cube?d.target:b);h.channels=n.channels;h.compressed=n.compressed;h.type=n.type;h.internalformat=n.format;h.format=ea[n.format];h.width=d.width;h.height=d.height;h.miplevel=d.miplevel||c;h.data=d.data;a.push(h)})}function c(){for(var g=0;g<a.length;++g){var n=a[g],k=n.image,A=n.video,l=n.xhr;k&&k.complete?(n.width=k.naturalWidth,n.height=k.naturalHeight):A&&2<A.readyState?(n.width=A.width,n.height=A.height):
l&&4===l.readyState&&(a[g]=a[a.length-1],a.pop(),l.removeEventListener("readystatechange",e),d(n.target,n.miplevel,l.response))}D(h,a);e(b)}var h=b.params,a=b.pixels;a.forEach(function(b){b.image&&!b.image.complete?b.image.addEventListener("load",c):b.video&&1>b.readyState?b.video.addEventListener("progress",c):b.xhr&&b.xhr.addEventListener("readystatechange",c)});b.cancelPending=function(){a.forEach(function(b){b.image?b.image.removeEventListener("load",c):b.video?b.video.removeEventListener("progress",
c):b.xhr&&(b.xhr.removeEventListener("readystatechange",c),b.xhr.abort())})}}function H(b){var g=b.cancelPending;g&&(g(),b.cancelPending=null);g=b.pollId;0<=g&&((R[g]=R[R.length-1]).id=g,R.pop(),b.pollId=-1)}function F(b){var g=b.texture,c=b.unit,h=b.target;0<=c&&(d.activeTexture(33984+c),Z=c,d.bindTexture(h,null),J[c]=null);H(b);d.isTexture(g)&&d.deleteTexture(g);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete Q[b.id]}var I={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
N={repeat:10497,clamp:33071,mirror:33648},M={nearest:9728,linear:9729},U=l({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},M),K={none:0,browser:37444},L={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},P={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},S={};a.ext_srgb&&(P.srgb=35904,P.srgba=35906);a.oes_texture_float&&(L["float"]=5126);a.oes_texture_half_float&&
(L["half float"]=36193);a.webgl_depth_texture&&(l(P,{depth:6402,"depth stencil":34041}),l(L,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&l(S,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&l(S,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&l(S,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(S["rgb etc1"]=36196);var ba=Array.prototype.slice.call(d.getParameter(34467));Object.keys(S).forEach(function(b){var g=S[b];0<=ba.indexOf(g)&&(P[b]=g)});var fa=Object.keys(P);v.textureFormats=fa;var ea=fa.reduce(function(b,g){var d=P[g];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?b[d]=d:32855===d||0<=g.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{});l(g.prototype,{parseFlags:function(b){if("object"===typeof b&&b){"premultiplyAlpha"in
b&&(this.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(this.flipY=b.flipY);"alignment"in b&&(this.unpackAlignment=b.alignment);"colorSpace"in b&&(this.colorSpace=K[b.colorSpace]);if("format"in b){var g=b.format;this.internalformat=P[g];g in L&&(this.type=L[g]);g in S&&(this.compressed=!0)}"type"in b&&(this.type=L[b.type]);var g=this.width,d=this.height,c=this.channels;"shape"in b?(g=b.shape[0],d=b.shape[1],3===b.shape.length&&(c=b.shape[2])):("radius"in b&&(g=d=b.radius),"width"in b&&(g=b.width),
"height"in b&&(d=b.height),"channels"in b&&(c=b.channels));this.width=g|0;this.height=d|0;this.channels=c|0;"stride"in b?(g=b.stride,this.strideX=g[0],this.strideY=g[1],this.strideC=3===g.length?g[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*c,this.strideY=this.strideX*g);"offset"in b&&(this.offset=b.offset|0,this.needsTranspose=!0);"crossOrigin"in b&&(this.crossOrigin=b.crossOrigin)}},parse:function(g,d){this.miplevel=d;this.width>>=d;this.height>>=d;var h=g;switch(typeof g){case "object":if(!g)return;
this.parseFlags(g);var a=g.data;if("string"===typeof a||a&&(q(a)||p(a)||t(a)||b(a)||w(a)||"[object HTMLImageElement]"===c(a)||"[object HTMLVideoElement]"===c(a)||m(a)))h=g.data;break;case "undefined":return}"string"===typeof h&&(h=u(h,this.crossOrigin));var a=null,n=!1;if(null!==h)if(q(h))this.data=h;else if(p(h))a=h,n=!0;else if(t(h)){Array.isArray(h.data)?(a=h.data,n=!0):this.data=h.data;var k=h.shape;this.width=k[0];this.height=k[1];this.channels=3===k.length?k[2]:1;k=h.stride;this.strideX=h.stride[0];
this.strideY=h.stride[1];this.strideC=3===k.length?h.stride[2]:1;this.offset=h.offset;this.needsTranspose=!0}else if(b(h)||w(h))b(h)?this.canvas=h:this.canvas=h.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===c(h))this.image=h,h.complete?(this.width=h.naturalWidth,this.height=h.naturalHeight):(this.width=this.width||h.naturalWidth,this.height=this.height||h.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===c(h))this.video=h,1<h.readyState?(this.width=h.width,this.height=h.height):(this.width=this.width||h.width,this.height=this.height||h.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===c(h))this.xhr=h,this.needsListeners=!0;else if(m(h)){var n=h[0].length,k=h.length,A=1,l,v,y,z;if(Array.isArray(h[0][0]))for(A=h[0][0].length,a=Array(n*k*A),v=z=0;v<k;++v)for(l=0;l<n;++l)for(y=0;y<A;++y)a[z++]=h[v][l][y];
else for(a=Array(n*k),v=z=0;v<k;++v)for(l=0;l<n;++l)a[z++]=h[v][l];this.width=n;this.height=k;this.channels=A;n=!0}else g.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||f.width)|0,this.height=(this.height||f.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,
6410,6407,6408][(this.channels=this.channels||4)-1]);h=this.internalformat;k=this.format=ea[h];if(!this.channels)switch(k){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}k=this.type;5126!==k&&36193!==k&&(k||(k=6402===h?5125:5121));this.type=k;if(n)switch(k){case 5121:this.data=new Uint8Array(a);break;case 5123:this.data=new Uint16Array(a);break;case 5125:this.data=new Uint32Array(a);break;case 5126:this.data=
new Float32Array(a);break;case 36193:this.data=r(a)}if(this.data&&this.needsTranspose){a=this.data;h=this.width;n=this.height;k=this.channels;A=this.strideX;l=this.strideY;v=this.strideC;y=this.offset;z=new a.constructor(h*n*k);for(var K=0,x=0;x<n;++x)for(var L=0;L<h;++L)for(var C=0;C<k;++C)z[K++]=a[l*x+A*L+v*C+y];this.data=z}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(b){d.pixelStorei(37440,
this.flipY);d.pixelStorei(37441,this.premultiplyAlpha);d.pixelStorei(37443,this.colorSpace);d.pixelStorei(3317,this.unpackAlignment);var g=this.target,c=this.miplevel,h=this.image,a=this.canvas,n=this.video,k=this.data,A=this.internalformat,l=this.format,v=this.type,y=this.width||Math.max(1,b.width>>c);b=this.height||Math.max(1,b.height>>c);n&&2<n.readyState?d.texImage2D(g,c,l,l,v,n):h&&h.complete?d.texImage2D(g,c,l,l,v,h):a?d.texImage2D(g,c,l,l,v,a):this.compressed?d.compressedTexImage2D(g,c,A,y,
b,0,k):this.copy?(z(),d.copyTexImage2D(g,c,l,this.x,this.y,y,b,0)):k?d.texImage2D(g,c,l,y,b,0,l,v,k):d.texImage2D(g,c,l,y||1,b||1,0,l,v,null)}});l(y.prototype,{parse:function(b){if("object"===typeof b&&b){"min"in b&&(this.minFilter=U[b.min]);"mag"in b&&(this.magFilter=M[b.mag]);var g=this.wrapS,d=this.wrapT;if("wrap"in b){var c=b.wrap;"string"===typeof c?g=d=N[c]:Array.isArray(c)&&(g=N[c[0]],d=N[c[1]])}else"wrapS"in b&&(g=N[b.wrapS]),"wrapT"in b&&(d=N[b.wrapT]);this.wrapS=g;this.wrapT=d;"anisotropic"in
b&&(this.anisotropic=b.anisotropic);if("mipmap"in b)switch(b=b.mipmap,typeof b){case "string":this.mipmapHint=I[b];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!b}}},upload:function(){var b=this.target;d.texParameteri(b,10241,this.minFilter);d.texParameteri(b,10240,this.magFilter);d.texParameteri(b,10242,this.wrapS);d.texParameteri(b,10243,this.wrapT);a.ext_texture_filter_anisotropic&&d.texParameteri(b,34046,this.anisotropic);this.genMipmaps&&(d.hint(33170,this.mipmapHint),d.generateMipmap(b))}});
var Z=0,O=0,Q={},R=[],T=v.maxTextureUnits,J=Array(T).map(function(){return null});l(A.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var g=0;g<T;++g){var c=J[g];if(c){if(0<c.bindCount)continue;c.unit=-1}J[g]=this;b=g;break}this.unit=b;d.activeTexture(33984+b);d.bindTexture(this.target,this.texture);Z=b}return b},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&F(this)}});return{create:function(b,g){function d(b,h,a,n,k,A){var l=b||{};34067===g&&
6===arguments.length&&(l=[b,h,a,n,k,A]);C(c,l);d.width=c.params.width;d.height=c.params.height;return d}var c=new A(g);Q[c.id]=c;d(b);d._reglType="texture";d._texture=c;d.destroy=function(){c.decRef()};return d},refresh:function(){x(Q).forEach(e);for(var b=0;b<T;++b)J[b]=null;Z=0;d.activeTexture(33984)},clear:function(){for(var b=0;b<T;++b)d.activeTexture(33984+b),d.bindTexture(3553,null),J[b]=null;d.activeTexture(33984);Z=0;x(Q).forEach(F)},poll:function(){R.forEach(e)},getTexture:function(b){return null}}}},
{"./util/extend":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/load-texture":27,"./util/parse-dds":28,"./util/to-half-float":31,"./util/values":32}],21:[function(a,f,e){f.exports=function(a){var m={};return{def:function(c){c=a.id(c);var b=m[c];b||(b=m[c]=[]);return b},uniforms:m}}},{}],22:[function(a,f,e){f.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(a,f,e){var p=a("./extend");f.exports=
function(){function a(){var b=[],l=[];return p(function(){b.push.apply(b,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+c++;l.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,Array.prototype.slice.call(arguments)),b.push(";"));return a},toString:function(){return[0<l.length?"var "+l+";":"",b.join("")].join("")}})}var c=0,b=[],w=[],l={};return{link:function(a){var l="g"+c++;b.push(l);w.push(a);return l},block:a,proc:function(b){var w=[],t=a(),u=t.toString;return l[b]=p(t,
{arg:function(){var b="a"+c++;w.push(b);return b},toString:function(){return["function(",w.join(),"){",u(),"}"].join("")}})},compile:function(){var c=['"use strict";return {'];Object.keys(l).forEach(function(b){c.push('"',b,'":',l[b].toString(),",")});c.push("}");return Function.apply(null,b.concat([c.join("")])).apply(null,w)}}}},{"./extend":24}],24:[function(a,f,e){f.exports=function(a,m){for(var c=Object.keys(m),b=0;b<c.length;++b)a[c[b]]=m[c[b]];return a}},{}],25:[function(a,f,e){var p=a("./is-typed-array");
f.exports=function(a){return"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||p(a.data))}},{"./is-typed-array":26}],26:[function(a,f,e){var p=a("../constants/arraytypes.json");f.exports=function(a){return Object.prototype.toString.call(a)in p}},{"../constants/arraytypes.json":5}],27:[function(a,f,e){f.exports=function(a,m){if("undefined"!==typeof document){var c;c=(c=/\.(\w+)(\?.*)?$/.exec(a))&&
c[1]?c[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(c))return c=document.createElement("video"),c.autoplay=!0,c.loop=!0,m&&(c.crossOrigin=m),c.src=a,c;if(0<=["dds"].indexOf(c))return c=new XMLHttpRequest,c.responseType="arraybuffer",c.open("GET",a,!0),c.send(),c;c=new Image;m&&(c.crossOrigin=m);c.src=a;return c}return null}},{}],28:[function(a,f,e){f.exports=function(a){function f(b){for(var g=I,d=N,c=0;c<P;++c){var h=Math.max(1,
g+3>>2)*Math.max(1,d+3>>2)*K;ba.pixels.push({target:b,miplevel:c,width:g,height:d,data:new Uint8Array(a,S,h)});S+=h;g>>=1;d>>=1}}var e=new Int32Array(a),F=e[z],I=e[g],N=e[B],M=q,U=0,K=0,L=4;switch(e[A]){case k:K=8;F&r?(L=3,U=c):U=b;break;case h:K=16;U=w;break;case d:K=16;U=l;break;case n:K=8,U=x}var P=1;e[D]&t&&(P=Math.max(1,e[y]));var S=e[v]+4,ba={width:I,height:N,channels:L,format:U,type:M,compressed:!0,cube:!1,pixels:[]};if(e[C]&u)for(ba.cube=!0,e=0;6>e;++e)f(m+e);else f(p);return ba};var p=3553,
m=34069,c=33776,b=33777,w=33778,l=33779,x=36196,q=5121,t=131072,u=512,r=64,k=827611204,h=861165636,d=894720068,n=826496069,v=1,z=2,B=3,g=4,y=7,D=20,A=21,C=28},{}],29:[function(a,f,e){f.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(a,f,e){f.exports=function(a,m){var c=a.length,
b=a.slice(),w=a.slice(),l=!1,x=!0;return{push:function(){l=!1;for(var a=0;a<c;++a){var m=arguments[a];l=l||m!==w[a];b.push(m)}},pop:function(){l=!1;b.length-=c;for(var a=0;a<c;++a)l=l||b[b.length-c+a]!==w[a]},poll:function(){var a=b.length-c;if(l||x){switch(c){case 1:m(b[a]);break;case 2:m(b[a],b[a+1]);break;case 3:m(b[a],b[a+1],b[a+2]);break;case 4:m(b[a],b[a+1],b[a+2],b[a+3]);break;case 5:m(b[a],b[a+1],b[a+2],b[a+3],b[a+4]);break;case 6:m(b[a],b[a+1],b[a+2],b[a+3],b[a+4],b[a+5]);break;default:m.apply(null,
b.slice(a,b.length))}for(var t=0;t<c;++t)w[t]=b[a+t];x=l=!1}},setDirty:function(){x=!0}}}},{}],31:[function(a,f,e){f.exports=function(a){for(var m=new Float32Array(a),m=new Uint32Array(m.buffer),c=new Uint16Array(a.length),b=0;b<a.length;++b)if(isNaN(a[b]))c[b]=65535;else if(Infinity===a[b])c[b]=31744;else if(-Infinity===a[b])c[b]=64512;else{var w=m[b],l=w>>>31<<15,x=(w<<1>>>24)-127,w=w>>13&1023;c[b]=-24>x?l:-14>x?l+(w+1024>>-14-x):15<x?l+31744:l+(x+15<<10)+w}return c}},{}],32:[function(a,f,e){f.exports=
function(a){return Object.keys(a).map(function(m){return a[m]})}},{}],33:[function(a,f,e){(function(p){function m(){try{var b=new Uint8Array(1);b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(g){return!1}}function c(g,d){if((b.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<d)throw new RangeError("Invalid typed array length");b.TYPED_ARRAY_SUPPORT?(g=new Uint8Array(d),g.__proto__=b.prototype):(null===g&&(g=new b(d)),g.length=d);return g}
function b(g,d,c){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(g,d,c);if("number"===typeof g){if("string"===typeof d)throw Error("If encoding is specified then the first argument must be a string");return x(this,g)}return w(this,g,d,c)}function w(g,d,a,h){if("number"===typeof d)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer){d.byteLength;if(0>a||d.byteLength<a)throw new RangeError("'offset' is out of bounds");
if(d.byteLength<a+(h||0))throw new RangeError("'length' is out of bounds");d=void 0===h?new Uint8Array(d,a):new Uint8Array(d,a,h);b.TYPED_ARRAY_SUPPORT?(g=d,g.__proto__=b.prototype):g=q(g,d);return g}if("string"===typeof d){h=g;if("string"!==typeof a||""===a)a="utf8";if(!b.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');g=r(d,a)|0;h=c(h,g);h.write(d,a);return h}return t(g,d)}function l(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');
}function x(g,d){l(d);g=c(g,0>d?0:u(d)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var a=0;a<d;a++)g[a]=0;return g}function q(b,g){var d=u(g.length)|0;b=c(b,d);for(var a=0;a<d;a+=1)b[a]=g[a]&255;return b}function t(g,d){if(b.isBuffer(d)){var a=u(d.length)|0;g=c(g,a);if(0===g.length)return g;d.copy(g,0,0,a);return g}if(d){if("undefined"!==typeof ArrayBuffer&&d.buffer instanceof ArrayBuffer||"length"in d)return(a="number"!==typeof d.length)||(a=d.length,a=a!==a),a?c(g,0):q(g,d);if("Buffer"===d.type&&N(d.data))return q(g,
d.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function u(g){if(g>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return g|0}function r(g,d){if(b.isBuffer(g))return g.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(g)||g instanceof
ArrayBuffer))return g.byteLength;"string"!==typeof g&&(g=""+g);var c=g.length;if(0===c)return 0;for(var a=!1;;)switch(d){case "ascii":case "binary":case "raw":case "raws":return c;case "utf8":case "utf-8":case void 0:return E(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return F.toByteArray(C(g)).length;default:if(a)return E(g).length;d=(""+d).toLowerCase();a=!0}}function k(b,g,d){var c=!1;if(void 0===g||0>g)g=0;if(g>this.length)return"";
if(void 0===d||d>this.length)d=this.length;if(0>=d)return"";d>>>=0;g>>>=0;if(d<=g)return"";for(b||(b="utf8");;)switch(b){case "hex":b=g;g=d;d=this.length;if(!b||0>b)b=0;if(!g||0>g||g>d)g=d;c="";for(d=b;d<g;d++)b=c,c=this[d],c=16>c?"0"+c.toString(16):c.toString(16),c=b+c;return c;case "utf8":case "utf-8":return n(this,g,d);case "ascii":b="";for(d=Math.min(this.length,d);g<d;g++)b+=String.fromCharCode(this[g]&127);return b;case "binary":b="";for(d=Math.min(this.length,d);g<d;g++)b+=String.fromCharCode(this[g]);
return b;case "base64":return g=0===g&&d===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(g,d)),g;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":g=this.slice(g,d);d="";for(b=0;b<g.length;b+=2)d+=String.fromCharCode(g[b]+256*g[b+1]);return d;default:if(c)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();c=!0}}function h(b,g,d){var c=b[g];b[g]=b[d];b[d]=c}function d(b,g,d,c){function a(b,g){return 1===h?b[g]:b.readUInt16BE(g*h)}var h=1,n=b.length,k=g.length;if(void 0!==
c&&(c=String(c).toLowerCase(),"ucs2"===c||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(2>b.length||2>g.length)return-1;h=2;n/=2;k/=2;d/=2}c=-1;for(var A=0;d+A<n;A++)if(a(b,d+A)===a(g,-1===c?0:A-c)){if(-1===c&&(c=A),A-c+1===k)return(d+c)*h}else-1!==c&&(A-=A-c),c=-1;return-1}function n(b,g,d){d=Math.min(b.length,d);for(var c=[];g<d;){var a=b[g],h=null,n=239<a?4:223<a?3:191<a?2:1;if(g+n<=d){var k,A,l;switch(n){case 1:128>a&&(h=a);break;case 2:k=b[g+1];128===(k&192)&&(a=(a&31)<<6|k&63,127<a&&(h=a));
break;case 3:k=b[g+1];A=b[g+2];128===(k&192)&&128===(A&192)&&(a=(a&15)<<12|(k&63)<<6|A&63,2047<a&&(55296>a||57343<a)&&(h=a));break;case 4:k=b[g+1],A=b[g+2],l=b[g+3],128===(k&192)&&128===(A&192)&&128===(l&192)&&(a=(a&15)<<18|(k&63)<<12|(A&63)<<6|l&63,65535<a&&1114112>a&&(h=a))}}null===h?(h=65533,n=1):65535<h&&(h-=65536,c.push(h>>>10&1023|55296),h=56320|h&1023);c.push(h);g+=n}b=c.length;if(b<=M)c=String.fromCharCode.apply(String,c);else{d="";for(g=0;g<b;)d+=String.fromCharCode.apply(String,c.slice(g,
g+=M));c=d}return c}function v(b,g,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+g>d)throw new RangeError("Trying to access beyond buffer length");}function z(g,d,c,a,h,n){if(!b.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>h||d<n)throw new RangeError('"value" argument is out of bounds');if(c+a>g.length)throw new RangeError("Index out of range");}function f(b,g,d,c){0>g&&(g=65535+g+1);for(var a=0,h=Math.min(b.length-d,2);a<h;a++)b[d+a]=(g&
255<<8*(c?a:1-a))>>>8*(c?a:1-a)}function g(b,g,d,c){0>g&&(g=4294967295+g+1);for(var a=0,h=Math.min(b.length-d,4);a<h;a++)b[d+a]=g>>>8*(c?a:3-a)&255}function y(b,g,d,c,a,h){if(d+c>b.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("Index out of range");}function D(b,g,d,c,a){a||y(b,g,d,4,3.4028234663852886E38,-3.4028234663852886E38);I.write(b,g,d,c,23,4);return d+4}function A(b,g,d,c,a){a||y(b,g,d,8,1.7976931348623157E308,-1.7976931348623157E308);I.write(b,g,d,c,52,8);
return d+8}function C(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(U,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function E(b,g){g=g||Infinity;for(var d,c=b.length,a=null,h=[],n=0;n<c;n++){d=b.charCodeAt(n);if(55295<d&&57344>d){if(!a){if(56319<d){-1<(g-=3)&&h.push(239,191,189);continue}else if(n+1===c){-1<(g-=3)&&h.push(239,191,189);continue}a=d;continue}if(56320>d){-1<(g-=3)&&h.push(239,191,189);a=d;continue}d=(a-55296<<10|d-56320)+65536}else a&&-1<(g-=3)&&h.push(239,
191,189);a=null;if(128>d){if(0>--g)break;h.push(d)}else if(2048>d){if(0>(g-=2))break;h.push(d>>6|192,d&63|128)}else if(65536>d){if(0>(g-=3))break;h.push(d>>12|224,d>>6&63|128,d&63|128)}else if(1114112>d){if(0>(g-=4))break;h.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return h}function G(b){for(var g=[],d=0;d<b.length;d++)g.push(b.charCodeAt(d)&255);return g}function H(b,g,d,c){for(var a=0;a<c&&!(a+d>=g.length||a>=b.length);a++)g[a+d]=b[a];return a}var F=
a("base64-js"),I=a("ieee754"),N=a("isarray");e.Buffer=b;e.SlowBuffer=function(g){+g!=g&&(g=0);return b.alloc(+g)};e.INSPECT_MAX_BYTES=50;b.TYPED_ARRAY_SUPPORT=void 0!==p.TYPED_ARRAY_SUPPORT?p.TYPED_ARRAY_SUPPORT:m();e.kMaxLength=b.TYPED_ARRAY_SUPPORT?2147483647:1073741823;b.poolSize=8192;b._augment=function(g){g.__proto__=b.prototype;return g};b.from=function(b,g,d){return w(null,b,g,d)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),
$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})));b.alloc=function(b,g,d){l(b);b=0>=b?c(null,b):void 0!==g?"string"===typeof d?c(null,b).fill(g,d):c(null,b).fill(g):c(null,b);return b};b.allocUnsafe=function(b){return x(null,b)};b.allocUnsafeSlow=function(b){return x(null,b)};b.isBuffer=function(b){return!(null==b||!b._isBuffer)};b.compare=function(g,
d){if(!b.isBuffer(g)||!b.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(g===d)return 0;for(var c=g.length,a=d.length,h=0,n=Math.min(c,a);h<n;++h)if(g[h]!==d[h]){c=g[h];a=d[h];break}return c<a?-1:a<c?1:0};b.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(g,d){if(!N(g))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===g.length)return b.alloc(0);var c;if(void 0===d)for(c=d=0;c<g.length;c++)d+=g[c].length;var a=b.allocUnsafe(d),h=0;for(c=0;c<g.length;c++){var n=g[c];if(!b.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(a,h);h+=n.length}return a};b.byteLength=r;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<b;g+=2)h(this,g,g+1);return this};b.prototype.swap32=
function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<b;g+=4)h(this,g,g+3),h(this,g+1,g+2);return this};b.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?n(this,0,b):k.apply(this,arguments)};b.prototype.equals=function(g){if(!b.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:0===b.compare(this,g)};b.prototype.inspect=function(){var b="",g=e.INSPECT_MAX_BYTES;0<this.length&&
(b=this.toString("hex",0,g).match(/.{2}/g).join(" "),this.length>g&&(b+=" ... "));return"<Buffer "+b+">"};b.prototype.compare=function(g,d,c,a,h){if(!b.isBuffer(g))throw new TypeError("Argument must be a Buffer");void 0===d&&(d=0);void 0===c&&(c=g?g.length:0);void 0===a&&(a=0);void 0===h&&(h=this.length);if(0>d||c>g.length||0>a||h>this.length)throw new RangeError("out of range index");if(a>=h&&d>=c)return 0;if(a>=h)return-1;if(d>=c)return 1;d>>>=0;c>>>=0;a>>>=0;h>>>=0;if(this===g)return 0;var n=h-
a,k=c-d,A=Math.min(n,k);a=this.slice(a,h);g=g.slice(d,c);for(d=0;d<A;++d)if(a[d]!==g[d]){n=a[d];k=g[d];break}return n<k?-1:k<n?1:0};b.prototype.indexOf=function(g,c,a){"string"===typeof c?(a=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c>>=0;if(0===this.length||c>=this.length)return-1;0>c&&(c=Math.max(this.length+c,0));"string"===typeof g&&(g=b.from(g,a));if(b.isBuffer(g))return 0===g.length?-1:d(this,g,c,a);if("number"===typeof g)return b.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?
Uint8Array.prototype.indexOf.call(this,g,c):d(this,[g],c,a);throw new TypeError("val must be string, number or Buffer");};b.prototype.includes=function(b,g,d){return-1!==this.indexOf(b,g,d)};b.prototype.write=function(b,g,d,c){if(void 0===g)c="utf8",d=this.length,g=0;else if(void 0===d&&"string"===typeof g)c=g,d=this.length,g=0;else if(isFinite(g))g|=0,isFinite(d)?(d|=0,void 0===c&&(c="utf8")):(c=d,d=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var a=this.length-g;if(void 0===d||d>a)d=a;if(0<b.length&&(0>d||0>g)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");for(a=!1;;)switch(c){case "hex":a:{g=Number(g)||0;c=this.length-g;d?(d=Number(d),d>c&&(d=c)):d=c;c=b.length;if(0!==c%2)throw Error("Invalid hex string");d>c/2&&(d=c/2);for(c=0;c<d;c++){a=parseInt(b.substr(2*c,2),16);if(isNaN(a)){b=c;break a}this[g+c]=a}b=c}return b;case "utf8":case "utf-8":return H(E(b,this.length-g),this,g,d);case "ascii":return H(G(b),
this,g,d);case "binary":return H(G(b),this,g,d);case "base64":return H(F.toByteArray(C(b)),this,g,d);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.length-g;for(var h=void 0,h=a=void 0,n=[],k=0;k<b.length&&!(0>(c-=2));k++)h=b.charCodeAt(k),a=h>>8,h%=256,n.push(h),n.push(a);return H(n,this,g,d);default:if(a)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase();a=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};
var M=4096;b.prototype.slice=function(g,d){var c=this.length;g=~~g;d=void 0===d?c:~~d;0>g?(g+=c,0>g&&(g=0)):g>c&&(g=c);0>d?(d+=c,0>d&&(d=0)):d>c&&(d=c);d<g&&(d=g);if(b.TYPED_ARRAY_SUPPORT)c=this.subarray(g,d),c.__proto__=b.prototype;else for(var a=d-g,c=new b(a,void 0),h=0;h<a;h++)c[h]=this[h+g];return c};b.prototype.readUIntLE=function(b,g,d){b|=0;g|=0;d||v(b,g,this.length);d=this[b];for(var c=1,a=0;++a<g&&(c*=256);)d+=this[b+a]*c;return d};b.prototype.readUIntBE=function(b,g,d){b|=0;g|=0;d||v(b,
g,this.length);d=this[b+--g];for(var c=1;0<g&&(c*=256);)d+=this[b+--g]*c;return d};b.prototype.readUInt8=function(b,g){g||v(b,1,this.length);return this[b]};b.prototype.readUInt16LE=function(b,g){g||v(b,2,this.length);return this[b]|this[b+1]<<8};b.prototype.readUInt16BE=function(b,g){g||v(b,2,this.length);return this[b]<<8|this[b+1]};b.prototype.readUInt32LE=function(b,g){g||v(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};b.prototype.readUInt32BE=function(b,g){g||
v(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};b.prototype.readIntLE=function(b,g,d){b|=0;g|=0;d||v(b,g,this.length);d=this[b];for(var c=1,a=0;++a<g&&(c*=256);)d+=this[b+a]*c;d>=128*c&&(d-=Math.pow(2,8*g));return d};b.prototype.readIntBE=function(b,g,d){b|=0;g|=0;d||v(b,g,this.length);d=g;for(var c=1,a=this[b+--d];0<d&&(c*=256);)a+=this[b+--d]*c;a>=128*c&&(a-=Math.pow(2,8*g));return a};b.prototype.readInt8=function(b,g){g||v(b,1,this.length);return this[b]&128?
-1*(255-this[b]+1):this[b]};b.prototype.readInt16LE=function(b,g){g||v(b,2,this.length);var d=this[b]|this[b+1]<<8;return d&32768?d|4294901760:d};b.prototype.readInt16BE=function(b,g){g||v(b,2,this.length);var d=this[b+1]|this[b]<<8;return d&32768?d|4294901760:d};b.prototype.readInt32LE=function(b,g){g||v(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};b.prototype.readInt32BE=function(b,g){g||v(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};b.prototype.readFloatLE=
function(b,g){g||v(b,4,this.length);return I.read(this,b,!0,23,4)};b.prototype.readFloatBE=function(b,g){g||v(b,4,this.length);return I.read(this,b,!1,23,4)};b.prototype.readDoubleLE=function(b,g){g||v(b,8,this.length);return I.read(this,b,!0,52,8)};b.prototype.readDoubleBE=function(b,g){g||v(b,8,this.length);return I.read(this,b,!1,52,8)};b.prototype.writeUIntLE=function(b,g,d,c){b=+b;g|=0;d|=0;c||z(this,b,g,d,Math.pow(2,8*d)-1,0);c=1;var a=0;for(this[g]=b&255;++a<d&&(c*=256);)this[g+a]=b/c&255;
return g+d};b.prototype.writeUIntBE=function(b,g,d,c){b=+b;g|=0;d|=0;c||z(this,b,g,d,Math.pow(2,8*d)-1,0);c=d-1;var a=1;for(this[g+c]=b&255;0<=--c&&(a*=256);)this[g+c]=b/a&255;return g+d};b.prototype.writeUInt8=function(g,d,c){g=+g;d|=0;c||z(this,g,d,1,255,0);b.TYPED_ARRAY_SUPPORT||(g=Math.floor(g));this[d]=g&255;return d+1};b.prototype.writeUInt16LE=function(g,d,c){g=+g;d|=0;c||z(this,g,d,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[d]=g&255,this[d+1]=g>>>8):f(this,g,d,!0);return d+2};b.prototype.writeUInt16BE=
function(g,d,c){g=+g;d|=0;c||z(this,g,d,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[d]=g>>>8,this[d+1]=g&255):f(this,g,d,!1);return d+2};b.prototype.writeUInt32LE=function(d,c,a){d=+d;c|=0;a||z(this,d,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c+3]=d>>>24,this[c+2]=d>>>16,this[c+1]=d>>>8,this[c]=d&255):g(this,d,c,!0);return c+4};b.prototype.writeUInt32BE=function(d,c,a){d=+d;c|=0;a||z(this,d,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c]=d>>>24,this[c+1]=d>>>16,this[c+2]=d>>>8,this[c+3]=d&255):g(this,
d,c,!1);return c+4};b.prototype.writeIntLE=function(b,g,d,c){b=+b;g|=0;c||(c=Math.pow(2,8*d-1),z(this,b,g,d,c-1,-c));c=0;var a=1,h=0;for(this[g]=b&255;++c<d&&(a*=256);)0>b&&0===h&&0!==this[g+c-1]&&(h=1),this[g+c]=(b/a>>0)-h&255;return g+d};b.prototype.writeIntBE=function(b,g,d,c){b=+b;g|=0;c||(c=Math.pow(2,8*d-1),z(this,b,g,d,c-1,-c));c=d-1;var a=1,h=0;for(this[g+c]=b&255;0<=--c&&(a*=256);)0>b&&0===h&&0!==this[g+c+1]&&(h=1),this[g+c]=(b/a>>0)-h&255;return g+d};b.prototype.writeInt8=function(g,d,c){g=
+g;d|=0;c||z(this,g,d,1,127,-128);b.TYPED_ARRAY_SUPPORT||(g=Math.floor(g));0>g&&(g=255+g+1);this[d]=g&255;return d+1};b.prototype.writeInt16LE=function(g,d,c){g=+g;d|=0;c||z(this,g,d,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[d]=g&255,this[d+1]=g>>>8):f(this,g,d,!0);return d+2};b.prototype.writeInt16BE=function(g,d,c){g=+g;d|=0;c||z(this,g,d,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[d]=g>>>8,this[d+1]=g&255):f(this,g,d,!1);return d+2};b.prototype.writeInt32LE=function(d,c,a){d=+d;c|=0;a||z(this,
d,c,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[c]=d&255,this[c+1]=d>>>8,this[c+2]=d>>>16,this[c+3]=d>>>24):g(this,d,c,!0);return c+4};b.prototype.writeInt32BE=function(d,c,a){d=+d;c|=0;a||z(this,d,c,4,2147483647,-2147483648);0>d&&(d=4294967295+d+1);b.TYPED_ARRAY_SUPPORT?(this[c]=d>>>24,this[c+1]=d>>>16,this[c+2]=d>>>8,this[c+3]=d&255):g(this,d,c,!1);return c+4};b.prototype.writeFloatLE=function(b,g,d){return D(this,b,g,!0,d)};b.prototype.writeFloatBE=function(b,g,d){return D(this,b,g,!1,
d)};b.prototype.writeDoubleLE=function(b,g,d){return A(this,b,g,!0,d)};b.prototype.writeDoubleBE=function(b,g,d){return A(this,b,g,!1,d)};b.prototype.copy=function(g,d,c,a){c||(c=0);a||0===a||(a=this.length);d>=g.length&&(d=g.length);d||(d=0);0<a&&a<c&&(a=c);if(a===c||0===g.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&
(a=this.length);g.length-d<a-c&&(a=g.length-d+c);var h=a-c;if(this===g&&c<d&&d<a)for(a=h-1;0<=a;a--)g[a+d]=this[a+c];else if(1E3>h||!b.TYPED_ARRAY_SUPPORT)for(a=0;a<h;a++)g[a+d]=this[a+c];else Uint8Array.prototype.set.call(g,this.subarray(c,c+h),d);return h};b.prototype.fill=function(g,d,c,a){if("string"===typeof g){"string"===typeof d?(a=d,d=0,c=this.length):"string"===typeof c&&(a=c,c=this.length);if(1===g.length){var h=g.charCodeAt(0);256>h&&(g=h)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");
if("string"===typeof a&&!b.isEncoding(a))throw new TypeError("Unknown encoding: "+a);}else"number"===typeof g&&(g&=255);if(0>d||this.length<d||this.length<c)throw new RangeError("Out of range index");if(c<=d)return this;d>>>=0;c=void 0===c?this.length:c>>>0;g||(g=0);if("number"===typeof g)for(a=d;a<c;a++)this[a]=g;else for(g=b.isBuffer(g)?g:E((new b(g,a)).toString()),h=g.length,a=0;a<c-d;a++)this[a+d]=g[a%h];return this};var U=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":34,ieee754:35,isarray:36}],34:[function(a,f,e){function p(b,c,a){for(var q=[],t=c;t<a;t+=3)c=(b[t]<<16)+(b[t+1]<<8)+b[t+2],q.push(m[c>>18&63]+m[c>>12&63]+m[c>>6&63]+m[c&63]);return q.join("")}e.toByteArray=function(a){var l,m,q,t,u;l=a.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");t="="===a[l-2]?2:"="===a[l-1]?1:0;u=new b(3*l/4-t);m=0<t?l-4:l;var r=0;for(l=0;l<m;l+=4)q=c[a.charCodeAt(l)]<<18|c[a.charCodeAt(l+
1)]<<12|c[a.charCodeAt(l+2)]<<6|c[a.charCodeAt(l+3)],u[r++]=q>>16&255,u[r++]=q>>8&255,u[r++]=q&255;2===t?(q=c[a.charCodeAt(l)]<<2|c[a.charCodeAt(l+1)]>>4,u[r++]=q&255):1===t&&(q=c[a.charCodeAt(l)]<<10|c[a.charCodeAt(l+1)]<<4|c[a.charCodeAt(l+2)]>>2,u[r++]=q>>8&255,u[r++]=q&255);return u};e.fromByteArray=function(b){for(var c=b.length,a=c%3,q="",t=[],u=0,r=c-a;u<r;u+=16383)t.push(p(b,u,u+16383>r?r:u+16383));1===a?(b=b[c-1],q+=m[b>>2],q+=m[b<<4&63],q+="=="):2===a&&(b=(b[c-2]<<8)+b[c-1],q+=m[b>>10],
q+=m[b>>4&63],q+=m[b<<2&63],q+="=");t.push(q);return t.join("")};var m=[],c=[],b="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var b=0;64>b;++b)m[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;c[45]=62;c[95]=63})()},{}],35:[function(a,f,e){e.read=function(a,m,c,b,w){var l;l=8*w-b-1;var f=(1<<l)-1,q=f>>1,t=-7;w=c?w-1:0;var u=c?-1:1,r=a[m+w];w+=u;c=r&(1<<-t)-1;r>>=-t;for(t+=
l;0<t;c=256*c+a[m+w],w+=u,t-=8);l=c&(1<<-t)-1;c>>=-t;for(t+=b;0<t;l=256*l+a[m+w],w+=u,t-=8);if(0===c)c=1-q;else{if(c===f)return l?NaN:Infinity*(r?-1:1);l+=Math.pow(2,b);c-=q}return(r?-1:1)*l*Math.pow(2,c-b)};e.write=function(a,m,c,b,w,l){var f,q=8*l-w-1,t=(1<<q)-1,u=t>>1,r=23===w?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;var k=b?1:-1,h=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);isNaN(m)||Infinity===m?(m=isNaN(m)?1:0,b=t):(b=Math.floor(Math.log(m)/Math.LN2),1>m*(f=Math.pow(2,-b))&&(b--,f*=2),m=1<=b+u?m+
r/f:m+r*Math.pow(2,1-u),2<=m*f&&(b++,f/=2),b+u>=t?(m=0,b=t):1<=b+u?(m=(m*f-1)*Math.pow(2,w),b+=u):(m=m*Math.pow(2,u-1)*Math.pow(2,w),b=0));for(;8<=w;a[c+l]=m&255,l+=k,m/=256,w-=8);b=b<<w|m;for(q+=w;0<q;a[c+l]=b&255,l+=k,b/=256,q-=8);a[c+l-k]|=128*h}},{}],36:[function(a,f,e){var p={}.toString;f.exports=Array.isArray||function(a){return"[object Array]"==p.call(a)}},{}],37:[function(a,f,e){f.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],38:[function(a,f,e){var p=a("./identity");f.exports=function(a,c,b,w){var l,f,q,t,u,r,k,h,d=c[0],n=c[1];c=c[2];q=w[0];t=w[1];f=w[2];k=b[0];w=b[1];l=b[2];if(1E-6>Math.abs(d-k)&&1E-6>Math.abs(n-w)&&1E-6>Math.abs(c-l))return p(a);b=d-k;w=n-w;k=c-l;h=1/Math.sqrt(b*b+w*w+k*k);b*=h;w*=h;k*=h;l=t*k-f*w;f=f*b-q*k;q=q*w-t*b;(h=Math.sqrt(l*l+f*f+q*q))?(h=1/h,l*=h,f*=h,q*=h):q=f=l=0;t=w*q-k*f;u=k*l-b*q;r=b*f-w*l;(h=Math.sqrt(t*t+u*u+r*r))?(h=1/h,t*=h,u*=h,r*=h):r=u=t=
0;a[0]=l;a[1]=t;a[2]=b;a[3]=0;a[4]=f;a[5]=u;a[6]=w;a[7]=0;a[8]=q;a[9]=r;a[10]=k;a[11]=0;a[12]=-(l*d+f*n+q*c);a[13]=-(t*d+u*n+r*c);a[14]=-(b*d+w*n+k*c);a[15]=1;return a}},{"./identity":37}],39:[function(a,f,e){f.exports=function(a,m,c,b,w){m=1/Math.tan(m/2);var l=1/(b-w);a[0]=m/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(w+b)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*w*b*l;a[15]=0;return a}},{}],40:[function(a,f,e){f.exports=function(b,a){if("object"!==typeof a||null===a)a={};
return p(b,a.canvas||m,a.context||c,a)};var p=a("./lib/vtext"),m=null,c=null;"undefined"!==typeof document&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,c=m.getContext("2d"))},{"./lib/vtext":41}],41:[function(a,f,e){function p(b,c,a){for(var h=c.textAlign||"start",d=c.textBaseline||"alphabetic",n=[1073741824,1073741824],l=[0,0],w=b.length,m=0;m<w;++m)for(var g=b[m],y=0;2>y;++y)n[y]=Math.min(n[y],g[y])|0,l[y]=Math.max(l[y],g[y])|0;var q=0;switch(h){case "center":q=-.5*(n[0]+l[0]);
break;case "right":case "end":q=-l[0];break;case "left":case "start":q=-n[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+h+"'");}var A=0;switch(d){case "hanging":case "top":A=-n[1];break;case "middle":A=-.5*(n[1]+l[1]);break;case "alphabetic":case "ideographic":A=-3*a;break;case "bottom":A=-l[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+d+"'");}var t=1/a;"lineHeight"in c?t*=+c.lineHeight:"width"in c?t=c.width/(l[0]-n[0]):"height"in c&&(t=c.height/
(l[1]-n[1]));return b.map(function(b){return[t*(b[0]+q),t*(b[1]+A)]})}function m(c,a,k,h){c=b(c,128);h=h?l(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions};k=p(h.positions,a,k);c=h.edges;h="ccw"===a.orientation;x(k,c);if(a.polygons||a.polygon||a.polyline){a=t(c,k);c=Array(a.length);for(var d=0;d<a.length;++d){for(var n=a[d],v=Array(n.length),w=0;w<n.length;++w){for(var m=n[w],g=Array(m.length),y=0;y<m.length;++y)g[y]=k[m[y]].slice();h&&g.reverse();v[w]=g}c[d]=v}return c}return a.triangles||
a.triangulate||a.triangle?{cells:q(k,c,{delaunay:!1,exterior:!1,interior:!0}),positions:k}:{edges:c,positions:k}}function c(b,c,a){try{return m(b,c,a,!0)}catch(h){}try{return m(b,c,a,!1)}catch(h){}return c.polygons||c.polyline||c.polygon?[]:c.triangles||c.triangulate||c.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}f.exports=function(b,a,k,h){var d=h.size||64;k.font=d+"px "+(h.font||"normal");k.textAlign="start";k.textBaseline="alphabetic";k.direction="ltr";var n;n=Math.ceil(k.measureText(b).width+
2*d)|0;if(8192<n)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var l=3*d;a.height<l&&(a.height=l);k.fillStyle="#000";k.fillRect(0,0,a.width,a.height);k.fillStyle="#fff";k.fillText(b,d,2*d);b=k.getImageData(0,0,n,l);n=w(b.data,[l,n,4]).pick(-1,-1,0).transpose(1,0);return c(n,h,d)};f.exports.processPixels=c;var b=a("surface-nets"),w=a("ndarray"),l=a("simplify-planar-graph"),x=a("clean-pslg"),q=a("cdt2d"),t=a("planar-graph-to-polyline")},{cdt2d:42,"clean-pslg":60,
ndarray:106,"planar-graph-to-polyline":130,"simplify-planar-graph":140,"surface-nets":162}],42:[function(a,f,e){function p(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function m(b,c){return b[0]-c[0]||b[1]-c[1]}function c(b,c,a){return c in b?b[c]:a}var b=a("./lib/monotone"),w=a("./lib/triangulation"),l=a("./lib/delaunay"),x=a("./lib/filter");f.exports=function(a,t,u){Array.isArray(t)?(u=u||{},t=t||[]):(u=t||{},t=[]);var r=!!c(u,"delaunay",!0),k=!!c(u,"interior",!0),h=!!c(u,"exterior",!0);
u=!!c(u,"infinity",!1);if(!k&&!h||0===a.length)return[];var d=b(a,t);if(r||k!==h||u){t=w(a.length,t.map(p).sort(m));for(var n=0;n<d.length;++n){var v=d[n];t.addTriangle(v[0],v[1],v[2])}r&&l(a,t);return h?k?u?x(t,0,u):t.cells():x(t,1,u):x(t,-1)}return d}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(a,f,e){function p(c,b,a,l,f,q){var t=b.opposite(l,f);if(!(0>t)){if(f<l){var u=l;l=f;f=u;u=q;q=t;t=u}b.isConstraint(l,f)||0>m(c[l],c[f],c[q],c[t])&&
a.push(l,f)}}var m=a("robust-in-sphere")[4];a("binary-search-bounds");f.exports=function(c,b){for(var a=[],l=c.length,f=b.stars,q=0;q<l;++q)for(var t=f[q],u=1;u<t.length;u+=2){var r=t[u];if(!(r<q||b.isConstraint(q,r))){for(var k=t[u-1],h=-1,d=1;d<t.length;d+=2)if(t[d-1]===r){h=t[d];break}0>h||0>m(c[q],c[r],c[k],c[h])&&a.push(q,r)}}for(;0<a.length;){r=a.pop();q=a.pop();h=k=-1;t=f[q];for(l=1;l<t.length;l+=2)u=t[l-1],d=t[l],u===r?h=d:d===r&&(k=u);0>k||0>h||0<=m(c[q],c[r],c[k],c[h])||(b.flip(q,r),p(c,
b,a,k,q,h),p(c,b,a,q,h,k),p(c,b,a,h,r,k),p(c,b,a,r,k,h))}}},{"binary-search-bounds":47,"robust-in-sphere":48}],44:[function(a,f,e){function p(b,c,a,m,f,t,u){this.cells=b;this.neighbor=c;this.flags=m;this.constraint=a;this.active=f;this.next=t;this.boundary=u}function m(b,c){return b[0]-c[0]||b[1]-c[1]||b[2]-c[2]}var c=a("binary-search-bounds");f.exports=function(b,c,a){for(var f=b.cells(),q=f.length,t=0;t<q;++t){var u=f[t],r=u[0],k=u[1],h=u[2];k<h?k<r&&(u[0]=k,u[1]=h,u[2]=r):h<r&&(u[0]=h,u[1]=r,u[2]=
k)}f.sort(m);for(var d=Array(q),t=0;t<d.length;++t)d[t]=0;var n=[],v=[],z=Array(3*q),e=Array(3*q),g=null;a&&(g=[]);h=new p(f,z,e,d,n,v,g);for(t=0;t<q;++t)for(var u=f[t],y=0;3>y;++y){var r=u[y],k=u[(y+1)%3],D=z[3*t+y]=h.locate(k,r,b.opposite(k,r)),A=e[3*t+y]=b.isConstraint(r,k);0>D&&(A?v.push(t):(n.push(t),d[t]=1),a&&g.push([k,r,-1]))}if(0===c)return a?h.cells.concat(h.boundary):h.cells;q=1;t=h.active;u=h.next;b=h.flags;f=h.cells;r=h.constraint;for(k=h.neighbor;0<t.length||0<u.length;){for(;0<t.length;)if(d=
t.pop(),b[d]!==-q)for(b[d]=q,n=0;3>n;++n)v=k[3*d+n],0<=v&&0===b[v]&&(r[3*d+n]?u.push(v):(t.push(v),b[v]=q));d=u;u=t;t=d;u.length=0;q=-q}for(t=q=0;t<f.length;++t)b[t]===c&&(f[q++]=f[t]);f.length=q;return a?f.concat(h.boundary):f};p.prototype.locate=function(){var b=[0,0,0];return function(a,l,f){var q=a,t=l,u=f;l<f?l<a&&(q=l,t=f,u=a):f<a&&(q=f,t=a,u=l);if(0>q)return-1;b[0]=q;b[1]=t;b[2]=u;return c.eq(this.cells,b,m)}}()},{"binary-search-bounds":47}],45:[function(a,f,e){function p(b,c,a,l,k){this.a=
b;this.b=c;this.idx=a;this.lowerIds=l;this.upperIds=k}function m(b,c,a,l){this.a=b;this.b=c;this.type=a;this.idx=l}function c(b,c){var a=b.a[0]-c.a[0]||b.a[1]-c.a[1]||b.type-c.type;return a||0!==b.type&&(a=x(b.a,b.b,c.b))?a:b.idx-c.idx}function b(b,c){return x(b.a,b.b,c)}function w(b,c){var a;return(a=b.a[0]<c.a[0]?x(b.a,b.b,c.a):x(c.b,c.a,b.a))?a:(a=c.b[0]<b.b[0]?x(b.a,b.b,c.b):x(c.b,c.a,b.b))||b.idx-c.idx}var l=a("binary-search-bounds"),x=a("robust-orientation")[3];f.exports=function(a,f){for(var u=
a.length,r=f.length,k=[],h=0;h<u;++h)k.push(new m(a[h],null,0,h));for(h=0;h<r;++h){var d=f[h],u=a[d[0]],d=a[d[1]];u[0]<d[0]?k.push(new m(u,d,2,h),new m(d,u,1,h)):u[0]>d[0]&&k.push(new m(d,u,2,h),new m(u,d,1,h))}k.sort(c);h=k[0].a[0]-(1+Math.abs(k[0].a[0]))*Math.pow(2,-52);r=[new p([h,1],[h,0],-1,[],[],[],[])];u=[];h=0;for(d=k.length;h<d;++h){var n=k[h],v=n.type;if(0===v)for(var v=u,z=r,e=a,g=n.a,n=n.idx,y=l.lt(z,g,b),D=l.gt(z,g,b);y<D;++y){for(var A=z[y],C=A.lowerIds,E=C.length;1<E&&0<x(e[C[E-2]],
e[C[E-1]],g);)v.push([C[E-1],C[E-2],n]),--E;C.length=E;C.push(n);A=A.upperIds;for(E=A.length;1<E&&0>x(e[A[E-2]],e[A[E-1]],g);)v.push([A[E-2],A[E-1],n]),--E;A.length=E;A.push(n)}else 2===v?(v=r,z=n,e=l.le(v,z,w),g=v[e],n=g.upperIds,D=n[n.length-1],g.upperIds=[D],v.splice(e+1,0,new p(z.a,z.b,z.idx,[D],n))):(v=r,z=n,e=z.a,z.a=z.b,z.b=e,z=l.eq(v,z,w),v[z-1].upperIds=v[z].upperIds,v.splice(z,1))}return u}},{"binary-search-bounds":47,"robust-orientation":59}],46:[function(a,f,e){function p(b,c){this.stars=
b;this.edges=c}function m(b,c,a){for(var m=1,f=b.length;m<f;m+=2)if(b[m-1]===c&&b[m]===a){b[m-1]=b[f-2];b[m]=b[f-1];b.length=f-2;break}}var c=a("binary-search-bounds");f.exports=function(b,c){for(var a=Array(b),m=0;m<b;++m)a[m]=[];return new p(a,c)};a=p.prototype;a.isConstraint=function(){function b(b,c){return b[0]-c[0]||b[1]-c[1]}var a=[0,0];return function(l,m){a[0]=Math.min(l,m);a[1]=Math.max(l,m);return 0<=c.eq(this.edges,a,b)}}();a.removeTriangle=function(b,c,a){var f=this.stars;m(f[b],c,a);
m(f[c],a,b);m(f[a],b,c)};a.addTriangle=function(b,c,a){var m=this.stars;m[b].push(c,a);m[c].push(a,b);m[a].push(b,c)};a.opposite=function(b,c){for(var a=this.stars[c],m=1,f=a.length;m<f;m+=2)if(a[m]===b)return a[m-1];return-1};a.flip=function(b,c){var a=this.opposite(b,c),m=this.opposite(c,b);this.removeTriangle(b,c,a);this.removeTriangle(c,b,m);this.addTriangle(b,m,a);this.addTriangle(c,a,m)};a.edges=function(){for(var b=this.stars,c=[],a=0,m=b.length;a<m;++a)for(var f=b[a],t=0,u=f.length;t<u;t+=
2)c.push([f[t],f[t+1]]);return c};a.cells=function(){for(var b=this.stars,c=[],a=0,m=b.length;a<m;++a)for(var f=b[a],t=0,u=f.length;t<u;t+=2){var r=f[t],k=f[t+1];a<Math.min(r,k)&&c.push([a,r,k])}return c}},{"binary-search-bounds":47}],47:[function(a,f,e){function p(c,b,a,l,m){c=["function ",c,"(a,l,h,",l.join(","),"){",m?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];m?0>b.indexOf("c")?c.push(";if(x===y){return m}else if(x<=y){"):c.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
c.push(";if(",b,"){i=m;");a?c.push("l=m+1}else{h=m-1}"):c.push("h=m-1}else{l=m+1}");c.push("}");m?c.push("return -1};"):c.push("return i};");return c.join("")}function m(c,b,a,l){return(new Function([p("A","x"+c+"y",b,["y"],l),p("P","c(x,y)"+c+"0",b,["y","c"],l),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
f.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],48:[function(a,f,e){function p(b,d){for(var c=Array(b.length-1),a=1;a<b.length;++a)for(var k=c[a-1]=Array(b.length-1),l=0,g=0;l<b.length;++l)l!==d&&(k[g++]=b[a][l]);return c}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",m(b.slice(0,d)),",",m(b.slice(d)),")"].join("")}function c(b,d){if("m"===b.charAt(0)){if("w"===
d.charAt(0)){var a=b.split("[");return["w",d.substr(1),"m",a[0].substr(1)].join("")}return["prod(",b,",",d,")"].join("")}return c(d,b)}function b(a){if(2===a.length)return[["diff(",c(a[0][0],a[1][1]),",",c(a[1][0],a[0][1]),")"].join("")];for(var d=[],n=0;n<a.length;++n)d.push(["scale(",m(b(p(a,n))),",",n&1?"-":"",a[0][n],")"].join(""));return d}function w(b,d){for(var c=[],a=0;a<d-2;++a)c.push(["prod(m",b,"[",a,"],m",b,"[",a,"])"].join(""));return m(c)}function l(c){for(var d=[],a=[],k=Array(c),l=
0;l<c;++l){k[l]=Array(c);for(var f=0;f<c;++f)k[l][f]=["m",f,"[",c-l-2,"]"].join("")}for(l=0;l<c;++l)k[0][l]="1",k[c-1][l]="w"+l;for(l=0;l<c;++l)0===(l&1)?d.push.apply(d,b(p(k,l))):a.push.apply(a,b(p(k,l)));d=m(d);a=m(a);k="exactInSphere"+c;f=[];for(l=0;l<c;++l)f.push("m"+l);f=["function ",k,"(",f.join(),"){"];for(l=0;l<c;++l){f.push("var w",l,"=",w(l,c),";");for(var g=0;g<c;++g)g!==l&&f.push("var w",l,"m",g,"=scale(w",l,",m",g,"[0]);")}f.push("var p=",d,",n=",a,",d=diff(p,n);return d[d.length-1];}return ",
k);return(new Function("sum","diff","prod","scale",f.join("")))(t,u,q,r)}function x(b){var c=k[b.length];c||(c=k[b.length]=l(b.length));return c.apply(void 0,b)}var q=a("two-product"),t=a("robust-sum"),u=a("robust-subtract"),r=a("robust-scale"),k=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=k.length;)k.push(l(k.length));for(var b=[],c=["slow"],a=0;6>=a;++a)b.push("a"+a),c.push("o"+a);for(var v=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
a=2;6>=a;++a)v.push("case ",a,":return o",a,"(",b.slice(0,a).join(),");");v.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(v.join(""));b=Function.apply(void 0,c);f.exports=b.apply(void 0,[x].concat(k));for(a=0;6>=a;++a)f.exports[a]=k[a]})()},{"robust-scale":50,"robust-subtract":51,"robust-sum":52,"two-product":53}],49:[function(a,f,e){f.exports=function(a,m,c){var b=a+m,f=b-a;m-=f;a-=b-f;return c?(c[0]=a+
m,c[1]=b,c):[a+m,b]}},{}],50:[function(a,f,e){var p=a("two-product"),m=a("two-sum");f.exports=function(c,b){var a=c.length;if(1===a)return a=p(c[0],b),a[0]?a:[a[1]];var l=Array(2*a),f=[.1,.1],e=[.1,.1],t=0;p(c[0],b,f);f[0]&&(l[t++]=f[0]);for(var u=1;u<a;++u){p(c[u],b,e);m(f[1],e[0],f);f[0]&&(l[t++]=f[0]);var r=e[1],k=f[1],h=r+k,r=k-(h-r);f[1]=h;r&&(l[t++]=r)}f[1]&&(l[t++]=f[1]);0===t&&(l[t++]=0);l.length=t;return l}},{"two-product":53,"two-sum":49}],51:[function(a,f,e){f.exports=function(a,f){var c=
a.length|0,b=f.length|0;if(1===c&&1===b){var b=a[0],w=-f[0],c=b+w,l=c-b,c=(b=b-(c-l)+(w-l))?[b,c]:[c];return c}var w=Array(c+b),e=l=0,q=0,t=Math.abs,u=a[e],r=t(u),k=-f[q],h=t(k),d,n;r<h?(n=u,e+=1,e<c&&(u=a[e],r=t(u))):(n=k,q+=1,q<b&&(k=-f[q],h=t(k)));e<c&&r<h||q>=b?(d=u,e+=1,e<c&&(u=a[e],r=t(u))):(d=k,q+=1,q<b&&(k=-f[q],h=t(k)));var v=d+n;n-=v-d;for(var z=v,B;e<c&&q<b;)r<h?(d=u,e+=1,e<c&&(u=a[e],r=t(u))):(d=k,q+=1,q<b&&(k=-f[q],h=t(k))),v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-B,v-=B,z-=n,
n=z+v,z=d;for(;e<c;)d=u,v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-B,v-=B,z-=n,n=z+v,z=d,e+=1,e<c&&(u=a[e]);for(;q<b;)d=k,v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-B,v-=B,z-=n,n=z+v,z=d,q+=1,q<b&&(k=-f[q]);n&&(w[l++]=n);z&&(w[l++]=z);l||(w[l++]=0);w.length=l;return w}},{}],52:[function(a,f,e){f.exports=function(a,f){var c=a.length|0,b=f.length|0;if(1===c&&1===b){var b=a[0],w=f[0],c=b+w,l=c-b,c=(b=b-(c-l)+(w-l))?[b,c]:[c];return c}var w=Array(c+b),e=l=0,q=0,t=Math.abs,u=a[e],r=t(u),k=f[q],
h=t(k),d,n;r<h?(n=u,e+=1,e<c&&(u=a[e],r=t(u))):(n=k,q+=1,q<b&&(k=f[q],h=t(k)));e<c&&r<h||q>=b?(d=u,e+=1,e<c&&(u=a[e],r=t(u))):(d=k,q+=1,q<b&&(k=f[q],h=t(k)));var v=d+n;n-=v-d;for(var z=v,B;e<c&&q<b;)r<h?(d=u,e+=1,e<c&&(u=a[e],r=t(u))):(d=k,q+=1,q<b&&(k=f[q],h=t(k))),v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-B,v-=B,z-=n,n=z+v,z=d;for(;e<c;)d=u,v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-B,v-=B,z-=n,n=z+v,z=d,e+=1,e<c&&(u=a[e]);for(;q<b;)d=k,v=d+n,d=v-d,(d=n-d)&&(w[l++]=d),d=z+v,B=d-z,n=d-
B,v-=B,z-=n,n=z+v,z=d,q+=1,q<b&&(k=f[q]);n&&(w[l++]=n);z&&(w[l++]=z);l||(w[l++]=0);w.length=l;return w}},{}],53:[function(a,f,e){f.exports=function(a,c,b){var f=a*c,l=p*a,l=l-(l-a);a-=l;var e=p*c,e=e-(e-c);c-=e;c=a*c-(f-l*e-a*e-l*c);return b?(b[0]=c,b[1]=f,b):[c,f]};var p=+(Math.pow(2,27)+1)},{}],54:[function(a,f,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],55:[function(a,f,e){arguments[4][50][0].apply(e,arguments)},{dup:50,"two-product":58,"two-sum":54}],56:[function(a,f,e){arguments[4][51][0].apply(e,
arguments)},{dup:51}],57:[function(a,f,e){arguments[4][52][0].apply(e,arguments)},{dup:52}],58:[function(a,f,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],59:[function(a,f,e){function p(b,c){for(var a=Array(b.length-1),k=1;k<b.length;++k)for(var l=a[k-1]=Array(b.length-1),f=0,g=0;f<b.length;++f)f!==c&&(l[g++]=b[k][f]);return a}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var c=b.length>>1;return["sum(",m(b.slice(0,c)),",",m(b.slice(c)),
")"].join("")}function c(b){if(2===b.length)return[["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("")];for(var d=[],a=0;a<b.length;++a)d.push(["scale(",m(c(p(b,a))),",",a&1?"-":"",b[0][a],")"].join(""));return d}function b(b){for(var d=[],a=[],k=Array(b),f=0;f<b;++f){k[f]=Array(b);for(var r=0;r<b;++r)k[f][r]=["m",r,"[",b-f-1,"]"].join("")}f=[];for(r=0;r<b;++r)0===(r&1)?d.push.apply(d,c(p(k,r))):a.push.apply(a,c(p(k,r))),f.push("m"+r);d=m(d);a=m(a);b="orientation"+b+"Exact";
b=["function ",b,"(",f.join(),"){var p=",d,",n=",a,",d=sub(p,n);return d[d.length-1];};return ",b].join("");return(new Function("sum","prod","scale","sub",b))(x,l,q,t)}function w(c){var d=k[c.length];d||(d=k[c.length]=b(c.length));return d.apply(void 0,c)}var l=a("two-product"),x=a("robust-sum"),q=a("robust-scale"),t=a("robust-subtract"),u=b(3),r=b(4),k=[function(){return 0},function(){return 0},function(b,c){return c[0]-b[0]},function(b,c,a){var k=(b[1]-a[1])*(c[0]-a[0]),l=(b[0]-a[0])*(c[1]-a[1]),
f=k-l;if(0<k){if(0>=l)return f;k+=l}else if(0>k){if(0<=l)return f;k=-(k+l)}else return f;k*=3.3306690738754716E-16;return f>=k||f<=-k?f:u(b,c,a)},function(b,c,a,k){var l=b[0]-k[0],f=c[0]-k[0],g=a[0]-k[0],y=b[1]-k[1],m=c[1]-k[1],A=a[1]-k[1],u=b[2]-k[2],w=c[2]-k[2],e=a[2]-k[2],t=f*A,q=g*m,g=g*y,A=l*A,l=l*m,y=f*y,f=u*(t-q)+w*(g-A)+e*(l-y),u=7.771561172376103E-16*((Math.abs(t)+Math.abs(q))*Math.abs(u)+(Math.abs(g)+Math.abs(A))*Math.abs(w)+(Math.abs(l)+Math.abs(y))*Math.abs(e));return f>u||-f>u?f:r(b,
c,a,k)}];(function(){for(;5>=k.length;)k.push(b(k.length));for(var c=[],a=["slow"],n=0;5>=n;++n)c.push("a"+n),a.push("o"+n);for(var l=["function getOrientation(",c.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;5>=n;++n)l.push("case ",n,":return o",n,"(",c.slice(0,n).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");a.push(l.join(""));c=Function.apply(void 0,a);f.exports=c.apply(void 0,
[w].concat(k));for(n=0;5>=n;++n)f.exports[n]=k[n]})()},{"robust-scale":55,"robust-subtract":56,"robust-sum":57,"two-product":58}],60:[function(a,f,e){function p(b){var g=d(b);b=h(k(g),b);return 0>b?[g,v(g,Infinity)]:0<b?[v(g,-Infinity),g]:[g,g]}function m(b,g,c){var a=[];u(c,function(c,d){var h=g[c],k=g[d];h[0]!==k[0]&&h[0]!==k[1]&&h[1]!==k[0]&&h[1]!==k[1]&&r(b[h[0]],b[h[1]],b[k[0]],b[k[1]])&&a.push([c,d])});return a}function c(b,g,c,a){var d=[];u(c,a,function(c,a){var h=g[c];if(h[0]!==a&&h[1]!==
a){var k=b[a];r(b[h[0]],b[h[1]],k,k)&&d.push([c,a])}});return d}function b(b,g,c,a,d){function l(g){if(g>=b.length)return f[g-b.length];g=b[g];return[k(g[0]),k(g[1])]}for(var f=[],v=0;v<c.length;++v){var r=c[v],m=r[0],r=r[1],u=g[m],w=g[r];if(u=z(n(b[u[0]]),n(b[u[1]]),n(b[w[0]]),n(b[w[1]])))w=f.length+b.length,f.push(u),a.push([m,w],[r,w])}a.sort(function(b,g){if(b[0]!==g[0])return b[0]-g[0];var c=l(b[1]),a=l(g[1]);return h(c[0],a[0])||h(c[1],a[1])});for(v=a.length-1;0<=v;--v){r=a[v];m=r[0];u=g[m];
w=u[0];c=u[1];var e=b[w],t=b[c];0>(e[0]-t[0]||e[1]-t[1])&&(e=w,w=c,c=e);u[0]=w;var w=u[1]=r[1],q;for(d&&(q=u[2]);0<v&&a[v-1][0]===m;)r=a[--v],r=r[1],d?g.push([w,r,q]):g.push([w,r]),w=r;d?g.push([w,c,q]):g.push([w,c])}return f}function w(b,g,c){for(var a=b.length+g.length,h=new t(a),k=0;k<g.length;++k){var n=g[k],l=p(n[0]),f=p(n[1]);c.push([l[0],f[0],l[1],f[1]]);b.push([d(n[0]),d(n[1])])}u(c,function(b,g){h.link(b,g)});g=0;c=!0;n=Array(a);for(k=0;k<a;++k)h.find(k)===k?(n[k]=g,b[g++]=b[k]):(c=!1,n[k]=
-1);b.length=g;if(c)return null;for(k=0;k<a;++k)0>n[k]&&(n[k]=n[h.find(k)]);return n}function l(b,g){return b[0]-g[0]||b[1]-g[1]}function x(b,g){var c=b[0]-g[0]||b[1]-g[1];return c?c:b[2]<g[2]?-1:b[2]>g[2]?1:0}function q(a,g,d){for(var h=Array(g.length),k=0;k<g.length;++k){var n=g[k],f=a[n[0]],n=a[n[1]];h[k]=[Math.min(f[0],n[0]),Math.min(f[1],n[1]),Math.max(f[0],n[0]),Math.max(f[1],n[1])]}k=m(a,g,h);f=Array(a.length);for(n=0;n<a.length;++n){var v=a[n];f[n]=[v[0],v[1],v[0],v[1]]}h=c(a,g,h,f);n=b(a,
g,k,h,d);a=w(a,n,f);if(0!==g.length){if(a)for(f=0;f<g.length;++f){var n=g[f],v=a[n[0]],r=a[n[1]];n[0]=Math.min(v,r);n[1]=Math.max(v,r)}else for(f=0;f<g.length;++f)n=g[f],v=n[0],r=n[1],n[0]=Math.min(v,r),n[1]=Math.max(v,r);d?g.sort(x):g.sort(l);for(f=n=1;f<g.length;++f)if(v=g[f-1],r=g[f],r[0]!==v[0]||r[1]!==v[1]||d&&r[2]!==v[2])g[n++]=r;g.length=n}return a?!0:0<k.length||0<h.length}f.exports=function(b,g,c){var a=!1,d;if(c){d=g;for(var h=Array(g.length),k=0;k<g.length;++k){var n=g[k];h[k]=[n[0],n[1],
c[k]]}g=h}for(;q(b,g,!!c);)a=!0;if(c&&a)for(d.length=0,k=c.length=0;k<g.length;++k)n=g[k],d.push([n[0],n[1]]),c.push(n[2]);return a};var t=a("union-find"),u=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),k=a("big-rat"),h=a("big-rat/cmp"),d=a("big-rat/to-float"),n=a("rat-vec"),v=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":61,"big-rat":65,"big-rat/cmp":63,"big-rat/to-float":80,"box-intersect":81,"compare-cell":91,nextafter:92,"rat-vec":95,"robust-segment-intersect":104,
"union-find":105}],61:[function(a,f,e){function p(c,a){return b(m(c[0],a[1]),m(c[1],a[0]))}f.exports=function(b,a,f,k){a=l(a,b);var h=l(k,f);k=p(a,h);if(0===w(k))return null;f=l(b,f);f=p(h,f);f=c(f,k);return x(b,q(a,f))};var m=a("big-rat/mul"),c=a("big-rat/div"),b=a("big-rat/sub"),w=a("big-rat/sign"),l=a("rat-vec/sub"),x=a("rat-vec/add"),q=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":64,"big-rat/mul":74,"big-rat/sign":78,"big-rat/sub":79,"big-rat/to-float":80,"rat-vec/add":94,"rat-vec/muls":96,
"rat-vec/sub":97}],62:[function(a,f,e){var p=a("./lib/rationalize");f.exports=function(a,c){return p(a[0].mul(c[1]).add(c[0].mul(a[1])),a[1].mul(c[1]))}},{"./lib/rationalize":72}],63:[function(a,f,e){f.exports=function(a,f){return a[0].mul(f[1]).cmp(f[0].mul(a[1]))}},{}],64:[function(a,f,e){var p=a("./lib/rationalize");f.exports=function(a,c){return p(a[0].mul(c[1]),a[1].mul(c[0]))}},{"./lib/rationalize":72}],65:[function(a,f,e){function p(a,f){if(m(a))return f?x(a,p(f)):[a[0].clone(),a[1].clone()];
var u=0,r,k;if(c(a))r=a.clone();else if("string"===typeof a)r=w(a);else{if(0===a)return[b(0),b(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),u-=256;r=b(a)}if(m(f))r.mul(f[1]),k=f[0].clone();else if(c(f))k=f.clone();else if("string"===typeof f)k=w(f);else if(f){if(f!==Math.floor(f))for(;f!==Math.floor(f);)f*=Math.pow(2,256),u+=256;k=b(f)}else k=b(1);0<u?r=r.shln(u):0>u&&(k=k.shln(-u));return l(r,k)}var m=a("./is-rat"),c=a("./lib/is-bn"),b=a("./lib/num-to-bn"),w=a("./lib/str-to-bn"),
l=a("./lib/rationalize"),x=a("./div");f.exports=p},{"./div":64,"./is-rat":66,"./lib/is-bn":70,"./lib/num-to-bn":71,"./lib/rationalize":72,"./lib/str-to-bn":73}],66:[function(a,f,e){var p=a("./lib/is-bn");f.exports=function(a){return Array.isArray(a)&&2===a.length&&p(a[0])&&p(a[1])}},{"./lib/is-bn":70}],67:[function(a,f,e){var p=a("bn.js");f.exports=function(a){return a.cmp(new p(0))}},{"bn.js":76}],68:[function(a,f,e){f.exports=function(a){var f=a.length,c=a.words,b=0;if(1===f)b=c[0];else if(2===
f)b=c[0]+67108864*c[1];else for(var w=b=0;w<f;w++)b+=c[w]*Math.pow(67108864,w);return a.sign?-b:b}},{}],69:[function(a,f,e){var p=a("double-bits"),m=a("bit-twiddle").countTrailingZeros;f.exports=function(c){var b=m(p.lo(c));if(32>b)return b;c=m(p.hi(c));return 20<c?52:c+32}},{"bit-twiddle":75,"double-bits":77}],70:[function(a,f,e){a("bn.js");f.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":76}],71:[function(a,f,e){var p=a("bn.js"),m=a("double-bits");f.exports=function(c){var b=
m.exponent(c);return 52>b?new p(c):(new p(c*Math.pow(2,52-b))).shln(b-52)}},{"bn.js":76,"double-bits":77}],72:[function(a,f,e){var p=a("./num-to-bn"),m=a("./bn-sign");f.exports=function(c,b){var a=m(c),l=m(b);if(0===a)return[p(0),p(1)];if(0===l)return[p(0),p(0)];0>l&&(c=c.neg(),b=b.neg());a=c.gcd(b);return a.cmpn(1)?[c.div(a),b.div(a)]:[c,b]}},{"./bn-sign":67,"./num-to-bn":71}],73:[function(a,f,e){var p=a("bn.js");f.exports=function(a){return new p(a)}},{"bn.js":76}],74:[function(a,f,e){var p=a("./lib/rationalize");
f.exports=function(a,c){return p(a[0].mul(c[0]),a[1].mul(c[1]))}},{"./lib/rationalize":72}],75:[function(a,f,e){function p(a){var b=32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&--b;return b}"use restrict";e.INT_BITS=32;e.INT_MAX=2147483647;e.INT_MIN=-2147483648;e.sign=function(a){return(0<a)-(0>a)};e.abs=function(a){var b=a>>31;return(a^b)-b};e.min=function(a,b){return b^(a^b)&-(a<b)};e.max=function(a,b){return a^(a^b)&-(a<b)};e.isPow2=
function(a){return!(a&a-1)&&!!a};e.log2=function(a){var b,f;b=(65535<a)<<4;a>>>=b;f=(255<a)<<3;a>>>=f;b|=f;f=(15<a)<<2;a>>>=f;b|=f;f=(3<a)<<1;return b|f|a>>>f>>1};e.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};e.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};e.countTrailingZeros=p;e.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>
16)+1};e.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};e.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var m=Array(256);(function(a){for(var b=0;256>b;++b){for(var f=b,l=b,m=7,f=f>>>1;f;f>>>=1)l<<=1,l|=f&1,--m;a[b]=l<<m&255}})(m);e.reverse=function(a){return m[a&255]<<24|m[a>>>8&255]<<16|m[a>>>16&255]<<8|m[a>>>24&255]};e.interleave2=function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b&=65535;b=(b|b<<
8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};e.deinterleave2=function(a,b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};e.interleave3=function(a,b,f){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a=(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1;f&=1023;f=(f|f<<16)&4278190335;
f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return a|((f|f<<2)&1227133513)<<2};e.deinterleave3=function(a,b){a=a>>>b&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};e.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>p(a)+1}},{}],76:[function(a,f,e){(function(a,f){function c(b,a){if(!b)throw Error(a||"Assertion failed");}function b(b,a){b.super_=a;var d=function(){};d.prototype=a.prototype;b.prototype=new d;b.prototype.constructor=
b}function e(b,a,d){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===a||"be"===a)d=a,a=10;null!==b&&this._init(b||0,a||10,d||"be")}function l(b,a,d){var c=0;for(d=Math.min(b.length,d);a<d;a++)var h=b.charCodeAt(a)-48,c=c<<4,c=49<=h&&54>=h?c|h-49+10:17<=h&&22>=h?c|h-17+10:c|h&15;return c}function x(b,a,d,c){var h=0;for(d=Math.min(b.length,d);a<d;a++)var k=b.charCodeAt(a)-48,h=h*c,h=49<=k?h+(k-49+10):17<=k?h+(k-17+10):
h+k;return h}function q(b,a){this.name=b;this.p=new e(a,16);this.n=this.p.bitLength();this.k=(new e(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function t(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function h(b){"string"===typeof b?(b=e._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function d(b){h.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new e(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=e:f.BN=e;e.BN=e;e.wordSize=26;e.prototype._init=function(b,
a,d){if("number"===typeof b)return this._initNumber(b,a,d);if("object"===typeof b)return this._initArray(b,a,d);"hex"===a&&(a=16);c(a===(a|0)&&2<=a&&36>=a);b=b.toString().replace(/\s+/g,"");var h=0;"-"===b[0]&&h++;16===a?this._parseHex(b,h):this._parseBase(b,a,h);"-"===b[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),a,d)};e.prototype._initNumber=function(b,a,d){0>b&&(this.sign=!0,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&
67108863,b/67108864&67108863],this.length=2):(c(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),a,d)};e.prototype._initArray=function(b,a,d){c("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var h=0;if("be"===d)for(a=b.length-1,d=0;0<=a;a-=3){var k=b[a]|b[a-1]<<8|b[a-2]<<16;this.words[d]|=
k<<h&67108863;this.words[d+1]=k>>>26-h&67108863;h+=24;26<=h&&(h-=26,d++)}else if("le"===d)for(d=a=0;a<b.length;a+=3)k=b[a]|b[a+1]<<8|b[a+2]<<16,this.words[d]|=k<<h&67108863,this.words[d+1]=k>>>26-h&67108863,h+=24,26<=h&&(h-=26,d++);return this.strip()};e.prototype._parseHex=function(b,a){this.length=Math.ceil((b.length-a)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;for(var c=0,d=b.length-6,h=0;d>=a;d-=6){var k=l(b,d,d+6);this.words[h]|=k<<c&67108863;this.words[h+
1]|=k>>>26-c&4194303;c+=24;26<=c&&(c-=26,h++)}d+6!==a&&(k=l(b,a,d+6),this.words[h]|=k<<c&67108863,this.words[h+1]|=k>>>26-c&4194303);this.strip()};e.prototype._parseBase=function(b,a,d){this.words=[0];this.length=1;for(var c=0,h=1;67108863>=h;h*=a)c++;c--;for(var h=h/a|0,k=b.length-d,n=k%c,l=Math.min(k,k-n)+d,k=0;d<l;d+=c)k=x(b,d,d+c,a),this.imuln(h),67108864>this.words[0]+k?this.words[0]+=k:this._iaddn(k);if(0!==n){c=1;k=x(b,d,b.length,a);for(d=0;d<n;d++)c*=a;this.imuln(c);67108864>this.words[0]+
k?this.words[0]+=k:this._iaddn(k)}};e.prototype.copy=function(b){b.words=Array(this.length);for(var a=0;a<this.length;a++)b.words[a]=this.words[a];b.length=this.length;b.sign=this.sign;b.red=this.red};e.prototype.clone=function(){var b=new e(null);this.copy(b);return b};e.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};e.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};e.prototype.inspect=
function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var n=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,
5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(b,a){b=b||10;if(16===b||"hex"===b){var d="",h=0;a=a|0||1;for(var k=0,l=0;l<this.length;l++){var f=this.words[l],e=((f<<h|k)&16777215).toString(16),
k=f>>>24-h&16777215,d=0!==k||l!==this.length-1?n[6-e.length]+e+d:e+d,h=h+2;26<=h&&(h-=26,l--)}for(0!==k&&(d=k.toString(16)+d);0!==d.length%a;)d="0"+d;this.sign&&(d="-"+d);return d}if(b===(b|0)&&2<=b&&36>=b){h=v[b];k=z[b];d="";l=this.clone();for(l.sign=!1;0!==l.cmpn(0);)f=l.modn(k).toString(b),l=l.idivn(k),d=0!==l.cmpn(0)?n[h-f.length]+f+d:f+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}c(!1,"Base should be between 2 and 36")};e.prototype.toJSON=function(){return this.toString(16)};e.prototype.toArray=
function(b){this.strip();var a=Array(this.byteLength());a[0]=0;var d=this.clone();if("le"!==b)for(b=0;0!==d.cmpn(0);b++){var c=d.andln(255);d.ishrn(8);a[a.length-b-1]=c}else for(b=0;0!==d.cmpn(0);b++)c=d.andln(255),d.ishrn(8),a[b]=c;return a};e.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var a=0;4096<=b&&(a+=13,b>>>=13);64<=b&&(a+=7,b>>>=7);8<=b&&(a+=4,b>>>=4);2<=b&&(a+=2,b>>>=2);return a+b};e.prototype._zeroBits=function(b){if(0===b)return 26;var a=0;0===(b&8191)&&
(a+=13,b>>>=13);0===(b&127)&&(a+=7,b>>>=7);0===(b&15)&&(a+=4,b>>>=4);0===(b&3)&&(a+=2,b>>>=2);0===(b&1)&&a++;return a};e.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};e.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,a=0;a<this.length;a++){var d=this._zeroBits(this.words[a]),b=b+d;if(26!==d)break}return b};e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};e.prototype.neg=function(){if(0===
this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};e.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var a=0;a<b.length;a++)this.words[a]|=b.words[a];return this.strip()};e.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};e.prototype.iand=function(b){this.sign=this.sign&&b.sign;var a;a=this.length>b.length?b:this;for(var d=0;d<a.length;d++)this.words[d]&=b.words[d];
this.length=a.length;return this.strip()};e.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};e.prototype.ixor=function(b){this.sign=this.sign||b.sign;var a;this.length>b.length?a=this:(a=b,b=this);for(var d=0;d<b.length;d++)this.words[d]=a.words[d]^b.words[d];if(this!==a)for(;d<a.length;d++)this.words[d]=a.words[d];this.length=a.length;return this.strip()};e.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};
e.prototype.setn=function(b,a){c("number"===typeof b&&0<=b);for(var d=b/26|0,h=b%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=a?this.words[d]|1<<h:this.words[d]&~(1<<h);return this.strip()};e.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var a=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,a=this.isub(b),b.sign=!0,a._normSign();var d;this.length>b.length?d=this:(d=b,b=this);for(var c=a=0;c<b.length;c++)a=d.words[c]+
b.words[c]+a,this.words[c]=a&67108863,a>>>=26;for(;0!==a&&c<d.length;c++)a=d.words[c]+a,this.words[c]=a&67108863,a>>>=26;this.length=d.length;if(0!==a)this.words[this.length]=a,this.length++;else if(d!==this)for(;c<d.length;c++)this.words[c]=d.words[c];return this};e.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var a=this.sub(b);b.sign=!0;return a}return!b.sign&&this.sign?(this.sign=!1,a=b.sub(this),this.sign=!0,a):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};e.prototype.isub=
function(b){if(b.sign){b.sign=!1;var a=this.iadd(b);b.sign=!0;return a._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();a=this.cmp(b);if(0===a)return this.sign=!1,this.length=1,this.words[0]=0,this;var d;0<a?d=this:(d=b,b=this);for(var c=0,h=0;h<b.length;h++)a=d.words[h]-b.words[h]+c,c=a>>26,this.words[h]=a&67108863;for(;0!==c&&h<d.length;h++)a=d.words[h]+c,c=a>>26,this.words[h]=a&67108863;if(0===c&&h<d.length&&d!==this)for(;h<d.length;h++)this.words[h]=d.words[h];
this.length=Math.max(this.length,h);d!==this&&(this.sign=!0);return this.strip()};e.prototype.sub=function(b){return this.clone().isub(b)};e.prototype._smallMulTo=function(b,a){a.sign=b.sign!==this.sign;a.length=this.length+b.length;for(var d=0,c=0;c<a.length-1;c++){for(var h=d>>>26,d=d&67108863,k=Math.min(c,b.length-1),n=Math.max(0,c-this.length+1);n<=k;n++)var l=(this.words[c-n]|0)*(b.words[n]|0),f=l&67108863,h=h+(l/67108864|0)|0,f=f+d|0,d=f&67108863,h=h+(f>>>26)|0;a.words[c]=d;d=h}0!==d?a.words[c]=
d:a.length--;return a.strip()};e.prototype._bigMulTo=function(b,a){a.sign=b.sign!==this.sign;a.length=this.length+b.length;for(var d=0,c=0,h=0;h<a.length-1;h++){for(var k=c,c=0,d=d&67108863,n=Math.min(h,b.length-1),l=Math.max(0,h-this.length+1);l<=n;l++)var f=(this.words[h-l]|0)*(b.words[l]|0),e=f&67108863,k=k+(f/67108864|0)|0,e=e+d|0,d=e&67108863,k=k+(e>>>26)|0,c=c+(k>>>26),k=k&67108863;a.words[h]=d;d=k}0!==d?a.words[h]=d:a.length--;return a.strip()};e.prototype.mulTo=function(b,a){return 63>this.length+
b.length?this._smallMulTo(b,a):this._bigMulTo(b,a)};e.prototype.mul=function(b){var a=new e(null);a.words=Array(this.length+b.length);return this.mulTo(b,a)};e.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var a=this.length,d=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var c=this.length-2;0<=c;c--){for(var h=0,k=0,n=Math.min(c,d-1),l=Math.max(0,c-a+1);l<=n;l++)var f=c-l,f=this.words[f]*b.words[l],
e=f&67108863,h=h+(f/67108864|0),e=e+k,k=e&67108863,h=h+(e>>>26);this.words[c]=k;this.words[c+1]+=h}h=0;for(f=1;f<this.length;f++)b=this.words[f]+h,this.words[f]=b&67108863,h=b>>>26;return this.strip()};e.prototype.imuln=function(b){c("number"===typeof b);for(var a=0,d=0;d<this.length;d++){var h=this.words[d]*b,k=(h&67108863)+(a&67108863),a=a>>26,a=a+(h/67108864|0),a=a+(k>>>26);this.words[d]=k&67108863}0!==a&&(this.words[d]=a,this.length++);return this};e.prototype.muln=function(b){return this.clone().imuln(b)};
e.prototype.sqr=function(){return this.mul(this)};e.prototype.isqr=function(){return this.mul(this)};e.prototype.ishln=function(b){c("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;var d=67108863>>>26-a<<26-a;if(0!==a){for(var h=0,k=0;k<this.length;k++){var n=this.words[k]&d;this.words[k]=this.words[k]-n<<a|h;h=n>>>26-a}h&&(this.words[k]=h,this.length++)}if(0!==b){for(k=this.length-1;0<=k;k--)this.words[k+b]=this.words[k];for(k=0;k<b;k++)this.words[k]=0;this.length+=b}return this.strip()};e.prototype.ishrn=
function(b,a,d){c("number"===typeof b&&0<=b);var h=b%26,k=Math.min((b-h)/26,this.length);b=67108863^67108863>>>h<<h;a=(a?(a-a%26)/26:0)-k;a=Math.max(0,a);if(d){for(var n=0;n<k;n++)d.words[n]=this.words[n];d.length=k}if(0!==k)if(this.length>k)for(this.length-=k,n=0;n<this.length;n++)this.words[n]=this.words[n+k];else this.words[0]=0,this.length=1;k=0;for(n=this.length-1;0<=n&&(0!==k||n>=a);n--){var l=this.words[n];this.words[n]=k<<26-h|l>>>h;k=l&b}d&&0!==k&&(d.words[d.length++]=k);0===this.length&&
(this.words[0]=0,this.length=1);this.strip();return this};e.prototype.shln=function(b){return this.clone().ishln(b)};e.prototype.shrn=function(b){return this.clone().ishrn(b)};e.prototype.testn=function(b){c("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;return this.length<=b?!1:!!(this.words[b]&1<<a)};e.prototype.imaskn=function(b){c("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;c(!this.sign,"imaskn works only with positive numbers");0!==a&&b++;this.length=Math.min(b,this.length);0!==a&&(this.words[this.length-
1]&=67108863^67108863>>>a<<a);return this.strip()};e.prototype.maskn=function(b){return this.clone().imaskn(b)};e.prototype.iaddn=function(b){c("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};e.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===
this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};e.prototype.isubn=function(b){c("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};e.prototype.addn=function(b){return this.clone().iaddn(b)};e.prototype.subn=function(b){return this.clone().isubn(b)};e.prototype.iabs=
function(){this.sign=!1;return this};e.prototype.abs=function(){return this.clone().iabs()};e.prototype._ishlnsubmul=function(b,a,d){var h=b.length+d,k;if(this.words.length<h){var n=Array(h);for(k=0;k<this.length;k++)n[k]=this.words[k];this.words=n}else k=this.length;for(this.length=Math.max(this.length,h);k<this.length;k++)this.words[k]=0;for(k=n=0;k<b.length;k++)h=this.words[k+d]+n,n=b.words[k]*a,h-=n&67108863,n=(h>>26)-(n/67108864|0),this.words[k+d]=h&67108863;for(;k<this.length-d;k++)h=this.words[k+
d]+n,n=h>>26,this.words[k+d]=h&67108863;if(0===n)return this.strip();c(-1===n);for(k=n=0;k<this.length;k++)h=-this.words[k]+n,n=h>>26,this.words[k]=h&67108863;this.sign=!0;return this.strip()};e.prototype._wordDiv=function(b,a){var d=this.length-b.length,c=this.clone(),h=b,k=h.words[h.length-1],d=26-this._countBits(k);0!==d&&(h=h.shln(d),c.ishln(d),k=h.words[h.length-1]);var n=c.length-h.length,l;if("mod"!==a){l=new e(null);l.length=n+1;l.words=Array(l.length);for(var f=0;f<l.length;f++)l.words[f]=
0}f=c.clone()._ishlnsubmul(h,1,n);f.sign||(c=f,l&&(l.words[n]=1));for(--n;0<=n;n--){f=67108864*c.words[h.length+n]+c.words[h.length+n-1];f=Math.min(f/k|0,67108863);for(c._ishlnsubmul(h,f,n);c.sign;)f--,c.sign=!1,c._ishlnsubmul(h,1,n),0!==c.cmpn(0)&&(c.sign=!c.sign);l&&(l.words[n]=f)}l&&l.strip();c.strip();"div"!==a&&0!==d&&c.ishrn(d);return{div:l?l:null,mod:c}};e.prototype.divmod=function(b,a){c(0!==b.cmpn(0));if(this.sign&&!b.sign){var d=this.neg().divmod(b,a),h,k;"mod"!==a&&(h=d.div.neg());"div"!==
a&&(k=0===d.mod.cmpn(0)?d.mod:b.sub(d.mod));return{div:h,mod:k}}return!this.sign&&b.sign?(d=this.divmod(b.neg(),a),"mod"!==a&&(h=d.div.neg()),{div:h,mod:d.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),a):b.length>this.length||0>this.cmp(b)?{div:new e(0),mod:this}:1===b.length?"div"===a?{div:this.divn(b.words[0]),mod:null}:"mod"===a?{div:null,mod:new e(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new e(this.modn(b.words[0]))}:this._wordDiv(b,a)};e.prototype.div=function(b){return this.divmod(b,
"div").div};e.prototype.mod=function(b){return this.divmod(b,"mod").mod};e.prototype.divRound=function(b){var a=this.divmod(b);if(0===a.mod.cmpn(0))return a.div;var d=a.div.sign?a.mod.isub(b):a.mod,c=b.shrn(1);b=b.andln(1);d=d.cmp(c);return 0>d||1===b&&0===d?a.div:a.div.sign?a.div.isubn(1):a.div.iaddn(1)};e.prototype.modn=function(b){c(67108863>=b);for(var a=67108864%b,d=0,h=this.length-1;0<=h;h--)d=(a*d+this.words[h])%b;return d};e.prototype.idivn=function(b){c(67108863>=b);for(var a=0,d=this.length-
1;0<=d;d--)a=this.words[d]+67108864*a,this.words[d]=a/b|0,a%=b;return this.strip()};e.prototype.divn=function(b){return this.clone().idivn(b)};e.prototype.egcd=function(b){c(!b.sign);c(0!==b.cmpn(0));var a=this,d=b.clone(),a=a.sign?a.mod(b):a.clone();b=new e(1);for(var h=new e(0),k=new e(0),n=new e(1),l=0;a.isEven()&&d.isEven();)a.ishrn(1),d.ishrn(1),++l;for(var f=d.clone(),v=a.clone();0!==a.cmpn(0);){for(;a.isEven();)a.ishrn(1),b.isEven()&&h.isEven()?(b.ishrn(1),h.ishrn(1)):(b.iadd(f).ishrn(1),h.isub(v).ishrn(1));
for(;d.isEven();)d.ishrn(1),k.isEven()&&n.isEven()?(k.ishrn(1),n.ishrn(1)):(k.iadd(f).ishrn(1),n.isub(v).ishrn(1));0<=a.cmp(d)?(a.isub(d),b.isub(k),h.isub(n)):(d.isub(a),k.isub(b),n.isub(h))}return{a:k,b:n,gcd:d.ishln(l)}};e.prototype._invmp=function(b){c(!b.sign);c(0!==b.cmpn(0));var a=this,d=b.clone(),a=a.sign?a.mod(b):a.clone();b=new e(1);for(var h=new e(0),k=d.clone();0<a.cmpn(1)&&0<d.cmpn(1);){for(;a.isEven();)a.ishrn(1),b.isEven()?b.ishrn(1):b.iadd(k).ishrn(1);for(;d.isEven();)d.ishrn(1),h.isEven()?
h.ishrn(1):h.iadd(k).ishrn(1);0<=a.cmp(d)?(a.isub(d),b.isub(h)):(d.isub(a),h.isub(b))}return 0===a.cmpn(1)?b:h};e.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var a=this.clone();b=b.clone();a.sign=!1;b.sign=!1;for(var d=0;a.isEven()&&b.isEven();d++)a.ishrn(1),b.ishrn(1);do{for(;a.isEven();)a.ishrn(1);for(;b.isEven();)b.ishrn(1);var c=a.cmp(b);if(0>c)c=a,a=b,b=c;else if(0===c||0===b.cmpn(1))break;a.isub(b)}while(1);return b.ishln(d)};e.prototype.invm=
function(b){return this.egcd(b).a.mod(b)};e.prototype.isEven=function(){return 0===(this.words[0]&1)};e.prototype.isOdd=function(){return 1===(this.words[0]&1)};e.prototype.andln=function(b){return this.words[0]&b};e.prototype.bincn=function(b){c("number"===typeof b);var a=b%26;b=(b-a)/26;var d=1<<a;if(this.length<=b){for(a=this.length;a<b+1;a++)this.words[a]=0;this.words[b]|=d;this.length=b+1;return this}for(a=b;0!==d&&a<this.length;a++)b=this.words[a],b+=d,d=b>>>26,b&=67108863,this.words[a]=b;0!==
d&&(this.words[a]=d,this.length++);return this};e.prototype.cmpn=function(b){var a=0>b;a&&(b=-b);if(this.sign&&!a)return-1;if(!this.sign&&a)return 1;b&=67108863;this.strip();1<this.length?b=1:(a=this.words[0],b=a===b?0:a<b?-1:1);this.sign&&(b=-b);return b};e.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};e.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var a=0,d=this.length-
1;0<=d;d--){var c=this.words[d],h=b.words[d];if(c!==h){c<h?a=-1:c>h&&(a=1);break}}return a};e.red=function(b){return new h(b)};e.prototype.toRed=function(b){c(!this.red,"Already a number in reduction context");c(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};e.prototype.fromRed=function(){c(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};e.prototype._forceRed=function(b){this.red=b;return this};e.prototype.forceRed=
function(b){c(!this.red,"Already a number in reduction context");return this._forceRed(b)};e.prototype.redAdd=function(b){c(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};e.prototype.redIAdd=function(b){c(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};e.prototype.redSub=function(b){c(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};e.prototype.redISub=function(b){c(this.red,"redISub works only with red numbers");
return this.red.isub(this,b)};e.prototype.redShl=function(b){c(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};e.prototype.redMul=function(b){c(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};e.prototype.redIMul=function(b){c(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};e.prototype.redSqr=function(){c(this.red,"redSqr works only with red numbers");this.red._verify1(this);
return this.red.sqr(this)};e.prototype.redISqr=function(){c(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};e.prototype.redSqrt=function(){c(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};e.prototype.redInvm=function(){c(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};e.prototype.redNeg=function(){c(this.red,"redNeg works only with red numbers");
this.red._verify1(this);return this.red.neg(this)};e.prototype.redPow=function(b){c(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var B={k256:null,p224:null,p192:null,p25519:null};q.prototype._tmp=function(){var b=new e(null);b.words=Array(Math.ceil(this.n/13));return b};q.prototype.ireduce=function(b){var a;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),a=b.bitLength();while(a>this.n);a=a<this.n?-1:b.ucmp(this.p);0===a?(b.words[0]=0,b.length=
1):0<a?b.isub(this.p):b.strip();return b};q.prototype.split=function(b,a){b.ishrn(this.n,0,a)};q.prototype.imulK=function(b){return b.imul(this.k)};b(t,q);t.prototype.split=function(b,a){for(var d=Math.min(b.length,9),c=0;c<d;c++)a.words[c]=b.words[c];a.length=d;if(9>=b.length)b.words[0]=0,b.length=1;else{d=b.words[9];a.words[a.length++]=d&4194303;for(c=10;c<b.length;c++){var h=b.words[c];b.words[c-10]=(h&4194303)<<4|d>>>22;d=h}b.words[c-10]=d>>>22;b.length-=9}};t.prototype.imulK=function(b){b.words[b.length]=
0;b.words[b.length+1]=0;b.length+=2;for(var a,d=0,c=0;c<b.length;c++){var h=b.words[c];a=64*h;d+=977*h;a+=d/67108864|0;d&=67108863;b.words[c]=d;d=a}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};b(u,q);b(r,q);b(k,q);k.prototype.imulK=function(b){for(var a=0,d=0;d<b.length;d++){var a=19*b.words[d]+a,c=a&67108863,a=a>>>26;b.words[d]=c}0!==a&&(b.words[b.length++]=a);return b};e._prime=function(b){if(B[b])return B[b];var a;if("k256"===b)a=new t;else if("p224"===b)a=
new u;else if("p192"===b)a=new r;else if("p25519"===b)a=new k;else throw Error("Unknown prime "+b);return B[b]=a};h.prototype._verify1=function(b){c(!b.sign,"red works only with positives");c(b.red,"red works only with red numbers")};h.prototype._verify2=function(b,a){c(!b.sign&&!a.sign,"red works only with positives");c(b.red&&b.red===a.red,"red works only with red numbers")};h.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.mod(this.m)._forceRed(this)};h.prototype.neg=
function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};h.prototype.add=function(b,a){this._verify2(b,a);var d=b.add(a);0<=d.cmp(this.m)&&d.isub(this.m);return d._forceRed(this)};h.prototype.iadd=function(b,a){this._verify2(b,a);var d=b.iadd(a);0<=d.cmp(this.m)&&d.isub(this.m);return d};h.prototype.sub=function(b,a){this._verify2(b,a);var d=b.sub(a);0>d.cmpn(0)&&d.iadd(this.m);return d._forceRed(this)};h.prototype.isub=function(b,a){this._verify2(b,a);var d=b.isub(a);0>d.cmpn(0)&&
d.iadd(this.m);return d};h.prototype.shl=function(b,a){this._verify1(b);return this.imod(b.shln(a))};h.prototype.imul=function(b,a){this._verify2(b,a);return this.imod(b.imul(a))};h.prototype.mul=function(b,a){this._verify2(b,a);return this.imod(b.mul(a))};h.prototype.isqr=function(b){return this.imul(b,b)};h.prototype.sqr=function(b){return this.mul(b,b)};h.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var a=this.m.andln(3);c(1===a%2);if(3===a){var a=this.m.add(new e(1)).ishrn(2),
d=this.pow(b,a);return d}for(var h=this.m.subn(1),k=0;0!==h.cmpn(0)&&0===h.andln(1);)k++,h.ishrn(1);c(0!==h.cmpn(0));for(var a=(new e(1)).toRed(this),d=a.redNeg(),n=this.m.subn(1).ishrn(1),l=this.m.bitLength(),l=(new e(2*l*l)).toRed(this);0!==this.pow(l,n).cmp(d);)l.redIAdd(d);n=this.pow(l,h);d=this.pow(b,h.addn(1).ishrn(1));b=this.pow(b,h);for(h=k;0!==b.cmp(a);){l=b;for(k=0;0!==l.cmp(a);k++)l=l.redSqr();c(k<h);n=this.pow(n,(new e(1)).ishln(h-k-1));d=d.redMul(n);n=n.redSqr();b=b.redMul(n);h=k}return d};
h.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};h.prototype.pow=function(b,a){var d=[];if(0===a.cmpn(0))return new e(1);for(var c=a.clone();0!==c.cmpn(0);)d.push(c.andln(1)),c.ishrn(1);for(var h=b,k=0;k<d.length&&0===d[k];k++,h=this.sqr(h));if(++k<d.length)for(c=this.sqr(h);k<d.length;k++,c=this.sqr(c))0!==d[k]&&(h=this.mul(h,c));return h};h.prototype.convertTo=function(b){var a=b.mod(this.m);return a===b?a.clone():a};h.prototype.convertFrom=
function(b){b=b.clone();b.red=null;return b};e.mont=function(b){return new d(b)};b(d,h);d.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};d.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};d.prototype.imul=function(b,a){if(0===b.cmpn(0)||0===a.cmpn(0))return b.words[0]=0,b.length=1,b;var d=b.imul(a),c=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=d=d.isub(c).ishrn(this.shift);0<=d.cmp(this.m)?c=d.isub(this.m):0>d.cmpn(0)&&
(c=d.iadd(this.m));return c._forceRed(this)};d.prototype.mul=function(b,a){if(0===b.cmpn(0)||0===a.cmpn(0))return(new e(0))._forceRed(this);var d=b.mul(a),c=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=d=d.isub(c).ishrn(this.shift);0<=d.cmp(this.m)?c=d.isub(this.m):0>d.cmpn(0)&&(c=d.iadd(this.m));return c._forceRed(this)};d.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof f||f,this)},{}],77:[function(a,f,e){(function(a){var e=
!1;if("undefined"!==typeof Float64Array){var c=new Float64Array(1),b=new Uint32Array(c.buffer);c[0]=1;e=!0;1072693248===b[1]?(f.exports=function(a){c[0]=a;return[b[0],b[1]]},f.exports.pack=function(a,f){b[0]=a;b[1]=f;return c[0]},f.exports.lo=function(a){c[0]=a;return b[0]},f.exports.hi=function(a){c[0]=a;return b[1]}):1072693248===b[0]?(f.exports=function(a){c[0]=a;return[b[1],b[0]]},f.exports.pack=function(a,f){b[1]=a;b[0]=f;return c[0]},f.exports.lo=function(a){c[0]=a;return b[1]},f.exports.hi=
function(a){c[0]=a;return b[0]}):e=!1}if(!e){var w=new a(8);f.exports=function(b){w.writeDoubleLE(b,0,!0);return[w.readUInt32LE(0,!0),w.readUInt32LE(4,!0)]};f.exports.pack=function(b,a){w.writeUInt32LE(b,0,!0);w.writeUInt32LE(a,4,!0);return w.readDoubleLE(0,!0)};f.exports.lo=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(0,!0)};f.exports.hi=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(4,!0)}}f.exports.sign=function(b){return f.exports.hi(b)>>>31};f.exports.exponent=function(b){return(f.exports.hi(b)<<
1>>>21)-1023};f.exports.fraction=function(b){var a=f.exports.lo(b);b=f.exports.hi(b);var c=b&1048575;b&2146435072&&(c+=1048576);return[a,c]};f.exports.denormalized=function(b){return!(f.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:33}],78:[function(a,f,e){var p=a("./lib/bn-sign");f.exports=function(a){return p(a[0])*p(a[1])}},{"./lib/bn-sign":67}],79:[function(a,f,e){var p=a("./lib/rationalize");f.exports=function(a,c){return p(a[0].mul(c[1]).sub(a[1].mul(c[0])),a[1].mul(c[1]))}},
{"./lib/rationalize":72}],80:[function(a,f,e){var p=a("./lib/bn-to-num"),m=a("./lib/ctz");f.exports=function(a){var b=a[0];a=a[1];if(0===b.cmpn(0))return 0;var f=b.divmod(a),b=p(f.div),f=f.mod;if(0===f.cmpn(0))return b;if(b){var l=m(b)+4;a=p(f.shln(l).divRound(a));0>b&&(a=-a);return b+a*Math.pow(2,-l)}b=a.bitLength()-f.bitLength()+53;a=p(f.shln(b).divRound(a));if(1023>b)return a*Math.pow(2,-b);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-b)}},{"./lib/bn-to-num":68,"./lib/ctz":69}],81:[function(a,
f,e){function p(b,a,c,f){for(var k=0,h=0,d=0,n=b.length;d<n;++d){var l=b[d],e;a:{for(e=0;e<a;++e)if(!(l[e]<=l[e+a])){e=!0;break a}e=!1}if(!e){for(e=0;e<2*a;++e)c[k++]=l[e];f[h++]=d}}return h}function m(a,c,f,e){var k=a.length,h=c.length;if(!(0>=k||0>=h)){var d=a[0].length>>>1;if(!(0>=d)){var n,v=b.mallocDouble(2*d*k),m=b.mallocInt32(k),k=p(a,d,v,m);if(0<k){if(1===d&&e)w.init(k),n=w.sweepComplete(d,f,0,k,v,m,0,k,v,m);else{a=b.mallocDouble(2*d*h);var x=b.mallocInt32(h),h=p(c,d,a,x);0<h&&(w.init(k+h),
n=1===d?w.sweepBipartite(d,f,0,k,v,m,0,h,a,x):l(d,f,e,k,v,m,h,a,x),b.free(a),b.free(x))}b.free(v);b.free(m)}return n}}}function c(b,a){x.push([b,a])}f.exports=function(b,a,f){switch(arguments.length){case 1:return x=[],m(b,b,c,!0),x;case 2:if("function"===typeof a)return m(b,b,a,!0);x=[];m(b,a,c,!1);return x;case 3:return m(b,a,f,!1);default:throw Error("box-intersect: Invalid arguments");}};var b=a("typedarray-pool"),w=a("./lib/sweep"),l=a("./lib/intersect"),x},{"./lib/intersect":83,"./lib/sweep":87,
"typedarray-pool":90}],82:[function(a,f,e){function p(a){function b(b,f){var e,k="bruteForce"+(b?"Red":"Blue")+(f?"Flip":"")+(a?"Full":"");e=["function ",k,"(",m.join(),"){","var ","es","=2*","d",";"];var h="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";b?e.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",h):e.push(h,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
a?e.push("if(y1<x0||x1<y0)continue;"):f?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;");e.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");f?e.push("yi,xi"):e.push("xi,yi");e.push(");if(rv!==void 0)return rv;}}}");e=e.join("");l.push(e);q.push("return "+k+"("+m.join()+");")}var f="bruteForce"+(a?"Full":"Partial"),l=[],e=m.slice();a||e.splice(3,0,"fp");var q=["function "+f+"("+e.join()+"){"];q.push("if(re-rs>be-bs){");
a?(b(!0,!1),q.push("}else{"),b(!1,!1)):(q.push("if(fp){"),b(!0,!0),q.push("}else{"),b(!0,!1),q.push("}}else{if(fp){"),b(!1,!0),q.push("}else{"),b(!1,!1),q.push("}"));q.push("}}return "+f);f=l.join("")+q.join("");return(new Function(f))()}var m="d ax vv rs re rb ri bs be bb bi".split(" ");e.partial=p(!1);e.full=p(!0)},{}],83:[function(a,f,e){function p(b,a,d,c,h,k,n,f,l){var e=z*b;g[e]=a;g[e+1]=d;g[e+2]=c;g[e+3]=h;g[e+4]=k;g[e+5]=n;b*=B;y[b]=f;y[b+1]=l}f.exports=function(a,f,e,E,G,H,F,I,N){var M=8*
c.log2(E+F+1)*(a+1)|0,U=c.nextPow2(z*M);g.length<U&&(m.free(g),g=m.mallocInt32(U));M=c.nextPow2(B*M);y<M&&(m.free(y),y=m.mallocDouble(M));var M=0,U=2*a,K;p(M++,0,0,E,0,F,e?16:0,-Infinity,Infinity);for(e||p(M++,0,0,F,0,E,1,-Infinity,Infinity);0<M;){--M;e=M*z;var L=g[e];F=g[e+1];var P=g[e+2],S=g[e+3],ba=g[e+4];e=g[e+5];E=M*B;var fa=y[E],ea=y[E+1],Z=e&1,O=!!(e&16),Q=G,R=H,T=I;E=N;Z&&(Q=I,R=N,T=G,E=H);if(e&2&&(P=h(a,L,F,P,Q,R,ea),F>=P))continue;if(e&4&&(F=d(a,L,F,P,Q,R,fa),F>=P))continue;e=P-F;var J=
ba-S;if(O){if(a*e*(e+J)<u){K=l.scanComplete(a,L,f,F,P,Q,R,S,ba,T,E);if(void 0!==K)return K;continue}}else if(a*Math.min(e,J)<q){K=b(a,L,f,Z,F,P,Q,R,S,ba,T,E);if(void 0!==K)return K;continue}else if(a*e*J<t){K=l.scanBipartite(a,L,f,Z,F,P,Q,R,S,ba,T,E);if(void 0!==K)return K;continue}e=r(a,L,F,P,Q,R,fa,ea);if(F<e)if(a*(e-F)<q){if(K=w(a,L+1,f,F,e,Q,R,S,ba,T,E),void 0!==K)return K}else if(L===a-2){if(K=Z?l.sweepBipartite(a,f,S,ba,T,E,F,e,Q,R):l.sweepBipartite(a,f,F,e,Q,R,S,ba,T,E),void 0!==K)return K}else p(M++,
L+1,F,e,S,ba,Z,-Infinity,Infinity),p(M++,L+1,S,ba,F,e,Z^1,-Infinity,Infinity);if(e<P)if(F=x(a,L,S,ba,T,E),K=T[U*F+L],J=k(a,L,F,ba,T,E,K),J<ba&&p(M++,L,e,P,J,ba,(Z|4)+(O?16:0),K,ea),S<F&&p(M++,L,e,P,S,F,(Z|2)+(O?16:0),fa,K),F+1===J){if(O)a:{S=a;ba=f;E=E[F];Z=2*S;F*=Z;fa=T[F+L];ea=e;e*=Z;b:for(;ea<P;++ea,e+=Z)if(O=R[ea],O!==E&&(J=Q[e+L],K=Q[e+L+S],!(fa<J||K<fa))){for(var ca=L+1;ca<S;++ca){J=Q[e+ca];K=Q[e+ca+S];var da=T[F+ca+S];if(K<T[F+ca]||da<J)continue b}O=ba(O,E);if(void 0!==O){K=O;break a}}K=void 0}else a:{S=
a;ba=f;E=E[F];fa=2*S;F*=fa;ea=T[F+L];O=e;e*=fa;b:for(;O<P;++O,e+=fa)if(J=Q[e+L],K=Q[e+L+S],!(ea<J||K<ea||Z&&ea===J)){ca=R[O];for(da=L+1;da<S;++da){J=Q[e+da];K=Q[e+da+S];var X=T[F+da+S];if(K<T[F+da]||X<J)continue b}J=Z?ba(E,ca):ba(ca,E);if(void 0!==J){K=J;break a}}K=void 0}if(void 0!==K)return K}else if(F<J)if(O){if(P=n(a,L,e,P,Q,R,K),e<P)if(S=k(a,L,e,P,Q,R,K),L===a-2){if(e<S&&(K=l.sweepComplete(a,f,e,S,Q,R,F,J,T,E),void 0!==K)||S<P&&(K=l.sweepBipartite(a,f,S,P,Q,R,F,J,T,E),void 0!==K))return K}else e<
S&&p(M++,L+1,e,S,F,J,16,-Infinity,Infinity),S<P&&(p(M++,L+1,S,P,F,J,0,-Infinity,Infinity),p(M++,L+1,F,J,S,P,1,-Infinity,Infinity))}else P=Z?v(a,L,e,P,Q,R,K):n(a,L,e,P,Q,R,K),e<P&&(L===a-2?Z?l.sweepBipartite(a,f,F,J,T,E,e,P,Q,R):l.sweepBipartite(a,f,e,P,Q,R,F,J,T,E):(p(M++,L+1,e,P,F,J,Z,-Infinity,Infinity),p(M++,L+1,F,J,e,P,Z^1,-Infinity,Infinity)))}};var m=a("typedarray-pool"),c=a("bit-twiddle");f=a("./brute");var b=f.partial,w=f.full,l=a("./sweep"),x=a("./median");a=a("./partition");var q=128,t=
4194304,u=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),k=a("lo===p0",["p0"]),h=a("lo<p0",["p0"]),d=a("hi<=p0",["p0"]),n=a("lo<=p0&&p0<=hi",["p0"]),v=a("lo<p0&&p0<=hi",["p0"]),z=6,B=2,g=m.mallocInt32(1024),y=m.mallocDouble(1024)},{"./brute":82,"./median":84,"./partition":85,"./sweep":87,"bit-twiddle":88,"typedarray-pool":90}],84:[function(a,f,e){f.exports=function(a,b,f,l,e,q){if(l<=f+1)return f;var t=f,u=l;l=l+f>>>1;for(var r=2*a,k=l,h=e[r*l+b];t<u;){if(u-t<m){for(var k=b,h=e,d=q,n=2*a,v=n*(t+
1)+k,z=t+1;z<u;++z,v+=n)for(var B=h[v],g=z,y=n*(z-1);g>t&&h[y+k]>B;--g,y-=n){for(var D=y,A=y+n,C=0;C<n;++C,++D,++A){var E=h[D];h[D]=h[A];h[A]=E}D=d[g];d[g]=d[g-1];d[g-1]=D}break}v=u-t;k=Math.random()*v+t|0;h=e[r*k+b];n=Math.random()*v+t|0;d=e[r*n+b];z=Math.random()*v+t|0;v=e[r*z+b];h<=d?v>=d?(k=n,h=d):h>=v||(k=z,h=v):d>=v?(k=n,h=d):v>=h||(k=z,h=v);d=r*(u-1);n=r*k;for(v=0;v<r;++v,++d,++n)z=e[d],e[d]=e[n],e[n]=z;d=q[u-1];q[u-1]=q[k];q[k]=d;k=p(a,b,t,u-1,e,q,h);d=r*(u-1);n=r*k;for(v=0;v<r;++v,++d,++n)z=
e[d],e[d]=e[n],e[n]=z;d=q[u-1];q[u-1]=q[k];q[k]=d;if(l<k){for(u=k-1;t<u&&e[r*(u-1)+b]===h;)--u;u+=1}else if(k<l)for(t=k+1;t<u&&e[r*t+b]===h;)t+=1;else break}return p(a,b,f,l,e,q,e[r*l+b])};var p=a("./partition")("lo<p0",["p0"]),m=8},{"./partition":85}],85:[function(a,f,e){f.exports=function(a,c){var b="abcdef".split("").concat(c),f=[];0<=a.indexOf("lo")&&f.push("lo=e[k+n]");0<=a.indexOf("hi")&&f.push("hi=e[k+o]");b.push(p.replace("_",f.join()).replace("$",a));return Function.apply(void 0,b)};var p=
"for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],86:[function(a,f,e){function p(b,a,c){for(var k=2*(b+1),h=b+1;h<=a;++h){for(var d=c[k++],n=c[k++],f=h,e=k-2;f-- >b;){var l=c[e-2],g=c[e-1];if(l<d)break;else if(l===d&&g<n)break;c[e]=l;c[e+1]=g;e-=2}c[e]=d;c[e+1]=n}}function m(b,a,c){b*=2;a*=2;var k=c[b],h=c[b+1];c[b]=c[a];c[b+1]=c[a+1];c[a]=k;c[a+1]=h}function c(b,
a,c){b*=2;a*=2;c[b]=c[a];c[b+1]=c[a+1]}function b(b,a,c,k,h){b*=2;a*=2;h[b]=h[a];h[a]=c;h[b+1]=h[a+1];h[a+1]=k}function w(b,a,c){b*=2;a*=2;var k=c[b],h=c[a];return k<h?!1:k===h?c[b+1]>c[a+1]:!0}function l(b,a,c,k){b*=2;var h=k[b];return h<a?!0:h===a?k[b+1]<c:!1}function x(a,f,e){var k=(f-a+1)/6|0,h=a+k,d=f-k,n=a+f>>1,v=n-k,z=n+k,B=h,g=v,y=n,D=z,A=d,k=a+1,C=f-1,E=0;w(B,g,e)&&(E=B,B=g,g=E);w(D,A,e)&&(E=D,D=A,A=E);w(B,y,e)&&(E=B,B=y,y=E);w(g,y,e)&&(E=g,g=y,y=E);w(B,D,e)&&(E=B,B=D,D=E);w(y,D,e)&&(E=y,
y=D,D=E);w(g,A,e)&&(E=g,g=A,A=E);w(g,y,e)&&(E=g,g=y,y=E);w(D,A,e)&&(E=D,D=A,A=E);for(var E=e[2*g],g=e[2*g+1],G=e[2*D],D=e[2*D+1],B=2*B,y=2*y,A=2*A,h=2*h,n=2*n,d=2*d,H=0;2>H;++H){var F=e[y+H],I=e[A+H];e[h+H]=e[B+H];e[n+H]=F;e[d+H]=I}c(v,a,e);c(z,f,e);for(v=k;v<=C;++v)if(l(v,E,g,e))v!==k&&m(v,k,e),++k;else if(!l(v,G,D,e))for(;;)if(l(C,G,D,e)){l(C,E,g,e)?(z=v,d=k,n=C,B=e,z*=2,d*=2,n*=2,h=B[z],y=B[z+1],B[z]=B[d],B[z+1]=B[d+1],B[d]=B[n],B[d+1]=B[n+1],B[n]=h,B[n+1]=y,++k):m(v,C,e);--C;break}else if(--C<
v)break;b(a,k-1,E,g,e);b(f,C+1,G,D,e);k-2-a<=q?p(a,k-2,e):x(a,k-2,e);f-(C+2)<=q?p(C+2,f,e):x(C+2,f,e);C-k<=q?p(k,C,e):x(k,C,e)}f.exports=function(b,a){a<=4*q?p(0,a-1,b):x(0,a-1,b)};var q=32},{}],87:[function(a,f,e){function p(b,a,c,k){k=a[k];c=b[c-1];b[k]=c;a[c]=k}f.exports={init:function(b){b=c.nextPow2(b);l.length<b&&(m.free(l),l=m.mallocInt32(b));x.length<b&&(m.free(x),x=m.mallocInt32(b));q.length<b&&(m.free(q),q=m.mallocInt32(b));t.length<b&&(m.free(t),t=m.mallocInt32(b));u.length<b&&(m.free(u),
u=m.mallocInt32(b));r.length<b&&(m.free(r),r=m.mallocInt32(b));b*=8;k.length<b&&(m.free(k),k=m.mallocDouble(b))},sweepBipartite:function(a,d,c,f,e,m,g,r,u,A){var C=0,E=2*a;--a;for(var G=E-1;c<f;++c){var H=m[c],F=E*c;k[C++]=e[F+a];k[C++]=-(H+1);k[C++]=e[F+G];k[C++]=H}for(c=g;c<r;++c)H=A[c]+w,f=E*c,k[C++]=u[f+a],k[C++]=-H,k[C++]=u[f+G],k[C++]=H;r=C>>>1;b(k,r);for(c=A=u=0;c<r;++c)if(C=k[2*c+1]|0,C>=w)C=C-w|0,p(q,t,A--,C);else if(0<=C)p(l,x,u--,C);else{if(C<=-w){C=-C-w|0;for(E=0;E<u;++E)if(f=d(l[E],C),
void 0!==f)return f;E=t;f=A++;q[f]=C}else{C=-C-1|0;for(E=0;E<A;++E)if(f=d(C,q[E]),void 0!==f)return f;E=x;f=u++;l[f]=C}E[C]=f}},sweepComplete:function(a,d,c,f,e,m,g,w,D,A){var C=0,E=2*a;--a;for(var G=E-1;c<f;++c){var H=m[c]+1<<1,F=E*c;k[C++]=e[F+a];k[C++]=-H;k[C++]=e[F+G];k[C++]=H}for(c=g;c<w;++c)H=A[c]+1<<1,f=E*c,k[C++]=D[f+a],k[C++]=-H|1,k[C++]=D[f+G],k[C++]=H|1;w=C>>>1;b(k,w);for(c=C=A=D=0;c<w;++c)if(E=k[2*c+1]|0,f=E&1,c<w-1&&E>>1===k[2*c+3]>>1&&(f=2,c+=1),0>E){E=-(E>>1)-1;for(e=0;e<C;++e)if(m=
d(u[e],E),void 0!==m)return m;if(0!==f)for(e=0;e<D;++e)if(m=d(l[e],E),void 0!==m)return m;if(1!==f)for(e=0;e<A;++e)if(m=d(q[e],E),void 0!==m)return m;0===f?(f=x,e=D++,l[e]=E,f[E]=e):1===f?(f=t,e=A++,q[e]=E,f[E]=e):2===f&&(f=r,e=C++,u[e]=E,f[E]=e)}else E=(E>>1)-1,0===f?p(l,x,D--,E):1===f?p(q,t,A--,E):2===f&&p(u,r,C--,E)},scanBipartite:function(a,d,c,f,e,m,g,r,u,A,q,t){var G=0,H=2*a,F=d+a,I=1,N=1;for(f?N=w:I=w;e<m;++e){var M=e+I,U=H*e;k[G++]=g[U+d];k[G++]=-M;k[G++]=g[U+F];k[G++]=M}for(e=u;e<A;++e)M=
e+N,m=H*e,k[G++]=q[m+d],k[G++]=-M;A=G>>>1;b(k,A);for(e=G=0;e<A;++e)if(M=k[2*e+1]|0,0>M)if(M=-M,N=!1,M>=w?(N=!f,M-=w):(N=!!f,--M),N)N=x,m=G++,l[m]=M,N[M]=m;else a:for(N=t[M],M*=H,m=q[M+d+1],u=q[M+d+1+a],F=0;F<G;++F){var U=l[F],K=H*U;if(!(u<g[K+d+1]||g[K+d+1+a]<m)){for(var L=d+2;L<a;++L)if(q[M+L+a]<g[K+L]||g[K+L+a]<q[M+L])continue a;U=r[U];U=f?c(N,U):c(U,N);if(void 0!==U)return U}}else p(l,x,G--,M-I)},scanComplete:function(a,d,c,f,e,m,g,r,u,A,q){for(var t=0,p=2*a,x=d+a;f<e;++f){var F=f+w,I=p*f;k[t++]=
m[I+d];k[t++]=-F;k[t++]=m[I+x];k[t++]=F}for(f=r;f<u;++f)F=f+1,e=p*f,k[t++]=A[e+d],k[t++]=-F;u=t>>>1;b(k,u);for(f=t=0;f<u;++f)if(e=k[2*f+1]|0,0>e)if(F=-e,F>=w)l[t++]=F-w;else a:for(--F,e=q[F],F*=p,x=A[F+d+1],I=A[F+d+1+a],r=0;r<t;++r){var N=l[r],M=g[N];if(M===e)break;N*=p;if(!(I<m[N+d+1]||m[N+d+1+a]<x)){for(var U=d+2;U<a;++U)if(A[F+U+a]<m[N+U]||m[N+U+a]<A[F+U])continue a;M=c(M,e);if(void 0!==M)return M}}else{F=e-w;for(r=t-1;0<=r;--r)if(l[r]===F){for(U=r+1;U<t;++U)l[U-1]=l[U];break}--t}}};var m=a("typedarray-pool"),
c=a("bit-twiddle"),b=a("./sort"),w=268435456,l=m.mallocInt32(1024),x=m.mallocInt32(1024),q=m.mallocInt32(1024),t=m.mallocInt32(1024),u=m.mallocInt32(1024),r=m.mallocInt32(1024),k=m.mallocDouble(8192)},{"./sort":86,"bit-twiddle":88,"typedarray-pool":90}],88:[function(a,f,e){arguments[4][75][0].apply(e,arguments)},{dup:75}],89:[function(a,f,e){function p(a,c,b){var f=a[b]|0;if(0>=f)return[];var e=Array(f),x;if(b===a.length-1)for(x=0;x<f;++x)e[x]=c;else for(x=0;x<f;++x)e[x]=p(a,c,b+1);return e}f.exports=
function(a,c){"undefined"===typeof c&&(c=0);switch(typeof a){case "number":if(0<a){var b=a|0,f=c,e,x;e=Array(b);for(x=0;x<b;++x)e[x]=f;return e}break;case "object":if("number"===typeof a.length)return p(a,c,0)}return[]}},{}],90:[function(a,f,e){(function(f,m){function c(b){if(b){var a=v.log2(b.length||b.byteLength);y[a].push(b)}}function b(b){b=v.nextPow2(b);var a=v.log2(b),a=y[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function w(a){return new Uint8Array(b(a),0,a)}function l(a){return new Uint16Array(b(2*
a),0,a)}function x(a){return new Uint32Array(b(4*a),0,a)}function q(a){return new Int8Array(b(a),0,a)}function t(a){return new Int16Array(b(2*a),0,a)}function u(a){return new Int32Array(b(4*a),0,a)}function r(a){return new Float32Array(b(4*a),0,a)}function k(a){return new Float64Array(b(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(b(a),0,a):w(a)}function d(a){return new DataView(b(a),0,a)}function n(b){b=v.nextPow2(b);var a=v.log2(b),a=D[a];return 0<a.length?a.pop():new m(b)}var v=a("bit-twiddle"),
z=a("dup");f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,g=f.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=z([32,0]));g.BUFFER||(g.BUFFER=z([32,0]));var y=g.DATA,D=g.BUFFER;e.free=function(b){if(m.isBuffer(b))D[v.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&
(b=b.buffer),b){var a=v.log2(b.length||b.byteLength)|0;y[a].push(b)}};e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(b){c(b.buffer)};e.freeArrayBuffer=c;e.freeBuffer=function(b){D[v.log2(b.length)].push(b)};e.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return b(a);switch(c){case "uint8":return w(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return q(a);
case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return k(a);case "uint8_clamped":return h(a);case "buffer":return n(a);case "data":case "dataview":return d(a);default:return null}};e.mallocArrayBuffer=b;e.mallocUint8=w;e.mallocUint16=l;e.mallocUint32=x;e.mallocInt8=q;e.mallocInt16=t;e.mallocInt32=u;e.mallocFloat32=e.mallocFloat=r;e.mallocFloat64=e.mallocDouble=k;e.mallocUint8Clamped=h;e.mallocDataView=d;e.mallocBuffer=n;e.clearCache=
function(){for(var b=0;32>b;++b)g.UINT8[b].length=0,g.UINT16[b].length=0,g.UINT32[b].length=0,g.INT8[b].length=0,g.INT16[b].length=0,g.INT32[b].length=0,g.FLOAT[b].length=0,g.DOUBLE[b].length=0,g.UINT8C[b].length=0,y[b].length=0,D[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":88,buffer:33,dup:89}],91:[function(a,f,e){function p(a,b){return a-b}f.exports=function(a,b){var f=a.length,
e=a.length-b.length;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||m(a[0],a[1])-m(b[0],b[1]);case 3:var f=a[0]+a[1],x=b[0]+b[1];if(e=f+a[2]-(x+b[2]))return e;var e=m(a[0],a[1]),q=m(b[0],b[1]);return m(e,a[2])-m(q,b[2])||m(e+a[2],f)-m(q+b[2],x);case 4:var e=a[0],f=a[1],x=a[2],q=a[3],t=b[0],u=b[1],r=b[2],k=b[3];return e+f+x+q-(t+u+r+k)||m(e,f,x,q)-m(t,u,r,k,t)||m(e+f,e+x,e+q,f+x,f+q,x+q)-m(t+u,t+r,t+k,u+r,u+k,r+k)||m(e+f+x,e+f+q,e+x+q,f+x+q)-m(t+u+
r,t+u+k,t+r+k,u+r+k);default:x=a.slice().sort(p);q=b.slice().sort(p);for(t=0;t<f;++t)if(e=x[t]-q[t])return e;return 0}};var m=Math.min},{}],92:[function(a,f,e){var p=a("double-bits"),m=Math.pow(2,-1074);f.exports=function(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-m:m;var f=p.hi(a),e=p.lo(a);b>a===0<a?4294967295===e?(f+=1,e=0):e+=1:0===e?(e=4294967295,--f):--e;return p.pack(e,f)}},{"double-bits":93}],93:[function(a,f,e){(function(a){var e=!1;if("undefined"!==typeof Float64Array){var c=
new Float64Array(1),b=new Uint32Array(c.buffer);c[0]=1;e=!0;1072693248===b[1]?(f.exports=function(a){c[0]=a;return[b[0],b[1]]},f.exports.pack=function(a,e){b[0]=a;b[1]=e;return c[0]},f.exports.lo=function(a){c[0]=a;return b[0]},f.exports.hi=function(a){c[0]=a;return b[1]}):1072693248===b[0]?(f.exports=function(a){c[0]=a;return[b[1],b[0]]},f.exports.pack=function(a,e){b[1]=a;b[0]=e;return c[0]},f.exports.lo=function(a){c[0]=a;return b[1]},f.exports.hi=function(a){c[0]=a;return b[0]}):e=!1}if(!e){var w=
new a(8);f.exports=function(b){w.writeDoubleLE(b,0,!0);return[w.readUInt32LE(0,!0),w.readUInt32LE(4,!0)]};f.exports.pack=function(b,a){w.writeUInt32LE(b,0,!0);w.writeUInt32LE(a,4,!0);return w.readDoubleLE(0,!0)};f.exports.lo=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(0,!0)};f.exports.hi=function(b){w.writeDoubleLE(b,0,!0);return w.readUInt32LE(4,!0)}}f.exports.sign=function(b){return f.exports.hi(b)>>>31};f.exports.exponent=function(b){return(f.exports.hi(b)<<1>>>21)-1023};f.exports.fraction=
function(b){var a=f.exports.lo(b);b=f.exports.hi(b);var c=b&1048575;b&2146435072&&(c+=1048576);return[a,c]};f.exports.denormalized=function(b){return!(f.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:33}],94:[function(a,f,e){var p=a("big-rat/add");f.exports=function(a,c){for(var b=a.length,e=Array(b),f=0;f<b;++f)e[f]=p(a[f],c[f]);return e}},{"big-rat/add":62}],95:[function(a,f,e){f.exports=function(a){for(var c=Array(a.length),b=0;b<a.length;++b)c[b]=p(a[b]);return c};var p=a("big-rat")},
{"big-rat":65}],96:[function(a,f,e){var p=a("big-rat"),m=a("big-rat/mul");f.exports=function(a,b){for(var e=p(b),f=a.length,x=Array(f),q=0;q<f;++q)x[q]=m(a[q],e);return x}},{"big-rat":65,"big-rat/mul":74}],97:[function(a,f,e){var p=a("big-rat/sub");f.exports=function(a,c){for(var b=a.length,e=Array(b),f=0;f<b;++f)e[f]=p(a[f],c[f]);return e}},{"big-rat/sub":79}],98:[function(a,f,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],99:[function(a,f,e){arguments[4][50][0].apply(e,arguments)},{dup:50,
"two-product":102,"two-sum":98}],100:[function(a,f,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],101:[function(a,f,e){arguments[4][52][0].apply(e,arguments)},{dup:52}],102:[function(a,f,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],103:[function(a,f,e){arguments[4][59][0].apply(e,arguments)},{dup:59,"robust-scale":99,"robust-subtract":100,"robust-sum":101,"two-product":102}],104:[function(a,f,e){f.exports=function(a,c,b,f){var e=p(a,b,f),x=p(c,b,f);if(0<e&&0<x||0>e&&0>x)return!1;var q=
p(b,a,c),t=p(f,a,c);if(0<q&&0<t||0>q&&0>t)return!1;if(0===e&&0===x&&0===q&&0===t){a:{for(e=0;2>e;++e){var x=a[e],q=c[e],t=Math.max(x,q),u=b[e],r=f[e],k=Math.min(u,r);if(Math.max(u,r)<Math.min(x,q)||t<k){a=!1;break a}}a=!0}return a}return!0};var p=a("robust-orientation")[3]},{"robust-orientation":103}],105:[function(a,f,e){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var c=0;c<a;++c)this.roots[c]=c,this.ranks[c]=0}"use restrict";f.exports=p;a=p.prototype;Object.defineProperty(a,"length",
{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var c=a,b=this.roots;b[a]!==a;)a=b[a];for(;b[c]!==a;){var e=b[c];b[c]=a;c=e}return a};a.link=function(a,c){var b=this.find(a),e=this.find(c);if(b!==e){var f=this.ranks,p=this.roots,q=f[b],t=f[e];q<t?p[b]=e:t<q?p[e]=b:(p[e]=b,++f[b])}}},{}],106:[function(a,f,e){function p(b,a){return b[0]-a[0]}function m(){var b=this.stride,a=Array(b.length),
c;for(c=0;c<a.length;++c)a[c]=[Math.abs(b[c]),c];a.sort(p);b=Array(a.length);for(c=0;c<b.length;++c)b[c]=a[c][1];return b}function c(b,a){var c=["View",a,"d",b].join("");0>a&&(c="View_Nil"+b);var k="generic"===b;if(-1===a){var h,c=new Function("function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
c+"(a){return new "+c+"(a);}");return c()}if(0===a)return c=new Function("TrivialArray","function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
c+"_get(){return "+(k?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(k?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}"),c(q[b][0]);h=["'use strict'"];var d=w(a),e=d.map(function(b){return"i"+b}),f="this.offset+"+d.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),l=d.map(function(b){return"b"+b}).join(","),p=d.map(function(b){return"c"+b}).join(",");h.push("function "+
c+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+b+"'","proto.dimension="+a);h.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+d.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===a?h.push("proto.order=[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>a?(h.push("function "+c+"_order(){"),2===a?h.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===a&&h.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):h.push("ORDER})"));h.push("proto.set=function "+c+"_set("+e.join(",")+",v){");k?h.push("return this.data.set("+f+",v)}"):h.push("return this.data["+f+"]=v}");h.push("proto.get=function "+c+"_get("+e.join(",")+"){");k?h.push("return this.data.get("+
f+")}"):h.push("return this.data["+f+"]}");h.push("proto.index=function "+c+"_index(",e.join(),"){return "+f+"}");h.push("proto.hi=function "+c+"_hi("+e.join(",")+"){return new "+c+"(this.data,"+d.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+d.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");k=d.map(function(b){return"a"+b+"=this.shape["+b+"]"});f=d.map(function(b){return"c"+b+"=this.stride["+b+"]"});h.push("proto.lo=function "+
c+"_lo("+e.join(",")+"){var b=this.offset,d=0,"+k.join(",")+","+f.join(","));for(k=0;k<a;++k)h.push("if(typeof i"+k+"==='number'&&i"+k+">=0){d=i"+k+"|0;b+=c"+k+"*d;a"+k+"-=d}");h.push("return new "+c+"(this.data,"+d.map(function(b){return"a"+b}).join(",")+","+d.map(function(b){return"c"+b}).join(",")+",b)}");h.push("proto.step=function "+c+"_step("+e.join(",")+"){var "+d.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+d.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(k=0;k<a;++k)h.push("if(typeof i"+k+"==='number'){d=i"+k+"|0;if(d<0){c+=b"+k+"*(a"+k+"-1);a"+k+"=ceil(-a"+k+"/d)}else{a"+k+"=ceil(a"+k+"/d)}b"+k+"*=d}");h.push("return new "+c+"(this.data,"+d.map(function(b){return"a"+b}).join(",")+","+d.map(function(b){return"b"+b}).join(",")+",c)}");f=Array(a);l=Array(a);for(k=0;k<a;++k)f[k]="a[i"+k+"]",l[k]="b[i"+k+"]";h.push("proto.transpose=function "+c+"_transpose("+e+"){"+e.map(function(b,a){return b+"=("+b+"===undefined?"+
a+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+f.join(",")+","+l.join(",")+",this.offset)}");h.push("proto.pick=function "+c+"_pick("+e+"){var a=[],b=[],c=this.offset");for(k=0;k<a;++k)h.push("if(typeof i"+k+"==='number'&&i"+k+">=0){c=(c+this.stride["+k+"]*i"+k+")|0}else{a.push(this.shape["+k+"]);b.push(this.stride["+k+"])}");h.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");h.push("return function construct_"+c+"(data,shape,stride,offset){return new "+
c+"(data,"+d.map(function(b){return"shape["+b+"]"}).join(",")+","+d.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",h.join("\n"));return c(q[b],m)}function b(b){if(l(b))return"buffer";if(x)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var w=a("iota-array"),l=a("is-buffer"),x="undefined"!==typeof Float64Array,q={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in q)q[b].push(c(b,-1))});f.exports=function(a,e,f,k){if(void 0===a){var h=q.array[0];return h([])}"number"===
typeof a&&(a=[a]);void 0===e&&(e=[a.length]);h=e.length;if(void 0===f){f=Array(h);for(var d=h-1,n=1;0<=d;--d)f[d]=n,n*=e[d]}if(void 0===k)for(d=k=0;d<h;++d)0>f[d]&&(k-=(e[d]-1)*f[d]);d=b(a);for(n=q[d];n.length<=h+1;)n.push(c(d,n.length-1));h=n[h+1];return h(a,e,f,k)}},{"iota-array":107,"is-buffer":108}],107:[function(a,f,e){f.exports=function(a){for(var e=Array(a),c=0;c<a;++c)e[c]=c;return e}},{}],108:[function(a,f,e){f.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===
typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],109:[function(a,f,e){f.exports=function(a,c){for(var b=p(a,c.length),e=Array(c.length),f=Array(c.length),x=[],q=0;q<c.length;++q){var t=b[q].length;f[q]=t;e[q]=!0;1>=t&&x.push(q)}for(;0<x.length;)for(t=x.pop(),e[t]=!1,t=b[t],q=0;q<t.length;++q){var u=t[q];0===--f[u]&&x.push(u)}b=Array(c.length);f=[];for(q=0;q<c.length;++q)e[q]?(t=f.length,b[q]=t,f.push(c[q])):b[q]=-1;x=[];for(q=0;q<a.length;++q)t=a[q],e[t[0]]&&e[t[1]]&&x.push([b[t[0]],
b[t[1]]]);return[x,f]};var p=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":110}],110:[function(a,f,e){f.exports=function(a,c){var b=a.length;if("number"!==typeof c){for(var e=c=0;e<b;++e){var f=a[e];c=Math.max(c,f[0],f[1])}c=(c|0)+1}c|=0;for(var x=Array(c),e=0;e<c;++e)x[e]=[];for(e=0;e<b;++e)f=a[e],x[f[0]].push(f[1]),x[f[1]].push(f[0]);for(b=0;b<c;++b)p(x[b],function(b,a){return b-a});return x};var p=a("uniq")},{uniq:129}],111:[function(a,f,e){f.exports=function(a,c){function b(b,a){var c=
t[a][b[a]];c.splice(c.indexOf(b),1)}function e(a,h,k){var f,l,g;for(l=0;2>l;++l)if(0<t[l][h].length){f=t[l][h][0];g=l;break}l=f[g^1];for(var m=0;2>m;++m)for(var u=t[m][h],r=0;r<u.length;++r){var q=u[r],w=q[m^1];0<p(c[a],c[h],c[l],c[w])&&(f=q,l=w,g=m)}if(k)return l;f&&b(f,g);return l}function f(a,h){var k=t[h][a][0],l=[a];b(k,h);for(k=k[h^1];;){for(;k!==a;)l.push(k),k=e(l[l.length-2],k,!1);if(0===t[0][a].length+t[1][a].length)break;var k=l[l.length-1],m=a,g=l[1],u=e(k,m,!0);if(0>p(c[k],c[m],c[g],c[u]))break;
l.push(a);k=e(k,m)}return l}for(var x=c.length|0,q=a.length,t=[Array(x),Array(x)],u=0;u<x;++u)t[0][u]=[],t[1][u]=[];for(u=0;u<q;++u){var r=a[u];t[0][r[0]].push(r);t[1][r[1]].push(r)}q=[];for(u=0;u<x;++u)0===t[0][u].length+t[1][u].length&&q.push([u]);for(u=0;u<x;++u)for(r=0;2>r;++r){for(var k=[];0<t[r][u].length;){var h=f(u,r);h[1]===h[h.length-1]?k.push.apply(k,h):(0<k.length&&q.push(k),k=h)}0<k.length&&q.push(k)}return q};var p=a("compare-angle")},{"compare-angle":112}],112:[function(a,f,e){function p(a,
c,e){var f=b(a[0],-c[0]);a=b(a[1],-c[1]);var m=b(e[0],-c[0]);c=b(e[1],-c[1]);f=l(w(f,m),w(a,c));return 0<=f[f.length-1]}f.exports=function(b,a,e,f){var l=m(a,e,f);if(0===l){var l=c(m(b,a,e)),k=c(m(b,a,f));return l===k?0===l&&(e=p(b,a,e),b=p(b,a,f),e!==b)?e?1:-1:0:0===k?0<l?-1:p(b,a,f)?-1:1:0===l?0<k?1:p(b,a,e)?1:-1:c(k-l)}k=m(b,a,e);return 0<k?0<l&&0<m(b,a,f)?1:-1:0>k?0<l||0<m(b,a,f)?1:-1:0<m(b,a,f)?1:p(b,a,e)?1:-1};var m=a("robust-orientation"),c=a("signum"),b=a("two-sum"),w=a("robust-product"),
l=a("robust-sum")},{"robust-orientation":126,"robust-product":114,"robust-sum":127,signum:115,"two-sum":116}],113:[function(a,f,e){arguments[4][50][0].apply(e,arguments)},{dup:50,"two-product":128,"two-sum":116}],114:[function(a,f,e){var p=a("robust-sum"),m=a("robust-scale");f.exports=function(a,b){if(1===a.length)return m(b,a[0]);if(1===b.length)return m(a,b[0]);if(0===a.length||0===b.length)return[0];var e=[0];if(a.length<b.length)for(var f=0;f<a.length;++f)e=p(e,m(b,a[f]));else for(f=0;f<b.length;++f)e=
p(e,m(a,b[f]));return e}},{"robust-scale":113,"robust-sum":127}],115:[function(a,f,e){f.exports=function(a){return 0>a?-1:0<a?1:0}},{}],116:[function(a,f,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],117:[function(a,f,e){function p(a,b,e,f,m,q){a=["function ",a,"(a,l,h,",f.join(","),"){",q?"":"var i=",e?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",m?".get(m)":"[m]"];q?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",
b,"){i=m;");e?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");q?a.push("return -1};"):a.push("return i};");return a.join("")}function m(a,b,e,f){return(new Function([p("A","x"+a+"y",b,["y"],!1,f),p("B","x"+a+"y",b,["y"],!0,f),p("P","c(x,y)"+a+"0",b,["y","c"],!1,f),p("Q","c(x,y)"+a+"0",b,["y","c"],!0,f),"function dispatchBsearch",e,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
e].join("")))()}f.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],118:[function(a,f,e){function p(b,a,c,h,k){this.mid=b;this.left=a;this.right=c;this.leftPoints=h;this.rightPoints=k;this.count=(a?a.count:0)+(c?c.count:0)+h.length}function m(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function c(b,a){var c=r(a);b.mid=c.mid;b.left=c.left;b.right=c.right;b.leftPoints=
c.leftPoints;b.rightPoints=c.rightPoints;b.count=c.count}function b(b,a){var h=b.intervals([]),k=h.indexOf(a);if(0>k)return 0;h.splice(k,1);c(b,h);return 1}function w(b,a,c){for(var h=0;h<b.length&&b[h][0]<=a;++h){var k=c(b[h]);if(k)return k}}function l(b,a,c){for(var h=b.length-1;0<=h&&b[h][1]>=a;--h){var k=c(b[h]);if(k)return k}}function x(b,a){for(var c=0;c<b.length;++c){var h=a(b[c]);if(h)return h}}function q(b,a){return b-a}function t(b,a){var c=b[0]-a[0];return c?c:b[1]-a[1]}function u(b,a){var c=
b[1]-a[1];return c?c:b[0]-a[0]}function r(b){if(0===b.length)return null;for(var a=[],c=0;c<b.length;++c)a.push(b[c][0],b[c][1]);a.sort(q);for(var a=a[a.length>>1],h=[],k=[],g=[],c=0;c<b.length;++c){var e=b[c];e[1]<a?h.push(e):a<e[0]?k.push(e):g.push(e)}b=g.slice();g.sort(t);b.sort(u);return new p(a,r(h),r(k),g,b)}function k(b){this.root=b}var h=a("binary-search-bounds");f.exports=function(b){return b&&0!==b.length?new k(r(b)):new k(null)};a=p.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);
this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);return b};a.insert=function(b){var a=this.count-this.leftPoints.length;this.count+=1;if(b[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),c(this,a)):this.left.insert(b):this.left=r([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),c(this,a)):this.right.insert(b):this.right=r([b]);else{var a=h.ge(this.leftPoints,b,t),k=h.ge(this.rightPoints,b,
u);this.leftPoints.splice(a,0,b);this.rightPoints.splice(k,0,b)}};a.remove=function(a){var c=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(c-1))return b(this,a);c=this.left.remove(a);if(2===c)return this.left=null,--this.count,1;1===c&&--this.count;return c}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(c-1))return b(this,a);c=this.right.remove(a);if(2===c)return this.right=null,--this.count,1;1===c&&--this.count;
return c}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var k=this.left;k.right;)a=k,k=k.right;if(a===this)k.right=this.right;else{var e=this.left,c=this.right;a.count-=k.count;a.right=k.left;k.left=e;k.right=c}m(this,k);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?m(this,this.left):m(this,this.right);return 1}for(e=h.ge(this.leftPoints,
a,t);e<this.leftPoints.length&&this.leftPoints[e][0]===a[0];++e)if(this.leftPoints[e]===a)for(--this.count,this.leftPoints.splice(e,1),c=h.ge(this.rightPoints,a,u);c<this.rightPoints.length&&this.rightPoints[c][1]===a[1];++c)if(this.rightPoints[c]===a)return this.rightPoints.splice(c,1),1;return 0};a.queryPoint=function(b,a){if(b<this.mid){if(this.left){var c=this.left.queryPoint(b,a);if(c)return c}return w(this.leftPoints,b,a)}return b>this.mid?this.right&&(c=this.right.queryPoint(b,a))?c:l(this.rightPoints,
b,a):x(this.leftPoints,a)};a.queryInterval=function(b,a,c){if(b<this.mid&&this.left){var h=this.left.queryInterval(b,a,c);if(h)return h}return a>this.mid&&this.right&&(h=this.right.queryInterval(b,a,c))?h:a<this.mid?w(this.leftPoints,a,c):b>this.mid?l(this.rightPoints,b,c):x(this.leftPoints,c)};a=k.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new p(b[0],null,null,[b],[b])};a.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=
function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,a,c){if(b<=a&&this.root)return this.root.queryInterval(b,a,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":117}],119:[function(a,f,e){function p(a,b){var e,f;if(b[0][0]<b[1][0])e=b[0],f=b[1];else if(b[0][0]>b[1][0])e=b[1],f=b[0];else{e=Math.min(a[0][1],
a[1][1]);f=Math.max(a[0][1],a[1][1]);var p=Math.min(b[0][1],b[1][1]),q=Math.max(b[0][1],b[1][1]);return f<p?f-p:e>q?e-q:f-q}a[0][1]<a[1][1]?(q=a[0],p=a[1]):(q=a[1],p=a[0]);return(q=m(f,e,q))?q:(q=m(f,e,p))?q:p-f}f.exports=function(a,b){var e,f;if(b[0][0]<b[1][0])e=b[0],f=b[1];else if(b[0][0]>b[1][0])e=b[1],f=b[0];else return p(b,a);var x,q;if(a[0][0]<a[1][0])x=a[0],q=a[1];else if(a[0][0]>a[1][0])x=a[1],q=a[0];else return-p(a,b);var t=m(e,f,q),u=m(e,f,x);if(0>t){if(0>=u)return t}else if(0<t){if(0<=
u)return t}else if(u)return u;t=m(q,x,f);u=m(q,x,e);if(0>t){if(0>=u)return t}else if(0<t){if(0<=u)return t}else if(u)return u;return f[0]-q[0]};var m=a("robust-orientation")},{"robust-orientation":126}],120:[function(a,f,e){function p(b,a,c,e,f,l){this._color=b;this.key=a;this.value=c;this.left=e;this.right=f;this._count=l}function m(b){return new p(b._color,b.key,b.value,b.left,b.right,b._count)}function c(b,a){return new p(b,a.key,a.value,a.left,a.right,a._count)}function b(b){b._count=1+(b.left?
b.left._count:0)+(b.right?b.right._count:0)}function w(b,a){this._compare=b;this.root=a}function l(b,a){if(a.left){var c=l(b,a.left);if(c)return c}if(c=b(a.key,a.value))return c;if(a.right)return l(b,a.right)}function x(b,a,c,e){if(0>=a(b,e.key)){if(e.left){var f=x(b,a,c,e.left);if(f)return f}if(f=c(e.key,e.value))return f}if(e.right)return x(b,a,c,e.right)}function q(b,a,c,e,f){var l=c(b,f.key),m=c(a,f.key);if(0>=l&&(f.left&&(l=q(b,a,c,e,f.left))||0<m&&(l=e(f.key,f.value))))return l;if(0<m&&f.right)return q(b,
a,c,e,f.right)}function t(b,a){this.tree=b;this._stack=a}function u(b,a){b.key=a.key;b.value=a.value;b.left=a.left;b.right=a.right;b._color=a._color;b._count=a._count}function r(b,a){return b<a?-1:b>a?1:0}f.exports=function(b){return new w(b||r,null)};a=w.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(a,c){b.push(a)});return b}});Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(a,c){b.push(c)});return b}});Object.defineProperty(a,
"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,h){for(var d=this._compare,e=this.root,f=[],l=[];e;){var m=d(a,e.key);f.push(e);l.push(m);e=0>=m?e.left:e.right}f.push(new p(0,a,h,null,null,1));for(m=f.length-2;0<=m;--m)e=f[m],f[m]=0>=l[m]?new p(e._color,e.key,e.value,f[m+1],e.right,e._count+1):new p(e._color,e.key,e.value,e.left,f[m+1],e._count+1);for(m=f.length-1;1<m;--m){l=f[m-1];e=f[m];if(1===l._color||1===e._color)break;var g=f[m-2];if(g.left===l)if(l.left===
e){var u=g.right;if(u&&0===u._color)l._color=1,g.right=c(1,u),g._color=0,--m;else{g._color=0;g.left=l.right;l._color=1;l.right=g;f[m-2]=l;f[m-1]=e;b(g);b(l);3<=m&&(m=f[m-3],m.left===g?m.left=l:m.right=l);break}}else if((u=g.right)&&0===u._color)l._color=1,g.right=c(1,u),g._color=0,--m;else{l.right=e.left;g._color=0;g.left=e.right;e._color=1;e.left=l;e.right=g;f[m-2]=e;f[m-1]=l;b(g);b(l);b(e);3<=m&&(m=f[m-3],m.left===g?m.left=e:m.right=e);break}else if(l.right===e)if((u=g.left)&&0===u._color)l._color=
1,g.left=c(1,u),g._color=0,--m;else{g._color=0;g.right=l.left;l._color=1;l.left=g;f[m-2]=l;f[m-1]=e;b(g);b(l);3<=m&&(m=f[m-3],m.right===g?m.right=l:m.left=l);break}else if((u=g.left)&&0===u._color)l._color=1,g.left=c(1,u),g._color=0,--m;else{l.left=e.right;g._color=0;g.right=e.left;e._color=1;e.right=l;e.left=g;f[m-2]=e;f[m-1]=l;b(g);b(l);b(e);3<=m&&(m=f[m-3],m.right===g?m.right=e:m.left=e);break}}f[0]._color=1;return new w(d,f[0])};a.forEach=function(b,a,c){if(this.root)switch(arguments.length){case 1:return l(b,
this.root);case 2:return x(a,this._compare,b,this.root);case 3:if(!(0<=this._compare(a,c)))return q(a,c,this._compare,b,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.left;return new t(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.right;return new t(this,b)}});a.at=function(b){if(0>b)return new t(this,[]);for(var a=this.root,c=[];;){c.push(a);if(a.left){if(b<a.left._count){a=a.left;continue}b-=
a.left._count}if(!b)return new t(this,c);--b;if(a.right){if(b>=a.right._count)break;a=a.right}else break}return new t(this,[])};a.ge=function(b){for(var a=this._compare,c=this.root,e=[],f=0;c;){var l=a(b,c.key);e.push(c);0>=l&&(f=e.length);c=0>=l?c.left:c.right}e.length=f;return new t(this,e)};a.gt=function(b){for(var a=this._compare,c=this.root,e=[],f=0;c;){var l=a(b,c.key);e.push(c);0>l&&(f=e.length);c=0>l?c.left:c.right}e.length=f;return new t(this,e)};a.lt=function(b){for(var a=this._compare,
c=this.root,e=[],f=0;c;){var l=a(b,c.key);e.push(c);0<l&&(f=e.length);c=0>=l?c.left:c.right}e.length=f;return new t(this,e)};a.le=function(b){for(var a=this._compare,c=this.root,e=[],f=0;c;){var l=a(b,c.key);e.push(c);0<=l&&(f=e.length);c=0>l?c.left:c.right}e.length=f;return new t(this,e)};a.find=function(b){for(var a=this._compare,c=this.root,e=[];c;){var f=a(b,c.key);e.push(c);if(0===f)return new t(this,e);c=0>=f?c.left:c.right}return new t(this,[])};a.remove=function(b){return(b=this.find(b))?
b.remove():this};a.get=function(b){for(var a=this._compare,c=this.root;c;){var e=a(b,c.key);if(0===e)return c.value;c=0>=e?c.left:c.right}};a=t.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new t(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var h=
Array(a.length),d=a[a.length-1];h[h.length-1]=new p(d._color,d.key,d.value,d.left,d.right,d._count);for(var e=a.length-2;0<=e;--e)d=a[e],h[e]=d.left===a[e+1]?new p(d._color,d.key,d.value,h[e+1],d.right,d._count):new p(d._color,d.key,d.value,d.left,h[e+1],d._count);d=h[h.length-1];if(d.left&&d.right){a=h.length;for(d=d.left;d.right;)h.push(d),d=d.right;e=h[a-1];h.push(new p(d._color,e.key,e.value,d.left,d.right,d._count));h[a-1].key=d.key;h[a-1].value=d.value;for(e=h.length-2;e>=a;--e)d=h[e],h[e]=
new p(d._color,d.key,d.value,d.left,h[e+1],d._count);h[a-1].left=h[a]}d=h[h.length-1];if(0===d._color)for(e=h[h.length-2],e.left===d?e.left=null:e.right===d&&(e.right=null),h.pop(),e=0;e<h.length;++e)h[e]._count--;else if(d.left||d.right)for(d.left?u(d,d.left):d.right&&u(d,d.right),d._color=1,e=0;e<h.length-1;++e)h[e]._count--;else{if(1===h.length)return new w(this.tree._compare,null);for(e=0;e<h.length;++e)h[e]._count--;for(var e=h[h.length-2],f,l,r,g=h.length-1;0<=g;--g){a=h[g];if(0===g){a._color=
1;break}f=h[g-1];if(f.left===a){l=f.right;if(l.right&&0===l.right._color){l=f.right=m(l);r=l.right=m(l.right);f.right=l.left;l.left=f;l.right=r;l._color=f._color;a._color=1;f._color=1;r._color=1;b(f);b(l);if(1<g){var q=h[g-2];q.left===f?q.left=l:q.right=l}h[g-1]=l;break}else if(l.left&&0===l.left._color){l=f.right=m(l);r=l.left=m(l.left);f.right=r.left;l.left=r.right;r.left=f;r.right=l;r._color=f._color;f._color=1;l._color=1;a._color=1;b(f);b(l);b(r);1<g&&(q=h[g-2],q.left===f?q.left=r:q.right=r);
h[g-1]=r;break}if(1===l._color)if(0===f._color){f._color=1;f.right=c(0,l);break}else f.right=c(0,l);else l=m(l),f.right=l.left,l.left=f,l._color=f._color,f._color=0,b(f),b(l),1<g&&(q=h[g-2],q.left===f?q.left=l:q.right=l),h[g-1]=l,h[g]=f,g+1<h.length?h[g+1]=a:h.push(a),g+=2}else{l=f.left;if(l.left&&0===l.left._color){l=f.left=m(l);r=l.left=m(l.left);f.left=l.right;l.right=f;l.left=r;l._color=f._color;a._color=1;f._color=1;r._color=1;b(f);b(l);1<g&&(q=h[g-2],q.right===f?q.right=l:q.left=l);h[g-1]=l;
break}else if(l.right&&0===l.right._color){l=f.left=m(l);r=l.right=m(l.right);f.left=r.right;l.right=r.left;r.right=f;r.left=l;r._color=f._color;f._color=1;l._color=1;a._color=1;b(f);b(l);b(r);1<g&&(q=h[g-2],q.right===f?q.right=r:q.left=r);h[g-1]=r;break}if(1===l._color)if(0===f._color){f._color=1;f.left=c(0,l);break}else f.left=c(0,l);else l=m(l),f.left=l.right,l.right=f,l._color=f._color,f._color=0,b(f),b(l),1<g&&(q=h[g-2],q.right===f?q.right=l:q.left=l),h[g-1]=l,h[g]=f,g+1<h.length?h[g+1]=a:h.push(a),
g+=2}}e.left===d?e.left=null:e.right=null}return new w(this.tree._compare,h[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=0,a=this._stack;if(0===a.length)return(b=this.tree.root)?b._count:0;a[a.length-1].left&&(b=a[a.length-
1].left._count);for(var c=a.length-2;0<=c;--c)a[c+1]===a[c].right&&(++b,a[c].left&&(b+=a[c].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.right)for(a=a.right;a;)b.push(a),a=a.left;else for(b.pop();0<b.length&&b[b.length-1].right===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].left===
b[a])return!0;return!1}});a.update=function(b){var a=this._stack;if(0===a.length)throw Error("Can't update empty node!");var c=Array(a.length),e=a[a.length-1];c[c.length-1]=new p(e._color,e.key,b,e.left,e.right,e._count);for(b=a.length-2;0<=b;--b)e=a[b],c[b]=e.left===a[b+1]?new p(e._color,e.key,e.value,c[b+1],e.right,e._count):new p(e._color,e.key,e.value,e.left,c[b+1],e._count);return new w(this.tree._compare,c[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.left)for(a=
a.left;a;)b.push(a),a=a.right;else for(b.pop();0<b.length&&b[b.length-1].left===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].right===b[a])return!0;return!1}})},{}],121:[function(a,f,e){function p(b,a,c){this.slabs=b;this.coordinates=a;this.horizontal=c}function m(b,a){return b.y-a}function c(b,a){for(var e=null;b;){var f=b.key,d,l;f[0][0]<f[1][0]?(d=f[0],
l=f[1]):(d=f[1],l=f[0]);d=q(d,l,a);if(0>d)b=b.left;else if(0<d)if(a[0]!==f[1][0])e=b,b=b.right;else{if(f=c(b.right,a))return f;b=b.left}else{if(a[0]!==f[1][0])return b;if(f=c(b.right,a))return f;b=b.left}}return e}function b(b,a,c,e){this.y=b;this.index=a;this.start=c;this.closed=e}function w(b,a,c,e){this.x=b;this.segment=a;this.create=c;this.index=e}f.exports=function(a){for(var c=a.length,e=2*c,f=Array(e),d=0;d<c;++d){var l=a[d],m=l[0][0]<l[1][0];f[2*d]=new w(l[0][0],l,m,d);f[2*d+1]=new w(l[1][0],
l,!m,d)}f.sort(function(b,a){var c=b.x-a.x;return c?c:(c=b.create-a.create)?c:Math.min(b.segment[0][1],b.segment[1][1])-Math.min(a.segment[0][1],a.segment[1][1])});a=x(t);c=[];l=[];m=[];for(d=0;d<e;){for(var q=f[d].x,B=[];d<e;){var g=f[d];if(g.x!==q)break;d+=1;g.segment[0][0]===g.x&&g.segment[1][0]===g.x?g.create&&(g.segment[0][1]<g.segment[1][1]?(B.push(new b(g.segment[0][1],g.index,!0,!0)),B.push(new b(g.segment[1][1],g.index,!1,!1))):(B.push(new b(g.segment[1][1],g.index,!0,!1)),B.push(new b(g.segment[0][1],
g.index,!1,!0)))):a=g.create?a.insert(g.segment,g.index):a.remove(g.segment)}c.push(a.root);l.push(q);m.push(B)}return new p(c,l,m)};var l=a("binary-search-bounds"),x=a("functional-red-black-tree"),q=a("robust-orientation"),t=a("./lib/order-segments");p.prototype.castUp=function(b){var a=l.le(this.coordinates,b[0]);if(0>a)return-1;var e=c(this.slabs[a],b),f=-1;e&&(f=e.value);if(this.coordinates[a]===b[0]){var d=null;e&&(d=e.key);0<a&&(e=c(this.slabs[a-1],b))&&(d?0<t(e.key,d)&&(d=e.key,f=e.value):
(f=e.value,d=e.key));e=this.horizontal[a];if(0<e.length){var n=l.ge(e,b[1],m);if(n<e.length){a=e[n];if(b[1]===a.y){if(a.closed)return a.index;for(;n<e.length-1&&e[n+1].y===b[1];)if(n+=1,a=e[n],a.closed)return a.index;if(a.y===b[1]&&!a.start){n+=1;if(n>=e.length)return f;a=e[n]}}a.start?d?(b=q(d[0],d[1],[b[0],a.y]),d[0][0]>d[1][0]&&(b=-b),0<b&&(f=a.index)):f=a.index:a.y!==b[1]&&(f=a.index)}}}return f}},{"./lib/order-segments":119,"binary-search-bounds":117,"functional-red-black-tree":120,"robust-orientation":126}],
122:[function(a,f,e){function p(){return!0}function m(b){return function(a,c){var e=b[a];return e?!!e.queryPoint(c,p):!1}}function c(b){for(var a={},c=0;c<b.length;++c){var e=b[c],f=e[0][0],l=e[0][1],e=e[1][1],l=[Math.min(l,e),Math.max(l,e)];f in a?a[f].push(l):a[f]=[l]}b={};f=Object.keys(a);for(c=0;c<f.length;++c)b[f[c]]=u(a[f[c]]);return m(b)}function b(b,a){return function(c){var e=r.le(a,c[0]);if(0>e)return 1;var f=b[e];if(!f)if(0<e&&a[e]===c[0])f=b[e-1];else return 1;for(e=1;f;){var l=f.key,
m=q(c,l[0],l[1]);if(l[0][0]<l[1][0])if(0>m)f=f.left;else if(0<m)e=-1,f=f.right;else return 0;else if(0<m)f=f.left;else if(0>m)e=1,f=f.right;else return 0}return e}}function w(b){return 1}function l(b){return function(a){return b(a[0],a[1])?0:1}}function x(b,a){return function(c){return b(c[0],c[1])?0:a(c)}}f.exports=function(a){for(var e=a.length,d=[],f=[],m=0;m<e;++m)for(var r=a[m],u=r.length,g=u-1,q=0;q<u;g=q++){var g=r[g],p=r[q];g[0]===p[0]?f.push([g,p]):d.push([g,p])}if(0===d.length)return 0===
f.length?w:l(c(f));a=t(d);a=b(a.slabs,a.coordinates);return 0===f.length?a:x(c(f),a)};var q=a("robust-orientation")[3],t=a("slab-decomposition"),u=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":117,"interval-tree-1d":118,"robust-orientation":126,"slab-decomposition":121}],123:[function(a,f,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],124:[function(a,f,e){arguments[4][50][0].apply(e,arguments)},{dup:50,"two-product":128,"two-sum":123}],125:[function(a,f,e){arguments[4][51][0].apply(e,
arguments)},{dup:51}],126:[function(a,f,e){arguments[4][59][0].apply(e,arguments)},{dup:59,"robust-scale":124,"robust-subtract":125,"robust-sum":127,"two-product":128}],127:[function(a,f,e){arguments[4][52][0].apply(e,arguments)},{dup:52}],128:[function(a,f,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],129:[function(a,f,e){f.exports=function(a,e,c){if(0===a.length)return a;if(e){c||a.sort(e);c=1;for(var b=a.length,f=a[0],l=a[0],x=1;x<b;++x)l=f,f=a[x],e(f,l)&&(x===c?c++:a[c++]=f);a.length=c;
return a}c||a.sort();e=1;c=a.length;b=a[0];f=a[0];for(l=1;l<c;++l)f=b,b=a[l],b!==f&&(l===e?e++:a[e++]=b);a.length=e;return a}},{}],130:[function(a,f,e){function p(b,a){for(var c=Array(b),e=0;e<b;++e)c[e]=a;return c}function m(b){for(var a=Array(b),c=0;c<b;++c)a[c]=[];return a}f.exports=function(a,e){function f(b){for(var a=b.length,c=0;c<a;++c)if(!F[b[c]])return!1;return!0}var h=t(a,e);a=h[0];e=h[1];for(var d=e.length,n=c(a,e.length),v=0;v<d;++v)if(1===n[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
for(var n=b(a,e),n=n.filter(function(b){for(var a=b.length,c=[0],d=0;d<a;++d)var f=e[b[d]],g=e[b[(d+1)%a]],h=l(-f[0],f[1]),k=l(-f[0],g[1]),f=l(g[0],f[1]),g=l(g[0],g[1]),c=x(c,x(x(h,k),x(f,g)));return 0<c[c.length-1]}),h=n.length,z=Array(h),B=Array(h),v=0;v<h;++v){z[v]=v;var g=Array(h),y=n[v].map(function(b){return e[b]}),D=w([y]),A=0,C=0;a:for(;C<h;++C)if(g[C]=0,v!==C){for(var y=n[C],E=y.length,G=0;G<E;++G){var H=D(e[y[G]]);if(0!==H){0>H&&(g[C]=1,A+=1);continue a}}g[C]=1;A+=1}B[v]=[A,v,g]}B.sort(function(b,
a){return a[0]-b[0]});for(v=0;v<h;++v)for(g=B[v],y=g[1],E=g[2],C=0;C<h;++C)E[C]&&(z[C]=y);B=m(h);for(v=0;v<h;++v)B[v].push(z[v]),B[z[v]].push(v);for(var g={},F=p(d,!1),v=0;v<h;++v)for(y=n[v],E=y.length,C=0;C<E;++C)d=y[C],D=y[(C+1)%E],A=Math.min(d,D)+":"+Math.max(d,D),A in g?(A=g[A],B[A].push(v),B[v].push(A),F[d]=F[D]=!0):g[A]=v;C=[];d=p(h,-1);for(v=0;v<h;++v)z[v]!==v||f(n[v])?d[v]=-1:(C.push(v),d[v]=0);for(h=[];0<C.length;){v=C.pop();z=B[v];q(z,function(b,a){return b-a});var E=z.length,g=d[v],I;0===
g&&(y=n[v],I=[y]);for(v=0;v<E;++v)y=z[v],0<=d[y]||(d[y]=g^1,C.push(y),0===g&&(y=n[y],f(y)||(y.reverse(),I.push(y))));0===g&&h.push(I)}return h};var c=a("edges-to-adjacency-list"),b=a("planar-dual"),w=a("point-in-big-polygon"),l=a("two-product"),x=a("robust-sum"),q=a("uniq"),t=a("./lib/trim-leaves")},{"./lib/trim-leaves":109,"edges-to-adjacency-list":110,"planar-dual":111,"point-in-big-polygon":122,"robust-sum":127,"two-product":128,uniq:129}],131:[function(a,f,e){arguments[4][49][0].apply(e,arguments)},
{dup:49}],132:[function(a,f,e){arguments[4][50][0].apply(e,arguments)},{dup:50,"two-product":135,"two-sum":131}],133:[function(a,f,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],134:[function(a,f,e){arguments[4][52][0].apply(e,arguments)},{dup:52}],135:[function(a,f,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],136:[function(a,f,e){arguments[4][59][0].apply(e,arguments)},{dup:59,"robust-scale":132,"robust-subtract":133,"robust-sum":134,"two-product":135}],137:[function(a,f,e){arguments[4][75][0].apply(e,
arguments)},{dup:75}],138:[function(a,f,e){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var c=0;c<a;++c)this.roots[c]=c,this.ranks[c]=0}"use restrict";f.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};p.prototype.find=function(a){for(var c=this.roots;c[a]!==a;){var b=c[a];c[a]=c[b];a=b}return a};p.prototype.link=function(a,c){var b=this.find(a),e=this.find(c);if(b!==
e){var f=this.ranks,p=this.roots,q=f[b],t=f[e];q<t?p[b]=e:t<q?p[e]=b:(p[e]=b,++f[b])}}},{}],139:[function(a,f,e){function p(b,a){var c=b.length,e=b.length-a.length,d=Math.min;if(e)return e;switch(c){case 0:return 0;case 1:return b[0]-a[0];case 2:return(c=b[0]+b[1]-a[0]-a[1])?c:d(b[0],b[1])-d(a[0],a[1]);case 3:var e=b[0]+b[1],f=a[0]+a[1];if(c=e+b[2]-(f+a[2]))return c;var l=d(b[0],b[1]),m=d(a[0],a[1]);return(c=d(l,b[2])-d(m,a[2]))?c:d(l+b[2],e)-d(m+a[2],f);default:d=b.slice(0);d.sort();f=a.slice(0);
f.sort();for(l=0;l<c;++l)if(e=d[l]-f[l])return e;return 0}}function m(b,a){return p(b[0],a[0])}function c(b,a){if(a){for(var c=b.length,e=Array(c),d=0;d<c;++d)e[d]=[b[d],a[d]];e.sort(m);for(d=0;d<c;++d)b[d]=e[d][0],a[d]=e[d][1]}else b.sort(p);return b}function b(b){if(0===b.length)return[];for(var a=1,c=b.length,e=1;e<c;++e){var d=b[e];p(d,b[e-1])&&(e===a?a++:b[a++]=d)}b.length=a;return b}function w(b,a){for(var c=0,e=b.length-1,d=-1;c<=e;){var f=c+e>>1,l=p(b[f],a);0>=l?(0===l&&(d=f),c=f+1):0<l&&
(e=f-1)}return d}function l(b,a){for(var c=Array(b.length),e=0,d=c.length;e<d;++e)c[e]=[];for(var d=[],e=0,f=a.length;e<f;++e)for(var l=a[e],m=l.length,t=1,g=1<<m;t<g;++t){d.length=q.popCount(t);for(var x=0,D=0;D<m;++D)t&1<<D&&(d[x++]=l[D]);x=w(b,d);if(!(0>x))for(;!(c[x++].push(e),x>=b.length||0!==p(b[x],d)););}return c}function x(b,a){if(0>a)return[];for(var e=[],f=(1<<a+1)-1,d=0;d<b.length;++d)for(var l=b[d],m=f;m<1<<l.length;m=q.nextCombination(m)){for(var p=Array(a+1),t=0,g=0;g<l.length;++g)m&
1<<g&&(p[t++]=l[g]);e.push(p)}return c(e)}"use restrict";var q=a("bit-twiddle"),t=a("union-find");e.dimension=function(b){for(var a=0,c=Math.max,e=0,d=b.length;e<d;++e)a=c(a,b[e].length);return a-1};e.countVertices=function(b){for(var a=-1,c=Math.max,e=0,d=b.length;e<d;++e)for(var f=b[e],l=0,m=f.length;l<m;++l)a=c(a,f[l]);return a+1};e.cloneCells=function(b){for(var a=Array(b.length),c=0,e=b.length;c<e;++c)a[c]=b[c].slice(0);return a};e.compareCells=p;e.normalize=c;e.unique=b;e.findCell=w;e.incidence=
l;e.dual=function(a,c){if(!c)return l(b(x(a,0)),a,0);for(var e=Array(c),f=0;f<c;++f)e[f]=[];for(var f=0,d=a.length;f<d;++f)for(var m=a[f],q=0,p=m.length;q<p;++q)e[m[q]].push(f);return e};e.explode=function(b){for(var a=[],e=0,f=b.length;e<f;++e)for(var d=b[e],l=d.length|0,m=1,q=1<<l;m<q;++m){for(var p=[],g=0;g<l;++g)m>>>g&1&&p.push(d[g]);a.push(p)}return c(a)};e.skeleton=x;e.boundary=function(b){for(var a=[],e=0,f=b.length;e<f;++e)for(var d=b[e],l=0,m=d.length;l<m;++l){for(var q=Array(d.length-1),
p=0,g=0;p<m;++p)p!==l&&(q[g++]=d[p]);a.push(q)}return c(a)};e.connectedComponents=function(a,e){if(e){for(var f=new t(e),h=0;h<a.length;++h)for(var d=a[h],l=0;l<d.length;++l)for(var m=l+1;m<d.length;++m)f.link(d[l],d[m]);d=[];l=f.ranks;for(h=0;h<l.length;++h)l[h]=-1;for(h=0;h<a.length;++h)m=f.find(a[h][0]),0>l[m]?(l[m]=d.length,d.push([a[h].slice(0)])):d[l[m]].push(a[h].slice(0));return d}f=b(c(x(a,0)));h=new t(f.length);for(d=0;d<a.length;++d)for(l=a[d],m=0;m<l.length;++m)for(var q=w(f,[l[m]]),p=
m+1;p<l.length;++p)h.link(q,w(f,[l[p]]));l=[];m=h.ranks;for(d=0;d<m.length;++d)m[d]=-1;for(d=0;d<a.length;++d)q=h.find(w(f,[a[d][0]])),0>m[q]?(m[q]=l.length,l.push([a[d].slice(0)])):l[m[q]].push(a[d].slice(0));return l}},{"bit-twiddle":137,"union-find":138}],140:[function(a,f,e){f.exports=function(a,b,e){function f(a){if(g[a])return Infinity;var c=v[a],d=z[a];if(0>c||0>d)return Infinity;c=b[c];d=b[d];return Math.abs(p(b[a],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2))}function x(b,
a){var c=C[b],d=C[a];C[b]=d;C[a]=c;E[c]=a;E[d]=b}function q(b){for(var a=B[C[b]];;){var c=a,d=2*b+1,e=2*(b+1),f=b;if(d<G){var g=B[C[d]];g<c&&(f=d,c=g)}e<G&&B[C[e]]<c&&(f=e);if(f===b)return b;x(b,f);b=f}}function t(b){for(var a=B[C[b]];0<b;){var c;c=b&1?b-1>>1:(b>>1)-1;if(0<=c&&a<B[C[c]])x(b,c),b=c;else return b}}function u(){if(0<G){var b=C[0];x(0,G-1);--G;q(0);return b}return-1}function r(b,a){var c=C[b];if(B[c]===a)return b;B[c]=-Infinity;t(b);u();B[c]=a;G+=1;return t(G-1)}function k(b){if(!g[b]){g[b]=
!0;var a=v[b];b=z[b];0<=v[b]&&(v[b]=a);0<=z[a]&&(z[a]=b);0<=E[a]&&r(E[a],f(a));0<=E[b]&&r(E[b],f(b))}}function h(b,a){if(0>b[a])return a;var c=a,d=a;do{var e=b[d];if(!g[d]||0>e||e===d)break;d=e;e=b[d];if(!g[d]||0>e||e===d)break;d=e;c=b[c]}while(c!==d);for(c=a;c!==d;c=b[c])b[c]=d;return d}for(var d=b.length,n=a.length,v=Array(d),z=Array(d),B=Array(d),g=Array(d),y=0;y<d;++y)v[y]=z[y]=-1,B[y]=Infinity,g[y]=!1;for(y=0;y<n;++y){var D=a[y];if(2!==D.length)throw Error("Input must be a graph");var A=D[1],
D=D[0];z[D]=-1!==z[D]?-2:A;v[A]=-1!==v[A]?-2:D}for(var C=[],E=Array(d),y=0;y<d;++y)Infinity>(B[y]=f(y))?(E[y]=C.length,C.push(y)):E[y]=-1;for(var G=C.length,y=G>>1;0<=y;--y)q(y);for(;;){y=u();if(0>y||B[y]>e)break;k(y)}e=[];for(y=0;y<d;++y)g[y]||(E[y]=e.length,e.push(b[y].slice()));var H=[];a.forEach(function(b){var a=h(v,b[0]);b=h(z,b[1]);0<=a&&0<=b&&a!==b&&(a=E[a],b=E[b],a!==b&&H.push([a,b]))});m.unique(m.normalize(H));return{positions:e,edges:H}};var p=a("robust-orientation"),m=a("simplicial-complex")},
{"robust-orientation":136,"simplicial-complex":139}],141:[function(a,f,e){function p(b,a,c){for(var e=0,d=0;d<b;++d)a&1<<d&&(e|=1<<c[d]);return e}function m(a,e,f,h,d,m){function v(b,a){C.push("for(","i"+d[b],"=",a,";","i"+d[b],"<","s"+d[b],";","++","i"+d[b],"){")}function z(b){for(var a=0;a<y;++a)C.push("p"+a,"+=","u"+a+"_"+d[b],";");C.push("}")}function B(){for(var b=1;b<1<<D;++b)C.push(t,"=","e"+b,";","e"+b,"=","y"+b,";","y"+b,"=",t,";")}function g(a,c){if(0>a){for(var e=0;e<y;++e)m[e]?C.push("c"+
e+"_0","=","d"+e,".get(","p"+e,");"):C.push("c"+e+"_0","=","d"+e,"[","p"+e,"];");for(var f=[],e=0;e<y;++e)f.push("c"+e+"_0");for(e=0;e<h;++e)f.push("x"+e);C.push("b0","=",w,"[",q,"]=phase(",f.join(),");");for(f=1;f<1<<D;++f)C.push("b"+f,"=",w,"[",q,"+","e"+f,"];");e=[];for(f=1;f<1<<D;++f)e.push("(b0!==b"+f+")");C.push("if(",e.join("||"),"){");for(var k=[],e=0;e<D;++e)k.push("i"+e);for(e=0;e<y;++e)for(k.push("c"+e+"_0"),f=1;f<1<<D;++f)m[e]?C.push("c"+e+"_"+f,"=","d"+e,".get(","p"+e,"+","d"+e+"_"+f,
");"):C.push("c"+e+"_"+f,"=","d"+e,"[","p"+e,"+","d"+e+"_"+f,"];"),k.push("c"+e+"_"+f);for(e=0;e<1<<D;++e)k.push("b"+e);for(e=0;e<h;++e)k.push("x"+e);C.push("vertex(",k.join(),");","v0","=",b,"[",q,"]=",l,"++;");e=(1<<D)-1;k="b"+e;for(f=0;f<D;++f)if(0===(c&~(1<<f))){for(var p=e^1<<f,t="b"+p,A=[],r=p;0<r;r=r-1&p)A.push(b+"["+q+"+"+("e"+r)+"]");A.push("v0");for(r=0;r<y;++r)f&1?A.push("c"+r+"_"+e,"c"+r+"_"+p):A.push("c"+r+"_"+p,"c"+r+"_"+e);f&1?A.push(k,t):A.push(t,k);for(r=0;r<h;++r)A.push("x"+r);C.push("if(",
k,"!==",t,"){","face(",A.join(),")}")}C.push("}",q,"+=1;")}else{for(f=a-1;0<=f;--f)v(f,0);e=[];for(f=0;f<y;++f)m[f]?e.push("d"+f+".get("+("p"+f)+")"):e.push("d"+f+"["+("p"+f)+"]");for(f=0;f<h;++f)e.push("x"+f);C.push(w,"[",q,"++]=phase(",e.join(),");");for(f=0;f<a;++f)z(f);for(f=0;f<y;++f)C.push("p"+f,"+=","u"+f+"_"+d[a],";");C.push("if(","s"+d[a],">0){","i"+d[a],"=1;");g(a-1,c|1<<d[a]);for(f=0;f<y;++f)C.push("p"+f,"+=","u"+f+"_"+d[a],";");a===D-1&&(C.push(q,"=0;"),B());v(a,2);g(a-1,c);a===D-1&&(C.push("if(",
"i"+d[D-1],"&1){",q,"=0;}"),B());z(a);C.push("}")}}var y=m.length,D=d.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var A="extractContour"+d.join("_"),C=[],E=[],G=[],H=0;H<y;++H)G.push("a"+H);for(H=0;H<h;++H)G.push("x"+H);for(H=0;H<D;++H)E.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<y;++H){E.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var F=0;F<D;++F)E.push("t"+H+"_"+F+"="+("a"+H)+".stride["+F+"]|0")}for(H=0;H<y;++H)for(E.push("p"+H+"="+
("o"+H)),E.push("c"+H+"_0"),F=1;F<1<<D;++F){for(var I=[],N=0;N<D;++N)F&1<<N&&I.push("-"+("t"+H+"_"+N));E.push("d"+H+"_"+F+"=("+I.join("")+")|0");E.push("c"+H+"_"+F+"=0")}for(H=0;H<y;++H)for(F=0;F<D;++F)N=["t"+H+"_"+d[F]],0<F&&N.push("t"+H+"_"+d[F-1]+"*"+("s"+d[F-1])),E.push("u"+H+"_"+d[F]+"=("+N.join("-")+")|0");for(H=0;H<D;++H)E.push("i"+H+"=0");E.push(l+"=0");F=["2"];for(H=D-2;0<=H;--H)F.push("s"+d[H]);E.push(x+"=("+F.join("*")+")|0",w+"=mallocUint32("+x+")",b+"=mallocUint32("+x+")",q+"=0");E.push("b0=0");
for(F=1;F<1<<D;++F){H=[];I=[];for(N=0;N<D;++N)F&1<<N&&(0===I.length?H.push("1"):H.unshift(I.join("*"))),I.push("s"+d[N]);N="";0>H[0].indexOf("s"+d[D-2])&&(N="-");I=p(D,F,d);E.push("e"+I+"=(-"+H.join("-")+")|0","y"+I+"=("+N+H.join("-")+")|0","b"+I+"=0")}E.push("v0=0",t+"=0");g(D-1,0);C.push("freeUint32(",b,");freeUint32(",w,");");A=["'use strict';function ",A,"(",G.join(),"){var ",E.join(),";",C.join(""),"}return ",A].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",
A))(a,e,f,c.mallocUint32,c.freeUint32)}var c=a("typedarray-pool");f.exports=function(b){function a(b){throw Error("ndarray-extract-contour: "+b);}"object"!==typeof b&&a("Must specify arguments");var c=b.order;Array.isArray(c)||a("Must specify order");var e=b.arrayArguments||1;1>e&&a("Must have at least one array argument");var d=b.scalarArguments||0;0>d&&a("Scalar arg count must be > 0");"function"!==typeof b.vertex&&a("Must specify vertex creation function");"function"!==typeof b.cell&&a("Must specify cell creation function");
"function"!==typeof b.phase&&a("Must specify phase function");for(var f=b.getters||[],l=Array(e),q=0;q<e;++q)0<=f.indexOf(q)?l[q]=!0:l[q]=!1;return m(b.vertex,b.cell,b.phase,d,c,l)};var b="V",w="P",l="N",x="Q",q="X",t="T"},{"typedarray-pool":144}],142:[function(a,f,e){arguments[4][75][0].apply(e,arguments)},{dup:75}],143:[function(a,f,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],144:[function(a,f,e){(function(f,m){function c(b){if(b){var a=v.log2(b.length||b.byteLength);y[a].push(b)}}function b(b){b=
v.nextPow2(b);var a=v.log2(b),a=y[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function w(a){return new Uint8Array(b(a),0,a)}function l(a){return new Uint16Array(b(2*a),0,a)}function x(a){return new Uint32Array(b(4*a),0,a)}function q(a){return new Int8Array(b(a),0,a)}function t(a){return new Int16Array(b(2*a),0,a)}function u(a){return new Int32Array(b(4*a),0,a)}function r(a){return new Float32Array(b(4*a),0,a)}function k(a){return new Float64Array(b(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(b(a),
0,a):w(a)}function d(a){return new DataView(b(a),0,a)}function n(b){b=v.nextPow2(b);var a=v.log2(b),a=D[a];return 0<a.length?a.pop():new m(b)}var v=a("bit-twiddle"),z=a("dup");f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,g=f.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=z([32,0]));g.BUFFER||
(g.BUFFER=z([32,0]));var y=g.DATA,D=g.BUFFER;e.free=function(b){if(m.isBuffer(b))D[v.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var a=v.log2(b.length||b.byteLength)|0;y[a].push(b)}};e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(b){c(b.buffer)};e.freeArrayBuffer=c;e.freeBuffer=function(b){D[v.log2(b.length)].push(b)};
e.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return b(a);switch(c){case "uint8":return w(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return q(a);case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return k(a);case "uint8_clamped":return h(a);case "buffer":return n(a);case "data":case "dataview":return d(a);default:return null}};e.mallocArrayBuffer=b;e.mallocUint8=w;e.mallocUint16=l;e.mallocUint32=
x;e.mallocInt8=q;e.mallocInt16=t;e.mallocInt32=u;e.mallocFloat32=e.mallocFloat=r;e.mallocFloat64=e.mallocDouble=k;e.mallocUint8Clamped=h;e.mallocDataView=d;e.mallocBuffer=n;e.clearCache=function(){for(var b=0;32>b;++b)g.UINT8[b].length=0,g.UINT16[b].length=0,g.UINT32[b].length=0,g.INT8[b].length=0,g.INT16[b].length=0,g.INT32[b].length=0,g.FLOAT[b].length=0,g.DOUBLE[b].length=0,g.UINT8C[b].length=0,y[b].length=0,D[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":142,buffer:33,dup:143}],145:[function(a,f,e){function p(b){if(0>b)return Number("0/0");for(var a=c[0],e=c.length-1;0<e;--e)a+=c[e]/(b+e);e=b+4.7421875+.5;return.5*Math.log(2*Math.PI)+(b+.5)*Math.log(e)-e+Math.log(a)-Math.log(b)}var m=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],c=[.9999999999999971,
57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];f.exports=function w(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*w(1-a));if(100<a)return Math.exp(p(a));--a;for(var c=m[0],e=1;9>e;e++)c+=m[e]/(a+e);e=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(e,a+.5)*Math.exp(-e)*
c};f.exports.log=p},{}],146:[function(a,f,e){arguments[4][75][0].apply(e,arguments)},{dup:75}],147:[function(a,f,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],148:[function(a,f,e){(function(f,m){function c(b){if(b){var a=v.log2(b.length||b.byteLength);y[a].push(b)}}function b(b){b=v.nextPow2(b);var a=v.log2(b),a=y[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function w(a){return new Uint8Array(b(a),0,a)}function l(a){return new Uint16Array(b(2*a),0,a)}function x(a){return new Uint32Array(b(4*
a),0,a)}function q(a){return new Int8Array(b(a),0,a)}function t(a){return new Int16Array(b(2*a),0,a)}function u(a){return new Int32Array(b(4*a),0,a)}function r(a){return new Float32Array(b(4*a),0,a)}function k(a){return new Float64Array(b(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(b(a),0,a):w(a)}function d(a){return new DataView(b(a),0,a)}function n(b){b=v.nextPow2(b);var a=v.log2(b),a=D[a];return 0<a.length?a.pop():new m(b)}var v=a("bit-twiddle"),z=a("dup");f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL=
{UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,g=f.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=z([32,0]));g.BUFFER||(g.BUFFER=z([32,0]));var y=g.DATA,D=g.BUFFER;e.free=function(b){if(m.isBuffer(b))D[v.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var a=v.log2(b.length||
b.byteLength)|0;y[a].push(b)}};e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(b){c(b.buffer)};e.freeArrayBuffer=c;e.freeBuffer=function(b){D[v.log2(b.length)].push(b)};e.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return b(a);switch(c){case "uint8":return w(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return q(a);case "int16":return t(a);case "int32":return u(a);
case "float":case "float32":return r(a);case "double":case "float64":return k(a);case "uint8_clamped":return h(a);case "buffer":return n(a);case "data":case "dataview":return d(a);default:return null}};e.mallocArrayBuffer=b;e.mallocUint8=w;e.mallocUint16=l;e.mallocUint32=x;e.mallocInt8=q;e.mallocInt16=t;e.mallocInt32=u;e.mallocFloat32=e.mallocFloat=r;e.mallocFloat64=e.mallocDouble=k;e.mallocUint8Clamped=h;e.mallocDataView=d;e.mallocBuffer=n;e.clearCache=function(){for(var b=0;32>b;++b)g.UINT8[b].length=
0,g.UINT16[b].length=0,g.UINT32[b].length=0,g.INT8[b].length=0,g.INT16[b].length=0,g.INT32[b].length=0,g.FLOAT[b].length=0,g.DOUBLE[b].length=0,g.UINT8C[b].length=0,y[b].length=0,D[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":146,buffer:33,dup:147}],149:[function(a,f,e){f.exports=function(a){var b=a.length;if(b<p)for(var e=1,f=0;f<b;++f)for(var x=0;x<f;++x)if(a[f]<a[x])e=-e;else{if(a[f]===
a[x])return 0}else{for(var q=m.mallocUint8(b),f=0;f<b;++f)q[f]=0;e=1;for(f=0;f<b;++f)if(!q[f]){var t=1;q[f]=1;for(x=a[f];x!==f;x=a[x]){if(q[x])return m.freeUint8(q),0;t+=1;q[x]=1}t&1||(e=-e)}m.freeUint8(q)}return e};var p=32,m=a("typedarray-pool")},{"typedarray-pool":148}],150:[function(a,f,e){var p=a("typedarray-pool"),m=a("invert-permutation");e.rank=function(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var e=p.mallocUint32(b),f=p.mallocUint32(b),x=0,q;m(a,f);for(q=0;q<
b;++q)e[q]=a[q];for(q=b-1;0<q;--q)b=f[q],a=e[q],e[q]=e[b],e[b]=a,f[q]=f[a],f[a]=b,x=(x+a)*q;p.freeUint32(f);p.freeUint32(e);return x};e.unrank=function(a,b,e){switch(a){case 0:return e?e:[];case 1:return e?(e[0]=0,e):[0];case 2:return e?(b?(e[0]=0,e[1]=1):(e[0]=1,e[1]=0),e):b?[0,1]:[1,0]}e=e||Array(a);var f,m,q=1;e[0]=0;for(m=1;m<a;++m)e[m]=m,q=q*m|0;for(m=a-1;0<m;--m)a=b/q|0,b=b-a*q|0,q=q/m|0,f=e[m]|0,e[m]=e[a]|0,e[a]=f|0;return e}},{"invert-permutation":151,"typedarray-pool":154}],151:[function(a,
f,e){f.exports=function(a,e){e=e||Array(a.length);for(var c=0;c<a.length;++c)e[a[c]]=c;return e}},{}],152:[function(a,f,e){arguments[4][75][0].apply(e,arguments)},{dup:75}],153:[function(a,f,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],154:[function(a,f,e){(function(f,m){function c(b){if(b){var a=v.log2(b.length||b.byteLength);y[a].push(b)}}function b(b){b=v.nextPow2(b);var a=v.log2(b),a=y[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function w(a){return new Uint8Array(b(a),0,a)}function l(a){return new Uint16Array(b(2*
a),0,a)}function x(a){return new Uint32Array(b(4*a),0,a)}function q(a){return new Int8Array(b(a),0,a)}function t(a){return new Int16Array(b(2*a),0,a)}function u(a){return new Int32Array(b(4*a),0,a)}function r(a){return new Float32Array(b(4*a),0,a)}function k(a){return new Float64Array(b(8*a),0,a)}function h(a){return B?new Uint8ClampedArray(b(a),0,a):w(a)}function d(a){return new DataView(b(a),0,a)}function n(b){b=v.nextPow2(b);var a=v.log2(b),a=D[a];return 0<a.length?a.pop():new m(b)}var v=a("bit-twiddle"),
z=a("dup");f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var B="undefined"!==typeof Uint8ClampedArray,g=f.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=z([32,0]));g.BUFFER||(g.BUFFER=z([32,0]));var y=g.DATA,D=g.BUFFER;e.free=function(b){if(m.isBuffer(b))D[v.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&
(b=b.buffer),b){var a=v.log2(b.length||b.byteLength)|0;y[a].push(b)}};e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(b){c(b.buffer)};e.freeArrayBuffer=c;e.freeBuffer=function(b){D[v.log2(b.length)].push(b)};e.malloc=function(a,c){if(void 0===c||"arraybuffer"===c)return b(a);switch(c){case "uint8":return w(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return q(a);
case "int16":return t(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return k(a);case "uint8_clamped":return h(a);case "buffer":return n(a);case "data":case "dataview":return d(a);default:return null}};e.mallocArrayBuffer=b;e.mallocUint8=w;e.mallocUint16=l;e.mallocUint32=x;e.mallocInt8=q;e.mallocInt16=t;e.mallocInt32=u;e.mallocFloat32=e.mallocFloat=r;e.mallocFloat64=e.mallocDouble=k;e.mallocUint8Clamped=h;e.mallocDataView=d;e.mallocBuffer=n;e.clearCache=
function(){for(var b=0;32>b;++b)g.UINT8[b].length=0,g.UINT16[b].length=0,g.UINT32[b].length=0,g.INT8[b].length=0,g.INT16[b].length=0,g.INT32[b].length=0,g.FLOAT[b].length=0,g.DOUBLE[b].length=0,g.UINT8C[b].length=0,y[b].length=0,D[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":152,buffer:33,dup:153}],155:[function(a,f,e){f.exports=function(b){if(0>b)return[];if(0===b)return[[0]];for(var a=
Math.round(c(b+1))|0,e=[],f=0;f<a;++f){for(var q=p.unrank(b,f),t=[0],u=0,r=0;r<q.length;++r)u+=1<<q[r],t.push(u);1>m(q)&&(t[0]=u,t[b]=0);e.push(t)}return e};var p=a("permutation-rank"),m=a("permutation-parity"),c=a("gamma")},{gamma:145,"permutation-parity":149,"permutation-rank":150}],156:[function(a,f,e){f.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],157:[function(a,f,e){function p(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var m=a("./lib/thunk.js");f.exports=function(a){var b=new p;b.pre=a.pre;b.body=a.body;b.post=a.post;var e=a.args.slice(0);b.argTypes=e;for(var f=0;f<e.length;++f){var x=e[f];if("array"===x||"object"===typeof x&&x.blockIndices){b.argTypes[f]="array";b.arrayArgs.push(f);b.arrayBlockIndices.push(x.blockIndices?x.blockIndices:0);b.shimArgs.push("array"+f);if(f<
b.pre.args.length&&0<b.pre.args[f].count)throw Error("cwise: pre() block may not reference array args");if(f<b.post.args.length&&0<b.post.args[f].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===x)b.scalarArgs.push(f),b.shimArgs.push("scalar"+f);else if("index"===x){b.indexArgs.push(f);if(f<b.pre.args.length&&0<b.pre.args[f].count)throw Error("cwise: pre() block may not reference array index");if(f<b.body.args.length&&b.body.args[f].lvalue)throw Error("cwise: body() block may not write to array index");
if(f<b.post.args.length&&0<b.post.args[f].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===x){b.shapeArgs.push(f);if(f<b.pre.args.length&&b.pre.args[f].lvalue)throw Error("cwise: pre() block may not write to array shape");if(f<b.body.args.length&&b.body.args[f].lvalue)throw Error("cwise: body() block may not write to array shape");if(f<b.post.args.length&&b.post.args[f].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof x&&x.offset)b.argTypes[f]="offset",b.offsetArgs.push({array:x.array,offset:x.offset}),b.offsetArgIndex.push(f);else throw Error("cwise: Unknown argument type "+e[f]);}if(0>=b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>e.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>e.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>e.length)throw Error("cwise: Too many arguments in post() block");
b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;return m(b)}},{"./lib/thunk.js":159}],158:[function(a,f,e){function p(b,a,c){var e=b.length,f=a.arrayArgs.length;a=0<a.indexArgs.length;var m=[],k=[],h=0,d=0,n,p;for(n=0;n<e;++n)k.push(["i",n,"=0"].join(""));for(p=0;p<f;++p)for(n=0;n<e;++n)d=h,h=b[n],0===n?k.push(["d",p,"s",n,"=t",p,"p",h].join("")):k.push(["d",p,"s",n,"=(t",p,"p",h,"-s",d,"*t",p,"p",d,")"].join(""));m.push("var "+k.join(","));for(n=e-1;0<=
n;--n)h=b[n],m.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));m.push(c);for(n=0;n<e;++n){d=h;h=b[n];for(p=0;p<f;++p)m.push(["p",p,"+=d",p,"s",n].join(""));a&&(0<n&&m.push(["index[",d,"]-=s",d].join("")),m.push(["++index[",h,"]"].join("")));m.push("}")}return m.join("\n")}function m(b,a,c,e){for(var f=a.length,m=c.arrayArgs.length,k=c.blockSize,h=0<c.indexArgs.length,d=[],n=0;n<m;++n)d.push(["var offset",n,"=p",n].join(""));for(n=b;n<f;++n)d.push(["for(var j"+n+"=SS[",a[n],"]|0;j",n,">0;){"].join("")),
d.push(["if(j",n,"<",k,"){"].join("")),d.push(["s",a[n],"=j",n].join("")),d.push(["j",n,"=0"].join("")),d.push(["}else{s",a[n],"=",k].join("")),d.push(["j",n,"-=",k,"}"].join("")),h&&d.push(["index[",a[n],"]=j",n].join(""));for(n=0;n<m;++n){k=["offset"+n];for(h=b;h<f;++h)k.push(["j",h,"*t",n,"p",a[h]].join(""));d.push(["p",n,"=(",k.join("+"),")"].join(""))}d.push(p(a,c,e));for(n=b;n<f;++n)d.push("}");return d.join("\n")}function c(b,a,c){for(var e=b.body,f=[],m=[],k=0;k<b.args.length;++k){var h=b.args[k];
if(!(0>=h.count)){var d=new RegExp(h.name,"g"),n="",p=a.arrayArgs.indexOf(k);switch(a.argTypes[k]){case "offset":var w=a.offsetArgIndex.indexOf(k),p=a.offsetArgs[w].array,n="+q"+w;case "array":var n="p"+p+n,B="l"+k,w="a"+p;if(0===a.arrayBlockIndices[p])1===h.count?"generic"===c[p]?h.lvalue?(f.push(["var ",B,"=",w,".get(",n,")"].join("")),e=e.replace(d,B),m.push([w,".set(",n,",",B,")"].join(""))):e=e.replace(d,[w,".get(",n,")"].join("")):e=e.replace(d,[w,"[",n,"]"].join("")):"generic"===c[p]?(f.push(["var ",
B,"=",w,".get(",n,")"].join("")),e=e.replace(d,B),h.lvalue&&m.push([w,".set(",n,",",B,")"].join(""))):(f.push(["var ",B,"=",w,"[",n,"]"].join("")),e=e.replace(d,B),h.lvalue&&m.push([w,"[",n,"]=",B].join("")));else{d=[h.name];h=[n];for(n=0;n<Math.abs(a.arrayBlockIndices[p]);n++)d.push("\\s*\\[([^\\]]+)\\]"),h.push("$"+(n+1)+"*t"+p+"b"+n);d=new RegExp(d.join(""),"g");n=h.join("+");if("generic"===c[p])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(d,[w,"[",
n,"]"].join(""))}break;case "scalar":e=e.replace(d,"Y"+a.scalarArgs.indexOf(k));break;case "index":e=e.replace(d,"index");break;case "shape":e=e.replace(d,"shape")}}}return[f.join("\n"),e,m.join("\n")].join("\n").trim()}function b(b){for(var a=Array(b.length),c=!0,e=0;e<b.length;++e){var f=b[e],m=f.match(/\d+/),m=m?m[0]:"";0===f.charAt(0)?a[e]="u"+f.charAt(1)+m:a[e]=f.charAt(0)+m;0<e&&(c=c&&a[e]===a[e-1])}return c?a[0]:a.join("")}var w=a("uniq");f.exports=function(a,e){for(var f=e[1].length-Math.abs(a.arrayBlockIndices[0])|
0,t=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)u[r]=e[2*r],t[r]=e[2*r+1];for(var k=[],h=[],d=[],n=[],v=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(d.push(0),n.push(f),k.push(f),h.push(f+a.arrayBlockIndices[r])):(d.push(a.arrayBlockIndices[r]),n.push(a.arrayBlockIndices[r]+f),k.push(0),h.push(a.arrayBlockIndices[r]));for(var z=[],B=0;B<t[r].length;B++)d[r]<=t[r][B]&&t[r][B]<n[r]&&z.push(t[r][B]-d[r]);v.push(z)}h=["SS"];n=["'use strict'"];z=[];
for(B=0;B<f;++B)z.push(["s",B,"=SS[",B,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){h.push("a"+r);h.push("t"+r);h.push("p"+r);for(B=0;B<f;++B)z.push(["t",r,"p",B,"=t",r,"[",d[r]+B,"]"].join(""));for(B=0;B<Math.abs(a.arrayBlockIndices[r]);++B)z.push(["t",r,"b",B,"=t",r,"[",k[r]+B,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)h.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){B=Array(f);for(r=0;r<f;++r)B[r]="0";z.push(["index=[",B.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){k=a.offsetArgs[r];d=[];for(B=0;B<k.offset.length;++B)0!==k.offset[B]&&(1===k.offset[B]?d.push(["t",k.array,"p",B].join("")):d.push([k.offset[B],"*t",k.array,"p",B].join("")));0===d.length?z.push("q"+r+"=0"):z.push(["q",r,"=",d.join("+")].join(""))}r=w([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);n.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)n.push("p"+r+"|=0");3<a.pre.body.length&&n.push(c(a.pre,a,u));r=c(a.body,
a,u);a:for(B=0,z=v[0].length;B<z;){for(k=1;k<v.length;++k)if(v[k][B]!==v[0][B])break a;++B}B<f?n.push(m(B,v[0],a,r)):n.push(p(v[0],a,r));3<a.post.body.length&&n.push(c(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",e,":\n"+n.join("\n")+"\n----------");f=[a.funcName||"unnamed","_cwise_loop_",t[0].join("s"),"m",B,b(u)].join("");return(new Function(["function ",f,"(",h.join(","),"){",n.join("\n"),"} return ",f].join("")))()}},{uniq:160}],159:[function(a,f,e){var p=a("./compile.js");
f.exports=function(a){var c=["'use strict'","var CACHED={}"],b=[];c.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var e=[],f=[],x=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],q=[],t=[],u=0;u<a.arrayArgs.length;++u){var r=a.arrayArgs[u];b.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));e.push("t"+r);e.push("r"+r);f.push("t"+r);f.push("r"+
r+".join()");x.push("array"+r+".data");x.push("array"+r+".stride");x.push("array"+r+".offset|0");0<u&&(q.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),t.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(c.push("if (!("+q.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
c.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),c.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(u=0;u<a.scalarArgs.length;++u)x.push("scalar"+a.scalarArgs[u]);b.push(["type=[",f.join(","),"].join()"].join(""));b.push("proc=CACHED[type]");c.push("var "+b.join(","));c.push(["if(!proc){CACHED[type]=proc=compile([",e.join(","),"])}return proc(",x.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+c.join("\n")+"\n----------");return(new Function("compile",c.join("\n")))(p.bind(void 0,a))}},{"./compile.js":158}],160:[function(a,f,e){arguments[4][129][0].apply(e,arguments)},{dup:129}],161:[function(a,f,e){f.exports=function(a,c){var b=[];c=+c||0;p(a.hi(a.shape[0]-1),b,c);return b};var p=a("./lib/zc-core")},{"./lib/zc-core":156}],162:[function(a,f,e){function p(a,b){var e=a.length,f=["'use strict';"],p="surfaceNets"+a.join("_")+"d"+
b;f.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&f.push("getters:[0],");for(var r=[],k=[],h=0;h<e;++h)r.push("d"+h),k.push("d"+h);for(h=0;h<1<<e;++h)r.push("v"+h),k.push("v"+h);for(h=0;h<1<<e;++h)r.push("p"+h),k.push("p"+h);r.push("a","b","c");k.push("a","c");f.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(h=0;h<1<<e;++h)r.push("(p"+h+"<<"+h+")");f.push("var m=(",r.join("+"),")|0;if(m===0||m===",
(1<<(1<<e))-1,"){return}");var r=[],d=[];128>=1<<(1<<e)?(f.push("switch(m){"),d=f):f.push("switch(m>>>7){");for(h=0;h<1<<(1<<e);++h){128<1<<(1<<e)&&0===h%128&&(0<r.length&&d.push("}}"),d="vExtra"+r.length,f.push("case ",h>>>7,":",d,"(m&0x7f,",k.join(),");break;"),d=["function ",d,"(m,",k.join(),"){switch(m){"],r.push(d));d.push("case ",h&127,":");for(var n=Array(e),v=Array(e),w=Array(e),B=Array(e),g=0,y=0;y<e;++y)n[y]=[],v[y]=[],w[y]=0,B[y]=0;for(y=0;y<1<<e;++y)for(var D=0;D<e;++D){var A=y^1<<D;if(!(A>
y)&&!(h&1<<A)!==!(h&1<<y)){var C=1;h&1<<A?v[D].push("v"+A+"-v"+y):(v[D].push("v"+y+"-v"+A),C=-C);0>C?(n[D].push("-v"+y+"-v"+A),w[D]+=2):(n[D].push("v"+y+"+v"+A),w[D]-=2);g+=1;for(C=0;C<e;++C)C!==D&&(A&1<<C?B[C]+=1:--B[C])}}y=[];for(D=0;D<e;++D)0===n[D].length?y.push("d"+D+"-0.5"):(A="",0>w[D]?A=w[D]+"*c":0<w[D]&&(A="+"+w[D]+"*c"),y.push("d"+D+"-"+(.5+B[D]/g*.5)+"-"+n[D].length/g*.5+"*("+n[D].join("+")+A+")/("+v[D].join("+")+")"));d.push("a.push([",y.join(),"]);","break;")}f.push("}},");0<r.length&&
d.push("}}");k=[];for(h=0;h<1<<e-1;++h)k.push("v"+h);k.push("c0","c1","p0","p1","a","b","c");f.push("cell:function cellFunc(",k.join(),"){");e=c(e-1);f.push("if(p0){b.push(",e.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",e.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",p,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",p,
";");for(h=0;h<r.length;++h)f.push(r[h].join(""));return(new Function("genContour",f.join("")))(m)}f.exports=function(a,c){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var e=b(a,c),f=e.length,m=Array(f),r=Array(f),k=0;k<f;++k)m[k]=[e[k]],r[k]=[k];return{positions:m,cells:r}}e=a.order.join()+"-"+a.dtype;f=w[e];c=+c||0;f||(f=w[e]=p(a.order,a.dtype));return f(a,c)};var m=a("ndarray-extract-contour"),c=a("triangulate-hypercube"),b=a("zero-crossings"),w={}},{"ndarray-extract-contour":141,
"triangulate-hypercube":155,"zero-crossings":161}],163:[function(a,f,e){var p=a("./lib/util/extend"),m=a("./lib/context"),c=a("./lib/strings"),b=a("./lib/extension"),w=a("./lib/limits"),l=a("./lib/buffer"),x=a("./lib/elements"),q=a("./lib/texture"),t=a("./lib/renderbuffer"),u=a("./lib/framebuffer"),r=a("./lib/uniform"),k=a("./lib/attribute"),h=a("./lib/shader"),d=a("./lib/draw"),n=a("./lib/state"),v=a("./lib/compile"),z=a("./lib/read"),B=a("./lib/dynamic"),g=a("./lib/util/raf"),y=a("./lib/util/clock");
f.exports=function(){function a(){ia=g.next(a);T.count+=1;if(T.width!==I.drawingBufferWidth||T.height!==I.drawingBufferHeight)T.width=I.drawingBufferWidth,T.height=I.drawingBufferHeight,J.notifyViewportChanged();var b=y();T.dt=b-T.t;T.t=b;O.poll();for(var c=0;c<X.length;++c)(0,X[c])(T.count,T.t,T.dt);T.renderTime=y()-b}function e(){ia&&(g.cancel(a),ia=0)}function f(a){e();a.preventDefault();if(N.onContextLost)N.onContextLost()}function E(b){I.getError();M.refresh();P.refresh();O.refresh();Q.refresh();
R.refresh();ea.refresh();J.refresh();if(N.onContextRestored)N.onContextRestored();a()}function G(a){function b(a){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];B.isDynamic(f)?(c=!0,e[b]=B.unbox(f,b)):d[b]=f});return{dynamic:e,"static":d}}var c=!1,d=b(a.uniforms||{}),e=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=p({},a);delete c.uniforms;delete c.attributes;b("blend");b("depth");b("cull");
b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var d=ca.command(a["static"],d["static"],e["static"],a.dynamic,d.dynamic,e.dynamic,c),f=d.draw,g=d.batch,h=d.scope,k=[];return function(a,b){if("function"===typeof a)return h(null,a);if("function"===typeof b)return h(a,b);if("number"===typeof a){for(var c=a|0;k.length<c;)k.push(null);return g(a|0,k)}return Array.isArray(a)?g(a.length,a):f(a)}}function H(){R.poll();J.poll()}var F=m(Array.prototype.slice.call(arguments)),I=F.gl,
N=F.options,F=c(),M=b(I),U=M.extensions,K={width:I.drawingBufferWidth,height:I.drawingBufferHeight},L=w(I,U),P=l(I),S=x(I,U,P),ba=r(F),fa=k(I,U,L,P,F),ea=h(I,fa,ba,function(a){return ca.draw(a)},F),Z=d(I,U,P),O=q(I,U,L,H,K),Q=t(I,U,L),R=u(I,U,L,O,Q),T={count:0,start:y(),dt:0,t:y(),renderTime:0,width:I.drawingBufferWidth,height:I.drawingBufferHeight,pixelRatio:N.pixelRatio},J=n(I,R,K),K=z(I,H,K),ca=v(I,F,U,L,P,S,O,R,J,ba,fa,ea,Z,T,H),da=I.canvas,X=[],ia=0;da&&(da.addEventListener("webglcontextlost",
f,!1),da.addEventListener("webglcontextrestored",E,!1));return p(G,{clear:function(a){var b=0;H();var c=a.color;c&&(I.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(I.clearDepth(+a.depth),b|=256);"stencil"in a&&(I.clearStencil(a.stencil|0),b|=1024);I.clear(b)},prop:B.define,draw:G({}),elements:function(a){return S.create(a)},buffer:function(a){return P.create(a,34962)},texture:function(a){return O.create(a,3553)},cube:function(a){return 6===arguments.length?O.create(Array.prototype.slice.call(arguments),
34067):O.create(a,34067)},renderbuffer:function(a){return Q.create(a)},framebuffer:function(a){return R.create(a)},framebufferCube:function(a){},frame:function(b){X.push(b);!ia&&0<X.length&&a();return{cancel:function(){var a=X.find(function(a){return a===b});0>a||(X.splice(a,1),0>=X.length&&e())}}},stats:T,limits:L,read:K,destroy:function(){e();da&&(da.removeEventListener("webglcontextlost",f),da.removeEventListener("webglcontextrestored",E));ea.clear();R.clear();Q.clear();O.clear();P.clear();if(N.onDestroy)N.onDestroy()}})}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/compile":4,"./lib/context":8,"./lib/draw":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/state":18,"./lib/strings":19,"./lib/texture":20,"./lib/uniform":21,"./lib/util/clock":22,"./lib/util/extend":24,"./lib/util/raf":29}]},{},[1]);

        </script>
        </body>
      </html>