<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,k=[];!(g=a.next()).done;)k.push(g.value);return k};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function k(){}k.prototype=g.prototype;a.prototype=new k;a.prototype.constructor=a;for(var p in g)if($jscomp.global.Object.defineProperties){var h=$jscomp.global.Object.getOwnPropertyDescriptor(g,p);h&&$jscomp.global.Object.defineProperty(a,p,h)}else a[p]=g[p]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var k=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={},h=(p.next=function(){if(k<a.length){var d=k++;return{value:g(d,a[d]),done:!1}}h.next=$jscomp.array.done_;return $jscomp.array.done_()},p[Symbol.iterator]=function(){return h},p);return h};
$jscomp.array.findInternal_=function(a,g,k){a instanceof String&&(a=String(a));for(var p=a.length,h=0;h<p;h++){var d=a[h];if(g.call(k,d,h,a))return{i:h,v:d}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,k){g=void 0===g?function(d){return d}:g;var p=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var h;!(h=a.next()).done;)p.push(g.call(k,h.value))}else{h=a.length;for(var d=0;d<h;d++)p.push(g.call(k,a[d]))}return p};$jscomp.array.of=function(a){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,k){var p=this.length;a=Number(a);g=Number(g);k=Number(null!=k?k:p);if(a<g)for(k=Math.min(k,p);g<k;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(k=Math.min(k,p+g-a),a+=k-g;k>g;)--k in this?this[--a]=this[k]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,k){null!=k&&a.length||(k=this.length||0);k=Number(k);for(g=Number((void 0===g?0:g)||0);g<k;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var p=k.entries(),h=p.next();if(h.done||h.value[0]!=g||"s"!=h.value[1])return!1;h=p.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!p.next().done?!1:!0}catch(d){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var k=this.maybeGetEntry_(a),p=k.id,h=k.list,k=k.entry;h||(h=this.data_[p]=[]);k?k.value=g:(k={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},h.push(k),this.head_.previous.next=k,this.head_.previous=k,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var k=g.list,p=g.index;return(g=g.entry)&&k?(k.splice(p,1),k.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),k=this.data_[g];if(k)for(var p=0;p<k.length;p++){var h=k[p];if(a!==a&&h.key!==h.key||a===h.key)return{id:g,list:k,index:p,entry:h}}return{id:g,list:k,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var k=$jscomp.makeIterator(this.entries()),p=k.next();!p.done;p=k.next())p=p.value,a.call(g,p[1],p[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,k=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={};return p.next=function(){if(k){for(;k.head!=g.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:a(k)};k=null}return{done:!0,value:void 0}},p[Symbol.iterator]=function(){return this},p};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,k){Object.defineProperty(a,g,{value:String(k)})}:function(a,g,k){a[g]=String(k)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var k=a&65535,p=g&65535;return k*p+((a>>>16&65535)*p+k*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,k=1,p=a,h=0,d=1;h!=p;)g*=a,d*=-1,p=(h=p)+d*g/++k;return p}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,k=1,p=a,h=0;h!=p;)g*=a/++k,p=(h=p)+g;return p}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,k){for(var p=[],h=2;h<arguments.length;++h)p[h-2]=arguments[h];a=Number(a);g=Number(g);for(var d=Math.max(Math.abs(a),Math.abs(g)),e=$jscomp.makeIterator(p),h=e.next();!h.done;h=e.next())d=Math.max(d,Math.abs(h.value));if(1E100<d||1E-100>d){a/=d;g/=d;e=a*a+g*g;p=$jscomp.makeIterator(p);for(h=p.next();!h.done;h=p.next())h=h.value,h=Number(h)/d,e+=h*h;return Math.sqrt(e)*d}d=a*a+g*g;p=$jscomp.makeIterator(p);for(h=p.next();!h.done;h=p.next())h=h.value,h=Number(h),d+=
h*h;return Math.sqrt(d)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var k=[],p=1;p<arguments.length;++p)k[p-1]=arguments[p];k=$jscomp.makeIterator(k);for(p=k.next();!p.done;p=k.next())if(p=p.value)for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),k=a.next();if(k.done||k.value[0]!=g||k.value[1]!=g)return!1;k=a.next();return k.done||k.value[0]==g||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var k=this;this.map_.forEach(function(p){return a.call(g,p,p,k)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];for(var k="",g=$jscomp.makeIterator(g),p=g.next();!p.done;p=g.next()){p=p.value;p=+p;if(0>p||1114111<p||p!==Math.floor(p))throw new RangeError("invalid_code_point "+p);65535>=p?k+=String.fromCharCode(p):(p-=65536,k+=String.fromCharCode(p>>>10&1023|55296),k+=String.fromCharCode(p&1023|56320))}return k};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var k="";a;)if(a&1&&(k+=g),a>>>=1)g+=g;return k};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),k=g.length;a=Number(a)||0;if(0<=a&&a<k){a|=0;var p=g.charCodeAt(a);if(55296>p||56319<p||a+1===k)return p;a=g.charCodeAt(a+1);return 56320>a||57343<a?p:1024*(p-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var k=this.toString();a+="";for(var p=k.length,h=a.length,d=Math.max(0,Math.min(g|0,k.length)),e=0;e<h&&d<p;)if(k[d++]!=a[e++])return!1;return e>=h};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var k=this.toString();a+="";void 0===g&&(g=k.length);for(var p=Math.max(0,Math.min(g|0,k.length)),h=a.length;0<h&&0<p;)if(k[--p]!=a[--h])return!1;return 0>=h};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function a(g,k,p){function h(e,t){if(!k[e]){if(!g[e]){var u="function"==typeof require&&require;if(!t&&u)return u(e,!0);if(d)return d(e,!0);u=Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u;}u=k[e]={exports:{}};g[e][0].call(u.exports,function(d){return h(g[e][1][d]||d)},u,u.exports,a,g,k,p)}return k[e].exports}for(var d="function"==typeof require&&require,e=0;e<p.length;e++)h(p[e]);return h}return a})()({1:[function(a,g,k){g=a("regl")();k=a("vectorize-text");var p=
a("gl-mat4/perspective"),h=a("gl-mat4/lookAt");a=k("hello regl!",{textAlign:"center",textBaseline:"middle"});var d=g.texture({copy:!0,min:"linear",mag:"linear"}),e=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d,t:function(d){return.001*d.tick}},depth:{enable:!1},count:3}),q=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.tick},view:function(d){d=.01*d.tick;return h([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return p([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){e();q();d({copy:!0,min:"linear",mag:"linear"})})},{"gl-mat4/lookAt":49,"gl-mat4/perspective":50,regl:72,"vectorize-text":94}],2:[function(a,g,k){function p(d){var e=d.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");
d=d.indexOf("=");-1===d&&(d=e);return[d,d===e?0:4-d%4]}function h(e,h,a){for(var q=[],r=h;r<a;r+=3)h=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),q.push(d[h>>18&63]+d[h>>12&63]+d[h>>6&63]+d[h&63]);return q.join("")}k.byteLength=function(d){d=p(d);var e=d[1];return 3*(d[0]+e)/4-e};k.toByteArray=function(d){var h,a=p(d);h=a[0];var a=a[1],v=new q(3*(h+a)/4-a),r=0,n=0<a?h-4:h,m;for(m=0;m<n;m+=4)h=e[d.charCodeAt(m)]<<18|e[d.charCodeAt(m+1)]<<12|e[d.charCodeAt(m+2)]<<6|e[d.charCodeAt(m+3)],v[r++]=
h>>16&255,v[r++]=h>>8&255,v[r++]=h&255;2===a&&(h=e[d.charCodeAt(m)]<<2|e[d.charCodeAt(m+1)]>>4,v[r++]=h&255);1===a&&(h=e[d.charCodeAt(m)]<<10|e[d.charCodeAt(m+1)]<<4|e[d.charCodeAt(m+2)]>>2,v[r++]=h>>8&255,v[r++]=h&255);return v};k.fromByteArray=function(e){for(var a=e.length,q=a%3,v=[],r=0,n=a-q;r<n;r+=16383)v.push(h(e,r,r+16383>n?n:r+16383));1===q?(e=e[a-1],v.push(d[e>>2]+d[e<<4&63]+"==")):2===q&&(e=(e[a-2]<<8)+e[a-1],v.push(d[e>>10]+d[e>>4&63]+d[e<<2&63]+"="));return v.join("")};var d=[],e=[],
q="undefined"!==typeof Uint8Array?Uint8Array:Array;for(a=0;64>a;++a)d[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;e[45]=62;e[95]=63},{}],3:[function(a,g,k){var p=a("./lib/rationalize");g.exports=function(h,d){return p(h[0].mul(d[1]).add(d[0].mul(h[1])),h[1].mul(d[1]))}},{"./lib/rationalize":13}],4:[function(a,g,k){g.exports=function(a,h){return a[0].mul(h[1]).cmp(h[0].mul(a[1]))}},{}],
5:[function(a,g,k){var p=a("./lib/rationalize");g.exports=function(h,d){return p(h[0].mul(d[1]),h[1].mul(d[0]))}},{"./lib/rationalize":13}],6:[function(a,g,k){function p(a,v){if(h(a))return v?u(a,p(v)):[a[0].clone(),a[1].clone()];var r=0,n,m;if(d(a))n=a.clone();else if("string"===typeof a)n=q(a);else{if(0===a)return[e(0),e(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),r-=256;n=e(a)}if(h(v))n.mul(v[1]),m=v[0].clone();else if(d(v))m=v.clone();else if("string"===typeof v)m=q(v);
else if(v){if(v!==Math.floor(v))for(;v!==Math.floor(v);)v*=Math.pow(2,256),r+=256;m=e(v)}else m=e(1);0<r?n=n.ushln(r):0>r&&(m=m.ushln(-r));return t(n,m)}var h=a("./is-rat"),d=a("./lib/is-bn"),e=a("./lib/num-to-bn"),q=a("./lib/str-to-bn"),t=a("./lib/rationalize"),u=a("./div");g.exports=p},{"./div":5,"./is-rat":7,"./lib/is-bn":11,"./lib/num-to-bn":12,"./lib/rationalize":13,"./lib/str-to-bn":14}],7:[function(a,g,k){var p=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&p(a[0])&&
p(a[1])}},{"./lib/is-bn":11}],8:[function(a,g,k){var p=a("bn.js");g.exports=function(a){return a.cmp(new p(0))}},{"bn.js":16}],9:[function(a,g,k){var p=a("./bn-sign");g.exports=function(a){var d=a.length,e=a.words,q=0;if(1===d)q=e[0];else if(2===d)q=e[0]+67108864*e[1];else for(var t=0;t<d;t++)q+=e[t]*Math.pow(67108864,t);return p(a)*q}},{"./bn-sign":8}],10:[function(a,g,k){var p=a("double-bits"),h=a("bit-twiddle").countTrailingZeros;g.exports=function(d){var a=h(p.lo(d));if(32>a)return a;d=h(p.hi(d));
return 20<d?52:d+32}},{"bit-twiddle":21,"double-bits":43}],11:[function(a,g,k){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":16}],12:[function(a,g,k){var p=a("bn.js"),h=a("double-bits");g.exports=function(d){var a=h.exponent(d);return 52>a?new p(d):(new p(d*Math.pow(2,52-a))).ushln(a-52)}},{"bn.js":16,"double-bits":43}],13:[function(a,g,k){var p=a("./num-to-bn"),h=a("./bn-sign");g.exports=function(d,a){var q=h(d),t=h(a);if(0===q)return[p(0),p(1)];if(0===t)return[p(0),
p(0)];0>t&&(d=d.neg(),a=a.neg());q=d.gcd(a);return q.cmpn(1)?[d.div(q),a.div(q)]:[d,a]}},{"./bn-sign":8,"./num-to-bn":12}],14:[function(a,g,k){var p=a("bn.js");g.exports=function(a){return new p(a)}},{"bn.js":16}],15:[function(a,g,k){var p=a("./lib/rationalize");g.exports=function(a,d){return p(a[0].mul(d[0]),a[1].mul(d[1]))}},{"./lib/rationalize":13}],16:[function(a,g,k){(function(p,h){function d(b,x){if(!b)throw Error(x||"Assertion failed");}function e(b,x){b.super_=x;var d=function(){};d.prototype=
x.prototype;b.prototype=new d;b.prototype.constructor=b}function q(b,x,d){if(q.isBN(b))return b;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==b){if("le"===x||"be"===x)d=x,x=10;this._init(b||0,x||10,d||"be")}}function t(b,x,d){var c=0;for(d=Math.min(b.length,d);x<d;x++)var f=b.charCodeAt(x)-48,c=c<<4,c=49<=f&&54>=f?c|f-49+10:17<=f&&22>=f?c|f-17+10:c|f&15;return c}function u(b,x,d,c){var f=0;for(d=Math.min(b.length,d);x<d;x++)var l=b.charCodeAt(x)-48,f=f*c,f=49<=l?f+(l-49+10):
17<=l?f+(l-17+10):f+l;return f}function w(b,x,d){d.negative=x.negative^b.negative;var c=b.length+x.length|0;d.length=c;var c=c-1|0,f=b.words[0]|0,l=x.words[0]|0,f=f*l,a=f/67108864|0;d.words[0]=f&67108863;for(var m=1;m<c;m++){for(var e=a>>>26,h=a&67108863,a=Math.min(m,x.length-1),H=Math.max(0,m-b.length+1);H<=a;H++)f=b.words[m-H|0]|0,l=x.words[H]|0,f=f*l+h,e+=f/67108864|0,h=f&67108863;d.words[m]=h|0;a=e|0}0!==a?d.words[m]=a|0:d.length--;return d.strip()}function v(b,x){this.x=b;this.y=x}function r(b,
x){this.name=b;this.p=new q(x,16);this.n=this.p.bitLength();this.k=(new q(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function n(){r.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function m(){r.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function f(){r.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){r.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function l(b){"string"===typeof b?(b=q._prime(b),this.m=b.p,this.prime=b):(d(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null)}function z(b){l.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new q(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof p?p.exports=
q:h.BN=q;q.BN=q;q.wordSize=26;var A;try{A=a("buffer").Buffer}catch(b){}q.isBN=function(b){return b instanceof q?!0:null!==b&&"object"===typeof b&&b.constructor.wordSize===q.wordSize&&Array.isArray(b.words)};q.max=function(b,x){return 0<b.cmp(x)?b:x};q.min=function(b,x){return 0>b.cmp(x)?b:x};q.prototype._init=function(b,x,c){if("number"===typeof b)return this._initNumber(b,x,c);if("object"===typeof b)return this._initArray(b,x,c);"hex"===x&&(x=16);d(x===(x|0)&&2<=x&&36>=x);b=b.toString().replace(/\s+/g,
"");var f=0;"-"===b[0]&&f++;16===x?this._parseHex(b,f):this._parseBase(b,x,f);"-"===b[0]&&(this.negative=1);this.strip();"le"===c&&this._initArray(this.toArray(),x,c)};q.prototype._initNumber=function(b,x,c){0>b&&(this.negative=1,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(d(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),x,c)};q.prototype._initArray=
function(b,x,c){d("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(x=0;x<this.length;x++)this.words[x]=0;var f,l=0;if("be"===c)for(x=b.length-1,c=0;0<=x;x-=3)f=b[x]|b[x-1]<<8|b[x-2]<<16,this.words[c]|=f<<l&67108863,this.words[c+1]=f>>>26-l&67108863,l+=24,26<=l&&(l-=26,c++);else if("le"===c)for(c=x=0;x<b.length;x+=3)f=b[x]|b[x+1]<<8|b[x+2]<<16,this.words[c]|=f<<l&67108863,this.words[c+1]=f>>>26-l&
67108863,l+=24,26<=l&&(l-=26,c++);return this.strip()};q.prototype._parseHex=function(b,x){this.length=Math.ceil((b.length-x)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var c,f,l=0,d=b.length-6;for(c=0;d>=x;d-=6)f=t(b,d,d+6),this.words[c]|=f<<l&67108863,this.words[c+1]|=f>>>26-l&4194303,l+=24,26<=l&&(l-=26,c++);d+6!==x&&(f=t(b,x,d+6),this.words[c]|=f<<l&67108863,this.words[c+1]|=f>>>26-l&4194303);this.strip()};q.prototype._parseBase=function(b,x,d){this.words=[0];
this.length=1;for(var c=0,f=1;67108863>=f;f*=x)c++;c--;for(var f=f/x|0,l=b.length-d,a=l%c,m=Math.min(l,l-a)+d,l=0;d<m;d+=c)l=u(b,d,d+c,x),this.imuln(f),67108864>this.words[0]+l?this.words[0]+=l:this._iaddn(l);if(0!==a){c=1;l=u(b,d,b.length,x);for(d=0;d<a;d++)c*=x;this.imuln(c);67108864>this.words[0]+l?this.words[0]+=l:this._iaddn(l)}};q.prototype.copy=function(b){b.words=Array(this.length);for(var x=0;x<this.length;x++)b.words[x]=this.words[x];b.length=this.length;b.negative=this.negative;b.red=this.red};
q.prototype.clone=function(){var b=new q(null);this.copy(b);return b};q.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this};q.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};q.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};q.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];q.prototype.toString=function(b,x){b=b||10;x=x|0||1;var c;if(16===b||"hex"===b){c="";for(var f=0,l=0,a=0;a<this.length;a++){var m=
this.words[a],e=((m<<f|l)&16777215).toString(16),l=m>>>24-f&16777215;c=0!==l||a!==this.length-1?D[6-e.length]+e+c:e+c;f+=2;26<=f&&(f-=26,a--)}for(0!==l&&(c=l.toString(16)+c);0!==c.length%x;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(b===(b|0)&&2<=b&&36>=b){f=g[b];l=k[b];c="";a=this.clone();for(a.negative=0;!a.isZero();)m=a.modn(l).toString(b),a=a.idivn(l),c=a.isZero()?m+c:D[f-m.length]+m+c;for(this.isZero()&&(c="0"+c);0!==c.length%x;)c="0"+c;0!==this.negative&&(c="-"+c);return c}d(!1,"Base should be between 2 and 36")};
q.prototype.toNumber=function(){var b=this.words[0];2===this.length?b+=67108864*this.words[1]:3===this.length&&1===this.words[2]?b+=4503599627370496+67108864*this.words[1]:2<this.length&&d(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-b:b};q.prototype.toJSON=function(){return this.toString(16)};q.prototype.toBuffer=function(b,x){d("undefined"!==typeof A);return this.toArrayLike(A,b,x)};q.prototype.toArray=function(b,x){return this.toArrayLike(Array,b,x)};q.prototype.toArrayLike=
function(b,x,c){var f=this.byteLength();c=c||Math.max(1,f);d(f<=c,"byte array longer than desired length");d(0<c,"Requested array length <= 0");this.strip();var l="le"===x;b=new b(c);x=this.clone();if(l){for(l=0;!x.isZero();l++)f=x.andln(255),x.iushrn(8),b[l]=f;for(;l<c;l++)b[l]=0}else{for(l=0;l<c-f;l++)b[l]=0;for(l=0;!x.isZero();l++)f=x.andln(255),x.iushrn(8),b[c-l-1]=f}return b};q.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var x=0;4096<=b&&(x+=13,b>>>=13);64<=
b&&(x+=7,b>>>=7);8<=b&&(x+=4,b>>>=4);2<=b&&(x+=2,b>>>=2);return x+b};q.prototype._zeroBits=function(b){if(0===b)return 26;var x=0;0===(b&8191)&&(x+=13,b>>>=13);0===(b&127)&&(x+=7,b>>>=7);0===(b&15)&&(x+=4,b>>>=4);0===(b&3)&&(x+=2,b>>>=2);0===(b&1)&&x++;return x};q.prototype.bitLength=function(){var b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};q.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,x=0;x<this.length;x++){var c=this._zeroBits(this.words[x]),
b=b+c;if(26!==c)break}return b};q.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};q.prototype.toTwos=function(b){return 0!==this.negative?this.abs().inotn(b).iaddn(1):this.clone()};q.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()};q.prototype.isNeg=function(){return 0!==this.negative};q.prototype.neg=function(){return this.clone().ineg()};q.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};q.prototype.iuor=
function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var x=0;x<b.length;x++)this.words[x]|=b.words[x];return this.strip()};q.prototype.ior=function(b){d(0===(this.negative|b.negative));return this.iuor(b)};q.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};q.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)};q.prototype.iuand=function(b){var x;x=this.length>b.length?b:this;for(var c=0;c<x.length;c++)this.words[c]&=
b.words[c];this.length=x.length;return this.strip()};q.prototype.iand=function(b){d(0===(this.negative|b.negative));return this.iuand(b)};q.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};q.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)};q.prototype.iuxor=function(b){var x;this.length>b.length?x=this:(x=b,b=this);for(var c=0;c<b.length;c++)this.words[c]=x.words[c]^b.words[c];if(this!==x)for(;c<x.length;c++)this.words[c]=
x.words[c];this.length=x.length;return this.strip()};q.prototype.ixor=function(b){d(0===(this.negative|b.negative));return this.iuxor(b)};q.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};q.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)};q.prototype.inotn=function(b){d("number"===typeof b&&0<=b);var x=Math.ceil(b/26)|0;b%=26;this._expand(x);0<b&&x--;for(var c=0;c<x;c++)this.words[c]=~this.words[c]&
67108863;0<b&&(this.words[c]=~this.words[c]&67108863>>26-b);return this.strip()};q.prototype.notn=function(b){return this.clone().inotn(b)};q.prototype.setn=function(b,c){d("number"===typeof b&&0<=b);var f=b/26|0,l=b%26;this._expand(f+1);this.words[f]=c?this.words[f]|1<<l:this.words[f]&~(1<<l);return this.strip()};q.prototype.iadd=function(b){var c;if(0!==this.negative&&0===b.negative)return this.negative=0,this.isub(b),this.negative^=1,this._normSign();if(0===this.negative&&0!==b.negative)return b.negative=
0,c=this.isub(b),b.negative=1,c._normSign();var d;this.length>b.length?d=this:(d=b,b=this);for(var f=c=0;f<b.length;f++)c=(d.words[f]|0)+(b.words[f]|0)+c,this.words[f]=c&67108863,c>>>=26;for(;0!==c&&f<d.length;f++)c=(d.words[f]|0)+c,this.words[f]=c&67108863,c>>>=26;this.length=d.length;if(0!==c)this.words[this.length]=c,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this};q.prototype.add=function(b){var c;return 0!==b.negative&&0===this.negative?(b.negative=0,c=
this.sub(b),b.negative^=1,c):0===b.negative&&0!==this.negative?(this.negative=0,c=b.sub(this),this.negative=1,c):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};q.prototype.isub=function(b){if(0!==b.negative){b.negative=0;var c=this.iadd(b);b.negative=1;return c._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();c=this.cmp(b);if(0===c)return this.negative=0,this.length=1,this.words[0]=0,this;var d;0<c?d=this:(d=b,b=this);for(var f=
0,l=0;l<b.length;l++)c=(d.words[l]|0)-(b.words[l]|0)+f,f=c>>26,this.words[l]=c&67108863;for(;0!==f&&l<d.length;l++)c=(d.words[l]|0)+f,f=c>>26,this.words[l]=c&67108863;if(0===f&&l<d.length&&d!==this)for(;l<d.length;l++)this.words[l]=d.words[l];this.length=Math.max(this.length,l);d!==this&&(this.negative=1);return this.strip()};q.prototype.sub=function(b){return this.clone().isub(b)};var C=function(b,c,d){var f=b.words,l=c.words,a=d.words,m=0,e,h=f[0]|0,q=h&8191,H=h>>>13,z=f[1]|0,h=z&8191,n=z>>>13,
t=f[2]|0,z=t&8191,r=t>>>13,A=f[3]|0,t=A&8191,v=A>>>13,u=f[4]|0,A=u&8191,w=u>>>13,p=f[5]|0,u=p&8191,D=p>>>13,g=f[6]|0,p=g&8191,k=g>>>13,B=f[7]|0,g=B&8191,E=B>>>13,C=f[8]|0,B=C&8191,C=C>>>13,G=f[9]|0,f=G&8191,G=G>>>13,oa=l[0]|0,ra=oa&8191,ma=oa>>>13,ea=l[1]|0,oa=ea&8191,sa=ea>>>13,na=l[2]|0,ea=na&8191,ca=na>>>13,fa=l[3]|0,na=fa&8191,ta=fa>>>13,ga=l[4]|0,fa=ga&8191,qa=ga>>>13,X=l[5]|0,ga=X&8191,da=X>>>13,N=l[6]|0,X=N&8191,ba=N>>>13,ja=l[7]|0,N=ja&8191,pa=ja>>>13,T=l[8]|0,ja=T&8191,T=T>>>13,R=l[9]|0,
l=R&8191,R=R>>>13;d.negative=b.negative^c.negative;d.length=19;e=Math.imul(q,ra);b=Math.imul(q,ma);b=b+Math.imul(H,ra)|0;c=Math.imul(H,ma);var La=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(La>>>26)|0,La=La&67108863;e=Math.imul(h,ra);b=Math.imul(h,ma);b=b+Math.imul(n,ra)|0;c=Math.imul(n,ma);e=e+Math.imul(q,oa)|0;b=b+Math.imul(q,sa)|0;b=b+Math.imul(H,oa)|0;c=c+Math.imul(H,sa)|0;var va=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(va>>>26)|0,va=va&67108863;e=Math.imul(z,ra);b=Math.imul(z,ma);b=b+Math.imul(r,
ra)|0;c=Math.imul(r,ma);e=e+Math.imul(h,oa)|0;b=b+Math.imul(h,sa)|0;b=b+Math.imul(n,oa)|0;c=c+Math.imul(n,sa)|0;e=e+Math.imul(q,ea)|0;b=b+Math.imul(q,ca)|0;b=b+Math.imul(H,ea)|0;c=c+Math.imul(H,ca)|0;var y=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(y>>>26)|0,y=y&67108863;e=Math.imul(t,ra);b=Math.imul(t,ma);b=b+Math.imul(v,ra)|0;c=Math.imul(v,ma);e=e+Math.imul(z,oa)|0;b=b+Math.imul(z,sa)|0;b=b+Math.imul(r,oa)|0;c=c+Math.imul(r,sa)|0;e=e+Math.imul(h,ea)|0;b=b+Math.imul(h,ca)|0;b=b+Math.imul(n,ea)|0;
c=c+Math.imul(n,ca)|0;e=e+Math.imul(q,na)|0;b=b+Math.imul(q,ta)|0;b=b+Math.imul(H,na)|0;c=c+Math.imul(H,ta)|0;var Pa=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(Pa>>>26)|0,Pa=Pa&67108863;e=Math.imul(A,ra);b=Math.imul(A,ma);b=b+Math.imul(w,ra)|0;c=Math.imul(w,ma);e=e+Math.imul(t,oa)|0;b=b+Math.imul(t,sa)|0;b=b+Math.imul(v,oa)|0;c=c+Math.imul(v,sa)|0;e=e+Math.imul(z,ea)|0;b=b+Math.imul(z,ca)|0;b=b+Math.imul(r,ea)|0;c=c+Math.imul(r,ca)|0;e=e+Math.imul(h,na)|0;b=b+Math.imul(h,ta)|0;b=b+Math.imul(n,na)|
0;c=c+Math.imul(n,ta)|0;e=e+Math.imul(q,fa)|0;b=b+Math.imul(q,qa)|0;b=b+Math.imul(H,fa)|0;c=c+Math.imul(H,qa)|0;var ya=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(ya>>>26)|0,ya=ya&67108863;e=Math.imul(u,ra);b=Math.imul(u,ma);b=b+Math.imul(D,ra)|0;c=Math.imul(D,ma);e=e+Math.imul(A,oa)|0;b=b+Math.imul(A,sa)|0;b=b+Math.imul(w,oa)|0;c=c+Math.imul(w,sa)|0;e=e+Math.imul(t,ea)|0;b=b+Math.imul(t,ca)|0;b=b+Math.imul(v,ea)|0;c=c+Math.imul(v,ca)|0;e=e+Math.imul(z,na)|0;b=b+Math.imul(z,ta)|0;b=b+Math.imul(r,na)|
0;c=c+Math.imul(r,ta)|0;e=e+Math.imul(h,fa)|0;b=b+Math.imul(h,qa)|0;b=b+Math.imul(n,fa)|0;c=c+Math.imul(n,qa)|0;e=e+Math.imul(q,ga)|0;b=b+Math.imul(q,da)|0;b=b+Math.imul(H,ga)|0;c=c+Math.imul(H,da)|0;var Ha=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(Ha>>>26)|0,Ha=Ha&67108863;e=Math.imul(p,ra);b=Math.imul(p,ma);b=b+Math.imul(k,ra)|0;c=Math.imul(k,ma);e=e+Math.imul(u,oa)|0;b=b+Math.imul(u,sa)|0;b=b+Math.imul(D,oa)|0;c=c+Math.imul(D,sa)|0;e=e+Math.imul(A,ea)|0;b=b+Math.imul(A,ca)|0;b=b+Math.imul(w,ea)|
0;c=c+Math.imul(w,ca)|0;e=e+Math.imul(t,na)|0;b=b+Math.imul(t,ta)|0;b=b+Math.imul(v,na)|0;c=c+Math.imul(v,ta)|0;e=e+Math.imul(z,fa)|0;b=b+Math.imul(z,qa)|0;b=b+Math.imul(r,fa)|0;c=c+Math.imul(r,qa)|0;e=e+Math.imul(h,ga)|0;b=b+Math.imul(h,da)|0;b=b+Math.imul(n,ga)|0;c=c+Math.imul(n,da)|0;e=e+Math.imul(q,X)|0;b=b+Math.imul(q,ba)|0;b=b+Math.imul(H,X)|0;c=c+Math.imul(H,ba)|0;var Ma=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(Ma>>>26)|0,Ma=Ma&67108863;e=Math.imul(g,ra);b=Math.imul(g,ma);b=b+Math.imul(E,
ra)|0;c=Math.imul(E,ma);e=e+Math.imul(p,oa)|0;b=b+Math.imul(p,sa)|0;b=b+Math.imul(k,oa)|0;c=c+Math.imul(k,sa)|0;e=e+Math.imul(u,ea)|0;b=b+Math.imul(u,ca)|0;b=b+Math.imul(D,ea)|0;c=c+Math.imul(D,ca)|0;e=e+Math.imul(A,na)|0;b=b+Math.imul(A,ta)|0;b=b+Math.imul(w,na)|0;c=c+Math.imul(w,ta)|0;e=e+Math.imul(t,fa)|0;b=b+Math.imul(t,qa)|0;b=b+Math.imul(v,fa)|0;c=c+Math.imul(v,qa)|0;e=e+Math.imul(z,ga)|0;b=b+Math.imul(z,da)|0;b=b+Math.imul(r,ga)|0;c=c+Math.imul(r,da)|0;e=e+Math.imul(h,X)|0;b=b+Math.imul(h,
ba)|0;b=b+Math.imul(n,X)|0;c=c+Math.imul(n,ba)|0;e=e+Math.imul(q,N)|0;b=b+Math.imul(q,pa)|0;b=b+Math.imul(H,N)|0;c=c+Math.imul(H,pa)|0;var ka=(m+e|0)+((b&8191)<<13)|0,m=(c+(b>>>13)|0)+(ka>>>26)|0,ka=ka&67108863;e=Math.imul(B,ra);b=Math.imul(B,ma);b=b+Math.imul(C,ra)|0;c=Math.imul(C,ma);e=e+Math.imul(g,oa)|0;b=b+Math.imul(g,sa)|0;b=b+Math.imul(E,oa)|0;c=c+Math.imul(E,sa)|0;e=e+Math.imul(p,ea)|0;b=b+Math.imul(p,ca)|0;b=b+Math.imul(k,ea)|0;c=c+Math.imul(k,ca)|0;e=e+Math.imul(u,na)|0;b=b+Math.imul(u,
ta)|0;b=b+Math.imul(D,na)|0;c=c+Math.imul(D,ta)|0;e=e+Math.imul(A,fa)|0;b=b+Math.imul(A,qa)|0;b=b+Math.imul(w,fa)|0;c=c+Math.imul(w,qa)|0;e=e+Math.imul(t,ga)|0;b=b+Math.imul(t,da)|0;b=b+Math.imul(v,ga)|0;c=c+Math.imul(v,da)|0;e=e+Math.imul(z,X)|0;b=b+Math.imul(z,ba)|0;b=b+Math.imul(r,X)|0;c=c+Math.imul(r,ba)|0;e=e+Math.imul(h,N)|0;b=b+Math.imul(h,pa)|0;b=b+Math.imul(n,N)|0;c=c+Math.imul(n,pa)|0;e=e+Math.imul(q,ja)|0;b=b+Math.imul(q,T)|0;b=b+Math.imul(H,ja)|0;c=c+Math.imul(H,T)|0;var Qa=(m+e|0)+((b&
8191)<<13)|0,m=(c+(b>>>13)|0)+(Qa>>>26)|0,Qa=Qa&67108863;e=Math.imul(f,ra);b=Math.imul(f,ma);b=b+Math.imul(G,ra)|0;c=Math.imul(G,ma);e=e+Math.imul(B,oa)|0;b=b+Math.imul(B,sa)|0;b=b+Math.imul(C,oa)|0;c=c+Math.imul(C,sa)|0;e=e+Math.imul(g,ea)|0;b=b+Math.imul(g,ca)|0;b=b+Math.imul(E,ea)|0;c=c+Math.imul(E,ca)|0;e=e+Math.imul(p,na)|0;b=b+Math.imul(p,ta)|0;b=b+Math.imul(k,na)|0;c=c+Math.imul(k,ta)|0;e=e+Math.imul(u,fa)|0;b=b+Math.imul(u,qa)|0;b=b+Math.imul(D,fa)|0;c=c+Math.imul(D,qa)|0;e=e+Math.imul(A,
ga)|0;b=b+Math.imul(A,da)|0;b=b+Math.imul(w,ga)|0;c=c+Math.imul(w,da)|0;e=e+Math.imul(t,X)|0;b=b+Math.imul(t,ba)|0;b=b+Math.imul(v,X)|0;c=c+Math.imul(v,ba)|0;e=e+Math.imul(z,N)|0;b=b+Math.imul(z,pa)|0;b=b+Math.imul(r,N)|0;c=c+Math.imul(r,pa)|0;e=e+Math.imul(h,ja)|0;b=b+Math.imul(h,T)|0;b=b+Math.imul(n,ja)|0;c=c+Math.imul(n,T)|0;e=e+Math.imul(q,l)|0;b=b+Math.imul(q,R)|0;b=b+Math.imul(H,l)|0;c=c+Math.imul(H,R)|0;q=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(q>>>26)|0;q&=67108863;e=Math.imul(f,oa);b=
Math.imul(f,sa);b=b+Math.imul(G,oa)|0;c=Math.imul(G,sa);e=e+Math.imul(B,ea)|0;b=b+Math.imul(B,ca)|0;b=b+Math.imul(C,ea)|0;c=c+Math.imul(C,ca)|0;e=e+Math.imul(g,na)|0;b=b+Math.imul(g,ta)|0;b=b+Math.imul(E,na)|0;c=c+Math.imul(E,ta)|0;e=e+Math.imul(p,fa)|0;b=b+Math.imul(p,qa)|0;b=b+Math.imul(k,fa)|0;c=c+Math.imul(k,qa)|0;e=e+Math.imul(u,ga)|0;b=b+Math.imul(u,da)|0;b=b+Math.imul(D,ga)|0;c=c+Math.imul(D,da)|0;e=e+Math.imul(A,X)|0;b=b+Math.imul(A,ba)|0;b=b+Math.imul(w,X)|0;c=c+Math.imul(w,ba)|0;e=e+Math.imul(t,
N)|0;b=b+Math.imul(t,pa)|0;b=b+Math.imul(v,N)|0;c=c+Math.imul(v,pa)|0;e=e+Math.imul(z,ja)|0;b=b+Math.imul(z,T)|0;b=b+Math.imul(r,ja)|0;c=c+Math.imul(r,T)|0;e=e+Math.imul(h,l)|0;b=b+Math.imul(h,R)|0;b=b+Math.imul(n,l)|0;c=c+Math.imul(n,R)|0;h=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(h>>>26)|0;h&=67108863;e=Math.imul(f,ea);b=Math.imul(f,ca);b=b+Math.imul(G,ea)|0;c=Math.imul(G,ca);e=e+Math.imul(B,na)|0;b=b+Math.imul(B,ta)|0;b=b+Math.imul(C,na)|0;c=c+Math.imul(C,ta)|0;e=e+Math.imul(g,fa)|0;b=b+Math.imul(g,
qa)|0;b=b+Math.imul(E,fa)|0;c=c+Math.imul(E,qa)|0;e=e+Math.imul(p,ga)|0;b=b+Math.imul(p,da)|0;b=b+Math.imul(k,ga)|0;c=c+Math.imul(k,da)|0;e=e+Math.imul(u,X)|0;b=b+Math.imul(u,ba)|0;b=b+Math.imul(D,X)|0;c=c+Math.imul(D,ba)|0;e=e+Math.imul(A,N)|0;b=b+Math.imul(A,pa)|0;b=b+Math.imul(w,N)|0;c=c+Math.imul(w,pa)|0;e=e+Math.imul(t,ja)|0;b=b+Math.imul(t,T)|0;b=b+Math.imul(v,ja)|0;c=c+Math.imul(v,T)|0;e=e+Math.imul(z,l)|0;b=b+Math.imul(z,R)|0;b=b+Math.imul(r,l)|0;c=c+Math.imul(r,R)|0;z=(m+e|0)+((b&8191)<<
13)|0;m=(c+(b>>>13)|0)+(z>>>26)|0;z&=67108863;e=Math.imul(f,na);b=Math.imul(f,ta);b=b+Math.imul(G,na)|0;c=Math.imul(G,ta);e=e+Math.imul(B,fa)|0;b=b+Math.imul(B,qa)|0;b=b+Math.imul(C,fa)|0;c=c+Math.imul(C,qa)|0;e=e+Math.imul(g,ga)|0;b=b+Math.imul(g,da)|0;b=b+Math.imul(E,ga)|0;c=c+Math.imul(E,da)|0;e=e+Math.imul(p,X)|0;b=b+Math.imul(p,ba)|0;b=b+Math.imul(k,X)|0;c=c+Math.imul(k,ba)|0;e=e+Math.imul(u,N)|0;b=b+Math.imul(u,pa)|0;b=b+Math.imul(D,N)|0;c=c+Math.imul(D,pa)|0;e=e+Math.imul(A,ja)|0;b=b+Math.imul(A,
T)|0;b=b+Math.imul(w,ja)|0;c=c+Math.imul(w,T)|0;e=e+Math.imul(t,l)|0;b=b+Math.imul(t,R)|0;b=b+Math.imul(v,l)|0;c=c+Math.imul(v,R)|0;t=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(t>>>26)|0;t&=67108863;e=Math.imul(f,fa);b=Math.imul(f,qa);b=b+Math.imul(G,fa)|0;c=Math.imul(G,qa);e=e+Math.imul(B,ga)|0;b=b+Math.imul(B,da)|0;b=b+Math.imul(C,ga)|0;c=c+Math.imul(C,da)|0;e=e+Math.imul(g,X)|0;b=b+Math.imul(g,ba)|0;b=b+Math.imul(E,X)|0;c=c+Math.imul(E,ba)|0;e=e+Math.imul(p,N)|0;b=b+Math.imul(p,pa)|0;b=b+Math.imul(k,
N)|0;c=c+Math.imul(k,pa)|0;e=e+Math.imul(u,ja)|0;b=b+Math.imul(u,T)|0;b=b+Math.imul(D,ja)|0;c=c+Math.imul(D,T)|0;e=e+Math.imul(A,l)|0;b=b+Math.imul(A,R)|0;b=b+Math.imul(w,l)|0;c=c+Math.imul(w,R)|0;A=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(A>>>26)|0;A&=67108863;e=Math.imul(f,ga);b=Math.imul(f,da);b=b+Math.imul(G,ga)|0;c=Math.imul(G,da);e=e+Math.imul(B,X)|0;b=b+Math.imul(B,ba)|0;b=b+Math.imul(C,X)|0;c=c+Math.imul(C,ba)|0;e=e+Math.imul(g,N)|0;b=b+Math.imul(g,pa)|0;b=b+Math.imul(E,N)|0;c=c+Math.imul(E,
pa)|0;e=e+Math.imul(p,ja)|0;b=b+Math.imul(p,T)|0;b=b+Math.imul(k,ja)|0;c=c+Math.imul(k,T)|0;e=e+Math.imul(u,l)|0;b=b+Math.imul(u,R)|0;b=b+Math.imul(D,l)|0;c=c+Math.imul(D,R)|0;u=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(u>>>26)|0;u&=67108863;e=Math.imul(f,X);b=Math.imul(f,ba);b=b+Math.imul(G,X)|0;c=Math.imul(G,ba);e=e+Math.imul(B,N)|0;b=b+Math.imul(B,pa)|0;b=b+Math.imul(C,N)|0;c=c+Math.imul(C,pa)|0;e=e+Math.imul(g,ja)|0;b=b+Math.imul(g,T)|0;b=b+Math.imul(E,ja)|0;c=c+Math.imul(E,T)|0;e=e+Math.imul(p,
l)|0;b=b+Math.imul(p,R)|0;b=b+Math.imul(k,l)|0;c=c+Math.imul(k,R)|0;p=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(p>>>26)|0;p&=67108863;e=Math.imul(f,N);b=Math.imul(f,pa);b=b+Math.imul(G,N)|0;c=Math.imul(G,pa);e=e+Math.imul(B,ja)|0;b=b+Math.imul(B,T)|0;b=b+Math.imul(C,ja)|0;c=c+Math.imul(C,T)|0;e=e+Math.imul(g,l)|0;b=b+Math.imul(g,R)|0;b=b+Math.imul(E,l)|0;c=c+Math.imul(E,R)|0;g=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(g>>>26)|0;g&=67108863;e=Math.imul(f,ja);b=Math.imul(f,T);b=b+Math.imul(G,ja)|
0;c=Math.imul(G,T);e=e+Math.imul(B,l)|0;b=b+Math.imul(B,R)|0;b=b+Math.imul(C,l)|0;c=c+Math.imul(C,R)|0;B=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(B>>>26)|0;B&=67108863;e=Math.imul(f,l);b=Math.imul(f,R);b=b+Math.imul(G,l)|0;c=Math.imul(G,R);H=(m+e|0)+((b&8191)<<13)|0;m=(c+(b>>>13)|0)+(H>>>26)|0;a[0]=La;a[1]=va;a[2]=y;a[3]=Pa;a[4]=ya;a[5]=Ha;a[6]=Ma;a[7]=ka;a[8]=Qa;a[9]=q;a[10]=h;a[11]=z;a[12]=t;a[13]=A;a[14]=u;a[15]=p;a[16]=g;a[17]=B;a[18]=H&67108863;0!==m&&(a[19]=m,d.length++);return d};Math.imul||
(C=w);q.prototype.mulTo=function(b,c){var f;f=this.length+b.length;if(10===this.length&&10===b.length)f=C(this,b,c);else if(63>f)f=w(this,b,c);else if(1024>f){c.negative=b.negative^this.negative;c.length=this.length+b.length;for(var d=0,e=f=0;e<c.length-1;e++){var l=f;f=0;for(var d=d&67108863,a=Math.min(e,b.length-1),m=Math.max(0,e-this.length+1);m<=a;m++){var h=(this.words[e-m]|0)*(b.words[m]|0),q=h&67108863,l=l+(h/67108864|0)|0,q=q+d|0,d=q&67108863,l=l+(q>>>26)|0;f+=l>>>26;l&=67108863}c.words[e]=
d;d=l}0!==d?c.words[e]=d:c.length--;f=c.strip()}else f=(new v).mulp(this,b,c);return f};v.prototype.makeRBT=function(b){for(var c=Array(b),f=q.prototype._countBits(b)-1,d=0;d<b;d++)c[d]=this.revBin(d,f,b);return c};v.prototype.revBin=function(b,c,f){if(0===b||b===f-1)return b;for(var d=f=0;d<c;d++)f|=(b&1)<<c-d-1,b>>=1;return f};v.prototype.permute=function(b,c,f,d,e,l){for(var a=0;a<l;a++)d[a]=c[b[a]],e[a]=f[b[a]]};v.prototype.transform=function(b,c,f,d,e,l){this.permute(l,b,c,f,d,e);for(b=1;b<e;b<<=
1){c=b<<1;l=Math.cos(2*Math.PI/c);for(var a=Math.sin(2*Math.PI/c),m=0;m<e;m+=c)for(var h=l,q=a,H=0;H<b;H++){var z=f[m+H],t=d[m+H],n=f[m+H+b],A=d[m+H+b],r=h*n-q*A,A=h*A+q*n,n=r;f[m+H]=z+n;d[m+H]=t+A;f[m+H+b]=z-n;d[m+H+b]=t-A;H!==c&&(r=l*h-a*q,q=l*q+a*h,h=r)}}};v.prototype.guessLen13b=function(b,c){for(var f=Math.max(c,b)|1,d=f&1,e=0,f=f/2|0;f;f>>>=1)e++;return 1<<e+1+d};v.prototype.conjugate=function(b,c,f){if(!(1>=f))for(var d=0;d<f/2;d++){var e=b[d];b[d]=b[f-d-1];b[f-d-1]=e;e=c[d];c[d]=-c[f-d-1];
c[f-d-1]=-e}};v.prototype.normalize13b=function(b,c){for(var f=0,d=0;d<c/2;d++)f=8192*Math.round(b[2*d+1]/c)+Math.round(b[2*d]/c)+f,b[d]=f&67108863,f=67108864>f?0:f/67108864|0;return b};v.prototype.convert13b=function(b,c,f,e){for(var l=0,a=0;a<c;a++)l+=b[a]|0,f[2*a]=l&8191,l>>>=13,f[2*a+1]=l&8191,l>>>=13;for(a=2*c;a<e;++a)f[a]=0;d(0===l);d(0===(l&-8192))};v.prototype.stub=function(b){for(var c=Array(b),f=0;f<b;f++)c[f]=0;return c};v.prototype.mulp=function(b,c,f){var d=2*this.guessLen13b(b.length,
c.length),e=this.makeRBT(d),l=this.stub(d),a=Array(d),m=Array(d),h=Array(d),q=Array(d),H=Array(d),z=Array(d),t=f.words;t.length=d;this.convert13b(b.words,b.length,a,d);this.convert13b(c.words,c.length,q,d);this.transform(a,l,m,h,d,e);this.transform(q,l,H,z,d,e);for(a=0;a<d;a++)q=m[a]*H[a]-h[a]*z[a],h[a]=m[a]*z[a]+h[a]*H[a],m[a]=q;this.conjugate(m,h,d);this.transform(m,h,t,l,d,e);this.conjugate(t,l,d);this.normalize13b(t,d);f.negative=b.negative^c.negative;f.length=b.length+c.length;return f.strip()};
q.prototype.mul=function(b){var c=new q(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};q.prototype.mulf=function(b){var c=new q(null);c.words=Array(this.length+b.length);return(new v).mulp(this,b,c)};q.prototype.imul=function(b){return this.clone().mulTo(b,this)};q.prototype.imuln=function(b){d("number"===typeof b);d(67108864>b);for(var c=0,f=0;f<this.length;f++){var e=(this.words[f]|0)*b,l=(e&67108863)+(c&67108863),c=c>>26,c=c+(e/67108864|0),c=c+(l>>>26);this.words[f]=l&67108863}0!==
c&&(this.words[f]=c,this.length++);return this};q.prototype.muln=function(b){return this.clone().imuln(b)};q.prototype.sqr=function(){return this.mul(this)};q.prototype.isqr=function(){return this.imul(this.clone())};q.prototype.pow=function(b){for(var c=Array(b.bitLength()),f=0;f<c.length;f++){var d=f%26;c[f]=(b.words[f/26|0]&1<<d)>>>d}if(0===c.length)return new q(1);b=this;for(f=0;f<c.length&&0===c[f];f++,b=b.sqr());if(++f<c.length)for(d=b.sqr();f<c.length;f++,d=d.sqr())0!==c[f]&&(b=b.mul(d));return b};
q.prototype.iushln=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var f=67108863>>>26-c<<26-c,e;if(0!==c){var l=0;for(e=0;e<this.length;e++){var a=this.words[e]&f;this.words[e]=(this.words[e]|0)-a<<c|l;l=a>>>26-c}l&&(this.words[e]=l,this.length++)}if(0!==b){for(e=this.length-1;0<=e;e--)this.words[e+b]=this.words[e];for(e=0;e<b;e++)this.words[e]=0;this.length+=b}return this.strip()};q.prototype.ishln=function(b){d(0===this.negative);return this.iushln(b)};q.prototype.iushrn=function(b,
c,f){d("number"===typeof b&&0<=b);var e=b%26,l=Math.min((b-e)/26,this.length);b=67108863^67108863>>>e<<e;c=(c?(c-c%26)/26:0)-l;c=Math.max(0,c);if(f){for(var a=0;a<l;a++)f.words[a]=this.words[a];f.length=l}if(0!==l)if(this.length>l)for(this.length-=l,a=0;a<this.length;a++)this.words[a]=this.words[a+l];else this.words[0]=0,this.length=1;l=0;for(a=this.length-1;0<=a&&(0!==l||a>=c);a--){var m=this.words[a]|0;this.words[a]=l<<26-e|m>>>e;l=m&b}f&&0!==l&&(f.words[f.length++]=l);0===this.length&&(this.words[0]=
0,this.length=1);return this.strip()};q.prototype.ishrn=function(b,c,f){d(0===this.negative);return this.iushrn(b,c,f)};q.prototype.shln=function(b){return this.clone().ishln(b)};q.prototype.ushln=function(b){return this.clone().iushln(b)};q.prototype.shrn=function(b){return this.clone().ishrn(b)};q.prototype.ushrn=function(b){return this.clone().iushrn(b)};q.prototype.testn=function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};q.prototype.imaskn=
function(b){d("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;d(0===this.negative,"imaskn works only with positive numbers");if(this.length<=b)return this;0!==c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};q.prototype.maskn=function(b){return this.clone().imaskn(b)};q.prototype.iaddn=function(b){d("number"===typeof b);d(67108864>b);if(0>b)return this.isubn(-b);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<
b)return this.words[0]=b-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(b);this.negative=1;return this}return this._iaddn(b)};q.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};q.prototype.isubn=function(b){d("number"===typeof b);d(67108864>b);if(0>b)return this.iaddn(-b);if(0!==this.negative)return this.negative=
0,this.iaddn(b),this.negative=1,this;this.words[0]-=b;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};q.prototype.addn=function(b){return this.clone().iaddn(b)};q.prototype.subn=function(b){return this.clone().isubn(b)};q.prototype.iabs=function(){this.negative=0;return this};q.prototype.abs=function(){return this.clone().iabs()};q.prototype._ishlnsubmul=
function(b,c,f){var e;this._expand(b.length+f);var l,a=0;for(e=0;e<b.length;e++)l=(this.words[e+f]|0)+a,a=(b.words[e]|0)*c,l-=a&67108863,a=(l>>26)-(a/67108864|0),this.words[e+f]=l&67108863;for(;e<this.length-f;e++)l=(this.words[e+f]|0)+a,a=l>>26,this.words[e+f]=l&67108863;if(0===a)return this.strip();d(-1===a);for(e=a=0;e<this.length;e++)l=-(this.words[e]|0)+a,a=l>>26,this.words[e]=l&67108863;this.negative=1;return this.strip()};q.prototype._wordDiv=function(b,c){var f=this.length-b.length,d=this.clone(),
e=b,l=e.words[e.length-1]|0,f=26-this._countBits(l);0!==f&&(e=e.ushln(f),d.iushln(f),l=e.words[e.length-1]|0);var a=d.length-e.length,m;if("mod"!==c){m=new q(null);m.length=a+1;m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}h=d.clone()._ishlnsubmul(e,1,a);0===h.negative&&(d=h,m&&(m.words[a]=1));for(--a;0<=a;a--){h=67108864*(d.words[e.length+a]|0)+(d.words[e.length+a-1]|0);h=Math.min(h/l|0,67108863);for(d._ishlnsubmul(e,h,a);0!==d.negative;)h--,d.negative=0,d._ishlnsubmul(e,1,a),d.isZero()||
(d.negative^=1);m&&(m.words[a]=h)}m&&m.strip();d.strip();"div"!==c&&0!==f&&d.iushrn(f);return{div:m||null,mod:d}};q.prototype.divmod=function(b,c,f){d(!b.isZero());if(this.isZero())return{div:new q(0),mod:new q(0)};var e,l,a;return 0!==this.negative&&0===b.negative?(a=this.neg().divmod(b,c),"mod"!==c&&(e=a.div.neg()),"div"!==c&&(l=a.mod.neg(),f&&0!==l.negative&&l.iadd(b)),{div:e,mod:l}):0===this.negative&&0!==b.negative?(a=this.divmod(b.neg(),c),"mod"!==c&&(e=a.div.neg()),{div:e,mod:a.mod}):0!==(this.negative&
b.negative)?(a=this.neg().divmod(b.neg(),c),"div"!==c&&(l=a.mod.neg(),f&&0!==l.negative&&l.isub(b)),{div:a.div,mod:l}):b.length>this.length||0>this.cmp(b)?{div:new q(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new q(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new q(this.modn(b.words[0]))}:this._wordDiv(b,c)};q.prototype.div=function(b){return this.divmod(b,"div",!1).div};q.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod};
q.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod};q.prototype.divRound=function(b){var c=this.divmod(b);if(c.mod.isZero())return c.div;var f=0!==c.div.negative?c.mod.isub(b):c.mod,d=b.ushrn(1);b=b.andln(1);f=f.cmp(d);return 0>f||1===b&&0===f?c.div:0!==c.div.negative?c.div.isubn(1):c.div.iaddn(1)};q.prototype.modn=function(b){d(67108863>=b);for(var c=67108864%b,f=0,e=this.length-1;0<=e;e--)f=(c*f+(this.words[e]|0))%b;return f};q.prototype.idivn=function(b){d(67108863>=b);for(var c=0,
f=this.length-1;0<=f;f--)c=(this.words[f]|0)+67108864*c,this.words[f]=c/b|0,c%=b;return this.strip()};q.prototype.divn=function(b){return this.clone().idivn(b)};q.prototype.egcd=function(b){d(0===b.negative);d(!b.isZero());var c=this,f=b.clone(),c=0!==c.negative?c.umod(b):c.clone();b=new q(1);for(var e=new q(0),l=new q(0),a=new q(1),m=0;c.isEven()&&f.isEven();)c.iushrn(1),f.iushrn(1),++m;for(var h=f.clone(),z=c.clone();!c.isZero();){for(var t=0,H=1;0===(c.words[0]&H)&&26>t;++t,H<<=1);if(0<t)for(c.iushrn(t);0<
t--;){if(b.isOdd()||e.isOdd())b.iadd(h),e.isub(z);b.iushrn(1);e.iushrn(1)}t=0;for(H=1;0===(f.words[0]&H)&&26>t;++t,H<<=1);if(0<t)for(f.iushrn(t);0<t--;){if(l.isOdd()||a.isOdd())l.iadd(h),a.isub(z);l.iushrn(1);a.iushrn(1)}0<=c.cmp(f)?(c.isub(f),b.isub(l),e.isub(a)):(f.isub(c),l.isub(b),a.isub(e))}return{a:l,b:a,gcd:f.iushln(m)}};q.prototype._invmp=function(b){d(0===b.negative);d(!b.isZero());for(var c=this,f=b.clone(),c=0!==c.negative?c.umod(b):c.clone(),e=new q(1),l=new q(0),a=f.clone();0<c.cmpn(1)&&
0<f.cmpn(1);){for(var m=0,h=1;0===(c.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(c.iushrn(m);0<m--;)e.isOdd()&&e.iadd(a),e.iushrn(1);m=0;for(h=1;0===(f.words[0]&h)&&26>m;++m,h<<=1);if(0<m)for(f.iushrn(m);0<m--;)l.isOdd()&&l.iadd(a),l.iushrn(1);0<=c.cmp(f)?(c.isub(f),e.isub(l)):(f.isub(c),l.isub(e))}c=0===c.cmpn(1)?e:l;0>c.cmpn(0)&&c.iadd(b);return c};q.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var c=this.clone();b=b.clone();c.negative=0;for(var f=b.negative=
0;c.isEven()&&b.isEven();f++)c.iushrn(1),b.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;b.isEven();)b.iushrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.iushln(f)};q.prototype.invm=function(b){return this.egcd(b).a.umod(b)};q.prototype.isEven=function(){return 0===(this.words[0]&1)};q.prototype.isOdd=function(){return 1===(this.words[0]&1)};q.prototype.andln=function(b){return this.words[0]&b};q.prototype.bincn=function(b){d("number"===typeof b);
var c=b%26;b=(b-c)/26;c=1<<c;if(this.length<=b)return this._expand(b+1),this.words[b]|=c,this;for(;0!==c&&b<this.length;b++){var f=this.words[b]|0,f=f+c,c=f>>>26,f=f&67108863;this.words[b]=f}0!==c&&(this.words[b]=c,this.length++);return this};q.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};q.prototype.cmpn=function(b){var c=0>b;if(0!==this.negative&&!c)return-1;if(0===this.negative&&c)return 1;this.strip();1<this.length?b=1:(c&&(b=-b),d(67108863>=b,"Number is too big"),c=
this.words[0]|0,b=c===b?0:c<b?-1:1);return 0!==this.negative?-b|0:b};q.prototype.cmp=function(b){if(0!==this.negative&&0===b.negative)return-1;if(0===this.negative&&0!==b.negative)return 1;b=this.ucmp(b);return 0!==this.negative?-b|0:b};q.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var c=0,f=this.length-1;0<=f;f--){var d=this.words[f]|0,e=b.words[f]|0;if(d!==e){d<e?c=-1:d>e&&(c=1);break}}return c};q.prototype.gtn=function(b){return 1===this.cmpn(b)};
q.prototype.gt=function(b){return 1===this.cmp(b)};q.prototype.gten=function(b){return 0<=this.cmpn(b)};q.prototype.gte=function(b){return 0<=this.cmp(b)};q.prototype.ltn=function(b){return-1===this.cmpn(b)};q.prototype.lt=function(b){return-1===this.cmp(b)};q.prototype.lten=function(b){return 0>=this.cmpn(b)};q.prototype.lte=function(b){return 0>=this.cmp(b)};q.prototype.eqn=function(b){return 0===this.cmpn(b)};q.prototype.eq=function(b){return 0===this.cmp(b)};q.red=function(b){return new l(b)};
q.prototype.toRed=function(b){d(!this.red,"Already a number in reduction context");d(0===this.negative,"red works only with positives");return b.convertTo(this)._forceRed(b)};q.prototype.fromRed=function(){d(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};q.prototype._forceRed=function(b){this.red=b;return this};q.prototype.forceRed=function(b){d(!this.red,"Already a number in reduction context");return this._forceRed(b)};q.prototype.redAdd=function(b){d(this.red,
"redAdd works only with red numbers");return this.red.add(this,b)};q.prototype.redIAdd=function(b){d(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};q.prototype.redSub=function(b){d(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};q.prototype.redISub=function(b){d(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};q.prototype.redShl=function(b){d(this.red,"redShl works only with red numbers");return this.red.shl(this,
b)};q.prototype.redMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};q.prototype.redIMul=function(b){d(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};q.prototype.redSqr=function(){d(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};q.prototype.redISqr=function(){d(this.red,"redISqr works only with red numbers");this.red._verify1(this);
return this.red.isqr(this)};q.prototype.redSqrt=function(){d(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};q.prototype.redInvm=function(){d(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};q.prototype.redNeg=function(){d(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};q.prototype.redPow=function(b){d(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);
return this.red.pow(this,b)};var G={k256:null,p224:null,p192:null,p25519:null};r.prototype._tmp=function(){var b=new q(null);b.words=Array(Math.ceil(this.n/13));return b};r.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):void 0!==b.strip?b.strip():b._strip();return b};r.prototype.split=function(b,c){b.iushrn(this.n,0,c)};r.prototype.imulK=
function(b){return b.imul(this.k)};e(n,r);n.prototype.split=function(b,c){for(var f=Math.min(b.length,9),d=0;d<f;d++)c.words[d]=b.words[d];c.length=f;if(9>=b.length)b.words[0]=0,b.length=1;else{f=b.words[9];c.words[c.length++]=f&4194303;for(d=10;d<b.length;d++){var e=b.words[d]|0;b.words[d-10]=(e&4194303)<<4|f>>>22;f=e}f>>>=22;b.words[d-10]=f;b.length=0===f&&10<b.length?b.length-10:b.length-9}};n.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c=0,f=0;f<b.length;f++){var d=
b.words[f]|0,c=c+977*d;b.words[f]=c&67108863;c=64*d+(c/67108864|0)}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};e(m,r);e(f,r);e(c,r);c.prototype.imulK=function(b){for(var c=0,f=0;f<b.length;f++){var c=19*(b.words[f]|0)+c,d=c&67108863,c=c>>>26;b.words[f]=d}0!==c&&(b.words[b.length++]=c);return b};q._prime=function(b){if(G[b])return G[b];var d;if("k256"===b)d=new n;else if("p224"===b)d=new m;else if("p192"===b)d=new f;else if("p25519"===b)d=new c;else throw Error("Unknown prime "+
b);return G[b]=d};l.prototype._verify1=function(b){d(0===b.negative,"red works only with positives");d(b.red,"red works only with red numbers")};l.prototype._verify2=function(b,c){d(0===(b.negative|c.negative),"red works only with positives");d(b.red&&b.red===c.red,"red works only with red numbers")};l.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)};l.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)};
l.prototype.add=function(b,c){this._verify2(b,c);var f=b.add(c);0<=f.cmp(this.m)&&f.isub(this.m);return f._forceRed(this)};l.prototype.iadd=function(b,c){this._verify2(b,c);var f=b.iadd(c);0<=f.cmp(this.m)&&f.isub(this.m);return f};l.prototype.sub=function(b,c){this._verify2(b,c);var f=b.sub(c);0>f.cmpn(0)&&f.iadd(this.m);return f._forceRed(this)};l.prototype.isub=function(b,c){this._verify2(b,c);var f=b.isub(c);0>f.cmpn(0)&&f.iadd(this.m);return f};l.prototype.shl=function(b,c){this._verify1(b);
return this.imod(b.ushln(c))};l.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};l.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};l.prototype.isqr=function(b){return this.imul(b,b.clone())};l.prototype.sqr=function(b){return this.mul(b,b)};l.prototype.sqrt=function(b){if(b.isZero())return b.clone();var c=this.m.andln(3);d(1===c%2);if(3===c)return c=this.m.add(new q(1)).iushrn(2),this.pow(b,c);for(var f=this.m.subn(1),e=0;!f.isZero()&&0===f.andln(1);)e++,
f.iushrn(1);d(!f.isZero());for(var c=(new q(1)).toRed(this),l=c.redNeg(),a=this.m.subn(1).iushrn(1),m=this.m.bitLength(),m=(new q(2*m*m)).toRed(this);0!==this.pow(m,a).cmp(l);)m.redIAdd(l);a=this.pow(m,f);l=this.pow(b,f.addn(1).iushrn(1));b=this.pow(b,f);for(f=e;0!==b.cmp(c);){m=b;for(e=0;0!==m.cmp(c);e++)m=m.redSqr();d(e<f);a=this.pow(a,(new q(1)).iushln(f-e-1));l=l.redMul(a);a=a.redSqr();b=b.redMul(a);f=e}return l};l.prototype.invm=function(b){b=b._invmp(this.m);return 0!==b.negative?(b.negative=
0,this.imod(b).redNeg()):this.imod(b)};l.prototype.pow=function(b,c){if(c.isZero())return(new q(1)).toRed(this);if(0===c.cmpn(1))return b.clone();var f=Array(16);f[0]=(new q(1)).toRed(this);f[1]=b;for(var d=2;d<f.length;d++)f[d]=this.mul(f[d-1],b);var e=f[0],l=0,a=0,m=c.bitLength()%26;0===m&&(m=26);for(d=c.length-1;0<=d;d--){for(var h=c.words[d],m=m-1;0<=m;m--){var z=h>>m&1;e!==f[0]&&(e=this.sqr(e));if(0===z&&0===l)a=0;else if(l<<=1,l|=z,a++,4===a||0===d&&0===m)e=this.mul(e,f[l]),l=a=0}m=26}return e};
l.prototype.convertTo=function(b){var c=b.umod(this.m);return c===b?c.clone():c};l.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};q.mont=function(b){return new z(b)};e(z,l);z.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))};z.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};z.prototype.imul=function(b,c){if(b.isZero()||c.isZero())return b.words[0]=0,b.length=1,b;var f=b.imul(c),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),
d=f=f.isub(d).iushrn(this.shift);0<=f.cmp(this.m)?d=f.isub(this.m):0>f.cmpn(0)&&(d=f.iadd(this.m));return d._forceRed(this)};z.prototype.mul=function(b,c){if(b.isZero()||c.isZero())return(new q(0))._forceRed(this);var f=b.mul(c),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=f=f.isub(d).iushrn(this.shift);0<=f.cmp(this.m)?d=f.isub(this.m):0>f.cmpn(0)&&(d=f.iadd(this.m));return d._forceRed(this)};z.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{buffer:29}],17:[function(a,g,k){var p=a("./lib/bn-sign");g.exports=function(a){return p(a[0])*p(a[1])}},{"./lib/bn-sign":8}],18:[function(a,g,k){var p=a("./lib/rationalize");g.exports=function(a,d){return p(a[0].mul(d[1]).sub(a[1].mul(d[0])),a[1].mul(d[1]))}},{"./lib/rationalize":13}],19:[function(a,g,k){var p=a("./lib/bn-to-num"),h=a("./lib/ctz");g.exports=function(d){var e=d[0];d=d[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(d.abs()),t=p(a.div),a=a.mod,e=e.negative!==d.negative?
-1:1;if(0===a.cmpn(0))return e*t;if(t){var u=h(t)+4;d=p(a.ushln(u).divRound(d));return e*(t+d*Math.pow(2,-u))}t=d.bitLength()-a.bitLength()+53;d=p(a.ushln(t).divRound(d));if(1023>t)return e*d*Math.pow(2,-t);d*=Math.pow(2,-1023);return e*d*Math.pow(2,1023-t)}},{"./lib/bn-to-num":9,"./lib/ctz":10}],20:[function(a,g,k){function p(d,e,a,h,u){d=["function ",d,"(a,l,h,",h.join(","),"){",u?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];u?0>e.indexOf("c")?d.push(";if(x===y){return m}else if(x<=y){"):
d.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):d.push(";if(",e,"){i=m;");a?d.push("l=m+1}else{h=m-1}"):d.push("h=m-1}else{l=m+1}");d.push("}");u?d.push("return -1};"):d.push("return i};");return d.join("")}function h(d,e,a,h){return(new Function([p("A","x"+d+"y",e,["y"],h),p("P","c(x,y)"+d+"0",e,["y","c"],h),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",
a].join("")))()}g.exports={ge:h(">=",!1,"GE"),gt:h(">",!1,"GT"),lt:h("<",!0,"LT"),le:h("<=",!0,"LE"),eq:h("-",!0,"EQ",!0)}},{}],21:[function(a,g,k){function p(d){var e=32;(d&=-d)&&e--;d&65535&&(e-=16);d&16711935&&(e-=8);d&252645135&&(e-=4);d&858993459&&(e-=2);d&1431655765&&--e;return e}"use restrict";k.INT_BITS=32;k.INT_MAX=2147483647;k.INT_MIN=-2147483648;k.sign=function(d){return(0<d)-(0>d)};k.abs=function(d){var e=d>>31;return(d^e)-e};k.min=function(d,e){return e^(d^e)&-(d<e)};k.max=function(d,
e){return d^(d^e)&-(d<e)};k.isPow2=function(d){return!(d&d-1)&&!!d};k.log2=function(d){var e,a;e=(65535<d)<<4;d>>>=e;a=(255<d)<<3;d>>>=a;e|=a;a=(15<d)<<2;d>>>=a;e|=a;a=(3<d)<<1;return e|a|d>>>a>>1};k.log10=function(d){return 1E9<=d?9:1E8<=d?8:1E7<=d?7:1E6<=d?6:1E5<=d?5:1E4<=d?4:1E3<=d?3:100<=d?2:10<=d?1:0};k.popCount=function(d){d-=d>>>1&1431655765;d=(d&858993459)+(d>>>2&858993459);return 16843009*(d+(d>>>4)&252645135)>>>24};k.countTrailingZeros=p;k.nextPow2=function(d){d+=0===d;--d;d|=d>>>1;d|=d>>>
2;d|=d>>>4;d|=d>>>8;return(d|d>>>16)+1};k.prevPow2=function(d){d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;d|=d>>>16;return d-(d>>>1)};k.parity=function(d){d^=d>>>16;d^=d>>>8;d=(d^d>>>4)&15;return 27030>>>d&1};var h=Array(256);(function(d){for(var e=0;256>e;++e){for(var a=e,h=e,u=7,a=a>>>1;a;a>>>=1)h<<=1,h|=a&1,--u;d[e]=h<<u&255}})(h);k.reverse=function(d){return h[d&255]<<24|h[d>>>8&255]<<16|h[d>>>16&255]<<8|h[d>>>24&255]};k.interleave2=function(d,e){d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|
d<<2)&858993459;e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(d|d<<1)&1431655765|((e|e<<1)&1431655765)<<1};k.deinterleave2=function(d,e){d=d>>>e&1431655765;d=(d|d>>>1)&858993459;d=(d|d>>>2)&252645135;d=(d|d>>>4)&16711935;return((d|d>>>16)&65535)<<16>>16};k.interleave3=function(d,e,a){d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;d=(d|d<<2)&1227133513|((e|e<<2)&1227133513)<<
1;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return d|((a|a<<2)&1227133513)<<2};k.deinterleave3=function(d,e){d=d>>>e&1227133513;d=(d|d>>>2)&3272356035;d=(d|d>>>4)&251719695;d=(d|d>>>8)&4278190335;return((d|d>>>16)&1023)<<22>>22};k.nextCombination=function(d){var e=d|d-1;return e+1|(~e&-~e)-1>>>p(d)+1}},{}],22:[function(a,g,k){function p(d,e,a,h){for(var m=0,f=0,c=0,l=d.length;c<l;++c){var z=d[c],q;a:{for(q=0;q<e;++q)if(!(z[q]<=z[q+e])){q=!0;break a}q=!1}if(!q){for(q=
0;q<2*e;++q)a[m++]=z[q];h[f++]=c}}return f}function h(d,a,h,n){var m=d.length,f=a.length;if(!(0>=m||0>=f)){var c=d[0].length>>>1;if(!(0>=c)){var l,z=e.mallocDouble(2*c*m),A=e.mallocInt32(m),m=p(d,c,z,A);if(0<m){if(1===c&&n)q.init(m),l=q.sweepComplete(c,h,0,m,z,A,0,m,z,A);else{d=e.mallocDouble(2*c*f);var u=e.mallocInt32(f),f=p(a,c,d,u);0<f&&(q.init(m+f),l=1===c?q.sweepBipartite(c,h,0,m,z,A,0,f,d,u):t(c,h,n,m,z,A,f,d,u),e.free(d),e.free(u))}e.free(z);e.free(A)}return l}}}function d(d,e){u.push([d,e])}
g.exports=function(e,a,q){switch(arguments.length){case 1:return u=[],h(e,e,d,!0),u;case 2:if("function"===typeof a)return h(e,e,a,!0);u=[];h(e,a,d,!1);return u;case 3:return h(e,a,q,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=a("typedarray-pool"),q=a("./lib/sweep"),t=a("./lib/intersect"),u},{"./lib/intersect":24,"./lib/sweep":28,"typedarray-pool":91}],23:[function(a,g,k){function p(d){function e(e,a){var q,m="bruteForce"+(e?"Red":"Blue")+(a?"Flip":"")+(d?"Full":"");q=["function ",
m,"(",h.join(),"){","var ","es","=2*","d",";"];var f="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(d?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";e?q.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",f):q.push(f,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");d?q.push("if(y1<x0||x1<y0)continue;"):a?q.push("if(y0<=x0||x1<y0)continue;"):q.push("if(y0<x0||x1<y0)continue;");q.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
a?q.push("yi,xi"):q.push("xi,yi");q.push(");if(rv!==void 0)return rv;}}}");q=q.join("");t.push(q);p.push("return "+m+"("+h.join()+");")}var a="bruteForce"+(d?"Full":"Partial"),t=[],u=h.slice();d||u.splice(3,0,"fp");var p=["function "+a+"("+u.join()+"){"];p.push("if(re-rs>be-bs){");d?(e(!0,!1),p.push("}else{"),e(!1,!1)):(p.push("if(fp){"),e(!0,!0),p.push("}else{"),e(!0,!1),p.push("}}else{if(fp){"),e(!1,!0),p.push("}else{"),e(!1,!1),p.push("}"));p.push("}}return "+a);a=t.join("")+p.join("");return(new Function(a))()}
var h="d ax vv rs re rb ri bs be bb bi".split(" ");k.partial=p(!1);k.full=p(!0)},{}],24:[function(a,g,k){function p(c,f,b,d,e,l,a,m,h){var z=A*c;E[z]=f;E[z+1]=b;E[z+2]=d;E[z+3]=e;E[z+4]=l;E[z+5]=a;c*=D;B[c]=m;B[c+1]=h}g.exports=function(a,g,b,x,k,I,F,U,Q){var J=8*d.log2(x+F+1)*(a+1)|0,P=d.nextPow2(A*J);E.length<P&&(h.free(E),E=h.mallocInt32(P));J=d.nextPow2(D*J);B.length<J&&(h.free(B),B=h.mallocDouble(J));var J=0,P=2*a,L;p(J++,0,0,x,0,F,b?16:0,-Infinity,Infinity);for(b||p(J++,0,0,F,0,x,1,-Infinity,
Infinity);0<J;){--J;b=J*A;var H=E[b];F=E[b+1];var S=E[b+2],K=E[b+3],Z=E[b+4];b=E[b+5];x=J*D;var xa=B[x],ua=B[x+1],ia=b&1,ha=!!(b&16),aa=k,O=I,V=U;x=Q;ia&&(aa=U,O=Q,V=k,x=I);if(b&2&&(S=f(a,H,F,S,aa,O,ua),F>=S))continue;if(b&4&&(F=c(a,H,F,S,aa,O,xa),F>=S))continue;b=S-F;var W=Z-K;if(ha){if(a*b*(b+W)<r){L=t.scanComplete(a,H,g,F,S,aa,O,K,Z,V,x);if(void 0!==L)return L;continue}}else if(a*Math.min(b,W)<w){L=e(a,H,g,ia,F,S,aa,O,K,Z,V,x);if(void 0!==L)return L;continue}else if(a*b*W<v){L=t.scanBipartite(a,
H,g,ia,F,S,aa,O,K,Z,V,x);if(void 0!==L)return L;continue}b=n(a,H,F,S,aa,O,xa,ua);if(F<b)if(a*(b-F)<w){if(L=q(a,H+1,g,F,b,aa,O,K,Z,V,x),void 0!==L)return L}else if(H===a-2){if(L=ia?t.sweepBipartite(a,g,K,Z,V,x,F,b,aa,O):t.sweepBipartite(a,g,F,b,aa,O,K,Z,V,x),void 0!==L)return L}else p(J++,H+1,F,b,K,Z,ia,-Infinity,Infinity),p(J++,H+1,K,Z,F,b,ia^1,-Infinity,Infinity);if(b<S)if(F=u(a,H,K,Z,V,x),L=V[P*F+H],W=m(a,H,F,Z,V,x,L),W<Z&&p(J++,H,b,S,W,Z,(ia|4)+(ha?16:0),L,ua),K<F&&p(J++,H,b,S,K,F,(ia|2)+(ha?16:
0),xa,L),F+1===W){if(ha)a:{K=a;Z=g;x=x[F];ia=2*K;F*=ia;xa=V[F+H];ua=b;b*=ia;b:for(;ua<S;++ua,b+=ia)if(ha=O[ua],ha!==x&&(W=aa[b+H],L=aa[b+H+K],!(xa<W||L<xa))){for(var Ca=H+1;Ca<K;++Ca){W=aa[b+Ca];L=aa[b+Ca+K];var la=V[F+Ca+K];if(L<V[F+Ca]||la<W)continue b}ha=Z(ha,x);if(void 0!==ha){L=ha;break a}}L=void 0}else a:{K=a;Z=g;x=x[F];xa=2*K;F*=xa;ua=V[F+H];ha=b;b*=xa;b:for(;ha<S;++ha,b+=xa)if(W=aa[b+H],L=aa[b+H+K],!(ua<W||L<ua||ia&&ua===W)){Ca=O[ha];for(la=H+1;la<K;++la){W=aa[b+la];L=aa[b+la+K];var za=V[F+
la+K];if(L<V[F+la]||za<W)continue b}W=ia?Z(x,Ca):Z(Ca,x);if(void 0!==W){L=W;break a}}L=void 0}if(void 0!==L)return L}else if(F<W)if(ha){if(S=l(a,H,b,S,aa,O,L),b<S)if(K=m(a,H,b,S,aa,O,L),H===a-2){if(b<K&&(L=t.sweepComplete(a,g,b,K,aa,O,F,W,V,x),void 0!==L)||K<S&&(L=t.sweepBipartite(a,g,K,S,aa,O,F,W,V,x),void 0!==L))return L}else b<K&&p(J++,H+1,b,K,F,W,16,-Infinity,Infinity),K<S&&(p(J++,H+1,K,S,F,W,0,-Infinity,Infinity),p(J++,H+1,F,W,K,S,1,-Infinity,Infinity))}else S=ia?z(a,H,b,S,aa,O,L):l(a,H,b,S,
aa,O,L),b<S&&(H===a-2?ia?t.sweepBipartite(a,g,F,W,V,x,b,S,aa,O):t.sweepBipartite(a,g,b,S,aa,O,F,W,V,x):(p(J++,H+1,b,S,F,W,ia,-Infinity,Infinity),p(J++,H+1,F,W,b,S,ia^1,-Infinity,Infinity)))}};var h=a("typedarray-pool"),d=a("bit-twiddle");g=a("./brute");var e=g.partial,q=g.full,t=a("./sweep"),u=a("./median");a=a("./partition");var w=128,v=4194304,r=4194304,n=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),m=a("lo===p0",["p0"]),f=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),l=a("lo<=p0&&p0<=hi",["p0"]),z=a("lo<p0&&p0<=hi",
["p0"]),A=6,D=2,E=h.mallocInt32(1024),B=h.mallocDouble(1024)},{"./brute":23,"./median":25,"./partition":26,"./sweep":28,"bit-twiddle":21,"typedarray-pool":91}],25:[function(a,g,k){g.exports=function(d,e,a,t,u,w){if(t<=a+1)return a;var v=a,r=t;t=t+a>>>1;for(var n=2*d,m=t,f=u[n*t+e];v<r;){if(r-v<h){for(var m=e,f=u,c=w,l=2*d,z=l*(v+1)+m,A=v+1;A<r;++A,z+=l)for(var D=f[z],g=A,k=l*(A-1);g>v&&f[k+m]>D;--g,k-=l){for(var C=k,G=k+l,b=0;b<l;++b,++C,++G){var x=f[C];f[C]=f[G];f[G]=x}C=c[g];c[g]=c[g-1];c[g-1]=
C}break}z=r-v;m=Math.random()*z+v|0;f=u[n*m+e];l=Math.random()*z+v|0;c=u[n*l+e];A=Math.random()*z+v|0;z=u[n*A+e];f<=c?z>=c?(m=l,f=c):f>=z||(m=A,f=z):c>=z?(m=l,f=c):z>=f||(m=A,f=z);c=n*(r-1);l=n*m;for(z=0;z<n;++z,++c,++l)A=u[c],u[c]=u[l],u[l]=A;c=w[r-1];w[r-1]=w[m];w[m]=c;m=p(d,e,v,r-1,u,w,f);c=n*(r-1);l=n*m;for(z=0;z<n;++z,++c,++l)A=u[c],u[c]=u[l],u[l]=A;c=w[r-1];w[r-1]=w[m];w[m]=c;if(t<m){for(r=m-1;v<r&&u[n*(r-1)+e]===f;)--r;r+=1}else if(m<t)for(v=m+1;v<r&&u[n*v+e]===f;)v+=1;else break}return p(d,
e,a,t,u,w,u[n*t+e])};var p=a("./partition")("lo<p0",["p0"]),h=8},{"./partition":26}],26:[function(a,g,k){g.exports=function(a,d){var e="abcdef".split("").concat(d),q=[];0<=a.indexOf("lo")&&q.push("lo=e[k+n]");0<=a.indexOf("hi")&&q.push("hi=e[k+o]");e.push(p.replace("_",q.join()).replace("$",a));return Function.apply(void 0,e)};var p="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},
{}],27:[function(a,g,k){function p(d,e,a){for(var m=2*(d+1),f=d+1;f<=e;++f){for(var c=a[m++],l=a[m++],h=f,q=m-2;h-- >d;){var t=a[q-2],u=a[q-1];if(t<c)break;else if(t===c&&u<l)break;a[q]=t;a[q+1]=u;q-=2}a[q]=c;a[q+1]=l}}function h(d,e,a){d*=2;e*=2;var m=a[d],f=a[d+1];a[d]=a[e];a[d+1]=a[e+1];a[e]=m;a[e+1]=f}function d(d,e,a){d*=2;e*=2;a[d]=a[e];a[d+1]=a[e+1]}function e(d,e,a,m,f){d*=2;e*=2;f[d]=f[e];f[e]=a;f[d+1]=f[e+1];f[e+1]=m}function q(d,e,a){d*=2;e*=2;var m=a[d],f=a[e];return m<f?!1:m===f?a[d+
1]>a[e+1]:!0}function t(d,e,a,m){d*=2;var f=m[d];return f<e?!0:f===e?m[d+1]<a:!1}function u(a,r,n){var m=(r-a+1)/6|0,f=a+m,c=r-m,l=a+r>>1,z=l-m,A=l+m,g=f,k=z,B=l,C=A,G=c,m=a+1,b=r-1,x=0;q(g,k,n)&&(x=g,g=k,k=x);q(C,G,n)&&(x=C,C=G,G=x);q(g,B,n)&&(x=g,g=B,B=x);q(k,B,n)&&(x=k,k=B,B=x);q(g,C,n)&&(x=g,g=C,C=x);q(B,C,n)&&(x=B,B=C,C=x);q(k,G,n)&&(x=k,k=G,G=x);q(k,B,n)&&(x=k,k=B,B=x);q(C,G,n)&&(x=C,C=G,G=x);for(var x=n[2*k],k=n[2*k+1],M=n[2*C],C=n[2*C+1],g=2*g,B=2*B,G=2*G,f=2*f,l=2*l,c=2*c,I=0;2>I;++I){var F=
n[B+I],U=n[G+I];n[f+I]=n[g+I];n[l+I]=F;n[c+I]=U}d(z,a,n);d(A,r,n);for(z=m;z<=b;++z)if(t(z,x,k,n))z!==m&&h(z,m,n),++m;else if(!t(z,M,C,n))for(;;)if(t(b,M,C,n)){t(b,x,k,n)?(A=z,c=m,l=b,g=n,A*=2,c*=2,l*=2,f=g[A],B=g[A+1],g[A]=g[c],g[A+1]=g[c+1],g[c]=g[l],g[c+1]=g[l+1],g[l]=f,g[l+1]=B,++m):h(z,b,n);--b;break}else if(--b<z)break;e(a,m-1,x,k,n);e(r,b+1,M,C,n);m-2-a<=w?p(a,m-2,n):u(a,m-2,n);r-(b+2)<=w?p(b+2,r,n):u(b+2,r,n);b-m<=w?p(m,b,n):u(m,b,n)}g.exports=function(d,e){e<=4*w?p(0,e-1,d):u(0,e-1,d)};var w=
32},{}],28:[function(a,g,k){function p(f,c,d,e){e=c[e];d=f[d-1];f[e]=d;c[d]=e}g.exports={init:function(f){f=d.nextPow2(f);t.length<f&&(h.free(t),t=h.mallocInt32(f));u.length<f&&(h.free(u),u=h.mallocInt32(f));w.length<f&&(h.free(w),w=h.mallocInt32(f));v.length<f&&(h.free(v),v=h.mallocInt32(f));r.length<f&&(h.free(r),r=h.mallocInt32(f));n.length<f&&(h.free(n),n=h.mallocInt32(f));f*=8;m.length<f&&(h.free(m),m=h.mallocDouble(f))},sweepBipartite:function(f,c,d,a,h,n,r,g,k,G){var b=0,x=2*f;--f;for(var M=
x-1;d<a;++d){var I=n[d],F=x*d;m[b++]=h[F+f];m[b++]=-(I+1);m[b++]=h[F+M];m[b++]=I}for(d=r;d<g;++d)I=G[d]+q,a=x*d,m[b++]=k[a+f],m[b++]=-I,m[b++]=k[a+M],m[b++]=I;g=b>>>1;e(m,g);for(d=G=k=0;d<g;++d)if(b=m[2*d+1]|0,b>=q)b=b-q|0,p(w,v,G--,b);else if(0<=b)p(t,u,k--,b);else{if(b<=-q){b=-b-q|0;for(x=0;x<k;++x)if(a=c(t[x],b),void 0!==a)return a;x=v;a=G++;w[a]=b}else{b=-b-1|0;for(x=0;x<G;++x)if(a=c(b,w[x]),void 0!==a)return a;x=u;a=k++;t[a]=b}x[b]=a}},sweepComplete:function(f,c,d,a,h,q,g,k,C,G){var b=0,x=2*
f;--f;for(var M=x-1;d<a;++d){var I=q[d]+1<<1,F=x*d;m[b++]=h[F+f];m[b++]=-I;m[b++]=h[F+M];m[b++]=I}for(d=g;d<k;++d)I=G[d]+1<<1,a=x*d,m[b++]=C[a+f],m[b++]=-I|1,m[b++]=C[a+M],m[b++]=I|1;k=b>>>1;e(m,k);for(d=b=G=C=0;d<k;++d)if(x=m[2*d+1]|0,a=x&1,d<k-1&&x>>1===m[2*d+3]>>1&&(a=2,d+=1),0>x){x=-(x>>1)-1;for(h=0;h<b;++h)if(q=c(r[h],x),void 0!==q)return q;if(0!==a)for(h=0;h<C;++h)if(q=c(t[h],x),void 0!==q)return q;if(1!==a)for(h=0;h<G;++h)if(q=c(w[h],x),void 0!==q)return q;0===a?(a=u,h=C++,t[h]=x,a[x]=h):1===
a?(a=v,h=G++,w[h]=x,a[x]=h):2===a&&(a=n,h=b++,r[h]=x,a[x]=h)}else x=(x>>1)-1,0===a?p(t,u,C--,x):1===a?p(w,v,G--,x):2===a&&p(r,n,b--,x)},scanBipartite:function(f,c,d,a,h,n,r,v,g,w,b,x){var k=0,I=2*f,F=c+f,U=1,Q=1;for(a?Q=q:U=q;h<n;++h){var J=h+U,P=I*h;m[k++]=r[P+c];m[k++]=-J;m[k++]=r[P+F];m[k++]=J}for(h=g;h<w;++h)J=h+Q,n=I*h,m[k++]=b[n+c],m[k++]=-J;w=k>>>1;e(m,w);for(h=k=0;h<w;++h)if(J=m[2*h+1]|0,0>J)if(J=-J,Q=!1,J>=q?(Q=!a,J-=q):(Q=!!a,--J),Q)Q=u,n=k++,t[n]=J,Q[J]=n;else a:for(Q=x[J],J*=I,n=b[J+c+
1],g=b[J+c+1+f],F=0;F<k;++F){var P=t[F],L=I*P;if(!(g<r[L+c+1]||r[L+c+1+f]<n)){for(var H=c+2;H<f;++H)if(b[J+H+f]<r[L+H]||r[L+H+f]<b[J+H])continue a;P=v[P];P=a?d(Q,P):d(P,Q);if(void 0!==P)return P}}else p(t,u,k--,J-U)},scanComplete:function(f,c,d,a,h,n,r,u,p,v,b){for(var g=0,w=2*f,k=c+f;a<h;++a){var F=a+q,U=w*a;m[g++]=n[U+c];m[g++]=-F;m[g++]=n[U+k];m[g++]=F}for(a=u;a<p;++a)F=a+1,h=w*a,m[g++]=v[h+c],m[g++]=-F;p=g>>>1;e(m,p);for(a=g=0;a<p;++a)if(h=m[2*a+1]|0,0>h)if(F=-h,F>=q)t[g++]=F-q;else a:for(--F,
h=b[F],F*=w,k=v[F+c+1],U=v[F+c+1+f],u=0;u<g;++u){var Q=t[u],J=r[Q];if(J===h)break;Q*=w;if(!(U<n[Q+c+1]||n[Q+c+1+f]<k)){for(var P=c+2;P<f;++P)if(v[F+P+f]<n[Q+P]||n[Q+P+f]<v[F+P])continue a;J=d(J,h);if(void 0!==J)return J}}else{F=h-q;for(u=g-1;0<=u;--u)if(t[u]===F){for(P=u+1;P<g;++P)t[P-1]=t[P];break}--g}}};var h=a("typedarray-pool"),d=a("bit-twiddle"),e=a("./sort"),q=268435456,t=h.mallocInt32(1024),u=h.mallocInt32(1024),w=h.mallocInt32(1024),v=h.mallocInt32(1024),r=h.mallocInt32(1024),n=h.mallocInt32(1024),
m=h.mallocDouble(8192)},{"./sort":27,"bit-twiddle":21,"typedarray-pool":91}],29:[function(a,g,k){},{}],30:[function(a,g,k){(function(p,h){function d(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(b,c){if((h.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");h.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),
b.__proto__=h.prototype):(null===b&&(b=new h(c)),b.length=c);return b}function h(b,c,f){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(b,c,f);if("number"===typeof b){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return u(this,b)}return q(this,b,c,f)}function q(b,c,f,d){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;
if(0>f||c.byteLength<f)throw new RangeError("'offset' is out of bounds");if(c.byteLength<f+(d||0))throw new RangeError("'length' is out of bounds");c=void 0===f&&void 0===d?new Uint8Array(c):void 0===d?new Uint8Array(c,f):new Uint8Array(c,f,d);h.TYPED_ARRAY_SUPPORT?(b=c,b.__proto__=h.prototype):b=g(b,c);return b}if("string"===typeof c){d=b;b=f;if("string"!==typeof b||""===b)b="utf8";if(!h.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');f=n(c,b)|0;d=e(d,f);c=d.write(c,
b);c!==f&&(d=d.slice(0,c));return d}return v(b,c)}function t(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');if(0>b)throw new RangeError('"size" argument must not be negative');}function u(b,c){t(c);b=e(b,0>c?0:r(c)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var f=0;f<c;++f)b[f]=0;return b}function g(b,c){var f=0>c.length?0:r(c.length)|0;b=e(b,f);for(var d=0;d<f;d+=1)b[d]=c[d]&255;return b}function v(b,c){if(h.isBuffer(c)){var f=r(c.length)|0;b=e(b,f);if(0===b.length)return b;
c.copy(b,0,0,f);return b}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(f="number"!==typeof c.length)||(f=c.length,f=f!==f),f?e(b,0):g(b,c);if("Buffer"===c.type&&J(c.data))return g(b,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function r(b){if(b>=(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?
2147483647:1073741823).toString(16)+" bytes");return b|0}function n(b,c){if(h.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var f=b.length;if(0===f)return 0;for(var d=!1;;)switch(c){case "ascii":case "latin1":case "binary":return f;case "utf8":case "utf-8":case void 0:return M(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
f;case "hex":return f>>>1;case "base64":return U.toByteArray(x(b)).length;default:if(d)return M(b).length;c=(""+c).toLowerCase();d=!0}}function m(b,c,f){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===f||f>this.length)f=this.length;if(0>=f)return"";f>>>=0;c>>>=0;if(f<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=f;f=this.length;if(!b||0>b)b=0;if(!c||0>c||c>f)c=f;d="";for(f=b;f<c;++f)b=d,d=this[f],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return z(this,
c,f);case "ascii":b="";for(f=Math.min(this.length,f);c<f;++c)b+=String.fromCharCode(this[c]&127);return b;case "latin1":case "binary":b="";for(f=Math.min(this.length,f);c<f;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&f===this.length?U.fromByteArray(this):U.fromByteArray(this.slice(c,f)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,f);f="";for(b=0;b<c.length;b+=2)f+=String.fromCharCode(c[b]+256*c[b+1]);return f;default:if(d)throw new TypeError("Unknown encoding: "+
b);b=(b+"").toLowerCase();d=!0}}function f(b,c,f){var d=b[c];b[c]=b[f];b[f]=d}function c(b,c,f,d,a){if(0===b.length)return-1;"string"===typeof f?(d=f,f=0):2147483647<f?f=2147483647:-2147483648>f&&(f=-2147483648);f=+f;isNaN(f)&&(f=a?0:b.length-1);0>f&&(f=b.length+f);if(f>=b.length){if(a)return-1;f=b.length-1}else if(0>f)if(a)f=0;else return-1;"string"===typeof c&&(c=h.from(c,d));if(h.isBuffer(c))return 0===c.length?-1:l(b,c,f,d,a);if("number"===typeof c)return c&=255,h.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(b,c,f):Uint8Array.prototype.lastIndexOf.call(b,c,f):l(b,[c],f,d,a);throw new TypeError("val must be string, number or Buffer");}function l(b,c,f,d,a){function e(b,c){return 1===l?b[c]:b.readUInt16BE(c*l)}var l=1,m=b.length,h=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>c.length)return-1;l=2;m/=2;h/=2;f/=2}if(a)for(d=-1;f<m;f++)if(e(b,f)===e(c,-1===
d?0:f-d)){if(-1===d&&(d=f),f-d+1===h)return d*l}else-1!==d&&(f-=f-d),d=-1;else for(f+h>m&&(f=m-h);0<=f;f--){m=!0;for(d=0;d<h;d++)if(e(b,f+d)!==e(c,d)){m=!1;break}if(m)return f}return-1}function z(b,c,f){f=Math.min(b.length,f);for(var d=[];c<f;){var a=b[c],e=null,l=239<a?4:223<a?3:191<a?2:1;if(c+l<=f){var m,h,q;switch(l){case 1:128>a&&(e=a);break;case 2:m=b[c+1];128===(m&192)&&(a=(a&31)<<6|m&63,127<a&&(e=a));break;case 3:m=b[c+1];h=b[c+2];128===(m&192)&&128===(h&192)&&(a=(a&15)<<12|(m&63)<<6|h&63,
2047<a&&(55296>a||57343<a)&&(e=a));break;case 4:m=b[c+1],h=b[c+2],q=b[c+3],128===(m&192)&&128===(h&192)&&128===(q&192)&&(a=(a&15)<<18|(m&63)<<12|(h&63)<<6|q&63,65535<a&&1114112>a&&(e=a))}}null===e?(e=65533,l=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|e&1023);d.push(e);c+=l}b=d.length;if(b<=P)d=String.fromCharCode.apply(String,d);else{f="";for(c=0;c<b;)f+=String.fromCharCode.apply(String,d.slice(c,c+=P));d=f}return d}function A(b,c,f){if(0!==b%1||0>b)throw new RangeError("offset is not uint");
if(b+c>f)throw new RangeError("Trying to access beyond buffer length");}function D(b,c,f,d,a,e){if(!h.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>a||c<e)throw new RangeError('"value" argument is out of bounds');if(f+d>b.length)throw new RangeError("Index out of range");}function E(b,c,f,d){0>c&&(c=65535+c+1);for(var a=0,e=Math.min(b.length-f,2);a<e;++a)b[f+a]=(c&255<<8*(d?a:1-a))>>>8*(d?a:1-a)}function B(b,c,f,d){0>c&&(c=4294967295+c+1);for(var a=0,e=Math.min(b.length-
f,4);a<e;++a)b[f+a]=c>>>8*(d?a:3-a)&255}function C(b,c,f,d,a,e){if(f+d>b.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("Index out of range");}function G(b,c,f,d,a){a||C(b,c,f,4,3.4028234663852886E38,-3.4028234663852886E38);Q.write(b,c,f,d,23,4);return f+4}function b(b,c,f,d,a){a||C(b,c,f,8,1.7976931348623157E308,-1.7976931348623157E308);Q.write(b,c,f,d,52,8);return f+8}function x(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(L,"");if(2>b.length)return"";
for(;0!==b.length%4;)b+="=";return b}function M(b,c){c=c||Infinity;for(var f,d=b.length,a=null,e=[],l=0;l<d;++l){f=b.charCodeAt(l);if(55295<f&&57344>f){if(!a){if(56319<f){-1<(c-=3)&&e.push(239,191,189);continue}else if(l+1===d){-1<(c-=3)&&e.push(239,191,189);continue}a=f;continue}if(56320>f){-1<(c-=3)&&e.push(239,191,189);a=f;continue}f=(a-55296<<10|f-56320)+65536}else a&&-1<(c-=3)&&e.push(239,191,189);a=null;if(128>f){if(0>--c)break;e.push(f)}else if(2048>f){if(0>(c-=2))break;e.push(f>>6|192,f&63|
128)}else if(65536>f){if(0>(c-=3))break;e.push(f>>12|224,f>>6&63|128,f&63|128)}else if(1114112>f){if(0>(c-=4))break;e.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw Error("Invalid code point");}return e}function I(b){for(var c=[],f=0;f<b.length;++f)c.push(b.charCodeAt(f)&255);return c}function F(b,c,f,d){for(var a=0;a<d&&!(a+f>=c.length||a>=b.length);++a)c[a+f]=b[a];return a}var U=a("base64-js"),Q=a("ieee754"),J=a("isarray");k.Buffer=h;k.SlowBuffer=function(b){+b!=b&&(b=0);return h.alloc(+b)};
k.INSPECT_MAX_BYTES=50;h.TYPED_ARRAY_SUPPORT=void 0!==p.TYPED_ARRAY_SUPPORT?p.TYPED_ARRAY_SUPPORT:d();k.kMaxLength=h.TYPED_ARRAY_SUPPORT?2147483647:1073741823;h.poolSize=8192;h._augment=function(b){b.__proto__=h.prototype;return b};h.from=function(b,c,f){return q(null,b,c,f)};h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&($jscomp.initSymbol(),
Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})));h.alloc=function(b,c,f){t(b);b=0>=b?e(null,b):void 0!==c?"string"===typeof f?e(null,b).fill(c,f):e(null,b).fill(c):e(null,b);return b};h.allocUnsafe=function(b){return u(null,b)};h.allocUnsafeSlow=function(b){return u(null,b)};h.isBuffer=function(b){return!(null==b||!b._isBuffer)};h.compare=function(b,c){if(!h.isBuffer(b)||!h.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var f=b.length,d=c.length,
a=0,e=Math.min(f,d);a<e;++a)if(b[a]!==c[a]){f=b[a];d=c[a];break}return f<d?-1:d<f?1:0};h.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};h.concat=function(b,c){if(!J(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return h.alloc(0);var f;if(void 0===c)for(f=c=0;f<b.length;++f)c+=b[f].length;
var d=h.allocUnsafe(c),a=0;for(f=0;f<b.length;++f){var e=b[f];if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(d,a);a+=e.length}return d};h.byteLength=n;h.prototype._isBuffer=!0;h.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)f(this,c,c+1);return this};h.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var c=0;c<b;c+=4)f(this,c,c+3),f(this,c+1,c+2);return this};h.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)f(this,c,c+7),f(this,c+1,c+6),f(this,c+2,c+5),f(this,c+3,c+4);return this};h.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?z(this,0,b):m.apply(this,arguments)};h.prototype.equals=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===h.compare(this,b)};h.prototype.inspect=function(){var b="",c=k.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};h.prototype.compare=function(b,c,f,d,a){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===f&&(f=b?b.length:0);void 0===d&&(d=0);void 0===a&&(a=this.length);if(0>c||f>b.length||0>d||a>this.length)throw new RangeError("out of range index");
if(d>=a&&c>=f)return 0;if(d>=a)return-1;if(c>=f)return 1;c>>>=0;f>>>=0;d>>>=0;a>>>=0;if(this===b)return 0;var e=a-d,l=f-c,m=Math.min(e,l);d=this.slice(d,a);b=b.slice(c,f);for(c=0;c<m;++c)if(d[c]!==b[c]){e=d[c];l=b[c];break}return e<l?-1:l<e?1:0};h.prototype.includes=function(b,c,f){return-1!==this.indexOf(b,c,f)};h.prototype.indexOf=function(b,f,d){return c(this,b,f,d,!0)};h.prototype.lastIndexOf=function(b,f,d){return c(this,b,f,d,!1)};h.prototype.write=function(b,c,f,d){if(void 0===c)d="utf8",f=
this.length,c=0;else if(void 0===f&&"string"===typeof c)d=c,f=this.length,c=0;else if(isFinite(c))c|=0,isFinite(f)?(f|=0,void 0===d&&(d="utf8")):(d=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-c;if(void 0===f||f>a)f=a;if(0<b.length&&(0>f||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(a=!1;;)switch(d){case "hex":a:{c=Number(c)||0;d=this.length-c;f?(f=Number(f),f>d&&(f=
d)):f=d;d=b.length;if(0!==d%2)throw new TypeError("Invalid hex string");f>d/2&&(f=d/2);for(d=0;d<f;++d){a=parseInt(b.substr(2*d,2),16);if(isNaN(a)){b=d;break a}this[c+d]=a}b=d}return b;case "utf8":case "utf-8":return F(M(b,this.length-c),this,c,f);case "ascii":return F(I(b),this,c,f);case "latin1":case "binary":return F(I(b),this,c,f);case "base64":return F(U.toByteArray(x(b)),this,c,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-c;for(var e=void 0,e=a=void 0,l=[],m=0;m<
b.length&&!(0>(d-=2));++m)e=b.charCodeAt(m),a=e>>8,e%=256,l.push(e),l.push(a);return F(l,this,c,f);default:if(a)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();a=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;h.prototype.slice=function(b,c){var f=this.length;b=~~b;c=void 0===c?f:~~c;0>b?(b+=f,0>b&&(b=0)):b>f&&(b=f);0>c?(c+=f,0>c&&(c=0)):c>f&&(c=f);c<b&&(c=b);if(h.TYPED_ARRAY_SUPPORT)f=this.subarray(b,c),f.__proto__=
h.prototype;else for(var d=c-b,f=new h(d,void 0),a=0;a<d;++a)f[a]=this[a+b];return f};h.prototype.readUIntLE=function(b,c,f){b|=0;c|=0;f||A(b,c,this.length);f=this[b];for(var d=1,a=0;++a<c&&(d*=256);)f+=this[b+a]*d;return f};h.prototype.readUIntBE=function(b,c,f){b|=0;c|=0;f||A(b,c,this.length);f=this[b+--c];for(var d=1;0<c&&(d*=256);)f+=this[b+--c]*d;return f};h.prototype.readUInt8=function(b,c){c||A(b,1,this.length);return this[b]};h.prototype.readUInt16LE=function(b,c){c||A(b,2,this.length);return this[b]|
this[b+1]<<8};h.prototype.readUInt16BE=function(b,c){c||A(b,2,this.length);return this[b]<<8|this[b+1]};h.prototype.readUInt32LE=function(b,c){c||A(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};h.prototype.readUInt32BE=function(b,c){c||A(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};h.prototype.readIntLE=function(b,c,f){b|=0;c|=0;f||A(b,c,this.length);f=this[b];for(var d=1,a=0;++a<c&&(d*=256);)f+=this[b+a]*d;f>=128*d&&(f-=Math.pow(2,
8*c));return f};h.prototype.readIntBE=function(b,c,f){b|=0;c|=0;f||A(b,c,this.length);f=c;for(var d=1,a=this[b+--f];0<f&&(d*=256);)a+=this[b+--f]*d;a>=128*d&&(a-=Math.pow(2,8*c));return a};h.prototype.readInt8=function(b,c){c||A(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};h.prototype.readInt16LE=function(b,c){c||A(b,2,this.length);var f=this[b]|this[b+1]<<8;return f&32768?f|4294901760:f};h.prototype.readInt16BE=function(b,c){c||A(b,2,this.length);var f=this[b+1]|this[b]<<8;return f&
32768?f|4294901760:f};h.prototype.readInt32LE=function(b,c){c||A(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};h.prototype.readInt32BE=function(b,c){c||A(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};h.prototype.readFloatLE=function(b,c){c||A(b,4,this.length);return Q.read(this,b,!0,23,4)};h.prototype.readFloatBE=function(b,c){c||A(b,4,this.length);return Q.read(this,b,!1,23,4)};h.prototype.readDoubleLE=function(b,c){c||A(b,8,this.length);return Q.read(this,
b,!0,52,8)};h.prototype.readDoubleBE=function(b,c){c||A(b,8,this.length);return Q.read(this,b,!1,52,8)};h.prototype.writeUIntLE=function(b,c,f,d){b=+b;c|=0;f|=0;d||D(this,b,c,f,Math.pow(2,8*f)-1,0);d=1;var a=0;for(this[c]=b&255;++a<f&&(d*=256);)this[c+a]=b/d&255;return c+f};h.prototype.writeUIntBE=function(b,c,f,d){b=+b;c|=0;f|=0;d||D(this,b,c,f,Math.pow(2,8*f)-1,0);d=f-1;var a=1;for(this[c+d]=b&255;0<=--d&&(a*=256);)this[c+d]=b/a&255;return c+f};h.prototype.writeUInt8=function(b,c,f){b=+b;c|=0;f||
D(this,b,c,1,255,0);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};h.prototype.writeUInt16LE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):E(this,b,c,!0);return c+2};h.prototype.writeUInt16BE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):E(this,b,c,!1);return c+2};h.prototype.writeUInt32LE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?
(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b&255):B(this,b,c,!0);return c+4};h.prototype.writeUInt32BE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):B(this,b,c,!1);return c+4};h.prototype.writeIntLE=function(b,c,f,d){b=+b;c|=0;d||(d=Math.pow(2,8*f-1),D(this,b,c,f,d-1,-d));d=0;var a=1,e=0;for(this[c]=b&255;++d<f&&(a*=256);)0>b&&0===e&&0!==this[c+d-1]&&(e=1),this[c+d]=(b/a>>0)-e&255;return c+
f};h.prototype.writeIntBE=function(b,c,f,d){b=+b;c|=0;d||(d=Math.pow(2,8*f-1),D(this,b,c,f,d-1,-d));d=f-1;var a=1,e=0;for(this[c+d]=b&255;0<=--d&&(a*=256);)0>b&&0===e&&0!==this[c+d+1]&&(e=1),this[c+d]=(b/a>>0)-e&255;return c+f};h.prototype.writeInt8=function(b,c,f){b=+b;c|=0;f||D(this,b,c,1,127,-128);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};h.prototype.writeInt16LE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,
this[c+1]=b>>>8):E(this,b,c,!0);return c+2};h.prototype.writeInt16BE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):E(this,b,c,!1);return c+2};h.prototype.writeInt32LE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):B(this,b,c,!0);return c+4};h.prototype.writeInt32BE=function(b,c,f){b=+b;c|=0;f||D(this,b,c,4,2147483647,-2147483648);
0>b&&(b=4294967295+b+1);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):B(this,b,c,!1);return c+4};h.prototype.writeFloatLE=function(b,c,f){return G(this,b,c,!0,f)};h.prototype.writeFloatBE=function(b,c,f){return G(this,b,c,!1,f)};h.prototype.writeDoubleLE=function(c,f,d){return b(this,c,f,!0,d)};h.prototype.writeDoubleBE=function(c,f,d){return b(this,c,f,!1,d)};h.prototype.copy=function(b,c,f,d){f||(f=0);d||0===d||(d=this.length);c>=b.length&&(c=b.length);
c||(c=0);0<d&&d<f&&(d=f);if(d===f||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-c<d-f&&(d=b.length-c+f);var a=d-f;if(this===b&&f<c&&c<d)for(d=a-1;0<=d;--d)b[d+c]=this[d+f];else if(1E3>a||!h.TYPED_ARRAY_SUPPORT)for(d=0;d<a;++d)b[d+c]=this[d+f];else Uint8Array.prototype.set.call(b,this.subarray(f,
f+a),c);return a};h.prototype.fill=function(b,c,f,d){if("string"===typeof b){"string"===typeof c?(d=c,c=0,f=this.length):"string"===typeof f&&(d=f,f=this.length);if(1===b.length){var a=b.charCodeAt(0);256>a&&(b=a)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!h.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof b&&(b&=255);if(0>c||this.length<c||this.length<f)throw new RangeError("Out of range index");if(f<=
c)return this;c>>>=0;f=void 0===f?this.length:f>>>0;b||(b=0);if("number"===typeof b)for(d=c;d<f;++d)this[d]=b;else for(b=h.isBuffer(b)?b:M((new h(b,d)).toString()),a=b.length,d=0;d<f-c;++d)this[d+c]=b[d%a];return this};var L=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"base64-js":2,buffer:30,ieee754:51,isarray:57}],31:[function(a,g,k){function p(d){return[Math.min(d[0],d[1]),Math.max(d[0],
d[1])]}function h(d,a){return d[0]-a[0]||d[1]-a[1]}function d(d,a,e){return a in d?d[a]:e}var e=a("./lib/monotone"),q=a("./lib/triangulation"),t=a("./lib/delaunay"),u=a("./lib/filter");g.exports=function(a,g,r){Array.isArray(g)?(r=r||{},g=g||[]):(r=g||{},g=[]);var n=!!d(r,"delaunay",!0),m=!!d(r,"interior",!0),f=!!d(r,"exterior",!0);r=!!d(r,"infinity",!1);if(!m&&!f||0===a.length)return[];var c=e(a,g);if(n||m!==f||r){g=q(a.length,g.map(p).sort(h));for(var l=0;l<c.length;++l){var z=c[l];g.addTriangle(z[0],
z[1],z[2])}n&&t(a,g);return f?m?r?u(g,0,r):g.cells():u(g,1,r):u(g,-1)}return c}},{"./lib/delaunay":32,"./lib/filter":33,"./lib/monotone":34,"./lib/triangulation":35}],32:[function(a,g,k){function p(d,a,q,t,u,g){var p=a.opposite(t,u);if(!(0>p)){if(u<t){var r=t;t=u;u=r;r=g;g=p;p=r}a.isConstraint(t,u)||0>h(d[t],d[u],d[g],d[p])&&q.push(t,u)}}var h=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(d,a){for(var q=[],t=d.length,u=a.stars,g=0;g<t;++g)for(var v=u[g],r=1;r<v.length;r+=2){var n=
v[r];if(!(n<g||a.isConstraint(g,n))){for(var m=v[r-1],f=-1,c=1;c<v.length;c+=2)if(v[c-1]===n){f=v[c];break}0>f||0>h(d[g],d[n],d[m],d[f])&&q.push(g,n)}}for(;0<q.length;){n=q.pop();g=q.pop();f=m=-1;v=u[g];for(t=1;t<v.length;t+=2)r=v[t-1],c=v[t],r===n?f=c:c===n&&(m=r);0>m||0>f||0<=h(d[g],d[n],d[m],d[f])||(a.flip(g,n),p(d,a,q,m,g,f),p(d,a,q,g,f,m),p(d,a,q,f,n,m),p(d,a,q,n,m,f))}}},{"binary-search-bounds":20,"robust-in-sphere":73}],33:[function(a,g,k){function p(d,a,h,g,p,v,r){this.cells=d;this.neighbor=
a;this.flags=g;this.constraint=h;this.active=p;this.next=v;this.boundary=r}function h(d,a){return d[0]-a[0]||d[1]-a[1]||d[2]-a[2]}var d=a("binary-search-bounds");g.exports=function(d,a,t){for(var g=d.cells(),w=g.length,v=0;v<w;++v){var r=g[v],n=r[0],m=r[1],f=r[2];m<f?m<n&&(r[0]=m,r[1]=f,r[2]=n):f<n&&(r[0]=f,r[1]=n,r[2]=m)}g.sort(h);for(var c=Array(w),v=0;v<c.length;++v)c[v]=0;var l=[],z=[],A=Array(3*w),k=Array(3*w),E=null;t&&(E=[]);f=new p(g,A,k,c,l,z,E);for(v=0;v<w;++v)for(var r=g[v],B=0;3>B;++B){var n=
r[B],m=r[(B+1)%3],C=A[3*v+B]=f.locate(m,n,d.opposite(m,n)),G=k[3*v+B]=d.isConstraint(n,m);0>C&&(G?z.push(v):(l.push(v),c[v]=1),t&&E.push([m,n,-1]))}if(0===a)return t?f.cells.concat(f.boundary):f.cells;w=1;v=f.active;r=f.next;d=f.flags;g=f.cells;n=f.constraint;for(m=f.neighbor;0<v.length||0<r.length;){for(;0<v.length;)if(c=v.pop(),d[c]!==-w)for(d[c]=w,l=0;3>l;++l)z=m[3*c+l],0<=z&&0===d[z]&&(n[3*c+l]?r.push(z):(v.push(z),d[z]=w));c=r;r=v;v=c;r.length=0;w=-w}for(v=w=0;v<g.length;++v)d[v]===a&&(g[w++]=
g[v]);g.length=w;return t?g.concat(f.boundary):g};p.prototype.locate=function(){var a=[0,0,0];return function(q,t,g){var p=q,v=t,r=g;t<g?t<q&&(p=t,v=g,r=q):g<q&&(p=g,v=q,r=t);if(0>p)return-1;a[0]=p;a[1]=v;a[2]=r;return d.eq(this.cells,a,h)}}()},{"binary-search-bounds":20}],34:[function(a,g,k){function p(d,a,e,h,m){this.a=d;this.b=a;this.idx=e;this.lowerIds=h;this.upperIds=m}function h(d,a,e,h){this.a=d;this.b=a;this.type=e;this.idx=h}function d(d,a){var e=d.a[0]-a.a[0]||d.a[1]-a.a[1]||d.type-a.type;
return e||0!==d.type&&(e=u(d.a,d.b,a.b))?e:d.idx-a.idx}function e(d,a){return u(d.a,d.b,a)}function q(d,a){var e;return(e=d.a[0]<a.a[0]?u(d.a,d.b,a.a):u(a.b,a.a,d.a))?e:(e=a.b[0]<d.b[0]?u(d.a,d.b,a.b):u(a.b,a.a,d.b))||d.idx-a.idx}var t=a("binary-search-bounds"),u=a("robust-orientation")[3];g.exports=function(a,g){for(var r=a.length,n=g.length,m=[],f=0;f<r;++f)m.push(new h(a[f],null,0,f));for(f=0;f<n;++f){var c=g[f],r=a[c[0]],c=a[c[1]];r[0]<c[0]?m.push(new h(r,c,2,f),new h(c,r,1,f)):r[0]>c[0]&&m.push(new h(c,
r,2,f),new h(r,c,1,f))}m.sort(d);f=m[0].a[0]-(1+Math.abs(m[0].a[0]))*Math.pow(2,-52);n=[new p([f,1],[f,0],-1,[],[],[],[])];r=[];f=0;for(c=m.length;f<c;++f){var l=m[f],z=l.type;if(0===z)for(var z=r,A=n,k=a,E=l.a,l=l.idx,B=t.lt(A,E,e),C=t.gt(A,E,e);B<C;++B){for(var G=A[B],b=G.lowerIds,x=b.length;1<x&&0<u(k[b[x-2]],k[b[x-1]],E);)z.push([b[x-1],b[x-2],l]),--x;b.length=x;b.push(l);G=G.upperIds;for(x=G.length;1<x&&0>u(k[G[x-2]],k[G[x-1]],E);)z.push([G[x-2],G[x-1],l]),--x;G.length=x;G.push(l)}else 2===z?
(z=n,A=l,k=t.le(z,A,q),E=z[k],l=E.upperIds,C=l[l.length-1],E.upperIds=[C],z.splice(k+1,0,new p(A.a,A.b,A.idx,[C],l))):(z=n,A=l,k=A.a,A.a=A.b,A.b=k,A=t.eq(z,A,q),z[A-1].upperIds=z[A].upperIds,z.splice(A,1))}return r}},{"binary-search-bounds":20,"robust-orientation":74}],35:[function(a,g,k){function p(d,a){this.stars=d;this.edges=a}function h(d,a,h){for(var g=1,p=d.length;g<p;g+=2)if(d[g-1]===a&&d[g]===h){d[g-1]=d[p-2];d[g]=d[p-1];d.length=p-2;break}}var d=a("binary-search-bounds");g.exports=function(d,
a){for(var h=Array(d),g=0;g<d;++g)h[g]=[];return new p(h,a)};a=p.prototype;a.isConstraint=function(){function a(d,e){return d[0]-e[0]||d[1]-e[1]}var h=[0,0];return function(t,g){h[0]=Math.min(t,g);h[1]=Math.max(t,g);return 0<=d.eq(this.edges,h,a)}}();a.removeTriangle=function(d,a,t){var g=this.stars;h(g[d],a,t);h(g[a],t,d);h(g[t],d,a)};a.addTriangle=function(d,a,h){var g=this.stars;g[d].push(a,h);g[a].push(h,d);g[h].push(d,a)};a.opposite=function(d,a){for(var h=this.stars[a],g=1,p=h.length;g<p;g+=
2)if(h[g]===d)return h[g-1];return-1};a.flip=function(d,a){var h=this.opposite(d,a),g=this.opposite(a,d);this.removeTriangle(d,a,h);this.removeTriangle(a,d,g);this.addTriangle(d,g,h);this.addTriangle(a,h,g)};a.edges=function(){for(var d=this.stars,a=[],h=0,g=d.length;h<g;++h)for(var p=d[h],v=0,r=p.length;v<r;v+=2)a.push([p[v],p[v+1]]);return a};a.cells=function(){for(var d=this.stars,a=[],h=0,g=d.length;h<g;++h)for(var p=d[h],v=0,r=p.length;v<r;v+=2){var n=p[v],m=p[v+1];h<Math.min(n,m)&&a.push([h,
n,m])}return a}},{"binary-search-bounds":20}],36:[function(a,g,k){function p(c){c=z(c);return[D(c,-Infinity),D(c,Infinity)]}function h(c){for(var f=Array(c.length),d=0;d<c.length;++d){var b=c[d];f[d]=[D(b[0],-Infinity),D(b[1],-Infinity),D(b[0],Infinity),D(b[1],Infinity)]}return f}function d(c,d,a){var b=[];m(a,function(a,e){var l=d[a],h=d[e];l[0]!==h[0]&&l[0]!==h[1]&&l[1]!==h[0]&&l[1]!==h[1]&&f(c[l[0]],c[l[1]],c[h[0]],c[h[1]])&&b.push([a,e])});return b}function e(c,d,a,b){var e=[];m(a,b,function(b,
a){var l=d[b];if(l[0]!==a&&l[1]!==a){var h=c[a];f(c[l[0]],c[l[1]],h,h)&&e.push([b,a])}});return e}function q(f,d,a,b,e){var h,m,q=f.map(function(b){return[c(b[0]),c(b[1])]});for(h=0;h<a.length;++h){var g=a[h];m=g[0];var g=g[1],t=d[m],n=d[g];if(t=E(A(f[t[0]]),A(f[t[1]]),A(f[n[0]]),A(f[n[1]])))n=f.length,f.push([z(t[0]),z(t[1])]),q.push(t),b.push([m,n],[g,n])}b.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var f=q[b[1]],d=q[c[1]];return l(f[0],d[0])||l(f[1],d[1])});for(h=b.length-1;0<=h;--h){g=
b[h];m=g[0];t=d[m];n=t[0];a=t[1];var p=f[n],r=f[a];0>(p[0]-r[0]||p[1]-r[1])&&(p=n,n=a,a=p);t[0]=n;var n=t[1]=g[1],u;for(e&&(u=t[2]);0<h&&b[h-1][0]===m;)g=b[--h],g=g[1],e?d.push([n,g,u]):d.push([n,g]),n=g;e?d.push([n,a,u]):d.push([n,a])}return q}function t(c,f,d){d=f.length;for(var b=new n(d),a=[],e=0;e<f.length;++e){var l=f[e],h=p(l[0]),l=p(l[1]);a.push([D(h[0],-Infinity),D(l[0],-Infinity),D(h[1],Infinity),D(l[1],Infinity)])}m(a,function(c,f){b.link(c,f)});h=!0;f=Array(d);for(e=0;e<d;++e)a=b.find(e),
a!==e&&(h=!1,c[a]=[Math.min(c[e][0],c[a][0]),Math.min(c[e][1],c[a][1])]);if(h)return null;for(e=h=0;e<d;++e)a=b.find(e),a===e?(f[e]=h,c[h++]=c[e]):f[e]=-1;c.length=h;for(e=0;e<d;++e)0>f[e]&&(f[e]=f[b.find(e)]);return f}function u(c,f){return c[0]-f[0]||c[1]-f[1]}function w(c,f){var d=c[0]-f[0]||c[1]-f[1];return d?d:c[2]<f[2]?-1:c[2]>f[2]?1:0}function v(c,f,d){if(0!==c.length){if(f)for(var b=0;b<c.length;++b){var a=c[b],e=f[a[0]],l=f[a[1]];a[0]=Math.min(e,l);a[1]=Math.max(e,l)}else for(b=0;b<c.length;++b)a=
c[b],e=a[0],l=a[1],a[0]=Math.min(e,l),a[1]=Math.max(e,l);d?c.sort(w):c.sort(u);for(b=f=1;b<c.length;++b)if(a=c[b-1],e=c[b],e[0]!==a[0]||e[1]!==a[1]||d&&e[2]!==a[2])c[f++]=e;c.length=f}}function r(c,f,a){for(var b=Array(f.length),l=0;l<f.length;++l){var m=f[l],z=c[m[0]],m=c[m[1]];b[l]=[D(Math.min(z[0],m[0]),-Infinity),D(Math.min(z[1],m[1]),-Infinity),D(Math.max(z[0],m[0]),Infinity),D(Math.max(z[1],m[1]),Infinity)]}l=d(c,f,b);z=h(c);b=e(c,f,b,z);m=q(c,f,l,b,a);c=t(c,m,z);v(f,c,a);return c?!0:0<l.length||
0<b.length}g.exports=function(c,f,d){var b;if(d){b=f;for(var a=Array(f.length),e=0;e<f.length;++e){var l=f[e];a[e]=[l[0],l[1],d[e]]}f=a}e=f;l=!!d;a=t(c,[],h(c));v(e,a,l);for(a=!!a;r(c,f,!!d);)a=!0;if(d&&a)for(b.length=0,e=d.length=0;e<f.length;++e)l=f[e],b.push([l[0],l[1]]),d.push(l[2]);return a};var n=a("union-find"),m=a("box-intersect"),f=a("robust-segment-intersect"),c=a("big-rat"),l=a("big-rat/cmp"),z=a("big-rat/to-float"),A=a("rat-vec"),D=a("nextafter"),E=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":37,
"big-rat":6,"big-rat/cmp":4,"big-rat/to-float":19,"box-intersect":22,nextafter:60,"rat-vec":69,"robust-segment-intersect":77,"union-find":92}],37:[function(a,g,k){function p(d,a){return e(h(d[0],a[1]),h(d[1],a[0]))}g.exports=function(a,e,h,m){e=t(e,a);var f=t(m,h);m=p(e,f);if(0===q(m))return null;h=t(a,h);h=p(f,h);h=d(h,m);e=w(e,h);return u(a,e)};var h=a("big-rat/mul"),d=a("big-rat/div"),e=a("big-rat/sub"),q=a("big-rat/sign"),t=a("rat-vec/sub"),u=a("rat-vec/add"),w=a("rat-vec/muls")},{"big-rat/div":5,
"big-rat/mul":15,"big-rat/sign":17,"big-rat/sub":18,"rat-vec/add":68,"rat-vec/muls":70,"rat-vec/sub":71}],38:[function(a,g,k){function p(d,a,h){var g=e(d[0],-a[0]);d=e(d[1],-a[1]);var n=e(h[0],-a[0]);a=e(h[1],-a[1]);g=t(q(g,n),q(d,a));return 0<=g[g.length-1]}g.exports=function(a,e,q,g){var t=h(e,q,g);if(0===t){var t=d(h(a,e,q)),m=d(h(a,e,g));return t===m?0===t&&(q=p(a,e,q),a=p(a,e,g),q!==a)?q?1:-1:0:0===m?0<t?-1:p(a,e,g)?-1:1:0===t?0<m?1:p(a,e,q)?1:-1:d(m-t)}m=h(a,e,q);return 0<m?0<t&&0<h(a,e,g)?
1:-1:0>m?0<t||0<h(a,e,g)?1:-1:0<h(a,e,g)?1:p(a,e,q)?1:-1};var h=a("robust-orientation"),d=a("signum"),e=a("two-sum"),q=a("robust-product"),t=a("robust-sum")},{"robust-orientation":74,"robust-product":75,"robust-sum":79,signum:39,"two-sum":90}],39:[function(a,g,k){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],40:[function(a,g,k){function p(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=
[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var h=a("./lib/thunk.js");g.exports=function(d){var a=new p;a.pre=d.pre;a.body=d.body;a.post=d.post;var q=d.args.slice(0);a.argTypes=q;for(var g=0;g<q.length;++g){var u=q[g];if("array"===u||"object"===typeof u&&u.blockIndices){a.argTypes[g]="array";a.arrayArgs.push(g);a.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0);a.shimArgs.push("array"+g);if(g<a.pre.args.length&&0<a.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");
if(g<a.post.args.length&&0<a.post.args[g].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===u)a.scalarArgs.push(g),a.shimArgs.push("scalar"+g);else if("index"===u){a.indexArgs.push(g);if(g<a.pre.args.length&&0<a.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<a.body.args.length&&a.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<a.post.args.length&&0<a.post.args[g].count)throw Error("cwise: post() block may not reference array index");
}else if("shape"===u){a.shapeArgs.push(g);if(g<a.pre.args.length&&a.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<a.body.args.length&&a.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<a.post.args.length&&a.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof u&&u.offset)a.argTypes[g]="offset",a.offsetArgs.push({array:u.array,offset:u.offset}),a.offsetArgIndex.push(g);
else throw Error("cwise: Unknown argument type "+q[g]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>q.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>q.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>q.length)throw Error("cwise: Too many arguments in post() block");a.debug=!!d.printCode||!!d.debug;a.funcName=d.funcName||"cwise";a.blockSize=d.blockSize||64;return h(a)}},{"./lib/thunk.js":42}],
41:[function(a,g,k){function p(d,a,e){var h=d.length,q=a.arrayArgs.length;a=0<a.indexArgs.length;var g=[],m=[],f=0,c=0,l,z;for(l=0;l<h;++l)m.push(["i",l,"=0"].join(""));for(z=0;z<q;++z)for(l=0;l<h;++l)c=f,f=d[l],0===l?m.push(["d",z,"s",l,"=t",z,"p",f].join("")):m.push(["d",z,"s",l,"=(t",z,"p",f,"-s",c,"*t",z,"p",c,")"].join(""));0<m.length&&g.push("var "+m.join(","));for(l=h-1;0<=l;--l)f=d[l],g.push(["for(i",l,"=0;i",l,"<s",f,";++i",l,"){"].join(""));g.push(e);for(l=0;l<h;++l){c=f;f=d[l];for(z=0;z<
q;++z)g.push(["p",z,"+=d",z,"s",l].join(""));a&&(0<l&&g.push(["index[",c,"]-=s",c].join("")),g.push(["++index[",f,"]"].join("")));g.push("}")}return g.join("\n")}function h(d,a,e,h){for(var q=a.length,g=e.arrayArgs.length,m=e.blockSize,f=0<e.indexArgs.length,c=[],l=0;l<g;++l)c.push(["var offset",l,"=p",l].join(""));for(l=d;l<q;++l)c.push(["for(var j"+l+"=SS[",a[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",m,"){"].join("")),c.push(["s",a[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",
a[l],"=",m].join("")),c.push(["j",l,"-=",m,"}"].join("")),f&&c.push(["index[",a[l],"]=j",l].join(""));for(l=0;l<g;++l){m=["offset"+l];for(f=d;f<q;++f)m.push(["j",f,"*t",l,"p",a[f]].join(""));c.push(["p",l,"=(",m.join("+"),")"].join(""))}c.push(p(a,e,h));for(l=d;l<q;++l)c.push("}");return c.join("\n")}function d(d,a,e){for(var h=d.body,q=[],g=[],m=0;m<d.args.length;++m){var f=d.args[m];if(!(0>=f.count)){var c=new RegExp(f.name,"g"),l="",z=a.arrayArgs.indexOf(m);switch(a.argTypes[m]){case "offset":var p=
a.offsetArgIndex.indexOf(m),z=a.offsetArgs[p].array,l="+q"+p;case "array":var l="p"+z+l,k="l"+m,p="a"+z;if(0===a.arrayBlockIndices[z])1===f.count?"generic"===e[z]?f.lvalue?(q.push(["var ",k,"=",p,".get(",l,")"].join("")),h=h.replace(c,k),g.push([p,".set(",l,",",k,")"].join(""))):h=h.replace(c,[p,".get(",l,")"].join("")):h=h.replace(c,[p,"[",l,"]"].join("")):"generic"===e[z]?(q.push(["var ",k,"=",p,".get(",l,")"].join("")),h=h.replace(c,k),f.lvalue&&g.push([p,".set(",l,",",k,")"].join(""))):(q.push(["var ",
k,"=",p,"[",l,"]"].join("")),h=h.replace(c,k),f.lvalue&&g.push([p,"[",l,"]=",k].join("")));else{c=[f.name];f=[l];for(l=0;l<Math.abs(a.arrayBlockIndices[z]);l++)c.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(l+1)+"*t"+z+"b"+l);c=new RegExp(c.join(""),"g");l=f.join("+");if("generic"===e[z])throw Error("cwise: Generic arrays not supported in combination with blocks!");h=h.replace(c,[p,"[",l,"]"].join(""))}break;case "scalar":h=h.replace(c,"Y"+a.scalarArgs.indexOf(m));break;case "index":h=h.replace(c,"index");
break;case "shape":h=h.replace(c,"shape")}}}return[q.join("\n"),h,g.join("\n")].join("\n").trim()}function e(d){for(var a=Array(d.length),e=!0,h=0;h<d.length;++h){var q=d[h],g=q.match(/\d+/),g=g?g[0]:"";0===q.charAt(0)?a[h]="u"+q.charAt(1)+g:a[h]=q.charAt(0)+g;0<h&&(e=e&&a[h]===a[h-1])}return e?a[0]:a.join("")}var q=a("uniq");g.exports=function(a,g){for(var k=g[1].length-Math.abs(a.arrayBlockIndices[0])|0,v=Array(a.arrayArgs.length),r=Array(a.arrayArgs.length),n=0;n<a.arrayArgs.length;++n)r[n]=g[2*
n],v[n]=g[2*n+1];for(var m=[],f=[],c=[],l=[],z=[],n=0;n<a.arrayArgs.length;++n){0>a.arrayBlockIndices[n]?(c.push(0),l.push(k),m.push(k),f.push(k+a.arrayBlockIndices[n])):(c.push(a.arrayBlockIndices[n]),l.push(a.arrayBlockIndices[n]+k),m.push(0),f.push(a.arrayBlockIndices[n]));for(var A=[],D=0;D<v[n].length;D++)c[n]<=v[n][D]&&v[n][D]<l[n]&&A.push(v[n][D]-c[n]);z.push(A)}f=["SS"];l=["'use strict'"];A=[];for(D=0;D<k;++D)A.push(["s",D,"=SS[",D,"]"].join(""));for(n=0;n<a.arrayArgs.length;++n){f.push("a"+
n);f.push("t"+n);f.push("p"+n);for(D=0;D<k;++D)A.push(["t",n,"p",D,"=t",n,"[",c[n]+D,"]"].join(""));for(D=0;D<Math.abs(a.arrayBlockIndices[n]);++D)A.push(["t",n,"b",D,"=t",n,"[",m[n]+D,"]"].join(""))}for(n=0;n<a.scalarArgs.length;++n)f.push("Y"+n);0<a.shapeArgs.length&&A.push("shape=SS.slice(0)");if(0<a.indexArgs.length){D=Array(k);for(n=0;n<k;++n)D[n]="0";A.push(["index=[",D.join(","),"]"].join(""))}for(n=0;n<a.offsetArgs.length;++n){m=a.offsetArgs[n];c=[];for(D=0;D<m.offset.length;++D)0!==m.offset[D]&&
(1===m.offset[D]?c.push(["t",m.array,"p",D].join("")):c.push([m.offset[D],"*t",m.array,"p",D].join("")));0===c.length?A.push("q"+n+"=0"):A.push(["q",n,"=",c.join("+")].join(""))}n=q([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));A=A.concat(n);0<A.length&&l.push("var "+A.join(","));for(n=0;n<a.arrayArgs.length;++n)l.push("p"+n+"|=0");3<a.pre.body.length&&l.push(d(a.pre,a,r));n=d(a.body,a,r);a:for(D=0,A=z[0].length;D<A;){for(m=1;m<z.length;++m)if(z[m][D]!==z[0][D])break a;
++D}D<k?l.push(h(D,z[0],a,n)):l.push(p(z[0],a,n));3<a.post.body.length&&l.push(d(a.post,a,r));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+l.join("\n")+"\n----------");k=[a.funcName||"unnamed","_cwise_loop_",v[0].join("s"),"m",D,e(r)].join("");return(new Function(["function ",k,"(",f.join(","),"){",l.join("\n"),"} return ",k].join("")))()}},{uniq:93}],42:[function(a,g,k){var p=a("./compile.js");g.exports=function(a){var d=["'use strict'","var CACHED={}"],e=[];d.push(["return function ",
a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var q=[],g=[],k=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],w=[],v=[],r=0;r<a.arrayArgs.length;++r){var n=a.arrayArgs[r];e.push(["t",n,"=array",n,".dtype,r",n,"=array",n,".order"].join(""));q.push("t"+n);q.push("r"+n);g.push("t"+n);g.push("r"+n+".join()");k.push("array"+n+".data");k.push("array"+n+".stride");k.push("array"+n+
".offset|0");0<r&&(w.push("array"+a.arrayArgs[0]+".shape.length===array"+n+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[r]))),v.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+n+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[r])+"]"))}1<a.arrayArgs.length&&(d.push("if (!("+w.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),d.push("for(var shapeIndex=array"+a.arrayArgs[0]+
".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),d.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(r=0;r<a.scalarArgs.length;++r)k.push("scalar"+a.scalarArgs[r]);e.push(["type=[",g.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");d.push("var "+e.join(","));d.push(["if(!proc){CACHED[type]=proc=compile([",q.join(","),"])}return proc(",k.join(","),")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+
d.join("\n")+"\n----------");return(new Function("compile",d.join("\n")))(p.bind(void 0,a))}},{"./compile.js":41}],43:[function(a,g,k){(function(a){var h=!1;if("undefined"!==typeof Float64Array){var d=new Float64Array(1),e=new Uint32Array(d.buffer);d[0]=1;h=!0;1072693248===e[1]?(g.exports=function(a){d[0]=a;return[e[0],e[1]]},g.exports.pack=function(a,h){e[0]=a;e[1]=h;return d[0]},g.exports.lo=function(a){d[0]=a;return e[0]},g.exports.hi=function(a){d[0]=a;return e[1]}):1072693248===e[0]?(g.exports=
function(a){d[0]=a;return[e[1],e[0]]},g.exports.pack=function(a,h){e[1]=a;e[0]=h;return d[0]},g.exports.lo=function(a){d[0]=a;return e[1]},g.exports.hi=function(a){d[0]=a;return e[0]}):h=!1}if(!h){var q=new a(8);g.exports=function(a){q.writeDoubleLE(a,0,!0);return[q.readUInt32LE(0,!0),q.readUInt32LE(4,!0)]};g.exports.pack=function(a,d){q.writeUInt32LE(a,0,!0);q.writeUInt32LE(d,4,!0);return q.readDoubleLE(0,!0)};g.exports.lo=function(a){q.writeDoubleLE(a,0,!0);return q.readUInt32LE(0,!0)};g.exports.hi=
function(a){q.writeDoubleLE(a,0,!0);return q.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var d=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[d,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:30}],44:[function(a,g,k){function p(a,d,e){var g=a[e]|0;if(0>=g)return[];
var t=Array(g),k;if(e===a.length-1)for(k=0;k<g;++k)t[k]=d;else for(k=0;k<g;++k)t[k]=p(a,d,e+1);return t}g.exports=function(a,d){"undefined"===typeof d&&(d=0);switch(typeof a){case "number":if(0<a){var e=a|0,g=d,t,k;t=Array(e);for(k=0;k<e;++k)t[k]=g;return t}break;case "object":if("number"===typeof a.length)return p(a,d,0)}return[]}},{}],45:[function(a,g,k){g.exports=function(a,d){var e=a.length;if("number"!==typeof d){for(var g=d=0;g<e;++g){var t=a[g];d=Math.max(d,t[0],t[1])}d=(d|0)+1}d|=0;for(var k=
Array(d),g=0;g<d;++g)k[g]=[];for(g=0;g<e;++g)t=a[g],k[t[0]].push(t[1]),k[t[1]].push(t[0]);for(e=0;e<d;++e)p(k[e],function(a,d){return a-d});return k};var p=a("uniq")},{uniq:93}],46:[function(a,g,k){function p(a,f,c,d,e,h){this._color=a;this.key=f;this.value=c;this.left=d;this.right=e;this._count=h}function h(a){return new p(a._color,a.key,a.value,a.left,a.right,a._count)}function d(a,f){return new p(a,f.key,f.value,f.left,f.right,f._count)}function e(a){a._count=1+(a.left?a.left._count:0)+(a.right?
a.right._count:0)}function q(a,f){this._compare=a;this.root=f}function t(a,f){if(f.left){var c=t(a,f.left);if(c)return c}if(c=a(f.key,f.value))return c;if(f.right)return t(a,f.right)}function u(a,f,c,d){if(0>=f(a,d.key)){if(d.left){var e=u(a,f,c,d.left);if(e)return e}if(e=c(d.key,d.value))return e}if(d.right)return u(a,f,c,d.right)}function w(a,f,c,d,e){var h=c(a,e.key),g=c(f,e.key);if(0>=h&&(e.left&&(h=w(a,f,c,d,e.left))||0<g&&(h=d(e.key,e.value))))return h;if(0<g&&e.right)return w(a,f,c,d,e.right)}
function v(a,f){this.tree=a;this._stack=f}function r(a,f){a.key=f.key;a.value=f.value;a.left=f.left;a.right=f.right;a._color=f._color;a._count=f._count}function n(a,f){return a<f?-1:a>f?1:0}g.exports=function(a){return new q(a||n,null)};a=q.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(f,c){a.push(f)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(f,c){a.push(c)});return a}});Object.defineProperty(a,"length",{get:function(){return this.root?
this.root._count:0}});a.insert=function(a,f){for(var c=this._compare,l=this.root,h=[],g=[];l;){var n=c(a,l.key);h.push(l);g.push(n);l=0>=n?l.left:l.right}h.push(new p(0,a,f,null,null,1));for(n=h.length-2;0<=n;--n)l=h[n],h[n]=0>=g[n]?new p(l._color,l.key,l.value,h[n+1],l.right,l._count+1):new p(l._color,l.key,l.value,l.left,h[n+1],l._count+1);for(n=h.length-1;1<n;--n){g=h[n-1];l=h[n];if(1===g._color||1===l._color)break;var r=h[n-2];if(r.left===g)if(g.left===l){var t=r.right;if(t&&0===t._color)g._color=
1,r.right=d(1,t),r._color=0,--n;else{r._color=0;r.left=g.right;g._color=1;g.right=r;h[n-2]=g;h[n-1]=l;e(r);e(g);3<=n&&(n=h[n-3],n.left===r?n.left=g:n.right=g);break}}else if((t=r.right)&&0===t._color)g._color=1,r.right=d(1,t),r._color=0,--n;else{g.right=l.left;r._color=0;r.left=l.right;l._color=1;l.left=g;l.right=r;h[n-2]=l;h[n-1]=g;e(r);e(g);e(l);3<=n&&(n=h[n-3],n.left===r?n.left=l:n.right=l);break}else if(g.right===l)if((t=r.left)&&0===t._color)g._color=1,r.left=d(1,t),r._color=0,--n;else{r._color=
0;r.right=g.left;g._color=1;g.left=r;h[n-2]=g;h[n-1]=l;e(r);e(g);3<=n&&(n=h[n-3],n.right===r?n.right=g:n.left=g);break}else if((t=r.left)&&0===t._color)g._color=1,r.left=d(1,t),r._color=0,--n;else{g.left=l.right;r._color=0;r.right=l.left;l._color=1;l.right=g;l.left=r;h[n-2]=l;h[n-1]=g;e(r);e(g);e(l);3<=n&&(n=h[n-3],n.right===r?n.right=l:n.left=l);break}}h[0]._color=1;return new q(c,h[0])};a.forEach=function(a,f,c){if(this.root)switch(arguments.length){case 1:return t(a,this.root);case 2:return u(f,
this._compare,a,this.root);case 3:if(!(0<=this._compare(f,c)))return w(f,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],f=this.root;f;)a.push(f),f=f.left;return new v(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],f=this.root;f;)a.push(f),f=f.right;return new v(this,a)}});a.at=function(a){if(0>a)return new v(this,[]);for(var f=this.root,c=[];;){c.push(f);if(f.left){if(a<f.left._count){f=f.left;continue}a-=f.left._count}if(!a)return new v(this,
c);--a;if(f.right){if(a>=f.right._count)break;f=f.right}else break}return new v(this,[])};a.ge=function(a){for(var f=this._compare,c=this.root,d=[],e=0;c;){var h=f(a,c.key);d.push(c);0>=h&&(e=d.length);c=0>=h?c.left:c.right}d.length=e;return new v(this,d)};a.gt=function(a){for(var d=this._compare,c=this.root,e=[],h=0;c;){var g=d(a,c.key);e.push(c);0>g&&(h=e.length);c=0>g?c.left:c.right}e.length=h;return new v(this,e)};a.lt=function(a){for(var d=this._compare,c=this.root,e=[],h=0;c;){var g=d(a,c.key);
e.push(c);0<g&&(h=e.length);c=0>=g?c.left:c.right}e.length=h;return new v(this,e)};a.le=function(a){for(var d=this._compare,c=this.root,e=[],h=0;c;){var g=d(a,c.key);e.push(c);0<=g&&(h=e.length);c=0>g?c.left:c.right}e.length=h;return new v(this,e)};a.find=function(a){for(var d=this._compare,c=this.root,e=[];c;){var h=d(a,c.key);e.push(c);if(0===h)return new v(this,e);c=0>=h?c.left:c.right}return new v(this,[])};a.remove=function(a){return(a=this.find(a))?a.remove():this};a.get=function(a){for(var d=
this._compare,c=this.root;c;){var e=d(a,c.key);if(0===e)return c.value;c=0>=e?c.left:c.right}};a=v.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new v(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var f=Array(a.length),c=a[a.length-1];f[f.length-
1]=new p(c._color,c.key,c.value,c.left,c.right,c._count);for(var l=a.length-2;0<=l;--l)c=a[l],f[l]=c.left===a[l+1]?new p(c._color,c.key,c.value,f[l+1],c.right,c._count):new p(c._color,c.key,c.value,c.left,f[l+1],c._count);c=f[f.length-1];if(c.left&&c.right){a=f.length;for(c=c.left;c.right;)f.push(c),c=c.right;l=f[a-1];f.push(new p(c._color,l.key,l.value,c.left,c.right,c._count));f[a-1].key=c.key;f[a-1].value=c.value;for(l=f.length-2;l>=a;--l)c=f[l],f[l]=new p(c._color,c.key,c.value,c.left,f[l+1],
c._count);f[a-1].left=f[a]}c=f[f.length-1];if(0===c._color)for(l=f[f.length-2],l.left===c?l.left=null:l.right===c&&(l.right=null),f.pop(),l=0;l<f.length;++l)f[l]._count--;else if(c.left||c.right)for(c.left?r(c,c.left):c.right&&r(c,c.right),c._color=1,l=0;l<f.length-1;++l)f[l]._count--;else{if(1===f.length)return new q(this.tree._compare,null);for(l=0;l<f.length;++l)f[l]._count--;for(var l=f[f.length-2],g,n,t,k=f.length-1;0<=k;--k){a=f[k];if(0===k){a._color=1;break}g=f[k-1];if(g.left===a){n=g.right;
if(n.right&&0===n.right._color){n=g.right=h(n);t=n.right=h(n.right);g.right=n.left;n.left=g;n.right=t;n._color=g._color;a._color=1;g._color=1;t._color=1;e(g);e(n);if(1<k){var u=f[k-2];u.left===g?u.left=n:u.right=n}f[k-1]=n;break}else if(n.left&&0===n.left._color){n=g.right=h(n);t=n.left=h(n.left);g.right=t.left;n.left=t.right;t.left=g;t.right=n;t._color=g._color;g._color=1;n._color=1;a._color=1;e(g);e(n);e(t);1<k&&(u=f[k-2],u.left===g?u.left=t:u.right=t);f[k-1]=t;break}if(1===n._color)if(0===g._color){g._color=
1;g.right=d(0,n);break}else g.right=d(0,n);else n=h(n),g.right=n.left,n.left=g,n._color=g._color,g._color=0,e(g),e(n),1<k&&(u=f[k-2],u.left===g?u.left=n:u.right=n),f[k-1]=n,f[k]=g,k+1<f.length?f[k+1]=a:f.push(a),k+=2}else{n=g.left;if(n.left&&0===n.left._color){n=g.left=h(n);t=n.left=h(n.left);g.left=n.right;n.right=g;n.left=t;n._color=g._color;a._color=1;g._color=1;t._color=1;e(g);e(n);1<k&&(u=f[k-2],u.right===g?u.right=n:u.left=n);f[k-1]=n;break}else if(n.right&&0===n.right._color){n=g.left=h(n);
t=n.right=h(n.right);g.left=t.right;n.right=t.left;t.right=g;t.left=n;t._color=g._color;g._color=1;n._color=1;a._color=1;e(g);e(n);e(t);1<k&&(u=f[k-2],u.right===g?u.right=t:u.left=t);f[k-1]=t;break}if(1===n._color)if(0===g._color){g._color=1;g.left=d(0,n);break}else g.left=d(0,n);else n=h(n),g.left=n.right,n.right=g,n._color=g._color,g._color=0,e(g),e(n),1<k&&(u=f[k-2],u.right===g?u.right=n:u.left=n),f[k-1]=n,f[k]=g,k+1<f.length?f[k+1]=a:f.push(a),k+=2}}l.left===c?l.left=null:l.right=null}return new q(this.tree._compare,
f[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-1].left._count);for(var c=d.length-2;0<=c;--c)d[c+1]===d[c].right&&(++a,
d[c].left&&(a+=d[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===a[d])return!0;return!1}});a.update=function(a){var d=this._stack;if(0===
d.length)throw Error("Can't update empty node!");var c=Array(d.length),e=d[d.length-1];c[c.length-1]=new p(e._color,e.key,a,e.left,e.right,e._count);for(a=d.length-2;0<=a;--a)e=d[a],c[a]=e.left===d[a+1]?new p(e._color,e.key,e.value,c[a+1],e.right,e._count):new p(e._color,e.key,e.value,e.left,c[a+1],e._count);return new q(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-
1].left===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}})},{}],47:[function(a,g,k){function p(a){if(0>a)return Number("0/0");for(var h=d[0],g=d.length-1;0<g;--g)h+=d[g]/(a+g);g=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(g)-g+Math.log(h)-Math.log(a)}var h=[.9999999999998099,676.5203681218851,-1259.1392167224028,
771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];g.exports=function q(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*
q(1-a));if(100<a)return Math.exp(p(a));--a;for(var d=h[0],g=1;9>g;g++)d+=h[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*d};g.exports.log=p},{}],48:[function(a,g,k){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],49:[function(a,g,k){var p=a("./identity");g.exports=function(a,d,e,g){var t,k,w,v,r,n,m,f,c=d[0],l=d[1];d=d[2];w=g[0];v=g[1];k=g[2];m=e[0];g=e[1];t=e[2];
if(1E-6>Math.abs(c-m)&&1E-6>Math.abs(l-g)&&1E-6>Math.abs(d-t))return p(a);e=c-m;g=l-g;m=d-t;f=1/Math.sqrt(e*e+g*g+m*m);e*=f;g*=f;m*=f;t=v*m-k*g;k=k*e-w*m;w=w*g-v*e;(f=Math.sqrt(t*t+k*k+w*w))?(f=1/f,t*=f,k*=f,w*=f):w=k=t=0;v=g*w-m*k;r=m*t-e*w;n=e*k-g*t;(f=Math.sqrt(v*v+r*r+n*n))?(f=1/f,v*=f,r*=f,n*=f):n=r=v=0;a[0]=t;a[1]=v;a[2]=e;a[3]=0;a[4]=k;a[5]=r;a[6]=g;a[7]=0;a[8]=w;a[9]=n;a[10]=m;a[11]=0;a[12]=-(t*c+k*l+w*d);a[13]=-(v*c+r*l+n*d);a[14]=-(e*c+g*l+m*d);a[15]=1;return a}},{"./identity":48}],50:[function(a,
g,k){g.exports=function(a,h,d,e,g){h=1/Math.tan(h/2);var k=1/(e-g);a[0]=h/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+e)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*e*k;a[15]=0;return a}},{}],51:[function(a,g,k){k.read=function(a,h,d,e,g){var k;k=8*g-e-1;var u=(1<<k)-1,w=u>>1,v=-7;g=d?g-1:0;var r=d?-1:1,n=a[h+g];g+=r;d=n&(1<<-v)-1;n>>=-v;for(v+=k;0<v;d=256*d+a[h+g],g+=r,v-=8);k=d&(1<<-v)-1;d>>=-v;for(v+=e;0<v;k=256*k+a[h+g],g+=r,v-=8);if(0===d)d=1-w;else{if(d===u)return k?NaN:
Infinity*(n?-1:1);k+=Math.pow(2,e);d-=w}return(n?-1:1)*k*Math.pow(2,d-e)};k.write=function(a,h,d,e,g,k){var u,w=8*k-g-1,v=(1<<w)-1,r=v>>1,n=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;k=e?0:k-1;var m=e?1:-1,f=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,e=v):(e=Math.floor(Math.log(h)/Math.LN2),1>h*(u=Math.pow(2,-e))&&(e--,u*=2),h=1<=e+r?h+n/u:h+n*Math.pow(2,1-r),2<=h*u&&(e++,u/=2),e+r>=v?(h=0,e=v):1<=e+r?(h=(h*u-1)*Math.pow(2,g),e+=r):(h=h*Math.pow(2,r-1)*Math.pow(2,g),
e=0));for(;8<=g;a[d+k]=h&255,k+=m,h/=256,g-=8);e=e<<g|h;for(w+=g;0<w;a[d+k]=e&255,k+=m,e/=256,w-=8);a[d+k-m]|=128*f}},{}],52:[function(a,g,k){function p(c,a,d,f,e){this.mid=c;this.left=a;this.right=d;this.leftPoints=f;this.rightPoints=e;this.count=(a?a.count:0)+(d?d.count:0)+f.length}function h(c,a){c.mid=a.mid;c.left=a.left;c.right=a.right;c.leftPoints=a.leftPoints;c.rightPoints=a.rightPoints;c.count=a.count}function d(c,a){var d=n(a);c.mid=d.mid;c.left=d.left;c.right=d.right;c.leftPoints=d.leftPoints;
c.rightPoints=d.rightPoints;c.count=d.count}function e(c,a){var f=c.intervals([]),e=f.indexOf(a);if(0>e)return 0;f.splice(e,1);d(c,f);return 1}function q(c,a,d){for(var f=0;f<c.length&&c[f][0]<=a;++f){var e=d(c[f]);if(e)return e}}function t(c,a,d){for(var f=c.length-1;0<=f&&c[f][1]>=a;--f){var e=d(c[f]);if(e)return e}}function u(c,a){for(var d=0;d<c.length;++d){var f=a(c[d]);if(f)return f}}function w(c,a){return c-a}function v(c,a){var d=c[0]-a[0];return d?d:c[1]-a[1]}function r(c,a){var d=c[1]-a[1];
return d?d:c[0]-a[0]}function n(c){if(0===c.length)return null;for(var a=[],d=0;d<c.length;++d)a.push(c[d][0],c[d][1]);a.sort(w);for(var a=a[a.length>>1],f=[],e=[],h=[],d=0;d<c.length;++d){var g=c[d];g[1]<a?f.push(g):a<g[0]?e.push(g):h.push(g)}c=h.slice();h.sort(v);c.sort(r);return new p(a,n(f),n(e),h,c)}function m(c){this.root=c}var f=a("binary-search-bounds");g.exports=function(c){return c&&0!==c.length?new m(n(c)):new m(null)};a=p.prototype;a.intervals=function(c){c.push.apply(c,this.leftPoints);
this.left&&this.left.intervals(c);this.right&&this.right.intervals(c);return c};a.insert=function(c){var a=this.count-this.leftPoints.length;this.count+=1;if(c[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(c),d(this,a)):this.left.insert(c):this.left=n([c]);else if(c[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(c),d(this,a)):this.right.insert(c):this.right=n([c]);else{var a=f.ge(this.leftPoints,c,v),e=f.ge(this.rightPoints,c,
r);this.leftPoints.splice(a,0,c);this.rightPoints.splice(e,0,c)}};a.remove=function(c){var a=this.count-this.leftPoints;if(c[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return e(this,c);a=this.left.remove(c);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(c[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(a-1))return e(this,c);a=this.right.remove(c);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;
return a}if(1===this.count)return this.leftPoints[0]===c?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===c){if(this.left&&this.right){c=this;for(var d=this.left;d.right;)c=d,d=d.right;if(c===this)d.right=this.right;else{var g=this.left,a=this.right;c.count-=d.count;c.right=d.left;d.left=g;d.right=a}h(this,d);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?h(this,this.left):h(this,this.right);return 1}for(g=f.ge(this.leftPoints,
c,v);g<this.leftPoints.length&&this.leftPoints[g][0]===c[0];++g)if(this.leftPoints[g]===c)for(--this.count,this.leftPoints.splice(g,1),a=f.ge(this.rightPoints,c,r);a<this.rightPoints.length&&this.rightPoints[a][1]===c[1];++a)if(this.rightPoints[a]===c)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(c,a){if(c<this.mid){if(this.left){var d=this.left.queryPoint(c,a);if(d)return d}return q(this.leftPoints,c,a)}return c>this.mid?this.right&&(d=this.right.queryPoint(c,a))?d:t(this.rightPoints,
c,a):u(this.leftPoints,a)};a.queryInterval=function(c,a,d){if(c<this.mid&&this.left){var f=this.left.queryInterval(c,a,d);if(f)return f}return a>this.mid&&this.right&&(f=this.right.queryInterval(c,a,d))?f:a<this.mid?q(this.leftPoints,a,d):c>this.mid?t(this.rightPoints,c,d):u(this.leftPoints,d)};a=m.prototype;a.insert=function(c){this.root?this.root.insert(c):this.root=new p(c[0],null,null,[c],[c])};a.remove=function(c){return this.root?(c=this.root.remove(c),2===c&&(this.root=null),0!==c):!1};a.queryPoint=
function(c,a){if(this.root)return this.root.queryPoint(c,a)};a.queryInterval=function(c,a,d){if(c<=a&&this.root)return this.root.queryInterval(c,a,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":53}],53:[function(a,g,k){function p(a,e,h,g,k,p){a=["function ",a,"(a,l,h,",g.join(","),"){",p?"":"var i=",h?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",
k?".get(m)":"[m]"];p?0>e.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;");h?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function h(a,e,h,g){return(new Function([p("A","x"+a+"y",e,["y"],!1,g),p("B","x"+a+"y",e,["y"],!0,g),p("P","c(x,y)"+a+"0",e,["y","c"],!1,g),p("Q","c(x,y)"+a+"0",e,["y","c"],!0,g),"function dispatchBsearch",
h,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",h].join("")))()}g.exports={ge:h(">=",!1,"GE"),gt:h(">",!1,"GT"),lt:h("<",!0,"LT"),le:h("<=",!0,"LE"),eq:h("-",
!0,"EQ",!0)}},{}],54:[function(a,g,k){g.exports=function(a,h){h=h||Array(a.length);for(var d=0;d<a.length;++d)h[a[d]]=d;return h}},{}],55:[function(a,g,k){g.exports=function(a){for(var h=Array(a),d=0;d<a;++d)h[d]=d;return h}},{}],56:[function(a,g,k){function p(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}g.exports=function(a){return null!=a&&(p(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&p(a.slice(0,0))||!!a._isBuffer)}},{}],
57:[function(a,g,k){var p={}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==p.call(a)}},{}],58:[function(a,g,k){function p(a,d,e){for(var f=0,c=0;c<a;++c)d&1<<c&&(f|=1<<e[c]);return f}function h(a,h,g,f,c,l){function k(a,d){b.push("for(","i"+c[a],"=",d,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function A(a){for(var d=0;d<B;++d)b.push("p"+d,"+=","u"+d+"_"+c[a],";");b.push("}")}function D(){for(var c=1;c<1<<C;++c)b.push(v,"=","e"+c,";","e"+c,"=","y"+c,";","y"+c,"=",v,
";")}function E(a,d){if(0>a){for(var h=0;h<B;++h)l[h]?b.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):b.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<B;++h)g.push("c"+h+"_0");for(h=0;h<f;++h)g.push("x"+h);b.push("b0","=",q,"[",w,"]=phase(",g.join(),");");for(g=1;g<1<<C;++g)b.push("b"+g,"=",q,"[",w,"+","e"+g,"];");h=[];for(g=1;g<1<<C;++g)h.push("(b0!==b"+g+")");b.push("if(",h.join("||"),"){");for(var m=[],h=0;h<C;++h)m.push("i"+h);for(h=0;h<B;++h)for(m.push("c"+h+"_0"),g=1;g<1<<C;++g)l[h]?
b.push("c"+h+"_"+g,"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):b.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),m.push("c"+h+"_"+g);for(h=0;h<1<<C;++h)m.push("b"+h);for(h=0;h<f;++h)m.push("x"+h);b.push("vertex(",m.join(),");","v0","=",e,"[",w,"]=",t,"++;");h=(1<<C)-1;m="b"+h;for(g=0;g<C;++g)if(0===(d&~(1<<g))){for(var n=h^1<<g,r="b"+n,p=[],u=n;0<u;u=u-1&n)p.push(e+"["+w+"+"+("e"+u)+"]");p.push("v0");for(u=0;u<B;++u)g&1?p.push("c"+u+"_"+h,"c"+u+"_"+n):p.push("c"+u+"_"+n,"c"+u+"_"+h);
g&1?p.push(m,r):p.push(r,m);for(u=0;u<f;++u)p.push("x"+u);b.push("if(",m,"!==",r,"){","face(",p.join(),")}")}b.push("}",w,"+=1;")}else{for(g=a-1;0<=g;--g)k(g,0);h=[];for(g=0;g<B;++g)l[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<f;++g)h.push("x"+g);b.push(q,"[",w,"++]=phase(",h.join(),");");for(g=0;g<a;++g)A(g);for(g=0;g<B;++g)b.push("p"+g,"+=","u"+g+"_"+c[a],";");b.push("if(","s"+c[a],">0){","i"+c[a],"=1;");E(a-1,d|1<<c[a]);for(g=0;g<B;++g)b.push("p"+g,"+=","u"+g+
"_"+c[a],";");a===C-1&&(b.push(w,"=0;"),D());k(a,2);E(a-1,d);a===C-1&&(b.push("if(","i"+c[C-1],"&1){",w,"=0;}"),D());A(a);b.push("}")}}var B=l.length,C=c.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var G="extractContour"+c.join("_"),b=[],x=[],M=[],I=0;I<B;++I)M.push("a"+I);for(I=0;I<f;++I)M.push("x"+I);for(I=0;I<C;++I)x.push("s"+I+"=a0.shape["+I+"]|0");for(I=0;I<B;++I){x.push("d"+I+"="+("a"+I)+".data","o"+I+"="+("a"+I)+".offset|0");for(var F=0;F<C;++F)x.push("t"+
I+"_"+F+"="+("a"+I)+".stride["+F+"]|0")}for(I=0;I<B;++I)for(x.push("p"+I+"="+("o"+I)),x.push("c"+I+"_0"),F=1;F<1<<C;++F){for(var U=[],Q=0;Q<C;++Q)F&1<<Q&&U.push("-"+("t"+I+"_"+Q));x.push("d"+I+"_"+F+"=("+U.join("")+")|0");x.push("c"+I+"_"+F+"=0")}for(I=0;I<B;++I)for(F=0;F<C;++F)Q=["t"+I+"_"+c[F]],0<F&&Q.push("t"+I+"_"+c[F-1]+"*"+("s"+c[F-1])),x.push("u"+I+"_"+c[F]+"=("+Q.join("-")+")|0");for(I=0;I<C;++I)x.push("i"+I+"=0");x.push(t+"=0");F=["2"];for(I=C-2;0<=I;--I)F.push("s"+c[I]);x.push(u+"=("+F.join("*")+
")|0",q+"=mallocUint32("+u+")",e+"=mallocUint32("+u+")",w+"=0");x.push("b0=0");for(F=1;F<1<<C;++F){I=[];U=[];for(Q=0;Q<C;++Q)F&1<<Q&&(0===U.length?I.push("1"):I.unshift(U.join("*"))),U.push("s"+c[Q]);Q="";0>I[0].indexOf("s"+c[C-2])&&(Q="-");U=p(C,F,c);x.push("e"+U+"=(-"+I.join("-")+")|0","y"+U+"=("+Q+I.join("-")+")|0","b"+U+"=0")}x.push("v0=0",v+"=0");E(C-1,0);b.push("freeUint32(",e,");freeUint32(",q,");");G=["'use strict';function ",G,"(",M.join(),"){var ",x.join(),";",b.join(""),"}return ",G].join("");
return(new Function("vertex","face","phase","mallocUint32","freeUint32",G))(a,h,g,d.mallocUint32,d.freeUint32)}var d=a("typedarray-pool");g.exports=function(a){function d(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&d("Must specify arguments");var e=a.order;Array.isArray(e)||d("Must specify order");var f=a.arrayArguments||1;1>f&&d("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");
"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var g=a.getters||[],q=Array(f),k=0;k<f;++k)0<=g.indexOf(k)?q[k]=!0:q[k]=!1;return h(a.vertex,a.cell,a.phase,c,e,q)};var e="V",q="P",t="N",u="Q",w="X",v="T"},{"typedarray-pool":91}],59:[function(a,g,k){function p(a,d){return a[0]-d[0]}function h(){var a=this.stride,d=Array(a.length),e;for(e=0;e<d.length;++e)d[e]=[Math.abs(a[e]),e];d.sort(p);a=Array(d.length);for(e=
0;e<a.length;++e)a[e]=d[e][1];return a}function d(a,d){var e=["View",d,"d",a].join("");0>d&&(e="View_Nil"+a);var g="generic"===a;if(-1===d){var f,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
e+"(a){return new "+e+"(a);}");return e()}if(0===d)return e=new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
e+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(w[a][0]);f=["'use strict'"];var c=q(d),l=c.map(function(a){return"i"+a}),k="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),p=c.map(function(a){return"b"+a}).join(","),t=c.map(function(a){return"c"+a}).join(",");f.push("function "+
e+"(a,"+p+","+t+",d){this.data=a","this.shape=["+p+"]","this.stride=["+t+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);f.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===d?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>d?(f.push("function "+e+"_order(){"),2===d?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})"));f.push("proto.set=function "+e+"_set("+l.join(",")+",v){");g?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}");f.push("proto.get=function "+e+"_get("+l.join(",")+"){");g?f.push("return this.data.get("+
k+")}"):f.push("return this.data["+k+"]}");f.push("proto.index=function "+e+"_index(",l.join(),"){return "+k+"}");f.push("proto.hi=function "+e+"_hi("+l.join(",")+"){return new "+e+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");g=c.map(function(a){return"a"+a+"=this.shape["+a+"]"});k=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+
e+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+k.join(","));for(g=0;g<d;++g)f.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");f.push("return new "+e+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");f.push("proto.step=function "+e+"_step("+l.join(",")+"){var "+c.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<d;++g)f.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");f.push("return new "+e+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");k=Array(d);p=Array(d);for(g=0;g<d;++g)k[g]="a[i"+g+"]",p[g]="b[i"+g+"]";f.push("proto.transpose=function "+e+"_transpose("+l+"){"+l.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+k.join(",")+","+p.join(",")+",this.offset)}");f.push("proto.pick=function "+e+"_pick("+l+"){var a=[],b=[],c=this.offset");for(g=0;g<d;++g)f.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+e+"(data,shape,stride,offset){return new "+
e+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",f.join("\n"));return e(w[a],h)}function e(a){if(t(a))return"buffer";if(u)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var q=a("iota-array"),t=a("is-buffer"),u="undefined"!==typeof Float64Array,w={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};
(function(){for(var a in w)w[a].push(d(a,-1))});g.exports=function(a,h,g,m){if(void 0===a){var f=w.array[0];return f([])}"number"===typeof a&&(a=[a]);void 0===h&&(h=[a.length]);f=h.length;if(void 0===g){g=Array(f);for(var c=f-1,l=1;0<=c;--c)g[c]=l,l*=h[c]}if(void 0===m)for(c=m=0;c<f;++c)0>g[c]&&(m-=(h[c]-1)*g[c]);c=e(a);for(l=w[c];l.length<=f+1;)l.push(d(c,l.length-1));f=l[f+1];return f(a,h,g,m)}},{"iota-array":55,"is-buffer":56}],60:[function(a,g,k){var p=a("double-bits"),h=Math.pow(2,-1074);g.exports=
function(a,e){if(isNaN(a)||isNaN(e))return NaN;if(a===e)return a;if(0===a)return 0>e?-h:h;var g=p.hi(a),k=p.lo(a);e>a===0<a?4294967295===k?(g+=1,k=0):k+=1:0===k?(k=4294967295,--g):--k;return p.pack(k,g)}},{"double-bits":43}],61:[function(a,g,k){g.exports=function(a){var e=a.length;if(e<p)for(var g=1,k=0;k<e;++k)for(var u=0;u<k;++u)if(a[k]<a[u])g=-g;else{if(a[k]===a[u])return 0}else{for(var w=h.mallocUint8(e),k=0;k<e;++k)w[k]=0;g=1;for(k=0;k<e;++k)if(!w[k]){var v=1;w[k]=1;for(u=a[k];u!==k;u=a[u]){if(w[u])return h.freeUint8(w),
0;v+=1;w[u]=1}v&1||(g=-g)}h.freeUint8(w)}return g};var p=32,h=a("typedarray-pool")},{"typedarray-pool":91}],62:[function(a,g,k){var p=a("typedarray-pool"),h=a("invert-permutation");k.rank=function(a){var e=a.length;switch(e){case 0:case 1:return 0;case 2:return a[1]}var g=p.mallocUint32(e),k=p.mallocUint32(e),u=0,w;h(a,k);for(w=0;w<e;++w)g[w]=a[w];for(w=e-1;0<w;--w)e=k[w],a=g[w],g[w]=g[e],g[e]=a,k[w]=k[a],k[a]=e,u=(u+a)*w;p.freeUint32(k);p.freeUint32(g);return u};k.unrank=function(a,e,g){switch(a){case 0:return g?
g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(e?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):e?[0,1]:[1,0]}g=g||Array(a);var h,k,p=1;g[0]=0;for(k=1;k<a;++k)g[k]=k,p=p*k|0;for(k=a-1;0<k;--k)a=e/p|0,e=e-a*p|0,p=p/k|0,h=g[k]|0,g[k]=g[a]|0,g[a]=h|0;return g}},{"invert-permutation":54,"typedarray-pool":91}],63:[function(a,g,k){g.exports=function(a,d){function e(a,d){var f=v[d][a[d]];f.splice(f.indexOf(a),1)}function g(a,f,h){var m,k,n;for(k=0;2>k;++k)if(0<v[k][f].length){m=v[k][f][0];n=k;break}k=m[n^1];for(var q=
0;2>q;++q)for(var r=v[q][f],t=0;t<r.length;++t){var b=r[t],u=b[q^1];0<p(d[a],d[f],d[k],d[u])&&(m=b,k=u,n=q)}if(h)return k;m&&e(m,n);return k}function k(a,f){var h=v[f][a][0],m=[a];e(h,f);for(h=h[f^1];;){for(;h!==a;)m.push(h),h=g(m[m.length-2],h,!1);if(0===v[0][a].length+v[1][a].length)break;var h=m[m.length-1],n=a,r=m[1],t=g(h,n,!0);if(0>p(d[h],d[n],d[r],d[t]))break;m.push(a);h=g(h,n)}return m}for(var u=d.length|0,w=a.length,v=[Array(u),Array(u)],r=0;r<u;++r)v[0][r]=[],v[1][r]=[];for(r=0;r<w;++r){var n=
a[r];v[0][n[0]].push(n);v[1][n[1]].push(n)}w=[];for(r=0;r<u;++r)0===v[0][r].length+v[1][r].length&&w.push([r]);for(r=0;r<u;++r)for(n=0;2>n;++n){for(var m=[];0<v[n][r].length;){var f=k(r,n);f[1]===f[f.length-1]?m.push.apply(m,f):(0<m.length&&w.push(m),m=f)}0<m.length&&w.push(m)}return w};var p=a("compare-angle")},{"compare-angle":38}],64:[function(a,g,k){g.exports=function(a,d){for(var e=p(a,d.length),g=Array(d.length),k=Array(d.length),u=[],w=0;w<d.length;++w){var v=e[w].length;k[w]=v;g[w]=!0;1>=
v&&u.push(w)}for(;0<u.length;)for(v=u.pop(),g[v]=!1,v=e[v],w=0;w<v.length;++w){var r=v[w];0===--k[r]&&u.push(r)}e=Array(d.length);k=[];for(w=0;w<d.length;++w)g[w]?(v=k.length,e[w]=v,k.push(d[w])):e[w]=-1;u=[];for(w=0;w<a.length;++w)v=a[w],g[v[0]]&&g[v[1]]&&u.push([e[v[0]],e[v[1]]]);return[u,k]};var p=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":45}],65:[function(a,g,k){function p(a,d){for(var e=Array(a),f=0;f<a;++f)e[f]=d;return e}function h(a){for(var d=Array(a),e=0;e<a;++e)d[e]=[];return d}
g.exports=function(a,g){function m(a){for(var b=a.length,c=0;c<b;++c)if(!F[a[c]])return!1;return!0}var f=v(a,g);a=f[0];g=f[1];for(var c=g.length,l=d(a,g.length),k=0;k<c;++k)if(1===l[k].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var l=e(a,g),l=l.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var f=g[a[d]],e=g[a[(d+1)%b]],h=t(-f[0],f[1]),l=t(-f[0],e[1]),f=t(e[0],f[1]),e=t(e[0],e[1]),c=u(c,u(u(h,l),u(f,e)));return 0<c[c.length-1]}),f=l.length,A=Array(f),D=Array(f),
k=0;k<f;++k){A[k]=k;var E=Array(f),B=l[k].map(function(a){return g[a]}),C=q([B]),G=0,b=0;a:for(;b<f;++b)if(E[b]=0,k!==b){for(var B=l[b],x=B.length,M=0;M<x;++M){var I=C(g[B[M]]);if(0!==I){0>I&&(E[b]=1,G+=1);continue a}}E[b]=1;G+=1}D[k]=[G,k,E]}D.sort(function(a,b){return b[0]-a[0]});for(k=0;k<f;++k)for(E=D[k],B=E[1],x=E[2],b=0;b<f;++b)x[b]&&(A[b]=B);D=h(f);for(k=0;k<f;++k)D[k].push(A[k]),D[A[k]].push(k);for(var E={},F=p(c,!1),k=0;k<f;++k)for(B=l[k],x=B.length,b=0;b<x;++b)c=B[b],C=B[(b+1)%x],G=Math.min(c,
C)+":"+Math.max(c,C),G in E?(G=E[G],D[G].push(k),D[k].push(G),F[c]=F[C]=!0):E[G]=k;b=[];c=p(f,-1);for(k=0;k<f;++k)A[k]!==k||m(l[k])?c[k]=-1:(b.push(k),c[k]=0);for(f=[];0<b.length;){k=b.pop();A=D[k];w(A,function(a,b){return a-b});var x=A.length,E=c[k],U;0===E&&(B=l[k],U=[B]);for(k=0;k<x;++k)B=A[k],0<=c[B]||(c[B]=E^1,b.push(B),0===E&&(B=l[B],m(B)||(B.reverse(),U.push(B))));0===E&&f.push(U)}return f};var d=a("edges-to-adjacency-list"),e=a("planar-dual"),q=a("point-in-big-polygon"),t=a("two-product"),
u=a("robust-sum"),w=a("uniq"),v=a("./lib/trim-leaves")},{"./lib/trim-leaves":64,"edges-to-adjacency-list":45,"planar-dual":63,"point-in-big-polygon":67,"robust-sum":79,"two-product":89,uniq:93}],66:[function(a,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],67:[function(a,g,k){function p(){return!0}function h(a){return function(d,c){var e=a[d];return e?!!e.queryPoint(c,p):!1}}function d(a){for(var d={},c=0;c<a.length;++c){var e=a[c],g=e[0][0],k=e[0][1],e=e[1][1],k=[Math.min(k,e),Math.max(k,
e)];g in d?d[g].push(k):d[g]=[k]}a={};g=Object.keys(d);for(c=0;c<g.length;++c)a[g[c]]=r(d[g[c]]);return h(a)}function e(a,d){return function(c){var e=n.le(d,c[0]);if(0>e)return 1;var g=a[e];if(!g)if(0<e&&d[e]===c[0])g=a[e-1];else return 1;for(e=1;g;){var h=g.key,k=w(c,h[0],h[1]);if(h[0][0]<h[1][0])if(0>k)g=g.left;else if(0<k)e=-1,g=g.right;else return 0;else if(0<k)g=g.left;else if(0>k)e=1,g=g.right;else return 0}return e}}function q(a){return 1}function t(a){return function(d){return a(d[0],d[1])?
0:1}}function u(a,d){return function(c){return a(c[0],c[1])?0:d(c)}}g.exports=function(a){for(var f=a.length,c=[],g=[],h=0;h<f;++h)for(var k=a[h],n=k.length,p=n-1,r=0;r<n;p=r++){var p=k[p],w=k[r];p[0]===w[0]?g.push([p,w]):c.push([p,w])}if(0===c.length)return 0===g.length?q:t(d(g));a=v(c);a=e(a.slabs,a.coordinates);return 0===g.length?a:u(d(g),a)};var w=a("robust-orientation")[3],v=a("slab-decomposition"),r=a("interval-tree-1d"),n=a("binary-search-bounds")},{"binary-search-bounds":66,"interval-tree-1d":52,
"robust-orientation":74,"slab-decomposition":86}],68:[function(a,g,k){var p=a("big-rat/add");g.exports=function(a,d){for(var e=a.length,g=Array(e),k=0;k<e;++k)g[k]=p(a[k],d[k]);return g}},{"big-rat/add":3}],69:[function(a,g,k){g.exports=function(a){for(var d=Array(a.length),e=0;e<a.length;++e)d[e]=p(a[e]);return d};var p=a("big-rat")},{"big-rat":6}],70:[function(a,g,k){var p=a("big-rat"),h=a("big-rat/mul");g.exports=function(a,e){for(var g=p(e),k=a.length,u=Array(k),w=0;w<k;++w)u[w]=h(a[w],g);return u}},
{"big-rat":6,"big-rat/mul":15}],71:[function(a,g,k){var p=a("big-rat/sub");g.exports=function(a,d){for(var e=a.length,g=Array(e),k=0;k<e;++k)g[k]=p(a[k],d[k]);return g}},{"big-rat/sub":18}],72:[function(a,g,k){(function(a,h){"object"===typeof k&&"undefined"!==typeof g?g.exports=h():"function"===typeof define&&define.amd?define(h):a.createREGL=h()})(this,function(){function a(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function g(a){a=Error("(regl) "+a);console.error(a);throw a;}function d(a,
b){a||g(b)}function e(a){return a?": "+a:""}function k(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function t(a,b,c){0>b.indexOf(a)&&g("invalid value"+e(c)+". must be one of: "+b)}function u(a,b){for(a+="";a.length<b;)a=" "+a;return a}function w(){this.name=
"unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(a,b){this.number=a;this.line=b;this.errors=[]}function r(a,b,c){this.file=a;this.line=b;this.message=c}function n(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function m(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?
a[1]:"unknown"}function f(b,c){var d=b.split("\n"),f=1,e=0,g={unknown:new w,0:new w};g.unknown.name=g[0].name=c||n();g.unknown.lines.push(new v(0,""));for(var h=0;h<d.length;++h){var l=d[h],k=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(k)switch(k[1]){case "line":if(k=/(\d+)(\s+\d+)?/.exec(k[2]))f=k[1]|0,k[2]&&(e=k[2]|0,e in g||(g[e]=new w));break;case "define":if(k=/SHADER_NAME(_B64)?\s+(.*)$/.exec(k[2]))g[e].name=k[1]?a(k[2]):k[2]}g[e].lines.push(new v(f++,l))}Object.keys(g).forEach(function(a){var b=
g[a];b.lines.forEach(function(a){b.index[a.number]=a})});return g}function c(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);c?b.push(new r(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new r("unknown",0,a))}});return b}function l(a,b){b.forEach(function(b){var c=a[b.file];if(c){var d=c.index[b.line];if(d){d.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function z(a){a._commandRef=n()}
function A(a,b){var c=m();g(a+" in command "+(b||n())+("unknown"===c?"":" called from "+c))}function D(a,b,c,d){k(a,b)||A("invalid parameter type"+e(c)+". expected "+b+", got "+typeof a,d||n())}function E(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:va[a]*b}function B(a,b){this.id=Pa++;this.type=a;this.data=b}function C(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&b===c&&('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,
'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return C(a.substr(0,b.index)).concat(C(b[1])).concat(C(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(c=0;c<b.length;++c)a=a.concat(C(b[c]));return a}function G(a){return"["+C(a).join("][")+"]"}function b(){var a={"":0},b=[""];return{id:function(c){var d=a[c];if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}function x(a,
b,c){function d(){var b=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=a.getBoundingClientRect(),b=e.right-e.left,e=e.bottom-e.top);f.width=c*b;f.height=c*e;R(f.style,{width:b+"px",height:e+"px"})}var f=document.createElement("canvas");R(f.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(f);a===document.body&&(f.style.position="absolute",R(a.style,{margin:0,padding:0}));var e;a!==document.body&&"function"===typeof ResizeObserver?(e=new ResizeObserver(function(){setTimeout(d)}),
e.observe(a)):window.addEventListener("resize",d,!1);d();return{canvas:f,onDestroy:function(){e?e.disconnect():window.removeEventListener("resize",d);a.removeChild(f)}}}function M(a,b){function c(d){try{return a.getContext(d,b)}catch(f){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function I(a){if("string"===typeof a)return a.split();y(Array.isArray(a),"invalid extension array");return a}function F(a){return"string"===typeof a?(y("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}function U(a){var b=a||{},c,d,f,e;a={};var g=[],h=[],l="undefined"===typeof window?1:window.devicePixelRatio,k=!1,m=function(a){a&&y.raise(a)},n=function(){};"string"===typeof b?(y("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),c=document.querySelector(b),y(c,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?c=b:"function"===
typeof b.drawArrays||"function"===typeof b.drawElements?(e=b,f=e.canvas):(y.constructor(b),"gl"in b?e=b.gl:"canvas"in b?f=F(b.canvas):"container"in b&&(d=F(b.container)),"attributes"in b&&(a=b.attributes,y.type(a,"object","invalid context attributes")),"extensions"in b&&(g=I(b.extensions)),"optionalExtensions"in b&&(h=I(b.optionalExtensions)),"onDone"in b&&(y.type(b.onDone,"function","invalid or missing onDone callback"),m=b.onDone),"profile"in b&&(k=!!b.profile),"pixelRatio"in b&&(l=+b.pixelRatio,
y(0<l,"invalid pixel ratio"))):y.raise("invalid arguments to regl");c&&("canvas"===c.nodeName.toLowerCase()?f=c:d=c);if(!e){if(!f){y("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=x(d||document.body,m,l);if(!c)return null;f=c.canvas;n=c.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0);e=M(f,a)}return e?{gl:e,canvas:f,container:d,extensions:g,optionalExtensions:h,pixelRatio:l,profile:k,onDone:m,onDestroy:n}:(n(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}function Q(a,b){function c(b){y.type(b,"string","extension name must be string");b=b.toLowerCase();var f;try{f=d[b]=a.getExtension(b)}catch(e){}return!!f}for(var d={},f=0;f<b.extensions.length;++f){var e=b.extensions[f];if(!c(e))return b.onDestroy(),b.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(d[a]&&
!c(a))throw Error("(regl): error restoring extension "+a);})}}}function J(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d);return c}function P(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function L(){function a(b){a:{for(var d=16;268435456>=d;d*=16)if(b<=d){b=d;break a}b=0}d=c[P(b)>>2];return 0<d.length?d.pop():new ArrayBuffer(b)}function b(a){c[P(a.byteLength)>>2].push(a)}var c=J(8,function(){return[]});return{alloc:a,free:b,allocType:function(b,
c){var d=null;switch(b){case 5120:d=new Int8Array(a(c),0,c);break;case 5121:d=new Uint8Array(a(c),0,c);break;case 5122:d=new Int16Array(a(2*c),0,c);break;case 5123:d=new Uint16Array(a(2*c),0,c);break;case 5124:d=new Int32Array(a(4*c),0,c);break;case 5125:d=new Uint32Array(a(4*c),0,c);break;case 5126:d=new Float32Array(a(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(a){b(a.buffer)}}}function H(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&
Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||T(a.data))}function S(a,b,c,d,f,e){for(var g=0;g<b;++g)for(var h=a[g],l=0;l<c;++l)for(var k=h[l],m=0;m<d;++m)f[e++]=k[m]}function K(a,b,c,d,f){for(var e=1,g=c+1;g<b.length;++g)e*=b[g];var h=b[c];if(4===b.length-c){var l=b[c+1],k=b[c+2];b=b[c+3];for(g=0;g<h;++g)S(a[g],l,k,b,d,f),f+=e}else for(g=0;g<h;++g)K(a[g],b,c+1,d,f),f+=e}function Z(a){return Xa[Object.prototype.toString.call(a)]|0}function xa(a,
b){for(var c=0;c<b.length;++c)a[c]=b[c]}function ua(a,b,c,d,f,e,g){for(var h=0,l=0;l<c;++l)for(var k=0;k<d;++k)a[h++]=b[f*l+e*k+g]}function ia(a,b,c,d){function f(b){this.id=l++;this.buffer=a.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function e(b,c,d){b.byteLength=c.byteLength;a.bufferData(b.type,c,d)}function g(a,b,c,d,f,h){a.usage=c;if(Array.isArray(b)){if(a.dtype=d||5126,0<b.length)if(Array.isArray(b[0])){f=
hb(b);for(var l=d=1;l<f.length;++l)d*=f[l];a.dimension=d;b=bb(b,f,a.dtype);e(a,b,c);h?a.persistentData=b:ka.freeType(b)}else"number"===typeof b[0]?(a.dimension=f,f=ka.allocType(a.dtype,b.length),xa(f,b),e(a,f,c),h?a.persistentData=f:ka.freeType(f)):T(b[0])?(a.dimension=b[0].length,a.dtype=d||Z(b[0])||5126,b=bb(b,[b.length,b[0].length],a.dtype),e(a,b,c),h?a.persistentData=b:ka.freeType(b)):y.raise("invalid buffer data")}else if(T(b))a.dtype=d||Z(b),a.dimension=f,e(a,b,c),h&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));
else if(H(b)){f=b.shape;var k=b.stride,l=b.offset,m=0,n=0,q=0,p=0;1===f.length?(m=f[0],n=1,q=k[0],p=0):2===f.length?(m=f[0],n=f[1],q=k[0],p=k[1]):y.raise("invalid shape");a.dtype=d||Z(b.data)||5126;a.dimension=n;f=ka.allocType(a.dtype,m*n);ua(f,b.data,m,n,q,p,l);e(a,f,c);h?a.persistentData=f:ka.freeType(f)}else b instanceof ArrayBuffer?(a.dtype=5121,a.dimension=f,e(a,b,c),h&&(a.persistentData=new Uint8Array(new Uint8Array(b)))):y.raise("invalid buffer data")}function h(c){b.bufferCount--;d(c);var f=
c.buffer;y(f,"buffer must not be deleted already");a.deleteBuffer(f);c.buffer=null;delete k[c.id]}var l=0,k={};f.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};f.prototype.destroy=function(){h(this)};var m=[];c.profile&&(b.getTotalBufferSize=function(){var a=0;Object.keys(k).forEach(function(b){a+=k[b].stats.size});return a});return{create:function(d,e,l,m){function n(b){var d=35044,f=null,e=0,h=0,l=1;Array.isArray(b)||T(b)||H(b)||b instanceof ArrayBuffer?f=b:"number"===typeof b?e=
b|0:b&&(y.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(y(null===f||Array.isArray(f)||T(f)||H(f),"invalid data for buffer"),f=b.data),"usage"in b&&(y.parameter(b.usage,Ya,"invalid buffer usage"),d=Ya[b.usage]),"type"in b&&(y.parameter(b.type,Na,"invalid buffer type"),h=Na[b.type]),"dimension"in b&&(y.type(b.dimension,"number","invalid dimension"),l=b.dimension|0),"length"in b&&(y.nni(e,"buffer length must be a nonnegative integer"),e=b.length|0));p.bind();
f?g(p,f,d,h,l,m):(e&&a.bufferData(p.type,e,d),p.dtype=h||5121,p.usage=d,p.dimension=l,p.byteLength=e);c.profile&&(p.stats.size=p.byteLength*Ia[p.dtype]);return n}function q(b,c){y(c+b.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+p.byteLength);a.bufferSubData(p.type,c,b)}b.bufferCount++;var p=new f(e);k[p.id]=p;l||n(d);n._reglType="buffer";n._buffer=p;n.subdata=function(a,b){var c=
(b||0)|0,d;p.bind();if(T(a)||a instanceof ArrayBuffer)q(a,c);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var f=ka.allocType(p.dtype,a.length);xa(f,a);q(f,c);ka.freeType(f)}else Array.isArray(a[0])||T(a[0])?(d=hb(a),f=bb(a,d,p.dtype),q(f,c),ka.freeType(f)):y.raise("invalid buffer data")}else if(H(a)){d=a.shape;var e=a.stride,g=f=0,h=0,l=0;1===d.length?(f=d[0],g=1,h=e[0],l=0):2===d.length?(f=d[0],g=d[1],h=e[0],l=e[1]):y.raise("invalid shape");d=Array.isArray(a.data)?p.dtype:Z(a.data);
d=ka.allocType(d,f*g);ua(d,a.data,f,g,h,l,a.offset);q(d,c);ka.freeType(d)}else y.raise("invalid data for buffer subdata");return n};c.profile&&(n.stats=p.stats);n.destroy=function(){h(p)};return n},createStream:function(a,b){var c=m.pop();c||(c=new f(a));c.bind();g(c,b,35040,0,1,!1);return c},destroyStream:function(a){m.push(a)},clear:function(){Ba(k).forEach(h);m.forEach(h)},getBuffer:function(a){return a&&a._buffer instanceof f?a._buffer:null},restore:function(){Ba(k).forEach(function(b){b.buffer=
a.createBuffer();a.bindBuffer(b.type,b.buffer);a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:g}}function ha(a,b,c,d){function f(a){this.id=l++;h[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function e(d,f,g,h,l,k,m){d.buffer.bind();var n;f?((n=m)||T(f)&&(!H(f)||T(f.data))||(n=b.oes_element_index_uint?5125:5123),c._initBuffer(d.buffer,f,g,n,3)):(a.bufferData(34963,k,g),d.buffer.dtype=n||5121,d.buffer.usage=g,d.buffer.dimension=3,d.buffer.byteLength=
k);n=m;if(!m){switch(d.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=5125;break;default:y.raise("unsupported type for element array")}d.buffer.dtype=n}d.type=n;y(5125!==n||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=l;0>f&&(f=d.buffer.byteLength,5123===n?f>>=1:5125===n&&(f>>=2));d.vertCount=f;f=h;0>h&&(f=4,h=d.buffer.dimension,1===h&&(f=0),2===h&&(f=1),3===h&&(f=4));d.primType=f}function g(a){d.elementsCount--;
y(null!==a.buffer,"must not double destroy elements");delete h[a.id];a.buffer.destroy();a.buffer=null}var h={},l=0,k={uint8:5121,uint16:5123};b.oes_element_index_uint&&(k.uint32=5125);f.prototype.bind=function(){this.buffer.bind()};var m=[];return{create:function(a,b){function h(a){if(a)if("number"===typeof a)l(a),m.primType=4,m.vertCount=a|0,m.type=5121;else{var b=null,c=35044,d=-1,f=-1,g=0,n=0;if(Array.isArray(a)||T(a)||H(a))b=a;else if(y.type(a,"object","invalid arguments for elements"),"data"in
a&&(b=a.data,y(Array.isArray(b)||T(b)||H(b),"invalid data for element buffer")),"usage"in a&&(y.parameter(a.usage,Ya,"invalid element buffer usage"),c=Ya[a.usage]),"primitive"in a&&(y.parameter(a.primitive,Ra,"invalid element buffer primitive"),d=Ra[a.primitive]),"count"in a&&(y("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),f=a.count|0),"type"in a&&(y.parameter(a.type,k,"invalid buffer type"),n=k[a.type]),"length"in a)g=a.length|0;else if(g=f,5123===n||5122===n)g*=2;else if(5125===
n||5124===n)g*=4;e(m,b,c,d,f,g,n)}else l(),m.primType=4,m.vertCount=0,m.type=5121;return h}var l=c.create(null,34963,!0),m=new f(l._buffer);d.elementsCount++;h(a);h._reglType="elements";h._elements=m;h.subdata=function(a,b){l.subdata(a,b);return h};h.destroy=function(){g(m)};return h},createStream:function(a){var b=m.pop();b||(b=new f(c.create(null,34963,!0,!1)._buffer));e(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){m.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof
f?a._elements:null},clear:function(){Ba(h).forEach(g)}}}function aa(a){for(var b=ka.allocType(5123,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(Infinity===a[c])b[c]=31744;else if(-Infinity===a[c])b[c]=64512;else{ib[0]=a[c];var d=sb[0],f=d>>>31<<15,e=(d<<1>>>24)-127,d=d>>13&1023;b[c]=-24>e?f:-14>e?f+(d+1024>>-14-e):15<e?f+31744:f+(e+15<<10)+d}return b}function O(a){return Array.isArray(a)||T(a)}function V(a){return"[object "+a+"]"}function W(a){return Array.isArray(a)&&(0===a.length||
"number"===typeof a[0])}function Ca(a){return Array.isArray(a)&&0!==a.length&&O(a[0])?!0:!1}function la(a){return Object.prototype.toString.call(a)}function za(a){if(!a)return!1;var b=la(a);return 0<=tb.indexOf(b)?!0:W(a)||Ca(a)||H(a)}function gb(a,b){36193===a.type?(a.data=aa(b),ka.freeType(b)):a.data=b}function Ga(a,b,c,d,f,e){a="undefined"!==typeof wa[a]?wa[a]:Da[a]*Sa[b];e&&(a*=6);if(f){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}function oa(a,b,c,d,f,e,g){function h(){this.format=this.internalformat=
6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function l(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function k(a,d){if("object"===typeof d&&d){"premultiplyAlpha"in d&&
(y.type(d.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=d.premultiplyAlpha);"flipY"in d&&(y.type(d.flipY,"boolean","invalid texture flip"),a.flipY=d.flipY);"alignment"in d&&(y.oneOf(d.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=d.alignment);"colorSpace"in d&&(y.parameter(d.colorSpace,Q,"invalid colorSpace"),a.colorSpace=Q[d.colorSpace]);if("type"in d){var f=d.type;y(b.oes_texture_float||!("float"===f||"float32"===f),"you must enable the OES_texture_float extension in order to use floating point textures.");
y(b.oes_texture_half_float||!("half float"===f||"float16"===f),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");y(b.webgl_depth_texture||!("uint16"===f||"uint32"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");y.parameter(f,P,"invalid texture type");a.type=P[f]}var e=a.width,g=a.height,h=a.channels,f=!1;"shape"in d?(y(Array.isArray(d.shape)&&2<=d.shape.length,"shape must be an array"),
e=d.shape[0],g=d.shape[1],3===d.shape.length&&(h=d.shape[2],y(0<h&&4>=h,"invalid number of channels"),f=!0),y(0<=e&&e<=c.maxTextureSize,"invalid width"),y(0<=g&&g<=c.maxTextureSize,"invalid height")):("radius"in d&&(e=g=d.radius,y(0<=e&&e<=c.maxTextureSize,"invalid radius")),"width"in d&&(e=d.width,y(0<=e&&e<=c.maxTextureSize,"invalid width")),"height"in d&&(g=d.height,y(0<=g&&g<=c.maxTextureSize,"invalid height")),"channels"in d&&(h=d.channels,y(0<h&&4>=h,"invalid number of channels"),f=!0));a.width=
e|0;a.height=g|0;a.channels=h|0;e=!1;"format"in d&&(e=d.format,y(b.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(e,K,"invalid texture format"),g=a.internalformat=K[e],a.format=ub[g],e in P&&!("type"in d)&&(a.type=P[e]),e in S&&(a.compressed=!0),e=!0);!f&&e?a.channels=Da[a.format]:f&&!e?a.channels!==Za[a.format]&&(a.format=a.internalformat=Za[a.channels]):e&&f&&y(a.channels===Da[a.format],
"number of channels inconsistent with specified format")}}function m(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function n(){h.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function q(a,b){var d=null;za(b)?d=b:b&&(y.type(b,"object","invalid pixel data type"),k(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),za(b.data)&&(d=b.data));
y(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){y(!d,"can not specify copy and data field for the same texture");var e=f.viewportWidth,g=f.viewportHeight;a.width=a.width||e-a.xOffset;a.height=a.height||g-a.yOffset;a.needsCopy=!0;y(0<=a.xOffset&&a.xOffset<e&&0<=a.yOffset&&a.yOffset<g&&0<a.width&&a.width<=e&&0<a.height&&a.height<=g,"copy texture read out of bounds")}else if(!d)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||
4;else if(T(d))a.channels=a.channels||4,a.data=d,"type"in b||5121!==a.type||(a.type=Xa[Object.prototype.toString.call(d)]|0);else if(W(d)){a.channels=a.channels||4;e=d;g=e.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:g=ka.allocType(a.type,g);g.set(e);a.data=g;break;case 36193:a.data=aa(e);break;default:y.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(H(d)){e=d.data;Array.isArray(e)||5121!==a.type||(a.type=Xa[Object.prototype.toString.call(e)]|
0);var g=d.shape,h=d.stride,l,m,n,p;3===g.length?(n=g[2],p=h[2]):(y(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),p=n=1);l=g[0];m=g[1];g=h[0];h=h[1];a.alignment=1;a.width=l;a.height=m;a.channels=n;a.format=a.internalformat=Za[n];a.needsFree=!0;l=p;d=d.offset;n=a.width;p=a.height;m=a.channels;for(var r=ka.allocType(36193===a.type?5126:a.type,n*p*m),t=0,u=0;u<p;++u)for(var v=0;v<n;++v)for(var z=0;z<m;++z)r[t++]=e[g*v+h*u+l*z+d];gb(a,r)}else if(la(d)===cb||la(d)===db||la(d)===jb)la(d)===
cb||la(d)===db?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(la(d)===kb)a.element=d,a.width=d.width,a.height=d.height,a.channels=4;else if(la(d)===lb)a.element=d,a.width=d.naturalWidth,a.height=d.naturalHeight,a.channels=4;else if(la(d)===mb)a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(Ca(d)){e=a.width||d[0].length;g=a.height||d.length;h=a.channels;h=O(d[0][0])?h||d[0][0].length:h||1;l=$a.shape(d);n=1;for(p=0;p<
l.length;++p)n*=l[p];n=ka.allocType(36193===a.type?5126:a.type,n);$a.flatten(d,l,"",n);gb(a,n);a.alignment=1;a.width=e;a.height=g;a.channels=h;a.format=a.internalformat=Za[h];a.needsFree=!0}5126===a.type?y(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&y(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function p(b,c,f,e,g){var h=b.element,l=b.data,k=b.internalformat,n=b.format,q=b.type,r=b.width,
t=b.height;m(b);h?a.texSubImage2D(c,g,f,e,n,q,h):b.compressed?a.compressedTexSubImage2D(c,g,f,e,k,r,t,l):b.needsCopy?(d(),a.copyTexSubImage2D(c,g,f,e,b.xOffset,b.yOffset,r,t)):a.texSubImage2D(c,g,f,e,r,t,n,q,l)}function r(){return nb.pop()||new n}function t(a){a.needsFree&&ka.freeType(a.data);n.call(a);nb.push(a)}function u(){h.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function z(a,b,c){var d=a.images[0]=r();a.mipmask=1;d.width=a.width=b;d.height=a.height=
c;d.channels=a.channels=4}function v(a,b){var c=null;if(za(b))c=a.images[0]=r(),l(c,a),q(c,b),a.mipmask=1;else if(k(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,f=0;f<d.length;++f)c=a.images[f]=r(),l(c,a),c.width>>=f,c.height>>=f,q(c,d[f]),a.mipmask|=1<<f;else c=a.images[0]=r(),l(c,a),q(c,b),a.mipmask=1;l(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||y(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}
function x(b,c){for(var f=b.images,e=0;e<f.length&&f[e];++e){var g=f[e],h=c,l=e,k=g.element,n=g.data,q=g.internalformat,p=g.format,r=g.type,t=g.width,u=g.height;m(g);k?a.texImage2D(h,l,p,p,r,k):g.compressed?a.compressedTexImage2D(h,l,q,t,u,0,n):g.needsCopy?(d(),a.copyTexImage2D(h,l,p,g.xOffset,g.yOffset,t,u,0)):a.texImage2D(h,l,p,t,u,0,p,r,n||null)}}function w(){var a=fa.pop()||new u;h.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function A(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&
t(b[c]),b[c]=null;fa.push(a)}function D(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function F(a,b){if("min"in b){var d=b.min;y.parameter(d,U);a.minFilter=U[d];0<=vb.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(d=b.mag,y.parameter(d,L),a.magFilter=L[d]);var d=a.wrapS,f=a.wrapT;if("wrap"in b){var e=b.wrap;"string"===typeof e?(y.parameter(e,M),d=f=M[e]):Array.isArray(e)&&(y.parameter(e[0],M),y.parameter(e[1],
M),d=M[e[0]],f=M[e[1]])}else"wrapS"in b&&(d=b.wrapS,y.parameter(d,M),d=M[d]),"wrapT"in b&&(f=b.wrapT,y.parameter(f,M),f=M[f]);a.wrapS=d;a.wrapT=f;"anisotropic"in b&&(d=b.anisotropic,y("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":y.parameter(b.mipmap,J,"invalid mipmap hint");a.mipmapHint=J[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=b.mipmap;break;case "object":y(Array.isArray(b.mipmap),
"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:y.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function I(c,d){a.texParameteri(d,10241,c.minFilter);a.texParameteri(d,10240,c.magFilter);a.texParameteri(d,10242,c.wrapS);a.texParameteri(d,10243,c.wrapT);b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function B(b){h.call(this);this.mipmask=0;this.internalformat=6408;this.id=oa++;this.refCount=
1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new D;g.profile&&(this.stats={size:0})}function G(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function C(){var b=ca[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function E(b){var c=b.texture;y(c,"must not double destroy texture");var d=b.unit,f=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(f,null),ca[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=
null;b.refCount=0;delete da[b.id];e.textureCount--}var J={"don't care":4352,"dont care":4352,nice:4354,fast:4353},M={repeat:10497,clamp:33071,mirror:33648},L={nearest:9728,linear:9729},U=R({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},L),Q={none:0,browser:37444},P={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},K={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,
rgb565:36194},S={};b.ext_srgb&&(K.srgb=35904,K.srgba=35906);b.oes_texture_float&&(P.float32=P["float"]=5126);b.oes_texture_half_float&&(P.float16=P["half float"]=36193);b.webgl_depth_texture&&(R(K,{depth:6402,"depth stencil":34041}),R(P,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&R(S,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&R(S,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&R(S,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(S["rgb etc1"]=36196);var N=Array.prototype.slice.call(a.getParameter(34467));Object.keys(S).forEach(function(a){var b=S[a];0<=N.indexOf(b)&&(K[a]=b)});var X=Object.keys(K);c.textureFormats=X;var ba=[];Object.keys(K).forEach(function(a){ba[K[a]]=a});var Z=[];Object.keys(P).forEach(function(a){Z[P[a]]=
a});var V=[];Object.keys(L).forEach(function(a){V[L[a]]=a});var Wa=[];Object.keys(U).forEach(function(a){Wa[U[a]]=a});var Oa=[];Object.keys(M).forEach(function(a){Oa[M[a]]=a});var ub=X.reduce(function(a,c){var d=K[c];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||b.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=c.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{}),nb=[],fa=[],oa=0,da={},ga=c.maxTextureUnits,ca=Array(ga).map(function(){return null});R(B.prototype,{bind:function(){this.bindCount+=
1;var b=this.unit;if(0>b){for(var c=0;c<ga;++c){var d=ca[c];if(d){if(0<d.bindCount)continue;d.unit=-1}ca[c]=this;b=c;break}b>=ga&&y.raise("insufficient number of texture units");g.profile&&e.maxTextureUnits<b+1&&(e.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&E(this)}});g.profile&&(e.getTotalTextureSize=function(){var a=0;Object.keys(da).forEach(function(b){a+=da[b].stats.size});
return a});return{create2D:function(b,d){function f(a,b){var d=h.texInfo;D.call(d);var e=w();"number"===typeof a?"number"===typeof b?z(e,a|0,b|0):z(e,a|0,a|0):a?(y.type(a,"object","invalid arguments to regl.texture"),F(d,a),v(e,a)):z(e,1,1);d.genMipmaps&&(e.mipmask=(e.width<<1)-1);h.mipmask=e.mipmask;l(h,e);y.texture2D(d,e,c);h.internalformat=e.internalformat;f.width=e.width;f.height=e.height;G(h);x(e,3553);I(d,3553);C();A(e);g.profile&&(h.stats.size=Ga(h.internalformat,h.type,e.width,e.height,d.genMipmaps,
!1));f.format=ba[h.internalformat];f.type=Z[h.type];f.mag=V[d.magFilter];f.min=Wa[d.minFilter];f.wrapS=Oa[d.wrapS];f.wrapT=Oa[d.wrapT];return f}var h=new B(3553);da[h.id]=h;e.textureCount++;f(b,d);f.subimage=function(a,b,c,d){y(!!a,"must specify image data");b|=0;c|=0;d|=0;var e=r();l(e,h);e.width=0;e.height=0;q(e,a);e.width=e.width||(h.width>>d)-b;e.height=e.height||(h.height>>d)-c;y(h.type===e.type&&h.format===e.format&&h.internalformat===e.internalformat,"incompatible format for texture.subimage");
y(0<=b&&0<=c&&b+e.width<=h.width&&c+e.height<=h.height,"texture.subimage write out of bounds");y(h.mipmask&1<<d,"missing mipmap data");y(e.data||e.element||e.needsCopy,"missing image data");G(h);p(e,3553,b,c,d);C();t(e);return f};f.resize=function(b,c){var d=b|0,e=c|0||d;if(d===h.width&&e===h.height)return f;f.width=h.width=d;f.height=h.height=e;G(h);for(var l=0;h.mipmask>>l;++l){var k=d>>l,m=e>>l;if(!k||!m)break;a.texImage2D(3553,l,h.format,k,m,0,h.format,h.type,null)}C();g.profile&&(h.stats.size=
Ga(h.internalformat,h.type,d,e,!1,!1));return f};f._reglType="texture2d";f._texture=h;g.profile&&(f.stats=h.stats);f.destroy=function(){h.decRef()};return f},createCube:function(b,d,f,h,m,n){function u(a,b,d,f,e,h){var m,n=Y.texInfo;D.call(n);for(m=0;6>m;++m)E[m]=w();if("number"!==typeof a&&a)if("object"===typeof a)if(b)v(E[0],a),v(E[1],b),v(E[2],d),v(E[3],f),v(E[4],e),v(E[5],h);else if(F(n,a),k(Y,a),"faces"in a)for(a=a.faces,y(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),
m=0;6>m;++m)y("object"===typeof a[m]&&!!a[m],"invalid input for cube map face"),l(E[m],Y),v(E[m],a[m]);else for(m=0;6>m;++m)v(E[m],a);else y.raise("invalid arguments to cube map");else for(a=a|0||1,m=0;6>m;++m)z(E[m],a,a);l(Y,E[0]);c.npotTextureCube||y(ob(Y.width)&&ob(Y.height),"your browser does not support non power or two texture dimensions");Y.mipmask=n.genMipmaps?(E[0].width<<1)-1:E[0].mipmask;y.textureCube(Y,n,E,c);Y.internalformat=E[0].internalformat;u.width=E[0].width;u.height=E[0].height;
G(Y);for(m=0;6>m;++m)x(E[m],34069+m);I(n,34067);C();g.profile&&(Y.stats.size=Ga(Y.internalformat,Y.type,u.width,u.height,n.genMipmaps,!0));u.format=ba[Y.internalformat];u.type=Z[Y.type];u.mag=V[n.magFilter];u.min=Wa[n.minFilter];u.wrapS=Oa[n.wrapS];u.wrapT=Oa[n.wrapT];for(m=0;6>m;++m)A(E[m]);return u}var Y=new B(34067);da[Y.id]=Y;e.cubeCount++;var E=Array(6);u(b,d,f,h,m,n);u.subimage=function(a,b,c,d,f){y(!!b,"must specify image data");y("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=
0;d|=0;f|=0;var e=r();l(e,Y);e.width=0;e.height=0;q(e,b);e.width=e.width||(Y.width>>f)-c;e.height=e.height||(Y.height>>f)-d;y(Y.type===e.type&&Y.format===e.format&&Y.internalformat===e.internalformat,"incompatible format for texture.subimage");y(0<=c&&0<=d&&c+e.width<=Y.width&&d+e.height<=Y.height,"texture.subimage write out of bounds");y(Y.mipmask&1<<f,"missing mipmap data");y(e.data||e.element||e.needsCopy,"missing image data");G(Y);p(e,34069+a,c,d,f);C();t(e);return u};u.resize=function(b){b|=
0;if(b!==Y.width){u.width=Y.width=b;u.height=Y.height=b;G(Y);for(var c=0;6>c;++c)for(var d=0;Y.mipmask>>d;++d)a.texImage2D(34069+c,d,Y.format,b>>d,b>>d,0,Y.format,Y.type,null);C();g.profile&&(Y.stats.size=Ga(Y.internalformat,Y.type,u.width,u.height,!1,!0));return u}};u._reglType="textureCube";u._texture=Y;g.profile&&(u.stats=Y.stats);u.destroy=function(){Y.decRef()};return u},clear:function(){for(var b=0;b<ga;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;Ba(da).forEach(E);e.cubeCount=
0;e.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<ga;++b){var c=ca[b];c&&(c.bindCount=0,c.unit=-1,ca[b]=null)}Ba(da).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,
b.type,null);I(b.texInfo,b.target)})}}}function ra(a,b,c,d,f,e){function g(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height);this.width=a;this.height=d}function h(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function l(a,b,c){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);y(Math.max(1,a.width)===b&&d===c,"inconsistent width/height for supplied texture")}else a=
a.renderbuffer._renderbuffer,y(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function k(b,c){c&&(c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer))}function m(a){var b=3553,c=null,d=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(b=a.target|0));y.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,y(3553===b)):
"textureCube"===a?(c=f,y(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(d=f,b=36161):y.raise("invalid regl object for attachment");return new g(b,c,d)}function n(a,b,c,e,h){if(c)return a=d.create2D({width:a,height:b,format:e,type:h}),a._texture.refCount=0,new g(3553,a,null);a=f.create({width:a,height:b,format:e});a._renderbuffer.refCount=0;return new g(36161,null,a)}function p(a){return a&&(a.texture||a.renderbuffer)}function q(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&
a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function r(){this.id=F++;I[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function t(a){a.colorAttachments.forEach(h);h(a.depthAttachment);h(a.stencilAttachment);h(a.depthStencilAttachment)}function u(b){var c=b.framebuffer;y(c,"must not double destroy framebuffer");a.deleteFramebuffer(c);b.framebuffer=null;e.framebufferCount--;
delete I[b.id]}function v(b){var d;a.bindFramebuffer(36160,b.framebuffer);var f=b.colorAttachments;for(d=0;d<f.length;++d)k(36064+d,f[d]);for(d=f.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(36160,36064+d,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0);a.framebufferTexture2D(36160,36096,3553,null,0);a.framebufferTexture2D(36160,36128,3553,null,0);k(36096,b.depthAttachment);k(36128,b.stencilAttachment);k(33306,b.depthStencilAttachment);b=a.checkFramebufferStatus(36160);a.isContextLost()||
36053===b||y.raise("framebuffer configuration not supported, status = "+wb[b]);a.bindFramebuffer(36160,x.next?x.next.framebuffer:null);x.cur=x.next;a.getError()}function z(a,d){function f(a,d){var e;y(x.next!==g,"can not update framebuffer which is currently in use");var h=0,k=0,q=!0,r=!0;e=null;var u=!0,z="rgba",Aa="uint8",F=1,I=null,B=null,E=null,G=!1;if("number"===typeof a)h=a|0,k=d|0||h;else if(a){y.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,y(Array.isArray(k)&&
2<=k.length,"invalid shape for framebuffer"),h=k[0],k=k[1]):("radius"in a&&(h=k=a.radius),"width"in a&&(h=a.width),"height"in a&&(k=a.height));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&y(1===e.length||b.webgl_draw_buffers,"multiple render targets not supported");if(!e){"colorCount"in a&&(F=a.colorCount|0,y(0<F,"invalid color buffer count"));"colorTexture"in a&&(u=!!a.colorTexture,z="rgba4");if("colorType"in a){Aa=a.colorType;if(u)y(b.oes_texture_float||!("float"===Aa||"float32"===
Aa),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(b.oes_texture_half_float||!("half float"===Aa||"float16"===Aa),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===Aa||"float16"===Aa)y(b.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),z="rgba16f";else if("float"===Aa||"float32"===Aa)y(b.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
z="rgba32f";y.oneOf(Aa,D,"invalid color type")}if("colorFormat"in a)if(z=a.colorFormat,0<=w.indexOf(z))u=!0;else if(0<=A.indexOf(z))u=!1;else if(u)y.oneOf(a.colorFormat,w,"invalid color format for texture");else y.oneOf(a.colorFormat,A,"invalid color format for renderbuffer")}if("depthTexture"in a||"depthStencilTexture"in a)G=!(!a.depthTexture&&!a.depthStencilTexture),y(!G||b.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?q=a.depth:(I=a.depth,
r=!1));"stencil"in a&&("boolean"===typeof a.stencil?r=a.stencil:(B=a.stencil,q=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?q=r=a.depthStencil:(E=a.depthStencil,r=q=!1))}else h=k=1;var C=null,H=null,M=null,J=null;if(Array.isArray(e))C=e.map(m);else if(e)C=[m(e)];else for(C=Array(F),e=0;e<F;++e)C[e]=n(h,k,u,z,Aa);y(b.webgl_draw_buffers||1>=C.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");y(C.length<=c.maxColorAttachments,"too many color attachments, not supported");
h=h||C[0].width;k=k||C[0].height;I?H=m(I):q&&!r&&(H=n(h,k,G,"depth","uint32"));B?M=m(B):r&&!q&&(M=n(h,k,!1,"stencil","uint8"));E?J=m(E):!I&&!B&&r&&q&&(J=n(h,k,G,"depth stencil","depth stencil"));y(1>=!!I+!!B+!!E,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");q=null;for(e=0;e<C.length;++e)l(C[e],h,k),y(!C[e]||C[e].texture&&0<=xb.indexOf(C[e].texture._texture.format)||C[e].renderbuffer&&0<=yb.indexOf(C[e].renderbuffer._renderbuffer.format),"framebuffer color attachment "+
e+" is invalid"),C[e]&&C[e].texture&&(r=eb[C[e].texture._texture.format]*ab[C[e].texture._texture.type],null===q?q=r:y(q===r,"all color attachments much have the same number of bits per pixel."));l(H,h,k);y(!H||H.texture&&6402===H.texture._texture.format||H.renderbuffer&&33189===H.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");l(M,h,k);y(!M||M.renderbuffer&&36168===M.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");l(J,h,
k);y(!J||J.texture&&34041===J.texture._texture.format||J.renderbuffer&&34041===J.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");t(g);g.width=h;g.height=k;g.colorAttachments=C;g.depthAttachment=H;g.stencilAttachment=M;g.depthStencilAttachment=J;f.color=C.map(p);f.depth=p(H);f.stencil=p(M);f.depthStencil=p(J);f.width=g.width;f.height=g.height;v(g);return f}var g=new r;e.framebufferCount++;f(a,d);return R(f,{resize:function(a,b){y(x.next!==g,"can not resize a framebuffer which is currently in use");
var c=Math.max(a|0,1),d=Math.max(b|0||c,1);if(c===g.width&&d===g.height)return f;for(var e=g.colorAttachments,h=0;h<e.length;++h)q(e[h],c,d);q(g.depthAttachment,c,d);q(g.stencilAttachment,c,d);q(g.depthStencilAttachment,c,d);g.width=f.width=c;g.height=f.height=d;v(g);return f},_reglType:"framebuffer",_framebuffer:g,destroy:function(){u(g);t(g)},use:function(a){x.setFBO({framebuffer:f},a)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],A=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&A.push("srgba");
b.ext_color_buffer_half_float&&A.push("rgba16f","rgb16f");b.webgl_color_buffer_float&&A.push("rgba32f");var D=["uint8"];b.oes_texture_half_float&&D.push("half float","float16");b.oes_texture_float&&D.push("float","float32");var F=0,I={};return R(x,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof r)?a:null},create:z,createCube:function(a){function f(a){var c;y(0>e.indexOf(x.next),"can not update framebuffer which is currently in use");
var g={color:null},h=0,l=null;c="rgba";var k="uint8",m=1;if("number"===typeof a)h=a|0;else if(a){y.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,y(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),y(h[0]===h[1],"cube framebuffer must be square"),h=h[0]):("radius"in a&&(h=a.radius|0),"width"in a?(h=a.width|0,"height"in a&&y(a.height===h,"must be square")):"height"in a&&(h=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&y(1===
l.length||b.webgl_draw_buffers,"multiple render targets not supported");l||("colorCount"in a&&(m=a.colorCount|0,y(0<m,"invalid color buffer count")),"colorType"in a&&(y.oneOf(a.colorType,D,"invalid color type"),k=a.colorType),"colorFormat"in a&&(c=a.colorFormat,y.oneOf(a.colorFormat,w,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=a.depthStencil)}else h=1;if(l)if(Array.isArray(l))for(a=[],c=0;c<l.length;++c)a[c]=
l[c];else a=[l];else for(a=Array(m),l={radius:h,format:c,type:k},c=0;c<m;++c)a[c]=d.createCube(l);g.color=Array(a.length);for(c=0;c<a.length;++c)m=a[c],y("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),h=h||m.width,y(m.width===h&&m.height===h,"invalid cube map shape"),g.color[c]={target:34069,data:a[c]};for(c=0;6>c;++c){for(m=0;m<a.length;++m)g.color[m].target=34069+c;0<c&&(g.depth=e[0].depth,g.stencil=e[0].stencil,g.depthStencil=e[0].depthStencil);if(e[c])e[c](g);else e[c]=
z(g)}return R(f,{width:h,height:h,color:a})}var e=Array(6);f(a);return R(f,{faces:e,resize:function(a){var b=a|0;y(0<b&&b<=c.maxCubeMapSize,"invalid radius for cube fbo");if(b===f.width)return f;var d=f.color;for(a=0;a<d.length;++a)d[a].resize(b);for(a=0;6>a;++a)e[a].resize(b);f.width=f.height=b;return f},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){Ba(I).forEach(u)},restore:function(){x.cur=null;x.next=null;x.dirty=!0;Ba(I).forEach(function(b){b.framebuffer=
a.createFramebuffer();v(b)})}})}function ma(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function ea(a,b,c,d,f){function e(a){if(a!==r.currentVAO){var c=b.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);r.currentVAO=a}}function g(c){if(c!==r.currentVAO){if(c)c.bindAttrs();else for(var d=b.angle_instanced_arrays,f=0;f<n.length;++f){var e=n[f];e.buffer?(a.enableVertexAttribArray(f),
a.vertexAttribPointer(f,e.size,e.type,e.normalized,e.stride,e.offfset),d&&d.vertexAttribDivisorANGLE(f,e.divisor)):(a.disableVertexAttribArray(f),a.vertexAttrib4f(f,e.x,e.y,e.z,e.w))}r.currentVAO=c}}function h(){Ba(p).forEach(function(a){a.destroy()})}function l(){this.id=++q;this.attributes=[];var a=b.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;p[this.id]=this;this.buffers=[]}function k(){b.oes_vertex_array_object&&Ba(p).forEach(function(a){a.refresh()})}var m=c.maxAttributes,
n=Array(m);for(c=0;c<m;++c)n[c]=new ma;var q=0,p={},r={Record:ma,scope:{},state:n,currentVAO:null,targetVAO:null,restore:b.oes_vertex_array_object?k:function(){},createVAO:function(a){function c(a){y(Array.isArray(a),"arguments to vertex array constructor must be an array");y(a.length<m,"too many attributes");y(0<a.length,"must specify at least one attribute");for(var d=0;d<e.buffers.length;++d)e.buffers[d].destroy();e.buffers.length=0;d=e.attributes;d.length=a.length;for(var g=0;g<a.length;++g){var h=
a[g],l=d[g]=new ma;Array.isArray(h)||T(h)||H(h)?(h=f.create(h,34962,!1,!0),l.buffer=f.getBuffer(h),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1,e.buffers.push(h)):f.getBuffer(h)?(l.buffer=f.getBuffer(h),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1):f.getBuffer(h.buffer)?(l.buffer=f.getBuffer(h.buffer),l.size=(+h.size||l.buffer.dimension)|0,l.normalized=!!h.normalized||
!1,"type"in h?(y.parameter(h.type,Na,"invalid buffer type"),l.type=Na[h.type]):l.type=l.buffer.dtype,l.offset=(h.offset||0)|0,l.stride=(h.stride||0)|0,l.divisor=(h.divisor||0)|0,l.state=1,y(1<=l.size&&4>=l.size,"size must be between 1 and 4"),y(0<=l.offset,"invalid offset"),y(0<=l.stride&&255>=l.stride,"stride must be between 0 and 255"),y(0<=l.divisor,"divisor must be positive"),y(!l.divisor||!!b.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(y(0<g,"first attribute must not be a constant"),
l.x=+h.x||0,l.y=+h.y||0,l.z=+h.z||0,l.w=+h.w||0,l.state=2):y(!1,"invalid attribute spec for location "+g)}e.refresh();return c}var e=new l;d.vaoCount+=1;c.destroy=function(){e.destroy()};c._vao=e;c._reglType="vao";return c(a)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(b){for(var c=0;c<n.length;++c){var d=n[c];d.buffer===b&&(a.disableVertexAttribArray(c),d.buffer=null)}},setVAO:b.oes_vertex_array_object?e:g,clear:b.oes_vertex_array_object?h:function(){}};
l.prototype.bindAttrs=function(){for(var c=b.angle_instanced_arrays,d=this.attributes,f=0;f<d.length;++f){var e=d[f];e.buffer?(a.enableVertexAttribArray(f),a.bindBuffer(34962,e.buffer.buffer),a.vertexAttribPointer(f,e.size,e.type,e.normalized,e.stride,e.offset),c&&c.vertexAttribDivisorANGLE(f,e.divisor)):(a.disableVertexAttribArray(f),a.vertexAttrib4f(f,e.x,e.y,e.z,e.w))}for(c=d.length;c<m;++c)a.disableVertexAttribArray(c)};l.prototype.refresh=function(){var a=b.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),
this.bindAttrs(),r.currentVAO=this)};l.prototype.destroy=function(){if(this.vao){var a=b.oes_vertex_array_object;this===r.currentVAO&&(r.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}p[this.id]&&(delete p[this.id],--d.vaoCount)};return r}function sa(a,b,c,d){function f(a,b,c,d){this.name=a;this.id=b;this.location=c;this.info=d}function e(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function g(c,d,f){var e=
35632===c?k:m,h=e[d];if(!h){var l=b.str(d),h=a.createShader(c);a.shaderSource(h,l);a.compileShader(h);y.shaderError(a,h,l,c,f);e[d]=h}return h}function h(a,b){this.id=p++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(c,h,k){var m;m=g(35632,c.fragId);var n=g(35633,c.vertId),q=c.program=a.createProgram();a.attachShader(q,m);a.attachShader(q,n);if(k)for(m=0;m<k.length;++m)n=k[m],a.bindAttribLocation(q,
n[0],n[1]);a.linkProgram(q);y.linkError(a,q,b.str(c.fragId),b.str(c.vertId),h);k=a.getProgramParameter(q,35718);d.profile&&(c.stats.uniformsCount=k);n=c.uniforms;for(m=0;m<k;++m)if(h=a.getActiveUniform(q,m))if(1<h.size)for(var p=0;p<h.size;++p){var r=h.name.replace("[0]","["+p+"]");e(n,new f(r,b.id(r),a.getUniformLocation(q,r),h))}else e(n,new f(h.name,b.id(h.name),a.getUniformLocation(q,h.name),h));k=a.getProgramParameter(q,35721);d.profile&&(c.stats.attributesCount=k);c=c.attributes;for(m=0;m<k;++m)(h=
a.getActiveAttrib(q,m))&&e(c,new f(h.name,b.id(h.name),a.getAttribLocation(q,h.name),h))}var k={},m={},n={},q=[],p=0;d.profile&&(c.getMaxUniformsCount=function(){var a=0;q.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;q.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var b=a.deleteShader.bind(a);Ba(k).forEach(b);k={};Ba(m).forEach(b);m={};q.forEach(function(b){a.deleteProgram(b.program)});
q.length=0;n={};c.shaderCount=0},program:function(a,b,d,f){y.command(0<=a,"missing vertex shader",d);y.command(0<=b,"missing fragment shader",d);var e=n[b];e||(e=n[b]={});var g=e[a];if(g&&!f)return g;b=new h(b,a);c.shaderCount++;l(b,d,f);g||(e[a]=b);q.push(b);return b},restore:function(){k={};m={};for(var a=0;a<q.length;++a)l(q[a],null,q[a].attributes.map(function(a){return[a.location,a.name]}))},shader:g,frag:-1,vert:-1}}function na(a,b,c,d,f,e,g){function h(l){var k;null===b.next?(y(f.preserveDrawingBuffer,
'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),k=5121):(y(null!==b.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),k=b.next.colorAttachments[0].texture._texture.type,e.oes_texture_float?(y(5121===k||5126===k,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===k&&y(g.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
y(5121===k,"Reading from a framebuffer is only allowed for the type 'uint8'"));var m=0,n=0,q=d.framebufferWidth,p=d.framebufferHeight,r=null;T(l)?r=l:l&&(y.type(l,"object","invalid arguments to regl.read()"),m=l.x|0,n=l.y|0,y(0<=m&&m<d.framebufferWidth,"invalid x offset for regl.read"),y(0<=n&&n<d.framebufferHeight,"invalid y offset for regl.read"),q=(l.width||d.framebufferWidth-m)|0,p=(l.height||d.framebufferHeight-n)|0,r=l.data||null);r&&(5121===k?y(r instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===k&&y(r instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));y(0<q&&q+m<=d.framebufferWidth,"invalid width for read pixels");y(0<p&&p+n<=d.framebufferHeight,"invalid height for read pixels");c();l=q*p*4;r||(5121===k?r=new Uint8Array(l):5126===k&&(r=r||new Float32Array(l)));y.isTypedArray(r,"data buffer for regl.read() must be a typedarray");y(r.byteLength>=l,"data buffer for regl.read() too small");a.pixelStorei(3333,4);a.readPixels(m,n,q,
p,6408,k,r);return r}function l(a){var c;b.setFBO({framebuffer:a.framebuffer},function(){c=h(a)});return c}return function(a){return a&&"framebuffer"in a?l(a):h(a)}}function ca(a){return Array.prototype.slice.call(a)}function fa(a){return ca(a).join("")}function ta(){function a(){var b=[],d=[];return R(function(){b.push.apply(b,ca(arguments))},{def:function(){var a="v"+c++;d.push(a);0<arguments.length&&(b.push(a,"="),b.push.apply(b,ca(arguments)),b.push(";"));return a},toString:function(){return fa([0<
d.length?"var "+d.join(",")+";":"",fa(b)])}})}function b(){function c(a,b){f(a,b,"=",d.def(a,b),";")}var d=a(),f=a(),e=d.toString,g=f.toString;return R(function(){d.apply(d,ca(arguments))},{def:d.def,entry:d,exit:f,save:c,set:function(a,b,f){c(a,b);d(a,b,"=",f,";")},toString:function(){return e()+g()}})}var c=0,d=[],f=[],e=a(),g={};return{global:e,link:function(a){for(var b=0;b<f.length;++b)if(f[b]===a)return d[b];b="g"+c++;d.push(b);f.push(a);return b},block:a,proc:function(a,c){function d(){var a=
"a"+f.length;f.push(a);return a}var f=[];c=c||0;for(var e=0;e<c;++e)d();var e=b(),h=e.toString;return g[a]=R(e,{arg:d,toString:function(){return fa(["function(",f.join(),"){",h(),"}"])}})},scope:b,cond:function(){var a=fa(arguments),c=b(),d=b(),f=c.toString,e=d.toString;return R(c,{then:function(){c.apply(c,ca(arguments));return this},"else":function(){d.apply(d,ca(arguments));return this},toString:function(){var b=e();b&&(b="else{"+b+"}");return fa(["if(",a,"){",f(),"}",b])}})},compile:function(){var a=
['"use strict";',e,"return {"];Object.keys(g).forEach(function(b){a.push('"',b,'":',g[b].toString(),",")});a.push("}");var b=fa(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,d.concat(b)).apply(null,f)}}}function ga(a){return Array.isArray(a)||T(a)||H(a)}function qa(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function X(a,b,c,d){this.thisDep=a;this.contextDep=b;this.propDep=c;this.append=d}function da(a){return a&&!(a.thisDep||
a.contextDep||a.propDep)}function N(a){return new X(!1,!1,!1,a)}function ba(a,b){var c=a.type;return 0===c?(c=a.data.length,new X(!0,1<=c,2<=c,b)):4===c?(c=a.data,new X(c.thisDep,c.contextDep,c.propDep,b)):new X(3===c,2===c,1===c,b)}function ja(a,b,c,d,f,e,g,h,l,k,m,n,q,p,r){function u(a){return a.replace(".","_")}function t(a,b,c){var d=u(a);Va.push(a);ja[d]=Ja[d]=!!c;ha[d]=b}function z(a,b,c){var d=u(a);Va.push(a);Array.isArray(c)?(Ja[d]=c.slice(),ja[d]=c.slice()):Ja[d]=ja[d]=c;za[d]=b}function v(){var a=
ta(),c=a.link,d=a.global;a.id=pa++;a.batchId="0";var f=c(Ga),e=a.shared={props:"a0"};Object.keys(Ga).forEach(function(a){e[a]=d.def(f,".",a)});y.optional(function(){a.CHECK=c(y);a.commandStr=y.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")};ma.invalidBlendCombinations=pb});var g=a.next={},h=a.current={};Object.keys(za).forEach(function(a){Array.isArray(Ja[a])&&(g[a]=d.def(e.next,".",a),h[a]=d.def(e.current,
".",a))});var l=a.constants={};Object.keys(ma).forEach(function(a){l[a]=d.def(JSON.stringify(ma[a]))});a.invoke=function(b,d){switch(d.type){case 0:var f=["this",e.context,e.props,a.batchId];return b.def(c(d.data),".call(",f.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(e.props,d.data);case 2:return b.def(e.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref}};a.attribCache={};var m={};a.scopeAttrib=function(a){a=b.id(a);if(a in m)return m[a];
var d=k.scope[a];d||(d=k.scope[a]=new ia);return m[a]=c(d)};return a}function x(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=N(function(a,b){return d});c.enable=d}else if("profile"in a){var f=a.profile;c=ba(f,function(a,b){return a.invoke(b,f)})}return c}function w(a,b){var c=a["static"],d=a.dynamic;if("framebuffer"in c){var f=c.framebuffer;return f?(f=h.getFramebuffer(f),y.command(f,"invalid framebuffer object"),N(function(a,b){var c=a.link(f),d=a.shared;b.set(d.framebuffer,
".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):N(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in d){var e=d.framebuffer;return ba(e,function(a,b){var c=a.invoke(b,e),d=a.shared,f=d.framebuffer,g=b.def(f,".getFramebuffer(",c,")");y.optional(function(){a.assert(b,
"!"+c+"||"+g,"invalid framebuffer object")});b.set(f,".next",g);d=d.context;b.set(d,".framebufferWidth",g+"?"+g+".width:"+d+".drawingBufferWidth");b.set(d,".framebufferHeight",g+"?"+g+".height:"+d+".drawingBufferHeight");return g})}return null}function A(a,b,c){function d(a){if(a in f){var g=f[a];y.commandType(g,"object","invalid "+a,c.commandStr);var h=!0,l=g.x|0,k=g.y|0,m,n;"width"in g?(m=g.width|0,y.command(0<=m,"invalid "+a,c.commandStr)):h=!1;"height"in g?(n=g.height|0,y.command(0<=n,"invalid "+
a,c.commandStr)):h=!1;return new X(!h&&b&&b.thisDep,!h&&b&&b.contextDep,!h&&b&&b.propDep,function(a,b){var c=a.shared.context,d=m;"width"in g||(d=b.def(c,".","framebufferWidth","-",l));var f=n;"height"in g||(f=b.def(c,".","framebufferHeight","-",k));return[l,k,d,f]})}if(a in e){var q=e[a],h=ba(q,function(b,c){var d=b.invoke(c,q);y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=b.shared.context,e=c.def(d,".x|0"),g=c.def(d,".y|0"),h=c.def('"width" in ',d,"?",d,".width|0:",
"(",f,".","framebufferWidth","-",e,")"),l=c.def('"height" in ',d,"?",d,".height|0:","(",f,".","framebufferHeight","-",g,")");y.optional(function(){b.assert(c,h+">=0&&"+l+">=0","invalid "+a)});return[e,g,h,l]});b&&(h.thisDep=h.thisDep||b.thisDep,h.contextDep=h.contextDep||b.contextDep,h.propDep=h.propDep||b.propDep);return h}return b?new X(b.thisDep,b.contextDep,b.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var f=
a["static"],e=a.dynamic;if(a=d("viewport")){var g=a;a=new X(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=g.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:d("scissor.box")}}function D(a,b){var c=a["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<Object.keys(b.dynamic).length)return null;var c=b["static"],d=Object.keys(c);if(0<d.length&&"number"===typeof c[d[0]]){for(var f=[],e=0;e<d.length;++e)y("number"===
typeof c[d[e]],"must specify all vertex attribute locations when using vaos"),f.push([c[d[e]]|0,d[e]]);return f}}return null}function F(a,c,d){function f(a){if(a in e){var c=b.id(e[a]);y.optional(function(){m.shader(qb[a],c,y.guessCommand())});var d=N(function(){return c});d.id=c;return d}if(a in g){var h=g[a];return ba(h,function(b,c){var d=b.invoke(c,h),f=c.def(b.shared.strings,".id(",d,")");y.optional(function(){c(b.shared.shader,".shader(",qb[a],",",f,",",b.command,");")});return f})}return null}
var e=a["static"],g=a.dynamic,h=f("frag"),l=f("vert"),k=null;da(h)&&da(l)?(k=m.program(l.id,h.id,null,d),a=N(function(a,b){return a.link(k)})):a=new X(h&&h.thisDep||l&&l.thisDep,h&&h.contextDep||l&&l.contextDep,h&&h.propDep||l&&l.propDep,function(a,b){var c=a.shared.shader,d;d=h?h.append(a,b):b.def(c,".","frag");var f;f=l?l.append(a,b):b.def(c,".","vert");var e=c+".program("+f+","+d;y.optional(function(){e+=","+a.command});return b.def(e+")")});return{frag:h,vert:l,progVar:a,program:k}}function I(a,
b){function c(a,e){if(a in d){var h=d[a]|0;y.command(!e||0<=h,"invalid "+a,b.commandStr);return N(function(a,b){e&&(a.OFFSET=h);return h})}if(a in f){var l=f[a];return ba(l,function(b,c){var d=b.invoke(c,l);e&&(b.OFFSET=d,y.optional(function(){b.assert(c,d+">=0","invalid "+a)}));return d})}return e&&g?N(function(a,b){a.OFFSET="0";return 0}):null}var d=a["static"],f=a.dynamic,g=function(){if("elements"in d){var a=d.elements;ga(a)?a=e.getElements(e.create(a,!0)):a&&(a=e.getElements(a),y.command(a,"invalid elements",
b.commandStr));var c=N(function(b,c){if(a){var d=b.link(a);return b.ELEMENTS=d}return b.ELEMENTS=null});c.value=a;return c}if("elements"in f){var g=f.elements;return ba(g,function(a,b){var c=a.shared,d=c.isBufferArgs,c=c.elements,f=a.invoke(b,g),e=b.def("null"),d=b.def(d,"(",f,")"),h=a.cond(d).then(e,"=",c,".createStream(",f,");")["else"](e,"=",c,".getElements(",f,");");y.optional(function(){a.assert(h["else"],"!"+f+"||"+e,"invalid elements")});b.entry(h);b.exit(a.cond(d).then(c,".destroyStream(",
e,");"));return a.ELEMENTS=e})}return null}(),h=c("offset",!0);return{elements:g,primitive:function(){if("primitive"in d){var a=d.primitive;y.commandParameter(a,Ra,"invalid primitve",b.commandStr);return N(function(b,c){return Ra[a]})}if("primitive"in f){var c=f.primitive;return ba(c,function(a,b){var d=a.constants.primTypes,f=a.invoke(b,c);y.optional(function(){a.assert(b,f+" in "+d,"invalid primitive, must be one of "+Object.keys(Ra))});return b.def(d,"[",f,"]")})}return g?da(g)?g.value?N(function(a,
b){return b.def(a.ELEMENTS,".primType")}):N(function(){return 4}):new X(g.thisDep,g.contextDep,g.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in d){var a=d.count|0;y.command("number"===typeof a&&0<=a,"invalid vertex count",b.commandStr);return N(function(){return a})}if("count"in f){var c=f.count;return ba(c,function(a,b){var d=a.invoke(b,c);y.optional(function(){a.assert(b,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});
return d})}if(g){if(da(g)){if(g)return h?new X(h.thisDep,h.contextDep,h.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);y.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):N(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var e=N(function(){return-1});y.optional(function(){e.MISSING=!0});return e}var l=new X(g.thisDep||h.thisDep,g.contextDep||h.contextDep,g.propDep||h.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?
b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});y.optional(function(){l.DYNAMIC=!0});return l}return null}(),instances:c("instances",!1),offset:h}}function B(a,b){var c=a["static"],f=a.dynamic,e={};Va.forEach(function(a){function g(b,d){if(a in c){var l=b(c[a]);e[h]=N(function(){return l})}else if(a in f){var k=f[a];e[h]=ba(k,function(a,b){return d(a,b,a.invoke(b,k))})}}var h=u(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(c){y.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,d){y.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return g(function(c){y.commandParameter(c,Ta,"invalid "+a,b.commandStr);return Ta[c]},function(b,c,d){var f=b.constants.compareFuncs;y.optional(function(){b.assert(c,d+" in "+f,"invalid "+a+", must be one of "+Object.keys(Ta))});return c.def(f,"[",d,"]")});case "depth.range":return g(function(a){y.command(O(a)&&2===a.length&&
"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),f=b.def("+",c,"[1]");return[d,f]});case "blend.func":return g(function(a){y.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,
d="srcAlpha"in a?a.srcAlpha:a.src,f="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;y.commandParameter(c,Fa,h+".srcRGB",b.commandStr);y.commandParameter(d,Fa,h+".srcAlpha",b.commandStr);y.commandParameter(f,Fa,h+".dstRGB",b.commandStr);y.commandParameter(a,Fa,h+".dstAlpha",b.commandStr);y.command(-1===pb.indexOf(c+", "+f),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+f+")",b.commandStr);return[Fa[c],Fa[f],Fa[d],Fa[a]]},function(b,c,d){function f(g,h){var l=c.def('"',g,
h,'" in ',d,"?",d,".",g,h,":",d,".",g);y.optional(function(){b.assert(c,l+" in "+e,"invalid "+a+"."+g+h+", must be one of "+Object.keys(Fa))});return l}var e=b.constants.blendFuncs;y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=f("src","RGB"),h=f("dst","RGB");y.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=c.def(e,
"[",g,"]"),k=c.def(e,"[",f("src","Alpha"),"]"),m=c.def(e,"[",h,"]"),n=c.def(e,"[",f("dst","Alpha"),"]");return[l,m,k,n]});case "blend.equation":return g(function(c){if("string"===typeof c)return y.commandParameter(c,la,"invalid "+a,b.commandStr),[la[c],la[c]];if("object"===typeof c)return y.commandParameter(c.rgb,la,a+".rgb",b.commandStr),y.commandParameter(c.alpha,la,a+".alpha",b.commandStr),[la[c.rgb],la[c.alpha]];y.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var f=b.constants.blendEquations,
e=c.def(),g=c.def(),h=b.cond("typeof ",d,'==="string"');y.optional(function(){function c(a,d,e){b.assert(a,e+" in "+f,"invalid "+d+", must be one of "+Object.keys(la))}c(h.then,a,d);b.assert(h["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(h["else"],a+".rgb",d+".rgb");c(h["else"],a+".alpha",d+".alpha")});h.then(e,"=",g,"=",f,"[",d,"];");h["else"](e,"=",f,"[",d,".rgb];",g,"=",f,"[",d,".alpha];");c(h);return[e,g]});case "blend.color":return g(function(a){y.command(O(a)&&4===a.length,"blend.color must be a 4d array",
b.commandStr);return J(4,function(b){return+a[b]})},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return J(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return g(function(a){y.commandType(a,"number",h,b.commandStr);return a|0},function(a,b,c){y.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return g(function(c){y.commandType(c,
"object",h,b.commandStr);var d=c.cmp||"keep",f=c.ref||0;c="mask"in c?c.mask:-1;y.commandParameter(d,Ta,a+".cmp",b.commandStr);y.commandType(f,"number",a+".ref",b.commandStr);y.commandType(c,"number",a+".mask",b.commandStr);return[Ta[d],f,c]},function(a,b,c){var d=a.constants.compareFuncs;y.optional(function(){function f(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}f(c+"&&typeof ",c,'==="object"');f('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var f=b.def('"cmp" in ',
c,"?",d,"[",c,".cmp]",":",7680),e=b.def(c,".ref|0"),g=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[f,e,g]});case "stencil.opFront":case "stencil.opBack":return g(function(c){y.commandType(c,"object",h,b.commandStr);var d=c.fail||"keep",f=c.zfail||"keep";c=c.zpass||"keep";y.commandParameter(d,Ka,a+".fail",b.commandStr);y.commandParameter(f,Ka,a+".zfail",b.commandStr);y.commandParameter(c,Ka,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,Ka[d],Ka[f],Ka[c]]},function(b,c,d){function f(g){y.optional(function(){b.assert(c,
'!("'+g+'" in '+d+")||("+d+"."+g+" in "+e+")","invalid "+a+"."+g+", must be one of "+Object.keys(Ka))});return c.def('"',g,'" in ',d,"?",e,"[",d,".",g,"]:",7680)}var e=b.constants.stencilOps;y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return g(function(a){y.commandType(a,"object",h,b.commandStr);var c=a.factor|0;a=a.units|0;y.commandType(c,"number",h+".factor",b.commandStr);
y.commandType(a,"number",h+".units",b.commandStr);return[c,a]},function(b,c,d){y.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=c.def(d,".factor|0"),e=c.def(d,".units|0");return[f,e]});case "cull.face":return g(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);y.command(!!c,h,b.commandStr);return c},function(a,b,c){y.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(a){y.command("number"===
typeof a&&a>=d.lineWidthDims[0]&&a<=d.lineWidthDims[1],"invalid line width, must be a positive number between "+d.lineWidthDims[0]+" and "+d.lineWidthDims[1],b.commandStr);return a},function(a,b,c){y.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+d.lineWidthDims[0]+"&&"+c+"<="+d.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return g(function(a){y.commandParameter(a,fb,h,b.commandStr);return fb[a]},function(a,b,c){y.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return g(function(a){y.command(O(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){y.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return J(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return g(function(a){y.command("object"===typeof a&&a,
h,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;y.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,b,c){y.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),f=b.def("!!",c,".invert");return[d,f]})}});return e}function C(a,b){var c=a["static"],d=a.dynamic,f={};Object.keys(c).forEach(function(a){var d=c[a],e;if("number"===
typeof d||"boolean"===typeof d)e=N(function(){return d});else if("function"===typeof d){var g=d._reglType;"texture2d"===g||"textureCube"===g?e=N(function(a){return a.link(d)}):"framebuffer"===g||"framebufferCube"===g?(y.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),e=N(function(a){return a.link(d.color[0])})):y.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else O(d)?e=N(function(b){return b.global.def("[",J(d.length,function(c){y.command("number"===
typeof d[c]||"boolean"===typeof d[c],"invalid uniform "+a,b.commandStr);return d[c]}),"]")}):y.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);e.value=d;f[a]=e});Object.keys(d).forEach(function(a){var b=d[a];f[a]=ba(b,function(a,c){return a.invoke(c,b)})});return f}function E(a,c){var d=a["static"],e=a.dynamic,g={};Object.keys(d).forEach(function(a){var e=d[a],h=b.id(a),l=new ia;if(ga(e))l.state=1,l.buffer=f.getBuffer(f.create(e,34962,!1,!0)),l.type=0;else{var k=f.getBuffer(e);
if(k)l.state=1,l.buffer=k,l.type=0;else if(y.command("object"===typeof e&&e,"invalid data for attribute "+a,c.commandStr),"constant"in e){var m=e.constant;l.buffer="null";l.state=2;"number"===typeof m?l.x=m:(y.command(O(m)&&0<m.length&&4>=m.length,"invalid constant for attribute "+a,c.commandStr),Ua.forEach(function(a,b){b<m.length&&(l[a]=m[b])}))}else{k=ga(e.buffer)?f.getBuffer(f.create(e.buffer,34962,!1,!0)):f.getBuffer(e.buffer);y.command(!!k,'missing buffer for attribute "'+a+'"',c.commandStr);
var n=e.offset|0;y.command(0<=n,'invalid offset for attribute "'+a+'"',c.commandStr);var q=e.stride|0;y.command(0<=q&&256>q,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var p=e.size|0;y.command(!("size"in e)||0<p&&4>=p,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var r=!!e.normalized,t=0;"type"in e&&(y.commandParameter(e.type,Na,"invalid type for attribute "+a,c.commandStr),t=Na[e.type]);var u=e.divisor|0;"divisor"in e&&(y.command(0===
u||ea,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),y.command(0<=u,'invalid divisor for attribute "'+a+'"',c.commandStr));y.optional(function(){var b=c.commandStr,d="buffer offset divisor normalized type size stride".split(" ");Object.keys(e).forEach(function(c){y.command(0<=d.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+d+")",b)})});l.buffer=k;l.state=1;l.size=p;l.normalized=r;l.type=t||k.dtype;l.offset=n;l.stride=
q;l.divisor=u}}g[a]=N(function(a,b){var c=a.attribCache;if(h in c)return c[h];var d={isStream:!1};Object.keys(l).forEach(function(a){d[a]=l[a]});l.buffer&&(d.buffer=a.link(l.buffer),d.type=d.type||d.buffer+".dtype");return c[h]=d})});Object.keys(e).forEach(function(a){var b=e[a];g[a]=ba(b,function(c,d){function f(a){d(m[a],"=",e,".",a,"|0;")}var e=c.invoke(d,b),g=c.shared,h=c.constants,l=g.isBufferArgs,k=g.buffer;y.optional(function(){c.assert(d,e+"&&(typeof "+e+'==="object"||typeof '+e+'==="function")&&('+
l+"("+e+")||"+k+".getBuffer("+e+")||"+k+".getBuffer("+e+".buffer)||"+l+"("+e+'.buffer)||("constant" in '+e+"&&(typeof "+e+'.constant==="number"||'+g.isArrayLike+"("+e+".constant))))",'invalid dynamic attribute "'+a+'"')});var m={isStream:d.def(!1)},n=new ia;n.state=1;Object.keys(n).forEach(function(a){m[a]=d.def(""+n[a])});var q=m.buffer,p=m.type;d("if(",l,"(",e,")){",m.isStream,"=true;",q,"=",k,".createStream(",34962,",",e,");",p,"=",q,".dtype;","}else{",q,"=",k,".getBuffer(",e,");","if(",q,"){",
p,"=",q,".dtype;",'}else if("constant" in ',e,"){",m.state,"=",2,";","if(typeof "+e+'.constant === "number"){',m[Ua[0]],"=",e,".constant;",Ua.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",Ua.map(function(a,b){return m[a]+"="+e+".constant.length>"+b+"?"+e+".constant["+b+"]:0;"}).join(""),"}}else{","if(",l,"(",e,".buffer)){",q,"=",k,".createStream(",34962,",",e,".buffer);","}else{",q,"=",k,".getBuffer(",e,".buffer);","}",p,'="type" in ',e,"?",h.glTypes,"[",e,".type]:",q,".dtype;",
m.normalized,"=!!",e,".normalized;");f("size");f("offset");f("stride");f("divisor");d("}}");d.exit("if(",m.isStream,"){",k,".destroyStream(",q,");","}");return m})});return g}function G(a,b){var c=a["static"],d=a.dynamic;if("vao"in c){var f=c.vao;null!==f&&null===k.getVAO(f)&&(f=k.createVAO(f));return N(function(a){return a.link(k.getVAO(f))})}if("vao"in d){var e=d.vao;return ba(e,function(a,b){var c=a.invoke(b,e);return b.def(a.shared.vao+".getVAO("+c+")")})}return null}function H(a){var b=a["static"],
c=a.dynamic,d={};Object.keys(b).forEach(function(a){var c=b[a];d[a]=N(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var b=c[a];d[a]=ba(b,function(a,c){return a.invoke(c,b)})});return d}function M(a,b,d,f,e){function g(a){var b=q[a];b&&(r[a]=b)}var h=a["static"],l=a.dynamic;y.optional(function(){function a(c){Object.keys(c).forEach(function(a){y.command(0<=b.indexOf(a),'unknown parameter "'+a+'"',e.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(Va);
a(h);a(l)});var m=D(a,b),n=w(a,e),q=A(a,n,e),p=I(a,e),r=B(a,e),t=F(a,e,m);g("viewport");g(u("scissor.box"));var z=0<Object.keys(r).length,n={framebuffer:n,draw:p,shader:t,state:r,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};n.profile=x(a,e);n.uniforms=C(d,e);n.drawVAO=n.scopeVAO=G(a,e);if(!n.drawVAO&&t.program&&!m&&c.angle_instanced_arrays){var v=!0;a=t.program.attributes.map(function(a){a=b["static"][a];v=v&&!!a;return a});if(v&&0<a.length){var Aa=k.getVAO(k.createVAO(a));n.drawVAO=
new X(null,null,null,function(a,b){return a.link(Aa)});n.useVAO=!0}}m?n.useVAO=!0:n.attributes=E(b,e);n.context=H(f,e);return n}function L(a,b,c){var d=a.shared.context,f=a.scope();Object.keys(c).forEach(function(e){b.save(d,"."+e);f(d,".",e,"=",c[e].append(a,b),";")});b(f)}function U(a,b,c,d){var f=a.shared,e=f.gl,g=f.framebuffer,h;na&&(h=b.def(f.extensions,".webgl_draw_buffers"));var l=a.constants,f=l.drawBuffer,l=l.backBuffer;a=c?c.append(a,b):b.def(g,".next");d||b("if(",a,"!==",g,".cur){");b("if(",
a,"){",e,".bindFramebuffer(",36160,",",a,".framebuffer);");na&&b(h,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);");b("}else{",e,".bindFramebuffer(",36160,",null);");na&&b(h,".drawBuffersWEBGL(",l,");");b("}",g,".cur=",a,";");d||b("}")}function Q(a,b,c){var d=a.shared,f=d.gl,e=a.current,g=a.next,h=d.current,l=d.next,k=a.cond(h,".dirty");Va.forEach(function(b){b=u(b);if(!(b in c.state)){var d,m;if(b in g){d=g[b];m=e[b];var n=J(Ja[b].length,function(a){return k.def(d,"[",a,"]")});k(a.cond(n.map(function(a,
b){return a+"!=="+m+"["+b+"]"}).join("||")).then(f,".",za[b],"(",n,");",n.map(function(a,b){return m+"["+b+"]="+a}).join(";"),";"))}else d=k.def(l,".",b),n=a.cond(d,"!==",h,".",b),k(n),b in ha?n(a.cond(d).then(f,".enable(",ha[b],");")["else"](f,".disable(",ha[b],");"),h,".",b,"=",d,";"):n(f,".",za[b],"(",d,");",h,".",b,"=",d,";")}});0===Object.keys(c.state).length&&k(h,".dirty=false;");b(k)}function P(a,b,c,d){var f=a.shared,e=a.current,g=f.current,h=f.gl;qa(Object.keys(c)).forEach(function(f){var l=
c[f];if(!d||d(l)){var k=l.append(a,b);if(ha[f]){var m=ha[f];da(l)?k?b(h,".enable(",m,");"):b(h,".disable(",m,");"):b(a.cond(k).then(h,".enable(",m,");")["else"](h,".disable(",m,");"));b(g,".",f,"=",k,";")}else if(O(k)){var n=e[f];b(h,".",za[f],"(",k,");",k.map(function(a,b){return n+"["+b+"]="+a}).join(";"),";")}else b(h,".",za[f],"(",k,");",g,".",f,"=",k,";")}})}function K(a,b){ea&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function S(a,b,c,d,f){function e(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function g(a){r=b.def();a(r,"=",e(),";");"string"===typeof f?a(m,".count+=",f,";"):a(m,".count++;");p&&(d?(t=b.def(),a(t,"=",q,".getNumPendingQueries();")):a(q,".beginQuery(",m,");"))}function h(a){a(m,".cpuTime+=",e(),"-",r,";");p&&(d?a(q,".pushScopeStats(",t,",",q,".getNumPendingQueries(),",m,");"):a(q,".endQuery();"))}function l(a){var c=b.def(n,".profile");b(n,".profile=",a,";");b.exit(n,".profile=",c,";")}var k=a.shared,m=a.stats,n=k.current,
q=k.timer;c=c.profile;var r,t;if(c){if(da(c)){c.enable?(g(b),h(b.exit),l("true")):l("false");return}c=c.append(a,b);l(c)}else c=b.def(n,".profile");k=a.block();g(k);b("if(",c,"){",k,"}");a=a.block();h(a);b.exit("if(",c,"){",a,"}")}function R(a,b,c,d,f){function e(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,d,f){function e(){b("if(!",n,".buffer){",k,".enableVertexAttribArray(",
m,");}");var c=f.type,g;g=f.size?b.def(f.size,"||",d):d;b("if(",n,".type!==",c,"||",n,".size!==",g,"||",r.map(function(a){return n+"."+a+"!=="+f[a]}).join("||"),"){",k,".bindBuffer(",34962,",",q,".buffer);",k,".vertexAttribPointer(",[m,g,c,f.normalized,f.stride,f.offset],");",n,".type=",c,";",n,".size=",g,";",r.map(function(a){return n+"."+a+"="+f[a]+";"}).join(""),"}");ea&&(c=f.divisor,b("if(",n,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,c],");",n,".divisor=",c,";}"))}function l(){b("if(",
n,".buffer){",k,".disableVertexAttribArray(",m,");",n,".buffer=null;","}if(",Ua.map(function(a,b){return n+"."+a+"!=="+p[b]}).join("||"),"){",k,".vertexAttrib4f(",m,",",p,");",Ua.map(function(a,b){return n+"."+a+"="+p[b]+";"}).join(""),"}")}var k=h.gl,m=b.def(c,".location"),n=b.def(h.attributes,"[",m,"]");c=f.state;var q=f.buffer,p=[f.x,f.y,f.z,f.w],r=["buffer","normalized","offset","stride"];1===c?e():2===c?l():(b("if(",c,"===",1,"){"),e(),b("}else{"),l(),b("}"))}var h=a.shared;d.forEach(function(d){var h=
d.name,l=c.attributes[h],k;if(l){if(!f(l))return;k=l.append(a,b)}else{if(!f(rb))return;var m=a.scopeAttrib(h);y.optional(function(){a.assert(b,m+".state","missing attribute "+h)});k={};Object.keys(new ia).forEach(function(a){k[a]=b.def(m,".",a)})}g(a.link(d),e(d.info.type),k)})}function T(a,c,d,f,e){for(var g=a.shared,h=g.gl,l,k=0;k<f.length;++k){var m=f[k],n=m.name,q=m.info.type,p=d.uniforms[n],m=a.link(m)+".location",r;if(p){if(!e(p))continue;if(da(p)){var t=p.value;y.command(null!==t&&"undefined"!==
typeof t,'missing uniform "'+n+'"',a.commandStr);if(35678===q||35680===q)y.command("function"===typeof t&&(35678===q&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===q&&("textureCube"===t._reglType||"framebufferCube"===t._reglType)),"invalid texture for uniform "+n,a.commandStr),p=a.link(t._texture||t.color[0]._texture),c(h,".uniform1i(",m,",",p+".bind());"),c.exit(p,".unbind();");else if(35674===q||35675===q||35676===q){y.optional(function(){y.command(O(t),"invalid matrix for uniform "+
n,a.commandStr);y.command(35674===q&&4===t.length||35675===q&&9===t.length||35676===q&&16===t.length,"invalid length for matrix uniform "+n,a.commandStr)});var p=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),u=2;35675===q?u=3:35676===q&&(u=4);c(h,".uniformMatrix",u,"fv(",m,",false,",p,");")}else{switch(q){case 5126:y.commandType(t,"number","uniform "+n,a.commandStr);l="1f";break;case 35664:y.command(O(t)&&2===t.length,"uniform "+n,a.commandStr);l="2f";break;case 35665:y.command(O(t)&&
3===t.length,"uniform "+n,a.commandStr);l="3f";break;case 35666:y.command(O(t)&&4===t.length,"uniform "+n,a.commandStr);l="4f";break;case 35670:y.commandType(t,"boolean","uniform "+n,a.commandStr);l="1i";break;case 5124:y.commandType(t,"number","uniform "+n,a.commandStr);l="1i";break;case 35671:y.command(O(t)&&2===t.length,"uniform "+n,a.commandStr);l="2i";break;case 35667:y.command(O(t)&&2===t.length,"uniform "+n,a.commandStr);l="2i";break;case 35672:y.command(O(t)&&3===t.length,"uniform "+n,a.commandStr);
l="3i";break;case 35668:y.command(O(t)&&3===t.length,"uniform "+n,a.commandStr);l="3i";break;case 35673:y.command(O(t)&&4===t.length,"uniform "+n,a.commandStr);l="4i";break;case 35669:y.command(O(t)&&4===t.length,"uniform "+n,a.commandStr),l="4i"}c(h,".uniform",l,"(",m,",",O(t)?Array.prototype.slice.call(t):t,");")}continue}else r=p.append(a,c)}else{if(!e(rb))continue;r=c.def(g.uniforms,"[",b.id(n),"]")}35678===q?c("if(",r,"&&",r,'._reglType==="framebuffer"){',r,"=",r,".color[0];","}"):35680===q&&
c("if(",r,"&&",r,'._reglType==="framebufferCube"){',r,"=",r,".color[0];","}");y.optional(function(){function b(d,f){a.assert(c,d,'bad data or missing for uniform "'+n+'".  '+f)}function d(a){b("typeof "+r+'==="'+a+'"',"invalid type, expected "+a)}function f(c,d){b(g.isArrayLike+"("+r+")&&"+r+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function e(c){b("typeof "+r+'==="function"&&'+r+'._reglType==="texture'+(3553===c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(q){case 5124:d("number");
break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:d("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:d("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,"number");break;case 35678:e(3553);break;case 35680:e(34067)}});p=1;switch(q){case 35678:case 35680:p=
c.def(r,"._texture");c(h,".uniform1i(",m,",",p,".bind());");c.exit(p,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";p=2;break;case 35668:case 35672:l="3i";p=3;break;case 35669:case 35673:l="4i";p=4;break;case 5126:l="1f";break;case 35664:l="2f";p=2;break;case 35665:l="3f";p=3;break;case 35666:l="4f";p=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}c(h,".uniform",l,"(",m,",");if("M"===l.charAt(0)){var m=Math.pow(q-
35674+2,2),z=a.global.def("new Float32Array(",m,")");c("false,(Array.isArray(",r,")||",r," instanceof Float32Array)?",r,":(",J(m,function(a){return z+"["+a+"]="+r+"["+a+"]"}),",",z,")")}else 1<p?c(J(p,function(a){return r+"["+a+"]"})):c(r);c(");")}}function W(a,b,c,d){function f(e){var g=m[e];return g?g.contextDep&&d.contextDynamic||g.propDep?g.append(a,c):g.append(a,b):b.def(k,".",e)}function e(){function a(){c(u,".drawElementsInstancedANGLE(",[q,r,z,p+"<<(("+z+"-5121)>>1)",t],");")}function b(){c(u,
".drawArraysInstancedANGLE(",[q,p,r,t],");")}n?v?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}function g(){function a(){c(l+".drawElements("+[q,r,z,p+"<<(("+z+"-5121)>>1)"]+");")}function b(){c(l+".drawArrays("+[q,p,r]+");")}n?v?a():(c("if(",n,"){"),a(),c("}else{"),b(),c("}")):b()}var h=a.shared,l=h.gl,k=h.draw,m=d.draw,n=function(){var f=m.elements,e=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)e=c;f=f.append(a,e)}else f=e.def(k,".","elements");f&&e("if("+f+")"+l+".bindBuffer(34963,"+
f+".buffer.buffer);");return f}(),q=f("primitive"),p=f("offset"),r=function(){var f=m.count,e,g=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)g=c;e=f.append(a,g);y.optional(function(){f.MISSING&&a.assert(b,"false","missing vertex count");f.DYNAMIC&&a.assert(g,e+">=0","missing vertex count")})}else e=g.def(k,".","count"),y.optional(function(){a.assert(g,e+">=0","missing vertex count")});return e}();if("number"===typeof r){if(0===r)return}else c("if(",r,"){"),c.exit("}");var t,u;ea&&(t=f("instances"),
u=a.instancing);var z=n+".type",v=m.elements&&da(m.elements);ea&&("number"!==typeof t||0<=t)?"string"===typeof t?(c("if(",t,">0){"),e(),c("}else if(",t,"<0){"),g(),c("}")):e():g()}function Z(a,b,c,d,f){var e=v();f=e.proc("body",f);y.optional(function(){e.commandStr=b.commandStr;e.command=e.link(b.commandStr)});ea&&(e.instancing=f.def(e.shared.extensions,".angle_instanced_arrays"));a(e,f,c,d);return e.compile().body}function aa(a,b,c,d){K(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,
b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),R(a,b,c,d.attributes,function(){return!0}));T(a,b,c,d.uniforms,function(){return!0});W(a,b,b,c)}function Wa(a,b){var c=a.proc("draw",1);K(a,c);L(a,c,b.context);U(a,c,b.framebuffer);Q(a,c,b);P(a,c,b.state);S(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)aa(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var f=a.global.def("{}"),
e=c.def(d,".id"),g=c.def(f,"[",e,"]");c(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",f,"[",e,"]=",a.link(function(c){return Z(aa,a,b,c,1)}),"(",d,");",g,".call(this,a0);"))}0<Object.keys(b.state).length&&c(a.shared.current,".dirty=true;")}function Oa(a,b,c,d){function f(){return!0}a.batchId="a1";K(a,b);R(a,b,c,d.attributes,f);T(a,b,c,d.uniforms,f);W(a,b,b,c)}function V(a,b,c,d){function f(a){return a.contextDep&&g||a.propDep}function e(a){return!f(a)}K(a,b);var g=c.contextDep,h=b.def(),l=b.def();
a.shared.props=l;a.batchId=h;var k=a.scope(),m=a.scope();b(k.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",l,"=","a0","[",h,"];",m,"}",k.exit);c.needsContext&&L(a,m,c.context);c.needsFramebuffer&&U(a,m,c.framebuffer);P(a,m,c.state,f);c.profile&&f(c.profile)&&S(a,m,c,!1,!0);d?(c.useVAO?c.drawVAO?f(c.drawVAO)?m(a.shared.vao,".setVAO(",c.drawVAO.append(a,m),");"):k(a.shared.vao,".setVAO(",c.drawVAO.append(a,k),");"):k(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(k(a.shared.vao,".setVAO(null);"),
R(a,k,c,d.attributes,e),R(a,m,c,d.attributes,f)),T(a,k,c,d.uniforms,e),T(a,m,c,d.uniforms,f),W(a,k,m,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,m),l=m.def(d,".id"),k=m.def(b,"[",l,"]"),m(a.shared.gl,".useProgram(",d,".program);","if(!",k,"){",k,"=",b,"[",l,"]=",a.link(function(b){return Z(Oa,a,c,b,2)}),"(",d,");}",k,".call(this,a0[",h,"],",h,");"))}function ca(a,b){function c(a){return a.contextDep&&f||a.propDep}var d=a.proc("batch",2);a.batchId="0";K(a,d);var f=!1,e=!0;Object.keys(b.context).forEach(function(a){f=
f||b.context[a].propDep});f||(L(a,d,b.context),e=!1);var g=b.framebuffer,h=!1;g?(g.propDep?f=h=!0:g.contextDep&&f&&(h=!0),h||U(a,d,g)):U(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(f=!0);Q(a,d,b);P(a,d,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||S(a,d,b,!1,"a1");b.contextDep=f;b.needsContext=e;b.needsFramebuffer=h;e=b.shader.progVar;if(e.contextDep&&f||e.propDep)V(a,d,b,null);else if(e=e.append(a,d),d(a.shared.gl,".useProgram(",e,".program);"),b.shader.program)V(a,d,b,b.shader.program);
else{d(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),h=d.def(e,".id"),l=d.def(g,"[",h,"]");d(a.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",g,"[",h,"]=",a.link(function(c){return Z(V,a,b,c,2)}),"(",e,");",l,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty=true;")}function fa(a,c){function d(b){var g=c.shader[b];g&&f.set(e.shader,"."+b,g.append(a,f))}var f=a.proc("scope",3);a.batchId="a2";var e=a.shared,g=e.current;L(a,f,c.context);c.framebuffer&&c.framebuffer.append(a,
f);qa(Object.keys(c.state)).forEach(function(b){var d=c.state[b].append(a,f);O(d)?d.forEach(function(c,d){f.set(a.next[b],"["+d+"]",c)}):f.set(e.next,"."+b,d)});S(a,f,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=c.draw[b];d&&f.set(e.draw,"."+b,""+d.append(a,f))});Object.keys(c.uniforms).forEach(function(d){f.set(e.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,f))});Object.keys(c.attributes).forEach(function(b){var d=c.attributes[b].append(a,f),e=a.scopeAttrib(b);
Object.keys(new ia).forEach(function(a){f.set(e,"."+a,d[a])})});c.scopeVAO&&f.set(e.vao,".targetVAO",c.scopeVAO.append(a,f));d("vert");d("frag");0<Object.keys(c.state).length&&(f(g,".dirty=true;"),f.exit(g,".dirty=true;"));f("a1(",a.shared.context,",a0,",a.batchId,");")}function oa(a){if("object"===typeof a&&!O(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(ya.isDynamic(a[b[c]]))return!0;return!1}}function ka(a,b,c){function d(a,b){g.forEach(function(c){var d=f[c];ya.isDynamic(d)&&(d=a.invoke(b,
d),b(m,".",c,"=",d,";"))})}var f=b["static"][c];if(f&&oa(f)){var e=a.global,g=Object.keys(f),h=!1,l=!1,k=!1,m=a.global.def("{}");g.forEach(function(b){var c=f[b];if(ya.isDynamic(c))"function"===typeof c&&(c=f[b]=ya.unbox(c)),b=ba(c,null),h=h||b.thisDep,k=k||b.propDep,l=l||b.contextDep;else{e(m,".",b,"=");switch(typeof c){case "number":e(c);break;case "string":e('"',c,'"');break;case "object":Array.isArray(c)&&e("[",c.join(),"]");break;default:e(a.link(c))}e(";")}});b.dynamic[c]=new ya.DynamicVariable(4,
{thisDep:h,contextDep:l,propDep:k,ref:m,append:d});delete b["static"][c]}}var ia=k.Record,la={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(la.min=32775,la.max=32776);var ea=c.angle_instanced_arrays,na=c.webgl_draw_buffers,Ja={dirty:!0,profile:r.profile},ja={},Va=[],ha={},za={};t("dither",3024);t("blend.enable",3042);z("blend.color","blendColor",[0,0,0,0]);z("blend.equation","blendEquationSeparate",[32774,32774]);z("blend.func","blendFuncSeparate",[1,0,1,0]);t("depth.enable",
2929,!0);z("depth.func","depthFunc",513);z("depth.range","depthRange",[0,1]);z("depth.mask","depthMask",!0);z("colorMask","colorMask",[!0,!0,!0,!0]);t("cull.enable",2884);z("cull.face","cullFace",1029);z("frontFace","frontFace",2305);z("lineWidth","lineWidth",1);t("polygonOffset.enable",32823);z("polygonOffset.offset","polygonOffset",[0,0]);t("sample.alpha",32926);t("sample.enable",32928);z("sample.coverage","sampleCoverage",[1,!1]);t("stencil.enable",2960);z("stencil.mask","stencilMask",-1);z("stencil.func",
"stencilFunc",[519,0,-1]);z("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);z("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);t("scissor.enable",3089);z("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);z("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ga={gl:a,context:q,strings:b,next:ja,current:Ja,draw:n,elements:e,buffer:f,shader:m,attributes:k.state,vao:k,uniforms:l,framebuffer:h,extensions:c,timer:p,isBufferArgs:ga},
ma={primTypes:Ra,compareFuncs:Ta,blendFuncs:Fa,blendEquations:la,stencilOps:Ka,glTypes:Na,orientationType:fb};y.optional(function(){Ga.isArrayLike=O});na&&(ma.backBuffer=[1029],ma.drawBuffer=J(d.maxDrawbuffers,function(a){return 0===a?[0]:J(a,function(a){return 36064+a})}));var pa=0;return{next:ja,current:Ja,procs:function(){var a=v(),b=a.proc("poll"),f=a.proc("refresh"),e=a.block();b(e);f(e);var g=a.shared,h=g.gl,l=g.next,k=g.current;e(k,".dirty=false;");U(a,b);U(a,f,null,!0);var m;ea&&(m=a.link(ea));
c.oes_vertex_array_object&&f(a.link(c.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<d.maxAttributes;++n){var q=f.def(g.attributes,"[",n,"]"),p=a.cond(q,".buffer");p.then(h,".enableVertexAttribArray(",n,");",h,".bindBuffer(",34962,",",q,".buffer.buffer);",h,".vertexAttribPointer(",n,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](h,".disableVertexAttribArray(",n,");",h,".vertexAttrib4f(",n,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");
f(p);ea&&f(m,".vertexAttribDivisorANGLE(",n,",",q,".divisor);")}f(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");Object.keys(ha).forEach(function(c){var d=ha[c],g=e.def(l,".",c),m=a.block();m("if(",g,"){",h,".enable(",d,")}else{",h,".disable(",d,")}",k,".",c,"=",g,";");f(m);b("if(",g,"!==",k,".",c,"){",m,"}")});Object.keys(za).forEach(function(c){var d=za[c],g=Ja[c],m,n,q=a.block();q(h,".",d,"(");O(g)?(d=g.length,m=a.global.def(l,".",c),n=a.global.def(k,".",
c),q(J(d,function(a){return m+"["+a+"]"}),");",J(d,function(a){return n+"["+a+"]="+m+"["+a+"];"}).join("")),b("if(",J(d,function(a){return m+"["+a+"]!=="+n+"["+a+"]"}).join("||"),"){",q,"}")):(m=e.def(l,".",c),n=e.def(k,".",c),q(m,");",k,".",c,"=",m,";"),b("if(",m,"!==",n,"){",q,"}"));f(q)});return a.compile()}(),compile:function(a,b,c,d,f){var e=v();e.stats=e.link(f);Object.keys(b["static"]).forEach(function(a){ka(e,b,a)});zb.forEach(function(b){ka(e,a,b)});c=M(a,b,c,d,e);Wa(e,c);fa(e,c);ca(e,c);
return e.compile()}}}function pa(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var T=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray},R=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a},La="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
va={};va[5120]=va[5121]=1;va[5122]=va[5123]=va[36193]=va[33635]=va[32819]=va[32820]=2;va[5124]=va[5125]=va[5126]=va[34042]=4;var y=R(d,{optional:function(a){a()},raise:g,commandRaise:A,command:function(a,b,c){a||A(b,c||n())},parameter:function(a,b,c){a in b||g("unknown parameter ("+a+")"+e(c)+". possible values: "+Object.keys(b).join())},commandParameter:function(a,b,c,d){a in b||A("unknown parameter ("+a+")"+e(c)+". possible values: "+Object.keys(b).join(),d||n())},constructor:function(a){Object.keys(a).forEach(function(a){0>
La.indexOf(a)&&g('invalid regl constructor argument "'+a+'". must be one of '+La)})},type:function(a,b,c){k(a,b)||g("invalid parameter type"+e(c)+". expected "+b+", got "+typeof a)},commandType:D,isTypedArray:function(a,b){T(a)||g("invalid parameter type"+e(b)+". must be a typed array")},nni:function(a,b){0<=a&&(a|0)===a||g("invalid parameter type, ("+a+")"+e(b)+". must be a nonnegative integer")},oneOf:t,shaderError:function(a,b,e,g,h){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);
a=g===a.FRAGMENT_SHADER?"fragment":"vertex";D(e,"string",a+" shader source must be a string",h);var k=f(e,h);e=c(b);l(k,e);Object.keys(k).forEach(function(a){function b(a,c){d.push(a);f.push(c||"")}var c=k[a];if(c.hasErrors){var d=[""],f=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(u(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(d){d=d.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(f){var e=f[1];d=f[2];switch(e){case "assign":e="="}c=Math.max(a.line.indexOf(e,c),0)}else c=0;b(u("| ",6));b(u("^^^",c+3)+"\n","font-weight:bold");b(u("| ",6));b(d+"\n","font-weight:bold")});b(u("| ",6)+"\n")}else b(u(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(f[0]=d.join("%c"),console.log.apply(console,f))}});d.raise("Error compiling "+
a+" shader, "+k[0].name)}},linkError:function(a,b,c,e,g){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=f(c,g),e='Error linking program with vertex shader, "'+f(e,g)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),d.raise(e))},callSite:m,saveCommandRef:z,saveDrawInfo:function(a,b,c,d){function f(a){return a?d.id(a):0}function e(a,
b){Object.keys(b).forEach(function(b){a[d.id(b)]=!0})}z(a);a._fragId=f(a["static"].frag);a._vertId=f(a["static"].vert);var g=a._uniformSet={};e(g,b["static"]);e(g,b.dynamic);b=a._attributeSet={};e(b,c["static"]);e(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,b,c){a.texture?t(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):t(a.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},
guessCommand:n,texture2D:function(a,b,c){var f=b.width,e=b.height,g=b.channels;d(0<f&&f<=c.maxTextureSize&&0<e&&e<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||d(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==f&&1!==e&&d(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(d(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),
d(b.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&d(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),d(!a.genMipmaps,"mipmap generation not supported with float textures"));var h=b.images;for(c=0;16>c;++c)if(h[c]){var l=f>>c,k=e>>c;d(b.mipmask&1<<c,"missing mipmap data");var m=h[c];d(m.width===l&&m.height===k,"invalid shape for mip images");d(m.format===b.format&&m.internalformat===
b.internalformat&&m.type===b.type,"incompatible type for mip image");!m.compressed&&m.data&&(l=Math.ceil(E(m.type,g)*l/m.unpackAlignment)*m.unpackAlignment,d(m.data.byteLength===l*k,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||d(0===(b.mipmask&1<<c),"extra mipmap data");b.compressed&&d(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,c,f){var e=a.width,g=a.height,h=a.channels;d(0<e&&e<=f.maxTextureSize&&
0<g&&g<=f.maxTextureSize,"invalid texture shape");d(e===g,"cube map must be square");d(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(f=0;f<c.length;++f){var l=c[f];d(l.width===e&&l.height===g,"inconsistent cube map face shape");b.genMipmaps&&(d(!l.compressed,"can not generate mipmap for compressed textures"),d(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var k=l.images,m=0;16>m;++m){var n=k[m];if(n){var q=e>>m,p=g>>m;d(l.mipmask&1<<m,"missing mipmap data");
d(n.width===q&&n.height===p,"invalid shape for mip images");d(n.format===a.format&&n.internalformat===a.internalformat&&n.type===a.type,"incompatible type for mip image");n.compressed||n.data&&d(n.data.byteLength===q*p*Math.max(E(n.type,h),n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}}),Pa=0,ya={DynamicVariable:B,define:function(a,b){return new B(a,G(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof B},unbox:function(a,
b){return"function"===typeof a?new B(0,a):a},accessor:G},Ha={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},Ma="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ka=L();ka.zero=L();var Qa=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));
var d=1,f=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),f=a.getParameter(36063));var e=!!b.oes_texture_float;if(e){e=a.createTexture();a.bindTexture(3553,e);a.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=a.createFramebuffer();a.bindFramebuffer(36160,g);a.framebufferTexture2D(36160,36064,3553,e,0);a.bindTexture(3553,null);if(36053!==a.checkFramebufferStatus(36160))e=!1;else{a.viewport(0,0,1,1);a.clearColor(1,0,0,1);a.clear(16384);var h=ka.allocType(5126,4);a.readPixels(0,0,1,1,6408,5126,h);
a.getError()?e=!1:(a.deleteFramebuffer(g),a.deleteTexture(e),e=1===h[0]);ka.freeType(h)}}h=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=a.createTexture(),g=ka.allocType(5121,36),a.activeTexture(33984),a.bindTexture(34067,h),a.texImage2D(34069,0,6408,3,3,0,6408,5121,g),ka.freeType(g),a.bindTexture(34067,null),a.deleteTexture(h),h=!a.getError());return{colorBits:[a.getParameter(3410),a.getParameter(3411),
a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:f,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),
maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938),readFloat:e,npotTextureCube:h}},Ba=function(a){return Object.keys(a).map(function(b){return a[b]})},$a={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);
return b},flatten:function(a,b,c,d){var f=1;if(b.length)for(var e=0;e<b.length;++e)f*=b[e];else f=0;c=d||ka.allocType(c,f);switch(b.length){case 0:break;case 1:d=b[0];for(b=0;b<d;++b)c[b]=a[b];break;case 2:d=b[0];b=b[1];for(e=f=0;e<d;++e)for(var g=a[e],h=0;h<b;++h)c[f++]=g[h];break;case 3:S(a,b[0],b[1],b[2],c,0);break;default:K(a,b,0,c,0)}return c}},Xa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,
"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Na={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ya={dynamic:35048,stream:35040,"static":35044},bb=$a.flatten,hb=$a.shape,Ia=[];Ia[5120]=1;Ia[5122]=2;Ia[5124]=4;Ia[5121]=1;Ia[5123]=2;Ia[5125]=4;Ia[5126]=4;var Ra={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ib=
new Float32Array(1),sb=new Uint32Array(ib.buffer),ob=function(a){return!(a&a-1)&&!!a},vb=[9984,9986,9985,9987],Za=[0,6409,6410,6407,6408],Da={};Da[6409]=Da[6406]=Da[6402]=1;Da[34041]=Da[6410]=2;Da[6407]=Da[35904]=3;Da[6408]=Da[35906]=4;var cb=V("HTMLCanvasElement"),db=V("OffscreenCanvas"),jb=V("CanvasRenderingContext2D"),kb=V("ImageBitmap"),lb=V("HTMLImageElement"),mb=V("HTMLVideoElement"),tb=Object.keys(Xa).concat([cb,db,jb,kb,lb,mb]),Sa=[];Sa[5121]=1;Sa[5126]=4;Sa[36193]=2;Sa[5123]=2;Sa[5125]=4;
var wa=[];wa[32854]=2;wa[32855]=2;wa[36194]=2;wa[34041]=4;wa[33776]=.5;wa[33777]=.5;wa[33778]=1;wa[33779]=1;wa[35986]=.5;wa[35987]=1;wa[34798]=1;wa[35840]=.5;wa[35841]=.25;wa[35842]=.5;wa[35843]=.25;wa[36196]=.5;var Ea=[];Ea[32854]=2;Ea[32855]=2;Ea[36194]=2;Ea[33189]=2;Ea[36168]=1;Ea[34041]=4;Ea[35907]=4;Ea[34836]=16;Ea[34842]=8;Ea[34843]=6;var Ab=function(a,b,c,d,f){function e(a){this.id=k++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;f.profile&&(this.stats={size:0})}
function g(b){var c=b.renderbuffer;y(c,"must not double destroy renderbuffer");a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(c);b.renderbuffer=null;b.refCount=0;delete m[b.id];d.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(h.srgba=35907);b.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);b.webgl_color_buffer_float&&(h.rgba32f=34836);var l=[];Object.keys(h).forEach(function(a){l[h[a]]=a});var k=
0,m={};e.prototype.decRef=function(){0>=--this.refCount&&g(this)};f.profile&&(d.getTotalRenderbufferSize=function(){var a=0;Object.keys(m).forEach(function(b){a+=m[b].stats.size});return a});return{create:function(b,g){function k(b,d){var e=0,g=0,m=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,y(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),e=g[0]|0,g=g[1]|0):("radius"in b&&(e=g=b.radius|0),"width"in b&&(e=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(y.parameter(b.format,
h,"invalid renderbuffer format"),m=h[b.format])):"number"===typeof b?(e=b|0,g="number"===typeof d?d|0:e):b?y.raise("invalid arguments to renderbuffer constructor"):e=g=1;y(0<e&&0<g&&e<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size");if(e!==n.width||g!==n.height||m!==n.format)return k.width=n.width=e,k.height=n.height=g,n.format=m,a.bindRenderbuffer(36161,n.renderbuffer),a.renderbufferStorage(36161,m,e,g),y(0===a.getError(),"invalid render buffer format"),f.profile&&(n.stats.size=
Ea[n.format]*n.width*n.height),k.format=l[n.format],k}var n=new e(a.createRenderbuffer());m[n.id]=n;d.renderbufferCount++;k(b,g);k.resize=function(b,d){var e=b|0,g=d|0||e;if(e===n.width&&g===n.height)return k;y(0<e&&0<g&&e<=c.maxRenderbufferSize&&g<=c.maxRenderbufferSize,"invalid renderbuffer size");k.width=n.width=e;k.height=n.height=g;a.bindRenderbuffer(36161,n.renderbuffer);a.renderbufferStorage(36161,n.format,e,g);y(0===a.getError(),"invalid render buffer format");f.profile&&(n.stats.size=Ea[n.format]*
n.width*n.height);return k};k._reglType="renderbuffer";k._renderbuffer=n;f.profile&&(k.stats=n.stats);k.destroy=function(){n.decRef()};return k},clear:function(){Ba(m).forEach(g)},restore:function(){Ba(m).forEach(function(b){b.renderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)});a.bindRenderbuffer(36161,null)}}},xb=[6407,6408],eb=[];eb[6408]=4;eb[6407]=3;var ab=[];ab[5121]=1;ab[5126]=4;ab[36193]=2;var yb=[32854,32855,
36194,35907,34842,34843,34836],wb={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"},Ua=["x","y","z","w"],zb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Fa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,
"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pb="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
Ta={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ka={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},qb={frag:35632,vert:35633},fb={cw:2304,ccw:2305},rb=new X(!1,!1,!1,function(){}),Bb=function(a,b){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(a,b,f){var e=
g.pop()||new c;e.startQueryIndex=a;e.endQueryIndex=b;e.sum=0;e.stats=f;h.push(e)}if(!b.ext_disjoint_timer_query)return null;var f=[],e=[],g=[],h=[],l=[],k=[];return{beginQuery:function(a){var c=f.pop()||b.ext_disjoint_timer_query.createQueryEXT();b.ext_disjoint_timer_query.beginQueryEXT(35007,c);e.push(c);d(e.length-1,e.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var a,c;a=e.length;if(0!==a){k.length=Math.max(k.length,a+1);l.length=
Math.max(l.length,a+1);l[0]=0;var d=k[0]=0;for(c=a=0;c<e.length;++c){var m=e[c];b.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(d+=b.ext_disjoint_timer_query.getQueryObjectEXT(m,34918),f.push(m)):e[a++]=m;l[c+1]=d;k[c+1]=a}e.length=a;for(c=a=0;c<h.length;++c){var d=h[c],n=d.startQueryIndex,m=d.endQueryIndex;d.sum+=l[m]-l[n];n=k[n];m=k[m];m===n?(d.stats.gpuTime+=d.sum/1E6,g.push(d)):(d.startQueryIndex=n,d.endQueryIndex=m,h[a++]=d)}h.length=a}},getNumPendingQueries:function(){return e.length},
clear:function(){f.push.apply(f,e);for(var a=0;a<f.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(f[a]);e.length=0;f.length=0},restore:function(){e.length=0;f.length=0}}};return function(a){function c(){if(0===N.length)A&&A.update(),V=null;else{V=Ha.next(c);n();for(var a=N.length-1;0<=a;--a){var b=N[a];b&&b(B,null,0)}r.flush();A&&A.update()}}function d(){!V&&0<N.length&&(V=Ha.next(c))}function f(){V&&(Ha.cancel(c),V=null)}function e(a){a.preventDefault();u=!0;f();T.forEach(function(a){a()})}
function g(a){r.getError();u=!1;z.restore();M.restore();E.restore();J.restore();L.restore();P.restore();G.restore();A&&A.restore();K.procs.refresh();d();W.forEach(function(a){a()})}function h(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var f=a[b];ya.isDynamic(f)?d[b]=ya.unbox(f,b):c[b]=f});return{dynamic:d,"static":c}}function c(a){for(;n.length<a;)n.push(null);return n}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");var d=b(a.context||{}),
f=b(a.uniforms||{}),e=b(a.attributes||{}),g=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=R({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a));a={gpuTime:0,cpuTime:0,count:0};
var d=K.compile(g,e,f,d,a),l=d.draw,k=d.batch,m=d.scope,n=[];return R(function(a,b){var d;u&&y.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return k.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return k.call(this,a,a.length)}else return l.call(this,
a)},{stats:a})}function l(a,b){var c=0;K.procs.poll();var d=b.color;d&&(r.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(r.clearDepth(+b.depth),c|=256);"stencil"in b&&(r.clearStencil(b.stencil|0),c|=1024);y(!!c,"called regl.clear with no buffer specified");r.clear(c)}function k(a){y.type(a,"function","regl.frame() callback must be a function");N.push(a);d();return{cancel:function(){function b(){var a=pa(N,b);N[a]=N[N.length-1];--N.length;0>=N.length&&f()}var c=pa(N,a);y(0<=
c,"cannot cancel a frame twice");N[c]=b}}}function m(){var a=S.viewport,b=S.scissor_box;a[0]=a[1]=b[0]=b[1]=0;B.viewportWidth=B.framebufferWidth=B.drawingBufferWidth=a[2]=b[2]=r.drawingBufferWidth;B.viewportHeight=B.framebufferHeight=B.drawingBufferHeight=a[3]=b[3]=r.drawingBufferHeight}function n(){B.tick+=1;B.time=p();m();K.procs.poll()}function q(){m();K.procs.refresh();A&&A.update()}function p(){return(Ma()-D)/1E3}a=U(a);if(!a)return null;var r=a.gl,t=r.getContextAttributes(),u=r.isContextLost(),
z=Q(r,a);if(!z)return null;var v=b(),x={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},w=z.extensions,A=Bb(r,w),D=Ma(),F=r.drawingBufferWidth,I=r.drawingBufferHeight,B={tick:0,time:0,viewportWidth:F,viewportHeight:I,framebufferWidth:F,framebufferHeight:I,drawingBufferWidth:F,drawingBufferHeight:I,pixelRatio:a.pixelRatio},C=Qa(r,w),E=ia(r,x,a,function(a){return G.destroyBuffer(a)}),G=ea(r,w,C,x,E),H=ha(r,w,
E,x),M=sa(r,v,x,a),J=oa(r,w,C,function(){K.procs.poll()},B,x,a),L=Ab(r,w,C,x,a),P=ra(r,w,C,J,L,x),K=ja(r,v,w,C,E,H,J,P,{},G,M,{elements:null,primitive:4,count:-1,offset:0,instances:-1},B,A,a),v=na(r,P,K.procs.poll,B,t,w,C),S=K.next,O=r.canvas,N=[],T=[],W=[],Z=[a.onDestroy],V=null;O&&(O.addEventListener("webglcontextlost",e,!1),O.addEventListener("webglcontextrestored",g,!1));var X=P.setFBO=h({framebuffer:ya.define.call(null,1,"framebuffer")});q();t=R(h,{clear:function(a){y("object"===typeof a&&a,
"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)X(R({framebuffer:a.framebuffer.faces[b]},a),l);else X(a,l);else l(null,a)},prop:ya.define.bind(null,1),context:ya.define.bind(null,2),"this":ya.define.bind(null,3),draw:h({}),buffer:function(a){return E.create(a,34962,!1,!1)},elements:function(a){return H.create(a,!1)},texture:J.create2D,cube:J.createCube,renderbuffer:L.create,framebuffer:P.create,framebufferCube:P.createCube,
vao:G.createVAO,attributes:t,frame:k,on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return k(b);case "lost":c=T;break;case "restore":c=W;break;case "destroy":c=Z;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:C,hasExtension:function(a){return 0<=C.extensions.indexOf(a.toLowerCase())},read:v,
destroy:function(){N.length=0;f();O&&(O.removeEventListener("webglcontextlost",e),O.removeEventListener("webglcontextrestored",g));M.clear();P.clear();L.clear();J.clear();H.clear();E.clear();G.clear();A&&A.clear();Z.forEach(function(a){a()})},_gl:r,_refresh:q,poll:function(){n();A&&A.update()},now:p,stats:x});a.onDone(null,t);return t}})},{}],73:[function(a,g,k){function p(a,c){for(var d=Array(a.length-1),e=1;e<a.length;++e)for(var g=d[e-1]=Array(a.length-1),h=0,k=0;h<a.length;++h)h!==c&&(g[k++]=
a[e][h]);return d}function h(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",h(a.slice(0,c)),",",h(a.slice(c)),")"].join("")}function d(a,c){if("m"===a.charAt(0)){if("w"===c.charAt(0)){var e=a.split("[");return["w",c.substr(1),"m",e[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return d(c,a)}function e(a){if(2===a.length)return[["diff(",d(a[0][0],a[1][1]),",",d(a[1][0],a[0][1]),")"].join("")];for(var c=[],g=0;g<
a.length;++g)c.push(["scale(",h(e(p(a,g))),",",g&1?"-":"",a[0][g],")"].join(""));return c}function q(a,c){for(var d=[],e=0;e<c-2;++e)d.push(["prod(m",a,"[",e,"],m",a,"[",e,"])"].join(""));return h(d)}function t(a){for(var c=[],d=[],g=Array(a),k=0;k<a;++k){g[k]=Array(a);for(var m=0;m<a;++m)g[k][m]=["m",m,"[",a-k-2,"]"].join("")}for(k=0;k<a;++k)g[0][k]="1",g[a-1][k]="w"+k;for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,e(p(g,k))):d.push.apply(d,e(p(g,k)));c=h(c);d=h(d);g="exactInSphere"+a;m=[];for(k=0;k<a;++k)m.push("m"+
k);m=["function ",g,"(",m.join(),"){"];for(k=0;k<a;++k){m.push("var w",k,"=",q(k,a),";");for(var t=0;t<a;++t)t!==k&&m.push("var w",k,"m",t,"=scale(w",k,",m",t,"[0]);")}m.push("var p=",c,",n=",d,",d=diff(p,n);return d[d.length-1];}return ",g);return(new Function("sum","diff","prod","scale",m.join("")))(v,r,w,n)}function u(a){var c=m[a.length];c||(c=m[a.length]=t(a.length));return c.apply(void 0,a)}var w=a("two-product"),v=a("robust-sum"),r=a("robust-subtract"),n=a("robust-scale"),m=[function(){return 0},
function(){return 0},function(){return 0}];(function(){for(;6>=m.length;)m.push(t(m.length));for(var a=[],c=["slow"],d=0;6>=d;++d)a.push("a"+d),c.push("o"+d);for(var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;6>=d;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(e.join(""));a=Function.apply(void 0,
c);g.exports=a.apply(void 0,[u].concat(m));for(d=0;6>=d;++d)g.exports[d]=m[d]})()},{"robust-scale":76,"robust-subtract":78,"robust-sum":79,"two-product":89}],74:[function(a,g,k){function p(a,c){for(var d=Array(a.length-1),e=1;e<a.length;++e)for(var g=d[e-1]=Array(a.length-1),h=0,k=0;h<a.length;++h)h!==c&&(g[k++]=a[e][h]);return d}function h(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",h(a.slice(0,c)),",",h(a.slice(c)),")"].join("")}
function d(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],e=0;e<a.length;++e)c.push(["scale(",h(d(p(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return c}function e(a){for(var c=[],e=[],g=Array(a),k=0;k<a;++k){g[k]=Array(a);for(var m=0;m<a;++m)g[k][m]=["m",m,"[",a-k-1,"]"].join("")}k=[];for(m=0;m<a;++m)0===(m&1)?c.push.apply(c,d(p(g,m))):e.push.apply(e,d(p(g,m))),k.push("m"+m);c=h(c);e=h(e);a="orientation"+a+"Exact";a=["function ",
a,"(",k.join(),"){var p=",c,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(u,t,w,v)}function q(a){var c=m[a.length];c||(c=m[a.length]=e(a.length));return c.apply(void 0,a)}var t=a("two-product"),u=a("robust-sum"),w=a("robust-scale"),v=a("robust-subtract"),r=e(3),n=e(4),m=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,d){var e=(a[1]-d[1])*(c[0]-d[0]),g=(a[0]-d[0])*(c[1]-d[1]),h=e-g;if(0<e){if(0>=
g)return h;e+=g}else if(0>e){if(0<=g)return h;e=-(e+g)}else return h;e*=3.3306690738754716E-16;return h>=e||h<=-e?h:r(a,c,d)},function(a,c,d,e){var g=a[0]-e[0],h=c[0]-e[0],k=d[0]-e[0],m=a[1]-e[1],q=c[1]-e[1],p=d[1]-e[1],b=a[2]-e[2],r=c[2]-e[2],t=d[2]-e[2],u=h*p,v=k*q,k=k*m,p=g*p,g=g*q,m=h*m,h=b*(u-v)+r*(k-p)+t*(g-m),b=7.771561172376103E-16*((Math.abs(u)+Math.abs(v))*Math.abs(b)+(Math.abs(k)+Math.abs(p))*Math.abs(r)+(Math.abs(g)+Math.abs(m))*Math.abs(t));return h>b||-h>b?h:n(a,c,d,e)}];(function(){for(;5>=
m.length;)m.push(e(m.length));for(var a=[],c=["slow"],d=0;5>=d;++d)a.push("a"+d),c.push("o"+d);for(var h=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;5>=d;++d)h.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");h.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(h.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[q].concat(m));for(d=0;5>=
d;++d)g.exports[d]=m[d]})()},{"robust-scale":76,"robust-subtract":78,"robust-sum":79,"two-product":89}],75:[function(a,g,k){var p=a("robust-sum"),h=a("robust-scale");g.exports=function(a,e){if(1===a.length)return h(e,a[0]);if(1===e.length)return h(a,e[0]);if(0===a.length||0===e.length)return[0];var g=[0];if(a.length<e.length)for(var k=0;k<a.length;++k)g=p(g,h(e,a[k]));else for(k=0;k<e.length;++k)g=p(g,h(a,e[k]));return g}},{"robust-scale":76,"robust-sum":79}],76:[function(a,g,k){var p=a("two-product"),
h=a("two-sum");g.exports=function(a,e){var g=a.length;if(1===g)return g=p(a[0],e),g[0]?g:[g[1]];var k=Array(2*g),u=[.1,.1],w=[.1,.1],v=0;p(a[0],e,u);u[0]&&(k[v++]=u[0]);for(var r=1;r<g;++r){p(a[r],e,w);h(u[1],w[0],u);u[0]&&(k[v++]=u[0]);var n=w[1],m=u[1],f=n+m,n=m-(f-n);u[1]=f;n&&(k[v++]=n)}u[1]&&(k[v++]=u[1]);0===v&&(k[v++]=0);k.length=v;return k}},{"two-product":89,"two-sum":90}],77:[function(a,g,k){g.exports=function(a,d,e,g){var k=p(a,e,g),u=p(d,e,g);if(0<k&&0<u||0>k&&0>u)return!1;var w=p(e,a,
d),v=p(g,a,d);if(0<w&&0<v||0>w&&0>v)return!1;if(0===k&&0===u&&0===w&&0===v){a:{for(k=0;2>k;++k){var u=a[k],w=d[k],v=Math.max(u,w),r=e[k],n=g[k],m=Math.min(r,n);if(Math.max(r,n)<Math.min(u,w)||v<m){a=!1;break a}}a=!0}return a}return!0};var p=a("robust-orientation")[3]},{"robust-orientation":74}],78:[function(a,g,k){g.exports=function(a,g){var d=a.length|0,e=g.length|0;if(1===d&&1===e){var e=a[0],k=-g[0],d=e+k,t=d-e,d=(e=e-(d-t)+(k-t))?[e,d]:[d];return d}var k=Array(d+e),u=t=0,w=0,v=Math.abs,r=a[u],
n=v(r),m=-g[w],f=v(m),c,l;n<f?(l=r,u+=1,u<d&&(r=a[u],n=v(r))):(l=m,w+=1,w<e&&(m=-g[w],f=v(m)));u<d&&n<f||w>=e?(c=r,u+=1,u<d&&(r=a[u],n=v(r))):(c=m,w+=1,w<e&&(m=-g[w],f=v(m)));var z=c+l;l-=z-c;for(var A=z,D;u<d&&w<e;)n<f?(c=r,u+=1,u<d&&(r=a[u],n=v(r))):(c=m,w+=1,w<e&&(m=-g[w],f=v(m))),z=c+l,c=z-c,(c=l-c)&&(k[t++]=c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c;for(;u<d;)c=r,z=c+l,c=z-c,(c=l-c)&&(k[t++]=c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c,u+=1,u<d&&(r=a[u]);for(;w<e;)c=m,z=c+l,c=z-c,(c=l-c)&&(k[t++]=
c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c,w+=1,w<e&&(m=-g[w]);l&&(k[t++]=l);A&&(k[t++]=A);t||(k[t++]=0);k.length=t;return k}},{}],79:[function(a,g,k){g.exports=function(a,g){var d=a.length|0,e=g.length|0;if(1===d&&1===e){var e=a[0],k=g[0],d=e+k,t=d-e,d=(e=e-(d-t)+(k-t))?[e,d]:[d];return d}var k=Array(d+e),u=t=0,w=0,v=Math.abs,r=a[u],n=v(r),m=g[w],f=v(m),c,l;n<f?(l=r,u+=1,u<d&&(r=a[u],n=v(r))):(l=m,w+=1,w<e&&(m=g[w],f=v(m)));u<d&&n<f||w>=e?(c=r,u+=1,u<d&&(r=a[u],n=v(r))):(c=m,w+=1,w<e&&(m=g[w],f=v(m)));
var z=c+l;l-=z-c;for(var A=z,D;u<d&&w<e;)n<f?(c=r,u+=1,u<d&&(r=a[u],n=v(r))):(c=m,w+=1,w<e&&(m=g[w],f=v(m))),z=c+l,c=z-c,(c=l-c)&&(k[t++]=c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c;for(;u<d;)c=r,z=c+l,c=z-c,(c=l-c)&&(k[t++]=c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c,u+=1,u<d&&(r=a[u]);for(;w<e;)c=m,z=c+l,c=z-c,(c=l-c)&&(k[t++]=c),c=A+z,D=c-A,l=c-D,z-=D,A-=l,l=A+z,A=c,w+=1,w<e&&(m=g[w]);l&&(k[t++]=l);A&&(k[t++]=A);t||(k[t++]=0);k.length=t;return k}},{}],80:[function(a,g,k){arguments[4][21][0].apply(k,
arguments)},{dup:21}],81:[function(a,g,k){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";g.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};p.prototype.find=function(a){for(var d=this.roots;d[a]!==a;){var e=d[a];d[a]=d[e];a=e}return a};p.prototype.link=function(a,d){var e=this.find(a),g=this.find(d);if(e!==
g){var k=this.ranks,p=this.roots,w=k[e],v=k[g];w<v?p[e]=g:v<w?p[g]=e:(p[g]=e,++k[e])}}},{}],82:[function(a,g,k){function p(a,d){var e=a.length,f=a.length-d.length,c=Math.min;if(f)return f;switch(e){case 0:return 0;case 1:return a[0]-d[0];case 2:return(e=a[0]+a[1]-d[0]-d[1])?e:c(a[0],a[1])-c(d[0],d[1]);case 3:var f=a[0]+a[1],g=d[0]+d[1];if(e=f+a[2]-(g+d[2]))return e;var h=c(a[0],a[1]),k=c(d[0],d[1]);return(e=c(h,a[2])-c(k,d[2]))?e:c(h+a[2],f)-c(k+d[2],g);default:c=a.slice(0);c.sort();g=d.slice(0);
g.sort();for(h=0;h<e;++h)if(f=c[h]-g[h])return f;return 0}}function h(a,d){return p(a[0],d[0])}function d(a,d){if(d){for(var e=a.length,f=Array(e),c=0;c<e;++c)f[c]=[a[c],d[c]];f.sort(h);for(c=0;c<e;++c)a[c]=f[c][0],d[c]=f[c][1]}else a.sort(p);return a}function e(a){if(0===a.length)return[];for(var d=1,e=a.length,f=1;f<e;++f){var c=a[f];p(c,a[f-1])&&(f===d?d++:a[d++]=c)}a.length=d;return a}function q(a,d){for(var e=0,f=a.length-1,c=-1;e<=f;){var g=e+f>>1,h=p(a[g],d);0>=h?(0===h&&(c=g),e=g+1):0<h&&
(f=g-1)}return c}function t(a,d){for(var e=Array(a.length),f=0,c=e.length;f<c;++f)e[f]=[];for(var c=[],f=0,g=d.length;f<g;++f)for(var h=d[f],k=h.length,t=1,u=1<<k;t<u;++t){c.length=w.popCount(t);for(var v=0,C=0;C<k;++C)t&1<<C&&(c[v++]=h[C]);v=q(a,c);if(!(0>v))for(;!(e[v++].push(f),v>=a.length||0!==p(a[v],c)););}return e}function u(a,e){if(0>e)return[];for(var g=[],f=(1<<e+1)-1,c=0;c<a.length;++c)for(var h=a[c],k=f;k<1<<h.length;k=w.nextCombination(k)){for(var q=Array(e+1),p=0,t=0;t<h.length;++t)k&
1<<t&&(q[p++]=h[t]);g.push(q)}return d(g)}"use restrict";var w=a("bit-twiddle"),v=a("union-find");k.dimension=function(a){for(var d=0,e=Math.max,f=0,c=a.length;f<c;++f)d=e(d,a[f].length);return d-1};k.countVertices=function(a){for(var d=-1,e=Math.max,f=0,c=a.length;f<c;++f)for(var g=a[f],h=0,k=g.length;h<k;++h)d=e(d,g[h]);return d+1};k.cloneCells=function(a){for(var d=Array(a.length),e=0,f=a.length;e<f;++e)d[e]=a[e].slice(0);return d};k.compareCells=p;k.normalize=d;k.unique=e;k.findCell=q;k.incidence=
t;k.dual=function(a,d){if(!d)return t(e(u(a,0)),a,0);for(var g=Array(d),f=0;f<d;++f)g[f]=[];for(var f=0,c=a.length;f<c;++f)for(var h=a[f],k=0,q=h.length;k<q;++k)g[h[k]].push(f);return g};k.explode=function(a){for(var e=[],g=0,f=a.length;g<f;++g)for(var c=a[g],h=c.length|0,k=1,q=1<<h;k<q;++k){for(var p=[],t=0;t<h;++t)k>>>t&1&&p.push(c[t]);e.push(p)}return d(e)};k.skeleton=u;k.boundary=function(a){for(var e=[],g=0,f=a.length;g<f;++g)for(var c=a[g],h=0,k=c.length;h<k;++h){for(var q=Array(c.length-1),
p=0,t=0;p<k;++p)p!==h&&(q[t++]=c[p]);e.push(q)}return d(e)};k.connectedComponents=function(a,g){if(g){for(var h=new v(g),f=0;f<a.length;++f)for(var c=a[f],k=0;k<c.length;++k)for(var p=k+1;p<c.length;++p)h.link(c[k],c[p]);c=[];k=h.ranks;for(f=0;f<k.length;++f)k[f]=-1;for(f=0;f<a.length;++f)p=h.find(a[f][0]),0>k[p]?(k[p]=c.length,c.push([a[f].slice(0)])):c[k[p]].push(a[f].slice(0));return c}h=e(d(u(a,0)));f=new v(h.length);for(c=0;c<a.length;++c)for(k=a[c],p=0;p<k.length;++p)for(var t=q(h,[k[p]]),w=
p+1;w<k.length;++w)f.link(t,q(h,[k[w]]));k=[];p=f.ranks;for(c=0;c<p.length;++c)p[c]=-1;for(c=0;c<a.length;++c)t=f.find(q(h,[a[c][0]])),0>p[t]?(p[t]=k.length,k.push([a[c].slice(0)])):k[p[t]].push(a[c].slice(0));return k}},{"bit-twiddle":80,"union-find":81}],83:[function(a,g,k){g.exports=function(a,e,g){function k(a){if(E[a])return Infinity;var b=z[a],c=A[a];if(0>b||0>c)return Infinity;b=e[b];c=e[c];return Math.abs(p(e[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}function u(a,c){var d=
b[a],f=b[c];b[a]=f;b[c]=d;x[d]=c;x[f]=a}function w(a){for(var c=D[b[a]];;){var d=c,f=2*a+1,e=2*(a+1),g=a;if(f<M){var h=D[b[f]];h<d&&(g=f,d=h)}e<M&&D[b[e]]<d&&(g=e);if(g===a)return a;u(a,g);a=g}}function v(a){for(var c=D[b[a]];0<a;){var d;d=a&1?a-1>>1:(a>>1)-1;if(0<=d&&c<D[b[d]])u(a,d),a=d;else return a}}function r(){if(0<M){var a=b[0];u(0,M-1);--M;w(0);return a}return-1}function n(a,c){var d=b[a];if(D[d]===c)return a;D[d]=-Infinity;v(a);r();D[d]=c;M+=1;return v(M-1)}function m(a){if(!E[a]){E[a]=!0;
var b=z[a];a=A[a];0<=z[a]&&(z[a]=b);0<=A[b]&&(A[b]=a);0<=x[b]&&n(x[b],k(b));0<=x[a]&&n(x[a],k(a))}}function f(a,b){if(0>a[b])return b;var c=b,d=b;do{var f=a[d];if(!E[d]||0>f||f===d)break;d=f;f=a[d];if(!E[d]||0>f||f===d)break;d=f;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var c=e.length,l=a.length,z=Array(c),A=Array(c),D=Array(c),E=Array(c),B=0;B<c;++B)z[B]=A[B]=-1,D[B]=Infinity,E[B]=!1;for(B=0;B<l;++B){var C=a[B];if(2!==C.length)throw Error("Input must be a graph");var G=C[1],C=
C[0];A[C]=-1!==A[C]?-2:G;z[G]=-1!==z[G]?-2:C}for(var b=[],x=Array(c),B=0;B<c;++B)Infinity>(D[B]=k(B))?(x[B]=b.length,b.push(B)):x[B]=-1;for(var M=b.length,B=M>>1;0<=B;--B)w(B);for(;;){B=r();if(0>B||D[B]>g)break;m(B)}g=[];for(B=0;B<c;++B)E[B]||(x[B]=g.length,g.push(e[B].slice()));var I=[];a.forEach(function(a){var b=f(z,a[0]);a=f(A,a[1]);0<=b&&0<=a&&b!==a&&(b=x[b],a=x[a],b!==a&&I.push([b,a]))});h.unique(h.normalize(I));return{positions:g,edges:I}};var p=a("robust-orientation"),h=a("simplicial-complex")},
{"robust-orientation":74,"simplicial-complex":82}],84:[function(a,g,k){function p(a,e){var g,k;if(e[0][0]<e[1][0])g=e[0],k=e[1];else if(e[0][0]>e[1][0])g=e[1],k=e[0];else{g=Math.min(a[0][1],a[1][1]);k=Math.max(a[0][1],a[1][1]);var p=Math.min(e[0][1],e[1][1]),w=Math.max(e[0][1],e[1][1]);return k<p?k-p:g>w?g-w:k-w}a[0][1]<a[1][1]?(w=a[0],p=a[1]):(w=a[1],p=a[0]);return(w=h(k,g,w))?w:(w=h(k,g,p))?w:p-k}g.exports=function(a,e){var g,k;if(e[0][0]<e[1][0])g=e[0],k=e[1];else if(e[0][0]>e[1][0])g=e[1],k=e[0];
else return p(e,a);var u,w;if(a[0][0]<a[1][0])u=a[0],w=a[1];else if(a[0][0]>a[1][0])u=a[1],w=a[0];else return-p(a,e);var v=h(g,k,w),r=h(g,k,u);if(0>v){if(0>=r)return v}else if(0<v){if(0<=r)return v}else if(r)return r;v=h(w,u,k);r=h(w,u,g);if(0>v){if(0>=r)return v}else if(0<v){if(0<=r)return v}else if(r)return r;return k[0]-w[0]};var h=a("robust-orientation")},{"robust-orientation":74}],85:[function(a,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],86:[function(a,g,k){function p(a,d,e){this.slabs=
a;this.coordinates=d;this.horizontal=e}function h(a,d){return a.y-d}function d(a,e){for(var g=null;a;){var f=a.key,c,h;f[0][0]<f[1][0]?(c=f[0],h=f[1]):(c=f[1],h=f[0]);c=w(c,h,e);if(0>c)a=a.left;else if(0<c)if(e[0]!==f[1][0])g=a,a=a.right;else{if(f=d(a.right,e))return f;a=a.left}else{if(e[0]!==f[1][0])return a;if(f=d(a.right,e))return f;a=a.left}}return g}function e(a,d,e,f){this.y=a;this.index=d;this.start=e;this.closed=f}function q(a,d,e,f){this.x=a;this.segment=d;this.create=e;this.index=f}g.exports=
function(a){for(var d=a.length,g=2*d,f=Array(g),c=0;c<d;++c){var h=a[c],k=h[0][0]<h[1][0];f[2*c]=new q(h[0][0],h,k,c);f[2*c+1]=new q(h[1][0],h,!k,c)}f.sort(function(a,c){var d=a.x-c.x;return d?d:(d=a.create-c.create)?d:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(c.segment[0][1],c.segment[1][1])});a=u(v);d=[];h=[];k=[];for(c=0;c<g;){for(var t=f[c].x,w=[];c<g;){var E=f[c];if(E.x!==t)break;c+=1;E.segment[0][0]===E.x&&E.segment[1][0]===E.x?E.create&&(E.segment[0][1]<E.segment[1][1]?(w.push(new e(E.segment[0][1],
E.index,!0,!0)),w.push(new e(E.segment[1][1],E.index,!1,!1))):(w.push(new e(E.segment[1][1],E.index,!0,!1)),w.push(new e(E.segment[0][1],E.index,!1,!0)))):a=E.create?a.insert(E.segment,E.index):a.remove(E.segment)}d.push(a.root);h.push(t);k.push(w)}return new p(d,h,k)};var t=a("binary-search-bounds"),u=a("functional-red-black-tree"),w=a("robust-orientation"),v=a("./lib/order-segments");p.prototype.castUp=function(a){var e=t.le(this.coordinates,a[0]);if(0>e)return-1;var g=d(this.slabs[e],a),f=-1;g&&
(f=g.value);if(this.coordinates[e]===a[0]){var c=null;g&&(c=g.key);0<e&&(g=d(this.slabs[e-1],a))&&(c?0<v(g.key,c)&&(c=g.key,f=g.value):(f=g.value,c=g.key));g=this.horizontal[e];if(0<g.length){var k=t.ge(g,a[1],h);if(k<g.length){e=g[k];if(a[1]===e.y){if(e.closed)return e.index;for(;k<g.length-1&&g[k+1].y===a[1];)if(k+=1,e=g[k],e.closed)return e.index;if(e.y===a[1]&&!e.start){k+=1;if(k>=g.length)return f;e=g[k]}}e.start?c?(a=w(c[0],c[1],[a[0],e.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(f=e.index)):f=e.index:
e.y!==a[1]&&(f=e.index)}}}return f}},{"./lib/order-segments":84,"binary-search-bounds":85,"functional-red-black-tree":46,"robust-orientation":74}],87:[function(a,g,k){function p(a,e){var g=a.length,k=["'use strict';"],p="surfaceNets"+a.join("_")+"d"+e;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===e&&k.push("getters:[0],");for(var n=[],m=[],f=0;f<g;++f)n.push("d"+f),m.push("d"+f);for(f=0;f<1<<g;++f)n.push("v"+
f),m.push("v"+f);for(f=0;f<1<<g;++f)n.push("p"+f),m.push("p"+f);n.push("a","b","c");m.push("a","c");k.push("vertex:function vertexFunc(",n.join(),"){");n=[];for(f=0;f<1<<g;++f)n.push("(p"+f+"<<"+f+")");k.push("var m=(",n.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var n=[],c=[];128>=1<<(1<<g)?(k.push("switch(m){"),c=k):k.push("switch(m>>>7){");for(f=0;f<1<<(1<<g);++f){128<1<<(1<<g)&&0===f%128&&(0<n.length&&c.push("}}"),c="vExtra"+n.length,k.push("case ",f>>>7,":",c,"(m&0x7f,",m.join(),
");break;"),c=["function ",c,"(m,",m.join(),"){switch(m){"],n.push(c));c.push("case ",f&127,":");for(var l=Array(g),q=Array(g),A=Array(g),D=Array(g),E=0,B=0;B<g;++B)l[B]=[],q[B]=[],A[B]=0,D[B]=0;for(B=0;B<1<<g;++B)for(var C=0;C<g;++C){var G=B^1<<C;if(!(G>B)&&!(f&1<<G)!==!(f&1<<B)){var b=1;f&1<<G?q[C].push("v"+G+"-v"+B):(q[C].push("v"+B+"-v"+G),b=-b);0>b?(l[C].push("-v"+B+"-v"+G),A[C]+=2):(l[C].push("v"+B+"+v"+G),A[C]-=2);E+=1;for(b=0;b<g;++b)b!==C&&(G&1<<b?D[b]+=1:--D[b])}}B=[];for(C=0;C<g;++C)0===
l[C].length?B.push("d"+C+"-0.5"):(G="",0>A[C]?G=A[C]+"*c":0<A[C]&&(G="+"+A[C]+"*c"),B.push("d"+C+"-"+(.5+D[C]/E*.5)+"-"+l[C].length/E*.5+"*("+l[C].join("+")+G+")/("+q[C].join("+")+")"));c.push("a.push([",B.join(),"]);","break;")}k.push("}},");0<n.length&&c.push("}}");m=[];for(f=0;f<1<<g-1;++f)m.push("v"+f);m.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",m.join(),"){");g=d(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),
")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",p,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",p,";");for(f=0;f<n.length;++f)k.push(n[f].join(""));return(new Function("genContour",k.join("")))(h)}g.exports=function(a,d){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=e(a,d),h=g.length,k=Array(h),n=Array(h),m=0;m<
h;++m)k[m]=[g[m]],n[m]=[m];return{positions:k,cells:n}}g=a.order.join()+"-"+a.dtype;h=q[g];d=+d||0;h||(h=q[g]=p(a.order,a.dtype));return h(a,d)};var h=a("ndarray-extract-contour"),d=a("triangulate-hypercube"),e=a("zero-crossings"),q={}},{"ndarray-extract-contour":58,"triangulate-hypercube":88,"zero-crossings":97}],88:[function(a,g,k){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(d(a+1))|0,k=[],u=0;u<g;++u){for(var w=p.unrank(a,u),v=[0],r=0,n=0;n<w.length;++n)r+=1<<
w[n],v.push(r);1>h(w)&&(v[0]=r,v[a]=0);k.push(v)}return k};var p=a("permutation-rank"),h=a("permutation-parity"),d=a("gamma")},{gamma:47,"permutation-parity":61,"permutation-rank":62}],89:[function(a,g,k){g.exports=function(a,d,e){var g=a*d,k=p*a,k=k-(k-a);a-=k;var u=p*d,u=u-(u-d);d-=u;d=a*d-(g-k*u-a*u-k*d);return e?(e[0]=d,e[1]=g,e):[d,g]};var p=+(Math.pow(2,27)+1)},{}],90:[function(a,g,k){g.exports=function(a,g,d){var e=a+g,k=e-a;g-=k;a-=e-k;return d?(d[0]=a+g,d[1]=e,d):[a+g,e]}},{}],91:[function(a,
g,k){(function(g){function h(a){if(a){var b=A.log2(a.length||a.byteLength);x[b].push(a)}}function d(a){a=A.nextPow2(a);var b=A.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function e(a){return new Uint8Array(d(a),0,a)}function q(a){return new Uint16Array(d(2*a),0,a)}function t(a){return new Uint32Array(d(4*a),0,a)}function u(a){return new Int8Array(d(a),0,a)}function w(a){return new Int16Array(d(2*a),0,a)}function v(a){return new Int32Array(d(4*a),0,a)}function r(a){return new Float32Array(d(4*
a),0,a)}function n(a){return new Float64Array(d(8*a),0,a)}function m(a){return B?new Uint8ClampedArray(d(a),0,a):e(a)}function f(a){return C?new BigUint64Array(d(8*a),0,a):null}function c(a){return G?new BigInt64Array(d(8*a),0,a):null}function l(a){return new DataView(d(a),0,a)}function z(a){a=A.nextPow2(a);var b=A.log2(a),b=M[b];return 0<b.length?b.pop():new E(a)}var A=a("bit-twiddle"),D=a("dup"),E=a("buffer").Buffer;g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:D([32,0]),UINT16:D([32,0]),UINT32:D([32,
0]),BIGUINT64:D([32,0]),INT8:D([32,0]),INT16:D([32,0]),INT32:D([32,0]),BIGINT64:D([32,0]),FLOAT:D([32,0]),DOUBLE:D([32,0]),DATA:D([32,0]),UINT8C:D([32,0]),BUFFER:D([32,0])});var B="undefined"!==typeof Uint8ClampedArray,C="undefined"!==typeof BigUint64Array,G="undefined"!==typeof BigInt64Array,b=g.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=D([32,0]));b.BIGUINT64||(b.BIGUINT64=D([32,0]));b.BIGINT64||(b.BIGINT64=D([32,0]));b.BUFFER||(b.BUFFER=D([32,0]));var x=b.DATA,M=b.BUFFER;k.free=function(a){if(E.isBuffer(a))M[A.log2(a.length)].push(a);
else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=A.log2(a.length||a.byteLength)|0;x[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeBigUint64=k.freeInt8=k.freeInt16=k.freeInt32=k.freeBigInt64=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){h(a.buffer)};k.freeArrayBuffer=h;k.freeBuffer=function(a){M[A.log2(a.length)].push(a)};k.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return e(a);
case "uint16":return q(a);case "uint32":return t(a);case "int8":return u(a);case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return r(a);case "double":case "float64":return n(a);case "uint8_clamped":return m(a);case "bigint64":return c(a);case "biguint64":return f(a);case "buffer":return z(a);case "data":case "dataview":return l(a);default:return null}};k.mallocArrayBuffer=d;k.mallocUint8=e;k.mallocUint16=q;k.mallocUint32=t;k.mallocInt8=u;k.mallocInt16=w;k.mallocInt32=
v;k.mallocFloat32=k.mallocFloat=r;k.mallocFloat64=k.mallocDouble=n;k.mallocUint8Clamped=m;k.mallocBigUint64=f;k.mallocBigInt64=c;k.mallocDataView=l;k.mallocBuffer=z;k.clearCache=function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.BIGUINT64[a].length=0,b.BIGINT64[a].length=0,b.UINT8C[a].length=0,x[a].length=0,M[a].length=0}}).call(this,"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":21,buffer:30,dup:44}],92:[function(a,g,k){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var d=0;d<a;++d)this.roots[d]=d,this.ranks[d]=0}"use restrict";g.exports=p;a=p.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var d=a,e=this.roots;e[a]!==
a;)a=e[a];for(;e[d]!==a;){var g=e[d];e[d]=a;d=g}return a};a.link=function(a,d){var e=this.find(a),g=this.find(d);if(e!==g){var k=this.ranks,p=this.roots,w=k[e],v=k[g];w<v?p[e]=g:v<w?p[g]=e:(p[g]=e,++k[e])}}},{}],93:[function(a,g,k){g.exports=function(a,g,d){if(0===a.length)return a;if(g){d||a.sort(g);d=1;for(var e=a.length,k=a[0],t=a[0],u=1;u<e;++u)t=k,k=a[u],g(k,t)&&(u===d?d++:a[d++]=k);a.length=d;return a}d||a.sort();g=1;d=a.length;e=a[0];k=a[0];for(t=1;t<d;++t)k=e,e=a[t],e!==k&&(t===g?g++:a[g++]=
e);a.length=g;return a}},{}],94:[function(a,g,k){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return p(a,g.canvas||h,g.context||d,g)};var p=a("./lib/vtext"),h=null,d=null;"undefined"!==typeof document&&(h=document.createElement("canvas"),h.width=8192,h.height=1024,d=h.getContext("2d"))},{"./lib/vtext":95}],95:[function(a,g,k){function p(a,b,c,d){var f="<"+a+">";a="</"+a+">";for(var e=f.length,g=a.length,h=b[0]===A||b[0]===B,k=0,l=-g;-1<k;){k=c.indexOf(f,k);if(-1===k)break;l=c.indexOf(a,
k+e);if(-1===l)break;if(l<=k)break;for(var m=k;m<l+g;++m)if(m<k+e||m>=l)d[m]=null,c=c.substr(0,m)+" "+c.substr(m+1);else if(null!==d[m]){var n=d[m].indexOf(b[0]);-1===n?d[m]+=b:h&&(d[m]=d[m].substr(0,n+1)+(1+parseInt(d[m][n+1]))+d[m].substr(n+2))}k+=e;k=c.substr(k,l-k).indexOf(f);k=-1!==k?k:l+g}return d}function h(a,b,c){for(var d=b.textAlign||"start",f=b.textBaseline||"alphabetic",e=[1073741824,1073741824],g=[0,0],h=a.length,k=0;k<h;++k)for(var l=a[k],m=0;2>m;++m)e[m]=Math.min(e[m],l[m])|0,g[m]=
Math.max(g[m],l[m])|0;var n=0;switch(d){case "center":n=-.5*(e[0]+g[0]);break;case "right":case "end":n=-g[0];break;case "left":case "start":n=-e[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var p=0;switch(f){case "hanging":case "top":p=-e[1];break;case "middle":p=-.5*(e[1]+g[1]);break;case "alphabetic":case "ideographic":p=-3*c;break;case "bottom":p=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+f+"'");}var q=1/c;"lineHeight"in
b?q*=+b.lineHeight:"width"in b?q=b.width/(g[0]-e[0]):"height"in b&&(q=b.height/(g[1]-e[1]));return a.map(function(a){return[q*(a[0]+n),q*(a[1]+p)]})}function d(a,b,d,e,g,h){function k(){if(""!==O){var a=b.measureText(O).width;b.fillText(O,xa+ia,ua+ha);ia+=a}}function n(){return""+Math.round(aa)+"px "}function q(a,c){var d=""+b.font;if(!0===h.subscripts){var e=a.indexOf(B),g=c.indexOf(B),e=-1<e?parseInt(a[1+e]):0,g=-1<g?parseInt(c[1+g]):0;e!==g&&(d=d.replace(n(),"?px "),aa*=Math.pow(.75,g-e),d=d.replace("?px ",
n()));ha+=.25*Z*(g-e)}!0===h.superscripts&&(e=a.indexOf(A),g=c.indexOf(A),e=-1<e?parseInt(a[1+e]):0,g=-1<g?parseInt(c[1+g]):0,e!==g&&(d=d.replace(n(),"?px "),aa*=Math.pow(.75,g-e),d=d.replace("?px ",n())),ha-=.25*Z*(g-e));!0===h.bolds&&(g=-1<a.indexOf(f),e=-1<c.indexOf(f),!g&&e&&(d=k?d.replace("italic ","italic bold "):"bold "+d),g&&!e&&(d=d.replace("bold ","")));if(!0===h.italics){var k=-1<a.indexOf(l),g=-1<c.indexOf(l);!k&&g&&(d="italic "+d);k&&!g&&(d=d.replace("italic ",""))}b.font=d}d=d.replace(/\n/g,
"");d=!0===h.breaklines?d.replace(/\<br\>/g,"\n"):d.replace(/\<br\>/g," ");for(var r="",t=[],v=0;v<d.length;++v)t[v]=r;!0===h.bolds&&(t=p(m,f,d,t));!0===h.italics&&(t=p(c,l,d,t));!0===h.superscripts&&(t=p(z,D,d,t));!0===h.subscripts&&(t=p(E,C,d,t));for(var w=[],K="",v=0;v<d.length;++v)null!==t[v]&&(K+=d[v],w.push(t[v]));t=K.split("\n");d=t.length;var Z=Math.round(g*e),xa=e,ua=2*e;g=0;v=d*Z+ua;a.height<v&&(a.height=v);b.fillStyle="#000";b.fillRect(0,0,a.width,a.height);b.fillStyle="#fff";var v,ia,
ha,aa,K=0,O="";for(a=0;a<d;++a){var V=t[a]+"\n";ia=0;ha=a*Z;aa=e;O="";for(v=0;v<V.length;++v){var W=v+K<w.length?w[v+K]:w[w.length-1];r===W?O+=V[v]:(k(),O=V[v],void 0!==W&&(q(r,W),r=W))}k();K+=V.length;v=Math.round(ia+2*xa)|0;g<v&&(g=v)}e=g;r=ua+Z*d;return u(b.getImageData(0,0,e,r).data,[r,e,4]).pick(-1,-1,0).transpose(1,0)}function e(a,b,c,d){a=t(a,128);d=d?w(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};c=h(d.positions,b,c);a=d.edges;d="ccw"===b.orientation;v(c,a);if(b.polygons||
b.polygon||b.polyline){b=n(a,c);a=Array(b.length);for(var e=0;e<b.length;++e){for(var f=b[e],g=Array(f.length),k=0;k<f.length;++k){for(var l=f[k],m=Array(l.length),p=0;p<l.length;++p)m[p]=c[l[p]].slice();d&&m.reverse();g[k]=m}a[e]=g}return a}return b.triangles||b.triangulate||b.triangle?{cells:r(c,a,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:a,positions:c}}function q(a,b,c){try{return e(a,b,c,!0)}catch(d){}try{return e(a,b,c,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:
b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,b,c,e){var f=64,g=1.25,h={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};e&&(e.size&&0<e.size&&(f=e.size),e.lineSpacing&&0<e.lineSpacing&&(g=e.lineSpacing),e.styletags&&e.styletags.breaklines&&(h.breaklines=e.styletags.breaklines?!0:!1),e.styletags&&e.styletags.bolds&&(h.bolds=e.styletags.bolds?!0:!1),e.styletags&&e.styletags.italics&&(h.italics=e.styletags.italics?!0:!1),
e.styletags&&e.styletags.subscripts&&(h.subscripts=e.styletags.subscripts?!0:!1),e.styletags&&e.styletags.superscripts&&(h.superscripts=e.styletags.superscripts?!0:!1));c.font=[e.fontStyle,e.fontVariant,e.fontWeight,f+"px",e.font].filter(function(a){return a}).join(" ");c.textAlign="start";c.textBaseline="alphabetic";c.direction="ltr";a=d(b,c,a,f,g,h);return q(a,e,f)};g.exports.processPixels=q;var t=a("surface-nets"),u=a("ndarray"),w=a("simplify-planar-graph"),v=a("clean-pslg"),r=a("cdt2d"),n=a("planar-graph-to-polyline"),
m="b",f="b|",c="i",l="i|",z="sup",A="+",D="+1",E="sub",B="-",C="-1"},{cdt2d:31,"clean-pslg":36,ndarray:59,"planar-graph-to-polyline":65,"simplify-planar-graph":83,"surface-nets":87}],96:[function(a,g,k){g.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":40}],97:[function(a,g,k){g.exports=function(a,d){var e=[];d=+d||0;p(a.hi(a.shape[0]-1),e,d);return e};var p=a("./lib/zc-core")},
{"./lib/zc-core":96}]},{},[1]);

        </script>
        </body>
      </html>