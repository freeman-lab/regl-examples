<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var f=0;return{next:function(){return f==a.length?{done:!0}:{done:!1,value:a[f++]}}}};
$jscomp.arrayFromIterator=function(a){for(var f,k=[];!(f=a.next()).done;)k.push(f.value);return k};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,f){function k(){}k.prototype=f.prototype;a.prototype=new k;a.prototype.constructor=a;for(var p in f)if($jscomp.global.Object.defineProperties){var m=$jscomp.global.Object.getOwnPropertyDescriptor(f,p);m&&$jscomp.global.Object.defineProperty(a,p,m)}else a[p]=f[p]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,f){a instanceof String&&(a=String(a));var k=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={},m=(p.next=function(){if(k<a.length){var b=k++;return{value:f(b,a[b]),done:!1}}m.next=$jscomp.array.done_;return $jscomp.array.done_()},p[Symbol.iterator]=function(){return m},p);return m};
$jscomp.array.findInternal_=function(a,f,k){a instanceof String&&(a=String(a));for(var p=a.length,m=0;m<p;m++){var b=a[m];if(f.call(k,b,m,a))return{i:m,v:b}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,f,k){f=void 0===f?function(b){return b}:f;var p=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var m;!(m=a.next()).done;)p.push(f.call(k,m.value))}else{m=a.length;for(var b=0;b<m;b++)p.push(f.call(k,a[b]))}return p};$jscomp.array.of=function(a){for(var f=[],k=0;k<arguments.length;++k)f[k-0]=arguments[k];return $jscomp.array.from(f)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,f){return[a,f]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,f){return f})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,f,k){var p=this.length;a=Number(a);f=Number(f);k=Number(null!=k?k:p);if(a<f)for(k=Math.min(k,p);f<k;)f in this?this[a++]=this[f++]:(delete this[a++],f++);else for(k=Math.min(k,p+f-a),a+=k-f;k>f;)--k in this?this[--a]=this[k]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,f,k){null!=k&&a.length||(k=this.length||0);k=Number(k);for(f=Number((void 0===f?0:f)||0);f<k;f++)this[f]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,f){return $jscomp.array.findInternal_(this,a,f).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,f){return $jscomp.array.findInternal_(this,a,f).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())f=f.value,this.set(f[0],f[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var f=Object.seal({x:4}),k=new a($jscomp.makeIterator([[f,"s"]]));if("s"!=k.get(f)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var p=k.entries(),m=p.next();if(m.done||m.value[0]!=f||"s"!=m.value[1])return!1;m=p.next();return m.done||4!=m.value[0].x||"t"!=m.value[1]||!p.next().done?!1:!0}catch(b){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,f){var k=this.maybeGetEntry_(a),p=k.id,m=k.list,k=k.entry;m||(m=this.data_[p]=[]);k?k.value=f:(k={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:f},m.push(k),this.head_.previous.next=k,this.head_.previous=k,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var f=this.maybeGetEntry_(a);a=f.id;var k=f.list,p=f.index;return(f=f.entry)&&k?(k.splice(p,1),k.length||delete this.data_[a],f.previous.next=f.next,f.next.previous=f.previous,f.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var f=$jscomp.Map.getId_(a),k=this.data_[f];if(k)for(var p=0;p<k.length;p++){var m=k[p];if(a!==a&&m.key!==m.key||a===m.key)return{id:f,list:k,index:p,entry:m}}return{id:f,list:k,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,f){for(var k=$jscomp.makeIterator(this.entries()),p=k.next();!p.done;p=k.next())p=p.value,a.call(f,p[1],p[0],this)};
$jscomp.Map.prototype.iter_=function(a){var f=this,k=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p={};return p.next=function(){if(k){for(;k.head!=f.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:a(k)};k=null}return{done:!0,value:void 0}},p[Symbol.iterator]=function(){return this},p};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,f,k){Object.defineProperty(a,f,{value:String(k)})}:function(a,f,k){a[f]=String(k)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var f=0;0===(a&4294901760)&&(a<<=16,f+=16);0===(a&4278190080)&&(a<<=8,f+=8);0===(a&4026531840)&&(a<<=4,f+=4);0===(a&3221225472)&&(a<<=2,f+=2);0===(a&2147483648)&&f++;return f};$jscomp.math.imul=function(a,f){a=Number(a);f=Number(f);var k=a&65535,p=f&65535;return k*p+((a>>>16&65535)*p+k*(f>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var f=a,k=1,p=a,m=0,b=1;m!=p;)f*=a,b*=-1,p=(m=p)+b*f/++k;return p}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var f=a,k=1,p=a,m=0;m!=p;)f*=a/++k,p=(m=p)+f;return p}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var f=Math.exp(2*-Math.abs(a)),f=(1-f)/(1+f);return 0>a?-f:f};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var f=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-f:f};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,f,k){for(var p=[],m=2;m<arguments.length;++m)p[m-2]=arguments[m];a=Number(a);f=Number(f);for(var b=Math.max(Math.abs(a),Math.abs(f)),g=$jscomp.makeIterator(p),m=g.next();!m.done;m=g.next())b=Math.max(b,Math.abs(m.value));if(1E100<b||1E-100>b){a/=b;f/=b;g=a*a+f*f;p=$jscomp.makeIterator(p);for(m=p.next();!m.done;m=p.next())m=m.value,m=Number(m)/b,g+=m*m;return Math.sqrt(g)*b}b=a*a+f*f;p=$jscomp.makeIterator(p);for(m=p.next();!m.done;m=p.next())m=m.value,m=Number(m),b+=
m*m;return Math.sqrt(b)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var f=Math.floor(Math.abs(a));return 0>a?-f:f};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var f=Math.pow(Math.abs(a),1/3);return 0>a?-f:f};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,f){for(var k=[],p=1;p<arguments.length;++p)k[p-1]=arguments[p];k=$jscomp.makeIterator(k);for(p=k.next();!p.done;p=k.next())if(p=p.value)for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(a[m]=p[m]);return a};$jscomp.object.is=function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())this.add(f.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var f=Object.seal({x:4}),a=new a($jscomp.makeIterator([f]));if(a.has(f)||1!=a.size||a.add(f)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),k=a.next();if(k.done||k.value[0]!=f||k.value[1]!=f)return!1;k=a.next();return k.done||k.value[0]==f||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,f){var k=this;this.map_.forEach(function(p){return a.call(f,p,p,k)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,f){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var f=[],k=0;k<arguments.length;++k)f[k-0]=arguments[k];for(var k="",f=$jscomp.makeIterator(f),p=f.next();!p.done;p=f.next()){p=p.value;p=+p;if(0>p||1114111<p||p!==Math.floor(p))throw new RangeError("invalid_code_point "+p);65535>=p?k+=String.fromCharCode(p):(p-=65536,k+=String.fromCharCode(p>>>10&1023|55296),k+=String.fromCharCode(p&1023|56320))}return k};
$jscomp.string.repeat=function(a){var f=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var k="";a;)if(a&1&&(k+=f),a>>>=1)f+=f;return k};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var f=this.toString(),k=f.length;a=Number(a)||0;if(0<=a&&a<k){a|=0;var p=f.charCodeAt(a);if(55296>p||56319<p||a+1===k)return p;a=f.charCodeAt(a+1);return 56320>a||57343<a?p:1024*(p-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,f)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,f){f=void 0===f?0:f;$jscomp.string.noRegExp_(a,"startsWith");var k=this.toString();a+="";for(var p=k.length,m=a.length,b=Math.max(0,Math.min(f|0,k.length)),g=0;g<m&&b<p;)if(k[b++]!=a[g++])return!1;return g>=m};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,f){$jscomp.string.noRegExp_(a,"endsWith");var k=this.toString();a+="";void 0===f&&(f=k.length);for(var p=Math.max(0,Math.min(f|0,k.length)),m=a.length;0<m&&0<p;)if(k[--p]!=a[--m])return!1;return 0>=m};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(f,k,p){function m(g,h){if(!k[g]){if(!f[g]){var y="function"==typeof require&&require;if(!h&&y)return y(g,!0);if(b)return b(g,!0);y=Error("Cannot find module '"+g+"'");throw y.code="MODULE_NOT_FOUND",y;}y=k[g]={exports:{}};f[g][0].call(y.exports,function(b){var h=f[g][1][b];return m(h?h:b)},y,y.exports,e$$0,f,k,p)}return k[g].exports}for(var b="function"==typeof require&&require,g=0;g<p.length;g++)m(p[g]);return m})({1:[function(a,f,k){f=a("../regl")();k=a("vectorize-text");var p=a("gl-mat4/perspective"),
m=a("gl-mat4/lookAt");a=k("hello regl!",{textAlign:"center",textBaseline:"middle"});var b=f.texture({copy:!0,min:"linear",mag:"linear"}),g=f({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:f.buffer([-2,0,0,-2,2,2])},uniforms:{texture:b,t:function(b,g,a){return.001*a.count}},depth:{enable:!1},count:3}),l=f({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",
attributes:{position:f.buffer(a.positions)},elements:f.elements(a.edges),uniforms:{t:function(b,g,a){return.01*a.count},view:function(b,g,a){b=.01*a.count;return m([],[5*Math.sin(b),0,-5*Math.cos(b)],[0,0,0],[0,-1,0])},projection:function(b,g,a){return p([],Math.PI/4,a.width/a.height,.01,1E3)}},depth:{enable:!1}});f.frame(function(){g();l();b({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":80,"gl-mat4/perspective":81,"vectorize-text":124}],2:[function(a,f,k){function p(){this.pointer=
!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var m=a("./constants/dtypes.json"),b=a("./extend");b(p.prototype,{equals:function(b,a){return this.pointer?b.pointer&&this.buffer===b.buffer&&this.size===a&&this.normalized===b.normalized&&this.type===b.type&&this.offset===b.offset&&this.stride===b.stride&&this.divisor===b.divisor:!b.pointer&&this.x===b.x&&this.y===b.y&&this.z===b.z&&this.w===b.w},set:function(b,a){(this.pointer=
b.pointer)?(this.buffer=b.buffer,this.size=a,this.normalized=b.normalized,this.type=b.type,this.offset=b.offset,this.stride=b.stride,this.divisor=b.divisor):(this.x=b.x,this.y=b.y,this.z=b.z,this.w=b.w)}});f.exports=function(g,a,h,y,r){function u(){for(var b=Array(16),c=0;16>c;++c)b[c]=new p;this.records=b;this.top=0}function v(b){for(var c=b.records,e=b.top;c.length-1<=e;)c.push(new p);return c[++b.top]}var n={};h=h.maxAttributes;for(var e=Array(h),c=0;c<h;++c)e[c]=new p;b(u.prototype,{pushVec:function(b,
c,e,g){var a=v(this);a.pointer=!1;a.x=b;a.y=c;a.z=e;a.w=g},pushPtr:function(b,c,e,g,a,t,l){var h=v(this);h.pointer=!0;h.buffer=b;h.size=c;h.offset=e;h.stride=g;h.divisor=a;h.normalized=t;h.type=l},pushDyn:function(b){if("number"===typeof b)this.pushVec(b,0,0,0);else if(Array.isArray(b))this.pushVec(b[0],b[1],b[2],b[3]);else{var c=y.getBuffer(b),e=0,g=0,a=0,t=0,l=!1,h=5126;c?h=c.dtype:(c=y.getBuffer(b.buffer),e=b.size||0,g=b.stride||0,a=b.offset||0,t=b.divisor||0,l=b.normalized||!1,h=c.dtype,"type"in
b&&(h=m[b.type]));this.pushPtr(c,e,a,g,t,l,h)}},pop:function(){--this.top}});return{bindings:e,bind:function(b,c,e,h){h=e.size||h;if(!c.equals(e,h)){if(e.pointer){c.pointer||g.enableVertexAttribArray(b);c.buffer!==e.buffer&&e.buffer.bind();g.vertexAttribPointer(b,h,e.type,e.normalized,e.stride,e.offset);var n=a.angle_instanced_arrays;n&&n.vertexAttribDivisorANGLE(b,e.divisor)}else c.pointer&&g.disableVertexAttribArray(b),g.vertexAttrib4f(b,e.x,e.y,e.z,e.w);c.set(e,h)}},def:function(b){b=r.id(b);var c=
n[b];c||(c=n[b]=new u);return c}}}},{"./constants/dtypes.json":8,"./extend":14}],3:[function(a,f,k){function p(b,g){switch(b){case 5121:return new Uint8Array(g);case 5123:return new Uint16Array(g);case 5125:return new Uint32Array(g);case 5120:return new Int8Array(g);case 5122:return new Int16Array(g);case 5124:return new Int32Array(g);case 5126:return new Float32Array(g);default:return null}}var m=a("./is-typed-array"),b=a("./is-ndarray"),g=a("./constants/arraytypes.json"),l=a("./constants/dtypes.json"),
h=a("./values"),y={"static":35044,dynamic:35048,stream:35040};f.exports=function(a){function u(b,c){this.id=e++;this.buffer=b;this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function v(b){a.isBuffer(b.buffer)||(b.buffer=a.createBuffer());b.bind();a.bufferData(b.type,b.data||b.byteLength,b.usage)}function n(b){var e=b.buffer;a.isBuffer(e)&&a.deleteBuffer(e);b.buffer=null;delete c[b.id]}var e=0,c={};u.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)};
return{create:function(d,e,h){function x(d){var c=d||{};if(Array.isArray(c)||m(c)||b(c))c={data:c};else if("number"===typeof c)c={length:c|0};else if(null===c||void 0===c)c={};t.usage="usage"in c?y[c.usage]:35044;d=0;"type"in c&&(d=l[c.type]);var e=c.dimension|0||1,q=0,a=null;if("data"in c)if(a=c.data,null===a)q=c.length|0;else{if(b(a)){var e=a.shape,q=a.stride,c=a.offset,h=0,w=0,n=0,r=0;1===e.length?(h=e[0],w=1,n=q[0],r=0):2===e.length&&(h=e[0],w=e[1],n=q[0],r=q[1]);d=d||g[Object.prototype.toString.call(a)]|
0||5126;for(var e=w,q=p(d,h*w),a=a.data,u=0,L=0;L<h;++L)for(var E=0;E<w;++E)q[u++]=a[n*L+r*E+c];a=q}else if(Array.isArray(a))if(0<a.length&&Array.isArray(a[0])){e=a[0].length;d=d||5126;c=p(d,a.length*e);q=a;a=e;for(h=r=0;h<q.length;++h)for(n=q[h],w=0;w<a;++w)c[r++]=n[w];a=c}else d=d||5126,a=p(d,a);else d=d||g[Object.prototype.toString.call(a)]|0;q=a.byteLength}else"length"in c&&(q=c.length|0);t.data=a;t.dtype=d||5121;t.byteLength=q;t.dimension=e;v(t);return x}var E=a.createBuffer(),t=new u(E,e);c[t.id]=
t;h||x(d);x._reglType="buffer";x._buffer=t;x.destroy=function(){n(t)};return x},clear:function(){h(c).forEach(n)},refresh:function(){h(c).forEach(v)},getBuffer:function(b){return b&&b._buffer instanceof u?b._buffer:null}}}},{"./constants/arraytypes.json":7,"./constants/dtypes.json":8,"./is-ndarray":17,"./is-typed-array":18,"./values":32}],4:[function(a,f,k){f.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],5:[function(a,
f,k){var p=a("./extend");f.exports=function(){function a(){var g=[],h=[];return p(function(){g.push.apply(g,Array.prototype.slice.call(arguments))},{def:function(){var a="v"+b++;h.push(a);0<arguments.length&&(g.push(a,"="),g.push.apply(g,Array.prototype.slice.call(arguments)),g.push(";"));return a},toString:function(){return[0<h.length?"var "+h+";":"",g.join("")].join("")}})}var b=0,g=[],l=[],h={};return{link:function(a){var h="g"+b++;g.push(h);l.push(a);return h},block:a,proc:function(g){var l=[],
u=a(),v=u.toString;return h[g]=p(u,{arg:function(){var g="a"+b++;l.push(g);return g},toString:function(){return["function(",l.join(),"){",v(),"}"].join("")}})},compile:function(){var b=['"use strict";return {'];Object.keys(h).forEach(function(g){b.push('"',g,'":',h[g].toString(),",")});b.push("}");return Function.apply(null,g.concat([b.join("")])).apply(null,l)}}}},{"./extend":14}],6:[function(a,f,k){function p(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;
case 35666:case 35669:case 35673:return 4;default:return 1}}function m(b,e,c,d){var g,a=",";switch(e){case 5126:g="1f";break;case 35664:g="2fv";break;case 35665:g="3fv";break;case 35666:g="4fv";break;case 35670:case 5124:g="1i";break;case 35671:case 35667:g="2iv";break;case 35672:case 35668:g="3iv";break;case 35673:case 35669:g="4iv";break;case 35674:g="Matrix2fv";a=",false,";break;case 35675:g="Matrix3fv";a=",false,";break;case 35676:g="Matrix4fv",a=",false,"}return b+".uniform"+g+"("+c+a+d+");"}
function b(b){return b+"["+b+".length-1]"}function g(b,e){return"framebuffer"===b||b<e?-1:b>e?1:0}var l=a("./codegen"),h=a("./constants/primitives.json"),y=a("./constants/dtypes.json"),r={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
u={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};f.exports=function(a,e,c,d,q,w,x,E,t,z,D,G,A,f,k){function H(t,d,e,q,x){function J(b){var t=ra[b];return t?t:t=ra[b]=I(C[b])}function y(b){var t=b.id,d=ca[t];if(d)return d;d=b.func?F.def(I(b.data),"(",qa,
",",Z,",",ja,")"):F.def(qa,".",b.data);return ca[t]=d}function G(b,t){return b.find(function(b){return b.name===t})}function k(b){return la&&!(b in d||b in x)}var H=l(),I=H.link,F=H.proc("batch"),P=H.block(),O=F.def,R=F.arg,V=I(a),ea=I(t.program),fa=I(D.bind),ja=I(f),oa=I(E),aa=I(A.count),ha=I(A.offset),sa=I(A.instances),ka=I(A.primitive),ra={},ia=I(w.elements),aa=O(b(aa)),ha=O(b(ha)),ka=O(b(ka)),ia=O(b(ia)),U,Y,ma=c.angle_instanced_arrays;ma&&(U=O(b(sa)),Y=I(ma));var la="elements"in d,sa=R(),R=R(),
qa=O(),Z=O(),ca={};F(V,".useProgram(",ea,");");t.uniforms.forEach(function(b){if(!(b.name in e)){var t=I(b.location),d=I(z.def(b.name)),d=d+"["+d+".length-1]";b=b.info.type;35678===b||35680===b?(b=O(d+"._texture"),F(m(V,5124,t,b+".bind()")),P(b,".unbind();")):F(m(V,b,t,d))}});t.attributes.forEach(function(b){if(!(q.name in q)){var t=I(D.def(b.name));F(fa,"(",b.location,",",I(D.bindings[b.location]),",",t,".records[",t,".top]",",",p(b.info.type),");")}});la||F("if(",ia,"){",V,".bindBuffer(",34963,
",",ia,".buffer.buffer);","}else{",V,".bindBuffer(",34963,",null);","}");F("for(",Z,"=0;",Z,"<",sa,";++",Z,"){",qa,"=",R,"[",Z,"];");Object.keys(d).sort(g).forEach(function(b){function t(b){F("if(",c,"){",V,".enable(",b,");}else{",V,".disable(",b,");}")}var c=y(d[b]);switch(b){case "framebuffer":b=J("viewport");var e=J("scissor.box");F("if(",oa,".push(",c,"&&",c,"._framebuffer)){",oa,".poll();",b,".setDirty();",e,".setDirty();","}");break;case "cull.enable":t(2884);break;case "blend.enable":t(3042);
break;case "dither":t(3024);break;case "stencil.enable":t(2960);break;case "depth.enable":t(2929);break;case "scissor.enable":t(3089);break;case "polygonOffset.enable":t(32823);break;case "sample.alpha":t(32926);break;case "sample.enable":t(32928);break;case "depth.mask":F(V,".depthMask(",c,");");break;case "depth.func":b=I(u);F(V,".depthFunc(",b,"[",c,"]);");break;case "depth.range":F(V,".depthRange(",c,"[0],",c,"[1]);");break;case "blend.color":F(V,".blendColor(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");
break;case "blend.equation":b=I(K);F("if(typeof ",c,'==="string"){',V,".blendEquation(",b,"[",c,"]);","}else{",V,".blendEquationSeparate(",b,"[",c,".rgb],",b,"[",c,".alpha]);","}");break;case "blend.func":b=I(r);F(V,".blendFuncSeparate(",b,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",b,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",b,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",b,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");break;case "stencil.mask":F(V,".stencilMask(",c,");");break;case "stencil.func":b=
I(u);F(V,".stencilFunc(",b,"[",c,'.cmp||"always"],',c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":e=I(v);F(V,".stencilOpSeparate(","stencil.opFront"===b?1028:1029,",",e,"[",c,'.fail||"keep"],',e,"[",c,'.zfail||"keep"],',e,"[",c,'.pass||"keep"]);');break;case "polygonOffset.offset":F(V,".polygonOffset(",c,".factor||0,",c,".units||0);");break;case "cull.face":F(V,".cullFace(",c,'==="front"?',1028,":",1029,");");break;case "lineWidth":F(V,".lineWidth(",
c,");");break;case "frontFace":F(V,".frontFace(",c,'==="cw"?',2304,":",2305,");");break;case "colorMask":F(V,".colorMask(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "sample.coverage":F(V,".sampleCoverage(",c,".value,",c,".invert);");break;case "scissor.box":case "viewport":b=J(b),F(b,".push(",c,".x||0,",c,".y||0,",c,".w||-1,",c,".h||-1);")}});("viewport"in d||"framebuffer"in d)&&F(J("viewport"),".poll();");("scissor.box"in d||"framebuffer"in d)&&F(J("scissor.box"),".poll();");"framebuffer"in
d&&F(oa,".pop();");var ta=t.uniforms,na=[];Object.keys(e).forEach(function(b){var t=G(ta,b);if(t){var c=t.info.type,d=I(t.location);b=y(e[b]);35678===t.info.type||35680===t.info.type?(t=O(b+"._texture"),na.push(t),F(m(V,5124,d,t+".bind()"))):F(m(V,c,d,b))}});na.forEach(function(b){F(b,".unbind();")});var ua=t.attributes;Object.keys(q).forEach(function(b){var t=G(ua,b);t&&F(fa,"(",t.location,",",I(b.bindings[t.location]),",",y(q[b]),",",p(t.info.type),");")});d.count?F(aa,"=",y(d.count),";"):k("count")||
F("if(",aa,"){");d.offset&&F(ha,"=",y(d.offset),";");d.primitive&&(t=I(h),F(ka,"=",t,"[",y(d.primitive),"];"));la&&(t=y(d.elements),F(ia,"=",t,"?",t,"._elements:null;"));k("offset")&&F(ha,"=0;");F("if(",ia,"){");k("count")&&F(aa,"=",ia,".vertCount;","if(",aa,">0){");k("primitive")&&F(ka,"=",ia,".primType;");la&&F(V,".bindBuffer(",34963,",",ia,".buffer.buffer);");ma&&(d.instances&&F(U,"=",y(d.instances),";"),F("if(",U,">0){",Y,".drawElementsInstancedANGLE(",ka,",",aa,",",ia,".type,",ha,",",U,");}else{"));
F(V,".drawElements(",ka,",",aa,",",ia,".type,",ha,");");ma&&F("}");k("count")&&F("}");F("}else{");k("count")||(k("primitive")&&F(ka,"=",4,";"),ma&&F("if(",U,">0){",Y,".drawArraysInstancedANGLE(",ka,",",ha,",",aa,",",U,");}else{"),F(V,".drawArrays(",ka,",",ha,",",aa,");}"),ma&&F("}"));F("}}",P);return H.compile().batch}var C=t.contextState,K={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(K.min=32775,K.max=32776);var J=0;return{draw:function(t){var d=l(),e=d.link,g=d.proc("draw"),
q=g.def,h=e(a),r=e(t.program),v=e(D.bind),x=e(A.count),u=e(A.offset),J=e(A.instances),y=e(A.primitive),G=e(w.elements),E=[];g(h,".useProgram(",r,");");t.attributes.forEach(function(b){var t=e(D.def(b.name));g(v,"(",b.location,",",e(D.bindings[b.location]),",",t,".records[",t,".top]",",",p(b.info.type),");")});t.uniforms.forEach(function(b){var t=e(b.location),c=e(z.def(b.name)),c=c+"["+c+".length-1]";b=b.info.type;35678===b||35680===b?(b=q(c+"._texture"),E.push(b),g(m(h,5124,t,b+".bind()"))):g(m(h,
b,t,c))});E.forEach(function(b){g(b,".unbind();")});t=q(b(y));x=q(b(x));u=q(b(u));G=q(b(G));g("if(",x,"){");(r=c.angle_instanced_arrays)?(J=q(b(J)),r=e(r),g("if(",G,"){",G,".bind();","if(",J,">0){",r,".drawElementsInstancedANGLE(",t,",",x,",",G,".type,",u,",",J,");}else{",h,".drawElements(",t,",",x,",",G,".type,",u,");}","}else if(",J,">0){",r,".drawArraysInstancedANGLE(",t,",",u,",",x,",",J,");}else{",h,".drawArrays(",t,",",u,",",x,");}}")):g("if(",G,"){",h,".drawElements(",t,",",x,",",G,".type,",
u,");}","}else{",h,".drawArrays(",t,",",u,",",x,");}");return d.compile().draw},command:function(t,c,d,a,n,m,p){function x(b){var t=ia[b];return t?t:t=ia[b]=F(C[b])}function da(b,t){var c=x(b);U(c,".push(",t,");");Y(c,".pop();")}function X(b){var t=b.id,c=ua[t];if(c)return c;c=b.func?Z.def(F(b.data),"(",na,",0,",ta,")"):Z.def(na,".",b.data);return ua[t]=c}var W=l(),F=W.link,P=W.block,O=W.proc,R=J++,V=F(k);F(e);var ea=F(G.fragShaders),fa=F(G.vertShaders),ja=F(G.programs),oa=F(E),aa={count:F(A.count),
offset:F(A.offset),instances:F(A.instances),primitive:F(A.primitive)},ha=F(w.elements),sa=F(h),ka=F(u),ra=F(v),ia={},U=P(),Y=P(),ma=!1;Object.keys(t).sort(g).forEach(function(b){var c=t[b];switch(b){case "frag":ma=!0;U(ea,".push(",F(e.id(c)),");");Y(ea,".pop();");break;case "vert":ma=!0;U(fa,".push(",F(e.id(c)),");");Y(fa,".pop();");break;case "framebuffer":E.getFramebuffer(c);b=x("viewport");var d=x("scissor.box");U("if(",oa,".push(",F(c&&c._framebuffer),")){",b,".setDirty();",d,".setDirty();","}");
Y("if(",oa,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":U(aa[b],".push(",c,");");Y(aa[b],".pop();");break;case "primitive":U(aa.primitive,".push(",h[c],");");Y(aa.primitive,".pop();");break;case "elements":d=w.getElements(c);c=!("primitive"in t);b=!("count"in t);d?(d=F(d),U(ha,".push(",d,");"),c&&U(aa.primitive,".push(",d,".primType);"),b&&U(aa.count,".push(",d,".vertCount);")):(U(ha,".push(null);"),c&&U(aa.primitive,".push(",4,");"),b&&U(aa.count,
".push(0);"));c&&Y(aa.primitive,".pop();");b&&Y(aa.count,".pop();");"offset"in t||(U(aa.offset,".push(0);"),Y(aa.offset,".pop();"));Y(ha,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":da(b,c);break;case "depth.func":da(b,u[c]);break;case "depth.range":b=x(b);U(b,".push(",c[0],",",c[1],");");Y(b,".pop();");break;case "blend.func":b=
x(b);U(b,".push(",r["srcRGB"in c?c.srcRGB:c.src],",",r["dstRGB"in c?c.dstRGB:c.dst],",",r["srcAlpha"in c?c.srcAlpha:c.src],",",r["dstAlpha"in c?c.dstAlpha:c.dst],");");Y(b,".pop();");break;case "blend.equation":b=x(b);"string"===typeof c?U(b,".push(",K[c],",",K[c],");"):"object"===typeof c&&U(b,".push(",K[c.rgb],",",K[c.alpha],");");Y(b,".pop();");break;case "blend.color":b=x(b);U(b,".push(",c[0],",",c[1],",",c[2],",",c[3],");");Y(b,".pop();");break;case "stencil.mask":b=x(b);U(b,".push(",c,");");
Y(b,".pop();");break;case "stencil.func":var d=c.cmp||"keep",g=c.ref||0,c="mask"in c?c.mask:-1;b=x(b);U(b,".push(",u[d],",",g,",",c,");");Y(b,".pop();");break;case "stencil.opFront":case "stencil.opBack":d=c.fail||"keep";g=c.zfail||"keep";c=c.pass||"keep";b=x(b);U(b,".push(",v[d],",",v[g],",",v[c],");");Y(b,".pop();");break;case "polygonOffset.offset":d=c.factor||0;c=c.units||0;b=x(b);U(b,".push(",d,",",c,");");Y(b,".pop();");break;case "cull.face":d=0;"front"===c?d=1028:"back"===c&&(d=1029);c=x(b);
U(c,".push(",d,");");Y(c,".pop();");break;case "lineWidth":da(b,c);break;case "frontFace":d=0;"cw"===c?d=2304:"ccw"===c&&(d=2305);c=x(b);U(c,".push(",d,");");Y(c,".pop();");break;case "colorMask":b=x(b);U(b,".push(",c.map(function(b){return!!b}).join(),");");Y(b,".pop();");break;case "sample.coverage":d="value"in c?c.value:1;c=!!c.invert;b=x(b);U(b,".push(",d,",",c,");");Y(b,".pop();");break;case "viewport":case "scissor.box":var d=c.x||0,g=c.y||0,q=-1,a=-1;"w"in c&&(q=c.w);"h"in c&&(a=c.h);c=x(b);
U(c,".push(",d,",",g,",",q,",",a,");");Y(c,".pop();")}});if(ma){if(t.frag&&t.vert)P=t.frag,U(ja,".push(",F(G.create(e.id(t.vert),e.id(P))),");");else{var P=U.def(ea,"[",ea,".length-1]"),la=U.def(fa,"[",fa,".length-1]"),qa=F(G.create);U(ja,".push(",qa,"(",la,",",P,"));")}Y(ja,".pop();")}Object.keys(c).forEach(function(b){var t=F(z.def(b));b=c[b];b="function"===typeof b&&b._reglType?F(b):Array.isArray(b)?F(b.slice()):+b;U(t,".push(",b,");");Y(t,".pop();")});Object.keys(d).forEach(function(b){var t=
F(D.def(b));b=d[b];if("number"===typeof b)U(t,".pushVec(",+b,",0,0,0);");else if(Array.isArray(b))U(t,".pushVec(",[b[0]||0,b[1]||0,b[2]||0,b[3]||0],");");else{var c=q.getBuffer(b),e=0,g=0,a=0,h=0,l=!1,w=5126;c?w=c.dtype:(c=q.getBuffer(b.buffer),e=b.size||0,g=b.stride||0,a=b.offset||0,h=b.divisor||0,l=b.normalized||!1,w=c.dtype,"type"in b&&(w=y[b.type]));U(t,".pushPtr(",[F(c),e,a,g,h,l,w].join(),");")}Y(t,".pop();")});var Z=W.block(),ca=W.block(),ta,na;p&&(ta=F(f),na=U.def());var ua={};Object.keys(a).sort(g).forEach(function(b){var c=
X(a[b]);switch(b){case "framebuffer":b=x("viewport");var d=x("scissor.box");Z("if(",oa,".push(",c,"&&",c,"._framebuffer)){",b,".setDirty();",d,".setDirty();","}");ca("if(",oa,".pop()){",b,".setDirty();",d,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":b=x(b);Z(b,".push(",c,");");ca(b,".pop();");break;
case "count":case "offset":case "instances":b=aa[b];Z(b,".push(",c,");");ca(b,".pop();");break;case "primitive":b=aa.primitive;Z(b,".push(",sa,"[",c,"]);");ca(b,".pop();");break;case "depth.func":b=x(b);Z(b,".push(",ka,"[",c,"]);");ca(b,".pop();");break;case "blend.func":b=x(b);d=F(r);Z(b,".push(",d,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",d,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",d,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",d,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");
ca(b,".pop();");break;case "blend.equation":b=x(b);d=F(K);Z("if(typeof ",c,'==="string"){',b,".push(",d,"[",c,"],",d,"[",c,"]);","}else{",b,".push(",d,"[",c,".rgb],",d,"[",c,".alpha]);","}");ca(b,".pop();");break;case "blend.color":b=x(b);Z(b,".push(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ca(b,".pop();");break;case "stencil.mask":b=x(b);Z(b,".push(",c,");");ca(b,".pop();");break;case "stencil.func":b=x(b);Z(b,".push(",ka,"[",c,".cmp],",c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");ca(b,".pop();");
break;case "stencil.opFront":case "stencil.opBack":b=x(b);Z(b,".push(",ra,"[",c,'.fail||"keep"],',ra,"[",c,'.zfail||"keep"],',ra,"[",c,'.pass||"keep"]);');ca(b,".pop();");break;case "polygonOffset.offset":b=x(b);Z(b,".push(",c,".factor||0,",c,".units||0);");ca(b,".pop();");break;case "cull.face":b=x(b);Z(b,".push(",c,'==="front"?',1028,":",1029,");");ca(b,".pop();");break;case "frontFace":b=x(b);Z(b,".push(",c,'==="cw"?',2304,":",2305,");");ca(b,".pop();");break;case "colorMask":b=x(b);Z(b,".push(",
c,"[0],",c,"[1],",c,"[2],",c,"[3]);");ca(b,".pop();");break;case "sample.coverage":b=x(b);Z(b,".push(",c,".value,",c,".invert);");ca(b,".pop();");break;case "scissor.box":case "viewport":b=x(b);Z(b,".push(",c,".x||0,",c,".y||0,",'"w" in ',c,"?",c,".w:-1,",'"h" in ',c,"?",c,".h:-1);");ca(b,".pop();");break;case "elements":b=!("primitive"in a)&&!("primitive"in t);var d=!("count"in a)&&!("count"in t),e=!("offset"in a)&&!("offset"in t),g=Z.def();Z("if(",c,"){",g,"=",c,"._elements;",ha,".push(",g,");",
b?aa.primitive+".push("+g+".primType);":"",d?aa.count+".push("+g+".vertCount);":"",e?aa.offset+".push("+g+".offset);":"","}else{",ha,".push(null);","}");ca(ha,".pop();","if(",c,"){",b?aa.primitive+".pop();":"",d?aa.count+".pop();":"",e?aa.offset+".pop();":"","}")}});Object.keys(n).forEach(function(b){var c=F(z.def(b));b=X(n[b]);Z(c,".push(",b,");");ca(c,".pop();")});Object.keys(m).forEach(function(b){var c=F(D.def(b));b=X(m[b]);Z(c,".pushDyn(",b,");");ca(c,".pop();")});P=O("scope");la=P.arg();qa=
P.arg();P(U);p&&P(na,"=",la,";",Z);P(qa,"();",p?ca:"",Y);P=O("draw");P(U);p&&P(na,"=",P.arg(),";",Z);la=b(ja);P(V,"();","if(",la,")",la,".draw(",p?na:"",");",p?ca:"",Y);var pa=O("batch");pa(U);p=pa.def(b(ja));O=F(function(b,c,d){var e=b.batchCache[R];e||(e=b.batchCache[R]=H(b,a,n,m,t));return e(c,d)});pa("if(",p,"){",V,"();",O,"(",p,",",pa.arg(),",",pa.arg(),");");Object.keys(a).forEach(function(b){(b=ia[b])&&pa(b,".setDirty();")});pa("}",Y);return W.compile()}}}},{"./codegen":5,"./constants/dtypes.json":8,
"./constants/primitives.json":9}],7:[function(a,f,k){f.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],8:[function(a,f,k){f.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],9:[function(a,f,k){f.exports={points:0,
lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],10:[function(a,f,k){function p(g,a){function h(){var a=window.innerWidth,e=window.innerHeight;g!==document.body&&(e=g.getBoundingClientRect(),a=e.right-e.left,e=e.top-e.bottom);p.width=u*a;p.height=u*e;b(p.style,{width:a+"px",height:e+"px"})}var p=document.createElement("canvas"),r=m(p,a);b(p.style,{border:0,margin:0,padding:0,top:0,left:0});g.appendChild(p);g===document.body&&(p.style.position="absolute",b(g.style,
{margin:0,padding:0}));var u=+r.options.pixelRatio;window.addEventListener("resize",h,!1);var v=r.options.onDestroy;r.options=b(b({},r.options),{onDestroy:function(){window.removeEventListener("resize",h);g.removeChild(p);v&&v()}});h();return r}function m(g,a){function h(b){try{return g.getContext(b,m)}catch(a){return null}}var m=a.glOptions||{};return{gl:h("webgl")||h("experimental-webgl")||h("webgl-experimental"),options:b({pixelRatio:window.devicePixelRatio},a)}}var b=a("./extend");f.exports=function(g){if("undefined"===
typeof document||"undefined"===typeof HTMLElement)return{gl:g[0],options:g[1]||{}};var a=document.body,h=g[1]||{};if("string"===typeof g[0])a=document.querySelector(g[0])||document.body;else if("object"===typeof g[0])if(g[0]instanceof HTMLElement)a=g[0];else{if(g[0]instanceof WebGLRenderingContext)return{gl:g[0],options:b({pixelRatio:1},h)};h=g[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?m(a,h):p(a,h)}},{"./extend":14}],11:[function(a,f,k){f.exports=function(a){return{primitive:[4],
count:[0],offset:[0],instances:[0]}}},{}],12:[function(a,f,k){function p(g,a){this.id=b++;this.func=g;this.data=a}function m(b,a){switch(typeof b){case "boolean":case "number":case "string":return new p(!1,b);case "function":return new p(!0,b);default:return m}}var b=0;f.exports={define:m,isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof p},unbox:function(b,a){return b instanceof p?b:"function"===typeof b&&b!==m?new p(!0,b):new p(!1,a)}}},{}],13:[function(a,f,k){var p=
a("./is-typed-array"),m=a("./is-ndarray"),b=a("./constants/primitives.json");f.exports=function(g,a,h){function y(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}y.prototype.bind=function(){this.buffer.bind()};return{create:function(g){function u(e){var c=a.oes_element_index_uint;if(e)if("number"===typeof e)n(e);else{var d=null,g="static",h=0;Array.isArray(e)||p(e)||m(e)?d=e:("data"in e&&(d=e.data),"usage"in e&&(g=e.usage),"length"in e&&(h=e.length));Array.isArray(d)||m(d)&&"array"===
d.dtype||"type"in e?n({type:e.type||(c?"uint32":"uint16"),usage:g,data:d,length:h}):n({usage:g,data:d,length:h});if(Array.isArray(d)||p(d))n.dimension=3}else n();c=v.buffer.byteLength;d=0;switch(v.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;c>>=1;break;case 5125:case 5124:d=5125,c>>=2}g=4;h=v.buffer.dimension;1===h&&(g=0);2===h&&(g=1);3===h&&(g=4);"object"===typeof e&&("primitive"in e&&(g=b[e.primitive]),"count"in e&&(c=e.vertCount|0));v.primType=g;v.vertCount=c;v.type=
d;return u}var v=new y,n=h.create(null,34963,!0);v.buffer=n._buffer;u(g);u._reglType="elements";u._elements=v;u.destroy=function(){n.destroy();v.buffer=null};return u},elements:[null],getElements:function(b){return b&&b._elements instanceof y?b._elements:null}}}},{"./constants/primitives.json":9,"./is-ndarray":17,"./is-typed-array":18}],14:[function(a,f,k){f.exports=function(a,m){for(var b=Object.keys(m),g=0;g<b.length;++g)a[b[g]]=m[b[g]];return a}},{}],15:[function(a,f,k){f.exports=function(a){function m(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(g){try{b[g]=
a.getExtension(g)}catch(l){}})}var b={};m();return{extensions:b,refresh:m}}},{}],16:[function(a,f,k){var p=a("./values"),m=a("./extend"),b=[1029];f.exports=function(g,a,h,y,r){function u(b,c,t,d){this.target=b;this.level=c;this.texture=t;this.renderbuffer=d}function v(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function n(b,c){var t=c.width,d=c.height;if(b.texture)var e=b.texture._texture,g=Math.max(1,e.params.width>>b.level),a=Math.max(1,e.params.height>>
b.level),t=t||g,d=d||a;else e=b.renderbuffer._renderbuffer,t=t||e.width,d=d||e.height;e.refCount+=1;c.width=t;c.height=d}function e(b,c){c?c.texture?g.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,c.level):g.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer):g.framebufferTexture2D(36160,b,3553,null,0)}function c(b){var c=3553,t=0,d=null,e=null;"object"===typeof b&&("level"in b&&(t=b.level|0),"target"in b&&(c=b.target|0));var g=b._reglType;"texture"===
g?d=b:"renderbuffer"===g&&(e=b,c=36161,t=0);return new u(c,t,d,e)}function d(b){return b&&(b.texture||b.renderbuffer)}function q(){this.id=f++;k[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function w(b){g.isFramebuffer(b.framebuffer)||(b.framebuffer=g.createFramebuffer());C=!0;g.bindFramebuffer(36160,b.framebuffer);for(var c=b.colorAttachments,
t=0;t<c.length;++t)e(36064+t,c[t]);for(t=c.length;t<h.maxColorAttachments;++t)e(36064+t,null);e(36096,b.depthAttachment);e(36128,b.stencilAttachment);e(33306,b.depthStencilAttachment);a.webgl_draw_buffers&&a.webgl_draw_buffers.drawBuffersWEBGL(A[c.length]);g.checkFramebufferStatus(36160)}function x(b){b=b.framebuffer;g.isFramebuffer(b)&&g.deleteFramebuffer(b)}function E(){return H[H.length-1]}var t={rgba:6408},z={rgba4:32854,rgb565:36194,"rgb5 a1":32855};a.ext_srgb&&(z.srgba=35907);a.ext_color_buffer_half_float&&
(z.rgba16f=34842,z.rgb16f=34843);a.webgl_color_buffer_float&&(z.rgba32f=34836);var D=[],G=[];a.webgl_depth_texture&&(D.push(6402),G.push(34041));m(m({},t),z);p(t);p(z);z=5121;D={uint8:5121};a.oes_texture_half_float&&(z=D["half float"]=36193);a.oes_texture_float&&(z=D["float"]=5126);D.best=z;var A=function(){for(var b=Array(h.maxDrawbuffers),c=0;c<=h.maxDrawbuffers;++c)for(var t=b[c]=Array(c),d=0;d<c;++d)t[d]=36064+d;return b}(),f=0,k={},H=[null],C=!0;return{top:E,dirty:function(){return C},push:function(b){b=
b||null;C=C||b!==E();H.push(b);return C},pop:function(){var b=E();H.pop();return C=C||b!==E()},getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof q)?b:null},poll:function(){if(C){var c=H[H.length-1],t=a.webgl_draw_buffers;c?(g.bindFramebuffer(36160,c.framebuffer),t&&t.drawBuffersWEBGL(A[c.colorAttachments.length])):(g.bindFramebuffer(36160,null),t&&t.drawBuffersWEBGL(b));C=!1}},create:function(b){function e(b){var q,h=b||{},l=b=0;if("shape"in
h){var z=h.shape;b=z[0];l=z[1]}else"radius"in h&&(b=l=h.radius),"width"in h&&(b=h.width),"height"in h&&(l=h.height);var m=null,z=!1;if("colorBuffers"in h||"colorBuffer"in h){m=h.colorBuffers||h.colorBuffer;Array.isArray(m)||(m=[m]);a.width=b;a.height=l;m=m.map(c);for(q=0;q<m.length;++q)n(m[q],a);b=a.width;l=a.height}else{var x=!0,p="rgba",D="uint8",A=1,z=!0;a.width=b||g.drawingBufferWidth;a.height=l||g.drawingBufferHeight;"format"in h&&(p=h.format,x=p in t);"type"in h&&(D=h.type);"colorCount"in h&&
(A=h.colorCount|0);if(a.ownsColor)for(m=a.colorAttachments;m.length>A;)v(m.pop());else m=[];for(q=0;q<m.length;++q){var G;a:{G=m[q];var E=x,f=p,B=b,k=l;if(G.texture){var C=G.texture;if(E){C({format:f,type:D,width:B,height:k});C._texture.refCount+=1;G=!0;break a}}else if(C=G.renderbuffer,!E){C({format:f,width:B,height:k});C._renderbuffer.refCount+=1;G=!0;break a}v(G);G=!1}G||(m[q--]=m[m.length-1],m.pop())}for(;m.length<A;)x?m.push(new u(3553,0,y.create({format:p,type:D,width:b,height:l},3553),null)):
m.push(new u(36161,0,null,r.create({format:p,width:b,height:l})))}a.width=b;a.height=l;p=x=q=null;D=!1;"depthBuffer"in h&&(q=c(h.depthBuffer));"stencilBuffer"in h&&(x=c(h.stencilBuffer));"depthStencilBuffer"in h&&(p=c(h.depthStencilBuffer));if(q||x||p)n(q||x||p,a);else if(A=!0,E=G=!1,"depth"in h&&(A=!!h.depth),"stencil"in h&&(G=!!h.stencil),"depthTexture"in h&&(E=!!h.depthTexture),h=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,f=null,A||G)D=!0,E?(E=G?"depth stencil":"depth",a.ownsDepthStencil&&
h.texture?(h.texture({format:E,width:b,height:l}),h.texture._texture.refCount+=1,f=h):f=new u(3553,0,y.create({format:E,width:b,height:l},3553),null)):(E=A?G?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&h.renderbuffer?(h.renderbuffer({format:E,width:b,height:l}),h.renderbuffer._renderbuffer.refCount+=1,f=h):f=new u(36161,0,null,r.create({format:E,width:b,height:l}))),A?G?p=f:q=f:x=f;b=a;b.colorAttachments.forEach(v);v(b.depthAttachment);v(b.stencilAttachment);v(b.depthStencilAttachment);
a.colorAttachments=m;a.depthAttachment=q;a.stencilAttachment=x;a.depthStencilAttachment=p;a.ownsColor=z;a.ownsDepthStencil=D;e.color=m.map(d);e.depth=d(q);e.stencil=d(x);e.depthStencil=d(p);w(a);e.width=a.width;e.height=a.height;return e}var a=new q;e(b);e._reglType="framebuffer";e._framebuffer=a;e._destroy=function(){x(a)};return e},clear:function(){p(k).forEach(x)},refresh:function(){p(k).forEach(w)}}}},{"./extend":14,"./values":32}],17:[function(a,f,k){var p=a("./is-typed-array");f.exports=function(a){return"object"===
typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||p(a.data))}},{"./is-typed-array":18}],18:[function(a,f,k){var p=a("./constants/arraytypes.json");f.exports=function(a){return Object.prototype.toString.call(a)in p}},{"./constants/arraytypes.json":7}],19:[function(a,f,k){f.exports=function(a,m){var b=1;m.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));var g=1,l=1;m.webgl_draw_buffers&&(g=a.getParameter(34852),
l=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(m).filter(function(b){return!!m[b]}),maxAnisotropic:b,maxDrawbuffers:g,maxColorAttachments:l,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),
maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],20:[function(a,f,k){f.exports=function(a,m){if("undefined"!==typeof document){var b;
b=(b=/\.(\w+)(\?.*)?$/.exec(a))&&b[1]?b[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(b))return b=document.createElement("video"),b.autoplay=!0,b.loop=!0,m&&(b.crossOrigin=m),b.src=a,b;if(0<=["dds"].indexOf(b))return b=new XMLHttpRequest,b.responseType="arraybuffer",b.open("GET",a,!0),b.send(),b;b=new Image;m&&(b.crossOrigin=m);b.src=a;return b}return null}},{}],21:[function(a,f,k){f.exports=function(a){function f(b){for(var c=
K,t=J,d=0;d<Q;++d){var e=Math.max(1,c+3>>2)*Math.max(1,t+3>>2)*M;ba.pixels.push({target:b,miplevel:d,width:c,height:t,data:new Uint8Array(a,S,e)});S+=e;c>>=1;t>>=1}}var k=new Int32Array(a),C=k[x],K=k[t],J=k[E],L=r,T=0,M=0,N=4;switch(k[G]){case e:M=8;C&n?(N=3,T=b):T=g;break;case c:M=16;T=l;break;case d:M=16;T=h;break;case q:M=8,T=y}var Q=1;k[D]&u&&(Q=Math.max(1,k[z]));var S=k[w]+4,ba={width:K,height:J,channels:N,format:T,type:L,compressed:!0,cube:!1,pixels:[]};if(k[A]&v)for(ba.cube=!0,k=0;6>k;++k)f(m+
k);else f(p);return ba};var p=3553,m=34069,b=33776,g=33777,l=33778,h=33779,y=36196,r=5121,u=131072,v=512,n=64,e=827611204,c=861165636,d=894720068,q=826496069,w=1,x=2,E=3,t=4,z=7,D=20,G=21,A=28},{}],22:[function(a,f,k){f.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],23:[function(a,f,k){var p=
a("./is-typed-array");f.exports=function(a,b,g){return function(l){var h=l||{};p(l)?h={data:h}:2===arguments.length?h={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof l&&(h={});b();var y=h.x||0,r=h.y||0,u=h.width||g.width,v=h.height||g.height,h=h.data||new Uint8Array(u*v*4);a.pixelStorei(3333,4);a.readPixels(y,r,u,v,6408,5121,h);return h}}},{"./is-typed-array":18}],24:[function(a,f,k){var p=a("./values");f.exports=function(a,b,g){function l(){this.id=u++;this.refCount=1;this.renderbuffer=
null;this.format=32854;this.height=this.width=0}function h(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function y(b){var e=b.renderbuffer;a.bindRenderbuffer(36161,null);a.isRenderbuffer(e)&&a.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete v[b.id]}var r={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(r.srgba=
35907);b.ext_color_buffer_half_float&&(r.rgba16f=34842,r.rgb16f=34843);b.webgl_color_buffer_float&&(r.rgba32f=34836);var u=0,v={};l.prototype.decRef=function(){0===--this.refCount&&y(this)};return{create:function(b){function a(b){b=b||{};var g=0,w=0;"shape"in b?(w=b.shape,g=w[0]|0,w=w[1]|0):("radius"in b&&(g=w=b.radius|0),"width"in b&&(g=b.width|0),"height"in b&&(w=b.height|0));a.width=c.width=Math.max(g,1);a.height=c.height=Math.max(w,1);c.format=32854;"format"in b&&(c.format=r[b.format]);h(c);return a}
var c=new l;v[c.id]=c;a(b);a._reglType="renderbuffer";a._renderbuffer=c;a.destroy=function(){c.decRef()};return a},refresh:function(){p(v).forEach(h)},clear:function(){p(v).forEach(y)}}}},{"./values":32}],25:[function(a,f,k){function p(b,a,l){this.name=b;this.location=a;this.info=l}var m=a("./values");f.exports=function(b,a,l,h,y){function r(c,d){var a=35632===c?n:e,g=a[d];if(!g){var t=y.str(d),g=b.createShader(c);b.shaderSource(g,t);b.compileShader(g);a[d]=g}return g}function u(b,c){this.fragId=
b;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function v(c){var d,e;d=r(35632,c.fragId);e=r(35633,c.vertId);var n=c.program=b.createProgram();b.attachShader(n,d);b.attachShader(n,e);b.linkProgram(n);var t=b.getProgramParameter(n,35718),z=c.uniforms=[];for(d=0;d<t;++d)if(e=b.getActiveUniform(n,d))if(1<e.size)for(var m=0;m<e.size;++m){var v=e.name.replace("[0]","["+m+"]");l.def(v);z.push(new p(v,b.getUniformLocation(n,v),e))}else l.def(e.name),
z.push(new p(e.name,b.getUniformLocation(n,e.name),e));t=b.getProgramParameter(n,35721);z=c.attributes=[];for(d=0;d<t;++d)if(e=b.getActiveAttrib(n,d))a.def(e.name),z.push(new p(e.name,b.getAttribLocation(n,e.name),e));c.draw=h(c);c.batchCache={}}var n={},e={},c={},d=[];return{create:function(b,a){var e=c[a];e||(e=c[a]={});var g=e[b];g||(g=new u(a,b),v(g),e[b]=g,d.push(g));return g},clear:function(){var a=b.deleteShader.bind(b);m(n).forEach(a);n={};m(e).forEach(a);e={};d.forEach(function(c){b.deleteProgram(c.program)});
d.length=0;c={}},refresh:function(){n={};e={};d.forEach(v)},programs:[null],fragShaders:[y.id("void main(){gl_FragColor=vec4(0,0,0,0);}")],vertShaders:[y.id("void main(){gl_Position=vec4(0,0,0,0);}")]}}},{"./values":32}],26:[function(a,f,k){f.exports=function(a,m){var b=a.length,g=a.slice(),l=a.slice(),h=!1,y=!0;return{push:function(){h=!1;for(var a=0;a<b;++a){var m=arguments[a];h=h||m!==l[a];g.push(m)}},pop:function(){h=!1;g.length-=b;for(var a=0;a<b;++a)h=h||g[g.length-b+a]!==l[a]},poll:function(){var a=
g.length-b;if(h||y){switch(b){case 1:m(g[a]);break;case 2:m(g[a],g[a+1]);break;case 3:m(g[a],g[a+1],g[a+2]);break;case 4:m(g[a],g[a+1],g[a+2],g[a+3]);break;case 5:m(g[a],g[a+1],g[a+2],g[a+3],g[a+4]);break;case 6:m(g[a],g[a+1],g[a+2],g[a+3],g[a+4],g[a+5]);break;default:m.apply(null,g.slice(a,g.length))}for(var p=0;p<b;++p)l[p]=g[a+p];y=h=!1}},setDirty:function(){y=!0}}}},{}],27:[function(a,f,k){var p=a("./stack"),m=a("./codegen");f.exports=function(b,a,l){function h(a,c){var d=p([!!c],function(c){c?
b.enable(a):b.disable(a)});d.flag=a;return d}var y={dither:h(3024),"blend.enable":h(3042),"blend.color":p([0,0,0,0],function(a,c,d,g){b.blendColor(a,c,d,g)}),"blend.equation":p([32774,32774],function(a,c){b.blendEquationSeparate(a,c)}),"blend.func":p([1,0,1,0],function(a,c,d,g){b.blendFuncSeparate(a,c,d,g)}),"depth.enable":h(2929,!0),"depth.func":p([513],function(a){b.depthFunc(a)}),"depth.range":p([0,1],function(a,c){b.depthRange(a,c)}),"depth.mask":p([!0],function(a){b.depthMask(a)}),"cull.enable":h(2884),
"cull.face":p([1029],function(a){b.cullFace(a)}),frontFace:p([2305],function(a){b.frontFace(a)}),colorMask:p([!0,!0,!0,!0],function(a,c,d,g){b.colorMask(a,c,d,g)}),lineWidth:p([1],function(a){b.lineWidth(a)}),"polygonOffset.enable":h(32823),"polygonOffset.offset":p([0,0],function(a,c){b.polygonOffset(a,c)}),"sample.alpha":h(32926),"sample.enable":h(32928),"sample.coverage":p([1,!1],function(a,c){b.sampleCoverage(a,c)}),"stencil.enable":h(2960),"stencil.mask":p([-1],function(a){b.stencilMask(a)}),
"stencil.func":p([519,0,-1],function(a,c,d){b.stencilFunc(a,c,d)}),"stencil.opFront":p([7680,7680,7680],function(a,c,d){b.stencilOpSeparate(1028,a,c,d)}),"stencil.opBack":p([7680,7680,7680],function(a,c,d){b.stencilOpSeparate(1029,a,c,d)}),"scissor.enable":h(3089),"scissor.box":p([0,0,-1,-1],function(e,c,d,q){var h=d,l=a.top();0>d&&(h=l?l.width-e:b.drawingBufferWidth-e);d=q;0>q&&(d=l?l.height-c:b.drawingBufferHeight-c);b.scissor(e,c,h,d)}),viewport:p([0,0,-1,-1],function(e,c,d,q){var h=d,n=a.top();
0>d&&(h=n?n.width-e:b.drawingBufferWidth-e);d=q;0>q&&(d=n?n.height-c:b.drawingBufferHeight-c);b.viewport(e,c,h,d);l.width=h;l.height=d})},r=m(),u=r.proc("poll"),v=r.proc("refresh");Object.keys(y).forEach(function(b){b=r.link(y[b]);u(b,".poll();");v(b,".setDirty();")});var n=r.compile();return{contextState:y,viewport:l,poll:n.poll,refresh:n.refresh,notifyViewportChanged:function(){y.viewport.setDirty();y["scissor.box"].setDirty()}}}},{"./codegen":5,"./stack":26}],28:[function(a,f,k){f.exports=function(){var a=
{},m=[""];return{id:function(b){var g=a[b];if(g)return g;g=a[b]=m.length;m.push(b);return g},str:function(b){return m[b]}}}},{}],29:[function(a,f,k){function p(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function m(b){if(!Array.isArray(b))return!1;var c=b.length;if(0===c||!Array.isArray(b[0]))return!1;for(var a=b[0].length,g=1;g<c;++g)if(!Array.isArray(b[g])||b[g].length!==a)return!1;return!0}function b(b){return Object.prototype.toString.call(b)}function g(c){return"[object HTMLCanvasElement]"===
b(c)}function l(c){return"[object CanvasRenderingContext2D]"===b(c)}var h=a("./extend"),y=a("./values"),r=a("./is-typed-array"),u=a("./is-ndarray"),v=a("./load-texture"),n=a("./to-half-float"),e=a("./parse-dds"),c=[9984,9986,9985,9987];f.exports=function(d,a,w,x,E){function t(b){this.target=b;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=
this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function z(b){this.target=b;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function D(b,t){var d,a,g=0,e=0,h=0,q=0,l=0,z=0,w=!1,n=!1,m=!1;for(d=0;d<t.length;++d)a=t[d],q=q||a.width<<a.miplevel,
l=l||a.height<<a.miplevel,g=g||a.type,e=e||a.format,h=h||a.internalformat,z=z||a.channels,w=w||a.needsPoll,n=n||a.needsListeners,a=a.miplevel,m=m||0<a;b.needsPoll=w;b.needsListeners=n;b.width=q;b.height=l;b.format=e;b.internalformat=h;b.type=g;if(3553!==b.target)for(d=0;6>d;++d);d=0<=c.indexOf(b.minFilter);b.genMipmaps=!m&&(b.genMipmaps||d);m=m||b.genMipmaps;b.minFilter||(b.minFilter=m?9987:9728);b.wrapS=b.wrapS||33071;b.wrapT=b.wrapT||33071;for(d=0;d<t.length;++d)a=t[d],a.channels||(a.channels=z),
a.format||(a.format=e),a.internalformat||(a.internalformat=h),a.type||(a.type=g)}function G(b){this.id=W++;this.refCount=1;this.target=b;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new z(b);this.pixels=[]}function A(b,c){function a(b,d){var g=d.mipmap,h;if(Array.isArray(g))for(var q=0;q<g.length;++q)h=new t(b),h.parseFlags(c),h.parseFlags(d),h.parse(g[q],q),e.push(h);else h=new t(b),h.parseFlags(c),h.parse(d,0),e.push(h)}var d;H(b);var g=b.params;
z.call(g,b.target);var e=b.pixels;e.length=0;g.parse(c);if(3553===b.target)a(3553,c);else{var h=c.faces||c;if(Array.isArray(h))for(d=0;6>d;++d)a(34069+d,h[d]);else if("string"!==typeof h)for(d=0;6>d;++d)a(34069+d,{})}D(g,e);g.needsListeners&&k(b);g.needsPoll&&(b.pollId=P.length,P.push(b));f(b)}function f(b){d.isTexture(b.texture)||(b.texture=d.createTexture());var c=b.target,t=b.unit;0<=t?(d.activeTexture(33984+t),X=t):d.bindTexture(c,b.texture);for(var c=b.pixels,a=b.params,g=0;g<c.length;++g)c[g].upload(a);
a.upload();0>t&&((t=R[X])?d.bindTexture(t.target,t.texture):(b.unit=X,R[X]=b))}function k(b){function c(b,a,d){var h=e(d);h.pixels.forEach(function(c){var d=new t(h.cube?c.target:b);d.channels=h.channels;d.compressed=h.compressed;d.type=h.type;d.internalformat=h.format;d.format=da[h.format];d.width=c.width;d.height=c.height;d.miplevel=c.miplevel||a;d.data=c.data;g.push(d)})}function a(){for(var t=0;t<g.length;++t){var e=g[t],h=e.image,q=e.video,l=e.xhr;h&&h.complete?(e.width=h.naturalWidth,e.height=
h.naturalHeight):q&&2<q.readyState?(e.width=q.width,e.height=q.height):l&&4===l.readyState&&(g[t]=g[g.length-1],g.pop(),l.removeEventListener("readystatechange",f),c(e.target,e.miplevel,l.response))}D(d,g);f(b)}var d=b.params,g=b.pixels;g.forEach(function(b){b.image&&!b.image.complete?b.image.addEventListener("load",a):b.video&&1>b.readyState?b.video.addEventListener("progress",a):b.xhr&&b.xhr.addEventListener("readystatechange",a)});b.cancelPending=function(){g.forEach(function(b){b.image?b.image.removeEventListener("load",
a):b.video?b.video.removeEventListener("progress",a):b.xhr&&(b.xhr.removeEventListener("readystatechange",a),b.xhr.abort())})}}function H(b){var c=b.cancelPending;c&&(c(),b.cancelPending=null);c=b.pollId;0<=c&&((P[c]=P[P.length-1]).id=c,P.pop(),b.pollId=-1)}function C(b){var c=b.texture,t=b.unit,a=b.target;0<=t&&(d.activeTexture(33984+t),X=t,d.bindTexture(a,null),R[t]=null);H(b);d.isTexture(c)&&d.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete F[b.id]}var K={"don't care":4352,
"dont care":4352,nice:4354,fast:4353},J={repeat:10497,clamp:33071,mirror:33648},L={nearest:9728,linear:9729},T=h({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},L),M={none:0,browser:37444},N={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},S={};a.ext_srgb&&(Q.srgb=35904,Q.srgba=35906);a.oes_texture_float&&
(N["float"]=5126);a.oes_texture_half_float&&(N["half float"]=36193);a.webgl_depth_texture&&(h(Q,{depth:6402,"depth stencil":34041}),h(N,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&h(S,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&h(S,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&h(S,{"rgb pvrtc 4bppv1":35840,
"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(S["rgb etc1"]=36196);var ba=Array.prototype.slice.call(d.getParameter(34467));Object.keys(S).forEach(function(b){var c=S[b];0<=ba.indexOf(c)&&(Q[b]=c)});var ga=Object.keys(Q);w.textureFormats=ga;var da=ga.reduce(function(b,c){var t=Q[c];6409===t||6406===t||6409===t||6410===t||6402===t||34041===t?b[t]=t:32855===t||0<=c.indexOf("rgba")?b[t]=6408:b[t]=6407;return b},{});h(t.prototype,{parseFlags:function(b){if("object"===
typeof b&&b){"premultiplyAlpha"in b&&(this.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(this.flipY=b.flipY);"alignment"in b&&(this.unpackAlignment=b.alignment);"colorSpace"in b&&(this.colorSpace=M[b.colorSpace]);if("format"in b){var c=b.format;this.internalformat=Q[c];c in N&&(this.type=N[c]);c in S&&(this.compressed=!0)}"type"in b&&(this.type=N[b.type]);var c=this.width,t=this.height,d=this.channels;"shape"in b?(c=b.shape[0],t=b.shape[1],3===b.shape.length&&(d=b.shape[2])):("radius"in b&&(c=
t=b.radius),"width"in b&&(c=b.width),"height"in b&&(t=b.height),"channels"in b&&(d=b.channels));this.width=c|0;this.height=t|0;this.channels=d|0;"stride"in b?(c=b.stride,this.strideX=c[0],this.strideY=c[1],this.strideC=3===c.length?c[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*c);"offset"in b&&(this.offset=b.offset|0,this.needsTranspose=!0);"crossOrigin"in b&&(this.crossOrigin=b.crossOrigin)}},parse:function(c,t){this.miplevel=t;this.width>>=
t;this.height>>=t;var d=c;switch(typeof c){case "object":if(!c)return;this.parseFlags(c);var a=c.data;if("string"===typeof a||a&&(r(a)||p(a)||u(a)||g(a)||l(a)||"[object HTMLImageElement]"===b(a)||"[object HTMLVideoElement]"===b(a)||m(a)))d=c.data;break;case "undefined":return}"string"===typeof d&&(d=v(d,this.crossOrigin));var a=null,e=!1;if(null!==d)if(r(d))this.data=d;else if(p(d))a=d,e=!0;else if(u(d)){Array.isArray(d.data)?(a=d.data,e=!0):this.data=d.data;var h=d.shape;this.width=h[0];this.height=
h[1];this.channels=3===h.length?h[2]:1;h=d.stride;this.strideX=d.stride[0];this.strideY=d.stride[1];this.strideC=3===h.length?d.stride[2]:1;this.offset=d.offset;this.needsTranspose=!0}else if(g(d)||l(d))g(d)?this.canvas=d:this.canvas=d.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===b(d))this.image=d,d.complete?(this.width=d.naturalWidth,this.height=d.naturalHeight):(this.width=this.width||d.naturalWidth,this.height=
this.height||d.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();else if("[object HTMLVideoElement]"===b(d))this.video=d,1<d.readyState?(this.width=d.width,this.height=d.height):(this.width=this.width||d.width,this.height=this.height||d.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===b(d))this.xhr=d,this.needsListeners=!0;else if(m(d)){var e=d.length,h=d[0].length,q=1,z,w,x,y;if(Array.isArray(d[0][0]))for(q=d[0][0].length,a=
Array(e*h*q),w=y=0;w<h;++w)for(z=0;z<e;++z)for(x=0;x<q;++x)a[y++]=d[z][w][x];else for(a=Array(e*h),w=y=0;w<h;++w)for(z=0;z<e;++z)a[y++]=d[z][w];this.width=e;this.height=h;this.channels=q;e=!0}else c.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||E.width)|0,this.height=(this.height||E.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&
(this.type=5126));this.internalformat||(this.internalformat=[6409,6410,6407,6408][(this.channels=this.channels||4)-1]);d=this.internalformat;h=this.format=da[d];if(!this.channels)switch(h){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}h=this.type;5126!==h&&36193!==h&&(h||(h=6402===d?5125:5121));this.type=h;if(e)switch(h){case 5121:this.data=new Uint8Array(a);break;case 5123:this.data=new Uint16Array(a);
break;case 5125:this.data=new Uint32Array(a);break;case 5126:this.data=new Float32Array(a);break;case 36193:this.data=n(a)}if(this.data&&this.needsTranspose){a=this.data;d=this.width;e=this.height;h=this.channels;q=this.strideX;z=this.strideY;w=this.strideC;x=this.offset;y=new a.constructor(d*e*h);for(var D=0,J=0;J<e;++J)for(var A=0;A<d;++A)for(var L=0;L<h;++L)y[D++]=a[z*J+q*A+w*L+x];this.data=y}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;
this.channels=4;this.compressed=!1},upload:function(b){d.pixelStorei(37440,this.flipY);d.pixelStorei(37441,this.premultiplyAlpha);d.pixelStorei(37443,this.colorSpace);d.pixelStorei(3317,this.unpackAlignment);var c=this.target,t=this.miplevel,a=this.image,g=this.canvas,e=this.video,h=this.data,q=this.internalformat,l=this.format,z=this.type,w=this.width||Math.max(1,b.width>>t);b=this.height||Math.max(1,b.height>>t);e&&2<e.readyState?d.texImage2D(c,t,l,l,z,e):a&&a.complete?d.texImage2D(c,t,l,l,z,a):
g?d.texImage2D(c,t,l,l,z,g):this.compressed?d.compressedTexImage2D(c,t,q,w,b,0,h):this.copy?(x(),d.copyTexImage2D(c,t,l,this.x,this.y,w,b,0)):h?d.texImage2D(c,t,l,w,b,0,l,z,h):d.texImage2D(c,t,l,w||1,b||1,0,l,z,null)}});h(z.prototype,{parse:function(b){if("object"===typeof b&&b){"min"in b&&(this.minFilter=T[b.min]);"mag"in b&&(this.magFilter=L[b.mag]);var c=this.wrapS,t=this.wrapT;if("wrap"in b){var d=b.wrap;"string"===typeof d?c=t=J[d]:Array.isArray(d)&&(c=J[d[0]],t=J[d[1]])}else"wrapS"in b&&(c=
J[b.wrapS]),"wrapT"in b&&(t=J[b.wrapT]);this.wrapS=c;this.wrapT=t;"anisotropic"in b&&(this.anisotropic=b.anisotropic);if("mipmap"in b)switch(b=b.mipmap,typeof b){case "string":this.mipmapHint=K[b];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!b}}},upload:function(){var b=this.target;d.texParameteri(b,10241,this.minFilter);d.texParameteri(b,10240,this.magFilter);d.texParameteri(b,10242,this.wrapS);d.texParameteri(b,10243,this.wrapT);a.ext_texture_filter_anisotropic&&d.texParameteri(b,34046,
this.anisotropic);this.genMipmaps&&(d.hint(33170,this.mipmapHint),d.generateMipmap(b))}});var X=0,W=0,F={},P=[],O=w.maxTextureUnits,R=Array(O).map(function(){return null});h(G.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<O;++c){var t=R[c];if(t){if(0<t.bindCount)continue;t.unit=-1}R[c]=this;b=c;break}this.unit=b;d.activeTexture(33984+b);d.bindTexture(this.target,this.texture);X=b}return b},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&
C(this)}});return{create:function(b,c){function t(b,a,g,e,h,q){var l=b||{};34067===c&&6===arguments.length&&(l=[b,a,g,e,h,q]);A(d,l);t.width=d.params.width;t.height=d.params.height;return t}var d=new G(c);F[d.id]=d;t(b);t._reglType="texture";t._texture=d;t.destroy=function(){d.decRef()};return t},refresh:function(){y(F).forEach(f);for(var b=0;b<O;++b)R[b]=null;X=0;d.activeTexture(33984)},clear:function(){for(var b=0;b<O;++b)d.activeTexture(33984+b),d.bindTexture(3553,null),R[b]=null;d.activeTexture(33984);
X=0;y(F).forEach(C)},poll:function(){P.forEach(f)},getTexture:function(b){return null}}}},{"./extend":14,"./is-ndarray":17,"./is-typed-array":18,"./load-texture":20,"./parse-dds":21,"./to-half-float":30,"./values":32}],30:[function(a,f,k){f.exports=function(a){for(var m=new Float32Array(a),m=new Uint32Array(m.buffer),b=new Uint16Array(a.length),g=0;g<a.length;++g)if(isNaN(a[g]))b[g]=65535;else if(Infinity===a[g])b[g]=31744;else if(-Infinity===a[g])b[g]=64512;else{var l=m[g],h=l>>>31<<15,y=(l<<1>>>
24)-127,l=l>>13&1023;b[g]=-24>y?h:-14>y?h+(l+1024>>-14-y):15<y?h+31744:h+(y+15<<10)+l}return b}},{}],31:[function(a,f,k){f.exports=function(a){var m={};return{def:function(b){b=a.id(b);var g=m[b];g||(g=m[b]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]);return g}}}},{}],32:[function(a,f,k){f.exports=function(a){return Object.keys(a).map(function(m){return a[m]})}},{}],33:[function(a,f,k){function p(b,a,g){for(var r=[],u=a;u<g;u+=3)a=(b[u]<<16)+(b[u+1]<<8)+b[u+2],r.push(m[a>>18&63]+m[a>>12&63]+m[a>>6&63]+m[a&
63]);return r.join("")}k.toByteArray=function(a){var h,m,r,u,v;h=a.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");u="="===a[h-2]?2:"="===a[h-1]?1:0;v=new g(3*h/4-u);m=0<u?h-4:h;var n=0;for(h=0;h<m;h+=4)r=b[a.charCodeAt(h)]<<18|b[a.charCodeAt(h+1)]<<12|b[a.charCodeAt(h+2)]<<6|b[a.charCodeAt(h+3)],v[n++]=r>>16&255,v[n++]=r>>8&255,v[n++]=r&255;2===u?(r=b[a.charCodeAt(h)]<<2|b[a.charCodeAt(h+1)]>>4,v[n++]=r&255):1===u&&(r=b[a.charCodeAt(h)]<<10|b[a.charCodeAt(h+1)]<<4|b[a.charCodeAt(h+
2)]>>2,v[n++]=r>>8&255,v[n++]=r&255);return v};k.fromByteArray=function(b){for(var a=b.length,g=a%3,r="",u=[],v=0,n=a-g;v<n;v+=16383)u.push(p(b,v,v+16383>n?n:v+16383));1===g?(b=b[a-1],r+=m[b>>2],r+=m[b<<4&63],r+="=="):2===g&&(b=(b[a-2]<<8)+b[a-1],r+=m[b>>10],r+=m[b>>4&63],r+=m[b<<2&63],r+="=");u.push(r);return u.join("")};var m=[],b=[],g="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var a=0;64>a;++a)m[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=
a;b[45]=62;b[95]=63})()},{}],34:[function(a,f,k){var p=a("./lib/rationalize");f.exports=function(a,b){return p(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}},{"./lib/rationalize":44}],35:[function(a,f,k){f.exports=function(a,m){return a[0].mul(m[1]).cmp(m[0].mul(a[1]))}},{}],36:[function(a,f,k){var p=a("./lib/rationalize");f.exports=function(a,b){return p(a[0].mul(b[1]),a[1].mul(b[0]))}},{"./lib/rationalize":44}],37:[function(a,f,k){function p(a,u){if(m(a))return u?y(a,p(u)):[a[0].clone(),a[1].clone()];
var v=0,n,e;if(b(a))n=a.clone();else if("string"===typeof a)n=l(a);else{if(0===a)return[g(0),g(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;n=g(a)}if(m(u))n.mul(u[1]),e=u[0].clone();else if(b(u))e=u.clone();else if("string"===typeof u)e=l(u);else if(u){if(u!==Math.floor(u))for(;u!==Math.floor(u);)u*=Math.pow(2,256),v+=256;e=g(u)}else e=g(1);0<v?n=n.shln(v):0>v&&(e=e.shln(-v));return h(n,e)}var m=a("./is-rat"),b=a("./lib/is-bn"),g=a("./lib/num-to-bn"),l=a("./lib/str-to-bn"),
h=a("./lib/rationalize"),y=a("./div");f.exports=p},{"./div":36,"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],38:[function(a,f,k){var p=a("./lib/is-bn");f.exports=function(a){return Array.isArray(a)&&2===a.length&&p(a[0])&&p(a[1])}},{"./lib/is-bn":42}],39:[function(a,f,k){var p=a("bn.js");f.exports=function(a){return a.cmp(new p(0))}},{"bn.js":47}],40:[function(a,f,k){f.exports=function(a){var m=a.length,b=a.words,g=0;if(1===m)g=b[0];else if(2===
m)g=b[0]+67108864*b[1];else for(var l=g=0;l<m;l++)g+=b[l]*Math.pow(67108864,l);return a.sign?-g:g}},{}],41:[function(a,f,k){var p=a("double-bits"),m=a("bit-twiddle").countTrailingZeros;f.exports=function(b){var a=m(p.lo(b));if(32>a)return a;b=m(p.hi(b));return 20<b?52:b+32}},{"bit-twiddle":52,"double-bits":75}],42:[function(a,f,k){a("bn.js");f.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,f,k){var p=a("bn.js"),m=a("double-bits");f.exports=function(b){var a=
m.exponent(b);return 52>a?new p(b):(new p(b*Math.pow(2,52-a))).shln(a-52)}},{"bn.js":47,"double-bits":75}],44:[function(a,f,k){var p=a("./num-to-bn"),m=a("./bn-sign");f.exports=function(b,a){var l=m(b),h=m(a);if(0===l)return[p(0),p(1)];if(0===h)return[p(0),p(0)];0>h&&(b=b.neg(),a=a.neg());l=b.gcd(a);return l.cmpn(1)?[b.div(l),a.div(l)]:[b,a]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,f,k){var p=a("bn.js");f.exports=function(a){return new p(a)}},{"bn.js":47}],46:[function(a,f,k){var p=a("./lib/rationalize");
f.exports=function(a,b){return p(a[0].mul(b[0]),a[1].mul(b[1]))}},{"./lib/rationalize":44}],47:[function(a,f,k){(function(a,m){function b(b,c){if(!b)throw Error(c||"Assertion failed");}function g(b,c){b.super_=c;var a=function(){};a.prototype=c.prototype;b.prototype=new a;b.prototype.constructor=b}function l(b,c,a){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)a=c,c=10;null!==b&&this._init(b||0,c||10,
a||"be")}function h(b,c,a){var d=0;for(a=Math.min(b.length,a);c<a;c++)var e=b.charCodeAt(c)-48,d=d<<4,d=49<=e&&54>=e?d|e-49+10:17<=e&&22>=e?d|e-17+10:d|e&15;return d}function y(b,c,a,d){var e=0;for(a=Math.min(b.length,a);c<a;c++)var g=b.charCodeAt(c)-48,e=e*d,e=49<=g?e+(g-49+10):17<=g?e+(g-17+10):e+g;return e}function r(b,c){this.name=b;this.p=new l(c,16);this.n=this.p.bitLength();this.k=(new l(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function u(){r.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}
function v(){r.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function n(){r.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function e(){r.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function c(b){"string"===typeof b?(b=l._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function d(b){c.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);
this.r=(new l(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=l:m.BN=l;l.BN=l;l.wordSize=26;l.prototype._init=function(c,a,d){if("number"===typeof c)return this._initNumber(c,a,d);if("object"===typeof c)return this._initArray(c,a,d);"hex"===a&&(a=16);b(a===(a|0)&&2<=a&&36>=a);c=c.toString().replace(/\s+/g,"");var e=0;"-"===c[0]&&
e++;16===a?this._parseHex(c,e):this._parseBase(c,a,e);"-"===c[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),a,d)};l.prototype._initNumber=function(c,a,d){0>c&&(this.sign=!0,c=-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(b(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),a,d)};l.prototype._initArray=function(c,
a,d){b("number"===typeof c.length);if(0>=c.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var e=0;if("be"===d)for(a=c.length-1,d=0;0<=a;a-=3){var g=c[a]|c[a-1]<<8|c[a-2]<<16;this.words[d]|=g<<e&67108863;this.words[d+1]=g>>>26-e&67108863;e+=24;26<=e&&(e-=26,d++)}else if("le"===d)for(d=a=0;a<c.length;a+=3)g=c[a]|c[a+1]<<8|c[a+2]<<16,this.words[d]|=g<<e&67108863,this.words[d+1]=g>>>26-e&67108863,
e+=24,26<=e&&(e-=26,d++);return this.strip()};l.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;for(var d=0,a=b.length-6,e=0;a>=c;a-=6){var g=h(b,a,a+6);this.words[e]|=g<<d&67108863;this.words[e+1]|=g>>>26-d&4194303;d+=24;26<=d&&(d-=26,e++)}a+6!==c&&(g=h(b,c,a+6),this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303);this.strip()};l.prototype._parseBase=function(b,c,a){this.words=[0];this.length=
1;for(var d=0,e=1;67108863>=e;e*=c)d++;d--;for(var e=e/c|0,g=b.length-a,h=g%d,q=Math.min(g,g-h)+a,g=0;a<q;a+=d)g=y(b,a,a+d,c),this.imuln(e),67108864>this.words[0]+g?this.words[0]+=g:this._iaddn(g);if(0!==h){d=1;g=y(b,a,b.length,c);for(a=0;a<h;a++)d*=c;this.imuln(d);67108864>this.words[0]+g?this.words[0]+=g:this._iaddn(g)}};l.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};l.prototype.clone=
function(){var b=new l(null);this.copy(b);return b};l.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};l.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var q=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(c,a){c=c||10;if(16===c||"hex"===c){var d="",e=0;a=a|0||1;for(var g=0,h=0;h<this.length;h++){var l=
this.words[h],n=((l<<e|g)&16777215).toString(16),g=l>>>24-e&16777215,d=0!==g||h!==this.length-1?q[6-n.length]+n+d:n+d,e=e+2;26<=e&&(e-=26,h--)}for(0!==g&&(d=g.toString(16)+d);0!==d.length%a;)d="0"+d;this.sign&&(d="-"+d);return d}if(c===(c|0)&&2<=c&&36>=c){e=w[c];g=x[c];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)l=h.modn(g).toString(c),h=h.idivn(g),d=0!==h.cmpn(0)?q[e-l.length]+l+d:l+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}b(!1,"Base should be between 2 and 36")};l.prototype.toJSON=
function(){return this.toString(16)};l.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var a=this.clone();if("le"!==b)for(b=0;0!==a.cmpn(0);b++){var d=a.andln(255);a.ishrn(8);c[c.length-b-1]=d}else for(b=0;0!==a.cmpn(0);b++)d=a.andln(255),a.ishrn(8),c[b]=d;return c};l.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};l.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};l.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};l.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var a=this._zeroBits(this.words[c]),b=b+a;if(26!==a)break}return b};l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};l.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};l.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};l.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};l.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var a=
0;a<c.length;a++)this.words[a]&=b.words[a];this.length=c.length;return this.strip()};l.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};l.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var a=0;a<b.length;a++)this.words[a]=c.words[a]^b.words[a];if(this!==c)for(;a<c.length;a++)this.words[a]=c.words[a];this.length=c.length;return this.strip()};l.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};l.prototype.setn=function(c,a){b("number"===typeof c&&0<=c);for(var d=c/26|0,e=c%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=a?this.words[d]|1<<e:this.words[d]&~(1<<e);return this.strip()};l.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var a;this.length>b.length?a=this:(a=b,b=this);
for(var d=c=0;d<b.length;d++)c=a.words[d]+b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<a.length;d++)c=a.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=a.length;if(0!==c)this.words[this.length]=c,this.length++;else if(a!==this)for(;d<a.length;d++)this.words[d]=a.words[d];return this};l.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};l.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var a;0<c?a=this:(a=b,b=this);for(var d=0,e=0;e<b.length;e++)c=a.words[e]-b.words[e]+d,d=c>>26,this.words[e]=c&67108863;for(;0!==d&&e<a.length;e++)c=a.words[e]+d,d=c>>26,this.words[e]=c&67108863;if(0===d&&e<a.length&&a!==this)for(;e<
a.length;e++)this.words[e]=a.words[e];this.length=Math.max(this.length,e);a!==this&&(this.sign=!0);return this.strip()};l.prototype.sub=function(b){return this.clone().isub(b)};l.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0;d<c.length-1;d++){for(var e=a>>>26,a=a&67108863,g=Math.min(d,b.length-1),h=Math.max(0,d-this.length+1);h<=g;h++)var q=(this.words[d-h]|0)*(b.words[h]|0),l=q&67108863,e=e+(q/67108864|0)|0,l=l+a|0,a=l&67108863,e=e+(l>>>
26)|0;c.words[d]=a;a=e}0!==a?c.words[d]=a:c.length--;return c.strip()};l.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var a=0,d=0,e=0;e<c.length-1;e++){for(var g=d,d=0,a=a&67108863,h=Math.min(e,b.length-1),q=Math.max(0,e-this.length+1);q<=h;q++)var l=(this.words[e-q]|0)*(b.words[q]|0),w=l&67108863,g=g+(l/67108864|0)|0,w=w+a|0,a=w&67108863,g=g+(w>>>26)|0,d=d+(g>>>26),g=g&67108863;c.words[e]=a;a=g}0!==a?c.words[e]=a:c.length--;return c.strip()};l.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};l.prototype.mul=function(b){var c=new l(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};l.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,a=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var e=0,g=0,h=Math.min(d,a-1),q=Math.max(0,d-c+1);q<=h;q++)var l=
d-q,l=this.words[l]*b.words[q],w=l&67108863,e=e+(l/67108864|0),w=w+g,g=w&67108863,e=e+(w>>>26);this.words[d]=g;this.words[d+1]+=e}e=0;for(l=1;l<this.length;l++)b=this.words[l]+e,this.words[l]=b&67108863,e=b>>>26;return this.strip()};l.prototype.imuln=function(c){b("number"===typeof c);for(var a=0,d=0;d<this.length;d++){var e=this.words[d]*c,g=(e&67108863)+(a&67108863),a=a>>26,a=a+(e/67108864|0),a=a+(g>>>26);this.words[d]=g&67108863}0!==a&&(this.words[d]=a,this.length++);return this};l.prototype.muln=
function(b){return this.clone().imuln(b)};l.prototype.sqr=function(){return this.mul(this)};l.prototype.isqr=function(){return this.mul(this)};l.prototype.ishln=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;var d=67108863>>>26-a<<26-a;if(0!==a){for(var e=0,g=0;g<this.length;g++){var h=this.words[g]&d;this.words[g]=this.words[g]-h<<a|e;e=h>>>26-a}e&&(this.words[g]=e,this.length++)}if(0!==c){for(g=this.length-1;0<=g;g--)this.words[g+c]=this.words[g];for(g=0;g<c;g++)this.words[g]=0;
this.length+=c}return this.strip()};l.prototype.ishrn=function(c,a,d){b("number"===typeof c&&0<=c);var e=c%26,g=Math.min((c-e)/26,this.length);c=67108863^67108863>>>e<<e;a=(a?(a-a%26)/26:0)-g;a=Math.max(0,a);if(d){for(var h=0;h<g;h++)d.words[h]=this.words[h];d.length=g}if(0!==g)if(this.length>g)for(this.length-=g,h=0;h<this.length;h++)this.words[h]=this.words[h+g];else this.words[0]=0,this.length=1;g=0;for(h=this.length-1;0<=h&&(0!==g||h>=a);h--){var q=this.words[h];this.words[h]=g<<26-e|q>>>e;g=
q&c}d&&0!==g&&(d.words[d.length++]=g);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};l.prototype.shln=function(b){return this.clone().ishln(b)};l.prototype.shrn=function(b){return this.clone().ishrn(b)};l.prototype.testn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;return this.length<=c?!1:!!(this.words[c]&1<<a)};l.prototype.imaskn=function(c){b("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;b(!this.sign,"imaskn works only with positive numbers");0!==
a&&c++;this.length=Math.min(c,this.length);0!==a&&(this.words[this.length-1]&=67108863^67108863>>>a<<a);return this.strip()};l.prototype.maskn=function(b){return this.clone().imaskn(b)};l.prototype.iaddn=function(c){b("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};l.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};l.prototype.isubn=function(c){b("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};l.prototype.addn=function(b){return this.clone().iaddn(b)};
l.prototype.subn=function(b){return this.clone().isubn(b)};l.prototype.iabs=function(){this.sign=!1;return this};l.prototype.abs=function(){return this.clone().iabs()};l.prototype._ishlnsubmul=function(c,a,d){var e=c.length+d,g;if(this.words.length<e){var h=Array(e);for(g=0;g<this.length;g++)h[g]=this.words[g];this.words=h}else g=this.length;for(this.length=Math.max(this.length,e);g<this.length;g++)this.words[g]=0;for(g=h=0;g<c.length;g++)e=this.words[g+d]+h,h=c.words[g]*a,e-=h&67108863,h=(e>>26)-
(h/67108864|0),this.words[g+d]=e&67108863;for(;g<this.length-d;g++)e=this.words[g+d]+h,h=e>>26,this.words[g+d]=e&67108863;if(0===h)return this.strip();b(-1===h);for(g=h=0;g<this.length;g++)e=-this.words[g]+h,h=e>>26,this.words[g]=e&67108863;this.sign=!0;return this.strip()};l.prototype._wordDiv=function(b,c){var a=this.length-b.length,d=this.clone(),e=b,g=e.words[e.length-1],a=26-this._countBits(g);0!==a&&(e=e.shln(a),d.ishln(a),g=e.words[e.length-1]);var h=d.length-e.length,q;if("mod"!==c){q=new l(null);
q.length=h+1;q.words=Array(q.length);for(var w=0;w<q.length;w++)q.words[w]=0}w=d.clone()._ishlnsubmul(e,1,h);w.sign||(d=w,q&&(q.words[h]=1));for(--h;0<=h;h--){w=67108864*d.words[e.length+h]+d.words[e.length+h-1];w=Math.min(w/g|0,67108863);for(d._ishlnsubmul(e,w,h);d.sign;)w--,d.sign=!1,d._ishlnsubmul(e,1,h),0!==d.cmpn(0)&&(d.sign=!d.sign);q&&(q.words[h]=w)}q&&q.strip();d.strip();"div"!==c&&0!==a&&d.ishrn(a);return{div:q?q:null,mod:d}};l.prototype.divmod=function(c,a){b(0!==c.cmpn(0));if(this.sign&&
!c.sign){var d=this.neg().divmod(c,a),e,g;"mod"!==a&&(e=d.div.neg());"div"!==a&&(g=0===d.mod.cmpn(0)?d.mod:c.sub(d.mod));return{div:e,mod:g}}return!this.sign&&c.sign?(d=this.divmod(c.neg(),a),"mod"!==a&&(e=d.div.neg()),{div:e,mod:d.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),a):c.length>this.length||0>this.cmp(c)?{div:new l(0),mod:this}:1===c.length?"div"===a?{div:this.divn(c.words[0]),mod:null}:"mod"===a?{div:null,mod:new l(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new l(this.modn(c.words[0]))}:
this._wordDiv(c,a)};l.prototype.div=function(b){return this.divmod(b,"div").div};l.prototype.mod=function(b){return this.divmod(b,"mod").mod};l.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var a=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);a=a.cmp(d);return 0>a||1===b&&0===a?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};l.prototype.modn=function(c){b(67108863>=c);for(var a=67108864%c,d=0,e=this.length-1;0<=e;e--)d=(a*d+this.words[e])%c;return d};
l.prototype.idivn=function(c){b(67108863>=c);for(var a=0,d=this.length-1;0<=d;d--)a=this.words[d]+67108864*a,this.words[d]=a/c|0,a%=c;return this.strip()};l.prototype.divn=function(b){return this.clone().idivn(b)};l.prototype.egcd=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new l(1);for(var e=new l(0),g=new l(0),h=new l(1),q=0;a.isEven()&&d.isEven();)a.ishrn(1),d.ishrn(1),++q;for(var w=d.clone(),n=a.clone();0!==a.cmpn(0);){for(;a.isEven();)a.ishrn(1),
c.isEven()&&e.isEven()?(c.ishrn(1),e.ishrn(1)):(c.iadd(w).ishrn(1),e.isub(n).ishrn(1));for(;d.isEven();)d.ishrn(1),g.isEven()&&h.isEven()?(g.ishrn(1),h.ishrn(1)):(g.iadd(w).ishrn(1),h.isub(n).ishrn(1));0<=a.cmp(d)?(a.isub(d),c.isub(g),e.isub(h)):(d.isub(a),g.isub(c),h.isub(e))}return{a:g,b:h,gcd:d.ishln(q)}};l.prototype._invmp=function(c){b(!c.sign);b(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new l(1);for(var e=new l(0),g=d.clone();0<a.cmpn(1)&&0<d.cmpn(1);){for(;a.isEven();)a.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(g).ishrn(1);for(;d.isEven();)d.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(g).ishrn(1);0<=a.cmp(d)?(a.isub(d),c.isub(e)):(d.isub(a),e.isub(c))}return 0===a.cmpn(1)?c:e};l.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var a=0;c.isEven()&&b.isEven();a++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(a)};l.prototype.invm=function(b){return this.egcd(b).a.mod(b)};l.prototype.isEven=function(){return 0===(this.words[0]&1)};l.prototype.isOdd=function(){return 1===(this.words[0]&1)};l.prototype.andln=function(b){return this.words[0]&b};l.prototype.bincn=function(c){b("number"===typeof c);var a=c%26;c=(c-a)/26;var d=1<<a;if(this.length<=c){for(a=this.length;a<c+1;a++)this.words[a]=0;this.words[c]|=d;this.length=c+1;return this}for(a=c;0!==d&&
a<this.length;a++)c=this.words[a],c+=d,d=c>>>26,c&=67108863,this.words[a]=c;0!==d&&(this.words[a]=d,this.length++);return this};l.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};l.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};l.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,a=this.length-1;0<=a;a--){var d=this.words[a],e=b.words[a];if(d!==e){d<e?c=-1:d>e&&(c=1);break}}return c};l.red=function(b){return new c(b)};l.prototype.toRed=function(c){b(!this.red,"Already a number in reduction context");b(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};l.prototype.fromRed=function(){b(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
l.prototype._forceRed=function(b){this.red=b;return this};l.prototype.forceRed=function(c){b(!this.red,"Already a number in reduction context");return this._forceRed(c)};l.prototype.redAdd=function(c){b(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};l.prototype.redIAdd=function(c){b(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};l.prototype.redSub=function(c){b(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};l.prototype.redISub=
function(c){b(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};l.prototype.redShl=function(c){b(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};l.prototype.redMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};l.prototype.redIMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};l.prototype.redSqr=function(){b(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};l.prototype.redISqr=function(){b(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};l.prototype.redSqrt=function(){b(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};l.prototype.redInvm=function(){b(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};l.prototype.redNeg=
function(){b(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};l.prototype.redPow=function(c){b(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var f={k256:null,p224:null,p192:null,p25519:null};r.prototype._tmp=function(){var b=new l(null);b.words=Array(Math.ceil(this.n/13));return b};r.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};r.prototype.split=function(b,c){b.ishrn(this.n,0,c)};r.prototype.imulK=function(b){return b.imul(this.k)};g(u,r);u.prototype.split=function(b,c){for(var a=Math.min(b.length,9),d=0;d<a;d++)c.words[d]=b.words[d];c.length=a;if(9>=b.length)b.words[0]=0,b.length=1;else{a=b.words[9];c.words[c.length++]=a&4194303;for(d=10;d<b.length;d++){var e=b.words[d];b.words[d-10]=(e&4194303)<<4|a>>>22;a=e}b.words[d-10]=
a>>>22;b.length-=9}};u.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,a=0,d=0;d<b.length;d++){var e=b.words[d];c=64*e;a+=977*e;c+=a/67108864|0;a&=67108863;b.words[d]=a;a=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};g(v,r);g(n,r);g(e,r);e.prototype.imulK=function(b){for(var c=0,a=0;a<b.length;a++){var c=19*b.words[a]+c,d=c&67108863,c=c>>>26;b.words[a]=d}0!==c&&(b.words[b.length++]=c);return b};l._prime=function(b){if(f[b])return f[b];
var c;if("k256"===b)c=new u;else if("p224"===b)c=new v;else if("p192"===b)c=new n;else if("p25519"===b)c=new e;else throw Error("Unknown prime "+b);return f[b]=c};c.prototype._verify1=function(c){b(!c.sign,"red works only with positives");b(c.red,"red works only with red numbers")};c.prototype._verify2=function(c,a){b(!c.sign&&!a.sign,"red works only with positives");b(c.red&&c.red===a.red,"red works only with red numbers")};c.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};c.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};c.prototype.add=function(b,c){this._verify2(b,c);var a=b.add(c);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};c.prototype.iadd=function(b,c){this._verify2(b,c);var a=b.iadd(c);0<=a.cmp(this.m)&&a.isub(this.m);return a};c.prototype.sub=function(b,c){this._verify2(b,c);var a=b.sub(c);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};c.prototype.isub=function(b,
c){this._verify2(b,c);var a=b.isub(c);0>a.cmpn(0)&&a.iadd(this.m);return a};c.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};c.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};c.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};c.prototype.isqr=function(b){return this.imul(b,b)};c.prototype.sqr=function(b){return this.mul(b,b)};c.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var a=this.m.andln(3);b(1===
a%2);if(3===a){var a=this.m.add(new l(1)).ishrn(2),d=this.pow(c,a);return d}for(var e=this.m.subn(1),g=0;0!==e.cmpn(0)&&0===e.andln(1);)g++,e.ishrn(1);b(0!==e.cmpn(0));for(var a=(new l(1)).toRed(this),d=a.redNeg(),h=this.m.subn(1).ishrn(1),q=this.m.bitLength(),q=(new l(2*q*q)).toRed(this);0!==this.pow(q,h).cmp(d);)q.redIAdd(d);h=this.pow(q,e);d=this.pow(c,e.addn(1).ishrn(1));c=this.pow(c,e);for(e=g;0!==c.cmp(a);){q=c;for(g=0;0!==q.cmp(a);g++)q=q.redSqr();b(g<e);h=this.pow(h,(new l(1)).ishln(e-g-1));
d=d.redMul(h);h=h.redSqr();c=c.redMul(h);e=g}return d};c.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};c.prototype.pow=function(b,c){var a=[];if(0===c.cmpn(0))return new l(1);for(var d=c.clone();0!==d.cmpn(0);)a.push(d.andln(1)),d.ishrn(1);for(var e=b,g=0;g<a.length&&0===a[g];g++,e=this.sqr(e));if(++g<a.length)for(d=this.sqr(e);g<a.length;g++,d=this.sqr(d))0!==a[g]&&(e=this.mul(e,d));return e};c.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};c.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};l.mont=function(b){return new d(b)};g(d,c);d.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};d.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};d.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var a=b.imul(c),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);
0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&(d=a.iadd(this.m));return d._forceRed(this)};d.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new l(0))._forceRed(this);var a=b.mul(c),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=a=a.isub(d).ishrn(this.shift);0<=a.cmp(this.m)?d=a.isub(this.m):0>a.cmpn(0)&&(d=a.iadd(this.m));return d._forceRed(this)};d.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof f||f,this)},{}],48:[function(a,f,k){var p=a("./lib/bn-sign");f.exports=function(a){return p(a[0])*p(a[1])}},{"./lib/bn-sign":39}],49:[function(a,f,k){var p=a("./lib/rationalize");f.exports=function(a,b){return p(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}},{"./lib/rationalize":44}],50:[function(a,f,k){var p=a("./lib/bn-to-num"),m=a("./lib/ctz");f.exports=function(b){var a=b[0];b=b[1];if(0===a.cmpn(0))return 0;var l=a.divmod(b),a=p(l.div),l=l.mod;if(0===l.cmpn(0))return a;if(a){var h=
m(a)+4;b=p(l.shln(h).divRound(b));0>a&&(b=-b);return a+b*Math.pow(2,-h)}a=b.bitLength()-l.bitLength()+53;b=p(l.shln(a).divRound(b));if(1023>a)return b*Math.pow(2,-a);b*=Math.pow(2,-1023);return b*Math.pow(2,1023-a)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,f,k){function p(b,a,l,h,m){b=["function ",b,"(a,l,h,",h.join(","),"){",m?"":"var i=",l?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];m?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
b.push(";if(",a,"){i=m;");l?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");m?b.push("return -1};"):b.push("return i};");return b.join("")}function m(b,a,l,h){return(new Function([p("A","x"+b+"y",a,["y"],h),p("P","c(x,y)"+b+"0",a,["y","c"],h),"function dispatchBsearch",l,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",l].join("")))()}
f.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],52:[function(a,f,k){function p(b){var a=32;(b&=-b)&&a--;b&65535&&(a-=16);b&16711935&&(a-=8);b&252645135&&(a-=4);b&858993459&&(a-=2);b&1431655765&&--a;return a}"use restrict";k.INT_BITS=32;k.INT_MAX=2147483647;k.INT_MIN=-2147483648;k.sign=function(b){return(0<b)-(0>b)};k.abs=function(b){var a=b>>31;return(b^a)-a};k.min=function(b,a){return a^(b^a)&-(b<a)};k.max=function(b,a){return b^(b^
a)&-(b<a)};k.isPow2=function(b){return!(b&b-1)&&!!b};k.log2=function(b){var a,l;a=(65535<b)<<4;b>>>=a;l=(255<b)<<3;b>>>=l;a|=l;l=(15<b)<<2;b>>>=l;a|=l;l=(3<b)<<1;return a|l|b>>>l>>1};k.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};k.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};k.countTrailingZeros=p;k.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=
b>>>8;return(b|b>>>16)+1};k.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};k.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var m=Array(256);(function(b){for(var a=0;256>a;++a){for(var l=a,h=a,m=7,l=l>>>1;l;l>>>=1)h<<=1,h|=l&1,--m;b[a]=h<<m&255}})(m);k.reverse=function(b){return m[b&255]<<24|m[b>>>8&255]<<16|m[b>>>16&255]<<8|m[b>>>24&255]};k.interleave2=function(b,a){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;
a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|b<<1)&1431655765|((a|a<<1)&1431655765)<<1};k.deinterleave2=function(b,a){b=b>>>a&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};k.interleave3=function(b,a,l){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b=(b|b<<2)&1227133513|((a|a<<2)&1227133513)<<1;l&=1023;
l=(l|l<<16)&4278190335;l=(l|l<<8)&251719695;l=(l|l<<4)&3272356035;return b|((l|l<<2)&1227133513)<<2};k.deinterleave3=function(b,a){b=b>>>a&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};k.nextCombination=function(b){var a=b|b-1;return a+1|(~a&-~a)-1>>>p(b)+1}},{}],53:[function(a,f,k){function p(b,a,g,h){for(var e=0,c=0,d=0,q=b.length;d<q;++d){var w=b[d],l;a:{for(l=0;l<a;++l)if(!(w[l]<=w[l+a])){l=!0;break a}l=!1}if(!l){for(l=0;l<2*a;++l)g[e++]=
w[l];h[c++]=d}}return c}function m(b,a,m,n){var e=b.length,c=a.length;if(!(0>=e||0>=c)){var d=b[0].length>>>1;if(!(0>=d)){var q,w=g.mallocDouble(2*d*e),x=g.mallocInt32(e),e=p(b,d,w,x);if(0<e){if(1===d&&n)l.init(e),q=l.sweepComplete(d,m,0,e,w,x,0,e,w,x);else{b=g.mallocDouble(2*d*c);var y=g.mallocInt32(c),c=p(a,d,b,y);0<c&&(l.init(e+c),q=1===d?l.sweepBipartite(d,m,0,e,w,x,0,c,b,y):h(d,m,n,e,w,x,c,b,y),g.free(b),g.free(y))}g.free(w);g.free(x)}return q}}}function b(b,a){y.push([b,a])}f.exports=function(a,
g,h){switch(arguments.length){case 1:return y=[],m(a,a,b,!0),y;case 2:if("function"===typeof g)return m(a,a,g,!0);y=[];m(a,g,b,!1);return y;case 3:return m(a,g,h,!1);default:throw Error("box-intersect: Invalid arguments");}};var g=a("typedarray-pool"),l=a("./lib/sweep"),h=a("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,f,k){function p(b){function a(g,l){var n,e="bruteForce"+(g?"Red":"Blue")+(l?"Flip":"")+(b?"Full":"");n=["function ",e,"(",m.join(),
"){","var ","es","=2*","d",";"];var c="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(b?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";g?n.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",c):n.push(c,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");b?n.push("if(y1<x0||x1<y0)continue;"):l?n.push("if(y0<=x0||x1<y0)continue;"):n.push("if(y0<x0||x1<y0)continue;");n.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
l?n.push("yi,xi"):n.push("xi,yi");n.push(");if(rv!==void 0)return rv;}}}");n=n.join("");h.push(n);r.push("return "+e+"("+m.join()+");")}var l="bruteForce"+(b?"Full":"Partial"),h=[],p=m.slice();b||p.splice(3,0,"fp");var r=["function "+l+"("+p.join()+"){"];r.push("if(re-rs>be-bs){");b?(a(!0,!1),r.push("}else{"),a(!1,!1)):(r.push("if(fp){"),a(!0,!0),r.push("}else{"),a(!0,!1),r.push("}}else{if(fp){"),a(!1,!0),r.push("}else{"),a(!1,!1),r.push("}"));r.push("}}return "+l);l=h.join("")+r.join("");return(new Function(l))()}
var m="d ax vv rs re rb ri bs be bb bi".split(" ");k.partial=p(!1);k.full=p(!0)},{}],55:[function(a,f,k){function p(b,c,a,d,e,g,h,q,l){var w=x*b;t[w]=c;t[w+1]=a;t[w+2]=d;t[w+3]=e;t[w+4]=g;t[w+5]=h;b*=E;z[b]=q;z[b+1]=l}f.exports=function(a,f,k,B,I,H,C,K,J){var L=8*b.log2(B+C+1)*(a+1)|0,T=b.nextPow2(x*L);t.length<T&&(m.free(t),t=m.mallocInt32(T));L=b.nextPow2(E*L);z<L&&(m.free(z),z=m.mallocDouble(L));var L=0,T=2*a,M;p(L++,0,0,B,0,C,k?16:0,-Infinity,Infinity);for(k||p(L++,0,0,C,0,B,1,-Infinity,Infinity);0<
L;){--L;k=L*x;var N=t[k];C=t[k+1];var Q=t[k+2],S=t[k+3],ba=t[k+4];k=t[k+5];B=L*E;var ga=z[B],da=z[B+1],X=k&1,W=!!(k&16),F=I,P=H,O=K;B=J;X&&(F=K,P=J,O=I,B=H);if(k&2&&(Q=c(a,N,C,Q,F,P,da),C>=Q))continue;if(k&4&&(C=d(a,N,C,Q,F,P,ga),C>=Q))continue;k=Q-C;var R=ba-S;if(W){if(a*k*(k+R)<v){M=h.scanComplete(a,N,f,C,Q,F,P,S,ba,O,B);if(void 0!==M)return M;continue}}else if(a*Math.min(k,R)<r){M=g(a,N,f,X,C,Q,F,P,S,ba,O,B);if(void 0!==M)return M;continue}else if(a*k*R<u){M=h.scanBipartite(a,N,f,X,C,Q,F,P,S,ba,
O,B);if(void 0!==M)return M;continue}k=n(a,N,C,Q,F,P,ga,da);if(C<k)if(a*(k-C)<r){if(M=l(a,N+1,f,C,k,F,P,S,ba,O,B),void 0!==M)return M}else if(N===a-2){if(M=X?h.sweepBipartite(a,f,S,ba,O,B,C,k,F,P):h.sweepBipartite(a,f,C,k,F,P,S,ba,O,B),void 0!==M)return M}else p(L++,N+1,C,k,S,ba,X,-Infinity,Infinity),p(L++,N+1,S,ba,C,k,X^1,-Infinity,Infinity);if(k<Q)if(C=y(a,N,S,ba,O,B),M=O[T*C+N],R=e(a,N,C,ba,O,B,M),R<ba&&p(L++,N,k,Q,R,ba,(X|4)+(W?16:0),M,da),S<C&&p(L++,N,k,Q,S,C,(X|2)+(W?16:0),ga,M),C+1===R){if(W)a:{S=
a;ba=f;B=B[C];X=2*S;C*=X;ga=O[C+N];da=k;k*=X;b:for(;da<Q;++da,k+=X)if(W=P[da],W!==B&&(R=F[k+N],M=F[k+N+S],!(ga<R||M<ga))){for(var V=N+1;V<S;++V){R=F[k+V];M=F[k+V+S];var ea=O[C+V+S];if(M<O[C+V]||ea<R)continue b}W=ba(W,B);if(void 0!==W){M=W;break a}}M=void 0}else a:{S=a;ba=f;B=B[C];ga=2*S;C*=ga;da=O[C+N];W=k;k*=ga;b:for(;W<Q;++W,k+=ga)if(R=F[k+N],M=F[k+N+S],!(da<R||M<da||X&&da===R)){V=P[W];for(ea=N+1;ea<S;++ea){R=F[k+ea];M=F[k+ea+S];var fa=O[C+ea+S];if(M<O[C+ea]||fa<R)continue b}R=X?ba(B,V):ba(V,B);
if(void 0!==R){M=R;break a}}M=void 0}if(void 0!==M)return M}else if(C<R)if(W){if(Q=q(a,N,k,Q,F,P,M),k<Q)if(S=e(a,N,k,Q,F,P,M),N===a-2){if(k<S&&(M=h.sweepComplete(a,f,k,S,F,P,C,R,O,B),void 0!==M)||S<Q&&(M=h.sweepBipartite(a,f,S,Q,F,P,C,R,O,B),void 0!==M))return M}else k<S&&p(L++,N+1,k,S,C,R,16,-Infinity,Infinity),S<Q&&(p(L++,N+1,S,Q,C,R,0,-Infinity,Infinity),p(L++,N+1,C,R,S,Q,1,-Infinity,Infinity))}else Q=X?w(a,N,k,Q,F,P,M):q(a,N,k,Q,F,P,M),k<Q&&(N===a-2?X?h.sweepBipartite(a,f,C,R,O,B,k,Q,F,P):h.sweepBipartite(a,
f,k,Q,F,P,C,R,O,B):(p(L++,N+1,k,Q,C,R,X,-Infinity,Infinity),p(L++,N+1,C,R,k,Q,X^1,-Infinity,Infinity)))}};var m=a("typedarray-pool"),b=a("bit-twiddle");f=a("./brute");var g=f.partial,l=f.full,h=a("./sweep"),y=a("./median");a=a("./partition");var r=128,u=4194304,v=4194304,n=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),e=a("lo===p0",["p0"]),c=a("lo<p0",["p0"]),d=a("hi<=p0",["p0"]),q=a("lo<=p0&&p0<=hi",["p0"]),w=a("lo<p0&&p0<=hi",["p0"]),x=6,E=2,t=m.mallocInt32(1024),z=m.mallocDouble(1024)},{"./brute":54,"./median":56,
"./partition":57,"./sweep":59,"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,f,k){f.exports=function(b,a,l,h,y,r){if(h<=l+1)return l;var u=l,v=h;h=h+l>>>1;for(var n=2*b,e=h,c=y[n*h+a];u<v;){if(v-u<m){for(var e=a,c=y,d=r,q=2*b,w=q*(u+1)+e,x=u+1;x<v;++x,w+=q)for(var f=c[w],t=x,k=q*(x-1);t>u&&c[k+e]>f;--t,k-=q){for(var D=k,G=k+q,A=0;A<q;++A,++D,++G){var B=c[D];c[D]=c[G];c[G]=B}D=d[t];d[t]=d[t-1];d[t-1]=D}break}w=v-u;e=Math.random()*w+u|0;c=y[n*e+a];q=Math.random()*w+u|0;d=y[n*q+a];x=Math.random()*
w+u|0;w=y[n*x+a];c<=d?w>=d?(e=q,c=d):c>=w||(e=x,c=w):d>=w?(e=q,c=d):w>=c||(e=x,c=w);d=n*(v-1);q=n*e;for(w=0;w<n;++w,++d,++q)x=y[d],y[d]=y[q],y[q]=x;d=r[v-1];r[v-1]=r[e];r[e]=d;e=p(b,a,u,v-1,y,r,c);d=n*(v-1);q=n*e;for(w=0;w<n;++w,++d,++q)x=y[d],y[d]=y[q],y[q]=x;d=r[v-1];r[v-1]=r[e];r[e]=d;if(h<e){for(v=e-1;u<v&&y[n*(v-1)+a]===c;)--v;v+=1}else if(e<h)for(u=e+1;u<v&&y[n*u+a]===c;)u+=1;else break}return p(b,a,l,h,y,r,y[n*h+a])};var p=a("./partition")("lo<p0",["p0"]),m=8},{"./partition":57}],57:[function(a,
f,k){f.exports=function(a,b){var g="abcdef".split("").concat(b),l=[];0<=a.indexOf("lo")&&l.push("lo=e[k+n]");0<=a.indexOf("hi")&&l.push("hi=e[k+o]");g.push(p.replace("_",l.join()).replace("$",a));return Function.apply(void 0,g)};var p="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,f,k){function p(b,a,g){for(var e=2*(b+1),c=b+1;c<=a;++c){for(var d=
g[e++],h=g[e++],l=c,m=e-2;l-- >b;){var p=g[m-2],t=g[m-1];if(p<d)break;else if(p===d&&t<h)break;g[m]=p;g[m+1]=t;m-=2}g[m]=d;g[m+1]=h}}function m(b,a,g){b*=2;a*=2;var e=g[b],c=g[b+1];g[b]=g[a];g[b+1]=g[a+1];g[a]=e;g[a+1]=c}function b(b,a,g){b*=2;a*=2;g[b]=g[a];g[b+1]=g[a+1]}function g(b,a,g,e,c){b*=2;a*=2;c[b]=c[a];c[a]=g;c[b+1]=c[a+1];c[a+1]=e}function l(b,a,g){b*=2;a*=2;var e=g[b],c=g[a];return e<c?!1:e===c?g[b+1]>g[a+1]:!0}function h(b,a,g,e){b*=2;var c=e[b];return c<a?!0:c===a?e[b+1]<g:!1}function y(a,
v,n){var e=(v-a+1)/6|0,c=a+e,d=v-e,q=a+v>>1,w=q-e,x=q+e,f=c,t=w,k=q,D=x,G=d,e=a+1,A=v-1,B=0;l(f,t,n)&&(B=f,f=t,t=B);l(D,G,n)&&(B=D,D=G,G=B);l(f,k,n)&&(B=f,f=k,k=B);l(t,k,n)&&(B=t,t=k,k=B);l(f,D,n)&&(B=f,f=D,D=B);l(k,D,n)&&(B=k,k=D,D=B);l(t,G,n)&&(B=t,t=G,G=B);l(t,k,n)&&(B=t,t=k,k=B);l(D,G,n)&&(B=D,D=G,G=B);for(var B=n[2*t],t=n[2*t+1],I=n[2*D],D=n[2*D+1],f=2*f,k=2*k,G=2*G,c=2*c,q=2*q,d=2*d,H=0;2>H;++H){var C=n[k+H],K=n[G+H];n[c+H]=n[f+H];n[q+H]=C;n[d+H]=K}b(w,a,n);b(x,v,n);for(w=e;w<=A;++w)if(h(w,
B,t,n))w!==e&&m(w,e,n),++e;else if(!h(w,I,D,n))for(;;)if(h(A,I,D,n)){h(A,B,t,n)?(x=w,d=e,q=A,f=n,x*=2,d*=2,q*=2,c=f[x],k=f[x+1],f[x]=f[d],f[x+1]=f[d+1],f[d]=f[q],f[d+1]=f[q+1],f[q]=c,f[q+1]=k,++e):m(w,A,n);--A;break}else if(--A<w)break;g(a,e-1,B,t,n);g(v,A+1,I,D,n);e-2-a<=r?p(a,e-2,n):y(a,e-2,n);v-(A+2)<=r?p(A+2,v,n):y(A+2,v,n);A-e<=r?p(e,A,n):y(e,A,n)}f.exports=function(b,a){a<=4*r?p(0,a-1,b):y(0,a-1,b)};var r=32},{}],59:[function(a,f,k){function p(b,a,e,g){g=a[g];e=b[e-1];b[g]=e;a[e]=g}f.exports=
{init:function(c){c=b.nextPow2(c);h.length<c&&(m.free(h),h=m.mallocInt32(c));y.length<c&&(m.free(y),y=m.mallocInt32(c));r.length<c&&(m.free(r),r=m.mallocInt32(c));u.length<c&&(m.free(u),u=m.mallocInt32(c));v.length<c&&(m.free(v),v=m.mallocInt32(c));n.length<c&&(m.free(n),n=m.mallocInt32(c));c*=8;e.length<c&&(m.free(e),e=m.mallocDouble(c))},sweepBipartite:function(b,a,q,w,m,n,t,v,f,k){var A=0,B=2*b;--b;for(var I=B-1;q<w;++q){var H=n[q],C=B*q;e[A++]=m[C+b];e[A++]=-(H+1);e[A++]=m[C+I];e[A++]=H}for(q=
t;q<v;++q)H=k[q]+l,w=B*q,e[A++]=f[w+b],e[A++]=-H,e[A++]=f[w+I],e[A++]=H;v=A>>>1;g(e,v);for(q=k=f=0;q<v;++q)if(A=e[2*q+1]|0,A>=l)A=A-l|0,p(r,u,k--,A);else if(0<=A)p(h,y,f--,A);else{if(A<=-l){A=-A-l|0;for(B=0;B<f;++B)if(w=a(h[B],A),void 0!==w)return w;B=u;w=k++;r[w]=A}else{A=-A-1|0;for(B=0;B<k;++B)if(w=a(A,r[B]),void 0!==w)return w;B=y;w=f++;h[w]=A}B[A]=w}},sweepComplete:function(b,a,q,l,m,f,t,k,D,G){var A=0,B=2*b;--b;for(var I=B-1;q<l;++q){var H=f[q]+1<<1,C=B*q;e[A++]=m[C+b];e[A++]=-H;e[A++]=m[C+I];
e[A++]=H}for(q=t;q<k;++q)H=G[q]+1<<1,l=B*q,e[A++]=D[l+b],e[A++]=-H|1,e[A++]=D[l+I],e[A++]=H|1;k=A>>>1;g(e,k);for(q=A=G=D=0;q<k;++q)if(B=e[2*q+1]|0,l=B&1,q<k-1&&B>>1===e[2*q+3]>>1&&(l=2,q+=1),0>B){B=-(B>>1)-1;for(m=0;m<A;++m)if(f=a(v[m],B),void 0!==f)return f;if(0!==l)for(m=0;m<D;++m)if(f=a(h[m],B),void 0!==f)return f;if(1!==l)for(m=0;m<G;++m)if(f=a(r[m],B),void 0!==f)return f;0===l?(l=y,m=D++,h[m]=B,l[B]=m):1===l?(l=u,m=G++,r[m]=B,l[B]=m):2===l&&(l=n,m=A++,v[m]=B,l[B]=m)}else B=(B>>1)-1,0===l?p(h,
y,D--,B):1===l?p(r,u,G--,B):2===l&&p(v,n,A--,B)},scanBipartite:function(b,a,q,w,m,n,t,v,r,f,u,k){var I=0,H=2*b,C=a+b,K=1,J=1;for(w?J=l:K=l;m<n;++m){var L=m+K,T=H*m;e[I++]=t[T+a];e[I++]=-L;e[I++]=t[T+C];e[I++]=L}for(m=r;m<f;++m)L=m+J,n=H*m,e[I++]=u[n+a],e[I++]=-L;f=I>>>1;g(e,f);for(m=I=0;m<f;++m)if(L=e[2*m+1]|0,0>L)if(L=-L,J=!1,L>=l?(J=!w,L-=l):(J=!!w,--L),J)J=y,n=I++,h[n]=L,J[L]=n;else a:for(J=k[L],L*=H,n=u[L+a+1],r=u[L+a+1+b],C=0;C<I;++C){var T=h[C],M=H*T;if(!(r<t[M+a+1]||t[M+a+1+b]<n)){for(var N=
a+2;N<b;++N)if(u[L+N+b]<t[M+N]||t[M+N+b]<u[L+N])continue a;T=v[T];T=w?q(J,T):q(T,J);if(void 0!==T)return T}}else p(h,y,I--,L-K)},scanComplete:function(b,a,q,w,m,n,t,v,p,r,f){for(var y=0,u=2*b,k=a+b;w<m;++w){var C=w+l,K=u*w;e[y++]=n[K+a];e[y++]=-C;e[y++]=n[K+k];e[y++]=C}for(w=v;w<p;++w)C=w+1,m=u*w,e[y++]=r[m+a],e[y++]=-C;p=y>>>1;g(e,p);for(w=y=0;w<p;++w)if(m=e[2*w+1]|0,0>m)if(C=-m,C>=l)h[y++]=C-l;else a:for(--C,m=f[C],C*=u,k=r[C+a+1],K=r[C+a+1+b],v=0;v<y;++v){var J=h[v],L=t[J];if(L===m)break;J*=u;
if(!(K<n[J+a+1]||n[J+a+1+b]<k)){for(var T=a+2;T<b;++T)if(r[C+T+b]<n[J+T]||n[J+T+b]<r[C+T])continue a;L=q(L,m);if(void 0!==L)return L}}else{C=m-l;for(v=y-1;0<=v;--v)if(h[v]===C){for(T=v+1;T<y;++T)h[T-1]=h[T];break}--y}}};var m=a("typedarray-pool"),b=a("bit-twiddle"),g=a("./sort"),l=268435456,h=m.mallocInt32(1024),y=m.mallocInt32(1024),r=m.mallocInt32(1024),u=m.mallocInt32(1024),v=m.mallocInt32(1024),n=m.mallocInt32(1024),e=m.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],
60:[function(a,f,k){(function(p){function m(){try{var b=new Uint8Array(1);b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(a){return!1}}function b(a){if(!(this instanceof b))return 1<arguments.length?new b(a,arguments[1]):new b(a);b.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0);if("number"===typeof a){var c;c=h(this,0>a?0:y(a)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var d=0;d<a;d++)c[d]=0;return c}if("string"===typeof a){c=this;
d=1<arguments.length?arguments[1]:"utf8";if("string"!==typeof d||""===d)d="utf8";var e=f(a,d)|0;c=h(c,e);c.write(a,d);return c}return g(this,a)}function g(a,c){if(b.isBuffer(c)){var d=a,e=y(c.length)|0,d=h(d,e);c.copy(d,0,0,e);return d}if(I(c)){for(var d=a,e=y(c.length)|0,d=h(d,e),g=0;g<e;g+=1)d[g]=c[g]&255;return d}if(null==c)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(c.buffer instanceof ArrayBuffer)return l(a,c);if(c instanceof
ArrayBuffer)return d=a,c.byteLength,b.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(c),d.__proto__=b.prototype):d=l(d,new Uint8Array(c)),d}if(c.length){d=a;e=y(c.length)|0;d=h(d,e);for(g=0;g<e;g+=1)d[g]=c[g]&255;return d}d=a;g=0;"Buffer"===c.type&&I(c.data)&&(e=c.data,g=y(e.length)|0);for(var d=h(d,g),q=0;q<g;q+=1)d[q]=e[q]&255;return d}function l(b,a){var c=y(a.length)|0;b=h(b,c);for(var d=0;d<c;d+=1)b[d]=a[d]&255;return b}function h(a,c){b.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(c),a.__proto__=b.prototype):
a.length=c;0!==c&&c<=b.poolSize>>>1&&(a.parent=H);return a}function y(a){if(a>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function r(a,c){if(!(this instanceof r))return new r(a,c);var d=new b(a,c);delete d.parent;return d}function f(b,a){"string"!==typeof b&&(b=""+b);var c=b.length;if(0===c)return 0;for(var d=!1;;)switch(a){case "ascii":case "binary":case "raw":case "raws":return c;
case "utf8":case "utf-8":return z(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return A.toByteArray(t(b)).length;default:if(d)return z(b).length;a=(""+a).toLowerCase();d=!0}}function v(b,a,c){var d=!1;a|=0;c=void 0===c||Infinity===c?this.length:c|0;b||(b="utf8");0>a&&(a=0);c>this.length&&(c=this.length);if(c<=a)return"";for(;;)switch(b){case "hex":b=a;a=c;c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;d="";for(c=b;c<a;c++)b=d,
d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return n(this,a,c);case "ascii":b="";for(c=Math.min(this.length,c);a<c;a++)b+=String.fromCharCode(this[a]&127);return b;case "binary":b="";for(c=Math.min(this.length,c);a<c;a++)b+=String.fromCharCode(this[a]);return b;case "base64":return a=0===a&&c===this.length?A.fromByteArray(this):A.fromByteArray(this.slice(a,c)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,c);c="";for(b=0;b<
a.length;b+=2)c+=String.fromCharCode(a[b]+256*a[b+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function n(b,a,c){c=Math.min(b.length,c);for(var d=[];a<c;){var e=b[a],g=null,h=239<e?4:223<e?3:191<e?2:1;if(a+h<=c){var q,l,w;switch(h){case 1:128>e&&(g=e);break;case 2:q=b[a+1];128===(q&192)&&(e=(e&31)<<6|q&63,127<e&&(g=e));break;case 3:q=b[a+1];l=b[a+2];128===(q&192)&&128===(l&192)&&(e=(e&15)<<12|(q&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(g=e));break;
case 4:q=b[a+1],l=b[a+2],w=b[a+3],128===(q&192)&&128===(l&192)&&128===(w&192)&&(e=(e&15)<<18|(q&63)<<12|(l&63)<<6|w&63,65535<e&&1114112>e&&(g=e))}}null===g?(g=65533,h=1):65535<g&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|g&1023);d.push(g);a+=h}b=d.length;if(b<=C)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=C));d=c}return d}function e(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>c)throw new RangeError("Trying to access beyond buffer length");
}function c(a,c,d,e,g,h){if(!b.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(c>g||c<h)throw new RangeError("value is out of bounds");if(d+e>a.length)throw new RangeError("index out of range");}function d(b,a,c,d){0>a&&(a=65535+a+1);for(var e=0,g=Math.min(b.length-c,2);e<g;e++)b[c+e]=(a&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function q(b,a,c,d){0>a&&(a=4294967295+a+1);for(var e=0,g=Math.min(b.length-c,4);e<g;e++)b[c+e]=a>>>8*(d?e:3-e)&255}function w(b,a,c,d,e,g){if(c+d>b.length)throw new RangeError("index out of range");
if(0>c)throw new RangeError("index out of range");}function x(b,a,c,d,e){e||w(b,a,c,4,3.4028234663852886E38,-3.4028234663852886E38);B.write(b,a,c,d,23,4);return c+4}function E(b,a,c,d,e){e||w(b,a,c,8,1.7976931348623157E308,-1.7976931348623157E308);B.write(b,a,c,d,52,8);return c+8}function t(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(K,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function z(b,a){a=a||Infinity;for(var c,d=b.length,e=null,g=[],h=0;h<d;h++){c=b.charCodeAt(h);
if(55295<c&&57344>c){if(!e){if(56319<c){-1<(a-=3)&&g.push(239,191,189);continue}else if(h+1===d){-1<(a-=3)&&g.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(a-=3)&&g.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(a-=3)&&g.push(239,191,189);e=null;if(128>c){if(0>--a)break;g.push(c)}else if(2048>c){if(0>(a-=2))break;g.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;g.push(c>>18|
240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function D(b){for(var a=[],c=0;c<b.length;c++)a.push(b.charCodeAt(c)&255);return a}function G(b,a,c,d){for(var e=0;e<d&&!(e+c>=a.length||e>=b.length);e++)a[e+c]=b[e];return e}var A=a("base64-js"),B=a("ieee754"),I=a("isarray");k.Buffer=b;k.SlowBuffer=r;k.INSPECT_MAX_BYTES=50;b.poolSize=8192;var H={};b.TYPED_ARRAY_SUPPORT=void 0!==p.TYPED_ARRAY_SUPPORT?p.TYPED_ARRAY_SUPPORT:m();b._augment=function(a){a.__proto__=
b.prototype;return a};b.TYPED_ARRAY_SUPPORT?(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.species,{value:null,configurable:!0}))):(b.prototype.length=void 0,b.prototype.parent=void 0);b.isBuffer=function(b){return!(null==b||!b._isBuffer)};b.compare=function(a,c){if(!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError("Arguments must be Buffers");
if(a===c)return 0;for(var d=a.length,e=c.length,g=0,h=Math.min(d,e);g<h;++g)if(a[g]!==c[g]){d=a[g];e=c[g];break}return d<e?-1:e<d?1:0};b.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(a,c){if(!I(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new b(0);var d;if(void 0===
c)for(d=c=0;d<a.length;d++)c+=a[d].length;var e=new b(c),g=0;for(d=0;d<a.length;d++){var h=a[d];h.copy(e,g);g+=h.length}return e};b.byteLength=f;b.prototype._isBuffer=!0;b.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?n(this,0,b):v.apply(this,arguments)};b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var b="",a=k.INSPECT_MAX_BYTES;0<this.length&&
(b=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(b+=" ... "));return"<Buffer "+b+">"};b.prototype.compare=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return b.compare(this,a)};b.prototype.indexOf=function(a,c){function d(b,a,c){for(var e=-1,g=0;c+g<b.length;g++)if(b[c+g]===a[-1===e?0:g-e]){if(-1===e&&(e=g),g-e+1===a.length)return c+e}else e=-1;return-1}2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c>>=0;if(0===this.length||c>=this.length)return-1;
0>c&&(c=Math.max(this.length+c,0));if("string"===typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,c);if(b.isBuffer(a))return d(this,a,c);if("number"===typeof a)return b.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,c):d(this,[a],c);throw new TypeError("val must be string, number or Buffer");};b.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=this.length,a=0;else if(void 0===c&&"string"===typeof a)d=a,c=this.length,
a=0;else if(isFinite(a))a|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=a;a=c|0;c=e}e=this.length-a;if(void 0===c||c>e)c=e;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=d)):c=d;d=b.length;if(0!==d%2)throw Error("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;d++){e=parseInt(b.substr(2*d,2),16);if(isNaN(e))throw Error("Invalid hex string");
this[a+d]=e}return d;case "utf8":case "utf-8":return G(z(b,this.length-a),this,a,c);case "ascii":return G(D(b),this,a,c);case "binary":return G(D(b),this,a,c);case "base64":return G(A.toByteArray(t(b)),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-a;for(var g=void 0,g=e=void 0,h=[],q=0;q<b.length&&!(0>(d-=2));q++)g=b.charCodeAt(q),e=g>>8,g%=256,h.push(g),h.push(e);return G(h,this,a,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();
e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;b.prototype.slice=function(a,c){var d=this.length;a=~~a;c=void 0===c?d:~~c;0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<a&&(c=a);if(b.TYPED_ARRAY_SUPPORT)d=this.subarray(a,c),d.__proto__=b.prototype;else for(var e=c-a,d=new b(e,void 0),g=0;g<e;g++)d[g]=this[g+a];d.length&&(d.parent=this.parent||this);return d};b.prototype.readUIntLE=function(b,a,c){b|=0;
a|=0;c||e(b,a,this.length);c=this[b];for(var d=1,g=0;++g<a&&(d*=256);)c+=this[b+g]*d;return c};b.prototype.readUIntBE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};b.prototype.readUInt8=function(b,a){a||e(b,1,this.length);return this[b]};b.prototype.readUInt16LE=function(b,a){a||e(b,2,this.length);return this[b]|this[b+1]<<8};b.prototype.readUInt16BE=function(b,a){a||e(b,2,this.length);return this[b]<<8|this[b+1]};b.prototype.readUInt32LE=
function(b,a){a||e(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};b.prototype.readUInt32BE=function(b,a){a||e(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};b.prototype.readIntLE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=this[b];for(var d=1,g=0;++g<a&&(d*=256);)c+=this[b+g]*d;c>=128*d&&(c-=Math.pow(2,8*a));return c};b.prototype.readIntBE=function(b,a,c){b|=0;a|=0;c||e(b,a,this.length);c=a;for(var d=1,g=this[b+--c];0<c&&(d*=
256);)g+=this[b+--c]*d;g>=128*d&&(g-=Math.pow(2,8*a));return g};b.prototype.readInt8=function(b,a){a||e(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};b.prototype.readInt16LE=function(b,a){a||e(b,2,this.length);var c=this[b]|this[b+1]<<8;return c&32768?c|4294901760:c};b.prototype.readInt16BE=function(b,a){a||e(b,2,this.length);var c=this[b+1]|this[b]<<8;return c&32768?c|4294901760:c};b.prototype.readInt32LE=function(b,a){a||e(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<
16|this[b+3]<<24};b.prototype.readInt32BE=function(b,a){a||e(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};b.prototype.readFloatLE=function(b,a){a||e(b,4,this.length);return B.read(this,b,!0,23,4)};b.prototype.readFloatBE=function(b,a){a||e(b,4,this.length);return B.read(this,b,!1,23,4)};b.prototype.readDoubleLE=function(b,a){a||e(b,8,this.length);return B.read(this,b,!0,52,8)};b.prototype.readDoubleBE=function(b,a){a||e(b,8,this.length);return B.read(this,b,!1,52,8)};
b.prototype.writeUIntLE=function(b,a,d,e){b=+b;a|=0;d|=0;e||c(this,b,a,d,Math.pow(2,8*d),0);e=1;var g=0;for(this[a]=b&255;++g<d&&(e*=256);)this[a+g]=b/e&255;return a+d};b.prototype.writeUIntBE=function(b,a,d,e){b=+b;a|=0;d|=0;e||c(this,b,a,d,Math.pow(2,8*d),0);e=d-1;var g=1;for(this[a+e]=b&255;0<=--e&&(g*=256);)this[a+e]=b/g&255;return a+d};b.prototype.writeUInt8=function(a,d,e){a=+a;d|=0;e||c(this,a,d,1,255,0);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[d]=a&255;return d+1};b.prototype.writeUInt16LE=
function(a,e,g){a=+a;e|=0;g||c(this,a,e,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[e]=a&255,this[e+1]=a>>>8):d(this,a,e,!0);return e+2};b.prototype.writeUInt16BE=function(a,e,g){a=+a;e|=0;g||c(this,a,e,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[e]=a>>>8,this[e+1]=a&255):d(this,a,e,!1);return e+2};b.prototype.writeUInt32LE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d+3]=a>>>24,this[d+2]=a>>>16,this[d+1]=a>>>8,this[d]=a&255):q(this,a,d,!0);return d+4};b.prototype.writeUInt32BE=
function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):q(this,a,d,!1);return d+4};b.prototype.writeIntLE=function(b,a,d,e){b=+b;a|=0;e||(e=Math.pow(2,8*d-1),c(this,b,a,d,e-1,-e));e=0;var g=1,h=0>b?1:0;for(this[a]=b&255;++e<d&&(g*=256);)this[a+e]=(b/g>>0)-h&255;return a+d};b.prototype.writeIntBE=function(b,a,d,e){b=+b;a|=0;e||(e=Math.pow(2,8*d-1),c(this,b,a,d,e-1,-e));e=d-1;var g=1,h=0>b?1:0;for(this[a+e]=b&255;0<=
--e&&(g*=256);)this[a+e]=(b/g>>0)-h&255;return a+d};b.prototype.writeInt8=function(a,d,e){a=+a;d|=0;e||c(this,a,d,1,127,-128);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[d]=a&255;return d+1};b.prototype.writeInt16LE=function(a,e,g){a=+a;e|=0;g||c(this,a,e,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[e]=a&255,this[e+1]=a>>>8):d(this,a,e,!0);return e+2};b.prototype.writeInt16BE=function(a,e,g){a=+a;e|=0;g||c(this,a,e,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[e]=a>>>8,this[e+1]=a&
255):d(this,a,e,!1);return e+2};b.prototype.writeInt32LE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[d]=a&255,this[d+1]=a>>>8,this[d+2]=a>>>16,this[d+3]=a>>>24):q(this,a,d,!0);return d+4};b.prototype.writeInt32BE=function(a,d,e){a=+a;d|=0;e||c(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[d]=a>>>24,this[d+1]=a>>>16,this[d+2]=a>>>8,this[d+3]=a&255):q(this,a,d,!1);return d+4};b.prototype.writeFloatLE=function(b,
a,c){return x(this,b,a,!0,c)};b.prototype.writeFloatBE=function(b,a,c){return x(this,b,a,!1,c)};b.prototype.writeDoubleLE=function(b,a,c){return E(this,b,a,!0,c)};b.prototype.writeDoubleBE=function(b,a,c){return E(this,b,a,!1,c)};b.prototype.copy=function(a,c,d,e){d||(d=0);e||0===e||(e=this.length);c>=a.length&&(c=a.length);c||(c=0);0<e&&e<d&&(e=d);if(e===d||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");
if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-c<e-d&&(e=a.length-c+d);var g=e-d;if(this===a&&d<c&&c<e)for(e=g-1;0<=e;e--)a[e+c]=this[e+d];else if(1E3>g||!b.TYPED_ARRAY_SUPPORT)for(e=0;e<g;e++)a[e+c]=this[e+d];else Uint8Array.prototype.set.call(a,this.subarray(d,d+g),c);return g};b.prototype.fill=function(b,a,c){b||(b=0);a||(a=0);c||(c=this.length);if(c<a)throw new RangeError("end < start");if(c!==a&&0!==this.length){if(0>a||a>=this.length)throw new RangeError("start out of bounds");
if(0>c||c>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;a<c;a++)this[a]=b;else{b=z(b.toString());for(var d=b.length;a<c;a++)this[a]=b[a%d]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:82,isarray:61}],61:[function(a,f,k){var p={}.toString;f.exports=Array.isArray||function(a){return"[object Array]"==p.call(a)}},{}],62:[function(a,
f,k){function p(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function m(b,a){return b[0]-a[0]||b[1]-a[1]}function b(b,a,g){return a in b?b[a]:g}var g=a("./lib/monotone"),l=a("./lib/triangulation"),h=a("./lib/delaunay"),y=a("./lib/filter");f.exports=function(a,f,v){Array.isArray(f)?(v=v||{},f=f||[]):(v=f||{},f=[]);var n=!!b(v,"delaunay",!0),e=!!b(v,"interior",!0),c=!!b(v,"exterior",!0);v=!!b(v,"infinity",!1);if(!e&&!c||0===a.length)return[];var d=g(a,f);if(n||e!==c||v){f=l(a.length,f.map(p).sort(m));
for(var q=0;q<d.length;++q){var w=d[q];f.addTriangle(w[0],w[1],w[2])}n&&h(a,f);return c?e?v?y(f,0,v):f.cells():y(f,1,v):y(f,-1)}return d}},{"./lib/delaunay":63,"./lib/filter":64,"./lib/monotone":65,"./lib/triangulation":66}],63:[function(a,f,k){function p(b,a,l,h,p,f){var u=a.opposite(h,p);if(!(0>u)){if(p<h){var v=h;h=p;p=v;v=f;f=u;u=v}a.isConstraint(h,p)||0>m(b[h],b[p],b[f],b[u])&&l.push(h,p)}}var m=a("robust-in-sphere")[4];a("binary-search-bounds");f.exports=function(b,a){for(var l=[],h=b.length,
f=a.stars,r=0;r<h;++r)for(var u=f[r],v=1;v<u.length;v+=2){var n=u[v];if(!(n<r||a.isConstraint(r,n))){for(var e=u[v-1],c=-1,d=1;d<u.length;d+=2)if(u[d-1]===n){c=u[d];break}0>c||0>m(b[r],b[n],b[e],b[c])&&l.push(r,n)}}for(;0<l.length;){n=l.pop();r=l.pop();c=e=-1;u=f[r];for(h=1;h<u.length;h+=2)v=u[h-1],d=u[h],v===n?c=d:d===n&&(e=v);0>e||0>c||0<=m(b[r],b[n],b[e],b[c])||(a.flip(r,n),p(b,a,l,e,r,c),p(b,a,l,r,c,e),p(b,a,l,c,n,e),p(b,a,l,n,e,c))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],64:[function(a,
f,k){function p(b,a,h,m,p,f,v){this.cells=b;this.neighbor=a;this.flags=m;this.constraint=h;this.active=p;this.next=f;this.boundary=v}function m(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var b=a("binary-search-bounds");f.exports=function(b,a,h){for(var f=b.cells(),r=f.length,u=0;u<r;++u){var v=f[u],n=v[0],e=v[1],c=v[2];e<c?e<n&&(v[0]=e,v[1]=c,v[2]=n):c<n&&(v[0]=c,v[1]=n,v[2]=e)}f.sort(m);for(var d=Array(r),u=0;u<d.length;++u)d[u]=0;var q=[],w=[],x=Array(3*r),k=Array(3*r),t=null;h&&(t=[]);c=new p(f,
x,k,d,q,w,t);for(u=0;u<r;++u)for(var v=f[u],z=0;3>z;++z){var n=v[z],e=v[(z+1)%3],D=x[3*u+z]=c.locate(e,n,b.opposite(e,n)),G=k[3*u+z]=b.isConstraint(n,e);0>D&&(G?w.push(u):(q.push(u),d[u]=1),h&&t.push([e,n,-1]))}if(0===a)return h?c.cells.concat(c.boundary):c.cells;r=1;u=c.active;v=c.next;b=c.flags;f=c.cells;n=c.constraint;for(e=c.neighbor;0<u.length||0<v.length;){for(;0<u.length;)if(d=u.pop(),b[d]!==-r)for(b[d]=r,q=0;3>q;++q)w=e[3*d+q],0<=w&&0===b[w]&&(n[3*d+q]?v.push(w):(u.push(w),b[w]=r));d=v;v=
u;u=d;v.length=0;r=-r}for(u=r=0;u<f.length;++u)b[u]===a&&(f[r++]=f[u]);f.length=r;return h?f.concat(c.boundary):f};p.prototype.locate=function(){var a=[0,0,0];return function(l,h,f){var p=l,u=h,v=f;h<f?h<l&&(p=h,u=f,v=l):f<l&&(p=f,u=l,v=h);if(0>p)return-1;a[0]=p;a[1]=u;a[2]=v;return b.eq(this.cells,a,m)}}()},{"binary-search-bounds":51}],65:[function(a,f,k){function p(b,a,g,h,e){this.a=b;this.b=a;this.idx=g;this.lowerIds=h;this.upperIds=e}function m(b,a,g,h){this.a=b;this.b=a;this.type=g;this.idx=
h}function b(b,a){var g=b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return g||0!==b.type&&(g=y(b.a,b.b,a.b))?g:b.idx-a.idx}function g(b,a){return y(b.a,b.b,a)}function l(b,a){var g;return(g=b.a[0]<a.a[0]?y(b.a,b.b,a.a):y(a.b,a.a,b.a))?g:(g=a.b[0]<b.b[0]?y(b.a,b.b,a.b):y(a.b,a.a,b.b))||b.idx-a.idx}var h=a("binary-search-bounds"),y=a("robust-orientation")[3];f.exports=function(a,f){for(var v=a.length,n=f.length,e=[],c=0;c<v;++c)e.push(new m(a[c],null,0,c));for(c=0;c<n;++c){var d=f[c],v=a[d[0]],d=a[d[1]];
v[0]<d[0]?e.push(new m(v,d,2,c),new m(d,v,1,c)):v[0]>d[0]&&e.push(new m(d,v,2,c),new m(v,d,1,c))}e.sort(b);c=e[0].a[0]-(1+Math.abs(e[0].a[0]))*Math.pow(2,-52);n=[new p([c,1],[c,0],-1,[],[],[],[])];v=[];c=0;for(d=e.length;c<d;++c){var q=e[c],w=q.type;if(0===w)for(var w=v,x=n,k=a,t=q.a,q=q.idx,z=h.lt(x,t,g),D=h.gt(x,t,g);z<D;++z){for(var G=x[z],A=G.lowerIds,B=A.length;1<B&&0<y(k[A[B-2]],k[A[B-1]],t);)w.push([A[B-1],A[B-2],q]),--B;A.length=B;A.push(q);G=G.upperIds;for(B=G.length;1<B&&0>y(k[G[B-2]],k[G[B-
1]],t);)w.push([G[B-2],G[B-1],q]),--B;G.length=B;G.push(q)}else 2===w?(w=n,x=q,k=h.le(w,x,l),t=w[k],q=t.upperIds,D=q[q.length-1],t.upperIds=[D],w.splice(k+1,0,new p(x.a,x.b,x.idx,[D],q))):(w=n,x=q,k=x.a,x.a=x.b,x.b=k,x=h.eq(w,x,l),w[x-1].upperIds=w[x].upperIds,w.splice(x,1))}return v}},{"binary-search-bounds":51,"robust-orientation":103}],66:[function(a,f,k){function p(b,a){this.stars=b;this.edges=a}function m(b,a,h){for(var m=1,f=b.length;m<f;m+=2)if(b[m-1]===a&&b[m]===h){b[m-1]=b[f-2];b[m]=b[f-
1];b.length=f-2;break}}var b=a("binary-search-bounds");f.exports=function(b,a){for(var h=Array(b),m=0;m<b;++m)h[m]=[];return new p(h,a)};a=p.prototype;a.isConstraint=function(){function a(b,g){return b[0]-g[0]||b[1]-g[1]}var l=[0,0];return function(h,m){l[0]=Math.min(h,m);l[1]=Math.max(h,m);return 0<=b.eq(this.edges,l,a)}}();a.removeTriangle=function(b,a,h){var f=this.stars;m(f[b],a,h);m(f[a],h,b);m(f[h],b,a)};a.addTriangle=function(b,a,h){var m=this.stars;m[b].push(a,h);m[a].push(h,b);m[h].push(b,
a)};a.opposite=function(b,a){for(var h=this.stars[a],m=1,f=h.length;m<f;m+=2)if(h[m]===b)return h[m-1];return-1};a.flip=function(b,a){var h=this.opposite(b,a),m=this.opposite(a,b);this.removeTriangle(b,a,h);this.removeTriangle(a,b,m);this.addTriangle(b,m,h);this.addTriangle(a,h,m)};a.edges=function(){for(var b=this.stars,a=[],h=0,m=b.length;h<m;++h)for(var f=b[h],p=0,v=f.length;p<v;p+=2)a.push([f[p],f[p+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],h=0,m=b.length;h<m;++h)for(var f=b[h],
p=0,v=f.length;p<v;p+=2){var n=f[p],e=f[p+1];h<Math.min(n,e)&&a.push([h,n,e])}return a}},{"binary-search-bounds":51}],67:[function(a,f,k){function p(b){var a=d(b);b=c(e(a),b);return 0>b?[a,w(a,Infinity)]:0<b?[w(a,-Infinity),a]:[a,a]}function m(b,a,c){var d=[];v(c,function(c,e){var g=a[c],h=a[e];g[0]!==h[0]&&g[0]!==h[1]&&g[1]!==h[0]&&g[1]!==h[1]&&n(b[g[0]],b[g[1]],b[h[0]],b[h[1]])&&d.push([c,e])});return d}function b(b,a,c,d){var e=[];v(c,d,function(c,d){var g=a[c];if(g[0]!==d&&g[1]!==d){var h=b[d];
n(b[g[0]],b[g[1]],h,h)&&e.push([c,d])}});return e}function g(b,a,d,g,h){function l(a){if(a>=b.length)return m[a-b.length];a=b[a];return[e(a[0]),e(a[1])]}for(var m=[],w=0;w<d.length;++w){var n=d[w],f=n[0],n=n[1],p=a[f],v=a[n];if(p=x(q(b[p[0]]),q(b[p[1]]),q(b[v[0]]),q(b[v[1]])))v=m.length+b.length,m.push(p),g.push([f,v],[n,v])}g.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];var d=l(b[1]),e=l(a[1]);return c(d[0],e[0])||c(d[1],e[1])});for(w=g.length-1;0<=w;--w){n=g[w];f=n[0];p=a[f];v=p[0];d=p[1];
var r=b[v],k=b[d];0>(r[0]-k[0]||r[1]-k[1])&&(r=v,v=d,d=r);p[0]=v;var v=p[1]=n[1],y;for(h&&(y=p[2]);0<w&&g[w-1][0]===f;)n=g[--w],n=n[1],h?a.push([v,n,y]):a.push([v,n]),v=n;h?a.push([v,d,y]):a.push([v,d])}return m}function l(b,a,c){for(var e=b.length+a.length,g=new u(e),h=0;h<a.length;++h){var q=a[h],l=p(q[0]),m=p(q[1]);c.push([l[0],m[0],l[1],m[1]]);b.push([d(q[0]),d(q[1])])}v(c,function(b,a){g.link(b,a)});a=0;c=!0;q=Array(e);for(h=0;h<e;++h)g.find(h)===h?(q[h]=a,b[a++]=b[h]):(c=!1,q[h]=-1);b.length=
a;if(c)return null;for(h=0;h<e;++h)0>q[h]&&(q[h]=q[g.find(h)]);return q}function h(b,a){return b[0]-a[0]||b[1]-a[1]}function y(b,a){var c=b[0]-a[0]||b[1]-a[1];return c?c:b[2]<a[2]?-1:b[2]>a[2]?1:0}function r(a,c,d){for(var e=Array(c.length),q=0;q<c.length;++q){var w=c[q],n=a[w[0]],w=a[w[1]];e[q]=[Math.min(n[0],w[0]),Math.min(n[1],w[1]),Math.max(n[0],w[0]),Math.max(n[1],w[1])]}q=m(a,c,e);n=Array(a.length);for(w=0;w<a.length;++w){var f=a[w];n[w]=[f[0],f[1],f[0],f[1]]}e=b(a,c,e,n);w=g(a,c,q,e,d);a=l(a,
w,n);if(0!==c.length){if(a)for(n=0;n<c.length;++n){var w=c[n],f=a[w[0]],p=a[w[1]];w[0]=Math.min(f,p);w[1]=Math.max(f,p)}else for(n=0;n<c.length;++n)w=c[n],f=w[0],p=w[1],w[0]=Math.min(f,p),w[1]=Math.max(f,p);d?c.sort(y):c.sort(h);for(n=w=1;n<c.length;++n)if(f=c[n-1],p=c[n],p[0]!==f[0]||p[1]!==f[1]||d&&p[2]!==f[2])c[w++]=p;c.length=w}return a?!0:0<q.length||0<e.length}f.exports=function(b,a,c){var d=!1,e;if(c){e=a;for(var g=Array(a.length),h=0;h<a.length;++h){var q=a[h];g[h]=[q[0],q[1],c[h]]}a=g}for(;r(b,
a,!!c);)d=!0;if(c&&d)for(e.length=0,h=c.length=0;h<a.length;++h)q=a[h],e.push([q[0],q[1]]),c.push(q[2]);return d};var u=a("union-find"),v=a("box-intersect");a("compare-cell");var n=a("robust-segment-intersect"),e=a("big-rat"),c=a("big-rat/cmp"),d=a("big-rat/to-float"),q=a("rat-vec"),w=a("nextafter"),x=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":68,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":71,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":69}],68:[function(a,f,k){function p(b,a){return g(m(b[0],a[1]),m(b[1],a[0]))}f.exports=function(a,g,m,e){g=h(g,a);var c=h(e,m);e=p(g,c);if(0===l(e))return null;m=h(a,m);m=p(c,m);m=b(m,e);return y(a,r(g,m))};var m=a("big-rat/mul"),b=a("big-rat/div"),g=a("big-rat/sub"),l=a("big-rat/sign"),h=a("rat-vec/sub"),y=a("rat-vec/add"),r=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],69:[function(a,f,k){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";f.exports=p;a=p.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var b=a,g=this.roots;g[a]!==a;)a=g[a];for(;g[b]!==a;){var l=g[b];g[b]=a;b=l}return a};a.link=function(a,b){var g=this.find(a),
l=this.find(b);if(g!==l){var h=this.ranks,f=this.roots,p=h[g],k=h[l];p<k?f[g]=l:k<p?f[l]=g:(f[l]=g,++h[g])}}},{}],70:[function(a,f,k){function p(b,a,m){var f=g(b[0],-a[0]);b=g(b[1],-a[1]);var n=g(m[0],-a[0]);a=g(m[1],-a[1]);f=h(l(f,n),l(b,a));return 0<=f[f.length-1]}f.exports=function(a,g,h,l){var n=m(g,h,l);if(0===n){var n=b(m(a,g,h)),e=b(m(a,g,l));return n===e?0===n&&(h=p(a,g,h),a=p(a,g,l),h!==a)?h?1:-1:0:0===e?0<n?-1:p(a,g,l)?-1:1:0===n?0<e?1:p(a,g,h)?1:-1:b(e-n)}e=m(a,g,h);return 0<e?0<n&&0<m(a,
g,l)?1:-1:0>e?0<n||0<m(a,g,l)?1:-1:0<m(a,g,l)?1:p(a,g,h)?1:-1};var m=a("robust-orientation"),b=a("signum"),g=a("two-sum"),l=a("robust-product"),h=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":119}],71:[function(a,f,k){function p(b,a){return b-a}f.exports=function(b,a){var l=b.length,h=b.length-a.length;if(h)return h;switch(l){case 0:return 0;case 1:return b[0]-a[0];case 2:return b[0]+b[1]-a[0]-a[1]||m(b[0],b[1])-m(a[0],a[1]);case 3:var l=b[0]+
b[1],f=a[0]+a[1];if(h=l+b[2]-(f+a[2]))return h;var h=m(b[0],b[1]),k=m(a[0],a[1]);return m(h,b[2])-m(k,a[2])||m(h+b[2],l)-m(k+a[2],f);case 4:var h=b[0],l=b[1],f=b[2],k=b[3],u=a[0],v=a[1],n=a[2],e=a[3];return h+l+f+k-(u+v+n+e)||m(h,l,f,k)-m(u,v,n,e,u)||m(h+l,h+f,h+k,l+f,l+k,f+k)-m(u+v,u+n,u+e,v+n,v+e,n+e)||m(h+l+f,h+l+k,h+f+k,l+f+k)-m(u+v+n,u+v+e,u+n+e,v+n+e);default:f=b.slice().sort(p);k=a.slice().sort(p);for(u=0;u<l;++u)if(h=f[u]-k[u])return h;return 0}};var m=Math.min},{}],72:[function(a,f,k){function p(){this.argTypes=
[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var m=a("./lib/thunk.js");f.exports=function(b){var a=new p;a.pre=b.pre;a.body=b.body;a.post=b.post;var l=b.args.slice(0);a.argTypes=l;for(var h=0;h<l.length;++h){var f=l[h];if("array"===f||"object"===typeof f&&f.blockIndices){a.argTypes[h]="array";a.arrayArgs.push(h);a.arrayBlockIndices.push(f.blockIndices?
f.blockIndices:0);a.shimArgs.push("array"+h);if(h<a.pre.args.length&&0<a.pre.args[h].count)throw Error("cwise: pre() block may not reference array args");if(h<a.post.args.length&&0<a.post.args[h].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===f)a.scalarArgs.push(h),a.shimArgs.push("scalar"+h);else if("index"===f){a.indexArgs.push(h);if(h<a.pre.args.length&&0<a.pre.args[h].count)throw Error("cwise: pre() block may not reference array index");if(h<a.body.args.length&&
a.body.args[h].lvalue)throw Error("cwise: body() block may not write to array index");if(h<a.post.args.length&&0<a.post.args[h].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===f){a.shapeArgs.push(h);if(h<a.pre.args.length&&a.pre.args[h].lvalue)throw Error("cwise: pre() block may not write to array shape");if(h<a.body.args.length&&a.body.args[h].lvalue)throw Error("cwise: body() block may not write to array shape");if(h<a.post.args.length&&a.post.args[h].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof f&&f.offset)a.argTypes[h]="offset",a.offsetArgs.push({array:f.array,offset:f.offset}),a.offsetArgIndex.push(h);else throw Error("cwise: Unknown argument type "+l[h]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>l.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>l.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>l.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!b.printCode||!!b.debug;a.funcName=b.funcName||"cwise";a.blockSize=b.blockSize||64;return m(a)}},{"./lib/thunk.js":74}],73:[function(a,f,k){function p(b,a,g){var l=b.length,m=a.arrayArgs.length;a=0<a.indexArgs.length;var n=[],e=[],c=0,d=0,q,w;for(q=0;q<l;++q)e.push(["i",q,"=0"].join(""));for(w=0;w<m;++w)for(q=0;q<l;++q)d=c,c=b[q],0===q?e.push(["d",w,"s",q,"=t",w,"p",c].join("")):e.push(["d",w,"s",q,"=(t",w,"p",c,"-s",d,"*t",w,"p",d,")"].join(""));n.push("var "+e.join(","));for(q=l-1;0<=q;--q)c=
b[q],n.push(["for(i",q,"=0;i",q,"<s",c,";++i",q,"){"].join(""));n.push(g);for(q=0;q<l;++q){d=c;c=b[q];for(w=0;w<m;++w)n.push(["p",w,"+=d",w,"s",q].join(""));a&&(0<q&&n.push(["index[",d,"]-=s",d].join("")),n.push(["++index[",c,"]"].join("")));n.push("}")}return n.join("\n")}function m(b,a,g,l){for(var m=a.length,n=g.arrayArgs.length,e=g.blockSize,c=0<g.indexArgs.length,d=[],q=0;q<n;++q)d.push(["var offset",q,"=p",q].join(""));for(q=b;q<m;++q)d.push(["for(var j"+q+"=SS[",a[q],"]|0;j",q,">0;){"].join("")),
d.push(["if(j",q,"<",e,"){"].join("")),d.push(["s",a[q],"=j",q].join("")),d.push(["j",q,"=0"].join("")),d.push(["}else{s",a[q],"=",e].join("")),d.push(["j",q,"-=",e,"}"].join("")),c&&d.push(["index[",a[q],"]=j",q].join(""));for(q=0;q<n;++q){e=["offset"+q];for(c=b;c<m;++c)e.push(["j",c,"*t",q,"p",a[c]].join(""));d.push(["p",q,"=(",e.join("+"),")"].join(""))}d.push(p(a,g,l));for(q=b;q<m;++q)d.push("}");return d.join("\n")}function b(b,a,g){for(var l=b.body,m=[],n=[],e=0;e<b.args.length;++e){var c=b.args[e];
if(!(0>=c.count)){var d=new RegExp(c.name,"g"),q="",w=a.arrayArgs.indexOf(e);switch(a.argTypes[e]){case "offset":var f=a.offsetArgIndex.indexOf(e),w=a.offsetArgs[f].array,q="+q"+f;case "array":var q="p"+w+q,p="l"+e,f="a"+w;if(0===a.arrayBlockIndices[w])1===c.count?"generic"===g[w]?c.lvalue?(m.push(["var ",p,"=",f,".get(",q,")"].join("")),l=l.replace(d,p),n.push([f,".set(",q,",",p,")"].join(""))):l=l.replace(d,[f,".get(",q,")"].join("")):l=l.replace(d,[f,"[",q,"]"].join("")):"generic"===g[w]?(m.push(["var ",
p,"=",f,".get(",q,")"].join("")),l=l.replace(d,p),c.lvalue&&n.push([f,".set(",q,",",p,")"].join(""))):(m.push(["var ",p,"=",f,"[",q,"]"].join("")),l=l.replace(d,p),c.lvalue&&n.push([f,"[",q,"]=",p].join("")));else{d=[c.name];c=[q];for(q=0;q<Math.abs(a.arrayBlockIndices[w]);q++)d.push("\\s*\\[([^\\]]+)\\]"),c.push("$"+(q+1)+"*t"+w+"b"+q);d=new RegExp(d.join(""),"g");q=c.join("+");if("generic"===g[w])throw Error("cwise: Generic arrays not supported in combination with blocks!");l=l.replace(d,[f,"[",
q,"]"].join(""))}break;case "scalar":l=l.replace(d,"Y"+a.scalarArgs.indexOf(e));break;case "index":l=l.replace(d,"index");break;case "shape":l=l.replace(d,"shape")}}}return[m.join("\n"),l,n.join("\n")].join("\n").trim()}function g(b){for(var a=Array(b.length),g=!0,l=0;l<b.length;++l){var m=b[l],f=m.match(/\d+/),f=f?f[0]:"";0===m.charAt(0)?a[l]="u"+m.charAt(1)+f:a[l]=m.charAt(0)+f;0<l&&(g=g&&a[l]===a[l-1])}return g?a[0]:a.join("")}var l=a("uniq");f.exports=function(a,f){for(var k=f[1].length-Math.abs(a.arrayBlockIndices[0])|
0,u=Array(a.arrayArgs.length),v=Array(a.arrayArgs.length),n=0;n<a.arrayArgs.length;++n)v[n]=f[2*n],u[n]=f[2*n+1];for(var e=[],c=[],d=[],q=[],w=[],n=0;n<a.arrayArgs.length;++n){0>a.arrayBlockIndices[n]?(d.push(0),q.push(k),e.push(k),c.push(k+a.arrayBlockIndices[n])):(d.push(a.arrayBlockIndices[n]),q.push(a.arrayBlockIndices[n]+k),e.push(0),c.push(a.arrayBlockIndices[n]));for(var x=[],E=0;E<u[n].length;E++)d[n]<=u[n][E]&&u[n][E]<q[n]&&x.push(u[n][E]-d[n]);w.push(x)}c=["SS"];q=["'use strict'"];x=[];
for(E=0;E<k;++E)x.push(["s",E,"=SS[",E,"]"].join(""));for(n=0;n<a.arrayArgs.length;++n){c.push("a"+n);c.push("t"+n);c.push("p"+n);for(E=0;E<k;++E)x.push(["t",n,"p",E,"=t",n,"[",d[n]+E,"]"].join(""));for(E=0;E<Math.abs(a.arrayBlockIndices[n]);++E)x.push(["t",n,"b",E,"=t",n,"[",e[n]+E,"]"].join(""))}for(n=0;n<a.scalarArgs.length;++n)c.push("Y"+n);0<a.shapeArgs.length&&x.push("shape=SS.slice(0)");if(0<a.indexArgs.length){E=Array(k);for(n=0;n<k;++n)E[n]="0";x.push(["index=[",E.join(","),"]"].join(""))}for(n=
0;n<a.offsetArgs.length;++n){e=a.offsetArgs[n];d=[];for(E=0;E<e.offset.length;++E)0!==e.offset[E]&&(1===e.offset[E]?d.push(["t",e.array,"p",E].join("")):d.push([e.offset[E],"*t",e.array,"p",E].join("")));0===d.length?x.push("q"+n+"=0"):x.push(["q",n,"=",d.join("+")].join(""))}n=l([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));x=x.concat(n);q.push("var "+x.join(","));for(n=0;n<a.arrayArgs.length;++n)q.push("p"+n+"|=0");3<a.pre.body.length&&q.push(b(a.pre,a,v));n=b(a.body,
a,v);a:for(E=0,x=w[0].length;E<x;){for(e=1;e<w.length;++e)if(w[e][E]!==w[0][E])break a;++E}E<k?q.push(m(E,w[0],a,n)):q.push(p(w[0],a,n));3<a.post.body.length&&q.push(b(a.post,a,v));a.debug&&console.log("-----Generated cwise routine for ",f,":\n"+q.join("\n")+"\n----------");k=[a.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",E,g(v)].join("");return(new Function(["function ",k,"(",c.join(","),"){",q.join("\n"),"} return ",k].join("")))()}},{uniq:123}],74:[function(a,f,k){var p=a("./compile.js");
f.exports=function(a){var b=["'use strict'","var CACHED={}"],g=[];b.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var l=[],h=[],f=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],k=[],u=[],v=0;v<a.arrayArgs.length;++v){var n=a.arrayArgs[v];g.push(["t",n,"=array",n,".dtype,r",n,"=array",n,".order"].join(""));l.push("t"+n);l.push("r"+n);h.push("t"+n);h.push("r"+
n+".join()");f.push("array"+n+".data");f.push("array"+n+".stride");f.push("array"+n+".offset|0");0<v&&(k.push("array"+a.arrayArgs[0]+".shape.length===array"+n+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[v]))),u.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+n+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[v])+"]"))}1<a.arrayArgs.length&&(b.push("if (!("+k.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(v=0;v<a.scalarArgs.length;++v)f.push("scalar"+a.scalarArgs[v]);g.push(["type=[",h.join(","),"].join()"].join(""));g.push("proc=CACHED[type]");b.push("var "+g.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",l.join(","),"])}return proc(",f.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(p.bind(void 0,a))}},{"./compile.js":73}],75:[function(a,f,k){(function(a){var m=!1;if("undefined"!==typeof Float64Array){var b=new Float64Array(1),g=new Uint32Array(b.buffer);b[0]=1;m=!0;1072693248===g[1]?(f.exports=function(a){b[0]=a;return[g[0],g[1]]},f.exports.pack=function(a,l){g[0]=a;g[1]=l;return b[0]},f.exports.lo=function(a){b[0]=a;return g[0]},f.exports.hi=
function(a){b[0]=a;return g[1]}):1072693248===g[0]?(f.exports=function(a){b[0]=a;return[g[1],g[0]]},f.exports.pack=function(a,l){g[1]=a;g[0]=l;return b[0]},f.exports.lo=function(a){b[0]=a;return g[1]},f.exports.hi=function(a){b[0]=a;return g[0]}):m=!1}if(!m){var l=new a(8);f.exports=function(b){l.writeDoubleLE(b,0,!0);return[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]};f.exports.pack=function(b,a){l.writeUInt32LE(b,0,!0);l.writeUInt32LE(a,4,!0);return l.readDoubleLE(0,!0)};f.exports.lo=function(b){l.writeDoubleLE(b,
0,!0);return l.readUInt32LE(0,!0)};f.exports.hi=function(b){l.writeDoubleLE(b,0,!0);return l.readUInt32LE(4,!0)}}f.exports.sign=function(b){return f.exports.hi(b)>>>31};f.exports.exponent=function(b){return(f.exports.hi(b)<<1>>>21)-1023};f.exports.fraction=function(b){var a=f.exports.lo(b);b=f.exports.hi(b);var g=b&1048575;b&2146435072&&(g+=1048576);return[a,g]};f.exports.denormalized=function(b){return!(f.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],76:[function(a,f,k){f.exports=
function(a,b){var g=a.length;if("number"!==typeof b){for(var l=b=0;l<g;++l){var h=a[l];b=Math.max(b,h[0],h[1])}b=(b|0)+1}b|=0;for(var f=Array(b),l=0;l<b;++l)f[l]=[];for(l=0;l<g;++l)h=a[l],f[h[0]].push(h[1]),f[h[1]].push(h[0]);for(g=0;g<b;++g)p(f[g],function(b,a){return b-a});return f};var p=a("uniq")},{uniq:123}],77:[function(a,f,k){function p(b,a,d,g,h,l){this._color=b;this.key=a;this.value=d;this.left=g;this.right=h;this._count=l}function m(b){return new p(b._color,b.key,b.value,b.left,b.right,
b._count)}function b(b,a){return new p(b,a.key,a.value,a.left,a.right,a._count)}function g(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function l(b,a){this._compare=b;this.root=a}function h(b,a){if(a.left){var d=h(b,a.left);if(d)return d}if(d=b(a.key,a.value))return d;if(a.right)return h(b,a.right)}function y(b,a,d,g){if(0>=a(b,g.key)){if(g.left){var h=y(b,a,d,g.left);if(h)return h}if(h=d(g.key,g.value))return h}if(g.right)return y(b,a,d,g.right)}function r(b,a,d,g,h){var l=
d(b,h.key),m=d(a,h.key);if(0>=l&&(h.left&&(l=r(b,a,d,g,h.left))||0<m&&(l=g(h.key,h.value))))return l;if(0<m&&h.right)return r(b,a,d,g,h.right)}function u(b,a){this.tree=b;this._stack=a}function v(b,a){b.key=a.key;b.value=a.value;b.left=a.left;b.right=a.right;b._color=a._color;b._count=a._count}function n(b,a){return b<a?-1:b>a?1:0}f.exports=function(b){return new l(b||n,null)};a=l.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(a,d){b.push(a)});return b}});
Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(a,d){b.push(d)});return b}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,c){for(var d=this._compare,h=this.root,w=[],m=[];h;){var f=d(a,h.key);w.push(h);m.push(f);h=0>=f?h.left:h.right}w.push(new p(0,a,c,null,null,1));for(f=w.length-2;0<=f;--f)h=w[f],w[f]=0>=m[f]?new p(h._color,h.key,h.value,w[f+1],h.right,h._count+1):new p(h._color,h.key,h.value,h.left,w[f+
1],h._count+1);for(f=w.length-1;1<f;--f){m=w[f-1];h=w[f];if(1===m._color||1===h._color)break;var n=w[f-2];if(n.left===m)if(m.left===h){var v=n.right;if(v&&0===v._color)m._color=1,n.right=b(1,v),n._color=0,--f;else{n._color=0;n.left=m.right;m._color=1;m.right=n;w[f-2]=m;w[f-1]=h;g(n);g(m);3<=f&&(f=w[f-3],f.left===n?f.left=m:f.right=m);break}}else if((v=n.right)&&0===v._color)m._color=1,n.right=b(1,v),n._color=0,--f;else{m.right=h.left;n._color=0;n.left=h.right;h._color=1;h.left=m;h.right=n;w[f-2]=
h;w[f-1]=m;g(n);g(m);g(h);3<=f&&(f=w[f-3],f.left===n?f.left=h:f.right=h);break}else if(m.right===h)if((v=n.left)&&0===v._color)m._color=1,n.left=b(1,v),n._color=0,--f;else{n._color=0;n.right=m.left;m._color=1;m.left=n;w[f-2]=m;w[f-1]=h;g(n);g(m);3<=f&&(f=w[f-3],f.right===n?f.right=m:f.left=m);break}else if((v=n.left)&&0===v._color)m._color=1,n.left=b(1,v),n._color=0,--f;else{m.left=h.right;n._color=0;n.right=h.left;h._color=1;h.right=m;h.left=n;w[f-2]=h;w[f-1]=m;g(n);g(m);g(h);3<=f&&(f=w[f-3],f.right===
n?f.right=h:f.left=h);break}}w[0]._color=1;return new l(d,w[0])};a.forEach=function(b,a,d){if(this.root)switch(arguments.length){case 1:return h(b,this.root);case 2:return y(a,this._compare,b,this.root);case 3:if(!(0<=this._compare(a,d)))return r(a,d,this._compare,b,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.left;return new u(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.right;return new u(this,
b)}});a.at=function(b){if(0>b)return new u(this,[]);for(var a=this.root,d=[];;){d.push(a);if(a.left){if(b<a.left._count){a=a.left;continue}b-=a.left._count}if(!b)return new u(this,d);--b;if(a.right){if(b>=a.right._count)break;a=a.right}else break}return new u(this,[])};a.ge=function(b){for(var a=this._compare,d=this.root,g=[],h=0;d;){var l=a(b,d.key);g.push(d);0>=l&&(h=g.length);d=0>=l?d.left:d.right}g.length=h;return new u(this,g)};a.gt=function(b){for(var a=this._compare,d=this.root,g=[],h=0;d;){var l=
a(b,d.key);g.push(d);0>l&&(h=g.length);d=0>l?d.left:d.right}g.length=h;return new u(this,g)};a.lt=function(b){for(var a=this._compare,d=this.root,g=[],h=0;d;){var l=a(b,d.key);g.push(d);0<l&&(h=g.length);d=0>=l?d.left:d.right}g.length=h;return new u(this,g)};a.le=function(b){for(var a=this._compare,d=this.root,g=[],h=0;d;){var l=a(b,d.key);g.push(d);0<=l&&(h=g.length);d=0>l?d.left:d.right}g.length=h;return new u(this,g)};a.find=function(b){for(var a=this._compare,d=this.root,g=[];d;){var h=a(b,d.key);
g.push(d);if(0===h)return new u(this,g);d=0>=h?d.left:d.right}return new u(this,[])};a.remove=function(b){return(b=this.find(b))?b.remove():this};a.get=function(b){for(var a=this._compare,d=this.root;d;){var g=a(b,d.key);if(0===g)return d.value;d=0>=g?d.left:d.right}};a=u.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=
function(){return new u(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var c=Array(a.length),d=a[a.length-1];c[c.length-1]=new p(d._color,d.key,d.value,d.left,d.right,d._count);for(var h=a.length-2;0<=h;--h)d=a[h],c[h]=d.left===a[h+1]?new p(d._color,d.key,d.value,c[h+1],d.right,d._count):new p(d._color,d.key,d.value,d.left,c[h+1],d._count);d=c[c.length-1];if(d.left&&d.right){a=c.length;for(d=d.left;d.right;)c.push(d),d=d.right;h=c[a-1];c.push(new p(d._color,
h.key,h.value,d.left,d.right,d._count));c[a-1].key=d.key;c[a-1].value=d.value;for(h=c.length-2;h>=a;--h)d=c[h],c[h]=new p(d._color,d.key,d.value,d.left,c[h+1],d._count);c[a-1].left=c[a]}d=c[c.length-1];if(0===d._color)for(h=c[c.length-2],h.left===d?h.left=null:h.right===d&&(h.right=null),c.pop(),h=0;h<c.length;++h)c[h]._count--;else if(d.left||d.right)for(d.left?v(d,d.left):d.right&&v(d,d.right),d._color=1,h=0;h<c.length-1;++h)c[h]._count--;else{if(1===c.length)return new l(this.tree._compare,null);
for(h=0;h<c.length;++h)c[h]._count--;for(var h=c[c.length-2],f,n,k,t=c.length-1;0<=t;--t){a=c[t];if(0===t){a._color=1;break}f=c[t-1];if(f.left===a){n=f.right;if(n.right&&0===n.right._color){n=f.right=m(n);k=n.right=m(n.right);f.right=n.left;n.left=f;n.right=k;n._color=f._color;a._color=1;f._color=1;k._color=1;g(f);g(n);if(1<t){var r=c[t-2];r.left===f?r.left=n:r.right=n}c[t-1]=n;break}else if(n.left&&0===n.left._color){n=f.right=m(n);k=n.left=m(n.left);f.right=k.left;n.left=k.right;k.left=f;k.right=
n;k._color=f._color;f._color=1;n._color=1;a._color=1;g(f);g(n);g(k);1<t&&(r=c[t-2],r.left===f?r.left=k:r.right=k);c[t-1]=k;break}if(1===n._color)if(0===f._color){f._color=1;f.right=b(0,n);break}else f.right=b(0,n);else n=m(n),f.right=n.left,n.left=f,n._color=f._color,f._color=0,g(f),g(n),1<t&&(r=c[t-2],r.left===f?r.left=n:r.right=n),c[t-1]=n,c[t]=f,t+1<c.length?c[t+1]=a:c.push(a),t+=2}else{n=f.left;if(n.left&&0===n.left._color){n=f.left=m(n);k=n.left=m(n.left);f.left=n.right;n.right=f;n.left=k;n._color=
f._color;a._color=1;f._color=1;k._color=1;g(f);g(n);1<t&&(r=c[t-2],r.right===f?r.right=n:r.left=n);c[t-1]=n;break}else if(n.right&&0===n.right._color){n=f.left=m(n);k=n.right=m(n.right);f.left=k.right;n.right=k.left;k.right=f;k.left=n;k._color=f._color;f._color=1;n._color=1;a._color=1;g(f);g(n);g(k);1<t&&(r=c[t-2],r.right===f?r.right=k:r.left=k);c[t-1]=k;break}if(1===n._color)if(0===f._color){f._color=1;f.left=b(0,n);break}else f.left=b(0,n);else n=m(n),f.left=n.right,n.right=f,n._color=f._color,
f._color=0,g(f),g(n),1<t&&(r=c[t-2],r.right===f?r.right=n:r.left=n),c[t-1]=n,c[t]=f,t+1<c.length?c[t+1]=a:c.push(a),t+=2}}h.left===d?h.left=null:h.right=null}return new l(this.tree._compare,c[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=
0,a=this._stack;if(0===a.length)return(b=this.tree.root)?b._count:0;a[a.length-1].left&&(b=a[a.length-1].left._count);for(var d=a.length-2;0<=d;--d)a[d+1]===a[d].right&&(++b,a[d].left&&(b+=a[d].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.right)for(a=a.right;a;)b.push(a),a=a.left;else for(b.pop();0<b.length&&b[b.length-1].right===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].left===b[a])return!0;return!1}});a.update=function(b){var a=this._stack;if(0===a.length)throw Error("Can't update empty node!");var d=Array(a.length),g=a[a.length-1];d[d.length-1]=new p(g._color,g.key,b,g.left,g.right,g._count);for(b=a.length-2;0<=b;--b)g=a[b],d[b]=g.left===a[b+1]?new p(g._color,g.key,g.value,d[b+1],g.right,g._count):new p(g._color,g.key,g.value,g.left,d[b+1],g._count);return new l(this.tree._compare,
d[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.left)for(a=a.left;a;)b.push(a),a=a.right;else for(b.pop();0<b.length&&b[b.length-1].left===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].right===b[a])return!0;return!1}})},{}],78:[function(a,f,k){function p(a){if(0>a)return Number("0/0");for(var f=b[0],h=b.length-1;0<h;--h)f+=
b[h]/(a+h);h=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(h)-h+Math.log(f)-Math.log(a)}var m=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],b=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,
-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];f.exports=function l(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*l(1-b));if(100<b)return Math.exp(p(b));--b;for(var a=m[0],f=1;9>f;f++)a+=m[f]/(b+f);f=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(f,b+.5)*Math.exp(-f)*a};f.exports.log=p},{}],79:[function(a,f,k){f.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},
{}],80:[function(a,f,k){var p=a("./identity");f.exports=function(a,b,g,f){var h,k,r,u,v,n,e,c,d=b[0],q=b[1];b=b[2];r=f[0];u=f[1];k=f[2];e=g[0];f=g[1];h=g[2];if(1E-6>Math.abs(d-e)&&1E-6>Math.abs(q-f)&&1E-6>Math.abs(b-h))return p(a);g=d-e;f=q-f;e=b-h;c=1/Math.sqrt(g*g+f*f+e*e);g*=c;f*=c;e*=c;h=u*e-k*f;k=k*g-r*e;r=r*f-u*g;(c=Math.sqrt(h*h+k*k+r*r))?(c=1/c,h*=c,k*=c,r*=c):r=k=h=0;u=f*r-e*k;v=e*h-g*r;n=g*k-f*h;(c=Math.sqrt(u*u+v*v+n*n))?(c=1/c,u*=c,v*=c,n*=c):n=v=u=0;a[0]=h;a[1]=u;a[2]=g;a[3]=0;a[4]=k;
a[5]=v;a[6]=f;a[7]=0;a[8]=r;a[9]=n;a[10]=e;a[11]=0;a[12]=-(h*d+k*q+r*b);a[13]=-(u*d+v*q+n*b);a[14]=-(g*d+f*q+e*b);a[15]=1;return a}},{"./identity":79}],81:[function(a,f,k){f.exports=function(a,f,b,g,l){f=1/Math.tan(f/2);var h=1/(g-l);a[0]=f/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(l+g)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*l*g*h;a[15]=0;return a}},{}],82:[function(a,f,k){k.read=function(a,f,b,g,l){var h;h=8*l-g-1;var k=(1<<h)-1,r=k>>1,u=-7;l=b?l-1:0;var v=b?-1:1,n=a[f+
l];l+=v;b=n&(1<<-u)-1;n>>=-u;for(u+=h;0<u;b=256*b+a[f+l],l+=v,u-=8);h=b&(1<<-u)-1;b>>=-u;for(u+=g;0<u;h=256*h+a[f+l],l+=v,u-=8);if(0===b)b=1-r;else{if(b===k)return h?NaN:Infinity*(n?-1:1);h+=Math.pow(2,g);b-=r}return(n?-1:1)*h*Math.pow(2,b-g)};k.write=function(a,f,b,g,l,h){var k,r=8*h-l-1,u=(1<<r)-1,v=u>>1,n=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;h=g?0:h-1;var e=g?1:-1,c=0>f||0===f&&0>1/f?1:0;f=Math.abs(f);isNaN(f)||Infinity===f?(f=isNaN(f)?1:0,g=u):(g=Math.floor(Math.log(f)/Math.LN2),1>f*(k=Math.pow(2,
-g))&&(g--,k*=2),f=1<=g+v?f+n/k:f+n*Math.pow(2,1-v),2<=f*k&&(g++,k/=2),g+v>=u?(f=0,g=u):1<=g+v?(f=(f*k-1)*Math.pow(2,l),g+=v):(f=f*Math.pow(2,v-1)*Math.pow(2,l),g=0));for(;8<=l;a[b+h]=f&255,h+=e,f/=256,l-=8);g=g<<l|f;for(r+=l;0<r;a[b+h]=g&255,h+=e,g/=256,r-=8);a[b+h-e]|=128*c}},{}],83:[function(a,f,k){function p(b,a,c,e,g){this.mid=b;this.left=a;this.right=c;this.leftPoints=e;this.rightPoints=g;this.count=(a?a.count:0)+(c?c.count:0)+e.length}function m(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;
b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function b(b,a){var c=n(a);b.mid=c.mid;b.left=c.left;b.right=c.right;b.leftPoints=c.leftPoints;b.rightPoints=c.rightPoints;b.count=c.count}function g(a,c){var e=a.intervals([]),g=e.indexOf(c);if(0>g)return 0;e.splice(g,1);b(a,e);return 1}function l(b,a,c){for(var e=0;e<b.length&&b[e][0]<=a;++e){var g=c(b[e]);if(g)return g}}function h(b,a,c){for(var e=b.length-1;0<=e&&b[e][1]>=a;--e){var g=c(b[e]);if(g)return g}}function y(b,a){for(var c=
0;c<b.length;++c){var e=a(b[c]);if(e)return e}}function r(b,a){return b-a}function u(b,a){var c=b[0]-a[0];return c?c:b[1]-a[1]}function v(b,a){var c=b[1]-a[1];return c?c:b[0]-a[0]}function n(b){if(0===b.length)return null;for(var a=[],c=0;c<b.length;++c)a.push(b[c][0],b[c][1]);a.sort(r);for(var a=a[a.length>>1],e=[],g=[],h=[],c=0;c<b.length;++c){var f=b[c];f[1]<a?e.push(f):a<f[0]?g.push(f):h.push(f)}b=h.slice();h.sort(u);b.sort(v);return new p(a,n(e),n(g),h,b)}function e(b){this.root=b}var c=a("binary-search-bounds");
f.exports=function(b){return b&&0!==b.length?new e(n(b)):new e(null)};a=p.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);return b};a.insert=function(a){var e=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?(e=this.intervals([]),e.push(a),b(this,e)):this.left.insert(a):this.left=n([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?(e=this.intervals([]),
e.push(a),b(this,e)):this.right.insert(a):this.right=n([a]);else{var e=c.ge(this.leftPoints,a,u),g=c.ge(this.rightPoints,a,v);this.leftPoints.splice(e,0,a);this.rightPoints.splice(g,0,a)}};a.remove=function(b){var a=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return g(this,b);a=this.left.remove(b);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(b[0]>this.mid){if(!this.right)return 0;if(4*(this.left?
this.left.count:0)>3*(a-1))return g(this,b);a=this.right.remove(b);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;return a}if(1===this.count)return this.leftPoints[0]===b?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var e=this.left;e.right;)b=e,e=e.right;if(b===this)e.right=this.right;else{var h=this.left,a=this.right;b.count-=e.count;b.right=e.left;e.left=h;e.right=a}m(this,e);this.count=(this.left?this.left.count:0)+(this.right?
this.right.count:0)+this.leftPoints.length}else this.left?m(this,this.left):m(this,this.right);return 1}for(h=c.ge(this.leftPoints,b,u);h<this.leftPoints.length&&this.leftPoints[h][0]===b[0];++h)if(this.leftPoints[h]===b)for(--this.count,this.leftPoints.splice(h,1),a=c.ge(this.rightPoints,b,v);a<this.rightPoints.length&&this.rightPoints[a][1]===b[1];++a)if(this.rightPoints[a]===b)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(b,a){if(b<this.mid){if(this.left){var c=this.left.queryPoint(b,
a);if(c)return c}return l(this.leftPoints,b,a)}return b>this.mid?this.right&&(c=this.right.queryPoint(b,a))?c:h(this.rightPoints,b,a):y(this.leftPoints,a)};a.queryInterval=function(b,a,c){if(b<this.mid&&this.left){var e=this.left.queryInterval(b,a,c);if(e)return e}return a>this.mid&&this.right&&(e=this.right.queryInterval(b,a,c))?e:a<this.mid?l(this.leftPoints,a,c):b>this.mid?h(this.rightPoints,b,c):y(this.leftPoints,c)};a=e.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new p(b[0],
null,null,[b],[b])};a.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,a,c){if(b<=a&&this.root)return this.root.queryInterval(b,a,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":84}],84:[function(a,
f,k){function p(b,a,f,h,m,p){b=["function ",b,"(a,l,h,",h.join(","),"){",p?"":"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",m?".get(m)":"[m]"];p?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",a,"){i=m;");f?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");p?b.push("return -1};"):b.push("return i};");return b.join("")}function m(b,a,f,h){return(new Function([p("A","x"+b+"y",a,["y"],
!1,h),p("B","x"+b+"y",a,["y"],!0,h),p("P","c(x,y)"+b+"0",a,["y","c"],!1,h),p("Q","c(x,y)"+b+"0",a,["y","c"],!0,h),"function dispatchBsearch",f,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
f].join("")))()}f.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],85:[function(a,f,k){f.exports=function(a,f){f=f||Array(a.length);for(var b=0;b<a.length;++b)f[a[b]]=b;return f}},{}],86:[function(a,f,k){f.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,f,k){function p(b,a,e){for(var c=0,d=0;d<b;++d)a&1<<d&&(c|=1<<e[d]);return c}
function m(a,f,e,c,d,m){function w(b,a){A.push("for(","i"+d[b],"=",a,";","i"+d[b],"<","s"+d[b],";","++","i"+d[b],"){")}function k(b){for(var a=0;a<z;++a)A.push("p"+a,"+=","u"+a+"_"+d[b],";");A.push("}")}function E(){for(var b=1;b<1<<D;++b)A.push(u,"=","e"+b,";","e"+b,"=","y"+b,";","y"+b,"=",u,";")}function t(b,a){if(0>b){for(var e=0;e<z;++e)m[e]?A.push("c"+e+"_0","=","d"+e,".get(","p"+e,");"):A.push("c"+e+"_0","=","d"+e,"[","p"+e,"];");for(var f=[],e=0;e<z;++e)f.push("c"+e+"_0");for(e=0;e<c;++e)f.push("x"+
e);A.push("b0","=",l,"[",r,"]=phase(",f.join(),");");for(f=1;f<1<<D;++f)A.push("b"+f,"=",l,"[",r,"+","e"+f,"];");e=[];for(f=1;f<1<<D;++f)e.push("(b0!==b"+f+")");A.push("if(",e.join("||"),"){");for(var n=[],e=0;e<D;++e)n.push("i"+e);for(e=0;e<z;++e)for(n.push("c"+e+"_0"),f=1;f<1<<D;++f)m[e]?A.push("c"+e+"_"+f,"=","d"+e,".get(","p"+e,"+","d"+e+"_"+f,");"):A.push("c"+e+"_"+f,"=","d"+e,"[","p"+e,"+","d"+e+"_"+f,"];"),n.push("c"+e+"_"+f);for(e=0;e<1<<D;++e)n.push("b"+e);for(e=0;e<c;++e)n.push("x"+e);A.push("vertex(",
n.join(),");","v0","=",g,"[",r,"]=",h,"++;");e=(1<<D)-1;n="b"+e;for(f=0;f<D;++f)if(0===(a&~(1<<f))){for(var p=e^1<<f,v="b"+p,u=[],y=p;0<y;y=y-1&p)u.push(g+"["+r+"+"+("e"+y)+"]");u.push("v0");for(y=0;y<z;++y)f&1?u.push("c"+y+"_"+e,"c"+y+"_"+p):u.push("c"+y+"_"+p,"c"+y+"_"+e);f&1?u.push(n,v):u.push(v,n);for(y=0;y<c;++y)u.push("x"+y);A.push("if(",n,"!==",v,"){","face(",u.join(),")}")}A.push("}",r,"+=1;")}else{for(f=b-1;0<=f;--f)w(f,0);e=[];for(f=0;f<z;++f)m[f]?e.push("d"+f+".get("+("p"+f)+")"):e.push("d"+
f+"["+("p"+f)+"]");for(f=0;f<c;++f)e.push("x"+f);A.push(l,"[",r,"++]=phase(",e.join(),");");for(f=0;f<b;++f)k(f);for(f=0;f<z;++f)A.push("p"+f,"+=","u"+f+"_"+d[b],";");A.push("if(","s"+d[b],">0){","i"+d[b],"=1;");t(b-1,a|1<<d[b]);for(f=0;f<z;++f)A.push("p"+f,"+=","u"+f+"_"+d[b],";");b===D-1&&(A.push(r,"=0;"),E());w(b,2);t(b-1,a);b===D-1&&(A.push("if(","i"+d[D-1],"&1){",r,"=0;}"),E());k(b);A.push("}")}}var z=m.length,D=d.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var G="extractContour"+d.join("_"),A=[],B=[],I=[],H=0;H<z;++H)I.push("a"+H);for(H=0;H<c;++H)I.push("x"+H);for(H=0;H<D;++H)B.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<z;++H){B.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var C=0;C<D;++C)B.push("t"+H+"_"+C+"="+("a"+H)+".stride["+C+"]|0")}for(H=0;H<z;++H)for(B.push("p"+H+"="+("o"+H)),B.push("c"+H+"_0"),C=1;C<1<<D;++C){for(var K=[],J=0;J<D;++J)C&1<<J&&K.push("-"+("t"+H+"_"+J));B.push("d"+H+"_"+C+"=("+K.join("")+")|0");B.push("c"+
H+"_"+C+"=0")}for(H=0;H<z;++H)for(C=0;C<D;++C)J=["t"+H+"_"+d[C]],0<C&&J.push("t"+H+"_"+d[C-1]+"*"+("s"+d[C-1])),B.push("u"+H+"_"+d[C]+"=("+J.join("-")+")|0");for(H=0;H<D;++H)B.push("i"+H+"=0");B.push(h+"=0");C=["2"];for(H=D-2;0<=H;--H)C.push("s"+d[H]);B.push(y+"=("+C.join("*")+")|0",l+"=mallocUint32("+y+")",g+"=mallocUint32("+y+")",r+"=0");B.push("b0=0");for(C=1;C<1<<D;++C){H=[];K=[];for(J=0;J<D;++J)C&1<<J&&(0===K.length?H.push("1"):H.unshift(K.join("*"))),K.push("s"+d[J]);J="";0>H[0].indexOf("s"+
d[D-2])&&(J="-");K=p(D,C,d);B.push("e"+K+"=(-"+H.join("-")+")|0","y"+K+"=("+J+H.join("-")+")|0","b"+K+"=0")}B.push("v0=0",u+"=0");t(D-1,0);A.push("freeUint32(",g,");freeUint32(",l,");");G=["'use strict';function ",G,"(",I.join(),"){var ",B.join(),";",A.join(""),"}return ",G].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",G))(a,f,e,b.mallocUint32,b.freeUint32)}var b=a("typedarray-pool");f.exports=function(b){function a(b){throw Error("ndarray-extract-contour: "+b);
}"object"!==typeof b&&a("Must specify arguments");var e=b.order;Array.isArray(e)||a("Must specify order");var c=b.arrayArguments||1;1>c&&a("Must have at least one array argument");var d=b.scalarArguments||0;0>d&&a("Scalar arg count must be > 0");"function"!==typeof b.vertex&&a("Must specify vertex creation function");"function"!==typeof b.cell&&a("Must specify cell creation function");"function"!==typeof b.phase&&a("Must specify phase function");for(var g=b.getters||[],h=Array(c),f=0;f<c;++f)0<=g.indexOf(f)?
h[f]=!0:h[f]=!1;return m(b.vertex,b.cell,b.phase,d,e,h)};var g="V",l="P",h="N",y="Q",r="X",u="T"},{"typedarray-pool":121}],88:[function(a,f,k){function p(b,a){return b[0]-a[0]}function m(){var b=this.stride,a=Array(b.length),g;for(g=0;g<a.length;++g)a[g]=[Math.abs(b[g]),g];a.sort(p);b=Array(a.length);for(g=0;g<b.length;++g)b[g]=a[g][1];return b}function b(b,a){var g=["View",a,"d",b].join("");0>a&&(g="View_Nil"+b);var e="generic"===b;if(-1===a){var c,g=new Function("function "+g+"(a){this.data=a;};var proto="+
g+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+g+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+g+"(a){return new "+g+"(a);}");return g()}if(0===a)return g=new Function("TrivialArray","function "+g+"(a,d) {this.data = a;this.offset = d};var proto="+g+".prototype;proto.dtype='"+
b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+g+"_copy() {return new "+g+"(this.data,this.offset)};proto.pick=function "+g+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+g+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+g+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+
"};return function construct_"+g+"(a,b,c,d){return new "+g+"(a,d)}"),g(r[b][0]);c=["'use strict'"];var d=l(a),h=d.map(function(b){return"i"+b}),f="this.offset+"+d.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),p=d.map(function(b){return"b"+b}).join(","),k=d.map(function(b){return"c"+b}).join(",");c.push("function "+g+"(a,"+p+","+k+",d){this.data=a","this.shape=["+p+"]","this.stride=["+k+"]","this.offset=d|0}","var proto="+g+".prototype","proto.dtype='"+b+"'","proto.dimension="+a);c.push("Object.defineProperty(proto,'size',{get:function "+
g+"_size(){return "+d.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===a?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),4>a?(c.push("function "+g+"_order(){"),2===a?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===a&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
c.push("ORDER})"));c.push("proto.set=function "+g+"_set("+h.join(",")+",v){");e?c.push("return this.data.set("+f+",v)}"):c.push("return this.data["+f+"]=v}");c.push("proto.get=function "+g+"_get("+h.join(",")+"){");e?c.push("return this.data.get("+f+")}"):c.push("return this.data["+f+"]}");c.push("proto.index=function "+g+"_index(",h.join(),"){return "+f+"}");c.push("proto.hi=function "+g+"_hi("+h.join(",")+"){return new "+g+"(this.data,"+d.map(function(b){return["(typeof i",b,"!=='number'||i",b,
"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+d.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");e=d.map(function(b){return"a"+b+"=this.shape["+b+"]"});f=d.map(function(b){return"c"+b+"=this.stride["+b+"]"});c.push("proto.lo=function "+g+"_lo("+h.join(",")+"){var b=this.offset,d=0,"+e.join(",")+","+f.join(","));for(e=0;e<a;++e)c.push("if(typeof i"+e+"==='number'&&i"+e+">=0){d=i"+e+"|0;b+=c"+e+"*d;a"+e+"-=d}");c.push("return new "+g+"(this.data,"+d.map(function(b){return"a"+
b}).join(",")+","+d.map(function(b){return"c"+b}).join(",")+",b)}");c.push("proto.step=function "+g+"_step("+h.join(",")+"){var "+d.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+d.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(e=0;e<a;++e)c.push("if(typeof i"+e+"==='number'){d=i"+e+"|0;if(d<0){c+=b"+e+"*(a"+e+"-1);a"+e+"=ceil(-a"+e+"/d)}else{a"+e+"=ceil(a"+e+"/d)}b"+e+"*=d}");c.push("return new "+g+"(this.data,"+d.map(function(b){return"a"+
b}).join(",")+","+d.map(function(b){return"b"+b}).join(",")+",c)}");f=Array(a);p=Array(a);for(e=0;e<a;++e)f[e]="a[i"+e+"]",p[e]="b[i"+e+"]";c.push("proto.transpose=function "+g+"_transpose("+h+"){"+h.map(function(b,a){return b+"=("+b+"===undefined?"+a+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+g+"(this.data,"+f.join(",")+","+p.join(",")+",this.offset)}");c.push("proto.pick=function "+g+"_pick("+h+"){var a=[],b=[],c=this.offset");for(e=0;e<a;++e)c.push("if(typeof i"+e+"==='number'&&i"+
e+">=0){c=(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");c.push("return function construct_"+g+"(data,shape,stride,offset){return new "+g+"(data,"+d.map(function(b){return"shape["+b+"]"}).join(",")+","+d.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");g=new Function("CTOR_LIST","ORDER",c.join("\n"));return g(r[b],m)}function g(b){if(h(b))return"buffer";if(y)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var l=a("iota-array"),h=a("is-buffer"),y="undefined"!==typeof Float64Array,r={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in r)r[a].push(b(a,-1))});f.exports=function(a,h,f,e){if(void 0===a){var c=r.array[0];return c([])}"number"===typeof a&&(a=[a]);void 0===h&&(h=[a.length]);c=h.length;if(void 0===f){f=Array(c);for(var d=c-1,l=1;0<=d;--d)f[d]=l,l*=h[d]}if(void 0===e)for(d=e=0;d<c;++d)0>f[d]&&(e-=(h[d]-1)*f[d]);d=g(a);for(l=r[d];l.length<=c+1;)l.push(b(d,l.length-1));c=l[c+1];return c(a,h,f,e)}},{"iota-array":89,
"is-buffer":86}],89:[function(a,f,k){f.exports=function(a){for(var f=Array(a),b=0;b<a;++b)f[b]=b;return f}},{}],90:[function(a,f,k){var p=a("double-bits"),m=Math.pow(2,-1074);f.exports=function(b,a){if(isNaN(b)||isNaN(a))return NaN;if(b===a)return b;if(0===b)return 0>a?-m:m;var f=p.hi(b),h=p.lo(b);a>b===0<b?4294967295===h?(f+=1,h=0):h+=1:0===h?(h=4294967295,--f):--h;return p.pack(h,f)}},{"double-bits":75}],91:[function(a,f,k){f.exports=function(b){var a=b.length;if(a<p)for(var f=1,h=0;h<a;++h)for(var k=
0;k<h;++k)if(b[h]<b[k])f=-f;else{if(b[h]===b[k])return 0}else{for(var r=m.mallocUint8(a),h=0;h<a;++h)r[h]=0;f=1;for(h=0;h<a;++h)if(!r[h]){var u=1;r[h]=1;for(k=b[h];k!==h;k=b[k]){if(r[k])return m.freeUint8(r),0;u+=1;r[k]=1}u&1||(f=-f)}m.freeUint8(r)}return f};var p=32,m=a("typedarray-pool")},{"typedarray-pool":121}],92:[function(a,f,k){var p=a("typedarray-pool"),m=a("invert-permutation");k.rank=function(b){var a=b.length;switch(a){case 0:case 1:return 0;case 2:return b[1]}var f=p.mallocUint32(a),h=
p.mallocUint32(a),k=0,r;m(b,h);for(r=0;r<a;++r)f[r]=b[r];for(r=a-1;0<r;--r)a=h[r],b=f[r],f[r]=f[a],f[a]=b,h[r]=h[b],h[b]=a,k=(k+b)*r;p.freeUint32(h);p.freeUint32(f);return k};k.unrank=function(b,a,f){switch(b){case 0:return f?f:[];case 1:return f?(f[0]=0,f):[0];case 2:return f?(a?(f[0]=0,f[1]=1):(f[0]=1,f[1]=0),f):a?[0,1]:[1,0]}f=f||Array(b);var h,m,k=1;f[0]=0;for(m=1;m<b;++m)f[m]=m,k=k*m|0;for(m=b-1;0<m;--m)b=a/k|0,a=a-b*k|0,k=k/m|0,h=f[m]|0,f[m]=f[b]|0,f[b]=h|0;return f}},{"invert-permutation":85,
"typedarray-pool":121}],93:[function(a,f,k){f.exports=function(a,b){function g(b,a){var c=u[a][b[a]];c.splice(c.indexOf(b),1)}function f(a,c,e){var h,l,n;for(l=0;2>l;++l)if(0<u[l][c].length){h=u[l][c][0];n=l;break}l=h[n^1];for(var m=0;2>m;++m)for(var k=u[m][c],v=0;v<k.length;++v){var r=k[v],y=r[m^1];0<p(b[a],b[c],b[l],b[y])&&(h=r,l=y,n=m)}if(e)return l;h&&g(h,n);return l}function h(a,c){var e=u[c][a][0],h=[a];g(e,c);for(e=e[c^1];;){for(;e!==a;)h.push(e),e=f(h[h.length-2],e,!1);if(0===u[0][a].length+
u[1][a].length)break;var e=h[h.length-1],n=a,m=h[1],k=f(e,n,!0);if(0>p(b[e],b[n],b[m],b[k]))break;h.push(a);e=f(e,n)}return h}for(var k=b.length|0,r=a.length,u=[Array(k),Array(k)],v=0;v<k;++v)u[0][v]=[],u[1][v]=[];for(v=0;v<r;++v){var n=a[v];u[0][n[0]].push(n);u[1][n[1]].push(n)}r=[];for(v=0;v<k;++v)0===u[0][v].length+u[1][v].length&&r.push([v]);for(v=0;v<k;++v)for(n=0;2>n;++n){for(var e=[];0<u[n][v].length;){var c=h(v,n);c[1]===c[c.length-1]?e.push.apply(e,c):(0<e.length&&r.push(e),e=c)}0<e.length&&
r.push(e)}return r};var p=a("compare-angle")},{"compare-angle":70}],94:[function(a,f,k){f.exports=function(a,b){for(var g=p(a,b.length),f=Array(b.length),h=Array(b.length),k=[],r=0;r<b.length;++r){var u=g[r].length;h[r]=u;f[r]=!0;1>=u&&k.push(r)}for(;0<k.length;)for(u=k.pop(),f[u]=!1,u=g[u],r=0;r<u.length;++r){var v=u[r];0===--h[v]&&k.push(v)}g=Array(b.length);h=[];for(r=0;r<b.length;++r)f[r]?(u=h.length,g[r]=u,h.push(b[r])):g[r]=-1;k=[];for(r=0;r<a.length;++r)u=a[r],f[u[0]]&&f[u[1]]&&k.push([g[u[0]],
g[u[1]]]);return[k,h]};var p=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":76}],95:[function(a,f,k){function p(b,a){for(var e=Array(b),c=0;c<b;++c)e[c]=a;return e}function m(b){for(var a=Array(b),e=0;e<b;++e)a[e]=[];return a}f.exports=function(a,f){function e(b){for(var a=b.length,c=0;c<a;++c)if(!C[b[c]])return!1;return!0}var c=u(a,f);a=c[0];f=c[1];for(var d=f.length,q=b(a,f.length),k=0;k<d;++k)if(1===q[k].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var q=
g(a,f),q=q.filter(function(b){for(var a=b.length,c=[0],d=0;d<a;++d)var e=f[b[d]],g=f[b[(d+1)%a]],l=h(-e[0],e[1]),m=h(-e[0],g[1]),e=h(g[0],e[1]),g=h(g[0],g[1]),c=y(c,y(y(l,m),y(e,g)));return 0<c[c.length-1]}),c=q.length,x=Array(c),E=Array(c),k=0;k<c;++k){x[k]=k;var t=Array(c),z=q[k].map(function(b){return f[b]}),D=l([z]),G=0,A=0;a:for(;A<c;++A)if(t[A]=0,k!==A){for(var z=q[A],B=z.length,I=0;I<B;++I){var H=D(f[z[I]]);if(0!==H){0>H&&(t[A]=1,G+=1);continue a}}t[A]=1;G+=1}E[k]=[G,k,t]}E.sort(function(b,
a){return a[0]-b[0]});for(k=0;k<c;++k)for(t=E[k],z=t[1],B=t[2],A=0;A<c;++A)B[A]&&(x[A]=z);E=m(c);for(k=0;k<c;++k)E[k].push(x[k]),E[x[k]].push(k);for(var t={},C=p(d,!1),k=0;k<c;++k)for(z=q[k],B=z.length,A=0;A<B;++A)d=z[A],D=z[(A+1)%B],G=Math.min(d,D)+":"+Math.max(d,D),G in t?(G=t[G],E[G].push(k),E[k].push(G),C[d]=C[D]=!0):t[G]=k;A=[];d=p(c,-1);for(k=0;k<c;++k)x[k]!==k||e(q[k])?d[k]=-1:(A.push(k),d[k]=0);for(c=[];0<A.length;){k=A.pop();x=E[k];r(x,function(b,a){return b-a});var B=x.length,t=d[k],K;0===
t&&(z=q[k],K=[z]);for(k=0;k<B;++k)z=x[k],0<=d[z]||(d[z]=t^1,A.push(z),0===t&&(z=q[z],e(z)||(z.reverse(),K.push(z))));0===t&&c.push(K)}return c};var b=a("edges-to-adjacency-list"),g=a("planar-dual"),l=a("point-in-big-polygon"),h=a("two-product"),y=a("robust-sum"),r=a("uniq"),u=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,"edges-to-adjacency-list":76,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":118,uniq:123}],96:[function(a,f,k){arguments[4][84][0].apply(k,arguments)},
{dup:84}],97:[function(a,f,k){function p(){return!0}function m(b){return function(a,d){var g=b[a];return g?!!g.queryPoint(d,p):!1}}function b(b){for(var a={},d=0;d<b.length;++d){var g=b[d],h=g[0][0],f=g[0][1],g=g[1][1],f=[Math.min(f,g),Math.max(f,g)];h in a?a[h].push(f):a[h]=[f]}b={};h=Object.keys(a);for(d=0;d<h.length;++d)b[h[d]]=v(a[h[d]]);return m(b)}function g(b,a){return function(d){var g=n.le(a,d[0]);if(0>g)return 1;var h=b[g];if(!h)if(0<g&&a[g]===d[0])h=b[g-1];else return 1;for(g=1;h;){var f=
h.key,l=r(d,f[0],f[1]);if(f[0][0]<f[1][0])if(0>l)h=h.left;else if(0<l)g=-1,h=h.right;else return 0;else if(0<l)h=h.left;else if(0>l)g=1,h=h.right;else return 0}return g}}function l(b){return 1}function h(b){return function(a){return b(a[0],a[1])?0:1}}function y(b,a){return function(d){return b(d[0],d[1])?0:a(d)}}f.exports=function(a){for(var c=a.length,d=[],f=[],m=0;m<c;++m)for(var n=a[m],k=n.length,p=k-1,v=0;v<k;p=v++){var p=n[p],r=n[v];p[0]===r[0]?f.push([p,r]):d.push([p,r])}if(0===d.length)return 0===
f.length?l:h(b(f));a=u(d);a=g(a.slabs,a.coordinates);return 0===f.length?a:y(b(f),a)};var r=a("robust-orientation")[3],u=a("slab-decomposition"),v=a("interval-tree-1d"),n=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":83,"robust-orientation":103,"slab-decomposition":115}],98:[function(a,f,k){var p=a("big-rat/add");f.exports=function(a,b){for(var g=a.length,f=Array(g),h=0;h<g;++h)f[h]=p(a[h],b[h]);return f}},{"big-rat/add":34}],99:[function(a,f,k){f.exports=function(a){for(var b=
Array(a.length),g=0;g<a.length;++g)b[g]=p(a[g]);return b};var p=a("big-rat")},{"big-rat":37}],100:[function(a,f,k){var p=a("big-rat"),m=a("big-rat/mul");f.exports=function(b,a){for(var f=p(a),h=b.length,k=Array(h),r=0;r<h;++r)k[r]=m(b[r],f);return k}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,f,k){var p=a("big-rat/sub");f.exports=function(a,b){for(var g=a.length,f=Array(g),h=0;h<g;++h)f[h]=p(a[h],b[h]);return f}},{"big-rat/sub":49}],102:[function(a,f,k){function p(b,a){for(var e=Array(b.length-
1),g=1;g<b.length;++g)for(var h=e[g-1]=Array(b.length-1),f=0,l=0;f<b.length;++f)f!==a&&(h[l++]=b[g][f]);return e}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",m(b.slice(0,a)),",",m(b.slice(a)),")"].join("")}function b(a,d){if("m"===a.charAt(0)){if("w"===d.charAt(0)){var e=a.split("[");return["w",d.substr(1),"m",e[0].substr(1)].join("")}return["prod(",a,",",d,")"].join("")}return b(d,a)}function g(a){if(2===a.length)return[["diff(",
b(a[0][0],a[1][1]),",",b(a[1][0],a[0][1]),")"].join("")];for(var d=[],e=0;e<a.length;++e)d.push(["scale(",m(g(p(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return d}function l(b,a){for(var e=[],g=0;g<a-2;++g)e.push(["prod(m",b,"[",g,"],m",b,"[",g,"])"].join(""));return m(e)}function h(b){for(var a=[],e=[],h=Array(b),f=0;f<b;++f){h[f]=Array(b);for(var k=0;k<b;++k)h[f][k]=["m",k,"[",b-f-2,"]"].join("")}for(f=0;f<b;++f)h[0][f]="1",h[b-1][f]="w"+f;for(f=0;f<b;++f)0===(f&1)?a.push.apply(a,g(p(h,f))):
e.push.apply(e,g(p(h,f)));a=m(a);e=m(e);h="exactInSphere"+b;k=[];for(f=0;f<b;++f)k.push("m"+f);k=["function ",h,"(",k.join(),"){"];for(f=0;f<b;++f){k.push("var w",f,"=",l(f,b),";");for(var t=0;t<b;++t)t!==f&&k.push("var w",f,"m",t,"=scale(w",f,",m",t,"[0]);")}k.push("var p=",a,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",h);return(new Function("sum","diff","prod","scale",k.join("")))(u,v,r,n)}function y(b){var a=e[b.length];a||(a=e[b.length]=h(b.length));return a.apply(void 0,b)}var r=a("two-product"),
u=a("robust-sum"),v=a("robust-subtract"),n=a("robust-scale"),e=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=e.length;)e.push(h(e.length));for(var b=[],a=["slow"],g=0;6>=g;++g)b.push("a"+g),a.push("o"+g);for(var l=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],g=2;6>=g;++g)l.push("case ",g,":return o",g,"(",b.slice(0,g).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");
a.push(l.join(""));b=Function.apply(void 0,a);f.exports=b.apply(void 0,[y].concat(e));for(g=0;6>=g;++g)f.exports[g]=e[g]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":118}],103:[function(a,f,k){function p(b,a){for(var e=Array(b.length-1),g=1;g<b.length;++g)for(var h=e[g-1]=Array(b.length-1),f=0,l=0;f<b.length;++f)f!==a&&(h[l++]=b[g][f]);return e}function m(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",
m(b.slice(0,a)),",",m(b.slice(a)),")"].join("")}function b(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var d=[],e=0;e<a.length;++e)d.push(["scale(",m(b(p(a,e))),",",e&1?"-":"",a[0][e],")"].join(""));return d}function g(a){for(var d=[],e=[],g=Array(a),f=0;f<a;++f){g[f]=Array(a);for(var l=0;l<a;++l)g[f][l]=["m",l,"[",a-f-1,"]"].join("")}f=[];for(l=0;l<a;++l)0===(l&1)?d.push.apply(d,b(p(g,l))):e.push.apply(e,b(p(g,l))),f.push("m"+l);d=
m(d);e=m(e);a="orientation"+a+"Exact";a=["function ",a,"(",f.join(),"){var p=",d,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,h,r,u)}function l(b){var a=e[b.length];a||(a=e[b.length]=g(b.length));return a.apply(void 0,b)}var h=a("two-product"),y=a("robust-sum"),r=a("robust-scale"),u=a("robust-subtract"),v=g(3),n=g(4),e=[function(){return 0},function(){return 0},function(b,a){return a[0]-b[0]},function(b,a,e){var g=(b[1]-e[1])*
(a[0]-e[0]),h=(b[0]-e[0])*(a[1]-e[1]),f=g-h;if(0<g){if(0>=h)return f;g+=h}else if(0>g){if(0<=h)return f;g=-(g+h)}else return f;g*=3.3306690738754716E-16;return f>=g||f<=-g?f:v(b,a,e)},function(b,a,e,g){var h=b[0]-g[0],f=a[0]-g[0],l=e[0]-g[0],m=b[1]-g[1],k=a[1]-g[1],p=e[1]-g[1],v=b[2]-g[2],r=a[2]-g[2],u=e[2]-g[2],y=f*p,C=l*k,l=l*m,p=h*p,h=h*k,m=f*m,f=v*(y-C)+r*(l-p)+u*(h-m),v=7.771561172376103E-16*((Math.abs(y)+Math.abs(C))*Math.abs(v)+(Math.abs(l)+Math.abs(p))*Math.abs(r)+(Math.abs(h)+Math.abs(m))*
Math.abs(u));return f>v||-f>v?f:n(b,a,e,g)}];(function(){for(;5>=e.length;)e.push(g(e.length));for(var b=[],a=["slow"],h=0;5>=h;++h)b.push("a"+h),a.push("o"+h);for(var n=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],h=2;5>=h;++h)n.push("case ",h,":return o",h,"(",b.slice(0,h).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");a.push(n.join(""));b=Function.apply(void 0,
a);f.exports=b.apply(void 0,[l].concat(e));for(h=0;5>=h;++h)f.exports[h]=e[h]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":118}],104:[function(a,f,k){var p=a("robust-sum"),m=a("robust-scale");f.exports=function(b,a){if(1===b.length)return m(a,b[0]);if(1===a.length)return m(b,a[0]);if(0===b.length||0===a.length)return[0];var f=[0];if(b.length<a.length)for(var h=0;h<b.length;++h)f=p(f,m(a,b[h]));else for(h=0;h<a.length;++h)f=p(f,m(b,a[h]));return f}},{"robust-scale":105,
"robust-sum":108}],105:[function(a,f,k){var p=a("two-product"),m=a("two-sum");f.exports=function(b,a){var f=b.length;if(1===f)return f=p(b[0],a),f[0]?f:[f[1]];var h=Array(2*f),k=[.1,.1],r=[.1,.1],u=0;p(b[0],a,k);k[0]&&(h[u++]=k[0]);for(var v=1;v<f;++v){p(b[v],a,r);m(k[1],r[0],k);k[0]&&(h[u++]=k[0]);var n=r[1],e=k[1],c=n+e,n=e-(c-n);k[1]=c;n&&(h[u++]=n)}k[1]&&(h[u++]=k[1]);0===u&&(h[u++]=0);h.length=u;return h}},{"two-product":118,"two-sum":119}],106:[function(a,f,k){f.exports=function(a,b,g,f){var h=
p(a,g,f),k=p(b,g,f);if(0<h&&0<k||0>h&&0>k)return!1;var r=p(g,a,b),u=p(f,a,b);if(0<r&&0<u||0>r&&0>u)return!1;if(0===h&&0===k&&0===r&&0===u){a:{for(h=0;2>h;++h){var k=a[h],r=b[h],u=Math.max(k,r),v=g[h],n=f[h],e=Math.min(v,n);if(Math.max(v,n)<Math.min(k,r)||u<e){a=!1;break a}}a=!0}return a}return!0};var p=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,f,k){f.exports=function(a,f){var b=a.length|0,g=f.length|0;if(1===b&&1===g){var g=a[0],l=-f[0],b=g+l,h=b-g,b=(g=g-(b-h)+(l-h))?
[g,b]:[b];return b}var l=Array(b+g),k=h=0,r=0,u=Math.abs,v=a[k],n=u(v),e=-f[r],c=u(e),d,q;n<c?(q=v,k+=1,k<b&&(v=a[k],n=u(v))):(q=e,r+=1,r<g&&(e=-f[r],c=u(e)));k<b&&n<c||r>=g?(d=v,k+=1,k<b&&(v=a[k],n=u(v))):(d=e,r+=1,r<g&&(e=-f[r],c=u(e)));var w=d+q;q-=w-d;for(var x=w,E;k<b&&r<g;)n<c?(d=v,k+=1,k<b&&(v=a[k],n=u(v))):(d=e,r+=1,r<g&&(e=-f[r],c=u(e))),w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=d;for(;k<b;)d=v,w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=
d,k+=1,k<b&&(v=a[k]);for(;r<g;)d=e,w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=d,r+=1,r<g&&(e=-f[r]);q&&(l[h++]=q);x&&(l[h++]=x);h||(l[h++]=0);l.length=h;return l}},{}],108:[function(a,f,k){f.exports=function(a,f){var b=a.length|0,g=f.length|0;if(1===b&&1===g){var g=a[0],l=f[0],b=g+l,h=b-g,b=(g=g-(b-h)+(l-h))?[g,b]:[b];return b}var l=Array(b+g),k=h=0,r=0,u=Math.abs,v=a[k],n=u(v),e=f[r],c=u(e),d,q;n<c?(q=v,k+=1,k<b&&(v=a[k],n=u(v))):(q=e,r+=1,r<g&&(e=f[r],c=u(e)));k<b&&n<c||
r>=g?(d=v,k+=1,k<b&&(v=a[k],n=u(v))):(d=e,r+=1,r<g&&(e=f[r],c=u(e)));var w=d+q;q-=w-d;for(var x=w,E;k<b&&r<g;)n<c?(d=v,k+=1,k<b&&(v=a[k],n=u(v))):(d=e,r+=1,r<g&&(e=f[r],c=u(e))),w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=d;for(;k<b;)d=v,w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=d,k+=1,k<b&&(v=a[k]);for(;r<g;)d=e,w=d+q,d=w-d,(d=q-d)&&(l[h++]=d),d=x+w,E=d-x,q=d-E,w-=E,x-=q,q=x+w,x=d,r+=1,r<g&&(e=f[r]);q&&(l[h++]=q);x&&(l[h++]=x);h||(l[h++]=0);l.length=
h;return l}},{}],109:[function(a,f,k){f.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,f,k){arguments[4][52][0].apply(k,arguments)},{dup:52}],111:[function(a,f,k){function p(a,b){var e=a.length,c=a.length-b.length,d=Math.min;if(c)return c;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:d(a[0],a[1])-d(b[0],b[1]);case 3:var c=a[0]+a[1],g=b[0]+b[1];if(e=c+a[2]-(g+b[2]))return e;var f=d(a[0],a[1]),h=d(b[0],b[1]);return(e=d(f,a[2])-d(h,b[2]))?e:
d(f+a[2],c)-d(h+b[2],g);default:d=a.slice(0);d.sort();g=b.slice(0);g.sort();for(f=0;f<e;++f)if(c=d[f]-g[f])return c;return 0}}function m(a,b){return p(a[0],b[0])}function b(a,b){if(b){for(var e=a.length,c=Array(e),d=0;d<e;++d)c[d]=[a[d],b[d]];c.sort(m);for(d=0;d<e;++d)a[d]=c[d][0],b[d]=c[d][1]}else a.sort(p);return a}function g(a){if(0===a.length)return[];for(var b=1,e=a.length,c=1;c<e;++c){var d=a[c];p(d,a[c-1])&&(c===b?b++:a[b++]=d)}a.length=b;return a}function l(a,b){for(var e=0,c=a.length-1,d=
-1;e<=c;){var g=e+c>>1,f=p(a[g],b);0>=f?(0===f&&(d=g),e=g+1):0<f&&(c=g-1)}return d}function h(a,b){for(var e=Array(a.length),c=0,d=e.length;c<d;++c)e[c]=[];for(var d=[],c=0,g=b.length;c<g;++c)for(var f=b[c],h=f.length,k=1,m=1<<h;k<m;++k){d.length=r.popCount(k);for(var u=0,y=0;y<h;++y)k&1<<y&&(d[u++]=f[y]);u=l(a,d);if(!(0>u))for(;!(e[u++].push(c),u>=a.length||0!==p(a[u],d)););}return e}function y(a,g){if(0>g)return[];for(var e=[],c=(1<<g+1)-1,d=0;d<a.length;++d)for(var f=a[d],h=c;h<1<<f.length;h=r.nextCombination(h)){for(var l=
Array(g+1),k=0,m=0;m<f.length;++m)h&1<<m&&(l[k++]=f[m]);e.push(l)}return b(e)}"use restrict";var r=a("bit-twiddle"),u=a("union-find");k.dimension=function(a){for(var b=0,e=Math.max,c=0,d=a.length;c<d;++c)b=e(b,a[c].length);return b-1};k.countVertices=function(a){for(var b=-1,e=Math.max,c=0,d=a.length;c<d;++c)for(var g=a[c],f=0,h=g.length;f<h;++f)b=e(b,g[f]);return b+1};k.cloneCells=function(a){for(var b=Array(a.length),e=0,c=a.length;e<c;++e)b[e]=a[e].slice(0);return b};k.compareCells=p;k.normalize=
b;k.unique=g;k.findCell=l;k.incidence=h;k.dual=function(a,b){if(!b)return h(g(y(a,0)),a,0);for(var e=Array(b),c=0;c<b;++c)e[c]=[];for(var c=0,d=a.length;c<d;++c)for(var f=a[c],l=0,k=f.length;l<k;++l)e[f[l]].push(c);return e};k.explode=function(a){for(var g=[],e=0,c=a.length;e<c;++e)for(var d=a[e],f=d.length|0,h=1,l=1<<f;h<l;++h){for(var k=[],m=0;m<f;++m)h>>>m&1&&k.push(d[m]);g.push(k)}return b(g)};k.skeleton=y;k.boundary=function(a){for(var g=[],e=0,c=a.length;e<c;++e)for(var d=a[e],f=0,h=d.length;f<
h;++f){for(var l=Array(d.length-1),k=0,m=0;k<h;++k)k!==f&&(l[m++]=d[k]);g.push(l)}return b(g)};k.connectedComponents=function(a,f){if(f){for(var e=new u(f),c=0;c<a.length;++c)for(var d=a[c],h=0;h<d.length;++h)for(var k=h+1;k<d.length;++k)e.link(d[h],d[k]);d=[];h=e.ranks;for(c=0;c<h.length;++c)h[c]=-1;for(c=0;c<a.length;++c)k=e.find(a[c][0]),0>h[k]?(h[k]=d.length,d.push([a[c].slice(0)])):d[h[k]].push(a[c].slice(0));return d}e=g(b(y(a,0)));c=new u(e.length);for(d=0;d<a.length;++d)for(h=a[d],k=0;k<h.length;++k)for(var m=
l(e,[h[k]]),p=k+1;p<h.length;++p)c.link(m,l(e,[h[p]]));h=[];k=c.ranks;for(d=0;d<k.length;++d)k[d]=-1;for(d=0;d<a.length;++d)m=c.find(l(e,[a[d][0]])),0>k[m]?(k[m]=h.length,h.push([a[d].slice(0)])):h[k[m]].push(a[d].slice(0));return h}},{"bit-twiddle":110,"union-find":122}],112:[function(a,f,k){f.exports=function(a,g,f){function h(a){if(t[a])return Infinity;var b=w[a],c=x[a];if(0>b||0>c)return Infinity;b=g[b];c=g[c];return Math.abs(p(g[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}
function k(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function r(a){for(var b=E[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(d<I){var f=E[A[d]];f<c&&(g=d,c=f)}e<I&&E[A[e]]<c&&(g=e);if(g===a)return a;k(a,g);a=g}}function u(a){for(var b=E[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[A[c]])k(a,c),a=c;else return a}}function v(){if(0<I){var a=A[0];k(0,I-1);--I;r(0);return a}return-1}function n(a,b){var c=A[a];if(E[c]===b)return a;E[c]=-Infinity;u(a);v();E[c]=b;I+=1;return u(I-1)}function e(a){if(!t[a]){t[a]=
!0;var b=w[a];a=x[a];0<=w[a]&&(w[a]=b);0<=x[b]&&(x[b]=a);0<=B[b]&&n(B[b],h(b));0<=B[a]&&n(B[a],h(a))}}function c(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=a[d];if(!t[d]||0>e||e===d)break;d=e;e=a[d];if(!t[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var d=g.length,q=a.length,w=Array(d),x=Array(d),E=Array(d),t=Array(d),z=0;z<d;++z)w[z]=x[z]=-1,E[z]=Infinity,t[z]=!1;for(z=0;z<q;++z){var D=a[z];if(2!==D.length)throw Error("Input must be a graph");var G=D[1],
D=D[0];x[D]=-1!==x[D]?-2:G;w[G]=-1!==w[G]?-2:D}for(var A=[],B=Array(d),z=0;z<d;++z)Infinity>(E[z]=h(z))?(B[z]=A.length,A.push(z)):B[z]=-1;for(var I=A.length,z=I>>1;0<=z;--z)r(z);for(;;){z=v();if(0>z||E[z]>f)break;e(z)}f=[];for(z=0;z<d;++z)t[z]||(B[z]=f.length,f.push(g[z].slice()));var H=[];a.forEach(function(a){var b=c(w,a[0]);a=c(x,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&H.push([b,a]))});m.unique(m.normalize(H));return{positions:f,edges:H}};var p=a("robust-orientation"),m=a("simplicial-complex")},
{"robust-orientation":103,"simplicial-complex":111}],113:[function(a,f,k){function p(a,g){var f,h;if(g[0][0]<g[1][0])f=g[0],h=g[1];else if(g[0][0]>g[1][0])f=g[1],h=g[0];else{f=Math.min(a[0][1],a[1][1]);h=Math.max(a[0][1],a[1][1]);var k=Math.min(g[0][1],g[1][1]),p=Math.max(g[0][1],g[1][1]);return h<k?h-k:f>p?f-p:h-p}a[0][1]<a[1][1]?(p=a[0],k=a[1]):(p=a[1],k=a[0]);return(p=m(h,f,p))?p:(p=m(h,f,k))?p:k-h}f.exports=function(a,g){var f,h;if(g[0][0]<g[1][0])f=g[0],h=g[1];else if(g[0][0]>g[1][0])f=g[1],
h=g[0];else return p(g,a);var k,r;if(a[0][0]<a[1][0])k=a[0],r=a[1];else if(a[0][0]>a[1][0])k=a[1],r=a[0];else return-p(a,g);var u=m(f,h,r),v=m(f,h,k);if(0>u){if(0>=v)return u}else if(0<u){if(0<=v)return u}else if(v)return v;u=m(r,k,h);v=m(r,k,f);if(0>u){if(0>=v)return u}else if(0<u){if(0<=v)return u}else if(v)return v;return h[0]-r[0]};var m=a("robust-orientation")},{"robust-orientation":103}],114:[function(a,f,k){arguments[4][84][0].apply(k,arguments)},{dup:84}],115:[function(a,f,k){function p(a,
b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function m(a,b){return a.y-b}function b(a,g){for(var e=null;a;){var c=a.key,d,f;c[0][0]<c[1][0]?(d=c[0],f=c[1]):(d=c[1],f=c[0]);d=r(d,f,g);if(0>d)a=a.left;else if(0<d)if(g[0]!==c[1][0])e=a,a=a.right;else{if(c=b(a.right,g))return c;a=a.left}else{if(g[0]!==c[1][0])return a;if(c=b(a.right,g))return c;a=a.left}}return e}function g(a,b,e,c){this.y=a;this.index=b;this.start=e;this.closed=c}function l(a,b,e,c){this.x=a;this.segment=b;this.create=e;this.index=
c}f.exports=function(a){for(var b=a.length,e=2*b,c=Array(e),d=0;d<b;++d){var f=a[d],h=f[0][0]<f[1][0];c[2*d]=new l(f[0][0],f,h,d);c[2*d+1]=new l(f[1][0],f,!h,d)}c.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(u);b=[];f=[];h=[];for(d=0;d<e;){for(var k=c[d].x,m=[];d<e;){var r=c[d];if(r.x!==k)break;d+=1;r.segment[0][0]===r.x&&r.segment[1][0]===r.x?r.create&&(r.segment[0][1]<r.segment[1][1]?
(m.push(new g(r.segment[0][1],r.index,!0,!0)),m.push(new g(r.segment[1][1],r.index,!1,!1))):(m.push(new g(r.segment[1][1],r.index,!0,!1)),m.push(new g(r.segment[0][1],r.index,!1,!0)))):a=r.create?a.insert(r.segment,r.index):a.remove(r.segment)}b.push(a.root);f.push(k);h.push(m)}return new p(b,f,h)};var h=a("binary-search-bounds"),y=a("functional-red-black-tree"),r=a("robust-orientation"),u=a("./lib/order-segments");p.prototype.castUp=function(a){var g=h.le(this.coordinates,a[0]);if(0>g)return-1;var e=
b(this.slabs[g],a),c=-1;e&&(c=e.value);if(this.coordinates[g]===a[0]){var d=null;e&&(d=e.key);0<g&&(e=b(this.slabs[g-1],a))&&(d?0<u(e.key,d)&&(d=e.key,c=e.value):(c=e.value,d=e.key));e=this.horizontal[g];if(0<e.length){var f=h.ge(e,a[1],m);if(f<e.length){g=e[f];if(a[1]===g.y){if(g.closed)return g.index;for(;f<e.length-1&&e[f+1].y===a[1];)if(f+=1,g=e[f],g.closed)return g.index;if(g.y===a[1]&&!g.start){f+=1;if(f>=e.length)return c;g=e[f]}}g.start?d?(a=r(d[0],d[1],[a[0],g.y]),d[0][0]>d[1][0]&&(a=-a),
0<a&&(c=g.index)):c=g.index:g.y!==a[1]&&(c=g.index)}}}return c}},{"./lib/order-segments":113,"binary-search-bounds":114,"functional-red-black-tree":77,"robust-orientation":103}],116:[function(a,f,k){function p(a,g){var f=a.length,k=["'use strict';"],l="surfaceNets"+a.join("_")+"d"+g;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===g&&k.push("getters:[0],");for(var n=[],e=[],c=0;c<f;++c)n.push("d"+
c),e.push("d"+c);for(c=0;c<1<<f;++c)n.push("v"+c),e.push("v"+c);for(c=0;c<1<<f;++c)n.push("p"+c),e.push("p"+c);n.push("a","b","c");e.push("a","c");k.push("vertex:function vertexFunc(",n.join(),"){");n=[];for(c=0;c<1<<f;++c)n.push("(p"+c+"<<"+c+")");k.push("var m=(",n.join("+"),")|0;if(m===0||m===",(1<<(1<<f))-1,"){return}");var n=[],d=[];128>=1<<(1<<f)?(k.push("switch(m){"),d=k):k.push("switch(m>>>7){");for(c=0;c<1<<(1<<f);++c){128<1<<(1<<f)&&0===c%128&&(0<n.length&&d.push("}}"),d="vExtra"+n.length,
k.push("case ",c>>>7,":",d,"(m&0x7f,",e.join(),");break;"),d=["function ",d,"(m,",e.join(),"){switch(m){"],n.push(d));d.push("case ",c&127,":");for(var p=Array(f),w=Array(f),x=Array(f),E=Array(f),t=0,z=0;z<f;++z)p[z]=[],w[z]=[],x[z]=0,E[z]=0;for(z=0;z<1<<f;++z)for(var D=0;D<f;++D){var G=z^1<<D;if(!(G>z)&&!(c&1<<G)!==!(c&1<<z)){var A=1;c&1<<G?w[D].push("v"+G+"-v"+z):(w[D].push("v"+z+"-v"+G),A=-A);0>A?(p[D].push("-v"+z+"-v"+G),x[D]+=2):(p[D].push("v"+z+"+v"+G),x[D]-=2);t+=1;for(A=0;A<f;++A)A!==D&&(G&
1<<A?E[A]+=1:--E[A])}}z=[];for(D=0;D<f;++D)0===p[D].length?z.push("d"+D+"-0.5"):(G="",0>x[D]?G=x[D]+"*c":0<x[D]&&(G="+"+x[D]+"*c"),z.push("d"+D+"-"+(.5+E[D]/t*.5)+"-"+p[D].length/t*.5+"*("+p[D].join("+")+G+")/("+w[D].join("+")+")"));d.push("a.push([",z.join(),"]);","break;")}k.push("}},");0<n.length&&d.push("}}");e=[];for(c=0;c<1<<f-1;++c)e.push("v"+c);e.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",e.join(),"){");f=b(f-1);k.push("if(p0){b.push(",f.map(function(a){return"["+
a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",f.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",l,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",l,";");for(c=0;c<n.length;++c)k.push(n[c].join(""));return(new Function("genContour",k.join("")))(m)}f.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var f=g(a,
b),k=f.length,m=Array(k),n=Array(k),e=0;e<k;++e)m[e]=[f[e]],n[e]=[e];return{positions:m,cells:n}}f=a.order.join()+"-"+a.dtype;k=l[f];b=+b||0;k||(k=l[f]=p(a.order,a.dtype));return k(a,b)};var m=a("ndarray-extract-contour"),b=a("triangulate-hypercube"),g=a("zero-crossings"),l={}},{"ndarray-extract-contour":87,"triangulate-hypercube":117,"zero-crossings":127}],117:[function(a,f,k){f.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var f=Math.round(b(a+1))|0,h=[],k=0;k<f;++k){for(var r=p.unrank(a,
k),u=[0],v=0,n=0;n<r.length;++n)v+=1<<r[n],u.push(v);1>m(r)&&(u[0]=v,u[a]=0);h.push(u)}return h};var p=a("permutation-rank"),m=a("permutation-parity"),b=a("gamma")},{gamma:78,"permutation-parity":91,"permutation-rank":92}],118:[function(a,f,k){f.exports=function(a,b,g){var f=a*b,h=p*a,h=h-(h-a);a-=h;var k=p*b,k=k-(k-b);b-=k;b=a*b-(f-h*k-a*k-h*b);return g?(g[0]=b,g[1]=f,g):[b,f]};var p=+(Math.pow(2,27)+1)},{}],119:[function(a,f,k){f.exports=function(a,f,b){var g=a+f,k=g-a;f-=k;a-=g-k;return b?(b[0]=
a+f,b[1]=g,b):[a+f,g]}},{}],120:[function(a,f,k){function p(a,b,g){var f=a[g]|0;if(0>=f)return[];var h=Array(f),k;if(g===a.length-1)for(k=0;k<f;++k)h[k]=b;else for(k=0;k<f;++k)h[k]=p(a,b,g+1);return h}f.exports=function(a,b){"undefined"===typeof b&&(b=0);switch(typeof a){case "number":if(0<a){var g=a|0,f=b,h,k;h=Array(g);for(k=0;k<g;++k)h[k]=f;return h}break;case "object":if("number"===typeof a.length)return p(a,b,0)}return[]}},{}],121:[function(a,f,k){(function(f,m){function b(a){if(a){var b=w.log2(a.length||
a.byteLength);z[b].push(a)}}function g(a){a=w.nextPow2(a);var b=w.log2(a),b=z[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function l(a){return new Uint8Array(g(a),0,a)}function h(a){return new Uint16Array(g(2*a),0,a)}function y(a){return new Uint32Array(g(4*a),0,a)}function r(a){return new Int8Array(g(a),0,a)}function u(a){return new Int16Array(g(2*a),0,a)}function v(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function e(a){return new Float64Array(g(8*
a),0,a)}function c(a){return E?new Uint8ClampedArray(g(a),0,a):l(a)}function d(a){return new DataView(g(a),0,a)}function q(a){a=w.nextPow2(a);var b=w.log2(a),b=D[b];return 0<b.length?b.pop():new m(a)}var w=a("bit-twiddle"),x=a("dup");f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var E="undefined"!==typeof Uint8ClampedArray,
t=f.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=x([32,0]));t.BUFFER||(t.BUFFER=x([32,0]));var z=t.DATA,D=t.BUFFER;k.free=function(a){if(m.isBuffer(a))D[w.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=w.log2(a.length||a.byteLength)|0;z[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){b(a.buffer)};k.freeArrayBuffer=
b;k.freeBuffer=function(a){D[w.log2(a.length)].push(a)};k.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case "uint8":return l(a);case "uint16":return h(a);case "uint32":return y(a);case "int8":return r(a);case "int16":return u(a);case "int32":return v(a);case "float":case "float32":return n(a);case "double":case "float64":return e(a);case "uint8_clamped":return c(a);case "buffer":return q(a);case "data":case "dataview":return d(a);default:return null}};k.mallocArrayBuffer=
g;k.mallocUint8=l;k.mallocUint16=h;k.mallocUint32=y;k.mallocInt8=r;k.mallocInt16=u;k.mallocInt32=v;k.mallocFloat32=k.mallocFloat=n;k.mallocFloat64=k.mallocDouble=e;k.mallocUint8Clamped=c;k.mallocDataView=d;k.mallocBuffer=q;k.clearCache=function(){for(var a=0;32>a;++a)t.UINT8[a].length=0,t.UINT16[a].length=0,t.UINT32[a].length=0,t.INT8[a].length=0,t.INT16[a].length=0,t.INT32[a].length=0,t.FLOAT[a].length=0,t.DOUBLE[a].length=0,t.UINT8C[a].length=0,z[a].length=0,D[a].length=0}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:120}],122:[function(a,f,k){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";f.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};p.prototype.find=function(a){for(var b=
this.roots;b[a]!==a;){var g=b[a];b[a]=b[g];a=g}return a};p.prototype.link=function(a,b){var g=this.find(a),f=this.find(b);if(g!==f){var h=this.ranks,k=this.roots,p=h[g],u=h[f];p<u?k[g]=f:u<p?k[f]=g:(k[f]=g,++h[g])}}},{}],123:[function(a,f,k){f.exports=function(a,f,b){if(0===a.length)return a;if(f){b||a.sort(f);b=1;for(var g=a.length,k=a[0],h=a[0],y=1;y<g;++y)h=k,k=a[y],f(k,h)&&(y===b?b++:a[b++]=k);a.length=b;return a}b||a.sort();f=1;b=a.length;g=a[0];k=a[0];for(h=1;h<b;++h)k=g,g=a[h],g!==k&&(h===
f?f++:a[f++]=g);a.length=f;return a}},{}],124:[function(a,f,k){f.exports=function(a,f){if("object"!==typeof f||null===f)f={};return p(a,f.canvas||m,f.context||b,f)};var p=a("./lib/vtext"),m=null,b=null;"undefined"!==typeof document&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,b=m.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,f,k){function p(a,b,e){for(var c=b.textAlign||"start",d=b.textBaseline||"alphabetic",f=[1073741824,1073741824],g=[0,0],h=a.length,k=0;k<h;++k)for(var l=
a[k],m=0;2>m;++m)f[m]=Math.min(f[m],l[m])|0,g[m]=Math.max(g[m],l[m])|0;var p=0;switch(c){case "center":p=-.5*(f[0]+g[0]);break;case "right":case "end":p=-g[0];break;case "left":case "start":p=-f[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+c+"'");}var r=0;switch(d){case "hanging":case "top":r=-f[1];break;case "middle":r=-.5*(f[1]+g[1]);break;case "alphabetic":case "ideographic":r=-3*e;break;case "bottom":r=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+
d+"'");}var u=1/e;"lineHeight"in b?u*=+b.lineHeight:"width"in b?u=b.width/(g[0]-f[0]):"height"in b&&(u=b.height/(g[1]-f[1]));return a.map(function(a){return[u*(a[0]+p),u*(a[1]+r)]})}function m(a,b,e,c){a=g(a,128);c=c?h(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};e=p(c.positions,b,e);a=c.edges;c="ccw"===b.orientation;y(e,a);if(b.polygons||b.polygon||b.polyline){b=u(a,e);a=Array(b.length);for(var d=0;d<b.length;++d){for(var f=b[d],k=Array(f.length),l=0;l<f.length;++l){for(var m=f[l],
t=Array(m.length),z=0;z<m.length;++z)t[z]=e[m[z]].slice();c&&t.reverse();k[l]=t}a[d]=k}return a}return b.triangles||b.triangulate||b.triangle?{cells:r(e,a,{delaunay:!1,exterior:!1,interior:!0}),positions:e}:{edges:a,positions:e}}function b(a,b,e){try{return m(a,b,e,!0)}catch(c){}try{return m(a,b,e,!1)}catch(c){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}f.exports=function(a,f,e,c){var d=c.size||64;e.font=d+"px "+
(c.font||"normal");e.textAlign="start";e.textBaseline="alphabetic";e.direction="ltr";var g;g=Math.ceil(e.measureText(a).width+2*d)|0;if(8192<g)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var h=3*d;f.height<h&&(f.height=h);e.fillStyle="#000";e.fillRect(0,0,f.width,f.height);e.fillStyle="#fff";e.fillText(a,d,2*d);a=e.getImageData(0,0,g,h);g=l(a.data,[h,g,4]).pick(-1,-1,0).transpose(1,0);return b(g,c,d)};f.exports.processPixels=b;var g=a("surface-nets"),l=a("ndarray"),
h=a("simplify-planar-graph"),y=a("clean-pslg"),r=a("cdt2d"),u=a("planar-graph-to-polyline")},{cdt2d:62,"clean-pslg":67,ndarray:88,"planar-graph-to-polyline":95,"simplify-planar-graph":112,"surface-nets":116}],126:[function(a,f,k){f.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":72}],127:[function(a,f,k){f.exports=function(a,b){var f=[];b=+b||0;p(a.hi(a.shape[0]-1),f,b);return f};var p=a("./lib/zc-core")},
{"./lib/zc-core":126}],128:[function(a,f,k){var p=a("./lib/extend"),m=a("./lib/context"),b=a("./lib/strings"),g=a("./lib/extension"),l=a("./lib/limits"),h=a("./lib/buffer"),y=a("./lib/elements"),r=a("./lib/texture"),u=a("./lib/renderbuffer"),v=a("./lib/framebuffer"),n=a("./lib/uniform"),e=a("./lib/attribute"),c=a("./lib/shader"),d=a("./lib/draw"),q=a("./lib/state"),w=a("./lib/compile"),x=a("./lib/read"),E=a("./lib/dynamic"),t=a("./lib/raf"),z=a("./lib/clock");f.exports=function(){function a(){ja=
t.next(a);O.count+=1;if(O.width!==K.drawingBufferWidth||O.height!==K.drawingBufferHeight)O.width=K.drawingBufferWidth,O.height=K.drawingBufferHeight,R.notifyViewportChanged();var b=z();O.dt=b-O.t;O.t=b;W.poll();for(var c=0;c<fa.length;++c)(0,fa[c])(O.count,O.t,O.dt);O.renderTime=z()-b}function f(){ja&&(t.cancel(a),ja=0)}function k(a){f();a.preventDefault();if(J.onContextLost)J.onContextLost()}function B(b){K.getError();L.refresh();Q.refresh();W.refresh();F.refresh();P.refresh();da.refresh();R.refresh();
if(J.onContextRestored)J.onContextRestored();a()}function I(a){function b(a){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];E.isDynamic(f)?(c=!0,e[b]=E.unbox(f,b)):d[b]=f});return{dynamic:e,"static":d}}var c=!1,d=b(a.uniforms||{}),e=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=p({},a);delete c.uniforms;delete c.attributes;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");
b("sample");return c}(a));var d=V.command(a["static"],d["static"],e["static"],a.dynamic,d.dynamic,e.dynamic,c),f=d.draw,g=d.batch,h=d.scope,k=[];return function(a,b){if("number"===typeof a){for(var c=a|0;k.length<c;)k.push(null);return g(a|0,k)}return Array.isArray(a)?g(a.length,a):"function"===typeof a?h(null,a):"function"===typeof b?h(a,b):f(a)}}function H(){P.poll();R.poll()}var C=m(Array.prototype.slice.call(arguments)),K=C.gl,J=C.options,C=b(),L=g(K),T=L.extensions,M={width:K.drawingBufferWidth,
height:K.drawingBufferHeight},N=l(K,T),Q=h(K),S=y(K,T,Q),ba=n(C),ga=e(K,T,N,Q,C),da=c(K,ga,ba,function(a){return V.draw(a)},C),X=d(K,T,Q),W=r(K,T,N,H,M),F=u(K,T,N),P=v(K,T,N,W,F),O={count:0,start:z(),dt:0,t:z(),renderTime:0,width:K.drawingBufferWidth,height:K.drawingBufferHeight,pixelRatio:J.pixelRatio},R=q(K,P,M),M=x(K,H,M),V=w(K,C,T,N,Q,S,W,P,R,ba,ga,da,X,O,H),ea=K.canvas,fa=[],ja=0;ea&&(ea.addEventListener("webglcontextlost",k,!1),ea.addEventListener("webglcontextrestored",B,!1));return p(I,{clear:function(a){var b=
0;H();var c=a.color;c&&(K.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(K.clearDepth(+a.depth),b|=256);"stencil"in a&&(K.clearStencil(a.stencil|0),b|=1024);K.clear(b)},prop:E.define,draw:I({}),elements:function(a){return S.create(a)},buffer:function(a){return Q.create(a,34962)},texture:function(a){return W.create(a,3553)},cube:function(a){return 6===arguments.length?W.create(Array.prototype.slice.call(arguments),34067):W.create(a,34067)},renderbuffer:function(a){return F.create(a)},
framebuffer:function(a){return P.create(a)},framebufferCube:function(a){},frame:function(b){fa.push(b);!ja&&0<fa.length&&a();return{cancel:function(){var a=fa.find(function(a){return a===b});0>a||(fa.splice(a,1),0>=fa.length&&f())}}},stats:O,limits:N,read:M,destroy:function(){f();ea&&(ea.removeEventListener("webglcontextlost",k),ea.removeEventListener("webglcontextrestored",B));da.clear();P.clear();F.clear();W.clear();Q.clear();if(J.onDestroy)J.onDestroy()}})}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/clock":4,"./lib/compile":6,"./lib/context":10,"./lib/draw":11,"./lib/dynamic":12,"./lib/elements":13,"./lib/extend":14,"./lib/extension":15,"./lib/framebuffer":16,"./lib/limits":19,"./lib/raf":22,"./lib/read":23,"./lib/renderbuffer":24,"./lib/shader":25,"./lib/state":27,"./lib/strings":28,"./lib/texture":29,"./lib/uniform":31}]},{},[1]);

        </script>
        </body>
      </html>