<!DOCTYPE html>
      <html>
        <head>
          <title>example/text.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,m=[];!(g=a.next()).done;)m.push(g.value);return m};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function m(){}m.prototype=g.prototype;a.prototype=new m;a.prototype.constructor=a;for(var t in g)if($jscomp.global.Object.defineProperties){var r=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);r&&$jscomp.global.Object.defineProperty(a,t,r)}else a[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var m=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},r=(t.next=function(){if(m<a.length){var f=m++;return{value:g(f,a[f]),done:!1}}r.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return r},t);return r};
$jscomp.array.findInternal_=function(a,g,m){a instanceof String&&(a=String(a));for(var t=a.length,r=0;r<t;r++){var f=a[r];if(g.call(m,f,r,a))return{i:r,v:f}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,m){g=void 0===g?function(f){return f}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var r;!(r=a.next()).done;)t.push(g.call(m,r.value))}else{r=a.length;for(var f=0;f<r;f++)t.push(g.call(m,a[f]))}return t};$jscomp.array.of=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,m){var t=this.length;a=Number(a);g=Number(g);m=Number(null!=m?m:t);if(a<g)for(m=Math.min(m,t);g<m;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(m=Math.min(m,t+g-a),a+=m-g;m>g;)--m in this?this[--a]=this[m]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,m){null!=m&&a.length||(m=this.length||0);m=Number(m);for(g=Number((void 0===g?0:g)||0);g<m;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),m=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=m.get(g)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var t=m.entries(),r=t.next();if(r.done||r.value[0]!=g||"s"!=r.value[1])return!1;r=t.next();return r.done||4!=r.value[0].x||"t"!=r.value[1]||!t.next().done?!1:!0}catch(f){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var m=this.maybeGetEntry_(a),t=m.id,r=m.list,m=m.entry;r||(r=this.data_[t]=[]);m?m.value=g:(m={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},r.push(m),this.head_.previous.next=m,this.head_.previous=m,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var m=g.list,t=g.index;return(g=g.entry)&&m?(m.splice(t,1),m.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),m=this.data_[g];if(m)for(var t=0;t<m.length;t++){var r=m[t];if(a!==a&&r.key!==r.key||a===r.key)return{id:g,list:m,index:t,entry:r}}return{id:g,list:m,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var m=$jscomp.makeIterator(this.entries()),t=m.next();!t.done;t=m.next())t=t.value,a.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,m=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(m){for(;m.head!=g.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:a(m)};m=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,m){Object.defineProperty(a,g,{value:String(m)})}:function(a,g,m){a[g]=String(m)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var m=a&65535,t=g&65535;return m*t+((a>>>16&65535)*t+m*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,r=0,f=1;r!=t;)g*=a,f*=-1,t=(r=t)+f*g/++m;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,r=0;r!=t;)g*=a/++m,t=(r=t)+g;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,m){for(var t=[],r=2;r<arguments.length;++r)t[r-2]=arguments[r];a=Number(a);g=Number(g);for(var f=Math.max(Math.abs(a),Math.abs(g)),d=$jscomp.makeIterator(t),r=d.next();!r.done;r=d.next())f=Math.max(f,Math.abs(r.value));if(1E100<f||1E-100>f){a/=f;g/=f;d=a*a+g*g;t=$jscomp.makeIterator(t);for(r=t.next();!r.done;r=t.next())r=r.value,r=Number(r)/f,d+=r*r;return Math.sqrt(d)*f}f=a*a+g*g;t=$jscomp.makeIterator(t);for(r=t.next();!r.done;r=t.next())r=r.value,r=Number(r),f+=
r*r;return Math.sqrt(f)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var m=[],t=1;t<arguments.length;++t)m[t-1]=arguments[t];m=$jscomp.makeIterator(m);for(t=m.next();!t.done;t=m.next())if(t=t.value)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),m=a.next();if(m.done||m.value[0]!=g||m.value[1]!=g)return!1;m=a.next();return m.done||m.value[0]==g||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var m=this;this.map_.forEach(function(t){return a.call(g,t,t,m)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];for(var m="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?m+=String.fromCharCode(t):(t-=65536,m+=String.fromCharCode(t>>>10&1023|55296),m+=String.fromCharCode(t&1023|56320))}return m};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var m="";a;)if(a&1&&(m+=g),a>>>=1)g+=g;return m};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),m=g.length;a=Number(a)||0;if(0<=a&&a<m){a|=0;var t=g.charCodeAt(a);if(55296>t||56319<t||a+1===m)return t;a=g.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var m=this.toString();a+="";for(var t=m.length,r=a.length,f=Math.max(0,Math.min(g|0,m.length)),d=0;d<r&&f<t;)if(m[f++]!=a[d++])return!1;return d>=r};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var m=this.toString();a+="";void 0===g&&(g=m.length);for(var t=Math.max(0,Math.min(g|0,m.length)),r=a.length;0<r&&0<t;)if(m[--t]!=a[--r])return!1;return 0>=r};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,m,t){function r(d,l){if(!m[d]){if(!g[d]){var x="function"==typeof require&&require;if(!l&&x)return x(d,!0);if(f)return f(d,!0);x=Error("Cannot find module '"+d+"'");throw x.code="MODULE_NOT_FOUND",x;}x=m[d]={exports:{}};g[d][0].call(x.exports,function(f){var l=g[d][1][f];return r(l?l:f)},x,x.exports,e$$0,g,m,t)}return m[d].exports}for(var f="function"==typeof require&&require,d=0;d<t.length;d++)r(t[d]);return r})({1:[function(a,g,m){g=a("../regl")();m=a("vectorize-text");var t=a("gl-mat4/perspective"),
r=a("gl-mat4/lookAt");a=m("hello regl!",{textAlign:"center",textBaseline:"middle"});var f=g.texture({copy:!0,min:"linear",mag:"linear"}),d=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:f,t:function(d){return.001*d.count}},depth:{enable:!1},count:3}),k=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.count},view:function(d){d=.01*d.count;return r([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return t([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){d();k();f({copy:!0,min:"linear",mag:"linear"})})},{"../regl":125,"gl-mat4/lookAt":76,"gl-mat4/perspective":77,"vectorize-text":121}],2:[function(a,g,m){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(a,f,d,k,l){a=d.maxAttributes;f=Array(a);for(d=0;d<a;++d)f[d]=new t;return{Record:t,scope:{},state:f}}},{}],3:[function(a,g,m){function t(d){return w[Object.prototype.toString.call(d)]|0}function r(d,e){for(var c=0;c<e.length;++c)d[c]=e[c]}function f(d,e,c,f,k,l,a){for(var b=0,z=0;z<c;++z)for(var n=0;n<f;++n)d[b++]=e[k*z+l*n+a]}function d(d,e,c){for(var f=0,k=0;k<e.length;++k)for(var l=e[k],
a=0;a<c;++a)d[f++]=l[a]}var k=a("./util/is-typed-array"),l=a("./util/is-ndarray"),x=a("./util/values"),u=a("./util/pool"),w=a("./constants/arraytypes.json"),v=a("./constants/dtypes.json"),n=a("./constants/usage.json");g.exports=function(h){function e(b){this.id=a++;this.buffer=h.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function c(b,c,d){b.byteLength=c.byteLength;h.bufferData(b.type,c,d)}function q(b,e,q,h,p){b.usage=q;if(Array.isArray(e))b.dtype=
h||5126,0<e.length&&(Array.isArray(e[0])?(b.dimension=e[0].length,h=u.allocType(b.dtype,e.length*b.dimension),d(h,e,b.dimension),c(b,h,q),u.freeType(h)):"number"===typeof e[0]?(b.dimension=p,h=u.allocType(b.dtype,e.length),r(h,e),c(b,h,q),u.freeType(h)):k(e[0])&&(b.dimension=e[0].length,b.dtype=h||t(e[0])||5126,h=u.allocType(b.dtype,e.length*b.dimension),d(h,e,b.dimension),c(b,h,q),u.freeType(h)));else if(k(e))b.dtype=h||t(e),b.dimension=p,c(b,e,q);else if(l(e)){var a=e.shape,n=e.stride;p=e.offset;
var y=0,v=0,w=0,x=0;1===a.length?(y=a[0],v=1,w=n[0],x=0):2===a.length&&(y=a[0],v=a[1],w=n[0],x=n[1]);b.dtype=h||t(e.data)||5126;b.dimension=v;h=u.allocType(b.dtype,y*v);f(h,e.data,y,v,w,x,p);c(b,h,q);u.freeType(h)}}function p(b){var e=b.buffer;h.isBuffer(e)&&h.deleteBuffer(e);b.buffer=null;delete w[b.id]}var a=0,w={};e.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)};var b=[];return{create:function(b,c,a){function y(b){var e=35044,c=null,d=0,f=0,p=1;Array.isArray(b)||k(b)||l(b)?c=b:
"number"===typeof b?d=b|0:b&&("data"in b&&(c=b.data),"usage"in b&&(e=n[b.usage]),"type"in b&&(f=v[b.type]),"dimension"in b&&(p=b.dimension|0),"length"in b&&(d=b.length|0));x.bind();c?q(x,c,e,f,p):(h.bufferData(x.type,d,e),x.dtype=f||5121,x.usage=e,x.dimension=p,x.byteLength=d);return y}var x=new e(c);w[x.id]=x;a||y(b);y._reglType="buffer";y._buffer=x;y.subdata=function(b,e){var c=(e||0)|0;x.bind();if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var q=u.allocType(x.dtype,b.length);r(q,
b);h.bufferSubData(x.type,c,q);u.freeType(q)}else if(Array.isArray(b[0])||k(b[0])){var q=b[0].length,p=u.allocType(x.dtype,b.length*q);d(p,b,q);h.bufferSubData(x.type,c,p);u.freeType(p)}}else if(k(b))h.bufferSubData(x.type,c,b);else if(l(b)){var a=b.shape,z=b.stride,n=p=q=0,v=0;1===a.length?(q=a[0],p=1,n=z[0],v=0):2===a.length&&(q=a[0],p=a[1],n=z[0],v=z[1]);a=Array.isArray(b.data)?x.dtype:t(b.data);a=u.allocType(a,q*p);f(a,b.data,q,p,n,v,b.offset);h.bufferSubData(x.type,c,a);u.freeType(a)}return y};
y.destroy=function(){p(x)};return y},createStream:function(c,d){var f=b.pop();f||(f=new e(c),f.buffer=h.createBuffer());f.bind();q(f,d,35040,0,1);return f},destroyStream:function(e){b.push(e)},clear:function(){x(w).forEach(p)},getBuffer:function(b){return b&&b._buffer instanceof e?b._buffer:null},_initBuffer:q}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/values":28}],4:[function(a,
g,m){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,g,m){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,g,m){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,
"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,g,m){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,g,m){function t(b){return Array.isArray(b)||w(b)||v(b)}function r(b){return b.sort(function(b,e){return"viewport"===b?-1:"viewport"===e?1:b<e?-1:1})}function f(b,e,c,d){this.thisDep=b;this.contextDep=e;this.propDep=c;this.append=d}function d(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function k(b){return new f(!1,!1,!1,
b)}function l(b,e){var c=b.type;return 0===c?(c=b.data.length,new f(!0,1<=c,2<=c,e)):new f(3===c,2===c,1===c,e)}var x=a("./util/codegen"),u=a("./util/loop"),w=a("./util/is-typed-array"),v=a("./util/is-ndarray"),n=a("./constants/primitives.json"),h=a("./constants/dtypes.json"),e=["x","y","z","w"],c={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},q={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},p={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},y={cw:2304,ccw:2305},F=new f(!1,!1,!1,function(){});g.exports=function(b,a,v,D,A,g,m,H,C,
N,M,K,Q){function G(b){return b.replace(".","_")}function I(b,e,c){var d=G(b);ra.push(b);pa[d]=ha[d]=!!c;ia[d]=e}function L(b,e,c){var d=G(b);ra.push(b);Array.isArray(c)?(ha[d]=c.slice(),pa[d]=c.slice()):ha[d]=pa[d]=c;ja[d]=e}function O(){var b=x(),e=b.link,c=b.global;b.id=ya++;b.batchId="0";var d=e(xa),f=b.shared={props:"a0"};Object.keys(xa).forEach(function(b){f[b]=c.def(d,".",b)});var q=b.next={},h=b.current={};Object.keys(ja).forEach(function(b){Array.isArray(ha[b])&&(q[b]=c.def(f.next,".",b),
h[b]=c.def(f.current,".",b))});var p=b.constants={};Object.keys(sa).forEach(function(b){p[b]=c.def(JSON.stringify(sa[b]))});b.invoke=function(c,d){switch(d.type){case 0:var q=["this",f.context,f.props,b.batchId];return c.def(e(d.data),".call(",q.slice(0,Math.max(d.data.length+1,4)),")");case 1:return c.def(f.props,d.data);case 2:return c.def(f.context,d.data);case 3:return c.def("this",d.data)}};b.attribCache={};var k={};b.scopeAttrib=function(b){b=a.id(b);if(b in k)return k[b];var c=N.scope[b];c||
(c=N.scope[b]=new la);return k[b]=e(c)};return b}function U(b){var c=b["static"];b=b.dynamic;if("framebuffer"in c){var e=c.framebuffer;return e?(e=H.getFramebuffer(e),k(function(b,c){var d=b.link(e),f=b.shared;c.set(f.framebuffer,".next",d);f=f.context;c.set(f,".framebufferWidth",d+".width");c.set(f,".framebufferHeight",d+".height");return d})):k(function(b,c){var e=b.shared;c.set(e.framebuffer,".next","null");e=e.context;c.set(e,".framebufferWidth",e+".drawingBufferWidth");c.set(e,".framebufferHeight",
e+".drawingBufferHeight");return null})}if("framebuffer"in b){var d=b.framebuffer;return l(d,function(b,e){var c=b.invoke(e,d),f=b.shared,q=f.framebuffer,c=e.def(q,".getFramebuffer(",c,")");e.set(q,".next",c);f=f.context;e.set(f,".framebufferWidth",c+"?"+c+".width:"+f+".drawingBufferWidth");e.set(f,".framebufferHeight",c+"?"+c+".height:"+f+".drawingBufferHeight");return c})}return null}function Y(b,c){function e(b){if(b in d){var h=d[b];b=!0;var p=h.x|0,k=h.y|0,a,z;"w"in h?a=h.w|0:b=!1;"h"in h?z=
h.h|0:b=!1;return new f(b&&c&&c.thisDep,b&&c&&c.contextDep,b&&c&&c.propDep,function(b,c){var e=b.shared.context,d=a;"w"in h||(d=c.def(e,".","framebufferWidth","-",p));var f=z;"h"in h||(f=c.def(e,".","framebufferHeight","-",k));return[p,k,d,f]})}if(b in q){var n=q[b];b=l(n,function(b,c){var e=b.invoke(c,n),d=b.shared.context,f=c.def(e,".x|0"),q=c.def(e,".y|0"),h=c.def('"w" in ',e,"?",e,".w|0:","(",d,".","framebufferWidth","-",f,")"),e=c.def('"h" in ',e,"?",e,".h|0:","(",d,".","framebufferHeight","-",
q,")");return[f,q,h,e]});c&&(b.thisDep=b.thisDep||c.thisDep,b.contextDep=b.contextDep||c.contextDep,b.propDep=b.propDep||c.prpoDep);return b}return c?new f(c.thisDep,c.contextDep,c.propDep,function(b,c){var e=b.shared.context;return[0,0,c.def(e,".","framebufferWidth"),c.def(e,".","framebufferHeight")]}):null}var d=b["static"],q=b.dynamic,h=e("viewport");if(h)var p=h,h=new f(h.thisDep,h.contextDep,h.propDep,function(b,c){var e=p.append(b,c),d=b.shared.context;c.set(d,".viewportWidth",e[2]);c.set(d,
".viewportHeight",e[3]);return e});return{viewport:h,scissor_box:e("scissor.box")}}function X(b){function c(b){if(b in e){var d=a.id(e[b]);b=k(function(){return d});b.id=d;return b}if(b in q){var f=q[b];return l(f,function(b,c){var e=b.invoke(c,f);return c.def(b.shared.strings,".id(",e,")")})}return null}var e=b["static"],q=b.dynamic,h=c("frag"),p=c("vert"),n=null;d(h)&&d(p)?(n=M.program(p.id,h.id),b=k(function(b,c){return b.link(n)})):b=new f(h&&h.thisDep||p&&p.thisDep,h&&h.contextDep||p&&p.contextDep,
h&&h.propDep||p&&p.propDep,function(b,c){var e=b.shared.shader,d;d=h?h.append(b,c):c.def(e,".","frag");var f;f=p?p.append(b,c):c.def(e,".","vert");return c.def(e+".program("+f+","+d+")")});return{frag:h,vert:p,progVar:b,program:n}}function V(b){function c(b,d){if(b in e){var f=e[b]|0;return k(function(b,c){d&&(b.OFFSET=f);return f})}if(b in h){var p=h[b];return l(p,function(b,c){var e=b.invoke(c,p);d&&(b.OFFSET=e);return e})}return d&&q?k(function(b,c){b.OFFSET="0";return 0}):null}var e=b["static"],
h=b.dynamic,q=function(){if("elements"in e){var b=e.elements;t(b)?b=g.getElements(g.create(b)):b&&(b=g.getElements(b));var c=k(function(c,e){if(b){var d=c.link(b);return c.ELEMENTS=d}return c.ELEMENTS=null});c.value=b;return c}if("elements"in h){var d=h.elements;return l(d,function(b,c){var e=b.shared,f=e.isBufferArgs,e=e.elements,h=b.invoke(c,d),q=c.def("null"),f=c.def(f,"(",h,")"),h=b.cond(f).then(q,"=",e,".createStream(",h,");")["else"](q,"=",e,".getElements(",h,");");c.entry(h);c.exit(b.cond(f).then(e,
".destroyStream(",q,");"));return b.ELEMENTS=q})}return null}(),p=c("offset",!0);return{elements:q,primitive:function(){if("primitive"in e){var b=e.primitive;return k(function(c,e){return n[b]})}if("primitive"in h){var c=h.primitive;return l(c,function(b,e){var d=b.constants.primTypes,f=b.invoke(e,c);return e.def(d,"[",f,"]")})}return q?d(q)?q.value?k(function(b,c){return c.def(b.ELEMENTS,".primType")}):k(function(){return 4}):new f(q.thisDep,q.contextDep,q.propDep,function(b,c){var e=b.ELEMENTS;
return c.def(e,"?",e,".primType:",4)}):null}(),count:function(){if("count"in e){var b=e.count|0;return k(function(){return b})}if("count"in h){var c=h.count;return l(c,function(b,e){return b.invoke(e,c)})}return q?d(q)?q?p?new f(p.thisDep,p.contextDep,p.propDep,function(b,c){return c.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):k(function(b,c){return c.def(b.ELEMENTS,".vertCount")}):k(function(){return-1}):new f(q.thisDep||p.thisDep,q.contextDep||p.contextDep,q.propDep||p.propDep,function(b,c){var e=
b.ELEMENTS;return b.OFFSET?c.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):c.def(e,"?",e,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:p}}function W(b){var e=b["static"],d=b.dynamic,f={};ra.forEach(function(b){function h(c,q){if(b in e){var p=c(e[b]);f[a]=k(function(){return p})}else if(b in d){var z=d[b];f[a]=l(z,function(b,c){return q(b,c,b.invoke(c,z))})}}var a=G(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(b){return b},
function(b,c,e){return e});case "depth.func":return h(function(b){return q[b]},function(b,c,e){return c.def(b.constants.compareFuncs,"[",e,"]")});case "depth.range":return h(function(b){return b},function(b,c,e){b=c.def("+",e,"[0]");c=c.def("+",e,"[1]");return[b,c]});case "blend.func":return h(function(b){return[c["srcRGB"in b?b.srcRGB:b.src],c["dstRGB"in b?b.dstRGB:b.dst],c["srcAlpha"in b?b.srcAlpha:b.src],c["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,c,e){function d(b,h){var q=c.def('"',b,h,'" in ',
e,"?",e,".",b,h,":",e,".",b);return c.def(f,"[",q,"]")}var f=b.constants.blendFuncs;b=d("src","RGB");var h=d("src","Alpha"),q=d("dst","RGB"),p=d("dst","Alpha");return[b,q,h,p]});case "blend.equation":return h(function(b){if("string"===typeof b)return[ba[b],ba[b]];if("object"===typeof b)return[ba[b.rgb],ba[b.alpha]]},function(b,c,e){var d=b.constants.blendEquations,f=c.def(),h=c.def();b=b.cond("typeof ",e,'==="string"');b.then(f,"=",h,"=",d,"[",e,"];");b["else"](f,"=",d,"[",e,".rgb];",h,"=",d,"[",
e,".alpha];");c(b);return[f,h]});case "blend.color":return h(function(b){return u(4,function(c){return+b[c]})},function(b,c,e){return u(4,function(b){return c.def("+",e,"[",b,"]")})});case "stencil.mask":return h(function(b){return b|0},function(b,c,e){return c.def(e,"|0")});case "stencil.func":return h(function(b){return[q[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,c,e){b=c.def('"cmp" in ',e,"?",b.constants.compareFuncs,"[",e,".cmp]",":",7680);var d=c.def(e,".ref|0");c=c.def('"mask" in ',
e,"?",e,".mask|0:-1");return[b,d,c]});case "stencil.opFront":case "stencil.opBack":return h(function(c){return["stencil.opBack"===b?1029:1028,p[c.fail||"keep"],p[c.zfail||"keep"],p[c.pass||"keep"]]},function(c,e,d){function f(b){return e.def('"',b,'" in ',d,"?",h,"[",d,".",b,"]:",7680)}var h=c.constants.stencilOps;return["stencil.opBack"===b?1029:1028,f("fail"),f("zfail"),f("pass")]});case "polygonOffset.offset":return h(function(b){return[b.factor|0,b.units|0]},function(b,c,e){b=c.def(e,".factor|0");
c=c.def(e,".units|0");return[b,c]});case "cull.face":return h(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);return c},function(b,c,e){return c.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(b){return b},function(b,c,e){return e});case "frontFace":return h(function(b){return y[b]},function(b,c,e){return c.def(e+'==="cw"?2304:2305')});case "colorMask":return h(function(b){return b.map(function(b){return!!b})},function(b,c,e){return u(4,function(b){return"!!"+e+
"["+b+"]"})});case "sample.coverage":return h(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,c,e){b=c.def('"value" in ',e,"?+",e,".value:1");c=c.def("!!",e,".invert");return[b,c]})}});return f}function R(b){var c=b["static"],e=b.dynamic,d={};Object.keys(c).forEach(function(b){var e=c[b],f;if("number"===typeof e||"boolean"===typeof e)f=k(function(){return e});else if("function"===typeof e&&("texture2d"===e._reglType||"textureCube"===e._reglTYpe))f=k(function(b){return b.link(e)});
else if(Array.isArray(e)||w(e))f=k(function(b){return b.global.def("[",u(e.length,function(b){return e[b]}),"]")});f.value=e;d[b]=f});Object.keys(e).forEach(function(b){var c=e[b];d[b]=l(c,function(b,e){return b.invoke(e,c)})});return d}function T(b){var c=b["static"],d=b.dynamic,f={};Object.keys(c).forEach(function(b){var d=c[b],q=a.id(b),p=new la;if(t(d))p.state=1,p.buffer=A.getBuffer(A.create(d,34962,!1)),p.type=p.buffer.dtype;else{var l=A.getBuffer(d);if(l)p.state=1,p.buffer=l,p.type=l.dtype;
else if(d.constant){var n=d.constant;p.state=2;"number"===typeof n?p.x=n:e.forEach(function(b,c){c<n.length&&(p[b]=n[c])})}else{var l=A.getBuffer(d.buffer),y=d.offset|0,r=d.stride|0,G=d.size|0,v=!!d.normalized,I=0;"type"in d&&(I=h[d.type]);d=d.divisor|0;p.buffer=l;p.state=1;p.size=G;p.normalized=v;p.type=I||l.dtype;p.offset=y;p.stride=r;p.divisor=d}}f[b]=k(function(b,c){var e=b.attribCache;if(q in e)return e[q];var d={isStream:!1};Object.keys(p).forEach(function(b){d[b]=p[b]});p.buffer&&(d.buffer=
b.link(p.buffer));return e[q]=d})});Object.keys(d).forEach(function(b){var c=d[b];f[b]=l(c,function(b,d){function f(b){d(a[b],"=",h,".",b,"|0;")}var h=b.invoke(d,c),q=b.shared,p=q.isBufferArgs,k=q.buffer,a={isStream:d.def(!1)},l=new la;l.state=1;Object.keys(l).forEach(function(b){a[b]=d.def(""+l[b])});var z=a.buffer,n=a.type;d("if(",p,"(",h,")){",a.isStream,"=true;",z,"=",k,".createStream(",34962,",",h,");",n,"=",z,".dtype;","}else{",z,"=",k,".getBuffer(",h,");","if(",z,"){",n,"=",z,".dtype;","}else if(",
h,".constant){",a.state,"=",2,";",e.map(function(b,c){return a[b]+"="+h+".length>="+c+"?"+h+"["+c+"]:0;"}).join(""),"}else{",z,"=",k,".getBuffer(",h,".buffer);",n,'="type" in ',h,"?",q.glTypes,"[",h,".type]:",z,".dtype;",a.normalized,"=!!",h,".normalized;");f("size");f("offset");f("stride");f("divisor");d("}}");return a})});return f}function S(b){var c=b["static"],e=b.dynamic,d={};Object.keys(c).forEach(function(b){var e=c[b];d[b]=k(function(b,c){return"number"===typeof e||"boolean"===typeof e?""+
e:b.link(e)})});Object.keys(e).forEach(function(b){var c=e[b];d[b]=l(c,function(b,e){return b.invoke(e,c)})});return d}function P(b,c,e){var d=b.shared.context,f=b.scope();Object.keys(e).forEach(function(h){c.save(d,"."+h);f(d,".",h,"=",e[h].append(b,c),";")});c(f)}function Z(b,c,e){var d=b.shared,f=d.gl,h=d.framebuffer,q;fa&&(q=c.def(d.extensions,".webgl_draw_buffers"));var p=b.constants,d=p.drawBuffer,p=p.backBuffer;b=e?e.append(b,c):c.def(h,".next");c("if(",h,".dirty||",b,"!==",h,".cur){","if(",
b,"){",f,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&c(q,".drawBuffersWEBGL(",d,"[",b,".colorAttachments.length]);");c("}else{",f,".bindFramebuffer(",36160,",null);");fa&&c(q,".drawBuffersWEBGL(",p,");");c("}",h,".cur=",b,";",h,".dirty=false;","}")}function aa(b,c,e){var d=b.shared,f=d.gl,h=b.current,q=b.next,p=d.current,k=d.next,a=b.cond(p,".dirty");ra.forEach(function(c){c=G(c);if(!(c in e.state)){var d,l;if(c in q){d=q[c];l=h[c];var z=u(ha[c].length,function(b){return a.def(d,"[",b,"]")});
a(b.cond(z.map(function(b,c){return b+"==="+l+"["+c+"]"}).join("&&")).then(f,".",ja[c],"(",z,");",z.map(function(b,c){return l+"["+c+"]="+b}).join(";"),";"))}else d=a.def(k,".",c),z=b.cond(d,"!==",p,".",c),a(z),c in ia?z(b.cond(d).then(f,".enable(",ia[c],");")["else"](f,".disable(",ia[c],");"),p,".",c,"=",d,";"):z(f,".",ja[c],"(",d,");",p,".",c,"=",d,";")}});0===Object.keys(e.state).length&&a(p,".dirty=false;");c(a)}function ka(b,c,e,f){var h=b.shared,q=b.current,p=h.current,k=h.gl;r(Object.keys(e)).forEach(function(h){var a=
e[h];if(!f||f(a)){var l=a.append(b,c);if(ia[h]){var z=ia[h];d(a)?l?c(k,".enable(",z,");"):c(k,".disable(",z,");"):c(b.cond(l).then(k,".enable(",z,");")["else"](k,".disable(",z,");"));c(p,".",h,"=",l,";")}else if(Array.isArray(l)){var n=q[h];c(k,".",ja[h],"(",l,");",l.map(function(b,c){return n+"["+c+"]="+b}).join(";"),";")}else c(k,".",ja[h],"(",l,");",p,".",h,"=",l,";")}})}function ma(b,c){ga&&!b.instancing&&(b.instancing=c.def(b.shared.extensions,".angle_instanced_arrays"))}function na(b,c,d,f,
h){function q(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function p(d,f,h){function q(){c("if(!",n,".pointer){",l,".enableVertexAttribArray(",z,");",n,".pointer=true;}");var e=h.type,d;d=h.size?c.def(h.size,"||",f):f;c("if(",n,".type!==",e,"||",n,".size!==",d,"||",G.map(function(b){return n+"."+b+"!=="+h[b]}).join("||"),"){",l,".bindBuffer(",34962,",",y,".buffer);",l,".vertexAttribPointer(",
[z,d,e,h.normalized,h.stride,h.offset],");",n,".type=",e,";",n,".size=",d,";",G.map(function(b){return n+"."+b+"="+h[b]+";"}).join(""),"}");ga&&(e=h.divisor,c("if(",n,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[z,e],");",n,".divisor=",e,";}"))}function a(){c("if(",n,".pointer){",l,".disableVertexAttribArray(",z,");",n,".pointer=false;","}if(",e.map(function(b,c){return n+"."+b+"!=="+r[c]}).join("||"),"){",l,".vertexAttrib4f(",z,",",r,");",e.map(function(b,c){return n+"."+b+"="+
r[c]+";"}).join(""),"}")}var l=k.gl,z=c.def(d,".location"),n=c.def(k.attributes,"[",z,"]");d=h.state;var y=h.buffer,r=[h.x,h.y,h.z,h.w],G=["buffer","normalized","offset","stride"];1===d?q():2===d?a():(c("if(",d,"===",1,"){"),q(),c("}else{"),a(),c("}"))}var k=b.shared;f.forEach(function(e){var f=e.name,k=d.attributes[f],a;if(k){if(!h(k))return;a=k.append(b,c)}else{if(!h(F))return;var l=b.scopeAttrib(f);a={};Object.keys(new la).forEach(function(b){a[b]=c.def(l,".",b)})}p(b.link(e),q(e.info.type),a)})}
function ca(b,c,e,d,f){for(var h=b.shared,q=h.gl,p,k=0;k<d.length;++k){var l=d[k],n=l.name,y=l.info.type,r=e.uniforms[n],l=b.link(l)+".location";if(r){if(!f(r))continue;if(r["static"]){n=r.value;if(35678===y||35680===y)y=b.link(n._texture),c(q,".uniform1i(",l,y+".bind());"),c.exit(y,".unbind()");else if(35674===y||35675===y||35676===y)n=b.global.def("["+n+"]"),r=2,35675===y?r=3:35676===y&&(r=4),c(q,".uniformMatrix",r,"fv(",l,",false,",n,");");else{switch(y){case 5126:p="1f";break;case 35664:p="2f";
break;case 35665:p="3f";break;case 35666:p="4f";break;case 35670:p="1i";break;case 5124:p="1i";break;case 35671:p="2i";break;case 35667:p="2i";break;case 35672:p="3i";break;case 35668:p="3i";break;case 35673:p="4i";break;case 35669:p="4i"}c(q,".uniform",p,"(",l,",",n,");")}continue}else n=r.append(b,c)}else{if(!f(F))continue;n=c.def(h.uniforms,"[",a.id(n),"]")}r=",";switch(y){case 35678:case 35680:y=c.def(n,"._texture");c(q,".uniform1i(",l,",",y,".bind());");c.exit(y,".unbind();");continue;case 5124:case 35670:p=
"1i";break;case 35667:case 35671:p="2iv";break;case 35668:case 35672:p="3iv";break;case 35669:case 35673:p="4iv";break;case 5126:p="1f";break;case 35664:p="2fv";break;case 35665:p="3fv";break;case 35666:p="4fv";break;case 35674:p="Matrix2fv";r=",false,";break;case 35675:p="Matrix3fv";r=",false,";break;case 35676:p="Matrix4fv",r=",false,"}c(q,".uniform",p,"(",l,r,n,");")}}function da(b,c,e,f){function h(d){var f=n[d];return f?f.batchStatic?f.append(b,c):f.append(b,e):c.def(l,".",d)}function q(){function b(){e(I,
".drawElementsInstancedANGLE(",[y,G,u,r+"<<(("+u+"-5121)>>1)",v],");")}function c(){e(I,".drawArraysInstancedANGLE(",[y,r,G,v],");")}z?x?b():(e("if(",z,"){"),b(),e("}else{"),c(),e("}")):c()}function p(){function b(){e(a+".drawElements("+[y,G,u,r+"<<(("+u+"-5121)>>1)"]+");")}function c(){e(a+".drawArrays("+[y,r,G]+");")}z?x?b():(e("if(",z,"){"),b(),e("}else{"),c(),e("}")):c()}var k=b.shared,a=k.gl,l=k.draw,n=f.draw,z=function(){var d=n.elements,f=c;d?(d.batchStatic||(f=e),d=d.append(b,f)):d=f.def(l,
".","elements");d&&f("if("+d+")"+a+".bindBuffer(34963,"+d+".buffer.buffer);");return d}(),y=h("primitive"),r=h("offset"),G=function(){var d=n.count,f=c;d?(d.batchStatic||(f=e),d=d.append(b,f)):d=f.def(l,".","count");return d}();if("number"===typeof G){if(0===G)return}else e("if(",G,"){"),e.exit("}");var v,I;ga&&(v=h("instances"),I=b.instancing);var u=z+".type",x=n.elements&&d(n.elements);ga&&("number"!==typeof v||0<=v)?"string"===typeof v?(e("if(",v,">0){"),q(),e("}else if(",v,"<0){"),p(),e("}")):
q():p()}function ea(b,c,e,d,f){c=O();f=c.proc("body",f);ga&&(c.instancing=f.def(c.shared.extensions,".angle_instanced_arrays"));b(c,f,e,d);return c.compile().body}function ta(b,c,e,d){ma(b,c);na(b,c,e,d.attributes,function(){return!0});ca(b,c,e,d.uniforms,function(){return!0});da(b,c,c,e)}function ua(b,c){var e=b.proc("draw",1);ma(b,e);P(b,e,c.context);Z(b,e,c.framebuffer);aa(b,e,c);ka(b,e,c.state);var d=c.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",d,".program);");if(c.shader.program)ta(b,
e,c,c.shader.program);else{var f=b.global.def("{}"),h=e.def(d,".id"),q=e.def(f,"[",h,"]");e(b.cond(q).then(q,".call(this,a0);")["else"](q,"=",f,"[",h,"]=",b.link(function(e){return ea(ta,b,c,e,1)}),"(",d,");",q,".call(this,a0);"))}0<Object.keys(c.state).length&&e(b.shared.current,".dirty=true;")}function wa(b,c,e,d){function f(){return!0}b.batchId="a1";ma(b,c);na(b,c,e,d.attributes,f);ca(b,c,e,d.uniforms,f);da(b,c,c,e)}function oa(b,c,e,d){function f(b){return b.contextDep&&q||b.propDep}function h(b){return!f(b)}
ma(b,c);var q=e.contextDynamic,p=c.def(),k=c.def();b.shared.props=k;b.batchId=p;var a=b.scope(),l=b.scope();c(a.entry,"for(",p,"=0;",p,"<","a1",";++",p,"){",k,"=","a0","[",p,"];",l,"}",a.exit);e.needsContext&&P(b,l,e.context);e.needsFramebuffer&&Z(b,l,e.framebuffer);ka(b,l,e.state,f);d?(na(b,a,e,d.attributes,h),na(b,l,e,d.attributes,f),ca(b,a,e,d.uniforms,h),ca(b,l,e,d.uniforms,f),da(b,a,l,e)):(c=b.global.def("{}"),d=e.shader.progVar.append(b,l),k=l.def(d,".id"),a=l.def(c,"[",k,"]"),l(b.shared.gl,
".useProgram(",d,".program);","if(!",a,"){",a,"=",c,"[",k,"]=",b.link(function(c){return ea(wa,b,e,c,2)}),"(",d,");}",a,".call(this,a0[",p,"],",p,");"))}function va(b,c){var e=b.proc("batch",2);b.batchId="0";ma(b,e);var d=!1,f=!0;Object.keys(c.context).forEach(function(b){d=d||c.context[b].propDep});d||(P(b,e,c.context),f=!1);var h=c.framebuffer,q=!1;h&&(h.propDep?d=q=!0:h.contextDep&&d&&(q=!0),q||Z(b,e,h));c.state.viewport&&c.state.viewport.propDynamic&&(d=!0);aa(b,e,c);ka(b,e,c.state,function(b){return!(b.contextDep&&
d||b.propDep)});c.contextDep=d;c.needsContext=f;c.needsFramebuffer=q;f=c.shader.progVar;if(f.contextDep&&d||f.propDep)oa(b,e,c,null);else if(f=f.append(b,e),e(b.shared.gl,".useProgram(",f,".program);"),c.shader.program)oa(b,e,c,c.shader.program);else{var h=b.global.def("{}"),q=e.def(f,".id"),p=e.def(h,"[",q,"]");e(b.cond(p).then(p,".call(this,a0,a1);")["else"](p,"=",h,"[",q,"]=",b.link(function(e){return ea(oa,b,c,e,2)}),"(",f,");",p,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&e(b.shared.current,
".dirty=true;")}function qa(b,c){function e(h){var q=c.shader[h];q&&d.set(f.shader,"."+h,q.append(b,d))}var d=b.proc("scope",3);b.batchId="a2";var f=b.shared,h=f.current;P(b,d,c.context);c.framebuffer&&c.framebuffer.append(b,d);r(Object.keys(c.state)).forEach(function(e){var h=c.state[e].append(b,d);Array.isArray(h)?h.forEach(function(c,f){d.set(b.next[e],"["+f+"]",c)}):d.set(f.next,"."+e,h)});["elements","offset","count","instances","primitive"].forEach(function(e){var h=c.draw[e];h&&d.set(f.draw,
"."+e,""+h.append(b,d))});Object.keys(c.uniforms).forEach(function(e){d.set(f.uniforms,"["+a.id(e)+"]",c.uniforms[e].append(b,d))});Object.keys(c.attributes).forEach(function(e){var f=c.attributes[e].append(b,d),h=b.scopeAttrib(e);Object.keys(new la).forEach(function(b){d.set(h,"."+b,f[b])})});e("vert");e("frag");0<Object.keys(c.state).length&&(d(h,".dirty=true;"),d.exit(h,".dirty=true;"));d("a1(",b.shared.context,",a0,0);")}var la=N.Record,ba={add:32774,subtract:32778,"reverse subtract":32779};v.ext_blend_minmax&&
(ba.min=32775,ba.max=32776);var ga=v.angle_instanced_arrays,fa=v.webgl_draw_buffers,ha={dirty:!0},pa={},ra=[],ia={},ja={};I("dither",3024);I("blend.enable",3042);L("blend.color","blendColor",[0,0,0,0]);L("blend.equation","blendEquationSeparate",[32774,32774]);L("blend.func","blendFuncSeparate",[1,0,1,0]);I("depth.enable",2929,!0);L("depth.func","depthFunc",513);L("depth.range","depthRange",[0,1]);L("depth.mask","depthMask",!0);L("colorMask","colorMask",[!0,!0,!0,!0]);I("cull.enable",2884);L("cull.face",
"cullFace",1029);L("frontFace","frontFace",2305);L("lineWidth","lineWidth",1);I("polygonOffset.enable",32823);L("polygonOffset.offset","polygonOffset",[0,0]);I("sample.alpha",32926);I("sample.enable",32928);L("sample.coverage","sampleCoverage",[1,!1]);I("stencil.enable",2960);L("stencil.mask","stencilMask",-1);L("stencil.func","stencilFunc",[519,0,-1]);L("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);L("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);I("scissor.enable",3089);
L("scissor.box","scissor",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);L("viewport","viewport",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);var xa={gl:b,context:Q,strings:a,next:pa,current:ha,draw:K,elements:g,buffer:A,shader:M,attributes:N.state,uniforms:C,framebuffer:H,extensions:v,isBufferArgs:t},sa={primTypes:n,compareFuncs:q,blendFuncs:c,blendEquations:ba,stencilOps:p,glTypes:h,orientationType:y};fa&&(sa.backBuffer=[1029],sa.drawBuffer=u(D.maxDrawbuffers,function(b){return 0===b?[0]:
u(b,function(b){return 36064+b})}));var ya=0;return{next:pa,current:ha,procs:function(){var b=O(),c=b.proc("poll"),e=b.proc("refresh"),d=b.block();c(d);e(d);var f=b.shared,h=f.gl,q=f.next,p=f.current;d(p,".dirty=false;");Z(b,c);e(f.framebuffer,".dirty=true;");Z(b,e);Object.keys(ia).forEach(function(f){var k=ia[f],a=d.def(q,".",f),l=b.block();l("if(",a,"){",h,".enable(",k,")}else{",h,".disable(",k,")}",p,".",f,"=",a,";");e(l);c("if(",a,"!==",p,".",f,"){",l,"}")});Object.keys(ja).forEach(function(f){var k=
ja[f],a=ha[f],l,n,z=b.block();z(h,".",k,"(");Array.isArray(a)?(k=a.length,l=b.global.def(q,".",f),n=b.global.def(p,".",f),z(u(k,function(b){return l+"["+b+"]"}),");",u(k,function(b){return n+"["+b+"]="+l+"["+b+"];"}).join("")),c("if(",u(k,function(b){return l+"["+b+"]!=="+n+"["+b+"]"}).join("||"),"){",z,"}")):(l=d.def(q,".",f),n=d.def(p,".",f),z(l,");",p,".",f,"=",l,";"),c("if(",l,"!==",n,"){",z,"}"));e(z)});return b.compile()}(),compile:function(b,c,e,d){var f=O(),h;h=U(b);var q=Y(b,h),p=V(b),k=
W(b);b=X(b);var a=q.viewport;a&&(k.viewport=a);a=G("scissor.box");(q=q[a])&&(k[a]=q);q=0<Object.keys(k).length;h={framebuffer:h,draw:p,shader:b,state:k,dirty:q};h.uniforms=R(e);h.attributes=T(c);h.context=S(d);ua(f,h);qa(f,h);va(f,h);return f.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":20,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/loop":24}],9:[function(a,g,m){function t(f,a){this.id=d++;this.type=f;this.data=a}function r(d){if(0===d.length)return[];
var f=d.charAt(0),a=d.charAt(d.length-1);if(1<d.length&&f===a&&('"'===f||"'"===f))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return r(d.substr(0,f.index)).concat(r(f[1])).concat(r(d.substr(f.index+f[0].length)));f=d.split(".");if(1===f.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(a=0;a<f.length;++a)d=d.concat(r(f[a]));return d}function f(d){return"["+r(d).join("][")+"]"}var d=
0;g.exports={define:function(d,a){switch(typeof a){case "boolean":case "number":case "string":return new t(d,f(a+""));case "undefined":return new t(d|128,null)}},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof t},unbox:function(d,a){if(d instanceof t){if(d.type&128)return new t(d.type&-129,f(a))}else if("function"===typeof d)return new t(0,d);return d},accessor:f}},{}],10:[function(a,g,m){var t=a("./util/is-typed-array"),r=a("./util/is-ndarray"),f=a("./constants/primitives.json"),
d=a("./constants/usage.json");g.exports=function(a,l,x){function u(d){this.buffer=d;this.primType=4;this.type=this.vertCount=0}function w(d,e,c,f,p,a,k){(a=k)||t(e)&&(!r(e)||t(e.data))||(a=l.oes_element_index_uint?5125:5123);d.buffer.bind();x._initBuffer(d.buffer,e,c,a,3);e=k;if(!k){switch(d.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}d.buffer.dtype=e}d.type=e;0>p&&(p=d.buffer.byteLength,5123===e?p>>=1:5125===e&&(p>>=2));d.vertCount=p;
p=f;0>f&&(p=4,f=d.buffer.dimension,1===f&&(p=0),2===f&&(p=1),3===f&&(p=4));d.primType=p}var v={uint8:5121,uint16:5123};l.oes_element_index_uint&&(v.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(h){function e(h){if(h)if("number"===typeof h)c(h),q.primType=4,q.vertCount=h|0,q.type=5121;else{var l=null,n=35044,b=-1,z=-1,u=0,x=0;Array.isArray(h)||t(h)||r(h)?l=h:("data"in h&&(l=h.data),"usage"in h&&(n=d[h.usage]),"primitive"in h&&(b=f[h.primitive]),"count"in
h&&(z=h.count|0),"length"in h&&(u=h.length|0),"type"in h&&(x=v[h.type]));l?w(q,l,n,b,z,u,x):(h=q.buffer,h.bind(),a.bufferData(34963,u,n),h.dtype=x||5121,h.usage=n,h.dimension=3,h.byteLength=u,q.primType=0>b?4:b,q.vertCount=0>z?0:z,q.type=h.dtype)}else c(),q.primType=4,q.vertCount=0,q.type=5121;return e}var c=x.create(null,34963,!0),q=new u(c._buffer);e(h);e._reglType="elements";e._elements=q;e.subdata=function(d,f){c.subdata(d,f);return e};e.destroy=function(){c.destroy();q.buffer=null};return e},
createStream:function(d){var e=n.pop();e||(e=new u(x.create(null,34963,!0)._buffer));w(e,d,35040,-1,-1,0,0);return e},destroyStream:function(d){n.push(d)},getElements:function(d){return"function"===typeof d&&d._elements instanceof u?d._elements:null}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":22,"./util/is-typed-array":23}],11:[function(a,g,m){g.exports=function(a){function r(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(d){try{f[d]=
a.getExtension(d)}catch(k){}})}var f={};r();return{extensions:f,refresh:r}}},{}],12:[function(a,g,m){var t=a("./util/values"),r=a("./util/extend");g.exports=function(f,d,a,l,x){function u(b,c,e,d){this.target=b;this.level=c;this.texture=e;this.renderbuffer=d}function w(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function v(b,c){var e=c.width,d=c.height;if(b.texture)var f=b.texture._texture,h=Math.max(1,f.params.width>>b.level),q=Math.max(1,
f.params.height>>b.level),e=e||h,d=d||q;else f=b.renderbuffer._renderbuffer,e=e||f.width,d=d||f.height;f.refCount+=1;c.width=e;c.height=d}function n(b,c){c?c.texture?f.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,c.level):f.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer):f.framebufferTexture2D(36160,b,3553,null,0)}function h(b){var c=3553,e=0,d=null,f=null;"object"===typeof b&&("level"in b&&(e=b.level|0),"target"in b&&(c=b.target|0));var h=b._reglType;
"texture"===h?d=b:"renderbuffer"===h&&(f=b,c=36161,e=0);return new u(c,e,d,f)}function e(b){return b&&(b.texture||b.renderbuffer)}function c(){this.id=A++;g[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function q(b){f.isFramebuffer(b.framebuffer)||(b.framebuffer=f.createFramebuffer());y.dirty=!0;f.bindFramebuffer(36160,b.framebuffer);for(var c=
b.colorAttachments,e=0;e<c.length;++e)n(36064+e,c[e]);for(e=c.length;e<a.maxColorAttachments;++e)n(36064+e,null);n(36096,b.depthAttachment);n(36128,b.stencilAttachment);n(33306,b.depthStencilAttachment);d.webgl_draw_buffers&&d.webgl_draw_buffers.drawBuffersWEBGL(D[c.length]);f.checkFramebufferStatus(36160)}function p(b){b=b.framebuffer;f.isFramebuffer(b)&&f.deleteFramebuffer(b)}var y={current:null,next:null,dirty:!1},F={rgba:6408},b={rgba4:32854,rgb565:36194,"rgb5 a1":32855};d.ext_srgb&&(b.srgba=
35907);d.ext_color_buffer_half_float&&(b.rgba16f=34842,b.rgb16f=34843);d.webgl_color_buffer_float&&(b.rgba32f=34836);var z=[],E=[];d.webgl_depth_texture&&(z.push(6402),E.push(34041));r(r({},F),b);t(F);t(b);b=5121;z={uint8:5121};d.oes_texture_half_float&&(b=z["half float"]=36193);d.oes_texture_float&&(b=z["float"]=5126);z.best=b;var D=function(){for(var b=Array(a.maxDrawbuffers),c=0;c<=a.maxDrawbuffers;++c)for(var e=b[c]=Array(c),d=0;d<c;++d)e[d]=36064+d;return b}(),A=0,g={};return r(y,{getFramebuffer:function(b){return"function"===
typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof c)?b:null},create:function(b){function d(b){var c,p=b||{},k=b=0;if("shape"in p){var n=p.shape;b=n[0];k=n[1]}else"radius"in p&&(b=k=p.radius),"width"in p&&(b=p.width),"height"in p&&(k=p.height);var z=null,n=!1;if("colorBuffers"in p||"colorBuffer"in p){z=p.colorBuffers||p.colorBuffer;Array.isArray(z)||(z=[z]);a.width=b;a.height=k;z=z.map(h);for(c=0;c<z.length;++c)v(z[c],a);b=a.width;k=a.height}else{var y=!0,r="rgba",t="uint8",E=1,
n=!0;a.width=b=b||f.drawingBufferWidth;a.height=k=k||f.drawingBufferHeight;"format"in p&&(r=p.format,y=r in F);"type"in p&&(t=p.type);"colorCount"in p&&(E=p.colorCount|0);if(a.ownsColor)for(z=a.colorAttachments;z.length>E;)w(z.pop());else z=[];for(c=0;c<z.length;++c){var A;a:{A=z[c];var D=y,g=r,B=b,m=k;if(A.texture){var J=A.texture;if(D){J({format:g,type:t,width:B,height:m});J._texture.refCount+=1;A=!0;break a}}else if(J=A.renderbuffer,!D){J({format:g,width:B,height:m});J._renderbuffer.refCount+=
1;A=!0;break a}w(A);A=!1}A||(z[c--]=z[z.length-1],z.pop())}for(;z.length<E;)y?z.push(new u(3553,0,l.create2D({format:r,type:t,width:b,height:k},3553),null)):z.push(new u(36161,0,null,x.create({format:r,width:b,height:k})))}a.width=b;a.height=k;r=y=c=null;t=!1;"depthBuffer"in p&&(c=h(p.depthBuffer));"stencilBuffer"in p&&(y=h(p.stencilBuffer));"depthStencilBuffer"in p&&(r=h(p.depthStencilBuffer));if(c||y||r)v(c||y||r,a);else if(E=!0,D=A=!1,"depth"in p&&(E=!!p.depth),"stencil"in p&&(A=!!p.stencil),"depthTexture"in
p&&(D=!!p.depthTexture),p=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,g=null,E||A)t=!0,D?(D=A?"depth stencil":"depth",a.ownsDepthStencil&&p.texture?(p.texture({format:D,width:b,height:k}),p.texture._texture.refCount+=1,g=p):g=new u(3553,0,l.create({format:D,width:b,height:k},3553),null)):(D=E?A?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&p.renderbuffer?(p.renderbuffer({format:D,width:b,height:k}),p.renderbuffer._renderbuffer.refCount+=1,g=p):g=new u(36161,0,null,x.create({format:D,
width:b,height:k}))),E?A?r=g:c=g:y=g;b=a;b.colorAttachments.forEach(w);w(b.depthAttachment);w(b.stencilAttachment);w(b.depthStencilAttachment);a.colorAttachments=z;a.depthAttachment=c;a.stencilAttachment=y;a.depthStencilAttachment=r;a.ownsColor=n;a.ownsDepthStencil=t;d.color=z.map(e);d.depth=e(c);d.stencil=e(y);d.depthStencil=e(r);q(a);d.width=a.width;d.height=a.height;return d}var a=new c;d(b);d._reglType="framebuffer";d._framebuffer=a;d._destroy=function(){p(a)};return d},clear:function(){t(g).forEach(p)},
refresh:function(){t(g).forEach(q)}})}},{"./util/extend":21,"./util/values":28}],13:[function(a,g,m){g.exports=function(a,r){var f=1;r.ext_texture_filter_anisotropic&&(f=a.getParameter(34047));var d=1,k=1;r.webgl_draw_buffers&&(d=a.getParameter(34852),k=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(r).filter(function(d){return!!r[d]}),
maxAnisotropic:f,maxDrawbuffers:d,maxColorAttachments:k,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),
maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,g,m){var t=a("./util/is-typed-array");g.exports=function(a,f,d){return function(k){var l=k||{};t(k)?l={data:l}:2===arguments.length?l={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof k&&(l={});f();var x=l.x||0,u=l.y||0,w=l.width||d.viewportWidth,v=l.height||d.viewportHeight,l=l.data||new Uint8Array(w*v*4);a.pixelStorei(3333,
4);a.readPixels(x,u,w,v,6408,5121,l);return l}}},{"./util/is-typed-array":23}],15:[function(a,g,m){var t=a("./util/values");g.exports=function(a,f,d){function k(){this.id=w++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function l(d){a.isRenderbuffer(d.renderbuffer)||(d.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,d.renderbuffer);a.renderbufferStorage(36161,d.format,d.width,d.height)}function x(d){var f=d.renderbuffer;a.bindRenderbuffer(36161,
null);a.isRenderbuffer(f)&&a.deleteRenderbuffer(f);d.renderbuffer=null;d.refCount=0;delete v[d.id]}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(u.srgba=35907);f.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);f.webgl_color_buffer_float&&(u.rgba32f=34836);var w=0,v={};k.prototype.decRef=function(){0===--this.refCount&&x(this)};return{create:function(d){function f(c){c=c||{};var d=0,p=0;"shape"in c?(p=c.shape,d=p[0]|0,p=
p[1]|0):("radius"in c&&(d=p=c.radius|0),"width"in c&&(d=c.width|0),"height"in c&&(p=c.height|0));f.width=e.width=Math.max(d,1);f.height=e.height=Math.max(p,1);e.format=32854;"format"in c&&(e.format=u[c.format]);l(e);return f}var e=new k;v[e.id]=e;f(d);f._reglType="renderbuffer";f._renderbuffer=e;f.destroy=function(){e.decRef()};return f},refresh:function(){t(v).forEach(l)},clear:function(){t(v).forEach(x)}}}},{"./util/values":28}],16:[function(a,g,m){var t=a("./util/values");g.exports=function(a,
f){function d(c,e,d,f){this.name=c;this.id=e;this.location=d;this.info=f}function k(c,e){for(var d=0;d<c.length;++d)if(c[d].id===e.id){c[d].location=e.location;return}c.push(e)}function l(c,e,d){d=35632===c?w:v;var h=d[e];if(!h){var k=f.str(e),h=a.createShader(c);a.shaderSource(h,k);a.compileShader(h);d[e]=h}return h}function x(c,d){this.id=e++;this.fragId=c;this.vertId=d;this.program=null;this.uniforms=[];this.attributes=[]}function u(c,e){var h,n;h=l(35632,c.fragId);n=l(35633,c.vertId);var v=c.program=
a.createProgram();a.attachShader(v,h);a.attachShader(v,n);a.linkProgram(v);var b=a.getProgramParameter(v,35718),z=c.uniforms;for(h=0;h<b;++h)if(n=a.getActiveUniform(v,h))if(1<n.size)for(var u=0;u<n.size;++u){var x=n.name.replace("[0]","["+u+"]");k(z,new d(x,f.id(x),a.getUniformLocation(v,x),n))}else k(z,new d(n.name,f.id(n.name),a.getUniformLocation(v,n.name),n));b=a.getProgramParameter(v,35721);z=c.attributes;for(h=0;h<b;++h)(n=a.getActiveAttrib(v,h))&&k(z,new d(n.name,f.id(n.name),a.getAttribLocation(v,
n.name),n))}var w={},v={},n={},h=[],e=0;return{clear:function(){var c=a.deleteShader.bind(a);t(w).forEach(c);w={};t(v).forEach(c);v={};h.forEach(function(c){a.deleteProgram(c.program)});h.length=0;n={}},refresh:function(){w={};v={};h.forEach(u)},program:function(c,e,d){var f=n[e];f||(f=n[e]={});var a=f[c];a||(a=new x(e,c),u(a,d),f[c]=a,h.push(a));return a},shader:l,frag:null,vert:null}}},{"./util/values":28}],17:[function(a,g,m){g.exports=function(){var a={"":0},r=[""];return{id:function(f){var d=
a[f];if(d)return d;d=a[f]=r.length;r.push(f);return d},str:function(f){return r[f]}}}},{}],18:[function(a,g,m){function t(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function r(c){if(!Array.isArray(c))return!1;var e=c.length;if(0===e||!Array.isArray(c[0]))return!1;for(var b=c[0].length,d=1;d<e;++d)if(!Array.isArray(c[d])||c[d].length!==b)return!1;return!0}function f(c){return Object.prototype.toString.call(c)}function d(c){if(!c)return!1;var e=f(c);return 0<=p.indexOf(e)?!0:
t(c)||r(c)||w(c)}function k(c,e){36193===c.type?(c.data=n(e),v.freeType(e)):c.data=e}var l=a("./util/extend"),x=a("./util/values"),u=a("./util/is-typed-array"),w=a("./util/is-ndarray"),v=a("./util/pool"),n=a("./util/to-half-float");m=a("./constants/arraytypes.json");var h=a("./constants/arraytypes.json"),e=[9984,9986,9985,9987],c=[0,6409,6410,6407,6408],q={};q[6409]=q[6406]=q[6402]=1;q[34041]=q[6410]=2;q[6407]=3;q[6408]=4;var p=Object.keys(m).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]",
"[object HTMLImageElement]","[object HTMLVideoElement]"]);g.exports=function(a,p,b,z,E){function D(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function A(b,c){b.internalformat=c.internalformat;b.format=c.format;b.type=c.type;b.compressed=c.compressed;b.premultiplyAlpha=c.premultiplyAlpha;b.flipY=c.flipY;b.unpackAlignment=c.unpackAlignment;b.colorSpace=c.colorSpace;
b.width=c.width;b.height=c.height;b.channels=c.channels}function g(b,e){if("object"===typeof e&&e){"premultiplyAlpha"in e&&(b.premultiplyAlpha=e.premultiplyAlpha);"flipY"in e&&(b.flipY=e.flipY);"alignment"in e&&(b.unpackAlignment=e.alignment);"colorSpace"in e&&(b.colorSpace=na[e.colorSpace]);"type"in e&&(b.type=ca[e.type]);var d=b.width,f=b.height,h=b.channels,a=!1;"shape"in e?(d=e.shape[0],f=e.shape[1],3===e.shape.length&&(h=e.shape[2],a=!0)):("radius"in e&&(d=f=e.radius),"width"in e&&(d=e.width),
"height"in e&&(f=e.height),"channels"in e&&(h=e.channels,a=!0));b.width=d|0;b.height=f|0;b.channels=h|0;d=!1;"format"in e&&(d=e.format,f=b.internalformat=da[d],b.format=wa[f],d in ca&&!("type"in e)&&(b.type=ca[d]),d in ea&&(b.compressed=!0),d=!0);!a&&d?b.channels=q[b.format]:a&&!d&&b.channels!==c[b.format]&&(b.format=b.internalformat=c[b.channels])}}function m(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}
function H(){D.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function C(b,e){var a=null;d(e)?a=e:e&&(g(b,e),"x"in e&&(b.xOffset=e.x|0),"y"in e&&(b.yOffset=e.y|0),d(e.data)&&(a=e.data));if(e.copy){var p=E.viewportWidth,q=E.viewportHeight;b.width=b.width||p-b.xOffset;b.height=b.height||q-b.yOffset;b.needsCopy=!0}else if(!a)b.width=b.width||1,b.height=b.height||1;else if(u(a))b.data=a,"type"in e||5121!==b.type||(b.type=h[Object.prototype.toString.call(a)]|
0);else if(t(a)){p=a;q=b.width*b.height*b.channels;switch(b.type){case 5121:case 5123:case 5125:case 5126:q=v.allocType(b.type,q);q.set(p);b.data=q;break;case 36193:b.data=n(p)}b.alignment=1;b.needsFree=!0}else if(w(a)){p=a.data;Array.isArray(p)||5121!==b.type||(b.type=h[Object.prototype.toString.call(p)]|0);var q=a.shape,l=a.stride,z,G,y,I;3===q.length?(y=q[2],I=l[2]):I=y=1;z=q[0];G=q[1];q=l[0];l=l[1];b.alignment=1;b.width=z;b.height=G;b.channels=y;b.format=b.internalformat=c[y];b.needsFree=!0;z=
I;a=a.offset;y=b.width;I=b.height;G=b.channels;for(var x=v.allocType(36193===b.type?5126:b.type,y*I*G),A=0,D=0;D<I;++D)for(var F=0;F<y;++F)for(var L=0;L<G;++L)x[A++]=p[q*F+l*D+z*L+a];k(b,x)}else if("[object HTMLCanvasElement]"===f(a)||"[object CanvasRenderingContext2D]"===f(a))"[object HTMLCanvasElement]"===f(a)?b.element=a:b.element=a.canvas,b.width=b.element.width,b.height=b.element.height;else if("[object HTMLImageElement]"===f(a))b.element=a,b.width=a.naturalWidth,b.height=a.naturalHeight;else if("[object HTMLVideoElement]"===
f(a))b.element=a,b.width=a.videoWidth,b.height=a.videoHeight,b.needsPoll=!0;else if(r(a)){p=a[0].length;q=a.length;l=1;if(Array.isArray(a[0][0])){z=l=a[0][0].length;y=v.allocType(36193===b.type?5126:b.type,p*q*z);for(G=I=0;G<q;++G)for(x=a[G],A=0;A<p;++A)for(D=x[A],F=0;F<z;++F)y[I++]=D[F];k(b,y)}else{z=v.allocType(36193===b.type?5126:b.type,p*q);for(I=y=0;I<q;++I)for(G=a[I],x=0;x<p;++x)z[y++]=G[x];k(b,z)}b.alignment=1;b.width=p;b.height=q;b.channels=l;b.format=b.internalformat=c[l];b.needsFree=!0}}
function N(b,c,e,d,f){var h=b.element,p=b.data,q=b.internalformat,k=b.format,l=b.type,n=b.width,r=b.height;m(b);h?a.texSubImage2D(c,f,e,d,k,l,h):b.compressed?a.compressedTexSubImage2D(c,f,e,d,q,n,r,p):b.needsCopy?(z(),a.copyTexSubImage2D(c,f,e,d,b.xOffset,b.yOffset,n,r)):a.texSubImage2D(c,f,e,d,n,r,k,l,p)}function M(){return oa.pop()||new H}function K(b){b.needsFree&&v.freeType(b.data);H.call(b);oa.push(b)}function Q(){D.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function G(b,c,e){var d=b.images[0]=M();b.mipmask=1;d.width=b.width=c;d.height=b.height=e}function I(b,c){var e=null;if(d(c))e=b.images[0]=M(),C(e,c),b.mipmask=1;else if(g(b,c),Array.isArray(c.mipmap))for(var f=c.mipmap,h=0;h<f.length;++h)e=b.images[h]=M(),A(e,b),e.width>>=h,e.height>>=h,C(e,f[h]),b.mipmask|=1<<h;else e=b.images[0]=M(),A(e,b),C(e,c),b.mipmask=1;A(b,b.images[0])}function L(b,c){for(var e=b.images,d=0;d<e.length&&e[d];++d){var f=e[d],h=c,p=d,q=f.element,k=f.data,l=f.internalformat,
n=f.format,r=f.type,v=f.width,G=f.height;m(f);q?a.texImage2D(h,p,n,n,r,q):f.compressed?a.compressedTexImage2D(h,p,l,v,G,0,k):f.needsCopy?(z(),a.copyTexImage2D(h,p,n,f.xOffset,f.yOffset,v,G,0)):a.texImage2D(h,p,n,v,G,0,n,r,k)}}function O(){var b=va.pop()||new Q;D.call(b);for(var c=b.mipmask=0;16>c;++c)b.images[c]=null;return b}function U(b){for(var c=b.images,e=0;e<c.length;++e)c[e]&&K(c[e]),c[e]=null;va.push(b)}function Y(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=
1;this.genMipmaps=!1;this.mipmapHint=4352}function X(b,c){"min"in c&&(b.minFilter=ma[c.min],0<=e.indexOf(b.minFilter)&&(b.genMipmaps=!0));"mag"in c&&(b.magFilter=ka[c.mag]);var d=b.wrapS,f=b.wrapT;if("wrap"in c){var h=c.wrap;"string"===typeof h?d=f=aa[h]:Array.isArray(h)&&(d=aa[h[0]],f=aa[h[1]])}else"wrapS"in c&&(d=aa[c.wrapS]),"wrapT"in c&&(f=aa[c.wrapT]);b.wrapS=d;b.wrapT=f;"anisotropic"in c&&(b.anisotropic=c.anisotropic);if("mipmap"in c){d=!1;switch(typeof c.mipmap){case "string":b.mipmapHint=
Z[c.mipmap];d=b.genMipmaps=!0;break;case "boolean":d=b.genMipmaps=c.mipmap;break;case "object":b.genMipmaps=!1,d=!0}!d||"min"in c||(b.minFilter=9984)}}function V(b,c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,10243,b.wrapT);p.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function W(){var b=qa.pop()||new Y;Y.call(b);return b}function R(b){D.call(this);
this.mipmask=0;this.id=la++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0}function T(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function S(){var b=fa[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function P(b){var c=b.texture,e=b.unit,d=b.target;0<=e&&(a.activeTexture(33984+e),a.bindTexture(d,null),fa[e]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ba[b.id]}var Z={"don't care":4352,
"dont care":4352,nice:4354,fast:4353},aa={repeat:10497,clamp:33071,mirror:33648},ka={nearest:9728,linear:9729},ma=l({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ka),na={none:0,browser:37444},ca={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},da={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ea={};p.ext_srgb&&(da.srgb=35904,da.srgba=35906);p.oes_texture_float&&
(ca["float"]=5126);p.oes_texture_half_float&&(ca.float16=ca["half float"]=36193);p.webgl_depth_texture&&(l(da,{depth:6402,"depth stencil":34041}),l(ca,{uint16:5123,uint32:5125,"depth stencil":34042}));p.webgl_compressed_texture_s3tc&&l(ea,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});p.webgl_compressed_texture_atc&&l(ea,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});p.webgl_compressed_texture_pvrtc&&l(ea,{"rgb pvrtc 4bppv1":35840,
"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});p.webgl_compressed_texture_etc1&&(ea["rgb etc1"]=36196);var ta=Array.prototype.slice.call(a.getParameter(34467));Object.keys(ea).forEach(function(b){var c=ea[b];0<=ta.indexOf(c)&&(da[b]=c)});var ua=Object.keys(da);b.textureFormats=ua;var wa=ua.reduce(function(b,c){var e=da[c];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e?b[e]=e:32855===e||0<=c.indexOf("rgba")?b[e]=6408:b[e]=6407;return b},{}),oa=[],va=[],
qa=[],la=0,ba={},ga=b.maxTextureUnits,fa=Array(ga).map(function(){return null});l(R.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<ga;++c){var e=fa[c];if(e){if(0<e.bindCount)continue;e.unit=-1}fa[c]=this;b=c;break}this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&P(this)}});return{create2D:function(b,c){function e(b,c){var f=W(),h=O();"number"===typeof b?
"number"===typeof c?G(h,b|0,c|0):G(h,b|0,b|0):b?(X(f,b),I(h,b)):G(h,1,1);f.genMipmaps&&(h.mipmask=(h.width<<1)-1);d.mipmask=h.mipmask;A(d,h);e.width=h.width;e.height=h.height;T(d);L(h,3553);V(f,3553);S();qa.push(f);U(h);return e}var d=new R(3553);ba[d.id]=d;e(b,c);e.subimage=function(b,c,f,h){c|=0;f|=0;h|=0;var a=M();A(a,d);a.width>>=h;a.height>>=h;a.width-=c;a.height-=f;C(a,b);T(d);N(a,3553,c,f,h);S();K(a);return e};e._reglType="texture2d";e._texture=d;e.destroy=function(){d.decRef()};return e},
createCube:function(b,c,e,d,f,h){function a(b,c,e,d,f,h){var k,l=W();for(k=0;6>k;++k)q[k]=O();if("number"===typeof b||!b)for(b=b|0||1,k=0;6>k;++k)G(q[k],b,b);else if("object"===typeof b)if(c)I(q[0],b),I(q[1],c),I(q[2],e),I(q[3],d),I(q[4],f),I(q[5],h);else if(X(l,b),g(p,b),"faces"in b)for(b=b.faces,k=0;6>k;++k)A(q[k],p),I(q[k],b[k]);else for(k=0;6>k;++k)I(q[k],b);A(p,q[0]);p.mipmask=l.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;a.width=q[0].width;a.height=q[0].height;T(p);for(k=0;6>k;++k)L(q[k],34069+
k);V(l,34067);S();qa.push(l);for(k=0;6>k;++k)U(q[k]);return a}var p=new R(34067);ba[p.id]=p;var q=Array(6);a(b,c,e,d,f,h);a.subimage=function(b,c,e,d,f){e|=0;d|=0;f|=0;var h=M();A(h,p);h.width>>=f;h.height>>=f;h.width-=e;h.height-=d;C(h,c);T(p);N(h,34069+b,e,d,f);S();K(h);return a};a._reglType="textureCube";a._texture=p;a.destroy=function(){p.decRef()};return a},clear:function(){for(var b=0;b<ga;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),fa[b]=null;x(ba).forEach(P)},getTexture:function(b){return null}}}},
{"./constants/arraytypes.json":4,"./util/extend":21,"./util/is-ndarray":22,"./util/is-typed-array":23,"./util/pool":25,"./util/to-half-float":27,"./util/values":28}],19:[function(a,g,m){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],20:[function(a,g,m){function t(d){return Array.prototype.slice.call(d)}function r(d){return t(d).join("")}var f=a("./extend");g.exports=function(){function d(){var d=[],h=[];return f(function(){d.push.apply(d,
t(arguments))},{def:function(){var e="v"+l++;h.push(e);0<arguments.length&&(d.push(e,"="),d.push.apply(d,t(arguments)),d.push(";"));return e},toString:function(){return r([0<h.length?"var "+h+";":"",r(d)])}})}function a(){function k(c,d){e(c,d,"=",h.def(c,d),";")}var h=d(),e=d(),c=h.toString,q=e.toString;return f(h,{entry:h,exit:e,save:k,set:function(c,e,d){k(c,e);h(c,e,"=",d,";")},toString:function(){return c()+q()}})}var l=0,x=[],u=[],w=d(),v={};return{global:w,link:function(d){for(var f=0;f<u.length;++f)if(u[f]===
d)return x[f];f="g"+l++;x.push(f);u.push(d);return f},block:d,proc:function(d,h){function e(){var e="a"+c.length;c.push(e);return e}var c=[];h=h||0;for(var q=0;q<h;++q)e();var q=a(),p=q.toString;return v[d]=f(q,{arg:e,toString:function(){return r(["function(",c.join(),"){",p(),"}"])}})},scope:a,cond:function(){var d=r(arguments),h=a(),e=a(),c=h.toString,q=e.toString;return f(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){e.apply(e,t(arguments));return this},toString:function(){var e=
q();e&&(e="else{"+e+"}");return r(["if(",d,"){",c(),"}",e])}})},compile:function(){var d=['"use strict";',w,"return {"];Object.keys(v).forEach(function(e){d.push('"',e,'":',v[e].toString(),",")});d.push("}");var f=r(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,x.concat(f)).apply(null,u)}}}},{"./extend":21}],21:[function(a,g,m){g.exports=function(a,r){for(var f=Object.keys(r),d=0;d<f.length;++d)a[f[d]]=r[f[d]];return a}},{}],22:[function(a,g,m){var t=a("./is-typed-array");
g.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":23}],23:[function(a,g,m){var t=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in t}},{"../constants/arraytypes.json":4}],24:[function(a,g,m){g.exports=function(a,r){for(var f=Array(a),d=0;d<a;++d)f[d]=r(d);return f}},{}],25:[function(a,
g,m){function t(d){var f,a;f=(65535<d)<<4;d>>>=f;a=(255<d)<<3;d>>>=a;f|=a;a=(15<d)<<2;d>>>=a;f|=a;a=(3<d)<<1;return f|a|d>>>a>>1}function r(f){a:{for(var a=16;268435456>=a;a*=16)if(f<=a){f=a;break a}f=0}a=d[t(f)>>2];return 0<a.length?a.pop():new ArrayBuffer(f)}function f(f){d[t(f.byteLength)>>2].push(f)}var d=a("./loop")(8,function(){return[]});g.exports={alloc:r,free:f,allocType:function(d,f){var a=null;switch(d){case 5120:a=new Int8Array(r(f),0,f);break;case 5121:a=new Uint8Array(r(f),0,f);break;
case 5122:a=new Int16Array(r(2*f),0,f);break;case 5123:a=new Uint16Array(r(2*f),0,f);break;case 5124:a=new Int32Array(r(4*f),0,f);break;case 5125:a=new Uint32Array(r(4*f),0,f);break;case 5126:a=new Float32Array(r(4*f),0,f);break;default:return null}return a.length!==f?a.subarray(0,f):a},freeType:function(d){f(d.buffer)}}},{"./loop":24}],26:[function(a,g,m){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},
cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],27:[function(a,g,m){var t=a("./pool"),r=new Float32Array(1),f=new Uint32Array(r.buffer);g.exports=function(d){for(var a=t.allocType(5123,d.length),l=0;l<d.length;++l)if(isNaN(d[l]))a[l]=65535;else if(Infinity===d[l])a[l]=31744;else if(-Infinity===d[l])a[l]=64512;else{r[0]=d[l];var x=f[0],u=x>>>31<<15,w=(x<<1>>>24)-127,x=x>>13&1023;a[l]=-24>w?u:-14>w?u+(x+1024>>-14-w):15<w?u+31744:u+(w+
15<<10)+x}return a}},{"./pool":25}],28:[function(a,g,m){g.exports=function(a){return Object.keys(a).map(function(r){return a[r]})}},{}],29:[function(a,g,m){function t(d,a){function l(){var a=window.innerWidth,h=window.innerHeight;d!==document.body&&(h=d.getBoundingClientRect(),a=h.right-h.left,h=h.top-h.bottom);x.width=w*a;x.height=w*h;f(x.style,{width:a+"px",height:h+"px"})}var x=document.createElement("canvas"),u=r(x,a);f(x.style,{border:0,margin:0,padding:0,top:0,left:0});d.appendChild(x);d===
document.body&&(x.style.position="absolute",f(d.style,{margin:0,padding:0}));var w=+u.options.pixelRatio;window.addEventListener("resize",l,!1);var v=u.options.onDestroy;u.options=f(f({},u.options),{onDestroy:function(){window.removeEventListener("resize",l);d.removeChild(x);v&&v()}});l();return u}function r(d,a){function l(f){try{return d.getContext(f,r)}catch(a){return null}}var r=a.glOptions||{};return{gl:l("webgl")||l("experimental-webgl")||l("webgl-experimental"),options:f({pixelRatio:window.devicePixelRatio},
a)}}var f=a("./util/extend");g.exports=function(d){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:d[0],options:d[1]||{}};var a=document.body,l=d[1]||{};if("string"===typeof d[0])a=document.querySelector(d[0])||document.body;else if("object"===typeof d[0])if(d[0]instanceof HTMLElement)a=d[0];else{if(d[0]instanceof WebGLRenderingContext)return{gl:d[0],options:f({pixelRatio:1},l)};l=d[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?r(a,l):t(a,l)}},{"./util/extend":21}],
30:[function(a,g,m){function t(d,f,a){for(var u=[],w=f;w<a;w+=3)f=(d[w]<<16)+(d[w+1]<<8)+d[w+2],u.push(r[f>>18&63]+r[f>>12&63]+r[f>>6&63]+r[f&63]);return u.join("")}m.toByteArray=function(a){var l,r,u,w,v;l=a.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[l-2]?2:"="===a[l-1]?1:0;v=new d(3*l/4-w);r=0<w?l-4:l;var n=0;for(l=0;l<r;l+=4)u=f[a.charCodeAt(l)]<<18|f[a.charCodeAt(l+1)]<<12|f[a.charCodeAt(l+2)]<<6|f[a.charCodeAt(l+3)],v[n++]=u>>16&255,v[n++]=u>>8&255,
v[n++]=u&255;2===w?(u=f[a.charCodeAt(l)]<<2|f[a.charCodeAt(l+1)]>>4,v[n++]=u&255):1===w&&(u=f[a.charCodeAt(l)]<<10|f[a.charCodeAt(l+1)]<<4|f[a.charCodeAt(l+2)]>>2,v[n++]=u>>8&255,v[n++]=u&255);return v};m.fromByteArray=function(d){for(var f=d.length,a=f%3,u="",w=[],v=0,n=f-a;v<n;v+=16383)w.push(t(d,v,v+16383>n?n:v+16383));1===a?(d=d[f-1],u+=r[d>>2],u+=r[d<<4&63],u+="=="):2===a&&(d=(d[f-2]<<8)+d[f-1],u+=r[d>>10],u+=r[d>>4&63],u+=r[d<<2&63],u+="=");w.push(u);return w.join("")};var r=[],f=[],d="undefined"!==
typeof Uint8Array?Uint8Array:Array;(function(){for(var d=0;64>d;++d)r[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=d;f[45]=62;f[95]=63})()},{}],31:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,f){return t(a[0].mul(f[1]).add(f[0].mul(a[1])),a[1].mul(f[1]))}},{"./lib/rationalize":41}],32:[function(a,g,m){g.exports=function(a,r){return a[0].mul(r[1]).cmp(r[0].mul(a[1]))}},
{}],33:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,f){return t(a[0].mul(f[1]),a[1].mul(f[0]))}},{"./lib/rationalize":41}],34:[function(a,g,m){function t(a,w){if(r(a))return w?x(a,t(w)):[a[0].clone(),a[1].clone()];var v=0,n,h;if(f(a))n=a.clone();else if("string"===typeof a)n=k(a);else{if(0===a)return[d(0),d(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;n=d(a)}if(r(w))n.mul(w[1]),h=w[0].clone();else if(f(w))h=w.clone();else if("string"===typeof w)h=
k(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),v+=256;h=d(w)}else h=d(1);0<v?n=n.shln(v):0>v&&(h=h.shln(-v));return l(n,h)}var r=a("./is-rat"),f=a("./lib/is-bn"),d=a("./lib/num-to-bn"),k=a("./lib/str-to-bn"),l=a("./lib/rationalize"),x=a("./div");g.exports=t},{"./div":33,"./is-rat":35,"./lib/is-bn":39,"./lib/num-to-bn":40,"./lib/rationalize":41,"./lib/str-to-bn":42}],35:[function(a,g,m){var t=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&
t(a[0])&&t(a[1])}},{"./lib/is-bn":39}],36:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return a.cmp(new t(0))}},{"bn.js":44}],37:[function(a,g,m){g.exports=function(a){var r=a.length,f=a.words,d=0;if(1===r)d=f[0];else if(2===r)d=f[0]+67108864*f[1];else for(var k=d=0;k<r;k++)d+=f[k]*Math.pow(67108864,k);return a.sign?-d:d}},{}],38:[function(a,g,m){var t=a("double-bits"),r=a("bit-twiddle").countTrailingZeros;g.exports=function(f){var d=r(t.lo(f));if(32>d)return d;f=r(t.hi(f));return 20<f?
52:f+32}},{"bit-twiddle":49,"double-bits":70}],39:[function(a,g,m){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":44}],40:[function(a,g,m){var t=a("bn.js"),r=a("double-bits");g.exports=function(f){var d=r.exponent(f);return 52>d?new t(f):(new t(f*Math.pow(2,52-d))).shln(d-52)}},{"bn.js":44,"double-bits":70}],41:[function(a,g,m){var t=a("./num-to-bn"),r=a("./bn-sign");g.exports=function(f,d){var a=r(f),l=r(d);if(0===a)return[t(0),t(1)];if(0===l)return[t(0),t(0)];
0>l&&(f=f.neg(),d=d.neg());a=f.gcd(d);return a.cmpn(1)?[f.div(a),d.div(a)]:[f,d]}},{"./bn-sign":36,"./num-to-bn":40}],42:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return new t(a)}},{"bn.js":44}],43:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,f){return t(a[0].mul(f[0]),a[1].mul(f[1]))}},{"./lib/rationalize":41}],44:[function(a,g,m){(function(a,r){function f(b,c){if(!b)throw Error(c||"Assertion failed");}function d(b,c){b.super_=c;var e=function(){};e.prototype=
c.prototype;b.prototype=new e;b.prototype.constructor=b}function k(b,c,e){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)e=c,c=10;null!==b&&this._init(b||0,c||10,e||"be")}function l(b,c,e){var d=0;for(e=Math.min(b.length,e);c<e;c++)var f=b.charCodeAt(c)-48,d=d<<4,d=49<=f&&54>=f?d|f-49+10:17<=f&&22>=f?d|f-17+10:d|f&15;return d}function x(b,c,e,d){var f=0;for(e=Math.min(b.length,e);c<e;c++)var a=b.charCodeAt(c)-
48,f=f*d,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function u(b,c){this.name=b;this.p=new k(c,16);this.n=this.p.bitLength();this.k=(new k(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function n(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){u.call(this,
"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function e(b){"string"===typeof b?(b=k._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function c(b){e.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new k(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===
typeof a?a.exports=k:r.BN=k;k.BN=k;k.wordSize=26;k.prototype._init=function(b,c,e){if("number"===typeof b)return this._initNumber(b,c,e);if("object"===typeof b)return this._initArray(b,c,e);"hex"===c&&(c=16);f(c===(c|0)&&2<=c&&36>=c);b=b.toString().replace(/\s+/g,"");var d=0;"-"===b[0]&&d++;16===c?this._parseHex(b,d):this._parseBase(b,c,d);"-"===b[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),c,e)};k.prototype._initNumber=function(b,c,e){0>b&&(this.sign=!0,b=-b);67108864>
b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(f(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===e&&this._initArray(this.toArray(),c,e)};k.prototype._initArray=function(b,c,e){f("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var d=0;if("be"===
e)for(c=b.length-1,e=0;0<=c;c-=3){var a=b[c]|b[c-1]<<8|b[c-2]<<16;this.words[e]|=a<<d&67108863;this.words[e+1]=a>>>26-d&67108863;d+=24;26<=d&&(d-=26,e++)}else if("le"===e)for(e=c=0;c<b.length;c+=3)a=b[c]|b[c+1]<<8|b[c+2]<<16,this.words[e]|=a<<d&67108863,this.words[e+1]=a>>>26-d&67108863,d+=24,26<=d&&(d-=26,e++);return this.strip()};k.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;for(var d=0,e=b.length-
6,f=0;e>=c;e-=6){var a=l(b,e,e+6);this.words[f]|=a<<d&67108863;this.words[f+1]|=a>>>26-d&4194303;d+=24;26<=d&&(d-=26,f++)}e+6!==c&&(a=l(b,c,e+6),this.words[f]|=a<<d&67108863,this.words[f+1]|=a>>>26-d&4194303);this.strip()};k.prototype._parseBase=function(b,c,e){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=c)d++;d--;for(var f=f/c|0,a=b.length-e,h=a%d,q=Math.min(a,a-h)+e,a=0;e<q;e+=d)a=x(b,e,e+d,c),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==h){d=1;a=
x(b,e,b.length,c);for(e=0;e<h;e++)d*=c;this.imuln(d);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};k.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};k.prototype.clone=function(){var b=new k(null);this.copy(b);return b};k.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};k.prototype._normSign=function(){1===
this.length&&0===this.words[0]&&(this.sign=!1);return this};k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var q=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(b,c){b=b||10;if(16===b||"hex"===b){var e="",d=0;c=c|0||1;for(var a=0,h=0;h<this.length;h++){var l=
this.words[h],k=((l<<d|a)&16777215).toString(16),a=l>>>24-d&16777215,e=0!==a||h!==this.length-1?q[6-k.length]+k+e:k+e,d=d+2;26<=d&&(d-=26,h--)}for(0!==a&&(e=a.toString(16)+e);0!==e.length%c;)e="0"+e;this.sign&&(e="-"+e);return e}if(b===(b|0)&&2<=b&&36>=b){d=p[b];a=y[b];e="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)l=h.modn(a).toString(b),h=h.idivn(a),e=0!==h.cmpn(0)?q[d-l.length]+l+e:l+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}f(!1,"Base should be between 2 and 36")};k.prototype.toJSON=
function(){return this.toString(16)};k.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var e=this.clone();if("le"!==b)for(b=0;0!==e.cmpn(0);b++){var d=e.andln(255);e.ishrn(8);c[c.length-b-1]=d}else for(b=0;0!==e.cmpn(0);b++)d=e.andln(255),e.ishrn(8),c[b]=d;return c};k.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};k.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};k.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};k.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var e=this._zeroBits(this.words[c]),b=b+e;if(26!==e)break}return b};k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};k.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};k.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};k.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};k.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var e=
0;e<c.length;e++)this.words[e]&=b.words[e];this.length=c.length;return this.strip()};k.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};k.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var e=0;e<b.length;e++)this.words[e]=c.words[e]^b.words[e];if(this!==c)for(;e<c.length;e++)this.words[e]=c.words[e];this.length=c.length;return this.strip()};k.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};k.prototype.setn=function(b,c){f("number"===typeof b&&0<=b);for(var e=b/26|0,d=b%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=c?this.words[e]|1<<d:this.words[e]&~(1<<d);return this.strip()};k.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var e;this.length>b.length?e=this:(e=b,b=this);
for(var d=c=0;d<b.length;d++)c=e.words[d]+b.words[d]+c,this.words[d]=c&67108863,c>>>=26;for(;0!==c&&d<e.length;d++)c=e.words[d]+c,this.words[d]=c&67108863,c>>>=26;this.length=e.length;if(0!==c)this.words[this.length]=c,this.length++;else if(e!==this)for(;d<e.length;d++)this.words[d]=e.words[d];return this};k.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};k.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var e;0<c?e=this:(e=b,b=this);for(var d=0,f=0;f<b.length;f++)c=e.words[f]-b.words[f]+d,d=c>>26,this.words[f]=c&67108863;for(;0!==d&&f<e.length;f++)c=e.words[f]+d,d=c>>26,this.words[f]=c&67108863;if(0===d&&f<e.length&&e!==this)for(;f<
e.length;f++)this.words[f]=e.words[f];this.length=Math.max(this.length,f);e!==this&&(this.sign=!0);return this.strip()};k.prototype.sub=function(b){return this.clone().isub(b)};k.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0;d<c.length-1;d++){for(var f=e>>>26,e=e&67108863,a=Math.min(d,b.length-1),h=Math.max(0,d-this.length+1);h<=a;h++)var q=(this.words[d-h]|0)*(b.words[h]|0),p=q&67108863,f=f+(q/67108864|0)|0,p=p+e|0,e=p&67108863,f=f+(p>>>
26)|0;c.words[d]=e;e=f}0!==e?c.words[d]=e:c.length--;return c.strip()};k.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var e=0,d=0,f=0;f<c.length-1;f++){for(var a=d,d=0,e=e&67108863,h=Math.min(f,b.length-1),q=Math.max(0,f-this.length+1);q<=h;q++)var p=(this.words[f-q]|0)*(b.words[q]|0),l=p&67108863,a=a+(p/67108864|0)|0,l=l+e|0,e=l&67108863,a=a+(l>>>26)|0,d=d+(a>>>26),a=a&67108863;c.words[f]=e;e=a}0!==e?c.words[f]=e:c.length--;return c.strip()};k.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};k.prototype.mul=function(b){var c=new k(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};k.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,e=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var d=this.length-2;0<=d;d--){for(var f=0,a=0,h=Math.min(d,e-1),q=Math.max(0,d-c+1);q<=h;q++)var p=
d-q,p=this.words[p]*b.words[q],l=p&67108863,f=f+(p/67108864|0),l=l+a,a=l&67108863,f=f+(l>>>26);this.words[d]=a;this.words[d+1]+=f}f=0;for(p=1;p<this.length;p++)b=this.words[p]+f,this.words[p]=b&67108863,f=b>>>26;return this.strip()};k.prototype.imuln=function(b){f("number"===typeof b);for(var c=0,e=0;e<this.length;e++){var d=this.words[e]*b,a=(d&67108863)+(c&67108863),c=c>>26,c=c+(d/67108864|0),c=c+(a>>>26);this.words[e]=a&67108863}0!==c&&(this.words[e]=c,this.length++);return this};k.prototype.muln=
function(b){return this.clone().imuln(b)};k.prototype.sqr=function(){return this.mul(this)};k.prototype.isqr=function(){return this.mul(this)};k.prototype.ishln=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var e=67108863>>>26-c<<26-c;if(0!==c){for(var d=0,a=0;a<this.length;a++){var h=this.words[a]&e;this.words[a]=this.words[a]-h<<c|d;d=h>>>26-c}d&&(this.words[a]=d,this.length++)}if(0!==b){for(a=this.length-1;0<=a;a--)this.words[a+b]=this.words[a];for(a=0;a<b;a++)this.words[a]=0;
this.length+=b}return this.strip()};k.prototype.ishrn=function(b,c,e){f("number"===typeof b&&0<=b);var d=b%26,a=Math.min((b-d)/26,this.length);b=67108863^67108863>>>d<<d;c=(c?(c-c%26)/26:0)-a;c=Math.max(0,c);if(e){for(var h=0;h<a;h++)e.words[h]=this.words[h];e.length=a}if(0!==a)if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;a=0;for(h=this.length-1;0<=h&&(0!==a||h>=c);h--){var q=this.words[h];this.words[h]=a<<26-d|q>>>d;a=
q&b}e&&0!==a&&(e.words[e.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};k.prototype.shln=function(b){return this.clone().ishln(b)};k.prototype.shrn=function(b){return this.clone().ishrn(b)};k.prototype.testn=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};k.prototype.imaskn=function(b){f("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;f(!this.sign,"imaskn works only with positive numbers");0!==
c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};k.prototype.maskn=function(b){return this.clone().imaskn(b)};k.prototype.iaddn=function(b){f("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};k.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};k.prototype.isubn=function(b){f("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};k.prototype.addn=function(b){return this.clone().iaddn(b)};
k.prototype.subn=function(b){return this.clone().isubn(b)};k.prototype.iabs=function(){this.sign=!1;return this};k.prototype.abs=function(){return this.clone().iabs()};k.prototype._ishlnsubmul=function(b,c,e){var d=b.length+e,a;if(this.words.length<d){var h=Array(d);for(a=0;a<this.length;a++)h[a]=this.words[a];this.words=h}else a=this.length;for(this.length=Math.max(this.length,d);a<this.length;a++)this.words[a]=0;for(a=h=0;a<b.length;a++)d=this.words[a+e]+h,h=b.words[a]*c,d-=h&67108863,h=(d>>26)-
(h/67108864|0),this.words[a+e]=d&67108863;for(;a<this.length-e;a++)d=this.words[a+e]+h,h=d>>26,this.words[a+e]=d&67108863;if(0===h)return this.strip();f(-1===h);for(a=h=0;a<this.length;a++)d=-this.words[a]+h,h=d>>26,this.words[a]=d&67108863;this.sign=!0;return this.strip()};k.prototype._wordDiv=function(b,c){var e=this.length-b.length,d=this.clone(),f=b,a=f.words[f.length-1],e=26-this._countBits(a);0!==e&&(f=f.shln(e),d.ishln(e),a=f.words[f.length-1]);var h=d.length-f.length,q;if("mod"!==c){q=new k(null);
q.length=h+1;q.words=Array(q.length);for(var p=0;p<q.length;p++)q.words[p]=0}p=d.clone()._ishlnsubmul(f,1,h);p.sign||(d=p,q&&(q.words[h]=1));for(--h;0<=h;h--){p=67108864*d.words[f.length+h]+d.words[f.length+h-1];p=Math.min(p/a|0,67108863);for(d._ishlnsubmul(f,p,h);d.sign;)p--,d.sign=!1,d._ishlnsubmul(f,1,h),0!==d.cmpn(0)&&(d.sign=!d.sign);q&&(q.words[h]=p)}q&&q.strip();d.strip();"div"!==c&&0!==e&&d.ishrn(e);return{div:q?q:null,mod:d}};k.prototype.divmod=function(b,c){f(0!==b.cmpn(0));if(this.sign&&
!b.sign){var e=this.neg().divmod(b,c),d,a;"mod"!==c&&(d=e.div.neg());"div"!==c&&(a=0===e.mod.cmpn(0)?e.mod:b.sub(e.mod));return{div:d,mod:a}}return!this.sign&&b.sign?(e=this.divmod(b.neg(),c),"mod"!==c&&(d=e.div.neg()),{div:d,mod:e.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new k(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new k(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new k(this.modn(b.words[0]))}:
this._wordDiv(b,c)};k.prototype.div=function(b){return this.divmod(b,"div").div};k.prototype.mod=function(b){return this.divmod(b,"mod").mod};k.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var e=c.div.sign?c.mod.isub(b):c.mod,d=b.shrn(1);b=b.andln(1);e=e.cmp(d);return 0>e||1===b&&0===e?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};k.prototype.modn=function(b){f(67108863>=b);for(var c=67108864%b,e=0,d=this.length-1;0<=d;d--)e=(c*e+this.words[d])%b;return e};
k.prototype.idivn=function(b){f(67108863>=b);for(var c=0,e=this.length-1;0<=e;e--)c=this.words[e]+67108864*c,this.words[e]=c/b|0,c%=b;return this.strip()};k.prototype.divn=function(b){return this.clone().idivn(b)};k.prototype.egcd=function(b){f(!b.sign);f(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var d=new k(0),a=new k(0),h=new k(1),q=0;c.isEven()&&e.isEven();)c.ishrn(1),e.ishrn(1),++q;for(var p=e.clone(),l=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&d.isEven()?(b.ishrn(1),d.ishrn(1)):(b.iadd(p).ishrn(1),d.isub(l).ishrn(1));for(;e.isEven();)e.ishrn(1),a.isEven()&&h.isEven()?(a.ishrn(1),h.ishrn(1)):(a.iadd(p).ishrn(1),h.isub(l).ishrn(1));0<=c.cmp(e)?(c.isub(e),b.isub(a),d.isub(h)):(e.isub(c),a.isub(b),h.isub(d))}return{a:a,b:h,gcd:e.ishln(q)}};k.prototype._invmp=function(b){f(!b.sign);f(0!==b.cmpn(0));var c=this,e=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var d=new k(0),a=e.clone();0<c.cmpn(1)&&0<e.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(a).ishrn(1);for(;e.isEven();)e.ishrn(1),d.isEven()?d.ishrn(1):d.iadd(a).ishrn(1);0<=c.cmp(e)?(c.isub(e),b.isub(d)):(e.isub(c),d.isub(b))}return 0===c.cmpn(1)?b:d};k.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var e=0;c.isEven()&&b.isEven();e++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var d=c.cmp(b);if(0>d)d=c,c=b,b=d;else if(0===
d||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(e)};k.prototype.invm=function(b){return this.egcd(b).a.mod(b)};k.prototype.isEven=function(){return 0===(this.words[0]&1)};k.prototype.isOdd=function(){return 1===(this.words[0]&1)};k.prototype.andln=function(b){return this.words[0]&b};k.prototype.bincn=function(b){f("number"===typeof b);var c=b%26;b=(b-c)/26;var e=1<<c;if(this.length<=b){for(c=this.length;c<b+1;c++)this.words[c]=0;this.words[b]|=e;this.length=b+1;return this}for(c=b;0!==e&&
c<this.length;c++)b=this.words[c],b+=e,e=b>>>26,b&=67108863,this.words[c]=b;0!==e&&(this.words[c]=e,this.length++);return this};k.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};k.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};k.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,e=this.length-1;0<=e;e--){var d=this.words[e],f=b.words[e];if(d!==f){d<f?c=-1:d>f&&(c=1);break}}return c};k.red=function(b){return new e(b)};k.prototype.toRed=function(b){f(!this.red,"Already a number in reduction context");f(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};k.prototype.fromRed=function(){f(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
k.prototype._forceRed=function(b){this.red=b;return this};k.prototype.forceRed=function(b){f(!this.red,"Already a number in reduction context");return this._forceRed(b)};k.prototype.redAdd=function(b){f(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};k.prototype.redIAdd=function(b){f(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};k.prototype.redSub=function(b){f(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};k.prototype.redISub=
function(b){f(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};k.prototype.redShl=function(b){f(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};k.prototype.redMul=function(b){f(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};k.prototype.redIMul=function(b){f(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};k.prototype.redSqr=function(){f(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};k.prototype.redISqr=function(){f(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};k.prototype.redSqrt=function(){f(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};k.prototype.redInvm=function(){f(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};k.prototype.redNeg=
function(){f(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};k.prototype.redPow=function(b){f(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var b=new k(null);b.words=Array(Math.ceil(this.n/13));return b};u.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};u.prototype.split=function(b,c){b.ishrn(this.n,0,c)};u.prototype.imulK=function(b){return b.imul(this.k)};d(w,u);w.prototype.split=function(b,c){for(var e=Math.min(b.length,9),d=0;d<e;d++)c.words[d]=b.words[d];c.length=e;if(9>=b.length)b.words[0]=0,b.length=1;else{e=b.words[9];c.words[c.length++]=e&4194303;for(d=10;d<b.length;d++){var f=b.words[d];b.words[d-10]=(f&4194303)<<4|e>>>22;e=f}b.words[d-10]=
e>>>22;b.length-=9}};w.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,e=0,d=0;d<b.length;d++){var f=b.words[d];c=64*f;e+=977*f;c+=e/67108864|0;e&=67108863;b.words[d]=e;e=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};d(v,u);d(n,u);d(h,u);h.prototype.imulK=function(b){for(var c=0,e=0;e<b.length;e++){var c=19*b.words[e]+c,d=c&67108863,c=c>>>26;b.words[e]=d}0!==c&&(b.words[b.length++]=c);return b};k._prime=function(b){if(g[b])return g[b];
var c;if("k256"===b)c=new w;else if("p224"===b)c=new v;else if("p192"===b)c=new n;else if("p25519"===b)c=new h;else throw Error("Unknown prime "+b);return g[b]=c};e.prototype._verify1=function(b){f(!b.sign,"red works only with positives");f(b.red,"red works only with red numbers")};e.prototype._verify2=function(b,c){f(!b.sign&&!c.sign,"red works only with positives");f(b.red&&b.red===c.red,"red works only with red numbers")};e.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};e.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};e.prototype.add=function(b,c){this._verify2(b,c);var e=b.add(c);0<=e.cmp(this.m)&&e.isub(this.m);return e._forceRed(this)};e.prototype.iadd=function(b,c){this._verify2(b,c);var e=b.iadd(c);0<=e.cmp(this.m)&&e.isub(this.m);return e};e.prototype.sub=function(b,c){this._verify2(b,c);var e=b.sub(c);0>e.cmpn(0)&&e.iadd(this.m);return e._forceRed(this)};e.prototype.isub=function(b,
c){this._verify2(b,c);var e=b.isub(c);0>e.cmpn(0)&&e.iadd(this.m);return e};e.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};e.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};e.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};e.prototype.isqr=function(b){return this.imul(b,b)};e.prototype.sqr=function(b){return this.mul(b,b)};e.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);f(1===
c%2);if(3===c){var c=this.m.add(new k(1)).ishrn(2),e=this.pow(b,c);return e}for(var d=this.m.subn(1),a=0;0!==d.cmpn(0)&&0===d.andln(1);)a++,d.ishrn(1);f(0!==d.cmpn(0));for(var c=(new k(1)).toRed(this),e=c.redNeg(),h=this.m.subn(1).ishrn(1),q=this.m.bitLength(),q=(new k(2*q*q)).toRed(this);0!==this.pow(q,h).cmp(e);)q.redIAdd(e);h=this.pow(q,d);e=this.pow(b,d.addn(1).ishrn(1));b=this.pow(b,d);for(d=a;0!==b.cmp(c);){q=b;for(a=0;0!==q.cmp(c);a++)q=q.redSqr();f(a<d);h=this.pow(h,(new k(1)).ishln(d-a-1));
e=e.redMul(h);h=h.redSqr();b=b.redMul(h);d=a}return e};e.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};e.prototype.pow=function(b,c){var e=[];if(0===c.cmpn(0))return new k(1);for(var d=c.clone();0!==d.cmpn(0);)e.push(d.andln(1)),d.ishrn(1);for(var f=b,a=0;a<e.length&&0===e[a];a++,f=this.sqr(f));if(++a<e.length)for(d=this.sqr(f);a<e.length;a++,d=this.sqr(d))0!==e[a]&&(f=this.mul(f,d));return f};e.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};e.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};k.mont=function(b){return new c(b)};d(c,e);c.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};c.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};c.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var e=b.imul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);
0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new k(0))._forceRed(this);var e=b.mul(c),d=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=e=e.isub(d).ishrn(this.shift);0<=e.cmp(this.m)?d=e.isub(this.m):0>e.cmpn(0)&&(d=e.iadd(this.m));return d._forceRed(this)};c.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],45:[function(a,g,m){var t=a("./lib/bn-sign");g.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":36}],46:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,f){return t(a[0].mul(f[1]).sub(a[1].mul(f[0])),a[1].mul(f[1]))}},{"./lib/rationalize":41}],47:[function(a,g,m){var t=a("./lib/bn-to-num"),r=a("./lib/ctz");g.exports=function(a){var d=a[0];a=a[1];if(0===d.cmpn(0))return 0;var k=d.divmod(a),d=t(k.div),k=k.mod;if(0===k.cmpn(0))return d;if(d){var l=
r(d)+4;a=t(k.shln(l).divRound(a));0>d&&(a=-a);return d+a*Math.pow(2,-l)}d=a.bitLength()-k.bitLength()+53;a=t(k.shln(d).divRound(a));if(1023>d)return a*Math.pow(2,-d);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-d)}},{"./lib/bn-to-num":37,"./lib/ctz":38}],48:[function(a,g,m){function t(a,d,k,l,r){a=["function ",a,"(a,l,h,",l.join(","),"){",r?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];r?0>d.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",d,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");r?a.push("return -1};"):a.push("return i};");return a.join("")}function r(a,d,k,l){return(new Function([t("A","x"+a+"y",d,["y"],l),t("P","c(x,y)"+a+"0",d,["y","c"],l),"function dispatchBsearch",k,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",k].join("")))()}
g.exports={ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",!0,"EQ",!0)}},{}],49:[function(a,g,m){function t(a){var d=32;(a&=-a)&&d--;a&65535&&(d-=16);a&16711935&&(d-=8);a&252645135&&(d-=4);a&858993459&&(d-=2);a&1431655765&&--d;return d}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(a){return(0<a)-(0>a)};m.abs=function(a){var d=a>>31;return(a^d)-d};m.min=function(a,d){return d^(a^d)&-(a<d)};m.max=function(a,d){return a^(a^
d)&-(a<d)};m.isPow2=function(a){return!(a&a-1)&&!!a};m.log2=function(a){var d,k;d=(65535<a)<<4;a>>>=d;k=(255<a)<<3;a>>>=k;d|=k;k=(15<a)<<2;a>>>=k;d|=k;k=(3<a)<<1;return d|k|a>>>k>>1};m.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};m.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};m.countTrailingZeros=t;m.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};m.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};m.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var r=Array(256);(function(a){for(var d=0;256>d;++d){for(var k=d,l=d,r=7,k=k>>>1;k;k>>>=1)l<<=1,l|=k&1,--r;a[d]=l<<r&255}})(r);m.reverse=function(a){return r[a&255]<<24|r[a>>>8&255]<<16|r[a>>>16&255]<<8|r[a>>>24&255]};m.interleave2=function(a,d){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(a|a<<1)&1431655765|((d|d<<1)&1431655765)<<1};m.deinterleave2=function(a,d){a=a>>>d&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};m.interleave3=function(a,d,k){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;a=(a|a<<2)&1227133513|((d|d<<2)&1227133513)<<1;k&=1023;
k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;return a|((k|k<<2)&1227133513)<<2};m.deinterleave3=function(a,d){a=a>>>d&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};m.nextCombination=function(a){var d=a|a-1;return d+1|(~d&-~d)-1>>>t(a)+1}},{}],50:[function(a,g,m){function t(d,a,f,l){for(var h=0,e=0,c=0,q=d.length;c<q;++c){var p=d[c],k;a:{for(k=0;k<a;++k)if(!(p[k]<=p[k+a])){k=!0;break a}k=!1}if(!k){for(k=0;k<2*a;++k)f[h++]=
p[k];l[e++]=c}}return e}function r(a,f,v,n){var h=a.length,e=f.length;if(!(0>=h||0>=e)){var c=a[0].length>>>1;if(!(0>=c)){var q,p=d.mallocDouble(2*c*h),r=d.mallocInt32(h),h=t(a,c,p,r);if(0<h){if(1===c&&n)k.init(h),q=k.sweepComplete(c,v,0,h,p,r,0,h,p,r);else{a=d.mallocDouble(2*c*e);var x=d.mallocInt32(e),e=t(f,c,a,x);0<e&&(k.init(h+e),q=1===c?k.sweepBipartite(c,v,0,h,p,r,0,e,a,x):l(c,v,n,h,p,r,e,a,x),d.free(a),d.free(x))}d.free(p);d.free(r)}return q}}}function f(d,a){x.push([d,a])}g.exports=function(d,
a,l){switch(arguments.length){case 1:return x=[],r(d,d,f,!0),x;case 2:if("function"===typeof a)return r(d,d,a,!0);x=[];r(d,a,f,!1);return x;case 3:return r(d,a,l,!1);default:throw Error("box-intersect: Invalid arguments");}};var d=a("typedarray-pool"),k=a("./lib/sweep"),l=a("./lib/intersect"),x},{"./lib/intersect":52,"./lib/sweep":56,"typedarray-pool":118}],51:[function(a,g,m){function t(a){function d(d,k){var n,h="bruteForce"+(d?"Red":"Blue")+(k?"Flip":"")+(a?"Full":"");n=["function ",h,"(",r.join(),
"){","var ","es","=2*","d",";"];var e="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";d?n.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",e):n.push(e,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");a?n.push("if(y1<x0||x1<y0)continue;"):k?n.push("if(y0<=x0||x1<y0)continue;"):n.push("if(y0<x0||x1<y0)continue;");n.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
k?n.push("yi,xi"):n.push("xi,yi");n.push(");if(rv!==void 0)return rv;}}}");n=n.join("");l.push(n);u.push("return "+h+"("+r.join()+");")}var k="bruteForce"+(a?"Full":"Partial"),l=[],x=r.slice();a||x.splice(3,0,"fp");var u=["function "+k+"("+x.join()+"){"];u.push("if(re-rs>be-bs){");a?(d(!0,!1),u.push("}else{"),d(!1,!1)):(u.push("if(fp){"),d(!0,!0),u.push("}else{"),d(!0,!1),u.push("}}else{if(fp){"),d(!1,!0),u.push("}else{"),d(!1,!1),u.push("}"));u.push("}}return "+k);k=l.join("")+u.join("");return(new Function(k))()}
var r="d ax vv rs re rb ri bs be bb bi".split(" ");m.partial=t(!1);m.full=t(!0)},{}],52:[function(a,g,m){function t(c,e,d,a,h,f,q,p,l){var k=y*c;b[k]=e;b[k+1]=d;b[k+2]=a;b[k+3]=h;b[k+4]=f;b[k+5]=q;c*=F;z[c]=p;z[c+1]=l}g.exports=function(a,g,m,B,J,H,C,N,M){var K=8*f.log2(B+C+1)*(a+1)|0,Q=f.nextPow2(y*K);b.length<Q&&(r.free(b),b=r.mallocInt32(Q));K=f.nextPow2(F*K);z<K&&(r.free(z),z=r.mallocDouble(K));var K=0,Q=2*a,G;t(K++,0,0,B,0,C,m?16:0,-Infinity,Infinity);for(m||t(K++,0,0,C,0,B,1,-Infinity,Infinity);0<
K;){--K;m=K*y;var I=b[m];C=b[m+1];var L=b[m+2],O=b[m+3],U=b[m+4];m=b[m+5];B=K*F;var Y=z[B],X=z[B+1],V=m&1,W=!!(m&16),R=J,T=H,S=N;B=M;V&&(R=N,T=M,S=J,B=H);if(m&2&&(L=e(a,I,C,L,R,T,X),C>=L))continue;if(m&4&&(C=c(a,I,C,L,R,T,Y),C>=L))continue;m=L-C;var P=U-O;if(W){if(a*m*(m+P)<v){G=l.scanComplete(a,I,g,C,L,R,T,O,U,S,B);if(void 0!==G)return G;continue}}else if(a*Math.min(m,P)<u){G=d(a,I,g,V,C,L,R,T,O,U,S,B);if(void 0!==G)return G;continue}else if(a*m*P<w){G=l.scanBipartite(a,I,g,V,C,L,R,T,O,U,S,B);if(void 0!==
G)return G;continue}m=n(a,I,C,L,R,T,Y,X);if(C<m)if(a*(m-C)<u){if(G=k(a,I+1,g,C,m,R,T,O,U,S,B),void 0!==G)return G}else if(I===a-2){if(G=V?l.sweepBipartite(a,g,O,U,S,B,C,m,R,T):l.sweepBipartite(a,g,C,m,R,T,O,U,S,B),void 0!==G)return G}else t(K++,I+1,C,m,O,U,V,-Infinity,Infinity),t(K++,I+1,O,U,C,m,V^1,-Infinity,Infinity);if(m<L)if(C=x(a,I,O,U,S,B),G=S[Q*C+I],P=h(a,I,C,U,S,B,G),P<U&&t(K++,I,m,L,P,U,(V|4)+(W?16:0),G,X),O<C&&t(K++,I,m,L,O,C,(V|2)+(W?16:0),Y,G),C+1===P){if(W)a:{O=a;U=g;B=B[C];V=2*O;C*=
V;Y=S[C+I];X=m;m*=V;b:for(;X<L;++X,m+=V)if(W=T[X],W!==B&&(P=R[m+I],G=R[m+I+O],!(Y<P||G<Y))){for(var Z=I+1;Z<O;++Z){P=R[m+Z];G=R[m+Z+O];var aa=S[C+Z+O];if(G<S[C+Z]||aa<P)continue b}W=U(W,B);if(void 0!==W){G=W;break a}}G=void 0}else a:{O=a;U=g;B=B[C];Y=2*O;C*=Y;X=S[C+I];W=m;m*=Y;b:for(;W<L;++W,m+=Y)if(P=R[m+I],G=R[m+I+O],!(X<P||G<X||V&&X===P)){Z=T[W];for(aa=I+1;aa<O;++aa){P=R[m+aa];G=R[m+aa+O];var ka=S[C+aa+O];if(G<S[C+aa]||ka<P)continue b}P=V?U(B,Z):U(Z,B);if(void 0!==P){G=P;break a}}G=void 0}if(void 0!==
G)return G}else if(C<P)if(W){if(L=q(a,I,m,L,R,T,G),m<L)if(O=h(a,I,m,L,R,T,G),I===a-2){if(m<O&&(G=l.sweepComplete(a,g,m,O,R,T,C,P,S,B),void 0!==G)||O<L&&(G=l.sweepBipartite(a,g,O,L,R,T,C,P,S,B),void 0!==G))return G}else m<O&&t(K++,I+1,m,O,C,P,16,-Infinity,Infinity),O<L&&(t(K++,I+1,O,L,C,P,0,-Infinity,Infinity),t(K++,I+1,C,P,O,L,1,-Infinity,Infinity))}else L=V?p(a,I,m,L,R,T,G):q(a,I,m,L,R,T,G),m<L&&(I===a-2?V?l.sweepBipartite(a,g,C,P,S,B,m,L,R,T):l.sweepBipartite(a,g,m,L,R,T,C,P,S,B):(t(K++,I+1,m,L,
C,P,V,-Infinity,Infinity),t(K++,I+1,C,P,m,L,V^1,-Infinity,Infinity)))}};var r=a("typedarray-pool"),f=a("bit-twiddle");g=a("./brute");var d=g.partial,k=g.full,l=a("./sweep"),x=a("./median");a=a("./partition");var u=128,w=4194304,v=4194304,n=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=a("lo===p0",["p0"]),e=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),q=a("lo<=p0&&p0<=hi",["p0"]),p=a("lo<p0&&p0<=hi",["p0"]),y=6,F=2,b=r.mallocInt32(1024),z=r.mallocDouble(1024)},{"./brute":51,"./median":53,"./partition":54,"./sweep":56,
"bit-twiddle":49,"typedarray-pool":118}],53:[function(a,g,m){g.exports=function(a,d,k,l,x,u){if(l<=k+1)return k;var w=k,v=l;l=l+k>>>1;for(var n=2*a,h=l,e=x[n*l+d];w<v;){if(v-w<r){for(var h=d,e=x,c=u,q=2*a,p=q*(w+1)+h,y=w+1;y<v;++y,p+=q)for(var g=e[p],b=y,m=q*(y-1);b>w&&e[m+h]>g;--b,m-=q){for(var E=m,D=m+q,A=0;A<q;++A,++E,++D){var B=e[E];e[E]=e[D];e[D]=B}E=c[b];c[b]=c[b-1];c[b-1]=E}break}p=v-w;h=Math.random()*p+w|0;e=x[n*h+d];q=Math.random()*p+w|0;c=x[n*q+d];y=Math.random()*p+w|0;p=x[n*y+d];e<=c?p>=
c?(h=q,e=c):e>=p||(h=y,e=p):c>=p?(h=q,e=c):p>=e||(h=y,e=p);c=n*(v-1);q=n*h;for(p=0;p<n;++p,++c,++q)y=x[c],x[c]=x[q],x[q]=y;c=u[v-1];u[v-1]=u[h];u[h]=c;h=t(a,d,w,v-1,x,u,e);c=n*(v-1);q=n*h;for(p=0;p<n;++p,++c,++q)y=x[c],x[c]=x[q],x[q]=y;c=u[v-1];u[v-1]=u[h];u[h]=c;if(l<h){for(v=h-1;w<v&&x[n*(v-1)+d]===e;)--v;v+=1}else if(h<l)for(w=h+1;w<v&&x[n*w+d]===e;)w+=1;else break}return t(a,d,k,l,x,u,x[n*l+d])};var t=a("./partition")("lo<p0",["p0"]),r=8},{"./partition":54}],54:[function(a,g,m){g.exports=function(a,
f){var d="abcdef".split("").concat(f),k=[];0<=a.indexOf("lo")&&k.push("lo=e[k+n]");0<=a.indexOf("hi")&&k.push("hi=e[k+o]");d.push(t.replace("_",k.join()).replace("$",a));return Function.apply(void 0,d)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],55:[function(a,g,m){function t(d,a,f){for(var h=2*(d+1),e=d+1;e<=a;++e){for(var c=f[h++],q=f[h++],p=
e,l=h-2;p-- >d;){var k=f[l-2],b=f[l-1];if(k<c)break;else if(k===c&&b<q)break;f[l]=k;f[l+1]=b;l-=2}f[l]=c;f[l+1]=q}}function r(d,a,f){d*=2;a*=2;var h=f[d],e=f[d+1];f[d]=f[a];f[d+1]=f[a+1];f[a]=h;f[a+1]=e}function f(d,a,f){d*=2;a*=2;f[d]=f[a];f[d+1]=f[a+1]}function d(d,a,f,h,e){d*=2;a*=2;e[d]=e[a];e[a]=f;e[d+1]=e[a+1];e[a+1]=h}function k(d,a,f){d*=2;a*=2;var h=f[d],e=f[a];return h<e?!1:h===e?f[d+1]>f[a+1]:!0}function l(d,a,f,h){d*=2;var e=h[d];return e<a?!0:e===a?h[d+1]<f:!1}function x(a,v,n){var h=
(v-a+1)/6|0,e=a+h,c=v-h,q=a+v>>1,p=q-h,y=q+h,g=e,b=p,m=q,E=y,D=c,h=a+1,A=v-1,B=0;k(g,b,n)&&(B=g,g=b,b=B);k(E,D,n)&&(B=E,E=D,D=B);k(g,m,n)&&(B=g,g=m,m=B);k(b,m,n)&&(B=b,b=m,m=B);k(g,E,n)&&(B=g,g=E,E=B);k(m,E,n)&&(B=m,m=E,E=B);k(b,D,n)&&(B=b,b=D,D=B);k(b,m,n)&&(B=b,b=m,m=B);k(E,D,n)&&(B=E,E=D,D=B);for(var B=n[2*b],b=n[2*b+1],J=n[2*E],E=n[2*E+1],g=2*g,m=2*m,D=2*D,e=2*e,q=2*q,c=2*c,H=0;2>H;++H){var C=n[m+H],N=n[D+H];n[e+H]=n[g+H];n[q+H]=C;n[c+H]=N}f(p,a,n);f(y,v,n);for(p=h;p<=A;++p)if(l(p,B,b,n))p!==
h&&r(p,h,n),++h;else if(!l(p,J,E,n))for(;;)if(l(A,J,E,n)){l(A,B,b,n)?(y=p,c=h,q=A,g=n,y*=2,c*=2,q*=2,e=g[y],m=g[y+1],g[y]=g[c],g[y+1]=g[c+1],g[c]=g[q],g[c+1]=g[q+1],g[q]=e,g[q+1]=m,++h):r(p,A,n);--A;break}else if(--A<p)break;d(a,h-1,B,b,n);d(v,A+1,J,E,n);h-2-a<=u?t(a,h-2,n):x(a,h-2,n);v-(A+2)<=u?t(A+2,v,n):x(A+2,v,n);A-h<=u?t(h,A,n):x(h,A,n)}g.exports=function(d,a){a<=4*u?t(0,a-1,d):x(0,a-1,d)};var u=32},{}],56:[function(a,g,m){function t(e,c,d,a){a=c[a];d=e[d-1];e[a]=d;c[d]=a}g.exports={init:function(e){e=
f.nextPow2(e);l.length<e&&(r.free(l),l=r.mallocInt32(e));x.length<e&&(r.free(x),x=r.mallocInt32(e));u.length<e&&(r.free(u),u=r.mallocInt32(e));w.length<e&&(r.free(w),w=r.mallocInt32(e));v.length<e&&(r.free(v),v=r.mallocInt32(e));n.length<e&&(r.free(n),n=r.mallocInt32(e));e*=8;h.length<e&&(r.free(h),h=r.mallocDouble(e))},sweepBipartite:function(e,c,a,f,n,r,b,v,g,m){var A=0,B=2*e;--e;for(var J=B-1;a<f;++a){var H=r[a],C=B*a;h[A++]=n[C+e];h[A++]=-(H+1);h[A++]=n[C+J];h[A++]=H}for(a=b;a<v;++a)H=m[a]+k,
f=B*a,h[A++]=g[f+e],h[A++]=-H,h[A++]=g[f+J],h[A++]=H;v=A>>>1;d(h,v);for(a=m=g=0;a<v;++a)if(A=h[2*a+1]|0,A>=k)A=A-k|0,t(u,w,m--,A);else if(0<=A)t(l,x,g--,A);else{if(A<=-k){A=-A-k|0;for(B=0;B<g;++B)if(f=c(l[B],A),void 0!==f)return f;B=w;f=m++;u[f]=A}else{A=-A-1|0;for(B=0;B<m;++B)if(f=c(A,u[B]),void 0!==f)return f;B=x;f=g++;l[f]=A}B[A]=f}},sweepComplete:function(e,c,a,f,k,r,b,g,m,D){var A=0,B=2*e;--e;for(var J=B-1;a<f;++a){var H=r[a]+1<<1,C=B*a;h[A++]=k[C+e];h[A++]=-H;h[A++]=k[C+J];h[A++]=H}for(a=b;a<
g;++a)H=D[a]+1<<1,f=B*a,h[A++]=m[f+e],h[A++]=-H|1,h[A++]=m[f+J],h[A++]=H|1;g=A>>>1;d(h,g);for(a=A=D=m=0;a<g;++a)if(B=h[2*a+1]|0,f=B&1,a<g-1&&B>>1===h[2*a+3]>>1&&(f=2,a+=1),0>B){B=-(B>>1)-1;for(k=0;k<A;++k)if(r=c(v[k],B),void 0!==r)return r;if(0!==f)for(k=0;k<m;++k)if(r=c(l[k],B),void 0!==r)return r;if(1!==f)for(k=0;k<D;++k)if(r=c(u[k],B),void 0!==r)return r;0===f?(f=x,k=m++,l[k]=B,f[B]=k):1===f?(f=w,k=D++,u[k]=B,f[B]=k):2===f&&(f=n,k=A++,v[k]=B,f[B]=k)}else B=(B>>1)-1,0===f?t(l,x,m--,B):1===f?t(u,
w,D--,B):2===f&&t(v,n,A--,B)},scanBipartite:function(e,c,a,f,n,r,b,v,u,g,w,m){var J=0,H=2*e,C=c+e,N=1,M=1;for(f?M=k:N=k;n<r;++n){var K=n+N,Q=H*n;h[J++]=b[Q+c];h[J++]=-K;h[J++]=b[Q+C];h[J++]=K}for(n=u;n<g;++n)K=n+M,r=H*n,h[J++]=w[r+c],h[J++]=-K;g=J>>>1;d(h,g);for(n=J=0;n<g;++n)if(K=h[2*n+1]|0,0>K)if(K=-K,M=!1,K>=k?(M=!f,K-=k):(M=!!f,--K),M)M=x,r=J++,l[r]=K,M[K]=r;else a:for(M=m[K],K*=H,r=w[K+c+1],u=w[K+c+1+e],C=0;C<J;++C){var Q=l[C],G=H*Q;if(!(u<b[G+c+1]||b[G+c+1+e]<r)){for(var I=c+2;I<e;++I)if(w[K+
I+e]<b[G+I]||b[G+I+e]<w[K+I])continue a;Q=v[Q];Q=f?a(M,Q):a(Q,M);if(void 0!==Q)return Q}}else t(l,x,J--,K-N)},scanComplete:function(e,c,a,f,n,r,b,v,u,x,g){for(var t=0,w=2*e,m=c+e;f<n;++f){var C=f+k,N=w*f;h[t++]=r[N+c];h[t++]=-C;h[t++]=r[N+m];h[t++]=C}for(f=v;f<u;++f)C=f+1,n=w*f,h[t++]=x[n+c],h[t++]=-C;u=t>>>1;d(h,u);for(f=t=0;f<u;++f)if(n=h[2*f+1]|0,0>n)if(C=-n,C>=k)l[t++]=C-k;else a:for(--C,n=g[C],C*=w,m=x[C+c+1],N=x[C+c+1+e],v=0;v<t;++v){var M=l[v],K=b[M];if(K===n)break;M*=w;if(!(N<r[M+c+1]||r[M+
c+1+e]<m)){for(var Q=c+2;Q<e;++Q)if(x[C+Q+e]<r[M+Q]||r[M+Q+e]<x[C+Q])continue a;K=a(K,n);if(void 0!==K)return K}}else{C=n-k;for(v=t-1;0<=v;--v)if(l[v]===C){for(Q=v+1;Q<t;++Q)l[Q-1]=l[Q];break}--t}}};var r=a("typedarray-pool"),f=a("bit-twiddle"),d=a("./sort"),k=268435456,l=r.mallocInt32(1024),x=r.mallocInt32(1024),u=r.mallocInt32(1024),w=r.mallocInt32(1024),v=r.mallocInt32(1024),n=r.mallocInt32(1024),h=r.mallocDouble(8192)},{"./sort":55,"bit-twiddle":49,"typedarray-pool":118}],57:[function(a,g,m){(function(t){function r(){try{var b=
new Uint8Array(1);b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function f(b,c){if((d.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");d.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=d.prototype):(null===b&&(b=new d(c)),b.length=c);return b}function d(b,c,e){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(b,c,e);if("number"===typeof b){if("string"===
typeof c)throw Error("If encoding is specified then the first argument must be a string");return x(this,b)}return k(this,b,c,e)}function k(b,c,e,a){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>e||c.byteLength<e)throw new RangeError("'offset' is out of bounds");if(c.byteLength<e+(a||0))throw new RangeError("'length' is out of bounds");c=void 0===a?new Uint8Array(c,e):new Uint8Array(c,
e,a);d.TYPED_ARRAY_SUPPORT?(b=c,b.__proto__=d.prototype):b=u(b,c);return b}if("string"===typeof c){a=b;if("string"!==typeof e||""===e)e="utf8";if(!d.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');b=n(c,e)|0;a=f(a,b);a.write(c,e);return a}return g(b,c)}function l(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');}function x(b,c){l(c);b=f(b,0>c?0:v(c)|0);if(!d.TYPED_ARRAY_SUPPORT)for(var e=0;e<c;e++)b[e]=0;return b}function u(b,c){var e=
v(c.length)|0;b=f(b,e);for(var a=0;a<e;a+=1)b[a]=c[a]&255;return b}function g(b,c){if(d.isBuffer(c)){var e=v(c.length)|0;b=f(b,e);if(0===b.length)return b;c.copy(b,0,0,e);return b}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(e="number"!==typeof c.length)||(e=c.length,e=e!==e),e?f(b,0):u(b,c);if("Buffer"===c.type&&M(c.data))return u(b,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function v(b){if(b>=(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function n(b,c){if(d.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var e=b.length;if(0===e)return 0;for(var a=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return e;
case "utf8":case "utf-8":case void 0:return B(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return C.toByteArray(A(b)).length;default:if(a)return B(b).length;c=(""+c).toLowerCase();a=!0}}function h(b,c,e){var a=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;c>>>=0;if(e<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=e;e=this.length;if(!b||0>b)b=0;
if(!c||0>c||c>e)c=e;a="";for(e=b;e<c;e++)b=a,a=this[e],a=16>a?"0"+a.toString(16):a.toString(16),a=b+a;return a;case "utf8":case "utf-8":return q(this,c,e);case "ascii":b="";for(e=Math.min(this.length,e);c<e;c++)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(e=Math.min(this.length,e);c<e;c++)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&e===this.length?C.fromByteArray(this):C.fromByteArray(this.slice(c,e)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,e);e="";for(b=0;b<c.length;b+=2)e+=String.fromCharCode(c[b]+256*c[b+1]);return e;default:if(a)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();a=!0}}function e(b,c,e){var a=b[c];b[c]=b[e];b[e]=a}function c(b,c,e,a){function d(b,c){return 1===f?b[c]:b.readUInt16BE(c*f)}var f=1,h=b.length,q=c.length;if(void 0!==a&&(a=String(a).toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>b.length||2>c.length)return-1;f=2;h/=2;q/=2;e/=2}a=-1;for(var p=0;e+
p<h;p++)if(d(b,e+p)===d(c,-1===a?0:p-a)){if(-1===a&&(a=p),p-a+1===q)return(e+a)*f}else-1!==a&&(p-=p-a),a=-1;return-1}function q(b,c,e){e=Math.min(b.length,e);for(var a=[];c<e;){var d=b[c],f=null,h=239<d?4:223<d?3:191<d?2:1;if(c+h<=e){var q,p,k;switch(h){case 1:128>d&&(f=d);break;case 2:q=b[c+1];128===(q&192)&&(d=(d&31)<<6|q&63,127<d&&(f=d));break;case 3:q=b[c+1];p=b[c+2];128===(q&192)&&128===(p&192)&&(d=(d&15)<<12|(q&63)<<6|p&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:q=b[c+1],p=b[c+2],k=
b[c+3],128===(q&192)&&128===(p&192)&&128===(k&192)&&(d=(d&15)<<18|(q&63)<<12|(p&63)<<6|k&63,65535<d&&1114112>d&&(f=d))}}null===f?(f=65533,h=1):65535<f&&(f-=65536,a.push(f>>>10&1023|55296),f=56320|f&1023);a.push(f);c+=h}b=a.length;if(b<=K)a=String.fromCharCode.apply(String,a);else{e="";for(c=0;c<b;)e+=String.fromCharCode.apply(String,a.slice(c,c+=K));a=e}return a}function p(b,c,e){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>e)throw new RangeError("Trying to access beyond buffer length");
}function y(b,c,e,a,f,h){if(!d.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>f||c<h)throw new RangeError('"value" argument is out of bounds');if(e+a>b.length)throw new RangeError("Index out of range");}function F(b,c,e,a){0>c&&(c=65535+c+1);for(var d=0,f=Math.min(b.length-e,2);d<f;d++)b[e+d]=(c&255<<8*(a?d:1-d))>>>8*(a?d:1-d)}function b(b,c,e,a){0>c&&(c=4294967295+c+1);for(var d=0,f=Math.min(b.length-e,4);d<f;d++)b[e+d]=c>>>8*(a?d:3-d)&255}function z(b,c,e,a,
d,f){if(e+a>b.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function E(b,c,e,a,d){d||z(b,c,e,4,3.4028234663852886E38,-3.4028234663852886E38);N.write(b,c,e,a,23,4);return e+4}function D(b,c,e,a,d){d||z(b,c,e,8,1.7976931348623157E308,-1.7976931348623157E308);N.write(b,c,e,a,52,8);return e+8}function A(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(Q,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function B(b,c){c=c||
Infinity;for(var e,a=b.length,d=null,f=[],h=0;h<a;h++){e=b.charCodeAt(h);if(55295<e&&57344>e){if(!d){if(56319<e){-1<(c-=3)&&f.push(239,191,189);continue}else if(h+1===a){-1<(c-=3)&&f.push(239,191,189);continue}d=e;continue}if(56320>e){-1<(c-=3)&&f.push(239,191,189);d=e;continue}e=(d-55296<<10|e-56320)+65536}else d&&-1<(c-=3)&&f.push(239,191,189);d=null;if(128>e){if(0>--c)break;f.push(e)}else if(2048>e){if(0>(c-=2))break;f.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(c-=3))break;f.push(e>>12|224,
e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(c-=4))break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return f}function J(b){for(var c=[],e=0;e<b.length;e++)c.push(b.charCodeAt(e)&255);return c}function H(b,c,e,a){for(var d=0;d<a&&!(d+e>=c.length||d>=b.length);d++)c[d+e]=b[d];return d}var C=a("base64-js"),N=a("ieee754"),M=a("isarray");m.Buffer=d;m.SlowBuffer=function(b){+b!=b&&(b=0);return d.alloc(+b)};m.INSPECT_MAX_BYTES=50;d.TYPED_ARRAY_SUPPORT=void 0!==
t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r();m.kMaxLength=d.TYPED_ARRAY_SUPPORT?2147483647:1073741823;d.poolSize=8192;d._augment=function(b){b.__proto__=d.prototype;return b};d.from=function(b,c,e){return k(null,b,c,e)};d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&($jscomp.initSymbol(),Object.defineProperty(d,Symbol.species,
{value:null,configurable:!0})));d.alloc=function(b,c,e){l(b);b=0>=b?f(null,b):void 0!==c?"string"===typeof e?f(null,b).fill(c,e):f(null,b).fill(c):f(null,b);return b};d.allocUnsafe=function(b){return x(null,b)};d.allocUnsafeSlow=function(b){return x(null,b)};d.isBuffer=function(b){return!(null==b||!b._isBuffer)};d.compare=function(b,c){if(!d.isBuffer(b)||!d.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var e=b.length,a=c.length,f=0,h=Math.min(e,a);f<h;++f)if(b[f]!==
c[f]){e=b[f];a=c[f];break}return e<a?-1:a<e?1:0};d.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};d.concat=function(b,c){if(!M(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return d.alloc(0);var e;if(void 0===c)for(e=c=0;e<b.length;e++)c+=b[e].length;var a=d.allocUnsafe(c),f=0;for(e=
0;e<b.length;e++){var h=b[e];if(!d.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(a,f);f+=h.length}return a};d.byteLength=n;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)e(this,c,c+1);return this};d.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=
4)e(this,c,c+3),e(this,c+1,c+2);return this};d.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?q(this,0,b):h.apply(this,arguments)};d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===d.compare(this,b)};d.prototype.inspect=function(){var b="",c=m.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};d.prototype.compare=
function(b,c,e,a,f){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===e&&(e=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>c||e>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&c>=e)return 0;if(a>=f)return-1;if(c>=e)return 1;c>>>=0;e>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var h=f-a,q=e-c,p=Math.min(h,q);a=this.slice(a,f);b=b.slice(c,e);for(c=0;c<p;++c)if(a[c]!==b[c]){h=a[c];q=b[c];break}return h<q?-1:q<
h?1:0};d.prototype.indexOf=function(b,e,a){"string"===typeof e?(a=e,e=0):2147483647<e?e=2147483647:-2147483648>e&&(e=-2147483648);e>>=0;if(0===this.length||e>=this.length)return-1;0>e&&(e=Math.max(this.length+e,0));"string"===typeof b&&(b=d.from(b,a));if(d.isBuffer(b))return 0===b.length?-1:c(this,b,e,a);if("number"===typeof b)return d.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,e):c(this,[b],e,a);throw new TypeError("val must be string, number or Buffer");
};d.prototype.includes=function(b,c,e){return-1!==this.indexOf(b,c,e)};d.prototype.write=function(b,c,e,a){if(void 0===c)a="utf8",e=this.length,c=0;else if(void 0===e&&"string"===typeof c)a=c,e=this.length,c=0;else if(isFinite(c))c|=0,isFinite(e)?(e|=0,void 0===a&&(a="utf8")):(a=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-c;if(void 0===e||e>d)e=d;if(0<b.length&&(0>e||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;e?(e=Number(e),e>a&&(e=a)):e=a;a=b.length;if(0!==a%2)throw Error("Invalid hex string");e>a/2&&(e=a/2);for(a=0;a<e;a++){d=parseInt(b.substr(2*a,2),16);if(isNaN(d)){b=a;break a}this[c+a]=d}b=a}return b;case "utf8":case "utf-8":return H(B(b,this.length-c),this,c,e);case "ascii":return H(J(b),this,c,e);case "binary":return H(J(b),this,c,e);case "base64":return H(C.toByteArray(A(b)),this,c,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
this.length-c;for(var f=void 0,f=d=void 0,h=[],q=0;q<b.length&&!(0>(a-=2));q++)f=b.charCodeAt(q),d=f>>8,f%=256,h.push(f),h.push(d);return H(h,this,c,e);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;d.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=
b);if(d.TYPED_ARRAY_SUPPORT)e=this.subarray(b,c),e.__proto__=d.prototype;else for(var a=c-b,e=new d(a,void 0),f=0;f<a;f++)e[f]=this[f+b];return e};d.prototype.readUIntLE=function(b,c,e){b|=0;c|=0;e||p(b,c,this.length);e=this[b];for(var a=1,d=0;++d<c&&(a*=256);)e+=this[b+d]*a;return e};d.prototype.readUIntBE=function(b,c,e){b|=0;c|=0;e||p(b,c,this.length);e=this[b+--c];for(var a=1;0<c&&(a*=256);)e+=this[b+--c]*a;return e};d.prototype.readUInt8=function(b,c){c||p(b,1,this.length);return this[b]};d.prototype.readUInt16LE=
function(b,c){c||p(b,2,this.length);return this[b]|this[b+1]<<8};d.prototype.readUInt16BE=function(b,c){c||p(b,2,this.length);return this[b]<<8|this[b+1]};d.prototype.readUInt32LE=function(b,c){c||p(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};d.prototype.readUInt32BE=function(b,c){c||p(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};d.prototype.readIntLE=function(b,c,e){b|=0;c|=0;e||p(b,c,this.length);e=this[b];for(var a=1,d=0;++d<
c&&(a*=256);)e+=this[b+d]*a;e>=128*a&&(e-=Math.pow(2,8*c));return e};d.prototype.readIntBE=function(b,c,e){b|=0;c|=0;e||p(b,c,this.length);e=c;for(var a=1,d=this[b+--e];0<e&&(a*=256);)d+=this[b+--e]*a;d>=128*a&&(d-=Math.pow(2,8*c));return d};d.prototype.readInt8=function(b,c){c||p(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};d.prototype.readInt16LE=function(b,c){c||p(b,2,this.length);var e=this[b]|this[b+1]<<8;return e&32768?e|4294901760:e};d.prototype.readInt16BE=function(b,c){c||
p(b,2,this.length);var e=this[b+1]|this[b]<<8;return e&32768?e|4294901760:e};d.prototype.readInt32LE=function(b,c){c||p(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};d.prototype.readInt32BE=function(b,c){c||p(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};d.prototype.readFloatLE=function(b,c){c||p(b,4,this.length);return N.read(this,b,!0,23,4)};d.prototype.readFloatBE=function(b,c){c||p(b,4,this.length);return N.read(this,b,!1,23,4)};d.prototype.readDoubleLE=
function(b,c){c||p(b,8,this.length);return N.read(this,b,!0,52,8)};d.prototype.readDoubleBE=function(b,c){c||p(b,8,this.length);return N.read(this,b,!1,52,8)};d.prototype.writeUIntLE=function(b,c,e,a){b=+b;c|=0;e|=0;a||y(this,b,c,e,Math.pow(2,8*e)-1,0);a=1;var d=0;for(this[c]=b&255;++d<e&&(a*=256);)this[c+d]=b/a&255;return c+e};d.prototype.writeUIntBE=function(b,c,e,a){b=+b;c|=0;e|=0;a||y(this,b,c,e,Math.pow(2,8*e)-1,0);a=e-1;var d=1;for(this[c+a]=b&255;0<=--a&&(d*=256);)this[c+a]=b/d&255;return c+
e};d.prototype.writeUInt8=function(b,c,e){b=+b;c|=0;e||y(this,b,c,1,255,0);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};d.prototype.writeUInt16LE=function(b,c,e){b=+b;c|=0;e||y(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):F(this,b,c,!0);return c+2};d.prototype.writeUInt16BE=function(b,c,e){b=+b;c|=0;e||y(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):F(this,b,c,!1);return c+2};d.prototype.writeUInt32LE=function(c,e,a){c=
+c;e|=0;a||y(this,c,e,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[e+3]=c>>>24,this[e+2]=c>>>16,this[e+1]=c>>>8,this[e]=c&255):b(this,c,e,!0);return e+4};d.prototype.writeUInt32BE=function(c,e,a){c=+c;e|=0;a||y(this,c,e,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[e]=c>>>24,this[e+1]=c>>>16,this[e+2]=c>>>8,this[e+3]=c&255):b(this,c,e,!1);return e+4};d.prototype.writeIntLE=function(b,c,e,a){b=+b;c|=0;a||(a=Math.pow(2,8*e-1),y(this,b,c,e,a-1,-a));a=0;var d=1,f=0;for(this[c]=b&255;++a<e&&(d*=256);)0>b&&
0===f&&0!==this[c+a-1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+e};d.prototype.writeIntBE=function(b,c,e,a){b=+b;c|=0;a||(a=Math.pow(2,8*e-1),y(this,b,c,e,a-1,-a));a=e-1;var d=1,f=0;for(this[c+a]=b&255;0<=--a&&(d*=256);)0>b&&0===f&&0!==this[c+a+1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+e};d.prototype.writeInt8=function(b,c,e){b=+b;c|=0;e||y(this,b,c,1,127,-128);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};d.prototype.writeInt16LE=function(b,c,e){b=+b;c|=0;
e||y(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):F(this,b,c,!0);return c+2};d.prototype.writeInt16BE=function(b,c,e){b=+b;c|=0;e||y(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):F(this,b,c,!1);return c+2};d.prototype.writeInt32LE=function(c,e,a){c=+c;e|=0;a||y(this,c,e,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[e]=c&255,this[e+1]=c>>>8,this[e+2]=c>>>16,this[e+3]=c>>>24):b(this,c,e,!0);return e+4};d.prototype.writeInt32BE=
function(c,e,a){c=+c;e|=0;a||y(this,c,e,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);d.TYPED_ARRAY_SUPPORT?(this[e]=c>>>24,this[e+1]=c>>>16,this[e+2]=c>>>8,this[e+3]=c&255):b(this,c,e,!1);return e+4};d.prototype.writeFloatLE=function(b,c,e){return E(this,b,c,!0,e)};d.prototype.writeFloatBE=function(b,c,e){return E(this,b,c,!1,e)};d.prototype.writeDoubleLE=function(b,c,e){return D(this,b,c,!0,e)};d.prototype.writeDoubleBE=function(b,c,e){return D(this,b,c,!1,e)};d.prototype.copy=function(b,c,
e,a){e||(e=0);a||0===a||(a=this.length);c>=b.length&&(c=b.length);c||(c=0);0<a&&a<e&&(a=e);if(a===e||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-c<a-e&&(a=b.length-c+e);var f=a-e;if(this===b&&e<c&&c<a)for(a=f-1;0<=a;a--)b[a+c]=this[a+e];else if(1E3>f||!d.TYPED_ARRAY_SUPPORT)for(a=
0;a<f;a++)b[a+c]=this[a+e];else Uint8Array.prototype.set.call(b,this.subarray(e,e+f),c);return f};d.prototype.fill=function(b,c,e,a){if("string"===typeof b){"string"===typeof c?(a=c,c=0,e=this.length):"string"===typeof e&&(a=e,e=this.length);if(1===b.length){var f=b.charCodeAt(0);256>f&&(b=f)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!d.isEncoding(a))throw new TypeError("Unknown encoding: "+a);}else"number"===typeof b&&(b&=255);if(0>
c||this.length<c||this.length<e)throw new RangeError("Out of range index");if(e<=c)return this;c>>>=0;e=void 0===e?this.length:e>>>0;b||(b=0);if("number"===typeof b)for(a=c;a<e;a++)this[a]=b;else for(b=d.isBuffer(b)?b:B((new d(b,a)).toString()),f=b.length,a=0;a<e-c;a++)this[a+c]=b[a%f];return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":30,ieee754:78,isarray:84}],58:[function(a,g,
m){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function r(a,d){return a[0]-d[0]||a[1]-d[1]}function f(a,d,f){return d in a?a[d]:f}var d=a("./lib/monotone"),k=a("./lib/triangulation"),l=a("./lib/delaunay"),x=a("./lib/filter");g.exports=function(a,g,v){Array.isArray(g)?(v=v||{},g=g||[]):(v=g||{},g=[]);var n=!!f(v,"delaunay",!0),h=!!f(v,"interior",!0),e=!!f(v,"exterior",!0);v=!!f(v,"infinity",!1);if(!h&&!e||0===a.length)return[];var c=d(a,g);if(n||h!==e||v){g=k(a.length,g.map(t).sort(r));
for(var q=0;q<c.length;++q){var p=c[q];g.addTriangle(p[0],p[1],p[2])}n&&l(a,g);return e?h?v?x(g,0,v):g.cells():x(g,1,v):x(g,-1)}return c}},{"./lib/delaunay":59,"./lib/filter":60,"./lib/monotone":61,"./lib/triangulation":62}],59:[function(a,g,m){function t(a,d,k,l,x,u){var g=d.opposite(l,x);if(!(0>g)){if(x<l){var v=l;l=x;x=v;v=u;u=g;g=v}d.isConstraint(l,x)||0>r(a[l],a[x],a[u],a[g])&&k.push(l,x)}}var r=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(a,d){for(var k=[],l=a.length,
x=d.stars,u=0;u<l;++u)for(var g=x[u],v=1;v<g.length;v+=2){var n=g[v];if(!(n<u||d.isConstraint(u,n))){for(var h=g[v-1],e=-1,c=1;c<g.length;c+=2)if(g[c-1]===n){e=g[c];break}0>e||0>r(a[u],a[n],a[h],a[e])&&k.push(u,n)}}for(;0<k.length;){n=k.pop();u=k.pop();e=h=-1;g=x[u];for(l=1;l<g.length;l+=2)v=g[l-1],c=g[l],v===n?e=c:c===n&&(h=v);0>h||0>e||0<=r(a[u],a[n],a[h],a[e])||(d.flip(u,n),t(a,d,k,h,u,e),t(a,d,k,u,e,h),t(a,d,k,e,n,h),t(a,d,k,n,h,e))}}},{"binary-search-bounds":48,"robust-in-sphere":99}],60:[function(a,
g,m){function t(a,f,l,r,u,g,v){this.cells=a;this.neighbor=f;this.flags=r;this.constraint=l;this.active=u;this.next=g;this.boundary=v}function r(a,f){return a[0]-f[0]||a[1]-f[1]||a[2]-f[2]}var f=a("binary-search-bounds");g.exports=function(a,f,l){for(var g=a.cells(),u=g.length,w=0;w<u;++w){var v=g[w],n=v[0],h=v[1],e=v[2];h<e?h<n&&(v[0]=h,v[1]=e,v[2]=n):e<n&&(v[0]=e,v[1]=n,v[2]=h)}g.sort(r);for(var c=Array(u),w=0;w<c.length;++w)c[w]=0;var q=[],p=[],y=Array(3*u),m=Array(3*u),b=null;l&&(b=[]);e=new t(g,
y,m,c,q,p,b);for(w=0;w<u;++w)for(var v=g[w],z=0;3>z;++z){var n=v[z],h=v[(z+1)%3],E=y[3*w+z]=e.locate(h,n,a.opposite(h,n)),D=m[3*w+z]=a.isConstraint(n,h);0>E&&(D?p.push(w):(q.push(w),c[w]=1),l&&b.push([h,n,-1]))}if(0===f)return l?e.cells.concat(e.boundary):e.cells;u=1;w=e.active;v=e.next;a=e.flags;g=e.cells;n=e.constraint;for(h=e.neighbor;0<w.length||0<v.length;){for(;0<w.length;)if(c=w.pop(),a[c]!==-u)for(a[c]=u,q=0;3>q;++q)p=h[3*c+q],0<=p&&0===a[p]&&(n[3*c+q]?v.push(p):(w.push(p),a[p]=u));c=v;v=
w;w=c;v.length=0;u=-u}for(w=u=0;w<g.length;++w)a[w]===f&&(g[u++]=g[w]);g.length=u;return l?g.concat(e.boundary):g};t.prototype.locate=function(){var a=[0,0,0];return function(k,l,g){var u=k,t=l,v=g;l<g?l<k&&(u=l,t=g,v=k):g<k&&(u=g,t=k,v=l);if(0>u)return-1;a[0]=u;a[1]=t;a[2]=v;return f.eq(this.cells,a,r)}}()},{"binary-search-bounds":48}],61:[function(a,g,m){function t(a,d,f,k,h){this.a=a;this.b=d;this.idx=f;this.lowerIds=k;this.upperIds=h}function r(a,d,f,k){this.a=a;this.b=d;this.type=f;this.idx=
k}function f(a,d){var f=a.a[0]-d.a[0]||a.a[1]-d.a[1]||a.type-d.type;return f||0!==a.type&&(f=x(a.a,a.b,d.b))?f:a.idx-d.idx}function d(a,d){return x(a.a,a.b,d)}function k(a,d){var f;return(f=a.a[0]<d.a[0]?x(a.a,a.b,d.a):x(d.b,d.a,a.a))?f:(f=d.b[0]<a.b[0]?x(a.a,a.b,d.b):x(d.b,d.a,a.b))||a.idx-d.idx}var l=a("binary-search-bounds"),x=a("robust-orientation")[3];g.exports=function(a,g){for(var v=a.length,n=g.length,h=[],e=0;e<v;++e)h.push(new r(a[e],null,0,e));for(e=0;e<n;++e){var c=g[e],v=a[c[0]],c=a[c[1]];
v[0]<c[0]?h.push(new r(v,c,2,e),new r(c,v,1,e)):v[0]>c[0]&&h.push(new r(c,v,2,e),new r(v,c,1,e))}h.sort(f);e=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);n=[new t([e,1],[e,0],-1,[],[],[],[])];v=[];e=0;for(c=h.length;e<c;++e){var q=h[e],p=q.type;if(0===p)for(var p=v,y=n,m=a,b=q.a,q=q.idx,z=l.lt(y,b,d),E=l.gt(y,b,d);z<E;++z){for(var D=y[z],A=D.lowerIds,B=A.length;1<B&&0<x(m[A[B-2]],m[A[B-1]],b);)p.push([A[B-1],A[B-2],q]),--B;A.length=B;A.push(q);D=D.upperIds;for(B=D.length;1<B&&0>x(m[D[B-2]],m[D[B-
1]],b);)p.push([D[B-2],D[B-1],q]),--B;D.length=B;D.push(q)}else 2===p?(p=n,y=q,m=l.le(p,y,k),b=p[m],q=b.upperIds,E=q[q.length-1],b.upperIds=[E],p.splice(m+1,0,new t(y.a,y.b,y.idx,[E],q))):(p=n,y=q,m=y.a,y.a=y.b,y.b=m,y=l.eq(p,y,k),p[y-1].upperIds=p[y].upperIds,p.splice(y,1))}return v}},{"binary-search-bounds":48,"robust-orientation":100}],62:[function(a,g,m){function t(a,f){this.stars=a;this.edges=f}function r(a,f,l){for(var r=1,g=a.length;r<g;r+=2)if(a[r-1]===f&&a[r]===l){a[r-1]=a[g-2];a[r]=a[g-
1];a.length=g-2;break}}var f=a("binary-search-bounds");g.exports=function(a,f){for(var l=Array(a),r=0;r<a;++r)l[r]=[];return new t(l,f)};a=t.prototype;a.isConstraint=function(){function a(d,f){return d[0]-f[0]||d[1]-f[1]}var k=[0,0];return function(l,r){k[0]=Math.min(l,r);k[1]=Math.max(l,r);return 0<=f.eq(this.edges,k,a)}}();a.removeTriangle=function(a,f,l){var g=this.stars;r(g[a],f,l);r(g[f],l,a);r(g[l],a,f)};a.addTriangle=function(a,f,l){var r=this.stars;r[a].push(f,l);r[f].push(l,a);r[l].push(a,
f)};a.opposite=function(a,f){for(var l=this.stars[f],r=1,g=l.length;r<g;r+=2)if(l[r]===a)return l[r-1];return-1};a.flip=function(a,f){var l=this.opposite(a,f),r=this.opposite(f,a);this.removeTriangle(a,f,l);this.removeTriangle(f,a,r);this.addTriangle(a,r,l);this.addTriangle(f,l,r)};a.edges=function(){for(var a=this.stars,f=[],l=0,r=a.length;l<r;++l)for(var g=a[l],t=0,v=g.length;t<v;t+=2)f.push([g[t],g[t+1]]);return f};a.cells=function(){for(var a=this.stars,f=[],l=0,r=a.length;l<r;++l)for(var g=a[l],
t=0,v=g.length;t<v;t+=2){var n=g[t],h=g[t+1];l<Math.min(n,h)&&f.push([l,n,h])}return f}},{"binary-search-bounds":48}],63:[function(a,g,m){function t(a){var b=c(a);a=e(h(b),a);return 0>a?[b,p(b,Infinity)]:0<a?[p(b,-Infinity),b]:[b,b]}function r(c,b,e){var a=[];v(e,function(e,d){var f=b[e],h=b[d];f[0]!==h[0]&&f[0]!==h[1]&&f[1]!==h[0]&&f[1]!==h[1]&&n(c[f[0]],c[f[1]],c[h[0]],c[h[1]])&&a.push([e,d])});return a}function f(c,b,e,a){var d=[];v(e,a,function(e,a){var f=b[e];if(f[0]!==a&&f[1]!==a){var h=c[a];
n(c[f[0]],c[f[1]],h,h)&&d.push([e,a])}});return d}function d(c,b,a,d,f){function p(b){if(b>=c.length)return l[b-c.length];b=c[b];return[h(b[0]),h(b[1])]}for(var l=[],k=0;k<a.length;++k){var n=a[k],r=n[0],n=n[1],v=b[r],g=b[n];if(v=y(q(c[v[0]]),q(c[v[1]]),q(c[g[0]]),q(c[g[1]])))g=l.length+c.length,l.push(v),d.push([r,g],[n,g])}d.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var a=p(b[1]),d=p(c[1]);return e(a[0],d[0])||e(a[1],d[1])});for(k=d.length-1;0<=k;--k){n=d[k];r=n[0];v=b[r];g=v[0];a=v[1];
var t=c[g],u=c[a];0>(t[0]-u[0]||t[1]-u[1])&&(t=g,g=a,a=t);v[0]=g;var g=v[1]=n[1],x;for(f&&(x=v[2]);0<k&&d[k-1][0]===r;)n=d[--k],n=n[1],f?b.push([g,n,x]):b.push([g,n]),g=n;f?b.push([g,a,x]):b.push([g,a])}return l}function k(e,b,a){for(var d=e.length+b.length,f=new w(d),h=0;h<b.length;++h){var q=b[h],p=t(q[0]),l=t(q[1]);a.push([p[0],l[0],p[1],l[1]]);e.push([c(q[0]),c(q[1])])}v(a,function(b,c){f.link(b,c)});b=0;a=!0;q=Array(d);for(h=0;h<d;++h)f.find(h)===h?(q[h]=b,e[b++]=e[h]):(a=!1,q[h]=-1);e.length=
b;if(a)return null;for(h=0;h<d;++h)0>q[h]&&(q[h]=q[f.find(h)]);return q}function l(c,b){return c[0]-b[0]||c[1]-b[1]}function x(c,b){var e=c[0]-b[0]||c[1]-b[1];return e?e:c[2]<b[2]?-1:c[2]>b[2]?1:0}function u(c,b,e){for(var a=Array(b.length),h=0;h<b.length;++h){var q=b[h],p=c[q[0]],q=c[q[1]];a[h]=[Math.min(p[0],q[0]),Math.min(p[1],q[1]),Math.max(p[0],q[0]),Math.max(p[1],q[1])]}h=r(c,b,a);p=Array(c.length);for(q=0;q<c.length;++q){var n=c[q];p[q]=[n[0],n[1],n[0],n[1]]}a=f(c,b,a,p);q=d(c,b,h,a,e);c=k(c,
q,p);if(0!==b.length){if(c)for(p=0;p<b.length;++p){var q=b[p],n=c[q[0]],g=c[q[1]];q[0]=Math.min(n,g);q[1]=Math.max(n,g)}else for(p=0;p<b.length;++p)q=b[p],n=q[0],g=q[1],q[0]=Math.min(n,g),q[1]=Math.max(n,g);e?b.sort(x):b.sort(l);for(p=q=1;p<b.length;++p)if(n=b[p-1],g=b[p],g[0]!==n[0]||g[1]!==n[1]||e&&g[2]!==n[2])b[q++]=g;b.length=q}return c?!0:0<h.length||0<a.length}g.exports=function(c,b,e){var a=!1,d;if(e){d=b;for(var f=Array(b.length),h=0;h<b.length;++h){var q=b[h];f[h]=[q[0],q[1],e[h]]}b=f}for(;u(c,
b,!!e);)a=!0;if(e&&a)for(d.length=0,h=e.length=0;h<b.length;++h)q=b[h],d.push([q[0],q[1]]),e.push(q[2]);return a};var w=a("union-find"),v=a("box-intersect");a("compare-cell");var n=a("robust-segment-intersect"),h=a("big-rat"),e=a("big-rat/cmp"),c=a("big-rat/to-float"),q=a("rat-vec"),p=a("nextafter"),y=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":64,"big-rat":34,"big-rat/cmp":32,"big-rat/to-float":47,"box-intersect":50,"compare-cell":66,nextafter:87,"rat-vec":96,"robust-segment-intersect":103,
"union-find":119}],64:[function(a,g,m){function t(a,f){return d(r(a[0],f[1]),r(a[1],f[0]))}g.exports=function(a,d,n,h){d=l(d,a);var e=l(h,n);h=t(d,e);if(0===k(h))return null;n=l(a,n);n=t(e,n);n=f(n,h);return x(a,u(d,n))};var r=a("big-rat/mul"),f=a("big-rat/div"),d=a("big-rat/sub"),k=a("big-rat/sign"),l=a("rat-vec/sub"),x=a("rat-vec/add"),u=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":33,"big-rat/mul":43,"big-rat/sign":45,"big-rat/sub":46,"big-rat/to-float":47,"rat-vec/add":95,"rat-vec/muls":97,
"rat-vec/sub":98}],65:[function(a,g,m){function t(a,f,r){var g=d(a[0],-f[0]);a=d(a[1],-f[1]);var n=d(r[0],-f[0]);f=d(r[1],-f[1]);g=l(k(g,n),k(a,f));return 0<=g[g.length-1]}g.exports=function(a,d,l,k){var n=r(d,l,k);if(0===n){var n=f(r(a,d,l)),h=f(r(a,d,k));return n===h?0===n&&(l=t(a,d,l),a=t(a,d,k),l!==a)?l?1:-1:0:0===h?0<n?-1:t(a,d,k)?-1:1:0===n?0<h?1:t(a,d,l)?1:-1:f(h-n)}h=r(a,d,l);return 0<h?0<n&&0<r(a,d,k)?1:-1:0>h?0<n||0<r(a,d,k)?1:-1:0<r(a,d,k)?1:t(a,d,l)?1:-1};var r=a("robust-orientation"),
f=a("signum"),d=a("two-sum"),k=a("robust-product"),l=a("robust-sum")},{"robust-orientation":100,"robust-product":101,"robust-sum":105,signum:106,"two-sum":117}],66:[function(a,g,m){function t(a,d){return a-d}g.exports=function(a,d){var k=a.length,l=a.length-d.length;if(l)return l;switch(k){case 0:return 0;case 1:return a[0]-d[0];case 2:return a[0]+a[1]-d[0]-d[1]||r(a[0],a[1])-r(d[0],d[1]);case 3:var k=a[0]+a[1],g=d[0]+d[1];if(l=k+a[2]-(g+d[2]))return l;var l=r(a[0],a[1]),u=r(d[0],d[1]);return r(l,
a[2])-r(u,d[2])||r(l+a[2],k)-r(u+d[2],g);case 4:var l=a[0],k=a[1],g=a[2],u=a[3],m=d[0],v=d[1],n=d[2],h=d[3];return l+k+g+u-(m+v+n+h)||r(l,k,g,u)-r(m,v,n,h,m)||r(l+k,l+g,l+u,k+g,k+u,g+u)-r(m+v,m+n,m+h,v+n,v+h,n+h)||r(l+k+g,l+k+u,l+g+u,k+g+u)-r(m+v+n,m+v+h,m+n+h,v+n+h);default:g=a.slice().sort(t);u=d.slice().sort(t);for(m=0;m<k;++m)if(l=g[m]-u[m])return l;return 0}};var r=Math.min},{}],67:[function(a,g,m){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var r=a("./lib/thunk.js");g.exports=function(a){var d=new t;d.pre=a.pre;d.body=a.body;d.post=a.post;var k=a.args.slice(0);d.argTypes=k;for(var l=0;l<k.length;++l){var g=k[l];if("array"===g||"object"===typeof g&&g.blockIndices){d.argTypes[l]="array";d.arrayArgs.push(l);d.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);d.shimArgs.push("array"+l);if(l<
d.pre.args.length&&0<d.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<d.post.args.length&&0<d.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)d.scalarArgs.push(l),d.shimArgs.push("scalar"+l);else if("index"===g){d.indexArgs.push(l);if(l<d.pre.args.length&&0<d.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<d.body.args.length&&d.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<d.post.args.length&&0<d.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){d.shapeArgs.push(l);if(l<d.pre.args.length&&d.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<d.body.args.length&&d.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<d.post.args.length&&d.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)d.argTypes[l]="offset",d.offsetArgs.push({array:g.array,offset:g.offset}),d.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+k[l]);}if(0>=d.arrayArgs.length)throw Error("cwise: No array arguments specified");if(d.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(d.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(d.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
d.debug=!!a.printCode||!!a.debug;d.funcName=a.funcName||"cwise";d.blockSize=a.blockSize||64;return r(d)}},{"./lib/thunk.js":69}],68:[function(a,g,m){function t(a,d,f){var k=a.length,r=d.arrayArgs.length;d=0<d.indexArgs.length;var n=[],h=[],e=0,c=0,q,p;for(q=0;q<k;++q)h.push(["i",q,"=0"].join(""));for(p=0;p<r;++p)for(q=0;q<k;++q)c=e,e=a[q],0===q?h.push(["d",p,"s",q,"=t",p,"p",e].join("")):h.push(["d",p,"s",q,"=(t",p,"p",e,"-s",c,"*t",p,"p",c,")"].join(""));n.push("var "+h.join(","));for(q=k-1;0<=q;--q)e=
a[q],n.push(["for(i",q,"=0;i",q,"<s",e,";++i",q,"){"].join(""));n.push(f);for(q=0;q<k;++q){c=e;e=a[q];for(p=0;p<r;++p)n.push(["p",p,"+=d",p,"s",q].join(""));d&&(0<q&&n.push(["index[",c,"]-=s",c].join("")),n.push(["++index[",e,"]"].join("")));n.push("}")}return n.join("\n")}function r(a,d,f,k){for(var r=d.length,n=f.arrayArgs.length,h=f.blockSize,e=0<f.indexArgs.length,c=[],q=0;q<n;++q)c.push(["var offset",q,"=p",q].join(""));for(q=a;q<r;++q)c.push(["for(var j"+q+"=SS[",d[q],"]|0;j",q,">0;){"].join("")),
c.push(["if(j",q,"<",h,"){"].join("")),c.push(["s",d[q],"=j",q].join("")),c.push(["j",q,"=0"].join("")),c.push(["}else{s",d[q],"=",h].join("")),c.push(["j",q,"-=",h,"}"].join("")),e&&c.push(["index[",d[q],"]=j",q].join(""));for(q=0;q<n;++q){h=["offset"+q];for(e=a;e<r;++e)h.push(["j",e,"*t",q,"p",d[e]].join(""));c.push(["p",q,"=(",h.join("+"),")"].join(""))}c.push(t(d,f,k));for(q=a;q<r;++q)c.push("}");return c.join("\n")}function f(a,d,f){for(var k=a.body,r=[],n=[],h=0;h<a.args.length;++h){var e=a.args[h];
if(!(0>=e.count)){var c=new RegExp(e.name,"g"),q="",p=d.arrayArgs.indexOf(h);switch(d.argTypes[h]){case "offset":var g=d.offsetArgIndex.indexOf(h),p=d.offsetArgs[g].array,q="+q"+g;case "array":var q="p"+p+q,t="l"+h,g="a"+p;if(0===d.arrayBlockIndices[p])1===e.count?"generic"===f[p]?e.lvalue?(r.push(["var ",t,"=",g,".get(",q,")"].join("")),k=k.replace(c,t),n.push([g,".set(",q,",",t,")"].join(""))):k=k.replace(c,[g,".get(",q,")"].join("")):k=k.replace(c,[g,"[",q,"]"].join("")):"generic"===f[p]?(r.push(["var ",
t,"=",g,".get(",q,")"].join("")),k=k.replace(c,t),e.lvalue&&n.push([g,".set(",q,",",t,")"].join(""))):(r.push(["var ",t,"=",g,"[",q,"]"].join("")),k=k.replace(c,t),e.lvalue&&n.push([g,"[",q,"]=",t].join("")));else{c=[e.name];e=[q];for(q=0;q<Math.abs(d.arrayBlockIndices[p]);q++)c.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(q+1)+"*t"+p+"b"+q);c=new RegExp(c.join(""),"g");q=e.join("+");if("generic"===f[p])throw Error("cwise: Generic arrays not supported in combination with blocks!");k=k.replace(c,[g,"[",
q,"]"].join(""))}break;case "scalar":k=k.replace(c,"Y"+d.scalarArgs.indexOf(h));break;case "index":k=k.replace(c,"index");break;case "shape":k=k.replace(c,"shape")}}}return[r.join("\n"),k,n.join("\n")].join("\n").trim()}function d(a){for(var d=Array(a.length),f=!0,k=0;k<a.length;++k){var r=a[k],n=r.match(/\d+/),n=n?n[0]:"";0===r.charAt(0)?d[k]="u"+r.charAt(1)+n:d[k]=r.charAt(0)+n;0<k&&(f=f&&d[k]===d[k-1])}return f?d[0]:d.join("")}var k=a("uniq");g.exports=function(a,g){for(var u=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,m=Array(a.arrayArgs.length),v=Array(a.arrayArgs.length),n=0;n<a.arrayArgs.length;++n)v[n]=g[2*n],m[n]=g[2*n+1];for(var h=[],e=[],c=[],q=[],p=[],n=0;n<a.arrayArgs.length;++n){0>a.arrayBlockIndices[n]?(c.push(0),q.push(u),h.push(u),e.push(u+a.arrayBlockIndices[n])):(c.push(a.arrayBlockIndices[n]),q.push(a.arrayBlockIndices[n]+u),h.push(0),e.push(a.arrayBlockIndices[n]));for(var y=[],F=0;F<m[n].length;F++)c[n]<=m[n][F]&&m[n][F]<q[n]&&y.push(m[n][F]-c[n]);p.push(y)}e=["SS"];q=["'use strict'"];y=[];
for(F=0;F<u;++F)y.push(["s",F,"=SS[",F,"]"].join(""));for(n=0;n<a.arrayArgs.length;++n){e.push("a"+n);e.push("t"+n);e.push("p"+n);for(F=0;F<u;++F)y.push(["t",n,"p",F,"=t",n,"[",c[n]+F,"]"].join(""));for(F=0;F<Math.abs(a.arrayBlockIndices[n]);++F)y.push(["t",n,"b",F,"=t",n,"[",h[n]+F,"]"].join(""))}for(n=0;n<a.scalarArgs.length;++n)e.push("Y"+n);0<a.shapeArgs.length&&y.push("shape=SS.slice(0)");if(0<a.indexArgs.length){F=Array(u);for(n=0;n<u;++n)F[n]="0";y.push(["index=[",F.join(","),"]"].join(""))}for(n=
0;n<a.offsetArgs.length;++n){h=a.offsetArgs[n];c=[];for(F=0;F<h.offset.length;++F)0!==h.offset[F]&&(1===h.offset[F]?c.push(["t",h.array,"p",F].join("")):c.push([h.offset[F],"*t",h.array,"p",F].join("")));0===c.length?y.push("q"+n+"=0"):y.push(["q",n,"=",c.join("+")].join(""))}n=k([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));y=y.concat(n);q.push("var "+y.join(","));for(n=0;n<a.arrayArgs.length;++n)q.push("p"+n+"|=0");3<a.pre.body.length&&q.push(f(a.pre,a,v));n=f(a.body,
a,v);a:for(F=0,y=p[0].length;F<y;){for(h=1;h<p.length;++h)if(p[h][F]!==p[0][F])break a;++F}F<u?q.push(r(F,p[0],a,n)):q.push(t(p[0],a,n));3<a.post.body.length&&q.push(f(a.post,a,v));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+q.join("\n")+"\n----------");u=[a.funcName||"unnamed","_cwise_loop_",m[0].join("s"),"m",F,d(v)].join("");return(new Function(["function ",u,"(",e.join(","),"){",q.join("\n"),"} return ",u].join("")))()}},{uniq:120}],69:[function(a,g,m){var t=a("./compile.js");
g.exports=function(a){var f=["'use strict'","var CACHED={}"],d=[];f.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var k=[],l=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],u=[],m=[],v=0;v<a.arrayArgs.length;++v){var n=a.arrayArgs[v];d.push(["t",n,"=array",n,".dtype,r",n,"=array",n,".order"].join(""));k.push("t"+n);k.push("r"+n);l.push("t"+n);l.push("r"+
n+".join()");g.push("array"+n+".data");g.push("array"+n+".stride");g.push("array"+n+".offset|0");0<v&&(u.push("array"+a.arrayArgs[0]+".shape.length===array"+n+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[v]))),m.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+n+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[v])+"]"))}1<a.arrayArgs.length&&(f.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
f.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),f.push("if (!("+m.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),f.push("}"));for(v=0;v<a.scalarArgs.length;++v)g.push("scalar"+a.scalarArgs[v]);d.push(["type=[",l.join(","),"].join()"].join(""));d.push("proc=CACHED[type]");f.push("var "+d.join(","));f.push(["if(!proc){CACHED[type]=proc=compile([",k.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+f.join("\n")+"\n----------");return(new Function("compile",f.join("\n")))(t.bind(void 0,a))}},{"./compile.js":68}],70:[function(a,g,m){(function(a){var r=!1;if("undefined"!==typeof Float64Array){var f=new Float64Array(1),d=new Uint32Array(f.buffer);f[0]=1;r=!0;1072693248===d[1]?(g.exports=function(a){f[0]=a;return[d[0],d[1]]},g.exports.pack=function(a,k){d[0]=a;d[1]=k;return f[0]},g.exports.lo=function(a){f[0]=a;return d[0]},g.exports.hi=
function(a){f[0]=a;return d[1]}):1072693248===d[0]?(g.exports=function(a){f[0]=a;return[d[1],d[0]]},g.exports.pack=function(a,k){d[1]=a;d[0]=k;return f[0]},g.exports.lo=function(a){f[0]=a;return d[1]},g.exports.hi=function(a){f[0]=a;return d[0]}):r=!1}if(!r){var k=new a(8);g.exports=function(a){k.writeDoubleLE(a,0,!0);return[k.readUInt32LE(0,!0),k.readUInt32LE(4,!0)]};g.exports.pack=function(a,d){k.writeUInt32LE(a,0,!0);k.writeUInt32LE(d,4,!0);return k.readDoubleLE(0,!0)};g.exports.lo=function(a){k.writeDoubleLE(a,
0,!0);return k.readUInt32LE(0,!0)};g.exports.hi=function(a){k.writeDoubleLE(a,0,!0);return k.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var d=g.exports.lo(a);a=g.exports.hi(a);var f=a&1048575;a&2146435072&&(f+=1048576);return[d,f]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:57}],71:[function(a,g,m){function t(a,
f,d){var k=a[d]|0;if(0>=k)return[];var l=Array(k),g;if(d===a.length-1)for(g=0;g<k;++g)l[g]=f;else for(g=0;g<k;++g)l[g]=t(a,f,d+1);return l}g.exports=function(a,f){"undefined"===typeof f&&(f=0);switch(typeof a){case "number":if(0<a){var d=a|0,k=f,l,g;l=Array(d);for(g=0;g<d;++g)l[g]=k;return l}break;case "object":if("number"===typeof a.length)return t(a,f,0)}return[]}},{}],72:[function(a,g,m){g.exports=function(a,f){var d=a.length;if("number"!==typeof f){for(var k=f=0;k<d;++k){var l=a[k];f=Math.max(f,
l[0],l[1])}f=(f|0)+1}f|=0;for(var g=Array(f),k=0;k<f;++k)g[k]=[];for(k=0;k<d;++k)l=a[k],g[l[0]].push(l[1]),g[l[1]].push(l[0]);for(d=0;d<f;++d)t(g[d],function(a,d){return a-d});return g};var t=a("uniq")},{uniq:120}],73:[function(a,g,m){function t(a,e,c,d,f,k){this._color=a;this.key=e;this.value=c;this.left=d;this.right=f;this._count=k}function r(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,e){return new t(a,e.key,e.value,e.left,e.right,e._count)}function d(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function k(a,e){this._compare=a;this.root=e}function l(a,e){if(e.left){var c=l(a,e.left);if(c)return c}if(c=a(e.key,e.value))return c;if(e.right)return l(a,e.right)}function x(a,e,c,d){if(0>=e(a,d.key)){if(d.left){var f=x(a,e,c,d.left);if(f)return f}if(f=c(d.key,d.value))return f}if(d.right)return x(a,e,c,d.right)}function u(a,e,c,d,f){var k=c(a,f.key),n=c(e,f.key);if(0>=k&&(f.left&&(k=u(a,e,c,d,f.left))||0<n&&(k=d(f.key,f.value))))return k;if(0<
n&&f.right)return u(a,e,c,d,f.right)}function w(a,e){this.tree=a;this._stack=e}function v(a,e){a.key=e.key;a.value=e.value;a.left=e.left;a.right=e.right;a._color=e._color;a._count=e._count}function n(a,e){return a<e?-1:a>e?1:0}g.exports=function(a){return new k(a||n,null)};a=k.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(e,c){a.push(e)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(e,c){a.push(c)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,e){for(var c=this._compare,q=this.root,p=[],n=[];q;){var l=c(a,q.key);p.push(q);n.push(l);q=0>=l?q.left:q.right}p.push(new t(0,a,e,null,null,1));for(l=p.length-2;0<=l;--l)q=p[l],p[l]=0>=n[l]?new t(q._color,q.key,q.value,p[l+1],q.right,q._count+1):new t(q._color,q.key,q.value,q.left,p[l+1],q._count+1);for(l=p.length-1;1<l;--l){n=p[l-1];q=p[l];if(1===n._color||1===q._color)break;var b=p[l-2];
if(b.left===n)if(n.left===q){var g=b.right;if(g&&0===g._color)n._color=1,b.right=f(1,g),b._color=0,--l;else{b._color=0;b.left=n.right;n._color=1;n.right=b;p[l-2]=n;p[l-1]=q;d(b);d(n);3<=l&&(l=p[l-3],l.left===b?l.left=n:l.right=n);break}}else if((g=b.right)&&0===g._color)n._color=1,b.right=f(1,g),b._color=0,--l;else{n.right=q.left;b._color=0;b.left=q.right;q._color=1;q.left=n;q.right=b;p[l-2]=q;p[l-1]=n;d(b);d(n);d(q);3<=l&&(l=p[l-3],l.left===b?l.left=q:l.right=q);break}else if(n.right===q)if((g=b.left)&&
0===g._color)n._color=1,b.left=f(1,g),b._color=0,--l;else{b._color=0;b.right=n.left;n._color=1;n.left=b;p[l-2]=n;p[l-1]=q;d(b);d(n);3<=l&&(l=p[l-3],l.right===b?l.right=n:l.left=n);break}else if((g=b.left)&&0===g._color)n._color=1,b.left=f(1,g),b._color=0,--l;else{n.left=q.right;b._color=0;b.right=q.left;q._color=1;q.right=n;q.left=b;p[l-2]=q;p[l-1]=n;d(b);d(n);d(q);3<=l&&(l=p[l-3],l.right===b?l.right=q:l.left=q);break}}p[0]._color=1;return new k(c,p[0])};a.forEach=function(a,e,c){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return x(e,this._compare,a,this.root);case 3:if(!(0<=this._compare(e,c)))return u(e,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var e=this.root,c=[];;){c.push(e);if(e.left){if(a<e.left._count){e=e.left;continue}a-=
e.left._count}if(!a)return new w(this,c);--a;if(e.right){if(a>=e.right._count)break;e=e.right}else break}return new w(this,[])};a.ge=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0>=k&&(f=d.length);c=0>=k?c.left:c.right}d.length=f;return new w(this,d)};a.gt=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0>k&&(f=d.length);c=0>k?c.left:c.right}d.length=f;return new w(this,d)};a.lt=function(a){for(var e=this._compare,
c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0<k&&(f=d.length);c=0>=k?c.left:c.right}d.length=f;return new w(this,d)};a.le=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var k=e(a,c.key);d.push(c);0<=k&&(f=d.length);c=0>k?c.left:c.right}d.length=f;return new w(this,d)};a.find=function(a){for(var e=this._compare,c=this.root,d=[];c;){var f=e(a,c.key);d.push(c);if(0===f)return new w(this,d);c=0>=f?c.left:c.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var e=this._compare,c=this.root;c;){var d=e(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),c=a[a.length-1];e[e.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var q=a.length-2;0<=q;--q)c=a[q],e[q]=c.left===a[q+1]?new t(c._color,c.key,c.value,e[q+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,e[q+1],c._count);c=e[e.length-1];if(c.left&&c.right){a=e.length;for(c=c.left;c.right;)e.push(c),c=c.right;q=e[a-1];e.push(new t(c._color,q.key,q.value,c.left,c.right,c._count));e[a-1].key=c.key;e[a-1].value=c.value;for(q=e.length-2;q>=a;--q)c=e[q],e[q]=
new t(c._color,c.key,c.value,c.left,e[q+1],c._count);e[a-1].left=e[a]}c=e[e.length-1];if(0===c._color)for(q=e[e.length-2],q.left===c?q.left=null:q.right===c&&(q.right=null),e.pop(),q=0;q<e.length;++q)e[q]._count--;else if(c.left||c.right)for(c.left?v(c,c.left):c.right&&v(c,c.right),c._color=1,q=0;q<e.length-1;++q)e[q]._count--;else{if(1===e.length)return new k(this.tree._compare,null);for(q=0;q<e.length;++q)e[q]._count--;for(var q=e[e.length-2],p,n,l,b=e.length-1;0<=b;--b){a=e[b];if(0===b){a._color=
1;break}p=e[b-1];if(p.left===a){n=p.right;if(n.right&&0===n.right._color){n=p.right=r(n);l=n.right=r(n.right);p.right=n.left;n.left=p;n.right=l;n._color=p._color;a._color=1;p._color=1;l._color=1;d(p);d(n);if(1<b){var g=e[b-2];g.left===p?g.left=n:g.right=n}e[b-1]=n;break}else if(n.left&&0===n.left._color){n=p.right=r(n);l=n.left=r(n.left);p.right=l.left;n.left=l.right;l.left=p;l.right=n;l._color=p._color;p._color=1;n._color=1;a._color=1;d(p);d(n);d(l);1<b&&(g=e[b-2],g.left===p?g.left=l:g.right=l);
e[b-1]=l;break}if(1===n._color)if(0===p._color){p._color=1;p.right=f(0,n);break}else p.right=f(0,n);else n=r(n),p.right=n.left,n.left=p,n._color=p._color,p._color=0,d(p),d(n),1<b&&(g=e[b-2],g.left===p?g.left=n:g.right=n),e[b-1]=n,e[b]=p,b+1<e.length?e[b+1]=a:e.push(a),b+=2}else{n=p.left;if(n.left&&0===n.left._color){n=p.left=r(n);l=n.left=r(n.left);p.left=n.right;n.right=p;n.left=l;n._color=p._color;a._color=1;p._color=1;l._color=1;d(p);d(n);1<b&&(g=e[b-2],g.right===p?g.right=n:g.left=n);e[b-1]=n;
break}else if(n.right&&0===n.right._color){n=p.left=r(n);l=n.right=r(n.right);p.left=l.right;n.right=l.left;l.right=p;l.left=n;l._color=p._color;p._color=1;n._color=1;a._color=1;d(p);d(n);d(l);1<b&&(g=e[b-2],g.right===p?g.right=l:g.left=l);e[b-1]=l;break}if(1===n._color)if(0===p._color){p._color=1;p.left=f(0,n);break}else p.left=f(0,n);else n=r(n),p.left=n.right,n.right=p,n._color=p._color,p._color=0,d(p),d(n),1<b&&(g=e[b-2],g.right===p?g.right=n:g.left=n),e[b-1]=n,e[b]=p,b+1<e.length?e[b+1]=a:e.push(a),
b+=2}}q.left===c?q.left=null:q.right=null}return new k(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,e=this._stack;if(0===e.length)return(a=this.tree.root)?a._count:0;e[e.length-1].left&&(a=e[e.length-
1].left._count);for(var c=e.length-2;0<=c;--c)e[c+1]===e[c].right&&(++a,e[c].left&&(a+=e[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.right)for(e=e.right;e;)a.push(e),e=e.left;else for(a.pop();0<a.length&&a[a.length-1].right===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].left===
a[e])return!0;return!1}});a.update=function(a){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var c=Array(e.length),d=e[e.length-1];c[c.length-1]=new t(d._color,d.key,a,d.left,d.right,d._count);for(a=e.length-2;0<=a;--a)d=e[a],c[a]=d.left===e[a+1]?new t(d._color,d.key,d.value,c[a+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,c[a+1],d._count);return new k(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.left)for(e=
e.left;e;)a.push(e),e=e.right;else for(a.pop();0<a.length&&a[a.length-1].left===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].right===a[e])return!0;return!1}})},{}],74:[function(a,g,m){function t(a){if(0>a)return Number("0/0");for(var k=f[0],l=f.length-1;0<l;--l)k+=f[l]/(a+l);l=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(l)-l+Math.log(k)-
Math.log(a)}var r=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],f=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function k(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*k(1-a));if(100<a)return Math.exp(t(a));--a;for(var f=r[0],g=1;9>g;g++)f+=r[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*f};g.exports.log=t},{}],75:[function(a,g,m){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],76:[function(a,g,m){var t=a("./identity");g.exports=function(a,f,d,k){var l,g,m,w,v,
n,h,e,c=f[0],q=f[1];f=f[2];m=k[0];w=k[1];g=k[2];h=d[0];k=d[1];l=d[2];if(1E-6>Math.abs(c-h)&&1E-6>Math.abs(q-k)&&1E-6>Math.abs(f-l))return t(a);d=c-h;k=q-k;h=f-l;e=1/Math.sqrt(d*d+k*k+h*h);d*=e;k*=e;h*=e;l=w*h-g*k;g=g*d-m*h;m=m*k-w*d;(e=Math.sqrt(l*l+g*g+m*m))?(e=1/e,l*=e,g*=e,m*=e):m=g=l=0;w=k*m-h*g;v=h*l-d*m;n=d*g-k*l;(e=Math.sqrt(w*w+v*v+n*n))?(e=1/e,w*=e,v*=e,n*=e):n=v=w=0;a[0]=l;a[1]=w;a[2]=d;a[3]=0;a[4]=g;a[5]=v;a[6]=k;a[7]=0;a[8]=m;a[9]=n;a[10]=h;a[11]=0;a[12]=-(l*c+g*q+m*f);a[13]=-(w*c+v*q+
n*f);a[14]=-(d*c+k*q+h*f);a[15]=1;return a}},{"./identity":75}],77:[function(a,g,m){g.exports=function(a,g,f,d,k){g=1/Math.tan(g/2);var l=1/(d-k);a[0]=g/f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+d)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*d*l;a[15]=0;return a}},{}],78:[function(a,g,m){m.read=function(a,g,f,d,k){var l;l=8*k-d-1;var m=(1<<l)-1,u=m>>1,w=-7;k=f?k-1:0;var v=f?-1:1,n=a[g+k];k+=v;f=n&(1<<-w)-1;n>>=-w;for(w+=l;0<w;f=256*f+a[g+k],k+=v,w-=8);l=f&(1<<-w)-1;f>>=-w;
for(w+=d;0<w;l=256*l+a[g+k],k+=v,w-=8);if(0===f)f=1-u;else{if(f===m)return l?NaN:Infinity*(n?-1:1);l+=Math.pow(2,d);f-=u}return(n?-1:1)*l*Math.pow(2,f-d)};m.write=function(a,g,f,d,k,l){var m,u=8*l-k-1,w=(1<<u)-1,v=w>>1,n=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;l=d?0:l-1;var h=d?1:-1,e=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,d=w):(d=Math.floor(Math.log(g)/Math.LN2),1>g*(m=Math.pow(2,-d))&&(d--,m*=2),g=1<=d+v?g+n/m:g+n*Math.pow(2,1-v),2<=g*m&&(d++,m/=2),d+v>=w?(g=
0,d=w):1<=d+v?(g=(g*m-1)*Math.pow(2,k),d+=v):(g=g*Math.pow(2,v-1)*Math.pow(2,k),d=0));for(;8<=k;a[f+l]=g&255,l+=h,g/=256,k-=8);d=d<<k|g;for(u+=k;0<u;a[f+l]=d&255,l+=h,d/=256,u-=8);a[f+l-h]|=128*e}},{}],79:[function(a,g,m){function t(a,e,d,f,h){this.mid=a;this.left=e;this.right=d;this.leftPoints=f;this.rightPoints=h;this.count=(e?e.count:0)+(d?d.count:0)+f.length}function r(a,e){a.mid=e.mid;a.left=e.left;a.right=e.right;a.leftPoints=e.leftPoints;a.rightPoints=e.rightPoints;a.count=e.count}function f(a,
e){var d=n(e);a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function d(a,e){var d=a.intervals([]),h=d.indexOf(e);if(0>h)return 0;d.splice(h,1);f(a,d);return 1}function k(a,e,d){for(var f=0;f<a.length&&a[f][0]<=e;++f){var h=d(a[f]);if(h)return h}}function l(a,e,d){for(var f=a.length-1;0<=f&&a[f][1]>=e;--f){var h=d(a[f]);if(h)return h}}function x(a,e){for(var d=0;d<a.length;++d){var f=e(a[d]);if(f)return f}}function u(a,e){return a-e}
function w(a,e){var d=a[0]-e[0];return d?d:a[1]-e[1]}function v(a,e){var d=a[1]-e[1];return d?d:a[0]-e[0]}function n(a){if(0===a.length)return null;for(var e=[],d=0;d<a.length;++d)e.push(a[d][0],a[d][1]);e.sort(u);for(var e=e[e.length>>1],f=[],h=[],b=[],d=0;d<a.length;++d){var k=a[d];k[1]<e?f.push(k):e<k[0]?h.push(k):b.push(k)}a=b.slice();b.sort(w);a.sort(v);return new t(e,n(f),n(h),b,a)}function h(a){this.root=a}var e=a("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(n(a)):
new h(null)};a=t.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var d=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),f(this,d)):this.left.insert(a):this.left=n([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),f(this,d)):this.right.insert(a):
this.right=n([a]);else{var d=e.ge(this.leftPoints,a,w),h=e.ge(this.rightPoints,a,v);this.leftPoints.splice(d,0,a);this.rightPoints.splice(h,0,a)}};a.remove=function(a){var f=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(f-1))return d(this,a);f=this.left.remove(a);if(2===f)return this.left=null,--this.count,1;1===f&&--this.count;return f}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(f-1))return d(this,a);
f=this.right.remove(a);if(2===f)return this.right=null,--this.count,1;1===f&&--this.count;return f}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var k=this.left,f=this.right;a.count-=h.count;a.right=h.left;h.left=k;h.right=f}r(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
r(this,this.left):r(this,this.right);return 1}for(k=e.ge(this.leftPoints,a,w);k<this.leftPoints.length&&this.leftPoints[k][0]===a[0];++k)if(this.leftPoints[k]===a)for(--this.count,this.leftPoints.splice(k,1),f=e.ge(this.rightPoints,a,v);f<this.rightPoints.length&&this.rightPoints[f][1]===a[1];++f)if(this.rightPoints[f]===a)return this.rightPoints.splice(f,1),1;return 0};a.queryPoint=function(a,e){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,e);if(d)return d}return k(this.leftPoints,a,
e)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,e))?d:l(this.rightPoints,a,e):x(this.leftPoints,e)};a.queryInterval=function(a,e,d){if(a<this.mid&&this.left){var f=this.left.queryInterval(a,e,d);if(f)return f}return e>this.mid&&this.right&&(f=this.right.queryInterval(a,e,d))?f:e<this.mid?k(this.leftPoints,e,d):a>this.mid?l(this.rightPoints,a,d):x(this.leftPoints,d)};a=h.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,e){if(this.root)return this.root.queryPoint(a,e)};a.queryInterval=function(a,e,d){if(a<=e&&this.root)return this.root.queryInterval(a,e,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":80}],80:[function(a,g,m){function t(a,d,k,g,r,t){a=["function ",a,"(a,l,h,",
g.join(","),"){",t?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",r?".get(m)":"[m]"];t?0>d.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",d,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");t?a.push("return -1};"):a.push("return i};");return a.join("")}function r(a,d,k,g){return(new Function([t("A","x"+a+"y",d,["y"],!1,g),t("B","x"+a+"y",d,["y"],!0,g),t("P","c(x,y)"+a+"0",
d,["y","c"],!1,g),t("Q","c(x,y)"+a+"0",d,["y","c"],!0,g),"function dispatchBsearch",k,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",k].join("")))()}g.exports=
{ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",!0,"EQ",!0)}},{}],81:[function(a,g,m){g.exports=function(a,g){g=g||Array(a.length);for(var f=0;f<a.length;++f)g[a[f]]=f;return g}},{}],82:[function(a,g,m){g.exports=function(a){for(var g=Array(a),f=0;f<a;++f)g[f]=f;return g}},{}],83:[function(a,g,m){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],84:[function(a,g,m){var t=
{}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],85:[function(a,g,m){function t(a,d,f){for(var e=0,c=0;c<a;++c)d&1<<c&&(e|=1<<f[c]);return e}function r(a,n,h,e,c,q){function p(a,b){A.push("for(","i"+c[a],"=",b,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function g(a){for(var b=0;b<m;++b)A.push("p"+b,"+=","u"+b+"_"+c[a],";");A.push("}")}function r(){for(var a=1;a<1<<E;++a)A.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function b(a,f){if(0>
a){for(var h=0;h<m;++h)q[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var n=[],h=0;h<m;++h)n.push("c"+h+"_0");for(h=0;h<e;++h)n.push("x"+h);A.push("b0","=",k,"[",u,"]=phase(",n.join(),");");for(n=1;n<1<<E;++n)A.push("b"+n,"=",k,"[",u,"+","e"+n,"];");h=[];for(n=1;n<1<<E;++n)h.push("(b0!==b"+n+")");A.push("if(",h.join("||"),"){");for(var v=[],h=0;h<E;++h)v.push("i"+h);for(h=0;h<m;++h)for(v.push("c"+h+"_0"),n=1;n<1<<E;++n)q[h]?A.push("c"+h+"_"+n,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+n,");"):A.push("c"+h+"_"+n,"=","d"+h,"[","p"+h,"+","d"+h+"_"+n,"];"),v.push("c"+h+"_"+n);for(h=0;h<1<<E;++h)v.push("b"+h);for(h=0;h<e;++h)v.push("x"+h);A.push("vertex(",v.join(),");","v0","=",d,"[",u,"]=",l,"++;");h=(1<<E)-1;v="b"+h;for(n=0;n<E;++n)if(0===(f&~(1<<n))){for(var t=h^1<<n,x="b"+t,w=[],D=t;0<D;D=D-1&t)w.push(d+"["+u+"+"+("e"+D)+"]");w.push("v0");for(D=0;D<m;++D)n&1?w.push("c"+D+"_"+h,"c"+D+"_"+t):w.push("c"+D+"_"+t,"c"+D+"_"+h);n&1?w.push(v,x):w.push(x,
v);for(D=0;D<e;++D)w.push("x"+D);A.push("if(",v,"!==",x,"){","face(",w.join(),")}")}A.push("}",u,"+=1;")}else{for(n=a-1;0<=n;--n)p(n,0);h=[];for(n=0;n<m;++n)q[n]?h.push("d"+n+".get("+("p"+n)+")"):h.push("d"+n+"["+("p"+n)+"]");for(n=0;n<e;++n)h.push("x"+n);A.push(k,"[",u,"++]=phase(",h.join(),");");for(n=0;n<a;++n)g(n);for(n=0;n<m;++n)A.push("p"+n,"+=","u"+n+"_"+c[a],";");A.push("if(","s"+c[a],">0){","i"+c[a],"=1;");b(a-1,f|1<<c[a]);for(n=0;n<m;++n)A.push("p"+n,"+=","u"+n+"_"+c[a],";");a===E-1&&(A.push(u,
"=0;"),r());p(a,2);b(a-1,f);a===E-1&&(A.push("if(","i"+c[E-1],"&1){",u,"=0;}"),r());g(a);A.push("}")}}var m=q.length,E=c.length;if(2>E)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var D="extractContour"+c.join("_"),A=[],B=[],J=[],H=0;H<m;++H)J.push("a"+H);for(H=0;H<e;++H)J.push("x"+H);for(H=0;H<E;++H)B.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<m;++H){B.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var C=0;C<E;++C)B.push("t"+H+"_"+C+"="+("a"+H)+".stride["+
C+"]|0")}for(H=0;H<m;++H)for(B.push("p"+H+"="+("o"+H)),B.push("c"+H+"_0"),C=1;C<1<<E;++C){for(var N=[],M=0;M<E;++M)C&1<<M&&N.push("-"+("t"+H+"_"+M));B.push("d"+H+"_"+C+"=("+N.join("")+")|0");B.push("c"+H+"_"+C+"=0")}for(H=0;H<m;++H)for(C=0;C<E;++C)M=["t"+H+"_"+c[C]],0<C&&M.push("t"+H+"_"+c[C-1]+"*"+("s"+c[C-1])),B.push("u"+H+"_"+c[C]+"=("+M.join("-")+")|0");for(H=0;H<E;++H)B.push("i"+H+"=0");B.push(l+"=0");C=["2"];for(H=E-2;0<=H;--H)C.push("s"+c[H]);B.push(x+"=("+C.join("*")+")|0",k+"=mallocUint32("+
x+")",d+"=mallocUint32("+x+")",u+"=0");B.push("b0=0");for(C=1;C<1<<E;++C){H=[];N=[];for(M=0;M<E;++M)C&1<<M&&(0===N.length?H.push("1"):H.unshift(N.join("*"))),N.push("s"+c[M]);M="";0>H[0].indexOf("s"+c[E-2])&&(M="-");N=t(E,C,c);B.push("e"+N+"=(-"+H.join("-")+")|0","y"+N+"=("+M+H.join("-")+")|0","b"+N+"=0")}B.push("v0=0",w+"=0");b(E-1,0);A.push("freeUint32(",d,");freeUint32(",k,");");D=["'use strict';function ",D,"(",J.join(),"){var ",B.join(),";",A.join(""),"}return ",D].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",D))(a,n,h,f.mallocUint32,f.freeUint32)}var f=a("typedarray-pool");g.exports=function(a){function d(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&d("Must specify arguments");var f=a.order;Array.isArray(f)||d("Must specify order");var e=a.arrayArguments||1;1>e&&d("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");
"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var k=a.getters||[],p=Array(e),g=0;g<e;++g)0<=k.indexOf(g)?p[g]=!0:p[g]=!1;return r(a.vertex,a.cell,a.phase,c,f,p)};var d="V",k="P",l="N",x="Q",u="X",w="T"},{"typedarray-pool":118}],86:[function(a,g,m){function t(a,d){return a[0]-d[0]}function r(){var a=this.stride,d=Array(a.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(a[f]),f];d.sort(t);a=Array(d.length);for(f=
0;f<a.length;++f)a[f]=d[f][1];return a}function f(a,d){var f=["View",d,"d",a].join("");0>d&&(f="View_Nil"+a);var h="generic"===a;if(-1===d){var e,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===d)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(u[a][0]);e=["'use strict'"];var c=k(d),q=c.map(function(a){return"i"+a}),p="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),g=c.map(function(a){return"b"+a}).join(","),l=c.map(function(a){return"c"+a}).join(",");e.push("function "+
f+"(a,"+g+","+l+",d){this.data=a","this.shape=["+g+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);e.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===d?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>d?(e.push("function "+f+"_order(){"),2===d?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+f+"_set("+q.join(",")+",v){");h?e.push("return this.data.set("+p+",v)}"):e.push("return this.data["+p+"]=v}");e.push("proto.get=function "+f+"_get("+q.join(",")+"){");h?e.push("return this.data.get("+
p+")}"):e.push("return this.data["+p+"]}");e.push("proto.index=function "+f+"_index(",q.join(),"){return "+p+"}");e.push("proto.hi=function "+f+"_hi("+q.join(",")+"){return new "+f+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=c.map(function(a){return"a"+a+"=this.shape["+a+"]"});p=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});e.push("proto.lo=function "+
f+"_lo("+q.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+p.join(","));for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");e.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");e.push("proto.step=function "+f+"_step("+q.join(",")+"){var "+c.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");e.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");p=Array(d);g=Array(d);for(h=0;h<d;++h)p[h]="a[i"+h+"]",g[h]="b[i"+h+"]";e.push("proto.transpose=function "+f+"_transpose("+q+"){"+q.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+p.join(",")+","+g.join(",")+",this.offset)}");e.push("proto.pick=function "+f+"_pick("+q+"){var a=[],b=[],c=this.offset");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",e.join("\n"));return f(u[a],r)}function d(a){if(l(a))return"buffer";if(x)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var k=a("iota-array"),l=a("is-buffer"),x="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in u)u[a].push(f(a,-1))});g.exports=function(a,k,n,h){if(void 0===a){var e=u.array[0];return e([])}"number"===
typeof a&&(a=[a]);void 0===k&&(k=[a.length]);e=k.length;if(void 0===n){n=Array(e);for(var c=e-1,q=1;0<=c;--c)n[c]=q,q*=k[c]}if(void 0===h)for(c=h=0;c<e;++c)0>n[c]&&(h-=(k[c]-1)*n[c]);c=d(a);for(q=u[c];q.length<=e+1;)q.push(f(c,q.length-1));e=q[e+1];return e(a,k,n,h)}},{"iota-array":82,"is-buffer":83}],87:[function(a,g,m){var t=a("double-bits"),r=Math.pow(2,-1074);g.exports=function(a,d){if(isNaN(a)||isNaN(d))return NaN;if(a===d)return a;if(0===a)return 0>d?-r:r;var k=t.hi(a),g=t.lo(a);d>a===0<a?4294967295===
g?(k+=1,g=0):g+=1:0===g?(g=4294967295,--k):--g;return t.pack(g,k)}},{"double-bits":70}],88:[function(a,g,m){g.exports=function(a){var d=a.length;if(d<t)for(var k=1,g=0;g<d;++g)for(var m=0;m<g;++m)if(a[g]<a[m])k=-k;else{if(a[g]===a[m])return 0}else{for(var u=r.mallocUint8(d),g=0;g<d;++g)u[g]=0;k=1;for(g=0;g<d;++g)if(!u[g]){var w=1;u[g]=1;for(m=a[g];m!==g;m=a[m]){if(u[m])return r.freeUint8(u),0;w+=1;u[m]=1}w&1||(k=-k)}r.freeUint8(u)}return k};var t=32,r=a("typedarray-pool")},{"typedarray-pool":118}],
89:[function(a,g,m){var t=a("typedarray-pool"),r=a("invert-permutation");m.rank=function(a){var d=a.length;switch(d){case 0:case 1:return 0;case 2:return a[1]}var k=t.mallocUint32(d),g=t.mallocUint32(d),m=0,u;r(a,g);for(u=0;u<d;++u)k[u]=a[u];for(u=d-1;0<u;--u)d=g[u],a=k[u],k[u]=k[d],k[d]=a,g[u]=g[a],g[a]=d,m=(m+a)*u;t.freeUint32(g);t.freeUint32(k);return m};m.unrank=function(a,d,k){switch(a){case 0:return k?k:[];case 1:return k?(k[0]=0,k):[0];case 2:return k?(d?(k[0]=0,k[1]=1):(k[0]=1,k[1]=0),k):
d?[0,1]:[1,0]}k=k||Array(a);var g,r,m=1;k[0]=0;for(r=1;r<a;++r)k[r]=r,m=m*r|0;for(r=a-1;0<r;--r)a=d/m|0,d=d-a*m|0,m=m/r|0,g=k[r]|0,k[r]=k[a]|0,k[a]=g|0;return k}},{"invert-permutation":81,"typedarray-pool":118}],90:[function(a,g,m){g.exports=function(a,f){function d(a,e){var d=w[e][a[e]];d.splice(d.indexOf(a),1)}function k(a,e,h){var k,g,b;for(g=0;2>g;++g)if(0<w[g][e].length){k=w[g][e][0];b=g;break}g=k[b^1];for(var n=0;2>n;++n)for(var l=w[n][e],r=0;r<l.length;++r){var m=l[r],v=m[n^1];0<t(f[a],f[e],
f[g],f[v])&&(k=m,g=v,b=n)}if(h)return g;k&&d(k,b);return g}function g(a,e){var h=w[e][a][0],n=[a];d(h,e);for(h=h[e^1];;){for(;h!==a;)n.push(h),h=k(n[n.length-2],h,!1);if(0===w[0][a].length+w[1][a].length)break;var h=n[n.length-1],l=a,b=n[1],r=k(h,l,!0);if(0>t(f[h],f[l],f[b],f[r]))break;n.push(a);h=k(h,l)}return n}for(var m=f.length|0,u=a.length,w=[Array(m),Array(m)],v=0;v<m;++v)w[0][v]=[],w[1][v]=[];for(v=0;v<u;++v){var n=a[v];w[0][n[0]].push(n);w[1][n[1]].push(n)}u=[];for(v=0;v<m;++v)0===w[0][v].length+
w[1][v].length&&u.push([v]);for(v=0;v<m;++v)for(n=0;2>n;++n){for(var h=[];0<w[n][v].length;){var e=g(v,n);e[1]===e[e.length-1]?h.push.apply(h,e):(0<h.length&&u.push(h),h=e)}0<h.length&&u.push(h)}return u};var t=a("compare-angle")},{"compare-angle":65}],91:[function(a,g,m){g.exports=function(a,f){for(var d=t(a,f.length),k=Array(f.length),g=Array(f.length),m=[],u=0;u<f.length;++u){var w=d[u].length;g[u]=w;k[u]=!0;1>=w&&m.push(u)}for(;0<m.length;)for(w=m.pop(),k[w]=!1,w=d[w],u=0;u<w.length;++u){var v=
w[u];0===--g[v]&&m.push(v)}d=Array(f.length);g=[];for(u=0;u<f.length;++u)k[u]?(w=g.length,d[u]=w,g.push(f[u])):d[u]=-1;m=[];for(u=0;u<a.length;++u)w=a[u],k[w[0]]&&k[w[1]]&&m.push([d[w[0]],d[w[1]]]);return[m,g]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":72}],92:[function(a,g,m){function t(a,d){for(var f=Array(a),e=0;e<a;++e)f[e]=d;return f}function r(a){for(var d=Array(a),f=0;f<a;++f)d[f]=[];return d}g.exports=function(a,g){function h(a){for(var b=a.length,c=0;c<b;++c)if(!C[a[c]])return!1;
return!0}var e=w(a,g);a=e[0];g=e[1];for(var c=g.length,q=f(a,g.length),p=0;p<c;++p)if(1===q[p].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var q=d(a,g),q=q.filter(function(a){for(var b=a.length,c=[0],e=0;e<b;++e)var d=g[a[e]],f=g[a[(e+1)%b]],h=l(-d[0],d[1]),k=l(-d[0],f[1]),d=l(f[0],d[1]),f=l(f[0],f[1]),c=x(c,x(x(h,k),x(d,f)));return 0<c[c.length-1]}),e=q.length,m=Array(e),F=Array(e),p=0;p<e;++p){m[p]=p;var b=Array(e),z=q[p].map(function(a){return g[a]}),E=k([z]),D=
0,A=0;a:for(;A<e;++A)if(b[A]=0,p!==A){for(var z=q[A],B=z.length,J=0;J<B;++J){var H=E(g[z[J]]);if(0!==H){0>H&&(b[A]=1,D+=1);continue a}}b[A]=1;D+=1}F[p]=[D,p,b]}F.sort(function(a,b){return b[0]-a[0]});for(p=0;p<e;++p)for(b=F[p],z=b[1],B=b[2],A=0;A<e;++A)B[A]&&(m[A]=z);F=r(e);for(p=0;p<e;++p)F[p].push(m[p]),F[m[p]].push(p);for(var b={},C=t(c,!1),p=0;p<e;++p)for(z=q[p],B=z.length,A=0;A<B;++A)c=z[A],E=z[(A+1)%B],D=Math.min(c,E)+":"+Math.max(c,E),D in b?(D=b[D],F[D].push(p),F[p].push(D),C[c]=C[E]=!0):
b[D]=p;A=[];c=t(e,-1);for(p=0;p<e;++p)m[p]!==p||h(q[p])?c[p]=-1:(A.push(p),c[p]=0);for(e=[];0<A.length;){p=A.pop();m=F[p];u(m,function(a,b){return a-b});var B=m.length,b=c[p],N;0===b&&(z=q[p],N=[z]);for(p=0;p<B;++p)z=m[p],0<=c[z]||(c[z]=b^1,A.push(z),0===b&&(z=q[z],h(z)||(z.reverse(),N.push(z))));0===b&&e.push(N)}return e};var f=a("edges-to-adjacency-list"),d=a("planar-dual"),k=a("point-in-big-polygon"),l=a("two-product"),x=a("robust-sum"),u=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":91,
"edges-to-adjacency-list":72,"planar-dual":90,"point-in-big-polygon":94,"robust-sum":105,"two-product":116,uniq:120}],93:[function(a,g,m){arguments[4][80][0].apply(m,arguments)},{dup:80}],94:[function(a,g,m){function t(){return!0}function r(a){return function(e,c){var d=a[e];return d?!!d.queryPoint(c,t):!1}}function f(a){for(var e={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],d=d[1][1],g=[Math.min(g,d),Math.max(g,d)];f in e?e[f].push(g):e[f]=[g]}a={};f=Object.keys(e);for(c=0;c<f.length;++c)a[f[c]]=
v(e[f[c]]);return r(a)}function d(a,e){return function(c){var d=n.le(e,c[0]);if(0>d)return 1;var f=a[d];if(!f)if(0<d&&e[d]===c[0])f=a[d-1];else return 1;for(d=1;f;){var g=f.key,k=u(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>k)f=f.left;else if(0<k)d=-1,f=f.right;else return 0;else if(0<k)f=f.left;else if(0>k)d=1,f=f.right;else return 0}return d}}function k(a){return 1}function l(a){return function(e){return a(e[0],e[1])?0:1}}function x(a,e){return function(c){return a(c[0],c[1])?0:e(c)}}g.exports=function(a){for(var e=
a.length,c=[],g=[],n=0;n<e;++n)for(var r=a[n],m=r.length,b=m-1,v=0;v<m;b=v++){var b=r[b],t=r[v];b[0]===t[0]?g.push([b,t]):c.push([b,t])}if(0===c.length)return 0===g.length?k:l(f(g));a=w(c);a=d(a.slabs,a.coordinates);return 0===g.length?a:x(f(g),a)};var u=a("robust-orientation")[3],w=a("slab-decomposition"),v=a("interval-tree-1d"),n=a("binary-search-bounds")},{"binary-search-bounds":93,"interval-tree-1d":79,"robust-orientation":100,"slab-decomposition":113}],95:[function(a,g,m){var t=a("big-rat/add");
g.exports=function(a,f){for(var d=a.length,g=Array(d),l=0;l<d;++l)g[l]=t(a[l],f[l]);return g}},{"big-rat/add":31}],96:[function(a,g,m){g.exports=function(a){for(var f=Array(a.length),d=0;d<a.length;++d)f[d]=t(a[d]);return f};var t=a("big-rat")},{"big-rat":34}],97:[function(a,g,m){var t=a("big-rat"),r=a("big-rat/mul");g.exports=function(a,d){for(var g=t(d),l=a.length,m=Array(l),u=0;u<l;++u)m[u]=r(a[u],g);return m}},{"big-rat":34,"big-rat/mul":43}],98:[function(a,g,m){var t=a("big-rat/sub");g.exports=
function(a,f){for(var d=a.length,g=Array(d),l=0;l<d;++l)g[l]=t(a[l],f[l]);return g}},{"big-rat/sub":46}],99:[function(a,g,m){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var h=d[f-1]=Array(a.length-1),g=0,b=0;g<a.length;++g)g!==c&&(h[b++]=a[f][g]);return d}function r(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",r(a.slice(0,c)),",",r(a.slice(c)),")"].join("")}function f(a,c){if("m"===a.charAt(0)){if("w"===
c.charAt(0)){var d=a.split("[");return["w",c.substr(1),"m",d[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return f(c,a)}function d(a){if(2===a.length)return[["diff(",f(a[0][0],a[1][1]),",",f(a[1][0],a[0][1]),")"].join("")];for(var c=[],h=0;h<a.length;++h)c.push(["scale(",r(d(t(a,h))),",",h&1?"-":"",a[0][h],")"].join(""));return c}function k(a,c){for(var d=[],f=0;f<c-2;++f)d.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return r(d)}function l(a){for(var c=[],f=[],h=Array(a),g=
0;g<a;++g){h[g]=Array(a);for(var l=0;l<a;++l)h[g][l]=["m",l,"[",a-g-2,"]"].join("")}for(g=0;g<a;++g)h[0][g]="1",h[a-1][g]="w"+g;for(g=0;g<a;++g)0===(g&1)?c.push.apply(c,d(t(h,g))):f.push.apply(f,d(t(h,g)));c=r(c);f=r(f);h="exactInSphere"+a;l=[];for(g=0;g<a;++g)l.push("m"+g);l=["function ",h,"(",l.join(),"){"];for(g=0;g<a;++g){l.push("var w",g,"=",k(g,a),";");for(var b=0;b<a;++b)b!==g&&l.push("var w",g,"m",b,"=scale(w",g,",m",b,"[0]);")}l.push("var p=",c,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",
h);return(new Function("sum","diff","prod","scale",l.join("")))(w,v,u,n)}function x(a){var c=h[a.length];c||(c=h[a.length]=l(a.length));return c.apply(void 0,a)}var u=a("two-product"),w=a("robust-sum"),v=a("robust-subtract"),n=a("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],c=["slow"],d=0;6>=d;++d)a.push("a"+d),c.push("o"+d);for(var f=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
d=2;6>=d;++d)f.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(f.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[x].concat(h));for(d=0;6>=d;++d)g.exports[d]=h[d]})()},{"robust-scale":102,"robust-subtract":104,"robust-sum":105,"two-product":116}],100:[function(a,g,m){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var h=
d[f-1]=Array(a.length-1),g=0,b=0;g<a.length;++g)g!==c&&(h[b++]=a[f][g]);return d}function r(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",r(a.slice(0,c)),",",r(a.slice(c)),")"].join("")}function f(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],d=0;d<a.length;++d)c.push(["scale(",r(f(t(a,d))),",",d&1?"-":"",a[0][d],")"].join(""));return c}function d(a){for(var c=
[],d=[],h=Array(a),g=0;g<a;++g){h[g]=Array(a);for(var k=0;k<a;++k)h[g][k]=["m",k,"[",a-g-1,"]"].join("")}g=[];for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,f(t(h,k))):d.push.apply(d,f(t(h,k))),g.push("m"+k);c=r(c);d=r(d);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",c,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(x,l,u,w)}function k(a){var c=h[a.length];c||(c=h[a.length]=d(a.length));return c.apply(void 0,a)}var l=
a("two-product"),x=a("robust-sum"),u=a("robust-scale"),w=a("robust-subtract"),v=d(3),n=d(4),h=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,d){var f=(a[1]-d[1])*(c[0]-d[0]),h=(a[0]-d[0])*(c[1]-d[1]),g=f-h;if(0<f){if(0>=h)return g;f+=h}else if(0>f){if(0<=h)return g;f=-(f+h)}else return g;f*=3.3306690738754716E-16;return g>=f||g<=-f?g:v(a,c,d)},function(a,c,d,f){var h=a[0]-f[0],g=c[0]-f[0],b=d[0]-f[0],k=a[1]-f[1],l=c[1]-f[1],r=d[1]-f[1],m=a[2]-f[2],v=c[2]-f[2],
t=d[2]-f[2],u=g*r,w=b*l,b=b*k,r=h*r,h=h*l,k=g*k,g=m*(u-w)+v*(b-r)+t*(h-k),m=7.771561172376103E-16*((Math.abs(u)+Math.abs(w))*Math.abs(m)+(Math.abs(b)+Math.abs(r))*Math.abs(v)+(Math.abs(h)+Math.abs(k))*Math.abs(t));return g>m||-g>m?g:n(a,c,d,f)}];(function(){for(;5>=h.length;)h.push(d(h.length));for(var a=[],c=["slow"],f=0;5>=f;++f)a.push("a"+f),c.push("o"+f);for(var n=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],f=2;5>=f;++f)n.push("case ",f,":return o",
f,"(",a.slice(0,f).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(n.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[k].concat(h));for(f=0;5>=f;++f)g.exports[f]=h[f]})()},{"robust-scale":102,"robust-subtract":104,"robust-sum":105,"two-product":116}],101:[function(a,g,m){var t=a("robust-sum"),r=a("robust-scale");g.exports=function(a,d){if(1===a.length)return r(d,a[0]);if(1===
d.length)return r(a,d[0]);if(0===a.length||0===d.length)return[0];var g=[0];if(a.length<d.length)for(var l=0;l<a.length;++l)g=t(g,r(d,a[l]));else for(l=0;l<d.length;++l)g=t(g,r(a,d[l]));return g}},{"robust-scale":102,"robust-sum":105}],102:[function(a,g,m){var t=a("two-product"),r=a("two-sum");g.exports=function(a,d){var g=a.length;if(1===g)return g=t(a[0],d),g[0]?g:[g[1]];var l=Array(2*g),m=[.1,.1],u=[.1,.1],w=0;t(a[0],d,m);m[0]&&(l[w++]=m[0]);for(var v=1;v<g;++v){t(a[v],d,u);r(m[1],u[0],m);m[0]&&
(l[w++]=m[0]);var n=u[1],h=m[1],e=n+h,n=h-(e-n);m[1]=e;n&&(l[w++]=n)}m[1]&&(l[w++]=m[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":116,"two-sum":117}],103:[function(a,g,m){g.exports=function(a,f,d,g){var l=t(a,d,g),m=t(f,d,g);if(0<l&&0<m||0>l&&0>m)return!1;var u=t(d,a,f),w=t(g,a,f);if(0<u&&0<w||0>u&&0>w)return!1;if(0===l&&0===m&&0===u&&0===w){a:{for(l=0;2>l;++l){var m=a[l],u=f[l],w=Math.max(m,u),v=d[l],n=g[l],h=Math.min(v,n);if(Math.max(v,n)<Math.min(m,u)||w<h){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":100}],104:[function(a,g,m){g.exports=function(a,g){var f=a.length|0,d=g.length|0;if(1===f&&1===d){var d=a[0],k=-g[0],f=d+k,l=f-d,f=(d=d-(f-l)+(k-l))?[d,f]:[f];return f}var k=Array(f+d),m=l=0,u=0,w=Math.abs,v=a[m],n=w(v),h=-g[u],e=w(h),c,q;n<e?(q=v,m+=1,m<f&&(v=a[m],n=w(v))):(q=h,u+=1,u<d&&(h=-g[u],e=w(h)));m<f&&n<e||u>=d?(c=v,m+=1,m<f&&(v=a[m],n=w(v))):(c=h,u+=1,u<d&&(h=-g[u],e=w(h)));var p=c+q;q-=p-c;for(var y=p,F;m<f&&u<d;)n<e?(c=v,m+=1,m<
f&&(v=a[m],n=w(v))):(c=h,u+=1,u<d&&(h=-g[u],e=w(h))),p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c;for(;m<f;)c=v,p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c,m+=1,m<f&&(v=a[m]);for(;u<d;)c=h,p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c,u+=1,u<d&&(h=-g[u]);q&&(k[l++]=q);y&&(k[l++]=y);l||(k[l++]=0);k.length=l;return k}},{}],105:[function(a,g,m){g.exports=function(a,g){var f=a.length|0,d=g.length|0;if(1===f&&1===d){var d=a[0],
k=g[0],f=d+k,l=f-d,f=(d=d-(f-l)+(k-l))?[d,f]:[f];return f}var k=Array(f+d),m=l=0,u=0,w=Math.abs,v=a[m],n=w(v),h=g[u],e=w(h),c,q;n<e?(q=v,m+=1,m<f&&(v=a[m],n=w(v))):(q=h,u+=1,u<d&&(h=g[u],e=w(h)));m<f&&n<e||u>=d?(c=v,m+=1,m<f&&(v=a[m],n=w(v))):(c=h,u+=1,u<d&&(h=g[u],e=w(h)));var p=c+q;q-=p-c;for(var y=p,F;m<f&&u<d;)n<e?(c=v,m+=1,m<f&&(v=a[m],n=w(v))):(c=h,u+=1,u<d&&(h=g[u],e=w(h))),p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c;for(;m<f;)c=v,p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=
y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c,m+=1,m<f&&(v=a[m]);for(;u<d;)c=h,p=c+q,c=p-c,(c=q-c)&&(k[l++]=c),c=y+p,F=c-y,q=c-F,p-=F,y-=q,q=y+p,y=c,u+=1,u<d&&(h=g[u]);q&&(k[l++]=q);y&&(k[l++]=y);l||(k[l++]=0);k.length=l;return k}},{}],106:[function(a,g,m){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],107:[function(a,g,m){arguments[4][49][0].apply(m,arguments)},{dup:49}],108:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var f=0;f<a;++f)this.roots[f]=f,this.ranks[f]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var f=this.roots;f[a]!==a;){var d=f[a];f[a]=f[d];a=d}return a};t.prototype.link=function(a,f){var d=this.find(a),g=this.find(f);if(d!==g){var l=this.ranks,m=this.roots,t=l[d],w=l[g];t<w?m[d]=g:w<t?m[g]=d:(m[g]=d,++l[d])}}},{}],109:[function(a,g,m){function t(a,d){var f=a.length,e=a.length-d.length,
c=Math.min;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-d[0];case 2:return(f=a[0]+a[1]-d[0]-d[1])?f:c(a[0],a[1])-c(d[0],d[1]);case 3:var e=a[0]+a[1],g=d[0]+d[1];if(f=e+a[2]-(g+d[2]))return f;var k=c(a[0],a[1]),l=c(d[0],d[1]);return(f=c(k,a[2])-c(l,d[2]))?f:c(k+a[2],e)-c(l+d[2],g);default:c=a.slice(0);c.sort();g=d.slice(0);g.sort();for(k=0;k<f;++k)if(e=c[k]-g[k])return e;return 0}}function r(a,d){return t(a[0],d[0])}function f(a,d){if(d){for(var f=a.length,e=Array(f),c=0;c<f;++c)e[c]=
[a[c],d[c]];e.sort(r);for(c=0;c<f;++c)a[c]=e[c][0],d[c]=e[c][1]}else a.sort(t);return a}function d(a){if(0===a.length)return[];for(var d=1,f=a.length,e=1;e<f;++e){var c=a[e];t(c,a[e-1])&&(e===d?d++:a[d++]=c)}a.length=d;return a}function k(a,d){for(var f=0,e=a.length-1,c=-1;f<=e;){var g=f+e>>1,k=t(a[g],d);0>=k?(0===k&&(c=g),f=g+1):0<k&&(e=g-1)}return c}function l(a,d){for(var f=Array(a.length),e=0,c=f.length;e<c;++e)f[e]=[];for(var c=[],e=0,g=d.length;e<g;++e)for(var l=d[e],m=l.length,r=1,b=1<<m;r<
b;++r){c.length=u.popCount(r);for(var w=0,x=0;x<m;++x)r&1<<x&&(c[w++]=l[x]);w=k(a,c);if(!(0>w))for(;!(f[w++].push(e),w>=a.length||0!==t(a[w],c)););}return f}function x(a,d){if(0>d)return[];for(var h=[],e=(1<<d+1)-1,c=0;c<a.length;++c)for(var g=a[c],k=e;k<1<<g.length;k=u.nextCombination(k)){for(var l=Array(d+1),m=0,b=0;b<g.length;++b)k&1<<b&&(l[m++]=g[b]);h.push(l)}return f(h)}"use restrict";var u=a("bit-twiddle"),w=a("union-find");m.dimension=function(a){for(var d=0,f=Math.max,e=0,c=a.length;e<c;++e)d=
f(d,a[e].length);return d-1};m.countVertices=function(a){for(var d=-1,f=Math.max,e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,l=g.length;k<l;++k)d=f(d,g[k]);return d+1};m.cloneCells=function(a){for(var d=Array(a.length),f=0,e=a.length;f<e;++f)d[f]=a[f].slice(0);return d};m.compareCells=t;m.normalize=f;m.unique=d;m.findCell=k;m.incidence=l;m.dual=function(a,f){if(!f)return l(d(x(a,0)),a,0);for(var h=Array(f),e=0;e<f;++e)h[e]=[];for(var e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,m=g.length;k<m;++k)h[g[k]].push(e);
return h};m.explode=function(a){for(var d=[],h=0,e=a.length;h<e;++h)for(var c=a[h],g=c.length|0,k=1,l=1<<g;k<l;++k){for(var m=[],b=0;b<g;++b)k>>>b&1&&m.push(c[b]);d.push(m)}return f(d)};m.skeleton=x;m.boundary=function(a){for(var d=[],h=0,e=a.length;h<e;++h)for(var c=a[h],g=0,k=c.length;g<k;++g){for(var l=Array(c.length-1),m=0,b=0;m<k;++m)m!==g&&(l[b++]=c[m]);d.push(l)}return f(d)};m.connectedComponents=function(a,g){if(g){for(var h=new w(g),e=0;e<a.length;++e)for(var c=a[e],l=0;l<c.length;++l)for(var p=
l+1;p<c.length;++p)h.link(c[l],c[p]);c=[];l=h.ranks;for(e=0;e<l.length;++e)l[e]=-1;for(e=0;e<a.length;++e)p=h.find(a[e][0]),0>l[p]?(l[p]=c.length,c.push([a[e].slice(0)])):c[l[p]].push(a[e].slice(0));return c}h=d(f(x(a,0)));e=new w(h.length);for(c=0;c<a.length;++c)for(l=a[c],p=0;p<l.length;++p)for(var m=k(h,[l[p]]),r=p+1;r<l.length;++r)e.link(m,k(h,[l[r]]));l=[];p=e.ranks;for(c=0;c<p.length;++c)p[c]=-1;for(c=0;c<a.length;++c)m=e.find(k(h,[a[c][0]])),0>p[m]?(p[m]=l.length,l.push([a[c].slice(0)])):l[p[m]].push(a[c].slice(0));
return l}},{"bit-twiddle":107,"union-find":108}],110:[function(a,g,m){g.exports=function(a,d,g){function l(a){if(b[a])return Infinity;var c=p[a],e=y[a];if(0>c||0>e)return Infinity;c=d[c];e=d[e];return Math.abs(t(d[a],c,e))/Math.sqrt(Math.pow(c[0]-e[0],2)+Math.pow(c[1]-e[1],2))}function m(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function u(a){for(var b=F[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<J){var h=F[A[d]];h<c&&(f=d,c=h)}e<J&&F[A[e]]<c&&(f=e);if(f===a)return a;m(a,f);a=f}}function w(a){for(var b=
F[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<F[A[c]])m(a,c),a=c;else return a}}function v(){if(0<J){var a=A[0];m(0,J-1);--J;u(0);return a}return-1}function n(a,b){var c=A[a];if(F[c]===b)return a;F[c]=-Infinity;w(a);v();F[c]=b;J+=1;return w(J-1)}function h(a){if(!b[a]){b[a]=!0;var c=p[a];a=y[a];0<=p[a]&&(p[a]=c);0<=y[c]&&(y[c]=a);0<=B[c]&&n(B[c],l(c));0<=B[a]&&n(B[a],l(a))}}function e(a,c){if(0>a[c])return c;var d=c,e=c;do{var f=a[e];if(!b[e]||0>f||f===e)break;e=f;f=a[e];if(!b[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=c;d!==e;d=a[d])a[d]=e;return e}for(var c=d.length,q=a.length,p=Array(c),y=Array(c),F=Array(c),b=Array(c),z=0;z<c;++z)p[z]=y[z]=-1,F[z]=Infinity,b[z]=!1;for(z=0;z<q;++z){var E=a[z];if(2!==E.length)throw Error("Input must be a graph");var D=E[1],E=E[0];y[E]=-1!==y[E]?-2:D;p[D]=-1!==p[D]?-2:E}for(var A=[],B=Array(c),z=0;z<c;++z)Infinity>(F[z]=l(z))?(B[z]=A.length,A.push(z)):B[z]=-1;for(var J=A.length,z=J>>1;0<=z;--z)u(z);for(;;){z=v();if(0>z||F[z]>g)break;h(z)}g=
[];for(z=0;z<c;++z)b[z]||(B[z]=g.length,g.push(d[z].slice()));var H=[];a.forEach(function(a){var b=e(p,a[0]);a=e(y,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&H.push([b,a]))});r.unique(r.normalize(H));return{positions:g,edges:H}};var t=a("robust-orientation"),r=a("simplicial-complex")},{"robust-orientation":100,"simplicial-complex":109}],111:[function(a,g,m){function t(a,d){var g,l;if(d[0][0]<d[1][0])g=d[0],l=d[1];else if(d[0][0]>d[1][0])g=d[1],l=d[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var m=Math.min(d[0][1],d[1][1]),t=Math.max(d[0][1],d[1][1]);return l<m?l-m:g>t?g-t:l-t}a[0][1]<a[1][1]?(t=a[0],m=a[1]):(t=a[1],m=a[0]);return(t=r(l,g,t))?t:(t=r(l,g,m))?t:m-l}g.exports=function(a,d){var g,l;if(d[0][0]<d[1][0])g=d[0],l=d[1];else if(d[0][0]>d[1][0])g=d[1],l=d[0];else return t(d,a);var m,u;if(a[0][0]<a[1][0])m=a[0],u=a[1];else if(a[0][0]>a[1][0])m=a[1],u=a[0];else return-t(a,d);var w=r(g,l,u),v=r(g,l,m);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;
w=r(u,m,l);v=r(u,m,g);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;return l[0]-u[0]};var r=a("robust-orientation")},{"robust-orientation":100}],112:[function(a,g,m){arguments[4][80][0].apply(m,arguments)},{dup:80}],113:[function(a,g,m){function t(a,d,f){this.slabs=a;this.coordinates=d;this.horizontal=f}function r(a,d){return a.y-d}function f(a,d){for(var h=null;a;){var e=a.key,c,g;e[0][0]<e[1][0]?(c=e[0],g=e[1]):(c=e[1],g=e[0]);c=u(c,g,d);if(0>c)a=a.left;else if(0<c)if(d[0]!==
e[1][0])h=a,a=a.right;else{if(e=f(a.right,d))return e;a=a.left}else{if(d[0]!==e[1][0])return a;if(e=f(a.right,d))return e;a=a.left}}return h}function d(a,d,f,e){this.y=a;this.index=d;this.start=f;this.closed=e}function k(a,d,f,e){this.x=a;this.segment=d;this.create=f;this.index=e}g.exports=function(a){for(var f=a.length,h=2*f,e=Array(h),c=0;c<f;++c){var g=a[c],l=g[0][0]<g[1][0];e[2*c]=new k(g[0][0],g,l,c);e[2*c+1]=new k(g[1][0],g,!l,c)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=x(w);f=[];g=[];l=[];for(c=0;c<h;){for(var m=e[c].x,r=[];c<h;){var b=e[c];if(b.x!==m)break;c+=1;b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(r.push(new d(b.segment[0][1],b.index,!0,!0)),r.push(new d(b.segment[1][1],b.index,!1,!1))):(r.push(new d(b.segment[1][1],b.index,!0,!1)),r.push(new d(b.segment[0][1],b.index,!1,!0)))):a=b.create?a.insert(b.segment,b.index):a.remove(b.segment)}f.push(a.root);
g.push(m);l.push(r)}return new t(f,g,l)};var l=a("binary-search-bounds"),x=a("functional-red-black-tree"),u=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var d=l.le(this.coordinates,a[0]);if(0>d)return-1;var h=f(this.slabs[d],a),e=-1;h&&(e=h.value);if(this.coordinates[d]===a[0]){var c=null;h&&(c=h.key);0<d&&(h=f(this.slabs[d-1],a))&&(c?0<w(h.key,c)&&(c=h.key,e=h.value):(e=h.value,c=h.key));h=this.horizontal[d];if(0<h.length){var g=l.ge(h,a[1],r);if(g<h.length){d=
h[g];if(a[1]===d.y){if(d.closed)return d.index;for(;g<h.length-1&&h[g+1].y===a[1];)if(g+=1,d=h[g],d.closed)return d.index;if(d.y===a[1]&&!d.start){g+=1;if(g>=h.length)return e;d=h[g]}}d.start?c?(a=u(c[0],c[1],[a[0],d.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(e=d.index)):e=d.index:d.y!==a[1]&&(e=d.index)}}}return e}},{"./lib/order-segments":111,"binary-search-bounds":112,"functional-red-black-tree":73,"robust-orientation":100}],114:[function(a,g,m){function t(a,d){var g=a.length,k=["'use strict';"],m="surfaceNets"+
a.join("_")+"d"+d;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===d&&k.push("getters:[0],");for(var n=[],h=[],e=0;e<g;++e)n.push("d"+e),h.push("d"+e);for(e=0;e<1<<g;++e)n.push("v"+e),h.push("v"+e);for(e=0;e<1<<g;++e)n.push("p"+e),h.push("p"+e);n.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",n.join(),"){");n=[];for(e=0;e<1<<g;++e)n.push("(p"+e+"<<"+e+")");k.push("var m=(",
n.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var n=[],c=[];128>=1<<(1<<g)?(k.push("switch(m){"),c=k):k.push("switch(m>>>7){");for(e=0;e<1<<(1<<g);++e){128<1<<(1<<g)&&0===e%128&&(0<n.length&&c.push("}}"),c="vExtra"+n.length,k.push("case ",e>>>7,":",c,"(m&0x7f,",h.join(),");break;"),c=["function ",c,"(m,",h.join(),"){switch(m){"],n.push(c));c.push("case ",e&127,":");for(var q=Array(g),p=Array(g),t=Array(g),F=Array(g),b=0,z=0;z<g;++z)q[z]=[],p[z]=[],t[z]=0,F[z]=0;for(z=0;z<1<<g;++z)for(var E=
0;E<g;++E){var D=z^1<<E;if(!(D>z)&&!(e&1<<D)!==!(e&1<<z)){var A=1;e&1<<D?p[E].push("v"+D+"-v"+z):(p[E].push("v"+z+"-v"+D),A=-A);0>A?(q[E].push("-v"+z+"-v"+D),t[E]+=2):(q[E].push("v"+z+"+v"+D),t[E]-=2);b+=1;for(A=0;A<g;++A)A!==E&&(D&1<<A?F[A]+=1:--F[A])}}z=[];for(E=0;E<g;++E)0===q[E].length?z.push("d"+E+"-0.5"):(D="",0>t[E]?D=t[E]+"*c":0<t[E]&&(D="+"+t[E]+"*c"),z.push("d"+E+"-"+(.5+F[E]/b*.5)+"-"+q[E].length/b*.5+"*("+q[E].join("+")+D+")/("+p[E].join("+")+")"));c.push("a.push([",z.join(),"]);","break;")}k.push("}},");
0<n.length&&c.push("}}");h=[];for(e=0;e<1<<g-1;++e)h.push("v"+e);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=f(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",m,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
m,";");for(e=0;e<n.length;++e)k.push(n[e].join(""));return(new Function("genContour",k.join("")))(r)}g.exports=function(a,f){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=d(a,f),m=g.length,r=Array(m),n=Array(m),h=0;h<m;++h)r[h]=[g[h]],n[h]=[h];return{positions:r,cells:n}}g=a.order.join()+"-"+a.dtype;m=k[g];f=+f||0;m||(m=k[g]=t(a.order,a.dtype));return m(a,f)};var r=a("ndarray-extract-contour"),f=a("triangulate-hypercube"),d=a("zero-crossings"),k={}},{"ndarray-extract-contour":85,
"triangulate-hypercube":115,"zero-crossings":124}],115:[function(a,g,m){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(f(a+1))|0,l=[],m=0;m<g;++m){for(var u=t.unrank(a,m),w=[0],v=0,n=0;n<u.length;++n)v+=1<<u[n],w.push(v);1>r(u)&&(w[0]=v,w[a]=0);l.push(w)}return l};var t=a("permutation-rank"),r=a("permutation-parity"),f=a("gamma")},{gamma:74,"permutation-parity":88,"permutation-rank":89}],116:[function(a,g,m){g.exports=function(a,f,d){var g=a*f,l=t*a,l=l-(l-a);a-=l;
var m=t*f,m=m-(m-f);f-=m;f=a*f-(g-l*m-a*m-l*f);return d?(d[0]=f,d[1]=g,d):[f,g]};var t=+(Math.pow(2,27)+1)},{}],117:[function(a,g,m){g.exports=function(a,g,f){var d=a+g,k=d-a;g-=k;a-=d-k;return f?(f[0]=a+g,f[1]=d,f):[a+g,d]}},{}],118:[function(a,g,m){(function(g,r){function f(a){if(a){var b=p.log2(a.length||a.byteLength);z[b].push(a)}}function d(a){a=p.nextPow2(a);var b=p.log2(a),b=z[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function k(a){return new Uint8Array(d(a),0,a)}function l(a){return new Uint16Array(d(2*
a),0,a)}function x(a){return new Uint32Array(d(4*a),0,a)}function u(a){return new Int8Array(d(a),0,a)}function w(a){return new Int16Array(d(2*a),0,a)}function v(a){return new Int32Array(d(4*a),0,a)}function n(a){return new Float32Array(d(4*a),0,a)}function h(a){return new Float64Array(d(8*a),0,a)}function e(a){return F?new Uint8ClampedArray(d(a),0,a):k(a)}function c(a){return new DataView(d(a),0,a)}function q(a){a=p.nextPow2(a);var b=p.log2(a),b=E[b];return 0<b.length?b.pop():new r(a)}var p=a("bit-twiddle"),
y=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var F="undefined"!==typeof Uint8ClampedArray,b=g.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=y([32,0]));b.BUFFER||(b.BUFFER=y([32,0]));var z=b.DATA,E=b.BUFFER;m.free=function(a){if(r.isBuffer(a))E[p.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=p.log2(a.length||a.byteLength)|0;z[b].push(a)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeInt8=m.freeInt16=m.freeInt32=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(a){f(a.buffer)};m.freeArrayBuffer=f;m.freeBuffer=function(a){E[p.log2(a.length)].push(a)};m.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return d(a);switch(b){case "uint8":return k(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return u(a);
case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return n(a);case "double":case "float64":return h(a);case "uint8_clamped":return e(a);case "buffer":return q(a);case "data":case "dataview":return c(a);default:return null}};m.mallocArrayBuffer=d;m.mallocUint8=k;m.mallocUint16=l;m.mallocUint32=x;m.mallocInt8=u;m.mallocInt16=w;m.mallocInt32=v;m.mallocFloat32=m.mallocFloat=n;m.mallocFloat64=m.mallocDouble=h;m.mallocUint8Clamped=e;m.mallocDataView=c;m.mallocBuffer=q;m.clearCache=
function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.UINT8C[a].length=0,z[a].length=0,E[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":49,buffer:57,dup:71}],119:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var f=
0;f<a;++f)this.roots[f]=f,this.ranks[f]=0}"use restrict";g.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var f=a,d=this.roots;d[a]!==a;)a=d[a];for(;d[f]!==a;){var g=d[f];d[f]=a;f=g}return a};a.link=function(a,f){var d=this.find(a),g=this.find(f);if(d!==g){var l=this.ranks,m=this.roots,t=l[d],w=l[g];t<w?m[d]=g:w<t?m[g]=d:(m[g]=d,
++l[d])}}},{}],120:[function(a,g,m){g.exports=function(a,g,f){if(0===a.length)return a;if(g){f||a.sort(g);f=1;for(var d=a.length,k=a[0],l=a[0],m=1;m<d;++m)l=k,k=a[m],g(k,l)&&(m===f?f++:a[f++]=k);a.length=f;return a}f||a.sort();g=1;f=a.length;d=a[0];k=a[0];for(l=1;l<f;++l)k=d,d=a[l],d!==k&&(l===g?g++:a[g++]=d);a.length=g;return a}},{}],121:[function(a,g,m){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||r,g.context||f,g)};var t=a("./lib/vtext"),r=null,f=null;"undefined"!==
typeof document&&(r=document.createElement("canvas"),r.width=8192,r.height=1024,f=r.getContext("2d"))},{"./lib/vtext":122}],122:[function(a,g,m){function t(a,d,f){for(var e=d.textAlign||"start",c=d.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],l=a.length,m=0;m<l;++m)for(var b=a[m],r=0;2>r;++r)g[r]=Math.min(g[r],b[r])|0,k[r]=Math.max(k[r],b[r])|0;var t=0;switch(e){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
e+"'");}var u=0;switch(c){case "hanging":case "top":u=-g[1];break;case "middle":u=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":u=-3*f;break;case "bottom":u=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+c+"'");}var w=1/f;"lineHeight"in d?w*=+d.lineHeight:"width"in d?w=d.width/(k[0]-g[0]):"height"in d&&(w=d.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+u)]})}function r(a,f,g,e){a=d(a,128);e=e?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(e.positions,f,g);a=e.edges;e="ccw"===f.orientation;x(g,a);if(f.polygons||f.polygon||f.polyline){f=w(a,g);a=Array(f.length);for(var c=0;c<f.length;++c){for(var k=f[c],m=Array(k.length),r=0;r<k.length;++r){for(var F=k[r],b=Array(F.length),z=0;z<F.length;++z)b[z]=g[F[z]].slice();e&&b.reverse();m[r]=b}a[c]=m}return a}return f.triangles||f.triangulate||f.triangle?{cells:u(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function f(a,d,f){try{return r(a,
d,f,!0)}catch(e){}try{return r(a,d,f,!1)}catch(e){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,d,g,e){var c=e.size||64;g.font=c+"px "+(e.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(a).width+2*c)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var m=3*c;d.height<m&&(d.height=m);
g.fillStyle="#000";g.fillRect(0,0,d.width,d.height);g.fillStyle="#fff";g.fillText(a,c,2*c);a=g.getImageData(0,0,l,m);l=k(a.data,[m,l,4]).pick(-1,-1,0).transpose(1,0);return f(l,e,c)};g.exports.processPixels=f;var d=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),x=a("clean-pslg"),u=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:58,"clean-pslg":63,ndarray:86,"planar-graph-to-polyline":92,"simplify-planar-graph":110,"surface-nets":114}],123:[function(a,g,m){g.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":67}],124:[function(a,g,m){g.exports=function(a,f){var d=[];f=+f||0;t(a.hi(a.shape[0]-1),d,f);return d};var t=a("./lib/zc-core")},{"./lib/zc-core":123}],125:[function(a,
g,m){var t=a("./lib/util/extend"),r=a("./lib/dynamic"),f=a("./lib/util/raf"),d=a("./lib/util/clock"),k=a("./lib/strings"),l=a("./lib/webgl"),x=a("./lib/extension"),u=a("./lib/limits"),w=a("./lib/buffer"),v=a("./lib/elements"),n=a("./lib/texture"),h=a("./lib/renderbuffer"),e=a("./lib/framebuffer"),c=a("./lib/attribute"),q=a("./lib/shader"),p=a("./lib/read"),y=a("./lib/core");g.exports=function(){function a(){P=f.next(a);G.count+=1;var b=d();G.deltaTime=(b-M)/1E3;G.time=(b-N)/1E3;M=b;A();for(b=0;b<
S.length;++b)(0,S[b])(G,null,0)}function b(a){}function g(a){}function m(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];r.isDynamic(e)?d[b]=r.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;l.length<a;)l.push(null);return l}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;delete c.attributes;
delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var d=W.compile(a,f,e,d),g=d.draw,h=d.batch,k=d.scope,l=[];return function(a,b){var d;if("function"===typeof a)return k.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)k.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)k.call(this,a[d],b,d);else return k.call(this,a,b,0);else if("number"===typeof a){if(0<a)return h.call(this,
c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return h.call(this,a,a.length)}else return g.call(this,a)}}function D(){W.procs.poll()}function A(){var a=R.viewport,b=R.scissor_box;a[0]=a[1]=b[0]=b[1]=0;G.viewportWidth=G.frameBufferWidth=G.drawingBufferWidth=a[2]=b[2]=J.drawingBufferWidth;G.viewportHeight=G.frameBufferWidth=G.drawingBufferHeight=a[3]=b[3]=J.drawingBufferHeight;W.procs.refresh()}var B=l(Array.prototype.slice.call(arguments)),J=B.gl,H=B.options,B=k(),C=x(J).extensions,N=d(),M=N,K=
J.drawingBufferWidth,Q=J.drawingBufferHeight,G={count:0,deltaTime:0,time:0,viewportWidth:K,viewportHeight:Q,framebufferWidth:K,framebufferHeight:Q,drawingBufferWidth:K,drawingBufferHeight:Q,pixelRatio:H.pixelRatio},I=u(J,C),L=w(J),K=v(J,C,L),Q=c(J,C,I,L,B),O=q(J,B),U=n(J,C,I,D,G),Y=h(J,C,I),X=e(J,C,I,U,Y),V=p(J,D,G),W=y(J,B,C,I,L,K,U,X,{},Q,O,{elements:null,primitive:4,count:-1,offset:0,instances:-1},G),R=W.next,T=J.canvas,S=[],P=0;T&&(T.addEventListener("webglcontextlost",b,!1),T.addEventListener("webglcontextrestored",
g,!1));A();return t(m,{clear:function(a){var b=0;D();var c=a.color;c&&(J.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(J.clearDepth(+a.depth),b|=256);"stencil"in a&&(J.clearStencil(a.stencil|0),b|=1024);J.clear(b)},prop:r.define.bind(null,1),context:r.define.bind(null,2),"this":r.define.bind(null,3),draw:m({}),buffer:function(a){return L.create(a,34962)},elements:K.create,texture:U.create2D,cube:U.createCube,renderbuffer:Y.create,framebuffer:X.create,framebufferCube:function(a){},
attributes:J.getContextAttributes(),frame:function(b){S.push(b);!P&&0<S.length&&a();return{cancel:function(){var c=S.find(function(a){return a===b});0>c||(S.splice(c,1),0>=S.length&&P&&(f.cancel(a),P=0))}}},limits:I,hasExtension:function(a){return 0<=I.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){P&&(f.cancel(a),P=0);T&&(T.removeEventListener("webglcontextlost",b),T.removeEventListener("webglcontextrestored",g));O.clear();X.clear();Y.clear();U.clear();L.clear();if(H.onDestroy)H.onDestroy()},
_gl:J,_refresh:A})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/strings":17,"./lib/texture":18,"./lib/util/clock":19,"./lib/util/extend":21,"./lib/util/raf":26,"./lib/webgl":29}]},{},[1]);

        </script>
        </body>
      </html>