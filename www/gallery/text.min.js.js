var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,n=[];!(g=a.next()).done;)n.push(g.value);return n};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function n(){}n.prototype=g.prototype;a.prototype=new n;a.prototype.constructor=a;for(var t in g)if($jscomp.global.Object.defineProperties){var p=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);p&&$jscomp.global.Object.defineProperty(a,t,p)}else a[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var n=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},p=(t.next=function(){if(n<a.length){var e=n++;return{value:g(e,a[e]),done:!1}}p.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return p},t);return p};
$jscomp.array.findInternal_=function(a,g,n){a instanceof String&&(a=String(a));for(var t=a.length,p=0;p<t;p++){var e=a[p];if(g.call(n,e,p,a))return{i:p,v:e}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,n){g=void 0===g?function(e){return e}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var p;!(p=a.next()).done;)t.push(g.call(n,p.value))}else{p=a.length;for(var e=0;e<p;e++)t.push(g.call(n,a[e]))}return t};$jscomp.array.of=function(a){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,n){var t=this.length;a=Number(a);g=Number(g);n=Number(null!=n?n:t);if(a<g)for(n=Math.min(n,t);g<n;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(n=Math.min(n,t+g-a),a+=n-g;n>g;)--n in this?this[--a]=this[n]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,n){null!=n&&a.length||(n=this.length||0);n=Number(n);for(g=Number((void 0===g?0:g)||0);g<n;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),n=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=n.get(g)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var t=n.entries(),p=t.next();if(p.done||p.value[0]!=g||"s"!=p.value[1])return!1;p=t.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!t.next().done?!1:!0}catch(e){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var n=this.maybeGetEntry_(a),t=n.id,p=n.list,n=n.entry;p||(p=this.data_[t]=[]);n?n.value=g:(n={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},p.push(n),this.head_.previous.next=n,this.head_.previous=n,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var n=g.list,t=g.index;return(g=g.entry)&&n?(n.splice(t,1),n.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),n=this.data_[g];if(n)for(var t=0;t<n.length;t++){var p=n[t];if(a!==a&&p.key!==p.key||a===p.key)return{id:g,list:n,index:t,entry:p}}return{id:g,list:n,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var n=$jscomp.makeIterator(this.entries()),t=n.next();!t.done;t=n.next())t=t.value,a.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,n=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(n){for(;n.head!=g.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:a(n)};n=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,n){Object.defineProperty(a,g,{value:String(n)})}:function(a,g,n){a[g]=String(n)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var n=a&65535,t=g&65535;return n*t+((a>>>16&65535)*t+n*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,n=1,t=a,p=0,e=1;p!=t;)g*=a,e*=-1,t=(p=t)+e*g/++n;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,n=1,t=a,p=0;p!=t;)g*=a/++n,t=(p=t)+g;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,n){for(var t=[],p=2;p<arguments.length;++p)t[p-2]=arguments[p];a=Number(a);g=Number(g);for(var e=Math.max(Math.abs(a),Math.abs(g)),f=$jscomp.makeIterator(t),p=f.next();!p.done;p=f.next())e=Math.max(e,Math.abs(p.value));if(1E100<e||1E-100>e){a/=e;g/=e;f=a*a+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p)/e,f+=p*p;return Math.sqrt(f)*e}e=a*a+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p),e+=
p*p;return Math.sqrt(e)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var n=[],t=1;t<arguments.length;++t)n[t-1]=arguments[t];n=$jscomp.makeIterator(n);for(t=n.next();!t.done;t=n.next())if(t=t.value)for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(a[p]=t[p]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),n=a.next();if(n.done||n.value[0]!=g||n.value[1]!=g)return!1;n=a.next();return n.done||n.value[0]==g||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var n=this;this.map_.forEach(function(t){return a.call(g,t,t,n)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];for(var n="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(t>>>10&1023|55296),n+=String.fromCharCode(t&1023|56320))}return n};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var n="";a;)if(a&1&&(n+=g),a>>>=1)g+=g;return n};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),n=g.length;a=Number(a)||0;if(0<=a&&a<n){a|=0;var t=g.charCodeAt(a);if(55296>t||56319<t||a+1===n)return t;a=g.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var n=this.toString();a+="";for(var t=n.length,p=a.length,e=Math.max(0,Math.min(g|0,n.length)),f=0;f<p&&e<t;)if(n[e++]!=a[f++])return!1;return f>=p};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var n=this.toString();a+="";void 0===g&&(g=n.length);for(var t=Math.max(0,Math.min(g|0,n.length)),p=a.length;0<p&&0<t;)if(n[--t]!=a[--p])return!1;return 0>=p};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,n,t){function p(f,l){if(!n[f]){if(!g[f]){var y="function"==typeof require&&require;if(!l&&y)return y(f,!0);if(e)return e(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=n[f]={exports:{}};g[f][0].call(y.exports,function(e){var l=g[f][1][e];return p(l?l:e)},y,y.exports,e$$0,g,n,t)}return n[f].exports}for(var e="function"==typeof require&&require,f=0;f<t.length;f++)p(t[f]);return p})({1:[function(a,g,n){g=a("../regl")();n=a("vectorize-text");var t=a("gl-mat4/perspective"),
p=a("gl-mat4/lookAt");a=n("hello regl!",{textAlign:"center",textBaseline:"middle"});var e=g.texture({copy:!0,min:"linear",mag:"linear"}),f=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:e,t:function(e){return.001*e.tick}},depth:{enable:!1},count:3}),k=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(e){return.01*e.tick},view:function(e){e=.01*e.tick;return p([],[5*Math.sin(e),0,-5*Math.cos(e)],[0,0,0],[0,-1,0])},projection:function(e){return t([],Math.PI/4,e.viewportWidth/e.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){f();k();e({copy:!0,min:"linear",mag:"linear"})})},{"../regl":128,"gl-mat4/lookAt":79,"gl-mat4/perspective":80,"vectorize-text":124}],2:[function(a,g,n){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(a,e,f,k,l){a=f.maxAttributes;e=Array(a);for(f=0;f<a;++f)e[f]=new t;return{Record:t,scope:{},state:e}}},{}],3:[function(a,g,n){function t(e){return w[Object.prototype.toString.call(e)]|0}function p(e,d){for(var c=0;c<d.length;++c)e[c]=d[c]}function e(e,d,c,f,k,l,a){for(var b=0,x=0;x<c;++x)for(var r=0;r<f;++r)e[b++]=d[k*x+l*r+a]}function f(e,d,c){for(var f=0,k=0;k<d.length;++k)for(var l=d[k],a=0;a<
c;++a)e[f++]=l[a]}var k=a("./util/is-typed-array"),l=a("./util/is-ndarray"),y=a("./util/values"),v=a("./util/pool"),w=a("./constants/arraytypes.json"),u=a("./constants/dtypes.json"),r=a("./constants/usage.json");g.exports=function(h,d){function c(b){this.id=w++;this.buffer=h.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function m(b,c,d){b.byteLength=c.byteLength;h.bufferData(b.type,c,d)}function a(b,c,d,h,x){b.usage=d;if(Array.isArray(c))b.dtype=h||
5126,0<c.length&&(Array.isArray(c[0])?(b.dimension=c[0].length,h=v.allocType(b.dtype,c.length*b.dimension),f(h,c,b.dimension),m(b,h,d),v.freeType(h)):"number"===typeof c[0]?(b.dimension=x,h=v.allocType(b.dtype,c.length),p(h,c),m(b,h,d),v.freeType(h)):k(c[0])&&(b.dimension=c[0].length,b.dtype=h||t(c[0])||5126,h=v.allocType(b.dtype,c.length*b.dimension),f(h,c,b.dimension),m(b,h,d),v.freeType(h)));else if(k(c))b.dtype=h||t(c),b.dimension=x,m(b,c,d);else if(l(c)){var q=c.shape,r=c.stride;x=c.offset;var u=
0,z=0,y=0,w=0;1===q.length?(u=q[0],z=1,y=r[0],w=0):2===q.length&&(u=q[0],z=q[1],y=r[0],w=r[1]);b.dtype=h||t(c.data)||5126;b.dimension=z;h=v.allocType(b.dtype,u*z);e(h,c.data,u,z,y,w,x);m(b,h,d);v.freeType(h)}}function z(c){d.bufferCount--;h.deleteBuffer(c.buffer);c.buffer=null;delete b[c.id]}var w=0,b={};c.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)};c.prototype.destroy=function(){z(this)};var x=[];return{create:function(m,x,y){function w(b){var c=35044,d=null,e=0,f=0,m=1;Array.isArray(b)||
k(b)||l(b)?d=b:"number"===typeof b?e=b|0:b&&("data"in b&&(d=b.data),"usage"in b&&(c=r[b.usage]),"type"in b&&(f=u[b.type]),"dimension"in b&&(m=b.dimension|0),"length"in b&&(e=b.length|0));C.bind();d?a(C,d,c,f,m):(h.bufferData(C.type,e,c),C.dtype=f||5121,C.usage=c,C.dimension=m,C.byteLength=e);return w}d.bufferCount++;var C=new c(x);b[C.id]=C;y||w(m);w._reglType="buffer";w._buffer=C;w.subdata=function(b,c){var d=(c||0)|0;C.bind();if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var m=v.allocType(C.dtype,
b.length);p(m,b);h.bufferSubData(C.type,d,m);v.freeType(m)}else if(Array.isArray(b[0])||k(b[0])){var m=b[0].length,x=v.allocType(C.dtype,b.length*m);f(x,b,m);h.bufferSubData(C.type,d,x);v.freeType(x)}}else if(k(b))h.bufferSubData(C.type,d,b);else if(l(b)){var a=b.shape,q=b.stride,r=x=m=0,u=0;1===a.length?(m=a[0],x=1,r=q[0],u=0):2===a.length&&(m=a[0],x=a[1],r=q[0],u=q[1]);a=Array.isArray(b.data)?C.dtype:t(b.data);a=v.allocType(a,m*x);e(a,b.data,m,x,r,u,b.offset);h.bufferSubData(C.type,d,a);v.freeType(a)}return w};
w.destroy=function(){z(C)};return w},createStream:function(b,d){var e=x.pop();e||(e=new c(b),e.buffer=h.createBuffer());e.bind();a(e,d,35040,0,1);return e},destroyStream:function(b){x.push(b)},clear:function(){y(b).forEach(z)},getBuffer:function(b){return b&&b._buffer instanceof c?b._buffer:null},_initBuffer:a}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(a,
g,n){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,g,n){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,g,n){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,
"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,g,n){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,g,n){function t(b){return Array.isArray(b)||w(b)||u(b)}function p(b){return b.sort(function(b,c){return"viewport"===b?-1:"viewport"===c?1:b<c?-1:1})}function e(b,c,d,e){this.thisDep=b;this.contextDep=c;this.propDep=d;this.append=e}function f(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function k(b){return new e(!1,!1,!1,
b)}function l(b,c){var d=b.type;return 0===d?(d=b.data.length,new e(!0,1<=d,2<=d,c)):new e(3===d,2===d,1===d,c)}var y=a("./util/codegen"),v=a("./util/loop"),w=a("./util/is-typed-array"),u=a("./util/is-ndarray"),r=a("./util/is-array-like"),h=a("./constants/primitives.json"),d=a("./constants/dtypes.json"),c=["x","y","z","w"],m={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},q={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},C={cw:2304,ccw:2305},b=new e(!1,!1,!1,function(){});g.exports=function(a,
u,w,A,g,n,F,D,L,H,J,P,G,K,N){function M(b){return b.replace(".","_")}function Q(b,c,d){var e=M(b);xa.push(b);qa[e]=ja[e]=!!d;ka[e]=c}function S(b,c,d){var e=M(b);xa.push(b);Array.isArray(d)?(ja[e]=d.slice(),qa[e]=d.slice()):ja[e]=qa[e]=d;la[e]=c}function X(){var b=y(),c=b.link,d=b.global;b.id=Da++;b.batchId="0";var e=c(Ca),f=b.shared={props:"a0"};Object.keys(Ca).forEach(function(b){f[b]=d.def(e,".",b)});var m=b.next={},h=b.current={};Object.keys(la).forEach(function(b){Array.isArray(ja[b])&&(m[b]=
d.def(f.next,".",b),h[b]=d.def(f.current,".",b))});var k=b.constants={};Object.keys(ya).forEach(function(b){k[b]=d.def(JSON.stringify(ya[b]))});b.invoke=function(d,e){switch(e.type){case 0:var m=["this",f.context,f.props,b.batchId];return d.def(c(e.data),".call(",m.slice(0,Math.max(e.data.length+1,4)),")");case 1:return d.def(f.props,e.data);case 2:return d.def(f.context,e.data);case 3:return d.def("this",e.data)}};b.attribCache={};var a={};b.scopeAttrib=function(b){b=u.id(b);if(b in a)return a[b];
var d=H.scope[b];d||(d=H.scope[b]=new ga);return a[b]=c(d)};return b}function W(b){var c=b["static"];b=b.dynamic;var d;if("profile"in c){var e=!!c.profile;d=k(function(b,c){return e});d.enable=e}else if("profile"in b){var f=b.profile;d=l(f,function(b,c){return b.invoke(c,f)})}return d}function Y(b){var c=b["static"];b=b.dynamic;if("framebuffer"in c){var d=c.framebuffer;return d?(d=D.getFramebuffer(d),k(function(b,c){var e=b.link(d),f=b.shared;c.set(f.framebuffer,".next",e);f=f.context;c.set(f,".framebufferWidth",
e+".width");c.set(f,".framebufferHeight",e+".height");return e})):k(function(b,c){var d=b.shared;c.set(d.framebuffer,".next","null");d=d.context;c.set(d,".framebufferWidth",d+".drawingBufferWidth");c.set(d,".framebufferHeight",d+".drawingBufferHeight");return"null"})}if("framebuffer"in b){var e=b.framebuffer;return l(e,function(b,c){var d=b.invoke(c,e),f=b.shared,m=f.framebuffer,d=c.def(m,".getFramebuffer(",d,")");c.set(m,".next",d);f=f.context;c.set(f,".framebufferWidth",d+"?"+d+".width:"+f+".drawingBufferWidth");
c.set(f,".framebufferHeight",d+"?"+d+".height:"+f+".drawingBufferHeight");return d})}return null}function T(b,c){function d(b){if(b in f){var h=f[b];b=!0;var k=h.x|0,a=h.y|0,q,x;"width"in h?q=h.width|0:b=!1;"height"in h?x=h.height|0:b=!1;return new e(!b&&c&&c.thisDep,!b&&c&&c.contextDep,!b&&c&&c.propDep,function(b,c){var d=b.shared.context,e=q;"width"in h||(e=c.def(d,".","framebufferWidth","-",k));var f=x;"height"in h||(f=c.def(d,".","framebufferHeight","-",a));return[k,a,e,f]})}if(b in m){var r=
m[b];b=l(r,function(b,c){var d=b.invoke(c,r),e=b.shared.context,f=c.def(d,".x|0"),m=c.def(d,".y|0"),h=c.def('"width" in ',d,"?",d,".width|0:","(",e,".","framebufferWidth","-",f,")"),d=c.def('"height" in ',d,"?",d,".height|0:","(",e,".","framebufferHeight","-",m,")");return[f,m,h,d]});c&&(b.thisDep=b.thisDep||c.thisDep,b.contextDep=b.contextDep||c.contextDep,b.propDep=b.propDep||c.propDep);return b}return c?new e(c.thisDep,c.contextDep,c.propDep,function(b,c){var d=b.shared.context;return[0,0,c.def(d,
".","framebufferWidth"),c.def(d,".","framebufferHeight")]}):null}var f=b["static"],m=b.dynamic,h=d("viewport");if(h)var k=h,h=new e(h.thisDep,h.contextDep,h.propDep,function(b,c){var d=k.append(b,c),e=b.shared.context;c.set(e,".viewportWidth",d[2]);c.set(e,".viewportHeight",d[3]);return d});return{viewport:h,scissor_box:d("scissor.box")}}function V(b){function c(b){if(b in d){var e=u.id(d[b]);b=k(function(){return e});b.id=e;return b}if(b in m){var f=m[b];return l(f,function(b,c){var d=b.invoke(c,
f);return c.def(b.shared.strings,".id(",d,")")})}return null}var d=b["static"],m=b.dynamic,h=c("frag"),a=c("vert"),q=null;f(h)&&f(a)?(q=J.program(a.id,h.id),b=k(function(b,c){return b.link(q)})):b=new e(h&&h.thisDep||a&&a.thisDep,h&&h.contextDep||a&&a.contextDep,h&&h.propDep||a&&a.propDep,function(b,c){var d=b.shared.shader,e;e=h?h.append(b,c):c.def(d,".","frag");var f;f=a?a.append(b,c):c.def(d,".","vert");return c.def(d+".program("+f+","+e+")")});return{frag:h,vert:a,progVar:b,program:q}}function U(b){function c(b,
e){if(b in d){var f=d[b]|0;return k(function(b,c){e&&(b.OFFSET=f);return f})}if(b in m){var h=m[b];return l(h,function(b,c){var d=b.invoke(c,h);e&&(b.OFFSET=d);return d})}return e&&a?k(function(b,c){b.OFFSET="0";return 0}):null}var d=b["static"],m=b.dynamic,a=function(){if("elements"in d){var b=d.elements;t(b)?b=n.getElements(n.create(b)):b&&(b=n.getElements(b));var c=k(function(c,d){if(b){var e=c.link(b);return c.ELEMENTS=e}return c.ELEMENTS=null});c.value=b;return c}if("elements"in m){var e=m.elements;
return l(e,function(b,c){var d=b.shared,f=d.isBufferArgs,d=d.elements,m=b.invoke(c,e),h=c.def("null"),f=c.def(f,"(",m,")"),m=b.cond(f).then(h,"=",d,".createStream(",m,");")["else"](h,"=",d,".getElements(",m,");");c.entry(m);c.exit(b.cond(f).then(d,".destroyStream(",h,");"));return b.ELEMENTS=h})}return null}(),q=c("offset",!0);return{elements:a,primitive:function(){if("primitive"in d){var b=d.primitive;return k(function(c,d){return h[b]})}if("primitive"in m){var c=m.primitive;return l(c,function(b,
d){var e=b.constants.primTypes,f=b.invoke(d,c);return d.def(e,"[",f,"]")})}return a?f(a)?a.value?k(function(b,c){return c.def(b.ELEMENTS,".primType")}):k(function(){return 4}):new e(a.thisDep,a.contextDep,a.propDep,function(b,c){var d=b.ELEMENTS;return c.def(d,"?",d,".primType:",4)}):null}(),count:function(){if("count"in d){var b=d.count|0;return k(function(){return b})}if("count"in m){var c=m.count;return l(c,function(b,d){return b.invoke(d,c)})}return a?f(a)?a?q?new e(q.thisDep,q.contextDep,q.propDep,
function(b,c){return c.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):k(function(b,c){return c.def(b.ELEMENTS,".vertCount")}):k(function(){return-1}):new e(a.thisDep||q.thisDep,a.contextDep||q.contextDep,a.propDep||q.propDep,function(b,c){var d=b.ELEMENTS;return b.OFFSET?c.def(d,"?",d,".vertCount-",b.OFFSET,":-1"):c.def(d,"?",d,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:q}}function R(b){var c=b["static"],d=b.dynamic,e={};xa.forEach(function(b){function f(m,a){if(b in c){var q=m(c[b]);
e[h]=k(function(){return q})}else if(b in d){var x=d[b];e[h]=l(x,function(b,c){return a(b,c,b.invoke(c,x))})}}var h=M(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return f(function(b){return b},function(b,c,d){return d});case "depth.func":return f(function(b){return q[b]},function(b,c,d){return c.def(b.constants.compareFuncs,"[",
d,"]")});case "depth.range":return f(function(b){return b},function(b,c,d){b=c.def("+",d,"[0]");c=c.def("+",d,"[1]");return[b,c]});case "blend.func":return f(function(b){return[m["srcRGB"in b?b.srcRGB:b.src],m["dstRGB"in b?b.dstRGB:b.dst],m["srcAlpha"in b?b.srcAlpha:b.src],m["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,c,d){function e(b,m){var h=c.def('"',b,m,'" in ',d,"?",d,".",b,m,":",d,".",b);return c.def(f,"[",h,"]")}var f=b.constants.blendFuncs;b=e("src","RGB");var m=e("src","Alpha"),h=e("dst",
"RGB"),k=e("dst","Alpha");return[b,h,m,k]});case "blend.equation":return f(function(b){if("string"===typeof b)return[ma[b],ma[b]];if("object"===typeof b)return[ma[b.rgb],ma[b.alpha]]},function(b,c,d){var e=b.constants.blendEquations,f=c.def(),m=c.def();b=b.cond("typeof ",d,'==="string"');b.then(f,"=",m,"=",e,"[",d,"];");b["else"](f,"=",e,"[",d,".rgb];",m,"=",e,"[",d,".alpha];");c(b);return[f,m]});case "blend.color":return f(function(b){return v(4,function(c){return+b[c]})},function(b,c,d){return v(4,
function(b){return c.def("+",d,"[",b,"]")})});case "stencil.mask":return f(function(b){return b|0},function(b,c,d){return c.def(d,"|0")});case "stencil.func":return f(function(b){return[q[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,c,d){b=c.def('"cmp" in ',d,"?",b.constants.compareFuncs,"[",d,".cmp]",":",7680);var e=c.def(d,".ref|0");c=c.def('"mask" in ',d,"?",d,".mask|0:-1");return[b,e,c]});case "stencil.opFront":case "stencil.opBack":return f(function(c){return["stencil.opBack"===
b?1029:1028,z[c.fail||"keep"],z[c.zfail||"keep"],z[c.pass||"keep"]]},function(c,d,e){function f(b){return d.def('"',b,'" in ',e,"?",m,"[",e,".",b,"]:",7680)}var m=c.constants.stencilOps;return["stencil.opBack"===b?1029:1028,f("fail"),f("zfail"),f("pass")]});case "polygonOffset.offset":return f(function(b){return[b.factor|0,b.units|0]},function(b,c,d){b=c.def(d,".factor|0");c=c.def(d,".units|0");return[b,c]});case "cull.face":return f(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);return c},
function(b,c,d){return c.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return f(function(b){return b},function(b,c,d){return d});case "frontFace":return f(function(b){return C[b]},function(b,c,d){return c.def(d+'==="cw"?2304:2305')});case "colorMask":return f(function(b){return b.map(function(b){return!!b})},function(b,c,d){return v(4,function(b){return"!!"+d+"["+b+"]"})});case "sample.coverage":return f(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,c,d){b=c.def('"value" in ',
d,"?+",d,".value:1");c=c.def("!!",d,".invert");return[b,c]})}});return e}function Z(b){var c=b["static"],d=b.dynamic,e={};Object.keys(c).forEach(function(b){var d=c[b],f;"number"===typeof d||"boolean"===typeof d?f=k(function(){return d}):"function"!==typeof d||"texture2d"!==d._reglType&&"textureCube"!==d._reglType?r(d)&&(f=k(function(b){return b.global.def("[",v(d.length,function(b){return d[b]}),"]")})):f=k(function(b){return b.link(d)});f.value=d;e[b]=f});Object.keys(d).forEach(function(b){var c=
d[b];e[b]=l(c,function(b,d){return b.invoke(d,c)})});return e}function aa(b){var e=b["static"],f=b.dynamic,m={};Object.keys(e).forEach(function(b){var f=e[b],h=u.id(b),a=new ga;if(t(f))a.state=1,a.buffer=g.getBuffer(g.create(f,34962,!1)),a.type=a.buffer.dtype;else{var q=g.getBuffer(f);if(q)a.state=1,a.buffer=q,a.type=q.dtype;else if(f.constant){var l=f.constant;a.state=2;"number"===typeof l?a.x=l:c.forEach(function(b,c){c<l.length&&(a[b]=l[c])})}else{var q=g.getBuffer(f.buffer),x=f.offset|0,r=f.stride|
0,p=f.size|0,G=!!f.normalized,z=0;"type"in f&&(z=d[f.type]);f=f.divisor|0;a.buffer=q;a.state=1;a.size=p;a.normalized=G;a.type=z||q.dtype;a.offset=x;a.stride=r;a.divisor=f}}m[b]=k(function(b,c){var d=b.attribCache;if(h in d)return d[h];var e={isStream:!1};Object.keys(a).forEach(function(b){e[b]=a[b]});a.buffer&&(e.buffer=b.link(a.buffer));return d[h]=e})});Object.keys(f).forEach(function(b){var d=f[b];m[b]=l(d,function(b,e){function f(b){e(q[b],"=",m,".",b,"|0;")}var m=b.invoke(e,d),h=b.shared,a=h.isBufferArgs,
k=h.buffer,q={isStream:e.def(!1)},l=new ga;l.state=1;Object.keys(l).forEach(function(b){q[b]=e.def(""+l[b])});var x=q.buffer,r=q.type;e("if(",a,"(",m,")){",q.isStream,"=true;",x,"=",k,".createStream(",34962,",",m,");",r,"=",x,".dtype;","}else{",x,"=",k,".getBuffer(",m,");","if(",x,"){",r,"=",x,".dtype;","}else if(",m,".constant){",q.state,"=",2,";",c.map(function(b,c){return q[b]+"="+m+".length>="+c+"?"+m+"["+c+"]:0;"}).join(""),"}else{",x,"=",k,".getBuffer(",m,".buffer);",r,'="type" in ',m,"?",h.glTypes,
"[",m,".type]:",x,".dtype;",q.normalized,"=!!",m,".normalized;");f("size");f("offset");f("stride");f("divisor");e("}}");return q})});return m}function ca(b){var c=b["static"],d=b.dynamic,e={};Object.keys(c).forEach(function(b){var d=c[b];e[b]=k(function(b,c){return"number"===typeof d||"boolean"===typeof d?""+d:b.link(d)})});Object.keys(d).forEach(function(b){var c=d[b];e[b]=l(c,function(b,d){return b.invoke(d,c)})});return e}function ba(b,c,d){var e=b.shared.context,f=b.scope();Object.keys(d).forEach(function(m){c.save(e,
"."+m);f(e,".",m,"=",d[m].append(b,c),";")});c(f)}function ia(b,c,d){var e=b.shared,f=e.gl,m=e.framebuffer,h;za&&(h=c.def(e.extensions,".webgl_draw_buffers"));var a=b.constants,e=a.drawBuffer,a=a.backBuffer;b=d?d.append(b,c):c.def(m,".next");c("if(",m,".dirty||",b,"!==",m,".cur){","if(",b,"){",f,".bindFramebuffer(",36160,",",b,".framebuffer);");za&&c(h,".drawBuffersWEBGL(",e,"[",b,".colorAttachments.length]);");c("}else{",f,".bindFramebuffer(",36160,",null);");za&&c(h,".drawBuffersWEBGL(",a,");");
c("}",m,".cur=",b,";",m,".dirty=false;","}")}function Aa(b,c,d){var e=b.shared,f=e.gl,m=b.current,h=b.next,a=e.current,k=e.next,q=b.cond(a,".dirty");xa.forEach(function(c){c=M(c);if(!(c in d.state)){var e,l;if(c in h){e=h[c];l=m[c];var x=v(ja[c].length,function(b){return q.def(e,"[",b,"]")});q(b.cond(x.map(function(b,c){return b+"!=="+l+"["+c+"]"}).join("||")).then(f,".",la[c],"(",x,");",x.map(function(b,c){return l+"["+c+"]="+b}).join(";"),";"))}else e=q.def(k,".",c),x=b.cond(e,"!==",a,".",c),q(x),
c in ka?x(b.cond(e).then(f,".enable(",ka[c],");")["else"](f,".disable(",ka[c],");"),a,".",c,"=",e,";"):x(f,".",la[c],"(",e,");",a,".",c,"=",e,";")}});0===Object.keys(d.state).length&&q(a,".dirty=false;");c(q)}function ha(b,c,d,e){var m=b.shared,h=b.current,a=m.current,k=m.gl;p(Object.keys(d)).forEach(function(m){var q=d[m];if(!e||e(q)){var l=q.append(b,c);if(ka[m]){var x=ka[m];f(q)?l?c(k,".enable(",x,");"):c(k,".disable(",x,");"):c(b.cond(l).then(k,".enable(",x,");")["else"](k,".disable(",x,");"));
c(a,".",m,"=",l,";")}else if(r(l)){var p=h[m];c(k,".",la[m],"(",l,");",l.map(function(b,c){return p+"["+c+"]="+b}).join(";"),";")}else c(k,".",la[m],"(",l,");",a,".",m,"=",l,";")}})}function da(b,c){ra&&!b.instancing&&(b.instancing=c.def(b.shared.extensions,".angle_instanced_arrays"))}function ea(b,c,d,e,m){function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function a(b){u=c.def();b(u,"=",h(),";");"string"===typeof m?b(x,".count+=",m,";"):b(x,".count++;");K&&(e?(G=
c.def(),b(G,"=",p,".getNumPendingQueries();")):b(p,".beginQuery(",x,");"))}function k(b){b(x,".cpuTime+=",h(),"-",u,";");K&&(e?b(p,".pushScopeStats(",G,",",p,".getNumPendingQueries(),",x,");"):b(p,".endQuery();"))}function q(b){var d=c.def(r,".profile");c(r,".profile=",b,";");c.exit(r,".profile=",d,";")}var l=b.shared,x=b.stats,r=l.current,p=l.timer;d=d.profile;var u,G;if(d){if(f(d)){d.enable?(a(c),k(c.exit),q("true")):q("false");return}d=d.append(b,c);q(d)}else d=c.def(r,".profile");l=b.block();
a(l);c("if(",d,"){",l,"}");b=b.block();k(b);c.exit("if(",d,"){",b,"}")}function fa(d,e,f,m,h){function a(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function k(b,f,m){function h(){e("if(!",r,".pointer){",l,".enableVertexAttribArray(",x,");",r,".pointer=true;}");var b=m.type,c;c=m.size?e.def(m.size,"||",f):f;e("if(",r,".type!==",b,"||",r,".size!==",c,"||",G.map(function(b){return r+"."+
b+"!=="+m[b]}).join("||"),"){",l,".bindBuffer(",34962,",",p,".buffer);",l,".vertexAttribPointer(",[x,c,b,m.normalized,m.stride,m.offset],");",r,".type=",b,";",r,".size=",c,";",G.map(function(b){return r+"."+b+"="+m[b]+";"}).join(""),"}");ra&&(b=m.divisor,e("if(",r,".divisor!==",b,"){",d.instancing,".vertexAttribDivisorANGLE(",[x,b],");",r,".divisor=",b,";}"))}function a(){e("if(",r,".pointer){",l,".disableVertexAttribArray(",x,");",r,".pointer=false;","}if(",c.map(function(b,c){return r+"."+b+"!=="+
u[c]}).join("||"),"){",l,".vertexAttrib4f(",x,",",u,");",c.map(function(b,c){return r+"."+b+"="+u[c]+";"}).join(""),"}")}var l=q.gl,x=e.def(b,".location"),r=e.def(q.attributes,"[",x,"]");b=m.state;var p=m.buffer,u=[m.x,m.y,m.z,m.w],G=["buffer","normalized","offset","stride"];1===b?h():2===b?a():(e("if(",b,"===",1,"){"),h(),e("}else{"),a(),e("}"))}var q=d.shared;m.forEach(function(c){var m=c.name,q=f.attributes[m],l;if(q){if(!h(q))return;l=q.append(d,e)}else{if(!h(b))return;var x=d.scopeAttrib(m);
l={};Object.keys(new ga).forEach(function(b){l[b]=e.def(x,".",b)})}k(d.link(c),a(c.info.type),l)})}function na(c,d,e,m,h){for(var a=c.shared,k=a.gl,q,l=0;l<m.length;++l){var x=m[l],p=x.name,G=x.info.type,z=e.uniforms[p],x=c.link(x)+".location",K;if(z){if(!h(z))continue;if(f(z)){p=z.value;if(35678===G||35680===G)G=c.link(p._texture),d(k,".uniform1i(",x,",",G+".bind());"),d.exit(G,".unbind();");else if(35674===G||35675===G||35676===G)p=c.global.def("new Float32Array(["+Array.prototype.slice.call(p)+
"])"),z=2,35675===G?z=3:35676===G&&(z=4),d(k,".uniformMatrix",z,"fv(",x,",false,",p,");");else{switch(G){case 5126:q="1f";break;case 35664:q="2f";break;case 35665:q="3f";break;case 35666:q="4f";break;case 35670:q="1i";break;case 5124:q="1i";break;case 35671:q="2i";break;case 35667:q="2i";break;case 35672:q="3i";break;case 35668:q="3i";break;case 35673:q="4i";break;case 35669:q="4i"}d(k,".uniform",q,"(",x,",",r(p)?Array.prototype.slice.call(p):p,");")}continue}else K=z.append(c,d)}else{if(!h(b))continue;
K=d.def(a.uniforms,"[",u.id(p),"]")}p=1;switch(G){case 35678:case 35680:G=d.def(K,"._texture");d(k,".uniform1i(",x,",",G,".bind());");d.exit(G,".unbind();");continue;case 5124:case 35670:q="1i";break;case 35667:case 35671:q="2i";p=2;break;case 35668:case 35672:q="3i";p=3;break;case 35669:case 35673:q="4i";p=4;break;case 5126:q="1f";break;case 35664:q="2f";p=2;break;case 35665:q="3f";p=3;break;case 35666:q="4f";p=4;break;case 35674:q="Matrix2fv";break;case 35675:q="Matrix3fv";break;case 35676:q="Matrix4fv"}d(k,
".uniform",q,"(",x,",");if("M"===q.charAt(0)){var x=Math.pow(G-35674+2,2),y=c.global.def("new Float32Array(",x,")");d("false,(Array.isArray(",K,")||",K," instanceof Float32Array)?",K,":(",v(x,function(b){return y+"["+b+"]="+K+"["+b+"]"}),",",y,")")}else 1<p?d(v(p,function(b){return K+"["+b+"]"})):d(K);d(");")}}function oa(b,c,d,e){function m(f){var h=x[f];return h?h.contextDep&&e.contextDynamic||h.propDep?h.append(b,d):h.append(b,c):c.def(l,".",f)}function h(){function b(){d(K,".drawElementsInstancedANGLE(",
[p,u,v,G+"<<(("+v+"-5121)>>1)",z],");")}function c(){d(K,".drawArraysInstancedANGLE(",[p,G,u,z],");")}r?y?b():(d("if(",r,"){"),b(),d("}else{"),c(),d("}")):c()}function a(){function b(){d(q+".drawElements("+[p,u,v,G+"<<(("+v+"-5121)>>1)"]+");")}function c(){d(q+".drawArrays("+[p,G,u]+");")}r?y?b():(d("if(",r,"){"),b(),d("}else{"),c(),d("}")):c()}var k=b.shared,q=k.gl,l=k.draw,x=e.draw,r=function(){var f=x.elements,m=c;if(f){if(f.contextDep&&e.contextDynamic||f.propDep)m=d;f=f.append(b,m)}else f=m.def(l,
".","elements");f&&m("if("+f+")"+q+".bindBuffer(34963,"+f+".buffer.buffer);");return f}(),p=m("primitive"),G=m("offset"),u=function(){var f=x.count,m=c;if(f){if(f.contextDep&&e.contextDynamic||f.propDep)m=d;f=f.append(b,m)}else f=m.def(l,".","count");return f}();if("number"===typeof u){if(0===u)return}else d("if(",u,"){"),d.exit("}");var z,K;ra&&(z=m("instances"),K=b.instancing);var v=r+".type",y=x.elements&&f(x.elements);ra&&("number"!==typeof z||0<=z)?"string"===typeof z?(d("if(",z,">0){"),h(),
d("}else if(",z,"<0){"),a(),d("}")):h():a()}function sa(b,c,d,e,f){c=X();f=c.proc("body",f);ra&&(c.instancing=f.def(c.shared.extensions,".angle_instanced_arrays"));b(c,f,d,e);return c.compile().body}function ta(b,c,d,e){da(b,c);fa(b,c,d,e.attributes,function(){return!0});na(b,c,d,e.uniforms,function(){return!0});oa(b,c,c,d)}function Ba(b,c){var d=b.proc("draw",1);da(b,d);ba(b,d,c.context);ia(b,d,c.framebuffer);Aa(b,d,c);ha(b,d,c.state);ea(b,d,c,!1,!0);var e=c.shader.progVar.append(b,d);d(b.shared.gl,
".useProgram(",e,".program);");if(c.shader.program)ta(b,d,c,c.shader.program);else{var f=b.global.def("{}"),m=d.def(e,".id"),h=d.def(f,"[",m,"]");d(b.cond(h).then(h,".call(this,a0);")["else"](h,"=",f,"[",m,"]=",b.link(function(d){return sa(ta,b,c,d,1)}),"(",e,");",h,".call(this,a0);"))}0<Object.keys(c.state).length&&d(b.shared.current,".dirty=true;")}function ua(b,c,d,e){function f(){return!0}b.batchId="a1";da(b,c);fa(b,c,d,e.attributes,f);na(b,c,d,e.uniforms,f);oa(b,c,c,d)}function va(b,c,d,e){function f(b){return b.contextDep&&
h||b.propDep}function m(b){return!f(b)}da(b,c);var h=d.contextDep,a=c.def(),k=c.def();b.shared.props=k;b.batchId=a;var q=b.scope(),l=b.scope();c(q.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",k,"=","a0","[",a,"];",l,"}",q.exit);d.needsContext&&ba(b,l,d.context);d.needsFramebuffer&&ia(b,l,d.framebuffer);ha(b,l,d.state,f);d.profile&&f(d.profile)&&ea(b,l,d,!1,!0);e?(fa(b,q,d,e.attributes,m),fa(b,l,d,e.attributes,f),na(b,q,d,e.uniforms,m),na(b,l,d,e.uniforms,f),oa(b,q,l,d)):(c=b.global.def("{}"),e=d.shader.progVar.append(b,
l),k=l.def(e,".id"),q=l.def(c,"[",k,"]"),l(b.shared.gl,".useProgram(",e,".program);","if(!",q,"){",q,"=",c,"[",k,"]=",b.link(function(c){return sa(ua,b,d,c,2)}),"(",e,");}",q,".call(this,a0[",a,"],",a,");"))}function pa(b,c){function d(b){return b.contextDep&&f||b.propDep}var e=b.proc("batch",2);b.batchId="0";da(b,e);var f=!1,m=!0;Object.keys(c.context).forEach(function(b){f=f||c.context[b].propDep});f||(ba(b,e,c.context),m=!1);var h=c.framebuffer,a=!1;h?(h.propDep?f=a=!0:h.contextDep&&f&&(a=!0),
a||ia(b,e,h)):ia(b,e,null);c.state.viewport&&c.state.viewport.propDep&&(f=!0);Aa(b,e,c);ha(b,e,c.state,function(b){return!d(b)});c.profile&&d(c.profile)||ea(b,e,c,!1,"a1");c.contextDep=f;c.needsContext=m;c.needsFramebuffer=a;m=c.shader.progVar;if(m.contextDep&&f||m.propDep)va(b,e,c,null);else if(m=m.append(b,e),e(b.shared.gl,".useProgram(",m,".program);"),c.shader.program)va(b,e,c,c.shader.program);else{var h=b.global.def("{}"),a=e.def(m,".id"),q=e.def(h,"[",a,"]");e(b.cond(q).then(q,".call(this,a0,a1);")["else"](q,
"=",h,"[",a,"]=",b.link(function(d){return sa(va,b,c,d,2)}),"(",m,");",q,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&e(b.shared.current,".dirty=true;")}function wa(b,c){function d(m){var h=c.shader[m];h&&e.set(f.shader,"."+m,h.append(b,e))}var e=b.proc("scope",3);b.batchId="a2";var f=b.shared,m=f.current;ba(b,e,c.context);c.framebuffer&&c.framebuffer.append(b,e);p(Object.keys(c.state)).forEach(function(d){var m=c.state[d].append(b,e);r(m)?m.forEach(function(c,f){e.set(b.next[d],"["+f+"]",
c)}):e.set(f.next,"."+d,m)});ea(b,e,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var m=c.draw[d];m&&e.set(f.draw,"."+d,""+m.append(b,e))});Object.keys(c.uniforms).forEach(function(d){e.set(f.uniforms,"["+u.id(d)+"]",c.uniforms[d].append(b,e))});Object.keys(c.attributes).forEach(function(d){var f=c.attributes[d].append(b,e),m=b.scopeAttrib(d);Object.keys(new ga).forEach(function(b){e.set(m,"."+b,f[b])})});d("vert");d("frag");0<Object.keys(c.state).length&&(e(m,
".dirty=true;"),e.exit(m,".dirty=true;"));e("a1(",b.shared.context,",a0,0);")}var ga=H.Record,ma={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(ma.min=32775,ma.max=32776);var ra=w.angle_instanced_arrays,za=w.webgl_draw_buffers,ja={dirty:!0,profile:N.profile},qa={},xa=[],ka={},la={};Q("dither",3024);Q("blend.enable",3042);S("blend.color","blendColor",[0,0,0,0]);S("blend.equation","blendEquationSeparate",[32774,32774]);S("blend.func","blendFuncSeparate",[1,0,1,0]);Q("depth.enable",
2929,!0);S("depth.func","depthFunc",513);S("depth.range","depthRange",[0,1]);S("depth.mask","depthMask",!0);S("colorMask","colorMask",[!0,!0,!0,!0]);Q("cull.enable",2884);S("cull.face","cullFace",1029);S("frontFace","frontFace",2305);S("lineWidth","lineWidth",1);Q("polygonOffset.enable",32823);S("polygonOffset.offset","polygonOffset",[0,0]);Q("sample.alpha",32926);Q("sample.enable",32928);S("sample.coverage","sampleCoverage",[1,!1]);Q("stencil.enable",2960);S("stencil.mask","stencilMask",-1);S("stencil.func",
"stencilFunc",[519,0,-1]);S("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);S("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Q("scissor.enable",3089);S("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);S("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ca={gl:a,context:G,strings:u,next:qa,current:ja,draw:P,elements:n,buffer:g,shader:J,attributes:H.state,uniforms:L,framebuffer:D,extensions:w,timer:K,isBufferArgs:t},ya={primTypes:h,
compareFuncs:q,blendFuncs:m,blendEquations:ma,stencilOps:z,glTypes:d,orientationType:C};za&&(ya.backBuffer=[1029],ya.drawBuffer=v(A.maxDrawbuffers,function(b){return 0===b?[0]:v(b,function(b){return 36064+b})}));var Da=0;return{next:qa,current:ja,procs:function(){var b=X(),c=b.proc("poll"),d=b.proc("refresh"),e=b.block();c(e);d(e);var f=b.shared,m=f.gl,h=f.next,a=f.current;e(a,".dirty=false;");ia(b,c);d(f.framebuffer,".dirty=true;");ia(b,d);Object.keys(ka).forEach(function(f){var q=ka[f],k=e.def(h,
".",f),l=b.block();l("if(",k,"){",m,".enable(",q,")}else{",m,".disable(",q,")}",a,".",f,"=",k,";");d(l);c("if(",k,"!==",a,".",f,"){",l,"}")});Object.keys(la).forEach(function(f){var q=la[f],k=ja[f],l,x,p=b.block();p(m,".",q,"(");r(k)?(q=k.length,l=b.global.def(h,".",f),x=b.global.def(a,".",f),p(v(q,function(b){return l+"["+b+"]"}),");",v(q,function(b){return x+"["+b+"]="+l+"["+b+"];"}).join("")),c("if(",v(q,function(b){return l+"["+b+"]!=="+x+"["+b+"]"}).join("||"),"){",p,"}")):(l=e.def(h,".",f),
x=e.def(a,".",f),p(l,");",a,".",f,"=",l,";"),c("if(",l,"!==",x,"){",p,"}"));d(p)});return b.compile()}(),compile:function(b,c,d,e,f){var m=X();m.stats=m.link(f);f=Y(b);var h=T(b,f),a=U(b),q=R(b),k=V(b),l=h.viewport;l&&(q.viewport=l);l=M("scissor.box");(h=h[l])&&(q[l]=h);h=0<Object.keys(q).length;f={framebuffer:f,draw:a,shader:k,state:q,dirty:h};f.profile=W(b);f.uniforms=Z(d);f.attributes=aa(c);f.context=ca(e);Ba(m,f);wa(m,f);pa(m,f);return m.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(a,g,n){function t(e,a){this.id=f++;this.type=e;this.data=a}function p(e){if(0===e.length)return[];var f=e.charAt(0),a=e.charAt(e.length-1);if(1<e.length&&f===a&&('"'===f||"'"===f))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return p(e.substr(0,f.index)).concat(p(f[1])).concat(p(e.substr(f.index+
f[0].length)));f=e.split(".");if(1===f.length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];e=[];for(a=0;a<f.length;++a)e=e.concat(p(f[a]));return e}function e(e){return"["+p(e).join("][")+"]"}var f=0;g.exports={define:function(f,a){switch(typeof a){case "boolean":case "number":case "string":return new t(f,e(a+""));case "undefined":return new t(f|128,null)}},isDynamic:function(e){return"function"===typeof e&&!e._reglType||e instanceof t},unbox:function(f,a){if(f instanceof t){if(f.type&
128)return new t(f.type&-129,e(a))}else if("function"===typeof f)return new t(0,f);return f},accessor:e}},{}],10:[function(a,g,n){var t=a("./util/is-typed-array"),p=a("./util/is-ndarray"),e=a("./util/values"),f=a("./constants/primitives.json"),k=a("./constants/usage.json");g.exports=function(a,y,v,w){function u(e){this.id=c++;d[this.id]=this;this.buffer=e;this.primType=4;this.type=this.vertCount=0}function r(c,d,b,e,f,m,h){(m=h)||t(d)&&(!p(d)||t(d.data))||(m=y.oes_element_index_uint?5125:5123);c.buffer.bind();
v._initBuffer(c.buffer,d,b,m,3);d=h;if(!h){switch(c.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;break;case 5125:case 5124:d=5125}c.buffer.dtype=d}c.type=d;0>f&&(f=c.buffer.byteLength,5123===d?f>>=1:5125===d&&(f>>=2));c.vertCount=f;f=e;0>e&&(f=4,e=c.buffer.dimension,1===e&&(f=0),2===e&&(f=1),3===e&&(f=4));c.primType=f}function h(c){w.elementsCount--;delete d[c.id];c.buffer.destroy();c.buffer=null}var d={},c=0,m={uint8:5121,uint16:5123};y.oes_element_index_uint&&(m.uint32=
5125);u.prototype.bind=function(){this.buffer.bind()};var q=[];return{create:function(c){function d(c){if(c)if("number"===typeof c)b(c),e.primType=4,e.vertCount=c|0,e.type=5121;else{var h=null,q=35044,u=-1,z=-1,v=0,y=0;Array.isArray(c)||t(c)||p(c)?h=c:("data"in c&&(h=c.data),"usage"in c&&(q=k[c.usage]),"primitive"in c&&(u=f[c.primitive]),"count"in c&&(z=c.count|0),"length"in c&&(v=c.length|0),"type"in c&&(y=m[c.type]));h?r(e,h,q,u,z,v,y):(c=e.buffer,c.bind(),a.bufferData(34963,v,q),c.dtype=y||5121,
c.usage=q,c.dimension=3,c.byteLength=v,e.primType=0>u?4:u,e.vertCount=0>z?0:z,e.type=c.dtype)}else b(),e.primType=4,e.vertCount=0,e.type=5121;return d}var b=v.create(null,34963,!0),e=new u(b._buffer);w.elementsCount++;d(c);d._reglType="elements";d._elements=e;d.subdata=function(c,e){b.subdata(c,e);return d};d.destroy=function(){h(e)};return d},createStream:function(c){var d=q.pop();d||(d=new u(v.create(null,34963,!0)._buffer));r(d,c,35040,-1,-1,0,0);return d},destroyStream:function(c){q.push(c)},
getElements:function(c){return"function"===typeof c&&c._elements instanceof u?c._elements:null},clear:function(){e(d).forEach(h)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(a,g,n){g.exports=function(a,p){function e(e){e=e.toLowerCase();if(e in f)return!0;var l;try{l=f[e]=a.getExtension(e)}catch(k){}return!!l}for(var f={},k=0;k<p.extensions.length;++k){var l=p.extensions[k];if(!e(l))return p.onDestroy(),
p.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}p.optionalExtensions.forEach(e);return{extensions:f,refresh:function(){p.extensions.forEach(e);p.optionalExtensions.forEach(e)}}}},{}],12:[function(a,g,n){var t=a("./util/values"),p=a("./util/extend"),e=[];e[6406]=1;e[6409]=1;e[6410]=2;e[6407]=3;e[6408]=4;var f=[];f[5121]=1;f[5126]=4;f[36193]=2;g.exports=function(a,l,y,v,w,u){function r(b,c,d){this.target=b;this.texture=
c;this.renderbuffer=d;var e=b=0;c?(b=c.width,e=c.height):d&&(b=d.width,e=d.height);this.width=b;this.height=e}function h(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function d(b,c,d){b&&(b.texture?b.texture._texture.refCount+=1:b.renderbuffer._renderbuffer.refCount+=1)}function c(b,c){c?c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer):
a.framebufferTexture2D(36160,b,3553,null,0)}function m(b){var c=3553,d=null,e=null,f=b;"object"===typeof b&&(f=b.data);b=f._reglType;"texture2d"===b?d=f:"textureCube"===b?d=f:"renderbuffer"===b&&(e=f,c=36161);return new r(c,d,e)}function q(b,c,d,e,f){if(d)return b=v.create2D({width:b,height:c,format:e,type:f}),b._texture.refCount=0,new r(3553,b,null);b=w.create({width:b,height:c,format:e});b._renderbuffer.refCount=0;return new r(36161,null,b)}function z(b){return b&&(b.texture||b.renderbuffer)}function C(b,
c,d){b&&(b.texture?b.texture.resize(c,d):b.renderbuffer&&b.renderbuffer.resize(c,d))}function b(){this.id=D++;L[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function x(b){b.colorAttachments.forEach(h);h(b.depthAttachment);h(b.stencilAttachment);h(b.depthStencilAttachment)}function E(b){a.deleteFramebuffer(b.framebuffer);b.framebuffer=null;u.framebufferCount--;delete L[b.id]}
function I(b){var d;a.bindFramebuffer(36160,b.framebuffer);var e=b.colorAttachments;for(d=0;d<e.length;++d)c(36064+d,e[d]);for(d=e.length;d<y.maxColorAttachments;++d)c(36064+d,null);c(36096,b.depthAttachment);c(36128,b.stencilAttachment);c(33306,b.depthStencilAttachment);a.checkFramebufferStatus(36160);a.bindFramebuffer(36160,A.next);A.current=A.next}var A={current:null,next:null,dirty:!1},g=["rgba"],n=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&n.push("srgba");l.ext_color_buffer_half_float&&n.push("rgba16f",
"rgb16f");l.webgl_color_buffer_float&&n.push("rgba32f");var F=["uint8"];l.oes_texture_half_float&&F.push("half float");l.oes_texture_float&&F.push("float");var D=0,L={};return p(A,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof b)?c:null},create:function(c,h){function a(b,c){var h,r=0,p=0,u=!0,v=!0;h=null;var y=!0,w="rgba",t="uint8",C=1,E=null,A=null,D=null,F=!1;if("number"===typeof b)r=b|0,p=c|0||r;else if(b){"shape"in b?(p=b.shape,
r=p[0],p=p[1]):("radius"in b&&(r=p=b.radius),"width"in b&&(r=b.width),"height"in b&&(p=b.height));if("color"in b||"colors"in b)h=b.color||b.colors,Array.isArray(h);h||("colorCount"in b&&(C=b.colorCount|0),"colorTexture"in b&&(y=!!b.colorTexture,w="rgba4"),"colorType"in b&&(t=b.colorType,y||("half float"===t?l.ext_color_buffer_half_float&&(w="rgba16f"):"float"===t&&l.webgl_color_buffer_float&&(w="rgba32f"))),"colorFormat"in b&&(w=b.colorFormat,0<=g.indexOf(w)?y=!0:0<=n.indexOf(w)&&(y=!1)));if("depthTexture"in
b||"depthStencilTexture"in b)F=!(!b.depthTexture&&!b.depthStencilTexture);"depth"in b&&("boolean"===typeof b.depth?u=b.depth:(E=b.depth,v=!1));"stencil"in b&&("boolean"===typeof b.stencil?v=b.stencil:(A=b.stencil,u=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?u=v=b.depthStencil:(D=b.depthStencil,v=u=!1))}else r=p=1;var H=null,J=null,L=null,ha=null;if(Array.isArray(h))H=h.map(m);else if(h)H=[m(h)];else for(H=Array(C),h=0;h<C;++h)H[h]=q(r,p,y,w,t);r=r||H[0].width;p=p||H[0].height;E?J=
m(E):u&&!v&&(J=q(r,p,F,"depth","uint32"));A?L=m(A):v&&!u&&(L=q(r,p,!1,"stencil","uint8"));D?ha=m(D):!E&&!A&&v&&u&&(ha=q(r,p,F,"depth stencil","depth stencil"));u=null;for(h=0;h<H.length;++h)d(H[h],r,p),H[h]&&H[h].texture&&(v=e[H[h].texture._texture.format]*f[H[h].texture._texture.type],null===u&&(u=v));d(J,r,p);d(L,r,p);d(ha,r,p);x(k);k.width=r;k.height=p;k.colorAttachments=H;k.depthAttachment=J;k.stencilAttachment=L;k.depthStencilAttachment=ha;a.color=H.map(z);a.depth=z(J);a.stencil=z(L);a.depthStencil=
z(ha);a.width=k.width;a.height=k.height;I(k);return a}var k=new b;u.framebufferCount++;a(c,h);a.resize=function(b,c){var d=b|0,e=c|0||d;if(d===k.width&&e===k.height)return a;for(var f=k.colorAttachments,m=0;m<f.length;++m)C(f[m],d,e);C(k.depthAttachment,d,e);C(k.stencilAttachment,d,e);C(k.depthStencilAttachment,d,e);k.width=a.width=d;k.height=a.height=e;I(k);return a};a._reglType="framebuffer";a._framebuffer=k;a.destroy=function(){E(k);x(k)};return a},clear:function(){t(L).forEach(E)}})}},{"./util/extend":23,
"./util/values":31}],13:[function(a,g,n){g.exports=function(a,p){var e=1;p.ext_texture_filter_anisotropic&&(e=a.getParameter(34047));var f=1,k=1;p.webgl_draw_buffers&&(f=a.getParameter(34852),k=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(p).filter(function(e){return!!p[e]}),maxAnisotropic:e,maxDrawbuffers:f,
maxColorAttachments:k,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),
glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,g,n){var t=a("./util/is-typed-array");g.exports=function(a,e,f){return function(k){var l=0,y=0,v=f.framebufferWidth,w=f.framebufferHeight,u=null;t(k)?u=k:2===arguments.length?(v=arguments[0]|0,w=arguments[1]|0):k&&(l=k.x|0,y=k.y|0,v=k.width||f.framebufferWidth,w=k.height||f.framebufferHeight,u=k.data||null);e();u=u||new Uint8Array(v*w*4);a.pixelStorei(3333,4);a.readPixels(l,
y,v,w,6408,5121,u);return u}}},{"./util/is-typed-array":26}],15:[function(a,g,n){var t=a("./util/values");g.exports=function(a,e,f,k){function l(e){this.id=w++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=this.width=0}function y(e){var f=e.renderbuffer;a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(f);e.renderbuffer=null;e.refCount=0;delete u[e.id];k.renderbufferCount--}var v={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&
(v.srgba=35907);e.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);e.webgl_color_buffer_float&&(v.rgba32f=34836);var w=0,u={};l.prototype.decRef=function(){0>=--this.refCount&&y(this)};return{create:function(e,f){function d(e,f){var h=0,k=0,b=32854;"object"===typeof e&&e?("shape"in e?(k=e.shape,h=k[0]|0,k=k[1]|0):("radius"in e&&(h=k=e.radius|0),"width"in e&&(h=e.width|0),"height"in e&&(k=e.height|0)),"format"in e&&(b=v[e.format])):"number"===typeof e?(h=e|0,k="number"===typeof f?f|0:
h):e||(h=k=1);if(h!==c.width||k!==c.height||b!==c.format)return d.width=c.width=h,d.height=c.height=k,c.format=b,a.bindRenderbuffer(36161,c.renderbuffer),a.renderbufferStorage(36161,b,h,k),d}var c=new l(a.createRenderbuffer());u[c.id]=c;k.renderbufferCount++;d(e,f);d.resize=function(e,f){var h=e|0,k=f|0||h;if(h===c.width&&k===c.height)return d;d.width=c.width=h;d.height=c.height=k;a.bindRenderbuffer(36161,c.renderbuffer);a.renderbufferStorage(36161,c.format,h,k);return d};d._reglType="renderbuffer";
d._renderbuffer=c;d.destroy=function(){c.decRef()};return d},clear:function(){t(u).forEach(y)}}}},{"./util/values":31}],16:[function(a,g,n){var t=a("./util/values");g.exports=function(a,e,f){function k(c,d,e,f){this.name=c;this.id=d;this.location=e;this.info=f}function l(c,d){for(var e=0;e<c.length;++e)if(c[e].id===d.id){c[e].location=d.location;return}c.push(d)}function y(c,d,f){f=35632===c?w:u;var h=f[d];if(!h){var k=e.str(d),h=a.createShader(c);a.shaderSource(h,k);a.compileShader(h);f[d]=h}return h}
function v(c,e){this.id=d++;this.fragId=c;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[]}var w={},u={},r={},h=[],d=0;return{clear:function(){var c=a.deleteShader.bind(a);t(w).forEach(c);w={};t(u).forEach(c);u={};h.forEach(function(c){a.deleteProgram(c.program)});h.length=0;r={};f.shaderCount=0},program:function(c,d,q){f.shaderCount++;(q=r[d])||(q=r[d]={});var u=q[c];if(!u){var w=u=new v(d,c),b,x;b=y(35632,w.fragId);x=y(35633,w.vertId);d=w.program=a.createProgram();a.attachShader(d,
b);a.attachShader(d,x);a.linkProgram(d);var t=a.getProgramParameter(d,35718),I=w.uniforms;for(b=0;b<t;++b)if(x=a.getActiveUniform(d,b))if(1<x.size)for(var A=0;A<x.size;++A){var g=x.name.replace("[0]","["+A+"]");l(I,new k(g,e.id(g),a.getUniformLocation(d,g),x))}else l(I,new k(x.name,e.id(x.name),a.getUniformLocation(d,x.name),x));t=a.getProgramParameter(d,35721);w=w.attributes;for(b=0;b<t;++b)(x=a.getActiveAttrib(d,b))&&l(w,new k(x.name,e.id(x.name),a.getAttribLocation(d,x.name),x));q[c]=u;h.push(u)}return u},
shader:y,frag:null,vert:null}}},{"./util/values":31}],17:[function(a,g,n){g.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0}}},{}],18:[function(a,g,n){g.exports=function(){var a={"":0},p=[""];return{id:function(e){var f=a[e];if(f)return f;f=a[e]=p.length;p.push(e);return f},str:function(e){return p[e]}}}},{}],19:[function(a,g,n){function t(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function p(c){return Array.isArray(c)&&
0!==c.length&&h(c[0])?!0:!1}function e(c){return Object.prototype.toString.call(c)}function f(c){if(!c)return!1;var b=e(c);return 0<=z.indexOf(b)?!0:t(c)||p(c)||w(c)}function k(c,b){36193===c.type?(c.data=r(b),u.freeType(b)):c.data=b}var l=a("./util/extend"),y=a("./util/values"),v=a("./util/is-typed-array"),w=a("./util/is-ndarray"),u=a("./util/pool"),r=a("./util/to-half-float"),h=a("./util/is-array-like");n=a("./constants/arraytypes.json");var d=a("./constants/arraytypes.json"),c=[9984,9986,9985,
9987],m=[0,6409,6410,6407,6408],q={};q[6409]=q[6406]=q[6402]=1;q[34041]=q[6410]=2;q[6407]=3;q[6408]=4;var z=Object.keys(n).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]);g.exports=function(a,b,x,z,I,A){function g(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function n(b,c){b.internalformat=
c.internalformat;b.format=c.format;b.type=c.type;b.compressed=c.compressed;b.premultiplyAlpha=c.premultiplyAlpha;b.flipY=c.flipY;b.unpackAlignment=c.unpackAlignment;b.colorSpace=c.colorSpace;b.width=c.width;b.height=c.height;b.channels=c.channels}function F(b,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(b.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(b.flipY=c.flipY);"alignment"in c&&(b.unpackAlignment=c.alignment);"colorSpace"in c&&(b.colorSpace=ha[c.colorSpace]);"type"in c&&(b.type=
da[c.type]);var d=b.width,e=b.height,f=b.channels,a=!1;"shape"in c?(d=c.shape[0],e=c.shape[1],3===c.shape.length&&(f=c.shape[2],a=!0)):("radius"in c&&(d=e=c.radius),"width"in c&&(d=c.width),"height"in c&&(e=c.height),"channels"in c&&(f=c.channels,a=!0));b.width=d|0;b.height=e|0;b.channels=f|0;d=!1;"format"in c&&(d=c.format,e=b.internalformat=ea[d],b.format=sa[e],d in da&&!("type"in c)&&(b.type=da[d]),d in fa&&(b.compressed=!0),d=!0);!a&&d?b.channels=q[b.format]:a&&!d&&b.channels!==m[b.format]&&(b.format=
b.internalformat=m[b.channels])}}function D(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function L(){g.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function H(b,c){var a=null;f(c)?a=c:c&&(F(b,c),"x"in c&&(b.xOffset=c.x|0),"y"in c&&(b.yOffset=c.y|0),f(c.data)&&(a=c.data));if(c.copy){var q=I.viewportWidth,l=I.viewportHeight;b.width=b.width||
q-b.xOffset;b.height=b.height||l-b.yOffset;b.needsCopy=!0}else if(!a)b.width=b.width||1,b.height=b.height||1;else if(v(a))b.data=a,"type"in c||5121!==b.type||(b.type=d[Object.prototype.toString.call(a)]|0);else if(t(a)){q=a;l=b.width*b.height*b.channels;switch(b.type){case 5121:case 5123:case 5125:case 5126:l=u.allocType(b.type,l);l.set(q);b.data=l;break;case 36193:b.data=r(q)}b.alignment=1;b.needsFree=!0}else if(w(a)){q=a.data;Array.isArray(q)||5121!==b.type||(b.type=d[Object.prototype.toString.call(q)]|
0);var l=a.shape,x=a.stride,G,z,y,K;3===l.length?(y=l[2],K=x[2]):K=y=1;G=l[0];z=l[1];l=x[0];x=x[1];b.alignment=1;b.width=G;b.height=z;b.channels=y;b.format=b.internalformat=m[y];b.needsFree=!0;G=K;a=a.offset;y=b.width;K=b.height;z=b.channels;for(var E=u.allocType(36193===b.type?5126:b.type,y*K*z),A=0,C=0;C<K;++C)for(var g=0;g<y;++g)for(var N=0;N<z;++N)E[A++]=q[l*g+x*C+G*N+a];k(b,E)}else if("[object HTMLCanvasElement]"===e(a)||"[object CanvasRenderingContext2D]"===e(a))"[object HTMLCanvasElement]"===
e(a)?b.element=a:b.element=a.canvas,b.width=b.element.width,b.height=b.element.height;else if("[object HTMLImageElement]"===e(a))b.element=a,b.width=a.naturalWidth,b.height=a.naturalHeight;else if("[object HTMLVideoElement]"===e(a))b.element=a,b.width=a.videoWidth,b.height=a.videoHeight,b.needsPoll=!0;else if(p(a)){q=a[0].length;l=a.length;x=1;if(h(a[0][0])){G=x=a[0][0].length;y=u.allocType(36193===b.type?5126:b.type,q*l*G);for(z=K=0;z<l;++z)for(E=a[z],A=0;A<q;++A)for(C=E[A],g=0;g<G;++g)y[K++]=C[g];
k(b,y)}else{G=u.allocType(36193===b.type?5126:b.type,q*l);for(K=y=0;K<l;++K)for(z=a[K],E=0;E<q;++E)G[y++]=z[E];k(b,G)}b.alignment=1;b.width=q;b.height=l;b.channels=x;b.format=b.internalformat=m[x];b.needsFree=!0}}function J(b,c,d,e,f){var m=b.element,h=b.data,q=b.internalformat,k=b.format,l=b.type,x=b.width,r=b.height;D(b);m?a.texSubImage2D(c,f,d,e,k,l,m):b.compressed?a.compressedTexSubImage2D(c,f,d,e,q,x,r,h):b.needsCopy?(z(),a.copyTexSubImage2D(c,f,d,e,b.xOffset,b.yOffset,x,r)):a.texSubImage2D(c,
f,d,e,x,r,k,l,h)}function P(){return ta.pop()||new L}function G(b){b.needsFree&&u.freeType(b.data);L.call(b);ta.push(b)}function K(){g.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function N(b,c,d){var e=b.images[0]=P();b.mipmask=1;e.width=b.width=c;e.height=b.height=d}function M(b,c){var d=null;if(f(c))d=b.images[0]=P(),n(d,b),H(d,c),b.mipmask=1;else if(F(b,c),Array.isArray(c.mipmap))for(var e=c.mipmap,a=0;a<e.length;++a)d=b.images[a]=P(),n(d,b),d.width>>=
a,d.height>>=a,H(d,e[a]),b.mipmask|=1<<a;else d=b.images[0]=P(),n(d,b),H(d,c),b.mipmask=1;n(b,b.images[0])}function Q(b,c){for(var d=b.images,e=0;e<d.length&&d[e];++e){var f=d[e],m=c,h=e,q=f.element,k=f.data,l=f.internalformat,x=f.format,r=f.type,u=f.width,p=f.height;D(f);q?a.texImage2D(m,h,x,x,r,q):f.compressed?a.compressedTexImage2D(m,h,l,u,p,0,k):f.needsCopy?(z(),a.copyTexImage2D(m,h,x,f.xOffset,f.yOffset,u,p,0)):a.texImage2D(m,h,x,u,p,0,x,r,k)}}function S(){var b=Ba.pop()||new K;g.call(b);for(var c=
b.mipmask=0;16>c;++c)b.images[c]=null;return b}function X(b){for(var c=b.images,d=0;d<c.length;++d)c[d]&&G(c[d]),c[d]=null;Ba.push(b)}function W(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Y(b,d){"min"in d&&(b.minFilter=Aa[d.min],0<=c.indexOf(b.minFilter)&&(b.genMipmaps=!0));"mag"in d&&(b.magFilter=ia[d.mag]);var e=b.wrapS,f=b.wrapT;if("wrap"in d){var a=d.wrap;"string"===typeof a?e=f=ba[a]:Array.isArray(a)&&(e=
ba[a[0]],f=ba[a[1]])}else"wrapS"in d&&(e=ba[d.wrapS]),"wrapT"in d&&(f=ba[d.wrapT]);b.wrapS=e;b.wrapT=f;"anisotropic"in d&&(b.anisotropic=d.anisotropic);if("mipmap"in d){e=!1;switch(typeof d.mipmap){case "string":b.mipmapHint=ca[d.mipmap];e=b.genMipmaps=!0;break;case "boolean":e=b.genMipmaps=d.mipmap;break;case "object":b.genMipmaps=!1,e=!0}!e||"min"in d||(b.minFilter=9984)}}function T(c,d){a.texParameteri(d,10241,c.minFilter);a.texParameteri(d,10240,c.magFilter);a.texParameteri(d,10242,c.wrapS);a.texParameteri(d,
10243,c.wrapT);b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function V(){var b=ua.pop()||new W;W.call(b);return b}function U(b){g.call(this);this.mipmask=0;this.internalformat=6408;this.id=va++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0}function R(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function Z(){var b=ga[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function aa(b){var c=b.texture,d=b.unit,e=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(e,null),ga[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete pa[b.id];A.textureCount--}var ca={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ba={repeat:10497,clamp:33071,mirror:33648},ia={nearest:9728,linear:9729},Aa=l({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,
mipmap:9987},ia),ha={none:0,browser:37444},da={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ea={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},fa={};b.ext_srgb&&(ea.srgb=35904,ea.srgba=35906);b.oes_texture_float&&(da["float"]=5126);b.oes_texture_half_float&&(da.float16=da["half float"]=36193);b.webgl_depth_texture&&(l(ea,{depth:6402,"depth stencil":34041}),l(da,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&
l(fa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&l(fa,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&l(fa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(fa["rgb etc1"]=36196);var na=Array.prototype.slice.call(a.getParameter(34467));Object.keys(fa).forEach(function(b){var c=
fa[b];0<=na.indexOf(c)&&(ea[b]=c)});var oa=Object.keys(ea);x.textureFormats=oa;var sa=oa.reduce(function(b,c){var d=ea[c];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?b[d]=d:32855===d||0<=c.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{}),ta=[],Ba=[],ua=[],va=0,pa={},wa=x.maxTextureUnits,ga=Array(wa).map(function(){return null});l(U.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<wa;++c){var d=ga[c];if(d){if(0<d.bindCount)continue;d.unit=-1}ga[c]=
this;b=c;break}this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&aa(this)}});return{create2D:function(b,c){function d(b,c){var f=V(),a=S();"number"===typeof b?"number"===typeof c?N(a,b|0,c|0):N(a,b|0,b|0):b?(Y(f,b),M(a,b)):N(a,1,1);f.genMipmaps&&(a.mipmask=(a.width<<1)-1);e.mipmask=a.mipmask;n(e,a);e.internalformat=a.internalformat;d.width=a.width;d.height=a.height;R(e);Q(a,3553);T(f,3553);
Z();ua.push(f);X(a);return d}var e=new U(3553);pa[e.id]=e;A.textureCount++;d(b,c);d.subimage=function(b,c,f,a){c|=0;f|=0;a|=0;var m=P();n(m,e);m.width>>=a;m.height>>=a;m.width-=c;m.height-=f;H(m,b);R(e);J(m,3553,c,f,a);Z();G(m);return d};d.resize=function(b,c){var f=b|0,m=c|0||f;if(f===e.width&&m===e.height)return d;d.width=e.width=f;d.height=e.height=m;R(e);a.texImage2D(3553,0,e.format,f,m,0,e.format,e.type,null);Z();return d};d._reglType="texture2d";d._texture=e;d.destroy=function(){e.decRef()};
return d},createCube:function(b,c,d,e,f,m){function h(b,c,d,e,f,a){var m,l=V();for(m=0;6>m;++m)k[m]=S();if("number"===typeof b||!b)for(b=b|0||1,m=0;6>m;++m)N(k[m],b,b);else if("object"===typeof b)if(c)M(k[0],b),M(k[1],c),M(k[2],d),M(k[3],e),M(k[4],f),M(k[5],a);else if(Y(l,b),F(q,b),"faces"in b)for(b=b.faces,m=0;6>m;++m)n(k[m],q),M(k[m],b[m]);else for(m=0;6>m;++m)M(k[m],b);n(q,k[0]);q.mipmask=l.genMipmaps?(k[0].width<<1)-1:k[0].mipmask;q.internalformat=k[0].internalformat;h.width=k[0].width;h.height=
k[0].height;R(q);for(m=0;6>m;++m)Q(k[m],34069+m);T(l,34067);Z();ua.push(l);for(m=0;6>m;++m)X(k[m]);return h}var q=new U(34067);pa[q.id]=q;A.cubeCount++;var k=Array(6);h(b,c,d,e,f,m);h.subimage=function(b,c,d,e,f){d|=0;e|=0;f|=0;var a=P();n(a,q);a.width>>=f;a.height>>=f;a.width-=d;a.height-=e;H(a,c);R(q);J(a,34069+b,d,e,f);Z();G(a);return h};h.resize=function(b,c){var d=b|0,e=c|0||d;if(d===q.width&&e===q.height)return h;h.width=q.width=d;h.height=q.height=e;R(q);for(var f=0;6>f;++f)a.texImage2D(34069+
f,0,q.format,d,e,0,q.format,q.type,null);Z();return h};h._reglType="textureCube";h._texture=q;h.destroy=function(){q.decRef()};return h},clear:function(){for(var b=0;b<wa;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ga[b]=null;y(pa).forEach(aa);A.cubeCount=0;A.textureCount=0},getTexture:function(b){return null}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],
20:[function(a,g,n){g.exports=function(a,p){function e(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function f(f,d,c){var a=v.pop()||new e;a.startQueryIndex=f;a.endQueryIndex=d;a.sum=0;a.stats=c;w.push(a)}var k=p.ext_disjoint_timer_query;if(!k)return null;var l=[],y=[],v=[],w=[],u=[],r=[];return{beginQuery:function(e){var d=l.pop()||k.createQueryEXT();k.beginQueryEXT(35007,d);y.push(d);f(y.length-1,y.length,e)},endQuery:function(){k.endQueryEXT(35007)},pushScopeStats:f,
update:function(){var e,d;e=y.length;if(0!==e){r.length=Math.max(r.length,e+1);u.length=Math.max(u.length,e+1);u[0]=0;var c=r[0]=0;for(d=e=0;d<y.length;++d){var f=y[d];k.getQueryObjectEXT(f,34919)?(c+=k.getQueryObjectEXT(f,34918),l.push(f)):y[e++]=f;u[d+1]=c;r[d+1]=e}y.length=e;for(d=e=0;d<w.length;++d){var c=w[d],a=c.startQueryIndex,f=c.endQueryIndex;c.sum+=u[f]-u[a];a=r[a];f=r[f];f===a?(c.stats.gpuTime+=c.sum/1E6,v.push(c)):(c.startQueryIndex=a,c.endQueryIndex=f,w[e++]=c)}w.length=e}},getNumPendingQueries:function(){return y.length},
clear:function(){l.push.apply(l,y);for(var e=0;e<l.length;e++)k.deleteQueryEXT(l[e]);y.length=0;l.length=0}}}},{}],21:[function(a,g,n){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(a,g,n){function t(e){return Array.prototype.slice.call(e)}function p(e){return t(e).join("")}var e=a("./extend");g.exports=function(){function f(){var f=[],a=[];return e(function(){f.push.apply(f,t(arguments))},{def:function(){var d=
"v"+l++;a.push(d);0<arguments.length&&(f.push(d,"="),f.push.apply(f,t(arguments)),f.push(";"));return d},toString:function(){return p([0<a.length?"var "+a+";":"",p(f)])}})}function a(){function k(c,e){d(c,e,"=",h.def(c,e),";")}var h=f(),d=f(),c=h.toString,m=d.toString;return e(h,{entry:h,exit:d,save:k,set:function(c,d,e){k(c,d);h(c,d,"=",e,";")},toString:function(){return c()+m()}})}var l=0,y=[],v=[],w=f(),u={};return{global:w,link:function(e){for(var f=0;f<v.length;++f)if(v[f]===e)return y[f];f=
"g"+l++;y.push(f);v.push(e);return f},block:f,proc:function(f,h){function d(){var d="a"+c.length;c.push(d);return d}var c=[];h=h||0;for(var m=0;m<h;++m)d();var m=a(),q=m.toString;return u[f]=e(m,{arg:d,toString:function(){return p(["function(",c.join(),"){",q(),"}"])}})},scope:a,cond:function(){var f=p(arguments),h=a(),d=a(),c=h.toString,m=d.toString;return e(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){d.apply(d,t(arguments));return this},toString:function(){var d=m();
d&&(d="else{"+d+"}");return p(["if(",f,"){",c(),"}",d])}})},compile:function(){var e=['"use strict";',w,"return {"];Object.keys(u).forEach(function(d){e.push('"',d,'":',u[d].toString(),",")});e.push("}");var f=p(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(f)).apply(null,v)}}}},{"./extend":23}],23:[function(a,g,n){g.exports=function(a,p){for(var e=Object.keys(p),f=0;f<e.length;++f)a[e[f]]=p[e[f]];return a}},{}],24:[function(a,g,n){var t=a("./is-typed-array");
g.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":26}],25:[function(a,g,n){var t=a("./is-typed-array");g.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":26}],26:[function(a,g,n){var t=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in t}},{"../constants/arraytypes.json":4}],
27:[function(a,g,n){g.exports=function(a,p){for(var e=Array(a),f=0;f<a;++f)e[f]=p(f);return e}},{}],28:[function(a,g,n){function t(e){var f,a;f=(65535<e)<<4;e>>>=f;a=(255<e)<<3;e>>>=a;f|=a;a=(15<e)<<2;e>>>=a;f|=a;a=(3<e)<<1;return f|a|e>>>a>>1}function p(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=f[t(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}function e(e){f[t(e.byteLength)>>2].push(e)}var f=a("./loop")(8,function(){return[]});g.exports={alloc:p,free:e,allocType:function(e,
f){var a=null;switch(e){case 5120:a=new Int8Array(p(f),0,f);break;case 5121:a=new Uint8Array(p(f),0,f);break;case 5122:a=new Int16Array(p(2*f),0,f);break;case 5123:a=new Uint16Array(p(2*f),0,f);break;case 5124:a=new Int32Array(p(4*f),0,f);break;case 5125:a=new Uint32Array(p(4*f),0,f);break;case 5126:a=new Float32Array(p(4*f),0,f);break;default:return null}return a.length!==f?a.subarray(0,f):a},freeType:function(f){e(f.buffer)}}},{"./loop":27}],29:[function(a,g,n){g.exports="function"===typeof requestAnimationFrame&&
"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(a,g,n){var t=a("./pool"),p=new Float32Array(1),e=new Uint32Array(p.buffer);g.exports=function(f){for(var a=t.allocType(5123,f.length),l=0;l<f.length;++l)if(isNaN(f[l]))a[l]=65535;else if(Infinity===f[l])a[l]=31744;else if(-Infinity===f[l])a[l]=64512;else{p[0]=f[l];var y=e[0],v=y>>>
31<<15,w=(y<<1>>>24)-127,y=y>>13&1023;a[l]=-24>w?v:-14>w?v+(y+1024>>-14-w):15<w?v+31744:v+(w+15<<10)+y}return a}},{"./pool":28}],31:[function(a,g,n){g.exports=function(a){return Object.keys(a).map(function(p){return a[p]})}},{}],32:[function(a,g,n){function t(e,f,a){function p(){var f=window.innerWidth,h=window.innerHeight;e!==document.body&&(h=e.getBoundingClientRect(),f=h.right-h.left,h=h.top-h.bottom);u.width=a*f;u.height=a*h;k(u.style,{width:f+"px",height:h+"px"})}var u=document.createElement("canvas");
k(u.style,{border:0,margin:0,padding:0,top:0,left:0});e.appendChild(u);e===document.body&&(u.style.position="absolute",k(e.style,{margin:0,padding:0}));window.addEventListener("resize",p,!1);p();return{canvas:u,onDestroy:function(){window.removeEventListener("resize",p);e.removeChild(u)}}}function p(e,f){function a(k){try{return e.getContext(k,f)}catch(u){return null}}return a("webgl")||a("experimental-webgl")||a("webgl-experimental")}function e(e){return"string"===typeof e?e.split():e}function f(e){return"string"===
typeof e?document.querySelector(e):e}var k=a("./util/extend");g.exports=function(a){var k=a||{},v,w,u,r;a={};var h=[],d=[],c="undefined"===typeof window?1:window.devicePixelRatio,m=!1,q=function(c){},z=function(){};"string"===typeof k?v=document.querySelector(k):"object"===typeof k&&("string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?v=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?(r=k,u=r.canvas):("gl"in k?r=k.gl:
"canvas"in k?u=f(k.canvas):"container"in k&&(w=f(k.container)),"attributes"in k&&(a=k.attributes),"extensions"in k&&(h=e(k.extensions)),"optionalExtensions"in k&&(d=e(k.optionalExtensions)),"onDone"in k&&(q=k.onDone),"profile"in k&&(m=!!k.profile),"pixelRatio"in k&&(c=+k.pixelRatio)));v&&("canvas"===v.nodeName.toLowerCase()?u=v:w=v);if(!r){if(!u){v=t(w||document.body,q,c);if(!v)return null;u=v.canvas;z=v.onDestroy}r=p(u,a)}return r?{gl:r,canvas:u,container:w,extensions:h,optionalExtensions:d,pixelRatio:c,
profile:m,onDone:q,onDestroy:z}:(z(),q("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],33:[function(a,g,n){function t(e,f,a){for(var v=[],w=f;w<a;w+=3)f=(e[w]<<16)+(e[w+1]<<8)+e[w+2],v.push(p[f>>18&63]+p[f>>12&63]+p[f>>6&63]+p[f&63]);return v.join("")}n.toByteArray=function(a){var l,p,v,w,u;l=a.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[l-2]?2:"="===a[l-1]?1:0;u=new f(3*l/4-w);p=
0<w?l-4:l;var r=0;for(l=0;l<p;l+=4)v=e[a.charCodeAt(l)]<<18|e[a.charCodeAt(l+1)]<<12|e[a.charCodeAt(l+2)]<<6|e[a.charCodeAt(l+3)],u[r++]=v>>16&255,u[r++]=v>>8&255,u[r++]=v&255;2===w?(v=e[a.charCodeAt(l)]<<2|e[a.charCodeAt(l+1)]>>4,u[r++]=v&255):1===w&&(v=e[a.charCodeAt(l)]<<10|e[a.charCodeAt(l+1)]<<4|e[a.charCodeAt(l+2)]>>2,u[r++]=v>>8&255,u[r++]=v&255);return u};n.fromByteArray=function(e){for(var f=e.length,a=f%3,v="",w=[],u=0,r=f-a;u<r;u+=16383)w.push(t(e,u,u+16383>r?r:u+16383));1===a?(e=e[f-1],
v+=p[e>>2],v+=p[e<<4&63],v+="=="):2===a&&(e=(e[f-2]<<8)+e[f-1],v+=p[e>>10],v+=p[e>>4&63],v+=p[e<<2&63],v+="=");w.push(v);return w.join("")};var p=[],e=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var f=0;64>f;++f)p[f]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(f)]=f;e[45]=62;e[95]=63})()},{}],34:[function(a,g,n){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]).add(e[0].mul(a[1])),
a[1].mul(e[1]))}},{"./lib/rationalize":44}],35:[function(a,g,n){g.exports=function(a,p){return a[0].mul(p[1]).cmp(p[0].mul(a[1]))}},{}],36:[function(a,g,n){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]),a[1].mul(e[0]))}},{"./lib/rationalize":44}],37:[function(a,g,n){function t(a,w){if(p(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var u=0,r,h;if(e(a))r=a.clone();else if("string"===typeof a)r=k(a);else{if(0===a)return[f(0),f(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=
Math.pow(2,256),u-=256;r=f(a)}if(p(w))r.mul(w[1]),h=w[0].clone();else if(e(w))h=w.clone();else if("string"===typeof w)h=k(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),u+=256;h=f(w)}else h=f(1);0<u?r=r.shln(u):0>u&&(h=h.shln(-u));return l(r,h)}var p=a("./is-rat"),e=a("./lib/is-bn"),f=a("./lib/num-to-bn"),k=a("./lib/str-to-bn"),l=a("./lib/rationalize"),y=a("./div");g.exports=t},{"./div":36,"./is-rat":38,"./lib/is-bn":42,"./lib/num-to-bn":43,"./lib/rationalize":44,"./lib/str-to-bn":45}],
38:[function(a,g,n){var t=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&t(a[0])&&t(a[1])}},{"./lib/is-bn":42}],39:[function(a,g,n){var t=a("bn.js");g.exports=function(a){return a.cmp(new t(0))}},{"bn.js":47}],40:[function(a,g,n){g.exports=function(a){var p=a.length,e=a.words,f=0;if(1===p)f=e[0];else if(2===p)f=e[0]+67108864*e[1];else for(var k=f=0;k<p;k++)f+=e[k]*Math.pow(67108864,k);return a.sign?-f:f}},{}],41:[function(a,g,n){var t=a("double-bits"),p=a("bit-twiddle").countTrailingZeros;
g.exports=function(e){var f=p(t.lo(e));if(32>f)return f;e=p(t.hi(e));return 20<e?52:e+32}},{"bit-twiddle":52,"double-bits":73}],42:[function(a,g,n){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":47}],43:[function(a,g,n){var t=a("bn.js"),p=a("double-bits");g.exports=function(e){var f=p.exponent(e);return 52>f?new t(e):(new t(e*Math.pow(2,52-f))).shln(f-52)}},{"bn.js":47,"double-bits":73}],44:[function(a,g,n){var t=a("./num-to-bn"),p=a("./bn-sign");g.exports=function(e,
f){var a=p(e),l=p(f);if(0===a)return[t(0),t(1)];if(0===l)return[t(0),t(0)];0>l&&(e=e.neg(),f=f.neg());a=e.gcd(f);return a.cmpn(1)?[e.div(a),f.div(a)]:[e,f]}},{"./bn-sign":39,"./num-to-bn":43}],45:[function(a,g,n){var t=a("bn.js");g.exports=function(a){return new t(a)}},{"bn.js":47}],46:[function(a,g,n){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[0]),a[1].mul(e[1]))}},{"./lib/rationalize":44}],47:[function(a,g,n){(function(a,p){function e(b,c){if(!b)throw Error(c||"Assertion failed");
}function f(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype;b.prototype=new d;b.prototype.constructor=b}function k(b,c,d){if(null!==b&&"object"===typeof b&&Array.isArray(b.words))return b;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===c||"be"===c)d=c,c=10;null!==b&&this._init(b||0,c||10,d||"be")}function l(b,c,d){var e=0;for(d=Math.min(b.length,d);c<d;c++)var f=b.charCodeAt(c)-48,e=e<<4,e=49<=f&&54>=f?e|f-49+10:17<=f&&22>=f?e|f-17+10:e|f&15;return e}function y(b,c,d,
e){var f=0;for(d=Math.min(b.length,d);c<d;c++)var a=b.charCodeAt(c)-48,f=f*e,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function v(b,c){this.name=b;this.p=new k(c,16);this.n=this.p.bitLength();this.k=(new k(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){v.call(this,"p192",
"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function d(b){"string"===typeof b?(b=k._prime(b),this.m=b.p,this.prime=b):(this.m=b,this.prime=null)}function c(b){d.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new k(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);
this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=k:p.BN=k;k.BN=k;k.wordSize=26;k.prototype._init=function(b,c,d){if("number"===typeof b)return this._initNumber(b,c,d);if("object"===typeof b)return this._initArray(b,c,d);"hex"===c&&(c=16);e(c===(c|0)&&2<=c&&36>=c);b=b.toString().replace(/\s+/g,"");var f=0;"-"===b[0]&&f++;16===c?this._parseHex(b,f):this._parseBase(b,c,f);"-"===b[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),c,d)};k.prototype._initNumber=
function(b,c,d){0>b&&(this.sign=!0,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(e(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),c,d)};k.prototype._initArray=function(b,c,d){e("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(c=0;c<
this.length;c++)this.words[c]=0;var f=0;if("be"===d)for(c=b.length-1,d=0;0<=c;c-=3){var a=b[c]|b[c-1]<<8|b[c-2]<<16;this.words[d]|=a<<f&67108863;this.words[d+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,d++)}else if("le"===d)for(d=c=0;c<b.length;c+=3)a=b[c]|b[c+1]<<8|b[c+2]<<16,this.words[d]|=a<<f&67108863,this.words[d+1]=a>>>26-f&67108863,f+=24,26<=f&&(f-=26,d++);return this.strip()};k.prototype._parseHex=function(b,c){this.length=Math.ceil((b.length-c)/6);this.words=Array(this.length);for(var d=0;d<
this.length;d++)this.words[d]=0;for(var e=0,d=b.length-6,f=0;d>=c;d-=6){var a=l(b,d,d+6);this.words[f]|=a<<e&67108863;this.words[f+1]|=a>>>26-e&4194303;e+=24;26<=e&&(e-=26,f++)}d+6!==c&&(a=l(b,c,d+6),this.words[f]|=a<<e&67108863,this.words[f+1]|=a>>>26-e&4194303);this.strip()};k.prototype._parseBase=function(b,c,d){this.words=[0];this.length=1;for(var e=0,f=1;67108863>=f;f*=c)e++;e--;for(var f=f/c|0,a=b.length-d,m=a%e,h=Math.min(a,a-m)+d,a=0;d<h;d+=e)a=y(b,d,d+e,c),this.imuln(f),67108864>this.words[0]+
a?this.words[0]+=a:this._iaddn(a);if(0!==m){e=1;a=y(b,d,b.length,c);for(d=0;d<m;d++)e*=c;this.imuln(e);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};k.prototype.copy=function(b){b.words=Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length;b.sign=this.sign;b.red=this.red};k.prototype.clone=function(){var b=new k(null);this.copy(b);return b};k.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};
k.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(b,c){b=b||10;if(16===b||"hex"===b){var d="",f=0;c=c|0||1;for(var a=0,h=0;h<this.length;h++){var k=
this.words[h],l=((k<<f|a)&16777215).toString(16),a=k>>>24-f&16777215,d=0!==a||h!==this.length-1?m[6-l.length]+l+d:l+d,f=f+2;26<=f&&(f-=26,h--)}for(0!==a&&(d=a.toString(16)+d);0!==d.length%c;)d="0"+d;this.sign&&(d="-"+d);return d}if(b===(b|0)&&2<=b&&36>=b){f=q[b];a=z[b];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)k=h.modn(a).toString(b),h=h.idivn(a),d=0!==h.cmpn(0)?m[f-k.length]+k+d:k+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}e(!1,"Base should be between 2 and 36")};k.prototype.toJSON=
function(){return this.toString(16)};k.prototype.toArray=function(b){this.strip();var c=Array(this.byteLength());c[0]=0;var d=this.clone();if("le"!==b)for(b=0;0!==d.cmpn(0);b++){var e=d.andln(255);d.ishrn(8);c[c.length-b-1]=e}else for(b=0;0!==d.cmpn(0);b++)e=d.andln(255),d.ishrn(8),c[b]=e;return c};k.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var c=0;4096<=b&&(c+=13,b>>>=13);64<=b&&(c+=7,b>>>=7);8<=b&&(c+=4,b>>>=4);2<=b&&(c+=2,b>>>=2);return c+b};k.prototype._zeroBits=
function(b){if(0===b)return 26;var c=0;0===(b&8191)&&(c+=13,b>>>=13);0===(b&127)&&(c+=7,b>>>=7);0===(b&15)&&(c+=4,b>>>=4);0===(b&3)&&(c+=2,b>>>=2);0===(b&1)&&c++;return c};k.prototype.bitLength=function(){var b=0,b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};k.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var b=0,c=0;c<this.length;c++){var d=this._zeroBits(this.words[c]),b=b+d;if(26!==d)break}return b};k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};k.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var b=this.clone();b.sign=!this.sign;return b};k.prototype.ior=function(b){for(this.sign=this.sign||b.sign;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]|=b.words[c];return this.strip()};k.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};k.prototype.iand=function(b){this.sign=this.sign&&b.sign;var c;c=this.length>b.length?b:this;for(var d=
0;d<c.length;d++)this.words[d]&=b.words[d];this.length=c.length;return this.strip()};k.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};k.prototype.ixor=function(b){this.sign=this.sign||b.sign;var c;this.length>b.length?c=this:(c=b,b=this);for(var d=0;d<b.length;d++)this.words[d]=c.words[d]^b.words[d];if(this!==c)for(;d<c.length;d++)this.words[d]=c.words[d];this.length=c.length;return this.strip()};k.prototype.xor=function(b){return this.length>b.length?
this.clone().ixor(b):b.clone().ixor(this)};k.prototype.setn=function(b,c){e("number"===typeof b&&0<=b);for(var d=b/26|0,f=b%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=c?this.words[d]|1<<f:this.words[d]&~(1<<f);return this.strip()};k.prototype.iadd=function(b){if(this.sign&&!b.sign){this.sign=!1;var c=this.isub(b);this.sign=!this.sign;return this._normSign()}if(!this.sign&&b.sign)return b.sign=!1,c=this.isub(b),b.sign=!0,c._normSign();var d;this.length>b.length?d=this:(d=b,b=this);
for(var e=c=0;e<b.length;e++)c=d.words[e]+b.words[e]+c,this.words[e]=c&67108863,c>>>=26;for(;0!==c&&e<d.length;e++)c=d.words[e]+c,this.words[e]=c&67108863,c>>>=26;this.length=d.length;if(0!==c)this.words[this.length]=c,this.length++;else if(d!==this)for(;e<d.length;e++)this.words[e]=d.words[e];return this};k.prototype.add=function(b){if(b.sign&&!this.sign){b.sign=!1;var c=this.sub(b);b.sign=!0;return c}return!b.sign&&this.sign?(this.sign=!1,c=b.sub(this),this.sign=!0,c):this.length>b.length?this.clone().iadd(b):
b.clone().iadd(this)};k.prototype.isub=function(b){if(b.sign){b.sign=!1;var c=this.iadd(b);b.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(b),this.sign=!0,this._normSign();c=this.cmp(b);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d;0<c?d=this:(d=b,b=this);for(var e=0,f=0;f<b.length;f++)c=d.words[f]-b.words[f]+e,e=c>>26,this.words[f]=c&67108863;for(;0!==e&&f<d.length;f++)c=d.words[f]+e,e=c>>26,this.words[f]=c&67108863;if(0===e&&f<d.length&&d!==this)for(;f<
d.length;f++)this.words[f]=d.words[f];this.length=Math.max(this.length,f);d!==this&&(this.sign=!0);return this.strip()};k.prototype.sub=function(b){return this.clone().isub(b)};k.prototype._smallMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var d=0,e=0;e<c.length-1;e++){for(var f=d>>>26,d=d&67108863,a=Math.min(e,b.length-1),m=Math.max(0,e-this.length+1);m<=a;m++)var h=(this.words[e-m]|0)*(b.words[m]|0),q=h&67108863,f=f+(h/67108864|0)|0,q=q+d|0,d=q&67108863,f=f+(q>>>
26)|0;c.words[e]=d;d=f}0!==d?c.words[e]=d:c.length--;return c.strip()};k.prototype._bigMulTo=function(b,c){c.sign=b.sign!==this.sign;c.length=this.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){for(var a=e,e=0,d=d&67108863,m=Math.min(f,b.length-1),h=Math.max(0,f-this.length+1);h<=m;h++)var q=(this.words[f-h]|0)*(b.words[h]|0),k=q&67108863,a=a+(q/67108864|0)|0,k=k+d|0,d=k&67108863,a=a+(k>>>26)|0,e=e+(a>>>26),a=a&67108863;c.words[f]=d;d=a}0!==d?c.words[f]=d:c.length--;return c.strip()};k.prototype.mulTo=
function(b,c){return 63>this.length+b.length?this._smallMulTo(b,c):this._bigMulTo(b,c)};k.prototype.mul=function(b){var c=new k(null);c.words=Array(this.length+b.length);return this.mulTo(b,c)};k.prototype.imul=function(b){if(0===this.cmpn(0)||0===b.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,d=b.length;this.sign=b.sign!==this.sign;this.length+=b.length;this.words[this.length-1]=0;for(var e=this.length-2;0<=e;e--){for(var f=0,a=0,m=Math.min(e,d-1),h=Math.max(0,e-c+1);h<=m;h++)var q=
e-h,q=this.words[q]*b.words[h],k=q&67108863,f=f+(q/67108864|0),k=k+a,a=k&67108863,f=f+(k>>>26);this.words[e]=a;this.words[e+1]+=f}f=0;for(q=1;q<this.length;q++)b=this.words[q]+f,this.words[q]=b&67108863,f=b>>>26;return this.strip()};k.prototype.imuln=function(b){e("number"===typeof b);for(var c=0,d=0;d<this.length;d++){var f=this.words[d]*b,a=(f&67108863)+(c&67108863),c=c>>26,c=c+(f/67108864|0),c=c+(a>>>26);this.words[d]=a&67108863}0!==c&&(this.words[d]=c,this.length++);return this};k.prototype.muln=
function(b){return this.clone().imuln(b)};k.prototype.sqr=function(){return this.mul(this)};k.prototype.isqr=function(){return this.mul(this)};k.prototype.ishln=function(b){e("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;var d=67108863>>>26-c<<26-c;if(0!==c){for(var f=0,a=0;a<this.length;a++){var m=this.words[a]&d;this.words[a]=this.words[a]-m<<c|f;f=m>>>26-c}f&&(this.words[a]=f,this.length++)}if(0!==b){for(a=this.length-1;0<=a;a--)this.words[a+b]=this.words[a];for(a=0;a<b;a++)this.words[a]=0;
this.length+=b}return this.strip()};k.prototype.ishrn=function(b,c,d){e("number"===typeof b&&0<=b);var f=b%26,a=Math.min((b-f)/26,this.length);b=67108863^67108863>>>f<<f;c=(c?(c-c%26)/26:0)-a;c=Math.max(0,c);if(d){for(var m=0;m<a;m++)d.words[m]=this.words[m];d.length=a}if(0!==a)if(this.length>a)for(this.length-=a,m=0;m<this.length;m++)this.words[m]=this.words[m+a];else this.words[0]=0,this.length=1;a=0;for(m=this.length-1;0<=m&&(0!==a||m>=c);m--){var h=this.words[m];this.words[m]=a<<26-f|h>>>f;a=
h&b}d&&0!==a&&(d.words[d.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};k.prototype.shln=function(b){return this.clone().ishln(b)};k.prototype.shrn=function(b){return this.clone().ishrn(b)};k.prototype.testn=function(b){e("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;return this.length<=b?!1:!!(this.words[b]&1<<c)};k.prototype.imaskn=function(b){e("number"===typeof b&&0<=b);var c=b%26;b=(b-c)/26;e(!this.sign,"imaskn works only with positive numbers");0!==
c&&b++;this.length=Math.min(b,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};k.prototype.maskn=function(b){return this.clone().imaskn(b)};k.prototype.iaddn=function(b){e("number"===typeof b);if(0>b)return this.isubn(-b);if(this.sign){if(1===this.length&&this.words[0]<b)return this.words[0]=b-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(b);this.sign=!0;return this}return this._iaddn(b)};k.prototype._iaddn=function(b){this.words[0]+=b;for(b=
0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};k.prototype.isubn=function(b){e("number"===typeof b);if(0>b)return this.iaddn(-b);if(this.sign)return this.sign=!1,this.iaddn(b),this.sign=!0,this;this.words[0]-=b;for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};k.prototype.addn=function(b){return this.clone().iaddn(b)};
k.prototype.subn=function(b){return this.clone().isubn(b)};k.prototype.iabs=function(){this.sign=!1;return this};k.prototype.abs=function(){return this.clone().iabs()};k.prototype._ishlnsubmul=function(b,c,d){var f=b.length+d,a;if(this.words.length<f){var m=Array(f);for(a=0;a<this.length;a++)m[a]=this.words[a];this.words=m}else a=this.length;for(this.length=Math.max(this.length,f);a<this.length;a++)this.words[a]=0;for(a=m=0;a<b.length;a++)f=this.words[a+d]+m,m=b.words[a]*c,f-=m&67108863,m=(f>>26)-
(m/67108864|0),this.words[a+d]=f&67108863;for(;a<this.length-d;a++)f=this.words[a+d]+m,m=f>>26,this.words[a+d]=f&67108863;if(0===m)return this.strip();e(-1===m);for(a=m=0;a<this.length;a++)f=-this.words[a]+m,m=f>>26,this.words[a]=f&67108863;this.sign=!0;return this.strip()};k.prototype._wordDiv=function(b,c){var d=this.length-b.length,e=this.clone(),f=b,a=f.words[f.length-1],d=26-this._countBits(a);0!==d&&(f=f.shln(d),e.ishln(d),a=f.words[f.length-1]);var m=e.length-f.length,h;if("mod"!==c){h=new k(null);
h.length=m+1;h.words=Array(h.length);for(var q=0;q<h.length;q++)h.words[q]=0}q=e.clone()._ishlnsubmul(f,1,m);q.sign||(e=q,h&&(h.words[m]=1));for(--m;0<=m;m--){q=67108864*e.words[f.length+m]+e.words[f.length+m-1];q=Math.min(q/a|0,67108863);for(e._ishlnsubmul(f,q,m);e.sign;)q--,e.sign=!1,e._ishlnsubmul(f,1,m),0!==e.cmpn(0)&&(e.sign=!e.sign);h&&(h.words[m]=q)}h&&h.strip();e.strip();"div"!==c&&0!==d&&e.ishrn(d);return{div:h?h:null,mod:e}};k.prototype.divmod=function(b,c){e(0!==b.cmpn(0));if(this.sign&&
!b.sign){var d=this.neg().divmod(b,c),f,a;"mod"!==c&&(f=d.div.neg());"div"!==c&&(a=0===d.mod.cmpn(0)?d.mod:b.sub(d.mod));return{div:f,mod:a}}return!this.sign&&b.sign?(d=this.divmod(b.neg(),c),"mod"!==c&&(f=d.div.neg()),{div:f,mod:d.mod}):this.sign&&b.sign?this.neg().divmod(b.neg(),c):b.length>this.length||0>this.cmp(b)?{div:new k(0),mod:this}:1===b.length?"div"===c?{div:this.divn(b.words[0]),mod:null}:"mod"===c?{div:null,mod:new k(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new k(this.modn(b.words[0]))}:
this._wordDiv(b,c)};k.prototype.div=function(b){return this.divmod(b,"div").div};k.prototype.mod=function(b){return this.divmod(b,"mod").mod};k.prototype.divRound=function(b){var c=this.divmod(b);if(0===c.mod.cmpn(0))return c.div;var d=c.div.sign?c.mod.isub(b):c.mod,e=b.shrn(1);b=b.andln(1);d=d.cmp(e);return 0>d||1===b&&0===d?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};k.prototype.modn=function(b){e(67108863>=b);for(var c=67108864%b,d=0,f=this.length-1;0<=f;f--)d=(c*d+this.words[f])%b;return d};
k.prototype.idivn=function(b){e(67108863>=b);for(var c=0,d=this.length-1;0<=d;d--)c=this.words[d]+67108864*c,this.words[d]=c/b|0,c%=b;return this.strip()};k.prototype.divn=function(b){return this.clone().idivn(b)};k.prototype.egcd=function(b){e(!b.sign);e(0!==b.cmpn(0));var c=this,d=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var f=new k(0),a=new k(0),m=new k(1),h=0;c.isEven()&&d.isEven();)c.ishrn(1),d.ishrn(1),++h;for(var q=d.clone(),l=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
b.isEven()&&f.isEven()?(b.ishrn(1),f.ishrn(1)):(b.iadd(q).ishrn(1),f.isub(l).ishrn(1));for(;d.isEven();)d.ishrn(1),a.isEven()&&m.isEven()?(a.ishrn(1),m.ishrn(1)):(a.iadd(q).ishrn(1),m.isub(l).ishrn(1));0<=c.cmp(d)?(c.isub(d),b.isub(a),f.isub(m)):(d.isub(c),a.isub(b),m.isub(f))}return{a:a,b:m,gcd:d.ishln(h)}};k.prototype._invmp=function(b){e(!b.sign);e(0!==b.cmpn(0));var c=this,d=b.clone(),c=c.sign?c.mod(b):c.clone();b=new k(1);for(var f=new k(0),a=d.clone();0<c.cmpn(1)&&0<d.cmpn(1);){for(;c.isEven();)c.ishrn(1),
b.isEven()?b.ishrn(1):b.iadd(a).ishrn(1);for(;d.isEven();)d.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(a).ishrn(1);0<=c.cmp(d)?(c.isub(d),b.isub(f)):(d.isub(c),f.isub(b))}return 0===c.cmpn(1)?b:f};k.prototype.gcd=function(b){if(0===this.cmpn(0))return b.clone();if(0===b.cmpn(0))return this.clone();var c=this.clone();b=b.clone();c.sign=!1;b.sign=!1;for(var d=0;c.isEven()&&b.isEven();d++)c.ishrn(1),b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;b.isEven();)b.ishrn(1);var e=c.cmp(b);if(0>e)e=c,c=b,b=e;else if(0===
e||0===b.cmpn(1))break;c.isub(b)}while(1);return b.ishln(d)};k.prototype.invm=function(b){return this.egcd(b).a.mod(b)};k.prototype.isEven=function(){return 0===(this.words[0]&1)};k.prototype.isOdd=function(){return 1===(this.words[0]&1)};k.prototype.andln=function(b){return this.words[0]&b};k.prototype.bincn=function(b){e("number"===typeof b);var c=b%26;b=(b-c)/26;var d=1<<c;if(this.length<=b){for(c=this.length;c<b+1;c++)this.words[c]=0;this.words[b]|=d;this.length=b+1;return this}for(c=b;0!==d&&
c<this.length;c++)b=this.words[c],b+=d,d=b>>>26,b&=67108863,this.words[c]=b;0!==d&&(this.words[c]=d,this.length++);return this};k.prototype.cmpn=function(b){var c=0>b;c&&(b=-b);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;b&=67108863;this.strip();1<this.length?b=1:(c=this.words[0],b=c===b?0:c<b?-1:1);this.sign&&(b=-b);return b};k.prototype.cmp=function(b){if(this.sign&&!b.sign)return-1;if(!this.sign&&b.sign)return 1;b=this.ucmp(b);return this.sign?-b:b};k.prototype.ucmp=function(b){if(this.length>
b.length)return 1;if(this.length<b.length)return-1;for(var c=0,d=this.length-1;0<=d;d--){var e=this.words[d],f=b.words[d];if(e!==f){e<f?c=-1:e>f&&(c=1);break}}return c};k.red=function(b){return new d(b)};k.prototype.toRed=function(b){e(!this.red,"Already a number in reduction context");e(!this.sign,"red works only with positives");return b.convertTo(this)._forceRed(b)};k.prototype.fromRed=function(){e(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
k.prototype._forceRed=function(b){this.red=b;return this};k.prototype.forceRed=function(b){e(!this.red,"Already a number in reduction context");return this._forceRed(b)};k.prototype.redAdd=function(b){e(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};k.prototype.redIAdd=function(b){e(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};k.prototype.redSub=function(b){e(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};k.prototype.redISub=
function(b){e(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};k.prototype.redShl=function(b){e(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};k.prototype.redMul=function(b){e(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};k.prototype.redIMul=function(b){e(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};k.prototype.redSqr=function(){e(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};k.prototype.redISqr=function(){e(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};k.prototype.redSqrt=function(){e(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};k.prototype.redInvm=function(){e(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};k.prototype.redNeg=
function(){e(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};k.prototype.redPow=function(b){e(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var C={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var b=new k(null);b.words=Array(Math.ceil(this.n/13));return b};v.prototype.ireduce=function(b){var c;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),c=b.bitLength();while(c>this.n);
c=c<this.n?-1:b.ucmp(this.p);0===c?(b.words[0]=0,b.length=1):0<c?b.isub(this.p):b.strip();return b};v.prototype.split=function(b,c){b.ishrn(this.n,0,c)};v.prototype.imulK=function(b){return b.imul(this.k)};f(w,v);w.prototype.split=function(b,c){for(var d=Math.min(b.length,9),e=0;e<d;e++)c.words[e]=b.words[e];c.length=d;if(9>=b.length)b.words[0]=0,b.length=1;else{d=b.words[9];c.words[c.length++]=d&4194303;for(e=10;e<b.length;e++){var f=b.words[e];b.words[e-10]=(f&4194303)<<4|d>>>22;d=f}b.words[e-10]=
d>>>22;b.length-=9}};w.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var c,d=0,e=0;e<b.length;e++){var f=b.words[e];c=64*f;d+=977*f;c+=d/67108864|0;d&=67108863;b.words[e]=d;d=c}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};f(u,v);f(r,v);f(h,v);h.prototype.imulK=function(b){for(var c=0,d=0;d<b.length;d++){var c=19*b.words[d]+c,e=c&67108863,c=c>>>26;b.words[d]=e}0!==c&&(b.words[b.length++]=c);return b};k._prime=function(b){if(C[b])return C[b];
var c;if("k256"===b)c=new w;else if("p224"===b)c=new u;else if("p192"===b)c=new r;else if("p25519"===b)c=new h;else throw Error("Unknown prime "+b);return C[b]=c};d.prototype._verify1=function(b){e(!b.sign,"red works only with positives");e(b.red,"red works only with red numbers")};d.prototype._verify2=function(b,c){e(!b.sign&&!c.sign,"red works only with positives");e(b.red&&b.red===c.red,"red works only with red numbers")};d.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):
b.mod(this.m)._forceRed(this)};d.prototype.neg=function(b){b=b.clone();b.sign=!b.sign;return b.iadd(this.m)._forceRed(this)};d.prototype.add=function(b,c){this._verify2(b,c);var d=b.add(c);0<=d.cmp(this.m)&&d.isub(this.m);return d._forceRed(this)};d.prototype.iadd=function(b,c){this._verify2(b,c);var d=b.iadd(c);0<=d.cmp(this.m)&&d.isub(this.m);return d};d.prototype.sub=function(b,c){this._verify2(b,c);var d=b.sub(c);0>d.cmpn(0)&&d.iadd(this.m);return d._forceRed(this)};d.prototype.isub=function(b,
c){this._verify2(b,c);var d=b.isub(c);0>d.cmpn(0)&&d.iadd(this.m);return d};d.prototype.shl=function(b,c){this._verify1(b);return this.imod(b.shln(c))};d.prototype.imul=function(b,c){this._verify2(b,c);return this.imod(b.imul(c))};d.prototype.mul=function(b,c){this._verify2(b,c);return this.imod(b.mul(c))};d.prototype.isqr=function(b){return this.imul(b,b)};d.prototype.sqr=function(b){return this.mul(b,b)};d.prototype.sqrt=function(b){if(0===b.cmpn(0))return b.clone();var c=this.m.andln(3);e(1===
c%2);if(3===c){var c=this.m.add(new k(1)).ishrn(2),d=this.pow(b,c);return d}for(var f=this.m.subn(1),a=0;0!==f.cmpn(0)&&0===f.andln(1);)a++,f.ishrn(1);e(0!==f.cmpn(0));for(var c=(new k(1)).toRed(this),d=c.redNeg(),m=this.m.subn(1).ishrn(1),h=this.m.bitLength(),h=(new k(2*h*h)).toRed(this);0!==this.pow(h,m).cmp(d);)h.redIAdd(d);m=this.pow(h,f);d=this.pow(b,f.addn(1).ishrn(1));b=this.pow(b,f);for(f=a;0!==b.cmp(c);){h=b;for(a=0;0!==h.cmp(c);a++)h=h.redSqr();e(a<f);m=this.pow(m,(new k(1)).ishln(f-a-1));
d=d.redMul(m);m=m.redSqr();b=b.redMul(m);f=a}return d};d.prototype.invm=function(b){b=b._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)};d.prototype.pow=function(b,c){var d=[];if(0===c.cmpn(0))return new k(1);for(var e=c.clone();0!==e.cmpn(0);)d.push(e.andln(1)),e.ishrn(1);for(var f=b,a=0;a<d.length&&0===d[a];a++,f=this.sqr(f));if(++a<d.length)for(e=this.sqr(f);a<d.length;a++,e=this.sqr(e))0!==d[a]&&(f=this.mul(f,e));return f};d.prototype.convertTo=function(b){var c=b.mod(this.m);
return c===b?c.clone():c};d.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};k.mont=function(b){return new c(b)};f(c,d);c.prototype.convertTo=function(b){return this.imod(b.shln(this.shift))};c.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};c.prototype.imul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return b.words[0]=0,b.length=1,b;var d=b.imul(c),e=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=d=d.isub(e).ishrn(this.shift);
0<=d.cmp(this.m)?e=d.isub(this.m):0>d.cmpn(0)&&(e=d.iadd(this.m));return e._forceRed(this)};c.prototype.mul=function(b,c){if(0===b.cmpn(0)||0===c.cmpn(0))return(new k(0))._forceRed(this);var d=b.mul(c),e=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=d=d.isub(e).ishrn(this.shift);0<=d.cmp(this.m)?e=d.isub(this.m):0>d.cmpn(0)&&(e=d.iadd(this.m));return e._forceRed(this)};c.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],48:[function(a,g,n){var t=a("./lib/bn-sign");g.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":39}],49:[function(a,g,n){var t=a("./lib/rationalize");g.exports=function(a,e){return t(a[0].mul(e[1]).sub(a[1].mul(e[0])),a[1].mul(e[1]))}},{"./lib/rationalize":44}],50:[function(a,g,n){var t=a("./lib/bn-to-num"),p=a("./lib/ctz");g.exports=function(e){var f=e[0];e=e[1];if(0===f.cmpn(0))return 0;var a=f.divmod(e),f=t(a.div),a=a.mod;if(0===a.cmpn(0))return f;if(f){var l=
p(f)+4;e=t(a.shln(l).divRound(e));0>f&&(e=-e);return f+e*Math.pow(2,-l)}f=e.bitLength()-a.bitLength()+53;e=t(a.shln(f).divRound(e));if(1023>f)return e*Math.pow(2,-f);e*=Math.pow(2,-1023);return e*Math.pow(2,1023-f)}},{"./lib/bn-to-num":40,"./lib/ctz":41}],51:[function(a,g,n){function t(e,f,a,l,p){e=["function ",e,"(a,l,h,",l.join(","),"){",p?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];p?0>f.indexOf("c")?e.push(";if(x===y){return m}else if(x<=y){"):e.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
e.push(";if(",f,"){i=m;");a?e.push("l=m+1}else{h=m-1}"):e.push("h=m-1}else{l=m+1}");e.push("}");p?e.push("return -1};"):e.push("return i};");return e.join("")}function p(e,f,a,l){return(new Function([t("A","x"+e+"y",f,["y"],l),t("P","c(x,y)"+e+"0",f,["y","c"],l),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
g.exports={ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],52:[function(a,g,n){function t(e){var f=32;(e&=-e)&&f--;e&65535&&(f-=16);e&16711935&&(f-=8);e&252645135&&(f-=4);e&858993459&&(f-=2);e&1431655765&&--f;return f}"use restrict";n.INT_BITS=32;n.INT_MAX=2147483647;n.INT_MIN=-2147483648;n.sign=function(e){return(0<e)-(0>e)};n.abs=function(e){var f=e>>31;return(e^f)-f};n.min=function(e,f){return f^(e^f)&-(e<f)};n.max=function(e,f){return e^(e^
f)&-(e<f)};n.isPow2=function(e){return!(e&e-1)&&!!e};n.log2=function(e){var f,a;f=(65535<e)<<4;e>>>=f;a=(255<e)<<3;e>>>=a;f|=a;a=(15<e)<<2;e>>>=a;f|=a;a=(3<e)<<1;return f|a|e>>>a>>1};n.log10=function(e){return 1E9<=e?9:1E8<=e?8:1E7<=e?7:1E6<=e?6:1E5<=e?5:1E4<=e?4:1E3<=e?3:100<=e?2:10<=e?1:0};n.popCount=function(e){e-=e>>>1&1431655765;e=(e&858993459)+(e>>>2&858993459);return 16843009*(e+(e>>>4)&252645135)>>>24};n.countTrailingZeros=t;n.nextPow2=function(e){e+=0===e;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=
e>>>8;return(e|e>>>16)+1};n.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};n.parity=function(e){e^=e>>>16;e^=e>>>8;e=(e^e>>>4)&15;return 27030>>>e&1};var p=Array(256);(function(e){for(var f=0;256>f;++f){for(var a=f,l=f,p=7,a=a>>>1;a;a>>>=1)l<<=1,l|=a&1,--p;e[f]=l<<p&255}})(p);n.reverse=function(e){return p[e&255]<<24|p[e>>>8&255]<<16|p[e>>>16&255]<<8|p[e>>>24&255]};n.interleave2=function(e,f){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;
f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(e|e<<1)&1431655765|((f|f<<1)&1431655765)<<1};n.deinterleave2=function(e,f){e=e>>>f&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;return((e|e>>>16)&65535)<<16>>16};n.interleave3=function(e,f,a){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;e=(e|e<<2)&1227133513|((f|f<<2)&1227133513)<<1;a&=1023;
a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return e|((a|a<<2)&1227133513)<<2};n.deinterleave3=function(e,f){e=e>>>f&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;return((e|e>>>16)&1023)<<22>>22};n.nextCombination=function(e){var f=e|e-1;return f+1|(~f&-~f)-1>>>t(e)+1}},{}],53:[function(a,g,n){function t(e,f,a,k){for(var h=0,d=0,c=0,m=e.length;c<m;++c){var q=e[c],l;a:{for(l=0;l<f;++l)if(!(q[l]<=q[l+f])){l=!0;break a}l=!1}if(!l){for(l=0;l<2*f;++l)a[h++]=
q[l];k[d++]=c}}return d}function p(e,a,u,r){var h=e.length,d=a.length;if(!(0>=h||0>=d)){var c=e[0].length>>>1;if(!(0>=c)){var m,q=f.mallocDouble(2*c*h),p=f.mallocInt32(h),h=t(e,c,q,p);if(0<h){if(1===c&&r)k.init(h),m=k.sweepComplete(c,u,0,h,q,p,0,h,q,p);else{e=f.mallocDouble(2*c*d);var y=f.mallocInt32(d),d=t(a,c,e,y);0<d&&(k.init(h+d),m=1===c?k.sweepBipartite(c,u,0,h,q,p,0,d,e,y):l(c,u,r,h,q,p,d,e,y),f.free(e),f.free(y))}f.free(q);f.free(p)}return m}}}function e(e,f){y.push([e,f])}g.exports=function(f,
a,k){switch(arguments.length){case 1:return y=[],p(f,f,e,!0),y;case 2:if("function"===typeof a)return p(f,f,a,!0);y=[];p(f,a,e,!1);return y;case 3:return p(f,a,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),k=a("./lib/sweep"),l=a("./lib/intersect"),y},{"./lib/intersect":55,"./lib/sweep":59,"typedarray-pool":121}],54:[function(a,g,n){function t(e){function f(f,a){var k,h="bruteForce"+(f?"Red":"Blue")+(a?"Flip":"")+(e?"Full":"");k=["function ",h,"(",p.join(),
"){","var ","es","=2*","d",";"];var d="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(e?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?k.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",d):k.push(d,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");e?k.push("if(y1<x0||x1<y0)continue;"):a?k.push("if(y0<=x0||x1<y0)continue;"):k.push("if(y0<x0||x1<y0)continue;");k.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
a?k.push("yi,xi"):k.push("xi,yi");k.push(");if(rv!==void 0)return rv;}}}");k=k.join("");l.push(k);v.push("return "+h+"("+p.join()+");")}var a="bruteForce"+(e?"Full":"Partial"),l=[],y=p.slice();e||y.splice(3,0,"fp");var v=["function "+a+"("+y.join()+"){"];v.push("if(re-rs>be-bs){");e?(f(!0,!1),v.push("}else{"),f(!1,!1)):(v.push("if(fp){"),f(!0,!0),v.push("}else{"),f(!0,!1),v.push("}}else{if(fp){"),f(!1,!0),v.push("}else{"),f(!1,!1),v.push("}"));v.push("}}return "+a);a=l.join("")+v.join("");return(new Function(a))()}
var p="d ax vv rs re rb ri bs be bb bi".split(" ");n.partial=t(!1);n.full=t(!0)},{}],55:[function(a,g,n){function t(c,d,e,f,a,m,h,q,k){var l=z*c;b[l]=d;b[l+1]=e;b[l+2]=f;b[l+3]=a;b[l+4]=m;b[l+5]=h;c*=C;x[c]=q;x[c+1]=k}g.exports=function(a,g,n,B,O,F,D,L,H){var J=8*e.log2(B+D+1)*(a+1)|0,P=e.nextPow2(z*J);b.length<P&&(p.free(b),b=p.mallocInt32(P));J=e.nextPow2(C*J);x<J&&(p.free(x),x=p.mallocDouble(J));var J=0,P=2*a,G;t(J++,0,0,B,0,D,n?16:0,-Infinity,Infinity);for(n||t(J++,0,0,D,0,B,1,-Infinity,Infinity);0<
J;){--J;n=J*z;var K=b[n];D=b[n+1];var N=b[n+2],M=b[n+3],Q=b[n+4];n=b[n+5];B=J*C;var S=x[B],X=x[B+1],W=n&1,Y=!!(n&16),T=O,V=F,U=L;B=H;W&&(T=L,V=H,U=O,B=F);if(n&2&&(N=d(a,K,D,N,T,V,X),D>=N))continue;if(n&4&&(D=c(a,K,D,N,T,V,S),D>=N))continue;n=N-D;var R=Q-M;if(Y){if(a*n*(n+R)<u){G=l.scanComplete(a,K,g,D,N,T,V,M,Q,U,B);if(void 0!==G)return G;continue}}else if(a*Math.min(n,R)<v){G=f(a,K,g,W,D,N,T,V,M,Q,U,B);if(void 0!==G)return G;continue}else if(a*n*R<w){G=l.scanBipartite(a,K,g,W,D,N,T,V,M,Q,U,B);if(void 0!==
G)return G;continue}n=r(a,K,D,N,T,V,S,X);if(D<n)if(a*(n-D)<v){if(G=k(a,K+1,g,D,n,T,V,M,Q,U,B),void 0!==G)return G}else if(K===a-2){if(G=W?l.sweepBipartite(a,g,M,Q,U,B,D,n,T,V):l.sweepBipartite(a,g,D,n,T,V,M,Q,U,B),void 0!==G)return G}else t(J++,K+1,D,n,M,Q,W,-Infinity,Infinity),t(J++,K+1,M,Q,D,n,W^1,-Infinity,Infinity);if(n<N)if(D=y(a,K,M,Q,U,B),G=U[P*D+K],R=h(a,K,D,Q,U,B,G),R<Q&&t(J++,K,n,N,R,Q,(W|4)+(Y?16:0),G,X),M<D&&t(J++,K,n,N,M,D,(W|2)+(Y?16:0),S,G),D+1===R){if(Y)a:{M=a;Q=g;B=B[D];W=2*M;D*=
W;S=U[D+K];X=n;n*=W;b:for(;X<N;++X,n+=W)if(Y=V[X],Y!==B&&(R=T[n+K],G=T[n+K+M],!(S<R||G<S))){for(var Z=K+1;Z<M;++Z){R=T[n+Z];G=T[n+Z+M];var aa=U[D+Z+M];if(G<U[D+Z]||aa<R)continue b}Y=Q(Y,B);if(void 0!==Y){G=Y;break a}}G=void 0}else a:{M=a;Q=g;B=B[D];S=2*M;D*=S;X=U[D+K];Y=n;n*=S;b:for(;Y<N;++Y,n+=S)if(R=T[n+K],G=T[n+K+M],!(X<R||G<X||W&&X===R)){Z=V[Y];for(aa=K+1;aa<M;++aa){R=T[n+aa];G=T[n+aa+M];var ca=U[D+aa+M];if(G<U[D+aa]||ca<R)continue b}R=W?Q(B,Z):Q(Z,B);if(void 0!==R){G=R;break a}}G=void 0}if(void 0!==
G)return G}else if(D<R)if(Y){if(N=m(a,K,n,N,T,V,G),n<N)if(M=h(a,K,n,N,T,V,G),K===a-2){if(n<M&&(G=l.sweepComplete(a,g,n,M,T,V,D,R,U,B),void 0!==G)||M<N&&(G=l.sweepBipartite(a,g,M,N,T,V,D,R,U,B),void 0!==G))return G}else n<M&&t(J++,K+1,n,M,D,R,16,-Infinity,Infinity),M<N&&(t(J++,K+1,M,N,D,R,0,-Infinity,Infinity),t(J++,K+1,D,R,M,N,1,-Infinity,Infinity))}else N=W?q(a,K,n,N,T,V,G):m(a,K,n,N,T,V,G),n<N&&(K===a-2?W?l.sweepBipartite(a,g,D,R,U,B,n,N,T,V):l.sweepBipartite(a,g,n,N,T,V,D,R,U,B):(t(J++,K+1,n,N,
D,R,W,-Infinity,Infinity),t(J++,K+1,D,R,n,N,W^1,-Infinity,Infinity)))}};var p=a("typedarray-pool"),e=a("bit-twiddle");g=a("./brute");var f=g.partial,k=g.full,l=a("./sweep"),y=a("./median");a=a("./partition");var v=128,w=4194304,u=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=a("lo===p0",["p0"]),d=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),m=a("lo<=p0&&p0<=hi",["p0"]),q=a("lo<p0&&p0<=hi",["p0"]),z=6,C=2,b=p.mallocInt32(1024),x=p.mallocDouble(1024)},{"./brute":54,"./median":56,"./partition":57,"./sweep":59,
"bit-twiddle":52,"typedarray-pool":121}],56:[function(a,g,n){g.exports=function(e,a,k,l,y,v){if(l<=k+1)return k;var w=k,u=l;l=l+k>>>1;for(var r=2*e,h=l,d=y[r*l+a];w<u;){if(u-w<p){for(var h=a,d=y,c=v,m=2*e,q=m*(w+1)+h,z=w+1;z<u;++z,q+=m)for(var g=d[q],b=z,n=m*(z-1);b>w&&d[n+h]>g;--b,n-=m){for(var E=n,I=n+m,A=0;A<m;++A,++E,++I){var B=d[E];d[E]=d[I];d[I]=B}E=c[b];c[b]=c[b-1];c[b-1]=E}break}q=u-w;h=Math.random()*q+w|0;d=y[r*h+a];m=Math.random()*q+w|0;c=y[r*m+a];z=Math.random()*q+w|0;q=y[r*z+a];d<=c?q>=
c?(h=m,d=c):d>=q||(h=z,d=q):c>=q?(h=m,d=c):q>=d||(h=z,d=q);c=r*(u-1);m=r*h;for(q=0;q<r;++q,++c,++m)z=y[c],y[c]=y[m],y[m]=z;c=v[u-1];v[u-1]=v[h];v[h]=c;h=t(e,a,w,u-1,y,v,d);c=r*(u-1);m=r*h;for(q=0;q<r;++q,++c,++m)z=y[c],y[c]=y[m],y[m]=z;c=v[u-1];v[u-1]=v[h];v[h]=c;if(l<h){for(u=h-1;w<u&&y[r*(u-1)+a]===d;)--u;u+=1}else if(h<l)for(w=h+1;w<u&&y[r*w+a]===d;)w+=1;else break}return t(e,a,k,l,y,v,y[r*l+a])};var t=a("./partition")("lo<p0",["p0"]),p=8},{"./partition":57}],57:[function(a,g,n){g.exports=function(a,
e){var f="abcdef".split("").concat(e),k=[];0<=a.indexOf("lo")&&k.push("lo=e[k+n]");0<=a.indexOf("hi")&&k.push("hi=e[k+o]");f.push(t.replace("_",k.join()).replace("$",a));return Function.apply(void 0,f)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],58:[function(a,g,n){function t(e,a,f){for(var h=2*(e+1),d=e+1;d<=a;++d){for(var c=f[h++],m=f[h++],q=
d,k=h-2;q-- >e;){var l=f[k-2],b=f[k-1];if(l<c)break;else if(l===c&&b<m)break;f[k]=l;f[k+1]=b;k-=2}f[k]=c;f[k+1]=m}}function p(e,a,f){e*=2;a*=2;var h=f[e],d=f[e+1];f[e]=f[a];f[e+1]=f[a+1];f[a]=h;f[a+1]=d}function e(e,a,f){e*=2;a*=2;f[e]=f[a];f[e+1]=f[a+1]}function f(e,a,f,h,d){e*=2;a*=2;d[e]=d[a];d[a]=f;d[e+1]=d[a+1];d[a+1]=h}function k(e,a,f){e*=2;a*=2;var h=f[e],d=f[a];return h<d?!1:h===d?f[e+1]>f[a+1]:!0}function l(e,a,f,h){e*=2;var d=h[e];return d<a?!0:d===a?h[e+1]<f:!1}function y(a,u,r){var h=
(u-a+1)/6|0,d=a+h,c=u-h,m=a+u>>1,q=m-h,z=m+h,g=d,b=q,n=m,E=z,I=c,h=a+1,A=u-1,B=0;k(g,b,r)&&(B=g,g=b,b=B);k(E,I,r)&&(B=E,E=I,I=B);k(g,n,r)&&(B=g,g=n,n=B);k(b,n,r)&&(B=b,b=n,n=B);k(g,E,r)&&(B=g,g=E,E=B);k(n,E,r)&&(B=n,n=E,E=B);k(b,I,r)&&(B=b,b=I,I=B);k(b,n,r)&&(B=b,b=n,n=B);k(E,I,r)&&(B=E,E=I,I=B);for(var B=r[2*b],b=r[2*b+1],O=r[2*E],E=r[2*E+1],g=2*g,n=2*n,I=2*I,d=2*d,m=2*m,c=2*c,F=0;2>F;++F){var D=r[n+F],L=r[I+F];r[d+F]=r[g+F];r[m+F]=D;r[c+F]=L}e(q,a,r);e(z,u,r);for(q=h;q<=A;++q)if(l(q,B,b,r))q!==
h&&p(q,h,r),++h;else if(!l(q,O,E,r))for(;;)if(l(A,O,E,r)){l(A,B,b,r)?(z=q,c=h,m=A,g=r,z*=2,c*=2,m*=2,d=g[z],n=g[z+1],g[z]=g[c],g[z+1]=g[c+1],g[c]=g[m],g[c+1]=g[m+1],g[m]=d,g[m+1]=n,++h):p(q,A,r);--A;break}else if(--A<q)break;f(a,h-1,B,b,r);f(u,A+1,O,E,r);h-2-a<=v?t(a,h-2,r):y(a,h-2,r);u-(A+2)<=v?t(A+2,u,r):y(A+2,u,r);A-h<=v?t(h,A,r):y(h,A,r)}g.exports=function(e,a){a<=4*v?t(0,a-1,e):y(0,a-1,e)};var v=32},{}],59:[function(a,g,n){function t(d,c,e,a){a=c[a];e=d[e-1];d[a]=e;c[e]=a}g.exports={init:function(d){d=
e.nextPow2(d);l.length<d&&(p.free(l),l=p.mallocInt32(d));y.length<d&&(p.free(y),y=p.mallocInt32(d));v.length<d&&(p.free(v),v=p.mallocInt32(d));w.length<d&&(p.free(w),w=p.mallocInt32(d));u.length<d&&(p.free(u),u=p.mallocInt32(d));r.length<d&&(p.free(r),r=p.mallocInt32(d));d*=8;h.length<d&&(p.free(h),h=p.mallocDouble(d))},sweepBipartite:function(d,c,e,a,r,p,b,u,g,n){var A=0,B=2*d;--d;for(var O=B-1;e<a;++e){var F=p[e],D=B*e;h[A++]=r[D+d];h[A++]=-(F+1);h[A++]=r[D+O];h[A++]=F}for(e=b;e<u;++e)F=n[e]+k,
a=B*e,h[A++]=g[a+d],h[A++]=-F,h[A++]=g[a+O],h[A++]=F;u=A>>>1;f(h,u);for(e=n=g=0;e<u;++e)if(A=h[2*e+1]|0,A>=k)A=A-k|0,t(v,w,n--,A);else if(0<=A)t(l,y,g--,A);else{if(A<=-k){A=-A-k|0;for(B=0;B<g;++B)if(a=c(l[B],A),void 0!==a)return a;B=w;a=n++;v[a]=A}else{A=-A-1|0;for(B=0;B<n;++B)if(a=c(A,v[B]),void 0!==a)return a;B=y;a=g++;l[a]=A}B[A]=a}},sweepComplete:function(d,c,e,a,k,p,b,g,n,I){var A=0,B=2*d;--d;for(var O=B-1;e<a;++e){var F=p[e]+1<<1,D=B*e;h[A++]=k[D+d];h[A++]=-F;h[A++]=k[D+O];h[A++]=F}for(e=b;e<
g;++e)F=I[e]+1<<1,a=B*e,h[A++]=n[a+d],h[A++]=-F|1,h[A++]=n[a+O],h[A++]=F|1;g=A>>>1;f(h,g);for(e=A=I=n=0;e<g;++e)if(B=h[2*e+1]|0,a=B&1,e<g-1&&B>>1===h[2*e+3]>>1&&(a=2,e+=1),0>B){B=-(B>>1)-1;for(k=0;k<A;++k)if(p=c(u[k],B),void 0!==p)return p;if(0!==a)for(k=0;k<n;++k)if(p=c(l[k],B),void 0!==p)return p;if(1!==a)for(k=0;k<I;++k)if(p=c(v[k],B),void 0!==p)return p;0===a?(a=y,k=n++,l[k]=B,a[B]=k):1===a?(a=w,k=I++,v[k]=B,a[B]=k):2===a&&(a=r,k=A++,u[k]=B,a[B]=k)}else B=(B>>1)-1,0===a?t(l,y,n--,B):1===a?t(v,
w,I--,B):2===a&&t(u,r,A--,B)},scanBipartite:function(d,c,e,a,p,r,b,u,v,w,g,n){var O=0,F=2*d,D=c+d,L=1,H=1;for(a?H=k:L=k;p<r;++p){var J=p+L,P=F*p;h[O++]=b[P+c];h[O++]=-J;h[O++]=b[P+D];h[O++]=J}for(p=v;p<w;++p)J=p+H,r=F*p,h[O++]=g[r+c],h[O++]=-J;w=O>>>1;f(h,w);for(p=O=0;p<w;++p)if(J=h[2*p+1]|0,0>J)if(J=-J,H=!1,J>=k?(H=!a,J-=k):(H=!!a,--J),H)H=y,r=O++,l[r]=J,H[J]=r;else a:for(H=n[J],J*=F,r=g[J+c+1],v=g[J+c+1+d],D=0;D<O;++D){var P=l[D],G=F*P;if(!(v<b[G+c+1]||b[G+c+1+d]<r)){for(var K=c+2;K<d;++K)if(g[J+
K+d]<b[G+K]||b[G+K+d]<g[J+K])continue a;P=u[P];P=a?e(H,P):e(P,H);if(void 0!==P)return P}}else t(l,y,O--,J-L)},scanComplete:function(d,c,e,a,p,r,b,u,v,y,w){for(var g=0,t=2*d,n=c+d;a<p;++a){var D=a+k,L=t*a;h[g++]=r[L+c];h[g++]=-D;h[g++]=r[L+n];h[g++]=D}for(a=u;a<v;++a)D=a+1,p=t*a,h[g++]=y[p+c],h[g++]=-D;v=g>>>1;f(h,v);for(a=g=0;a<v;++a)if(p=h[2*a+1]|0,0>p)if(D=-p,D>=k)l[g++]=D-k;else a:for(--D,p=w[D],D*=t,n=y[D+c+1],L=y[D+c+1+d],u=0;u<g;++u){var H=l[u],J=b[H];if(J===p)break;H*=t;if(!(L<r[H+c+1]||r[H+
c+1+d]<n)){for(var P=c+2;P<d;++P)if(y[D+P+d]<r[H+P]||r[H+P+d]<y[D+P])continue a;J=e(J,p);if(void 0!==J)return J}}else{D=p-k;for(u=g-1;0<=u;--u)if(l[u]===D){for(P=u+1;P<g;++P)l[P-1]=l[P];break}--g}}};var p=a("typedarray-pool"),e=a("bit-twiddle"),f=a("./sort"),k=268435456,l=p.mallocInt32(1024),y=p.mallocInt32(1024),v=p.mallocInt32(1024),w=p.mallocInt32(1024),u=p.mallocInt32(1024),r=p.mallocInt32(1024),h=p.mallocDouble(8192)},{"./sort":58,"bit-twiddle":52,"typedarray-pool":121}],60:[function(a,g,n){(function(g){function p(){try{var b=
new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(b,c){if((f.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");f.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=f.prototype):(null===b&&(b=new f(c)),b.length=c);return b}function f(b,c,d){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(b,
c,d);if("number"===typeof b){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return y(this,b)}return k(this,b,c,d)}function k(b,c,d,a){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>d||c.byteLength<d)throw new RangeError("'offset' is out of bounds");if(c.byteLength<d+(a||0))throw new RangeError("'length' is out of bounds");c=
void 0===a?new Uint8Array(c,d):new Uint8Array(c,d,a);f.TYPED_ARRAY_SUPPORT?(b=c,b.__proto__=f.prototype):b=v(b,c);return b}if("string"===typeof c){a=b;if("string"!==typeof d||""===d)d="utf8";if(!f.isEncoding(d))throw new TypeError('"encoding" must be a valid string encoding');b=r(c,d)|0;a=e(a,b);a.write(c,d);return a}return w(b,c)}function l(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');}function y(b,c){l(c);b=e(b,0>c?0:u(c)|0);if(!f.TYPED_ARRAY_SUPPORT)for(var d=
0;d<c;++d)b[d]=0;return b}function v(b,c){var d=u(c.length)|0;b=e(b,d);for(var a=0;a<d;a+=1)b[a]=c[a]&255;return b}function w(b,c){if(f.isBuffer(c)){var d=u(c.length)|0;b=e(b,d);if(0===b.length)return b;c.copy(b,0,0,d);return b}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(d="number"!==typeof c.length)||(d=c.length,d=d!==d),d?e(b,0):v(b,c);if("Buffer"===c.type&&H(c.data))return v(b,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function u(b){if(b>=(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function r(b,c){if(f.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var d=b.length;if(0===d)return 0;for(var a=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return d;
case "utf8":case "utf-8":case void 0:return B(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*d;case "hex":return d>>>1;case "base64":return D.toByteArray(A(b)).length;default:if(a)return B(b).length;c=(""+c).toLowerCase();a=!0}}function h(b,c,d){var a=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===d||d>this.length)d=this.length;if(0>=d)return"";d>>>=0;c>>>=0;if(d<=c)return"";for(b||(b="utf8");;)switch(b){case "hex":b=c;c=d;d=this.length;if(!b||0>b)b=0;
if(!c||0>c||c>d)c=d;a="";for(d=b;d<c;++d)b=a,a=this[d],a=16>a?"0"+a.toString(16):a.toString(16),a=b+a;return a;case "utf8":case "utf-8":return m(this,c,d);case "ascii":b="";for(d=Math.min(this.length,d);c<d;++c)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(d=Math.min(this.length,d);c<d;++c)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&d===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(c,d)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.slice(c,d);d="";for(b=0;b<c.length;b+=2)d+=String.fromCharCode(c[b]+256*c[b+1]);return d;default:if(a)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();a=!0}}function d(b,c,d){var a=b[c];b[c]=b[d];b[d]=a}function c(b,c,d,a){var e=1,f=b.length,m=c.length;if(void 0!==a&&(a=String(a).toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>b.length||2>c.length)return-1;e=2;f/=2;m/=2;d/=2}for(a=-1;d<f;++d){var h=1===e?b[d]:b.readUInt16BE(d*e),k;k=-1===a?0:d-a;
k=1===e?c[k]:c.readUInt16BE(k*e);if(h===k){if(-1===a&&(a=d),d-a+1===m)return a*e}else-1!==a&&(d-=d-a),a=-1}return-1}function m(b,c,d){d=Math.min(b.length,d);for(var a=[];c<d;){var e=b[c],f=null,m=239<e?4:223<e?3:191<e?2:1;if(c+m<=d){var h,k,q;switch(m){case 1:128>e&&(f=e);break;case 2:h=b[c+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=b[c+1];k=b[c+2];128===(h&192)&&128===(k&192)&&(e=(e&15)<<12|(h&63)<<6|k&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=b[c+1],k=b[c+2],q=b[c+
3],128===(h&192)&&128===(k&192)&&128===(q&192)&&(e=(e&15)<<18|(h&63)<<12|(k&63)<<6|q&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,m=1):65535<f&&(f-=65536,a.push(f>>>10&1023|55296),f=56320|f&1023);a.push(f);c+=m}b=a.length;if(b<=J)a=String.fromCharCode.apply(String,a);else{d="";for(c=0;c<b;)d+=String.fromCharCode.apply(String,a.slice(c,c+=J));a=d}return a}function q(b,c,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>d)throw new RangeError("Trying to access beyond buffer length");
}function z(b,c,d,a,e,m){if(!f.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>e||c<m)throw new RangeError('"value" argument is out of bounds');if(d+a>b.length)throw new RangeError("Index out of range");}function C(b,c,d,a){0>c&&(c=65535+c+1);for(var e=0,f=Math.min(b.length-d,2);e<f;++e)b[d+e]=(c&255<<8*(a?e:1-e))>>>8*(a?e:1-e)}function b(b,c,d,a){0>c&&(c=4294967295+c+1);for(var e=0,f=Math.min(b.length-d,4);e<f;++e)b[d+e]=c>>>8*(a?e:3-e)&255}function x(b,c,d,a,
e,f){if(d+a>b.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("Index out of range");}function E(b,c,d,a,e){e||x(b,c,d,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(b,c,d,a,23,4);return d+4}function I(b,c,d,a,e){e||x(b,c,d,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(b,c,d,a,52,8);return d+8}function A(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(P,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function B(b,c){c=c||
Infinity;for(var d,a=b.length,e=null,f=[],m=0;m<a;++m){d=b.charCodeAt(m);if(55295<d&&57344>d){if(!e){if(56319<d){-1<(c-=3)&&f.push(239,191,189);continue}else if(m+1===a){-1<(c-=3)&&f.push(239,191,189);continue}e=d;continue}if(56320>d){-1<(c-=3)&&f.push(239,191,189);e=d;continue}d=(e-55296<<10|d-56320)+65536}else e&&-1<(c-=3)&&f.push(239,191,189);e=null;if(128>d){if(0>--c)break;f.push(d)}else if(2048>d){if(0>(c-=2))break;f.push(d>>6|192,d&63|128)}else if(65536>d){if(0>(c-=3))break;f.push(d>>12|224,
d>>6&63|128,d&63|128)}else if(1114112>d){if(0>(c-=4))break;f.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return f}function O(b){for(var c=[],d=0;d<b.length;++d)c.push(b.charCodeAt(d)&255);return c}function F(b,c,d,a){for(var e=0;e<a&&!(e+d>=c.length||e>=b.length);++e)c[e+d]=b[e];return e}var D=a("base64-js"),L=a("ieee754"),H=a("isarray");n.Buffer=f;n.SlowBuffer=function(b){+b!=b&&(b=0);return f.alloc(+b)};n.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:p();n.kMaxLength=f.TYPED_ARRAY_SUPPORT?2147483647:1073741823;f.poolSize=8192;f._augment=function(b){b.__proto__=f.prototype;return b};f.from=function(b,c,d){return k(null,b,c,d)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&($jscomp.initSymbol(),Object.defineProperty(f,Symbol.species,
{value:null,configurable:!0})));f.alloc=function(b,c,d){l(b);b=0>=b?e(null,b):void 0!==c?"string"===typeof d?e(null,b).fill(c,d):e(null,b).fill(c):e(null,b);return b};f.allocUnsafe=function(b){return y(null,b)};f.allocUnsafeSlow=function(b){return y(null,b)};f.isBuffer=function(b){return!(null==b||!b._isBuffer)};f.compare=function(b,c){if(!f.isBuffer(b)||!f.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,a=c.length,e=0,m=Math.min(d,a);e<m;++e)if(b[e]!==
c[e]){d=b[e];a=c[e];break}return d<a?-1:a<d?1:0};f.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(b,c){if(!H(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return f.alloc(0);var d;if(void 0===c)for(d=c=0;d<b.length;++d)c+=b[d].length;var a=f.allocUnsafe(c),e=0;for(d=
0;d<b.length;++d){var m=b[d];if(!f.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(a,e);e+=m.length}return a};f.byteLength=r;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)d(this,c,c+1);return this};f.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=
4)d(this,c,c+3),d(this,c+1,c+2);return this};f.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?m(this,0,b):h.apply(this,arguments)};f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===f.compare(this,b)};f.prototype.inspect=function(){var b="",c=n.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};f.prototype.compare=
function(b,c,d,a,e){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===d&&(d=b?b.length:0);void 0===a&&(a=0);void 0===e&&(e=this.length);if(0>c||d>b.length||0>a||e>this.length)throw new RangeError("out of range index");if(a>=e&&c>=d)return 0;if(a>=e)return-1;if(c>=d)return 1;c>>>=0;d>>>=0;a>>>=0;e>>>=0;if(this===b)return 0;var m=e-a,h=d-c,k=Math.min(m,h);a=this.slice(a,e);b=b.slice(c,d);for(c=0;c<k;++c)if(a[c]!==b[c]){m=a[c];h=b[c];break}return m<h?-1:h<
m?1:0};f.prototype.indexOf=function(b,d,a){"string"===typeof d?(a=d,d=0):2147483647<d?d=2147483647:-2147483648>d&&(d=-2147483648);d>>=0;if(0===this.length||d>=this.length)return-1;0>d&&(d=Math.max(this.length+d,0));"string"===typeof b&&(b=f.from(b,a));if(f.isBuffer(b))return 0===b.length?-1:c(this,b,d,a);if("number"===typeof b)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,d):c(this,[b],d,a);throw new TypeError("val must be string, number or Buffer");
};f.prototype.includes=function(b,c,d){return-1!==this.indexOf(b,c,d)};f.prototype.write=function(b,c,d,a){if(void 0===c)a="utf8",d=this.length,c=0;else if(void 0===d&&"string"===typeof c)a=c,d=this.length,c=0;else if(isFinite(c))c|=0,isFinite(d)?(d|=0,void 0===a&&(a="utf8")):(a=d,d=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-c;if(void 0===d||d>e)d=e;if(0<b.length&&(0>d||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(e=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;d?(d=Number(d),d>a&&(d=a)):d=a;a=b.length;if(0!==a%2)throw Error("Invalid hex string");d>a/2&&(d=a/2);for(a=0;a<d;++a){e=parseInt(b.substr(2*a,2),16);if(isNaN(e)){b=a;break a}this[c+a]=e}b=a}return b;case "utf8":case "utf-8":return F(B(b,this.length-c),this,c,d);case "ascii":return F(O(b),this,c,d);case "binary":return F(O(b),this,c,d);case "base64":return F(D.toByteArray(A(b)),this,c,d);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
this.length-c;for(var f=void 0,f=e=void 0,m=[],h=0;h<b.length&&!(0>(a-=2));++h)f=b.charCodeAt(h),e=f>>8,f%=256,m.push(f),m.push(e);return F(m,this,c,d);default:if(e)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();e=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;f.prototype.slice=function(b,c){var d=this.length;b=~~b;c=void 0===c?d:~~c;0>b?(b+=d,0>b&&(b=0)):b>d&&(b=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<b&&(c=
b);if(f.TYPED_ARRAY_SUPPORT)d=this.subarray(b,c),d.__proto__=f.prototype;else for(var a=c-b,d=new f(a,void 0),e=0;e<a;++e)d[e]=this[e+b];return d};f.prototype.readUIntLE=function(b,c,d){b|=0;c|=0;d||q(b,c,this.length);d=this[b];for(var a=1,e=0;++e<c&&(a*=256);)d+=this[b+e]*a;return d};f.prototype.readUIntBE=function(b,c,d){b|=0;c|=0;d||q(b,c,this.length);d=this[b+--c];for(var a=1;0<c&&(a*=256);)d+=this[b+--c]*a;return d};f.prototype.readUInt8=function(b,c){c||q(b,1,this.length);return this[b]};f.prototype.readUInt16LE=
function(b,c){c||q(b,2,this.length);return this[b]|this[b+1]<<8};f.prototype.readUInt16BE=function(b,c){c||q(b,2,this.length);return this[b]<<8|this[b+1]};f.prototype.readUInt32LE=function(b,c){c||q(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};f.prototype.readUInt32BE=function(b,c){c||q(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};f.prototype.readIntLE=function(b,c,d){b|=0;c|=0;d||q(b,c,this.length);d=this[b];for(var a=1,e=0;++e<
c&&(a*=256);)d+=this[b+e]*a;d>=128*a&&(d-=Math.pow(2,8*c));return d};f.prototype.readIntBE=function(b,c,d){b|=0;c|=0;d||q(b,c,this.length);d=c;for(var a=1,e=this[b+--d];0<d&&(a*=256);)e+=this[b+--d]*a;e>=128*a&&(e-=Math.pow(2,8*c));return e};f.prototype.readInt8=function(b,c){c||q(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};f.prototype.readInt16LE=function(b,c){c||q(b,2,this.length);var d=this[b]|this[b+1]<<8;return d&32768?d|4294901760:d};f.prototype.readInt16BE=function(b,c){c||
q(b,2,this.length);var d=this[b+1]|this[b]<<8;return d&32768?d|4294901760:d};f.prototype.readInt32LE=function(b,c){c||q(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};f.prototype.readInt32BE=function(b,c){c||q(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};f.prototype.readFloatLE=function(b,c){c||q(b,4,this.length);return L.read(this,b,!0,23,4)};f.prototype.readFloatBE=function(b,c){c||q(b,4,this.length);return L.read(this,b,!1,23,4)};f.prototype.readDoubleLE=
function(b,c){c||q(b,8,this.length);return L.read(this,b,!0,52,8)};f.prototype.readDoubleBE=function(b,c){c||q(b,8,this.length);return L.read(this,b,!1,52,8)};f.prototype.writeUIntLE=function(b,c,d,a){b=+b;c|=0;d|=0;a||z(this,b,c,d,Math.pow(2,8*d)-1,0);a=1;var e=0;for(this[c]=b&255;++e<d&&(a*=256);)this[c+e]=b/a&255;return c+d};f.prototype.writeUIntBE=function(b,c,d,a){b=+b;c|=0;d|=0;a||z(this,b,c,d,Math.pow(2,8*d)-1,0);a=d-1;var e=1;for(this[c+a]=b&255;0<=--a&&(e*=256);)this[c+a]=b/e&255;return c+
d};f.prototype.writeUInt8=function(b,c,d){b=+b;c|=0;d||z(this,b,c,1,255,0);f.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};f.prototype.writeUInt16LE=function(b,c,d){b=+b;c|=0;d||z(this,b,c,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):C(this,b,c,!0);return c+2};f.prototype.writeUInt16BE=function(b,c,d){b=+b;c|=0;d||z(this,b,c,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):C(this,b,c,!1);return c+2};f.prototype.writeUInt32LE=function(c,d,a){c=
+c;d|=0;a||z(this,c,d,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255):b(this,c,d,!0);return d+4};f.prototype.writeUInt32BE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255):b(this,c,d,!1);return d+4};f.prototype.writeIntLE=function(b,c,d,a){b=+b;c|=0;a||(a=Math.pow(2,8*d-1),z(this,b,c,d,a-1,-a));a=0;var e=1,f=0;for(this[c]=b&255;++a<d&&(e*=256);)0>b&&
0===f&&0!==this[c+a-1]&&(f=1),this[c+a]=(b/e>>0)-f&255;return c+d};f.prototype.writeIntBE=function(b,c,d,a){b=+b;c|=0;a||(a=Math.pow(2,8*d-1),z(this,b,c,d,a-1,-a));a=d-1;var e=1,f=0;for(this[c+a]=b&255;0<=--a&&(e*=256);)0>b&&0===f&&0!==this[c+a+1]&&(f=1),this[c+a]=(b/e>>0)-f&255;return c+d};f.prototype.writeInt8=function(b,c,d){b=+b;c|=0;d||z(this,b,c,1,127,-128);f.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};f.prototype.writeInt16LE=function(b,c,d){b=+b;c|=0;
d||z(this,b,c,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):C(this,b,c,!0);return c+2};f.prototype.writeInt16BE=function(b,c,d){b=+b;c|=0;d||z(this,b,c,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):C(this,b,c,!1);return c+2};f.prototype.writeInt32LE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,4,2147483647,-2147483648);f.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24):b(this,c,d,!0);return d+4};f.prototype.writeInt32BE=
function(c,d,a){c=+c;d|=0;a||z(this,c,d,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);f.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255):b(this,c,d,!1);return d+4};f.prototype.writeFloatLE=function(b,c,d){return E(this,b,c,!0,d)};f.prototype.writeFloatBE=function(b,c,d){return E(this,b,c,!1,d)};f.prototype.writeDoubleLE=function(b,c,d){return I(this,b,c,!0,d)};f.prototype.writeDoubleBE=function(b,c,d){return I(this,b,c,!1,d)};f.prototype.copy=function(b,c,
d,a){d||(d=0);a||0===a||(a=this.length);c>=b.length&&(c=b.length);c||(c=0);0<a&&a<d&&(a=d);if(a===d||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-c<a-d&&(a=b.length-c+d);var e=a-d;if(this===b&&d<c&&c<a)for(a=e-1;0<=a;--a)b[a+c]=this[a+d];else if(1E3>e||!f.TYPED_ARRAY_SUPPORT)for(a=
0;a<e;++a)b[a+c]=this[a+d];else Uint8Array.prototype.set.call(b,this.subarray(d,d+e),c);return e};f.prototype.fill=function(b,c,d,a){if("string"===typeof b){"string"===typeof c?(a=c,c=0,d=this.length):"string"===typeof d&&(a=d,d=this.length);if(1===b.length){var e=b.charCodeAt(0);256>e&&(b=e)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!f.isEncoding(a))throw new TypeError("Unknown encoding: "+a);}else"number"===typeof b&&(b&=255);if(0>
c||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c>>>=0;d=void 0===d?this.length:d>>>0;b||(b=0);if("number"===typeof b)for(a=c;a<d;++a)this[a]=b;else for(b=f.isBuffer(b)?b:B((new f(b,a)).toString()),e=b.length,a=0;a<d-c;++a)this[a+c]=b[a%e];return this};var P=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":33,ieee754:81,isarray:87}],61:[function(a,g,
n){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function p(a,e){return a[0]-e[0]||a[1]-e[1]}function e(a,e,f){return e in a?a[e]:f}var f=a("./lib/monotone"),k=a("./lib/triangulation"),l=a("./lib/delaunay"),y=a("./lib/filter");g.exports=function(a,g,u){Array.isArray(g)?(u=u||{},g=g||[]):(u=g||{},g=[]);var r=!!e(u,"delaunay",!0),h=!!e(u,"interior",!0),d=!!e(u,"exterior",!0);u=!!e(u,"infinity",!1);if(!h&&!d||0===a.length)return[];var c=f(a,g);if(r||h!==d||u){g=k(a.length,g.map(t).sort(p));
for(var m=0;m<c.length;++m){var q=c[m];g.addTriangle(q[0],q[1],q[2])}r&&l(a,g);return d?h?u?y(g,0,u):g.cells():y(g,1,u):y(g,-1)}return c}},{"./lib/delaunay":62,"./lib/filter":63,"./lib/monotone":64,"./lib/triangulation":65}],62:[function(a,g,n){function t(a,f,k,l,g,v){var w=f.opposite(l,g);if(!(0>w)){if(g<l){var u=l;l=g;g=u;u=v;v=w;w=u}f.isConstraint(l,g)||0>p(a[l],a[g],a[v],a[w])&&k.push(l,g)}}var p=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(a,f){for(var k=[],l=a.length,
g=f.stars,v=0;v<l;++v)for(var w=g[v],u=1;u<w.length;u+=2){var r=w[u];if(!(r<v||f.isConstraint(v,r))){for(var h=w[u-1],d=-1,c=1;c<w.length;c+=2)if(w[c-1]===r){d=w[c];break}0>d||0>p(a[v],a[r],a[h],a[d])&&k.push(v,r)}}for(;0<k.length;){r=k.pop();v=k.pop();d=h=-1;w=g[v];for(l=1;l<w.length;l+=2)u=w[l-1],c=w[l],u===r?d=c:c===r&&(h=u);0>h||0>d||0<=p(a[v],a[r],a[h],a[d])||(f.flip(v,r),t(a,f,k,h,v,d),t(a,f,k,v,d,h),t(a,f,k,d,r,h),t(a,f,k,r,h,d))}}},{"binary-search-bounds":51,"robust-in-sphere":102}],63:[function(a,
g,n){function t(a,e,l,p,v,g,u){this.cells=a;this.neighbor=e;this.flags=p;this.constraint=l;this.active=v;this.next=g;this.boundary=u}function p(a,e){return a[0]-e[0]||a[1]-e[1]||a[2]-e[2]}var e=a("binary-search-bounds");g.exports=function(a,e,l){for(var g=a.cells(),v=g.length,w=0;w<v;++w){var u=g[w],r=u[0],h=u[1],d=u[2];h<d?h<r&&(u[0]=h,u[1]=d,u[2]=r):d<r&&(u[0]=d,u[1]=r,u[2]=h)}g.sort(p);for(var c=Array(v),w=0;w<c.length;++w)c[w]=0;var m=[],q=[],z=Array(3*v),n=Array(3*v),b=null;l&&(b=[]);d=new t(g,
z,n,c,m,q,b);for(w=0;w<v;++w)for(var u=g[w],x=0;3>x;++x){var r=u[x],h=u[(x+1)%3],E=z[3*w+x]=d.locate(h,r,a.opposite(h,r)),I=n[3*w+x]=a.isConstraint(r,h);0>E&&(I?q.push(w):(m.push(w),c[w]=1),l&&b.push([h,r,-1]))}if(0===e)return l?d.cells.concat(d.boundary):d.cells;v=1;w=d.active;u=d.next;a=d.flags;g=d.cells;r=d.constraint;for(h=d.neighbor;0<w.length||0<u.length;){for(;0<w.length;)if(c=w.pop(),a[c]!==-v)for(a[c]=v,m=0;3>m;++m)q=h[3*c+m],0<=q&&0===a[q]&&(r[3*c+m]?u.push(q):(w.push(q),a[q]=v));c=u;u=
w;w=c;u.length=0;v=-v}for(w=v=0;w<g.length;++w)a[w]===e&&(g[v++]=g[w]);g.length=v;return l?g.concat(d.boundary):g};t.prototype.locate=function(){var a=[0,0,0];return function(k,l,g){var v=k,w=l,u=g;l<g?l<k&&(v=l,w=g,u=k):g<k&&(v=g,w=k,u=l);if(0>v)return-1;a[0]=v;a[1]=w;a[2]=u;return e.eq(this.cells,a,p)}}()},{"binary-search-bounds":51}],64:[function(a,g,n){function t(a,e,f,k,h){this.a=a;this.b=e;this.idx=f;this.lowerIds=k;this.upperIds=h}function p(a,e,f,k){this.a=a;this.b=e;this.type=f;this.idx=
k}function e(a,e){var f=a.a[0]-e.a[0]||a.a[1]-e.a[1]||a.type-e.type;return f||0!==a.type&&(f=y(a.a,a.b,e.b))?f:a.idx-e.idx}function f(a,e){return y(a.a,a.b,e)}function k(a,e){var f;return(f=a.a[0]<e.a[0]?y(a.a,a.b,e.a):y(e.b,e.a,a.a))?f:(f=e.b[0]<a.b[0]?y(a.a,a.b,e.b):y(e.b,e.a,a.b))||a.idx-e.idx}var l=a("binary-search-bounds"),y=a("robust-orientation")[3];g.exports=function(a,g){for(var u=a.length,r=g.length,h=[],d=0;d<u;++d)h.push(new p(a[d],null,0,d));for(d=0;d<r;++d){var c=g[d],u=a[c[0]],c=a[c[1]];
u[0]<c[0]?h.push(new p(u,c,2,d),new p(c,u,1,d)):u[0]>c[0]&&h.push(new p(c,u,2,d),new p(u,c,1,d))}h.sort(e);d=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);r=[new t([d,1],[d,0],-1,[],[],[],[])];u=[];d=0;for(c=h.length;d<c;++d){var m=h[d],q=m.type;if(0===q)for(var q=u,z=r,n=a,b=m.a,m=m.idx,x=l.lt(z,b,f),E=l.gt(z,b,f);x<E;++x){for(var I=z[x],A=I.lowerIds,B=A.length;1<B&&0<y(n[A[B-2]],n[A[B-1]],b);)q.push([A[B-1],A[B-2],m]),--B;A.length=B;A.push(m);I=I.upperIds;for(B=I.length;1<B&&0>y(n[I[B-2]],n[I[B-
1]],b);)q.push([I[B-2],I[B-1],m]),--B;I.length=B;I.push(m)}else 2===q?(q=r,z=m,n=l.le(q,z,k),b=q[n],m=b.upperIds,E=m[m.length-1],b.upperIds=[E],q.splice(n+1,0,new t(z.a,z.b,z.idx,[E],m))):(q=r,z=m,n=z.a,z.a=z.b,z.b=n,z=l.eq(q,z,k),q[z-1].upperIds=q[z].upperIds,q.splice(z,1))}return u}},{"binary-search-bounds":51,"robust-orientation":103}],65:[function(a,g,n){function t(a,e){this.stars=a;this.edges=e}function p(a,e,l){for(var p=1,g=a.length;p<g;p+=2)if(a[p-1]===e&&a[p]===l){a[p-1]=a[g-2];a[p]=a[g-
1];a.length=g-2;break}}var e=a("binary-search-bounds");g.exports=function(a,e){for(var l=Array(a),p=0;p<a;++p)l[p]=[];return new t(l,e)};a=t.prototype;a.isConstraint=function(){function a(e,f){return e[0]-f[0]||e[1]-f[1]}var k=[0,0];return function(l,p){k[0]=Math.min(l,p);k[1]=Math.max(l,p);return 0<=e.eq(this.edges,k,a)}}();a.removeTriangle=function(a,e,l){var g=this.stars;p(g[a],e,l);p(g[e],l,a);p(g[l],a,e)};a.addTriangle=function(a,e,l){var p=this.stars;p[a].push(e,l);p[e].push(l,a);p[l].push(a,
e)};a.opposite=function(a,e){for(var l=this.stars[e],p=1,g=l.length;p<g;p+=2)if(l[p]===a)return l[p-1];return-1};a.flip=function(a,e){var l=this.opposite(a,e),p=this.opposite(e,a);this.removeTriangle(a,e,l);this.removeTriangle(e,a,p);this.addTriangle(a,p,l);this.addTriangle(e,l,p)};a.edges=function(){for(var a=this.stars,e=[],l=0,p=a.length;l<p;++l)for(var g=a[l],t=0,u=g.length;t<u;t+=2)e.push([g[t],g[t+1]]);return e};a.cells=function(){for(var a=this.stars,e=[],l=0,p=a.length;l<p;++l)for(var g=a[l],
t=0,u=g.length;t<u;t+=2){var r=g[t],h=g[t+1];l<Math.min(r,h)&&e.push([l,r,h])}return e}},{"binary-search-bounds":51}],66:[function(a,g,n){function t(a){var b=c(a);a=d(h(b),a);return 0>a?[b,q(b,Infinity)]:0<a?[q(b,-Infinity),b]:[b,b]}function p(c,b,d){var a=[];u(d,function(d,e){var f=b[d],m=b[e];f[0]!==m[0]&&f[0]!==m[1]&&f[1]!==m[0]&&f[1]!==m[1]&&r(c[f[0]],c[f[1]],c[m[0]],c[m[1]])&&a.push([d,e])});return a}function e(c,b,d,a){var e=[];u(d,a,function(d,a){var f=b[d];if(f[0]!==a&&f[1]!==a){var m=c[a];
r(c[f[0]],c[f[1]],m,m)&&e.push([d,a])}});return e}function f(c,b,a,e,f){function q(b){if(b>=c.length)return k[b-c.length];b=c[b];return[h(b[0]),h(b[1])]}for(var k=[],l=0;l<a.length;++l){var p=a[l],r=p[0],p=p[1],u=b[r],g=b[p];if(u=z(m(c[u[0]]),m(c[u[1]]),m(c[g[0]]),m(c[g[1]])))g=k.length+c.length,k.push(u),e.push([r,g],[p,g])}e.sort(function(b,c){if(b[0]!==c[0])return b[0]-c[0];var a=q(b[1]),e=q(c[1]);return d(a[0],e[0])||d(a[1],e[1])});for(l=e.length-1;0<=l;--l){p=e[l];r=p[0];u=b[r];g=u[0];a=u[1];
var v=c[g],t=c[a];0>(v[0]-t[0]||v[1]-t[1])&&(v=g,g=a,a=v);u[0]=g;var g=u[1]=p[1],w;for(f&&(w=u[2]);0<l&&e[l-1][0]===r;)p=e[--l],p=p[1],f?b.push([g,p,w]):b.push([g,p]),g=p;f?b.push([g,a,w]):b.push([g,a])}return k}function k(d,b,a){for(var e=d.length+b.length,f=new w(e),m=0;m<b.length;++m){var h=b[m],q=t(h[0]),k=t(h[1]);a.push([q[0],k[0],q[1],k[1]]);d.push([c(h[0]),c(h[1])])}u(a,function(b,c){f.link(b,c)});b=0;a=!0;h=Array(e);for(m=0;m<e;++m)f.find(m)===m?(h[m]=b,d[b++]=d[m]):(a=!1,h[m]=-1);d.length=
b;if(a)return null;for(m=0;m<e;++m)0>h[m]&&(h[m]=h[f.find(m)]);return h}function l(c,b){return c[0]-b[0]||c[1]-b[1]}function y(c,b){var d=c[0]-b[0]||c[1]-b[1];return d?d:c[2]<b[2]?-1:c[2]>b[2]?1:0}function v(c,b,d){for(var a=Array(b.length),m=0;m<b.length;++m){var h=b[m],q=c[h[0]],h=c[h[1]];a[m]=[Math.min(q[0],h[0]),Math.min(q[1],h[1]),Math.max(q[0],h[0]),Math.max(q[1],h[1])]}m=p(c,b,a);q=Array(c.length);for(h=0;h<c.length;++h){var r=c[h];q[h]=[r[0],r[1],r[0],r[1]]}a=e(c,b,a,q);h=f(c,b,m,a,d);c=k(c,
h,q);if(0!==b.length){if(c)for(q=0;q<b.length;++q){var h=b[q],r=c[h[0]],u=c[h[1]];h[0]=Math.min(r,u);h[1]=Math.max(r,u)}else for(q=0;q<b.length;++q)h=b[q],r=h[0],u=h[1],h[0]=Math.min(r,u),h[1]=Math.max(r,u);d?b.sort(y):b.sort(l);for(q=h=1;q<b.length;++q)if(r=b[q-1],u=b[q],u[0]!==r[0]||u[1]!==r[1]||d&&u[2]!==r[2])b[h++]=u;b.length=h}return c?!0:0<m.length||0<a.length}g.exports=function(c,b,d){var a=!1,e;if(d){e=b;for(var f=Array(b.length),m=0;m<b.length;++m){var h=b[m];f[m]=[h[0],h[1],d[m]]}b=f}for(;v(c,
b,!!d);)a=!0;if(d&&a)for(e.length=0,m=d.length=0;m<b.length;++m)h=b[m],e.push([h[0],h[1]]),d.push(h[2]);return a};var w=a("union-find"),u=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),h=a("big-rat"),d=a("big-rat/cmp"),c=a("big-rat/to-float"),m=a("rat-vec"),q=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":67,"big-rat":37,"big-rat/cmp":35,"big-rat/to-float":50,"box-intersect":53,"compare-cell":69,nextafter:90,"rat-vec":99,"robust-segment-intersect":106,
"union-find":122}],67:[function(a,g,n){function t(a,e){return f(p(a[0],e[1]),p(a[1],e[0]))}g.exports=function(a,f,p,h){f=l(f,a);var d=l(h,p);h=t(f,d);if(0===k(h))return null;p=l(a,p);p=t(d,p);p=e(p,h);return y(a,v(f,p))};var p=a("big-rat/mul"),e=a("big-rat/div"),f=a("big-rat/sub"),k=a("big-rat/sign"),l=a("rat-vec/sub"),y=a("rat-vec/add"),v=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":36,"big-rat/mul":46,"big-rat/sign":48,"big-rat/sub":49,"big-rat/to-float":50,"rat-vec/add":98,"rat-vec/muls":100,
"rat-vec/sub":101}],68:[function(a,g,n){function t(a,e,p){var u=f(a[0],-e[0]);a=f(a[1],-e[1]);var r=f(p[0],-e[0]);e=f(p[1],-e[1]);u=l(k(u,r),k(a,e));return 0<=u[u.length-1]}g.exports=function(a,f,k,l){var r=p(f,k,l);if(0===r){var r=e(p(a,f,k)),h=e(p(a,f,l));return r===h?0===r&&(k=t(a,f,k),a=t(a,f,l),k!==a)?k?1:-1:0:0===h?0<r?-1:t(a,f,l)?-1:1:0===r?0<h?1:t(a,f,k)?1:-1:e(h-r)}h=p(a,f,k);return 0<h?0<r&&0<p(a,f,l)?1:-1:0>h?0<r||0<p(a,f,l)?1:-1:0<p(a,f,l)?1:t(a,f,k)?1:-1};var p=a("robust-orientation"),
e=a("signum"),f=a("two-sum"),k=a("robust-product"),l=a("robust-sum")},{"robust-orientation":103,"robust-product":104,"robust-sum":108,signum:109,"two-sum":120}],69:[function(a,g,n){function t(a,f){return a-f}g.exports=function(a,f){var k=a.length,l=a.length-f.length;if(l)return l;switch(k){case 0:return 0;case 1:return a[0]-f[0];case 2:return a[0]+a[1]-f[0]-f[1]||p(a[0],a[1])-p(f[0],f[1]);case 3:var k=a[0]+a[1],g=f[0]+f[1];if(l=k+a[2]-(g+f[2]))return l;var l=p(a[0],a[1]),v=p(f[0],f[1]);return p(l,
a[2])-p(v,f[2])||p(l+a[2],k)-p(v+f[2],g);case 4:var l=a[0],k=a[1],g=a[2],v=a[3],n=f[0],u=f[1],r=f[2],h=f[3];return l+k+g+v-(n+u+r+h)||p(l,k,g,v)-p(n,u,r,h,n)||p(l+k,l+g,l+v,k+g,k+v,g+v)-p(n+u,n+r,n+h,u+r,u+h,r+h)||p(l+k+g,l+k+v,l+g+v,k+g+v)-p(n+u+r,n+u+h,n+r+h,u+r+h);default:g=a.slice().sort(t);v=f.slice().sort(t);for(n=0;n<k;++n)if(l=g[n]-v[n])return l;return 0}};var p=Math.min},{}],70:[function(a,g,n){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var p=a("./lib/thunk.js");g.exports=function(a){var f=new t;f.pre=a.pre;f.body=a.body;f.post=a.post;var k=a.args.slice(0);f.argTypes=k;for(var l=0;l<k.length;++l){var g=k[l];if("array"===g||"object"===typeof g&&g.blockIndices){f.argTypes[l]="array";f.arrayArgs.push(l);f.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);f.shimArgs.push("array"+l);if(l<
f.pre.args.length&&0<f.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<f.post.args.length&&0<f.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)f.scalarArgs.push(l),f.shimArgs.push("scalar"+l);else if("index"===g){f.indexArgs.push(l);if(l<f.pre.args.length&&0<f.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<f.body.args.length&&f.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<f.post.args.length&&0<f.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){f.shapeArgs.push(l);if(l<f.pre.args.length&&f.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<f.body.args.length&&f.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<f.post.args.length&&f.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)f.argTypes[l]="offset",f.offsetArgs.push({array:g.array,offset:g.offset}),f.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+k[l]);}if(0>=f.arrayArgs.length)throw Error("cwise: No array arguments specified");if(f.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(f.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(f.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
f.debug=!!a.printCode||!!a.debug;f.funcName=a.funcName||"cwise";f.blockSize=a.blockSize||64;return p(f)}},{"./lib/thunk.js":72}],71:[function(a,g,n){function t(a,e,f){var k=a.length,p=e.arrayArgs.length;e=0<e.indexArgs.length;var r=[],h=[],d=0,c=0,m,q;for(m=0;m<k;++m)h.push(["i",m,"=0"].join(""));for(q=0;q<p;++q)for(m=0;m<k;++m)c=d,d=a[m],0===m?h.push(["d",q,"s",m,"=t",q,"p",d].join("")):h.push(["d",q,"s",m,"=(t",q,"p",d,"-s",c,"*t",q,"p",c,")"].join(""));r.push("var "+h.join(","));for(m=k-1;0<=m;--m)d=
a[m],r.push(["for(i",m,"=0;i",m,"<s",d,";++i",m,"){"].join(""));r.push(f);for(m=0;m<k;++m){c=d;d=a[m];for(q=0;q<p;++q)r.push(["p",q,"+=d",q,"s",m].join(""));e&&(0<m&&r.push(["index[",c,"]-=s",c].join("")),r.push(["++index[",d,"]"].join("")));r.push("}")}return r.join("\n")}function p(a,e,f,k){for(var p=e.length,r=f.arrayArgs.length,h=f.blockSize,d=0<f.indexArgs.length,c=[],m=0;m<r;++m)c.push(["var offset",m,"=p",m].join(""));for(m=a;m<p;++m)c.push(["for(var j"+m+"=SS[",e[m],"]|0;j",m,">0;){"].join("")),
c.push(["if(j",m,"<",h,"){"].join("")),c.push(["s",e[m],"=j",m].join("")),c.push(["j",m,"=0"].join("")),c.push(["}else{s",e[m],"=",h].join("")),c.push(["j",m,"-=",h,"}"].join("")),d&&c.push(["index[",e[m],"]=j",m].join(""));for(m=0;m<r;++m){h=["offset"+m];for(d=a;d<p;++d)h.push(["j",d,"*t",m,"p",e[d]].join(""));c.push(["p",m,"=(",h.join("+"),")"].join(""))}c.push(t(e,f,k));for(m=a;m<p;++m)c.push("}");return c.join("\n")}function e(a,e,f){for(var k=a.body,p=[],r=[],h=0;h<a.args.length;++h){var d=a.args[h];
if(!(0>=d.count)){var c=new RegExp(d.name,"g"),m="",q=e.arrayArgs.indexOf(h);switch(e.argTypes[h]){case "offset":var g=e.offsetArgIndex.indexOf(h),q=e.offsetArgs[g].array,m="+q"+g;case "array":var m="p"+q+m,t="l"+h,g="a"+q;if(0===e.arrayBlockIndices[q])1===d.count?"generic"===f[q]?d.lvalue?(p.push(["var ",t,"=",g,".get(",m,")"].join("")),k=k.replace(c,t),r.push([g,".set(",m,",",t,")"].join(""))):k=k.replace(c,[g,".get(",m,")"].join("")):k=k.replace(c,[g,"[",m,"]"].join("")):"generic"===f[q]?(p.push(["var ",
t,"=",g,".get(",m,")"].join("")),k=k.replace(c,t),d.lvalue&&r.push([g,".set(",m,",",t,")"].join(""))):(p.push(["var ",t,"=",g,"[",m,"]"].join("")),k=k.replace(c,t),d.lvalue&&r.push([g,"[",m,"]=",t].join("")));else{c=[d.name];d=[m];for(m=0;m<Math.abs(e.arrayBlockIndices[q]);m++)c.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(m+1)+"*t"+q+"b"+m);c=new RegExp(c.join(""),"g");m=d.join("+");if("generic"===f[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");k=k.replace(c,[g,"[",
m,"]"].join(""))}break;case "scalar":k=k.replace(c,"Y"+e.scalarArgs.indexOf(h));break;case "index":k=k.replace(c,"index");break;case "shape":k=k.replace(c,"shape")}}}return[p.join("\n"),k,r.join("\n")].join("\n").trim()}function f(a){for(var e=Array(a.length),f=!0,k=0;k<a.length;++k){var p=a[k],r=p.match(/\d+/),r=r?r[0]:"";0===p.charAt(0)?e[k]="u"+p.charAt(1)+r:e[k]=p.charAt(0)+r;0<k&&(f=f&&e[k]===e[k-1])}return f?e[0]:e.join("")}var k=a("uniq");g.exports=function(a,g){for(var v=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,n=Array(a.arrayArgs.length),u=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)u[r]=g[2*r],n[r]=g[2*r+1];for(var h=[],d=[],c=[],m=[],q=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(c.push(0),m.push(v),h.push(v),d.push(v+a.arrayBlockIndices[r])):(c.push(a.arrayBlockIndices[r]),m.push(a.arrayBlockIndices[r]+v),h.push(0),d.push(a.arrayBlockIndices[r]));for(var z=[],C=0;C<n[r].length;C++)c[r]<=n[r][C]&&n[r][C]<m[r]&&z.push(n[r][C]-c[r]);q.push(z)}d=["SS"];m=["'use strict'"];z=[];
for(C=0;C<v;++C)z.push(["s",C,"=SS[",C,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){d.push("a"+r);d.push("t"+r);d.push("p"+r);for(C=0;C<v;++C)z.push(["t",r,"p",C,"=t",r,"[",c[r]+C,"]"].join(""));for(C=0;C<Math.abs(a.arrayBlockIndices[r]);++C)z.push(["t",r,"b",C,"=t",r,"[",h[r]+C,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)d.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){C=Array(v);for(r=0;r<v;++r)C[r]="0";z.push(["index=[",C.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){h=a.offsetArgs[r];c=[];for(C=0;C<h.offset.length;++C)0!==h.offset[C]&&(1===h.offset[C]?c.push(["t",h.array,"p",C].join("")):c.push([h.offset[C],"*t",h.array,"p",C].join("")));0===c.length?z.push("q"+r+"=0"):z.push(["q",r,"=",c.join("+")].join(""))}r=k([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);m.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)m.push("p"+r+"|=0");3<a.pre.body.length&&m.push(e(a.pre,a,u));r=e(a.body,
a,u);a:for(C=0,z=q[0].length;C<z;){for(h=1;h<q.length;++h)if(q[h][C]!==q[0][C])break a;++C}C<v?m.push(p(C,q[0],a,r)):m.push(t(q[0],a,r));3<a.post.body.length&&m.push(e(a.post,a,u));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+m.join("\n")+"\n----------");v=[a.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",C,f(u)].join("");return(new Function(["function ",v,"(",d.join(","),"){",m.join("\n"),"} return ",v].join("")))()}},{uniq:123}],72:[function(a,g,n){var t=a("./compile.js");
g.exports=function(a){var e=["'use strict'","var CACHED={}"],f=[];e.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var k=[],l=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],v=[],n=[],u=0;u<a.arrayArgs.length;++u){var r=a.arrayArgs[u];f.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));k.push("t"+r);k.push("r"+r);l.push("t"+r);l.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<u&&(v.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[u]))),n.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[u])+"]"))}1<a.arrayArgs.length&&(e.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
e.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+n.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(u=0;u<a.scalarArgs.length;++u)g.push("scalar"+a.scalarArgs[u]);f.push(["type=[",l.join(","),"].join()"].join(""));f.push("proc=CACHED[type]");e.push("var "+f.join(","));e.push(["if(!proc){CACHED[type]=proc=compile([",k.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");return(new Function("compile",e.join("\n")))(t.bind(void 0,a))}},{"./compile.js":71}],73:[function(a,g,n){(function(a){var p=!1;if("undefined"!==typeof Float64Array){var e=new Float64Array(1),f=new Uint32Array(e.buffer);e[0]=1;p=!0;1072693248===f[1]?(g.exports=function(a){e[0]=a;return[f[0],f[1]]},g.exports.pack=function(a,k){f[0]=a;f[1]=k;return e[0]},g.exports.lo=function(a){e[0]=a;return f[0]},g.exports.hi=
function(a){e[0]=a;return f[1]}):1072693248===f[0]?(g.exports=function(a){e[0]=a;return[f[1],f[0]]},g.exports.pack=function(a,k){f[1]=a;f[0]=k;return e[0]},g.exports.lo=function(a){e[0]=a;return f[1]},g.exports.hi=function(a){e[0]=a;return f[0]}):p=!1}if(!p){var k=new a(8);g.exports=function(a){k.writeDoubleLE(a,0,!0);return[k.readUInt32LE(0,!0),k.readUInt32LE(4,!0)]};g.exports.pack=function(a,e){k.writeUInt32LE(a,0,!0);k.writeUInt32LE(e,4,!0);return k.readDoubleLE(0,!0)};g.exports.lo=function(a){k.writeDoubleLE(a,
0,!0);return k.readUInt32LE(0,!0)};g.exports.hi=function(a){k.writeDoubleLE(a,0,!0);return k.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var e=g.exports.lo(a);a=g.exports.hi(a);var f=a&1048575;a&2146435072&&(f+=1048576);return[e,f]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:60}],74:[function(a,g,n){function t(a,
e,f){var k=a[f]|0;if(0>=k)return[];var l=Array(k),g;if(f===a.length-1)for(g=0;g<k;++g)l[g]=e;else for(g=0;g<k;++g)l[g]=t(a,e,f+1);return l}g.exports=function(a,e){"undefined"===typeof e&&(e=0);switch(typeof a){case "number":if(0<a){var f=a|0,k=e,l,g;l=Array(f);for(g=0;g<f;++g)l[g]=k;return l}break;case "object":if("number"===typeof a.length)return t(a,e,0)}return[]}},{}],75:[function(a,g,n){g.exports=function(a,e){var f=a.length;if("number"!==typeof e){for(var k=e=0;k<f;++k){var l=a[k];e=Math.max(e,
l[0],l[1])}e=(e|0)+1}e|=0;for(var g=Array(e),k=0;k<e;++k)g[k]=[];for(k=0;k<f;++k)l=a[k],g[l[0]].push(l[1]),g[l[1]].push(l[0]);for(f=0;f<e;++f)t(g[f],function(a,e){return a-e});return g};var t=a("uniq")},{uniq:123}],76:[function(a,g,n){function t(a,d,c,e,f,k){this._color=a;this.key=d;this.value=c;this.left=e;this.right=f;this._count=k}function p(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function e(a,d){return new t(a,d.key,d.value,d.left,d.right,d._count)}function f(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function k(a,d){this._compare=a;this.root=d}function l(a,d){if(d.left){var c=l(a,d.left);if(c)return c}if(c=a(d.key,d.value))return c;if(d.right)return l(a,d.right)}function y(a,d,c,e){if(0>=d(a,e.key)){if(e.left){var f=y(a,d,c,e.left);if(f)return f}if(f=c(e.key,e.value))return f}if(e.right)return y(a,d,c,e.right)}function v(a,d,c,e,f){var k=c(a,f.key),p=c(d,f.key);if(0>=k&&(f.left&&(k=v(a,d,c,e,f.left))||0<p&&(k=e(f.key,f.value))))return k;if(0<
p&&f.right)return v(a,d,c,e,f.right)}function w(a,d){this.tree=a;this._stack=d}function u(a,d){a.key=d.key;a.value=d.value;a.left=d.left;a.right=d.right;a._color=d._color;a._count=d._count}function r(a,d){return a<d?-1:a>d?1:0}g.exports=function(a){return new k(a||r,null)};a=k.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(d,c){a.push(d)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(d,c){a.push(c)});return a}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,d){for(var c=this._compare,m=this.root,q=[],p=[];m;){var l=c(a,m.key);q.push(m);p.push(l);m=0>=l?m.left:m.right}q.push(new t(0,a,d,null,null,1));for(l=q.length-2;0<=l;--l)m=q[l],q[l]=0>=p[l]?new t(m._color,m.key,m.value,q[l+1],m.right,m._count+1):new t(m._color,m.key,m.value,m.left,q[l+1],m._count+1);for(l=q.length-1;1<l;--l){p=q[l-1];m=q[l];if(1===p._color||1===m._color)break;var b=q[l-2];
if(b.left===p)if(p.left===m){var g=b.right;if(g&&0===g._color)p._color=1,b.right=e(1,g),b._color=0,--l;else{b._color=0;b.left=p.right;p._color=1;p.right=b;q[l-2]=p;q[l-1]=m;f(b);f(p);3<=l&&(l=q[l-3],l.left===b?l.left=p:l.right=p);break}}else if((g=b.right)&&0===g._color)p._color=1,b.right=e(1,g),b._color=0,--l;else{p.right=m.left;b._color=0;b.left=m.right;m._color=1;m.left=p;m.right=b;q[l-2]=m;q[l-1]=p;f(b);f(p);f(m);3<=l&&(l=q[l-3],l.left===b?l.left=m:l.right=m);break}else if(p.right===m)if((g=b.left)&&
0===g._color)p._color=1,b.left=e(1,g),b._color=0,--l;else{b._color=0;b.right=p.left;p._color=1;p.left=b;q[l-2]=p;q[l-1]=m;f(b);f(p);3<=l&&(l=q[l-3],l.right===b?l.right=p:l.left=p);break}else if((g=b.left)&&0===g._color)p._color=1,b.left=e(1,g),b._color=0,--l;else{p.left=m.right;b._color=0;b.right=m.left;m._color=1;m.right=p;m.left=b;q[l-2]=m;q[l-1]=p;f(b);f(p);f(m);3<=l&&(l=q[l-3],l.right===b?l.right=m:l.left=m);break}}q[0]._color=1;return new k(c,q[0])};a.forEach=function(a,d,c){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return y(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,c)))return v(d,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.left;return new w(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.right;return new w(this,a)}});a.at=function(a){if(0>a)return new w(this,[]);for(var d=this.root,c=[];;){c.push(d);if(d.left){if(a<d.left._count){d=d.left;continue}a-=
d.left._count}if(!a)return new w(this,c);--a;if(d.right){if(a>=d.right._count)break;d=d.right}else break}return new w(this,[])};a.ge=function(a){for(var d=this._compare,c=this.root,e=[],f=0;c;){var k=d(a,c.key);e.push(c);0>=k&&(f=e.length);c=0>=k?c.left:c.right}e.length=f;return new w(this,e)};a.gt=function(a){for(var d=this._compare,c=this.root,e=[],f=0;c;){var k=d(a,c.key);e.push(c);0>k&&(f=e.length);c=0>k?c.left:c.right}e.length=f;return new w(this,e)};a.lt=function(a){for(var d=this._compare,
c=this.root,e=[],f=0;c;){var k=d(a,c.key);e.push(c);0<k&&(f=e.length);c=0>=k?c.left:c.right}e.length=f;return new w(this,e)};a.le=function(a){for(var d=this._compare,c=this.root,e=[],f=0;c;){var k=d(a,c.key);e.push(c);0<=k&&(f=e.length);c=0>k?c.left:c.right}e.length=f;return new w(this,e)};a.find=function(a){for(var d=this._compare,c=this.root,e=[];c;){var f=d(a,c.key);e.push(c);if(0===f)return new w(this,e);c=0>=f?c.left:c.right}return new w(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var d=this._compare,c=this.root;c;){var e=d(a,c.key);if(0===e)return c.value;c=0>=e?c.left:c.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var d=
Array(a.length),c=a[a.length-1];d[d.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var m=a.length-2;0<=m;--m)c=a[m],d[m]=c.left===a[m+1]?new t(c._color,c.key,c.value,d[m+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,d[m+1],c._count);c=d[d.length-1];if(c.left&&c.right){a=d.length;for(c=c.left;c.right;)d.push(c),c=c.right;m=d[a-1];d.push(new t(c._color,m.key,m.value,c.left,c.right,c._count));d[a-1].key=c.key;d[a-1].value=c.value;for(m=d.length-2;m>=a;--m)c=d[m],d[m]=
new t(c._color,c.key,c.value,c.left,d[m+1],c._count);d[a-1].left=d[a]}c=d[d.length-1];if(0===c._color)for(m=d[d.length-2],m.left===c?m.left=null:m.right===c&&(m.right=null),d.pop(),m=0;m<d.length;++m)d[m]._count--;else if(c.left||c.right)for(c.left?u(c,c.left):c.right&&u(c,c.right),c._color=1,m=0;m<d.length-1;++m)d[m]._count--;else{if(1===d.length)return new k(this.tree._compare,null);for(m=0;m<d.length;++m)d[m]._count--;for(var m=d[d.length-2],q,l,g,b=d.length-1;0<=b;--b){a=d[b];if(0===b){a._color=
1;break}q=d[b-1];if(q.left===a){l=q.right;if(l.right&&0===l.right._color){l=q.right=p(l);g=l.right=p(l.right);q.right=l.left;l.left=q;l.right=g;l._color=q._color;a._color=1;q._color=1;g._color=1;f(q);f(l);if(1<b){var r=d[b-2];r.left===q?r.left=l:r.right=l}d[b-1]=l;break}else if(l.left&&0===l.left._color){l=q.right=p(l);g=l.left=p(l.left);q.right=g.left;l.left=g.right;g.left=q;g.right=l;g._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(g);1<b&&(r=d[b-2],r.left===q?r.left=g:r.right=g);
d[b-1]=g;break}if(1===l._color)if(0===q._color){q._color=1;q.right=e(0,l);break}else q.right=e(0,l);else l=p(l),q.right=l.left,l.left=q,l._color=q._color,q._color=0,f(q),f(l),1<b&&(r=d[b-2],r.left===q?r.left=l:r.right=l),d[b-1]=l,d[b]=q,b+1<d.length?d[b+1]=a:d.push(a),b+=2}else{l=q.left;if(l.left&&0===l.left._color){l=q.left=p(l);g=l.left=p(l.left);q.left=l.right;l.right=q;l.left=g;l._color=q._color;a._color=1;q._color=1;g._color=1;f(q);f(l);1<b&&(r=d[b-2],r.right===q?r.right=l:r.left=l);d[b-1]=l;
break}else if(l.right&&0===l.right._color){l=q.left=p(l);g=l.right=p(l.right);q.left=g.right;l.right=g.left;g.right=q;g.left=l;g._color=q._color;q._color=1;l._color=1;a._color=1;f(q);f(l);f(g);1<b&&(r=d[b-2],r.right===q?r.right=g:r.left=g);d[b-1]=g;break}if(1===l._color)if(0===q._color){q._color=1;q.left=e(0,l);break}else q.left=e(0,l);else l=p(l),q.left=l.right,l.right=q,l._color=q._color,q._color=0,f(q),f(l),1<b&&(r=d[b-2],r.right===q?r.right=l:r.left=l),d[b-1]=l,d[b]=q,b+1<d.length?d[b+1]=a:d.push(a),
b+=2}}m.left===c?m.left=null:m.right=null}return new k(this.tree._compare,d[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-
1].left._count);for(var c=d.length-2;0<=c;--c)d[c+1]===d[c].right&&(++a,d[c].left&&(a+=d[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===
a[d])return!0;return!1}});a.update=function(a){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var c=Array(d.length),e=d[d.length-1];c[c.length-1]=new t(e._color,e.key,a,e.left,e.right,e._count);for(a=d.length-2;0<=a;--a)e=d[a],c[a]=e.left===d[a+1]?new t(e._color,e.key,e.value,c[a+1],e.right,e._count):new t(e._color,e.key,e.value,e.left,c[a+1],e._count);return new k(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=
d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-1].left===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}})},{}],77:[function(a,g,n){function t(a){if(0>a)return Number("0/0");for(var k=e[0],l=e.length-1;0<l;--l)k+=e[l]/(a+l);l=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(l)-l+Math.log(k)-
Math.log(a)}var p=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],e=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function k(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*k(1-a));if(100<a)return Math.exp(t(a));--a;for(var e=p[0],g=1;9>g;g++)e+=p[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*e};g.exports.log=t},{}],78:[function(a,g,n){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],79:[function(a,g,n){var t=a("./identity");g.exports=function(a,e,f,k){var l,g,n,w,u,
r,h,d,c=e[0],m=e[1];e=e[2];n=k[0];w=k[1];g=k[2];h=f[0];k=f[1];l=f[2];if(1E-6>Math.abs(c-h)&&1E-6>Math.abs(m-k)&&1E-6>Math.abs(e-l))return t(a);f=c-h;k=m-k;h=e-l;d=1/Math.sqrt(f*f+k*k+h*h);f*=d;k*=d;h*=d;l=w*h-g*k;g=g*f-n*h;n=n*k-w*f;(d=Math.sqrt(l*l+g*g+n*n))?(d=1/d,l*=d,g*=d,n*=d):n=g=l=0;w=k*n-h*g;u=h*l-f*n;r=f*g-k*l;(d=Math.sqrt(w*w+u*u+r*r))?(d=1/d,w*=d,u*=d,r*=d):r=u=w=0;a[0]=l;a[1]=w;a[2]=f;a[3]=0;a[4]=g;a[5]=u;a[6]=k;a[7]=0;a[8]=n;a[9]=r;a[10]=h;a[11]=0;a[12]=-(l*c+g*m+n*e);a[13]=-(w*c+u*m+
r*e);a[14]=-(f*c+k*m+h*e);a[15]=1;return a}},{"./identity":78}],80:[function(a,g,n){g.exports=function(a,g,e,f,k){g=1/Math.tan(g/2);var l=1/(f-k);a[0]=g/e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*f*l;a[15]=0;return a}},{}],81:[function(a,g,n){n.read=function(a,g,e,f,k){var l;l=8*k-f-1;var n=(1<<l)-1,v=n>>1,w=-7;k=e?k-1:0;var u=e?-1:1,r=a[g+k];k+=u;e=r&(1<<-w)-1;r>>=-w;for(w+=l;0<w;e=256*e+a[g+k],k+=u,w-=8);l=e&(1<<-w)-1;e>>=-w;
for(w+=f;0<w;l=256*l+a[g+k],k+=u,w-=8);if(0===e)e=1-v;else{if(e===n)return l?NaN:Infinity*(r?-1:1);l+=Math.pow(2,f);e-=v}return(r?-1:1)*l*Math.pow(2,e-f)};n.write=function(a,g,e,f,k,l){var n,v=8*l-k-1,w=(1<<v)-1,u=w>>1,r=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;l=f?0:l-1;var h=f?1:-1,d=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,f=w):(f=Math.floor(Math.log(g)/Math.LN2),1>g*(n=Math.pow(2,-f))&&(f--,n*=2),g=1<=f+u?g+r/n:g+r*Math.pow(2,1-u),2<=g*n&&(f++,n/=2),f+u>=w?(g=
0,f=w):1<=f+u?(g=(g*n-1)*Math.pow(2,k),f+=u):(g=g*Math.pow(2,u-1)*Math.pow(2,k),f=0));for(;8<=k;a[e+l]=g&255,l+=h,g/=256,k-=8);f=f<<k|g;for(v+=k;0<v;a[e+l]=f&255,l+=h,f/=256,v-=8);a[e+l-h]|=128*d}},{}],82:[function(a,g,n){function t(a,d,e,f,h){this.mid=a;this.left=d;this.right=e;this.leftPoints=f;this.rightPoints=h;this.count=(d?d.count:0)+(e?e.count:0)+f.length}function p(a,d){a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function e(a,
d){var e=r(d);a.mid=e.mid;a.left=e.left;a.right=e.right;a.leftPoints=e.leftPoints;a.rightPoints=e.rightPoints;a.count=e.count}function f(a,d){var f=a.intervals([]),h=f.indexOf(d);if(0>h)return 0;f.splice(h,1);e(a,f);return 1}function k(a,d,e){for(var f=0;f<a.length&&a[f][0]<=d;++f){var h=e(a[f]);if(h)return h}}function l(a,d,e){for(var f=a.length-1;0<=f&&a[f][1]>=d;--f){var h=e(a[f]);if(h)return h}}function y(a,d){for(var e=0;e<a.length;++e){var f=d(a[e]);if(f)return f}}function v(a,d){return a-d}
function w(a,d){var e=a[0]-d[0];return e?e:a[1]-d[1]}function u(a,d){var e=a[1]-d[1];return e?e:a[0]-d[0]}function r(a){if(0===a.length)return null;for(var d=[],e=0;e<a.length;++e)d.push(a[e][0],a[e][1]);d.sort(v);for(var d=d[d.length>>1],f=[],h=[],b=[],e=0;e<a.length;++e){var k=a[e];k[1]<d?f.push(k):d<k[0]?h.push(k):b.push(k)}a=b.slice();b.sort(w);a.sort(u);return new t(d,r(f),r(h),b,a)}function h(a){this.root=a}var d=a("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(r(a)):
new h(null)};a=t.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var f=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(f+1)?(f=this.intervals([]),f.push(a),e(this,f)):this.left.insert(a):this.left=r([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(f+1)?(f=this.intervals([]),f.push(a),e(this,f)):this.right.insert(a):
this.right=r([a]);else{var f=d.ge(this.leftPoints,a,w),h=d.ge(this.rightPoints,a,u);this.leftPoints.splice(f,0,a);this.rightPoints.splice(h,0,a)}};a.remove=function(a){var e=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return f(this,a);e=this.left.remove(a);if(2===e)return this.left=null,--this.count,1;1===e&&--this.count;return e}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return f(this,a);
e=this.right.remove(a);if(2===e)return this.right=null,--this.count,1;1===e&&--this.count;return e}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var k=this.left,e=this.right;a.count-=h.count;a.right=h.left;h.left=k;h.right=e}p(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
p(this,this.left):p(this,this.right);return 1}for(k=d.ge(this.leftPoints,a,w);k<this.leftPoints.length&&this.leftPoints[k][0]===a[0];++k)if(this.leftPoints[k]===a)for(--this.count,this.leftPoints.splice(k,1),e=d.ge(this.rightPoints,a,u);e<this.rightPoints.length&&this.rightPoints[e][1]===a[1];++e)if(this.rightPoints[e]===a)return this.rightPoints.splice(e,1),1;return 0};a.queryPoint=function(a,d){if(a<this.mid){if(this.left){var e=this.left.queryPoint(a,d);if(e)return e}return k(this.leftPoints,a,
d)}return a>this.mid?this.right&&(e=this.right.queryPoint(a,d))?e:l(this.rightPoints,a,d):y(this.leftPoints,d)};a.queryInterval=function(a,d,e){if(a<this.mid&&this.left){var f=this.left.queryInterval(a,d,e);if(f)return f}return d>this.mid&&this.right&&(f=this.right.queryInterval(a,d,e))?f:d<this.mid?k(this.leftPoints,d,e):a>this.mid?l(this.rightPoints,a,e):y(this.leftPoints,e)};a=h.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,d){if(this.root)return this.root.queryPoint(a,d)};a.queryInterval=function(a,d,e){if(a<=d&&this.root)return this.root.queryInterval(a,d,e)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],83:[function(a,g,n){function t(a,f,k,l,g,p){a=["function ",a,"(a,l,h,",
l.join(","),"){",p?"":"var i=",k?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",g?".get(m)":"[m]"];p?0>f.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",f,"){i=m;");k?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,f,k,l){return(new Function([t("A","x"+a+"y",f,["y"],!1,l),t("B","x"+a+"y",f,["y"],!0,l),t("P","c(x,y)"+a+"0",
f,["y","c"],!1,l),t("Q","c(x,y)"+a+"0",f,["y","c"],!0,l),"function dispatchBsearch",k,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",k].join("")))()}g.exports=
{ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],84:[function(a,g,n){g.exports=function(a,g){g=g||Array(a.length);for(var e=0;e<a.length;++e)g[a[e]]=e;return g}},{}],85:[function(a,g,n){g.exports=function(a){for(var g=Array(a),e=0;e<a;++e)g[e]=e;return g}},{}],86:[function(a,g,n){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],87:[function(a,g,n){var t=
{}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],88:[function(a,g,n){function t(a,e,f){for(var d=0,c=0;c<a;++c)e&1<<c&&(d|=1<<f[c]);return d}function p(a,g,h,d,c,m){function q(a,b){A.push("for(","i"+c[a],"=",b,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function p(a){for(var b=0;b<x;++b)A.push("p"+b,"+=","u"+b+"_"+c[a],";");A.push("}")}function n(){for(var a=1;a<1<<E;++a)A.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function b(a,e){if(0>
a){for(var h=0;h<x;++h)m[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<x;++h)g.push("c"+h+"_0");for(h=0;h<d;++h)g.push("x"+h);A.push("b0","=",k,"[",v,"]=phase(",g.join(),");");for(g=1;g<1<<E;++g)A.push("b"+g,"=",k,"[",v,"+","e"+g,"];");h=[];for(g=1;g<1<<E;++g)h.push("(b0!==b"+g+")");A.push("if(",h.join("||"),"){");for(var r=[],h=0;h<E;++h)r.push("i"+h);for(h=0;h<x;++h)for(r.push("c"+h+"_0"),g=1;g<1<<E;++g)m[h]?A.push("c"+h+"_"+g,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):A.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),r.push("c"+h+"_"+g);for(h=0;h<1<<E;++h)r.push("b"+h);for(h=0;h<d;++h)r.push("x"+h);A.push("vertex(",r.join(),");","v0","=",f,"[",v,"]=",l,"++;");h=(1<<E)-1;r="b"+h;for(g=0;g<E;++g)if(0===(e&~(1<<g))){for(var u=h^1<<g,t="b"+u,w=[],y=u;0<y;y=y-1&u)w.push(f+"["+v+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)g&1?w.push("c"+y+"_"+h,"c"+y+"_"+u):w.push("c"+y+"_"+u,"c"+y+"_"+h);g&1?w.push(r,t):w.push(t,
r);for(y=0;y<d;++y)w.push("x"+y);A.push("if(",r,"!==",t,"){","face(",w.join(),")}")}A.push("}",v,"+=1;")}else{for(g=a-1;0<=g;--g)q(g,0);h=[];for(g=0;g<x;++g)m[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<d;++g)h.push("x"+g);A.push(k,"[",v,"++]=phase(",h.join(),");");for(g=0;g<a;++g)p(g);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+c[a],";");A.push("if(","s"+c[a],">0){","i"+c[a],"=1;");b(a-1,e|1<<c[a]);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+c[a],";");a===E-1&&(A.push(v,
"=0;"),n());q(a,2);b(a-1,e);a===E-1&&(A.push("if(","i"+c[E-1],"&1){",v,"=0;}"),n());p(a);A.push("}")}}var x=m.length,E=c.length;if(2>E)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var I="extractContour"+c.join("_"),A=[],B=[],O=[],F=0;F<x;++F)O.push("a"+F);for(F=0;F<d;++F)O.push("x"+F);for(F=0;F<E;++F)B.push("s"+F+"=a0.shape["+F+"]|0");for(F=0;F<x;++F){B.push("d"+F+"="+("a"+F)+".data","o"+F+"="+("a"+F)+".offset|0");for(var D=0;D<E;++D)B.push("t"+F+"_"+D+"="+("a"+F)+".stride["+
D+"]|0")}for(F=0;F<x;++F)for(B.push("p"+F+"="+("o"+F)),B.push("c"+F+"_0"),D=1;D<1<<E;++D){for(var L=[],H=0;H<E;++H)D&1<<H&&L.push("-"+("t"+F+"_"+H));B.push("d"+F+"_"+D+"=("+L.join("")+")|0");B.push("c"+F+"_"+D+"=0")}for(F=0;F<x;++F)for(D=0;D<E;++D)H=["t"+F+"_"+c[D]],0<D&&H.push("t"+F+"_"+c[D-1]+"*"+("s"+c[D-1])),B.push("u"+F+"_"+c[D]+"=("+H.join("-")+")|0");for(F=0;F<E;++F)B.push("i"+F+"=0");B.push(l+"=0");D=["2"];for(F=E-2;0<=F;--F)D.push("s"+c[F]);B.push(y+"=("+D.join("*")+")|0",k+"=mallocUint32("+
y+")",f+"=mallocUint32("+y+")",v+"=0");B.push("b0=0");for(D=1;D<1<<E;++D){F=[];L=[];for(H=0;H<E;++H)D&1<<H&&(0===L.length?F.push("1"):F.unshift(L.join("*"))),L.push("s"+c[H]);H="";0>F[0].indexOf("s"+c[E-2])&&(H="-");L=t(E,D,c);B.push("e"+L+"=(-"+F.join("-")+")|0","y"+L+"=("+H+F.join("-")+")|0","b"+L+"=0")}B.push("v0=0",w+"=0");b(E-1,0);A.push("freeUint32(",f,");freeUint32(",k,");");I=["'use strict';function ",I,"(",O.join(),"){var ",B.join(),";",A.join(""),"}return ",I].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",I))(a,g,h,e.mallocUint32,e.freeUint32)}var e=a("typedarray-pool");g.exports=function(a){function e(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&e("Must specify arguments");var f=a.order;Array.isArray(f)||e("Must specify order");var d=a.arrayArguments||1;1>d&&e("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&e("Scalar arg count must be > 0");"function"!==typeof a.vertex&&e("Must specify vertex creation function");
"function"!==typeof a.cell&&e("Must specify cell creation function");"function"!==typeof a.phase&&e("Must specify phase function");for(var m=a.getters||[],k=Array(d),g=0;g<d;++g)0<=m.indexOf(g)?k[g]=!0:k[g]=!1;return p(a.vertex,a.cell,a.phase,c,f,k)};var f="V",k="P",l="N",y="Q",v="X",w="T"},{"typedarray-pool":121}],89:[function(a,g,n){function t(a,e){return a[0]-e[0]}function p(){var a=this.stride,e=Array(a.length),f;for(f=0;f<e.length;++f)e[f]=[Math.abs(a[f]),f];e.sort(t);a=Array(e.length);for(f=
0;f<a.length;++f)a[f]=e[f][1];return a}function e(a,e){var f=["View",e,"d",a].join("");0>e&&(f="View_Nil"+a);var h="generic"===a;if(-1===e){var d,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===e)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(v[a][0]);d=["'use strict'"];var c=k(e),m=c.map(function(a){return"i"+a}),g="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),l=c.map(function(a){return"b"+a}).join(","),n=c.map(function(a){return"c"+a}).join(",");d.push("function "+
f+"(a,"+l+","+n+",d){this.data=a","this.shape=["+l+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+e);d.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===e?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),4>e?(d.push("function "+f+"_order(){"),2===e?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===e&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):d.push("ORDER})"));d.push("proto.set=function "+f+"_set("+m.join(",")+",v){");h?d.push("return this.data.set("+g+",v)}"):d.push("return this.data["+g+"]=v}");d.push("proto.get=function "+f+"_get("+m.join(",")+"){");h?d.push("return this.data.get("+
g+")}"):d.push("return this.data["+g+"]}");d.push("proto.index=function "+f+"_index(",m.join(),"){return "+g+"}");d.push("proto.hi=function "+f+"_hi("+m.join(",")+"){return new "+f+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=c.map(function(a){return"a"+a+"=this.shape["+a+"]"});g=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});d.push("proto.lo=function "+
f+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+g.join(","));for(h=0;h<e;++h)d.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");d.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");d.push("proto.step=function "+f+"_step("+m.join(",")+"){var "+c.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<e;++h)d.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");d.push("return new "+f+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");g=Array(e);l=Array(e);for(h=0;h<e;++h)g[h]="a[i"+h+"]",l[h]="b[i"+h+"]";d.push("proto.transpose=function "+f+"_transpose("+m+"){"+m.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+g.join(",")+","+l.join(",")+",this.offset)}");d.push("proto.pick=function "+f+"_pick("+m+"){var a=[],b=[],c=this.offset");for(h=0;h<e;++h)d.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");d.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",d.join("\n"));return f(v[a],p)}function f(a){if(l(a))return"buffer";if(y)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var k=a("iota-array"),l=a("is-buffer"),y="undefined"!==typeof Float64Array,v={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in v)v[a].push(e(a,-1))});g.exports=function(a,k,g,h){if(void 0===a){var d=v.array[0];return d([])}"number"===
typeof a&&(a=[a]);void 0===k&&(k=[a.length]);d=k.length;if(void 0===g){g=Array(d);for(var c=d-1,m=1;0<=c;--c)g[c]=m,m*=k[c]}if(void 0===h)for(c=h=0;c<d;++c)0>g[c]&&(h-=(k[c]-1)*g[c]);c=f(a);for(m=v[c];m.length<=d+1;)m.push(e(c,m.length-1));d=m[d+1];return d(a,k,g,h)}},{"iota-array":85,"is-buffer":86}],90:[function(a,g,n){var t=a("double-bits"),p=Math.pow(2,-1074);g.exports=function(a,f){if(isNaN(a)||isNaN(f))return NaN;if(a===f)return a;if(0===a)return 0>f?-p:p;var k=t.hi(a),g=t.lo(a);f>a===0<a?4294967295===
g?(k+=1,g=0):g+=1:0===g?(g=4294967295,--k):--g;return t.pack(g,k)}},{"double-bits":73}],91:[function(a,g,n){g.exports=function(a){var f=a.length;if(f<t)for(var k=1,g=0;g<f;++g)for(var n=0;n<g;++n)if(a[g]<a[n])k=-k;else{if(a[g]===a[n])return 0}else{for(var v=p.mallocUint8(f),g=0;g<f;++g)v[g]=0;k=1;for(g=0;g<f;++g)if(!v[g]){var w=1;v[g]=1;for(n=a[g];n!==g;n=a[n]){if(v[n])return p.freeUint8(v),0;w+=1;v[n]=1}w&1||(k=-k)}p.freeUint8(v)}return k};var t=32,p=a("typedarray-pool")},{"typedarray-pool":121}],
92:[function(a,g,n){var t=a("typedarray-pool"),p=a("invert-permutation");n.rank=function(a){var f=a.length;switch(f){case 0:case 1:return 0;case 2:return a[1]}var k=t.mallocUint32(f),g=t.mallocUint32(f),n=0,v;p(a,g);for(v=0;v<f;++v)k[v]=a[v];for(v=f-1;0<v;--v)f=g[v],a=k[v],k[v]=k[f],k[f]=a,g[v]=g[a],g[a]=f,n=(n+a)*v;t.freeUint32(g);t.freeUint32(k);return n};n.unrank=function(a,f,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(f?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
f?[0,1]:[1,0]}g=g||Array(a);var l,p,n=1;g[0]=0;for(p=1;p<a;++p)g[p]=p,n=n*p|0;for(p=a-1;0<p;--p)a=f/n|0,f=f-a*n|0,n=n/p|0,l=g[p]|0,g[p]=g[a]|0,g[a]=l|0;return g}},{"invert-permutation":84,"typedarray-pool":121}],93:[function(a,g,n){g.exports=function(a,e){function f(a,d){var e=w[d][a[d]];e.splice(e.indexOf(a),1)}function g(a,d,h){var k,l,b;for(l=0;2>l;++l)if(0<w[l][d].length){k=w[l][d][0];b=l;break}l=k[b^1];for(var p=0;2>p;++p)for(var r=w[p][d],u=0;u<r.length;++u){var n=r[u],v=n[p^1];0<t(e[a],e[d],
e[l],e[v])&&(k=n,l=v,b=p)}if(h)return l;k&&f(k,b);return l}function l(a,d){var h=w[d][a][0],l=[a];f(h,d);for(h=h[d^1];;){for(;h!==a;)l.push(h),h=g(l[l.length-2],h,!1);if(0===w[0][a].length+w[1][a].length)break;var h=l[l.length-1],p=a,b=l[1],r=g(h,p,!0);if(0>t(e[h],e[p],e[b],e[r]))break;l.push(a);h=g(h,p)}return l}for(var n=e.length|0,v=a.length,w=[Array(n),Array(n)],u=0;u<n;++u)w[0][u]=[],w[1][u]=[];for(u=0;u<v;++u){var r=a[u];w[0][r[0]].push(r);w[1][r[1]].push(r)}v=[];for(u=0;u<n;++u)0===w[0][u].length+
w[1][u].length&&v.push([u]);for(u=0;u<n;++u)for(r=0;2>r;++r){for(var h=[];0<w[r][u].length;){var d=l(u,r);d[1]===d[d.length-1]?h.push.apply(h,d):(0<h.length&&v.push(h),h=d)}0<h.length&&v.push(h)}return v};var t=a("compare-angle")},{"compare-angle":68}],94:[function(a,g,n){g.exports=function(a,e){for(var f=t(a,e.length),g=Array(e.length),l=Array(e.length),n=[],v=0;v<e.length;++v){var w=f[v].length;l[v]=w;g[v]=!0;1>=w&&n.push(v)}for(;0<n.length;)for(w=n.pop(),g[w]=!1,w=f[w],v=0;v<w.length;++v){var u=
w[v];0===--l[u]&&n.push(u)}f=Array(e.length);l=[];for(v=0;v<e.length;++v)g[v]?(w=l.length,f[v]=w,l.push(e[v])):f[v]=-1;n=[];for(v=0;v<a.length;++v)w=a[v],g[w[0]]&&g[w[1]]&&n.push([f[w[0]],f[w[1]]]);return[n,l]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":75}],95:[function(a,g,n){function t(a,e){for(var f=Array(a),d=0;d<a;++d)f[d]=e;return f}function p(a){for(var e=Array(a),f=0;f<a;++f)e[f]=[];return e}g.exports=function(a,g){function h(a){for(var b=a.length,c=0;c<b;++c)if(!D[a[c]])return!1;
return!0}var d=w(a,g);a=d[0];g=d[1];for(var c=g.length,m=e(a,g.length),q=0;q<c;++q)if(1===m[q].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=f(a,g),m=m.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var e=g[a[d]],f=g[a[(d+1)%b]],h=l(-e[0],e[1]),m=l(-e[0],f[1]),e=l(f[0],e[1]),f=l(f[0],f[1]),c=y(c,y(y(h,m),y(e,f)));return 0<c[c.length-1]}),d=m.length,n=Array(d),C=Array(d),q=0;q<d;++q){n[q]=q;var b=Array(d),x=m[q].map(function(a){return g[a]}),E=k([x]),I=
0,A=0;a:for(;A<d;++A)if(b[A]=0,q!==A){for(var x=m[A],B=x.length,O=0;O<B;++O){var F=E(g[x[O]]);if(0!==F){0>F&&(b[A]=1,I+=1);continue a}}b[A]=1;I+=1}C[q]=[I,q,b]}C.sort(function(a,b){return b[0]-a[0]});for(q=0;q<d;++q)for(b=C[q],x=b[1],B=b[2],A=0;A<d;++A)B[A]&&(n[A]=x);C=p(d);for(q=0;q<d;++q)C[q].push(n[q]),C[n[q]].push(q);for(var b={},D=t(c,!1),q=0;q<d;++q)for(x=m[q],B=x.length,A=0;A<B;++A)c=x[A],E=x[(A+1)%B],I=Math.min(c,E)+":"+Math.max(c,E),I in b?(I=b[I],C[I].push(q),C[q].push(I),D[c]=D[E]=!0):
b[I]=q;A=[];c=t(d,-1);for(q=0;q<d;++q)n[q]!==q||h(m[q])?c[q]=-1:(A.push(q),c[q]=0);for(d=[];0<A.length;){q=A.pop();n=C[q];v(n,function(a,b){return a-b});var B=n.length,b=c[q],L;0===b&&(x=m[q],L=[x]);for(q=0;q<B;++q)x=n[q],0<=c[x]||(c[x]=b^1,A.push(x),0===b&&(x=m[x],h(x)||(x.reverse(),L.push(x))));0===b&&d.push(L)}return d};var e=a("edges-to-adjacency-list"),f=a("planar-dual"),k=a("point-in-big-polygon"),l=a("two-product"),y=a("robust-sum"),v=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":94,
"edges-to-adjacency-list":75,"planar-dual":93,"point-in-big-polygon":97,"robust-sum":108,"two-product":119,uniq:123}],96:[function(a,g,n){arguments[4][83][0].apply(n,arguments)},{dup:83}],97:[function(a,g,n){function t(){return!0}function p(a){return function(d,c){var e=a[d];return e?!!e.queryPoint(c,t):!1}}function e(a){for(var d={},c=0;c<a.length;++c){var e=a[c],f=e[0][0],g=e[0][1],e=e[1][1],g=[Math.min(g,e),Math.max(g,e)];f in d?d[f].push(g):d[f]=[g]}a={};f=Object.keys(d);for(c=0;c<f.length;++c)a[f[c]]=
u(d[f[c]]);return p(a)}function f(a,d){return function(c){var e=r.le(d,c[0]);if(0>e)return 1;var f=a[e];if(!f)if(0<e&&d[e]===c[0])f=a[e-1];else return 1;for(e=1;f;){var g=f.key,k=v(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>k)f=f.left;else if(0<k)e=-1,f=f.right;else return 0;else if(0<k)f=f.left;else if(0>k)e=1,f=f.right;else return 0}return e}}function k(a){return 1}function l(a){return function(d){return a(d[0],d[1])?0:1}}function y(a,d){return function(c){return a(c[0],c[1])?0:d(c)}}g.exports=function(a){for(var d=
a.length,c=[],g=[],p=0;p<d;++p)for(var r=a[p],u=r.length,b=u-1,n=0;n<u;b=n++){var b=r[b],t=r[n];b[0]===t[0]?g.push([b,t]):c.push([b,t])}if(0===c.length)return 0===g.length?k:l(e(g));a=w(c);a=f(a.slabs,a.coordinates);return 0===g.length?a:y(e(g),a)};var v=a("robust-orientation")[3],w=a("slab-decomposition"),u=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":96,"interval-tree-1d":82,"robust-orientation":103,"slab-decomposition":116}],98:[function(a,g,n){var t=a("big-rat/add");
g.exports=function(a,e){for(var f=a.length,g=Array(f),l=0;l<f;++l)g[l]=t(a[l],e[l]);return g}},{"big-rat/add":34}],99:[function(a,g,n){g.exports=function(a){for(var e=Array(a.length),f=0;f<a.length;++f)e[f]=t(a[f]);return e};var t=a("big-rat")},{"big-rat":37}],100:[function(a,g,n){var t=a("big-rat"),p=a("big-rat/mul");g.exports=function(a,f){for(var g=t(f),l=a.length,n=Array(l),v=0;v<l;++v)n[v]=p(a[v],g);return n}},{"big-rat":37,"big-rat/mul":46}],101:[function(a,g,n){var t=a("big-rat/sub");g.exports=
function(a,e){for(var f=a.length,g=Array(f),l=0;l<f;++l)g[l]=t(a[l],e[l]);return g}},{"big-rat/sub":49}],102:[function(a,g,n){function t(a,c){for(var e=Array(a.length-1),f=1;f<a.length;++f)for(var g=e[f-1]=Array(a.length-1),h=0,b=0;h<a.length;++h)h!==c&&(g[b++]=a[f][h]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",p(a.slice(0,c)),",",p(a.slice(c)),")"].join("")}function e(a,c){if("m"===a.charAt(0)){if("w"===
c.charAt(0)){var f=a.split("[");return["w",c.substr(1),"m",f[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return e(c,a)}function f(a){if(2===a.length)return[["diff(",e(a[0][0],a[1][1]),",",e(a[1][0],a[0][1]),")"].join("")];for(var c=[],g=0;g<a.length;++g)c.push(["scale(",p(f(t(a,g))),",",g&1?"-":"",a[0][g],")"].join(""));return c}function k(a,c){for(var e=[],f=0;f<c-2;++f)e.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return p(e)}function l(a){for(var c=[],e=[],g=Array(a),h=
0;h<a;++h){g[h]=Array(a);for(var l=0;l<a;++l)g[h][l]=["m",l,"[",a-h-2,"]"].join("")}for(h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(h=0;h<a;++h)0===(h&1)?c.push.apply(c,f(t(g,h))):e.push.apply(e,f(t(g,h)));c=p(c);e=p(e);g="exactInSphere"+a;l=[];for(h=0;h<a;++h)l.push("m"+h);l=["function ",g,"(",l.join(),"){"];for(h=0;h<a;++h){l.push("var w",h,"=",k(h,a),";");for(var b=0;b<a;++b)b!==h&&l.push("var w",h,"m",b,"=scale(w",h,",m",b,"[0]);")}l.push("var p=",c,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",
g);return(new Function("sum","diff","prod","scale",l.join("")))(w,u,v,r)}function y(a){var c=h[a.length];c||(c=h[a.length]=l(a.length));return c.apply(void 0,a)}var v=a("two-product"),w=a("robust-sum"),u=a("robust-subtract"),r=a("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],c=["slow"],e=0;6>=e;++e)a.push("a"+e),c.push("o"+e);for(var f=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
e=2;6>=e;++e)f.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(f.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[y].concat(h));for(e=0;6>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],103:[function(a,g,n){function t(a,c){for(var e=Array(a.length-1),f=1;f<a.length;++f)for(var h=
e[f-1]=Array(a.length-1),g=0,b=0;g<a.length;++g)g!==c&&(h[b++]=a[f][g]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",p(a.slice(0,c)),",",p(a.slice(c)),")"].join("")}function e(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],f=0;f<a.length;++f)c.push(["scale(",p(e(t(a,f))),",",f&1?"-":"",a[0][f],")"].join(""));return c}function f(a){for(var c=
[],f=[],h=Array(a),g=0;g<a;++g){h[g]=Array(a);for(var k=0;k<a;++k)h[g][k]=["m",k,"[",a-g-1,"]"].join("")}g=[];for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,e(t(h,k))):f.push.apply(f,e(t(h,k))),g.push("m"+k);c=p(c);f=p(f);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",c,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,l,v,w)}function k(a){var c=h[a.length];c||(c=h[a.length]=f(a.length));return c.apply(void 0,a)}var l=
a("two-product"),y=a("robust-sum"),v=a("robust-scale"),w=a("robust-subtract"),u=f(3),r=f(4),h=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,e){var f=(a[1]-e[1])*(c[0]-e[0]),h=(a[0]-e[0])*(c[1]-e[1]),g=f-h;if(0<f){if(0>=h)return g;f+=h}else if(0>f){if(0<=h)return g;f=-(f+h)}else return g;f*=3.3306690738754716E-16;return g>=f||g<=-f?g:u(a,c,e)},function(a,c,e,f){var h=a[0]-f[0],g=c[0]-f[0],b=e[0]-f[0],k=a[1]-f[1],l=c[1]-f[1],p=e[1]-f[1],u=a[2]-f[2],n=c[2]-f[2],
t=e[2]-f[2],v=g*p,w=b*l,b=b*k,p=h*p,h=h*l,k=g*k,g=u*(v-w)+n*(b-p)+t*(h-k),u=7.771561172376103E-16*((Math.abs(v)+Math.abs(w))*Math.abs(u)+(Math.abs(b)+Math.abs(p))*Math.abs(n)+(Math.abs(h)+Math.abs(k))*Math.abs(t));return g>u||-g>u?g:r(a,c,e,f)}];(function(){for(;5>=h.length;)h.push(f(h.length));for(var a=[],c=["slow"],e=0;5>=e;++e)a.push("a"+e),c.push("o"+e);for(var l=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;5>=e;++e)l.push("case ",e,":return o",
e,"(",a.slice(0,e).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(l.join(""));a=Function.apply(void 0,c);g.exports=a.apply(void 0,[k].concat(h));for(e=0;5>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":105,"robust-subtract":107,"robust-sum":108,"two-product":119}],104:[function(a,g,n){var t=a("robust-sum"),p=a("robust-scale");g.exports=function(a,f){if(1===a.length)return p(f,a[0]);if(1===
f.length)return p(a,f[0]);if(0===a.length||0===f.length)return[0];var g=[0];if(a.length<f.length)for(var l=0;l<a.length;++l)g=t(g,p(f,a[l]));else for(l=0;l<f.length;++l)g=t(g,p(a,f[l]));return g}},{"robust-scale":105,"robust-sum":108}],105:[function(a,g,n){var t=a("two-product"),p=a("two-sum");g.exports=function(a,f){var g=a.length;if(1===g)return g=t(a[0],f),g[0]?g:[g[1]];var l=Array(2*g),n=[.1,.1],v=[.1,.1],w=0;t(a[0],f,n);n[0]&&(l[w++]=n[0]);for(var u=1;u<g;++u){t(a[u],f,v);p(n[1],v[0],n);n[0]&&
(l[w++]=n[0]);var r=v[1],h=n[1],d=r+h,r=h-(d-r);n[1]=d;r&&(l[w++]=r)}n[1]&&(l[w++]=n[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":119,"two-sum":120}],106:[function(a,g,n){g.exports=function(a,e,f,g){var l=t(a,f,g),n=t(e,f,g);if(0<l&&0<n||0>l&&0>n)return!1;var v=t(f,a,e),w=t(g,a,e);if(0<v&&0<w||0>v&&0>w)return!1;if(0===l&&0===n&&0===v&&0===w){a:{for(l=0;2>l;++l){var n=a[l],v=e[l],w=Math.max(n,v),u=f[l],r=g[l],h=Math.min(u,r);if(Math.max(u,r)<Math.min(n,v)||w<h){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":103}],107:[function(a,g,n){g.exports=function(a,g){var e=a.length|0,f=g.length|0;if(1===e&&1===f){var f=a[0],k=-g[0],e=f+k,l=e-f,e=(f=f-(e-l)+(k-l))?[f,e]:[e];return e}var k=Array(e+f),n=l=0,v=0,w=Math.abs,u=a[n],r=w(u),h=-g[v],d=w(h),c,m;r<d?(m=u,n+=1,n<e&&(u=a[n],r=w(u))):(m=h,v+=1,v<f&&(h=-g[v],d=w(h)));n<e&&r<d||v>=f?(c=u,n+=1,n<e&&(u=a[n],r=w(u))):(c=h,v+=1,v<f&&(h=-g[v],d=w(h)));var q=c+m;m-=q-c;for(var z=q,C;n<e&&v<f;)r<d?(c=u,n+=1,n<
e&&(u=a[n],r=w(u))):(c=h,v+=1,v<f&&(h=-g[v],d=w(h))),q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c;for(;n<e;)c=u,q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c,n+=1,n<e&&(u=a[n]);for(;v<f;)c=h,q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c,v+=1,v<f&&(h=-g[v]);m&&(k[l++]=m);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],108:[function(a,g,n){g.exports=function(a,g){var e=a.length|0,f=g.length|0;if(1===e&&1===f){var f=a[0],
k=g[0],e=f+k,l=e-f,e=(f=f-(e-l)+(k-l))?[f,e]:[e];return e}var k=Array(e+f),n=l=0,v=0,w=Math.abs,u=a[n],r=w(u),h=g[v],d=w(h),c,m;r<d?(m=u,n+=1,n<e&&(u=a[n],r=w(u))):(m=h,v+=1,v<f&&(h=g[v],d=w(h)));n<e&&r<d||v>=f?(c=u,n+=1,n<e&&(u=a[n],r=w(u))):(c=h,v+=1,v<f&&(h=g[v],d=w(h)));var q=c+m;m-=q-c;for(var z=q,C;n<e&&v<f;)r<d?(c=u,n+=1,n<e&&(u=a[n],r=w(u))):(c=h,v+=1,v<f&&(h=g[v],d=w(h))),q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c;for(;n<e;)c=u,q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=
z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c,n+=1,n<e&&(u=a[n]);for(;v<f;)c=h,q=c+m,c=q-c,(c=m-c)&&(k[l++]=c),c=z+q,C=c-z,m=c-C,q-=C,z-=m,m=z+q,z=c,v+=1,v<f&&(h=g[v]);m&&(k[l++]=m);z&&(k[l++]=z);l||(k[l++]=0);k.length=l;return k}},{}],109:[function(a,g,n){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],110:[function(a,g,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],111:[function(a,g,n){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var e=0;e<a;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var e=this.roots;e[a]!==a;){var f=e[a];e[a]=e[f];a=f}return a};t.prototype.link=function(a,e){var f=this.find(a),g=this.find(e);if(f!==g){var l=this.ranks,n=this.roots,t=l[f],w=l[g];t<w?n[f]=g:w<t?n[g]=f:(n[g]=f,++l[f])}}},{}],112:[function(a,g,n){function t(a,e){var f=a.length,d=a.length-e.length,
c=Math.min;if(d)return d;switch(f){case 0:return 0;case 1:return a[0]-e[0];case 2:return(f=a[0]+a[1]-e[0]-e[1])?f:c(a[0],a[1])-c(e[0],e[1]);case 3:var d=a[0]+a[1],g=e[0]+e[1];if(f=d+a[2]-(g+e[2]))return f;var k=c(a[0],a[1]),l=c(e[0],e[1]);return(f=c(k,a[2])-c(l,e[2]))?f:c(k+a[2],d)-c(l+e[2],g);default:c=a.slice(0);c.sort();g=e.slice(0);g.sort();for(k=0;k<f;++k)if(d=c[k]-g[k])return d;return 0}}function p(a,e){return t(a[0],e[0])}function e(a,e){if(e){for(var f=a.length,d=Array(f),c=0;c<f;++c)d[c]=
[a[c],e[c]];d.sort(p);for(c=0;c<f;++c)a[c]=d[c][0],e[c]=d[c][1]}else a.sort(t);return a}function f(a){if(0===a.length)return[];for(var e=1,f=a.length,d=1;d<f;++d){var c=a[d];t(c,a[d-1])&&(d===e?e++:a[e++]=c)}a.length=e;return a}function k(a,e){for(var f=0,d=a.length-1,c=-1;f<=d;){var g=f+d>>1,k=t(a[g],e);0>=k?(0===k&&(c=g),f=g+1):0<k&&(d=g-1)}return c}function l(a,e){for(var f=Array(a.length),d=0,c=f.length;d<c;++d)f[d]=[];for(var c=[],d=0,g=e.length;d<g;++d)for(var l=e[d],p=l.length,n=1,b=1<<p;n<
b;++n){c.length=v.popCount(n);for(var w=0,y=0;y<p;++y)n&1<<y&&(c[w++]=l[y]);w=k(a,c);if(!(0>w))for(;!(f[w++].push(d),w>=a.length||0!==t(a[w],c)););}return f}function y(a,f){if(0>f)return[];for(var g=[],d=(1<<f+1)-1,c=0;c<a.length;++c)for(var k=a[c],l=d;l<1<<k.length;l=v.nextCombination(l)){for(var p=Array(f+1),n=0,b=0;b<k.length;++b)l&1<<b&&(p[n++]=k[b]);g.push(p)}return e(g)}"use restrict";var v=a("bit-twiddle"),w=a("union-find");n.dimension=function(a){for(var e=0,f=Math.max,d=0,c=a.length;d<c;++d)e=
f(e,a[d].length);return e-1};n.countVertices=function(a){for(var e=-1,f=Math.max,d=0,c=a.length;d<c;++d)for(var g=a[d],k=0,l=g.length;k<l;++k)e=f(e,g[k]);return e+1};n.cloneCells=function(a){for(var e=Array(a.length),f=0,d=a.length;f<d;++f)e[f]=a[f].slice(0);return e};n.compareCells=t;n.normalize=e;n.unique=f;n.findCell=k;n.incidence=l;n.dual=function(a,e){if(!e)return l(f(y(a,0)),a,0);for(var g=Array(e),d=0;d<e;++d)g[d]=[];for(var d=0,c=a.length;d<c;++d)for(var k=a[d],p=0,n=k.length;p<n;++p)g[k[p]].push(d);
return g};n.explode=function(a){for(var f=[],g=0,d=a.length;g<d;++g)for(var c=a[g],k=c.length|0,l=1,p=1<<k;l<p;++l){for(var n=[],b=0;b<k;++b)l>>>b&1&&n.push(c[b]);f.push(n)}return e(f)};n.skeleton=y;n.boundary=function(a){for(var f=[],g=0,d=a.length;g<d;++g)for(var c=a[g],k=0,l=c.length;k<l;++k){for(var p=Array(c.length-1),n=0,b=0;n<l;++n)n!==k&&(p[b++]=c[n]);f.push(p)}return e(f)};n.connectedComponents=function(a,g){if(g){for(var h=new w(g),d=0;d<a.length;++d)for(var c=a[d],l=0;l<c.length;++l)for(var p=
l+1;p<c.length;++p)h.link(c[l],c[p]);c=[];l=h.ranks;for(d=0;d<l.length;++d)l[d]=-1;for(d=0;d<a.length;++d)p=h.find(a[d][0]),0>l[p]?(l[p]=c.length,c.push([a[d].slice(0)])):c[l[p]].push(a[d].slice(0));return c}h=f(e(y(a,0)));d=new w(h.length);for(c=0;c<a.length;++c)for(l=a[c],p=0;p<l.length;++p)for(var n=k(h,[l[p]]),t=p+1;t<l.length;++t)d.link(n,k(h,[l[t]]));l=[];p=d.ranks;for(c=0;c<p.length;++c)p[c]=-1;for(c=0;c<a.length;++c)n=d.find(k(h,[a[c][0]])),0>p[n]?(p[n]=l.length,l.push([a[c].slice(0)])):l[p[n]].push(a[c].slice(0));
return l}},{"bit-twiddle":110,"union-find":111}],113:[function(a,g,n){g.exports=function(a,f,g){function l(a){if(b[a])return Infinity;var c=q[a],d=z[a];if(0>c||0>d)return Infinity;c=f[c];d=f[d];return Math.abs(t(f[a],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2))}function n(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function v(a){for(var b=C[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<O){var g=C[A[d]];g<c&&(f=d,c=g)}e<O&&C[A[e]]<c&&(f=e);if(f===a)return a;n(a,f);a=f}}function w(a){for(var b=
C[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<C[A[c]])n(a,c),a=c;else return a}}function u(){if(0<O){var a=A[0];n(0,O-1);--O;v(0);return a}return-1}function r(a,b){var c=A[a];if(C[c]===b)return a;C[c]=-Infinity;w(a);u();C[c]=b;O+=1;return w(O-1)}function h(a){if(!b[a]){b[a]=!0;var c=q[a];a=z[a];0<=q[a]&&(q[a]=c);0<=z[c]&&(z[c]=a);0<=B[c]&&r(B[c],l(c));0<=B[a]&&r(B[a],l(a))}}function d(a,c){if(0>a[c])return c;var d=c,e=c;do{var f=a[e];if(!b[e]||0>f||f===e)break;e=f;f=a[e];if(!b[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=c;d!==e;d=a[d])a[d]=e;return e}for(var c=f.length,m=a.length,q=Array(c),z=Array(c),C=Array(c),b=Array(c),x=0;x<c;++x)q[x]=z[x]=-1,C[x]=Infinity,b[x]=!1;for(x=0;x<m;++x){var E=a[x];if(2!==E.length)throw Error("Input must be a graph");var I=E[1],E=E[0];z[E]=-1!==z[E]?-2:I;q[I]=-1!==q[I]?-2:E}for(var A=[],B=Array(c),x=0;x<c;++x)Infinity>(C[x]=l(x))?(B[x]=A.length,A.push(x)):B[x]=-1;for(var O=A.length,x=O>>1;0<=x;--x)v(x);for(;;){x=u();if(0>x||C[x]>g)break;h(x)}g=
[];for(x=0;x<c;++x)b[x]||(B[x]=g.length,g.push(f[x].slice()));var F=[];a.forEach(function(a){var b=d(q,a[0]);a=d(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&F.push([b,a]))});p.unique(p.normalize(F));return{positions:g,edges:F}};var t=a("robust-orientation"),p=a("simplicial-complex")},{"robust-orientation":103,"simplicial-complex":112}],114:[function(a,g,n){function t(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var n=Math.min(f[0][1],f[1][1]),t=Math.max(f[0][1],f[1][1]);return l<n?l-n:g>t?g-t:l-t}a[0][1]<a[1][1]?(t=a[0],n=a[1]):(t=a[1],n=a[0]);return(t=p(l,g,t))?t:(t=p(l,g,n))?t:n-l}g.exports=function(a,f){var g,l;if(f[0][0]<f[1][0])g=f[0],l=f[1];else if(f[0][0]>f[1][0])g=f[1],l=f[0];else return t(f,a);var n,v;if(a[0][0]<a[1][0])n=a[0],v=a[1];else if(a[0][0]>a[1][0])n=a[1],v=a[0];else return-t(a,f);var w=p(g,l,v),u=p(g,l,n);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;
w=p(v,n,l);u=p(v,n,g);if(0>w){if(0>=u)return w}else if(0<w){if(0<=u)return w}else if(u)return u;return l[0]-v[0]};var p=a("robust-orientation")},{"robust-orientation":103}],115:[function(a,g,n){arguments[4][83][0].apply(n,arguments)},{dup:83}],116:[function(a,g,n){function t(a,e,f){this.slabs=a;this.coordinates=e;this.horizontal=f}function p(a,e){return a.y-e}function e(a,f){for(var g=null;a;){var d=a.key,c,l;d[0][0]<d[1][0]?(c=d[0],l=d[1]):(c=d[1],l=d[0]);c=v(c,l,f);if(0>c)a=a.left;else if(0<c)if(f[0]!==
d[1][0])g=a,a=a.right;else{if(d=e(a.right,f))return d;a=a.left}else{if(f[0]!==d[1][0])return a;if(d=e(a.right,f))return d;a=a.left}}return g}function f(a,e,f,d){this.y=a;this.index=e;this.start=f;this.closed=d}function k(a,e,f,d){this.x=a;this.segment=e;this.create=f;this.index=d}g.exports=function(a){for(var e=a.length,g=2*e,d=Array(g),c=0;c<e;++c){var l=a[c],p=l[0][0]<l[1][0];d[2*c]=new k(l[0][0],l,p,c);d[2*c+1]=new k(l[1][0],l,!p,c)}d.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);e=[];l=[];p=[];for(c=0;c<g;){for(var n=d[c].x,v=[];c<g;){var b=d[c];if(b.x!==n)break;c+=1;b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(v.push(new f(b.segment[0][1],b.index,!0,!0)),v.push(new f(b.segment[1][1],b.index,!1,!1))):(v.push(new f(b.segment[1][1],b.index,!0,!1)),v.push(new f(b.segment[0][1],b.index,!1,!0)))):a=b.create?a.insert(b.segment,b.index):a.remove(b.segment)}e.push(a.root);
l.push(n);p.push(v)}return new t(e,l,p)};var l=a("binary-search-bounds"),y=a("functional-red-black-tree"),v=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var f=l.le(this.coordinates,a[0]);if(0>f)return-1;var g=e(this.slabs[f],a),d=-1;g&&(d=g.value);if(this.coordinates[f]===a[0]){var c=null;g&&(c=g.key);0<f&&(g=e(this.slabs[f-1],a))&&(c?0<w(g.key,c)&&(c=g.key,d=g.value):(d=g.value,c=g.key));g=this.horizontal[f];if(0<g.length){var k=l.ge(g,a[1],p);if(k<g.length){f=
g[k];if(a[1]===f.y){if(f.closed)return f.index;for(;k<g.length-1&&g[k+1].y===a[1];)if(k+=1,f=g[k],f.closed)return f.index;if(f.y===a[1]&&!f.start){k+=1;if(k>=g.length)return d;f=g[k]}}f.start?c?(a=v(c[0],c[1],[a[0],f.y]),c[0][0]>c[1][0]&&(a=-a),0<a&&(d=f.index)):d=f.index:f.y!==a[1]&&(d=f.index)}}}return d}},{"./lib/order-segments":114,"binary-search-bounds":115,"functional-red-black-tree":76,"robust-orientation":103}],117:[function(a,g,n){function t(a,f){var g=a.length,k=["'use strict';"],n="surfaceNets"+
a.join("_")+"d"+f;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&k.push("getters:[0],");for(var r=[],h=[],d=0;d<g;++d)r.push("d"+d),h.push("d"+d);for(d=0;d<1<<g;++d)r.push("v"+d),h.push("v"+d);for(d=0;d<1<<g;++d)r.push("p"+d),h.push("p"+d);r.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(d=0;d<1<<g;++d)r.push("(p"+d+"<<"+d+")");k.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],c=[];128>=1<<(1<<g)?(k.push("switch(m){"),c=k):k.push("switch(m>>>7){");for(d=0;d<1<<(1<<g);++d){128<1<<(1<<g)&&0===d%128&&(0<r.length&&c.push("}}"),c="vExtra"+r.length,k.push("case ",d>>>7,":",c,"(m&0x7f,",h.join(),");break;"),c=["function ",c,"(m,",h.join(),"){switch(m){"],r.push(c));c.push("case ",d&127,":");for(var m=Array(g),q=Array(g),t=Array(g),C=Array(g),b=0,x=0;x<g;++x)m[x]=[],q[x]=[],t[x]=0,C[x]=0;for(x=0;x<1<<g;++x)for(var E=
0;E<g;++E){var I=x^1<<E;if(!(I>x)&&!(d&1<<I)!==!(d&1<<x)){var A=1;d&1<<I?q[E].push("v"+I+"-v"+x):(q[E].push("v"+x+"-v"+I),A=-A);0>A?(m[E].push("-v"+x+"-v"+I),t[E]+=2):(m[E].push("v"+x+"+v"+I),t[E]-=2);b+=1;for(A=0;A<g;++A)A!==E&&(I&1<<A?C[A]+=1:--C[A])}}x=[];for(E=0;E<g;++E)0===m[E].length?x.push("d"+E+"-0.5"):(I="",0>t[E]?I=t[E]+"*c":0<t[E]&&(I="+"+t[E]+"*c"),x.push("d"+E+"-"+(.5+C[E]/b*.5)+"-"+m[E].length/b*.5+"*("+m[E].join("+")+I+")/("+q[E].join("+")+")"));c.push("a.push([",x.join(),"]);","break;")}k.push("}},");
0<r.length&&c.push("}}");h=[];for(d=0;d<1<<g-1;++d)h.push("v"+d);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=e(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",n,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
n,";");for(d=0;d<r.length;++d)k.push(r[d].join(""));return(new Function("genContour",k.join("")))(p)}g.exports=function(a,e){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=f(a,e),p=g.length,n=Array(p),r=Array(p),h=0;h<p;++h)n[h]=[g[h]],r[h]=[h];return{positions:n,cells:r}}g=a.order.join()+"-"+a.dtype;p=k[g];e=+e||0;p||(p=k[g]=t(a.order,a.dtype));return p(a,e)};var p=a("ndarray-extract-contour"),e=a("triangulate-hypercube"),f=a("zero-crossings"),k={}},{"ndarray-extract-contour":88,
"triangulate-hypercube":118,"zero-crossings":127}],118:[function(a,g,n){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(e(a+1))|0,l=[],n=0;n<g;++n){for(var v=t.unrank(a,n),w=[0],u=0,r=0;r<v.length;++r)u+=1<<v[r],w.push(u);1>p(v)&&(w[0]=u,w[a]=0);l.push(w)}return l};var t=a("permutation-rank"),p=a("permutation-parity"),e=a("gamma")},{gamma:77,"permutation-parity":91,"permutation-rank":92}],119:[function(a,g,n){g.exports=function(a,e,f){var g=a*e,l=t*a,l=l-(l-a);a-=l;
var n=t*e,n=n-(n-e);e-=n;e=a*e-(g-l*n-a*n-l*e);return f?(f[0]=e,f[1]=g,f):[e,g]};var t=+(Math.pow(2,27)+1)},{}],120:[function(a,g,n){g.exports=function(a,g,e){var f=a+g,k=f-a;g-=k;a-=f-k;return e?(e[0]=a+g,e[1]=f,e):[a+g,f]}},{}],121:[function(a,g,n){(function(g,p){function e(a){if(a){var b=q.log2(a.length||a.byteLength);x[b].push(a)}}function f(a){a=q.nextPow2(a);var b=q.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function k(a){return new Uint8Array(f(a),0,a)}function l(a){return new Uint16Array(f(2*
a),0,a)}function y(a){return new Uint32Array(f(4*a),0,a)}function v(a){return new Int8Array(f(a),0,a)}function w(a){return new Int16Array(f(2*a),0,a)}function u(a){return new Int32Array(f(4*a),0,a)}function r(a){return new Float32Array(f(4*a),0,a)}function h(a){return new Float64Array(f(8*a),0,a)}function d(a){return C?new Uint8ClampedArray(f(a),0,a):k(a)}function c(a){return new DataView(f(a),0,a)}function m(a){a=q.nextPow2(a);var b=q.log2(a),b=E[b];return 0<b.length?b.pop():new p(a)}var q=a("bit-twiddle"),
z=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var C="undefined"!==typeof Uint8ClampedArray,b=g.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=z([32,0]));b.BUFFER||(b.BUFFER=z([32,0]));var x=b.DATA,E=b.BUFFER;n.free=function(a){if(p.isBuffer(a))E[q.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=q.log2(a.length||a.byteLength)|0;x[b].push(a)}};n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(a){e(a.buffer)};n.freeArrayBuffer=e;n.freeBuffer=function(a){E[q.log2(a.length)].push(a)};n.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return f(a);switch(b){case "uint8":return k(a);case "uint16":return l(a);case "uint32":return y(a);case "int8":return v(a);
case "int16":return w(a);case "int32":return u(a);case "float":case "float32":return r(a);case "double":case "float64":return h(a);case "uint8_clamped":return d(a);case "buffer":return m(a);case "data":case "dataview":return c(a);default:return null}};n.mallocArrayBuffer=f;n.mallocUint8=k;n.mallocUint16=l;n.mallocUint32=y;n.mallocInt8=v;n.mallocInt16=w;n.mallocInt32=u;n.mallocFloat32=n.mallocFloat=r;n.mallocFloat64=n.mallocDouble=h;n.mallocUint8Clamped=d;n.mallocDataView=c;n.mallocBuffer=m;n.clearCache=
function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.UINT8C[a].length=0,x[a].length=0,E[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":52,buffer:60,dup:74}],122:[function(a,g,n){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var e=
0;e<a;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";g.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var e=a,f=this.roots;f[a]!==a;)a=f[a];for(;f[e]!==a;){var g=f[e];f[e]=a;e=g}return a};a.link=function(a,e){var f=this.find(a),g=this.find(e);if(f!==g){var l=this.ranks,n=this.roots,t=l[f],w=l[g];t<w?n[f]=g:w<t?n[g]=f:(n[g]=f,
++l[f])}}},{}],123:[function(a,g,n){g.exports=function(a,g,e){if(0===a.length)return a;if(g){e||a.sort(g);e=1;for(var f=a.length,k=a[0],l=a[0],n=1;n<f;++n)l=k,k=a[n],g(k,l)&&(n===e?e++:a[e++]=k);a.length=e;return a}e||a.sort();g=1;e=a.length;f=a[0];k=a[0];for(l=1;l<e;++l)k=f,f=a[l],f!==k&&(l===g?g++:a[g++]=f);a.length=g;return a}},{}],124:[function(a,g,n){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||p,g.context||e,g)};var t=a("./lib/vtext"),p=null,e=null;"undefined"!==
typeof document&&(p=document.createElement("canvas"),p.width=8192,p.height=1024,e=p.getContext("2d"))},{"./lib/vtext":125}],125:[function(a,g,n){function t(a,e,f){for(var d=e.textAlign||"start",c=e.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],l=a.length,n=0;n<l;++n)for(var b=a[n],p=0;2>p;++p)g[p]=Math.min(g[p],b[p])|0,k[p]=Math.max(k[p],b[p])|0;var t=0;switch(d){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
d+"'");}var v=0;switch(c){case "hanging":case "top":v=-g[1];break;case "middle":v=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":v=-3*f;break;case "bottom":v=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+c+"'");}var w=1/f;"lineHeight"in e?w*=+e.lineHeight:"width"in e?w=e.width/(k[0]-g[0]):"height"in e&&(w=e.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+v)]})}function p(a,e,g,d){a=f(a,128);d=d?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(d.positions,e,g);a=d.edges;d="ccw"===e.orientation;y(g,a);if(e.polygons||e.polygon||e.polyline){e=w(a,g);a=Array(e.length);for(var c=0;c<e.length;++c){for(var k=e[c],n=Array(k.length),p=0;p<k.length;++p){for(var C=k[p],b=Array(C.length),x=0;x<C.length;++x)b[x]=g[C[x]].slice();d&&b.reverse();n[p]=b}a[c]=n}return a}return e.triangles||e.triangulate||e.triangle?{cells:v(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function e(a,e,f){try{return p(a,
e,f,!0)}catch(d){}try{return p(a,e,f,!1)}catch(d){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,f,g,d){var c=d.size||64;g.font=c+"px "+(d.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(a).width+2*c)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var n=3*c;f.height<n&&(f.height=n);
g.fillStyle="#000";g.fillRect(0,0,f.width,f.height);g.fillStyle="#fff";g.fillText(a,c,2*c);a=g.getImageData(0,0,l,n);l=k(a.data,[n,l,4]).pick(-1,-1,0).transpose(1,0);return e(l,d,c)};g.exports.processPixels=e;var f=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),y=a("clean-pslg"),v=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:61,"clean-pslg":66,ndarray:89,"planar-graph-to-polyline":95,"simplify-planar-graph":113,"surface-nets":117}],126:[function(a,g,n){g.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":70}],127:[function(a,g,n){g.exports=function(a,e){var f=[];e=+e||0;t(a.hi(a.shape[0]-1),f,e);return f};var t=a("./lib/zc-core")},{"./lib/zc-core":126}],128:[function(a,
g,n){var t=a("./lib/util/extend"),p=a("./lib/dynamic"),e=a("./lib/util/raf"),f=a("./lib/util/clock"),k=a("./lib/strings"),l=a("./lib/webgl"),y=a("./lib/extension"),v=a("./lib/limits"),w=a("./lib/buffer"),u=a("./lib/elements"),r=a("./lib/texture"),h=a("./lib/renderbuffer"),d=a("./lib/framebuffer"),c=a("./lib/attribute"),m=a("./lib/shader"),q=a("./lib/read"),z=a("./lib/core"),C=a("./lib/stats"),b=a("./lib/timer");g.exports=function(a){function g(){ba=e.next(g);Q.tick+=1;Q.time=(f()-K)/1E3;F();for(var a=
0;a<ca.length;++a)(0,ca[a])(Q,null,0);H.flush();G&&G.update()}function n(a){}function A(a){}function B(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];p.isDynamic(e)?d[b]=p.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;m.length<a;)m.push(null);return m}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{}),g=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);
delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=R.compile(g,f,e,d,a),h=d.draw,k=d.batch,l=d.scope,m=[];return t(function(a,b){var d;if("function"===typeof a)return l.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)l.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)l.call(this,a[d],b,d);else return l.call(this,
a,b,0);else if("number"===typeof a){if(0<a)return k.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return k.call(this,a,a.length)}else return h.call(this,a)},{stats:a})}function O(){var a=Z.viewport,b=Z.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=H.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=H.drawingBufferHeight}function F(){O();R.procs.poll()}function D(){O();R.procs.refresh();G&&G.update()}
var L=l(a);if(!L)return null;var H=L.gl,J=y(H,L);if(!J)return null;a=k();var P=C(),J=J.extensions,G=b(H,J),K=f(),N=H.drawingBufferWidth,M=H.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:N,viewportHeight:M,framebufferWidth:N,framebufferHeight:M,drawingBufferWidth:N,drawingBufferHeight:M,pixelRatio:L.pixelRatio},S=v(H,J),X=w(H,P),W=u(H,J,X,P),N=c(H,J,S,X,a),Y=m(H,a,P),T=r(H,J,S,F,Q,P),V=h(H,J,S,P),U=d(H,J,S,T,V,P),M=q(H,F,Q),R=z(H,a,J,S,X,W,T,U,{},N,Y,{elements:null,primitive:4,count:-1,offset:0,
instances:-1},Q,G,L),Z=R.next,aa=H.canvas,ca=[],ba=0;aa&&(aa.addEventListener("webglcontextlost",n,!1),aa.addEventListener("webglcontextrestored",A,!1));D();a=t(B,{clear:function(a){var b=0;R.procs.poll();var c=a.color;c&&(H.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(H.clearDepth(+a.depth),b|=256);"stencil"in a&&(H.clearStencil(a.stencil|0),b|=1024);H.clear(b)},prop:p.define.bind(null,1),context:p.define.bind(null,2),"this":p.define.bind(null,3),draw:B({}),buffer:function(a){return X.create(a,
34962)},elements:W.create,texture:T.create2D,cube:T.createCube,renderbuffer:V.create,framebuffer:U.create,framebufferCube:function(a){},attributes:H.getContextAttributes(),frame:function(a){ca.push(a);!ba&&0<ca.length&&g();return{cancel:function(){var b=ca.find(function(b){return b===a});0>b||(ca.splice(b,1),0>=ca.length&&ba&&(e.cancel(g),ba=0))}}},limits:S,hasExtension:function(a){return 0<=S.extensions.indexOf(a.toLowerCase())},read:M,destroy:function(){ba&&(e.cancel(g),ba=0);aa&&(aa.removeEventListener("webglcontextlost",
n),aa.removeEventListener("webglcontextrestored",A));Y.clear();U.clear();V.clear();T.clear();W.clear();X.clear();G&&G.clear();L.onDestroy()},_gl:H,_refresh:D,poll:function(){R.procs.poll();G&&G.update()},stats:P});L.onDone(null,a);return a}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,
"./lib/timer":20,"./lib/util/clock":21,"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);
