var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==b.length?{done:!0}:{done:!1,value:b[g++]}}}};
$jscomp.arrayFromIterator=function(b){for(var g,n=[];!(g=b.next()).done;)n.push(g.value);return n};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,g){function n(){}n.prototype=g.prototype;b.prototype=new n;b.prototype.constructor=b;for(var t in g)if($jscomp.global.Object.defineProperties){var p=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);p&&$jscomp.global.Object.defineProperty(b,t,p)}else b[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,g){b instanceof String&&(b=String(b));var n=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},p=(t.next=function(){if(n<b.length){var a=n++;return{value:g(a,b[a]),done:!1}}p.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return p},t);return p};
$jscomp.array.findInternal_=function(b,g,n){b instanceof String&&(b=String(b));for(var t=b.length,p=0;p<t;p++){var a=b[p];if(g.call(n,a,p,b))return{i:p,v:a}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,g,n){g=void 0===g?function(a){return a}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var p;!(p=b.next()).done;)t.push(g.call(n,p.value))}else{p=b.length;for(var a=0;a<p;a++)t.push(g.call(n,b[a]))}return t};$jscomp.array.of=function(b){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return[b,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,g,n){var t=this.length;b=Number(b);g=Number(g);n=Number(null!=n?n:t);if(b<g)for(n=Math.min(n,t);g<n;)g in this?this[b++]=this[g++]:(delete this[b++],g++);else for(n=Math.min(n,t+g-b),b+=n-g;n>g;)--n in this?this[--b]=this[n]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,g,n){null!=n&&b.length||(n=this.length||0);n=Number(n);for(g=Number((void 0===g?0:g)||0);g<n;g++)this[g]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,g){return $jscomp.array.findInternal_(this,b,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,g){return $jscomp.array.findInternal_(this,b,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),n=new b($jscomp.makeIterator([[g,"s"]]));if("s"!=n.get(g)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var t=n.entries(),p=t.next();if(p.done||p.value[0]!=g||"s"!=p.value[1])return!1;p=t.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!t.next().done?!1:!0}catch(a){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,g){var n=this.maybeGetEntry_(b),t=n.id,p=n.list,n=n.entry;p||(p=this.data_[t]=[]);n?n.value=g:(n={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:g},p.push(n),this.head_.previous.next=n,this.head_.previous=n,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(b){var g=this.maybeGetEntry_(b);b=g.id;var n=g.list,t=g.index;return(g=g.entry)&&n?(n.splice(t,1),n.length||delete this.data_[b],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var g=$jscomp.Map.getId_(b),n=this.data_[g];if(n)for(var t=0;t<n.length;t++){var p=n[t];if(b!==b&&p.key!==p.key||b===p.key)return{id:g,list:n,index:t,entry:p}}return{id:g,list:n,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,g){for(var n=$jscomp.makeIterator(this.entries()),t=n.next();!t.done;t=n.next())t=t.value,b.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(b){var g=this,n=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(n){for(;n.head!=g.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:b(n)};n=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,g,n){Object.defineProperty(b,g,{value:String(n)})}:function(b,g,n){b[g]=String(n)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var g=0;0===(b&4294901760)&&(b<<=16,g+=16);0===(b&4278190080)&&(b<<=8,g+=8);0===(b&4026531840)&&(b<<=4,g+=4);0===(b&3221225472)&&(b<<=2,g+=2);0===(b&2147483648)&&g++;return g};$jscomp.math.imul=function(b,g){b=Number(b);g=Number(g);var n=b&65535,t=g&65535;return n*t+((b>>>16&65535)*t+n*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,n=1,t=b,p=0,a=1;p!=t;)g*=b,a*=-1,t=(p=t)+a*g/++n;return t}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,n=1,t=b,p=0;p!=t;)g*=b/++n,t=(p=t)+g;return t}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var g=Math.exp(2*-Math.abs(b)),g=(1-g)/(1+g);return 0>b?-g:g};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var g=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-g:g};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,g,n){for(var t=[],p=2;p<arguments.length;++p)t[p-2]=arguments[p];b=Number(b);g=Number(g);for(var a=Math.max(Math.abs(b),Math.abs(g)),e=$jscomp.makeIterator(t),p=e.next();!p.done;p=e.next())a=Math.max(a,Math.abs(p.value));if(1E100<a||1E-100>a){b/=a;g/=a;e=b*b+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p)/a,e+=p*p;return Math.sqrt(e)*a}a=b*b+g*g;t=$jscomp.makeIterator(t);for(p=t.next();!p.done;p=t.next())p=p.value,p=Number(p),a+=
p*p;return Math.sqrt(a)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var g=Math.floor(Math.abs(b));return 0>b?-g:g};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var g=Math.pow(Math.abs(b),1/3);return 0>b?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,g){for(var n=[],t=1;t<arguments.length;++t)n[t-1]=arguments[t];n=$jscomp.makeIterator(n);for(t=n.next();!t.done;t=n.next())if(t=t.value)for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&(b[p]=t[p]);return b};$jscomp.object.is=function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),b=new b($jscomp.makeIterator([g]));if(b.has(g)||1!=b.size||b.add(g)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),n=b.next();if(n.done||n.value[0]!=g||n.value[1]!=g)return!1;n=b.next();return n.done||n.value[0]==g||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(b){b=this.map_["delete"](b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,g){var n=this;this.map_.forEach(function(t){return b.call(g,t,t,n)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,g){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];for(var n="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(t>>>10&1023|55296),n+=String.fromCharCode(t&1023|56320))}return n};
$jscomp.string.repeat=function(b){var g=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var n="";b;)if(b&1&&(n+=g),b>>>=1)g+=g;return n};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var g=this.toString(),n=g.length;b=Number(b)||0;if(0<=b&&b<n){b|=0;var t=g.charCodeAt(b);if(55296>t||56319<t||b+1===n)return t;b=g.charCodeAt(b+1);return 56320>b||57343<b?t:1024*(t-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"startsWith");var n=this.toString();b+="";for(var t=n.length,p=b.length,a=Math.max(0,Math.min(g|0,n.length)),e=0;e<p&&a<t;)if(n[a++]!=b[e++])return!1;return e>=p};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,g){$jscomp.string.noRegExp_(b,"endsWith");var n=this.toString();b+="";void 0===g&&(g=n.length);for(var t=Math.max(0,Math.min(g|0,n.length)),p=b.length;0<p&&0<t;)if(n[--t]!=b[--p])return!1;return 0>=p};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,n,t){function p(e,l){if(!n[e]){if(!g[e]){var x="function"==typeof require&&require;if(!l&&x)return x(e,!0);if(a)return a(e,!0);x=Error("Cannot find module '"+e+"'");throw x.code="MODULE_NOT_FOUND",x;}x=n[e]={exports:{}};g[e][0].call(x.exports,function(a){var l=g[e][1][a];return p(l?l:a)},x,x.exports,e$$0,g,n,t)}return n[e].exports}for(var a="function"==typeof require&&require,e=0;e<t.length;e++)p(t[e]);return p})({1:[function(b,g,n){g=b("../regl")();n=b("vectorize-text");var t=b("gl-mat4/perspective"),
p=b("gl-mat4/lookAt");b=n("hello regl!",{textAlign:"center",textBaseline:"middle"});var a=g.texture({copy:!0,min:"linear",mag:"linear"}),e=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:a,t:function(a){return.001*a.count}},depth:{enable:!1},count:3}),q=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:b.positions},
elements:b.edges,uniforms:{t:function(a){return.01*a.count},view:function(a){a=.01*a.count;return p([],[5*Math.sin(a),0,-5*Math.cos(a)],[0,0,0],[0,-1,0])},projection:function(a){return t([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){e();q();a({copy:!0,min:"linear",mag:"linear"})})},{"../regl":125,"gl-mat4/lookAt":76,"gl-mat4/perspective":77,"vectorize-text":121}],2:[function(b,g,n){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(b,a,e,q,l){b=e.maxAttributes;a=Array(b);for(e=0;e<b;++e)a[e]=new t;return{Record:t,scope:{},state:a}}},{}],3:[function(b,g,n){function t(a,e){switch(a){case 5121:return new Uint8Array(e);case 5123:return new Uint16Array(e);case 5125:return new Uint32Array(e);case 5120:return new Int8Array(e);case 5122:return new Int16Array(e);case 5124:return new Int32Array(e);case 5126:return new Float32Array(e);
default:return null}}var p=b("./util/is-typed-array"),a=b("./util/is-ndarray"),e=b("./constants/arraytypes.json"),q=b("./constants/dtypes.json"),l=b("./util/values"),x={"static":35044,dynamic:35048,stream:35040};g.exports=function(b){function w(c){this.id=f++;this.buffer=null;this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function v(c){b.isBuffer(c.buffer)||(c.buffer=b.createBuffer());c.bind();b.bufferData(c.type,c.data||c.byteLength,c.usage)}function m(a){var e=
a.buffer;b.isBuffer(e)&&b.deleteBuffer(e);a.buffer=null;delete c[a.id]}function h(f,h,b){function l(c){var f=c||{};if(Array.isArray(f)||p(f)||a(f))f={data:f};else if("number"===typeof f)f={length:f|0};else if(null===f||void 0===f)f={};d.usage="usage"in f?x[f.usage]:35044;c=0;"type"in f&&(c=q[f.type]);var r=f.dimension|0||1,h=0,k=null;if("data"in f)if(k=f.data,null===k)h=f.length|0;else{if(a(k)){var r=k.shape,h=k.stride,f=k.offset,b=0,m=0,z=0,u=0;1===r.length?(b=r[0],m=1,z=h[0],u=0):2===r.length&&
(b=r[0],m=r[1],z=h[0],u=h[1]);c=c||e[Object.prototype.toString.call(k.data)]|0||5126;for(var r=m,h=t(c,b*m),k=k.data,w=0,g=0;g<b;++g)for(var n=0;n<m;++n)h[w++]=k[z*g+u*n+f];k=h}else if(Array.isArray(k))if(0<k.length&&Array.isArray(k[0])){r=k[0].length;c=c||5126;f=t(c,k.length*r);h=k;k=r;for(b=u=0;b<h.length;++b)for(z=h[b],m=0;m<k;++m)f[u++]=z[m];k=f}else c=c||5126,k=t(c,k);else c=c||e[Object.prototype.toString.call(k)]|0;h=k.byteLength}else"length"in f&&(h=f.length|0);d.data=k;d.dtype=c||5121;d.byteLength=
h;d.dimension=r;v(d);return l}var d=new w(h);c[d.id]=d;b||l(f);l._reglType="buffer";l._buffer=d;l.destroy=function(){m(d)};return l}var f=0,c={};w.prototype.bind=function(){b.bindBuffer(this.type,this.buffer)};return{create:h,createStream:function(c){return h({data:c,usage:"stream"},34962,!1)._buffer},destroyStream:function(c){m(c)},clear:function(){l(c).forEach(m)},refresh:function(){l(c).forEach(v)},getBuffer:function(c){return c&&c._buffer instanceof w?c._buffer:null}}}},{"./constants/arraytypes.json":4,
"./constants/dtypes.json":5,"./util/is-ndarray":21,"./util/is-typed-array":22,"./util/values":28}],4:[function(b,g,n){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(b,g,n){g.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126}},{}],6:[function(b,g,n){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(b,g,n){function t(d){return Array.isArray(d)||w(d)||v(d)}function p(d){return d.sort(function(d,c){return"viewport"===d?-1:"viewport"===c?1:d<c?-1:1})}function a(d,c,a,f){this.thisDep=d;this.contextDep=c;this.propDep=a;this.append=f}function e(d){return d&&!(d.thisDep||d.contextDep||d.propDep)}function q(d){return new a(!1,
!1,!1,d)}function l(d,c){var f=d.type;return 0===f?(f=d.data.length,new a(!0,1<=f,2<=f,c)):new a(3===f,2===f,1===f,c)}var x=b("./util/codegen"),u=b("./util/loop"),w=b("./util/is-typed-array"),v=b("./util/is-ndarray"),m=b("./constants/primitives.json"),h=b("./constants/dtypes.json"),f=["x","y","z","w"],c={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},r={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},k={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},z={cw:2304,ccw:2305},F=new a(!1,!1,!1,function(){});g.exports=function(d,b,v,E,A,g,n,G,C,
N,M,L,P){function H(d){return d.replace(".","_")}function I(d,c,a){var f=H(d);ka.push(d);fa[f]=ba[f]=!!a;ca[f]=c}function K(d,c,a){var f=H(d);ka.push(d);Array.isArray(a)?(ba[f]=a.slice(),fa[f]=a.slice()):ba[f]=fa[f]=a;da[f]=c}function O(){var d=x(),c=d.link,a=d.global;d.id=ua++;d.batchId="0";var f=c(sa),e=d.shared={props:"a0"};Object.keys(sa).forEach(function(d){e[d]=a.def(f,".",d)});var r=d.next={},h=d.current={};Object.keys(da).forEach(function(d){Array.isArray(ba[d])&&(r[d]=a.def(e.next,".",d),
h[d]=a.def(e.current,".",d))});var k=d.constants={};Object.keys(la).forEach(function(d){k[d]=a.def(JSON.stringify(la[d]))});d.invoke=function(a,f){switch(f.type){case 0:var r=["this",e.context,e.props,d.batchId];return a.def(c(f.data),".call(",r.slice(0,Math.max(f.data.length+1,4)),")");case 1:return a.def(e.props,f.data);case 2:return a.def(e.context,f.data);case 3:return a.def("this",f.data)}};d.attribCache={};var q={};d.scopeAttrib=function(d){d=b.id(d);if(d in q)return q[d];var a=N.scope[d];a||
(a=N.scope[d]=new ga);return q[d]=c(a)};return d}function V(d){var c=d["static"];d=d.dynamic;if("framebuffer"in c){var a=c.framebuffer;return a?(a=G.getFramebuffer(a),q(function(d,c){var f=d.link(a),e=d.shared;c.set(e.framebuffer,".next",f);e=e.context;c.set(e,".framebufferWidth",f+".width");c.set(e,".framebufferHeight",f+".height");return f})):q(function(d,c){var a=d.shared;c.set(a.framebuffer,".next","null");a=a.context;c.set(a,".framebufferWidth",a+".drawingBufferWidth");c.set(a,".framebufferHeight",
a+".drawingBufferHeight");return null})}if("framebuffer"in d){var f=d.framebuffer;return l(f,function(d,c){var a=d.invoke(c,f),e=d.shared,r=e.framebuffer,a=c.def(r,".getFramebuffer(",a,")");c.set(r,".next",a);e=e.context;c.set(e,".framebufferWidth",a+"?"+a+".width:"+e+".drawingBufferWidth");c.set(e,".framebufferHeight",a+"?"+a+".height:"+e+".drawingBufferHeight");return a})}return null}function W(d,c){function f(d){if(d in e){var h=e[d];d=!0;var k=h.x|0,q=h.y|0,b,m;"w"in h?b=h.w|0:d=!1;"h"in h?m=
h.h|0:d=!1;return new a(d&&c&&c.thisDep,d&&c&&c.contextDep,d&&c&&c.propDep,function(d,c){var a=d.shared.context,f=b;"w"in h||(f=c.def(a,".","framebufferWidth","-",k));var e=m;"h"in h||(e=c.def(a,".","framebufferHeight","-",q));return[k,q,f,e]})}if(d in r){var y=r[d];d=l(y,function(d,c){var a=d.invoke(c,y),f=d.shared.context,e=c.def(a,".x|0"),r=c.def(a,".y|0"),h=c.def('"w" in ',a,"?",a,".w|0:","(",f,".","framebufferWidth","-",e,")"),a=c.def('"h" in ',a,"?",a,".h|0:","(",f,".","framebufferHeight","-",
r,")");return[e,r,h,a]});c&&(d.thisDep=d.thisDep||c.thisDep,d.contextDep=d.contextDep||c.contextDep,d.propDep=d.propDep||c.prpoDep);return d}return c?new a(c.thisDep,c.contextDep,c.propDep,function(d,c){var a=d.shared.context;return[0,0,c.def(a,".","framebufferWidth"),c.def(a,".","framebufferHeight")]}):null}var e=d["static"],r=d.dynamic,h=f("viewport");if(h)var k=h,h=new a(h.thisDep,h.contextDep,h.propDep,function(d,c){var a=k.append(d,c),f=d.shared.context;c.set(f,".viewportWidth",a[2]);c.set(f,
".viewportHeight",a[3]);return a});return{viewport:h,scissor_box:f("scissor.box")}}function X(d){function c(d){if(d in f){var a=b.id(f[d]);d=q(function(){return a});d.id=a;return d}if(d in r){var e=r[d];return l(e,function(d,c){var a=d.invoke(c,e);return c.def(d.shared.strings,".id(",a,")")})}return null}var f=d["static"],r=d.dynamic,h=c("frag"),k=c("vert"),m=null;e(h)&&e(k)?(m=M.program(k.id,h.id),d=q(function(d,c){return d.link(m)})):d=new a(h&&h.thisDep||k&&k.thisDep,h&&h.contextDep||k&&k.contextDep,
h&&h.propDep||k&&k.propDep,function(d,c){var a=d.shared.shader,f;f=h?h.append(d,c):c.def(a,".","frag");var e;e=k?k.append(d,c):c.def(a,".","vert");return c.def(a+".program("+e+","+f+")")});return{frag:h,vert:k,progVar:d,program:m}}function S(d){function c(d,a){if(d in f){var e=f[d]|0;return q(function(d,c){a&&(d.OFFSET=e);return e})}if(d in r){var k=r[d];return l(k,function(d,c){var f=d.invoke(c,k);a&&(d.OFFSET=f);return f})}return a&&h?q(function(d,c){d.OFFSET="0";return 0}):null}var f=d["static"],
r=d.dynamic,h=function(){if("elements"in f){var d=f.elements;t(d)?d=g.getElements(g.create(d)):d&&(d=g.getElements(d));var c=q(function(c,a){if(d){var f=c.link(d);return c.ELEMENTS=f}return c.ELEMENTS=null});c.value=d;return c}if("elements"in r){var a=r.elements;return l(a,function(d,c){var f=d.shared,e=f.isBufferArgs,f=f.elements,r=d.invoke(c,a),h=c.def("null"),e=c.def(e,"(",r,")"),r=d.cond(e).then(h,"=",f,".createStream(",r,");")["else"](h,"=",f,".getElements(",r,");");c.entry(r);c.exit(d.cond(e).then(f,
".destroyStream(",h,");"));return d.ELEMENTS=h})}return null}(),k=c("offset",!0);return{elements:h,primitive:function(){if("primitive"in f){var d=f.primitive;return q(function(c,a){return m[d]})}if("primitive"in r){var c=r.primitive;return l(c,function(d,a){var f=d.constants.primTypes,e=d.invoke(a,c);return a.def(f,"[",e,"]")})}return h?e(h)?h.value?q(function(d,c){return c.def(d.ELEMENTS,".primType")}):q(function(){return 4}):new a(h.thisDep,h.contextDep,h.propDep,function(d,c){var a=d.ELEMENTS;
return c.def(a,"?",a,".primType:",4)}):null}(),count:function(){if("count"in f){var d=f.count|0;return q(function(){return d})}if("count"in r){var c=r.count;return l(c,function(d,a){return d.invoke(a,c)})}return h?e(h)?h?k?new a(k.thisDep,k.contextDep,k.propDep,function(d,c){return c.def(d.ELEMENTS,".vertCount-",d.OFFSET)}):q(function(d,c){return c.def(d.ELEMENTS,".vertCount")}):q(function(){return-1}):new a(h.thisDep||k.thisDep,h.contextDep||k.contextDep,h.propDep||k.propDep,function(d,c){var a=
d.ELEMENTS;return d.OFFSET?c.def(a,"?",a,".vertCount-",d.OFFSET,":-1"):c.def(a,"?",a,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:k}}function Y(d){var a=d["static"],f=d.dynamic,e={};ka.forEach(function(d){function h(c,r){if(d in a){var k=c(a[d]);e[b]=q(function(){return k})}else if(d in f){var m=f[d];e[b]=l(m,function(d,c){return r(d,c,d.invoke(c,m))})}}var b=H(d);switch(d){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(d){return d},
function(d,c,a){return a});case "depth.func":return h(function(d){return r[d]},function(d,c,a){return c.def(d.constants.compareFuncs,"[",a,"]")});case "depth.range":return h(function(d){return d},function(d,c,a){d=c.def("+",a,"[0]");c=c.def("+",a,"[1]");return[d,c]});case "blend.func":return h(function(d){return[c["srcRGB"in d?d.srcRGB:d.src],c["dstRGB"in d?d.dstRGB:d.dst],c["srcAlpha"in d?d.srcAlpha:d.src],c["dstAlpha"in d?d.dstAlpha:d.dst]]},function(d,c,a){function f(d,h){var r=c.def('"',d,h,'" in ',
a,"?",a,".",d,h,":",a,".",d);return c.def(e,"[",r,"]")}var e=d.constants.blendFuncs;d=f("src","RGB");var h=f("src","Alpha"),r=f("dst","RGB"),k=f("dst","Alpha");return[d,r,h,k]});case "blend.equation":return h(function(d){if("string"===typeof d)return[ea[d],ea[d]];if("object"===typeof d)return[ea[d.rgb],ea[d.alpha]]},function(d,c,a){var f=d.constants.blendEquations,e=c.def(),h=c.def();d=d.cond("typeof ",a,'==="string"');d.then(e,"=",h,"=",f,"[",a,"];");d["else"](e,"=",f,"[",a,".rgb];",h,"=",f,"[",
a,".alpha];");c(d);return[e,h]});case "blend.color":return h(function(d){return u(4,function(c){return+d[c]})},function(d,c,a){return u(4,function(d){return c.def("+",a,"[",d,"]")})});case "stencil.mask":return h(function(d){return d|0},function(d,c,a){return c.def(a,"|0")});case "stencil.func":return h(function(d){return[r[d.cmp||"keep"],d.ref||0,"mask"in d?d.mask:-1]},function(d,c,a){d=c.def('"cmp" in ',a,"?",d.constants.compareFuncs,"[",a,".cmp]",":",7680);var f=c.def(a,".ref|0");c=c.def('"mask" in ',
a,"?",a,".mask|0:-1");return[d,f,c]});case "stencil.opFront":case "stencil.opBack":return h(function(c){return["stencil.opBack"===d?1029:1028,k[c.fail||"keep"],k[c.zfail||"keep"],k[c.pass||"keep"]]},function(c,a,f){function e(d){return a.def('"',d,'" in ',f,"?",h,"[",f,".",d,"]:",7680)}var h=c.constants.stencilOps;return["stencil.opBack"===d?1029:1028,e("fail"),e("zfail"),e("pass")]});case "polygonOffset.offset":return h(function(d){return[d.factor|0,d.units|0]},function(d,c,a){d=c.def(a,".factor|0");
c=c.def(a,".units|0");return[d,c]});case "cull.face":return h(function(d){var c=0;"front"===d?c=1028:"back"===d&&(c=1029);return c},function(d,c,a){return c.def(a,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(d){return d},function(d,c,a){return a});case "frontFace":return h(function(d){return z[d]},function(d,c,a){return c.def(a+'==="cw"?2304:2305')});case "colorMask":return h(function(d){return d.map(function(d){return!!d})},function(d,c,a){return u(4,function(d){return"!!"+a+
"["+d+"]"})});case "sample.coverage":return h(function(d){return["value"in d?d.value:1,!!d.invert]},function(d,c,a){d=c.def('"value" in ',a,"?+",a,".value:1");c=c.def("!!",a,".invert");return[d,c]})}});return e}function R(d){var c=d["static"],a=d.dynamic,f={};Object.keys(c).forEach(function(d){var a=c[d],e;if("number"===typeof a||"boolean"===typeof a)e=q(function(){return a});else if("function"===typeof a&&"texture"===a._reglType)e=q(function(d){return d.link(a)});else if(Array.isArray(a)||w(a))e=
q(function(d){return d.global.def("[",u(a.length,function(d){return a[d]}),"]")});e.value=a;f[d]=e});Object.keys(a).forEach(function(d){var c=a[d];f[d]=l(c,function(d,a){return d.invoke(a,c)})});return f}function U(d){var c=d["static"],a=d.dynamic,e={};Object.keys(c).forEach(function(d){var a=c[d],r=b.id(d),k=new ga;if(t(a))k.state=1,k.buffer=A.getBuffer(A.create(a,34962,!1)),k.type=k.buffer.dtype;else{var l=A.getBuffer(a);if(l)k.state=1,k.buffer=l,k.type=l.dtype;else if(a.constant){var m=a.constant;
k.state=2;"number"===typeof m?k.x=m:f.forEach(function(d,c){c<m.length&&(k[d]=m[c])})}else{var l=A.getBuffer(a.buffer),p=a.offset|0,H=a.stride|0,I=a.size|0,v=!!a.normalized,z=0;"type"in a&&(z=h[a.type]);a=a.divisor|0;k.buffer=l;k.state=1;k.size=I;k.normalized=v;k.type=z||l.dtype;k.offset=p;k.stride=H;k.divisor=a}}e[d]=q(function(d,c){var a=d.attribCache;if(r in a)return a[r];var f={isStream:!1};Object.keys(k).forEach(function(d){f[d]=k[d]});k.buffer&&(f.buffer=d.link(k.buffer));return a[r]=f})});
Object.keys(a).forEach(function(d){var c=a[d];e[d]=l(c,function(d,a){function e(d){a(b[d],"=",h,".",d,"|0;")}var h=d.invoke(a,c),r=d.shared,k=r.isBufferArgs,q=r.buffer,b={isStream:a.def(!1)},l=new ga;l.state=1;Object.keys(l).forEach(function(d){b[d]=a.def(""+l[d])});var m=b.buffer,y=b.type;a("if(",k,"(",h,")){",b.isStream,"=true;",m,"=",q,".createStream(",h,");",y,"=",m,".dtype;","}else{",m,"=",q,".getBuffer(",h,");","if(",m,"){",y,"=",m,".dtype;","}else if(",h,".constant){",b.state,"=",2,";",f.map(function(d,
c){return b[d]+"="+h+".length>="+c+"?"+h+"["+c+"]:0;"}).join(""),"}else{",m,"=",q,".getBuffer(",h,".buffer);",y,'="type" in ',h,"?",r.glTypes,"[",h,".type]:",m,".dtype;",b.normalized,"=!!",h,".normalized;");e("size");e("offset");e("stride");e("divisor");a("}}");return b})});return e}function T(d){var c=d["static"],a=d.dynamic,f={};Object.keys(c).forEach(function(d){var a=c[d];f[d]=q(function(d,c){return"number"===typeof a||"boolean"===typeof a?""+a:d.link(a)})});Object.keys(a).forEach(function(d){var c=
a[d];f[d]=l(c,function(d,a){return d.invoke(a,c)})});return f}function Q(d,c,a){var f=d.shared.context,e=d.scope();Object.keys(a).forEach(function(h){c.save(f,"."+h);e(f,".",h,"=",a[h].append(d,c),";")});c(e)}function Z(d,c,a){var f=d.shared,e=f.gl,h=f.framebuffer,r;ma&&(r=c.def(f.extensions,".webgl_draw_buffers"));var k=d.constants,f=k.drawBuffers,k=k.backBuffer;d=a?a.append(d,c):c.def(h,".next");c("if(",h,".dirty||",d,"!==",h,".cur){","if(",d,"){",e,".bindFramebuffer(",36160,",",d,".framebuffer);");
ma&&c(r,".drawBuffersWEBGL(",f,"[",d,".colorAttachments.length]);");c("}else{",e,".bindFramebuffer(",36160,",null);");ma&&c(r,".drawBuffersWEBGL(",k,");");c("}",h,".cur=",d,";",h,".dirty=false;","}")}function aa(d,c,a){var f=d.shared,e=f.gl,h=d.current,r=d.next,k=f.current,q=f.next,b=d.cond(k,".dirty");ka.forEach(function(c){c=H(c);if(!(c in a.state)){var f,l;if(c in r){f=r[c];l=h[c];var m=u(ba[c].length,function(d){return b.def(f,"[",d,"]")});b(d.cond(m.map(function(d,c){return d+"==="+l+"["+c+"]"}).join("&&")).then(e,
".",da[c],"(",m,");",m.map(function(d,c){return l+"["+c+"]="+d}).join(";"),";"))}else f=b.def(q,".",c),m=d.cond(f,"!==",k,".",c),b(m),c in ca?m(d.cond(f).then(e,".enable(",ca[c],");")["else"](e,".disable(",ca[c],");"),k,".",c,"=",f,";"):m(e,".",da[c],"(",f,");",k,".",c,"=",f,";")}});0===Object.keys(a.state).length&&b(k,".dirty=false;");c(b)}function ha(d,c,a,f){var h=d.shared,r=d.current,k=h.current,b=h.gl;p(Object.keys(a)).forEach(function(h){var q=a[h];if(!f||f(q)){var l=q.append(d,c);if(ca[h]){var m=
ca[h];e(q)?l?c(b,".enable(",m,");"):c(b,".disable(",m,");"):c(d.cond(l).then(b,".enable(",m,");")["else"](b,".disable(",m,");"));c(k,".",h,"=",l,";")}else if(Array.isArray(l)){var y=r[h];c(b,".",da[h],"(",l,");",l.map(function(d,c){return y+"["+c+"]="+d}).join(";"),";")}else c(b,".",da[h],"(",l,");",k,".",h,"=",l,";")}})}function ia(d,c){ja&&!d.instancing&&(d.instancing=c.def(d.shared.extensions,".angle_instanced_arrays"))}function na(d,c,a,e,h){function r(d){switch(d){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function k(a,e,h){function r(){c("if(!",y,".pointer){",l,".enableVertexAttribArray(",m,");",y,".pointer=true;}");var a=h.type,f;f=h.size?c.def(h.size,"||",e):e;c("if(",y,".type!==",a,"||",y,".size!==",f,"||",I.map(function(d){return y+"."+d+"!=="+h[d]}).join("||"),"){",l,".bindBuffer(",34962,",",p,".buffer);",l,".vertexAttribPointer(",[m,f,a,h.normalized,h.stride,h.offset],");",y,".type=",a,";",y,
".size=",f,";",I.map(function(d){return y+"."+d+"="+h[d]+";"}).join(""),"}");ja&&(a=h.divisor,c("if(",y,".divisor!==",a,"){",d.instancing,".vertexAttribDivisorANGLE(",[m,a],");",y,".divisor=",a,";}"))}function q(){c("if(",y,".pointer){",l,".disableVertexAttribArray(",m,");",y,".pointer=false;","}if(",f.map(function(d,c){return y+"."+d+"!=="+H[c]}).join("||"),"){",l,".vertexAttrib4f(",m,",",H,");",f.map(function(d,c){return y+"."+d+"="+H[c]+";"}).join(""),"}")}var l=b.gl,m=c.def(a,".location"),y=c.def(b.attributes,
"[",m,"]");a=h.state;var p=h.buffer,H=[h.x,h.y,h.z,h.w],I=["buffer","normalized","offset","stride"];1===a?r():2===a?q():(c("if(",a,"===",1,"){"),r(),c("}else{"),q(),c("}"))}var b=d.shared;e.forEach(function(f){var e=f.name,b=a.attributes[e],q;if(b){if(!h(b))return;q=b.append(d,c)}else{if(!h(F))return;var l=d.scopeAttrib(e);q={};Object.keys(new ga).forEach(function(d){q[d]=c.def(l,".",d)})}k(d.link(f),r(f.info.type),q)})}function oa(d,c,a,f,e){for(var h=d.shared,r=h.gl,k,q=0;q<f.length;++q){var l=
f[q],m=l.name,p=l.info.type,H=a.uniforms[m],l=d.link(l)+".location";if(H){if(!e(H))continue;if(H["static"]){m=H.value;if(35678===p||35680===p)p=d.link(m._texture),c(r,".uniform1i(",l,p+".bind());"),c.exit(p,".unbind()");else if(35674===p||35675===p||35676===p)m=d.global.def("["+m+"]"),H=2,35675===p?H=3:35676===p&&(H=4),c(r,".uniformMatrix",H,"fv(",l,",false,",m,");");else{switch(p){case 5126:k="1f";break;case 35664:k="2f";break;case 35665:k="3f";break;case 35666:k="4f";break;case 35670:k="1i";break;
case 5124:k="1i";break;case 35671:k="2i";break;case 35667:k="2i";break;case 35672:k="3i";break;case 35668:k="3i";break;case 35673:k="4i";break;case 35669:k="4i"}c(r,".uniform",k,"(",l,",",m,");")}continue}else m=H.append(d,c)}else{if(!e(F))continue;m=c.def(h.uniforms,"[",b.id(m),"]")}H=",";switch(p){case 35678:case 35680:p=c.def(m,"._texture");c(r,".uniform1i(",l,",",p,".bind());");c.exit(p,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2iv";break;case 35668:case 35672:k=
"3iv";break;case 35669:case 35673:k="4iv";break;case 5126:k="1f";break;case 35664:k="2fv";break;case 35665:k="3fv";break;case 35666:k="4fv";break;case 35674:k="Matrix2fv";H=",false,";break;case 35675:k="Matrix3fv";H=",false,";break;case 35676:k="Matrix4fv",H=",false,"}c(r,".uniform",k,"(",l,H,m,");")}}function pa(d,c,a,f){function h(f){var e=m[f];return e?e.batchStatic?e.append(d,c):e.append(d,a):c.def(l,".",f)}function r(){function d(){a(z,".drawElementsInstancedANGLE(",[p,I,u,H+"<<(("+u+"-5121)>>1)",
v],");")}function c(){a(z,".drawArraysInstancedANGLE(",[p,H,I,v],");")}y?t?d():(a("if(",y,"){"),d(),a("}else{"),c(),a("}")):c()}function k(){function d(){a(q+".drawElements("+[p,I,u,H+"<<(("+u+"-5121)>>1)"]+");")}function c(){a(q+".drawArrays("+[p,H,I]+");")}y?t?d():(a("if(",y,"){"),d(),a("}else{"),c(),a("}")):c()}var b=d.shared,q=b.gl,l=b.draw,m=f.draw,y=function(){var f=m.elements,e=c;f?(f.batchStatic||(e=a),f=f.append(d,e)):f=e.def(l,".","elements");f&&e("if("+f+")"+q+".bindBuffer(34963,"+f+".buffer.buffer);");
return f}(),p=h("primitive"),H=h("offset"),I=function(){var f=m.count,e=c;f?(f.batchStatic||(e=a),f=f.append(d,e)):f=e.def(l,".","count");return f}();if("number"===typeof I){if(0===I)return}else a("if(",I,"){"),a.exit("}");var v,z;ja&&(v=h("instances"),z=d.instancing);var u=y+".type",t=m.elements&&e(m.elements);ja&&("number"!==typeof v||0<=v)?"string"===typeof v?(a("if(",v,">0){"),r(),a("}else if(",v,"<0){"),k(),a("}")):r():k()}function qa(d,c,a,f,e){c=O();e=c.proc("body",e);ja&&(c.instancing=e.def(c.shared.extensions,
".angle_instanced_arrays"));d(c,e,a,f);return c.compile().body}function ta(d,c,a,f){ia(d,c);na(d,c,a,f.attributes,function(){return!0});oa(d,c,a,f.uniforms,function(){return!0});pa(d,c,c,a)}function va(d,c){var a=d.proc("draw",1);ia(d,a);Q(d,a,c.context);Z(d,a,c.framebuffer);aa(d,a,c);ha(d,a,c.state);var f=c.shader.progVar.append(d,a);a(d.shared.gl,".useProgram(",f,".program);");if(c.shader.program)ta(d,a,c,c.shader.program);else{var e=d.global.def("{}"),h=a.def(f,".id"),r=a.def(e,"[",h,"]");a(d.cond(r).then(r,
".call(this,a0);")["else"](r,"=",e,"[",h,"]=",d.link(function(a){return qa(ta,d,c,a,1)}),"(",f,");",r,".call(this,a0);"))}0<Object.keys(c.state).length&&a(d.shared.current,".dirty=true;")}function wa(d,c,a,f){function e(){return!0}d.batchId="a1";ia(d,c);na(d,c,a,f.attributes,e);oa(d,c,a,f.uniforms,e);pa(d,c,c,a)}function ra(d,c,a,f){function e(d){return d.contextDep&&r||d.propDep}function h(d){return!e(d)}ia(d,c);var r=a.contextDynamic,k=c.def(),b=c.def();d.shared.props=b;d.batchId=k;var q=d.scope(),
l=d.scope();c(q.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",b,"=","a0","[",k,"];",l,"}",q.exit);a.needsContext&&Q(d,l,a.context);a.needsFramebuffer&&Z(d,l,a.framebuffer);ha(d,l,a.state,e);f?(na(d,q,a,f.attributes,h),na(d,l,a,f.attributes,e),oa(d,q,a,f.uniforms,h),oa(d,l,a,f.uniforms,e),pa(d,q,l,a)):(c=d.global.def("{}"),f=a.shader.progVar.append(d,l),b=l.def(f,".id"),q=l.def(c,"[",b,"]"),l(d.shared.gl,".useProgram(",f,".program);","if(!",q,"){",q,"=",c,"[",b,"]=",d.link(function(c){return qa(wa,
d,a,c,2)}),"(",f,");}",q,".call(this,a0[",k,"],",k,");"))}function xa(d,c){var a=d.proc("batch",2);d.batchId="0";ia(d,a);var f=!1,e=!0;Object.keys(c.context).forEach(function(d){f=f||c.context[d].propDep});f||(Q(d,a,c.context),e=!1);var h=c.framebuffer,r=!1;h&&(h.propDep?f=r=!0:h.contextDep&&f&&(r=!0),r||Z(d,a,h));c.state.viewport&&c.state.viewport.propDynamic&&(f=!0);aa(d,a,c);ha(d,a,c.state,function(d){return!(d.contextDep&&f||d.propDep)});c.contextDep=f;c.needsContext=e;c.needsFramebuffer=r;e=
c.shader.progVar;if(e.contextDep&&f||e.propDep)ra(d,a,c,null);else if(e=e.append(d,a),a(d.shared.gl,".useProgram(",e,".program);"),c.shader.program)ra(d,a,c,c.shader.program);else{var h=d.global.def("{}"),r=a.def(e,".id"),k=a.def(h,"[",r,"]");a(d.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",r,"]=",d.link(function(a){return qa(ra,d,c,a,2)}),"(",e,");",k,".call(this,a0,a1);"))}0<Object.keys(c.state).length&&a(d.shared.current,".dirty=true;")}function ya(d,c){function a(h){var r=c.shader[h];
r&&f.set(e.shader,"."+h,r.append(d,f))}var f=d.proc("scope",3);d.batchId="a2";var e=d.shared,h=e.current;Q(d,f,c.context);c.framebuffer&&c.framebuffer.append(d,f);p(Object.keys(c.state)).forEach(function(a){var h=c.state[a].append(d,f);Array.isArray(h)?h.forEach(function(c,e){f.set(d.next[a],"["+e+"]",c)}):f.set(e.next,"."+a,h)});["elements","offset","count","instances","primitive"].forEach(function(a){var h=c.draw[a];h&&f.set(e.draw,"."+a,""+h.append(d,f))});Object.keys(c.uniforms).forEach(function(a){f.set(e.uniforms,
"["+b.id(a)+"]",c.uniforms[a].append(d,f))});Object.keys(c.attributes).forEach(function(a){var e=c.attributes[a].append(d,f),h=d.scopeAttrib(a);Object.keys(new ga).forEach(function(d){f.set(h,"."+d,e[d])})});a("vert");a("frag");0<Object.keys(c.state).length&&(f(h,".dirty=true;"),f.exit(h,".dirty=true;"));f("a1(",d.shared.context,",a0,0);")}var ga=N.Record,ea={add:32774,subtract:32778,"reverse subtract":32779};v.ext_blend_minmax&&(ea.min=32775,ea.max=32776);var ja=v.angle_instanced_arrays,ma=v.webgl_draw_buffers,
ba={dirty:!0},fa={},ka=[],ca={},da={};I("dither",3024);I("blend.enable",3042);K("blend.color","blendColor",[0,0,0,0]);K("blend.equation","blendEquationSeparate",[32774,32774]);K("blend.func","blendFuncSeparate",[1,0,1,0]);I("depth.enable",2929,!0);K("depth.func","depthFunc",513);K("depth.range","depthRange",[0,1]);K("depth.mask","depthMask",!0);K("colorMask","colorMask",[!0,!0,!0,!0]);I("cull.enable",2884);K("cull.face","cullFace",1029);K("frontFace","frontFace",2305);K("lineWidth","lineWidth",1);
I("polygonOffset.enable",32823);K("polygonOffset.offset","polygonOffset",[0,0]);I("sample.alpha",32926);I("sample.enable",32928);K("sample.coverage","sampleCoverage",[1,!1]);I("stencil.enable",2960);K("stencil.mask","stencilMask",-1);K("stencil.func","stencilFunc",[519,0,-1]);K("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);K("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);I("scissor.enable",3089);K("scissor.box","scissor",[0,0,d.drawingBufferWidth,d.drawingBufferHeight]);
K("viewport","viewport",[0,0,d.drawingBufferWidth,d.drawingBufferHeight]);var sa={gl:d,context:P,strings:b,next:fa,current:ba,draw:L,elements:g,buffer:A,shader:M,attributes:N.state,uniforms:C,framebuffer:G,extensions:v,isBufferArgs:t},la={primTypes:m,compareFuncs:r,blendFuncs:c,blendEquations:ea,stencilOps:k,glTypes:h,orientationType:z};ma&&(la.backBuffer=[1029],la.drawBuffer=u(E.maxDrawbuffers,function(d){return u(d,function(d){return 36064+d})}));var ua=0;return{next:fa,current:ba,procs:function(){var d=
O(),c=d.proc("poll"),a=d.proc("refresh"),f=d.block();c(f);a(f);var e=d.shared,h=e.gl,r=e.next,k=e.current;f(k,".dirty=false;");Z(d,c);a(e.framebuffer,".dirty=true;");Z(d,a);Object.keys(ca).forEach(function(e){var q=ca[e],b=f.def(r,".",e),l=d.block();l("if(",b,"){",h,".enable(",q,")}else{",h,".disable(",q,")}",k,".",e,"=",b,";");a(l);c("if(",b,"!==",k,".",e,"){",l,"}")});Object.keys(da).forEach(function(e){var q=da[e],b=ba[e],l,m,y=d.block();y(h,".",q,"(");Array.isArray(b)?(q=b.length,l=d.global.def(r,
".",e),m=d.global.def(k,".",e),y(u(q,function(d){return l+"["+d+"]"}),");",u(q,function(d){return m+"["+d+"]="+l+"["+d+"];"}).join("")),c("if(",u(q,function(d){return l+"["+d+"]!=="+m+"["+d+"]"}).join("||"),"){",y,"}")):(l=f.def(r,".",e),m=f.def(k,".",e),y(l,");",k,".",e,"=",l,";"),c("if(",l,"!==",m,"){",y,"}"));a(y)});return d.compile()}(),compile:function(d,c,a,f){var e=O(),h;h=V(d);var r=W(d,h),k=S(d),q=Y(d);d=X(d);var b=r.viewport;b&&(q.viewport=b);b=H("scissor.box");(r=r[b])&&(q[b]=r);r=0<Object.keys(q).length;
h={framebuffer:h,draw:k,shader:d,state:q,dirty:r};h.uniforms=R(a);h.attributes=U(c);h.context=T(f);va(e,h);ya(e,h);xa(e,h);return e.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":19,"./util/is-ndarray":21,"./util/is-typed-array":22,"./util/loop":24}],8:[function(b,g,n){function t(a,b){this.id=e++;this.type=a;this.data=b}function p(a){if(0===a.length)return[];var e=a.charAt(0),b=a.charAt(a.length-1);if(1<a.length&&e===b&&('"'===e||"'"===e))return['"'+a.substr(1,
a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return p(a.substr(0,e.index)).concat(p(e[1])).concat(p(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(b=0;b<e.length;++b)a=a.concat(p(e[b]));return a}function a(a){return"["+p(a).join("][")+"]"}var e=0;g.exports={define:function(e,b){switch(typeof b){case "boolean":case "number":case "string":return new t(e,
a(b+""));case "undefined":return new t(e|128,null)}},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof t},unbox:function(e,b){if(e instanceof t){if(e.type&128)return new t(e.type&-129,a(b))}else if("function"===typeof e)return new t(0,e);return e},accessor:a}},{}],9:[function(b,g,n){var t=b("./util/is-typed-array"),p=b("./util/is-ndarray"),a=b("./constants/primitives.json");g.exports=function(e,b,l){function x(){this.buffer=null;this.primType=4;this.type=this.vertCount=
0}function u(e){function v(f){var c=b.oes_element_index_uint;if(f)if("number"===typeof f)h(f);else{var e=null,k="static";Array.isArray(f)||t(f)||p(f)?e=f:("data"in f&&(e=f.data),"usage"in f&&(k=f.usage));Array.isArray(e)||p(e)&&Array.isArray(e.data)||"type"in f?h({type:f.type||(c?"uint32":"uint16"),usage:k,data:e}):h({usage:k,data:e});if(Array.isArray(e)||t(e))h.dimension=3}else h();c=m.buffer.byteLength;e=0;switch(m.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;c>>=1;
break;case 5125:case 5124:e=5125,c>>=2}var k=4,l=m.buffer.dimension;1===l&&(k=0);2===l&&(k=1);3===l&&(k=4);"object"===typeof f&&("primitive"in f&&(k=a[f.primitive]),"count"in f&&(c=f.vertCount|0));m.primType=k;m.vertCount=c;m.type=e;return v}var m=new x,h=l.create(null,34963,!0);m.buffer=h._buffer;v(e);v._reglType="elements";v._elements=m;v.destroy=function(){h.destroy();m.buffer=null};return v}x.prototype.bind=function(){this.buffer.bind()};return{create:u,createStream:function(a){return u({usage:"stream",
data:a})._elements},destroyStream:function(a){l.destroyStream(a.buffer)},getElements:function(a){return"function"===typeof a&&a._elements instanceof x?a._elements:null}}}},{"./constants/primitives.json":6,"./util/is-ndarray":21,"./util/is-typed-array":22}],10:[function(b,g,n){g.exports=function(b){function p(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(e){try{a[e]=
b.getExtension(e)}catch(q){}})}var a={};p();return{extensions:a,refresh:p}}},{}],11:[function(b,g,n){var t=b("./util/values"),p=b("./util/extend");g.exports=function(a,e,b,l,x){function u(d,c,a,f){this.target=d;this.level=c;this.texture=a;this.renderbuffer=f}function w(d){d&&(d.texture&&d.texture._texture.decRef(),d.renderbuffer&&d.renderbuffer._renderbuffer.decRef())}function v(d,c){var a=c.width,f=c.height;if(d.texture)var e=d.texture._texture,h=Math.max(1,e.params.width>>d.level),r=Math.max(1,
e.params.height>>d.level),a=a||h,f=f||r;else e=d.renderbuffer._renderbuffer,a=a||e.width,f=f||e.height;e.refCount+=1;c.width=a;c.height=f}function m(d,c){c?c.texture?a.framebufferTexture2D(36160,d,c.target,c.texture._texture.texture,c.level):a.framebufferRenderbuffer(36160,d,36161,c.renderbuffer._renderbuffer.renderbuffer):a.framebufferTexture2D(36160,d,3553,null,0)}function h(d){var c=3553,a=0,f=null,e=null;"object"===typeof d&&("level"in d&&(a=d.level|0),"target"in d&&(c=d.target|0));var h=d._reglType;
"texture"===h?f=d:"renderbuffer"===h&&(e=d,c=36161,a=0);return new u(c,a,f,e)}function f(d){return d&&(d.texture||d.renderbuffer)}function c(){this.id=A++;g[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function r(d){a.isFramebuffer(d.framebuffer)||(d.framebuffer=a.createFramebuffer());z.dirty=!0;a.bindFramebuffer(36160,d.framebuffer);for(var c=
d.colorAttachments,f=0;f<c.length;++f)m(36064+f,c[f]);for(f=c.length;f<b.maxColorAttachments;++f)m(36064+f,null);m(36096,d.depthAttachment);m(36128,d.stencilAttachment);m(33306,d.depthStencilAttachment);e.webgl_draw_buffers&&e.webgl_draw_buffers.drawBuffersWEBGL(E[c.length]);a.checkFramebufferStatus(36160)}function k(d){d=d.framebuffer;a.isFramebuffer(d)&&a.deleteFramebuffer(d)}var z={current:null,next:null,dirty:!1},F={rgba:6408},d={rgba4:32854,rgb565:36194,"rgb5 a1":32855};e.ext_srgb&&(d.srgba=
35907);e.ext_color_buffer_half_float&&(d.rgba16f=34842,d.rgb16f=34843);e.webgl_color_buffer_float&&(d.rgba32f=34836);var y=[],D=[];e.webgl_depth_texture&&(y.push(6402),D.push(34041));p(p({},F),d);t(F);t(d);d=5121;y={uint8:5121};e.oes_texture_half_float&&(d=y["half float"]=36193);e.oes_texture_float&&(d=y["float"]=5126);y.best=d;var E=function(){for(var d=Array(b.maxDrawbuffers),c=0;c<=b.maxDrawbuffers;++c)for(var a=d[c]=Array(c),f=0;f<c;++f)a[f]=36064+f;return d}(),A=0,g={};return p(z,{getFramebuffer:function(d){return"function"===
typeof d&&"framebuffer"===d._reglType&&(d=d._framebuffer,d instanceof c)?d:null},create:function(d){function e(d){var c,k=d||{},q=d=0;if("shape"in k){var m=k.shape;d=m[0];q=m[1]}else"radius"in k&&(d=q=k.radius),"width"in k&&(d=k.width),"height"in k&&(q=k.height);var y=null,m=!1;if("colorBuffers"in k||"colorBuffer"in k){y=k.colorBuffers||k.colorBuffer;Array.isArray(y)||(y=[y]);b.width=d;b.height=q;y=y.map(h);for(c=0;c<y.length;++c)v(y[c],b);d=b.width;q=b.height}else{var p=!0,z="rgba",t="uint8",D=1,
m=!0;b.width=d=d||a.drawingBufferWidth;b.height=q=q||a.drawingBufferHeight;"format"in k&&(z=k.format,p=z in F);"type"in k&&(t=k.type);"colorCount"in k&&(D=k.colorCount|0);if(b.ownsColor)for(y=b.colorAttachments;y.length>D;)w(y.pop());else y=[];for(c=0;c<y.length;++c){var A;a:{A=y[c];var E=p,g=z,B=d,n=q;if(A.texture){var J=A.texture;if(E){J({format:g,type:t,width:B,height:n});J._texture.refCount+=1;A=!0;break a}}else if(J=A.renderbuffer,!E){J({format:g,width:B,height:n});J._renderbuffer.refCount+=
1;A=!0;break a}w(A);A=!1}A||(y[c--]=y[y.length-1],y.pop())}for(;y.length<D;)p?y.push(new u(3553,0,l.create({format:z,type:t,width:d,height:q},3553),null)):y.push(new u(36161,0,null,x.create({format:z,width:d,height:q})))}b.width=d;b.height=q;z=p=c=null;t=!1;"depthBuffer"in k&&(c=h(k.depthBuffer));"stencilBuffer"in k&&(p=h(k.stencilBuffer));"depthStencilBuffer"in k&&(z=h(k.depthStencilBuffer));if(c||p||z)v(c||p||z,b);else if(D=!0,E=A=!1,"depth"in k&&(D=!!k.depth),"stencil"in k&&(A=!!k.stencil),"depthTexture"in
k&&(E=!!k.depthTexture),k=b.depthAttachment||b.stencilAttachment||b.depthStencilAttachment,g=null,D||A)t=!0,E?(E=A?"depth stencil":"depth",b.ownsDepthStencil&&k.texture?(k.texture({format:E,width:d,height:q}),k.texture._texture.refCount+=1,g=k):g=new u(3553,0,l.create({format:E,width:d,height:q},3553),null)):(E=D?A?"depth stencil":"depth":"stencil",b.ownsDepthStencil&&k.renderbuffer?(k.renderbuffer({format:E,width:d,height:q}),k.renderbuffer._renderbuffer.refCount+=1,g=k):g=new u(36161,0,null,x.create({format:E,
width:d,height:q}))),D?A?z=g:c=g:p=g;d=b;d.colorAttachments.forEach(w);w(d.depthAttachment);w(d.stencilAttachment);w(d.depthStencilAttachment);b.colorAttachments=y;b.depthAttachment=c;b.stencilAttachment=p;b.depthStencilAttachment=z;b.ownsColor=m;b.ownsDepthStencil=t;e.color=y.map(f);e.depth=f(c);e.stencil=f(p);e.depthStencil=f(z);r(b);e.width=b.width;e.height=b.height;return e}var b=new c;e(d);e._reglType="framebuffer";e._framebuffer=b;e._destroy=function(){k(b)};return e},clear:function(){t(g).forEach(k)},
refresh:function(){t(g).forEach(r)}})}},{"./util/extend":20,"./util/values":28}],12:[function(b,g,n){g.exports=function(b,p){var a=1;p.ext_texture_filter_anisotropic&&(a=b.getParameter(34047));var e=1,q=1;p.webgl_draw_buffers&&(e=b.getParameter(34852),q=b.getParameter(36063));return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(p).filter(function(a){return!!p[a]}),
maxAnisotropic:a,maxDrawbuffers:e,maxColorAttachments:q,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),
maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938)}}},{}],13:[function(b,g,n){var t=b("./util/is-typed-array");g.exports=function(b,a,e){return function(q){var l=q||{};t(q)?l={data:l}:2===arguments.length?l={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof q&&(l={});a();var x=l.x||0,u=l.y||0,w=l.width||e.viewportWidth,v=l.height||e.viewportHeight,l=l.data||new Uint8Array(w*v*4);b.pixelStorei(3333,
4);b.readPixels(x,u,w,v,6408,5121,l);return l}}},{"./util/is-typed-array":22}],14:[function(b,g,n){var t=b("./util/values");g.exports=function(b,a,e){function q(){this.id=w++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function l(a){b.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=b.createRenderbuffer());b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)}function x(a){var e=a.renderbuffer;b.bindRenderbuffer(36161,
null);b.isRenderbuffer(e)&&b.deleteRenderbuffer(e);a.renderbuffer=null;a.refCount=0;delete v[a.id]}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(u.srgba=35907);a.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);a.webgl_color_buffer_float&&(u.rgba32f=34836);var w=0,v={};q.prototype.decRef=function(){0===--this.refCount&&x(this)};return{create:function(a){function e(c){c=c||{};var a=0,k=0;"shape"in c?(k=c.shape,a=k[0]|0,k=
k[1]|0):("radius"in c&&(a=k=c.radius|0),"width"in c&&(a=c.width|0),"height"in c&&(k=c.height|0));e.width=f.width=Math.max(a,1);e.height=f.height=Math.max(k,1);f.format=32854;"format"in c&&(f.format=u[c.format]);l(f);return e}var f=new q;v[f.id]=f;e(a);e._reglType="renderbuffer";e._renderbuffer=f;e.destroy=function(){f.decRef()};return e},refresh:function(){t(v).forEach(l)},clear:function(){t(v).forEach(x)}}}},{"./util/values":28}],15:[function(b,g,n){var t=b("./util/values");g.exports=function(b,
a){function e(c,a,f,e){this.name=c;this.id=a;this.location=f;this.info=e}function q(c,a){for(var f=0;f<c.length;++f)if(c[f].id===a.id){c[f].location=a.location;return}c.push(a)}function l(c,f,e){e=35632===c?w:v;var h=e[f];if(!h){var q=a.str(f),h=b.createShader(c);b.shaderSource(h,q);b.compileShader(h);e[f]=h}return h}function x(c,a){this.id=f++;this.fragId=c;this.vertId=a;this.program=null;this.uniforms=[];this.attributes=[]}function u(c,f){var h,m;h=l(35632,c.fragId);m=l(35633,c.vertId);var v=c.program=
b.createProgram();b.attachShader(v,h);b.attachShader(v,m);b.linkProgram(v);var d=b.getProgramParameter(v,35718),y=c.uniforms;for(h=0;h<d;++h)if(m=b.getActiveUniform(v,h))if(1<m.size)for(var u=0;u<m.size;++u){var w=m.name.replace("[0]","["+u+"]");q(y,new e(w,a.id(w),b.getUniformLocation(v,w),m))}else q(y,new e(m.name,a.id(m.name),b.getUniformLocation(v,m.name),m));d=b.getProgramParameter(v,35721);y=c.attributes;for(h=0;h<d;++h)(m=b.getActiveAttrib(v,h))&&q(y,new e(m.name,a.id(m.name),b.getAttribLocation(v,
m.name),m))}var w={},v={},m={},h=[],f=0;return{clear:function(){var c=b.deleteShader.bind(b);t(w).forEach(c);w={};t(v).forEach(c);v={};h.forEach(function(c){b.deleteProgram(c.program)});h.length=0;m={}},refresh:function(){w={};v={};h.forEach(u)},program:function(c,a,f){var e=m[a];e||(e=m[a]={});var b=e[c];b||(b=new x(a,c),u(b,f),e[c]=b,h.push(b));return b},shader:l,frag:null,vert:null}}},{"./util/values":28}],16:[function(b,g,n){g.exports=function(){var b={"":0},p=[""];return{id:function(a){var e=
b[a];if(e)return e;e=b[a]=p.length;p.push(a);return e},str:function(a){return p[a]}}}},{}],17:[function(b,g,n){function t(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function p(c){if(!Array.isArray(c))return!1;var a=c.length;if(0===a||!Array.isArray(c[0]))return!1;for(var f=c[0].length,e=1;e<a;++e)if(!Array.isArray(c[e])||c[e].length!==f)return!1;return!0}function a(c){return Object.prototype.toString.call(c)}function e(c){return"[object HTMLCanvasElement]"===a(c)}function q(c){return"[object CanvasRenderingContext2D]"===
a(c)}var l=b("./util/extend"),x=b("./util/values"),u=b("./util/is-typed-array"),w=b("./util/is-ndarray"),v=b("./util/load-texture"),m=b("./util/to-half-float"),h=b("./util/parse-dds"),f=[9984,9986,9985,9987];g.exports=function(c,b,k,z,g){function d(d){this.target=d;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=
this.miplevel=0;this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function y(d){this.target=d;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function D(d,c){var a,e,h=0,b=0,k=0,r=0,q=0,m=0,l=!1,y=!1,p=!1;for(a=0;a<c.length;++a)e=c[a],r=r||e.width<<e.miplevel,q=q||e.height<<e.miplevel,
h=h||e.type,b=b||e.format,k=k||e.internalformat,m=m||e.channels,l=l||e.needsPoll,y=y||e.needsListeners,e=e.miplevel,p=p||0<e;d.needsPoll=l;d.needsListeners=y;d.width=r;d.height=q;d.format=b;d.internalformat=k;d.type=h;if(3553!==d.target)for(a=0;6>a;++a);a=0<=f.indexOf(d.minFilter);d.genMipmaps=!p&&(d.genMipmaps||a);p=p||d.genMipmaps;d.minFilter||(d.minFilter=p?9987:9728);d.wrapS=d.wrapS||33071;d.wrapT=d.wrapT||33071;for(a=0;a<c.length;++a)e=c[a],e.channels||(e.channels=m),e.format||(e.format=b),e.internalformat||
(e.internalformat=k),e.type||(e.type=h)}function E(d){this.id=Y++;this.refCount=1;this.target=d;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new y(d);this.pixels=[]}function A(c,a){function e(c,f){var h=f.mipmap,k;if(Array.isArray(h))for(var r=0;r<h.length;++r)k=new d(c),k.parseFlags(a),k.parseFlags(f),k.parse(h[r],r),b.push(k);else k=new d(c),k.parseFlags(a),k.parse(f,0),b.push(k)}var f;G(c);var h=c.params;y.call(h,c.target);var b=c.pixels;b.length=
0;h.parse(a);if(3553===c.target)e(3553,a);else{var k=a.faces||a;if(Array.isArray(k))for(f=0;6>f;++f)e(34069+f,k[f]);else if("string"!==typeof k)for(f=0;6>f;++f)e(34069+f,{})}D(h,b);h.needsListeners&&n(c);h.needsPoll&&(c.pollId=U.length,U.push(c));B(c)}function B(d){c.isTexture(d.texture)||(d.texture=c.createTexture());var a=d.target,f=d.unit;0<=f?(c.activeTexture(33984+f),S=f):c.bindTexture(a,d.texture);for(var a=d.pixels,e=d.params,h=0;h<a.length;++h)a[h].upload(e);e.upload();0>f&&((f=Q[S])?c.bindTexture(f.target,
f.texture):(d.unit=S,Q[S]=d))}function n(c){function a(c,f,e){var k=h(e);k.pixels.forEach(function(a){var e=new d(k.cube?a.target:c);e.channels=k.channels;e.compressed=k.compressed;e.type=k.type;e.internalformat=k.format;e.format=X[k.format];e.width=a.width;e.height=a.height;e.miplevel=a.miplevel||f;e.data=a.data;b.push(e)})}function f(){for(var d=0;d<b.length;++d){var h=b[d],k=h.image,r=h.video,q=h.xhr;k&&k.complete?(h.width=k.naturalWidth,h.height=k.naturalHeight):r&&2<r.readyState?(h.width=r.width,
h.height=r.height):q&&4===q.readyState&&(b[d]=b[b.length-1],b.pop(),q.removeEventListener("readystatechange",B),a(h.target,h.miplevel,q.response))}D(e,b);B(c)}var e=c.params,b=c.pixels;b.forEach(function(d){d.image&&!d.image.complete?d.image.addEventListener("load",f):d.video&&1>d.readyState?d.video.addEventListener("progress",f):d.xhr&&d.xhr.addEventListener("readystatechange",f)});c.cancelPending=function(){b.forEach(function(d){d.image?d.image.removeEventListener("load",f):d.video?d.video.removeEventListener("progress",
f):d.xhr&&(d.xhr.removeEventListener("readystatechange",f),d.xhr.abort())})}}function G(d){var c=d.cancelPending;c&&(c(),d.cancelPending=null);c=d.pollId;0<=c&&((U[c]=U[U.length-1]).id=c,U.pop(),d.pollId=-1)}function C(d){var a=d.texture,f=d.unit,e=d.target;0<=f&&(c.activeTexture(33984+f),S=f,c.bindTexture(e,null),Q[f]=null);G(d);c.isTexture(a)&&c.deleteTexture(a);d.texture=null;d.params=null;d.pixels=null;d.refCount=0;delete R[d.id]}var N={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
M={repeat:10497,clamp:33071,mirror:33648},L={nearest:9728,linear:9729},P=l({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},L),H={none:0,browser:37444},I={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},K={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},O={};b.ext_srgb&&(K.srgb=35904,K.srgba=35906);b.oes_texture_float&&(I["float"]=5126);b.oes_texture_half_float&&
(I["half float"]=36193);b.webgl_depth_texture&&(l(K,{depth:6402,"depth stencil":34041}),l(I,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&l(O,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&l(O,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&l(O,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(O["rgb etc1"]=36196);var V=Array.prototype.slice.call(c.getParameter(34467));Object.keys(O).forEach(function(d){var c=O[d];0<=V.indexOf(c)&&(K[d]=c)});var W=Object.keys(K);k.textureFormats=W;var X=W.reduce(function(d,c){var a=K[c];6409===a||6406===a||6409===a||6410===a||6402===a||34041===a?d[a]=a:32855===a||0<=c.indexOf("rgba")?d[a]=6408:d[a]=6407;return d},{});l(d.prototype,{parseFlags:function(d){if("object"===typeof d&&d){"premultiplyAlpha"in
d&&(this.premultiplyAlpha=d.premultiplyAlpha);"flipY"in d&&(this.flipY=d.flipY);"alignment"in d&&(this.unpackAlignment=d.alignment);"colorSpace"in d&&(this.colorSpace=H[d.colorSpace]);if("format"in d){var c=d.format;this.internalformat=K[c];c in I&&(this.type=I[c]);c in O&&(this.compressed=!0)}"type"in d&&(this.type=I[d.type]);var c=this.width,a=this.height,f=this.channels;"shape"in d?(c=d.shape[0],a=d.shape[1],3===d.shape.length&&(f=d.shape[2])):("radius"in d&&(c=a=d.radius),"width"in d&&(c=d.width),
"height"in d&&(a=d.height),"channels"in d&&(f=d.channels));this.width=c|0;this.height=a|0;this.channels=f|0;"stride"in d?(c=d.stride,this.strideX=c[0],this.strideY=c[1],this.strideC=3===c.length?c[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*f,this.strideY=this.strideX*c);"offset"in d&&(this.offset=d.offset|0,this.needsTranspose=!0);"crossOrigin"in d&&(this.crossOrigin=d.crossOrigin)}},parse:function(d,c){this.miplevel=c;this.width>>=c;this.height>>=c;var f=d;switch(typeof d){case "object":if(!d)return;
this.parseFlags(d);var h=d.data;if("string"===typeof h||h&&(u(h)||t(h)||w(h)||e(h)||q(h)||"[object HTMLImageElement]"===a(h)||"[object HTMLVideoElement]"===a(h)||p(h)))f=d.data;break;case "undefined":return}"string"===typeof f&&(f=v(f,this.crossOrigin));var h=null,b=!1;if(null!==f)if(u(f))this.data=f;else if(t(f))h=f,b=!0;else if(w(f)){Array.isArray(f.data)?(h=f.data,b=!0):this.data=f.data;var k=f.shape;this.width=k[0];this.height=k[1];this.channels=3===k.length?k[2]:1;k=f.stride;this.strideX=f.stride[0];
this.strideY=f.stride[1];this.strideC=3===k.length?f.stride[2]:1;this.offset=f.offset;this.needsTranspose=!0}else if(e(f)||q(f))e(f)?this.canvas=f:this.canvas=f.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===a(f))this.image=f,f.complete?(this.width=f.naturalWidth,this.height=f.naturalHeight):(this.width=this.width||f.naturalWidth,this.height=this.height||f.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===a(f))this.video=f,1<f.readyState?(this.width=f.width,this.height=f.height):(this.width=this.width||f.width,this.height=this.height||f.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===a(f))this.xhr=f,this.needsListeners=!0;else if(p(f)){var b=f[0].length,k=f.length,r=1,l,y,H,I;if(Array.isArray(f[0][0]))for(r=f[0][0].length,h=Array(b*k*r),y=I=0;y<k;++y)for(l=0;l<b;++l)for(H=0;H<r;++H)h[I++]=f[y][l][H];
else for(h=Array(b*k),y=I=0;y<k;++y)for(l=0;l<b;++l)h[I++]=f[y][l];this.width=b;this.height=k;this.channels=r;b=!0}else d.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||g.viewportWidth)|0,this.height=(this.height||g.viewportHeight)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=
[6409,6410,6407,6408][(this.channels=this.channels||4)-1]);f=this.internalformat;k=this.format=X[f];if(!this.channels)switch(k){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}k=this.type;5126!==k&&36193!==k&&(k||(k=6402===f?5125:5121));this.type=k;if(b)switch(k){case 5121:this.data=new Uint8Array(h);break;case 5123:this.data=new Uint16Array(h);break;case 5125:this.data=new Uint32Array(h);break;
case 5126:this.data=new Float32Array(h);break;case 36193:this.data=m(h)}if(this.data&&this.needsTranspose){h=this.data;f=this.width;b=this.height;k=this.channels;r=this.strideX;l=this.strideY;y=this.strideC;H=this.offset;I=new h.constructor(f*b*k);for(var z=0,x=0;x<b;++x)for(var D=0;D<f;++D)for(var A=0;A<k;++A)I[z++]=h[l*x+r*D+y*A+H];this.data=I}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(d){c.pixelStorei(37440,
this.flipY);c.pixelStorei(37441,this.premultiplyAlpha);c.pixelStorei(37443,this.colorSpace);c.pixelStorei(3317,this.unpackAlignment);var a=this.target,f=this.miplevel,e=this.image,h=this.canvas,b=this.video,k=this.data,r=this.internalformat,q=this.format,l=this.type,m=this.width||Math.max(1,d.width>>f);d=this.height||Math.max(1,d.height>>f);b&&2<b.readyState?c.texImage2D(a,f,q,q,l,b):e&&e.complete?c.texImage2D(a,f,q,q,l,e):h?c.texImage2D(a,f,q,q,l,h):this.compressed?c.compressedTexImage2D(a,f,r,m,
d,0,k):this.copy?(z(),c.copyTexImage2D(a,f,q,this.x,this.y,m,d,0)):k?c.texImage2D(a,f,q,m,d,0,q,l,k):c.texImage2D(a,f,q,m||1,d||1,0,q,l,null)}});l(y.prototype,{parse:function(d){if("object"===typeof d&&d){"min"in d&&(this.minFilter=P[d.min]);"mag"in d&&(this.magFilter=L[d.mag]);var c=this.wrapS,a=this.wrapT;if("wrap"in d){var f=d.wrap;"string"===typeof f?c=a=M[f]:Array.isArray(f)&&(c=M[f[0]],a=M[f[1]])}else"wrapS"in d&&(c=M[d.wrapS]),"wrapT"in d&&(a=M[d.wrapT]);this.wrapS=c;this.wrapT=a;"anisotropic"in
d&&(this.anisotropic=d.anisotropic);if("mipmap"in d)switch(d=d.mipmap,typeof d){case "string":this.mipmapHint=N[d];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!d}}},upload:function(){var d=this.target;c.texParameteri(d,10241,this.minFilter);c.texParameteri(d,10240,this.magFilter);c.texParameteri(d,10242,this.wrapS);c.texParameteri(d,10243,this.wrapT);b.ext_texture_filter_anisotropic&&c.texParameteri(d,34046,this.anisotropic);this.genMipmaps&&(c.hint(33170,this.mipmapHint),c.generateMipmap(d))}});
var S=0,Y=0,R={},U=[],T=k.maxTextureUnits,Q=Array(T).map(function(){return null});l(E.prototype,{bind:function(){this.bindCount+=1;var d=this.unit;if(0>d){for(var a=0;a<T;++a){var f=Q[a];if(f){if(0<f.bindCount)continue;f.unit=-1}Q[a]=this;d=a;break}this.unit=d;c.activeTexture(33984+d);c.bindTexture(this.target,this.texture);S=d}return d},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&C(this)}});return{create:function(d,c){function a(d,e,h,b,k,r){var q=d||{};34067===c&&
6===arguments.length&&(q=[d,e,h,b,k,r]);A(f,q);a.width=f.params.width;a.height=f.params.height;return a}var f=new E(c);R[f.id]=f;a(d);a._reglType="texture";a._texture=f;a.destroy=function(){f.decRef()};return a},refresh:function(){x(R).forEach(B);for(var d=0;d<T;++d)Q[d]=null;S=0;c.activeTexture(33984)},clear:function(){for(var d=0;d<T;++d)c.activeTexture(33984+d),c.bindTexture(3553,null),Q[d]=null;c.activeTexture(33984);S=0;x(R).forEach(C)},poll:function(){U.forEach(B)},getTexture:function(d){return null}}}},
{"./util/extend":20,"./util/is-ndarray":21,"./util/is-typed-array":22,"./util/load-texture":23,"./util/parse-dds":25,"./util/to-half-float":27,"./util/values":28}],18:[function(b,g,n){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],19:[function(b,g,n){function t(a){return Array.prototype.slice.call(a)}function p(a){return t(a).join("")}var a=b("./extend");g.exports=function(){function e(){var e=[],h=[];return a(function(){e.push.apply(e,
t(arguments))},{def:function(){var a="v"+l++;h.push(a);0<arguments.length&&(e.push(a,"="),e.push.apply(e,t(arguments)),e.push(";"));return a},toString:function(){return p([0<h.length?"var "+h+";":"",p(e)])}})}function b(){function q(c,a){f(c,a,"=",h.def(c,a),";")}var h=e(),f=e(),c=h.toString,r=f.toString;return a(h,{entry:h,exit:f,save:q,set:function(c,a,f){q(c,a);h(c,a,"=",f,";")},toString:function(){return c()+r()}})}var l=0,x=[],u=[],w=e(),v={};return{global:w,link:function(a){for(var e=0;e<u.length;++e)if(u[e]===
a)return x[e];e="g"+l++;x.push(e);u.push(a);return e},block:e,proc:function(e,h){function f(){var a="a"+c.length;c.push(a);return a}var c=[];h=h||0;for(var r=0;r<h;++r)f();var r=b(),k=r.toString;return v[e]=a(r,{arg:f,toString:function(){return p(["function(",c.join(),"){",k(),"}"])}})},scope:b,cond:function(){var e=p(arguments),h=b(),f=b(),c=h.toString,r=f.toString;return a(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){f.apply(f,t(arguments));return this},toString:function(){var a=
r();a&&(a="else{"+a+"}");return p(["if(",e,"){",c(),"}",a])}})},compile:function(){var a=['"use strict";',w,"return {"];Object.keys(v).forEach(function(f){a.push('"',f,'":',v[f].toString(),",")});a.push("}");var e=p(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,x.concat(e)).apply(null,u)}}}},{"./extend":20}],20:[function(b,g,n){g.exports=function(b,p){for(var a=Object.keys(p),e=0;e<a.length;++e)b[a[e]]=p[a[e]];return b}},{}],21:[function(b,g,n){var t=b("./is-typed-array");
g.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||t(b.data))}},{"./is-typed-array":22}],22:[function(b,g,n){var t=b("../constants/arraytypes.json");g.exports=function(b){return Object.prototype.toString.call(b)in t}},{"../constants/arraytypes.json":4}],23:[function(b,g,n){g.exports=function(b,p){if("undefined"!==typeof document){var a;a=(a=/\.(\w+)(\?.*)?$/.exec(b))&&
a[1]?a[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(a))return a=document.createElement("video"),a.autoplay=!0,a.loop=!0,p&&(a.crossOrigin=p),a.src=b,a;if(0<=["dds"].indexOf(a))return a=new XMLHttpRequest,a.responseType="arraybuffer",a.open("GET",b,!0),a.send(),a;a=new Image;p&&(a.crossOrigin=p);a.src=b;return a}return null}},{}],24:[function(b,g,n){g.exports=function(b,p){for(var a=Array(b),e=0;e<b;++e)a[e]=p(e);return a}},
{}],25:[function(b,g,n){g.exports=function(b){function g(d){for(var c=N,a=M,f=0;f<K;++f){var e=Math.max(1,c+3>>2)*Math.max(1,a+3>>2)*H;V.pixels.push({target:d,miplevel:f,width:c,height:a,data:new Uint8Array(b,O,e)});O+=e;c>>=1;a>>=1}}var n=new Int32Array(b),C=n[z],N=n[d],M=n[F],L=u,P=0,H=0,I=4;switch(n[E]){case h:H=8;C&m?(I=3,P=a):P=e;break;case f:H=16;P=q;break;case c:H=16;P=l;break;case r:H=8,P=x}var K=1;n[D]&w&&(K=Math.max(1,n[y]));var O=n[k]+4,V={width:N,height:M,channels:I,format:P,type:L,compressed:!0,
cube:!1,pixels:[]};if(n[A]&v)for(V.cube=!0,n=0;6>n;++n)g(p+n);else g(t);return V};var t=3553,p=34069,a=33776,e=33777,q=33778,l=33779,x=36196,u=5121,w=131072,v=512,m=64,h=827611204,f=861165636,c=894720068,r=826496069,k=1,z=2,F=3,d=4,y=7,D=20,E=21,A=28},{}],26:[function(b,g,n){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(b){return requestAnimationFrame(b)},cancel:function(b){return cancelAnimationFrame(b)}}:{next:function(b){setTimeout(b,
30)},cancel:clearTimeout}},{}],27:[function(b,g,n){g.exports=function(b){for(var p=new Float32Array(b),p=new Uint32Array(p.buffer),a=new Uint16Array(b.length),e=0;e<b.length;++e)if(isNaN(b[e]))a[e]=65535;else if(Infinity===b[e])a[e]=31744;else if(-Infinity===b[e])a[e]=64512;else{var q=p[e],l=q>>>31<<15,x=(q<<1>>>24)-127,q=q>>13&1023;a[e]=-24>x?l:-14>x?l+(q+1024>>-14-x):15<x?l+31744:l+(x+15<<10)+q}return a}},{}],28:[function(b,g,n){g.exports=function(b){return Object.keys(b).map(function(p){return b[p]})}},
{}],29:[function(b,g,n){function t(e,b){function l(){var b=window.innerWidth,h=window.innerHeight;e!==document.body&&(h=e.getBoundingClientRect(),b=h.right-h.left,h=h.top-h.bottom);x.width=w*b;x.height=w*h;a(x.style,{width:b+"px",height:h+"px"})}var x=document.createElement("canvas"),u=p(x,b);a(x.style,{border:0,margin:0,padding:0,top:0,left:0});e.appendChild(x);e===document.body&&(x.style.position="absolute",a(e.style,{margin:0,padding:0}));var w=+u.options.pixelRatio;window.addEventListener("resize",
l,!1);var v=u.options.onDestroy;u.options=a(a({},u.options),{onDestroy:function(){window.removeEventListener("resize",l);e.removeChild(x);v&&v()}});l();return u}function p(e,b){function l(a){try{return e.getContext(a,p)}catch(b){return null}}var p=b.glOptions||{};return{gl:l("webgl")||l("experimental-webgl")||l("webgl-experimental"),options:a({pixelRatio:window.devicePixelRatio},b)}}var a=b("./util/extend");g.exports=function(e){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:e[0],
options:e[1]||{}};var b=document.body,l=e[1]||{};if("string"===typeof e[0])b=document.querySelector(e[0])||document.body;else if("object"===typeof e[0])if(e[0]instanceof HTMLElement)b=e[0];else{if(e[0]instanceof WebGLRenderingContext)return{gl:e[0],options:a({pixelRatio:1},l)};l=e[0]}return b.nodeName&&"CANVAS"===b.nodeName.toUpperCase()?p(b,l):t(b,l)}},{"./util/extend":20}],30:[function(b,g,n){function t(a,e,b){for(var u=[],w=e;w<b;w+=3)e=(a[w]<<16)+(a[w+1]<<8)+a[w+2],u.push(p[e>>18&63]+p[e>>12&
63]+p[e>>6&63]+p[e&63]);return u.join("")}n.toByteArray=function(b){var l,p,u,w,v;l=b.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===b[l-2]?2:"="===b[l-1]?1:0;v=new e(3*l/4-w);p=0<w?l-4:l;var m=0;for(l=0;l<p;l+=4)u=a[b.charCodeAt(l)]<<18|a[b.charCodeAt(l+1)]<<12|a[b.charCodeAt(l+2)]<<6|a[b.charCodeAt(l+3)],v[m++]=u>>16&255,v[m++]=u>>8&255,v[m++]=u&255;2===w?(u=a[b.charCodeAt(l)]<<2|a[b.charCodeAt(l+1)]>>4,v[m++]=u&255):1===w&&(u=a[b.charCodeAt(l)]<<10|a[b.charCodeAt(l+
1)]<<4|a[b.charCodeAt(l+2)]>>2,v[m++]=u>>8&255,v[m++]=u&255);return v};n.fromByteArray=function(a){for(var e=a.length,b=e%3,u="",w=[],v=0,m=e-b;v<m;v+=16383)w.push(t(a,v,v+16383>m?m:v+16383));1===b?(a=a[e-1],u+=p[a>>2],u+=p[a<<4&63],u+="=="):2===b&&(a=(a[e-2]<<8)+a[e-1],u+=p[a>>10],u+=p[a>>4&63],u+=p[a<<2&63],u+="=");w.push(u);return w.join("")};var p=[],a=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var e=0;64>e;++e)p[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],
a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;a[45]=62;a[95]=63})()},{}],31:[function(b,g,n){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[1]).add(a[0].mul(b[1])),b[1].mul(a[1]))}},{"./lib/rationalize":41}],32:[function(b,g,n){g.exports=function(b,p){return b[0].mul(p[1]).cmp(p[0].mul(b[1]))}},{}],33:[function(b,g,n){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[1]),b[1].mul(a[0]))}},{"./lib/rationalize":41}],
34:[function(b,g,n){function t(b,w){if(p(b))return w?x(b,t(w)):[b[0].clone(),b[1].clone()];var v=0,m,h;if(a(b))m=b.clone();else if("string"===typeof b)m=q(b);else{if(0===b)return[e(0),e(1)];if(b!==Math.floor(b))for(;b!==Math.floor(b);)b*=Math.pow(2,256),v-=256;m=e(b)}if(p(w))m.mul(w[1]),h=w[0].clone();else if(a(w))h=w.clone();else if("string"===typeof w)h=q(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),v+=256;h=e(w)}else h=e(1);0<v?m=m.shln(v):0>v&&(h=h.shln(-v));return l(m,
h)}var p=b("./is-rat"),a=b("./lib/is-bn"),e=b("./lib/num-to-bn"),q=b("./lib/str-to-bn"),l=b("./lib/rationalize"),x=b("./div");g.exports=t},{"./div":33,"./is-rat":35,"./lib/is-bn":39,"./lib/num-to-bn":40,"./lib/rationalize":41,"./lib/str-to-bn":42}],35:[function(b,g,n){var t=b("./lib/is-bn");g.exports=function(b){return Array.isArray(b)&&2===b.length&&t(b[0])&&t(b[1])}},{"./lib/is-bn":39}],36:[function(b,g,n){var t=b("bn.js");g.exports=function(b){return b.cmp(new t(0))}},{"bn.js":44}],37:[function(b,
g,n){g.exports=function(b){var p=b.length,a=b.words,e=0;if(1===p)e=a[0];else if(2===p)e=a[0]+67108864*a[1];else for(var q=e=0;q<p;q++)e+=a[q]*Math.pow(67108864,q);return b.sign?-e:e}},{}],38:[function(b,g,n){var t=b("double-bits"),p=b("bit-twiddle").countTrailingZeros;g.exports=function(a){var e=p(t.lo(a));if(32>e)return e;a=p(t.hi(a));return 20<a?52:a+32}},{"bit-twiddle":49,"double-bits":70}],39:[function(b,g,n){b("bn.js");g.exports=function(b){return b&&"object"===typeof b&&!!b.words}},{"bn.js":44}],
40:[function(b,g,n){var t=b("bn.js"),p=b("double-bits");g.exports=function(a){var e=p.exponent(a);return 52>e?new t(a):(new t(a*Math.pow(2,52-e))).shln(e-52)}},{"bn.js":44,"double-bits":70}],41:[function(b,g,n){var t=b("./num-to-bn"),p=b("./bn-sign");g.exports=function(a,e){var b=p(a),l=p(e);if(0===b)return[t(0),t(1)];if(0===l)return[t(0),t(0)];0>l&&(a=a.neg(),e=e.neg());b=a.gcd(e);return b.cmpn(1)?[a.div(b),e.div(b)]:[a,e]}},{"./bn-sign":36,"./num-to-bn":40}],42:[function(b,g,n){var t=b("bn.js");
g.exports=function(b){return new t(b)}},{"bn.js":44}],43:[function(b,g,n){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[0]),b[1].mul(a[1]))}},{"./lib/rationalize":41}],44:[function(b,g,n){(function(b,p){function a(d,c){if(!d)throw Error(c||"Assertion failed");}function e(d,c){d.super_=c;var a=function(){};a.prototype=c.prototype;d.prototype=new a;d.prototype.constructor=d}function q(d,c,a){if(null!==d&&"object"===typeof d&&Array.isArray(d.words))return d;this.sign=!1;this.words=
null;this.length=0;this.red=null;if("le"===c||"be"===c)a=c,c=10;null!==d&&this._init(d||0,c||10,a||"be")}function l(d,c,a){var f=0;for(a=Math.min(d.length,a);c<a;c++)var e=d.charCodeAt(c)-48,f=f<<4,f=49<=e&&54>=e?f|e-49+10:17<=e&&22>=e?f|e-17+10:f|e&15;return f}function x(d,c,a,f){var e=0;for(a=Math.min(d.length,a);c<a;c++)var b=d.charCodeAt(c)-48,e=e*f,e=49<=b?e+(b-49+10):17<=b?e+(b-17+10):e+b;return e}function u(d,c){this.name=d;this.p=new q(c,16);this.n=this.p.bitLength();this.k=(new q(1)).ishln(this.n).isub(this.p);
this.tmp=this._tmp()}function w(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function f(d){"string"===typeof d?(d=q._prime(d),this.m=d.p,this.prime=d):(this.m=
d,this.prime=null)}function c(d){f.call(this,d);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new q(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof b?b.exports=q:p.BN=q;q.BN=q;q.wordSize=26;q.prototype._init=function(d,c,f){if("number"===typeof d)return this._initNumber(d,c,f);if("object"===typeof d)return this._initArray(d,
c,f);"hex"===c&&(c=16);a(c===(c|0)&&2<=c&&36>=c);d=d.toString().replace(/\s+/g,"");var e=0;"-"===d[0]&&e++;16===c?this._parseHex(d,e):this._parseBase(d,c,e);"-"===d[0]&&(this.sign=!0);this.strip();"le"===f&&this._initArray(this.toArray(),c,f)};q.prototype._initNumber=function(d,c,f){0>d&&(this.sign=!0,d=-d);67108864>d?(this.words=[d&67108863],this.length=1):4503599627370496>d?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(a(9007199254740992>d),this.words=[d&67108863,d/67108864&67108863,
1],this.length=3);"le"===f&&this._initArray(this.toArray(),c,f)};q.prototype._initArray=function(d,c,f){a("number"===typeof d.length);if(0>=d.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3);this.words=Array(this.length);for(c=0;c<this.length;c++)this.words[c]=0;var e=0;if("be"===f)for(c=d.length-1,f=0;0<=c;c-=3){var b=d[c]|d[c-1]<<8|d[c-2]<<16;this.words[f]|=b<<e&67108863;this.words[f+1]=b>>>26-e&67108863;e+=24;26<=e&&(e-=26,f++)}else if("le"===f)for(f=c=0;c<d.length;c+=
3)b=d[c]|d[c+1]<<8|d[c+2]<<16,this.words[f]|=b<<e&67108863,this.words[f+1]=b>>>26-e&67108863,e+=24,26<=e&&(e-=26,f++);return this.strip()};q.prototype._parseHex=function(d,c){this.length=Math.ceil((d.length-c)/6);this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;for(var f=0,a=d.length-6,e=0;a>=c;a-=6){var b=l(d,a,a+6);this.words[e]|=b<<f&67108863;this.words[e+1]|=b>>>26-f&4194303;f+=24;26<=f&&(f-=26,e++)}a+6!==c&&(b=l(d,c,a+6),this.words[e]|=b<<f&67108863,this.words[e+1]|=
b>>>26-f&4194303);this.strip()};q.prototype._parseBase=function(d,c,a){this.words=[0];this.length=1;for(var f=0,e=1;67108863>=e;e*=c)f++;f--;for(var e=e/c|0,b=d.length-a,h=b%f,k=Math.min(b,b-h)+a,b=0;a<k;a+=f)b=x(d,a,a+f,c),this.imuln(e),67108864>this.words[0]+b?this.words[0]+=b:this._iaddn(b);if(0!==h){f=1;b=x(d,a,d.length,c);for(a=0;a<h;a++)f*=c;this.imuln(f);67108864>this.words[0]+b?this.words[0]+=b:this._iaddn(b)}};q.prototype.copy=function(d){d.words=Array(this.length);for(var c=0;c<this.length;c++)d.words[c]=
this.words[c];d.length=this.length;d.sign=this.sign;d.red=this.red};q.prototype.clone=function(){var d=new q(null);this.copy(d);return d};q.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};q.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};q.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var r=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];q.prototype.toString=function(d,c){d=d||10;if(16===d||"hex"===d){var f="",e=0;c=c|0||1;for(var b=0,h=0;h<this.length;h++){var l=
this.words[h],q=((l<<e|b)&16777215).toString(16),b=l>>>24-e&16777215,f=0!==b||h!==this.length-1?r[6-q.length]+q+f:q+f,e=e+2;26<=e&&(e-=26,h--)}for(0!==b&&(f=b.toString(16)+f);0!==f.length%c;)f="0"+f;this.sign&&(f="-"+f);return f}if(d===(d|0)&&2<=d&&36>=d){e=k[d];b=z[d];f="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)l=h.modn(b).toString(d),h=h.idivn(b),f=0!==h.cmpn(0)?r[e-l.length]+l+f:l+f;0===this.cmpn(0)&&(f="0"+f);this.sign&&(f="-"+f);return f}a(!1,"Base should be between 2 and 36")};q.prototype.toJSON=
function(){return this.toString(16)};q.prototype.toArray=function(d){this.strip();var c=Array(this.byteLength());c[0]=0;var a=this.clone();if("le"!==d)for(d=0;0!==a.cmpn(0);d++){var f=a.andln(255);a.ishrn(8);c[c.length-d-1]=f}else for(d=0;0!==a.cmpn(0);d++)f=a.andln(255),a.ishrn(8),c[d]=f;return c};q.prototype._countBits=Math.clz32?function(d){return 32-Math.clz32(d)}:function(d){var c=0;4096<=d&&(c+=13,d>>>=13);64<=d&&(c+=7,d>>>=7);8<=d&&(c+=4,d>>>=4);2<=d&&(c+=2,d>>>=2);return c+d};q.prototype._zeroBits=
function(d){if(0===d)return 26;var c=0;0===(d&8191)&&(c+=13,d>>>=13);0===(d&127)&&(c+=7,d>>>=7);0===(d&15)&&(c+=4,d>>>=4);0===(d&3)&&(c+=2,d>>>=2);0===(d&1)&&c++;return c};q.prototype.bitLength=function(){var d=0,d=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+d};q.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var d=0,c=0;c<this.length;c++){var a=this._zeroBits(this.words[c]),d=d+a;if(26!==a)break}return d};q.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};q.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var d=this.clone();d.sign=!this.sign;return d};q.prototype.ior=function(d){for(this.sign=this.sign||d.sign;this.length<d.length;)this.words[this.length++]=0;for(var c=0;c<d.length;c++)this.words[c]|=d.words[c];return this.strip()};q.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)};q.prototype.iand=function(d){this.sign=this.sign&&d.sign;var c;c=this.length>d.length?d:this;for(var a=
0;a<c.length;a++)this.words[a]&=d.words[a];this.length=c.length;return this.strip()};q.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)};q.prototype.ixor=function(d){this.sign=this.sign||d.sign;var c;this.length>d.length?c=this:(c=d,d=this);for(var a=0;a<d.length;a++)this.words[a]=c.words[a]^d.words[a];if(this!==c)for(;a<c.length;a++)this.words[a]=c.words[a];this.length=c.length;return this.strip()};q.prototype.xor=function(d){return this.length>d.length?
this.clone().ixor(d):d.clone().ixor(this)};q.prototype.setn=function(d,c){a("number"===typeof d&&0<=d);for(var f=d/26|0,e=d%26;this.length<=f;)this.words[this.length++]=0;this.words[f]=c?this.words[f]|1<<e:this.words[f]&~(1<<e);return this.strip()};q.prototype.iadd=function(d){if(this.sign&&!d.sign){this.sign=!1;var c=this.isub(d);this.sign=!this.sign;return this._normSign()}if(!this.sign&&d.sign)return d.sign=!1,c=this.isub(d),d.sign=!0,c._normSign();var a;this.length>d.length?a=this:(a=d,d=this);
for(var f=c=0;f<d.length;f++)c=a.words[f]+d.words[f]+c,this.words[f]=c&67108863,c>>>=26;for(;0!==c&&f<a.length;f++)c=a.words[f]+c,this.words[f]=c&67108863,c>>>=26;this.length=a.length;if(0!==c)this.words[this.length]=c,this.length++;else if(a!==this)for(;f<a.length;f++)this.words[f]=a.words[f];return this};q.prototype.add=function(d){if(d.sign&&!this.sign){d.sign=!1;var c=this.sub(d);d.sign=!0;return c}return!d.sign&&this.sign?(this.sign=!1,c=d.sub(this),this.sign=!0,c):this.length>d.length?this.clone().iadd(d):
d.clone().iadd(this)};q.prototype.isub=function(d){if(d.sign){d.sign=!1;var c=this.iadd(d);d.sign=!0;return c._normSign()}if(this.sign)return this.sign=!1,this.iadd(d),this.sign=!0,this._normSign();c=this.cmp(d);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var a;0<c?a=this:(a=d,d=this);for(var f=0,e=0;e<d.length;e++)c=a.words[e]-d.words[e]+f,f=c>>26,this.words[e]=c&67108863;for(;0!==f&&e<a.length;e++)c=a.words[e]+f,f=c>>26,this.words[e]=c&67108863;if(0===f&&e<a.length&&a!==this)for(;e<
a.length;e++)this.words[e]=a.words[e];this.length=Math.max(this.length,e);a!==this&&(this.sign=!0);return this.strip()};q.prototype.sub=function(d){return this.clone().isub(d)};q.prototype._smallMulTo=function(d,c){c.sign=d.sign!==this.sign;c.length=this.length+d.length;for(var a=0,f=0;f<c.length-1;f++){for(var e=a>>>26,a=a&67108863,b=Math.min(f,d.length-1),h=Math.max(0,f-this.length+1);h<=b;h++)var k=(this.words[f-h]|0)*(d.words[h]|0),r=k&67108863,e=e+(k/67108864|0)|0,r=r+a|0,a=r&67108863,e=e+(r>>>
26)|0;c.words[f]=a;a=e}0!==a?c.words[f]=a:c.length--;return c.strip()};q.prototype._bigMulTo=function(d,c){c.sign=d.sign!==this.sign;c.length=this.length+d.length;for(var a=0,f=0,e=0;e<c.length-1;e++){for(var b=f,f=0,a=a&67108863,h=Math.min(e,d.length-1),k=Math.max(0,e-this.length+1);k<=h;k++)var r=(this.words[e-k]|0)*(d.words[k]|0),l=r&67108863,b=b+(r/67108864|0)|0,l=l+a|0,a=l&67108863,b=b+(l>>>26)|0,f=f+(b>>>26),b=b&67108863;c.words[e]=a;a=b}0!==a?c.words[e]=a:c.length--;return c.strip()};q.prototype.mulTo=
function(d,c){return 63>this.length+d.length?this._smallMulTo(d,c):this._bigMulTo(d,c)};q.prototype.mul=function(d){var c=new q(null);c.words=Array(this.length+d.length);return this.mulTo(d,c)};q.prototype.imul=function(d){if(0===this.cmpn(0)||0===d.cmpn(0))return this.words[0]=0,this.length=1,this;var c=this.length,a=d.length;this.sign=d.sign!==this.sign;this.length+=d.length;this.words[this.length-1]=0;for(var f=this.length-2;0<=f;f--){for(var e=0,b=0,h=Math.min(f,a-1),k=Math.max(0,f-c+1);k<=h;k++)var r=
f-k,r=this.words[r]*d.words[k],l=r&67108863,e=e+(r/67108864|0),l=l+b,b=l&67108863,e=e+(l>>>26);this.words[f]=b;this.words[f+1]+=e}e=0;for(r=1;r<this.length;r++)d=this.words[r]+e,this.words[r]=d&67108863,e=d>>>26;return this.strip()};q.prototype.imuln=function(d){a("number"===typeof d);for(var c=0,f=0;f<this.length;f++){var e=this.words[f]*d,b=(e&67108863)+(c&67108863),c=c>>26,c=c+(e/67108864|0),c=c+(b>>>26);this.words[f]=b&67108863}0!==c&&(this.words[f]=c,this.length++);return this};q.prototype.muln=
function(d){return this.clone().imuln(d)};q.prototype.sqr=function(){return this.mul(this)};q.prototype.isqr=function(){return this.mul(this)};q.prototype.ishln=function(d){a("number"===typeof d&&0<=d);var c=d%26;d=(d-c)/26;var f=67108863>>>26-c<<26-c;if(0!==c){for(var e=0,b=0;b<this.length;b++){var h=this.words[b]&f;this.words[b]=this.words[b]-h<<c|e;e=h>>>26-c}e&&(this.words[b]=e,this.length++)}if(0!==d){for(b=this.length-1;0<=b;b--)this.words[b+d]=this.words[b];for(b=0;b<d;b++)this.words[b]=0;
this.length+=d}return this.strip()};q.prototype.ishrn=function(d,c,f){a("number"===typeof d&&0<=d);var e=d%26,b=Math.min((d-e)/26,this.length);d=67108863^67108863>>>e<<e;c=(c?(c-c%26)/26:0)-b;c=Math.max(0,c);if(f){for(var h=0;h<b;h++)f.words[h]=this.words[h];f.length=b}if(0!==b)if(this.length>b)for(this.length-=b,h=0;h<this.length;h++)this.words[h]=this.words[h+b];else this.words[0]=0,this.length=1;b=0;for(h=this.length-1;0<=h&&(0!==b||h>=c);h--){var k=this.words[h];this.words[h]=b<<26-e|k>>>e;b=
k&d}f&&0!==b&&(f.words[f.length++]=b);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};q.prototype.shln=function(d){return this.clone().ishln(d)};q.prototype.shrn=function(d){return this.clone().ishrn(d)};q.prototype.testn=function(d){a("number"===typeof d&&0<=d);var c=d%26;d=(d-c)/26;return this.length<=d?!1:!!(this.words[d]&1<<c)};q.prototype.imaskn=function(d){a("number"===typeof d&&0<=d);var c=d%26;d=(d-c)/26;a(!this.sign,"imaskn works only with positive numbers");0!==
c&&d++;this.length=Math.min(d,this.length);0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c);return this.strip()};q.prototype.maskn=function(d){return this.clone().imaskn(d)};q.prototype.iaddn=function(d){a("number"===typeof d);if(0>d)return this.isubn(-d);if(this.sign){if(1===this.length&&this.words[0]<d)return this.words[0]=d-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(d);this.sign=!0;return this}return this._iaddn(d)};q.prototype._iaddn=function(d){this.words[0]+=d;for(d=
0;d<this.length&&67108864<=this.words[d];d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;this.length=Math.max(this.length,d+1);return this};q.prototype.isubn=function(d){a("number"===typeof d);if(0>d)return this.iaddn(-d);if(this.sign)return this.sign=!1,this.iaddn(d),this.sign=!0,this;this.words[0]-=d;for(d=0;d<this.length&&0>this.words[d];d++)this.words[d]+=67108864,--this.words[d+1];return this.strip()};q.prototype.addn=function(d){return this.clone().iaddn(d)};
q.prototype.subn=function(d){return this.clone().isubn(d)};q.prototype.iabs=function(){this.sign=!1;return this};q.prototype.abs=function(){return this.clone().iabs()};q.prototype._ishlnsubmul=function(d,c,f){var e=d.length+f,b;if(this.words.length<e){var h=Array(e);for(b=0;b<this.length;b++)h[b]=this.words[b];this.words=h}else b=this.length;for(this.length=Math.max(this.length,e);b<this.length;b++)this.words[b]=0;for(b=h=0;b<d.length;b++)e=this.words[b+f]+h,h=d.words[b]*c,e-=h&67108863,h=(e>>26)-
(h/67108864|0),this.words[b+f]=e&67108863;for(;b<this.length-f;b++)e=this.words[b+f]+h,h=e>>26,this.words[b+f]=e&67108863;if(0===h)return this.strip();a(-1===h);for(b=h=0;b<this.length;b++)e=-this.words[b]+h,h=e>>26,this.words[b]=e&67108863;this.sign=!0;return this.strip()};q.prototype._wordDiv=function(d,c){var a=this.length-d.length,f=this.clone(),e=d,b=e.words[e.length-1],a=26-this._countBits(b);0!==a&&(e=e.shln(a),f.ishln(a),b=e.words[e.length-1]);var h=f.length-e.length,k;if("mod"!==c){k=new q(null);
k.length=h+1;k.words=Array(k.length);for(var r=0;r<k.length;r++)k.words[r]=0}r=f.clone()._ishlnsubmul(e,1,h);r.sign||(f=r,k&&(k.words[h]=1));for(--h;0<=h;h--){r=67108864*f.words[e.length+h]+f.words[e.length+h-1];r=Math.min(r/b|0,67108863);for(f._ishlnsubmul(e,r,h);f.sign;)r--,f.sign=!1,f._ishlnsubmul(e,1,h),0!==f.cmpn(0)&&(f.sign=!f.sign);k&&(k.words[h]=r)}k&&k.strip();f.strip();"div"!==c&&0!==a&&f.ishrn(a);return{div:k?k:null,mod:f}};q.prototype.divmod=function(d,c){a(0!==d.cmpn(0));if(this.sign&&
!d.sign){var f=this.neg().divmod(d,c),e,b;"mod"!==c&&(e=f.div.neg());"div"!==c&&(b=0===f.mod.cmpn(0)?f.mod:d.sub(f.mod));return{div:e,mod:b}}return!this.sign&&d.sign?(f=this.divmod(d.neg(),c),"mod"!==c&&(e=f.div.neg()),{div:e,mod:f.mod}):this.sign&&d.sign?this.neg().divmod(d.neg(),c):d.length>this.length||0>this.cmp(d)?{div:new q(0),mod:this}:1===d.length?"div"===c?{div:this.divn(d.words[0]),mod:null}:"mod"===c?{div:null,mod:new q(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new q(this.modn(d.words[0]))}:
this._wordDiv(d,c)};q.prototype.div=function(d){return this.divmod(d,"div").div};q.prototype.mod=function(d){return this.divmod(d,"mod").mod};q.prototype.divRound=function(d){var c=this.divmod(d);if(0===c.mod.cmpn(0))return c.div;var a=c.div.sign?c.mod.isub(d):c.mod,f=d.shrn(1);d=d.andln(1);a=a.cmp(f);return 0>a||1===d&&0===a?c.div:c.div.sign?c.div.isubn(1):c.div.iaddn(1)};q.prototype.modn=function(d){a(67108863>=d);for(var c=67108864%d,f=0,e=this.length-1;0<=e;e--)f=(c*f+this.words[e])%d;return f};
q.prototype.idivn=function(d){a(67108863>=d);for(var c=0,f=this.length-1;0<=f;f--)c=this.words[f]+67108864*c,this.words[f]=c/d|0,c%=d;return this.strip()};q.prototype.divn=function(d){return this.clone().idivn(d)};q.prototype.egcd=function(d){a(!d.sign);a(0!==d.cmpn(0));var c=this,f=d.clone(),c=c.sign?c.mod(d):c.clone();d=new q(1);for(var e=new q(0),b=new q(0),h=new q(1),k=0;c.isEven()&&f.isEven();)c.ishrn(1),f.ishrn(1),++k;for(var r=f.clone(),l=c.clone();0!==c.cmpn(0);){for(;c.isEven();)c.ishrn(1),
d.isEven()&&e.isEven()?(d.ishrn(1),e.ishrn(1)):(d.iadd(r).ishrn(1),e.isub(l).ishrn(1));for(;f.isEven();)f.ishrn(1),b.isEven()&&h.isEven()?(b.ishrn(1),h.ishrn(1)):(b.iadd(r).ishrn(1),h.isub(l).ishrn(1));0<=c.cmp(f)?(c.isub(f),d.isub(b),e.isub(h)):(f.isub(c),b.isub(d),h.isub(e))}return{a:b,b:h,gcd:f.ishln(k)}};q.prototype._invmp=function(d){a(!d.sign);a(0!==d.cmpn(0));var c=this,f=d.clone(),c=c.sign?c.mod(d):c.clone();d=new q(1);for(var e=new q(0),b=f.clone();0<c.cmpn(1)&&0<f.cmpn(1);){for(;c.isEven();)c.ishrn(1),
d.isEven()?d.ishrn(1):d.iadd(b).ishrn(1);for(;f.isEven();)f.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(b).ishrn(1);0<=c.cmp(f)?(c.isub(f),d.isub(e)):(f.isub(c),e.isub(d))}return 0===c.cmpn(1)?d:e};q.prototype.gcd=function(d){if(0===this.cmpn(0))return d.clone();if(0===d.cmpn(0))return this.clone();var c=this.clone();d=d.clone();c.sign=!1;d.sign=!1;for(var a=0;c.isEven()&&d.isEven();a++)c.ishrn(1),d.ishrn(1);do{for(;c.isEven();)c.ishrn(1);for(;d.isEven();)d.ishrn(1);var f=c.cmp(d);if(0>f)f=c,c=d,d=f;else if(0===
f||0===d.cmpn(1))break;c.isub(d)}while(1);return d.ishln(a)};q.prototype.invm=function(d){return this.egcd(d).a.mod(d)};q.prototype.isEven=function(){return 0===(this.words[0]&1)};q.prototype.isOdd=function(){return 1===(this.words[0]&1)};q.prototype.andln=function(d){return this.words[0]&d};q.prototype.bincn=function(d){a("number"===typeof d);var c=d%26;d=(d-c)/26;var f=1<<c;if(this.length<=d){for(c=this.length;c<d+1;c++)this.words[c]=0;this.words[d]|=f;this.length=d+1;return this}for(c=d;0!==f&&
c<this.length;c++)d=this.words[c],d+=f,f=d>>>26,d&=67108863,this.words[c]=d;0!==f&&(this.words[c]=f,this.length++);return this};q.prototype.cmpn=function(d){var c=0>d;c&&(d=-d);if(this.sign&&!c)return-1;if(!this.sign&&c)return 1;d&=67108863;this.strip();1<this.length?d=1:(c=this.words[0],d=c===d?0:c<d?-1:1);this.sign&&(d=-d);return d};q.prototype.cmp=function(d){if(this.sign&&!d.sign)return-1;if(!this.sign&&d.sign)return 1;d=this.ucmp(d);return this.sign?-d:d};q.prototype.ucmp=function(d){if(this.length>
d.length)return 1;if(this.length<d.length)return-1;for(var c=0,a=this.length-1;0<=a;a--){var f=this.words[a],e=d.words[a];if(f!==e){f<e?c=-1:f>e&&(c=1);break}}return c};q.red=function(d){return new f(d)};q.prototype.toRed=function(d){a(!this.red,"Already a number in reduction context");a(!this.sign,"red works only with positives");return d.convertTo(this)._forceRed(d)};q.prototype.fromRed=function(){a(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
q.prototype._forceRed=function(d){this.red=d;return this};q.prototype.forceRed=function(d){a(!this.red,"Already a number in reduction context");return this._forceRed(d)};q.prototype.redAdd=function(d){a(this.red,"redAdd works only with red numbers");return this.red.add(this,d)};q.prototype.redIAdd=function(d){a(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,d)};q.prototype.redSub=function(d){a(this.red,"redSub works only with red numbers");return this.red.sub(this,d)};q.prototype.redISub=
function(d){a(this.red,"redISub works only with red numbers");return this.red.isub(this,d)};q.prototype.redShl=function(d){a(this.red,"redShl works only with red numbers");return this.red.shl(this,d)};q.prototype.redMul=function(d){a(this.red,"redMul works only with red numbers");this.red._verify2(this,d);return this.red.mul(this,d)};q.prototype.redIMul=function(d){a(this.red,"redMul works only with red numbers");this.red._verify2(this,d);return this.red.imul(this,d)};q.prototype.redSqr=function(){a(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};q.prototype.redISqr=function(){a(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};q.prototype.redSqrt=function(){a(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};q.prototype.redInvm=function(){a(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};q.prototype.redNeg=
function(){a(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};q.prototype.redPow=function(d){a(this.red&&!d.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,d)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var d=new q(null);d.words=Array(Math.ceil(this.n/13));return d};u.prototype.ireduce=function(d){var c;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),c=d.bitLength();while(c>this.n);
c=c<this.n?-1:d.ucmp(this.p);0===c?(d.words[0]=0,d.length=1):0<c?d.isub(this.p):d.strip();return d};u.prototype.split=function(d,c){d.ishrn(this.n,0,c)};u.prototype.imulK=function(d){return d.imul(this.k)};e(w,u);w.prototype.split=function(d,c){for(var a=Math.min(d.length,9),f=0;f<a;f++)c.words[f]=d.words[f];c.length=a;if(9>=d.length)d.words[0]=0,d.length=1;else{a=d.words[9];c.words[c.length++]=a&4194303;for(f=10;f<d.length;f++){var e=d.words[f];d.words[f-10]=(e&4194303)<<4|a>>>22;a=e}d.words[f-10]=
a>>>22;d.length-=9}};w.prototype.imulK=function(d){d.words[d.length]=0;d.words[d.length+1]=0;d.length+=2;for(var c,a=0,f=0;f<d.length;f++){var e=d.words[f];c=64*e;a+=977*e;c+=a/67108864|0;a&=67108863;d.words[f]=a;a=c}0===d.words[d.length-1]&&(d.length--,0===d.words[d.length-1]&&d.length--);return d};e(v,u);e(m,u);e(h,u);h.prototype.imulK=function(d){for(var c=0,a=0;a<d.length;a++){var c=19*d.words[a]+c,f=c&67108863,c=c>>>26;d.words[a]=f}0!==c&&(d.words[d.length++]=c);return d};q._prime=function(d){if(g[d])return g[d];
var c;if("k256"===d)c=new w;else if("p224"===d)c=new v;else if("p192"===d)c=new m;else if("p25519"===d)c=new h;else throw Error("Unknown prime "+d);return g[d]=c};f.prototype._verify1=function(d){a(!d.sign,"red works only with positives");a(d.red,"red works only with red numbers")};f.prototype._verify2=function(d,c){a(!d.sign&&!c.sign,"red works only with positives");a(d.red&&d.red===c.red,"red works only with red numbers")};f.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):
d.mod(this.m)._forceRed(this)};f.prototype.neg=function(d){d=d.clone();d.sign=!d.sign;return d.iadd(this.m)._forceRed(this)};f.prototype.add=function(d,c){this._verify2(d,c);var a=d.add(c);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};f.prototype.iadd=function(d,c){this._verify2(d,c);var a=d.iadd(c);0<=a.cmp(this.m)&&a.isub(this.m);return a};f.prototype.sub=function(d,c){this._verify2(d,c);var a=d.sub(c);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};f.prototype.isub=function(d,
c){this._verify2(d,c);var a=d.isub(c);0>a.cmpn(0)&&a.iadd(this.m);return a};f.prototype.shl=function(d,c){this._verify1(d);return this.imod(d.shln(c))};f.prototype.imul=function(d,c){this._verify2(d,c);return this.imod(d.imul(c))};f.prototype.mul=function(d,c){this._verify2(d,c);return this.imod(d.mul(c))};f.prototype.isqr=function(d){return this.imul(d,d)};f.prototype.sqr=function(d){return this.mul(d,d)};f.prototype.sqrt=function(d){if(0===d.cmpn(0))return d.clone();var c=this.m.andln(3);a(1===
c%2);if(3===c){var c=this.m.add(new q(1)).ishrn(2),f=this.pow(d,c);return f}for(var e=this.m.subn(1),b=0;0!==e.cmpn(0)&&0===e.andln(1);)b++,e.ishrn(1);a(0!==e.cmpn(0));for(var c=(new q(1)).toRed(this),f=c.redNeg(),h=this.m.subn(1).ishrn(1),k=this.m.bitLength(),k=(new q(2*k*k)).toRed(this);0!==this.pow(k,h).cmp(f);)k.redIAdd(f);h=this.pow(k,e);f=this.pow(d,e.addn(1).ishrn(1));d=this.pow(d,e);for(e=b;0!==d.cmp(c);){k=d;for(b=0;0!==k.cmp(c);b++)k=k.redSqr();a(b<e);h=this.pow(h,(new q(1)).ishln(e-b-1));
f=f.redMul(h);h=h.redSqr();d=d.redMul(h);e=b}return f};f.prototype.invm=function(d){d=d._invmp(this.m);return d.sign?(d.sign=!1,this.imod(d).redNeg()):this.imod(d)};f.prototype.pow=function(d,c){var a=[];if(0===c.cmpn(0))return new q(1);for(var f=c.clone();0!==f.cmpn(0);)a.push(f.andln(1)),f.ishrn(1);for(var e=d,b=0;b<a.length&&0===a[b];b++,e=this.sqr(e));if(++b<a.length)for(f=this.sqr(e);b<a.length;b++,f=this.sqr(f))0!==a[b]&&(e=this.mul(e,f));return e};f.prototype.convertTo=function(d){var c=d.mod(this.m);
return c===d?c.clone():c};f.prototype.convertFrom=function(d){d=d.clone();d.red=null;return d};q.mont=function(d){return new c(d)};e(c,f);c.prototype.convertTo=function(d){return this.imod(d.shln(this.shift))};c.prototype.convertFrom=function(d){d=this.imod(d.mul(this.rinv));d.red=null;return d};c.prototype.imul=function(d,c){if(0===d.cmpn(0)||0===c.cmpn(0))return d.words[0]=0,d.length=1,d;var a=d.imul(c),f=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=a=a.isub(f).ishrn(this.shift);
0<=a.cmp(this.m)?f=a.isub(this.m):0>a.cmpn(0)&&(f=a.iadd(this.m));return f._forceRed(this)};c.prototype.mul=function(c,a){if(0===c.cmpn(0)||0===a.cmpn(0))return(new q(0))._forceRed(this);var f=c.mul(a),e=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=f=f.isub(e).ishrn(this.shift);0<=f.cmp(this.m)?e=f.isub(this.m):0>f.cmpn(0)&&(e=f.iadd(this.m));return e._forceRed(this)};c.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],45:[function(b,g,n){var t=b("./lib/bn-sign");g.exports=function(b){return t(b[0])*t(b[1])}},{"./lib/bn-sign":36}],46:[function(b,g,n){var t=b("./lib/rationalize");g.exports=function(b,a){return t(b[0].mul(a[1]).sub(b[1].mul(a[0])),b[1].mul(a[1]))}},{"./lib/rationalize":41}],47:[function(b,g,n){var t=b("./lib/bn-to-num"),p=b("./lib/ctz");g.exports=function(a){var e=a[0];a=a[1];if(0===e.cmpn(0))return 0;var b=e.divmod(a),e=t(b.div),b=b.mod;if(0===b.cmpn(0))return e;if(e){var l=
p(e)+4;a=t(b.shln(l).divRound(a));0>e&&(a=-a);return e+a*Math.pow(2,-l)}e=a.bitLength()-b.bitLength()+53;a=t(b.shln(e).divRound(a));if(1023>e)return a*Math.pow(2,-e);a*=Math.pow(2,-1023);return a*Math.pow(2,1023-e)}},{"./lib/bn-to-num":37,"./lib/ctz":38}],48:[function(b,g,n){function t(a,e,b,l,p){a=["function ",a,"(a,l,h,",l.join(","),"){",p?"":"var i=",b?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];p?0>e.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",e,"){i=m;");b?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,e,b,l){return(new Function([t("A","x"+a+"y",e,["y"],l),t("P","c(x,y)"+a+"0",e,["y","c"],l),"function dispatchBsearch",b,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",b].join("")))()}
g.exports={ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],49:[function(b,g,n){function t(a){var e=32;(a&=-a)&&e--;a&65535&&(e-=16);a&16711935&&(e-=8);a&252645135&&(e-=4);a&858993459&&(e-=2);a&1431655765&&--e;return e}"use restrict";n.INT_BITS=32;n.INT_MAX=2147483647;n.INT_MIN=-2147483648;n.sign=function(a){return(0<a)-(0>a)};n.abs=function(a){var e=a>>31;return(a^e)-e};n.min=function(a,e){return e^(a^e)&-(a<e)};n.max=function(a,e){return a^(a^
e)&-(a<e)};n.isPow2=function(a){return!(a&a-1)&&!!a};n.log2=function(a){var e,b;e=(65535<a)<<4;a>>>=e;b=(255<a)<<3;a>>>=b;e|=b;b=(15<a)<<2;a>>>=b;e|=b;b=(3<a)<<1;return e|b|a>>>b>>1};n.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};n.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};n.countTrailingZeros=t;n.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};n.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};n.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var p=Array(256);(function(a){for(var e=0;256>e;++e){for(var b=e,l=e,p=7,b=b>>>1;b;b>>>=1)l<<=1,l|=b&1,--p;a[e]=l<<p&255}})(p);n.reverse=function(a){return p[a&255]<<24|p[a>>>8&255]<<16|p[a>>>16&255]<<8|p[a>>>24&255]};n.interleave2=function(a,e){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1};n.deinterleave2=function(a,e){a=a>>>e&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};n.interleave3=function(a,e,b){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;a=(a|a<<2)&1227133513|((e|e<<2)&1227133513)<<1;b&=1023;
b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return a|((b|b<<2)&1227133513)<<2};n.deinterleave3=function(a,e){a=a>>>e&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};n.nextCombination=function(a){var e=a|a-1;return e+1|(~e&-~e)-1>>>t(a)+1}},{}],50:[function(b,g,n){function t(a,e,b,l){for(var h=0,f=0,c=0,r=a.length;c<r;++c){var k=a[c],q;a:{for(q=0;q<e;++q)if(!(k[q]<=k[q+e])){q=!0;break a}q=!1}if(!q){for(q=0;q<2*e;++q)b[h++]=
k[q];l[f++]=c}}return f}function p(a,b,v,m){var h=a.length,f=b.length;if(!(0>=h||0>=f)){var c=a[0].length>>>1;if(!(0>=c)){var r,k=e.mallocDouble(2*c*h),p=e.mallocInt32(h),h=t(a,c,k,p);if(0<h){if(1===c&&m)q.init(h),r=q.sweepComplete(c,v,0,h,k,p,0,h,k,p);else{a=e.mallocDouble(2*c*f);var x=e.mallocInt32(f),f=t(b,c,a,x);0<f&&(q.init(h+f),r=1===c?q.sweepBipartite(c,v,0,h,k,p,0,f,a,x):l(c,v,m,h,k,p,f,a,x),e.free(a),e.free(x))}e.free(k);e.free(p)}return r}}}function a(a,e){x.push([a,e])}g.exports=function(e,
b,l){switch(arguments.length){case 1:return x=[],p(e,e,a,!0),x;case 2:if("function"===typeof b)return p(e,e,b,!0);x=[];p(e,b,a,!1);return x;case 3:return p(e,b,l,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=b("typedarray-pool"),q=b("./lib/sweep"),l=b("./lib/intersect"),x},{"./lib/intersect":52,"./lib/sweep":56,"typedarray-pool":118}],51:[function(b,g,n){function t(a){function e(e,b){var m,h="bruteForce"+(e?"Red":"Blue")+(b?"Flip":"")+(a?"Full":"");m=["function ",h,"(",p.join(),
"){","var ","es","=2*","d",";"];var f="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";e?m.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",f):m.push(f,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");a?m.push("if(y1<x0||x1<y0)continue;"):b?m.push("if(y0<=x0||x1<y0)continue;"):m.push("if(y0<x0||x1<y0)continue;");m.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
b?m.push("yi,xi"):m.push("xi,yi");m.push(");if(rv!==void 0)return rv;}}}");m=m.join("");l.push(m);u.push("return "+h+"("+p.join()+");")}var b="bruteForce"+(a?"Full":"Partial"),l=[],x=p.slice();a||x.splice(3,0,"fp");var u=["function "+b+"("+x.join()+"){"];u.push("if(re-rs>be-bs){");a?(e(!0,!1),u.push("}else{"),e(!1,!1)):(u.push("if(fp){"),e(!0,!0),u.push("}else{"),e(!0,!1),u.push("}}else{if(fp){"),e(!1,!0),u.push("}else{"),e(!1,!1),u.push("}"));u.push("}}return "+b);b=l.join("")+u.join("");return(new Function(b))()}
var p="d ax vv rs re rb ri bs be bb bi".split(" ");n.partial=t(!1);n.full=t(!0)},{}],52:[function(b,g,n){function t(c,a,f,e,b,h,k,r,l){var m=z*c;d[m]=a;d[m+1]=f;d[m+2]=e;d[m+3]=b;d[m+4]=h;d[m+5]=k;c*=F;y[c]=r;y[c+1]=l}g.exports=function(b,g,n,B,J,G,C,N,M){var L=8*a.log2(B+C+1)*(b+1)|0,P=a.nextPow2(z*L);d.length<P&&(p.free(d),d=p.mallocInt32(P));L=a.nextPow2(F*L);y<L&&(p.free(y),y=p.mallocDouble(L));var L=0,P=2*b,H;t(L++,0,0,B,0,C,n?16:0,-Infinity,Infinity);for(n||t(L++,0,0,C,0,B,1,-Infinity,Infinity);0<
L;){--L;n=L*z;var I=d[n];C=d[n+1];var K=d[n+2],O=d[n+3],V=d[n+4];n=d[n+5];B=L*F;var W=y[B],X=y[B+1],S=n&1,Y=!!(n&16),R=J,U=G,T=N;B=M;S&&(R=N,U=M,T=J,B=G);if(n&2&&(K=f(b,I,C,K,R,U,X),C>=K))continue;if(n&4&&(C=c(b,I,C,K,R,U,W),C>=K))continue;n=K-C;var Q=V-O;if(Y){if(b*n*(n+Q)<v){H=l.scanComplete(b,I,g,C,K,R,U,O,V,T,B);if(void 0!==H)return H;continue}}else if(b*Math.min(n,Q)<u){H=e(b,I,g,S,C,K,R,U,O,V,T,B);if(void 0!==H)return H;continue}else if(b*n*Q<w){H=l.scanBipartite(b,I,g,S,C,K,R,U,O,V,T,B);if(void 0!==
H)return H;continue}n=m(b,I,C,K,R,U,W,X);if(C<n)if(b*(n-C)<u){if(H=q(b,I+1,g,C,n,R,U,O,V,T,B),void 0!==H)return H}else if(I===b-2){if(H=S?l.sweepBipartite(b,g,O,V,T,B,C,n,R,U):l.sweepBipartite(b,g,C,n,R,U,O,V,T,B),void 0!==H)return H}else t(L++,I+1,C,n,O,V,S,-Infinity,Infinity),t(L++,I+1,O,V,C,n,S^1,-Infinity,Infinity);if(n<K)if(C=x(b,I,O,V,T,B),H=T[P*C+I],Q=h(b,I,C,V,T,B,H),Q<V&&t(L++,I,n,K,Q,V,(S|4)+(Y?16:0),H,X),O<C&&t(L++,I,n,K,O,C,(S|2)+(Y?16:0),W,H),C+1===Q){if(Y)a:{O=b;V=g;B=B[C];S=2*O;C*=
S;W=T[C+I];X=n;n*=S;b:for(;X<K;++X,n+=S)if(Y=U[X],Y!==B&&(Q=R[n+I],H=R[n+I+O],!(W<Q||H<W))){for(var Z=I+1;Z<O;++Z){Q=R[n+Z];H=R[n+Z+O];var aa=T[C+Z+O];if(H<T[C+Z]||aa<Q)continue b}Y=V(Y,B);if(void 0!==Y){H=Y;break a}}H=void 0}else a:{O=b;V=g;B=B[C];W=2*O;C*=W;X=T[C+I];Y=n;n*=W;b:for(;Y<K;++Y,n+=W)if(Q=R[n+I],H=R[n+I+O],!(X<Q||H<X||S&&X===Q)){Z=U[Y];for(aa=I+1;aa<O;++aa){Q=R[n+aa];H=R[n+aa+O];var ha=T[C+aa+O];if(H<T[C+aa]||ha<Q)continue b}Q=S?V(B,Z):V(Z,B);if(void 0!==Q){H=Q;break a}}H=void 0}if(void 0!==
H)return H}else if(C<Q)if(Y){if(K=r(b,I,n,K,R,U,H),n<K)if(O=h(b,I,n,K,R,U,H),I===b-2){if(n<O&&(H=l.sweepComplete(b,g,n,O,R,U,C,Q,T,B),void 0!==H)||O<K&&(H=l.sweepBipartite(b,g,O,K,R,U,C,Q,T,B),void 0!==H))return H}else n<O&&t(L++,I+1,n,O,C,Q,16,-Infinity,Infinity),O<K&&(t(L++,I+1,O,K,C,Q,0,-Infinity,Infinity),t(L++,I+1,C,Q,O,K,1,-Infinity,Infinity))}else K=S?k(b,I,n,K,R,U,H):r(b,I,n,K,R,U,H),n<K&&(I===b-2?S?l.sweepBipartite(b,g,C,Q,T,B,n,K,R,U):l.sweepBipartite(b,g,n,K,R,U,C,Q,T,B):(t(L++,I+1,n,K,
C,Q,S,-Infinity,Infinity),t(L++,I+1,C,Q,n,K,S^1,-Infinity,Infinity)))}};var p=b("typedarray-pool"),a=b("bit-twiddle");g=b("./brute");var e=g.partial,q=g.full,l=b("./sweep"),x=b("./median");b=b("./partition");var u=128,w=4194304,v=4194304,m=b("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=b("lo===p0",["p0"]),f=b("lo<p0",["p0"]),c=b("hi<=p0",["p0"]),r=b("lo<=p0&&p0<=hi",["p0"]),k=b("lo<p0&&p0<=hi",["p0"]),z=6,F=2,d=p.mallocInt32(1024),y=p.mallocDouble(1024)},{"./brute":51,"./median":53,"./partition":54,"./sweep":56,
"bit-twiddle":49,"typedarray-pool":118}],53:[function(b,g,n){g.exports=function(a,e,b,l,x,u){if(l<=b+1)return b;var w=b,v=l;l=l+b>>>1;for(var m=2*a,h=l,f=x[m*l+e];w<v;){if(v-w<p){for(var h=e,f=x,c=u,r=2*a,k=r*(w+1)+h,z=w+1;z<v;++z,k+=r)for(var g=f[k],d=z,n=r*(z-1);d>w&&f[n+h]>g;--d,n-=r){for(var D=n,E=n+r,A=0;A<r;++A,++D,++E){var B=f[D];f[D]=f[E];f[E]=B}D=c[d];c[d]=c[d-1];c[d-1]=D}break}k=v-w;h=Math.random()*k+w|0;f=x[m*h+e];r=Math.random()*k+w|0;c=x[m*r+e];z=Math.random()*k+w|0;k=x[m*z+e];f<=c?k>=
c?(h=r,f=c):f>=k||(h=z,f=k):c>=k?(h=r,f=c):k>=f||(h=z,f=k);c=m*(v-1);r=m*h;for(k=0;k<m;++k,++c,++r)z=x[c],x[c]=x[r],x[r]=z;c=u[v-1];u[v-1]=u[h];u[h]=c;h=t(a,e,w,v-1,x,u,f);c=m*(v-1);r=m*h;for(k=0;k<m;++k,++c,++r)z=x[c],x[c]=x[r],x[r]=z;c=u[v-1];u[v-1]=u[h];u[h]=c;if(l<h){for(v=h-1;w<v&&x[m*(v-1)+e]===f;)--v;v+=1}else if(h<l)for(w=h+1;w<v&&x[m*w+e]===f;)w+=1;else break}return t(a,e,b,l,x,u,x[m*l+e])};var t=b("./partition")("lo<p0",["p0"]),p=8},{"./partition":54}],54:[function(b,g,n){g.exports=function(b,
a){var e="abcdef".split("").concat(a),q=[];0<=b.indexOf("lo")&&q.push("lo=e[k+n]");0<=b.indexOf("hi")&&q.push("hi=e[k+o]");e.push(t.replace("_",q.join()).replace("$",b));return Function.apply(void 0,e)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],55:[function(b,g,n){function t(a,e,b){for(var h=2*(a+1),f=a+1;f<=e;++f){for(var c=b[h++],r=b[h++],k=
f,l=h-2;k-- >a;){var q=b[l-2],d=b[l-1];if(q<c)break;else if(q===c&&d<r)break;b[l]=q;b[l+1]=d;l-=2}b[l]=c;b[l+1]=r}}function p(a,e,b){a*=2;e*=2;var h=b[a],f=b[a+1];b[a]=b[e];b[a+1]=b[e+1];b[e]=h;b[e+1]=f}function a(a,e,b){a*=2;e*=2;b[a]=b[e];b[a+1]=b[e+1]}function e(a,e,b,h,f){a*=2;e*=2;f[a]=f[e];f[e]=b;f[a+1]=f[e+1];f[e+1]=h}function q(a,e,b){a*=2;e*=2;var h=b[a],f=b[e];return h<f?!1:h===f?b[a+1]>b[e+1]:!0}function l(a,e,b,h){a*=2;var f=h[a];return f<e?!0:f===e?h[a+1]<b:!1}function x(b,v,m){var h=
(v-b+1)/6|0,f=b+h,c=v-h,r=b+v>>1,k=r-h,z=r+h,g=f,d=k,n=r,D=z,E=c,h=b+1,A=v-1,B=0;q(g,d,m)&&(B=g,g=d,d=B);q(D,E,m)&&(B=D,D=E,E=B);q(g,n,m)&&(B=g,g=n,n=B);q(d,n,m)&&(B=d,d=n,n=B);q(g,D,m)&&(B=g,g=D,D=B);q(n,D,m)&&(B=n,n=D,D=B);q(d,E,m)&&(B=d,d=E,E=B);q(d,n,m)&&(B=d,d=n,n=B);q(D,E,m)&&(B=D,D=E,E=B);for(var B=m[2*d],d=m[2*d+1],J=m[2*D],D=m[2*D+1],g=2*g,n=2*n,E=2*E,f=2*f,r=2*r,c=2*c,G=0;2>G;++G){var C=m[n+G],N=m[E+G];m[f+G]=m[g+G];m[r+G]=C;m[c+G]=N}a(k,b,m);a(z,v,m);for(k=h;k<=A;++k)if(l(k,B,d,m))k!==
h&&p(k,h,m),++h;else if(!l(k,J,D,m))for(;;)if(l(A,J,D,m)){l(A,B,d,m)?(z=k,c=h,r=A,g=m,z*=2,c*=2,r*=2,f=g[z],n=g[z+1],g[z]=g[c],g[z+1]=g[c+1],g[c]=g[r],g[c+1]=g[r+1],g[r]=f,g[r+1]=n,++h):p(k,A,m);--A;break}else if(--A<k)break;e(b,h-1,B,d,m);e(v,A+1,J,D,m);h-2-b<=u?t(b,h-2,m):x(b,h-2,m);v-(A+2)<=u?t(A+2,v,m):x(A+2,v,m);A-h<=u?t(h,A,m):x(h,A,m)}g.exports=function(a,e){e<=4*u?t(0,e-1,a):x(0,e-1,a)};var u=32},{}],56:[function(b,g,n){function t(a,c,e,b){b=c[b];e=a[e-1];a[b]=e;c[e]=b}g.exports={init:function(f){f=
a.nextPow2(f);l.length<f&&(p.free(l),l=p.mallocInt32(f));x.length<f&&(p.free(x),x=p.mallocInt32(f));u.length<f&&(p.free(u),u=p.mallocInt32(f));w.length<f&&(p.free(w),w=p.mallocInt32(f));v.length<f&&(p.free(v),v=p.mallocInt32(f));m.length<f&&(p.free(m),m=p.mallocInt32(f));f*=8;h.length<f&&(p.free(h),h=p.mallocDouble(f))},sweepBipartite:function(a,c,b,k,m,p,d,v,g,n){var A=0,B=2*a;--a;for(var J=B-1;b<k;++b){var G=p[b],C=B*b;h[A++]=m[C+a];h[A++]=-(G+1);h[A++]=m[C+J];h[A++]=G}for(b=d;b<v;++b)G=n[b]+q,
k=B*b,h[A++]=g[k+a],h[A++]=-G,h[A++]=g[k+J],h[A++]=G;v=A>>>1;e(h,v);for(b=n=g=0;b<v;++b)if(A=h[2*b+1]|0,A>=q)A=A-q|0,t(u,w,n--,A);else if(0<=A)t(l,x,g--,A);else{if(A<=-q){A=-A-q|0;for(B=0;B<g;++B)if(k=c(l[B],A),void 0!==k)return k;B=w;k=n++;u[k]=A}else{A=-A-1|0;for(B=0;B<n;++B)if(k=c(A,u[B]),void 0!==k)return k;B=x;k=g++;l[k]=A}B[A]=k}},sweepComplete:function(a,c,b,k,q,p,d,g,n,E){var A=0,B=2*a;--a;for(var J=B-1;b<k;++b){var G=p[b]+1<<1,C=B*b;h[A++]=q[C+a];h[A++]=-G;h[A++]=q[C+J];h[A++]=G}for(b=d;b<
g;++b)G=E[b]+1<<1,k=B*b,h[A++]=n[k+a],h[A++]=-G|1,h[A++]=n[k+J],h[A++]=G|1;g=A>>>1;e(h,g);for(b=A=E=n=0;b<g;++b)if(B=h[2*b+1]|0,k=B&1,b<g-1&&B>>1===h[2*b+3]>>1&&(k=2,b+=1),0>B){B=-(B>>1)-1;for(q=0;q<A;++q)if(p=c(v[q],B),void 0!==p)return p;if(0!==k)for(q=0;q<n;++q)if(p=c(l[q],B),void 0!==p)return p;if(1!==k)for(q=0;q<E;++q)if(p=c(u[q],B),void 0!==p)return p;0===k?(k=x,q=n++,l[q]=B,k[B]=q):1===k?(k=w,q=E++,u[q]=B,k[B]=q):2===k&&(k=m,q=A++,v[q]=B,k[B]=q)}else B=(B>>1)-1,0===k?t(l,x,n--,B):1===k?t(u,
w,E--,B):2===k&&t(v,m,A--,B)},scanBipartite:function(a,c,b,k,m,p,d,v,u,g,w,n){var J=0,G=2*a,C=c+a,N=1,M=1;for(k?M=q:N=q;m<p;++m){var L=m+N,P=G*m;h[J++]=d[P+c];h[J++]=-L;h[J++]=d[P+C];h[J++]=L}for(m=u;m<g;++m)L=m+M,p=G*m,h[J++]=w[p+c],h[J++]=-L;g=J>>>1;e(h,g);for(m=J=0;m<g;++m)if(L=h[2*m+1]|0,0>L)if(L=-L,M=!1,L>=q?(M=!k,L-=q):(M=!!k,--L),M)M=x,p=J++,l[p]=L,M[L]=p;else a:for(M=n[L],L*=G,p=w[L+c+1],u=w[L+c+1+a],C=0;C<J;++C){var P=l[C],H=G*P;if(!(u<d[H+c+1]||d[H+c+1+a]<p)){for(var I=c+2;I<a;++I)if(w[L+
I+a]<d[H+I]||d[H+I+a]<w[L+I])continue a;P=v[P];P=k?b(M,P):b(P,M);if(void 0!==P)return P}}else t(l,x,J--,L-N)},scanComplete:function(a,c,b,k,m,p,d,v,u,g,x){for(var t=0,w=2*a,n=c+a;k<m;++k){var C=k+q,N=w*k;h[t++]=p[N+c];h[t++]=-C;h[t++]=p[N+n];h[t++]=C}for(k=v;k<u;++k)C=k+1,m=w*k,h[t++]=g[m+c],h[t++]=-C;u=t>>>1;e(h,u);for(k=t=0;k<u;++k)if(m=h[2*k+1]|0,0>m)if(C=-m,C>=q)l[t++]=C-q;else a:for(--C,m=x[C],C*=w,n=g[C+c+1],N=g[C+c+1+a],v=0;v<t;++v){var M=l[v],L=d[M];if(L===m)break;M*=w;if(!(N<p[M+c+1]||p[M+
c+1+a]<n)){for(var P=c+2;P<a;++P)if(g[C+P+a]<p[M+P]||p[M+P+a]<g[C+P])continue a;L=b(L,m);if(void 0!==L)return L}}else{C=m-q;for(v=t-1;0<=v;--v)if(l[v]===C){for(P=v+1;P<t;++P)l[P-1]=l[P];break}--t}}};var p=b("typedarray-pool"),a=b("bit-twiddle"),e=b("./sort"),q=268435456,l=p.mallocInt32(1024),x=p.mallocInt32(1024),u=p.mallocInt32(1024),w=p.mallocInt32(1024),v=p.mallocInt32(1024),m=p.mallocInt32(1024),h=p.mallocDouble(8192)},{"./sort":55,"bit-twiddle":49,"typedarray-pool":118}],57:[function(b,g,n){(function(g){function p(){try{var c=
new Uint8Array(1);c.foo=function(){return 42};return 42===c.foo()&&"function"===typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(d){return!1}}function a(c,d){if((e.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<d)throw new RangeError("Invalid typed array length");e.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(d),c.__proto__=e.prototype):(null===c&&(c=new e(d)),c.length=d);return c}function e(c,d,a){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(c,d,a);if("number"===typeof c){if("string"===
typeof d)throw Error("If encoding is specified then the first argument must be a string");return x(this,c)}return q(this,c,d,a)}function q(c,d,f,b){if("number"===typeof d)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer){d.byteLength;if(0>f||d.byteLength<f)throw new RangeError("'offset' is out of bounds");if(d.byteLength<f+(b||0))throw new RangeError("'length' is out of bounds");d=void 0===b?new Uint8Array(d,f):new Uint8Array(d,
f,b);e.TYPED_ARRAY_SUPPORT?(c=d,c.__proto__=e.prototype):c=u(c,d);return c}if("string"===typeof d){b=c;if("string"!==typeof f||""===f)f="utf8";if(!e.isEncoding(f))throw new TypeError('"encoding" must be a valid string encoding');c=m(d,f)|0;b=a(b,c);b.write(d,f);return b}return w(c,d)}function l(c){if("number"!==typeof c)throw new TypeError('"size" argument must be a number');}function x(c,d){l(d);c=a(c,0>d?0:v(d)|0);if(!e.TYPED_ARRAY_SUPPORT)for(var f=0;f<d;f++)c[f]=0;return c}function u(c,d){var f=
v(d.length)|0;c=a(c,f);for(var e=0;e<f;e+=1)c[e]=d[e]&255;return c}function w(c,d){if(e.isBuffer(d)){var f=v(d.length)|0;c=a(c,f);if(0===c.length)return c;d.copy(c,0,0,f);return c}if(d){if("undefined"!==typeof ArrayBuffer&&d.buffer instanceof ArrayBuffer||"length"in d)return(f="number"!==typeof d.length)||(f=d.length,f=f!==f),f?a(c,0):u(c,d);if("Buffer"===d.type&&M(d.data))return u(c,d.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function v(c){if(c>=(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(e.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function m(c,d){if(e.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var a=c.length;if(0===a)return 0;for(var f=!1;;)switch(d){case "ascii":case "binary":case "raw":case "raws":return a;
case "utf8":case "utf-8":case void 0:return B(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*a;case "hex":return a>>>1;case "base64":return C.toByteArray(A(c)).length;default:if(f)return B(c).length;d=(""+d).toLowerCase();f=!0}}function h(c,d,a){var f=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=0;d>>>=0;if(a<=d)return"";for(c||(c="utf8");;)switch(c){case "hex":c=d;d=a;a=this.length;if(!c||0>c)c=0;
if(!d||0>d||d>a)d=a;f="";for(a=c;a<d;a++)c=f,f=this[a],f=16>f?"0"+f.toString(16):f.toString(16),f=c+f;return f;case "utf8":case "utf-8":return r(this,d,a);case "ascii":c="";for(a=Math.min(this.length,a);d<a;d++)c+=String.fromCharCode(this[d]&127);return c;case "binary":c="";for(a=Math.min(this.length,a);d<a;d++)c+=String.fromCharCode(this[d]);return c;case "base64":return d=0===d&&a===this.length?C.fromByteArray(this):C.fromByteArray(this.slice(d,a)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.slice(d,a);a="";for(c=0;c<d.length;c+=2)a+=String.fromCharCode(d[c]+256*d[c+1]);return a;default:if(f)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase();f=!0}}function f(c,d,a){var f=c[d];c[d]=c[a];c[a]=f}function c(c,d,a,f){function e(c,d){return 1===b?c[d]:c.readUInt16BE(d*b)}var b=1,h=c.length,k=d.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>c.length||2>d.length)return-1;b=2;h/=2;k/=2;a/=2}f=-1;for(var r=0;a+
r<h;r++)if(e(c,a+r)===e(d,-1===f?0:r-f)){if(-1===f&&(f=r),r-f+1===k)return(a+f)*b}else-1!==f&&(r-=r-f),f=-1;return-1}function r(c,d,a){a=Math.min(c.length,a);for(var f=[];d<a;){var e=c[d],b=null,h=239<e?4:223<e?3:191<e?2:1;if(d+h<=a){var k,r,l;switch(h){case 1:128>e&&(b=e);break;case 2:k=c[d+1];128===(k&192)&&(e=(e&31)<<6|k&63,127<e&&(b=e));break;case 3:k=c[d+1];r=c[d+2];128===(k&192)&&128===(r&192)&&(e=(e&15)<<12|(k&63)<<6|r&63,2047<e&&(55296>e||57343<e)&&(b=e));break;case 4:k=c[d+1],r=c[d+2],l=
c[d+3],128===(k&192)&&128===(r&192)&&128===(l&192)&&(e=(e&15)<<18|(k&63)<<12|(r&63)<<6|l&63,65535<e&&1114112>e&&(b=e))}}null===b?(b=65533,h=1):65535<b&&(b-=65536,f.push(b>>>10&1023|55296),b=56320|b&1023);f.push(b);d+=h}c=f.length;if(c<=L)f=String.fromCharCode.apply(String,f);else{a="";for(d=0;d<c;)a+=String.fromCharCode.apply(String,f.slice(d,d+=L));f=a}return f}function k(c,d,a){if(0!==c%1||0>c)throw new RangeError("offset is not uint");if(c+d>a)throw new RangeError("Trying to access beyond buffer length");
}function z(c,d,a,f,b,h){if(!e.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>b||d<h)throw new RangeError('"value" argument is out of bounds');if(a+f>c.length)throw new RangeError("Index out of range");}function F(c,d,a,f){0>d&&(d=65535+d+1);for(var e=0,b=Math.min(c.length-a,2);e<b;e++)c[a+e]=(d&255<<8*(f?e:1-e))>>>8*(f?e:1-e)}function d(c,d,a,f){0>d&&(d=4294967295+d+1);for(var e=0,b=Math.min(c.length-a,4);e<b;e++)c[a+e]=d>>>8*(f?e:3-e)&255}function y(c,d,a,f,
e,b){if(a+f>c.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function D(c,d,a,f,e){e||y(c,d,a,4,3.4028234663852886E38,-3.4028234663852886E38);N.write(c,d,a,f,23,4);return a+4}function E(c,d,a,f,e){e||y(c,d,a,8,1.7976931348623157E308,-1.7976931348623157E308);N.write(c,d,a,f,52,8);return a+8}function A(c){c=c.trim?c.trim():c.replace(/^\s+|\s+$/g,"");c=c.replace(P,"");if(2>c.length)return"";for(;0!==c.length%4;)c+="=";return c}function B(c,d){d=d||
Infinity;for(var a,f=c.length,e=null,b=[],h=0;h<f;h++){a=c.charCodeAt(h);if(55295<a&&57344>a){if(!e){if(56319<a){-1<(d-=3)&&b.push(239,191,189);continue}else if(h+1===f){-1<(d-=3)&&b.push(239,191,189);continue}e=a;continue}if(56320>a){-1<(d-=3)&&b.push(239,191,189);e=a;continue}a=(e-55296<<10|a-56320)+65536}else e&&-1<(d-=3)&&b.push(239,191,189);e=null;if(128>a){if(0>--d)break;b.push(a)}else if(2048>a){if(0>(d-=2))break;b.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(d-=3))break;b.push(a>>12|224,
a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(d-=4))break;b.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return b}function J(c){for(var d=[],a=0;a<c.length;a++)d.push(c.charCodeAt(a)&255);return d}function G(c,d,a,f){for(var e=0;e<f&&!(e+a>=d.length||e>=c.length);e++)d[e+a]=c[e];return e}var C=b("base64-js"),N=b("ieee754"),M=b("isarray");n.Buffer=e;n.SlowBuffer=function(c){+c!=c&&(c=0);return e.alloc(+c)};n.INSPECT_MAX_BYTES=50;e.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:p();n.kMaxLength=e.TYPED_ARRAY_SUPPORT?2147483647:1073741823;e.poolSize=8192;e._augment=function(c){c.__proto__=e.prototype;return c};e.from=function(c,d,a){return q(null,c,d,a)};e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&($jscomp.initSymbol(),Object.defineProperty(e,Symbol.species,
{value:null,configurable:!0})));e.alloc=function(c,d,f){l(c);c=0>=c?a(null,c):void 0!==d?"string"===typeof f?a(null,c).fill(d,f):a(null,c).fill(d):a(null,c);return c};e.allocUnsafe=function(c){return x(null,c)};e.allocUnsafeSlow=function(c){return x(null,c)};e.isBuffer=function(c){return!(null==c||!c._isBuffer)};e.compare=function(c,d){if(!e.isBuffer(c)||!e.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(c===d)return 0;for(var a=c.length,f=d.length,b=0,h=Math.min(a,f);b<h;++b)if(c[b]!==
d[b]){a=c[b];f=d[b];break}return a<f?-1:f<a?1:0};e.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};e.concat=function(c,d){if(!M(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return e.alloc(0);var a;if(void 0===d)for(a=d=0;a<c.length;a++)d+=c[a].length;var f=e.allocUnsafe(d),b=0;for(a=
0;a<c.length;a++){var h=c[a];if(!e.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(f,b);b+=h.length}return f};e.byteLength=m;e.prototype._isBuffer=!0;e.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<c;d+=2)f(this,d,d+1);return this};e.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<c;d+=
4)f(this,d,d+3),f(this,d+1,d+2);return this};e.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?r(this,0,c):h.apply(this,arguments)};e.prototype.equals=function(c){if(!e.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===e.compare(this,c)};e.prototype.inspect=function(){var c="",d=n.INSPECT_MAX_BYTES;0<this.length&&(c=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(c+=" ... "));return"<Buffer "+c+">"};e.prototype.compare=
function(c,d,a,f,b){if(!e.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===d&&(d=0);void 0===a&&(a=c?c.length:0);void 0===f&&(f=0);void 0===b&&(b=this.length);if(0>d||a>c.length||0>f||b>this.length)throw new RangeError("out of range index");if(f>=b&&d>=a)return 0;if(f>=b)return-1;if(d>=a)return 1;d>>>=0;a>>>=0;f>>>=0;b>>>=0;if(this===c)return 0;var h=b-f,k=a-d,r=Math.min(h,k);f=this.slice(f,b);c=c.slice(d,a);for(d=0;d<r;++d)if(f[d]!==c[d]){h=f[d];k=c[d];break}return h<k?-1:k<
h?1:0};e.prototype.indexOf=function(d,a,f){"string"===typeof a?(f=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648);a>>=0;if(0===this.length||a>=this.length)return-1;0>a&&(a=Math.max(this.length+a,0));"string"===typeof d&&(d=e.from(d,f));if(e.isBuffer(d))return 0===d.length?-1:c(this,d,a,f);if("number"===typeof d)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,d,a):c(this,[d],a,f);throw new TypeError("val must be string, number or Buffer");
};e.prototype.includes=function(c,d,a){return-1!==this.indexOf(c,d,a)};e.prototype.write=function(c,d,a,f){if(void 0===d)f="utf8",a=this.length,d=0;else if(void 0===a&&"string"===typeof d)f=d,a=this.length,d=0;else if(isFinite(d))d|=0,isFinite(a)?(a|=0,void 0===f&&(f="utf8")):(f=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-d;if(void 0===a||a>e)a=e;if(0<c.length&&(0>a||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
f||(f="utf8");for(e=!1;;)switch(f){case "hex":a:{d=Number(d)||0;f=this.length-d;a?(a=Number(a),a>f&&(a=f)):a=f;f=c.length;if(0!==f%2)throw Error("Invalid hex string");a>f/2&&(a=f/2);for(f=0;f<a;f++){e=parseInt(c.substr(2*f,2),16);if(isNaN(e)){c=f;break a}this[d+f]=e}c=f}return c;case "utf8":case "utf-8":return G(B(c,this.length-d),this,d,a);case "ascii":return G(J(c),this,d,a);case "binary":return G(J(c),this,d,a);case "base64":return G(C.toByteArray(A(c)),this,d,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":f=
this.length-d;for(var b=void 0,b=e=void 0,h=[],k=0;k<c.length&&!(0>(f-=2));k++)b=c.charCodeAt(k),e=b>>8,b%=256,h.push(b),h.push(e);return G(h,this,d,a);default:if(e)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase();e=!0}};e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;e.prototype.slice=function(c,d){var a=this.length;c=~~c;d=void 0===d?a:~~d;0>c?(c+=a,0>c&&(c=0)):c>a&&(c=a);0>d?(d+=a,0>d&&(d=0)):d>a&&(d=a);d<c&&(d=
c);if(e.TYPED_ARRAY_SUPPORT)a=this.subarray(c,d),a.__proto__=e.prototype;else for(var f=d-c,a=new e(f,void 0),b=0;b<f;b++)a[b]=this[b+c];return a};e.prototype.readUIntLE=function(c,d,a){c|=0;d|=0;a||k(c,d,this.length);a=this[c];for(var f=1,e=0;++e<d&&(f*=256);)a+=this[c+e]*f;return a};e.prototype.readUIntBE=function(c,d,a){c|=0;d|=0;a||k(c,d,this.length);a=this[c+--d];for(var f=1;0<d&&(f*=256);)a+=this[c+--d]*f;return a};e.prototype.readUInt8=function(c,d){d||k(c,1,this.length);return this[c]};e.prototype.readUInt16LE=
function(c,d){d||k(c,2,this.length);return this[c]|this[c+1]<<8};e.prototype.readUInt16BE=function(c,d){d||k(c,2,this.length);return this[c]<<8|this[c+1]};e.prototype.readUInt32LE=function(c,d){d||k(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};e.prototype.readUInt32BE=function(c,d){d||k(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};e.prototype.readIntLE=function(c,d,a){c|=0;d|=0;a||k(c,d,this.length);a=this[c];for(var f=1,e=0;++e<
d&&(f*=256);)a+=this[c+e]*f;a>=128*f&&(a-=Math.pow(2,8*d));return a};e.prototype.readIntBE=function(c,d,a){c|=0;d|=0;a||k(c,d,this.length);a=d;for(var f=1,e=this[c+--a];0<a&&(f*=256);)e+=this[c+--a]*f;e>=128*f&&(e-=Math.pow(2,8*d));return e};e.prototype.readInt8=function(c,d){d||k(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};e.prototype.readInt16LE=function(c,d){d||k(c,2,this.length);var a=this[c]|this[c+1]<<8;return a&32768?a|4294901760:a};e.prototype.readInt16BE=function(c,d){d||
k(c,2,this.length);var a=this[c+1]|this[c]<<8;return a&32768?a|4294901760:a};e.prototype.readInt32LE=function(c,d){d||k(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};e.prototype.readInt32BE=function(c,d){d||k(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};e.prototype.readFloatLE=function(c,d){d||k(c,4,this.length);return N.read(this,c,!0,23,4)};e.prototype.readFloatBE=function(c,d){d||k(c,4,this.length);return N.read(this,c,!1,23,4)};e.prototype.readDoubleLE=
function(c,d){d||k(c,8,this.length);return N.read(this,c,!0,52,8)};e.prototype.readDoubleBE=function(c,d){d||k(c,8,this.length);return N.read(this,c,!1,52,8)};e.prototype.writeUIntLE=function(c,d,a,f){c=+c;d|=0;a|=0;f||z(this,c,d,a,Math.pow(2,8*a)-1,0);f=1;var e=0;for(this[d]=c&255;++e<a&&(f*=256);)this[d+e]=c/f&255;return d+a};e.prototype.writeUIntBE=function(c,d,a,f){c=+c;d|=0;a|=0;f||z(this,c,d,a,Math.pow(2,8*a)-1,0);f=a-1;var e=1;for(this[d+f]=c&255;0<=--f&&(e*=256);)this[d+f]=c/e&255;return d+
a};e.prototype.writeUInt8=function(c,d,a){c=+c;d|=0;a||z(this,c,d,1,255,0);e.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[d]=c&255;return d+1};e.prototype.writeUInt16LE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):F(this,c,d,!0);return d+2};e.prototype.writeUInt16BE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,65535,0);e.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):F(this,c,d,!1);return d+2};e.prototype.writeUInt32LE=function(c,a,f){c=
+c;a|=0;f||z(this,c,a,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[a+3]=c>>>24,this[a+2]=c>>>16,this[a+1]=c>>>8,this[a]=c&255):d(this,c,a,!0);return a+4};e.prototype.writeUInt32BE=function(c,a,f){c=+c;a|=0;f||z(this,c,a,4,4294967295,0);e.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):d(this,c,a,!1);return a+4};e.prototype.writeIntLE=function(c,d,a,f){c=+c;d|=0;f||(f=Math.pow(2,8*a-1),z(this,c,d,a,f-1,-f));f=0;var e=1,b=0;for(this[d]=c&255;++f<a&&(e*=256);)0>c&&
0===b&&0!==this[d+f-1]&&(b=1),this[d+f]=(c/e>>0)-b&255;return d+a};e.prototype.writeIntBE=function(c,d,a,f){c=+c;d|=0;f||(f=Math.pow(2,8*a-1),z(this,c,d,a,f-1,-f));f=a-1;var e=1,b=0;for(this[d+f]=c&255;0<=--f&&(e*=256);)0>c&&0===b&&0!==this[d+f+1]&&(b=1),this[d+f]=(c/e>>0)-b&255;return d+a};e.prototype.writeInt8=function(c,d,a){c=+c;d|=0;a||z(this,c,d,1,127,-128);e.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[d]=c&255;return d+1};e.prototype.writeInt16LE=function(c,d,a){c=+c;d|=0;
a||z(this,c,d,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):F(this,c,d,!0);return d+2};e.prototype.writeInt16BE=function(c,d,a){c=+c;d|=0;a||z(this,c,d,2,32767,-32768);e.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):F(this,c,d,!1);return d+2};e.prototype.writeInt32LE=function(c,a,f){c=+c;a|=0;f||z(this,c,a,4,2147483647,-2147483648);e.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8,this[a+2]=c>>>16,this[a+3]=c>>>24):d(this,c,a,!0);return a+4};e.prototype.writeInt32BE=
function(c,a,f){c=+c;a|=0;f||z(this,c,a,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);e.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):d(this,c,a,!1);return a+4};e.prototype.writeFloatLE=function(c,d,a){return D(this,c,d,!0,a)};e.prototype.writeFloatBE=function(c,d,a){return D(this,c,d,!1,a)};e.prototype.writeDoubleLE=function(c,d,a){return E(this,c,d,!0,a)};e.prototype.writeDoubleBE=function(c,d,a){return E(this,c,d,!1,a)};e.prototype.copy=function(c,d,
a,f){a||(a=0);f||0===f||(f=this.length);d>=c.length&&(d=c.length);d||(d=0);0<f&&f<a&&(f=a);if(f===a||0===c.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>f)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length);c.length-d<f-a&&(f=c.length-d+a);var b=f-a;if(this===c&&a<d&&d<f)for(f=b-1;0<=f;f--)c[f+d]=this[f+a];else if(1E3>b||!e.TYPED_ARRAY_SUPPORT)for(f=
0;f<b;f++)c[f+d]=this[f+a];else Uint8Array.prototype.set.call(c,this.subarray(a,a+b),d);return b};e.prototype.fill=function(c,d,a,f){if("string"===typeof c){"string"===typeof d?(f=d,d=0,a=this.length):"string"===typeof a&&(f=a,a=this.length);if(1===c.length){var b=c.charCodeAt(0);256>b&&(c=b)}if(void 0!==f&&"string"!==typeof f)throw new TypeError("encoding must be a string");if("string"===typeof f&&!e.isEncoding(f))throw new TypeError("Unknown encoding: "+f);}else"number"===typeof c&&(c&=255);if(0>
d||this.length<d||this.length<a)throw new RangeError("Out of range index");if(a<=d)return this;d>>>=0;a=void 0===a?this.length:a>>>0;c||(c=0);if("number"===typeof c)for(f=d;f<a;f++)this[f]=c;else for(c=e.isBuffer(c)?c:B((new e(c,f)).toString()),b=c.length,f=0;f<a-d;f++)this[f+d]=c[f%b];return this};var P=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":30,ieee754:78,isarray:84}],58:[function(b,g,
n){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function p(a,e){return a[0]-e[0]||a[1]-e[1]}function a(a,e,b){return e in a?a[e]:b}var e=b("./lib/monotone"),q=b("./lib/triangulation"),l=b("./lib/delaunay"),x=b("./lib/filter");g.exports=function(b,g,v){Array.isArray(g)?(v=v||{},g=g||[]):(v=g||{},g=[]);var m=!!a(v,"delaunay",!0),h=!!a(v,"interior",!0),f=!!a(v,"exterior",!0);v=!!a(v,"infinity",!1);if(!h&&!f||0===b.length)return[];var c=e(b,g);if(m||h!==f||v){g=q(b.length,g.map(t).sort(p));
for(var r=0;r<c.length;++r){var k=c[r];g.addTriangle(k[0],k[1],k[2])}m&&l(b,g);return f?h?v?x(g,0,v):g.cells():x(g,1,v):x(g,-1)}return c}},{"./lib/delaunay":59,"./lib/filter":60,"./lib/monotone":61,"./lib/triangulation":62}],59:[function(b,g,n){function t(a,e,b,l,g,u){var t=e.opposite(l,g);if(!(0>t)){if(g<l){var v=l;l=g;g=v;v=u;u=t;t=v}e.isConstraint(l,g)||0>p(a[l],a[g],a[u],a[t])&&b.push(l,g)}}var p=b("robust-in-sphere")[4];b("binary-search-bounds");g.exports=function(a,e){for(var b=[],l=a.length,
g=e.stars,u=0;u<l;++u)for(var w=g[u],v=1;v<w.length;v+=2){var m=w[v];if(!(m<u||e.isConstraint(u,m))){for(var h=w[v-1],f=-1,c=1;c<w.length;c+=2)if(w[c-1]===m){f=w[c];break}0>f||0>p(a[u],a[m],a[h],a[f])&&b.push(u,m)}}for(;0<b.length;){m=b.pop();u=b.pop();f=h=-1;w=g[u];for(l=1;l<w.length;l+=2)v=w[l-1],c=w[l],v===m?f=c:c===m&&(h=v);0>h||0>f||0<=p(a[u],a[m],a[h],a[f])||(e.flip(u,m),t(a,e,b,h,u,f),t(a,e,b,u,f,h),t(a,e,b,f,m,h),t(a,e,b,m,h,f))}}},{"binary-search-bounds":48,"robust-in-sphere":99}],60:[function(b,
g,n){function t(a,b,l,p,g,t,v){this.cells=a;this.neighbor=b;this.flags=p;this.constraint=l;this.active=g;this.next=t;this.boundary=v}function p(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}var a=b("binary-search-bounds");g.exports=function(a,b,l){for(var g=a.cells(),u=g.length,w=0;w<u;++w){var v=g[w],m=v[0],h=v[1],f=v[2];h<f?h<m&&(v[0]=h,v[1]=f,v[2]=m):f<m&&(v[0]=f,v[1]=m,v[2]=h)}g.sort(p);for(var c=Array(u),w=0;w<c.length;++w)c[w]=0;var r=[],k=[],z=Array(3*u),n=Array(3*u),d=null;l&&(d=[]);f=new t(g,
z,n,c,r,k,d);for(w=0;w<u;++w)for(var v=g[w],y=0;3>y;++y){var m=v[y],h=v[(y+1)%3],D=z[3*w+y]=f.locate(h,m,a.opposite(h,m)),E=n[3*w+y]=a.isConstraint(m,h);0>D&&(E?k.push(w):(r.push(w),c[w]=1),l&&d.push([h,m,-1]))}if(0===b)return l?f.cells.concat(f.boundary):f.cells;u=1;w=f.active;v=f.next;a=f.flags;g=f.cells;m=f.constraint;for(h=f.neighbor;0<w.length||0<v.length;){for(;0<w.length;)if(c=w.pop(),a[c]!==-u)for(a[c]=u,r=0;3>r;++r)k=h[3*c+r],0<=k&&0===a[k]&&(m[3*c+r]?v.push(k):(w.push(k),a[k]=u));c=v;v=
w;w=c;v.length=0;u=-u}for(w=u=0;w<g.length;++w)a[w]===b&&(g[u++]=g[w]);g.length=u;return l?g.concat(f.boundary):g};t.prototype.locate=function(){var e=[0,0,0];return function(b,l,g){var u=b,t=l,v=g;l<g?l<b&&(u=l,t=g,v=b):g<b&&(u=g,t=b,v=l);if(0>u)return-1;e[0]=u;e[1]=t;e[2]=v;return a.eq(this.cells,e,p)}}()},{"binary-search-bounds":48}],61:[function(b,g,n){function t(a,e,b,l,h){this.a=a;this.b=e;this.idx=b;this.lowerIds=l;this.upperIds=h}function p(a,e,b,l){this.a=a;this.b=e;this.type=b;this.idx=
l}function a(a,e){var b=a.a[0]-e.a[0]||a.a[1]-e.a[1]||a.type-e.type;return b||0!==a.type&&(b=x(a.a,a.b,e.b))?b:a.idx-e.idx}function e(a,e){return x(a.a,a.b,e)}function q(a,e){var b;return(b=a.a[0]<e.a[0]?x(a.a,a.b,e.a):x(e.b,e.a,a.a))?b:(b=e.b[0]<a.b[0]?x(a.a,a.b,e.b):x(e.b,e.a,a.b))||a.idx-e.idx}var l=b("binary-search-bounds"),x=b("robust-orientation")[3];g.exports=function(b,g){for(var v=b.length,m=g.length,h=[],f=0;f<v;++f)h.push(new p(b[f],null,0,f));for(f=0;f<m;++f){var c=g[f],v=b[c[0]],c=b[c[1]];
v[0]<c[0]?h.push(new p(v,c,2,f),new p(c,v,1,f)):v[0]>c[0]&&h.push(new p(c,v,2,f),new p(v,c,1,f))}h.sort(a);f=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);m=[new t([f,1],[f,0],-1,[],[],[],[])];v=[];f=0;for(c=h.length;f<c;++f){var r=h[f],k=r.type;if(0===k)for(var k=v,z=m,n=b,d=r.a,r=r.idx,y=l.lt(z,d,e),D=l.gt(z,d,e);y<D;++y){for(var E=z[y],A=E.lowerIds,B=A.length;1<B&&0<x(n[A[B-2]],n[A[B-1]],d);)k.push([A[B-1],A[B-2],r]),--B;A.length=B;A.push(r);E=E.upperIds;for(B=E.length;1<B&&0>x(n[E[B-2]],n[E[B-
1]],d);)k.push([E[B-2],E[B-1],r]),--B;E.length=B;E.push(r)}else 2===k?(k=m,z=r,n=l.le(k,z,q),d=k[n],r=d.upperIds,D=r[r.length-1],d.upperIds=[D],k.splice(n+1,0,new t(z.a,z.b,z.idx,[D],r))):(k=m,z=r,n=z.a,z.a=z.b,z.b=n,z=l.eq(k,z,q),k[z-1].upperIds=k[z].upperIds,k.splice(z,1))}return v}},{"binary-search-bounds":48,"robust-orientation":100}],62:[function(b,g,n){function t(a,b){this.stars=a;this.edges=b}function p(a,b,l){for(var p=1,g=a.length;p<g;p+=2)if(a[p-1]===b&&a[p]===l){a[p-1]=a[g-2];a[p]=a[g-
1];a.length=g-2;break}}var a=b("binary-search-bounds");g.exports=function(a,b){for(var l=Array(a),p=0;p<a;++p)l[p]=[];return new t(l,b)};b=t.prototype;b.isConstraint=function(){function e(a,e){return a[0]-e[0]||a[1]-e[1]}var b=[0,0];return function(l,p){b[0]=Math.min(l,p);b[1]=Math.max(l,p);return 0<=a.eq(this.edges,b,e)}}();b.removeTriangle=function(a,b,l){var g=this.stars;p(g[a],b,l);p(g[b],l,a);p(g[l],a,b)};b.addTriangle=function(a,b,l){var p=this.stars;p[a].push(b,l);p[b].push(l,a);p[l].push(a,
b)};b.opposite=function(a,b){for(var l=this.stars[b],p=1,g=l.length;p<g;p+=2)if(l[p]===a)return l[p-1];return-1};b.flip=function(a,b){var l=this.opposite(a,b),p=this.opposite(b,a);this.removeTriangle(a,b,l);this.removeTriangle(b,a,p);this.addTriangle(a,p,l);this.addTriangle(b,l,p)};b.edges=function(){for(var a=this.stars,b=[],l=0,p=a.length;l<p;++l)for(var g=a[l],t=0,v=g.length;t<v;t+=2)b.push([g[t],g[t+1]]);return b};b.cells=function(){for(var a=this.stars,b=[],l=0,p=a.length;l<p;++l)for(var g=a[l],
t=0,v=g.length;t<v;t+=2){var m=g[t],h=g[t+1];l<Math.min(m,h)&&b.push([l,m,h])}return b}},{"binary-search-bounds":48}],63:[function(b,g,n){function t(a){var d=c(a);a=f(h(d),a);return 0>a?[d,k(d,Infinity)]:0<a?[k(d,-Infinity),d]:[d,d]}function p(c,d,a){var f=[];v(a,function(a,b){var e=d[a],h=d[b];e[0]!==h[0]&&e[0]!==h[1]&&e[1]!==h[0]&&e[1]!==h[1]&&m(c[e[0]],c[e[1]],c[h[0]],c[h[1]])&&f.push([a,b])});return f}function a(c,d,a,f){var b=[];v(a,f,function(a,f){var e=d[a];if(e[0]!==f&&e[1]!==f){var h=c[f];
m(c[e[0]],c[e[1]],h,h)&&b.push([a,f])}});return b}function e(c,d,a,b,e){function k(d){if(d>=c.length)return l[d-c.length];d=c[d];return[h(d[0]),h(d[1])]}for(var l=[],m=0;m<a.length;++m){var p=a[m],q=p[0],p=p[1],g=d[q],v=d[p];if(g=z(r(c[g[0]]),r(c[g[1]]),r(c[v[0]]),r(c[v[1]])))v=l.length+c.length,l.push(g),b.push([q,v],[p,v])}b.sort(function(c,d){if(c[0]!==d[0])return c[0]-d[0];var a=k(c[1]),b=k(d[1]);return f(a[0],b[0])||f(a[1],b[1])});for(m=b.length-1;0<=m;--m){p=b[m];q=p[0];g=d[q];v=g[0];a=g[1];
var t=c[v],u=c[a];0>(t[0]-u[0]||t[1]-u[1])&&(t=v,v=a,a=t);g[0]=v;var v=g[1]=p[1],n;for(e&&(n=g[2]);0<m&&b[m-1][0]===q;)p=b[--m],p=p[1],e?d.push([v,p,n]):d.push([v,p]),v=p;e?d.push([v,a,n]):d.push([v,a])}return l}function q(a,d,f){for(var b=a.length+d.length,e=new w(b),h=0;h<d.length;++h){var k=d[h],r=t(k[0]),l=t(k[1]);f.push([r[0],l[0],r[1],l[1]]);a.push([c(k[0]),c(k[1])])}v(f,function(c,d){e.link(c,d)});d=0;f=!0;k=Array(b);for(h=0;h<b;++h)e.find(h)===h?(k[h]=d,a[d++]=a[h]):(f=!1,k[h]=-1);a.length=
d;if(f)return null;for(h=0;h<b;++h)0>k[h]&&(k[h]=k[e.find(h)]);return k}function l(c,d){return c[0]-d[0]||c[1]-d[1]}function x(c,d){var a=c[0]-d[0]||c[1]-d[1];return a?a:c[2]<d[2]?-1:c[2]>d[2]?1:0}function u(c,d,f){for(var b=Array(d.length),h=0;h<d.length;++h){var k=d[h],r=c[k[0]],k=c[k[1]];b[h]=[Math.min(r[0],k[0]),Math.min(r[1],k[1]),Math.max(r[0],k[0]),Math.max(r[1],k[1])]}h=p(c,d,b);r=Array(c.length);for(k=0;k<c.length;++k){var m=c[k];r[k]=[m[0],m[1],m[0],m[1]]}b=a(c,d,b,r);k=e(c,d,h,b,f);c=q(c,
k,r);if(0!==d.length){if(c)for(r=0;r<d.length;++r){var k=d[r],m=c[k[0]],g=c[k[1]];k[0]=Math.min(m,g);k[1]=Math.max(m,g)}else for(r=0;r<d.length;++r)k=d[r],m=k[0],g=k[1],k[0]=Math.min(m,g),k[1]=Math.max(m,g);f?d.sort(x):d.sort(l);for(r=k=1;r<d.length;++r)if(m=d[r-1],g=d[r],g[0]!==m[0]||g[1]!==m[1]||f&&g[2]!==m[2])d[k++]=g;d.length=k}return c?!0:0<h.length||0<b.length}g.exports=function(c,d,a){var f=!1,b;if(a){b=d;for(var e=Array(d.length),h=0;h<d.length;++h){var k=d[h];e[h]=[k[0],k[1],a[h]]}d=e}for(;u(c,
d,!!a);)f=!0;if(a&&f)for(b.length=0,h=a.length=0;h<d.length;++h)k=d[h],b.push([k[0],k[1]]),a.push(k[2]);return f};var w=b("union-find"),v=b("box-intersect");b("compare-cell");var m=b("robust-segment-intersect"),h=b("big-rat"),f=b("big-rat/cmp"),c=b("big-rat/to-float"),r=b("rat-vec"),k=b("nextafter"),z=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":64,"big-rat":34,"big-rat/cmp":32,"big-rat/to-float":47,"box-intersect":50,"compare-cell":66,nextafter:87,"rat-vec":96,"robust-segment-intersect":103,
"union-find":119}],64:[function(b,g,n){function t(a,b){return e(p(a[0],b[1]),p(a[1],b[0]))}g.exports=function(b,e,m,h){e=l(e,b);var f=l(h,m);h=t(e,f);if(0===q(h))return null;m=l(b,m);m=t(f,m);m=a(m,h);return x(b,u(e,m))};var p=b("big-rat/mul"),a=b("big-rat/div"),e=b("big-rat/sub"),q=b("big-rat/sign"),l=b("rat-vec/sub"),x=b("rat-vec/add"),u=b("rat-vec/muls");b("big-rat/to-float")},{"big-rat/div":33,"big-rat/mul":43,"big-rat/sign":45,"big-rat/sub":46,"big-rat/to-float":47,"rat-vec/add":95,"rat-vec/muls":97,
"rat-vec/sub":98}],65:[function(b,g,n){function t(a,b,p){var g=e(a[0],-b[0]);a=e(a[1],-b[1]);var m=e(p[0],-b[0]);b=e(p[1],-b[1]);g=l(q(g,m),q(a,b));return 0<=g[g.length-1]}g.exports=function(b,e,l,q){var m=p(e,l,q);if(0===m){var m=a(p(b,e,l)),h=a(p(b,e,q));return m===h?0===m&&(l=t(b,e,l),b=t(b,e,q),l!==b)?l?1:-1:0:0===h?0<m?-1:t(b,e,q)?-1:1:0===m?0<h?1:t(b,e,l)?1:-1:a(h-m)}h=p(b,e,l);return 0<h?0<m&&0<p(b,e,q)?1:-1:0>h?0<m||0<p(b,e,q)?1:-1:0<p(b,e,q)?1:t(b,e,l)?1:-1};var p=b("robust-orientation"),
a=b("signum"),e=b("two-sum"),q=b("robust-product"),l=b("robust-sum")},{"robust-orientation":100,"robust-product":101,"robust-sum":105,signum:106,"two-sum":117}],66:[function(b,g,n){function t(a,b){return a-b}g.exports=function(a,b){var q=a.length,l=a.length-b.length;if(l)return l;switch(q){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||p(a[0],a[1])-p(b[0],b[1]);case 3:var q=a[0]+a[1],g=b[0]+b[1];if(l=q+a[2]-(g+b[2]))return l;var l=p(a[0],a[1]),u=p(b[0],b[1]);return p(l,
a[2])-p(u,b[2])||p(l+a[2],q)-p(u+b[2],g);case 4:var l=a[0],q=a[1],g=a[2],u=a[3],n=b[0],v=b[1],m=b[2],h=b[3];return l+q+g+u-(n+v+m+h)||p(l,q,g,u)-p(n,v,m,h,n)||p(l+q,l+g,l+u,q+g,q+u,g+u)-p(n+v,n+m,n+h,v+m,v+h,m+h)||p(l+q+g,l+q+u,l+g+u,q+g+u)-p(n+v+m,n+v+h,n+m+h,v+m+h);default:g=a.slice().sort(t);u=b.slice().sort(t);for(n=0;n<q;++n)if(l=g[n]-u[n])return l;return 0}};var p=Math.min},{}],67:[function(b,g,n){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var p=b("./lib/thunk.js");g.exports=function(a){var b=new t;b.pre=a.pre;b.body=a.body;b.post=a.post;var q=a.args.slice(0);b.argTypes=q;for(var l=0;l<q.length;++l){var g=q[l];if("array"===g||"object"===typeof g&&g.blockIndices){b.argTypes[l]="array";b.arrayArgs.push(l);b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);b.shimArgs.push("array"+l);if(l<
b.pre.args.length&&0<b.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<b.post.args.length&&0<b.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)b.scalarArgs.push(l),b.shimArgs.push("scalar"+l);else if("index"===g){b.indexArgs.push(l);if(l<b.pre.args.length&&0<b.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<b.body.args.length&&b.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<b.post.args.length&&0<b.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){b.shapeArgs.push(l);if(l<b.pre.args.length&&b.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<b.body.args.length&&b.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<b.post.args.length&&b.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)b.argTypes[l]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+q[l]);}if(0>=b.arrayArgs.length)throw Error("cwise: No array arguments specified");if(b.pre.args.length>q.length)throw Error("cwise: Too many arguments in pre() block");if(b.body.args.length>q.length)throw Error("cwise: Too many arguments in body() block");if(b.post.args.length>q.length)throw Error("cwise: Too many arguments in post() block");
b.debug=!!a.printCode||!!a.debug;b.funcName=a.funcName||"cwise";b.blockSize=a.blockSize||64;return p(b)}},{"./lib/thunk.js":69}],68:[function(b,g,n){function t(a,b,e){var p=a.length,q=b.arrayArgs.length;b=0<b.indexArgs.length;var m=[],h=[],f=0,c=0,r,k;for(r=0;r<p;++r)h.push(["i",r,"=0"].join(""));for(k=0;k<q;++k)for(r=0;r<p;++r)c=f,f=a[r],0===r?h.push(["d",k,"s",r,"=t",k,"p",f].join("")):h.push(["d",k,"s",r,"=(t",k,"p",f,"-s",c,"*t",k,"p",c,")"].join(""));m.push("var "+h.join(","));for(r=p-1;0<=r;--r)f=
a[r],m.push(["for(i",r,"=0;i",r,"<s",f,";++i",r,"){"].join(""));m.push(e);for(r=0;r<p;++r){c=f;f=a[r];for(k=0;k<q;++k)m.push(["p",k,"+=d",k,"s",r].join(""));b&&(0<r&&m.push(["index[",c,"]-=s",c].join("")),m.push(["++index[",f,"]"].join("")));m.push("}")}return m.join("\n")}function p(a,b,e,p){for(var q=b.length,m=e.arrayArgs.length,h=e.blockSize,f=0<e.indexArgs.length,c=[],r=0;r<m;++r)c.push(["var offset",r,"=p",r].join(""));for(r=a;r<q;++r)c.push(["for(var j"+r+"=SS[",b[r],"]|0;j",r,">0;){"].join("")),
c.push(["if(j",r,"<",h,"){"].join("")),c.push(["s",b[r],"=j",r].join("")),c.push(["j",r,"=0"].join("")),c.push(["}else{s",b[r],"=",h].join("")),c.push(["j",r,"-=",h,"}"].join("")),f&&c.push(["index[",b[r],"]=j",r].join(""));for(r=0;r<m;++r){h=["offset"+r];for(f=a;f<q;++f)h.push(["j",f,"*t",r,"p",b[f]].join(""));c.push(["p",r,"=(",h.join("+"),")"].join(""))}c.push(t(b,e,p));for(r=a;r<q;++r)c.push("}");return c.join("\n")}function a(a,b,e){for(var p=a.body,q=[],m=[],h=0;h<a.args.length;++h){var f=a.args[h];
if(!(0>=f.count)){var c=new RegExp(f.name,"g"),r="",k=b.arrayArgs.indexOf(h);switch(b.argTypes[h]){case "offset":var g=b.offsetArgIndex.indexOf(h),k=b.offsetArgs[g].array,r="+q"+g;case "array":var r="p"+k+r,t="l"+h,g="a"+k;if(0===b.arrayBlockIndices[k])1===f.count?"generic"===e[k]?f.lvalue?(q.push(["var ",t,"=",g,".get(",r,")"].join("")),p=p.replace(c,t),m.push([g,".set(",r,",",t,")"].join(""))):p=p.replace(c,[g,".get(",r,")"].join("")):p=p.replace(c,[g,"[",r,"]"].join("")):"generic"===e[k]?(q.push(["var ",
t,"=",g,".get(",r,")"].join("")),p=p.replace(c,t),f.lvalue&&m.push([g,".set(",r,",",t,")"].join(""))):(q.push(["var ",t,"=",g,"[",r,"]"].join("")),p=p.replace(c,t),f.lvalue&&m.push([g,"[",r,"]=",t].join("")));else{c=[f.name];f=[r];for(r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)c.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(r+1)+"*t"+k+"b"+r);c=new RegExp(c.join(""),"g");r=f.join("+");if("generic"===e[k])throw Error("cwise: Generic arrays not supported in combination with blocks!");p=p.replace(c,[g,"[",
r,"]"].join(""))}break;case "scalar":p=p.replace(c,"Y"+b.scalarArgs.indexOf(h));break;case "index":p=p.replace(c,"index");break;case "shape":p=p.replace(c,"shape")}}}return[q.join("\n"),p,m.join("\n")].join("\n").trim()}function e(a){for(var b=Array(a.length),e=!0,p=0;p<a.length;++p){var q=a[p],m=q.match(/\d+/),m=m?m[0]:"";0===q.charAt(0)?b[p]="u"+q.charAt(1)+m:b[p]=q.charAt(0)+m;0<p&&(e=e&&b[p]===b[p-1])}return e?b[0]:b.join("")}var q=b("uniq");g.exports=function(b,g){for(var n=g[1].length-Math.abs(b.arrayBlockIndices[0])|
0,w=Array(b.arrayArgs.length),v=Array(b.arrayArgs.length),m=0;m<b.arrayArgs.length;++m)v[m]=g[2*m],w[m]=g[2*m+1];for(var h=[],f=[],c=[],r=[],k=[],m=0;m<b.arrayArgs.length;++m){0>b.arrayBlockIndices[m]?(c.push(0),r.push(n),h.push(n),f.push(n+b.arrayBlockIndices[m])):(c.push(b.arrayBlockIndices[m]),r.push(b.arrayBlockIndices[m]+n),h.push(0),f.push(b.arrayBlockIndices[m]));for(var z=[],F=0;F<w[m].length;F++)c[m]<=w[m][F]&&w[m][F]<r[m]&&z.push(w[m][F]-c[m]);k.push(z)}f=["SS"];r=["'use strict'"];z=[];
for(F=0;F<n;++F)z.push(["s",F,"=SS[",F,"]"].join(""));for(m=0;m<b.arrayArgs.length;++m){f.push("a"+m);f.push("t"+m);f.push("p"+m);for(F=0;F<n;++F)z.push(["t",m,"p",F,"=t",m,"[",c[m]+F,"]"].join(""));for(F=0;F<Math.abs(b.arrayBlockIndices[m]);++F)z.push(["t",m,"b",F,"=t",m,"[",h[m]+F,"]"].join(""))}for(m=0;m<b.scalarArgs.length;++m)f.push("Y"+m);0<b.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<b.indexArgs.length){F=Array(n);for(m=0;m<n;++m)F[m]="0";z.push(["index=[",F.join(","),"]"].join(""))}for(m=
0;m<b.offsetArgs.length;++m){h=b.offsetArgs[m];c=[];for(F=0;F<h.offset.length;++F)0!==h.offset[F]&&(1===h.offset[F]?c.push(["t",h.array,"p",F].join("")):c.push([h.offset[F],"*t",h.array,"p",F].join("")));0===c.length?z.push("q"+m+"=0"):z.push(["q",m,"=",c.join("+")].join(""))}m=q([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));z=z.concat(m);r.push("var "+z.join(","));for(m=0;m<b.arrayArgs.length;++m)r.push("p"+m+"|=0");3<b.pre.body.length&&r.push(a(b.pre,b,v));m=a(b.body,
b,v);a:for(F=0,z=k[0].length;F<z;){for(h=1;h<k.length;++h)if(k[h][F]!==k[0][F])break a;++F}F<n?r.push(p(F,k[0],b,m)):r.push(t(k[0],b,m));3<b.post.body.length&&r.push(a(b.post,b,v));b.debug&&console.log("-----Generated cwise routine for ",g,":\n"+r.join("\n")+"\n----------");n=[b.funcName||"unnamed","_cwise_loop_",w[0].join("s"),"m",F,e(v)].join("");return(new Function(["function ",n,"(",f.join(","),"){",r.join("\n"),"} return ",n].join("")))()}},{uniq:120}],69:[function(b,g,n){var t=b("./compile.js");
g.exports=function(b){var a=["'use strict'","var CACHED={}"],e=[];a.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var q=[],l=[],g=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],n=[],w=[],v=0;v<b.arrayArgs.length;++v){var m=b.arrayArgs[v];e.push(["t",m,"=array",m,".dtype,r",m,"=array",m,".order"].join(""));q.push("t"+m);q.push("r"+m);l.push("t"+m);l.push("r"+
m+".join()");g.push("array"+m+".data");g.push("array"+m+".stride");g.push("array"+m+".offset|0");0<v&&(n.push("array"+b.arrayArgs[0]+".shape.length===array"+m+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[v]))),w.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+m+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[v])+"]"))}1<b.arrayArgs.length&&(a.push("if (!("+n.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
a.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),a.push("if (!("+w.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(v=0;v<b.scalarArgs.length;++v)g.push("scalar"+b.scalarArgs[v]);e.push(["type=[",l.join(","),"].join()"].join(""));e.push("proc=CACHED[type]");a.push("var "+e.join(","));a.push(["if(!proc){CACHED[type]=proc=compile([",q.join(","),"])}return proc(",g.join(","),
")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------");return(new Function("compile",a.join("\n")))(t.bind(void 0,b))}},{"./compile.js":68}],70:[function(b,g,n){(function(b){var p=!1;if("undefined"!==typeof Float64Array){var a=new Float64Array(1),e=new Uint32Array(a.buffer);a[0]=1;p=!0;1072693248===e[1]?(g.exports=function(b){a[0]=b;return[e[0],e[1]]},g.exports.pack=function(b,p){e[0]=b;e[1]=p;return a[0]},g.exports.lo=function(b){a[0]=b;return e[0]},g.exports.hi=
function(b){a[0]=b;return e[1]}):1072693248===e[0]?(g.exports=function(b){a[0]=b;return[e[1],e[0]]},g.exports.pack=function(b,p){e[1]=b;e[0]=p;return a[0]},g.exports.lo=function(b){a[0]=b;return e[1]},g.exports.hi=function(b){a[0]=b;return e[0]}):p=!1}if(!p){var q=new b(8);g.exports=function(a){q.writeDoubleLE(a,0,!0);return[q.readUInt32LE(0,!0),q.readUInt32LE(4,!0)]};g.exports.pack=function(a,b){q.writeUInt32LE(a,0,!0);q.writeUInt32LE(b,4,!0);return q.readDoubleLE(0,!0)};g.exports.lo=function(a){q.writeDoubleLE(a,
0,!0);return q.readUInt32LE(0,!0)};g.exports.hi=function(a){q.writeDoubleLE(a,0,!0);return q.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var b=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:57}],71:[function(b,g,n){function t(b,
a,e){var q=b[e]|0;if(0>=q)return[];var l=Array(q),g;if(e===b.length-1)for(g=0;g<q;++g)l[g]=a;else for(g=0;g<q;++g)l[g]=t(b,a,e+1);return l}g.exports=function(b,a){"undefined"===typeof a&&(a=0);switch(typeof b){case "number":if(0<b){var e=b|0,q=a,l,g;l=Array(e);for(g=0;g<e;++g)l[g]=q;return l}break;case "object":if("number"===typeof b.length)return t(b,a,0)}return[]}},{}],72:[function(b,g,n){g.exports=function(b,a){var e=b.length;if("number"!==typeof a){for(var q=a=0;q<e;++q){var l=b[q];a=Math.max(a,
l[0],l[1])}a=(a|0)+1}a|=0;for(var g=Array(a),q=0;q<a;++q)g[q]=[];for(q=0;q<e;++q)l=b[q],g[l[0]].push(l[1]),g[l[1]].push(l[0]);for(e=0;e<a;++e)t(g[e],function(a,b){return a-b});return g};var t=b("uniq")},{uniq:120}],73:[function(b,g,n){function t(a,b,c,e,k,m){this._color=a;this.key=b;this.value=c;this.left=e;this.right=k;this._count=m}function p(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function a(a,b){return new t(a,b.key,b.value,b.left,b.right,b._count)}function e(a){a._count=
1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function q(a,b){this._compare=a;this.root=b}function l(a,b){if(b.left){var c=l(a,b.left);if(c)return c}if(c=a(b.key,b.value))return c;if(b.right)return l(a,b.right)}function x(a,b,c,e){if(0>=b(a,e.key)){if(e.left){var k=x(a,b,c,e.left);if(k)return k}if(k=c(e.key,e.value))return k}if(e.right)return x(a,b,c,e.right)}function u(a,b,c,e,k){var m=c(a,k.key),l=c(b,k.key);if(0>=m&&(k.left&&(m=u(a,b,c,e,k.left))||0<l&&(m=e(k.key,k.value))))return m;if(0<
l&&k.right)return u(a,b,c,e,k.right)}function w(a,b){this.tree=a;this._stack=b}function v(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function m(a,b){return a<b?-1:a>b?1:0}g.exports=function(a){return new q(a||m,null)};b=q.prototype;Object.defineProperty(b,"keys",{get:function(){var a=[];this.forEach(function(b,c){a.push(b)});return a}});Object.defineProperty(b,"values",{get:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a}});
Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(b,f){for(var c=this._compare,r=this.root,k=[],m=[];r;){var l=c(b,r.key);k.push(r);m.push(l);r=0>=l?r.left:r.right}k.push(new t(0,b,f,null,null,1));for(l=k.length-2;0<=l;--l)r=k[l],k[l]=0>=m[l]?new t(r._color,r.key,r.value,k[l+1],r.right,r._count+1):new t(r._color,r.key,r.value,r.left,k[l+1],r._count+1);for(l=k.length-1;1<l;--l){m=k[l-1];r=k[l];if(1===m._color||1===r._color)break;var d=k[l-2];
if(d.left===m)if(m.left===r){var p=d.right;if(p&&0===p._color)m._color=1,d.right=a(1,p),d._color=0,--l;else{d._color=0;d.left=m.right;m._color=1;m.right=d;k[l-2]=m;k[l-1]=r;e(d);e(m);3<=l&&(l=k[l-3],l.left===d?l.left=m:l.right=m);break}}else if((p=d.right)&&0===p._color)m._color=1,d.right=a(1,p),d._color=0,--l;else{m.right=r.left;d._color=0;d.left=r.right;r._color=1;r.left=m;r.right=d;k[l-2]=r;k[l-1]=m;e(d);e(m);e(r);3<=l&&(l=k[l-3],l.left===d?l.left=r:l.right=r);break}else if(m.right===r)if((p=d.left)&&
0===p._color)m._color=1,d.left=a(1,p),d._color=0,--l;else{d._color=0;d.right=m.left;m._color=1;m.left=d;k[l-2]=m;k[l-1]=r;e(d);e(m);3<=l&&(l=k[l-3],l.right===d?l.right=m:l.left=m);break}else if((p=d.left)&&0===p._color)m._color=1,d.left=a(1,p),d._color=0,--l;else{m.left=r.right;d._color=0;d.right=r.left;r._color=1;r.right=m;r.left=d;k[l-2]=r;k[l-1]=m;e(d);e(m);e(r);3<=l&&(l=k[l-3],l.right===d?l.right=r:l.left=r);break}}k[0]._color=1;return new q(c,k[0])};b.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return x(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,c)))return u(b,c,this._compare,a,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new w(this,a)}});Object.defineProperty(b,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new w(this,a)}});b.at=function(a){if(0>a)return new w(this,[]);for(var b=this.root,c=[];;){c.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new w(this,c);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new w(this,[])};b.ge=function(a){for(var b=this._compare,c=this.root,e=[],k=0;c;){var m=b(a,c.key);e.push(c);0>=m&&(k=e.length);c=0>=m?c.left:c.right}e.length=k;return new w(this,e)};b.gt=function(a){for(var b=this._compare,c=this.root,e=[],k=0;c;){var m=b(a,c.key);e.push(c);0>m&&(k=e.length);c=0>m?c.left:c.right}e.length=k;return new w(this,e)};b.lt=function(a){for(var b=this._compare,
c=this.root,e=[],k=0;c;){var m=b(a,c.key);e.push(c);0<m&&(k=e.length);c=0>=m?c.left:c.right}e.length=k;return new w(this,e)};b.le=function(a){for(var b=this._compare,c=this.root,e=[],k=0;c;){var m=b(a,c.key);e.push(c);0<=m&&(k=e.length);c=0>m?c.left:c.right}e.length=k;return new w(this,e)};b.find=function(a){for(var b=this._compare,c=this.root,e=[];c;){var k=b(a,c.key);e.push(c);if(0===k)return new w(this,e);c=0>=k?c.left:c.right}return new w(this,[])};b.remove=function(a){return(a=this.find(a))?
a.remove():this};b.get=function(a){for(var b=this._compare,c=this.root;c;){var e=b(a,c.key);if(0===e)return c.value;c=0>=e?c.left:c.right}};b=w.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new w(this.tree,this._stack.slice())};b.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var f=
Array(b.length),c=b[b.length-1];f[f.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var r=b.length-2;0<=r;--r)c=b[r],f[r]=c.left===b[r+1]?new t(c._color,c.key,c.value,f[r+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,f[r+1],c._count);c=f[f.length-1];if(c.left&&c.right){b=f.length;for(c=c.left;c.right;)f.push(c),c=c.right;r=f[b-1];f.push(new t(c._color,r.key,r.value,c.left,c.right,c._count));f[b-1].key=c.key;f[b-1].value=c.value;for(r=f.length-2;r>=b;--r)c=f[r],f[r]=
new t(c._color,c.key,c.value,c.left,f[r+1],c._count);f[b-1].left=f[b]}c=f[f.length-1];if(0===c._color)for(r=f[f.length-2],r.left===c?r.left=null:r.right===c&&(r.right=null),f.pop(),r=0;r<f.length;++r)f[r]._count--;else if(c.left||c.right)for(c.left?v(c,c.left):c.right&&v(c,c.right),c._color=1,r=0;r<f.length-1;++r)f[r]._count--;else{if(1===f.length)return new q(this.tree._compare,null);for(r=0;r<f.length;++r)f[r]._count--;for(var r=f[f.length-2],k,m,l,d=f.length-1;0<=d;--d){b=f[d];if(0===d){b._color=
1;break}k=f[d-1];if(k.left===b){m=k.right;if(m.right&&0===m.right._color){m=k.right=p(m);l=m.right=p(m.right);k.right=m.left;m.left=k;m.right=l;m._color=k._color;b._color=1;k._color=1;l._color=1;e(k);e(m);if(1<d){var g=f[d-2];g.left===k?g.left=m:g.right=m}f[d-1]=m;break}else if(m.left&&0===m.left._color){m=k.right=p(m);l=m.left=p(m.left);k.right=l.left;m.left=l.right;l.left=k;l.right=m;l._color=k._color;k._color=1;m._color=1;b._color=1;e(k);e(m);e(l);1<d&&(g=f[d-2],g.left===k?g.left=l:g.right=l);
f[d-1]=l;break}if(1===m._color)if(0===k._color){k._color=1;k.right=a(0,m);break}else k.right=a(0,m);else m=p(m),k.right=m.left,m.left=k,m._color=k._color,k._color=0,e(k),e(m),1<d&&(g=f[d-2],g.left===k?g.left=m:g.right=m),f[d-1]=m,f[d]=k,d+1<f.length?f[d+1]=b:f.push(b),d+=2}else{m=k.left;if(m.left&&0===m.left._color){m=k.left=p(m);l=m.left=p(m.left);k.left=m.right;m.right=k;m.left=l;m._color=k._color;b._color=1;k._color=1;l._color=1;e(k);e(m);1<d&&(g=f[d-2],g.right===k?g.right=m:g.left=m);f[d-1]=m;
break}else if(m.right&&0===m.right._color){m=k.left=p(m);l=m.right=p(m.right);k.left=l.right;m.right=l.left;l.right=k;l.left=m;l._color=k._color;k._color=1;m._color=1;b._color=1;e(k);e(m);e(l);1<d&&(g=f[d-2],g.right===k?g.right=l:g.left=l);f[d-1]=l;break}if(1===m._color)if(0===k._color){k._color=1;k.left=a(0,m);break}else k.left=a(0,m);else m=p(m),k.left=m.right,m.right=k,m._color=k._color,k._color=0,e(k),e(m),1<d&&(g=f[d-2],g.right===k?g.right=m:g.left=m),f[d-1]=m,f[d]=k,d+1<f.length?f[d+1]=b:f.push(b),
d+=2}}r.left===c?r.left=null:r.right=null}return new q(this.tree._compare,f[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var c=b.length-2;0<=c;--c)b[c+1]===b[c].right&&(++a,b[c].left&&(a+=b[c].left._count));return a},enumerable:!0});b.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});b.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var c=Array(b.length),e=b[b.length-1];c[c.length-1]=new t(e._color,e.key,a,e.left,e.right,e._count);for(a=b.length-2;0<=a;--a)e=b[a],c[a]=e.left===b[a+1]?new t(e._color,e.key,e.value,c[a+1],e.right,e._count):new t(e._color,e.key,e.value,e.left,c[a+1],e._count);return new q(this.tree._compare,c[0])};b.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],74:[function(b,g,n){function t(b){if(0>b)return Number("0/0");for(var g=a[0],l=a.length-1;0<l;--l)g+=a[l]/(b+l);l=b+4.7421875+.5;return.5*Math.log(2*Math.PI)+(b+.5)*Math.log(l)-l+Math.log(g)-
Math.log(b)}var p=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function q(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*q(1-a));if(100<a)return Math.exp(t(a));--a;for(var b=p[0],g=1;9>g;g++)b+=p[g]/(a+g);g=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*b};g.exports.log=t},{}],75:[function(b,g,n){g.exports=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],76:[function(b,g,n){var t=b("./identity");g.exports=function(b,a,e,g){var l,n,u,w,v,
m,h,f,c=a[0],r=a[1];a=a[2];u=g[0];w=g[1];n=g[2];h=e[0];g=e[1];l=e[2];if(1E-6>Math.abs(c-h)&&1E-6>Math.abs(r-g)&&1E-6>Math.abs(a-l))return t(b);e=c-h;g=r-g;h=a-l;f=1/Math.sqrt(e*e+g*g+h*h);e*=f;g*=f;h*=f;l=w*h-n*g;n=n*e-u*h;u=u*g-w*e;(f=Math.sqrt(l*l+n*n+u*u))?(f=1/f,l*=f,n*=f,u*=f):u=n=l=0;w=g*u-h*n;v=h*l-e*u;m=e*n-g*l;(f=Math.sqrt(w*w+v*v+m*m))?(f=1/f,w*=f,v*=f,m*=f):m=v=w=0;b[0]=l;b[1]=w;b[2]=e;b[3]=0;b[4]=n;b[5]=v;b[6]=g;b[7]=0;b[8]=u;b[9]=m;b[10]=h;b[11]=0;b[12]=-(l*c+n*r+u*a);b[13]=-(w*c+v*r+
m*a);b[14]=-(e*c+g*r+h*a);b[15]=1;return b}},{"./identity":75}],77:[function(b,g,n){g.exports=function(b,g,a,e,q){g=1/Math.tan(g/2);var l=1/(e-q);b[0]=g/a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=g;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(q+e)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*q*e*l;b[15]=0;return b}},{}],78:[function(b,g,n){n.read=function(b,g,a,e,q){var l;l=8*q-e-1;var n=(1<<l)-1,u=n>>1,w=-7;q=a?q-1:0;var v=a?-1:1,m=b[g+q];q+=v;a=m&(1<<-w)-1;m>>=-w;for(w+=l;0<w;a=256*a+b[g+q],q+=v,w-=8);l=a&(1<<-w)-1;a>>=-w;
for(w+=e;0<w;l=256*l+b[g+q],q+=v,w-=8);if(0===a)a=1-u;else{if(a===n)return l?NaN:Infinity*(m?-1:1);l+=Math.pow(2,e);a-=u}return(m?-1:1)*l*Math.pow(2,a-e)};n.write=function(b,g,a,e,q,l){var n,u=8*l-q-1,w=(1<<u)-1,v=w>>1,m=23===q?Math.pow(2,-24)-Math.pow(2,-77):0;l=e?0:l-1;var h=e?1:-1,f=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,e=w):(e=Math.floor(Math.log(g)/Math.LN2),1>g*(n=Math.pow(2,-e))&&(e--,n*=2),g=1<=e+v?g+m/n:g+m*Math.pow(2,1-v),2<=g*n&&(e++,n/=2),e+v>=w?(g=
0,e=w):1<=e+v?(g=(g*n-1)*Math.pow(2,q),e+=v):(g=g*Math.pow(2,v-1)*Math.pow(2,q),e=0));for(;8<=q;b[a+l]=g&255,l+=h,g/=256,q-=8);e=e<<q|g;for(u+=q;0<u;b[a+l]=e&255,l+=h,e/=256,u-=8);b[a+l-h]|=128*f}},{}],79:[function(b,g,n){function t(c,a,b,f,e){this.mid=c;this.left=a;this.right=b;this.leftPoints=f;this.rightPoints=e;this.count=(a?a.count:0)+(b?b.count:0)+f.length}function p(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function a(a,
b){var f=m(b);a.mid=f.mid;a.left=f.left;a.right=f.right;a.leftPoints=f.leftPoints;a.rightPoints=f.rightPoints;a.count=f.count}function e(c,b){var f=c.intervals([]),e=f.indexOf(b);if(0>e)return 0;f.splice(e,1);a(c,f);return 1}function q(a,b,f){for(var e=0;e<a.length&&a[e][0]<=b;++e){var h=f(a[e]);if(h)return h}}function l(a,b,f){for(var e=a.length-1;0<=e&&a[e][1]>=b;--e){var h=f(a[e]);if(h)return h}}function x(a,b){for(var f=0;f<a.length;++f){var e=b(a[f]);if(e)return e}}function u(a,b){return a-b}
function w(a,b){var f=a[0]-b[0];return f?f:a[1]-b[1]}function v(a,b){var f=a[1]-b[1];return f?f:a[0]-b[0]}function m(a){if(0===a.length)return null;for(var b=[],f=0;f<a.length;++f)b.push(a[f][0],a[f][1]);b.sort(u);for(var b=b[b.length>>1],e=[],h=[],d=[],f=0;f<a.length;++f){var l=a[f];l[1]<b?e.push(l):b<l[0]?h.push(l):d.push(l)}a=d.slice();d.sort(w);a.sort(v);return new t(b,m(e),m(h),d,a)}function h(a){this.root=a}var f=b("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(m(a)):
new h(null)};b=t.prototype;b.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};b.insert=function(c){var b=this.count-this.leftPoints.length;this.count+=1;if(c[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?(b=this.intervals([]),b.push(c),a(this,b)):this.left.insert(c):this.left=m([c]);else if(c[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?(b=this.intervals([]),b.push(c),a(this,b)):this.right.insert(c):
this.right=m([c]);else{var b=f.ge(this.leftPoints,c,w),e=f.ge(this.rightPoints,c,v);this.leftPoints.splice(b,0,c);this.rightPoints.splice(e,0,c)}};b.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(b-1))return e(this,a);b=this.left.remove(a);if(2===b)return this.left=null,--this.count,1;1===b&&--this.count;return b}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(b-1))return e(this,a);
b=this.right.remove(a);if(2===b)return this.right=null,--this.count,1;1===b&&--this.count;return b}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var h=this.left;h.right;)a=h,h=h.right;if(a===this)h.right=this.right;else{var m=this.left,b=this.right;a.count-=h.count;a.right=h.left;h.left=m;h.right=b}p(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
p(this,this.left):p(this,this.right);return 1}for(m=f.ge(this.leftPoints,a,w);m<this.leftPoints.length&&this.leftPoints[m][0]===a[0];++m)if(this.leftPoints[m]===a)for(--this.count,this.leftPoints.splice(m,1),b=f.ge(this.rightPoints,a,v);b<this.rightPoints.length&&this.rightPoints[b][1]===a[1];++b)if(this.rightPoints[b]===a)return this.rightPoints.splice(b,1),1;return 0};b.queryPoint=function(a,b){if(a<this.mid){if(this.left){var f=this.left.queryPoint(a,b);if(f)return f}return q(this.leftPoints,a,
b)}return a>this.mid?this.right&&(f=this.right.queryPoint(a,b))?f:l(this.rightPoints,a,b):x(this.leftPoints,b)};b.queryInterval=function(a,b,f){if(a<this.mid&&this.left){var e=this.left.queryInterval(a,b,f);if(e)return e}return b>this.mid&&this.right&&(e=this.right.queryInterval(a,b,f))?e:b<this.mid?q(this.leftPoints,b,f):a>this.mid?l(this.rightPoints,a,f):x(this.leftPoints,f)};b=h.prototype;b.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};b.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};b.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)};b.queryInterval=function(a,b,f){if(a<=b&&this.root)return this.root.queryInterval(a,b,f)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":80}],80:[function(b,g,n){function t(a,b,g,l,p,n){a=["function ",a,"(a,l,h,",
l.join(","),"){",n?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",p?".get(m)":"[m]"];n?0>b.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",b,"){i=m;");g?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");n?a.push("return -1};"):a.push("return i};");return a.join("")}function p(a,b,g,l){return(new Function([t("A","x"+a+"y",b,["y"],!1,l),t("B","x"+a+"y",b,["y"],!0,l),t("P","c(x,y)"+a+"0",
b,["y","c"],!1,l),t("Q","c(x,y)"+a+"0",b,["y","c"],!0,l),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",g].join("")))()}g.exports=
{ge:p(">=",!1,"GE"),gt:p(">",!1,"GT"),lt:p("<",!0,"LT"),le:p("<=",!0,"LE"),eq:p("-",!0,"EQ",!0)}},{}],81:[function(b,g,n){g.exports=function(b,g){g=g||Array(b.length);for(var a=0;a<b.length;++a)g[b[a]]=a;return g}},{}],82:[function(b,g,n){g.exports=function(b){for(var g=Array(b),a=0;a<b;++a)g[a]=a;return g}},{}],83:[function(b,g,n){g.exports=function(b){return!(null==b||!(b._isBuffer||b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)))}},{}],84:[function(b,g,n){var t=
{}.toString;g.exports=Array.isArray||function(b){return"[object Array]"==t.call(b)}},{}],85:[function(b,g,n){function t(a,b,e){for(var f=0,c=0;c<a;++c)b&1<<c&&(f|=1<<e[c]);return f}function p(b,m,h,f,c,g){function k(a,d){A.push("for(","i"+c[a],"=",d,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function p(a){for(var d=0;d<y;++d)A.push("p"+d,"+=","u"+d+"_"+c[a],";");A.push("}")}function n(){for(var a=1;a<1<<D;++a)A.push(w,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",w,";")}function d(a,b){if(0>
a){for(var h=0;h<y;++h)g[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var m=[],h=0;h<y;++h)m.push("c"+h+"_0");for(h=0;h<f;++h)m.push("x"+h);A.push("b0","=",q,"[",u,"]=phase(",m.join(),");");for(m=1;m<1<<D;++m)A.push("b"+m,"=",q,"[",u,"+","e"+m,"];");h=[];for(m=1;m<1<<D;++m)h.push("(b0!==b"+m+")");A.push("if(",h.join("||"),"){");for(var v=[],h=0;h<D;++h)v.push("i"+h);for(h=0;h<y;++h)for(v.push("c"+h+"_0"),m=1;m<1<<D;++m)g[h]?A.push("c"+h+"_"+m,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+m,");"):A.push("c"+h+"_"+m,"=","d"+h,"[","p"+h,"+","d"+h+"_"+m,"];"),v.push("c"+h+"_"+m);for(h=0;h<1<<D;++h)v.push("b"+h);for(h=0;h<f;++h)v.push("x"+h);A.push("vertex(",v.join(),");","v0","=",e,"[",u,"]=",l,"++;");h=(1<<D)-1;v="b"+h;for(m=0;m<D;++m)if(0===(b&~(1<<m))){for(var t=h^1<<m,w="b"+t,x=[],E=t;0<E;E=E-1&t)x.push(e+"["+u+"+"+("e"+E)+"]");x.push("v0");for(E=0;E<y;++E)m&1?x.push("c"+E+"_"+h,"c"+E+"_"+t):x.push("c"+E+"_"+t,"c"+E+"_"+h);m&1?x.push(v,w):x.push(w,
v);for(E=0;E<f;++E)x.push("x"+E);A.push("if(",v,"!==",w,"){","face(",x.join(),")}")}A.push("}",u,"+=1;")}else{for(m=a-1;0<=m;--m)k(m,0);h=[];for(m=0;m<y;++m)g[m]?h.push("d"+m+".get("+("p"+m)+")"):h.push("d"+m+"["+("p"+m)+"]");for(m=0;m<f;++m)h.push("x"+m);A.push(q,"[",u,"++]=phase(",h.join(),");");for(m=0;m<a;++m)p(m);for(m=0;m<y;++m)A.push("p"+m,"+=","u"+m+"_"+c[a],";");A.push("if(","s"+c[a],">0){","i"+c[a],"=1;");d(a-1,b|1<<c[a]);for(m=0;m<y;++m)A.push("p"+m,"+=","u"+m+"_"+c[a],";");a===D-1&&(A.push(u,
"=0;"),n());k(a,2);d(a-1,b);a===D-1&&(A.push("if(","i"+c[D-1],"&1){",u,"=0;}"),n());p(a);A.push("}")}}var y=g.length,D=c.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var E="extractContour"+c.join("_"),A=[],B=[],J=[],G=0;G<y;++G)J.push("a"+G);for(G=0;G<f;++G)J.push("x"+G);for(G=0;G<D;++G)B.push("s"+G+"=a0.shape["+G+"]|0");for(G=0;G<y;++G){B.push("d"+G+"="+("a"+G)+".data","o"+G+"="+("a"+G)+".offset|0");for(var C=0;C<D;++C)B.push("t"+G+"_"+C+"="+("a"+G)+".stride["+
C+"]|0")}for(G=0;G<y;++G)for(B.push("p"+G+"="+("o"+G)),B.push("c"+G+"_0"),C=1;C<1<<D;++C){for(var N=[],M=0;M<D;++M)C&1<<M&&N.push("-"+("t"+G+"_"+M));B.push("d"+G+"_"+C+"=("+N.join("")+")|0");B.push("c"+G+"_"+C+"=0")}for(G=0;G<y;++G)for(C=0;C<D;++C)M=["t"+G+"_"+c[C]],0<C&&M.push("t"+G+"_"+c[C-1]+"*"+("s"+c[C-1])),B.push("u"+G+"_"+c[C]+"=("+M.join("-")+")|0");for(G=0;G<D;++G)B.push("i"+G+"=0");B.push(l+"=0");C=["2"];for(G=D-2;0<=G;--G)C.push("s"+c[G]);B.push(x+"=("+C.join("*")+")|0",q+"=mallocUint32("+
x+")",e+"=mallocUint32("+x+")",u+"=0");B.push("b0=0");for(C=1;C<1<<D;++C){G=[];N=[];for(M=0;M<D;++M)C&1<<M&&(0===N.length?G.push("1"):G.unshift(N.join("*"))),N.push("s"+c[M]);M="";0>G[0].indexOf("s"+c[D-2])&&(M="-");N=t(D,C,c);B.push("e"+N+"=(-"+G.join("-")+")|0","y"+N+"=("+M+G.join("-")+")|0","b"+N+"=0")}B.push("v0=0",w+"=0");d(D-1,0);A.push("freeUint32(",e,");freeUint32(",q,");");E=["'use strict';function ",E,"(",J.join(),"){var ",B.join(),";",A.join(""),"}return ",E].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",E))(b,m,h,a.mallocUint32,a.freeUint32)}var a=b("typedarray-pool");g.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var f=a.arrayArguments||1;1>f&&b("Must have at least one array argument");var c=a.scalarArguments||0;0>c&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");
"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var g=a.getters||[],k=Array(f),l=0;l<f;++l)0<=g.indexOf(l)?k[l]=!0:k[l]=!1;return p(a.vertex,a.cell,a.phase,c,e,k)};var e="V",q="P",l="N",x="Q",u="X",w="T"},{"typedarray-pool":118}],86:[function(b,g,n){function t(a,b){return a[0]-b[0]}function p(){var a=this.stride,b=Array(a.length),e;for(e=0;e<b.length;++e)b[e]=[Math.abs(a[e]),e];b.sort(t);a=Array(b.length);for(e=
0;e<a.length;++e)a[e]=b[e][1];return a}function a(a,b){var e=["View",b,"d",a].join("");0>b&&(e="View_Nil"+a);var h="generic"===a;if(-1===b){var f,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
e+"(a){return new "+e+"(a);}");return e()}if(0===b)return e=new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
e+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(u[a][0]);f=["'use strict'"];var c=q(b),l=c.map(function(a){return"i"+a}),k="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),g=c.map(function(a){return"b"+a}).join(","),n=c.map(function(a){return"c"+a}).join(",");f.push("function "+
e+"(a,"+g+","+n+",d){this.data=a","this.shape=["+g+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);f.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+e+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})"));f.push("proto.set=function "+e+"_set("+l.join(",")+",v){");h?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}");f.push("proto.get=function "+e+"_get("+l.join(",")+"){");h?f.push("return this.data.get("+
k+")}"):f.push("return this.data["+k+"]}");f.push("proto.index=function "+e+"_index(",l.join(),"){return "+k+"}");f.push("proto.hi=function "+e+"_hi("+l.join(",")+"){return new "+e+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=c.map(function(a){return"a"+a+"=this.shape["+a+"]"});k=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+
e+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+k.join(","));for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");f.push("return new "+e+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");f.push("proto.step=function "+e+"_step("+l.join(",")+"){var "+c.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");f.push("return new "+e+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");k=Array(b);g=Array(b);for(h=0;h<b;++h)k[h]="a[i"+h+"]",g[h]="b[i"+h+"]";f.push("proto.transpose=function "+e+"_transpose("+l+"){"+l.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+k.join(",")+","+g.join(",")+",this.offset)}");f.push("proto.pick=function "+e+"_pick("+l+"){var a=[],b=[],c=this.offset");for(h=0;h<b;++h)f.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+e+"(data,shape,stride,offset){return new "+
e+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",f.join("\n"));return e(u[a],p)}function e(a){if(l(a))return"buffer";if(x)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var q=b("iota-array"),l=b("is-buffer"),x="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in u)u[b].push(a(b,-1))});g.exports=function(b,l,m,h){if(void 0===b){var f=u.array[0];return f([])}"number"===
typeof b&&(b=[b]);void 0===l&&(l=[b.length]);f=l.length;if(void 0===m){m=Array(f);for(var c=f-1,g=1;0<=c;--c)m[c]=g,g*=l[c]}if(void 0===h)for(c=h=0;c<f;++c)0>m[c]&&(h-=(l[c]-1)*m[c]);c=e(b);for(g=u[c];g.length<=f+1;)g.push(a(c,g.length-1));f=g[f+1];return f(b,l,m,h)}},{"iota-array":82,"is-buffer":83}],87:[function(b,g,n){var t=b("double-bits"),p=Math.pow(2,-1074);g.exports=function(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return 0>b?-p:p;var g=t.hi(a),l=t.lo(a);b>a===0<a?4294967295===
l?(g+=1,l=0):l+=1:0===l?(l=4294967295,--g):--l;return t.pack(l,g)}},{"double-bits":70}],88:[function(b,g,n){g.exports=function(a){var b=a.length;if(b<t)for(var g=1,l=0;l<b;++l)for(var n=0;n<l;++n)if(a[l]<a[n])g=-g;else{if(a[l]===a[n])return 0}else{for(var u=p.mallocUint8(b),l=0;l<b;++l)u[l]=0;g=1;for(l=0;l<b;++l)if(!u[l]){var w=1;u[l]=1;for(n=a[l];n!==l;n=a[n]){if(u[n])return p.freeUint8(u),0;w+=1;u[n]=1}w&1||(g=-g)}p.freeUint8(u)}return g};var t=32,p=b("typedarray-pool")},{"typedarray-pool":118}],
89:[function(b,g,n){var t=b("typedarray-pool"),p=b("invert-permutation");n.rank=function(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var g=t.mallocUint32(b),l=t.mallocUint32(b),n=0,u;p(a,l);for(u=0;u<b;++u)g[u]=a[u];for(u=b-1;0<u;--u)b=l[u],a=g[u],g[u]=g[b],g[b]=a,l[u]=l[a],l[a]=b,n=(n+a)*u;t.freeUint32(l);t.freeUint32(g);return n};n.unrank=function(a,b,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(b?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
b?[0,1]:[1,0]}g=g||Array(a);var l,p,n=1;g[0]=0;for(p=1;p<a;++p)g[p]=p,n=n*p|0;for(p=a-1;0<p;--p)a=b/n|0,b=b-a*n|0,n=n/p|0,l=g[p]|0,g[p]=g[a]|0,g[a]=l|0;return g}},{"invert-permutation":81,"typedarray-pool":118}],90:[function(b,g,n){g.exports=function(b,a){function e(a,b){var f=w[b][a[b]];f.splice(f.indexOf(a),1)}function g(c,b,f){var h,m,d;for(m=0;2>m;++m)if(0<w[m][b].length){h=w[m][b][0];d=m;break}m=h[d^1];for(var l=0;2>l;++l)for(var p=w[l][b],q=0;q<p.length;++q){var n=p[q],v=n[l^1];0<t(a[c],a[b],
a[m],a[v])&&(h=n,m=v,d=l)}if(f)return m;h&&e(h,d);return m}function l(c,b){var f=w[b][c][0],h=[c];e(f,b);for(f=f[b^1];;){for(;f!==c;)h.push(f),f=g(h[h.length-2],f,!1);if(0===w[0][c].length+w[1][c].length)break;var f=h[h.length-1],m=c,d=h[1],l=g(f,m,!0);if(0>t(a[f],a[m],a[d],a[l]))break;h.push(c);f=g(f,m)}return h}for(var n=a.length|0,u=b.length,w=[Array(n),Array(n)],v=0;v<n;++v)w[0][v]=[],w[1][v]=[];for(v=0;v<u;++v){var m=b[v];w[0][m[0]].push(m);w[1][m[1]].push(m)}u=[];for(v=0;v<n;++v)0===w[0][v].length+
w[1][v].length&&u.push([v]);for(v=0;v<n;++v)for(m=0;2>m;++m){for(var h=[];0<w[m][v].length;){var f=l(v,m);f[1]===f[f.length-1]?h.push.apply(h,f):(0<h.length&&u.push(h),h=f)}0<h.length&&u.push(h)}return u};var t=b("compare-angle")},{"compare-angle":65}],91:[function(b,g,n){g.exports=function(b,a){for(var e=t(b,a.length),g=Array(a.length),l=Array(a.length),n=[],u=0;u<a.length;++u){var w=e[u].length;l[u]=w;g[u]=!0;1>=w&&n.push(u)}for(;0<n.length;)for(w=n.pop(),g[w]=!1,w=e[w],u=0;u<w.length;++u){var v=
w[u];0===--l[v]&&n.push(v)}e=Array(a.length);l=[];for(u=0;u<a.length;++u)g[u]?(w=l.length,e[u]=w,l.push(a[u])):e[u]=-1;n=[];for(u=0;u<b.length;++u)w=b[u],g[w[0]]&&g[w[1]]&&n.push([e[w[0]],e[w[1]]]);return[n,l]};var t=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":72}],92:[function(b,g,n){function t(a,b){for(var e=Array(a),f=0;f<a;++f)e[f]=b;return e}function p(a){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return b}g.exports=function(b,m){function h(a){for(var b=a.length,c=0;c<b;++c)if(!C[a[c]])return!1;
return!0}var f=w(b,m);b=f[0];m=f[1];for(var c=m.length,g=a(b,m.length),k=0;k<c;++k)if(1===g[k].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var g=e(b,m),g=g.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var f=m[a[d]],e=m[a[(d+1)%b]],h=l(-f[0],f[1]),k=l(-f[0],e[1]),f=l(e[0],f[1]),e=l(e[0],e[1]),c=x(c,x(x(h,k),x(f,e)));return 0<c[c.length-1]}),f=g.length,n=Array(f),F=Array(f),k=0;k<f;++k){n[k]=k;var d=Array(f),y=g[k].map(function(a){return m[a]}),D=q([y]),E=
0,A=0;a:for(;A<f;++A)if(d[A]=0,k!==A){for(var y=g[A],B=y.length,J=0;J<B;++J){var G=D(m[y[J]]);if(0!==G){0>G&&(d[A]=1,E+=1);continue a}}d[A]=1;E+=1}F[k]=[E,k,d]}F.sort(function(a,b){return b[0]-a[0]});for(k=0;k<f;++k)for(d=F[k],y=d[1],B=d[2],A=0;A<f;++A)B[A]&&(n[A]=y);F=p(f);for(k=0;k<f;++k)F[k].push(n[k]),F[n[k]].push(k);for(var d={},C=t(c,!1),k=0;k<f;++k)for(y=g[k],B=y.length,A=0;A<B;++A)c=y[A],D=y[(A+1)%B],E=Math.min(c,D)+":"+Math.max(c,D),E in d?(E=d[E],F[E].push(k),F[k].push(E),C[c]=C[D]=!0):
d[E]=k;A=[];c=t(f,-1);for(k=0;k<f;++k)n[k]!==k||h(g[k])?c[k]=-1:(A.push(k),c[k]=0);for(f=[];0<A.length;){k=A.pop();n=F[k];u(n,function(a,b){return a-b});var B=n.length,d=c[k],N;0===d&&(y=g[k],N=[y]);for(k=0;k<B;++k)y=n[k],0<=c[y]||(c[y]=d^1,A.push(y),0===d&&(y=g[y],h(y)||(y.reverse(),N.push(y))));0===d&&f.push(N)}return f};var a=b("edges-to-adjacency-list"),e=b("planar-dual"),q=b("point-in-big-polygon"),l=b("two-product"),x=b("robust-sum"),u=b("uniq"),w=b("./lib/trim-leaves")},{"./lib/trim-leaves":91,
"edges-to-adjacency-list":72,"planar-dual":90,"point-in-big-polygon":94,"robust-sum":105,"two-product":116,uniq:120}],93:[function(b,g,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],94:[function(b,g,n){function t(){return!0}function p(a){return function(b,c){var e=a[b];return e?!!e.queryPoint(c,t):!1}}function a(a){for(var b={},c=0;c<a.length;++c){var e=a[c],k=e[0][0],m=e[0][1],e=e[1][1],m=[Math.min(m,e),Math.max(m,e)];k in b?b[k].push(m):b[k]=[m]}a={};k=Object.keys(b);for(c=0;c<k.length;++c)a[k[c]]=
v(b[k[c]]);return p(a)}function e(a,b){return function(c){var e=m.le(b,c[0]);if(0>e)return 1;var k=a[e];if(!k)if(0<e&&b[e]===c[0])k=a[e-1];else return 1;for(e=1;k;){var g=k.key,l=u(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>l)k=k.left;else if(0<l)e=-1,k=k.right;else return 0;else if(0<l)k=k.left;else if(0>l)e=1,k=k.right;else return 0}return e}}function q(a){return 1}function l(a){return function(b){return a(b[0],b[1])?0:1}}function x(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}g.exports=function(b){for(var f=
b.length,c=[],m=[],k=0;k<f;++k)for(var g=b[k],p=g.length,d=p-1,n=0;n<p;d=n++){var d=g[d],v=g[n];d[0]===v[0]?m.push([d,v]):c.push([d,v])}if(0===c.length)return 0===m.length?q:l(a(m));b=w(c);b=e(b.slabs,b.coordinates);return 0===m.length?b:x(a(m),b)};var u=b("robust-orientation")[3],w=b("slab-decomposition"),v=b("interval-tree-1d"),m=b("binary-search-bounds")},{"binary-search-bounds":93,"interval-tree-1d":79,"robust-orientation":100,"slab-decomposition":113}],95:[function(b,g,n){var t=b("big-rat/add");
g.exports=function(b,a){for(var e=b.length,g=Array(e),l=0;l<e;++l)g[l]=t(b[l],a[l]);return g}},{"big-rat/add":31}],96:[function(b,g,n){g.exports=function(b){for(var a=Array(b.length),e=0;e<b.length;++e)a[e]=t(b[e]);return a};var t=b("big-rat")},{"big-rat":34}],97:[function(b,g,n){var t=b("big-rat"),p=b("big-rat/mul");g.exports=function(a,b){for(var g=t(b),l=a.length,n=Array(l),u=0;u<l;++u)n[u]=p(a[u],g);return n}},{"big-rat":34,"big-rat/mul":43}],98:[function(b,g,n){var t=b("big-rat/sub");g.exports=
function(b,a){for(var e=b.length,g=Array(e),l=0;l<e;++l)g[l]=t(b[l],a[l]);return g}},{"big-rat/sub":46}],99:[function(b,g,n){function t(a,b){for(var e=Array(a.length-1),h=1;h<a.length;++h)for(var m=e[h-1]=Array(a.length-1),g=0,d=0;g<a.length;++g)g!==b&&(m[d++]=a[h][g]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",p(a.slice(0,b)),",",p(a.slice(b)),")"].join("")}function a(b,c){if("m"===b.charAt(0)){if("w"===
c.charAt(0)){var e=b.split("[");return["w",c.substr(1),"m",e[0].substr(1)].join("")}return["prod(",b,",",c,")"].join("")}return a(c,b)}function e(b){if(2===b.length)return[["diff(",a(b[0][0],b[1][1]),",",a(b[1][0],b[0][1]),")"].join("")];for(var c=[],h=0;h<b.length;++h)c.push(["scale(",p(e(t(b,h))),",",h&1?"-":"",b[0][h],")"].join(""));return c}function q(a,b){for(var e=[],h=0;h<b-2;++h)e.push(["prod(m",a,"[",h,"],m",a,"[",h,"])"].join(""));return p(e)}function l(a){for(var b=[],h=[],k=Array(a),g=
0;g<a;++g){k[g]=Array(a);for(var l=0;l<a;++l)k[g][l]=["m",l,"[",a-g-2,"]"].join("")}for(g=0;g<a;++g)k[0][g]="1",k[a-1][g]="w"+g;for(g=0;g<a;++g)0===(g&1)?b.push.apply(b,e(t(k,g))):h.push.apply(h,e(t(k,g)));b=p(b);h=p(h);k="exactInSphere"+a;l=[];for(g=0;g<a;++g)l.push("m"+g);l=["function ",k,"(",l.join(),"){"];for(g=0;g<a;++g){l.push("var w",g,"=",q(g,a),";");for(var d=0;d<a;++d)d!==g&&l.push("var w",g,"m",d,"=scale(w",g,",m",d,"[0]);")}l.push("var p=",b,",n=",h,",d=diff(p,n);return d[d.length-1];}return ",
k);return(new Function("sum","diff","prod","scale",l.join("")))(w,v,u,m)}function x(a){var b=h[a.length];b||(b=h[a.length]=l(a.length));return b.apply(void 0,a)}var u=b("two-product"),w=b("robust-sum"),v=b("robust-subtract"),m=b("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],b=["slow"],e=0;6>=e;++e)a.push("a"+e),b.push("o"+e);for(var k=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
e=2;6>=e;++e)k.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");b.push(k.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[x].concat(h));for(e=0;6>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":102,"robust-subtract":104,"robust-sum":105,"two-product":116}],100:[function(b,g,n){function t(a,b){for(var e=Array(a.length-1),h=1;h<a.length;++h)for(var g=
e[h-1]=Array(a.length-1),m=0,d=0;m<a.length;++m)m!==b&&(g[d++]=a[h][m]);return e}function p(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",p(a.slice(0,b)),",",p(a.slice(b)),")"].join("")}function a(b){if(2===b.length)return[["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("")];for(var c=[],e=0;e<b.length;++e)c.push(["scale(",p(a(t(b,e))),",",e&1?"-":"",b[0][e],")"].join(""));return c}function e(b){for(var c=
[],e=[],h=Array(b),g=0;g<b;++g){h[g]=Array(b);for(var m=0;m<b;++m)h[g][m]=["m",m,"[",b-g-1,"]"].join("")}g=[];for(m=0;m<b;++m)0===(m&1)?c.push.apply(c,a(t(h,m))):e.push.apply(e,a(t(h,m))),g.push("m"+m);c=p(c);e=p(e);b="orientation"+b+"Exact";b=["function ",b,"(",g.join(),"){var p=",c,",n=",e,",d=sub(p,n);return d[d.length-1];};return ",b].join("");return(new Function("sum","prod","scale","sub",b))(x,l,u,w)}function q(a){var b=h[a.length];b||(b=h[a.length]=e(a.length));return b.apply(void 0,a)}var l=
b("two-product"),x=b("robust-sum"),u=b("robust-scale"),w=b("robust-subtract"),v=e(3),m=e(4),h=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,e){var h=(a[1]-e[1])*(b[0]-e[0]),g=(a[0]-e[0])*(b[1]-e[1]),m=h-g;if(0<h){if(0>=g)return m;h+=g}else if(0>h){if(0<=g)return m;h=-(h+g)}else return m;h*=3.3306690738754716E-16;return m>=h||m<=-h?m:v(a,b,e)},function(a,b,e,h){var g=a[0]-h[0],l=b[0]-h[0],d=e[0]-h[0],p=a[1]-h[1],q=b[1]-h[1],n=e[1]-h[1],v=a[2]-h[2],t=b[2]-h[2],
u=e[2]-h[2],w=l*n,x=d*q,d=d*p,n=g*n,g=g*q,p=l*p,l=v*(w-x)+t*(d-n)+u*(g-p),v=7.771561172376103E-16*((Math.abs(w)+Math.abs(x))*Math.abs(v)+(Math.abs(d)+Math.abs(n))*Math.abs(t)+(Math.abs(g)+Math.abs(p))*Math.abs(u));return l>v||-l>v?l:m(a,b,e,h)}];(function(){for(;5>=h.length;)h.push(e(h.length));for(var a=[],b=["slow"],m=0;5>=m;++m)a.push("a"+m),b.push("o"+m);for(var k=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],m=2;5>=m;++m)k.push("case ",m,":return o",
m,"(",a.slice(0,m).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");b.push(k.join(""));a=Function.apply(void 0,b);g.exports=a.apply(void 0,[q].concat(h));for(m=0;5>=m;++m)g.exports[m]=h[m]})()},{"robust-scale":102,"robust-subtract":104,"robust-sum":105,"two-product":116}],101:[function(b,g,n){var t=b("robust-sum"),p=b("robust-scale");g.exports=function(a,b){if(1===a.length)return p(b,a[0]);if(1===
b.length)return p(a,b[0]);if(0===a.length||0===b.length)return[0];var g=[0];if(a.length<b.length)for(var l=0;l<a.length;++l)g=t(g,p(b,a[l]));else for(l=0;l<b.length;++l)g=t(g,p(a,b[l]));return g}},{"robust-scale":102,"robust-sum":105}],102:[function(b,g,n){var t=b("two-product"),p=b("two-sum");g.exports=function(a,b){var g=a.length;if(1===g)return g=t(a[0],b),g[0]?g:[g[1]];var l=Array(2*g),n=[.1,.1],u=[.1,.1],w=0;t(a[0],b,n);n[0]&&(l[w++]=n[0]);for(var v=1;v<g;++v){t(a[v],b,u);p(n[1],u[0],n);n[0]&&
(l[w++]=n[0]);var m=u[1],h=n[1],f=m+h,m=h-(f-m);n[1]=f;m&&(l[w++]=m)}n[1]&&(l[w++]=n[1]);0===w&&(l[w++]=0);l.length=w;return l}},{"two-product":116,"two-sum":117}],103:[function(b,g,n){g.exports=function(b,a,e,g){var l=t(b,e,g),n=t(a,e,g);if(0<l&&0<n||0>l&&0>n)return!1;var u=t(e,b,a),w=t(g,b,a);if(0<u&&0<w||0>u&&0>w)return!1;if(0===l&&0===n&&0===u&&0===w){a:{for(l=0;2>l;++l){var n=b[l],u=a[l],w=Math.max(n,u),v=e[l],m=g[l],h=Math.min(v,m);if(Math.max(v,m)<Math.min(n,u)||w<h){b=!1;break a}}b=!0}return b}return!0};
var t=b("robust-orientation")[3]},{"robust-orientation":100}],104:[function(b,g,n){g.exports=function(b,g){var a=b.length|0,e=g.length|0;if(1===a&&1===e){var e=b[0],n=-g[0],a=e+n,l=a-e,a=(e=e-(a-l)+(n-l))?[e,a]:[a];return a}var n=Array(a+e),x=l=0,u=0,w=Math.abs,v=b[x],m=w(v),h=-g[u],f=w(h),c,r;m<f?(r=v,x+=1,x<a&&(v=b[x],m=w(v))):(r=h,u+=1,u<e&&(h=-g[u],f=w(h)));x<a&&m<f||u>=e?(c=v,x+=1,x<a&&(v=b[x],m=w(v))):(c=h,u+=1,u<e&&(h=-g[u],f=w(h)));var k=c+r;r-=k-c;for(var z=k,F;x<a&&u<e;)m<f?(c=v,x+=1,x<
a&&(v=b[x],m=w(v))):(c=h,u+=1,u<e&&(h=-g[u],f=w(h))),k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c;for(;x<a;)c=v,k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c,x+=1,x<a&&(v=b[x]);for(;u<e;)c=h,k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c,u+=1,u<e&&(h=-g[u]);r&&(n[l++]=r);z&&(n[l++]=z);l||(n[l++]=0);n.length=l;return n}},{}],105:[function(b,g,n){g.exports=function(b,g){var a=b.length|0,e=g.length|0;if(1===a&&1===e){var e=b[0],
n=g[0],a=e+n,l=a-e,a=(e=e-(a-l)+(n-l))?[e,a]:[a];return a}var n=Array(a+e),x=l=0,u=0,w=Math.abs,v=b[x],m=w(v),h=g[u],f=w(h),c,r;m<f?(r=v,x+=1,x<a&&(v=b[x],m=w(v))):(r=h,u+=1,u<e&&(h=g[u],f=w(h)));x<a&&m<f||u>=e?(c=v,x+=1,x<a&&(v=b[x],m=w(v))):(c=h,u+=1,u<e&&(h=g[u],f=w(h)));var k=c+r;r-=k-c;for(var z=k,F;x<a&&u<e;)m<f?(c=v,x+=1,x<a&&(v=b[x],m=w(v))):(c=h,u+=1,u<e&&(h=g[u],f=w(h))),k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c;for(;x<a;)c=v,k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=
z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c,x+=1,x<a&&(v=b[x]);for(;u<e;)c=h,k=c+r,c=k-c,(c=r-c)&&(n[l++]=c),c=z+k,F=c-z,r=c-F,k-=F,z-=r,r=z+k,z=c,u+=1,u<e&&(h=g[u]);r&&(n[l++]=r);z&&(n[l++]=z);l||(n[l++]=0);n.length=l;return n}},{}],106:[function(b,g,n){g.exports=function(b){return 0>b?-1:0<b?1:0}},{}],107:[function(b,g,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],108:[function(b,g,n){function t(b){this.roots=Array(b);this.ranks=Array(b);for(var a=0;a<b;++a)this.roots[a]=a,this.ranks[a]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};t.prototype.find=function(b){for(var a=this.roots;a[b]!==b;){var e=a[b];a[b]=a[e];b=e}return b};t.prototype.link=function(b,a){var e=this.find(b),g=this.find(a);if(e!==g){var l=this.ranks,n=this.roots,t=l[e],w=l[g];t<w?n[e]=g:w<t?n[g]=e:(n[g]=e,++l[e])}}},{}],109:[function(b,g,n){function t(a,b){var e=a.length,f=a.length-b.length,
c=Math.min;if(f)return f;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:c(a[0],a[1])-c(b[0],b[1]);case 3:var f=a[0]+a[1],g=b[0]+b[1];if(e=f+a[2]-(g+b[2]))return e;var k=c(a[0],a[1]),l=c(b[0],b[1]);return(e=c(k,a[2])-c(l,b[2]))?e:c(k+a[2],f)-c(l+b[2],g);default:c=a.slice(0);c.sort();g=b.slice(0);g.sort();for(k=0;k<e;++k)if(f=c[k]-g[k])return f;return 0}}function p(a,b){return t(a[0],b[0])}function a(a,b){if(b){for(var e=a.length,f=Array(e),c=0;c<e;++c)f[c]=
[a[c],b[c]];f.sort(p);for(c=0;c<e;++c)a[c]=f[c][0],b[c]=f[c][1]}else a.sort(t);return a}function e(a){if(0===a.length)return[];for(var b=1,e=a.length,f=1;f<e;++f){var c=a[f];t(c,a[f-1])&&(f===b?b++:a[b++]=c)}a.length=b;return a}function q(a,b){for(var e=0,f=a.length-1,c=-1;e<=f;){var g=e+f>>1,k=t(a[g],b);0>=k?(0===k&&(c=g),e=g+1):0<k&&(f=g-1)}return c}function l(a,b){for(var e=Array(a.length),f=0,c=e.length;f<c;++f)e[f]=[];for(var c=[],f=0,g=b.length;f<g;++f)for(var k=b[f],l=k.length,n=1,d=1<<l;n<
d;++n){c.length=u.popCount(n);for(var p=0,w=0;w<l;++w)n&1<<w&&(c[p++]=k[w]);p=q(a,c);if(!(0>p))for(;!(e[p++].push(f),p>=a.length||0!==t(a[p],c)););}return e}function x(b,e){if(0>e)return[];for(var h=[],f=(1<<e+1)-1,c=0;c<b.length;++c)for(var g=b[c],k=f;k<1<<g.length;k=u.nextCombination(k)){for(var l=Array(e+1),n=0,d=0;d<g.length;++d)k&1<<d&&(l[n++]=g[d]);h.push(l)}return a(h)}"use restrict";var u=b("bit-twiddle"),w=b("union-find");n.dimension=function(a){for(var b=0,e=Math.max,f=0,c=a.length;f<c;++f)b=
e(b,a[f].length);return b-1};n.countVertices=function(a){for(var b=-1,e=Math.max,f=0,c=a.length;f<c;++f)for(var g=a[f],k=0,l=g.length;k<l;++k)b=e(b,g[k]);return b+1};n.cloneCells=function(a){for(var b=Array(a.length),e=0,f=a.length;e<f;++e)b[e]=a[e].slice(0);return b};n.compareCells=t;n.normalize=a;n.unique=e;n.findCell=q;n.incidence=l;n.dual=function(a,b){if(!b)return l(e(x(a,0)),a,0);for(var h=Array(b),f=0;f<b;++f)h[f]=[];for(var f=0,c=a.length;f<c;++f)for(var g=a[f],k=0,n=g.length;k<n;++k)h[g[k]].push(f);
return h};n.explode=function(b){for(var e=[],h=0,f=b.length;h<f;++h)for(var c=b[h],g=c.length|0,k=1,l=1<<g;k<l;++k){for(var n=[],d=0;d<g;++d)k>>>d&1&&n.push(c[d]);e.push(n)}return a(e)};n.skeleton=x;n.boundary=function(b){for(var e=[],h=0,f=b.length;h<f;++h)for(var c=b[h],g=0,k=c.length;g<k;++g){for(var l=Array(c.length-1),n=0,d=0;n<k;++n)n!==g&&(l[d++]=c[n]);e.push(l)}return a(e)};n.connectedComponents=function(b,g){if(g){for(var h=new w(g),f=0;f<b.length;++f)for(var c=b[f],l=0;l<c.length;++l)for(var k=
l+1;k<c.length;++k)h.link(c[l],c[k]);c=[];l=h.ranks;for(f=0;f<l.length;++f)l[f]=-1;for(f=0;f<b.length;++f)k=h.find(b[f][0]),0>l[k]?(l[k]=c.length,c.push([b[f].slice(0)])):c[l[k]].push(b[f].slice(0));return c}h=e(a(x(b,0)));f=new w(h.length);for(c=0;c<b.length;++c)for(l=b[c],k=0;k<l.length;++k)for(var n=q(h,[l[k]]),p=k+1;p<l.length;++p)f.link(n,q(h,[l[p]]));l=[];k=f.ranks;for(c=0;c<k.length;++c)k[c]=-1;for(c=0;c<b.length;++c)n=f.find(q(h,[b[c][0]])),0>k[n]?(k[n]=l.length,l.push([b[c].slice(0)])):l[k[n]].push(b[c].slice(0));
return l}},{"bit-twiddle":107,"union-find":108}],110:[function(b,g,n){g.exports=function(a,b,g){function l(a){if(d[a])return Infinity;var c=k[a],f=z[a];if(0>c||0>f)return Infinity;c=b[c];f=b[f];return Math.abs(t(b[a],c,f))/Math.sqrt(Math.pow(c[0]-f[0],2)+Math.pow(c[1]-f[1],2))}function n(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function u(a){for(var b=F[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<J){var h=F[A[d]];h<c&&(f=d,c=h)}e<J&&F[A[e]]<c&&(f=e);if(f===a)return a;n(a,f);a=f}}function w(a){for(var b=
F[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<F[A[c]])n(a,c),a=c;else return a}}function v(){if(0<J){var a=A[0];n(0,J-1);--J;u(0);return a}return-1}function m(a,b){var c=A[a];if(F[c]===b)return a;F[c]=-Infinity;w(a);v();F[c]=b;J+=1;return w(J-1)}function h(a){if(!d[a]){d[a]=!0;var b=k[a];a=z[a];0<=k[a]&&(k[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&m(B[b],l(b));0<=B[a]&&m(B[a],l(a))}}function f(a,b){if(0>a[b])return b;var c=b,e=b;do{var f=a[e];if(!d[e]||0>f||f===e)break;e=f;f=a[e];if(!d[e]||0>f||f===
e)break;e=f;c=a[c]}while(c!==e);for(c=b;c!==e;c=a[c])a[c]=e;return e}for(var c=b.length,r=a.length,k=Array(c),z=Array(c),F=Array(c),d=Array(c),y=0;y<c;++y)k[y]=z[y]=-1,F[y]=Infinity,d[y]=!1;for(y=0;y<r;++y){var D=a[y];if(2!==D.length)throw Error("Input must be a graph");var E=D[1],D=D[0];z[D]=-1!==z[D]?-2:E;k[E]=-1!==k[E]?-2:D}for(var A=[],B=Array(c),y=0;y<c;++y)Infinity>(F[y]=l(y))?(B[y]=A.length,A.push(y)):B[y]=-1;for(var J=A.length,y=J>>1;0<=y;--y)u(y);for(;;){y=v();if(0>y||F[y]>g)break;h(y)}g=
[];for(y=0;y<c;++y)d[y]||(B[y]=g.length,g.push(b[y].slice()));var G=[];a.forEach(function(a){var b=f(k,a[0]);a=f(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&G.push([b,a]))});p.unique(p.normalize(G));return{positions:g,edges:G}};var t=b("robust-orientation"),p=b("simplicial-complex")},{"robust-orientation":100,"simplicial-complex":109}],111:[function(b,g,n){function t(a,b){var g,l;if(b[0][0]<b[1][0])g=b[0],l=b[1];else if(b[0][0]>b[1][0])g=b[1],l=b[0];else{g=Math.min(a[0][1],a[1][1]);l=Math.max(a[0][1],
a[1][1]);var n=Math.min(b[0][1],b[1][1]),t=Math.max(b[0][1],b[1][1]);return l<n?l-n:g>t?g-t:l-t}a[0][1]<a[1][1]?(t=a[0],n=a[1]):(t=a[1],n=a[0]);return(t=p(l,g,t))?t:(t=p(l,g,n))?t:n-l}g.exports=function(a,b){var g,l;if(b[0][0]<b[1][0])g=b[0],l=b[1];else if(b[0][0]>b[1][0])g=b[1],l=b[0];else return t(b,a);var n,u;if(a[0][0]<a[1][0])n=a[0],u=a[1];else if(a[0][0]>a[1][0])n=a[1],u=a[0];else return-t(a,b);var w=p(g,l,u),v=p(g,l,n);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;
w=p(u,n,l);v=p(u,n,g);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;return l[0]-u[0]};var p=b("robust-orientation")},{"robust-orientation":100}],112:[function(b,g,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],113:[function(b,g,n){function t(a,b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function p(a,b){return a.y-b}function a(b,e){for(var h=null;b;){var f=b.key,c,g;f[0][0]<f[1][0]?(c=f[0],g=f[1]):(c=f[1],g=f[0]);c=u(c,g,e);if(0>c)b=b.left;else if(0<c)if(e[0]!==
f[1][0])h=b,b=b.right;else{if(f=a(b.right,e))return f;b=b.left}else{if(e[0]!==f[1][0])return b;if(f=a(b.right,e))return f;b=b.left}}return h}function e(a,b,e,f){this.y=a;this.index=b;this.start=e;this.closed=f}function q(a,b,e,f){this.x=a;this.segment=b;this.create=e;this.index=f}g.exports=function(a){for(var b=a.length,h=2*b,f=Array(h),c=0;c<b;++c){var g=a[c],k=g[0][0]<g[1][0];f[2*c]=new q(g[0][0],g,k,c);f[2*c+1]=new q(g[1][0],g,!k,c)}f.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=x(w);b=[];g=[];k=[];for(c=0;c<h;){for(var l=f[c].x,n=[];c<h;){var d=f[c];if(d.x!==l)break;c+=1;d.segment[0][0]===d.x&&d.segment[1][0]===d.x?d.create&&(d.segment[0][1]<d.segment[1][1]?(n.push(new e(d.segment[0][1],d.index,!0,!0)),n.push(new e(d.segment[1][1],d.index,!1,!1))):(n.push(new e(d.segment[1][1],d.index,!0,!1)),n.push(new e(d.segment[0][1],d.index,!1,!0)))):a=d.create?a.insert(d.segment,d.index):a.remove(d.segment)}b.push(a.root);
g.push(l);k.push(n)}return new t(b,g,k)};var l=b("binary-search-bounds"),x=b("functional-red-black-tree"),u=b("robust-orientation"),w=b("./lib/order-segments");t.prototype.castUp=function(b){var e=l.le(this.coordinates,b[0]);if(0>e)return-1;var h=a(this.slabs[e],b),f=-1;h&&(f=h.value);if(this.coordinates[e]===b[0]){var c=null;h&&(c=h.key);0<e&&(h=a(this.slabs[e-1],b))&&(c?0<w(h.key,c)&&(c=h.key,f=h.value):(f=h.value,c=h.key));h=this.horizontal[e];if(0<h.length){var g=l.ge(h,b[1],p);if(g<h.length){e=
h[g];if(b[1]===e.y){if(e.closed)return e.index;for(;g<h.length-1&&h[g+1].y===b[1];)if(g+=1,e=h[g],e.closed)return e.index;if(e.y===b[1]&&!e.start){g+=1;if(g>=h.length)return f;e=h[g]}}e.start?c?(b=u(c[0],c[1],[b[0],e.y]),c[0][0]>c[1][0]&&(b=-b),0<b&&(f=e.index)):f=e.index:e.y!==b[1]&&(f=e.index)}}}return f}},{"./lib/order-segments":111,"binary-search-bounds":112,"functional-red-black-tree":73,"robust-orientation":100}],114:[function(b,g,n){function t(b,e){var g=b.length,n=["'use strict';"],q="surfaceNets"+
b.join("_")+"d"+e;n.push("var contour=genContour({","order:[",b.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===e&&n.push("getters:[0],");for(var m=[],h=[],f=0;f<g;++f)m.push("d"+f),h.push("d"+f);for(f=0;f<1<<g;++f)m.push("v"+f),h.push("v"+f);for(f=0;f<1<<g;++f)m.push("p"+f),h.push("p"+f);m.push("a","b","c");h.push("a","c");n.push("vertex:function vertexFunc(",m.join(),"){");m=[];for(f=0;f<1<<g;++f)m.push("(p"+f+"<<"+f+")");n.push("var m=(",
m.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var m=[],c=[];128>=1<<(1<<g)?(n.push("switch(m){"),c=n):n.push("switch(m>>>7){");for(f=0;f<1<<(1<<g);++f){128<1<<(1<<g)&&0===f%128&&(0<m.length&&c.push("}}"),c="vExtra"+m.length,n.push("case ",f>>>7,":",c,"(m&0x7f,",h.join(),");break;"),c=["function ",c,"(m,",h.join(),"){switch(m){"],m.push(c));c.push("case ",f&127,":");for(var r=Array(g),k=Array(g),t=Array(g),F=Array(g),d=0,y=0;y<g;++y)r[y]=[],k[y]=[],t[y]=0,F[y]=0;for(y=0;y<1<<g;++y)for(var D=
0;D<g;++D){var E=y^1<<D;if(!(E>y)&&!(f&1<<E)!==!(f&1<<y)){var A=1;f&1<<E?k[D].push("v"+E+"-v"+y):(k[D].push("v"+y+"-v"+E),A=-A);0>A?(r[D].push("-v"+y+"-v"+E),t[D]+=2):(r[D].push("v"+y+"+v"+E),t[D]-=2);d+=1;for(A=0;A<g;++A)A!==D&&(E&1<<A?F[A]+=1:--F[A])}}y=[];for(D=0;D<g;++D)0===r[D].length?y.push("d"+D+"-0.5"):(E="",0>t[D]?E=t[D]+"*c":0<t[D]&&(E="+"+t[D]+"*c"),y.push("d"+D+"-"+(.5+F[D]/d*.5)+"-"+r[D].length/d*.5+"*("+r[D].join("+")+E+")/("+k[D].join("+")+")"));c.push("a.push([",y.join(),"]);","break;")}n.push("}},");
0<m.length&&c.push("}}");h=[];for(f=0;f<1<<g-1;++f)h.push("v"+f);h.push("c0","c1","p0","p1","a","b","c");n.push("cell:function cellFunc(",h.join(),"){");g=a(g-1);n.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",q,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
q,";");for(f=0;f<m.length;++f)n.push(m[f].join(""));return(new Function("genContour",n.join("")))(p)}g.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=e(a,b),n=g.length,p=Array(n),m=Array(n),h=0;h<n;++h)p[h]=[g[h]],m[h]=[h];return{positions:p,cells:m}}g=a.order.join()+"-"+a.dtype;n=q[g];b=+b||0;n||(n=q[g]=t(a.order,a.dtype));return n(a,b)};var p=b("ndarray-extract-contour"),a=b("triangulate-hypercube"),e=b("zero-crossings"),q={}},{"ndarray-extract-contour":85,
"triangulate-hypercube":115,"zero-crossings":124}],115:[function(b,g,n){g.exports=function(b){if(0>b)return[];if(0===b)return[[0]];for(var g=Math.round(a(b+1))|0,l=[],n=0;n<g;++n){for(var u=t.unrank(b,n),w=[0],v=0,m=0;m<u.length;++m)v+=1<<u[m],w.push(v);1>p(u)&&(w[0]=v,w[b]=0);l.push(w)}return l};var t=b("permutation-rank"),p=b("permutation-parity"),a=b("gamma")},{gamma:74,"permutation-parity":88,"permutation-rank":89}],116:[function(b,g,n){g.exports=function(b,a,e){var g=b*a,l=t*b,l=l-(l-b);b-=l;
var n=t*a,n=n-(n-a);a-=n;a=b*a-(g-l*n-b*n-l*a);return e?(e[0]=a,e[1]=g,e):[a,g]};var t=+(Math.pow(2,27)+1)},{}],117:[function(b,g,n){g.exports=function(b,g,a){var e=b+g,n=e-b;g-=n;b-=e-n;return a?(a[0]=b+g,a[1]=e,a):[b+g,e]}},{}],118:[function(b,g,n){(function(g,p){function a(a){if(a){var b=k.log2(a.length||a.byteLength);y[b].push(a)}}function e(a){a=k.nextPow2(a);var b=k.log2(a),b=y[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function q(a){return new Uint8Array(e(a),0,a)}function l(a){return new Uint16Array(e(2*
a),0,a)}function x(a){return new Uint32Array(e(4*a),0,a)}function u(a){return new Int8Array(e(a),0,a)}function w(a){return new Int16Array(e(2*a),0,a)}function v(a){return new Int32Array(e(4*a),0,a)}function m(a){return new Float32Array(e(4*a),0,a)}function h(a){return new Float64Array(e(8*a),0,a)}function f(a){return F?new Uint8ClampedArray(e(a),0,a):q(a)}function c(a){return new DataView(e(a),0,a)}function r(a){a=k.nextPow2(a);var b=k.log2(a),b=D[b];return 0<b.length?b.pop():new p(a)}var k=b("bit-twiddle"),
z=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var F="undefined"!==typeof Uint8ClampedArray,d=g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=z([32,0]));d.BUFFER||(d.BUFFER=z([32,0]));var y=d.DATA,D=d.BUFFER;n.free=function(a){if(p.isBuffer(a))D[k.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=k.log2(a.length||a.byteLength)|0;y[b].push(a)}};n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(b){a(b.buffer)};n.freeArrayBuffer=a;n.freeBuffer=function(a){D[k.log2(a.length)].push(a)};n.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return e(a);switch(b){case "uint8":return q(a);case "uint16":return l(a);case "uint32":return x(a);case "int8":return u(a);
case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return m(a);case "double":case "float64":return h(a);case "uint8_clamped":return f(a);case "buffer":return r(a);case "data":case "dataview":return c(a);default:return null}};n.mallocArrayBuffer=e;n.mallocUint8=q;n.mallocUint16=l;n.mallocUint32=x;n.mallocInt8=u;n.mallocInt16=w;n.mallocInt32=v;n.mallocFloat32=n.mallocFloat=m;n.mallocFloat64=n.mallocDouble=h;n.mallocUint8Clamped=f;n.mallocDataView=c;n.mallocBuffer=r;n.clearCache=
function(){for(var a=0;32>a;++a)d.UINT8[a].length=0,d.UINT16[a].length=0,d.UINT32[a].length=0,d.INT8[a].length=0,d.INT16[a].length=0,d.INT32[a].length=0,d.FLOAT[a].length=0,d.DOUBLE[a].length=0,d.UINT8C[a].length=0,y[a].length=0,D[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":49,buffer:57,dup:71}],119:[function(b,g,n){function t(b){this.roots=Array(b);this.ranks=Array(b);for(var a=
0;a<b;++a)this.roots[a]=a,this.ranks[a]=0}"use restrict";g.exports=t;b=t.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};b.find=function(b){for(var a=b,e=this.roots;e[b]!==b;)b=e[b];for(;e[a]!==b;){var g=e[a];e[a]=b;a=g}return b};b.link=function(b,a){var e=this.find(b),g=this.find(a);if(e!==g){var l=this.ranks,n=this.roots,t=l[e],w=l[g];t<w?n[e]=g:w<t?n[g]=e:(n[g]=e,
++l[e])}}},{}],120:[function(b,g,n){g.exports=function(b,g,a){if(0===b.length)return b;if(g){a||b.sort(g);a=1;for(var e=b.length,n=b[0],l=b[0],x=1;x<e;++x)l=n,n=b[x],g(n,l)&&(x===a?a++:b[a++]=n);b.length=a;return b}a||b.sort();g=1;a=b.length;e=b[0];n=b[0];for(l=1;l<a;++l)n=e,e=b[l],e!==n&&(l===g?g++:b[g++]=e);b.length=g;return b}},{}],121:[function(b,g,n){g.exports=function(b,g){if("object"!==typeof g||null===g)g={};return t(b,g.canvas||p,g.context||a,g)};var t=b("./lib/vtext"),p=null,a=null;"undefined"!==
typeof document&&(p=document.createElement("canvas"),p.width=8192,p.height=1024,a=p.getContext("2d"))},{"./lib/vtext":122}],122:[function(b,g,n){function t(a,b,e){for(var f=b.textAlign||"start",c=b.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],l=a.length,n=0;n<l;++n)for(var d=a[n],p=0;2>p;++p)g[p]=Math.min(g[p],d[p])|0,k[p]=Math.max(k[p],d[p])|0;var q=0;switch(f){case "center":q=-.5*(g[0]+k[0]);break;case "right":case "end":q=-k[0];break;case "left":case "start":q=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
f+"'");}var t=0;switch(c){case "hanging":case "top":t=-g[1];break;case "middle":t=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":t=-3*e;break;case "bottom":t=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+c+"'");}var u=1/e;"lineHeight"in b?u*=+b.lineHeight:"width"in b?u=b.width/(k[0]-g[0]):"height"in b&&(u=b.height/(k[1]-g[1]));return a.map(function(a){return[u*(a[0]+q),u*(a[1]+t)]})}function p(a,b,g,f){a=e(a,128);f=f?l(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(f.positions,b,g);a=f.edges;f="ccw"===b.orientation;x(g,a);if(b.polygons||b.polygon||b.polyline){b=w(a,g);a=Array(b.length);for(var c=0;c<b.length;++c){for(var n=b[c],k=Array(n.length),p=0;p<n.length;++p){for(var q=n[p],d=Array(q.length),y=0;y<q.length;++y)d[y]=g[q[y]].slice();f&&d.reverse();k[p]=d}a[c]=k}return a}return b.triangles||b.triangulate||b.triangle?{cells:u(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function a(a,b,e){try{return p(a,
b,e,!0)}catch(f){}try{return p(a,b,e,!1)}catch(f){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(b,e,g,f){var c=f.size||64;g.font=c+"px "+(f.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var l;l=Math.ceil(g.measureText(b).width+2*c)|0;if(8192<l)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var k=3*c;e.height<k&&(e.height=k);
g.fillStyle="#000";g.fillRect(0,0,e.width,e.height);g.fillStyle="#fff";g.fillText(b,c,2*c);b=g.getImageData(0,0,l,k);l=q(b.data,[k,l,4]).pick(-1,-1,0).transpose(1,0);return a(l,f,c)};g.exports.processPixels=a;var e=b("surface-nets"),q=b("ndarray"),l=b("simplify-planar-graph"),x=b("clean-pslg"),u=b("cdt2d"),w=b("planar-graph-to-polyline")},{cdt2d:58,"clean-pslg":63,ndarray:86,"planar-graph-to-polyline":92,"simplify-planar-graph":110,"surface-nets":114}],123:[function(b,g,n){g.exports=b("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":67}],124:[function(b,g,n){g.exports=function(b,a){var e=[];a=+a||0;t(b.hi(b.shape[0]-1),e,a);return e};var t=b("./lib/zc-core")},{"./lib/zc-core":123}],125:[function(b,
g,n){var t=b("./lib/util/extend"),p=b("./lib/dynamic"),a=b("./lib/util/raf"),e=b("./lib/util/clock"),q=b("./lib/strings"),l=b("./lib/webgl"),x=b("./lib/extension"),u=b("./lib/limits"),w=b("./lib/buffer"),v=b("./lib/elements"),m=b("./lib/texture"),h=b("./lib/renderbuffer"),f=b("./lib/framebuffer"),c=b("./lib/attribute"),r=b("./lib/shader"),k=b("./lib/read"),z=b("./lib/core");g.exports=function(){function b(){Z=a.next(b);I.count+=1;var c=U.viewport,d=U.scissor_box;c[0]=c[1]=d[0]=d[1]=0;I.viewportWidth=
I.frameBufferWidth=I.drawingBufferWidth=c[2]=d[2]=J.drawingBufferWidth;I.viewportHeight=I.frameBufferWidth=I.drawingBufferHeight=c[3]=d[3]=J.drawingBufferHeight;c=e();I.deltaTime=(c-L)/1E3;I.time=(c-M)/1E3;L=c;R.procs.refresh();W.poll();for(c=0;c<Q.length;++c)(0,Q[c])(I,null,0)}function d(){Z&&(a.cancel(b),Z=0)}function g(a){d();a.preventDefault();if(G.onContextLost)G.onContextLost()}function n(a){J.getError();C.refresh();R.procs.refresh();K.refresh();W.refresh();X.refresh();S.refresh();V.refresh();
if(G.onContextRestored)G.onContextRestored();b()}function E(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];p.isDynamic(e)?d[b]=p.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;l.length<a;)l.push(null);return l}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;delete c.attributes;delete c.context;
b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var d=R.compile(a,f,e,d),g=d.draw,h=d.batch,k=d.scope,l=[];return function(a,b){var d;if("function"===typeof a)return k.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)k.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)k.call(this,a[d],b,d);else return k.call(this,a,b,0);else if("number"===typeof a){if(0<a)return h.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return h.call(this,
a,a.length)}else return g.call(this,a)}}function A(){R.procs.poll()}var B=l(Array.prototype.slice.call(arguments)),J=B.gl,G=B.options,B=q(),C=x(J),N=C.extensions,M=e(),L=M,P=J.drawingBufferWidth,H=J.drawingBufferHeight,I={count:0,deltaTime:0,time:0,viewportWidth:P,viewportHeight:H,framebufferWidth:P,framebufferHeight:H,drawingBufferWidth:P,drawingBufferHeight:H,pixelRatio:G.pixelRatio},P=u(J,N),K=w(J),O=v(J,N,K),H=c(J,N,P,K,B),V=r(J,B),W=m(J,N,P,A,I),X=h(J,N,P),S=f(J,N,P,W,X),Y=k(J,A,I),R=z(J,B,N,
P,K,O,W,S,{},H,V,{elements:null,primitive:4,count:-1,offset:0,instances:-1},I),U=R.next,T=J.canvas,Q=[],Z=0;T&&(T.addEventListener("webglcontextlost",g,!1),T.addEventListener("webglcontextrestored",n,!1));R.procs.refresh();return t(E,{clear:function(a){var b=0;A();var c=a.color;c&&(J.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(J.clearDepth(+a.depth),b|=256);"stencil"in a&&(J.clearStencil(a.stencil|0),b|=1024);J.clear(b)},prop:p.define.bind(null,1),context:p.define.bind(null,
2),"this":p.define.bind(null,3),draw:E({}),elements:function(a){return O.create(a)},buffer:function(a){return K.create(a,34962)},texture:function(a){return W.create(a,3553)},cube:function(a){return 6===arguments.length?W.create(Array.prototype.slice.call(arguments),34067):W.create(a,34067)},renderbuffer:function(a){return X.create(a)},framebuffer:function(a){return S.create(a)},framebufferCube:function(a){},attributes:J.getContextAttributes(),frame:function(a){Q.push(a);!Z&&0<Q.length&&b();return{cancel:function(){var b=
Q.find(function(b){return b===a});0>b||(Q.splice(b,1),0>=Q.length&&d())}}},limits:P,read:Y,destroy:function(){d();T&&(T.removeEventListener("webglcontextlost",g),T.removeEventListener("webglcontextrestored",n));V.clear();S.clear();X.clear();W.clear();K.clear();if(G.onDestroy)G.onDestroy()},_gl:J,_refresh:function(){R.procs.refresh()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":7,"./lib/dynamic":8,"./lib/elements":9,"./lib/extension":10,"./lib/framebuffer":11,"./lib/limits":12,"./lib/read":13,
"./lib/renderbuffer":14,"./lib/shader":15,"./lib/strings":16,"./lib/texture":17,"./lib/util/clock":18,"./lib/util/extend":20,"./lib/util/raf":26,"./lib/webgl":29}]},{},[1]);
