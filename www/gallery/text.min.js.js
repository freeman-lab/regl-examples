var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==b.length?{done:!0}:{done:!1,value:b[g++]}}}};
$jscomp.arrayFromIterator=function(b){for(var g,k=[];!(g=b.next()).done;)k.push(g.value);return k};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,g){function k(){}k.prototype=g.prototype;b.prototype=new k;b.prototype.constructor=b;for(var v in g)if($jscomp.global.Object.defineProperties){var n=$jscomp.global.Object.getOwnPropertyDescriptor(g,v);n&&$jscomp.global.Object.defineProperty(b,v,n)}else b[v]=g[v]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,g){b instanceof String&&(b=String(b));var k=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var v={},n=(v.next=function(){if(k<b.length){var e=k++;return{value:g(e,b[e]),done:!1}}n.next=$jscomp.array.done_;return $jscomp.array.done_()},v[Symbol.iterator]=function(){return n},v);return n};
$jscomp.array.findInternal_=function(b,g,k){b instanceof String&&(b=String(b));for(var v=b.length,n=0;n<v;n++){var e=b[n];if(g.call(k,e,n,b))return{i:n,v:e}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,g,k){g=void 0===g?function(a){return a}:g;var v=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var n;!(n=b.next()).done;)v.push(g.call(k,n.value))}else{n=b.length;for(var e=0;e<n;e++)v.push(g.call(k,b[e]))}return v};$jscomp.array.of=function(b){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return[b,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,g,k){var v=this.length;b=Number(b);g=Number(g);k=Number(null!=k?k:v);if(b<g)for(k=Math.min(k,v);g<k;)g in this?this[b++]=this[g++]:(delete this[b++],g++);else for(k=Math.min(k,v+g-b),b+=k-g;k>g;)--k in this?this[--b]=this[k]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,g,k){null!=k&&b.length||(k=this.length||0);k=Number(k);for(g=Number((void 0===g?0:g)||0);g<k;g++)this[g]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,g){return $jscomp.array.findInternal_(this,b,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,g){return $jscomp.array.findInternal_(this,b,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),k=new b($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var v=k.entries(),n=v.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=v.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!v.next().done?!1:!0}catch(e){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,g){var k=this.maybeGetEntry_(b),v=k.id,n=k.list,k=k.entry;n||(n=this.data_[v]=[]);k?k.value=g:(k={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:g},n.push(k),this.head_.previous.next=k,this.head_.previous=k,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(b){var g=this.maybeGetEntry_(b);b=g.id;var k=g.list,v=g.index;return(g=g.entry)&&k?(k.splice(v,1),k.length||delete this.data_[b],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var g=$jscomp.Map.getId_(b),k=this.data_[g];if(k)for(var v=0;v<k.length;v++){var n=k[v];if(b!==b&&n.key!==n.key||b===n.key)return{id:g,list:k,index:v,entry:n}}return{id:g,list:k,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,g){for(var k=$jscomp.makeIterator(this.entries()),v=k.next();!v.done;v=k.next())v=v.value,b.call(g,v[1],v[0],this)};
$jscomp.Map.prototype.iter_=function(b){var g=this,k=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var v={};return v.next=function(){if(k){for(;k.head!=g.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:b(k)};k=null}return{done:!0,value:void 0}},v[Symbol.iterator]=function(){return this},v};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,g,k){Object.defineProperty(b,g,{value:String(k)})}:function(b,g,k){b[g]=String(k)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var g=0;0===(b&4294901760)&&(b<<=16,g+=16);0===(b&4278190080)&&(b<<=8,g+=8);0===(b&4026531840)&&(b<<=4,g+=4);0===(b&3221225472)&&(b<<=2,g+=2);0===(b&2147483648)&&g++;return g};$jscomp.math.imul=function(b,g){b=Number(b);g=Number(g);var k=b&65535,v=g&65535;return k*v+((b>>>16&65535)*v+k*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,k=1,v=b,n=0,e=1;n!=v;)g*=b,e*=-1,v=(n=v)+e*g/++k;return v}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var g=b,k=1,v=b,n=0;n!=v;)g*=b/++k,v=(n=v)+g;return v}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var g=Math.exp(2*-Math.abs(b)),g=(1-g)/(1+g);return 0>b?-g:g};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var g=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-g:g};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,g,k){for(var v=[],n=2;n<arguments.length;++n)v[n-2]=arguments[n];b=Number(b);g=Number(g);for(var e=Math.max(Math.abs(b),Math.abs(g)),a=$jscomp.makeIterator(v),n=a.next();!n.done;n=a.next())e=Math.max(e,Math.abs(n.value));if(1E100<e||1E-100>e){b/=e;g/=e;a=b*b+g*g;v=$jscomp.makeIterator(v);for(n=v.next();!n.done;n=v.next())n=n.value,n=Number(n)/e,a+=n*n;return Math.sqrt(a)*e}e=b*b+g*g;v=$jscomp.makeIterator(v);for(n=v.next();!n.done;n=v.next())n=n.value,n=Number(n),e+=
n*n;return Math.sqrt(e)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var g=Math.floor(Math.abs(b));return 0>b?-g:g};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var g=Math.pow(Math.abs(b),1/3);return 0>b?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,g){for(var k=[],v=1;v<arguments.length;++v)k[v-1]=arguments[v];k=$jscomp.makeIterator(k);for(v=k.next();!v.done;v=k.next())if(v=v.value)for(var n in v)Object.prototype.hasOwnProperty.call(v,n)&&(b[n]=v[n]);return b};$jscomp.object.is=function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var g=b.next();!g.done;g=b.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),b=new b($jscomp.makeIterator([g]));if(b.has(g)||1!=b.size||b.add(g)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),k=b.next();if(k.done||k.value[0]!=g||k.value[1]!=g)return!1;k=b.next();return k.done||k.value[0]==g||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(b){b=this.map_["delete"](b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,g){var k=this;this.map_.forEach(function(v){return b.call(g,v,v,k)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,g){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];for(var k="",g=$jscomp.makeIterator(g),v=g.next();!v.done;v=g.next()){v=v.value;v=+v;if(0>v||1114111<v||v!==Math.floor(v))throw new RangeError("invalid_code_point "+v);65535>=v?k+=String.fromCharCode(v):(v-=65536,k+=String.fromCharCode(v>>>10&1023|55296),k+=String.fromCharCode(v&1023|56320))}return k};
$jscomp.string.repeat=function(b){var g=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var k="";b;)if(b&1&&(k+=g),b>>>=1)g+=g;return k};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var g=this.toString(),k=g.length;b=Number(b)||0;if(0<=b&&b<k){b|=0;var v=g.charCodeAt(b);if(55296>v||56319<v||b+1===k)return v;b=g.charCodeAt(b+1);return 56320>b||57343<b?v:1024*(v-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(b,"startsWith");var k=this.toString();b+="";for(var v=k.length,n=b.length,e=Math.max(0,Math.min(g|0,k.length)),a=0;a<n&&e<v;)if(k[e++]!=b[a++])return!1;return a>=n};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,g){$jscomp.string.noRegExp_(b,"endsWith");var k=this.toString();b+="";void 0===g&&(g=k.length);for(var v=Math.max(0,Math.min(g|0,k.length)),n=b.length;0<n&&0<v;)if(k[--v]!=b[--n])return!1;return 0>=n};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,k,v){function n(a,l){if(!k[a]){if(!g[a]){var z="function"==typeof require&&require;if(!l&&z)return z(a,!0);if(e)return e(a,!0);z=Error("Cannot find module '"+a+"'");throw z.code="MODULE_NOT_FOUND",z;}z=k[a]={exports:{}};g[a][0].call(z.exports,function(e){var l=g[a][1][e];return n(l?l:e)},z,z.exports,e$$0,g,k,v)}return k[a].exports}for(var e="function"==typeof require&&require,a=0;a<v.length;a++)n(v[a]);return n})({1:[function(b,g,k){g=b("../regl")();k=b("vectorize-text");var v=b("gl-mat4/perspective"),
n=b("gl-mat4/lookAt");b=k("hello regl!",{textAlign:"center",textBaseline:"middle"});var e=g.texture({copy:!0,min:"linear",mag:"linear"}),a=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:e,t:function(a){return.001*a.tick}},depth:{enable:!1},count:3}),m=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:b.positions},
elements:b.edges,uniforms:{t:function(a){return.01*a.tick},view:function(a){a=.01*a.tick;return n([],[5*Math.sin(a),0,-5*Math.cos(a)],[0,0,0],[0,-1,0])},projection:function(a){return v([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){a();m();e({copy:!0,min:"linear",mag:"linear"})})},{"../regl":163,"gl-mat4/lookAt":38,"gl-mat4/perspective":39,"vectorize-text":40}],2:[function(b,g,k){function v(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(b,e,a,m,l){b=a.maxAttributes;e=Array(b);for(a=0;a<b;++a)e[a]=new v;return{Record:v,scope:{},state:e}}},{}],3:[function(b,g,k){function v(a){return x[Object.prototype.toString.call(a)]|0}function n(a,f){for(var e=0;e<f.length;++e)a[e]=f[e]}function e(a,f,e,h,m,l,c){for(var b=0,q=0;q<e;++q)for(var u=0;u<h;++u)a[b++]=f[m*q+l*u+c]}function a(a,f,e){for(var h=0,m=0;m<f.length;++m)for(var l=f[m],c=0;c<
e;++c)a[h++]=l[c]}var m=b("./util/is-typed-array"),l=b("./util/is-ndarray"),z=b("./util/values"),t=b("./util/pool"),x=b("./constants/arraytypes.json"),w=b("./constants/dtypes.json"),q=b("./constants/usage.json"),h=[];h[5120]=1;h[5122]=2;h[5124]=4;h[5121]=1;h[5123]=2;h[5125]=4;h[5126]=4;g.exports=function(d,f,r){function p(c){this.id=y++;this.buffer=d.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;r.profile&&(this.stats={size:0})}
function b(c,a,f){c.byteLength=a.byteLength;d.bufferData(c.type,a,f)}function x(c,d,f,u,h,r){c.usage=f;if(Array.isArray(d))c.dtype=u||5126,0<d.length&&(Array.isArray(d[0])?(c.dimension=d[0].length,u=t.allocType(c.dtype,d.length*c.dimension),a(u,d,c.dimension),b(c,u,f),r?c.persistentData=u:t.freeType(u)):"number"===typeof d[0]?(c.dimension=h,u=t.allocType(c.dtype,d.length),n(u,d),b(c,u,f),r?c.persistentData=u:t.freeType(u)):m(d[0])&&(c.dimension=d[0].length,c.dtype=u||v(d[0])||5126,u=t.allocType(c.dtype,
d.length*c.dimension),a(u,d,c.dimension),b(c,u,f),r?c.persistentData=u:t.freeType(u)));else if(m(d))c.dtype=u||v(d),c.dimension=h,b(c,d,f),r&&(c.persistentData=new Uint8Array(new Uint8Array(d.buffer)));else if(l(d)){var p=d.shape,y=d.stride;h=d.offset;var q=0,C=0,F=0,w=0;1===p.length?(q=p[0],C=1,F=y[0],w=0):2===p.length&&(q=p[0],C=p[1],F=y[0],w=y[1]);c.dtype=u||v(d.data)||5126;c.dimension=C;u=t.allocType(c.dtype,q*C);e(u,d.data,q,C,F,w,h);b(c,u,f);r?c.persistentData=u:t.freeType(u)}}function c(c){f.bufferCount--;
d.deleteBuffer(c.buffer);c.buffer=null;delete C[c.id]}var y=0,C={};p.prototype.bind=function(){d.bindBuffer(this.type,this.buffer)};p.prototype.destroy=function(){c(this)};var u=[];r.profile&&(f.getTotalBufferSize=function(){var c=0;Object.keys(C).forEach(function(a){c+=C[a].stats.size});return c});return{create:function(u,b,y,A){function z(c){var a=35044,f=null,e=0,u=0,p=1;Array.isArray(c)||m(c)||l(c)?f=c:"number"===typeof c?e=c|0:c&&("data"in c&&(f=c.data),"usage"in c&&(a=q[c.usage]),"type"in c&&
(u=w[c.type]),"dimension"in c&&(p=c.dimension|0),"length"in c&&(e=c.length|0));g.bind();f?x(g,f,a,u,p,A):(d.bufferData(g.type,e,a),g.dtype=u||5121,g.usage=a,g.dimension=p,g.byteLength=e);r.profile&&(g.stats.size=g.byteLength*h[g.dtype]);return z}f.bufferCount++;var g=new p(b);C[g.id]=g;y||z(u);z._reglType="buffer";z._buffer=g;z.subdata=function(c,f){var u=(f||0)|0;g.bind();if(Array.isArray(c)){if(0<c.length)if("number"===typeof c[0]){var h=t.allocType(g.dtype,c.length);n(h,c);d.bufferSubData(g.type,
u,h);t.freeType(h)}else if(Array.isArray(c[0])||m(c[0])){var h=c[0].length,r=t.allocType(g.dtype,c.length*h);a(r,c,h);d.bufferSubData(g.type,u,r);t.freeType(r)}}else if(m(c))d.bufferSubData(g.type,u,c);else if(l(c)){var p=c.shape,b=c.stride,y=r=h=0,q=0;1===p.length?(h=p[0],r=1,y=b[0],q=0):2===p.length&&(h=p[0],r=p[1],y=b[0],q=b[1]);p=Array.isArray(c.data)?g.dtype:v(c.data);p=t.allocType(p,h*r);e(p,c.data,h,r,y,q,c.offset);d.bufferSubData(g.type,u,p);t.freeType(p)}return z};r.profile&&(z.stats=g.stats);
z.destroy=function(){c(g)};return z},createStream:function(c,a){var d=u.pop();d||(d=new p(c));d.bind();x(d,a,35040,0,1,!1);return d},destroyStream:function(c){u.push(c)},clear:function(){z(C).forEach(c);u.forEach(c)},getBuffer:function(c){return c&&c._buffer instanceof p?c._buffer:null},restore:function(){z(C).forEach(function(c){c.buffer=d.createBuffer();d.bindBuffer(c.type,c.buffer);d.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:x}}},{"./constants/arraytypes.json":4,
"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/values":31}],4:[function(b,g,k){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(b,g,k){g.exports={int8:5120,
int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(b,g,k){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(b,g,k){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(b,g,k){function v(c){return Array.isArray(c)||x(c)||w(c)}function n(c){return c.sort(function(c,a){return"viewport"===c?-1:"viewport"===a?1:c<a?-1:1})}function e(c,a,
d,f){this.thisDep=c;this.contextDep=a;this.propDep=d;this.append=f}function a(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function m(c){return new e(!1,!1,!1,c)}function l(c,a){var d=c.type;return 0===d?(d=c.data.length,new e(!0,1<=d,2<=d,a)):4===d?(d=c.data,new e(d.thisDep,d.contextDep,d.propDep,a)):new e(3===d,2===d,1===d,a)}var z=b("./util/codegen"),t=b("./util/loop"),x=b("./util/is-typed-array"),w=b("./util/is-ndarray"),q=b("./util/is-array-like"),h=b("./dynamic"),d=b("./constants/primitives.json"),
f=b("./constants/dtypes.json"),r=["x","y","z","w"],p="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),A={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
B={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},c={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},y={cw:2304,ccw:2305},C=new e(!1,!1,!1,function(){});g.exports=function(u,b,w,x,g,k,O,J,I,P,L,F,M,N,V){function X(c){return c.replace(".","_")}function U(c,a,d){var f=X(c);Aa.push(c);ua[f]=oa[f]=!!d;pa[f]=
a}function K(c,a,d){var f=X(c);Aa.push(c);Array.isArray(d)?(oa[f]=d.slice(),ua[f]=d.slice()):oa[f]=ua[f]=d;qa[f]=a}function Y(){var c=z(),d=c.link,a=c.global;c.id=Ha++;c.batchId="0";var f=d(Fa),e=c.shared={props:"a0"};Object.keys(Fa).forEach(function(c){e[c]=a.def(f,".",c)});var u=c.next={},h=c.current={};Object.keys(qa).forEach(function(c){Array.isArray(oa[c])&&(u[c]=a.def(e.next,".",c),h[c]=a.def(e.current,".",c))});var r=c.constants={};Object.keys(Ba).forEach(function(c){r[c]=a.def(JSON.stringify(Ba[c]))});
c.invoke=function(a,f){switch(f.type){case 0:var u=["this",e.context,e.props,c.batchId];return a.def(d(f.data),".call(",u.slice(0,Math.max(f.data.length+1,4)),")");case 1:return a.def(e.props,f.data);case 2:return a.def(e.context,f.data);case 3:return a.def("this",f.data);case 4:return f.data.append(c,a),f.data.ref}};c.attribCache={};var m={};c.scopeAttrib=function(c){c=b.id(c);if(c in m)return m[c];var a=P.scope[c];a||(a=P.scope[c]=new va);return m[c]=d(a)};return c}function T(c){var a=c["static"];
c=c.dynamic;var d;if("profile"in a){var f=!!a.profile;d=m(function(c,a){return f});d.enable=f}else if("profile"in c){var e=c.profile;d=l(e,function(c,a){return c.invoke(a,e)})}return d}function W(c,a){var d=c["static"],f=c.dynamic;if("framebuffer"in d){var e=d.framebuffer;return e?(e=J.getFramebuffer(e),m(function(c,a){var d=c.link(e),f=c.shared;a.set(f.framebuffer,".next",d);f=f.context;a.set(f,".framebufferWidth",d+".width");a.set(f,".framebufferHeight",d+".height");return d})):m(function(c,a){var d=
c.shared;a.set(d.framebuffer,".next","null");d=d.context;a.set(d,".framebufferWidth",d+".drawingBufferWidth");a.set(d,".framebufferHeight",d+".drawingBufferHeight");return"null"})}if("framebuffer"in f){var u=f.framebuffer;return l(u,function(c,a){var d=c.invoke(a,u),f=c.shared,e=f.framebuffer,d=a.def(e,".getFramebuffer(",d,")");a.set(e,".next",d);f=f.context;a.set(f,".framebufferWidth",d+"?"+d+".width:"+f+".drawingBufferWidth");a.set(f,".framebufferHeight",d+"?"+d+".height:"+f+".drawingBufferHeight");
return d})}return null}function S(c,a,d){function f(c){if(c in u){var d=u[c];c=!0;var r=d.x|0,m=d.y|0,p,b;"width"in d?p=d.width|0:c=!1;"height"in d?b=d.height|0:c=!1;return new e(!c&&a&&a.thisDep,!c&&a&&a.contextDep,!c&&a&&a.propDep,function(c,a){var f=c.shared.context,e=p;"width"in d||(e=a.def(f,".","framebufferWidth","-",r));var u=b;"height"in d||(u=a.def(f,".","framebufferHeight","-",m));return[r,m,e,u]})}if(c in h){var y=h[c];c=l(y,function(c,a){var d=c.invoke(a,y),f=c.shared.context,e=a.def(d,
".x|0"),u=a.def(d,".y|0"),h=a.def('"width" in ',d,"?",d,".width|0:","(",f,".","framebufferWidth","-",e,")"),d=a.def('"height" in ',d,"?",d,".height|0:","(",f,".","framebufferHeight","-",u,")");return[e,u,h,d]});a&&(c.thisDep=c.thisDep||a.thisDep,c.contextDep=c.contextDep||a.contextDep,c.propDep=c.propDep||a.propDep);return c}return a?new e(a.thisDep,a.contextDep,a.propDep,function(c,a){var d=c.shared.context;return[0,0,a.def(d,".","framebufferWidth"),a.def(d,".","framebufferHeight")]}):null}var u=
c["static"],h=c.dynamic;if(c=f("viewport")){var r=c;c=new e(c.thisDep,c.contextDep,c.propDep,function(c,a){var d=r.append(c,a),f=c.shared.context;a.set(f,".viewportWidth",d[2]);a.set(f,".viewportHeight",d[3]);return d})}return{viewport:c,scissor_box:f("scissor.box")}}function Q(c){function d(c){if(c in f){var a=b.id(f[c]);c=m(function(){return a});c.id=a;return c}if(c in u){var e=u[c];return l(e,function(c,a){var d=c.invoke(a,e);return a.def(c.shared.strings,".id(",d,")")})}return null}var f=c["static"],
u=c.dynamic,h=d("frag"),r=d("vert"),p=null;a(h)&&a(r)?(p=L.program(r.id,h.id),c=m(function(c,a){return c.link(p)})):c=new e(h&&h.thisDep||r&&r.thisDep,h&&h.contextDep||r&&r.contextDep,h&&h.propDep||r&&r.propDep,function(c,a){var d=c.shared.shader,f;f=h?h.append(c,a):a.def(d,".","frag");var e;e=r?r.append(c,a):a.def(d,".","vert");return a.def(d+".program("+e+","+f+")")});return{frag:h,vert:r,progVar:c,program:p}}function Z(c,f){function u(c,a){if(c in h){var d=h[c]|0;return m(function(c,f){a&&(c.OFFSET=
d);return d})}if(c in r){var f=r[c];return l(f,function(c,d){var e=c.invoke(d,f);a&&(c.OFFSET=e);return e})}return a&&p?m(function(c,a){c.OFFSET="0";return 0}):null}var h=c["static"],r=c.dynamic,p=function(){if("elements"in h){var c=h.elements;v(c)?c=k.getElements(k.create(c,!0)):c&&(c=k.getElements(c));var a=m(function(a,d){if(c){var f=a.link(c);return a.ELEMENTS=f}return a.ELEMENTS=null});a.value=c;return a}if("elements"in r){var d=r.elements;return l(d,function(c,a){var f=c.shared,e=f.isBufferArgs,
f=f.elements,u=c.invoke(a,d),h=a.def("null"),e=a.def(e,"(",u,")"),u=c.cond(e).then(h,"=",f,".createStream(",u,");")["else"](h,"=",f,".getElements(",u,");");a.entry(u);a.exit(c.cond(e).then(f,".destroyStream(",h,");"));return c.ELEMENTS=h})}return null}(),b=u("offset",!0);return{elements:p,primitive:function(){if("primitive"in h){var c=h.primitive;return m(function(a,f){return d[c]})}if("primitive"in r){var f=r.primitive;return l(f,function(c,a){var d=c.constants.primTypes,e=c.invoke(a,f);return a.def(d,
"[",e,"]")})}return p?a(p)?p.value?m(function(c,a){return a.def(c.ELEMENTS,".primType")}):m(function(){return 4}):new e(p.thisDep,p.contextDep,p.propDep,function(c,a){var d=c.ELEMENTS;return a.def(d,"?",d,".primType:",4)}):null}(),count:function(){if("count"in h){var c=h.count|0;return m(function(){return c})}if("count"in r){var d=r.count;return l(d,function(c,a){return c.invoke(a,d)})}return p?a(p)?p?b?new e(b.thisDep,b.contextDep,b.propDep,function(c,a){return a.def(c.ELEMENTS,".vertCount-",c.OFFSET)}):
m(function(c,a){return a.def(c.ELEMENTS,".vertCount")}):m(function(){return-1}):new e(p.thisDep||b.thisDep,p.contextDep||b.contextDep,p.propDep||b.propDep,function(c,a){var d=c.ELEMENTS;return c.OFFSET?a.def(d,"?",d,".vertCount-",c.OFFSET,":-1"):a.def(d,"?",d,".vertCount:-1")}):null}(),instances:u("instances",!1),offset:b}}function ca(a,d){var f=a["static"],e=a.dynamic,u={};Aa.forEach(function(a){function d(c,r){if(a in f){var p=c(f[a]);u[h]=m(function(){return p})}else if(a in e){var b=e[a];u[h]=
l(b,function(c,a){return r(c,a,c.invoke(a,b))})}}var h=X(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return d(function(c){return c},function(c,a,d){return d});case "depth.func":return d(function(c){return B[c]},function(c,a,d){return a.def(c.constants.compareFuncs,"[",d,"]")});case "depth.range":return d(function(c){return c},
function(c,a,d){c=a.def("+",d,"[0]");a=a.def("+",d,"[1]");return[c,a]});case "blend.func":return d(function(c){return[A["srcRGB"in c?c.srcRGB:c.src],A["dstRGB"in c?c.dstRGB:c.dst],A["srcAlpha"in c?c.srcAlpha:c.src],A["dstAlpha"in c?c.dstAlpha:c.dst]]},function(c,a,d){function f(c,e){return a.def('"',c,e,'" in ',d,"?",d,".",c,e,":",d,".",c)}c=c.constants.blendFuncs;var e=f("src","RGB"),u=f("dst","RGB"),e=a.def(c,"[",e,"]"),h=a.def(c,"[",f("src","Alpha"),"]"),u=a.def(c,"[",u,"]");c=a.def(c,"[",f("dst",
"Alpha"),"]");return[e,u,h,c]});case "blend.equation":return d(function(c){if("string"===typeof c)return[ra[c],ra[c]];if("object"===typeof c)return[ra[c.rgb],ra[c.alpha]]},function(c,a,d){var f=c.constants.blendEquations,e=a.def(),u=a.def();c=c.cond("typeof ",d,'==="string"');c.then(e,"=",u,"=",f,"[",d,"];");c["else"](e,"=",f,"[",d,".rgb];",u,"=",f,"[",d,".alpha];");a(c);return[e,u]});case "blend.color":return d(function(c){return t(4,function(a){return+c[a]})},function(c,a,d){return t(4,function(c){return a.def("+",
d,"[",c,"]")})});case "stencil.mask":return d(function(c){return c|0},function(c,a,d){return a.def(d,"|0")});case "stencil.func":return d(function(c){return[B[c.cmp||"keep"],c.ref||0,"mask"in c?c.mask:-1]},function(c,a,d){c=a.def('"cmp" in ',d,"?",c.constants.compareFuncs,"[",d,".cmp]",":",7680);var f=a.def(d,".ref|0");a=a.def('"mask" in ',d,"?",d,".mask|0:-1");return[c,f,a]});case "stencil.opFront":case "stencil.opBack":return d(function(d){return["stencil.opBack"===a?1029:1028,c[d.fail||"keep"],
c[d.zfail||"keep"],c[d.zpass||"keep"]]},function(c,d,f){function e(c){return d.def('"',c,'" in ',f,"?",u,"[",f,".",c,"]:",7680)}var u=c.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("zpass")]});case "polygonOffset.offset":return d(function(c){return[c.factor|0,c.units|0]},function(c,a,d){c=a.def(d,".factor|0");a=a.def(d,".units|0");return[c,a]});case "cull.face":return d(function(c){var a=0;"front"===c?a=1028:"back"===c&&(a=1029);return a},function(c,a,d){return a.def(d,
'==="front"?',1028,":",1029)});case "lineWidth":return d(function(c){return c},function(c,a,d){return d});case "frontFace":return d(function(c){return y[c]},function(c,a,d){return a.def(d+'==="cw"?2304:2305')});case "colorMask":return d(function(c){return c.map(function(c){return!!c})},function(c,a,d){return t(4,function(c){return"!!"+d+"["+c+"]"})});case "sample.coverage":return d(function(c){return["value"in c?c.value:1,!!c.invert]},function(c,a,d){c=a.def('"value" in ',d,"?+",d,".value:1");a=a.def("!!",
d,".invert");return[c,a]})}});return u}function ha(c,a){var d=c["static"],f=c.dynamic,e={};Object.keys(d).forEach(function(c){var a=d[c],f;if("number"===typeof a||"boolean"===typeof a)f=m(function(){return a});else if("function"===typeof a){var u=a._reglType;if("texture2d"===u||"textureCube"===u)f=m(function(c){return c.link(a)});else if("framebuffer"===u||"framebufferCube"===u)f=m(function(c){return c.link(a.color[0])})}else q(a)&&(f=m(function(c){return c.global.def("[",t(a.length,function(c){return a[c]}),
"]")}));f.value=a;e[c]=f});Object.keys(f).forEach(function(c){var a=f[c];e[c]=l(a,function(c,d){return c.invoke(d,a)})});return e}function ea(c,a){var d=c["static"],e=c.dynamic,u={};Object.keys(d).forEach(function(c){var a=d[c],e=b.id(c),h=new va;if(v(a))h.state=1,h.buffer=g.getBuffer(g.create(a,34962,!1,!0)),h.type=h.buffer.dtype;else{var p=g.getBuffer(a);if(p)h.state=1,h.buffer=p,h.type=p.dtype;else if(a.constant){var l=a.constant;h.buffer="null";h.state=2;"number"===typeof l?h.x=l:r.forEach(function(c,
a){a<l.length&&(h[c]=l[a])})}else{var p=v(a.buffer)?g.getBuffer(g.create(a.buffer,34962,!1,!0)):g.getBuffer(a.buffer),y=a.offset|0,F=a.stride|0,q=a.size|0,A=!!a.normalized,n=0;"type"in a&&(n=f[a.type]);a=a.divisor|0;h.buffer=p;h.state=1;h.size=q;h.normalized=A;h.type=n||p.dtype;h.offset=y;h.stride=F;h.divisor=a}}u[c]=m(function(c,a){var d=c.attribCache;if(e in d)return d[e];var f={isStream:!1};Object.keys(h).forEach(function(c){f[c]=h[c]});h.buffer&&(f.buffer=c.link(h.buffer));return d[e]=f})});Object.keys(e).forEach(function(c){var a=
e[c];u[c]=l(a,function(c,d){function f(c){d(m[c],"=",e,".",c,"|0;")}var e=c.invoke(d,a),u=c.shared,h=u.isBufferArgs,p=u.buffer,m={isStream:d.def(!1)},b=new va;b.state=1;Object.keys(b).forEach(function(c){m[c]=d.def(""+b[c])});var l=m.buffer,y=m.type;d("if(",h,"(",e,")){",m.isStream,"=true;",l,"=",p,".createStream(",34962,",",e,");",y,"=",l,".dtype;","}else{",l,"=",p,".getBuffer(",e,");","if(",l,"){",y,"=",l,".dtype;",'}else if("constant" in ',e,"){",m.state,"=",2,";","if(typeof "+e+'.constant === "number"){',
m[r[0]],"=",e,".constant;",r.slice(1).map(function(c){return m[c]}).join("="),"=0;","}else{",r.map(function(c,a){return m[c]+"="+e+".constant.length>="+a+"?"+e+".constant["+a+"]:0;"}).join(""),"}}else{","if(",h,"(",e,".buffer)){",l,"=",p,".createStream(",34962,",",e,".buffer);","}else{",l,"=",p,".getBuffer(",e,".buffer);","}",y,'="type" in ',e,"?",u.glTypes,"[",e,".type]:",l,".dtype;",m.normalized,"=!!",e,".normalized;");f("size");f("offset");f("stride");f("divisor");d("}}");d.exit("if(",m.isStream,
"){",p,".destroyStream(",l,");","}");return m})});return u}function na(c){var a=c["static"],d=c.dynamic,f={};Object.keys(a).forEach(function(c){var d=a[c];f[c]=m(function(c,a){return"number"===typeof d||"boolean"===typeof d?""+d:c.link(d)})});Object.keys(d).forEach(function(c){var a=d[c];f[c]=l(a,function(c,d){return c.invoke(d,a)})});return f}function ma(c,a,d,f,e){var u=W(c,e),h=S(c,u,e),r=Z(c,e),p=ca(c,e),m=Q(c,e),b=h.viewport;b&&(p.viewport=b);b=X("scissor.box");(h=h[b])&&(p[b]=h);h=0<Object.keys(p).length;
u={framebuffer:u,draw:r,shader:m,state:p,dirty:h};u.profile=T(c,e);u.uniforms=ha(d,e);u.attributes=ea(a,e);u.context=na(f,e);return u}function ba(c,a,d){var f=c.shared.context,e=c.scope();Object.keys(d).forEach(function(u){a.save(f,"."+u);e(f,".",u,"=",d[u].append(c,a),";")});a(e)}function ja(c,a,d,f){var e=c.shared,u=e.gl,h=e.framebuffer,r;Ca&&(r=a.def(e.extensions,".webgl_draw_buffers"));var p=c.constants,e=p.drawBuffer,p=p.backBuffer;c=d?d.append(c,a):a.def(h,".next");f||a("if(",c,"!==",h,".cur){");
a("if(",c,"){",u,".bindFramebuffer(",36160,",",c,".framebuffer);");Ca&&a(r,".drawBuffersWEBGL(",e,"[",c,".colorAttachments.length]);");a("}else{",u,".bindFramebuffer(",36160,",null);");Ca&&a(r,".drawBuffersWEBGL(",p,");");a("}",h,".cur=",c,";");f||a("}")}function ka(c,a,d){var f=c.shared,e=f.gl,u=c.current,h=c.next,r=f.current,p=f.next,m=c.cond(r,".dirty");Aa.forEach(function(a){a=X(a);if(!(a in d.state)){var f,b;if(a in h){f=h[a];b=u[a];var l=t(oa[a].length,function(c){return m.def(f,"[",c,"]")});
m(c.cond(l.map(function(c,a){return c+"!=="+b+"["+a+"]"}).join("||")).then(e,".",qa[a],"(",l,");",l.map(function(c,a){return b+"["+a+"]="+c}).join(";"),";"))}else f=m.def(p,".",a),l=c.cond(f,"!==",r,".",a),m(l),a in pa?l(c.cond(f).then(e,".enable(",pa[a],");")["else"](e,".disable(",pa[a],");"),r,".",a,"=",f,";"):l(e,".",qa[a],"(",f,");",r,".",a,"=",f,";")}});0===Object.keys(d.state).length&&m(r,".dirty=false;");a(m)}function aa(c,d,f,e){var u=c.shared,h=c.current,r=u.current,p=u.gl;n(Object.keys(f)).forEach(function(u){var m=
f[u];if(!e||e(m)){var b=m.append(c,d);if(pa[u]){var l=pa[u];a(m)?b?d(p,".enable(",l,");"):d(p,".disable(",l,");"):d(c.cond(b).then(p,".enable(",l,");")["else"](p,".disable(",l,");"));d(r,".",u,"=",b,";")}else if(q(b)){var y=h[u];d(p,".",qa[u],"(",b,");",b.map(function(c,a){return y+"["+a+"]="+c}).join(";"),";")}else d(p,".",qa[u],"(",b,");",r,".",u,"=",b,";")}})}function da(c,a){wa&&!c.instancing&&(c.instancing=a.def(c.shared.extensions,".angle_instanced_arrays"))}function fa(c,d,f,e,u){function h(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function r(c){q=d.def();c(q,"=",h(),";");"string"===typeof u?c(l,".count+=",u,";"):c(l,".count++;");N&&(e?(A=d.def(),c(A,"=",F,".getNumPendingQueries();")):c(F,".beginQuery(",l,");"))}function p(c){c(l,".cpuTime+=",h(),"-",q,";");N&&(e?c(F,".pushScopeStats(",A,",",F,".getNumPendingQueries(),",l,");"):c(F,".endQuery();"))}function m(c){var a=d.def(y,".profile");d(y,".profile=",c,";");d.exit(y,".profile=",a,";")}var b=c.shared,l=c.stats,y=b.current,
F=b.timer;f=f.profile;var q,A;if(f){if(a(f)){f.enable?(r(d),p(d.exit),m("true")):m("false");return}f=f.append(c,d);m(f)}else f=d.def(y,".profile");b=c.block();r(b);d("if(",f,"){",b,"}");c=c.block();p(c);d.exit("if(",f,"){",c,"}")}function ga(c,a,d,f,e){function u(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function h(d,f,e){function u(){a("if(!",y,".buffer){",b,".enableVertexAttribArray(",
l,");}");var d=e.type,h;h=e.size?a.def(e.size,"||",f):f;a("if(",y,".type!==",d,"||",y,".size!==",h,"||",A.map(function(c){return y+"."+c+"!=="+e[c]}).join("||"),"){",b,".bindBuffer(",34962,",",F,".buffer);",b,".vertexAttribPointer(",[l,h,d,e.normalized,e.stride,e.offset],");",y,".type=",d,";",y,".size=",h,";",A.map(function(c){return y+"."+c+"="+e[c]+";"}).join(""),"}");wa&&(d=e.divisor,a("if(",y,".divisor!==",d,"){",c.instancing,".vertexAttribDivisorANGLE(",[l,d],");",y,".divisor=",d,";}"))}function m(){a("if(",
y,".buffer){",b,".disableVertexAttribArray(",l,");","}if(",r.map(function(c,a){return y+"."+c+"!=="+q[a]}).join("||"),"){",b,".vertexAttrib4f(",l,",",q,");",r.map(function(c,a){return y+"."+c+"="+q[a]+";"}).join(""),"}")}var b=p.gl,l=a.def(d,".location"),y=a.def(p.attributes,"[",l,"]");d=e.state;var F=e.buffer,q=[e.x,e.y,e.z,e.w],A=["buffer","normalized","offset","stride"];1===d?u():2===d?m():(a("if(",d,"===",1,"){"),u(),a("}else{"),m(),a("}"))}var p=c.shared;f.forEach(function(f){var r=f.name,p=
d.attributes[r],m;if(p){if(!e(p))return;m=p.append(c,a)}else{if(!e(C))return;var b=c.scopeAttrib(r);m={};Object.keys(new va).forEach(function(c){m[c]=a.def(b,".",c)})}h(c.link(f),u(f.info.type),m)})}function ia(c,d,f,e,u){for(var h=c.shared,r=h.gl,p,m=0;m<e.length;++m){var l=e[m],y=l.name,F=l.info.type,A=f.uniforms[y],l=c.link(l)+".location",n;if(A){if(!u(A))continue;if(a(A)){y=A.value;if(35678===F||35680===F)F=c.link(y._texture||y.color[0]._texture),d(r,".uniform1i(",l,",",F+".bind());"),d.exit(F,
".unbind();");else if(35674===F||35675===F||35676===F)y=c.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),A=2,35675===F?A=3:35676===F&&(A=4),d(r,".uniformMatrix",A,"fv(",l,",false,",y,");");else{switch(F){case 5126:p="1f";break;case 35664:p="2f";break;case 35665:p="3f";break;case 35666:p="4f";break;case 35670:p="1i";break;case 5124:p="1i";break;case 35671:p="2i";break;case 35667:p="2i";break;case 35672:p="3i";break;case 35668:p="3i";break;case 35673:p="4i";break;case 35669:p="4i"}d(r,
".uniform",p,"(",l,",",q(y)?Array.prototype.slice.call(y):y,");")}continue}else n=A.append(c,d)}else{if(!u(C))continue;n=d.def(h.uniforms,"[",b.id(y),"]")}35678===F?d("if(",n,"&&",n,'._reglType==="framebuffer"){',n,"=",n,".color[0];","}"):35680===F&&d("if(",n,"&&",n,'._reglType==="framebufferCube"){',n,"=",n,".color[0];","}");y=1;switch(F){case 35678:case 35680:F=d.def(n,"._texture");d(r,".uniform1i(",l,",",F,".bind());");d.exit(F,".unbind();");continue;case 5124:case 35670:p="1i";break;case 35667:case 35671:p=
"2i";y=2;break;case 35668:case 35672:p="3i";y=3;break;case 35669:case 35673:p="4i";y=4;break;case 5126:p="1f";break;case 35664:p="2f";y=2;break;case 35665:p="3f";y=3;break;case 35666:p="4f";y=4;break;case 35674:p="Matrix2fv";break;case 35675:p="Matrix3fv";break;case 35676:p="Matrix4fv"}d(r,".uniform",p,"(",l,",");if("M"===p.charAt(0)){var l=Math.pow(F-35674+2,2),w=c.global.def("new Float32Array(",l,")");d("false,(Array.isArray(",n,")||",n," instanceof Float32Array)?",n,":(",t(l,function(c){return w+
"["+c+"]="+n+"["+c+"]"}),",",w,")")}else 1<y?d(t(y,function(c){return n+"["+c+"]"})):d(n);d(");")}}function ta(c,d,f,e){function u(a){var h=l[a];return h?h.contextDep&&e.contextDynamic||h.propDep?h.append(c,f):h.append(c,d):d.def(b,".",a)}function h(){function c(){f(C,".drawElementsInstancedANGLE(",[F,q,w,A+"<<(("+w+"-5121)>>1)",n],");")}function a(){f(C,".drawArraysInstancedANGLE(",[F,A,q,n],");")}y?t?c():(f("if(",y,"){"),c(),f("}else{"),a(),f("}")):a()}function p(){function c(){f(m+".drawElements("+
[F,q,w,A+"<<(("+w+"-5121)>>1)"]+");")}function a(){f(m+".drawArrays("+[F,A,q]+");")}y?t?c():(f("if(",y,"){"),c(),f("}else{"),a(),f("}")):a()}var r=c.shared,m=r.gl,b=r.draw,l=e.draw,y=function(){var a=l.elements,u=d;if(a){if(a.contextDep&&e.contextDynamic||a.propDep)u=f;a=a.append(c,u)}else a=u.def(b,".","elements");a&&u("if("+a+")"+m+".bindBuffer(34963,"+a+".buffer.buffer);");return a}(),F=u("primitive"),A=u("offset"),q=function(){var a=l.count,u=d;if(a){if(a.contextDep&&e.contextDynamic||a.propDep)u=
f;a=a.append(c,u)}else a=u.def(b,".","count");return a}();if("number"===typeof q){if(0===q)return}else f("if(",q,"){"),f.exit("}");var n,C;wa&&(n=u("instances"),C=c.instancing);var w=y+".type",t=l.elements&&a(l.elements);wa&&("number"!==typeof n||0<=n)?"string"===typeof n?(f("if(",n,">0){"),h(),f("}else if(",n,"<0){"),p(),f("}")):h():p()}function xa(c,a,d,f,e){a=Y();e=a.proc("body",e);wa&&(a.instancing=e.def(a.shared.extensions,".angle_instanced_arrays"));c(a,e,d,f);return a.compile().body}function ya(c,
a,d,f){da(c,a);ga(c,a,d,f.attributes,function(){return!0});ia(c,a,d,f.uniforms,function(){return!0});ta(c,a,a,d)}function Da(c,a){var d=c.proc("draw",1);da(c,d);ba(c,d,a.context);ja(c,d,a.framebuffer);ka(c,d,a);aa(c,d,a.state);fa(c,d,a,!1,!0);var f=a.shader.progVar.append(c,d);d(c.shared.gl,".useProgram(",f,".program);");if(a.shader.program)ya(c,d,a,a.shader.program);else{var e=c.global.def("{}"),u=d.def(f,".id"),h=d.def(e,"[",u,"]");d(c.cond(h).then(h,".call(this,a0);")["else"](h,"=",e,"[",u,"]=",
c.link(function(d){return xa(ya,c,a,d,1)}),"(",f,");",h,".call(this,a0);"))}0<Object.keys(a.state).length&&d(c.shared.current,".dirty=true;")}function Ea(c,a,d,f){function e(){return!0}c.batchId="a1";da(c,a);ga(c,a,d,f.attributes,e);ia(c,a,d,f.uniforms,e);ta(c,a,a,d)}function la(c,a,d,f){function e(c){return c.contextDep&&h||c.propDep}function u(c){return!e(c)}da(c,a);var h=d.contextDep,p=a.def(),r=a.def();c.shared.props=r;c.batchId=p;var m=c.scope(),b=c.scope();a(m.entry,"for(",p,"=0;",p,"<","a1",
";++",p,"){",r,"=","a0","[",p,"];",b,"}",m.exit);d.needsContext&&ba(c,b,d.context);d.needsFramebuffer&&ja(c,b,d.framebuffer);aa(c,b,d.state,e);d.profile&&e(d.profile)&&fa(c,b,d,!1,!0);f?(ga(c,m,d,f.attributes,u),ga(c,b,d,f.attributes,e),ia(c,m,d,f.uniforms,u),ia(c,b,d,f.uniforms,e),ta(c,m,b,d)):(a=c.global.def("{}"),f=d.shader.progVar.append(c,b),r=b.def(f,".id"),m=b.def(a,"[",r,"]"),b(c.shared.gl,".useProgram(",f,".program);","if(!",m,"){",m,"=",a,"[",r,"]=",c.link(function(a){return xa(Ea,c,d,a,
2)}),"(",f,");}",m,".call(this,a0[",p,"],",p,");"))}function za(c,a){function d(c){return c.contextDep&&e||c.propDep}var f=c.proc("batch",2);c.batchId="0";da(c,f);var e=!1,u=!0;Object.keys(a.context).forEach(function(c){e=e||a.context[c].propDep});e||(ba(c,f,a.context),u=!1);var h=a.framebuffer,p=!1;h?(h.propDep?e=p=!0:h.contextDep&&e&&(p=!0),p||ja(c,f,h)):ja(c,f,null);a.state.viewport&&a.state.viewport.propDep&&(e=!0);ka(c,f,a);aa(c,f,a.state,function(c){return!d(c)});a.profile&&d(a.profile)||fa(c,
f,a,!1,"a1");a.contextDep=e;a.needsContext=u;a.needsFramebuffer=p;u=a.shader.progVar;if(u.contextDep&&e||u.propDep)la(c,f,a,null);else if(u=u.append(c,f),f(c.shared.gl,".useProgram(",u,".program);"),a.shader.program)la(c,f,a,a.shader.program);else{var h=c.global.def("{}"),p=f.def(u,".id"),r=f.def(h,"[",p,"]");f(c.cond(r).then(r,".call(this,a0,a1);")["else"](r,"=",h,"[",p,"]=",c.link(function(d){return xa(la,c,a,d,2)}),"(",u,");",r,".call(this,a0,a1);"))}0<Object.keys(a.state).length&&f(c.shared.current,
".dirty=true;")}function sa(c,a){function d(u){var h=a.shader[u];h&&f.set(e.shader,"."+u,h.append(c,f))}var f=c.proc("scope",3);c.batchId="a2";var e=c.shared,u=e.current;ba(c,f,a.context);a.framebuffer&&a.framebuffer.append(c,f);n(Object.keys(a.state)).forEach(function(d){var u=a.state[d].append(c,f);q(u)?u.forEach(function(a,e){f.set(c.next[d],"["+e+"]",a)}):f.set(e.next,"."+d,u)});fa(c,f,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var u=a.draw[d];u&&f.set(e.draw,
"."+d,""+u.append(c,f))});Object.keys(a.uniforms).forEach(function(d){f.set(e.uniforms,"["+b.id(d)+"]",a.uniforms[d].append(c,f))});Object.keys(a.attributes).forEach(function(d){var e=a.attributes[d].append(c,f),u=c.scopeAttrib(d);Object.keys(new va).forEach(function(c){f.set(u,"."+c,e[c])})});d("vert");d("frag");0<Object.keys(a.state).length&&(f(u,".dirty=true;"),f.exit(u,".dirty=true;"));f("a1(",c.shared.context,",a0,",c.batchId,");")}function Ia(c){if("object"===typeof c&&!q(c)){for(var a=Object.keys(c),
d=0;d<a.length;++d)if(h.isDynamic(c[a[d]]))return!0;return!1}}function Ga(c,a,d){function f(c,a){p.forEach(function(d){var f=e[d];h.isDynamic(f)&&(f=c.invoke(a,f),a(y,".",d,"=",f,";"))})}var e=a["static"][d];if(e&&Ia(e)){var u=c.global,p=Object.keys(e),r=!1,m=!1,b=!1,y=c.global.def("{}");p.forEach(function(a){var d=e[a];if(h.isDynamic(d))"function"===typeof d&&(d=e[a]=h.unbox(d)),a=l(d,null),r=r||a.thisDep,b=b||a.propDep,m=m||a.contextDep;else{u(y,".",a,"=");switch(typeof d){case "number":u(d);break;
case "string":u('"',d,'"');break;case "object":Array.isArray(d)&&u("[",d.join(),"]");break;default:u(c.link(d))}u(";")}});a.dynamic[d]=new h.DynamicVariable(4,{thisDep:r,contextDep:m,propDep:b,ref:y,append:f});delete a["static"][d]}}var va=P.Record,ra={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(ra.min=32775,ra.max=32776);var wa=w.angle_instanced_arrays,Ca=w.webgl_draw_buffers,oa={dirty:!0,profile:V.profile},ua={},Aa=[],pa={},qa={};U("dither",3024);U("blend.enable",3042);
K("blend.color","blendColor",[0,0,0,0]);K("blend.equation","blendEquationSeparate",[32774,32774]);K("blend.func","blendFuncSeparate",[1,0,1,0]);U("depth.enable",2929,!0);K("depth.func","depthFunc",513);K("depth.range","depthRange",[0,1]);K("depth.mask","depthMask",!0);K("colorMask","colorMask",[!0,!0,!0,!0]);U("cull.enable",2884);K("cull.face","cullFace",1029);K("frontFace","frontFace",2305);K("lineWidth","lineWidth",1);U("polygonOffset.enable",32823);K("polygonOffset.offset","polygonOffset",[0,0]);
U("sample.alpha",32926);U("sample.enable",32928);K("sample.coverage","sampleCoverage",[1,!1]);U("stencil.enable",2960);K("stencil.mask","stencilMask",-1);K("stencil.func","stencilFunc",[519,0,-1]);K("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);K("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);U("scissor.enable",3089);K("scissor.box","scissor",[0,0,u.drawingBufferWidth,u.drawingBufferHeight]);K("viewport","viewport",[0,0,u.drawingBufferWidth,u.drawingBufferHeight]);var Fa=
{gl:u,context:M,strings:b,next:ua,current:oa,draw:F,elements:k,buffer:g,shader:L,attributes:P.state,uniforms:I,framebuffer:J,extensions:w,timer:N,isBufferArgs:v},Ba={primTypes:d,compareFuncs:B,blendFuncs:A,blendEquations:ra,stencilOps:c,glTypes:f,orientationType:y};Ca&&(Ba.backBuffer=[1029],Ba.drawBuffer=t(x.maxDrawbuffers,function(c){return 0===c?[0]:t(c,function(c){return 36064+c})}));var Ha=0;return{next:ua,current:oa,procs:function(){var c=Y(),a=c.proc("poll"),d=c.proc("refresh"),f=c.block();
a(f);d(f);var e=c.shared,h=e.gl,p=e.next,r=e.current;f(r,".dirty=false;");ja(c,a);ja(c,d,null,!0);var m=u.getExtension("angle_instanced_arrays"),b;m&&(b=c.link(m));for(var l=0;l<x.maxAttributes;++l){var y=d.def(e.attributes,"[",l,"]"),F=c.cond(y,".buffer");F.then(h,".enableVertexAttribArray(",l,");",h,".bindBuffer(",34962,",",y,".buffer.buffer);",h,".vertexAttribPointer(",l,",",y,".size,",y,".type,",y,".normalized,",y,".stride,",y,".offset);")["else"](h,".disableVertexAttribArray(",l,");",h,".vertexAttrib4f(",
l,",",y,".x,",y,".y,",y,".z,",y,".w);",y,".buffer=null;");d(F);m&&d(b,".vertexAttribDivisorANGLE(",l,",",y,".divisor);")}Object.keys(pa).forEach(function(e){var u=pa[e],m=f.def(p,".",e),b=c.block();b("if(",m,"){",h,".enable(",u,")}else{",h,".disable(",u,")}",r,".",e,"=",m,";");d(b);a("if(",m,"!==",r,".",e,"){",b,"}")});Object.keys(qa).forEach(function(e){var u=qa[e],m=oa[e],b,l,y=c.block();y(h,".",u,"(");q(m)?(u=m.length,b=c.global.def(p,".",e),l=c.global.def(r,".",e),y(t(u,function(c){return b+"["+
c+"]"}),");",t(u,function(c){return l+"["+c+"]="+b+"["+c+"];"}).join("")),a("if(",t(u,function(c){return b+"["+c+"]!=="+l+"["+c+"]"}).join("||"),"){",y,"}")):(b=f.def(p,".",e),l=f.def(r,".",e),y(b,");",r,".",e,"=",b,";"),a("if(",b,"!==",l,"){",y,"}"));d(y)});return c.compile()}(),compile:function(c,a,d,f,e){var u=Y();u.stats=u.link(e);Object.keys(a["static"]).forEach(function(c){Ga(u,a,c)});p.forEach(function(a){Ga(u,c,a)});d=ma(c,a,d,f,u);Da(u,d);sa(u,d);za(u,d);return u.compile()}}}},{"./constants/dtypes.json":5,
"./constants/primitives.json":6,"./dynamic":9,"./util/codegen":22,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/loop":27}],9:[function(b,g,k){function v(e,b){this.id=a++;this.type=e;this.data=b}function n(a){if(0===a.length)return[];var e=a.charAt(0),b=a.charAt(a.length-1);if(1<a.length&&e===b&&('"'===e||"'"===e))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return n(a.substr(0,
e.index)).concat(n(e[1])).concat(n(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(b=0;b<e.length;++b)a=a.concat(n(e[b]));return a}function e(a){return"["+n(a).join("][")+"]"}var a=0;g.exports={DynamicVariable:v,define:function(a,b){return new v(a,e(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof v},unbox:function(a,e){return"function"===typeof a?new v(0,a):a},accessor:e}},{}],
10:[function(b,g,k){var v=b("./util/is-typed-array"),n=b("./util/is-ndarray"),e=b("./util/values"),a=b("./constants/primitives.json"),m=b("./constants/usage.json");g.exports=function(b,z,t,x){function w(a){this.id=f++;d[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function q(a,d,c,f,e,u,h){(u=h)||v(d)&&(!n(d)||v(d.data))||(u=z.oes_element_index_uint?5125:5123);a.buffer.bind();t._initBuffer(a.buffer,d,c,u,3);d=h;if(!h){switch(a.buffer.dtype){case 5121:case 5120:d=5121;break;
case 5123:case 5122:d=5123;break;case 5125:case 5124:d=5125}a.buffer.dtype=d}a.type=d;0>e&&(e=a.buffer.byteLength,5123===d?e>>=1:5125===d&&(e>>=2));a.vertCount=e;e=f;0>f&&(e=4,f=a.buffer.dimension,1===f&&(e=0),2===f&&(e=1),3===f&&(e=4));a.primType=e}function h(a){x.elementsCount--;delete d[a.id];a.buffer.destroy();a.buffer=null}var d={},f=0,r={uint8:5121,uint16:5123};z.oes_element_index_uint&&(r.uint32=5125);w.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(d,f){function c(d){if(d)if("number"===
typeof d)e(d),p.primType=4,p.vertCount=d|0,p.type=5121;else{var f=null,h=35044,A=-1,w=-1,t=0,z=0;Array.isArray(d)||v(d)||n(d)?f=d:("data"in d&&(f=d.data),"usage"in d&&(h=m[d.usage]),"primitive"in d&&(A=a[d.primitive]),"count"in d&&(w=d.count|0),"length"in d&&(t=d.length|0),"type"in d&&(z=r[d.type]));f?q(p,f,h,A,w,t,z):(d=p.buffer,d.bind(),b.bufferData(34963,t,h),d.dtype=z||5121,d.usage=h,d.dimension=3,d.byteLength=t,p.primType=0>A?4:A,p.vertCount=0>w?0:w,p.type=d.dtype)}else e(),p.primType=4,p.vertCount=
0,p.type=5121;return c}var e=t.create(null,34963,!0),p=new w(e._buffer);x.elementsCount++;c(d);c._reglType="elements";c._elements=p;c.subdata=function(a,d){e.subdata(a,d);return c};c.destroy=function(){h(p)};return c},createStream:function(a){var d=p.pop();d||(d=new w(t.create(null,34963,!0,!1)._buffer));q(d,a,35040,-1,-1,0,0);return d},destroyStream:function(a){p.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof w?a._elements:null},clear:function(){e(d).forEach(h)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/values":31}],11:[function(b,g,k){g.exports=function(b,n){function e(e){e=e.toLowerCase();var m;try{m=a[e]=b.getExtension(e)}catch(l){}return!!m}for(var a={},m=0;m<n.extensions.length;++m){var l=n.extensions[m];if(!e(l))return n.onDestroy(),n.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}n.optionalExtensions.forEach(e);
return{extensions:a,restore:function(){Object.keys(a).forEach(function(a){if(!e(a))throw Error("(regl): error restoring extension "+a);})}}}},{}],12:[function(b,g,k){var v=b("./util/values"),n=b("./util/extend"),e=[];e[6408]=4;var a=[];a[5121]=1;a[5126]=4;a[36193]=2;g.exports=function(b,l,z,t,x,w){function q(c,a,d){this.target=c;this.texture=a;this.renderbuffer=d;var f=c=0;a?(c=a.width,f=a.height):d&&(c=d.width,f=d.height);this.width=c;this.height=f}function h(c){c&&(c.texture&&c.texture._texture.decRef(),
c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function d(c,a,d){c&&(c.texture?c.texture._texture.refCount+=1:c.renderbuffer._renderbuffer.refCount+=1)}function f(c,a){a?a.texture?b.framebufferTexture2D(36160,c,a.target,a.texture._texture.texture,0):b.framebufferRenderbuffer(36160,c,36161,a.renderbuffer._renderbuffer.renderbuffer):b.framebufferTexture2D(36160,c,3553,null,0)}function r(c){var a=3553,d=null,f=null,e=c;"object"===typeof c&&(e=c.data,"target"in c&&(a=c.target|0));c=e._reglType;
"texture2d"===c?d=e:"textureCube"===c?d=e:"renderbuffer"===c&&(f=e,a=36161);return new q(a,d,f)}function p(c,a,d,f,e){if(d)return c=t.create2D({width:c,height:a,format:f,type:e}),c._texture.refCount=0,new q(3553,c,null);c=x.create({width:c,height:a,format:f});c._renderbuffer.refCount=0;return new q(36161,null,c)}function A(c){return c&&(c.texture||c.renderbuffer)}function g(c,a,d){c&&(c.texture?c.texture.resize(a,d):c.renderbuffer&&c.renderbuffer.resize(a,d))}function c(){this.id=O++;J[this.id]=this;
this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function y(c){c.colorAttachments.forEach(h);h(c.depthAttachment);h(c.stencilAttachment);h(c.depthStencilAttachment)}function C(c){b.deleteFramebuffer(c.framebuffer);c.framebuffer=null;w.framebufferCount--;delete J[c.id]}function u(c){var a;b.bindFramebuffer(36160,c.framebuffer);var d=c.colorAttachments;for(a=0;a<d.length;++a)f(36064+
a,d[a]);for(a=d.length;a<z.maxColorAttachments;++a)f(36064+a,null);f(36096,c.depthAttachment);f(36128,c.stencilAttachment);f(33306,c.depthStencilAttachment);b.checkFramebufferStatus(36160);b.bindFramebuffer(36160,k.next);k.cur=k.next;b.getError()}function D(f,h){function b(c,f){var h,l=0,q=0,n=!0,w=!0;h=null;var t=!0,C="rgba",z="uint8",x=1,v=null,D=null,g=null,k=!1;if("number"===typeof c)l=c|0,q=f|0||l;else if(c){"shape"in c?(q=c.shape,l=q[0],q=q[1]):("radius"in c&&(l=q=c.radius),"width"in c&&(l=
c.width),"height"in c&&(q=c.height));if("color"in c||"colors"in c)h=c.color||c.colors,Array.isArray(h);if(!h){"colorCount"in c&&(x=c.colorCount|0);"colorTexture"in c&&(t=!!c.colorTexture,C="rgba4");if("colorType"in c&&(z=c.colorType,!t))if("half float"===z||"float16"===z)C="rgba16f";else if("float"===z||"float32"===z)C="rgba32f";"colorFormat"in c&&(C=c.colorFormat,0<=R.indexOf(C)?t=!0:0<=H.indexOf(C)&&(t=!1))}if("depthTexture"in c||"depthStencilTexture"in c)k=!(!c.depthTexture&&!c.depthStencilTexture);
"depth"in c&&("boolean"===typeof c.depth?n=c.depth:(v=c.depth,w=!1));"stencil"in c&&("boolean"===typeof c.stencil?w=c.stencil:(D=c.stencil,n=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?n=w=c.depthStencil:(g=c.depthStencil,w=n=!1))}else l=q=1;var B=null,E=null,G=null,I=null;if(Array.isArray(h))B=h.map(r);else if(h)B=[r(h)];else for(B=Array(x),h=0;h<x;++h)B[h]=p(l,q,t,C,z);l=l||B[0].width;q=q||B[0].height;v?E=r(v):n&&!w&&(E=p(l,q,k,"depth","uint32"));D?G=r(D):w&&!n&&(G=p(l,q,!1,"stencil",
"uint8"));g?I=r(g):!v&&!D&&w&&n&&(I=p(l,q,k,"depth stencil","depth stencil"));n=null;for(h=0;h<B.length;++h)d(B[h],l,q),B[h]&&B[h].texture&&(w=e[B[h].texture._texture.format]*a[B[h].texture._texture.type],null===n&&(n=w));d(E,l,q);d(G,l,q);d(I,l,q);y(m);m.width=l;m.height=q;m.colorAttachments=B;m.depthAttachment=E;m.stencilAttachment=G;m.depthStencilAttachment=I;b.color=B.map(A);b.depth=A(E);b.stencil=A(G);b.depthStencil=A(I);b.width=m.width;b.height=m.height;u(m);return b}var m=new c;w.framebufferCount++;
b(f,h);return n(b,{resize:function(c,a){var d=c|0,f=a|0||d;if(d===m.width&&f===m.height)return b;for(var e=m.colorAttachments,h=0;h<e.length;++h)g(e[h],d,f);g(m.depthAttachment,d,f);g(m.stencilAttachment,d,f);g(m.depthStencilAttachment,d,f);m.width=b.width=d;m.height=b.height=f;u(m);return b},_reglType:"framebuffer",_framebuffer:m,destroy:function(){C(m);y(m)}})}var k={cur:null,next:null,dirty:!1},R=["rgba"],H=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&H.push("srgba");l.ext_color_buffer_half_float&&
H.push("rgba16f","rgb16f");l.webgl_color_buffer_float&&H.push("rgba32f");var G=["uint8"];l.oes_texture_half_float&&G.push("half float","float16");l.oes_texture_float&&G.push("float","float32");var O=0,J={};return n(k,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof c)?a:null},create:D,createCube:function(c){function a(c){var f,e={color:null},h=0,u=null;f="rgba";var p="uint8",b=1;if("number"===typeof c)h=c|0;else if(c){"shape"in c?
h=c.shape[0]:("radius"in c&&(h=c.radius|0),"width"in c?h=c.width|0:"height"in c&&(h=c.height|0));if("color"in c||"colors"in c)u=c.color||c.colors,Array.isArray(u);u||("colorCount"in c&&(b=c.colorCount|0),"colorType"in c&&(p=c.colorType),"colorFormat"in c&&(f=c.colorFormat));"depth"in c&&(e.depth=c.depth);"stencil"in c&&(e.stencil=c.stencil);"depthStencil"in c&&(e.depthStencil=c.depthStencil)}else h=1;if(u)if(Array.isArray(u))for(c=[],f=0;f<u.length;++f)c[f]=u[f];else c=[u];else for(c=Array(b),u={radius:h,
format:f,type:p},f=0;f<b;++f)c[f]=t.createCube(u);e.color=Array(c.length);for(f=0;f<c.length;++f)b=c[f],h=h||b.width,e.color[f]={target:34069,data:c[f]};for(f=0;6>f;++f){for(b=0;b<c.length;++b)e.color[b].target=34069+f;0<f&&(e.depth=d[0].depth,e.stencil=d[0].stencil,e.depthStencil=d[0].depthStencil);if(d[f])d[f](e);else d[f]=D(e)}return n(a,{width:h,height:h,color:c})}var d=Array(6);a(c);return n(a,{faces:d,resize:function(c){var f=c|0;if(f===a.width)return a;var e=a.color;for(c=0;c<e.length;++c)e[c].resize(f);
for(c=0;6>c;++c)d[c].resize(f);a.width=a.height=f;return a},_reglType:"framebufferCube",destroy:function(){d.forEach(function(c){c.destroy()})}})},clear:function(){v(J).forEach(C)},restore:function(){v(J).forEach(function(c){c.framebuffer=b.createFramebuffer();u(c)})}})}},{"./util/extend":23,"./util/values":31}],13:[function(b,g,k){g.exports=function(b,n){var e=1;n.ext_texture_filter_anisotropic&&(e=b.getParameter(34047));var a=1,m=1;n.webgl_draw_buffers&&(a=b.getParameter(34852),m=b.getParameter(36063));
return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(n).filter(function(a){return!!n[a]}),maxAnisotropic:e,maxDrawbuffers:a,maxColorAttachments:m,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),
maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938)}}},{}],14:[function(b,g,k){var v=b("./util/is-typed-array");g.exports=
function(b,e,a,m,l,z){return function(l){var z;z=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var w=0,q=0,h=m.framebufferWidth,d=m.framebufferHeight,f=null;v(l)?f=l:l&&(w=l.x|0,q=l.y|0,h=(l.width||m.framebufferWidth-w)|0,d=(l.height||m.framebufferHeight-q)|0,f=l.data||null);a();l=h*d*4;f||(5121===z?f=new Uint8Array(l):5126===z&&(f=f||new Float32Array(l)));b.pixelStorei(3333,4);b.readPixels(w,q,h,d,6408,z,f);return f}}},{"./util/is-typed-array":26}],15:[function(b,g,k){var v=
b("./util/values"),n=[];n[32854]=2;n[32855]=2;n[36194]=2;n[33189]=2;n[36168]=1;n[34041]=4;n[35907]=4;n[34836]=16;n[34842]=8;n[34843]=6;g.exports=function(e,a,b,l,z){function t(a){this.id=q++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;z.profile&&(this.stats={size:0})}function x(a){var f=a.renderbuffer;e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(f);a.renderbuffer=null;a.refCount=0;delete h[a.id];l.renderbufferCount--}var w={rgba4:32854,rgb565:36194,"rgb5 a1":32855,
depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(w.srgba=35907);a.ext_color_buffer_half_float&&(w.rgba16f=34842,w.rgb16f=34843);a.webgl_color_buffer_float&&(w.rgba32f=34836);var q=0,h={};t.prototype.decRef=function(){0>=--this.refCount&&x(this)};z.profile&&(l.getTotalRenderbufferSize=function(){var a=0;Object.keys(h).forEach(function(f){a+=h[f].stats.size});return a});return{create:function(a,f){function b(a,d){var c=0,f=0,h=32854;"object"===typeof a&&a?("shape"in a?(f=a.shape,c=f[0]|
0,f=f[1]|0):("radius"in a&&(c=f=a.radius|0),"width"in a&&(c=a.width|0),"height"in a&&(f=a.height|0)),"format"in a&&(h=w[a.format])):"number"===typeof a?(c=a|0,f="number"===typeof d?d|0:c):a||(c=f=1);if(c!==p.width||f!==p.height||h!==p.format)return b.width=p.width=c,b.height=p.height=f,p.format=h,e.bindRenderbuffer(36161,p.renderbuffer),e.renderbufferStorage(36161,h,c,f),z.profile&&(p.stats.size=n[p.format]*p.width*p.height),b}var p=new t(e.createRenderbuffer());h[p.id]=p;l.renderbufferCount++;b(a,
f);b.resize=function(a,d){var c=a|0,f=d|0||c;if(c===p.width&&f===p.height)return b;b.width=p.width=c;b.height=p.height=f;e.bindRenderbuffer(36161,p.renderbuffer);e.renderbufferStorage(36161,p.format,c,f);z.profile&&(p.stats.size=n[p.format]*p.width*p.height);return b};b._reglType="renderbuffer";b._renderbuffer=p;z.profile&&(b.stats=p.stats);b.destroy=function(){p.decRef()};return b},clear:function(){v(h).forEach(x)},restore:function(){v(h).forEach(function(a){a.renderbuffer=e.createRenderbuffer();
e.bindRenderbuffer(36161,a.renderbuffer);e.renderbufferStorage(36161,a.format,a.width,a.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/values":31}],16:[function(b,g,k){var v=b("./util/values");g.exports=function(b,e,a,m){function l(a,d,f,c){this.name=a;this.id=d;this.location=f;this.info=c}function z(a,d){for(var f=0;f<a.length;++f)if(a[f].id===d.id){a[f].location=d.location;return}a.push(d)}function t(a,d,f){f=35632===a?q:h;var c=f[d];if(!c){var r=e.str(d),c=b.createShader(a);b.shaderSource(c,
r);b.compileShader(c);f[d]=c}return c}function x(a,d){this.id=r++;this.fragId=a;this.vertId=d;this.program=null;this.uniforms=[];this.attributes=[];m.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function w(a,d){var f,c;f=t(35632,a.fragId);c=t(35633,a.vertId);var h=a.program=b.createProgram();b.attachShader(h,f);b.attachShader(h,c);b.linkProgram(h);var r=b.getProgramParameter(h,35718);m.profile&&(a.stats.uniformsCount=r);var u=a.uniforms;for(f=0;f<r;++f)if(c=b.getActiveUniform(h,f))if(1<
c.size)for(var q=0;q<c.size;++q){var w=c.name.replace("[0]","["+q+"]");z(u,new l(w,e.id(w),b.getUniformLocation(h,w),c))}else z(u,new l(c.name,e.id(c.name),b.getUniformLocation(h,c.name),c));r=b.getProgramParameter(h,35721);m.profile&&(a.stats.attributesCount=r);u=a.attributes;for(f=0;f<r;++f)(c=b.getActiveAttrib(h,f))&&z(u,new l(c.name,e.id(c.name),b.getAttribLocation(h,c.name),c))}var q={},h={},d={},f=[],r=0;m.profile&&(a.getMaxUniformsCount=function(){var a=0;f.forEach(function(d){d.stats.uniformsCount>
a&&(a=d.stats.uniformsCount)});return a},a.getMaxAttributesCount=function(){var a=0;f.forEach(function(d){d.stats.attributesCount>a&&(a=d.stats.attributesCount)});return a});return{clear:function(){var e=b.deleteShader.bind(b);v(q).forEach(e);q={};v(h).forEach(e);h={};f.forEach(function(a){b.deleteProgram(a.program)});f.length=0;d={};a.shaderCount=0},program:function(e,h,b){a.shaderCount++;var c=d[h];c||(c=d[h]={});var r=c[e];r||(r=new x(h,e),w(r,b),c[e]=r,f.push(r));return r},restore:function(){q=
{};h={};for(var a=0;a<f.length;++a)w(f[a])},shader:t,frag:-1,vert:-1}}},{"./util/values":31}],17:[function(b,g,k){g.exports=function(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(b,g,k){g.exports=function(){var b={"":0},n=[""];return{id:function(e){var a=b[e];if(a)return a;a=b[e]=n.length;n.push(e);return a},str:function(e){return n[e]}}}},{}],19:[function(b,g,k){function v(c){return Array.isArray(c)&&
(0===c.length||"number"===typeof c[0])}function n(c){return Array.isArray(c)&&0!==c.length&&d(c[0])?!0:!1}function e(c){return Object.prototype.toString.call(c)}function a(c){if(!c)return!1;var a=e(c);return 0<=B.indexOf(a)?!0:v(c)||n(c)||w(c)}function m(c,a){36193===c.type?(c.data=h(a),q.freeType(a)):c.data=a}function l(a,d,f,e,h,b){a="undefined"!==typeof y[a]?y[a]:A[a]*c[d];b&&(a*=6);if(h){for(e=0;1<=f;)e+=a*f*f,f/=2;return e}return a*f*e}var z=b("./util/extend"),t=b("./util/values"),x=b("./util/is-typed-array"),
w=b("./util/is-ndarray"),q=b("./util/pool"),h=b("./util/to-half-float"),d=b("./util/is-array-like");k=b("./constants/arraytypes.json");var f=b("./constants/arraytypes.json"),r=[9984,9986,9985,9987],p=[0,6409,6410,6407,6408],A={};A[6409]=A[6406]=A[6402]=1;A[34041]=A[6410]=2;A[6407]=A[35904]=3;A[6408]=A[35906]=4;var B=Object.keys(k).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),c=[];c[5121]=1;c[5126]=4;c[36193]=2;c[5123]=
2;c[5125]=4;var y=[];y[32854]=2;y[32855]=2;y[36194]=2;y[34041]=4;y[33776]=.5;y[33777]=.5;y[33778]=1;y[33779]=1;y[35986]=.5;y[35987]=1;y[34798]=1;y[35840]=.5;y[35841]=.25;y[35842]=.5;y[35843]=.25;y[36196]=.5;g.exports=function(c,b,y,g,k,B,G){function O(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.height=this.width=this.colorSpace=0;this.channels=4}function J(c,a){c.internalformat=a.internalformat;c.format=a.format;
c.type=a.type;c.compressed=a.compressed;c.premultiplyAlpha=a.premultiplyAlpha;c.flipY=a.flipY;c.unpackAlignment=a.unpackAlignment;c.colorSpace=a.colorSpace;c.width=a.width;c.height=a.height;c.channels=a.channels}function I(c,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(c.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(c.flipY=a.flipY);"alignment"in a&&(c.unpackAlignment=a.alignment);"colorSpace"in a&&(c.colorSpace=aa[a.colorSpace]);"type"in a&&(c.type=da[a.type]);var d=c.width,f=c.height,
e=c.channels,h=!1;"shape"in a?(d=a.shape[0],f=a.shape[1],3===a.shape.length&&(e=a.shape[2],h=!0)):("radius"in a&&(d=f=a.radius),"width"in a&&(d=a.width),"height"in a&&(f=a.height),"channels"in a&&(e=a.channels,h=!0));c.width=d|0;c.height=f|0;c.channels=e|0;d=!1;"format"in a&&(d=a.format,f=c.internalformat=fa[d],c.format=xa[f],d in da&&!("type"in a)&&(c.type=da[d]),d in ga&&(c.compressed=!0),d=!0);!h&&d?c.channels=A[c.format]:h&&!d&&c.channels!==p[c.format]&&(c.format=c.internalformat=p[c.channels])}}
function P(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function L(){O.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function F(c,b){var u=null;a(b)?u=b:b&&(I(c,b),"x"in b&&(c.xOffset=b.x|0),"y"in b&&(c.yOffset=b.y|0),a(b.data)&&(u=b.data));if(b.copy){var r=k.viewportWidth,l=k.viewportHeight;c.width=c.width||r-c.xOffset;c.height=c.height||
l-c.yOffset;c.needsCopy=!0}else if(!u)c.width=c.width||1,c.height=c.height||1;else if(x(u))c.data=u,"type"in b||5121!==c.type||(c.type=f[Object.prototype.toString.call(u)]|0);else if(v(u)){r=u;l=c.width*c.height*c.channels;switch(c.type){case 5121:case 5123:case 5125:case 5126:l=q.allocType(c.type,l);l.set(r);c.data=l;break;case 36193:c.data=h(r)}c.alignment=1;c.needsFree=!0}else if(w(u)){r=u.data;Array.isArray(r)||5121!==c.type||(c.type=f[Object.prototype.toString.call(r)]|0);var l=u.shape,y=u.stride,
F,A,t,z;3===l.length?(t=l[2],z=y[2]):z=t=1;F=l[0];A=l[1];l=y[0];y=y[1];c.alignment=1;c.width=F;c.height=A;c.channels=t;c.format=c.internalformat=p[t];c.needsFree=!0;F=z;u=u.offset;t=c.width;z=c.height;A=c.channels;for(var C=q.allocType(36193===c.type?5126:c.type,t*z*A),D=0,g=0;g<z;++g)for(var M=0;M<t;++M)for(var B=0;B<A;++B)C[D++]=r[l*M+y*g+F*B+u];m(c,C)}else if("[object HTMLCanvasElement]"===e(u)||"[object CanvasRenderingContext2D]"===e(u))"[object HTMLCanvasElement]"===e(u)?c.element=u:c.element=
u.canvas,c.width=c.element.width,c.height=c.element.height;else if("[object HTMLImageElement]"===e(u))c.element=u,c.width=u.naturalWidth,c.height=u.naturalHeight;else if("[object HTMLVideoElement]"===e(u))c.element=u,c.width=u.videoWidth,c.height=u.videoHeight,c.needsPoll=!0;else if(n(u)){r=u[0].length;l=u.length;y=1;if(d(u[0][0])){F=y=u[0][0].length;t=q.allocType(36193===c.type?5126:c.type,r*l*F);for(A=z=0;A<l;++A)for(C=u[A],D=0;D<r;++D)for(g=C[D],M=0;M<F;++M)t[z++]=g[M];m(c,t)}else{F=q.allocType(36193===
c.type?5126:c.type,r*l);for(z=t=0;z<l;++z)for(A=u[z],C=0;C<r;++C)F[t++]=A[C];m(c,F)}c.alignment=1;c.width=r;c.height=l;c.channels=y;c.format=c.internalformat=p[y];c.needsFree=!0}}function M(a,d,f,e,h){var b=a.element,u=a.data,r=a.internalformat,p=a.format,l=a.type,m=a.width,y=a.height;P(a);b?c.texSubImage2D(d,h,f,e,p,l,b):a.compressed?c.compressedTexSubImage2D(d,h,f,e,r,m,y,u):a.needsCopy?(g(),c.copyTexSubImage2D(d,h,f,e,a.xOffset,a.yOffset,m,y)):c.texSubImage2D(d,h,f,e,m,y,p,l,u)}function N(){return ya.pop()||
new L}function V(c){c.needsFree&&q.freeType(c.data);L.call(c);ya.push(c)}function X(){O.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function U(c,a,d){var f=c.images[0]=N();c.mipmask=1;f.width=c.width=a;f.height=c.height=d}function K(c,d){var f=null;if(a(d))f=c.images[0]=N(),J(f,c),F(f,d),c.mipmask=1;else if(I(c,d),Array.isArray(d.mipmap))for(var e=d.mipmap,h=0;h<e.length;++h)f=c.images[h]=N(),J(f,c),f.width>>=h,f.height>>=h,F(f,e[h]),c.mipmask|=1<<h;else f=
c.images[0]=N(),J(f,c),F(f,d),c.mipmask=1;J(c,c.images[0])}function Y(a,d){for(var f=a.images,e=0;e<f.length&&f[e];++e){var h=f[e],b=d,u=e,r=h.element,p=h.data,l=h.internalformat,m=h.format,y=h.type,q=h.width,n=h.height;P(h);r?c.texImage2D(b,u,m,m,y,r):h.compressed?c.compressedTexImage2D(b,u,l,q,n,0,p):h.needsCopy?(g(),c.copyTexImage2D(b,u,m,h.xOffset,h.yOffset,q,n,0)):c.texImage2D(b,u,m,q,n,0,m,y,p)}}function T(){var c=Da.pop()||new X;O.call(c);for(var a=c.mipmask=0;16>a;++a)c.images[a]=null;return c}
function W(c){for(var a=c.images,d=0;d<a.length;++d)a[d]&&V(a[d]),a[d]=null;Da.push(c)}function S(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Q(c,a){"min"in a&&(c.minFilter=ka[a.min],0<=r.indexOf(c.minFilter)&&(c.genMipmaps=!0));"mag"in a&&(c.magFilter=ja[a.mag]);var d=c.wrapS,f=c.wrapT;if("wrap"in a){var e=a.wrap;"string"===typeof e?d=f=ba[e]:Array.isArray(e)&&(d=ba[e[0]],f=ba[e[1]])}else"wrapS"in a&&(d=ba[a.wrapS]),
"wrapT"in a&&(f=ba[a.wrapT]);c.wrapS=d;c.wrapT=f;"anisotropic"in a&&(c.anisotropic=a.anisotropic);if("mipmap"in a){d=!1;switch(typeof a.mipmap){case "string":c.mipmapHint=ma[a.mipmap];d=c.genMipmaps=!0;break;case "boolean":d=c.genMipmaps=a.mipmap;break;case "object":c.genMipmaps=!1,d=!0}!d||"min"in a||(c.minFilter=9984)}}function Z(a,d){c.texParameteri(d,10241,a.minFilter);c.texParameteri(d,10240,a.magFilter);c.texParameteri(d,10242,a.wrapS);c.texParameteri(d,10243,a.wrapT);b.ext_texture_filter_anisotropic&&
c.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(d))}function ca(a){O.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new S;G.profile&&(this.stats={size:0})}function ha(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ea(){var a=sa[0];a?c.bindTexture(a.target,a.texture):c.bindTexture(3553,null)}function na(a){var d=
a.texture,f=a.unit,e=a.target;0<=f&&(c.activeTexture(33984+f),c.bindTexture(e,null),sa[f]=null);c.deleteTexture(d);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];B.textureCount--}var ma={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ba={repeat:10497,clamp:33071,mirror:33648},ja={nearest:9728,linear:9729},ka=z({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ja),aa={none:0,browser:37444},
da={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fa={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ga={};b.ext_srgb&&(fa.srgb=35904,fa.srgba=35906);b.oes_texture_float&&(da.float32=da["float"]=5126);b.oes_texture_half_float&&(da.float16=da["half float"]=36193);b.webgl_depth_texture&&(z(fa,{depth:6402,"depth stencil":34041}),z(da,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&z(ga,{"rgb s3tc dxt1":33776,
"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&z(ga,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&z(ga,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(ga["rgb etc1"]=36196);var ia=Array.prototype.slice.call(c.getParameter(34467));Object.keys(ga).forEach(function(c){var a=ga[c];0<=
ia.indexOf(a)&&(fa[c]=a)});var ta=Object.keys(fa);y.textureFormats=ta;var xa=ta.reduce(function(c,a){var d=fa[a];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?c[d]=d:32855===d||0<=a.indexOf("rgba")?c[d]=6408:c[d]=6407;return c},{}),ya=[],Da=[],Ea=0,la={},za=y.maxTextureUnits,sa=Array(za).map(function(){return null});z(ca.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var d=0;d<za;++d){var f=sa[d];if(f){if(0<f.bindCount)continue;f.unit=-1}sa[d]=this;a=d;break}G.profile&&
B.maxTextureUnits<a+1&&(B.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&na(this)}});G.profile&&(B.getTotalTextureSize=function(){var c=0;Object.keys(la).forEach(function(a){c+=la[a].stats.size});return c});return{create2D:function(a,d){function f(c,a){var d=e.texInfo;S.call(d);var h=T();"number"===typeof c?"number"===typeof a?U(h,c|0,a|0):U(h,c|0,c|0):c?(Q(d,c),K(h,
c)):U(h,1,1);d.genMipmaps&&(h.mipmask=(h.width<<1)-1);e.mipmask=h.mipmask;J(e,h);e.internalformat=h.internalformat;f.width=h.width;f.height=h.height;ha(e);Y(h,3553);Z(d,3553);ea();W(h);G.profile&&(e.stats.size=l(e.internalformat,e.type,h.width,h.height,d.genMipmaps,!1));return f}var e=new ca(3553);la[e.id]=e;B.textureCount++;f(a,d);f.subimage=function(c,a,d,h){a|=0;d|=0;h|=0;var b=N();J(b,e);b.width>>=h;b.height>>=h;b.width-=a;b.height-=d;F(b,c);ha(e);M(b,3553,a,d,h);ea();V(b);return f};f.resize=
function(a,d){var h=a|0,b=d|0||h;if(h===e.width&&b===e.height)return f;f.width=e.width=h;f.height=e.height=b;ha(e);for(var u=0;e.mipmask>>u;++u)c.texImage2D(3553,u,e.format,h>>u,b>>u,0,e.format,e.type,null);ea();G.profile&&(e.stats.size=l(e.internalformat,e.type,h,b,!1,!1));return f};f._reglType="texture2d";f._texture=e;G.profile&&(f.stats=e.stats);f.destroy=function(){e.decRef()};return f},createCube:function(a,d,f,e,h,b){function u(c,a,d,f,e,h){var b,m=r.texInfo;S.call(m);for(b=0;6>b;++b)p[b]=T();
if("number"===typeof c||!c)for(c=c|0||1,b=0;6>b;++b)U(p[b],c,c);else if("object"===typeof c)if(a)K(p[0],c),K(p[1],a),K(p[2],d),K(p[3],f),K(p[4],e),K(p[5],h);else if(Q(m,c),I(r,c),"faces"in c)for(c=c.faces,b=0;6>b;++b)J(p[b],r),K(p[b],c[b]);else for(b=0;6>b;++b)K(p[b],c);J(r,p[0]);r.mipmask=m.genMipmaps?(p[0].width<<1)-1:p[0].mipmask;r.internalformat=p[0].internalformat;u.width=p[0].width;u.height=p[0].height;ha(r);for(b=0;6>b;++b)Y(p[b],34069+b);Z(m,34067);ea();G.profile&&(r.stats.size=l(r.internalformat,
r.type,u.width,u.height,m.genMipmaps,!0));for(b=0;6>b;++b)W(p[b]);return u}var r=new ca(34067);la[r.id]=r;B.cubeCount++;var p=Array(6);u(a,d,f,e,h,b);u.subimage=function(c,a,d,f,e){d|=0;f|=0;e|=0;var h=N();J(h,r);h.width>>=e;h.height>>=e;h.width-=d;h.height-=f;F(h,a);ha(r);M(h,34069+c,d,f,e);ea();V(h);return u};u.resize=function(a){a|=0;if(a!==r.width){u.width=r.width=a;u.height=r.height=a;ha(r);for(var d=0;6>d;++d)for(var f=0;r.mipmask>>f;++f)c.texImage2D(34069+d,f,r.format,a>>f,a>>f,0,r.format,
r.type,null);ea();G.profile&&(r.stats.size=l(r.internalformat,r.type,u.width,u.height,!1,!0));return u}};u._reglType="textureCube";u._texture=r;G.profile&&(u.stats=r.stats);u.destroy=function(){r.decRef()};return u},clear:function(){for(var a=0;a<za;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),sa[a]=null;t(la).forEach(na);B.cubeCount=0;B.textureCount=0},getTexture:function(c){return null},restore:function(){t(la).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);
for(var d=0;32>d;++d)if(0!==(a.mipmask&1<<d))if(3553===a.target)c.texImage2D(3553,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);else for(var f=0;6>f;++f)c.texImage2D(34069+f,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);Z(a.texInfo,a.target)})}}}},{"./constants/arraytypes.json":4,"./util/extend":23,"./util/is-array-like":24,"./util/is-ndarray":25,"./util/is-typed-array":26,"./util/pool":28,"./util/to-half-float":30,"./util/values":31}],20:[function(b,
g,k){g.exports=function(b,n){function e(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function a(a,d,f){var b=t.pop()||new e;b.startQueryIndex=a;b.endQueryIndex=d;b.sum=0;b.stats=f;x.push(b)}var m=n.ext_disjoint_timer_query;if(!m)return null;var l=[],z=[],t=[],x=[],w=[],q=[];return{beginQuery:function(e){var d=l.pop()||m.createQueryEXT();m.beginQueryEXT(35007,d);z.push(d);a(z.length-1,z.length,e)},endQuery:function(){m.endQueryEXT(35007)},pushScopeStats:a,update:function(){var a,
d;a=z.length;if(0!==a){q.length=Math.max(q.length,a+1);w.length=Math.max(w.length,a+1);w[0]=0;var f=q[0]=0;for(d=a=0;d<z.length;++d){var e=z[d];m.getQueryObjectEXT(e,34919)?(f+=m.getQueryObjectEXT(e,34918),l.push(e)):z[a++]=e;w[d+1]=f;q[d+1]=a}z.length=a;for(d=a=0;d<x.length;++d){var f=x[d],b=f.startQueryIndex,e=f.endQueryIndex;f.sum+=w[e]-w[b];b=q[b];e=q[e];e===b?(f.stats.gpuTime+=f.sum/1E6,t.push(f)):(f.startQueryIndex=b,f.endQueryIndex=e,x[a++]=f)}x.length=a}},getNumPendingQueries:function(){return z.length},
clear:function(){l.push.apply(l,z);for(var a=0;a<l.length;a++)m.deleteQueryEXT(l[a]);z.length=0;l.length=0},restore:function(){z.length=0;l.length=0}}}},{}],21:[function(b,g,k){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],22:[function(b,g,k){function v(a){return Array.prototype.slice.call(a)}function n(a){return v(a).join("")}var e=b("./extend");g.exports=function(){function a(){var a=[],b=[];return e(function(){a.push.apply(a,
v(arguments))},{def:function(){var d="v"+l++;b.push(d);0<arguments.length&&(a.push(d,"="),a.push.apply(a,v(arguments)),a.push(";"));return d},toString:function(){return n([0<b.length?"var "+b+";":"",n(a)])}})}function b(){function l(a,f){d(a,f,"=",h.def(a,f),";")}var h=a(),d=a(),f=h.toString,r=d.toString;return e(function(){h.apply(h,v(arguments))},{def:h.def,entry:h,exit:d,save:l,set:function(a,d,f){l(a,d);h(a,d,"=",f,";")},toString:function(){return f()+r()}})}var l=0,z=[],t=[],x=a(),w={};return{global:x,
link:function(a){for(var e=0;e<t.length;++e)if(t[e]===a)return z[e];e="g"+l++;z.push(e);t.push(a);return e},block:a,proc:function(a,h){function d(){var a="a"+f.length;f.push(a);return a}var f=[];h=h||0;for(var r=0;r<h;++r)d();var r=b(),p=r.toString;return w[a]=e(r,{arg:d,toString:function(){return n(["function(",f.join(),"){",p(),"}"])}})},scope:b,cond:function(){var a=n(arguments),h=b(),d=b(),f=h.toString,r=d.toString;return e(h,{then:function(){h.apply(h,v(arguments));return this},"else":function(){d.apply(d,
v(arguments));return this},toString:function(){var d=r();d&&(d="else{"+d+"}");return n(["if(",a,"){",f(),"}",d])}})},compile:function(){var a=['"use strict";',x,"return {"];Object.keys(w).forEach(function(d){a.push('"',d,'":',w[d].toString(),",")});a.push("}");var e=n(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,z.concat(e)).apply(null,t)}}}},{"./extend":23}],23:[function(b,g,k){g.exports=function(b,n){for(var e=Object.keys(n),a=0;a<e.length;++a)b[e[a]]=
n[e[a]];return b}},{}],24:[function(b,g,k){var v=b("./is-typed-array");g.exports=function(b){return Array.isArray(b)||v(b)}},{"./is-typed-array":26}],25:[function(b,g,k){var v=b("./is-typed-array");g.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||v(b.data))}},{"./is-typed-array":26}],26:[function(b,g,k){var v=b("../constants/arraytypes.json");g.exports=function(b){return Object.prototype.toString.call(b)in
v}},{"../constants/arraytypes.json":4}],27:[function(b,g,k){g.exports=function(b,n){for(var e=Array(b),a=0;a<b;++a)e[a]=n(a);return e}},{}],28:[function(b,g,k){function v(a){var e,b;e=(65535<a)<<4;a>>>=e;b=(255<a)<<3;a>>>=b;e|=b;b=(15<a)<<2;a>>>=b;e|=b;b=(3<a)<<1;return e|b|a>>>b>>1}function n(e){a:{for(var b=16;268435456>=b;b*=16)if(e<=b){e=b;break a}e=0}b=a[v(e)>>2];return 0<b.length?b.pop():new ArrayBuffer(e)}function e(e){a[v(e.byteLength)>>2].push(e)}var a=b("./loop")(8,function(){return[]});
g.exports={alloc:n,free:e,allocType:function(a,e){var b=null;switch(a){case 5120:b=new Int8Array(n(e),0,e);break;case 5121:b=new Uint8Array(n(e),0,e);break;case 5122:b=new Int16Array(n(2*e),0,e);break;case 5123:b=new Uint16Array(n(2*e),0,e);break;case 5124:b=new Int32Array(n(4*e),0,e);break;case 5125:b=new Uint32Array(n(4*e),0,e);break;case 5126:b=new Float32Array(n(4*e),0,e);break;default:return null}return b.length!==e?b.subarray(0,e):b},freeType:function(a){e(a.buffer)}}},{"./loop":27}],29:[function(b,
g,k){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(b){return requestAnimationFrame(b)},cancel:function(b){return cancelAnimationFrame(b)}}:{next:function(b){return setTimeout(b,16)},cancel:clearTimeout}},{}],30:[function(b,g,k){var v=b("./pool"),n=new Float32Array(1),e=new Uint32Array(n.buffer);g.exports=function(a){for(var b=v.allocType(5123,a.length),l=0;l<a.length;++l)if(isNaN(a[l]))b[l]=65535;else if(Infinity===a[l])b[l]=31744;else if(-Infinity===
a[l])b[l]=64512;else{n[0]=a[l];var z=e[0],t=z>>>31<<15,x=(z<<1>>>24)-127,z=z>>13&1023;b[l]=-24>x?t:-14>x?t+(z+1024>>-14-x):15<x?t+31744:t+(x+15<<10)+z}return b}},{"./pool":28}],31:[function(b,g,k){g.exports=function(b){return Object.keys(b).map(function(n){return b[n]})}},{}],32:[function(b,g,k){function v(a,e,b){function n(){var e=window.innerWidth,h=window.innerHeight;a!==document.body&&(h=a.getBoundingClientRect(),e=h.right-h.left,h=h.top-h.bottom);w.width=b*e;w.height=b*h;m(w.style,{width:e+"px",
height:h+"px"})}var w=document.createElement("canvas");m(w.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(w);a===document.body&&(w.style.position="absolute",m(a.style,{margin:0,padding:0}));window.addEventListener("resize",n,!1);n();return{canvas:w,onDestroy:function(){window.removeEventListener("resize",n);a.removeChild(w)}}}function n(a,e){function b(m){try{return a.getContext(m,e)}catch(n){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function e(a){return"string"===
typeof a?a.split():a}function a(a){return"string"===typeof a?document.querySelector(a):a}var m=b("./util/extend");g.exports=function(b){var m=b||{},t,x,w,q;b={};var h=[],d=[],f="undefined"===typeof window?1:window.devicePixelRatio,r=!1,p=function(a){},A=function(){};"string"===typeof m?t=document.querySelector(m):"object"===typeof m&&("string"===typeof m.nodeName&&"function"===typeof m.appendChild&&"function"===typeof m.getBoundingClientRect?t=m:"function"===typeof m.drawArrays||"function"===typeof m.drawElements?
(q=m,w=q.canvas):("gl"in m?q=m.gl:"canvas"in m?w=a(m.canvas):"container"in m&&(x=a(m.container)),"attributes"in m&&(b=m.attributes),"extensions"in m&&(h=e(m.extensions)),"optionalExtensions"in m&&(d=e(m.optionalExtensions)),"onDone"in m&&(p=m.onDone),"profile"in m&&(r=!!m.profile),"pixelRatio"in m&&(f=+m.pixelRatio)));t&&("canvas"===t.nodeName.toLowerCase()?w=t:x=t);if(!q){if(!w){t=v(x||document.body,p,f);if(!t)return null;w=t.canvas;A=t.onDestroy}q=n(w,b)}return q?{gl:q,canvas:w,container:x,extensions:h,
optionalExtensions:d,pixelRatio:f,profile:r,onDone:p,onDestroy:A}:(A(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/extend":23}],33:[function(b,g,k){(function(g){function n(){try{var c=new Uint8Array(1);c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===c.foo()&&"function"===typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(a){return!1}}function e(c,d){if((a.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<
d)throw new RangeError("Invalid typed array length");a.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(d),c.__proto__=a.prototype):(null===c&&(c=new a(d)),c.length=d);return c}function a(c,d,f){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(c,d,f);if("number"===typeof c){if("string"===typeof d)throw Error("If encoding is specified then the first argument must be a string");return z(this,c)}return m(this,c,d,f)}function m(c,d,f,b){if("number"===typeof d)throw new TypeError('"value" argument must not be a number');
if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer){d.byteLength;if(0>f||d.byteLength<f)throw new RangeError("'offset' is out of bounds");if(d.byteLength<f+(b||0))throw new RangeError("'length' is out of bounds");d=void 0===f&&void 0===b?new Uint8Array(d):void 0===b?new Uint8Array(d,f):new Uint8Array(d,f,b);a.TYPED_ARRAY_SUPPORT?(c=d,c.__proto__=a.prototype):c=t(c,d);return c}if("string"===typeof d){b=c;c=f;if("string"!==typeof c||""===c)c="utf8";if(!a.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');
f=q(d,c)|0;b=e(b,f);d=b.write(d,c);d!==f&&(b=b.slice(0,d));return b}return x(c,d)}function l(c){if("number"!==typeof c)throw new TypeError('"size" argument must be a number');}function z(c,d){l(d);c=e(c,0>d?0:w(d)|0);if(!a.TYPED_ARRAY_SUPPORT)for(var f=0;f<d;++f)c[f]=0;return c}function t(c,a){var d=w(a.length)|0;c=e(c,d);for(var f=0;f<d;f+=1)c[f]=a[f]&255;return c}function x(c,d){if(a.isBuffer(d)){var f=w(d.length)|0;c=e(c,f);if(0===c.length)return c;d.copy(c,0,0,f);return c}if(d){if("undefined"!==
typeof ArrayBuffer&&d.buffer instanceof ArrayBuffer||"length"in d)return(f="number"!==typeof d.length)||(f=d.length,f=f!==f),f?e(c,0):t(c,d);if("Buffer"===d.type&&I(d.data))return t(c,d.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function w(c){if(c>=(a.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(a.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+
" bytes");return c|0}function q(c,d){if(a.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var f=c.length;if(0===f)return 0;for(var e=!1;;)switch(d){case "ascii":case "latin1":case "binary":return f;case "utf8":case "utf-8":case void 0:return R(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;
case "base64":return O.toByteArray(E(c)).length;default:if(e)return R(c).length;d=(""+d).toLowerCase();e=!0}}function h(c,a,d){var f=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===d||d>this.length)d=this.length;if(0>=d)return"";d>>>=0;a>>>=0;if(d<=a)return"";for(c||(c="utf8");;)switch(c){case "hex":c=a;a=d;d=this.length;if(!c||0>c)c=0;if(!a||0>a||a>d)a=d;f="";for(d=c;d<a;++d)c=f,f=this[d],f=16>f?"0"+f.toString(16):f.toString(16),f=c+f;return f;case "utf8":case "utf-8":return p(this,
a,d);case "ascii":c="";for(d=Math.min(this.length,d);a<d;++a)c+=String.fromCharCode(this[a]&127);return c;case "latin1":case "binary":c="";for(d=Math.min(this.length,d);a<d;++a)c+=String.fromCharCode(this[a]);return c;case "base64":return a=0===a&&d===this.length?O.fromByteArray(this):O.fromByteArray(this.slice(a,d)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,d);d="";for(c=0;c<a.length;c+=2)d+=String.fromCharCode(a[c]+256*a[c+1]);return d;default:if(f)throw new TypeError("Unknown encoding: "+
c);c=(c+"").toLowerCase();f=!0}}function d(c,a,d){var f=c[a];c[a]=c[d];c[d]=f}function f(c,d,f,e,b){if(0===c.length)return-1;"string"===typeof f?(e=f,f=0):2147483647<f?f=2147483647:-2147483648>f&&(f=-2147483648);f=+f;isNaN(f)&&(f=b?0:c.length-1);0>f&&(f=c.length+f);if(f>=c.length){if(b)return-1;f=c.length-1}else if(0>f)if(b)f=0;else return-1;"string"===typeof d&&(d=a.from(d,e));if(a.isBuffer(d))return 0===d.length?-1:r(c,d,f,e,b);if("number"===typeof d)return d&=255,a.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?b?Uint8Array.prototype.indexOf.call(c,d,f):Uint8Array.prototype.lastIndexOf.call(c,d,f):r(c,[d],f,e,b);throw new TypeError("val must be string, number or Buffer");}function r(c,a,d,f,e){function b(c,a){return 1===h?c[a]:c.readUInt16BE(a*h)}var h=1,u=c.length,r=a.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>c.length||2>a.length)return-1;h=2;u/=2;r/=2;d/=2}if(e)for(f=-1;d<u;d++)if(b(c,d)===b(a,-1===
f?0:d-f)){if(-1===f&&(f=d),d-f+1===r)return f*h}else-1!==f&&(d-=d-f),f=-1;else for(d+r>u&&(d=u-r);0<=d;d--){u=!0;for(f=0;f<r;f++)if(b(c,d+f)!==b(a,f)){u=!1;break}if(u)return d}return-1}function p(c,a,d){d=Math.min(c.length,d);for(var f=[];a<d;){var e=c[a],b=null,h=239<e?4:223<e?3:191<e?2:1;if(a+h<=d){var u,r,p;switch(h){case 1:128>e&&(b=e);break;case 2:u=c[a+1];128===(u&192)&&(e=(e&31)<<6|u&63,127<e&&(b=e));break;case 3:u=c[a+1];r=c[a+2];128===(u&192)&&128===(r&192)&&(e=(e&15)<<12|(u&63)<<6|r&63,
2047<e&&(55296>e||57343<e)&&(b=e));break;case 4:u=c[a+1],r=c[a+2],p=c[a+3],128===(u&192)&&128===(r&192)&&128===(p&192)&&(e=(e&15)<<18|(u&63)<<12|(r&63)<<6|p&63,65535<e&&1114112>e&&(b=e))}}null===b?(b=65533,h=1):65535<b&&(b-=65536,f.push(b>>>10&1023|55296),b=56320|b&1023);f.push(b);a+=h}c=f.length;if(c<=P)f=String.fromCharCode.apply(String,f);else{d="";for(a=0;a<c;)d+=String.fromCharCode.apply(String,f.slice(a,a+=P));f=d}return f}function A(c,a,d){if(0!==c%1||0>c)throw new RangeError("offset is not uint");
if(c+a>d)throw new RangeError("Trying to access beyond buffer length");}function B(c,d,f,e,b,h){if(!a.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>b||d<h)throw new RangeError('"value" argument is out of bounds');if(f+e>c.length)throw new RangeError("Index out of range");}function c(c,a,d,f){0>a&&(a=65535+a+1);for(var e=0,b=Math.min(c.length-d,2);e<b;++e)c[d+e]=(a&255<<8*(f?e:1-e))>>>8*(f?e:1-e)}function y(c,a,d,f){0>a&&(a=4294967295+a+1);for(var e=0,b=Math.min(c.length-
d,4);e<b;++e)c[d+e]=a>>>8*(f?e:3-e)&255}function C(c,a,d,f,e,b){if(d+f>c.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("Index out of range");}function u(c,a,d,f,e){e||C(c,a,d,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(c,a,d,f,23,4);return d+4}function D(c,a,d,f,e){e||C(c,a,d,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(c,a,d,f,52,8);return d+8}function E(c){c=c.trim?c.trim():c.replace(/^\s+|\s+$/g,"");c=c.replace(L,"");if(2>c.length)return"";
for(;0!==c.length%4;)c+="=";return c}function R(c,a){a=a||Infinity;for(var d,f=c.length,e=null,b=[],h=0;h<f;++h){d=c.charCodeAt(h);if(55295<d&&57344>d){if(!e){if(56319<d){-1<(a-=3)&&b.push(239,191,189);continue}else if(h+1===f){-1<(a-=3)&&b.push(239,191,189);continue}e=d;continue}if(56320>d){-1<(a-=3)&&b.push(239,191,189);e=d;continue}d=(e-55296<<10|d-56320)+65536}else e&&-1<(a-=3)&&b.push(239,191,189);e=null;if(128>d){if(0>--a)break;b.push(d)}else if(2048>d){if(0>(a-=2))break;b.push(d>>6|192,d&63|
128)}else if(65536>d){if(0>(a-=3))break;b.push(d>>12|224,d>>6&63|128,d&63|128)}else if(1114112>d){if(0>(a-=4))break;b.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return b}function H(c){for(var a=[],d=0;d<c.length;++d)a.push(c.charCodeAt(d)&255);return a}function G(c,a,d,f){for(var e=0;e<f&&!(e+d>=a.length||e>=c.length);++e)a[e+d]=c[e];return e}var O=b("base64-js"),J=b("ieee754"),I=b("isarray");k.Buffer=a;k.SlowBuffer=function(c){+c!=c&&(c=0);return a.alloc(+c)};
k.INSPECT_MAX_BYTES=50;a.TYPED_ARRAY_SUPPORT=void 0!==g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:n();k.kMaxLength=a.TYPED_ARRAY_SUPPORT?2147483647:1073741823;a.poolSize=8192;a._augment=function(c){c.__proto__=a.prototype;return c};a.from=function(c,a,d){return m(null,c,a,d)};a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&($jscomp.initSymbol(),
Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})));a.alloc=function(c,a,d){l(c);c=0>=c?e(null,c):void 0!==a?"string"===typeof d?e(null,c).fill(a,d):e(null,c).fill(a):e(null,c);return c};a.allocUnsafe=function(c){return z(null,c)};a.allocUnsafeSlow=function(c){return z(null,c)};a.isBuffer=function(c){return!(null==c||!c._isBuffer)};a.compare=function(c,d){if(!a.isBuffer(c)||!a.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(c===d)return 0;for(var f=c.length,e=d.length,
b=0,h=Math.min(f,e);b<h;++b)if(c[b]!==d[b]){f=c[b];e=d[b];break}return f<e?-1:e<f?1:0};a.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(c,d){if(!I(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return a.alloc(0);var f;if(void 0===d)for(f=d=0;f<c.length;++f)d+=c[f].length;
var e=a.allocUnsafe(d),b=0;for(f=0;f<c.length;++f){var h=c[f];if(!a.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(e,b);b+=h.length}return e};a.byteLength=q;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<c;a+=2)d(this,a,a+1);return this};a.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var a=0;a<c;a+=4)d(this,a,a+3),d(this,a+1,a+2);return this};a.prototype.swap64=function(){var c=this.length;if(0!==c%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<c;a+=8)d(this,a,a+7),d(this,a+1,a+6),d(this,a+2,a+5),d(this,a+3,a+4);return this};a.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?p(this,0,c):h.apply(this,arguments)};a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");
return this===c?!0:0===a.compare(this,c)};a.prototype.inspect=function(){var c="",a=k.INSPECT_MAX_BYTES;0<this.length&&(c=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(c+=" ... "));return"<Buffer "+c+">"};a.prototype.compare=function(c,d,f,e,b){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===d&&(d=0);void 0===f&&(f=c?c.length:0);void 0===e&&(e=0);void 0===b&&(b=this.length);if(0>d||f>c.length||0>e||b>this.length)throw new RangeError("out of range index");
if(e>=b&&d>=f)return 0;if(e>=b)return-1;if(d>=f)return 1;d>>>=0;f>>>=0;e>>>=0;b>>>=0;if(this===c)return 0;var h=b-e,u=f-d,r=Math.min(h,u);e=this.slice(e,b);c=c.slice(d,f);for(d=0;d<r;++d)if(e[d]!==c[d]){h=e[d];u=c[d];break}return h<u?-1:u<h?1:0};a.prototype.includes=function(c,a,d){return-1!==this.indexOf(c,a,d)};a.prototype.indexOf=function(c,a,d){return f(this,c,a,d,!0)};a.prototype.lastIndexOf=function(c,a,d){return f(this,c,a,d,!1)};a.prototype.write=function(c,a,d,f){if(void 0===a)f="utf8",d=
this.length,a=0;else if(void 0===d&&"string"===typeof a)f=a,d=this.length,a=0;else if(isFinite(a))a|=0,isFinite(d)?(d|=0,void 0===f&&(f="utf8")):(f=d,d=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-a;if(void 0===d||d>e)d=e;if(0<c.length&&(0>d||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");for(e=!1;;)switch(f){case "hex":a:{a=Number(a)||0;f=this.length-a;d?(d=Number(d),d>f&&(d=
f)):d=f;f=c.length;if(0!==f%2)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(f=0;f<d;++f){e=parseInt(c.substr(2*f,2),16);if(isNaN(e)){c=f;break a}this[a+f]=e}c=f}return c;case "utf8":case "utf-8":return G(R(c,this.length-a),this,a,d);case "ascii":return G(H(c),this,a,d);case "latin1":case "binary":return G(H(c),this,a,d);case "base64":return G(O.toByteArray(E(c)),this,a,d);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":f=this.length-a;for(var b=void 0,b=e=void 0,h=[],u=0;u<
c.length&&!(0>(f-=2));++u)b=c.charCodeAt(u),e=b>>8,b%=256,h.push(b),h.push(e);return G(h,this,a,d);default:if(e)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase();e=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;a.prototype.slice=function(c,d){var f=this.length;c=~~c;d=void 0===d?f:~~d;0>c?(c+=f,0>c&&(c=0)):c>f&&(c=f);0>d?(d+=f,0>d&&(d=0)):d>f&&(d=f);d<c&&(d=c);if(a.TYPED_ARRAY_SUPPORT)f=this.subarray(c,d),f.__proto__=
a.prototype;else for(var e=d-c,f=new a(e,void 0),b=0;b<e;++b)f[b]=this[b+c];return f};a.prototype.readUIntLE=function(c,a,d){c|=0;a|=0;d||A(c,a,this.length);d=this[c];for(var f=1,e=0;++e<a&&(f*=256);)d+=this[c+e]*f;return d};a.prototype.readUIntBE=function(c,a,d){c|=0;a|=0;d||A(c,a,this.length);d=this[c+--a];for(var f=1;0<a&&(f*=256);)d+=this[c+--a]*f;return d};a.prototype.readUInt8=function(c,a){a||A(c,1,this.length);return this[c]};a.prototype.readUInt16LE=function(c,a){a||A(c,2,this.length);return this[c]|
this[c+1]<<8};a.prototype.readUInt16BE=function(c,a){a||A(c,2,this.length);return this[c]<<8|this[c+1]};a.prototype.readUInt32LE=function(c,a){a||A(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};a.prototype.readUInt32BE=function(c,a){a||A(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};a.prototype.readIntLE=function(c,a,d){c|=0;a|=0;d||A(c,a,this.length);d=this[c];for(var f=1,e=0;++e<a&&(f*=256);)d+=this[c+e]*f;d>=128*f&&(d-=Math.pow(2,
8*a));return d};a.prototype.readIntBE=function(c,a,d){c|=0;a|=0;d||A(c,a,this.length);d=a;for(var f=1,e=this[c+--d];0<d&&(f*=256);)e+=this[c+--d]*f;e>=128*f&&(e-=Math.pow(2,8*a));return e};a.prototype.readInt8=function(c,a){a||A(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};a.prototype.readInt16LE=function(c,a){a||A(c,2,this.length);var d=this[c]|this[c+1]<<8;return d&32768?d|4294901760:d};a.prototype.readInt16BE=function(c,a){a||A(c,2,this.length);var d=this[c+1]|this[c]<<8;return d&
32768?d|4294901760:d};a.prototype.readInt32LE=function(c,a){a||A(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};a.prototype.readInt32BE=function(c,a){a||A(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};a.prototype.readFloatLE=function(c,a){a||A(c,4,this.length);return J.read(this,c,!0,23,4)};a.prototype.readFloatBE=function(c,a){a||A(c,4,this.length);return J.read(this,c,!1,23,4)};a.prototype.readDoubleLE=function(c,a){a||A(c,8,this.length);return J.read(this,
c,!0,52,8)};a.prototype.readDoubleBE=function(c,a){a||A(c,8,this.length);return J.read(this,c,!1,52,8)};a.prototype.writeUIntLE=function(c,a,d,f){c=+c;a|=0;d|=0;f||B(this,c,a,d,Math.pow(2,8*d)-1,0);f=1;var e=0;for(this[a]=c&255;++e<d&&(f*=256);)this[a+e]=c/f&255;return a+d};a.prototype.writeUIntBE=function(c,a,d,f){c=+c;a|=0;d|=0;f||B(this,c,a,d,Math.pow(2,8*d)-1,0);f=d-1;var e=1;for(this[a+f]=c&255;0<=--f&&(e*=256);)this[a+f]=c/e&255;return a+d};a.prototype.writeUInt8=function(c,d,f){c=+c;d|=0;f||
B(this,c,d,1,255,0);a.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[d]=c&255;return d+1};a.prototype.writeUInt16LE=function(d,f,e){d=+d;f|=0;e||B(this,d,f,2,65535,0);a.TYPED_ARRAY_SUPPORT?(this[f]=d&255,this[f+1]=d>>>8):c(this,d,f,!0);return f+2};a.prototype.writeUInt16BE=function(d,f,e){d=+d;f|=0;e||B(this,d,f,2,65535,0);a.TYPED_ARRAY_SUPPORT?(this[f]=d>>>8,this[f+1]=d&255):c(this,d,f,!1);return f+2};a.prototype.writeUInt32LE=function(c,d,f){c=+c;d|=0;f||B(this,c,d,4,4294967295,0);a.TYPED_ARRAY_SUPPORT?
(this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255):y(this,c,d,!0);return d+4};a.prototype.writeUInt32BE=function(c,d,f){c=+c;d|=0;f||B(this,c,d,4,4294967295,0);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255):y(this,c,d,!1);return d+4};a.prototype.writeIntLE=function(c,a,d,f){c=+c;a|=0;f||(f=Math.pow(2,8*d-1),B(this,c,a,d,f-1,-f));f=0;var e=1,b=0;for(this[a]=c&255;++f<d&&(e*=256);)0>c&&0===b&&0!==this[a+f-1]&&(b=1),this[a+f]=(c/e>>0)-b&255;return a+
d};a.prototype.writeIntBE=function(c,a,d,f){c=+c;a|=0;f||(f=Math.pow(2,8*d-1),B(this,c,a,d,f-1,-f));f=d-1;var e=1,b=0;for(this[a+f]=c&255;0<=--f&&(e*=256);)0>c&&0===b&&0!==this[a+f+1]&&(b=1),this[a+f]=(c/e>>0)-b&255;return a+d};a.prototype.writeInt8=function(c,d,f){c=+c;d|=0;f||B(this,c,d,1,127,-128);a.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[d]=c&255;return d+1};a.prototype.writeInt16LE=function(d,f,e){d=+d;f|=0;e||B(this,d,f,2,32767,-32768);a.TYPED_ARRAY_SUPPORT?(this[f]=d&255,
this[f+1]=d>>>8):c(this,d,f,!0);return f+2};a.prototype.writeInt16BE=function(d,f,e){d=+d;f|=0;e||B(this,d,f,2,32767,-32768);a.TYPED_ARRAY_SUPPORT?(this[f]=d>>>8,this[f+1]=d&255):c(this,d,f,!1);return f+2};a.prototype.writeInt32LE=function(c,d,f){c=+c;d|=0;f||B(this,c,d,4,2147483647,-2147483648);a.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24):y(this,c,d,!0);return d+4};a.prototype.writeInt32BE=function(c,d,f){c=+c;d|=0;f||B(this,c,d,4,2147483647,-2147483648);
0>c&&(c=4294967295+c+1);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255):y(this,c,d,!1);return d+4};a.prototype.writeFloatLE=function(c,a,d){return u(this,c,a,!0,d)};a.prototype.writeFloatBE=function(c,a,d){return u(this,c,a,!1,d)};a.prototype.writeDoubleLE=function(c,a,d){return D(this,c,a,!0,d)};a.prototype.writeDoubleBE=function(c,a,d){return D(this,c,a,!1,d)};a.prototype.copy=function(c,d,f,e){f||(f=0);e||0===e||(e=this.length);d>=c.length&&(d=c.length);
d||(d=0);0<e&&e<f&&(e=f);if(e===f||0===c.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);c.length-d<e-f&&(e=c.length-d+f);var b=e-f;if(this===c&&f<d&&d<e)for(e=b-1;0<=e;--e)c[e+d]=this[e+f];else if(1E3>b||!a.TYPED_ARRAY_SUPPORT)for(e=0;e<b;++e)c[e+d]=this[e+f];else Uint8Array.prototype.set.call(c,this.subarray(f,
f+b),d);return b};a.prototype.fill=function(c,d,f,e){if("string"===typeof c){"string"===typeof d?(e=d,d=0,f=this.length):"string"===typeof f&&(e=f,f=this.length);if(1===c.length){var b=c.charCodeAt(0);256>b&&(c=b)}if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");if("string"===typeof e&&!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);}else"number"===typeof c&&(c&=255);if(0>d||this.length<d||this.length<f)throw new RangeError("Out of range index");if(f<=
d)return this;d>>>=0;f=void 0===f?this.length:f>>>0;c||(c=0);if("number"===typeof c)for(e=d;e<f;++e)this[e]=c;else for(c=a.isBuffer(c)?c:R((new a(c,e)).toString()),b=c.length,e=0;e<f-d;++e)this[e+d]=c[e%b];return this};var L=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":34,ieee754:35,isarray:36}],34:[function(b,g,k){function v(a,e,b){for(var t=[],x=e;x<b;x+=3)e=(a[x]<<16)+(a[x+1]<<8)+a[x+2],t.push(n[e>>
18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]);return t.join("")}k.toByteArray=function(b){var l,n,t,x,w;l=b.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");x="="===b[l-2]?2:"="===b[l-1]?1:0;w=new a(3*l/4-x);n=0<x?l-4:l;var q=0;for(l=0;l<n;l+=4)t=e[b.charCodeAt(l)]<<18|e[b.charCodeAt(l+1)]<<12|e[b.charCodeAt(l+2)]<<6|e[b.charCodeAt(l+3)],w[q++]=t>>16&255,w[q++]=t>>8&255,w[q++]=t&255;2===x?(t=e[b.charCodeAt(l)]<<2|e[b.charCodeAt(l+1)]>>4,w[q++]=t&255):1===x&&(t=e[b.charCodeAt(l)]<<
10|e[b.charCodeAt(l+1)]<<4|e[b.charCodeAt(l+2)]>>2,w[q++]=t>>8&255,w[q++]=t&255);return w};k.fromByteArray=function(a){for(var e=a.length,b=e%3,t="",x=[],w=0,q=e-b;w<q;w+=16383)x.push(v(a,w,w+16383>q?q:w+16383));1===b?(a=a[e-1],t+=n[a>>2],t+=n[a<<4&63],t+="=="):2===b&&(a=(a[e-2]<<8)+a[e-1],t+=n[a>>10],t+=n[a>>4&63],t+=n[a<<2&63],t+="=");x.push(t);return x.join("")};var n=[],e=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var a=0;64>a;++a)n[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],
e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;e[45]=62;e[95]=63})()},{}],35:[function(b,g,k){k.read=function(b,n,e,a,m){var l;l=8*m-a-1;var z=(1<<l)-1,t=z>>1,x=-7;m=e?m-1:0;var w=e?-1:1,q=b[n+m];m+=w;e=q&(1<<-x)-1;q>>=-x;for(x+=l;0<x;e=256*e+b[n+m],m+=w,x-=8);l=e&(1<<-x)-1;e>>=-x;for(x+=a;0<x;l=256*l+b[n+m],m+=w,x-=8);if(0===e)e=1-t;else{if(e===z)return l?NaN:Infinity*(q?-1:1);l+=Math.pow(2,a);e-=t}return(q?-1:1)*l*Math.pow(2,e-a)};k.write=function(b,n,e,a,
m,l){var z,t=8*l-m-1,x=(1<<t)-1,w=x>>1,q=23===m?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var h=a?1:-1,d=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,a=x):(a=Math.floor(Math.log(n)/Math.LN2),1>n*(z=Math.pow(2,-a))&&(a--,z*=2),n=1<=a+w?n+q/z:n+q*Math.pow(2,1-w),2<=n*z&&(a++,z/=2),a+w>=x?(n=0,a=x):1<=a+w?(n=(n*z-1)*Math.pow(2,m),a+=w):(n=n*Math.pow(2,w-1)*Math.pow(2,m),a=0));for(;8<=m;b[e+l]=n&255,l+=h,n/=256,m-=8);a=a<<m|n;for(t+=m;0<t;b[e+l]=a&255,l+=h,a/=256,t-=8);
b[e+l-h]|=128*d}},{}],36:[function(b,g,k){var v={}.toString;g.exports=Array.isArray||function(b){return"[object Array]"==v.call(b)}},{}],37:[function(b,g,k){g.exports=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}},{}],38:[function(b,g,k){var v=b("./identity");g.exports=function(b,e,a,m){var l,z,t,x,w,q,h,d,f=e[0],r=e[1];e=e[2];t=m[0];x=m[1];z=m[2];h=a[0];m=a[1];l=a[2];if(1E-6>Math.abs(f-h)&&1E-6>Math.abs(r-
m)&&1E-6>Math.abs(e-l))return v(b);a=f-h;m=r-m;h=e-l;d=1/Math.sqrt(a*a+m*m+h*h);a*=d;m*=d;h*=d;l=x*h-z*m;z=z*a-t*h;t=t*m-x*a;(d=Math.sqrt(l*l+z*z+t*t))?(d=1/d,l*=d,z*=d,t*=d):t=z=l=0;x=m*t-h*z;w=h*l-a*t;q=a*z-m*l;(d=Math.sqrt(x*x+w*w+q*q))?(d=1/d,x*=d,w*=d,q*=d):q=w=x=0;b[0]=l;b[1]=x;b[2]=a;b[3]=0;b[4]=z;b[5]=w;b[6]=m;b[7]=0;b[8]=t;b[9]=q;b[10]=h;b[11]=0;b[12]=-(l*f+z*r+t*e);b[13]=-(x*f+w*r+q*e);b[14]=-(a*f+m*r+h*e);b[15]=1;return b}},{"./identity":37}],39:[function(b,g,k){g.exports=function(b,n,
e,a,m){n=1/Math.tan(n/2);var l=1/(a-m);b[0]=n/e;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=n;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(m+a)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*m*a*l;b[15]=0;return b}},{}],40:[function(b,g,k){g.exports=function(a,b){if("object"!==typeof b||null===b)b={};return v(a,b.canvas||n,b.context||e,b)};var v=b("./lib/vtext"),n=null,e=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,e=n.getContext("2d"))},{"./lib/vtext":41}],41:[function(b,g,k){function v(a,
e,b){for(var d=e.textAlign||"start",f=e.textBaseline||"alphabetic",r=[1073741824,1073741824],p=[0,0],m=a.length,l=0;l<m;++l)for(var c=a[l],y=0;2>y;++y)r[y]=Math.min(r[y],c[y])|0,p[y]=Math.max(p[y],c[y])|0;var n=0;switch(d){case "center":n=-.5*(r[0]+p[0]);break;case "right":case "end":n=-p[0];break;case "left":case "start":n=-r[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var u=0;switch(f){case "hanging":case "top":u=-r[1];break;case "middle":u=-.5*(r[1]+p[1]);break;
case "alphabetic":case "ideographic":u=-3*b;break;case "bottom":u=-p[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+f+"'");}var t=1/b;"lineHeight"in e?t*=+e.lineHeight:"width"in e?t=e.width/(p[0]-r[0]):"height"in e&&(t=e.height/(p[1]-r[1]));return a.map(function(c){return[t*(c[0]+n),t*(c[1]+u)]})}function n(e,b,h,d){e=a(e,128);d=d?l(e.cells,e.positions,.25):{edges:e.cells,positions:e.positions};h=v(d.positions,b,h);e=d.edges;d="ccw"===b.orientation;z(h,e);if(b.polygons||
b.polygon||b.polyline){b=x(e,h);e=Array(b.length);for(var f=0;f<b.length;++f){for(var r=b[f],p=Array(r.length),m=0;m<r.length;++m){for(var n=r[m],c=Array(n.length),y=0;y<n.length;++y)c[y]=h[n[y]].slice();d&&c.reverse();p[m]=c}e[f]=p}return e}return b.triangles||b.triangulate||b.triangle?{cells:t(h,e,{delaunay:!1,exterior:!1,interior:!0}),positions:h}:{edges:e,positions:h}}function e(a,e,b){try{return n(a,e,b,!0)}catch(d){}try{return n(a,e,b,!1)}catch(d){}return e.polygons||e.polyline||e.polygon?[]:
e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,b,h,d){var f=d.size||64;h.font=f+"px "+(d.font||"normal");h.textAlign="start";h.textBaseline="alphabetic";h.direction="ltr";var r;r=Math.ceil(h.measureText(a).width+2*f)|0;if(8192<r)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var p=3*f;b.height<p&&(b.height=p);h.fillStyle="#000";h.fillRect(0,0,b.width,b.height);h.fillStyle="#fff";h.fillText(a,f,2*f);a=h.getImageData(0,
0,r,p);r=m(a.data,[p,r,4]).pick(-1,-1,0).transpose(1,0);return e(r,d,f)};g.exports.processPixels=e;var a=b("surface-nets"),m=b("ndarray"),l=b("simplify-planar-graph"),z=b("clean-pslg"),t=b("cdt2d"),x=b("planar-graph-to-polyline")},{cdt2d:42,"clean-pslg":60,ndarray:106,"planar-graph-to-polyline":130,"simplify-planar-graph":140,"surface-nets":162}],42:[function(b,g,k){function v(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function n(a,e){return a[0]-e[0]||a[1]-e[1]}function e(a,e,b){return e in
a?a[e]:b}var a=b("./lib/monotone"),m=b("./lib/triangulation"),l=b("./lib/delaunay"),z=b("./lib/filter");g.exports=function(b,x,w){Array.isArray(x)?(w=w||{},x=x||[]):(w=x||{},x=[]);var q=!!e(w,"delaunay",!0),h=!!e(w,"interior",!0),d=!!e(w,"exterior",!0);w=!!e(w,"infinity",!1);if(!h&&!d||0===b.length)return[];var f=a(b,x);if(q||h!==d||w){x=m(b.length,x.map(v).sort(n));for(var r=0;r<f.length;++r){var p=f[r];x.addTriangle(p[0],p[1],p[2])}q&&l(b,x);return d?h?w?z(x,0,w):x.cells():z(x,1,w):z(x,-1)}return f}},
{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(b,g,k){function v(e,a,b,l,z,t){var x=a.opposite(l,z);if(!(0>x)){if(z<l){var w=l;l=z;z=w;w=t;t=x;x=w}a.isConstraint(l,z)||0>n(e[l],e[z],e[t],e[x])&&b.push(l,z)}}var n=b("robust-in-sphere")[4];b("binary-search-bounds");g.exports=function(e,a){for(var b=[],l=e.length,z=a.stars,t=0;t<l;++t)for(var x=z[t],w=1;w<x.length;w+=2){var q=x[w];if(!(q<t||a.isConstraint(t,q))){for(var h=x[w-1],d=-1,f=1;f<x.length;f+=
2)if(x[f-1]===q){d=x[f];break}0>d||0>n(e[t],e[q],e[h],e[d])&&b.push(t,q)}}for(;0<b.length;){q=b.pop();t=b.pop();d=h=-1;x=z[t];for(l=1;l<x.length;l+=2)w=x[l-1],f=x[l],w===q?d=f:f===q&&(h=w);0>h||0>d||0<=n(e[t],e[q],e[h],e[d])||(a.flip(t,q),v(e,a,b,h,t,d),v(e,a,b,t,d,h),v(e,a,b,d,q,h),v(e,a,b,q,h,d))}}},{"binary-search-bounds":47,"robust-in-sphere":48}],44:[function(b,g,k){function v(a,e,b,n,t,x,w){this.cells=a;this.neighbor=e;this.flags=n;this.constraint=b;this.active=t;this.next=x;this.boundary=w}
function n(a,e){return a[0]-e[0]||a[1]-e[1]||a[2]-e[2]}var e=b("binary-search-bounds");g.exports=function(a,e,b){for(var z=a.cells(),t=z.length,x=0;x<t;++x){var w=z[x],q=w[0],h=w[1],d=w[2];h<d?h<q&&(w[0]=h,w[1]=d,w[2]=q):d<q&&(w[0]=d,w[1]=q,w[2]=h)}z.sort(n);for(var f=Array(t),x=0;x<f.length;++x)f[x]=0;var r=[],p=[],A=Array(3*t),g=Array(3*t),c=null;b&&(c=[]);d=new v(z,A,g,f,r,p,c);for(x=0;x<t;++x)for(var w=z[x],y=0;3>y;++y){var q=w[y],h=w[(y+1)%3],C=A[3*x+y]=d.locate(h,q,a.opposite(h,q)),u=g[3*x+
y]=a.isConstraint(q,h);0>C&&(u?p.push(x):(r.push(x),f[x]=1),b&&c.push([h,q,-1]))}if(0===e)return b?d.cells.concat(d.boundary):d.cells;t=1;x=d.active;w=d.next;a=d.flags;z=d.cells;q=d.constraint;for(h=d.neighbor;0<x.length||0<w.length;){for(;0<x.length;)if(f=x.pop(),a[f]!==-t)for(a[f]=t,r=0;3>r;++r)p=h[3*f+r],0<=p&&0===a[p]&&(q[3*f+r]?w.push(p):(x.push(p),a[p]=t));f=w;w=x;x=f;w.length=0;t=-t}for(x=t=0;x<z.length;++x)a[x]===e&&(z[t++]=z[x]);z.length=t;return b?z.concat(d.boundary):z};v.prototype.locate=
function(){var a=[0,0,0];return function(b,l,z){var t=b,x=l,w=z;l<z?l<b&&(t=l,x=z,w=b):z<b&&(t=z,x=b,w=l);if(0>t)return-1;a[0]=t;a[1]=x;a[2]=w;return e.eq(this.cells,a,n)}}()},{"binary-search-bounds":47}],45:[function(b,g,k){function v(a,e,b,l,h){this.a=a;this.b=e;this.idx=b;this.lowerIds=l;this.upperIds=h}function n(a,e,b,l){this.a=a;this.b=e;this.type=b;this.idx=l}function e(a,e){var b=a.a[0]-e.a[0]||a.a[1]-e.a[1]||a.type-e.type;return b||0!==a.type&&(b=z(a.a,a.b,e.b))?b:a.idx-e.idx}function a(a,
e){return z(a.a,a.b,e)}function m(a,e){var b;return(b=a.a[0]<e.a[0]?z(a.a,a.b,e.a):z(e.b,e.a,a.a))?b:(b=e.b[0]<a.b[0]?z(a.a,a.b,e.b):z(e.b,e.a,a.b))||a.idx-e.idx}var l=b("binary-search-bounds"),z=b("robust-orientation")[3];g.exports=function(b,g){for(var w=b.length,q=g.length,h=[],d=0;d<w;++d)h.push(new n(b[d],null,0,d));for(d=0;d<q;++d){var f=g[d],w=b[f[0]],f=b[f[1]];w[0]<f[0]?h.push(new n(w,f,2,d),new n(f,w,1,d)):w[0]>f[0]&&h.push(new n(f,w,2,d),new n(w,f,1,d))}h.sort(e);d=h[0].a[0]-(1+Math.abs(h[0].a[0]))*
Math.pow(2,-52);q=[new v([d,1],[d,0],-1,[],[],[],[])];w=[];d=0;for(f=h.length;d<f;++d){var r=h[d],p=r.type;if(0===p)for(var p=w,A=q,k=b,c=r.a,r=r.idx,y=l.lt(A,c,a),C=l.gt(A,c,a);y<C;++y){for(var u=A[y],D=u.lowerIds,E=D.length;1<E&&0<z(k[D[E-2]],k[D[E-1]],c);)p.push([D[E-1],D[E-2],r]),--E;D.length=E;D.push(r);u=u.upperIds;for(E=u.length;1<E&&0>z(k[u[E-2]],k[u[E-1]],c);)p.push([u[E-2],u[E-1],r]),--E;u.length=E;u.push(r)}else 2===p?(p=q,A=r,k=l.le(p,A,m),c=p[k],r=c.upperIds,C=r[r.length-1],c.upperIds=
[C],p.splice(k+1,0,new v(A.a,A.b,A.idx,[C],r))):(p=q,A=r,k=A.a,A.a=A.b,A.b=k,A=l.eq(p,A,m),p[A-1].upperIds=p[A].upperIds,p.splice(A,1))}return w}},{"binary-search-bounds":47,"robust-orientation":59}],46:[function(b,g,k){function v(a,e){this.stars=a;this.edges=e}function n(a,e,b){for(var n=1,t=a.length;n<t;n+=2)if(a[n-1]===e&&a[n]===b){a[n-1]=a[t-2];a[n]=a[t-1];a.length=t-2;break}}var e=b("binary-search-bounds");g.exports=function(a,e){for(var b=Array(a),n=0;n<a;++n)b[n]=[];return new v(b,e)};b=v.prototype;
b.isConstraint=function(){function a(a,e){return a[0]-e[0]||a[1]-e[1]}var b=[0,0];return function(l,n){b[0]=Math.min(l,n);b[1]=Math.max(l,n);return 0<=e.eq(this.edges,b,a)}}();b.removeTriangle=function(a,e,b){var z=this.stars;n(z[a],e,b);n(z[e],b,a);n(z[b],a,e)};b.addTriangle=function(a,e,b){var n=this.stars;n[a].push(e,b);n[e].push(b,a);n[b].push(a,e)};b.opposite=function(a,e){for(var b=this.stars[e],n=1,t=b.length;n<t;n+=2)if(b[n]===a)return b[n-1];return-1};b.flip=function(a,e){var b=this.opposite(a,
e),n=this.opposite(e,a);this.removeTriangle(a,e,b);this.removeTriangle(e,a,n);this.addTriangle(a,n,b);this.addTriangle(e,b,n)};b.edges=function(){for(var a=this.stars,e=[],b=0,n=a.length;b<n;++b)for(var t=a[b],g=0,w=t.length;g<w;g+=2)e.push([t[g],t[g+1]]);return e};b.cells=function(){for(var a=this.stars,e=[],b=0,n=a.length;b<n;++b)for(var t=a[b],g=0,w=t.length;g<w;g+=2){var q=t[g],h=t[g+1];b<Math.min(q,h)&&e.push([b,q,h])}return e}},{"binary-search-bounds":47}],47:[function(b,g,k){function v(e,a,
b,l,n){e=["function ",e,"(a,l,h,",l.join(","),"){",n?"":"var i=",b?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];n?0>a.indexOf("c")?e.push(";if(x===y){return m}else if(x<=y){"):e.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):e.push(";if(",a,"){i=m;");b?e.push("l=m+1}else{h=m-1}"):e.push("h=m-1}else{l=m+1}");e.push("}");n?e.push("return -1};"):e.push("return i};");return e.join("")}function n(e,a,b,l){return(new Function([v("A","x"+e+"y",a,["y"],l),v("P","c(x,y)"+e+"0",a,["y","c"],l),
"function dispatchBsearch",b,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",b].join("")))()}g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],48:[function(b,g,k){function v(a,f){for(var e=Array(a.length-1),b=1;b<a.length;++b)for(var h=e[b-1]=Array(a.length-1),l=0,c=0;l<a.length;++l)l!==f&&(h[c++]=
a[b][l]);return e}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var f=a.length>>1;return["sum(",n(a.slice(0,f)),",",n(a.slice(f)),")"].join("")}function e(a,f){if("m"===a.charAt(0)){if("w"===f.charAt(0)){var b=a.split("[");return["w",f.substr(1),"m",b[0].substr(1)].join("")}return["prod(",a,",",f,")"].join("")}return e(f,a)}function a(d){if(2===d.length)return[["diff(",e(d[0][0],d[1][1]),",",e(d[1][0],d[0][1]),")"].join("")];for(var f=[],b=0;b<
d.length;++b)f.push(["scale(",n(a(v(d,b))),",",b&1?"-":"",d[0][b],")"].join(""));return f}function m(a,f){for(var e=[],b=0;b<f-2;++b)e.push(["prod(m",a,"[",b,"],m",a,"[",b,"])"].join(""));return n(e)}function l(d){for(var f=[],e=[],b=Array(d),h=0;h<d;++h){b[h]=Array(d);for(var l=0;l<d;++l)b[h][l]=["m",l,"[",d-h-2,"]"].join("")}for(h=0;h<d;++h)b[0][h]="1",b[d-1][h]="w"+h;for(h=0;h<d;++h)0===(h&1)?f.push.apply(f,a(v(b,h))):e.push.apply(e,a(v(b,h)));f=n(f);e=n(e);b="exactInSphere"+d;l=[];for(h=0;h<d;++h)l.push("m"+
h);l=["function ",b,"(",l.join(),"){"];for(h=0;h<d;++h){l.push("var w",h,"=",m(h,d),";");for(var c=0;c<d;++c)c!==h&&l.push("var w",h,"m",c,"=scale(w",h,",m",c,"[0]);")}l.push("var p=",f,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",b);return(new Function("sum","diff","prod","scale",l.join("")))(x,w,t,q)}function z(a){var f=h[a.length];f||(f=h[a.length]=l(a.length));return f.apply(void 0,a)}var t=b("two-product"),x=b("robust-sum"),w=b("robust-subtract"),q=b("robust-scale"),h=[function(){return 0},
function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(l(h.length));for(var a=[],f=["slow"],e=0;6>=e;++e)a.push("a"+e),f.push("o"+e);for(var b=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;6>=e;++e)b.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");b.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");f.push(b.join(""));a=Function.apply(void 0,
f);g.exports=a.apply(void 0,[z].concat(h));for(e=0;6>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":50,"robust-subtract":51,"robust-sum":52,"two-product":53}],49:[function(b,g,k){g.exports=function(b,n,e){var a=b+n,m=a-b;n-=m;b-=a-m;return e?(e[0]=b+n,e[1]=a,e):[b+n,a]}},{}],50:[function(b,g,k){var v=b("two-product"),n=b("two-sum");g.exports=function(e,a){var b=e.length;if(1===b)return b=v(e[0],a),b[0]?b:[b[1]];var l=Array(2*b),g=[.1,.1],t=[.1,.1],x=0;v(e[0],a,g);g[0]&&(l[x++]=g[0]);for(var w=1;w<
b;++w){v(e[w],a,t);n(g[1],t[0],g);g[0]&&(l[x++]=g[0]);var q=t[1],h=g[1],d=q+h,q=h-(d-q);g[1]=d;q&&(l[x++]=q)}g[1]&&(l[x++]=g[1]);0===x&&(l[x++]=0);l.length=x;return l}},{"two-product":53,"two-sum":49}],51:[function(b,g,k){g.exports=function(b,n){var e=b.length|0,a=n.length|0;if(1===e&&1===a){var a=b[0],m=-n[0],e=a+m,l=e-a,e=(a=a-(e-l)+(m-l))?[a,e]:[e];return e}var m=Array(e+a),g=l=0,t=0,x=Math.abs,w=b[g],q=x(w),h=-n[t],d=x(h),f,r;q<d?(r=w,g+=1,g<e&&(w=b[g],q=x(w))):(r=h,t+=1,t<a&&(h=-n[t],d=x(h)));
g<e&&q<d||t>=a?(f=w,g+=1,g<e&&(w=b[g],q=x(w))):(f=h,t+=1,t<a&&(h=-n[t],d=x(h)));var p=f+r;r-=p-f;for(var A=p,k;g<e&&t<a;)q<d?(f=w,g+=1,g<e&&(w=b[g],q=x(w))):(f=h,t+=1,t<a&&(h=-n[t],d=x(h))),p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f;for(;g<e;)f=w,p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f,g+=1,g<e&&(w=b[g]);for(;t<a;)f=h,p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f,t+=1,t<a&&(h=-n[t]);r&&(m[l++]=r);A&&(m[l++]=A);l||(m[l++]=
0);m.length=l;return m}},{}],52:[function(b,g,k){g.exports=function(b,n){var e=b.length|0,a=n.length|0;if(1===e&&1===a){var a=b[0],m=n[0],e=a+m,l=e-a,e=(a=a-(e-l)+(m-l))?[a,e]:[e];return e}var m=Array(e+a),g=l=0,t=0,x=Math.abs,w=b[g],q=x(w),h=n[t],d=x(h),f,r;q<d?(r=w,g+=1,g<e&&(w=b[g],q=x(w))):(r=h,t+=1,t<a&&(h=n[t],d=x(h)));g<e&&q<d||t>=a?(f=w,g+=1,g<e&&(w=b[g],q=x(w))):(f=h,t+=1,t<a&&(h=n[t],d=x(h)));var p=f+r;r-=p-f;for(var A=p,k;g<e&&t<a;)q<d?(f=w,g+=1,g<e&&(w=b[g],q=x(w))):(f=h,t+=1,t<a&&(h=
n[t],d=x(h))),p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f;for(;g<e;)f=w,p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f,g+=1,g<e&&(w=b[g]);for(;t<a;)f=h,p=f+r,f=p-f,(f=r-f)&&(m[l++]=f),f=A+p,k=f-A,r=f-k,p-=k,A-=r,r=A+p,A=f,t+=1,t<a&&(h=n[t]);r&&(m[l++]=r);A&&(m[l++]=A);l||(m[l++]=0);m.length=l;return m}},{}],53:[function(b,g,k){g.exports=function(b,e,a){var m=b*e,l=v*b,l=l-(l-b);b-=l;var g=v*e,g=g-(g-e);e-=g;e=b*e-(m-l*g-b*g-l*e);return a?(a[0]=e,a[1]=
m,a):[e,m]};var v=+(Math.pow(2,27)+1)},{}],54:[function(b,g,k){arguments[4][49][0].apply(k,arguments)},{dup:49}],55:[function(b,g,k){arguments[4][50][0].apply(k,arguments)},{dup:50,"two-product":58,"two-sum":54}],56:[function(b,g,k){arguments[4][51][0].apply(k,arguments)},{dup:51}],57:[function(b,g,k){arguments[4][52][0].apply(k,arguments)},{dup:52}],58:[function(b,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],59:[function(b,g,k){function v(a,f){for(var e=Array(a.length-1),b=1;b<a.length;++b)for(var h=
e[b-1]=Array(a.length-1),l=0,c=0;l<a.length;++l)l!==f&&(h[c++]=a[b][l]);return e}function n(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var f=a.length>>1;return["sum(",n(a.slice(0,f)),",",n(a.slice(f)),")"].join("")}function e(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var f=[],b=0;b<a.length;++b)f.push(["scale(",n(e(v(a,b))),",",b&1?"-":"",a[0][b],")"].join(""));return f}function a(a){for(var f=
[],b=[],h=Array(a),m=0;m<a;++m){h[m]=Array(a);for(var q=0;q<a;++q)h[m][q]=["m",q,"[",a-m-1,"]"].join("")}m=[];for(q=0;q<a;++q)0===(q&1)?f.push.apply(f,e(v(h,q))):b.push.apply(b,e(v(h,q))),m.push("m"+q);f=n(f);b=n(b);a="orientation"+a+"Exact";a=["function ",a,"(",m.join(),"){var p=",f,",n=",b,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(z,l,t,x)}function m(d){var f=h[d.length];f||(f=h[d.length]=a(d.length));return f.apply(void 0,d)}var l=
b("two-product"),z=b("robust-sum"),t=b("robust-scale"),x=b("robust-subtract"),w=a(3),q=a(4),h=[function(){return 0},function(){return 0},function(a,f){return f[0]-a[0]},function(a,f,e){var b=(a[1]-e[1])*(f[0]-e[0]),h=(a[0]-e[0])*(f[1]-e[1]),l=b-h;if(0<b){if(0>=h)return l;b+=h}else if(0>b){if(0<=h)return l;b=-(b+h)}else return l;b*=3.3306690738754716E-16;return l>=b||l<=-b?l:w(a,f,e)},function(a,f,e,b){var h=a[0]-b[0],l=f[0]-b[0],c=e[0]-b[0],y=a[1]-b[1],m=f[1]-b[1],u=e[1]-b[1],n=a[2]-b[2],g=f[2]-b[2],
w=e[2]-b[2],t=l*u,k=c*m,c=c*y,u=h*u,h=h*m,y=l*y,l=n*(t-k)+g*(c-u)+w*(h-y),n=7.771561172376103E-16*((Math.abs(t)+Math.abs(k))*Math.abs(n)+(Math.abs(c)+Math.abs(u))*Math.abs(g)+(Math.abs(h)+Math.abs(y))*Math.abs(w));return l>n||-l>n?l:q(a,f,e,b)}];(function(){for(;5>=h.length;)h.push(a(h.length));for(var d=[],f=["slow"],e=0;5>=e;++e)d.push("a"+e),f.push("o"+e);for(var b=["function getOrientation(",d.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;5>=e;++e)b.push("case ",e,":return o",
e,"(",d.slice(0,e).join(),");");b.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");f.push(b.join(""));d=Function.apply(void 0,f);g.exports=d.apply(void 0,[m].concat(h));for(e=0;5>=e;++e)g.exports[e]=h[e]})()},{"robust-scale":55,"robust-subtract":56,"robust-sum":57,"two-product":58}],60:[function(b,g,k){function v(a){var c=f(a);a=d(h(c),a);return 0>a?[c,p(c,Infinity)]:0<a?[p(c,-Infinity),c]:[c,c]}function n(a,c,
d){var f=[];w(d,function(d,e){var b=c[d],h=c[e];b[0]!==h[0]&&b[0]!==h[1]&&b[1]!==h[0]&&b[1]!==h[1]&&q(a[b[0]],a[b[1]],a[h[0]],a[h[1]])&&f.push([d,e])});return f}function e(a,c,d,f){var e=[];w(d,f,function(d,f){var b=c[d];if(b[0]!==f&&b[1]!==f){var h=a[f];q(a[b[0]],a[b[1]],h,h)&&e.push([d,f])}});return e}function a(a,c,f,e,b){function p(c){if(c>=a.length)return l[c-a.length];c=a[c];return[h(c[0]),h(c[1])]}for(var l=[],m=0;m<f.length;++m){var n=f[m],q=n[0],n=n[1],g=c[q],w=c[n];if(g=A(r(a[g[0]]),r(a[g[1]]),
r(a[w[0]]),r(a[w[1]])))w=l.length+a.length,l.push(g),e.push([q,w],[n,w])}e.sort(function(c,a){if(c[0]!==a[0])return c[0]-a[0];var f=p(c[1]),e=p(a[1]);return d(f[0],e[0])||d(f[1],e[1])});for(m=e.length-1;0<=m;--m){n=e[m];q=n[0];g=c[q];w=g[0];f=g[1];var t=a[w],k=a[f];0>(t[0]-k[0]||t[1]-k[1])&&(t=w,w=f,f=t);g[0]=w;var w=g[1]=n[1],x;for(b&&(x=g[2]);0<m&&e[m-1][0]===q;)n=e[--m],n=n[1],b?c.push([w,n,x]):c.push([w,n]),w=n;b?c.push([w,f,x]):c.push([w,f])}return l}function m(a,c,d){for(var e=a.length+c.length,
b=new x(e),h=0;h<c.length;++h){var r=c[h],p=v(r[0]),l=v(r[1]);d.push([p[0],l[0],p[1],l[1]]);a.push([f(r[0]),f(r[1])])}w(d,function(c,a){b.link(c,a)});c=0;d=!0;r=Array(e);for(h=0;h<e;++h)b.find(h)===h?(r[h]=c,a[c++]=a[h]):(d=!1,r[h]=-1);a.length=c;if(d)return null;for(h=0;h<e;++h)0>r[h]&&(r[h]=r[b.find(h)]);return r}function l(a,c){return a[0]-c[0]||a[1]-c[1]}function z(a,c){var d=a[0]-c[0]||a[1]-c[1];return d?d:a[2]<c[2]?-1:a[2]>c[2]?1:0}function t(d,c,f){for(var b=Array(c.length),h=0;h<c.length;++h){var r=
c[h],p=d[r[0]],r=d[r[1]];b[h]=[Math.min(p[0],r[0]),Math.min(p[1],r[1]),Math.max(p[0],r[0]),Math.max(p[1],r[1])]}h=n(d,c,b);p=Array(d.length);for(r=0;r<d.length;++r){var q=d[r];p[r]=[q[0],q[1],q[0],q[1]]}b=e(d,c,b,p);r=a(d,c,h,b,f);d=m(d,r,p);if(0!==c.length){if(d)for(p=0;p<c.length;++p){var r=c[p],q=d[r[0]],w=d[r[1]];r[0]=Math.min(q,w);r[1]=Math.max(q,w)}else for(p=0;p<c.length;++p)r=c[p],q=r[0],w=r[1],r[0]=Math.min(q,w),r[1]=Math.max(q,w);f?c.sort(z):c.sort(l);for(p=r=1;p<c.length;++p)if(q=c[p-1],
w=c[p],w[0]!==q[0]||w[1]!==q[1]||f&&w[2]!==q[2])c[r++]=w;c.length=r}return d?!0:0<h.length||0<b.length}g.exports=function(a,c,d){var f=!1,e;if(d){e=c;for(var b=Array(c.length),h=0;h<c.length;++h){var r=c[h];b[h]=[r[0],r[1],d[h]]}c=b}for(;t(a,c,!!d);)f=!0;if(d&&f)for(e.length=0,h=d.length=0;h<c.length;++h)r=c[h],e.push([r[0],r[1]]),d.push(r[2]);return f};var x=b("union-find"),w=b("box-intersect");b("compare-cell");var q=b("robust-segment-intersect"),h=b("big-rat"),d=b("big-rat/cmp"),f=b("big-rat/to-float"),
r=b("rat-vec"),p=b("nextafter"),A=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":61,"big-rat":65,"big-rat/cmp":63,"big-rat/to-float":80,"box-intersect":81,"compare-cell":91,nextafter:92,"rat-vec":95,"robust-segment-intersect":104,"union-find":105}],61:[function(b,g,k){function v(e,b){return a(n(e[0],b[1]),n(e[1],b[0]))}g.exports=function(a,b,n,h){b=l(b,a);var d=l(h,n);h=v(b,d);if(0===m(h))return null;n=l(a,n);n=v(d,n);n=e(n,h);return z(a,t(b,n))};var n=b("big-rat/mul"),e=b("big-rat/div"),
a=b("big-rat/sub"),m=b("big-rat/sign"),l=b("rat-vec/sub"),z=b("rat-vec/add"),t=b("rat-vec/muls");b("big-rat/to-float")},{"big-rat/div":64,"big-rat/mul":74,"big-rat/sign":78,"big-rat/sub":79,"big-rat/to-float":80,"rat-vec/add":94,"rat-vec/muls":96,"rat-vec/sub":97}],62:[function(b,g,k){var v=b("./lib/rationalize");g.exports=function(b,e){return v(b[0].mul(e[1]).add(e[0].mul(b[1])),b[1].mul(e[1]))}},{"./lib/rationalize":72}],63:[function(b,g,k){g.exports=function(b,n){return b[0].mul(n[1]).cmp(n[0].mul(b[1]))}},
{}],64:[function(b,g,k){var v=b("./lib/rationalize");g.exports=function(b,e){return v(b[0].mul(e[1]),b[1].mul(e[0]))}},{"./lib/rationalize":72}],65:[function(b,g,k){function v(b,g){if(n(b))return g?z(b,v(g)):[b[0].clone(),b[1].clone()];var w=0,q,h;if(e(b))q=b.clone();else if("string"===typeof b)q=m(b);else{if(0===b)return[a(0),a(1)];if(b!==Math.floor(b))for(;b!==Math.floor(b);)b*=Math.pow(2,256),w-=256;q=a(b)}if(n(g))q.mul(g[1]),h=g[0].clone();else if(e(g))h=g.clone();else if("string"===typeof g)h=
m(g);else if(g){if(g!==Math.floor(g))for(;g!==Math.floor(g);)g*=Math.pow(2,256),w+=256;h=a(g)}else h=a(1);0<w?q=q.shln(w):0>w&&(h=h.shln(-w));return l(q,h)}var n=b("./is-rat"),e=b("./lib/is-bn"),a=b("./lib/num-to-bn"),m=b("./lib/str-to-bn"),l=b("./lib/rationalize"),z=b("./div");g.exports=v},{"./div":64,"./is-rat":66,"./lib/is-bn":70,"./lib/num-to-bn":71,"./lib/rationalize":72,"./lib/str-to-bn":73}],66:[function(b,g,k){var v=b("./lib/is-bn");g.exports=function(b){return Array.isArray(b)&&2===b.length&&
v(b[0])&&v(b[1])}},{"./lib/is-bn":70}],67:[function(b,g,k){var v=b("bn.js");g.exports=function(b){return b.cmp(new v(0))}},{"bn.js":76}],68:[function(b,g,k){g.exports=function(b){var n=b.length,e=b.words,a=0;if(1===n)a=e[0];else if(2===n)a=e[0]+67108864*e[1];else for(var m=a=0;m<n;m++)a+=e[m]*Math.pow(67108864,m);return b.sign?-a:a}},{}],69:[function(b,g,k){var v=b("double-bits"),n=b("bit-twiddle").countTrailingZeros;g.exports=function(e){var a=n(v.lo(e));if(32>a)return a;e=n(v.hi(e));return 20<e?
52:e+32}},{"bit-twiddle":75,"double-bits":77}],70:[function(b,g,k){b("bn.js");g.exports=function(b){return b&&"object"===typeof b&&!!b.words}},{"bn.js":76}],71:[function(b,g,k){var v=b("bn.js"),n=b("double-bits");g.exports=function(e){var a=n.exponent(e);return 52>a?new v(e):(new v(e*Math.pow(2,52-a))).shln(a-52)}},{"bn.js":76,"double-bits":77}],72:[function(b,g,k){var v=b("./num-to-bn"),n=b("./bn-sign");g.exports=function(e,a){var b=n(e),l=n(a);if(0===b)return[v(0),v(1)];if(0===l)return[v(0),v(0)];
0>l&&(e=e.neg(),a=a.neg());b=e.gcd(a);return b.cmpn(1)?[e.div(b),a.div(b)]:[e,a]}},{"./bn-sign":67,"./num-to-bn":71}],73:[function(b,g,k){var v=b("bn.js");g.exports=function(b){return new v(b)}},{"bn.js":76}],74:[function(b,g,k){var v=b("./lib/rationalize");g.exports=function(b,e){return v(b[0].mul(e[0]),b[1].mul(e[1]))}},{"./lib/rationalize":72}],75:[function(b,g,k){function v(e){var a=32;(e&=-e)&&a--;e&65535&&(a-=16);e&16711935&&(a-=8);e&252645135&&(a-=4);e&858993459&&(a-=2);e&1431655765&&--a;return a}
"use restrict";k.INT_BITS=32;k.INT_MAX=2147483647;k.INT_MIN=-2147483648;k.sign=function(e){return(0<e)-(0>e)};k.abs=function(e){var a=e>>31;return(e^a)-a};k.min=function(e,a){return a^(e^a)&-(e<a)};k.max=function(e,a){return e^(e^a)&-(e<a)};k.isPow2=function(e){return!(e&e-1)&&!!e};k.log2=function(e){var a,b;a=(65535<e)<<4;e>>>=a;b=(255<e)<<3;e>>>=b;a|=b;b=(15<e)<<2;e>>>=b;a|=b;b=(3<e)<<1;return a|b|e>>>b>>1};k.log10=function(e){return 1E9<=e?9:1E8<=e?8:1E7<=e?7:1E6<=e?6:1E5<=e?5:1E4<=e?4:1E3<=e?
3:100<=e?2:10<=e?1:0};k.popCount=function(e){e-=e>>>1&1431655765;e=(e&858993459)+(e>>>2&858993459);return 16843009*(e+(e>>>4)&252645135)>>>24};k.countTrailingZeros=v;k.nextPow2=function(e){e+=0===e;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;return(e|e>>>16)+1};k.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};k.parity=function(e){e^=e>>>16;e^=e>>>8;e=(e^e>>>4)&15;return 27030>>>e&1};var n=Array(256);(function(e){for(var a=0;256>a;++a){for(var b=a,l=a,n=7,b=b>>>1;b;b>>>=
1)l<<=1,l|=b&1,--n;e[a]=l<<n&255}})(n);k.reverse=function(b){return n[b&255]<<24|n[b>>>8&255]<<16|n[b>>>16&255]<<8|n[b>>>24&255]};k.interleave2=function(b,a){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|b<<1)&1431655765|((a|a<<1)&1431655765)<<1};k.deinterleave2=function(b,a){b=b>>>a&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};k.interleave3=
function(b,a,m){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b=(b|b<<2)&1227133513|((a|a<<2)&1227133513)<<1;m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;return b|((m|m<<2)&1227133513)<<2};k.deinterleave3=function(b,a){b=b>>>a&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};k.nextCombination=function(b){var a=
b|b-1;return a+1|(~a&-~a)-1>>>v(b)+1}},{}],76:[function(b,g,k){(function(b,n){function e(c,a){if(!c)throw Error(a||"Assertion failed");}function a(c,a){c.super_=a;var d=function(){};d.prototype=a.prototype;c.prototype=new d;c.prototype.constructor=c}function m(c,a,d){if(null!==c&&"object"===typeof c&&Array.isArray(c.words))return c;this.sign=!1;this.words=null;this.length=0;this.red=null;if("le"===a||"be"===a)d=a,a=10;null!==c&&this._init(c||0,a||10,d||"be")}function l(c,a,d){var b=0;for(d=Math.min(c.length,
d);a<d;a++)var f=c.charCodeAt(a)-48,b=b<<4,b=49<=f&&54>=f?b|f-49+10:17<=f&&22>=f?b|f-17+10:b|f&15;return b}function g(c,a,d,b){var f=0;for(d=Math.min(c.length,d);a<d;a++)var e=c.charCodeAt(a)-48,f=f*b,f=49<=e?f+(e-49+10):17<=e?f+(e-17+10):f+e;return f}function t(c,a){this.name=c;this.p=new m(a,16);this.n=this.p.bitLength();this.k=(new m(1)).ishln(this.n).isub(this.p);this.tmp=this._tmp()}function k(){t.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){t.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){t.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){t.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function d(c){"string"===typeof c?(c=m._prime(c),this.m=c.p,this.prime=c):(this.m=c,this.prime=null)}function f(c){d.call(this,c);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new m(1)).ishln(this.shift);
this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof b?b.exports=m:n.BN=m;m.BN=m;m.wordSize=26;m.prototype._init=function(c,a,d){if("number"===typeof c)return this._initNumber(c,a,d);if("object"===typeof c)return this._initArray(c,a,d);"hex"===a&&(a=16);e(a===(a|0)&&2<=a&&36>=a);c=c.toString().replace(/\s+/g,"");var b=0;"-"===c[0]&&b++;16===a?this._parseHex(c,b):this._parseBase(c,
a,b);"-"===c[0]&&(this.sign=!0);this.strip();"le"===d&&this._initArray(this.toArray(),a,d)};m.prototype._initNumber=function(c,a,d){0>c&&(this.sign=!0,c=-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(e(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,1],this.length=3);"le"===d&&this._initArray(this.toArray(),a,d)};m.prototype._initArray=function(c,a,d){e("number"===typeof c.length);if(0>=c.length)return this.words=
[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var b=0;if("be"===d)for(a=c.length-1,d=0;0<=a;a-=3){var f=c[a]|c[a-1]<<8|c[a-2]<<16;this.words[d]|=f<<b&67108863;this.words[d+1]=f>>>26-b&67108863;b+=24;26<=b&&(b-=26,d++)}else if("le"===d)for(d=a=0;a<c.length;a+=3)f=c[a]|c[a+1]<<8|c[a+2]<<16,this.words[d]|=f<<b&67108863,this.words[d+1]=f>>>26-b&67108863,b+=24,26<=b&&(b-=26,d++);return this.strip()};m.prototype._parseHex=
function(c,a){this.length=Math.ceil((c.length-a)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;for(var b=0,d=c.length-6,f=0;d>=a;d-=6){var e=l(c,d,d+6);this.words[f]|=e<<b&67108863;this.words[f+1]|=e>>>26-b&4194303;b+=24;26<=b&&(b-=26,f++)}d+6!==a&&(e=l(c,a,d+6),this.words[f]|=e<<b&67108863,this.words[f+1]|=e>>>26-b&4194303);this.strip()};m.prototype._parseBase=function(c,a,d){this.words=[0];this.length=1;for(var b=0,f=1;67108863>=f;f*=a)b++;b--;for(var f=f/a|0,e=
c.length-d,h=e%b,r=Math.min(e,e-h)+d,e=0;d<r;d+=b)e=g(c,d,d+b,a),this.imuln(f),67108864>this.words[0]+e?this.words[0]+=e:this._iaddn(e);if(0!==h){b=1;e=g(c,d,c.length,a);for(d=0;d<h;d++)b*=a;this.imuln(b);67108864>this.words[0]+e?this.words[0]+=e:this._iaddn(e)}};m.prototype.copy=function(c){c.words=Array(this.length);for(var a=0;a<this.length;a++)c.words[a]=this.words[a];c.length=this.length;c.sign=this.sign;c.red=this.red};m.prototype.clone=function(){var c=new m(null);this.copy(c);return c};m.prototype.strip=
function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};m.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};m.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var r=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];m.prototype.toString=function(c,a){c=c||10;if(16===c||"hex"===c){var d="",b=0;a=a|0||1;for(var f=0,h=0;h<this.length;h++){var l=
this.words[h],m=((l<<b|f)&16777215).toString(16),f=l>>>24-b&16777215,d=0!==f||h!==this.length-1?r[6-m.length]+m+d:m+d,b=b+2;26<=b&&(b-=26,h--)}for(0!==f&&(d=f.toString(16)+d);0!==d.length%a;)d="0"+d;this.sign&&(d="-"+d);return d}if(c===(c|0)&&2<=c&&36>=c){b=p[c];f=A[c];d="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)l=h.modn(f).toString(c),h=h.idivn(f),d=0!==h.cmpn(0)?r[b-l.length]+l+d:l+d;0===this.cmpn(0)&&(d="0"+d);this.sign&&(d="-"+d);return d}e(!1,"Base should be between 2 and 36")};m.prototype.toJSON=
function(){return this.toString(16)};m.prototype.toArray=function(c){this.strip();var a=Array(this.byteLength());a[0]=0;var d=this.clone();if("le"!==c)for(c=0;0!==d.cmpn(0);c++){var b=d.andln(255);d.ishrn(8);a[a.length-c-1]=b}else for(c=0;0!==d.cmpn(0);c++)b=d.andln(255),d.ishrn(8),a[c]=b;return a};m.prototype._countBits=Math.clz32?function(c){return 32-Math.clz32(c)}:function(c){var a=0;4096<=c&&(a+=13,c>>>=13);64<=c&&(a+=7,c>>>=7);8<=c&&(a+=4,c>>>=4);2<=c&&(a+=2,c>>>=2);return a+c};m.prototype._zeroBits=
function(c){if(0===c)return 26;var a=0;0===(c&8191)&&(a+=13,c>>>=13);0===(c&127)&&(a+=7,c>>>=7);0===(c&15)&&(a+=4,c>>>=4);0===(c&3)&&(a+=2,c>>>=2);0===(c&1)&&a++;return a};m.prototype.bitLength=function(){var c=0,c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c};m.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var c=0,a=0;a<this.length;a++){var d=this._zeroBits(this.words[a]),c=c+d;if(26!==d)break}return c};m.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};m.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var c=this.clone();c.sign=!this.sign;return c};m.prototype.ior=function(c){for(this.sign=this.sign||c.sign;this.length<c.length;)this.words[this.length++]=0;for(var a=0;a<c.length;a++)this.words[a]|=c.words[a];return this.strip()};m.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)};m.prototype.iand=function(c){this.sign=this.sign&&c.sign;var a;a=this.length>c.length?c:this;for(var d=
0;d<a.length;d++)this.words[d]&=c.words[d];this.length=a.length;return this.strip()};m.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)};m.prototype.ixor=function(c){this.sign=this.sign||c.sign;var a;this.length>c.length?a=this:(a=c,c=this);for(var d=0;d<c.length;d++)this.words[d]=a.words[d]^c.words[d];if(this!==a)for(;d<a.length;d++)this.words[d]=a.words[d];this.length=a.length;return this.strip()};m.prototype.xor=function(c){return this.length>c.length?
this.clone().ixor(c):c.clone().ixor(this)};m.prototype.setn=function(c,a){e("number"===typeof c&&0<=c);for(var d=c/26|0,b=c%26;this.length<=d;)this.words[this.length++]=0;this.words[d]=a?this.words[d]|1<<b:this.words[d]&~(1<<b);return this.strip()};m.prototype.iadd=function(c){if(this.sign&&!c.sign){this.sign=!1;var a=this.isub(c);this.sign=!this.sign;return this._normSign()}if(!this.sign&&c.sign)return c.sign=!1,a=this.isub(c),c.sign=!0,a._normSign();var d;this.length>c.length?d=this:(d=c,c=this);
for(var b=a=0;b<c.length;b++)a=d.words[b]+c.words[b]+a,this.words[b]=a&67108863,a>>>=26;for(;0!==a&&b<d.length;b++)a=d.words[b]+a,this.words[b]=a&67108863,a>>>=26;this.length=d.length;if(0!==a)this.words[this.length]=a,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this};m.prototype.add=function(c){if(c.sign&&!this.sign){c.sign=!1;var a=this.sub(c);c.sign=!0;return a}return!c.sign&&this.sign?(this.sign=!1,a=c.sub(this),this.sign=!0,a):this.length>c.length?this.clone().iadd(c):
c.clone().iadd(this)};m.prototype.isub=function(c){if(c.sign){c.sign=!1;var a=this.iadd(c);c.sign=!0;return a._normSign()}if(this.sign)return this.sign=!1,this.iadd(c),this.sign=!0,this._normSign();a=this.cmp(c);if(0===a)return this.sign=!1,this.length=1,this.words[0]=0,this;var d;0<a?d=this:(d=c,c=this);for(var b=0,f=0;f<c.length;f++)a=d.words[f]-c.words[f]+b,b=a>>26,this.words[f]=a&67108863;for(;0!==b&&f<d.length;f++)a=d.words[f]+b,b=a>>26,this.words[f]=a&67108863;if(0===b&&f<d.length&&d!==this)for(;f<
d.length;f++)this.words[f]=d.words[f];this.length=Math.max(this.length,f);d!==this&&(this.sign=!0);return this.strip()};m.prototype.sub=function(c){return this.clone().isub(c)};m.prototype._smallMulTo=function(c,a){a.sign=c.sign!==this.sign;a.length=this.length+c.length;for(var d=0,b=0;b<a.length-1;b++){for(var f=d>>>26,d=d&67108863,e=Math.min(b,c.length-1),h=Math.max(0,b-this.length+1);h<=e;h++)var r=(this.words[b-h]|0)*(c.words[h]|0),p=r&67108863,f=f+(r/67108864|0)|0,p=p+d|0,d=p&67108863,f=f+(p>>>
26)|0;a.words[b]=d;d=f}0!==d?a.words[b]=d:a.length--;return a.strip()};m.prototype._bigMulTo=function(c,a){a.sign=c.sign!==this.sign;a.length=this.length+c.length;for(var d=0,b=0,f=0;f<a.length-1;f++){for(var e=b,b=0,d=d&67108863,h=Math.min(f,c.length-1),r=Math.max(0,f-this.length+1);r<=h;r++)var p=(this.words[f-r]|0)*(c.words[r]|0),l=p&67108863,e=e+(p/67108864|0)|0,l=l+d|0,d=l&67108863,e=e+(l>>>26)|0,b=b+(e>>>26),e=e&67108863;a.words[f]=d;d=e}0!==d?a.words[f]=d:a.length--;return a.strip()};m.prototype.mulTo=
function(c,a){return 63>this.length+c.length?this._smallMulTo(c,a):this._bigMulTo(c,a)};m.prototype.mul=function(c){var a=new m(null);a.words=Array(this.length+c.length);return this.mulTo(c,a)};m.prototype.imul=function(c){if(0===this.cmpn(0)||0===c.cmpn(0))return this.words[0]=0,this.length=1,this;var a=this.length,d=c.length;this.sign=c.sign!==this.sign;this.length+=c.length;this.words[this.length-1]=0;for(var b=this.length-2;0<=b;b--){for(var f=0,e=0,h=Math.min(b,d-1),r=Math.max(0,b-a+1);r<=h;r++)var p=
b-r,p=this.words[p]*c.words[r],l=p&67108863,f=f+(p/67108864|0),l=l+e,e=l&67108863,f=f+(l>>>26);this.words[b]=e;this.words[b+1]+=f}f=0;for(p=1;p<this.length;p++)c=this.words[p]+f,this.words[p]=c&67108863,f=c>>>26;return this.strip()};m.prototype.imuln=function(c){e("number"===typeof c);for(var a=0,d=0;d<this.length;d++){var b=this.words[d]*c,f=(b&67108863)+(a&67108863),a=a>>26,a=a+(b/67108864|0),a=a+(f>>>26);this.words[d]=f&67108863}0!==a&&(this.words[d]=a,this.length++);return this};m.prototype.muln=
function(c){return this.clone().imuln(c)};m.prototype.sqr=function(){return this.mul(this)};m.prototype.isqr=function(){return this.mul(this)};m.prototype.ishln=function(c){e("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;var d=67108863>>>26-a<<26-a;if(0!==a){for(var b=0,f=0;f<this.length;f++){var h=this.words[f]&d;this.words[f]=this.words[f]-h<<a|b;b=h>>>26-a}b&&(this.words[f]=b,this.length++)}if(0!==c){for(f=this.length-1;0<=f;f--)this.words[f+c]=this.words[f];for(f=0;f<c;f++)this.words[f]=0;
this.length+=c}return this.strip()};m.prototype.ishrn=function(c,a,d){e("number"===typeof c&&0<=c);var b=c%26,f=Math.min((c-b)/26,this.length);c=67108863^67108863>>>b<<b;a=(a?(a-a%26)/26:0)-f;a=Math.max(0,a);if(d){for(var h=0;h<f;h++)d.words[h]=this.words[h];d.length=f}if(0!==f)if(this.length>f)for(this.length-=f,h=0;h<this.length;h++)this.words[h]=this.words[h+f];else this.words[0]=0,this.length=1;f=0;for(h=this.length-1;0<=h&&(0!==f||h>=a);h--){var r=this.words[h];this.words[h]=f<<26-b|r>>>b;f=
r&c}d&&0!==f&&(d.words[d.length++]=f);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};m.prototype.shln=function(c){return this.clone().ishln(c)};m.prototype.shrn=function(c){return this.clone().ishrn(c)};m.prototype.testn=function(c){e("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;return this.length<=c?!1:!!(this.words[c]&1<<a)};m.prototype.imaskn=function(c){e("number"===typeof c&&0<=c);var a=c%26;c=(c-a)/26;e(!this.sign,"imaskn works only with positive numbers");0!==
a&&c++;this.length=Math.min(c,this.length);0!==a&&(this.words[this.length-1]&=67108863^67108863>>>a<<a);return this.strip()};m.prototype.maskn=function(c){return this.clone().imaskn(c)};m.prototype.iaddn=function(c){e("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};m.prototype._iaddn=function(c){this.words[0]+=c;for(c=
0;c<this.length&&67108864<=this.words[c];c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;this.length=Math.max(this.length,c+1);return this};m.prototype.isubn=function(c){e("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};m.prototype.addn=function(c){return this.clone().iaddn(c)};
m.prototype.subn=function(c){return this.clone().isubn(c)};m.prototype.iabs=function(){this.sign=!1;return this};m.prototype.abs=function(){return this.clone().iabs()};m.prototype._ishlnsubmul=function(c,a,d){var b=c.length+d,f;if(this.words.length<b){var h=Array(b);for(f=0;f<this.length;f++)h[f]=this.words[f];this.words=h}else f=this.length;for(this.length=Math.max(this.length,b);f<this.length;f++)this.words[f]=0;for(f=h=0;f<c.length;f++)b=this.words[f+d]+h,h=c.words[f]*a,b-=h&67108863,h=(b>>26)-
(h/67108864|0),this.words[f+d]=b&67108863;for(;f<this.length-d;f++)b=this.words[f+d]+h,h=b>>26,this.words[f+d]=b&67108863;if(0===h)return this.strip();e(-1===h);for(f=h=0;f<this.length;f++)b=-this.words[f]+h,h=b>>26,this.words[f]=b&67108863;this.sign=!0;return this.strip()};m.prototype._wordDiv=function(c,a){var d=this.length-c.length,b=this.clone(),f=c,e=f.words[f.length-1],d=26-this._countBits(e);0!==d&&(f=f.shln(d),b.ishln(d),e=f.words[f.length-1]);var h=b.length-f.length,r;if("mod"!==a){r=new m(null);
r.length=h+1;r.words=Array(r.length);for(var p=0;p<r.length;p++)r.words[p]=0}p=b.clone()._ishlnsubmul(f,1,h);p.sign||(b=p,r&&(r.words[h]=1));for(--h;0<=h;h--){p=67108864*b.words[f.length+h]+b.words[f.length+h-1];p=Math.min(p/e|0,67108863);for(b._ishlnsubmul(f,p,h);b.sign;)p--,b.sign=!1,b._ishlnsubmul(f,1,h),0!==b.cmpn(0)&&(b.sign=!b.sign);r&&(r.words[h]=p)}r&&r.strip();b.strip();"div"!==a&&0!==d&&b.ishrn(d);return{div:r?r:null,mod:b}};m.prototype.divmod=function(c,a){e(0!==c.cmpn(0));if(this.sign&&
!c.sign){var d=this.neg().divmod(c,a),b,f;"mod"!==a&&(b=d.div.neg());"div"!==a&&(f=0===d.mod.cmpn(0)?d.mod:c.sub(d.mod));return{div:b,mod:f}}return!this.sign&&c.sign?(d=this.divmod(c.neg(),a),"mod"!==a&&(b=d.div.neg()),{div:b,mod:d.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),a):c.length>this.length||0>this.cmp(c)?{div:new m(0),mod:this}:1===c.length?"div"===a?{div:this.divn(c.words[0]),mod:null}:"mod"===a?{div:null,mod:new m(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new m(this.modn(c.words[0]))}:
this._wordDiv(c,a)};m.prototype.div=function(c){return this.divmod(c,"div").div};m.prototype.mod=function(c){return this.divmod(c,"mod").mod};m.prototype.divRound=function(c){var a=this.divmod(c);if(0===a.mod.cmpn(0))return a.div;var d=a.div.sign?a.mod.isub(c):a.mod,b=c.shrn(1);c=c.andln(1);d=d.cmp(b);return 0>d||1===c&&0===d?a.div:a.div.sign?a.div.isubn(1):a.div.iaddn(1)};m.prototype.modn=function(c){e(67108863>=c);for(var a=67108864%c,d=0,b=this.length-1;0<=b;b--)d=(a*d+this.words[b])%c;return d};
m.prototype.idivn=function(c){e(67108863>=c);for(var a=0,d=this.length-1;0<=d;d--)a=this.words[d]+67108864*a,this.words[d]=a/c|0,a%=c;return this.strip()};m.prototype.divn=function(c){return this.clone().idivn(c)};m.prototype.egcd=function(c){e(!c.sign);e(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new m(1);for(var b=new m(0),f=new m(0),h=new m(1),r=0;a.isEven()&&d.isEven();)a.ishrn(1),d.ishrn(1),++r;for(var p=d.clone(),l=a.clone();0!==a.cmpn(0);){for(;a.isEven();)a.ishrn(1),
c.isEven()&&b.isEven()?(c.ishrn(1),b.ishrn(1)):(c.iadd(p).ishrn(1),b.isub(l).ishrn(1));for(;d.isEven();)d.ishrn(1),f.isEven()&&h.isEven()?(f.ishrn(1),h.ishrn(1)):(f.iadd(p).ishrn(1),h.isub(l).ishrn(1));0<=a.cmp(d)?(a.isub(d),c.isub(f),b.isub(h)):(d.isub(a),f.isub(c),h.isub(b))}return{a:f,b:h,gcd:d.ishln(r)}};m.prototype._invmp=function(c){e(!c.sign);e(0!==c.cmpn(0));var a=this,d=c.clone(),a=a.sign?a.mod(c):a.clone();c=new m(1);for(var b=new m(0),f=d.clone();0<a.cmpn(1)&&0<d.cmpn(1);){for(;a.isEven();)a.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(f).ishrn(1);for(;d.isEven();)d.ishrn(1),b.isEven()?b.ishrn(1):b.iadd(f).ishrn(1);0<=a.cmp(d)?(a.isub(d),c.isub(b)):(d.isub(a),b.isub(c))}return 0===a.cmpn(1)?c:b};m.prototype.gcd=function(c){if(0===this.cmpn(0))return c.clone();if(0===c.cmpn(0))return this.clone();var a=this.clone();c=c.clone();a.sign=!1;c.sign=!1;for(var d=0;a.isEven()&&c.isEven();d++)a.ishrn(1),c.ishrn(1);do{for(;a.isEven();)a.ishrn(1);for(;c.isEven();)c.ishrn(1);var b=a.cmp(c);if(0>b)b=a,a=c,c=b;else if(0===
b||0===c.cmpn(1))break;a.isub(c)}while(1);return c.ishln(d)};m.prototype.invm=function(c){return this.egcd(c).a.mod(c)};m.prototype.isEven=function(){return 0===(this.words[0]&1)};m.prototype.isOdd=function(){return 1===(this.words[0]&1)};m.prototype.andln=function(c){return this.words[0]&c};m.prototype.bincn=function(c){e("number"===typeof c);var a=c%26;c=(c-a)/26;var d=1<<a;if(this.length<=c){for(a=this.length;a<c+1;a++)this.words[a]=0;this.words[c]|=d;this.length=c+1;return this}for(a=c;0!==d&&
a<this.length;a++)c=this.words[a],c+=d,d=c>>>26,c&=67108863,this.words[a]=c;0!==d&&(this.words[a]=d,this.length++);return this};m.prototype.cmpn=function(c){var a=0>c;a&&(c=-c);if(this.sign&&!a)return-1;if(!this.sign&&a)return 1;c&=67108863;this.strip();1<this.length?c=1:(a=this.words[0],c=a===c?0:a<c?-1:1);this.sign&&(c=-c);return c};m.prototype.cmp=function(c){if(this.sign&&!c.sign)return-1;if(!this.sign&&c.sign)return 1;c=this.ucmp(c);return this.sign?-c:c};m.prototype.ucmp=function(c){if(this.length>
c.length)return 1;if(this.length<c.length)return-1;for(var a=0,d=this.length-1;0<=d;d--){var b=this.words[d],f=c.words[d];if(b!==f){b<f?a=-1:b>f&&(a=1);break}}return a};m.red=function(c){return new d(c)};m.prototype.toRed=function(c){e(!this.red,"Already a number in reduction context");e(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};m.prototype.fromRed=function(){e(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
m.prototype._forceRed=function(c){this.red=c;return this};m.prototype.forceRed=function(c){e(!this.red,"Already a number in reduction context");return this._forceRed(c)};m.prototype.redAdd=function(c){e(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};m.prototype.redIAdd=function(c){e(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};m.prototype.redSub=function(c){e(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};m.prototype.redISub=
function(c){e(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};m.prototype.redShl=function(c){e(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};m.prototype.redMul=function(c){e(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};m.prototype.redIMul=function(c){e(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};m.prototype.redSqr=function(){e(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};m.prototype.redISqr=function(){e(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};m.prototype.redSqrt=function(){e(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};m.prototype.redInvm=function(){e(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};m.prototype.redNeg=
function(){e(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};m.prototype.redPow=function(c){e(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};t.prototype._tmp=function(){var c=new m(null);c.words=Array(Math.ceil(this.n/13));return c};t.prototype.ireduce=function(c){var a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),a=c.bitLength();while(a>this.n);
a=a<this.n?-1:c.ucmp(this.p);0===a?(c.words[0]=0,c.length=1):0<a?c.isub(this.p):c.strip();return c};t.prototype.split=function(c,a){c.ishrn(this.n,0,a)};t.prototype.imulK=function(c){return c.imul(this.k)};a(k,t);k.prototype.split=function(c,a){for(var d=Math.min(c.length,9),b=0;b<d;b++)a.words[b]=c.words[b];a.length=d;if(9>=c.length)c.words[0]=0,c.length=1;else{d=c.words[9];a.words[a.length++]=d&4194303;for(b=10;b<c.length;b++){var f=c.words[b];c.words[b-10]=(f&4194303)<<4|d>>>22;d=f}c.words[b-10]=
d>>>22;c.length-=9}};k.prototype.imulK=function(c){c.words[c.length]=0;c.words[c.length+1]=0;c.length+=2;for(var a,d=0,b=0;b<c.length;b++){var f=c.words[b];a=64*f;d+=977*f;a+=d/67108864|0;d&=67108863;c.words[b]=d;d=a}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};a(w,t);a(q,t);a(h,t);h.prototype.imulK=function(c){for(var a=0,d=0;d<c.length;d++){var a=19*c.words[d]+a,b=a&67108863,a=a>>>26;c.words[d]=b}0!==a&&(c.words[c.length++]=a);return c};m._prime=function(c){if(B[c])return B[c];
var a;if("k256"===c)a=new k;else if("p224"===c)a=new w;else if("p192"===c)a=new q;else if("p25519"===c)a=new h;else throw Error("Unknown prime "+c);return B[c]=a};d.prototype._verify1=function(c){e(!c.sign,"red works only with positives");e(c.red,"red works only with red numbers")};d.prototype._verify2=function(c,a){e(!c.sign&&!a.sign,"red works only with positives");e(c.red&&c.red===a.red,"red works only with red numbers")};d.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):
c.mod(this.m)._forceRed(this)};d.prototype.neg=function(c){c=c.clone();c.sign=!c.sign;return c.iadd(this.m)._forceRed(this)};d.prototype.add=function(c,a){this._verify2(c,a);var d=c.add(a);0<=d.cmp(this.m)&&d.isub(this.m);return d._forceRed(this)};d.prototype.iadd=function(c,a){this._verify2(c,a);var d=c.iadd(a);0<=d.cmp(this.m)&&d.isub(this.m);return d};d.prototype.sub=function(c,a){this._verify2(c,a);var d=c.sub(a);0>d.cmpn(0)&&d.iadd(this.m);return d._forceRed(this)};d.prototype.isub=function(c,
a){this._verify2(c,a);var d=c.isub(a);0>d.cmpn(0)&&d.iadd(this.m);return d};d.prototype.shl=function(c,a){this._verify1(c);return this.imod(c.shln(a))};d.prototype.imul=function(c,a){this._verify2(c,a);return this.imod(c.imul(a))};d.prototype.mul=function(c,a){this._verify2(c,a);return this.imod(c.mul(a))};d.prototype.isqr=function(c){return this.imul(c,c)};d.prototype.sqr=function(c){return this.mul(c,c)};d.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var a=this.m.andln(3);e(1===
a%2);if(3===a){var a=this.m.add(new m(1)).ishrn(2),d=this.pow(c,a);return d}for(var b=this.m.subn(1),f=0;0!==b.cmpn(0)&&0===b.andln(1);)f++,b.ishrn(1);e(0!==b.cmpn(0));for(var a=(new m(1)).toRed(this),d=a.redNeg(),h=this.m.subn(1).ishrn(1),r=this.m.bitLength(),r=(new m(2*r*r)).toRed(this);0!==this.pow(r,h).cmp(d);)r.redIAdd(d);h=this.pow(r,b);d=this.pow(c,b.addn(1).ishrn(1));c=this.pow(c,b);for(b=f;0!==c.cmp(a);){r=c;for(f=0;0!==r.cmp(a);f++)r=r.redSqr();e(f<b);h=this.pow(h,(new m(1)).ishln(b-f-1));
d=d.redMul(h);h=h.redSqr();c=c.redMul(h);b=f}return d};d.prototype.invm=function(c){c=c._invmp(this.m);return c.sign?(c.sign=!1,this.imod(c).redNeg()):this.imod(c)};d.prototype.pow=function(c,a){var d=[];if(0===a.cmpn(0))return new m(1);for(var b=a.clone();0!==b.cmpn(0);)d.push(b.andln(1)),b.ishrn(1);for(var f=c,e=0;e<d.length&&0===d[e];e++,f=this.sqr(f));if(++e<d.length)for(b=this.sqr(f);e<d.length;e++,b=this.sqr(b))0!==d[e]&&(f=this.mul(f,b));return f};d.prototype.convertTo=function(c){var a=c.mod(this.m);
return a===c?a.clone():a};d.prototype.convertFrom=function(c){c=c.clone();c.red=null;return c};m.mont=function(c){return new f(c)};a(f,d);f.prototype.convertTo=function(c){return this.imod(c.shln(this.shift))};f.prototype.convertFrom=function(c){c=this.imod(c.mul(this.rinv));c.red=null;return c};f.prototype.imul=function(c,a){if(0===c.cmpn(0)||0===a.cmpn(0))return c.words[0]=0,c.length=1,c;var d=c.imul(a),b=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d=d.isub(b).ishrn(this.shift);
0<=d.cmp(this.m)?b=d.isub(this.m):0>d.cmpn(0)&&(b=d.iadd(this.m));return b._forceRed(this)};f.prototype.mul=function(c,a){if(0===c.cmpn(0)||0===a.cmpn(0))return(new m(0))._forceRed(this);var d=c.mul(a),b=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d=d.isub(b).ishrn(this.shift);0<=d.cmp(this.m)?b=d.isub(this.m):0>d.cmpn(0)&&(b=d.iadd(this.m));return b._forceRed(this)};f.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],77:[function(b,g,k){(function(b){var n=!1;if("undefined"!==typeof Float64Array){var e=new Float64Array(1),a=new Uint32Array(e.buffer);e[0]=1;n=!0;1072693248===a[1]?(g.exports=function(b){e[0]=b;return[a[0],a[1]]},g.exports.pack=function(b,m){a[0]=b;a[1]=m;return e[0]},g.exports.lo=function(b){e[0]=b;return a[0]},g.exports.hi=function(b){e[0]=b;return a[1]}):1072693248===a[0]?(g.exports=function(b){e[0]=b;return[a[1],a[0]]},g.exports.pack=function(b,m){a[1]=b;a[0]=m;return e[0]},
g.exports.lo=function(b){e[0]=b;return a[1]},g.exports.hi=function(b){e[0]=b;return a[0]}):n=!1}if(!n){var m=new b(8);g.exports=function(a){m.writeDoubleLE(a,0,!0);return[m.readUInt32LE(0,!0),m.readUInt32LE(4,!0)]};g.exports.pack=function(a,b){m.writeUInt32LE(a,0,!0);m.writeUInt32LE(b,4,!0);return m.readDoubleLE(0,!0)};g.exports.lo=function(a){m.writeDoubleLE(a,0,!0);return m.readUInt32LE(0,!0)};g.exports.hi=function(a){m.writeDoubleLE(a,0,!0);return m.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>
31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var b=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:33}],78:[function(b,g,k){var v=b("./lib/bn-sign");g.exports=function(b){return v(b[0])*v(b[1])}},{"./lib/bn-sign":67}],79:[function(b,g,k){var v=b("./lib/rationalize");g.exports=function(b,
e){return v(b[0].mul(e[1]).sub(b[1].mul(e[0])),b[1].mul(e[1]))}},{"./lib/rationalize":72}],80:[function(b,g,k){var v=b("./lib/bn-to-num"),n=b("./lib/ctz");g.exports=function(b){var a=b[0];b=b[1];if(0===a.cmpn(0))return 0;var m=a.divmod(b),a=v(m.div),m=m.mod;if(0===m.cmpn(0))return a;if(a){var l=n(a)+4;b=v(m.shln(l).divRound(b));0>a&&(b=-b);return a+b*Math.pow(2,-l)}a=b.bitLength()-m.bitLength()+53;b=v(m.shln(a).divRound(b));if(1023>a)return b*Math.pow(2,-a);b*=Math.pow(2,-1023);return b*Math.pow(2,
1023-a)}},{"./lib/bn-to-num":68,"./lib/ctz":69}],81:[function(b,g,k){function v(a,b,e,l){for(var h=0,d=0,f=0,r=a.length;f<r;++f){var p=a[f],m;a:{for(m=0;m<b;++m)if(!(p[m]<=p[m+b])){m=!0;break a}m=!1}if(!m){for(m=0;m<2*b;++m)e[h++]=p[m];l[d++]=f}}return d}function n(b,e,n,q){var h=b.length,d=e.length;if(!(0>=h||0>=d)){var f=b[0].length>>>1;if(!(0>=f)){var r,p=a.mallocDouble(2*f*h),g=a.mallocInt32(h),h=v(b,f,p,g);if(0<h){if(1===f&&q)m.init(h),r=m.sweepComplete(f,n,0,h,p,g,0,h,p,g);else{b=a.mallocDouble(2*
f*d);var k=a.mallocInt32(d),d=v(e,f,b,k);0<d&&(m.init(h+d),r=1===f?m.sweepBipartite(f,n,0,h,p,g,0,d,b,k):l(f,n,q,h,p,g,d,b,k),a.free(b),a.free(k))}a.free(p);a.free(g)}return r}}}function e(a,b){z.push([a,b])}g.exports=function(a,b,l){switch(arguments.length){case 1:return z=[],n(a,a,e,!0),z;case 2:if("function"===typeof b)return n(a,a,b,!0);z=[];n(a,b,e,!1);return z;case 3:return n(a,b,l,!1);default:throw Error("box-intersect: Invalid arguments");}};var a=b("typedarray-pool"),m=b("./lib/sweep"),l=
b("./lib/intersect"),z},{"./lib/intersect":83,"./lib/sweep":87,"typedarray-pool":90}],82:[function(b,g,k){function v(b){function a(a,m){var q,h="bruteForce"+(a?"Red":"Blue")+(m?"Flip":"")+(b?"Full":"");q=["function ",h,"(",n.join(),"){","var ","es","=2*","d",";"];var d="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(b?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";a?q.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",d):q.push(d,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
b?q.push("if(y1<x0||x1<y0)continue;"):m?q.push("if(y0<=x0||x1<y0)continue;"):q.push("if(y0<x0||x1<y0)continue;");q.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");m?q.push("yi,xi"):q.push("xi,yi");q.push(");if(rv!==void 0)return rv;}}}");q=q.join("");l.push(q);t.push("return "+h+"("+n.join()+");")}var m="bruteForce"+(b?"Full":"Partial"),l=[],g=n.slice();b||g.splice(3,0,"fp");var t=["function "+m+"("+g.join()+"){"];t.push("if(re-rs>be-bs){");
b?(a(!0,!1),t.push("}else{"),a(!1,!1)):(t.push("if(fp){"),a(!0,!0),t.push("}else{"),a(!0,!1),t.push("}}else{if(fp){"),a(!1,!0),t.push("}else{"),a(!1,!1),t.push("}"));t.push("}}return "+m);m=l.join("")+t.join("");return(new Function(m))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");k.partial=v(!1);k.full=v(!0)},{}],83:[function(b,g,k){function v(a,d,b,f,e,h,r,p,l){var m=A*a;c[m]=d;c[m+1]=b;c[m+2]=f;c[m+3]=e;c[m+4]=h;c[m+5]=r;a*=B;y[a]=p;y[a+1]=l}g.exports=function(b,u,g,k,R,H,G,O,J){var I=8*
e.log2(k+G+1)*(b+1)|0,P=e.nextPow2(A*I);c.length<P&&(n.free(c),c=n.mallocInt32(P));I=e.nextPow2(B*I);y<I&&(n.free(y),y=n.mallocDouble(I));var I=0,P=2*b,L;v(I++,0,0,k,0,G,g?16:0,-Infinity,Infinity);for(g||v(I++,0,0,G,0,k,1,-Infinity,Infinity);0<I;){--I;g=I*A;var F=c[g];G=c[g+1];var M=c[g+2],N=c[g+3],V=c[g+4];g=c[g+5];k=I*B;var X=y[k],U=y[k+1],K=g&1,Y=!!(g&16),T=R,W=H,S=O;k=J;K&&(T=O,W=J,S=R,k=H);if(g&2&&(M=d(b,F,G,M,T,W,U),G>=M))continue;if(g&4&&(G=f(b,F,G,M,T,W,X),G>=M))continue;g=M-G;var Q=V-N;if(Y){if(b*
g*(g+Q)<w){L=l.scanComplete(b,F,u,G,M,T,W,N,V,S,k);if(void 0!==L)return L;continue}}else if(b*Math.min(g,Q)<t){L=a(b,F,u,K,G,M,T,W,N,V,S,k);if(void 0!==L)return L;continue}else if(b*g*Q<x){L=l.scanBipartite(b,F,u,K,G,M,T,W,N,V,S,k);if(void 0!==L)return L;continue}g=q(b,F,G,M,T,W,X,U);if(G<g)if(b*(g-G)<t){if(L=m(b,F+1,u,G,g,T,W,N,V,S,k),void 0!==L)return L}else if(F===b-2){if(L=K?l.sweepBipartite(b,u,N,V,S,k,G,g,T,W):l.sweepBipartite(b,u,G,g,T,W,N,V,S,k),void 0!==L)return L}else v(I++,F+1,G,g,N,V,
K,-Infinity,Infinity),v(I++,F+1,N,V,G,g,K^1,-Infinity,Infinity);if(g<M)if(G=z(b,F,N,V,S,k),L=S[P*G+F],Q=h(b,F,G,V,S,k,L),Q<V&&v(I++,F,g,M,Q,V,(K|4)+(Y?16:0),L,U),N<G&&v(I++,F,g,M,N,G,(K|2)+(Y?16:0),X,L),G+1===Q){if(Y)a:{N=b;V=u;k=k[G];K=2*N;G*=K;X=S[G+F];U=g;g*=K;b:for(;U<M;++U,g+=K)if(Y=W[U],Y!==k&&(Q=T[g+F],L=T[g+F+N],!(X<Q||L<X))){for(var Z=F+1;Z<N;++Z){Q=T[g+Z];L=T[g+Z+N];var ca=S[G+Z+N];if(L<S[G+Z]||ca<Q)continue b}Y=V(Y,k);if(void 0!==Y){L=Y;break a}}L=void 0}else a:{N=b;V=u;k=k[G];X=2*N;G*=
X;U=S[G+F];Y=g;g*=X;b:for(;Y<M;++Y,g+=X)if(Q=T[g+F],L=T[g+F+N],!(U<Q||L<U||K&&U===Q)){Z=W[Y];for(ca=F+1;ca<N;++ca){Q=T[g+ca];L=T[g+ca+N];var ha=S[G+ca+N];if(L<S[G+ca]||ha<Q)continue b}Q=K?V(k,Z):V(Z,k);if(void 0!==Q){L=Q;break a}}L=void 0}if(void 0!==L)return L}else if(G<Q)if(Y){if(M=r(b,F,g,M,T,W,L),g<M)if(N=h(b,F,g,M,T,W,L),F===b-2){if(g<N&&(L=l.sweepComplete(b,u,g,N,T,W,G,Q,S,k),void 0!==L)||N<M&&(L=l.sweepBipartite(b,u,N,M,T,W,G,Q,S,k),void 0!==L))return L}else g<N&&v(I++,F+1,g,N,G,Q,16,-Infinity,
Infinity),N<M&&(v(I++,F+1,N,M,G,Q,0,-Infinity,Infinity),v(I++,F+1,G,Q,N,M,1,-Infinity,Infinity))}else M=K?p(b,F,g,M,T,W,L):r(b,F,g,M,T,W,L),g<M&&(F===b-2?K?l.sweepBipartite(b,u,G,Q,S,k,g,M,T,W):l.sweepBipartite(b,u,g,M,T,W,G,Q,S,k):(v(I++,F+1,g,M,G,Q,K,-Infinity,Infinity),v(I++,F+1,G,Q,g,M,K^1,-Infinity,Infinity)))}};var n=b("typedarray-pool"),e=b("bit-twiddle");g=b("./brute");var a=g.partial,m=g.full,l=b("./sweep"),z=b("./median");b=b("./partition");var t=128,x=4194304,w=4194304,q=b("!(lo>=p0)&&!(p1>=hi)",
["p0","p1"]),h=b("lo===p0",["p0"]),d=b("lo<p0",["p0"]),f=b("hi<=p0",["p0"]),r=b("lo<=p0&&p0<=hi",["p0"]),p=b("lo<p0&&p0<=hi",["p0"]),A=6,B=2,c=n.mallocInt32(1024),y=n.mallocDouble(1024)},{"./brute":82,"./median":84,"./partition":85,"./sweep":87,"bit-twiddle":88,"typedarray-pool":90}],84:[function(b,g,k){g.exports=function(b,a,m,l,g,k){if(l<=m+1)return m;var x=m,w=l;l=l+m>>>1;for(var q=2*b,h=l,d=g[q*l+a];x<w;){if(w-x<n){for(var h=a,d=g,f=k,r=2*b,p=r*(x+1)+h,A=x+1;A<w;++A,p+=r)for(var B=d[p],c=A,y=
r*(A-1);c>x&&d[y+h]>B;--c,y-=r){for(var C=y,u=y+r,D=0;D<r;++D,++C,++u){var E=d[C];d[C]=d[u];d[u]=E}C=f[c];f[c]=f[c-1];f[c-1]=C}break}p=w-x;h=Math.random()*p+x|0;d=g[q*h+a];r=Math.random()*p+x|0;f=g[q*r+a];A=Math.random()*p+x|0;p=g[q*A+a];d<=f?p>=f?(h=r,d=f):d>=p||(h=A,d=p):f>=p?(h=r,d=f):p>=d||(h=A,d=p);f=q*(w-1);r=q*h;for(p=0;p<q;++p,++f,++r)A=g[f],g[f]=g[r],g[r]=A;f=k[w-1];k[w-1]=k[h];k[h]=f;h=v(b,a,x,w-1,g,k,d);f=q*(w-1);r=q*h;for(p=0;p<q;++p,++f,++r)A=g[f],g[f]=g[r],g[r]=A;f=k[w-1];k[w-1]=k[h];
k[h]=f;if(l<h){for(w=h-1;x<w&&g[q*(w-1)+a]===d;)--w;w+=1}else if(h<l)for(x=h+1;x<w&&g[q*x+a]===d;)x+=1;else break}return v(b,a,m,l,g,k,g[q*l+a])};var v=b("./partition")("lo<p0",["p0"]),n=8},{"./partition":85}],85:[function(b,g,k){g.exports=function(b,e){var a="abcdef".split("").concat(e),m=[];0<=b.indexOf("lo")&&m.push("lo=e[k+n]");0<=b.indexOf("hi")&&m.push("hi=e[k+o]");a.push(v.replace("_",m.join()).replace("$",b));return Function.apply(void 0,a)};var v="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},
{}],86:[function(b,g,k){function v(a,b,e){for(var h=2*(a+1),d=a+1;d<=b;++d){for(var f=e[h++],r=e[h++],p=d,l=h-2;p-- >a;){var m=e[l-2],c=e[l-1];if(m<f)break;else if(m===f&&c<r)break;e[l]=m;e[l+1]=c;l-=2}e[l]=f;e[l+1]=r}}function n(a,b,e){a*=2;b*=2;var h=e[a],d=e[a+1];e[a]=e[b];e[a+1]=e[b+1];e[b]=h;e[b+1]=d}function e(a,b,e){a*=2;b*=2;e[a]=e[b];e[a+1]=e[b+1]}function a(a,b,e,h,d){a*=2;b*=2;d[a]=d[b];d[b]=e;d[a+1]=d[b+1];d[b+1]=h}function m(a,b,e){a*=2;b*=2;var h=e[a],d=e[b];return h<d?!1:h===d?e[a+
1]>e[b+1]:!0}function l(a,b,e,h){a*=2;var d=h[a];return d<b?!0:d===b?h[a+1]<e:!1}function z(b,g,q){var h=(g-b+1)/6|0,d=b+h,f=g-h,r=b+g>>1,p=r-h,k=r+h,B=d,c=p,y=r,C=k,u=f,h=b+1,D=g-1,E=0;m(B,c,q)&&(E=B,B=c,c=E);m(C,u,q)&&(E=C,C=u,u=E);m(B,y,q)&&(E=B,B=y,y=E);m(c,y,q)&&(E=c,c=y,y=E);m(B,C,q)&&(E=B,B=C,C=E);m(y,C,q)&&(E=y,y=C,C=E);m(c,u,q)&&(E=c,c=u,u=E);m(c,y,q)&&(E=c,c=y,y=E);m(C,u,q)&&(E=C,C=u,u=E);for(var E=q[2*c],c=q[2*c+1],R=q[2*C],C=q[2*C+1],B=2*B,y=2*y,u=2*u,d=2*d,r=2*r,f=2*f,H=0;2>H;++H){var G=
q[y+H],O=q[u+H];q[d+H]=q[B+H];q[r+H]=G;q[f+H]=O}e(p,b,q);e(k,g,q);for(p=h;p<=D;++p)if(l(p,E,c,q))p!==h&&n(p,h,q),++h;else if(!l(p,R,C,q))for(;;)if(l(D,R,C,q)){l(D,E,c,q)?(k=p,f=h,r=D,B=q,k*=2,f*=2,r*=2,d=B[k],y=B[k+1],B[k]=B[f],B[k+1]=B[f+1],B[f]=B[r],B[f+1]=B[r+1],B[r]=d,B[r+1]=y,++h):n(p,D,q);--D;break}else if(--D<p)break;a(b,h-1,E,c,q);a(g,D+1,R,C,q);h-2-b<=t?v(b,h-2,q):z(b,h-2,q);g-(D+2)<=t?v(D+2,g,q):z(D+2,g,q);D-h<=t?v(h,D,q):z(h,D,q)}g.exports=function(a,b){b<=4*t?v(0,b-1,a):z(0,b-1,a)};var t=
32},{}],87:[function(b,g,k){function v(a,b,e,h){h=b[h];e=a[e-1];a[h]=e;b[e]=h}g.exports={init:function(a){a=e.nextPow2(a);l.length<a&&(n.free(l),l=n.mallocInt32(a));z.length<a&&(n.free(z),z=n.mallocInt32(a));t.length<a&&(n.free(t),t=n.mallocInt32(a));x.length<a&&(n.free(x),x=n.mallocInt32(a));w.length<a&&(n.free(w),w=n.mallocInt32(a));q.length<a&&(n.free(q),q=n.mallocInt32(a));a*=8;h.length<a&&(n.free(h),h=n.mallocDouble(a))},sweepBipartite:function(d,b,e,p,g,n,c,q,k,u){var w=0,E=2*d;--d;for(var R=
E-1;e<p;++e){var H=n[e],G=E*e;h[w++]=g[G+d];h[w++]=-(H+1);h[w++]=g[G+R];h[w++]=H}for(e=c;e<q;++e)H=u[e]+m,p=E*e,h[w++]=k[p+d],h[w++]=-H,h[w++]=k[p+R],h[w++]=H;q=w>>>1;a(h,q);for(e=u=k=0;e<q;++e)if(w=h[2*e+1]|0,w>=m)w=w-m|0,v(t,x,u--,w);else if(0<=w)v(l,z,k--,w);else{if(w<=-m){w=-w-m|0;for(E=0;E<k;++E)if(p=b(l[E],w),void 0!==p)return p;E=x;p=u++;t[p]=w}else{w=-w-1|0;for(E=0;E<u;++E)if(p=b(w,t[E]),void 0!==p)return p;E=z;p=k++;l[p]=w}E[w]=p}},sweepComplete:function(d,b,e,p,m,g,c,n,k,u){var D=0,E=2*
d;--d;for(var R=E-1;e<p;++e){var H=g[e]+1<<1,G=E*e;h[D++]=m[G+d];h[D++]=-H;h[D++]=m[G+R];h[D++]=H}for(e=c;e<n;++e)H=u[e]+1<<1,p=E*e,h[D++]=k[p+d],h[D++]=-H|1,h[D++]=k[p+R],h[D++]=H|1;n=D>>>1;a(h,n);for(e=D=u=k=0;e<n;++e)if(E=h[2*e+1]|0,p=E&1,e<n-1&&E>>1===h[2*e+3]>>1&&(p=2,e+=1),0>E){E=-(E>>1)-1;for(m=0;m<D;++m)if(g=b(w[m],E),void 0!==g)return g;if(0!==p)for(m=0;m<k;++m)if(g=b(l[m],E),void 0!==g)return g;if(1!==p)for(m=0;m<u;++m)if(g=b(t[m],E),void 0!==g)return g;0===p?(p=z,m=k++,l[m]=E,p[E]=m):1===
p?(p=x,m=u++,t[m]=E,p[E]=m):2===p&&(p=q,m=D++,w[m]=E,p[E]=m)}else E=(E>>1)-1,0===p?v(l,z,k--,E):1===p?v(t,x,u--,E):2===p&&v(w,q,D--,E)},scanBipartite:function(d,b,e,p,g,n,c,q,w,u,k,t){var x=0,H=2*d,G=b+d,O=1,J=1;for(p?J=m:O=m;g<n;++g){var I=g+O,P=H*g;h[x++]=c[P+b];h[x++]=-I;h[x++]=c[P+G];h[x++]=I}for(g=w;g<u;++g)I=g+J,n=H*g,h[x++]=k[n+b],h[x++]=-I;u=x>>>1;a(h,u);for(g=x=0;g<u;++g)if(I=h[2*g+1]|0,0>I)if(I=-I,J=!1,I>=m?(J=!p,I-=m):(J=!!p,--I),J)J=z,n=x++,l[n]=I,J[I]=n;else a:for(J=t[I],I*=H,n=k[I+b+
1],w=k[I+b+1+d],G=0;G<x;++G){var P=l[G],L=H*P;if(!(w<c[L+b+1]||c[L+b+1+d]<n)){for(var F=b+2;F<d;++F)if(k[I+F+d]<c[L+F]||c[L+F+d]<k[I+F])continue a;P=q[P];P=p?e(J,P):e(P,J);if(void 0!==P)return P}}else v(l,z,x--,I-O)},scanComplete:function(d,b,e,p,g,n,c,q,w,u,k){for(var t=0,x=2*d,v=b+d;p<g;++p){var z=p+m,O=x*p;h[t++]=n[O+b];h[t++]=-z;h[t++]=n[O+v];h[t++]=z}for(p=q;p<w;++p)z=p+1,g=x*p,h[t++]=u[g+b],h[t++]=-z;w=t>>>1;a(h,w);for(p=t=0;p<w;++p)if(g=h[2*p+1]|0,0>g)if(z=-g,z>=m)l[t++]=z-m;else a:for(--z,
g=k[z],z*=x,v=u[z+b+1],O=u[z+b+1+d],q=0;q<t;++q){var J=l[q],I=c[J];if(I===g)break;J*=x;if(!(O<n[J+b+1]||n[J+b+1+d]<v)){for(var P=b+2;P<d;++P)if(u[z+P+d]<n[J+P]||n[J+P+d]<u[z+P])continue a;I=e(I,g);if(void 0!==I)return I}}else{z=g-m;for(q=t-1;0<=q;--q)if(l[q]===z){for(P=q+1;P<t;++P)l[P-1]=l[P];break}--t}}};var n=b("typedarray-pool"),e=b("bit-twiddle"),a=b("./sort"),m=268435456,l=n.mallocInt32(1024),z=n.mallocInt32(1024),t=n.mallocInt32(1024),x=n.mallocInt32(1024),w=n.mallocInt32(1024),q=n.mallocInt32(1024),
h=n.mallocDouble(8192)},{"./sort":86,"bit-twiddle":88,"typedarray-pool":90}],88:[function(b,g,k){arguments[4][75][0].apply(k,arguments)},{dup:75}],89:[function(b,g,k){function v(b,e,a){var m=b[a]|0;if(0>=m)return[];var l=Array(m),g;if(a===b.length-1)for(g=0;g<m;++g)l[g]=e;else for(g=0;g<m;++g)l[g]=v(b,e,a+1);return l}g.exports=function(b,e){"undefined"===typeof e&&(e=0);switch(typeof b){case "number":if(0<b){var a=b|0,m=e,l,g;l=Array(a);for(g=0;g<a;++g)l[g]=m;return l}break;case "object":if("number"===
typeof b.length)return v(b,e,0)}return[]}},{}],90:[function(b,g,k){(function(g,n){function e(a){if(a){var c=p.log2(a.length||a.byteLength);y[c].push(a)}}function a(a){a=p.nextPow2(a);var c=p.log2(a),c=y[c];return 0<c.length?c.pop():new ArrayBuffer(a)}function m(c){return new Uint8Array(a(c),0,c)}function l(c){return new Uint16Array(a(2*c),0,c)}function z(c){return new Uint32Array(a(4*c),0,c)}function t(c){return new Int8Array(a(c),0,c)}function x(c){return new Int16Array(a(2*c),0,c)}function w(c){return new Int32Array(a(4*
c),0,c)}function q(c){return new Float32Array(a(4*c),0,c)}function h(c){return new Float64Array(a(8*c),0,c)}function d(c){return B?new Uint8ClampedArray(a(c),0,c):m(c)}function f(c){return new DataView(a(c),0,c)}function r(a){a=p.nextPow2(a);var c=p.log2(a),c=C[c];return 0<c.length?c.pop():new n(a)}var p=b("bit-twiddle"),A=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,
0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var B="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=A([32,0]));c.BUFFER||(c.BUFFER=A([32,0]));var y=c.DATA,C=c.BUFFER;k.free=function(a){if(n.isBuffer(a))C[p.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var c=p.log2(a.length||a.byteLength)|0;y[c].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=
k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){e(a.buffer)};k.freeArrayBuffer=e;k.freeBuffer=function(a){C[p.log2(a.length)].push(a)};k.malloc=function(c,b){if(void 0===b||"arraybuffer"===b)return a(c);switch(b){case "uint8":return m(c);case "uint16":return l(c);case "uint32":return z(c);case "int8":return t(c);case "int16":return x(c);case "int32":return w(c);case "float":case "float32":return q(c);case "double":case "float64":return h(c);case "uint8_clamped":return d(c);
case "buffer":return r(c);case "data":case "dataview":return f(c);default:return null}};k.mallocArrayBuffer=a;k.mallocUint8=m;k.mallocUint16=l;k.mallocUint32=z;k.mallocInt8=t;k.mallocInt16=x;k.mallocInt32=w;k.mallocFloat32=k.mallocFloat=q;k.mallocFloat64=k.mallocDouble=h;k.mallocUint8Clamped=d;k.mallocDataView=f;k.mallocBuffer=r;k.clearCache=function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=
0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,y[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":88,buffer:33,dup:89}],91:[function(b,g,k){function v(b,a){return b-a}g.exports=function(b,a){var m=b.length,l=b.length-a.length;if(l)return l;switch(m){case 0:return 0;case 1:return b[0]-a[0];case 2:return b[0]+b[1]-a[0]-a[1]||n(b[0],b[1])-n(a[0],a[1]);case 3:var m=b[0]+b[1],
g=a[0]+a[1];if(l=m+b[2]-(g+a[2]))return l;var l=n(b[0],b[1]),k=n(a[0],a[1]);return n(l,b[2])-n(k,a[2])||n(l+b[2],m)-n(k+a[2],g);case 4:var l=b[0],m=b[1],g=b[2],k=b[3],x=a[0],w=a[1],q=a[2],h=a[3];return l+m+g+k-(x+w+q+h)||n(l,m,g,k)-n(x,w,q,h,x)||n(l+m,l+g,l+k,m+g,m+k,g+k)-n(x+w,x+q,x+h,w+q,w+h,q+h)||n(l+m+g,l+m+k,l+g+k,m+g+k)-n(x+w+q,x+w+h,x+q+h,w+q+h);default:g=b.slice().sort(v);k=a.slice().sort(v);for(x=0;x<m;++x)if(l=g[x]-k[x])return l;return 0}};var n=Math.min},{}],92:[function(b,g,k){var v=b("double-bits"),
n=Math.pow(2,-1074);g.exports=function(b,a){if(isNaN(b)||isNaN(a))return NaN;if(b===a)return b;if(0===b)return 0>a?-n:n;var g=v.hi(b),l=v.lo(b);a>b===0<b?4294967295===l?(g+=1,l=0):l+=1:0===l?(l=4294967295,--g):--l;return v.pack(l,g)}},{"double-bits":93}],93:[function(b,g,k){(function(b){var n=!1;if("undefined"!==typeof Float64Array){var e=new Float64Array(1),a=new Uint32Array(e.buffer);e[0]=1;n=!0;1072693248===a[1]?(g.exports=function(b){e[0]=b;return[a[0],a[1]]},g.exports.pack=function(b,g){a[0]=
b;a[1]=g;return e[0]},g.exports.lo=function(b){e[0]=b;return a[0]},g.exports.hi=function(b){e[0]=b;return a[1]}):1072693248===a[0]?(g.exports=function(b){e[0]=b;return[a[1],a[0]]},g.exports.pack=function(b,g){a[1]=b;a[0]=g;return e[0]},g.exports.lo=function(b){e[0]=b;return a[1]},g.exports.hi=function(b){e[0]=b;return a[0]}):n=!1}if(!n){var m=new b(8);g.exports=function(a){m.writeDoubleLE(a,0,!0);return[m.readUInt32LE(0,!0),m.readUInt32LE(4,!0)]};g.exports.pack=function(a,b){m.writeUInt32LE(a,0,!0);
m.writeUInt32LE(b,4,!0);return m.readDoubleLE(0,!0)};g.exports.lo=function(a){m.writeDoubleLE(a,0,!0);return m.readUInt32LE(0,!0)};g.exports.hi=function(a){m.writeDoubleLE(a,0,!0);return m.readUInt32LE(4,!0)}}g.exports.sign=function(a){return g.exports.hi(a)>>>31};g.exports.exponent=function(a){return(g.exports.hi(a)<<1>>>21)-1023};g.exports.fraction=function(a){var b=g.exports.lo(a);a=g.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};g.exports.denormalized=function(a){return!(g.exports.hi(a)&
2146435072)}}).call(this,b("buffer").Buffer)},{buffer:33}],94:[function(b,g,k){var v=b("big-rat/add");g.exports=function(b,e){for(var a=b.length,g=Array(a),l=0;l<a;++l)g[l]=v(b[l],e[l]);return g}},{"big-rat/add":62}],95:[function(b,g,k){g.exports=function(b){for(var e=Array(b.length),a=0;a<b.length;++a)e[a]=v(b[a]);return e};var v=b("big-rat")},{"big-rat":65}],96:[function(b,g,k){var v=b("big-rat"),n=b("big-rat/mul");g.exports=function(b,a){for(var g=v(a),l=b.length,k=Array(l),t=0;t<l;++t)k[t]=n(b[t],
g);return k}},{"big-rat":65,"big-rat/mul":74}],97:[function(b,g,k){var v=b("big-rat/sub");g.exports=function(b,e){for(var a=b.length,g=Array(a),l=0;l<a;++l)g[l]=v(b[l],e[l]);return g}},{"big-rat/sub":79}],98:[function(b,g,k){arguments[4][49][0].apply(k,arguments)},{dup:49}],99:[function(b,g,k){arguments[4][50][0].apply(k,arguments)},{dup:50,"two-product":102,"two-sum":98}],100:[function(b,g,k){arguments[4][51][0].apply(k,arguments)},{dup:51}],101:[function(b,g,k){arguments[4][52][0].apply(k,arguments)},
{dup:52}],102:[function(b,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],103:[function(b,g,k){arguments[4][59][0].apply(k,arguments)},{dup:59,"robust-scale":99,"robust-subtract":100,"robust-sum":101,"two-product":102}],104:[function(b,g,k){g.exports=function(b,e,a,g){var l=v(b,a,g),k=v(e,a,g);if(0<l&&0<k||0>l&&0>k)return!1;var t=v(a,b,e),x=v(g,b,e);if(0<t&&0<x||0>t&&0>x)return!1;if(0===l&&0===k&&0===t&&0===x){a:{for(l=0;2>l;++l){var k=b[l],t=e[l],x=Math.max(k,t),w=a[l],q=g[l],h=Math.min(w,
q);if(Math.max(w,q)<Math.min(k,t)||x<h){b=!1;break a}}b=!0}return b}return!0};var v=b("robust-orientation")[3]},{"robust-orientation":103}],105:[function(b,g,k){function v(b){this.roots=Array(b);this.ranks=Array(b);for(var e=0;e<b;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";g.exports=v;b=v.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};b.find=function(b){for(var e=
b,a=this.roots;a[b]!==b;)b=a[b];for(;a[e]!==b;){var g=a[e];a[e]=b;e=g}return b};b.link=function(b,e){var a=this.find(b),g=this.find(e);if(a!==g){var l=this.ranks,k=this.roots,t=l[a],x=l[g];t<x?k[a]=g:x<t?k[g]=a:(k[g]=a,++l[a])}}},{}],106:[function(b,g,k){function v(a,b){return a[0]-b[0]}function n(){var a=this.stride,b=Array(a.length),e;for(e=0;e<b.length;++e)b[e]=[Math.abs(a[e]),e];b.sort(v);a=Array(b.length);for(e=0;e<a.length;++e)a[e]=b[e][1];return a}function e(a,b){var e=["View",b,"d",a].join("");
0>b&&(e="View_Nil"+a);var h="generic"===a;if(-1===b){var d,e=new Function("function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}");return e()}if(0===b)return e=
new Function("TrivialArray","function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(h?"this.data.get(this.offset)":
"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),e(t[a][0]);d=["'use strict'"];var f=m(b),r=f.map(function(a){return"i"+a}),p="this.offset+"+f.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),g=f.map(function(a){return"b"+a}).join(","),l=f.map(function(a){return"c"+a}).join(",");d.push("function "+e+"(a,"+g+","+l+",d){this.data=a","this.shape=["+
g+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+a+"'","proto.dimension="+b);d.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+f.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),4>b?(d.push("function "+e+"_order(){"),2===b?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):
d.push("ORDER})"));d.push("proto.set=function "+e+"_set("+r.join(",")+",v){");h?d.push("return this.data.set("+p+",v)}"):d.push("return this.data["+p+"]=v}");d.push("proto.get=function "+e+"_get("+r.join(",")+"){");h?d.push("return this.data.get("+p+")}"):d.push("return this.data["+p+"]}");d.push("proto.index=function "+e+"_index(",r.join(),"){return "+p+"}");d.push("proto.hi=function "+e+"_hi("+r.join(",")+"){return new "+e+"(this.data,"+f.map(function(a){return["(typeof i",a,"!=='number'||i",a,
"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+f.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=f.map(function(a){return"a"+a+"=this.shape["+a+"]"});p=f.map(function(a){return"c"+a+"=this.stride["+a+"]"});d.push("proto.lo=function "+e+"_lo("+r.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+p.join(","));for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");d.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+
a}).join(",")+","+f.map(function(a){return"c"+a}).join(",")+",b)}");d.push("proto.step=function "+e+"_step("+r.join(",")+"){var "+f.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+f.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");d.push("return new "+e+"(this.data,"+f.map(function(a){return"a"+
a}).join(",")+","+f.map(function(a){return"b"+a}).join(",")+",c)}");p=Array(b);g=Array(b);for(h=0;h<b;++h)p[h]="a[i"+h+"]",g[h]="b[i"+h+"]";d.push("proto.transpose=function "+e+"_transpose("+r+"){"+r.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+p.join(",")+","+g.join(",")+",this.offset)}");d.push("proto.pick=function "+e+"_pick("+r+"){var a=[],b=[],c=this.offset");for(h=0;h<b;++h)d.push("if(typeof i"+h+"==='number'&&i"+
h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");d.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+f.map(function(a){return"shape["+a+"]"}).join(",")+","+f.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",d.join("\n"));return e(t[a],n)}function a(a){if(l(a))return"buffer";if(z)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var m=b("iota-array"),l=b("is-buffer"),z="undefined"!==typeof Float64Array,t={float32:[],float64:[],int8:[],int16:[],
int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in t)t[a].push(e(a,-1))});g.exports=function(b,g,l,h){if(void 0===b){var d=t.array[0];return d([])}"number"===typeof b&&(b=[b]);void 0===g&&(g=[b.length]);d=g.length;if(void 0===l){l=Array(d);for(var f=d-1,r=1;0<=f;--f)l[f]=r,r*=g[f]}if(void 0===h)for(f=h=0;f<d;++f)0>l[f]&&(h-=(g[f]-1)*l[f]);f=a(b);for(r=t[f];r.length<=d+1;)r.push(e(f,r.length-1));d=r[d+1];return d(b,g,l,h)}},{"iota-array":107,
"is-buffer":108}],107:[function(b,g,k){g.exports=function(b){for(var g=Array(b),e=0;e<b;++e)g[e]=e;return g}},{}],108:[function(b,g,k){function v(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}g.exports=function(b){return null!=b&&(v(b)||"function"===typeof b.readFloatLE&&"function"===typeof b.slice&&v(b.slice(0,0))||!!b._isBuffer)}},{}],109:[function(b,g,k){g.exports=function(b,e){for(var a=v(b,e.length),g=Array(e.length),l=Array(e.length),k=[],t=
0;t<e.length;++t){var x=a[t].length;l[t]=x;g[t]=!0;1>=x&&k.push(t)}for(;0<k.length;)for(x=k.pop(),g[x]=!1,x=a[x],t=0;t<x.length;++t){var w=x[t];0===--l[w]&&k.push(w)}a=Array(e.length);l=[];for(t=0;t<e.length;++t)g[t]?(x=l.length,a[t]=x,l.push(e[t])):a[t]=-1;k=[];for(t=0;t<b.length;++t)x=b[t],g[x[0]]&&g[x[1]]&&k.push([a[x[0]],a[x[1]]]);return[k,l]};var v=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":110}],110:[function(b,g,k){g.exports=function(b,e){var a=b.length;if("number"!==typeof e){for(var g=
e=0;g<a;++g){var l=b[g];e=Math.max(e,l[0],l[1])}e=(e|0)+1}e|=0;for(var k=Array(e),g=0;g<e;++g)k[g]=[];for(g=0;g<a;++g)l=b[g],k[l[0]].push(l[1]),k[l[1]].push(l[0]);for(a=0;a<e;++a)v(k[a],function(a,b){return a-b});return k};var v=b("uniq")},{uniq:129}],111:[function(b,g,k){g.exports=function(b,e){function a(a,b){var d=x[b][a[b]];d.splice(d.indexOf(a),1)}function g(b,d,h){var l,m,c;for(m=0;2>m;++m)if(0<x[m][d].length){l=x[m][d][0];c=m;break}m=l[c^1];for(var k=0;2>k;++k)for(var n=x[k][d],u=0;u<n.length;++u){var q=
n[u],w=q[k^1];0<v(e[b],e[d],e[m],e[w])&&(l=q,m=w,c=k)}if(h)return m;l&&a(l,c);return m}function l(b,d){var h=x[d][b][0],l=[b];a(h,d);for(h=h[d^1];;){for(;h!==b;)l.push(h),h=g(l[l.length-2],h,!1);if(0===x[0][b].length+x[1][b].length)break;var h=l[l.length-1],k=b,c=l[1],n=g(h,k,!0);if(0>v(e[h],e[k],e[c],e[n]))break;l.push(b);h=g(h,k)}return l}for(var k=e.length|0,t=b.length,x=[Array(k),Array(k)],w=0;w<k;++w)x[0][w]=[],x[1][w]=[];for(w=0;w<t;++w){var q=b[w];x[0][q[0]].push(q);x[1][q[1]].push(q)}t=[];
for(w=0;w<k;++w)0===x[0][w].length+x[1][w].length&&t.push([w]);for(w=0;w<k;++w)for(q=0;2>q;++q){for(var h=[];0<x[q][w].length;){var d=l(w,q);d[1]===d[d.length-1]?h.push.apply(h,d):(0<h.length&&t.push(h),h=d)}0<h.length&&t.push(h)}return t};var v=b("compare-angle")},{"compare-angle":112}],112:[function(b,g,k){function v(b,e,g){var k=a(b[0],-e[0]);b=a(b[1],-e[1]);var n=a(g[0],-e[0]);e=a(g[1],-e[1]);k=l(m(k,n),m(b,e));return 0<=k[k.length-1]}g.exports=function(a,b,g,l){var m=n(b,g,l);if(0===m){var m=
e(n(a,b,g)),h=e(n(a,b,l));return m===h?0===m&&(g=v(a,b,g),a=v(a,b,l),g!==a)?g?1:-1:0:0===h?0<m?-1:v(a,b,l)?-1:1:0===m?0<h?1:v(a,b,g)?1:-1:e(h-m)}h=n(a,b,g);return 0<h?0<m&&0<n(a,b,l)?1:-1:0>h?0<m||0<n(a,b,l)?1:-1:0<n(a,b,l)?1:v(a,b,g)?1:-1};var n=b("robust-orientation"),e=b("signum"),a=b("two-sum"),m=b("robust-product"),l=b("robust-sum")},{"robust-orientation":126,"robust-product":114,"robust-sum":127,signum:115,"two-sum":116}],113:[function(b,g,k){arguments[4][50][0].apply(k,arguments)},{dup:50,
"two-product":128,"two-sum":116}],114:[function(b,g,k){var v=b("robust-sum"),n=b("robust-scale");g.exports=function(b,a){if(1===b.length)return n(a,b[0]);if(1===a.length)return n(b,a[0]);if(0===b.length||0===a.length)return[0];var g=[0];if(b.length<a.length)for(var l=0;l<b.length;++l)g=v(g,n(a,b[l]));else for(l=0;l<a.length;++l)g=v(g,n(b,a[l]));return g}},{"robust-scale":113,"robust-sum":127}],115:[function(b,g,k){g.exports=function(b){return 0>b?-1:0<b?1:0}},{}],116:[function(b,g,k){arguments[4][49][0].apply(k,
arguments)},{dup:49}],117:[function(b,g,k){function v(b,a,g,l,k,n){b=["function ",b,"(a,l,h,",l.join(","),"){",n?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",k?".get(m)":"[m]"];n?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",a,"){i=m;");g?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");n?b.push("return -1};"):b.push("return i};");return b.join("")}function n(b,a,g,l){return(new Function([v("A",
"x"+b+"y",a,["y"],!1,l),v("B","x"+b+"y",a,["y"],!0,l),v("P","c(x,y)"+b+"0",a,["y","c"],!1,l),v("Q","c(x,y)"+b+"0",a,["y","c"],!0,l),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
g].join("")))()}g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],118:[function(b,g,k){function v(a,b,d,e,h){this.mid=a;this.left=b;this.right=d;this.leftPoints=e;this.rightPoints=h;this.count=(b?b.count:0)+(d?d.count:0)+e.length}function n(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function e(a,b){var d=q(b);a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=
d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function a(a,b){var d=a.intervals([]),h=d.indexOf(b);if(0>h)return 0;d.splice(h,1);e(a,d);return 1}function m(a,b,d){for(var e=0;e<a.length&&a[e][0]<=b;++e){var h=d(a[e]);if(h)return h}}function l(a,b,d){for(var e=a.length-1;0<=e&&a[e][1]>=b;--e){var h=d(a[e]);if(h)return h}}function z(a,b){for(var d=0;d<a.length;++d){var e=b(a[d]);if(e)return e}}function t(a,b){return a-b}function x(a,b){var d=a[0]-b[0];return d?d:a[1]-b[1]}function w(a,b){var d=
a[1]-b[1];return d?d:a[0]-b[0]}function q(a){if(0===a.length)return null;for(var b=[],d=0;d<a.length;++d)b.push(a[d][0],a[d][1]);b.sort(t);for(var b=b[b.length>>1],e=[],h=[],c=[],d=0;d<a.length;++d){var g=a[d];g[1]<b?e.push(g):b<g[0]?h.push(g):c.push(g)}a=c.slice();c.sort(x);a.sort(w);return new v(b,q(e),q(h),c,a)}function h(a){this.root=a}var d=b("binary-search-bounds");g.exports=function(a){return a&&0!==a.length?new h(q(a)):new h(null)};b=v.prototype;b.intervals=function(a){a.push.apply(a,this.leftPoints);
this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};b.insert=function(a){var b=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),e(this,b)):this.left.insert(a):this.left=q([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),e(this,b)):this.right.insert(a):this.right=q([a]);else{var b=d.ge(this.leftPoints,a,x),h=d.ge(this.rightPoints,a,
w);this.leftPoints.splice(b,0,a);this.rightPoints.splice(h,0,a)}};b.remove=function(b){var e=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return a(this,b);e=this.left.remove(b);if(2===e)return this.left=null,--this.count,1;1===e&&--this.count;return e}if(b[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return a(this,b);e=this.right.remove(b);if(2===e)return this.right=null,--this.count,1;1===e&&--this.count;
return e}if(1===this.count)return this.leftPoints[0]===b?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var h=this.left;h.right;)b=h,h=h.right;if(b===this)h.right=this.right;else{var g=this.left,e=this.right;b.count-=h.count;b.right=h.left;h.left=g;h.right=e}n(this,h);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return 1}for(g=d.ge(this.leftPoints,
b,x);g<this.leftPoints.length&&this.leftPoints[g][0]===b[0];++g)if(this.leftPoints[g]===b)for(--this.count,this.leftPoints.splice(g,1),e=d.ge(this.rightPoints,b,w);e<this.rightPoints.length&&this.rightPoints[e][1]===b[1];++e)if(this.rightPoints[e]===b)return this.rightPoints.splice(e,1),1;return 0};b.queryPoint=function(a,b){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,b);if(d)return d}return m(this.leftPoints,a,b)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,b))?d:l(this.rightPoints,
a,b):z(this.leftPoints,b)};b.queryInterval=function(a,b,d){if(a<this.mid&&this.left){var e=this.left.queryInterval(a,b,d);if(e)return e}return b>this.mid&&this.right&&(e=this.right.queryInterval(a,b,d))?e:b<this.mid?m(this.leftPoints,b,d):a>this.mid?l(this.rightPoints,a,d):z(this.leftPoints,d)};b=h.prototype;b.insert=function(a){this.root?this.root.insert(a):this.root=new v(a[0],null,null,[a],[a])};b.remove=function(a){return this.root?(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};b.queryPoint=
function(a,b){if(this.root)return this.root.queryPoint(a,b)};b.queryInterval=function(a,b,d){if(a<=b&&this.root)return this.root.queryInterval(a,b,d)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":117}],119:[function(b,g,k){function v(b,a){var g,l;if(a[0][0]<a[1][0])g=a[0],l=a[1];else if(a[0][0]>a[1][0])g=a[1],l=a[0];else{g=Math.min(b[0][1],
b[1][1]);l=Math.max(b[0][1],b[1][1]);var k=Math.min(a[0][1],a[1][1]),t=Math.max(a[0][1],a[1][1]);return l<k?l-k:g>t?g-t:l-t}b[0][1]<b[1][1]?(t=b[0],k=b[1]):(t=b[1],k=b[0]);return(t=n(l,g,t))?t:(t=n(l,g,k))?t:k-l}g.exports=function(b,a){var g,l;if(a[0][0]<a[1][0])g=a[0],l=a[1];else if(a[0][0]>a[1][0])g=a[1],l=a[0];else return v(a,b);var k,t;if(b[0][0]<b[1][0])k=b[0],t=b[1];else if(b[0][0]>b[1][0])k=b[1],t=b[0];else return-v(b,a);var x=n(g,l,t),w=n(g,l,k);if(0>x){if(0>=w)return x}else if(0<x){if(0<=
w)return x}else if(w)return w;x=n(t,k,l);w=n(t,k,g);if(0>x){if(0>=w)return x}else if(0<x){if(0<=w)return x}else if(w)return w;return l[0]-t[0]};var n=b("robust-orientation")},{"robust-orientation":126}],120:[function(b,g,k){function v(a,b,e,g,l,m){this._color=a;this.key=b;this.value=e;this.left=g;this.right=l;this._count=m}function n(a){return new v(a._color,a.key,a.value,a.left,a.right,a._count)}function e(a,b){return new v(a,b.key,b.value,b.left,b.right,b._count)}function a(a){a._count=1+(a.left?
a.left._count:0)+(a.right?a.right._count:0)}function m(a,b){this._compare=a;this.root=b}function l(a,b){if(b.left){var e=l(a,b.left);if(e)return e}if(e=a(b.key,b.value))return e;if(b.right)return l(a,b.right)}function z(a,b,e,g){if(0>=b(a,g.key)){if(g.left){var l=z(a,b,e,g.left);if(l)return l}if(l=e(g.key,g.value))return l}if(g.right)return z(a,b,e,g.right)}function t(a,b,e,g,l){var m=e(a,l.key),k=e(b,l.key);if(0>=m&&(l.left&&(m=t(a,b,e,g,l.left))||0<k&&(m=g(l.key,l.value))))return m;if(0<k&&l.right)return t(a,
b,e,g,l.right)}function x(a,b){this.tree=a;this._stack=b}function w(a,b){a.key=b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function q(a,b){return a<b?-1:a>b?1:0}g.exports=function(a){return new m(a||q,null)};b=m.prototype;Object.defineProperty(b,"keys",{get:function(){var a=[];this.forEach(function(b,e){a.push(b)});return a}});Object.defineProperty(b,"values",{get:function(){var a=[];this.forEach(function(b,e){a.push(e)});return a}});Object.defineProperty(b,
"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(b,d){for(var f=this._compare,g=this.root,l=[],k=[];g;){var n=f(b,g.key);l.push(g);k.push(n);g=0>=n?g.left:g.right}l.push(new v(0,b,d,null,null,1));for(n=l.length-2;0<=n;--n)g=l[n],l[n]=0>=k[n]?new v(g._color,g.key,g.value,l[n+1],g.right,g._count+1):new v(g._color,g.key,g.value,g.left,l[n+1],g._count+1);for(n=l.length-1;1<n;--n){k=l[n-1];g=l[n];if(1===k._color||1===g._color)break;var c=l[n-2];if(c.left===k)if(k.left===
g){var q=c.right;if(q&&0===q._color)k._color=1,c.right=e(1,q),c._color=0,--n;else{c._color=0;c.left=k.right;k._color=1;k.right=c;l[n-2]=k;l[n-1]=g;a(c);a(k);3<=n&&(n=l[n-3],n.left===c?n.left=k:n.right=k);break}}else if((q=c.right)&&0===q._color)k._color=1,c.right=e(1,q),c._color=0,--n;else{k.right=g.left;c._color=0;c.left=g.right;g._color=1;g.left=k;g.right=c;l[n-2]=g;l[n-1]=k;a(c);a(k);a(g);3<=n&&(n=l[n-3],n.left===c?n.left=g:n.right=g);break}else if(k.right===g)if((q=c.left)&&0===q._color)k._color=
1,c.left=e(1,q),c._color=0,--n;else{c._color=0;c.right=k.left;k._color=1;k.left=c;l[n-2]=k;l[n-1]=g;a(c);a(k);3<=n&&(n=l[n-3],n.right===c?n.right=k:n.left=k);break}else if((q=c.left)&&0===q._color)k._color=1,c.left=e(1,q),c._color=0,--n;else{k.left=g.right;c._color=0;c.right=g.left;g._color=1;g.right=k;g.left=c;l[n-2]=g;l[n-1]=k;a(c);a(k);a(g);3<=n&&(n=l[n-3],n.right===c?n.right=g:n.left=g);break}}l[0]._color=1;return new m(f,l[0])};b.forEach=function(a,b,e){if(this.root)switch(arguments.length){case 1:return l(a,
this.root);case 2:return z(b,this._compare,a,this.root);case 3:if(!(0<=this._compare(b,e)))return t(b,e,this._compare,a,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new x(this,a)}});Object.defineProperty(b,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new x(this,a)}});b.at=function(a){if(0>a)return new x(this,[]);for(var b=this.root,e=[];;){e.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=
b.left._count}if(!a)return new x(this,e);--a;if(b.right){if(a>=b.right._count)break;b=b.right}else break}return new x(this,[])};b.ge=function(a){for(var b=this._compare,e=this.root,g=[],l=0;e;){var m=b(a,e.key);g.push(e);0>=m&&(l=g.length);e=0>=m?e.left:e.right}g.length=l;return new x(this,g)};b.gt=function(a){for(var b=this._compare,e=this.root,g=[],l=0;e;){var m=b(a,e.key);g.push(e);0>m&&(l=g.length);e=0>m?e.left:e.right}g.length=l;return new x(this,g)};b.lt=function(a){for(var b=this._compare,
e=this.root,g=[],l=0;e;){var m=b(a,e.key);g.push(e);0<m&&(l=g.length);e=0>=m?e.left:e.right}g.length=l;return new x(this,g)};b.le=function(a){for(var b=this._compare,e=this.root,g=[],l=0;e;){var m=b(a,e.key);g.push(e);0<=m&&(l=g.length);e=0>m?e.left:e.right}g.length=l;return new x(this,g)};b.find=function(a){for(var b=this._compare,e=this.root,g=[];e;){var l=b(a,e.key);g.push(e);if(0===l)return new x(this,g);e=0>=l?e.left:e.right}return new x(this,[])};b.remove=function(a){return(a=this.find(a))?
a.remove():this};b.get=function(a){for(var b=this._compare,e=this.root;e;){var g=b(a,e.key);if(0===g)return e.value;e=0>=g?e.left:e.right}};b=x.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new x(this.tree,this._stack.slice())};b.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var d=
Array(b.length),f=b[b.length-1];d[d.length-1]=new v(f._color,f.key,f.value,f.left,f.right,f._count);for(var g=b.length-2;0<=g;--g)f=b[g],d[g]=f.left===b[g+1]?new v(f._color,f.key,f.value,d[g+1],f.right,f._count):new v(f._color,f.key,f.value,f.left,d[g+1],f._count);f=d[d.length-1];if(f.left&&f.right){b=d.length;for(f=f.left;f.right;)d.push(f),f=f.right;g=d[b-1];d.push(new v(f._color,g.key,g.value,f.left,f.right,f._count));d[b-1].key=f.key;d[b-1].value=f.value;for(g=d.length-2;g>=b;--g)f=d[g],d[g]=
new v(f._color,f.key,f.value,f.left,d[g+1],f._count);d[b-1].left=d[b]}f=d[d.length-1];if(0===f._color)for(g=d[d.length-2],g.left===f?g.left=null:g.right===f&&(g.right=null),d.pop(),g=0;g<d.length;++g)d[g]._count--;else if(f.left||f.right)for(f.left?w(f,f.left):f.right&&w(f,f.right),f._color=1,g=0;g<d.length-1;++g)d[g]._count--;else{if(1===d.length)return new m(this.tree._compare,null);for(g=0;g<d.length;++g)d[g]._count--;for(var g=d[d.length-2],l,k,q,c=d.length-1;0<=c;--c){b=d[c];if(0===c){b._color=
1;break}l=d[c-1];if(l.left===b){k=l.right;if(k.right&&0===k.right._color){k=l.right=n(k);q=k.right=n(k.right);l.right=k.left;k.left=l;k.right=q;k._color=l._color;b._color=1;l._color=1;q._color=1;a(l);a(k);if(1<c){var t=d[c-2];t.left===l?t.left=k:t.right=k}d[c-1]=k;break}else if(k.left&&0===k.left._color){k=l.right=n(k);q=k.left=n(k.left);l.right=q.left;k.left=q.right;q.left=l;q.right=k;q._color=l._color;l._color=1;k._color=1;b._color=1;a(l);a(k);a(q);1<c&&(t=d[c-2],t.left===l?t.left=q:t.right=q);
d[c-1]=q;break}if(1===k._color)if(0===l._color){l._color=1;l.right=e(0,k);break}else l.right=e(0,k);else k=n(k),l.right=k.left,k.left=l,k._color=l._color,l._color=0,a(l),a(k),1<c&&(t=d[c-2],t.left===l?t.left=k:t.right=k),d[c-1]=k,d[c]=l,c+1<d.length?d[c+1]=b:d.push(b),c+=2}else{k=l.left;if(k.left&&0===k.left._color){k=l.left=n(k);q=k.left=n(k.left);l.left=k.right;k.right=l;k.left=q;k._color=l._color;b._color=1;l._color=1;q._color=1;a(l);a(k);1<c&&(t=d[c-2],t.right===l?t.right=k:t.left=k);d[c-1]=k;
break}else if(k.right&&0===k.right._color){k=l.left=n(k);q=k.right=n(k.right);l.left=q.right;k.right=q.left;q.right=l;q.left=k;q._color=l._color;l._color=1;k._color=1;b._color=1;a(l);a(k);a(q);1<c&&(t=d[c-2],t.right===l?t.right=q:t.left=q);d[c-1]=q;break}if(1===k._color)if(0===l._color){l._color=1;l.left=e(0,k);break}else l.left=e(0,k);else k=n(k),l.left=k.right,k.right=l,k._color=l._color,l._color=0,a(l),a(k),1<c&&(t=d[c-2],t.right===l?t.right=k:t.left=k),d[c-1]=k,d[c]=l,c+1<d.length?d[c+1]=b:d.push(b),
c+=2}}g.left===f?g.left=null:g.right=null}return new m(this.tree._compare,d[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-
1].left._count);for(var e=b.length-2;0<=e;--e)b[e+1]===b[e].right&&(++a,b[e].left&&(a+=b[e].left._count));return a},enumerable:!0});b.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===
a[b])return!0;return!1}});b.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");var e=Array(b.length),g=b[b.length-1];e[e.length-1]=new v(g._color,g.key,a,g.left,g.right,g._count);for(a=b.length-2;0<=a;--a)g=b[a],e[a]=g.left===b[a+1]?new v(g._color,g.key,g.value,e[a+1],g.right,g._count):new v(g._color,g.key,g.value,g.left,e[a+1],g._count);return new m(this.tree._compare,e[0])};b.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=
b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],121:[function(b,g,k){function v(a,b,e){this.slabs=a;this.coordinates=b;this.horizontal=e}function n(a,b){return a.y-b}function e(a,b){for(var h=null;a;){var d=a.key,f,g;d[0][0]<d[1][0]?(f=d[0],
g=d[1]):(f=d[1],g=d[0]);f=t(f,g,b);if(0>f)a=a.left;else if(0<f)if(b[0]!==d[1][0])h=a,a=a.right;else{if(d=e(a.right,b))return d;a=a.left}else{if(b[0]!==d[1][0])return a;if(d=e(a.right,b))return d;a=a.left}}return h}function a(a,b,e,d){this.y=a;this.index=b;this.start=e;this.closed=d}function m(a,b,e,d){this.x=a;this.segment=b;this.create=e;this.index=d}g.exports=function(b){for(var e=b.length,h=2*e,d=Array(h),f=0;f<e;++f){var g=b[f],l=g[0][0]<g[1][0];d[2*f]=new m(g[0][0],g,l,f);d[2*f+1]=new m(g[1][0],
g,!l,f)}d.sort(function(a,c){var b=a.x-c.x;return b?b:(b=a.create-c.create)?b:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(c.segment[0][1],c.segment[1][1])});b=z(x);e=[];g=[];l=[];for(f=0;f<h;){for(var k=d[f].x,n=[];f<h;){var c=d[f];if(c.x!==k)break;f+=1;c.segment[0][0]===c.x&&c.segment[1][0]===c.x?c.create&&(c.segment[0][1]<c.segment[1][1]?(n.push(new a(c.segment[0][1],c.index,!0,!0)),n.push(new a(c.segment[1][1],c.index,!1,!1))):(n.push(new a(c.segment[1][1],c.index,!0,!1)),n.push(new a(c.segment[0][1],
c.index,!1,!0)))):b=c.create?b.insert(c.segment,c.index):b.remove(c.segment)}e.push(b.root);g.push(k);l.push(n)}return new v(e,g,l)};var l=b("binary-search-bounds"),z=b("functional-red-black-tree"),t=b("robust-orientation"),x=b("./lib/order-segments");v.prototype.castUp=function(a){var b=l.le(this.coordinates,a[0]);if(0>b)return-1;var h=e(this.slabs[b],a),d=-1;h&&(d=h.value);if(this.coordinates[b]===a[0]){var f=null;h&&(f=h.key);0<b&&(h=e(this.slabs[b-1],a))&&(f?0<x(h.key,f)&&(f=h.key,d=h.value):
(d=h.value,f=h.key));h=this.horizontal[b];if(0<h.length){var g=l.ge(h,a[1],n);if(g<h.length){b=h[g];if(a[1]===b.y){if(b.closed)return b.index;for(;g<h.length-1&&h[g+1].y===a[1];)if(g+=1,b=h[g],b.closed)return b.index;if(b.y===a[1]&&!b.start){g+=1;if(g>=h.length)return d;b=h[g]}}b.start?f?(a=t(f[0],f[1],[a[0],b.y]),f[0][0]>f[1][0]&&(a=-a),0<a&&(d=b.index)):d=b.index:b.y!==a[1]&&(d=b.index)}}}return d}},{"./lib/order-segments":119,"binary-search-bounds":117,"functional-red-black-tree":120,"robust-orientation":126}],
122:[function(b,g,k){function v(){return!0}function n(a){return function(b,e){var g=a[b];return g?!!g.queryPoint(e,v):!1}}function e(a){for(var b={},e=0;e<a.length;++e){var g=a[e],l=g[0][0],k=g[0][1],g=g[1][1],k=[Math.min(k,g),Math.max(k,g)];l in b?b[l].push(k):b[l]=[k]}a={};l=Object.keys(b);for(e=0;e<l.length;++e)a[l[e]]=w(b[l[e]]);return n(a)}function a(a,b){return function(e){var g=q.le(b,e[0]);if(0>g)return 1;var l=a[g];if(!l)if(0<g&&b[g]===e[0])l=a[g-1];else return 1;for(g=1;l;){var k=l.key,
m=t(e,k[0],k[1]);if(k[0][0]<k[1][0])if(0>m)l=l.left;else if(0<m)g=-1,l=l.right;else return 0;else if(0<m)l=l.left;else if(0>m)g=1,l=l.right;else return 0}return g}}function m(a){return 1}function l(a){return function(b){return a(b[0],b[1])?0:1}}function z(a,b){return function(e){return a(e[0],e[1])?0:b(e)}}g.exports=function(b){for(var d=b.length,f=[],g=[],k=0;k<d;++k)for(var n=b[k],q=n.length,c=q-1,t=0;t<q;c=t++){var c=n[c],w=n[t];c[0]===w[0]?g.push([c,w]):f.push([c,w])}if(0===f.length)return 0===
g.length?m:l(e(g));b=x(f);b=a(b.slabs,b.coordinates);return 0===g.length?b:z(e(g),b)};var t=b("robust-orientation")[3],x=b("slab-decomposition"),w=b("interval-tree-1d"),q=b("binary-search-bounds")},{"binary-search-bounds":117,"interval-tree-1d":118,"robust-orientation":126,"slab-decomposition":121}],123:[function(b,g,k){arguments[4][49][0].apply(k,arguments)},{dup:49}],124:[function(b,g,k){arguments[4][50][0].apply(k,arguments)},{dup:50,"two-product":128,"two-sum":123}],125:[function(b,g,k){arguments[4][51][0].apply(k,
arguments)},{dup:51}],126:[function(b,g,k){arguments[4][59][0].apply(k,arguments)},{dup:59,"robust-scale":124,"robust-subtract":125,"robust-sum":127,"two-product":128}],127:[function(b,g,k){arguments[4][52][0].apply(k,arguments)},{dup:52}],128:[function(b,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],129:[function(b,g,k){g.exports=function(b,g,e){if(0===b.length)return b;if(g){e||b.sort(g);e=1;for(var a=b.length,k=b[0],l=b[0],z=1;z<a;++z)l=k,k=b[z],g(k,l)&&(z===e?e++:b[e++]=k);b.length=e;
return b}e||b.sort();g=1;e=b.length;a=b[0];k=b[0];for(l=1;l<e;++l)k=a,a=b[l],a!==k&&(l===g?g++:b[g++]=a);b.length=g;return b}},{}],130:[function(b,g,k){function v(a,b){for(var e=Array(a),d=0;d<a;++d)e[d]=b;return e}function n(a){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return b}g.exports=function(b,g){function h(a){for(var b=a.length,c=0;c<b;++c)if(!G[a[c]])return!1;return!0}var d=x(b,g);b=d[0];g=d[1];for(var f=g.length,k=e(b,g.length),p=0;p<f;++p)if(1===k[p].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
for(var k=a(b,g),k=k.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var e=g[a[d]],f=g[a[(d+1)%b]],h=l(-e[0],e[1]),k=l(-e[0],f[1]),e=l(f[0],e[1]),f=l(f[0],f[1]),c=z(c,z(z(h,k),z(e,f)));return 0<c[c.length-1]}),d=k.length,A=Array(d),B=Array(d),p=0;p<d;++p){A[p]=p;var c=Array(d),y=k[p].map(function(a){return g[a]}),C=m([y]),u=0,D=0;a:for(;D<d;++D)if(c[D]=0,p!==D){for(var y=k[D],E=y.length,R=0;R<E;++R){var H=C(g[y[R]]);if(0!==H){0>H&&(c[D]=1,u+=1);continue a}}c[D]=1;u+=1}B[p]=[u,p,c]}B.sort(function(a,
b){return b[0]-a[0]});for(p=0;p<d;++p)for(c=B[p],y=c[1],E=c[2],D=0;D<d;++D)E[D]&&(A[D]=y);B=n(d);for(p=0;p<d;++p)B[p].push(A[p]),B[A[p]].push(p);for(var c={},G=v(f,!1),p=0;p<d;++p)for(y=k[p],E=y.length,D=0;D<E;++D)f=y[D],C=y[(D+1)%E],u=Math.min(f,C)+":"+Math.max(f,C),u in c?(u=c[u],B[u].push(p),B[p].push(u),G[f]=G[C]=!0):c[u]=p;D=[];f=v(d,-1);for(p=0;p<d;++p)A[p]!==p||h(k[p])?f[p]=-1:(D.push(p),f[p]=0);for(d=[];0<D.length;){p=D.pop();A=B[p];t(A,function(a,b){return a-b});var E=A.length,c=f[p],O;0===
c&&(y=k[p],O=[y]);for(p=0;p<E;++p)y=A[p],0<=f[y]||(f[y]=c^1,D.push(y),0===c&&(y=k[y],h(y)||(y.reverse(),O.push(y))));0===c&&d.push(O)}return d};var e=b("edges-to-adjacency-list"),a=b("planar-dual"),m=b("point-in-big-polygon"),l=b("two-product"),z=b("robust-sum"),t=b("uniq"),x=b("./lib/trim-leaves")},{"./lib/trim-leaves":109,"edges-to-adjacency-list":110,"planar-dual":111,"point-in-big-polygon":122,"robust-sum":127,"two-product":128,uniq:129}],131:[function(b,g,k){arguments[4][49][0].apply(k,arguments)},
{dup:49}],132:[function(b,g,k){arguments[4][50][0].apply(k,arguments)},{dup:50,"two-product":135,"two-sum":131}],133:[function(b,g,k){arguments[4][51][0].apply(k,arguments)},{dup:51}],134:[function(b,g,k){arguments[4][52][0].apply(k,arguments)},{dup:52}],135:[function(b,g,k){arguments[4][53][0].apply(k,arguments)},{dup:53}],136:[function(b,g,k){arguments[4][59][0].apply(k,arguments)},{dup:59,"robust-scale":132,"robust-subtract":133,"robust-sum":134,"two-product":135}],137:[function(b,g,k){arguments[4][75][0].apply(k,
arguments)},{dup:75}],138:[function(b,g,k){function v(b){this.roots=Array(b);this.ranks=Array(b);for(var e=0;e<b;++e)this.roots[e]=e,this.ranks[e]=0}"use restrict";g.exports=v;v.prototype.length=function(){return this.roots.length};v.prototype.makeSet=function(){var b=this.roots.length;this.roots.push(b);this.ranks.push(0);return b};v.prototype.find=function(b){for(var e=this.roots;e[b]!==b;){var a=e[b];e[b]=e[a];b=a}return b};v.prototype.link=function(b,e){var a=this.find(b),g=this.find(e);if(a!==
g){var l=this.ranks,k=this.roots,t=l[a],v=l[g];t<v?k[a]=g:v<t?k[g]=a:(k[g]=a,++l[a])}}},{}],139:[function(b,g,k){function v(a,b){var e=a.length,d=a.length-b.length,f=Math.min;if(d)return d;switch(e){case 0:return 0;case 1:return a[0]-b[0];case 2:return(e=a[0]+a[1]-b[0]-b[1])?e:f(a[0],a[1])-f(b[0],b[1]);case 3:var d=a[0]+a[1],g=b[0]+b[1];if(e=d+a[2]-(g+b[2]))return e;var l=f(a[0],a[1]),k=f(b[0],b[1]);return(e=f(l,a[2])-f(k,b[2]))?e:f(l+a[2],d)-f(k+b[2],g);default:f=a.slice(0);f.sort();g=b.slice(0);
g.sort();for(l=0;l<e;++l)if(d=f[l]-g[l])return d;return 0}}function n(a,b){return v(a[0],b[0])}function e(a,b){if(b){for(var e=a.length,d=Array(e),f=0;f<e;++f)d[f]=[a[f],b[f]];d.sort(n);for(f=0;f<e;++f)a[f]=d[f][0],b[f]=d[f][1]}else a.sort(v);return a}function a(a){if(0===a.length)return[];for(var b=1,e=a.length,d=1;d<e;++d){var f=a[d];v(f,a[d-1])&&(d===b?b++:a[b++]=f)}a.length=b;return a}function m(a,b){for(var e=0,d=a.length-1,f=-1;e<=d;){var g=e+d>>1,l=v(a[g],b);0>=l?(0===l&&(f=g),e=g+1):0<l&&
(d=g-1)}return f}function l(a,b){for(var e=Array(a.length),d=0,f=e.length;d<f;++d)e[d]=[];for(var f=[],d=0,g=b.length;d<g;++d)for(var l=b[d],k=l.length,n=1,c=1<<k;n<c;++n){f.length=t.popCount(n);for(var x=0,z=0;z<k;++z)n&1<<z&&(f[x++]=l[z]);x=m(a,f);if(!(0>x))for(;!(e[x++].push(d),x>=a.length||0!==v(a[x],f)););}return e}function z(a,b){if(0>b)return[];for(var g=[],d=(1<<b+1)-1,f=0;f<a.length;++f)for(var l=a[f],k=d;k<1<<l.length;k=t.nextCombination(k)){for(var m=Array(b+1),n=0,c=0;c<l.length;++c)k&
1<<c&&(m[n++]=l[c]);g.push(m)}return e(g)}"use restrict";var t=b("bit-twiddle"),x=b("union-find");k.dimension=function(a){for(var b=0,e=Math.max,d=0,f=a.length;d<f;++d)b=e(b,a[d].length);return b-1};k.countVertices=function(a){for(var b=-1,e=Math.max,d=0,f=a.length;d<f;++d)for(var g=a[d],l=0,k=g.length;l<k;++l)b=e(b,g[l]);return b+1};k.cloneCells=function(a){for(var b=Array(a.length),e=0,d=a.length;e<d;++e)b[e]=a[e].slice(0);return b};k.compareCells=v;k.normalize=e;k.unique=a;k.findCell=m;k.incidence=
l;k.dual=function(b,e){if(!e)return l(a(z(b,0)),b,0);for(var g=Array(e),d=0;d<e;++d)g[d]=[];for(var d=0,f=b.length;d<f;++d)for(var k=b[d],m=0,n=k.length;m<n;++m)g[k[m]].push(d);return g};k.explode=function(a){for(var b=[],g=0,d=a.length;g<d;++g)for(var f=a[g],l=f.length|0,k=1,m=1<<l;k<m;++k){for(var n=[],c=0;c<l;++c)k>>>c&1&&n.push(f[c]);b.push(n)}return e(b)};k.skeleton=z;k.boundary=function(a){for(var b=[],g=0,d=a.length;g<d;++g)for(var f=a[g],l=0,k=f.length;l<k;++l){for(var m=Array(f.length-1),
n=0,c=0;n<k;++n)n!==l&&(m[c++]=f[n]);b.push(m)}return e(b)};k.connectedComponents=function(b,g){if(g){for(var h=new x(g),d=0;d<b.length;++d)for(var f=b[d],l=0;l<f.length;++l)for(var k=l+1;k<f.length;++k)h.link(f[l],f[k]);f=[];l=h.ranks;for(d=0;d<l.length;++d)l[d]=-1;for(d=0;d<b.length;++d)k=h.find(b[d][0]),0>l[k]?(l[k]=f.length,f.push([b[d].slice(0)])):f[l[k]].push(b[d].slice(0));return f}h=a(e(z(b,0)));d=new x(h.length);for(f=0;f<b.length;++f)for(l=b[f],k=0;k<l.length;++k)for(var n=m(h,[l[k]]),t=
k+1;t<l.length;++t)d.link(n,m(h,[l[t]]));l=[];k=d.ranks;for(f=0;f<k.length;++f)k[f]=-1;for(f=0;f<b.length;++f)n=d.find(m(h,[b[f][0]])),0>k[n]?(k[n]=l.length,l.push([b[f].slice(0)])):l[k[n]].push(b[f].slice(0));return l}},{"bit-twiddle":137,"union-find":138}],140:[function(b,g,k){g.exports=function(b,a,g){function l(b){if(c[b])return Infinity;var d=p[b],e=A[b];if(0>d||0>e)return Infinity;d=a[d];e=a[e];return Math.abs(v(a[b],d,e))/Math.sqrt(Math.pow(d[0]-e[0],2)+Math.pow(d[1]-e[1],2))}function k(a,
b){var c=D[a],d=D[b];D[a]=d;D[b]=c;E[c]=b;E[d]=a}function t(a){for(var b=B[D[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<R){var g=B[D[d]];g<c&&(f=d,c=g)}e<R&&B[D[e]]<c&&(f=e);if(f===a)return a;k(a,f);a=f}}function x(a){for(var b=B[D[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<B[D[c]])k(a,c),a=c;else return a}}function w(){if(0<R){var a=D[0];k(0,R-1);--R;t(0);return a}return-1}function q(a,b){var c=D[a];if(B[c]===b)return a;B[c]=-Infinity;x(a);w();B[c]=b;R+=1;return x(R-1)}function h(a){if(!c[a]){c[a]=
!0;var b=p[a];a=A[a];0<=p[a]&&(p[a]=b);0<=A[b]&&(A[b]=a);0<=E[b]&&q(E[b],l(b));0<=E[a]&&q(E[a],l(a))}}function d(a,b){if(0>a[b])return b;var d=b,e=b;do{var f=a[e];if(!c[e]||0>f||f===e)break;e=f;f=a[e];if(!c[e]||0>f||f===e)break;e=f;d=a[d]}while(d!==e);for(d=b;d!==e;d=a[d])a[d]=e;return e}for(var f=a.length,r=b.length,p=Array(f),A=Array(f),B=Array(f),c=Array(f),y=0;y<f;++y)p[y]=A[y]=-1,B[y]=Infinity,c[y]=!1;for(y=0;y<r;++y){var C=b[y];if(2!==C.length)throw Error("Input must be a graph");var u=C[1],
C=C[0];A[C]=-1!==A[C]?-2:u;p[u]=-1!==p[u]?-2:C}for(var D=[],E=Array(f),y=0;y<f;++y)Infinity>(B[y]=l(y))?(E[y]=D.length,D.push(y)):E[y]=-1;for(var R=D.length,y=R>>1;0<=y;--y)t(y);for(;;){y=w();if(0>y||B[y]>g)break;h(y)}g=[];for(y=0;y<f;++y)c[y]||(E[y]=g.length,g.push(a[y].slice()));var H=[];b.forEach(function(a){var b=d(p,a[0]);a=d(A,a[1]);0<=b&&0<=a&&b!==a&&(b=E[b],a=E[a],b!==a&&H.push([b,a]))});n.unique(n.normalize(H));return{positions:g,edges:H}};var v=b("robust-orientation"),n=b("simplicial-complex")},
{"robust-orientation":136,"simplicial-complex":139}],141:[function(b,g,k){function v(a,b,e){for(var d=0,f=0;f<a;++f)b&1<<f&&(d|=1<<e[f]);return d}function n(b,g,h,d,f,k){function n(a,b){D.push("for(","i"+f[a],"=",b,";","i"+f[a],"<","s"+f[a],";","++","i"+f[a],"){")}function A(a){for(var b=0;b<y;++b)D.push("p"+b,"+=","u"+b+"_"+f[a],";");D.push("}")}function B(){for(var a=1;a<1<<C;++a)D.push(x,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",x,";")}function c(b,e){if(0>b){for(var g=0;g<y;++g)k[g]?D.push("c"+
g+"_0","=","d"+g,".get(","p"+g,");"):D.push("c"+g+"_0","=","d"+g,"[","p"+g,"];");for(var h=[],g=0;g<y;++g)h.push("c"+g+"_0");for(g=0;g<d;++g)h.push("x"+g);D.push("b0","=",m,"[",t,"]=phase(",h.join(),");");for(h=1;h<1<<C;++h)D.push("b"+h,"=",m,"[",t,"+","e"+h,"];");g=[];for(h=1;h<1<<C;++h)g.push("(b0!==b"+h+")");D.push("if(",g.join("||"),"){");for(var u=[],g=0;g<C;++g)u.push("i"+g);for(g=0;g<y;++g)for(u.push("c"+g+"_0"),h=1;h<1<<C;++h)k[g]?D.push("c"+g+"_"+h,"=","d"+g,".get(","p"+g,"+","d"+g+"_"+h,
");"):D.push("c"+g+"_"+h,"=","d"+g,"[","p"+g,"+","d"+g+"_"+h,"];"),u.push("c"+g+"_"+h);for(g=0;g<1<<C;++g)u.push("b"+g);for(g=0;g<d;++g)u.push("x"+g);D.push("vertex(",u.join(),");","v0","=",a,"[",t,"]=",l,"++;");g=(1<<C)-1;u="b"+g;for(h=0;h<C;++h)if(0===(e&~(1<<h))){for(var q=g^1<<h,w="b"+q,v=[],x=q;0<x;x=x-1&q)v.push(a+"["+t+"+"+("e"+x)+"]");v.push("v0");for(x=0;x<y;++x)h&1?v.push("c"+x+"_"+g,"c"+x+"_"+q):v.push("c"+x+"_"+q,"c"+x+"_"+g);h&1?v.push(u,w):v.push(w,u);for(x=0;x<d;++x)v.push("x"+x);D.push("if(",
u,"!==",w,"){","face(",v.join(),")}")}D.push("}",t,"+=1;")}else{for(h=b-1;0<=h;--h)n(h,0);g=[];for(h=0;h<y;++h)k[h]?g.push("d"+h+".get("+("p"+h)+")"):g.push("d"+h+"["+("p"+h)+"]");for(h=0;h<d;++h)g.push("x"+h);D.push(m,"[",t,"++]=phase(",g.join(),");");for(h=0;h<b;++h)A(h);for(h=0;h<y;++h)D.push("p"+h,"+=","u"+h+"_"+f[b],";");D.push("if(","s"+f[b],">0){","i"+f[b],"=1;");c(b-1,e|1<<f[b]);for(h=0;h<y;++h)D.push("p"+h,"+=","u"+h+"_"+f[b],";");b===C-1&&(D.push(t,"=0;"),B());n(b,2);c(b-1,e);b===C-1&&(D.push("if(",
"i"+f[C-1],"&1){",t,"=0;}"),B());A(b);D.push("}")}}var y=k.length,C=f.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var u="extractContour"+f.join("_"),D=[],E=[],R=[],H=0;H<y;++H)R.push("a"+H);for(H=0;H<d;++H)R.push("x"+H);for(H=0;H<C;++H)E.push("s"+H+"=a0.shape["+H+"]|0");for(H=0;H<y;++H){E.push("d"+H+"="+("a"+H)+".data","o"+H+"="+("a"+H)+".offset|0");for(var G=0;G<C;++G)E.push("t"+H+"_"+G+"="+("a"+H)+".stride["+G+"]|0")}for(H=0;H<y;++H)for(E.push("p"+H+"="+
("o"+H)),E.push("c"+H+"_0"),G=1;G<1<<C;++G){for(var O=[],J=0;J<C;++J)G&1<<J&&O.push("-"+("t"+H+"_"+J));E.push("d"+H+"_"+G+"=("+O.join("")+")|0");E.push("c"+H+"_"+G+"=0")}for(H=0;H<y;++H)for(G=0;G<C;++G)J=["t"+H+"_"+f[G]],0<G&&J.push("t"+H+"_"+f[G-1]+"*"+("s"+f[G-1])),E.push("u"+H+"_"+f[G]+"=("+J.join("-")+")|0");for(H=0;H<C;++H)E.push("i"+H+"=0");E.push(l+"=0");G=["2"];for(H=C-2;0<=H;--H)G.push("s"+f[H]);E.push(z+"=("+G.join("*")+")|0",m+"=mallocUint32("+z+")",a+"=mallocUint32("+z+")",t+"=0");E.push("b0=0");
for(G=1;G<1<<C;++G){H=[];O=[];for(J=0;J<C;++J)G&1<<J&&(0===O.length?H.push("1"):H.unshift(O.join("*"))),O.push("s"+f[J]);J="";0>H[0].indexOf("s"+f[C-2])&&(J="-");O=v(C,G,f);E.push("e"+O+"=(-"+H.join("-")+")|0","y"+O+"=("+J+H.join("-")+")|0","b"+O+"=0")}E.push("v0=0",x+"=0");c(C-1,0);D.push("freeUint32(",a,");freeUint32(",m,");");u=["'use strict';function ",u,"(",R.join(),"){var ",E.join(),";",D.join(""),"}return ",u].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",
u))(b,g,h,e.mallocUint32,e.freeUint32)}var e=b("typedarray-pool");g.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");var e=a.order;Array.isArray(e)||b("Must specify order");var d=a.arrayArguments||1;1>d&&b("Must have at least one array argument");var f=a.scalarArguments||0;0>f&&b("Scalar arg count must be > 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");
"function"!==typeof a.phase&&b("Must specify phase function");for(var g=a.getters||[],l=Array(d),k=0;k<d;++k)0<=g.indexOf(k)?l[k]=!0:l[k]=!1;return n(a.vertex,a.cell,a.phase,f,e,l)};var a="V",m="P",l="N",z="Q",t="X",x="T"},{"typedarray-pool":144}],142:[function(b,g,k){arguments[4][75][0].apply(k,arguments)},{dup:75}],143:[function(b,g,k){arguments[4][89][0].apply(k,arguments)},{dup:89}],144:[function(b,g,k){(function(g,n){function e(a){if(a){var b=p.log2(a.length||a.byteLength);y[b].push(a)}}function a(a){a=
p.nextPow2(a);var b=p.log2(a),b=y[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function m(b){return new Uint8Array(a(b),0,b)}function l(b){return new Uint16Array(a(2*b),0,b)}function z(b){return new Uint32Array(a(4*b),0,b)}function t(b){return new Int8Array(a(b),0,b)}function x(b){return new Int16Array(a(2*b),0,b)}function w(b){return new Int32Array(a(4*b),0,b)}function q(b){return new Float32Array(a(4*b),0,b)}function h(b){return new Float64Array(a(8*b),0,b)}function d(b){return B?new Uint8ClampedArray(a(b),
0,b):m(b)}function f(b){return new DataView(a(b),0,b)}function r(a){a=p.nextPow2(a);var b=p.log2(a),b=C[b];return 0<b.length?b.pop():new n(a)}var p=b("bit-twiddle"),A=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var B="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=A([32,0]));c.BUFFER||
(c.BUFFER=A([32,0]));var y=c.DATA,C=c.BUFFER;k.free=function(a){if(n.isBuffer(a))C[p.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=p.log2(a.length||a.byteLength)|0;y[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){e(a.buffer)};k.freeArrayBuffer=e;k.freeBuffer=function(a){C[p.log2(a.length)].push(a)};
k.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return a(b);switch(c){case "uint8":return m(b);case "uint16":return l(b);case "uint32":return z(b);case "int8":return t(b);case "int16":return x(b);case "int32":return w(b);case "float":case "float32":return q(b);case "double":case "float64":return h(b);case "uint8_clamped":return d(b);case "buffer":return r(b);case "data":case "dataview":return f(b);default:return null}};k.mallocArrayBuffer=a;k.mallocUint8=m;k.mallocUint16=l;k.mallocUint32=
z;k.mallocInt8=t;k.mallocInt16=x;k.mallocInt32=w;k.mallocFloat32=k.mallocFloat=q;k.mallocFloat64=k.mallocDouble=h;k.mallocUint8Clamped=d;k.mallocDataView=f;k.mallocBuffer=r;k.clearCache=function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,y[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":142,buffer:33,dup:143}],145:[function(b,g,k){function v(a){if(0>a)return Number("0/0");for(var b=e[0],g=e.length-1;0<g;--g)b+=e[g]/(a+g);g=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(g)-g+Math.log(b)-Math.log(a)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],e=[.9999999999999971,
57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];g.exports=function m(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*m(1-b));if(100<b)return Math.exp(v(b));--b;for(var e=n[0],g=1;9>g;g++)e+=n[g]/(b+g);g=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,b+.5)*Math.exp(-g)*
e};g.exports.log=v},{}],146:[function(b,g,k){arguments[4][75][0].apply(k,arguments)},{dup:75}],147:[function(b,g,k){arguments[4][89][0].apply(k,arguments)},{dup:89}],148:[function(b,g,k){(function(g,n){function e(a){if(a){var b=p.log2(a.length||a.byteLength);y[b].push(a)}}function a(a){a=p.nextPow2(a);var b=p.log2(a),b=y[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function m(b){return new Uint8Array(a(b),0,b)}function l(b){return new Uint16Array(a(2*b),0,b)}function z(b){return new Uint32Array(a(4*
b),0,b)}function t(b){return new Int8Array(a(b),0,b)}function x(b){return new Int16Array(a(2*b),0,b)}function w(b){return new Int32Array(a(4*b),0,b)}function q(b){return new Float32Array(a(4*b),0,b)}function h(b){return new Float64Array(a(8*b),0,b)}function d(b){return B?new Uint8ClampedArray(a(b),0,b):m(b)}function f(b){return new DataView(a(b),0,b)}function r(a){a=p.nextPow2(a);var b=p.log2(a),b=C[b];return 0<b.length?b.pop():new n(a)}var p=b("bit-twiddle"),A=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL=
{UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var B="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=A([32,0]));c.BUFFER||(c.BUFFER=A([32,0]));var y=c.DATA,C=c.BUFFER;k.free=function(a){if(n.isBuffer(a))C[p.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=p.log2(a.length||
a.byteLength)|0;y[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){e(a.buffer)};k.freeArrayBuffer=e;k.freeBuffer=function(a){C[p.log2(a.length)].push(a)};k.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return a(b);switch(c){case "uint8":return m(b);case "uint16":return l(b);case "uint32":return z(b);case "int8":return t(b);case "int16":return x(b);case "int32":return w(b);
case "float":case "float32":return q(b);case "double":case "float64":return h(b);case "uint8_clamped":return d(b);case "buffer":return r(b);case "data":case "dataview":return f(b);default:return null}};k.mallocArrayBuffer=a;k.mallocUint8=m;k.mallocUint16=l;k.mallocUint32=z;k.mallocInt8=t;k.mallocInt16=x;k.mallocInt32=w;k.mallocFloat32=k.mallocFloat=q;k.mallocFloat64=k.mallocDouble=h;k.mallocUint8Clamped=d;k.mallocDataView=f;k.mallocBuffer=r;k.clearCache=function(){for(var a=0;32>a;++a)c.UINT8[a].length=
0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,y[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":146,buffer:33,dup:147}],149:[function(b,g,k){g.exports=function(b){var a=b.length;if(a<v)for(var g=1,l=0;l<a;++l)for(var k=0;k<l;++k)if(b[l]<b[k])g=-g;else{if(b[l]===
b[k])return 0}else{for(var t=n.mallocUint8(a),l=0;l<a;++l)t[l]=0;g=1;for(l=0;l<a;++l)if(!t[l]){var x=1;t[l]=1;for(k=b[l];k!==l;k=b[k]){if(t[k])return n.freeUint8(t),0;x+=1;t[k]=1}x&1||(g=-g)}n.freeUint8(t)}return g};var v=32,n=b("typedarray-pool")},{"typedarray-pool":148}],150:[function(b,g,k){var v=b("typedarray-pool"),n=b("invert-permutation");k.rank=function(b){var a=b.length;switch(a){case 0:case 1:return 0;case 2:return b[1]}var g=v.mallocUint32(a),l=v.mallocUint32(a),k=0,t;n(b,l);for(t=0;t<
a;++t)g[t]=b[t];for(t=a-1;0<t;--t)a=l[t],b=g[t],g[t]=g[a],g[a]=b,l[t]=l[b],l[b]=a,k=(k+b)*t;v.freeUint32(l);v.freeUint32(g);return k};k.unrank=function(b,a,g){switch(b){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(a?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):a?[0,1]:[1,0]}g=g||Array(b);var l,k,n=1;g[0]=0;for(k=1;k<b;++k)g[k]=k,n=n*k|0;for(k=b-1;0<k;--k)b=a/n|0,a=a-b*n|0,n=n/k|0,l=g[k]|0,g[k]=g[b]|0,g[b]=l|0;return g}},{"invert-permutation":151,"typedarray-pool":154}],151:[function(b,
g,k){g.exports=function(b,g){g=g||Array(b.length);for(var e=0;e<b.length;++e)g[b[e]]=e;return g}},{}],152:[function(b,g,k){arguments[4][75][0].apply(k,arguments)},{dup:75}],153:[function(b,g,k){arguments[4][89][0].apply(k,arguments)},{dup:89}],154:[function(b,g,k){(function(g,n){function e(a){if(a){var b=p.log2(a.length||a.byteLength);y[b].push(a)}}function a(a){a=p.nextPow2(a);var b=p.log2(a),b=y[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function m(b){return new Uint8Array(a(b),0,b)}function l(b){return new Uint16Array(a(2*
b),0,b)}function z(b){return new Uint32Array(a(4*b),0,b)}function t(b){return new Int8Array(a(b),0,b)}function x(b){return new Int16Array(a(2*b),0,b)}function w(b){return new Int32Array(a(4*b),0,b)}function q(b){return new Float32Array(a(4*b),0,b)}function h(b){return new Float64Array(a(8*b),0,b)}function d(b){return B?new Uint8ClampedArray(a(b),0,b):m(b)}function f(b){return new DataView(a(b),0,b)}function r(a){a=p.nextPow2(a);var b=p.log2(a),b=C[b];return 0<b.length?b.pop():new n(a)}var p=b("bit-twiddle"),
A=b("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var B="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=A([32,0]));c.BUFFER||(c.BUFFER=A([32,0]));var y=c.DATA,C=c.BUFFER;k.free=function(a){if(n.isBuffer(a))C[p.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=p.log2(a.length||a.byteLength)|0;y[b].push(a)}};k.freeUint8=k.freeUint16=k.freeUint32=k.freeInt8=k.freeInt16=k.freeInt32=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=function(a){e(a.buffer)};k.freeArrayBuffer=e;k.freeBuffer=function(a){C[p.log2(a.length)].push(a)};k.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return a(b);switch(c){case "uint8":return m(b);case "uint16":return l(b);case "uint32":return z(b);case "int8":return t(b);
case "int16":return x(b);case "int32":return w(b);case "float":case "float32":return q(b);case "double":case "float64":return h(b);case "uint8_clamped":return d(b);case "buffer":return r(b);case "data":case "dataview":return f(b);default:return null}};k.mallocArrayBuffer=a;k.mallocUint8=m;k.mallocUint16=l;k.mallocUint32=z;k.mallocInt8=t;k.mallocInt16=x;k.mallocInt32=w;k.mallocFloat32=k.mallocFloat=q;k.mallocFloat64=k.mallocDouble=h;k.mallocUint8Clamped=d;k.mallocDataView=f;k.mallocBuffer=r;k.clearCache=
function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,y[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":152,buffer:33,dup:153}],155:[function(b,g,k){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var b=
Math.round(e(a+1))|0,g=[],k=0;k<b;++k){for(var t=v.unrank(a,k),x=[0],w=0,q=0;q<t.length;++q)w+=1<<t[q],x.push(w);1>n(t)&&(x[0]=w,x[a]=0);g.push(x)}return g};var v=b("permutation-rank"),n=b("permutation-parity"),e=b("gamma")},{gamma:145,"permutation-parity":149,"permutation-rank":150}],156:[function(b,g,k){g.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],157:[function(b,g,k){function v(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=b("./lib/thunk.js");g.exports=function(b){var a=new v;a.pre=b.pre;a.body=b.body;a.post=b.post;var g=b.args.slice(0);a.argTypes=g;for(var l=0;l<g.length;++l){var k=g[l];if("array"===k||"object"===typeof k&&k.blockIndices){a.argTypes[l]="array";a.arrayArgs.push(l);a.arrayBlockIndices.push(k.blockIndices?k.blockIndices:0);a.shimArgs.push("array"+l);if(l<
a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array args");if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===k)a.scalarArgs.push(l),a.shimArgs.push("scalar"+l);else if("index"===k){a.indexArgs.push(l);if(l<a.pre.args.length&&0<a.pre.args[l].count)throw Error("cwise: pre() block may not reference array index");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array index");
if(l<a.post.args.length&&0<a.post.args[l].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===k){a.shapeArgs.push(l);if(l<a.pre.args.length&&a.pre.args[l].lvalue)throw Error("cwise: pre() block may not write to array shape");if(l<a.body.args.length&&a.body.args[l].lvalue)throw Error("cwise: body() block may not write to array shape");if(l<a.post.args.length&&a.post.args[l].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof k&&k.offset)a.argTypes[l]="offset",a.offsetArgs.push({array:k.array,offset:k.offset}),a.offsetArgIndex.push(l);else throw Error("cwise: Unknown argument type "+g[l]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>g.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>g.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>g.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!b.printCode||!!b.debug;a.funcName=b.funcName||"cwise";a.blockSize=b.blockSize||64;return n(a)}},{"./lib/thunk.js":159}],158:[function(b,g,k){function v(a,b,e){var g=a.length,k=b.arrayArgs.length;b=0<b.indexArgs.length;var m=[],h=[],d=0,f=0,n,p;for(n=0;n<g;++n)h.push(["i",n,"=0"].join(""));for(p=0;p<k;++p)for(n=0;n<g;++n)f=d,d=a[n],0===n?h.push(["d",p,"s",n,"=t",p,"p",d].join("")):h.push(["d",p,"s",n,"=(t",p,"p",d,"-s",f,"*t",p,"p",f,")"].join(""));m.push("var "+h.join(","));for(n=g-1;0<=
n;--n)d=a[n],m.push(["for(i",n,"=0;i",n,"<s",d,";++i",n,"){"].join(""));m.push(e);for(n=0;n<g;++n){f=d;d=a[n];for(p=0;p<k;++p)m.push(["p",p,"+=d",p,"s",n].join(""));b&&(0<n&&m.push(["index[",f,"]-=s",f].join("")),m.push(["++index[",d,"]"].join("")));m.push("}")}return m.join("\n")}function n(a,b,e,g){for(var k=b.length,n=e.arrayArgs.length,h=e.blockSize,d=0<e.indexArgs.length,f=[],m=0;m<n;++m)f.push(["var offset",m,"=p",m].join(""));for(m=a;m<k;++m)f.push(["for(var j"+m+"=SS[",b[m],"]|0;j",m,">0;){"].join("")),
f.push(["if(j",m,"<",h,"){"].join("")),f.push(["s",b[m],"=j",m].join("")),f.push(["j",m,"=0"].join("")),f.push(["}else{s",b[m],"=",h].join("")),f.push(["j",m,"-=",h,"}"].join("")),d&&f.push(["index[",b[m],"]=j",m].join(""));for(m=0;m<n;++m){h=["offset"+m];for(d=a;d<k;++d)h.push(["j",d,"*t",m,"p",b[d]].join(""));f.push(["p",m,"=(",h.join("+"),")"].join(""))}f.push(v(b,e,g));for(m=a;m<k;++m)f.push("}");return f.join("\n")}function e(a,b,e){for(var g=a.body,k=[],m=[],h=0;h<a.args.length;++h){var d=a.args[h];
if(!(0>=d.count)){var f=new RegExp(d.name,"g"),n="",p=b.arrayArgs.indexOf(h);switch(b.argTypes[h]){case "offset":var v=b.offsetArgIndex.indexOf(h),p=b.offsetArgs[v].array,n="+q"+v;case "array":var n="p"+p+n,B="l"+h,v="a"+p;if(0===b.arrayBlockIndices[p])1===d.count?"generic"===e[p]?d.lvalue?(k.push(["var ",B,"=",v,".get(",n,")"].join("")),g=g.replace(f,B),m.push([v,".set(",n,",",B,")"].join(""))):g=g.replace(f,[v,".get(",n,")"].join("")):g=g.replace(f,[v,"[",n,"]"].join("")):"generic"===e[p]?(k.push(["var ",
B,"=",v,".get(",n,")"].join("")),g=g.replace(f,B),d.lvalue&&m.push([v,".set(",n,",",B,")"].join(""))):(k.push(["var ",B,"=",v,"[",n,"]"].join("")),g=g.replace(f,B),d.lvalue&&m.push([v,"[",n,"]=",B].join("")));else{f=[d.name];d=[n];for(n=0;n<Math.abs(b.arrayBlockIndices[p]);n++)f.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(n+1)+"*t"+p+"b"+n);f=new RegExp(f.join(""),"g");n=d.join("+");if("generic"===e[p])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(f,[v,"[",
n,"]"].join(""))}break;case "scalar":g=g.replace(f,"Y"+b.scalarArgs.indexOf(h));break;case "index":g=g.replace(f,"index");break;case "shape":g=g.replace(f,"shape")}}}return[k.join("\n"),g,m.join("\n")].join("\n").trim()}function a(a){for(var b=Array(a.length),e=!0,g=0;g<a.length;++g){var k=a[g],n=k.match(/\d+/),n=n?n[0]:"";0===k.charAt(0)?b[g]="u"+k.charAt(1)+n:b[g]=k.charAt(0)+n;0<g&&(e=e&&b[g]===b[g-1])}return e?b[0]:b.join("")}var m=b("uniq");g.exports=function(b,g){for(var k=g[1].length-Math.abs(b.arrayBlockIndices[0])|
0,x=Array(b.arrayArgs.length),w=Array(b.arrayArgs.length),q=0;q<b.arrayArgs.length;++q)w[q]=g[2*q],x[q]=g[2*q+1];for(var h=[],d=[],f=[],r=[],p=[],q=0;q<b.arrayArgs.length;++q){0>b.arrayBlockIndices[q]?(f.push(0),r.push(k),h.push(k),d.push(k+b.arrayBlockIndices[q])):(f.push(b.arrayBlockIndices[q]),r.push(b.arrayBlockIndices[q]+k),h.push(0),d.push(b.arrayBlockIndices[q]));for(var A=[],B=0;B<x[q].length;B++)f[q]<=x[q][B]&&x[q][B]<r[q]&&A.push(x[q][B]-f[q]);p.push(A)}d=["SS"];r=["'use strict'"];A=[];
for(B=0;B<k;++B)A.push(["s",B,"=SS[",B,"]"].join(""));for(q=0;q<b.arrayArgs.length;++q){d.push("a"+q);d.push("t"+q);d.push("p"+q);for(B=0;B<k;++B)A.push(["t",q,"p",B,"=t",q,"[",f[q]+B,"]"].join(""));for(B=0;B<Math.abs(b.arrayBlockIndices[q]);++B)A.push(["t",q,"b",B,"=t",q,"[",h[q]+B,"]"].join(""))}for(q=0;q<b.scalarArgs.length;++q)d.push("Y"+q);0<b.shapeArgs.length&&A.push("shape=SS.slice(0)");if(0<b.indexArgs.length){B=Array(k);for(q=0;q<k;++q)B[q]="0";A.push(["index=[",B.join(","),"]"].join(""))}for(q=
0;q<b.offsetArgs.length;++q){h=b.offsetArgs[q];f=[];for(B=0;B<h.offset.length;++B)0!==h.offset[B]&&(1===h.offset[B]?f.push(["t",h.array,"p",B].join("")):f.push([h.offset[B],"*t",h.array,"p",B].join("")));0===f.length?A.push("q"+q+"=0"):A.push(["q",q,"=",f.join("+")].join(""))}q=m([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));A=A.concat(q);r.push("var "+A.join(","));for(q=0;q<b.arrayArgs.length;++q)r.push("p"+q+"|=0");3<b.pre.body.length&&r.push(e(b.pre,b,w));q=e(b.body,
b,w);a:for(B=0,A=p[0].length;B<A;){for(h=1;h<p.length;++h)if(p[h][B]!==p[0][B])break a;++B}B<k?r.push(n(B,p[0],b,q)):r.push(v(p[0],b,q));3<b.post.body.length&&r.push(e(b.post,b,w));b.debug&&console.log("-----Generated cwise routine for ",g,":\n"+r.join("\n")+"\n----------");k=[b.funcName||"unnamed","_cwise_loop_",x[0].join("s"),"m",B,a(w)].join("");return(new Function(["function ",k,"(",d.join(","),"){",r.join("\n"),"} return ",k].join("")))()}},{uniq:160}],159:[function(b,g,k){var v=b("./compile.js");
g.exports=function(b){var e=["'use strict'","var CACHED={}"],a=[];e.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var g=[],k=[],z=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],t=[],x=[],w=0;w<b.arrayArgs.length;++w){var q=b.arrayArgs[w];a.push(["t",q,"=array",q,".dtype,r",q,"=array",q,".order"].join(""));g.push("t"+q);g.push("r"+q);k.push("t"+q);k.push("r"+
q+".join()");z.push("array"+q+".data");z.push("array"+q+".stride");z.push("array"+q+".offset|0");0<w&&(t.push("array"+b.arrayArgs[0]+".shape.length===array"+q+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[w]))),x.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+q+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[w])+"]"))}1<b.arrayArgs.length&&(e.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
e.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+x.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(w=0;w<b.scalarArgs.length;++w)z.push("scalar"+b.scalarArgs[w]);a.push(["type=[",k.join(","),"].join()"].join(""));a.push("proc=CACHED[type]");e.push("var "+a.join(","));e.push(["if(!proc){CACHED[type]=proc=compile([",g.join(","),"])}return proc(",z.join(","),
")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");return(new Function("compile",e.join("\n")))(v.bind(void 0,b))}},{"./compile.js":158}],160:[function(b,g,k){arguments[4][129][0].apply(k,arguments)},{dup:129}],161:[function(b,g,k){g.exports=function(b,e){var a=[];e=+e||0;v(b.hi(b.shape[0]-1),a,e);return a};var v=b("./lib/zc-core")},{"./lib/zc-core":156}],162:[function(b,g,k){function v(a,b){var g=a.length,k=["'use strict';"],m="surfaceNets"+a.join("_")+"d"+
b;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===b&&k.push("getters:[0],");for(var q=[],h=[],d=0;d<g;++d)q.push("d"+d),h.push("d"+d);for(d=0;d<1<<g;++d)q.push("v"+d),h.push("v"+d);for(d=0;d<1<<g;++d)q.push("p"+d),h.push("p"+d);q.push("a","b","c");h.push("a","c");k.push("vertex:function vertexFunc(",q.join(),"){");q=[];for(d=0;d<1<<g;++d)q.push("(p"+d+"<<"+d+")");k.push("var m=(",q.join("+"),")|0;if(m===0||m===",
(1<<(1<<g))-1,"){return}");var q=[],f=[];128>=1<<(1<<g)?(k.push("switch(m){"),f=k):k.push("switch(m>>>7){");for(d=0;d<1<<(1<<g);++d){128<1<<(1<<g)&&0===d%128&&(0<q.length&&f.push("}}"),f="vExtra"+q.length,k.push("case ",d>>>7,":",f,"(m&0x7f,",h.join(),");break;"),f=["function ",f,"(m,",h.join(),"){switch(m){"],q.push(f));f.push("case ",d&127,":");for(var r=Array(g),p=Array(g),v=Array(g),B=Array(g),c=0,y=0;y<g;++y)r[y]=[],p[y]=[],v[y]=0,B[y]=0;for(y=0;y<1<<g;++y)for(var C=0;C<g;++C){var u=y^1<<C;if(!(u>
y)&&!(d&1<<u)!==!(d&1<<y)){var D=1;d&1<<u?p[C].push("v"+u+"-v"+y):(p[C].push("v"+y+"-v"+u),D=-D);0>D?(r[C].push("-v"+y+"-v"+u),v[C]+=2):(r[C].push("v"+y+"+v"+u),v[C]-=2);c+=1;for(D=0;D<g;++D)D!==C&&(u&1<<D?B[D]+=1:--B[D])}}y=[];for(C=0;C<g;++C)0===r[C].length?y.push("d"+C+"-0.5"):(u="",0>v[C]?u=v[C]+"*c":0<v[C]&&(u="+"+v[C]+"*c"),y.push("d"+C+"-"+(.5+B[C]/c*.5)+"-"+r[C].length/c*.5+"*("+r[C].join("+")+u+")/("+p[C].join("+")+")"));f.push("a.push([",y.join(),"]);","break;")}k.push("}},");0<q.length&&
f.push("}}");h=[];for(d=0;d<1<<g-1;++d)h.push("v"+d);h.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",h.join(),"){");g=e(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",m,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",m,
";");for(d=0;d<q.length;++d)k.push(q[d].join(""));return(new Function("genContour",k.join("")))(n)}g.exports=function(b,e){if(0>=b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var g=a(b,e),k=g.length,n=Array(k),q=Array(k),h=0;h<k;++h)n[h]=[g[h]],q[h]=[h];return{positions:n,cells:q}}g=b.order.join()+"-"+b.dtype;k=m[g];e=+e||0;k||(k=m[g]=v(b.order,b.dtype));return k(b,e)};var n=b("ndarray-extract-contour"),e=b("triangulate-hypercube"),a=b("zero-crossings"),m={}},{"ndarray-extract-contour":141,
"triangulate-hypercube":155,"zero-crossings":161}],163:[function(b,g,k){function v(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var n=b("./lib/util/extend"),e=b("./lib/dynamic"),a=b("./lib/util/raf"),m=b("./lib/util/clock"),l=b("./lib/strings"),z=b("./lib/webgl"),t=b("./lib/extension"),x=b("./lib/limits"),w=b("./lib/buffer"),q=b("./lib/elements"),h=b("./lib/texture"),d=b("./lib/renderbuffer"),f=b("./lib/framebuffer"),r=b("./lib/attribute"),p=b("./lib/shader"),A=b("./lib/read"),B=
b("./lib/core"),c=b("./lib/stats"),y=b("./lib/timer");g.exports=function(b){function g(){if(0===aa.length)K&&K.update(),ia=null;else{ia=a.next(g);I();for(var b=aa.length-1;0<=b;--b){var c=aa[b];c&&c(S,null,0)}F.flush();K&&K.update()}}function k(){!ia&&0<aa.length&&(ia=a.next(g))}function E(){ia&&(a.cancel(g),ia=null)}function R(a){a.preventDefault();E();da.forEach(function(a){a()})}function H(a){F.getError();N.restore();ha.restore();Z.restore();ea.restore();na.restore();ma.restore();K&&K.restore();
ba.procs.refresh();k();fa.forEach(function(a){a()})}function G(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var f=a[b];e.isDynamic(f)?d[b]=e.unbox(f,b):c[b]=f});return{dynamic:d,"static":c}}function c(a){for(;p.length<a;)p.push(null);return p}var d=b(a.context||{}),f=b(a.uniforms||{}),g=b(a.attributes||{}),h=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;
"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=ba.compile(h,g,f,d,a),k=d.draw,l=d.batch,m=d.scope,p=[];return n(function(a,b){var d;if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,
a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:a})}function O(a){aa.push(a);k();return{cancel:function(){function b(){var a=v(aa,b);aa[a]=aa[aa.length-1];--aa.length;0>=aa.length&&E()}var c=v(aa,a);aa[c]=b}}}function J(){var a=ja.viewport,b=ja.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=
b[2]=F.drawingBufferWidth;S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=F.drawingBufferHeight}function I(){S.tick+=1;S.time=L();J();ba.procs.poll()}function P(){J();ba.procs.refresh();K&&K.update()}function L(){return(m()-Y)/1E3}b=z(b);if(!b)return null;var F=b.gl,M=F.getContextAttributes();F.isContextLost();var N=t(F,b);if(!N)return null;var V=l(),X=c(),U=N.extensions,K=y(F,U),Y=m(),T=F.drawingBufferWidth,W=F.drawingBufferHeight,S={tick:0,time:0,viewportWidth:T,viewportHeight:W,
framebufferWidth:T,framebufferHeight:W,drawingBufferWidth:T,drawingBufferHeight:W,pixelRatio:b.pixelRatio},Q=x(F,U),Z=w(F,X,b),ca=q(F,U,Z,X),T=r(F,U,Q,Z,V),ha=p(F,V,X,b),ea=h(F,U,Q,function(){ba.procs.poll()},S,X,b),na=d(F,U,Q,X,b),ma=f(F,U,Q,ea,na,X),ba=B(F,V,U,Q,Z,ca,ea,ma,{},T,ha,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,K,b),V=A(F,ma,ba.procs.poll,S,M,U),ja=ba.next,ka=F.canvas,aa=[],da=[],fa=[],ga=[b.onDestroy],ia=null;ka&&(ka.addEventListener("webglcontextlost",R,!1),ka.addEventListener("webglcontextrestored",
H,!1));P();M=n(G,{clear:function(a){var b=0;ba.procs.poll();var c=a.color;c&&(F.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(F.clearDepth(+a.depth),b|=256);"stencil"in a&&(F.clearStencil(a.stencil|0),b|=1024);F.clear(b)},prop:e.define.bind(null,1),context:e.define.bind(null,2),"this":e.define.bind(null,3),draw:G({}),buffer:function(a){return Z.create(a,34962,!1,!1)},elements:function(a){return ca.create(a,!1)},texture:ea.create2D,cube:ea.createCube,renderbuffer:na.create,
framebuffer:ma.create,framebufferCube:ma.createCube,attributes:M,frame:O,on:function(a,b){var c;switch(a){case "frame":return O(b);case "lost":c=da;break;case "restore":c=fa;break;case "destroy":c=ga}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Q,hasExtension:function(a){return 0<=Q.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){aa.length=0;E();ka&&(ka.removeEventListener("webglcontextlost",R),ka.removeEventListener("webglcontextrestored",
H));ha.clear();ma.clear();na.clear();ea.clear();ca.clear();Z.clear();K&&K.clear();ga.forEach(function(a){a()})},_gl:F,_refresh:P,poll:function(){I();K&&K.update()},now:L,stats:X});b.onDone(null,M);return M}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/clock":21,
"./lib/util/extend":23,"./lib/util/raf":29,"./lib/webgl":32}]},{},[1]);
