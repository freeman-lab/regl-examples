var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var g=0;return{next:function(){return g==a.length?{done:!0}:{done:!1,value:a[g++]}}}};
$jscomp.arrayFromIterator=function(a){for(var g,m=[];!(g=a.next()).done;)m.push(g.value);return m};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,g){function m(){}m.prototype=g.prototype;a.prototype=new m;a.prototype.constructor=a;for(var t in g)if($jscomp.global.Object.defineProperties){var n=$jscomp.global.Object.getOwnPropertyDescriptor(g,t);n&&$jscomp.global.Object.defineProperty(a,t,n)}else a[t]=g[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,g){a instanceof String&&(a=String(a));var m=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},n=(t.next=function(){if(m<a.length){var b=m++;return{value:g(b,a[b]),done:!1}}n.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return n},t);return n};
$jscomp.array.findInternal_=function(a,g,m){a instanceof String&&(a=String(a));for(var t=a.length,n=0;n<t;n++){var b=a[n];if(g.call(m,b,n,a))return{i:n,v:b}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,g,m){g=void 0===g?function(b){return b}:g;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var n;!(n=a.next()).done;)t.push(g.call(m,n.value))}else{n=a.length;for(var b=0;b<n;b++)t.push(g.call(m,a[b]))}return t};$jscomp.array.of=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];return $jscomp.array.from(g)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return[a,g]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,g){return g})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,g,m){var t=this.length;a=Number(a);g=Number(g);m=Number(null!=m?m:t);if(a<g)for(m=Math.min(m,t);g<m;)g in this?this[a++]=this[g++]:(delete this[a++],g++);else for(m=Math.min(m,t+g-a),a+=m-g;m>g;)--m in this?this[--a]=this[m]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,g,m){null!=m&&a.length||(m=this.length||0);m=Number(m);for(g=Number((void 0===g?0:g)||0);g<m;g++)this[g]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,g){return $jscomp.array.findInternal_(this,a,g).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,g){return $jscomp.array.findInternal_(this,a,g).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())g=g.value,this.set(g[0],g[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var g=Object.seal({x:4}),m=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=m.get(g)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var t=m.entries(),n=t.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=t.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!t.next().done?!1:!0}catch(b){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,g){var m=this.maybeGetEntry_(a),t=m.id,n=m.list,m=m.entry;n||(n=this.data_[t]=[]);m?m.value=g:(m={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:g},n.push(m),this.head_.previous.next=m,this.head_.previous=m,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var g=this.maybeGetEntry_(a);a=g.id;var m=g.list,t=g.index;return(g=g.entry)&&m?(m.splice(t,1),m.length||delete this.data_[a],g.previous.next=g.next,g.next.previous=g.previous,g.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var g=$jscomp.Map.getId_(a),m=this.data_[g];if(m)for(var t=0;t<m.length;t++){var n=m[t];if(a!==a&&n.key!==n.key||a===n.key)return{id:g,list:m,index:t,entry:n}}return{id:g,list:m,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,g){for(var m=$jscomp.makeIterator(this.entries()),t=m.next();!t.done;t=m.next())t=t.value,a.call(g,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var g=this,m=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(m){for(;m.head!=g.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:a(m)};m=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,g,m){Object.defineProperty(a,g,{value:String(m)})}:function(a,g,m){a[g]=String(m)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var g=0;0===(a&4294901760)&&(a<<=16,g+=16);0===(a&4278190080)&&(a<<=8,g+=8);0===(a&4026531840)&&(a<<=4,g+=4);0===(a&3221225472)&&(a<<=2,g+=2);0===(a&2147483648)&&g++;return g};$jscomp.math.imul=function(a,g){a=Number(a);g=Number(g);var m=a&65535,t=g&65535;return m*t+((a>>>16&65535)*t+m*(g>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,n=0,b=1;n!=t;)g*=a,b*=-1,t=(n=t)+b*g/++m;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,m=1,t=a,n=0;n!=t;)g*=a/++m,t=(n=t)+g;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var g=Math.exp(2*-Math.abs(a)),g=(1-g)/(1+g);return 0>a?-g:g};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,g,m){for(var t=[],n=2;n<arguments.length;++n)t[n-2]=arguments[n];a=Number(a);g=Number(g);for(var b=Math.max(Math.abs(a),Math.abs(g)),f=$jscomp.makeIterator(t),n=f.next();!n.done;n=f.next())b=Math.max(b,Math.abs(n.value));if(1E100<b||1E-100>b){a/=b;g/=b;f=a*a+g*g;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n)/b,f+=n*n;return Math.sqrt(f)*b}b=a*a+g*g;t=$jscomp.makeIterator(t);for(n=t.next();!n.done;n=t.next())n=n.value,n=Number(n),b+=
n*n;return Math.sqrt(b)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var g=Math.pow(Math.abs(a),1/3);return 0>a?-g:g};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,g){for(var m=[],t=1;t<arguments.length;++t)m[t-1]=arguments[t];m=$jscomp.makeIterator(m);for(t=m.next();!t.done;t=m.next())if(t=t.value)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a};$jscomp.object.is=function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.add(g.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var g=Object.seal({x:4}),a=new a($jscomp.makeIterator([g]));if(a.has(g)||1!=a.size||a.add(g)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),m=a.next();if(m.done||m.value[0]!=g||m.value[1]!=g)return!1;m=a.next();return m.done||m.value[0]==g||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,g){var m=this;this.map_.forEach(function(t){return a.call(g,t,t,m)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,g){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var g=[],m=0;m<arguments.length;++m)g[m-0]=arguments[m];for(var m="",g=$jscomp.makeIterator(g),t=g.next();!t.done;t=g.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?m+=String.fromCharCode(t):(t-=65536,m+=String.fromCharCode(t>>>10&1023|55296),m+=String.fromCharCode(t&1023|56320))}return m};
$jscomp.string.repeat=function(a){var g=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var m="";a;)if(a&1&&(m+=g),a>>>=1)g+=g;return m};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var g=this.toString(),m=g.length;a=Number(a)||0;if(0<=a&&a<m){a|=0;var t=g.charCodeAt(a);if(55296>t||56319<t||a+1===m)return t;a=g.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,g)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,g){g=void 0===g?0:g;$jscomp.string.noRegExp_(a,"startsWith");var m=this.toString();a+="";for(var t=m.length,n=a.length,b=Math.max(0,Math.min(g|0,m.length)),f=0;f<n&&b<t;)if(m[b++]!=a[f++])return!1;return f>=n};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,g){$jscomp.string.noRegExp_(a,"endsWith");var m=this.toString();a+="";void 0===g&&(g=m.length);for(var t=Math.max(0,Math.min(g|0,m.length)),n=a.length;0<n&&0<t;)if(m[--t]!=a[--n])return!1;return 0>=n};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function e$$0(g,m,t){function n(f,k){if(!m[f]){if(!g[f]){var y="function"==typeof require&&require;if(!k&&y)return y(f,!0);if(b)return b(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=m[f]={exports:{}};g[f][0].call(y.exports,function(b){var k=g[f][1][b];return n(k?k:b)},y,y.exports,e$$0,g,m,t)}return m[f].exports}for(var b="function"==typeof require&&require,f=0;f<t.length;f++)n(t[f]);return n})({1:[function(a,g,m){g=a("../regl")();m=a("vectorize-text");var t=a("gl-mat4/perspective"),
n=a("gl-mat4/lookAt");a=m("hello regl!",{textAlign:"center",textBaseline:"middle"});var b=g.texture({copy:!0,min:"linear",mag:"linear"}),f=g({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:b,t:function(b){return.001*b.count}},depth:{enable:!1},count:3}),p=g({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(b){return.01*b.count},view:function(b){b=.01*b.count;return n([],[5*Math.sin(b),0,-5*Math.cos(b)],[0,0,0],[0,-1,0])},projection:function(b){return t([],Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)}},depth:{enable:!1}});g.frame(function(){f();p();b({copy:!0,min:"linear",mag:"linear"})})},{"../regl":129,"gl-mat4/lookAt":80,"gl-mat4/perspective":81,"vectorize-text":125}],2:[function(a,g,m){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}g.exports=function(a,b,f,p,k){a=f.maxAttributes;b=Array(a);for(f=0;f<a;++f)b[f]=new t;return{Record:t,scope:{},state:b}}},{}],3:[function(a,g,m){function t(b,f){for(var e=0;e<f.length;++e)b[e]=f[e]}var n=a("./util/is-typed-array"),b=a("./util/is-ndarray"),f=a("./util/values"),p=a("./util/flatten"),k=a("./util/transpose"),y=a("./util/pool"),u=a("./constants/arraytypes.json"),w=a("./constants/dtypes.json"),v=a("./constants/usage.json");
g.exports=function(a){function h(c){this.id=l++;this.buffer=a.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121}function e(c,d,b){c.byteLength=d.byteLength;a.bufferData(c.type,d,b)}function d(c,d,f,q,h){c.usage=f;if(Array.isArray(d))c.dtype=q||5126,0<d.length&&Array.isArray(d[0])?(c.dimension=d[0].length,q=y.allocType(c.dtype,d.length*c.dimension),p(q,d,c.dimension)):(c.dimension=h,q=y.allocType(c.dtype,d.length),t(q,d)),e(c,q,f),y.freeType(q);else if(n(d))c.dtype=
q||u[Object.prototype.toString.call(d)]|0,c.dimension=h,e(c,d,f);else if(b(d)){var l=d.shape,a=d.stride;h=d.offset;var r=0,z=0,v=0,w=0;1===l.length?(r=l[0],z=1,v=a[0],w=0):2===l.length&&(r=l[0],z=l[1],v=a[0],w=a[1]);c.dtype=q||u[Object.prototype.toString.call(d.data)]|0||5126;c.dimension=z;q=y.allocType(c.dtype,r*z);k(q,d.data,r,z,v,w,h);e(c,q,f);y.freeType(q)}}function q(c){var d=c.buffer;a.isBuffer(d)&&a.deleteBuffer(d);c.buffer=null;delete z[c.id]}var l=0,z={};h.prototype.bind=function(){a.bindBuffer(this.type,
this.buffer)};var E=[];return{create:function(c,f,e){function l(c){var f=35044,e=null,q=0,h=0,p=1;Array.isArray(c)||n(c)||b(c)?e=c:"number"===typeof c?q=c|0:c&&("data"in c&&(e=c.data),"usage"in c&&(f=v[c.usage]),"type"in c&&(h=w[c.type]),"dimension"in c&&(p=c.dimension|0),"length"in c&&(q=c.length|0));A.bind();e?d(A,e,f,h,p):(a.bufferData(A.type,q,f),A.dtype=h||5121,A.usage=f,A.dimension=p,A.byteLength=q);return l}var A=new h(f);z[A.id]=A;e||l(c);l._reglType="buffer";l._buffer=A;l.subdata=function(c,
d){var f=(d||0)|0;A.bind();if(Array.isArray(c))if(0<c.length&&Array.isArray(c[0])){var e=c[0].length,q=y.allocType(A.dtype,c.length*e);p(q,c,e);a.bufferSubData(A.type,f,q);y.freeType(q)}else e=y.allocType(A.dtype,c.length),t(e,c),a.bufferSubData(A.type,f,e),y.freeType(e);else if(n(c))a.bufferSubData(A.type,f,c);else if(b(c)){var h=c.shape,x=c.stride,z=q=e=0,G=0;1===h.length?(e=h[0],q=1,z=x[0],G=0):2===h.length&&(e=h[0],q=h[1],z=x[0],G=x[1]);h=Array.isArray(c.data)?A.dtype:u[Object.prototype.toString.call(c.data)]|
0;h=y.allocType(h,e*q);k(h,c.data,e,q,z,G,c.offset);a.bufferSubData(A.type,f,h);y.freeType(h)}return l};l.destroy=function(){q(A)};return l},createStream:function(c,b){var e=E.pop();e||(e=new h(c),e.buffer=a.createBuffer());e.bind();d(e,b,35040,0,1);return e},destroyStream:function(c){E.push(c)},clear:function(){f(z).forEach(q)},getBuffer:function(c){return c&&c._buffer instanceof h?c._buffer:null},_initBuffer:d}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,
"./util/flatten":22,"./util/is-ndarray":23,"./util/is-typed-array":24,"./util/pool":28,"./util/transpose":31,"./util/values":32}],4:[function(a,g,m){g.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,g,m){g.exports={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],6:[function(a,g,m){g.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,g,m){g.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,g,m){function t(c){return Array.isArray(c)||w(c)||v(c)}function n(c){return c.sort(function(c,d){return"viewport"===c?-1:"viewport"===d?1:c<d?-1:1})}function b(c,d,b,e){this.thisDep=c;this.contextDep=
d;this.propDep=b;this.append=e}function f(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function p(c){return new b(!1,!1,!1,c)}function k(c,d){var e=c.type;return 0===e?(e=c.data.length,new b(!0,1<=e,2<=e,d)):new b(3===e,2===e,1===e,d)}var y=a("./util/codegen"),u=a("./util/loop"),w=a("./util/is-typed-array"),v=a("./util/is-ndarray"),r=a("./constants/primitives.json"),h=a("./constants/dtypes.json"),e=["x","y","z","w"],d={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,
"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},q={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},l={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,
"decrement wrap":34056,invert:5386},z={cw:2304,ccw:2305},E=new b(!1,!1,!1,function(){});g.exports=function(c,a,v,H,A,g,m,F,D,P,L,J,O){function G(c){return c.replace(".","_")}function I(c,d,b){var e=G(c);ka.push(c);fa[e]=ba[e]=!!b;ca[e]=d}function K(c,d,b){var e=G(c);ka.push(c);Array.isArray(b)?(ba[e]=b.slice(),fa[e]=b.slice()):ba[e]=fa[e]=b;da[e]=d}function M(){var c=y(),d=c.link,e=c.global;c.id=ua++;c.batchId="0";var b=d(sa),f=c.shared={props:"a0"};Object.keys(sa).forEach(function(c){f[c]=e.def(b,
".",c)});var q=c.next={},h=c.current={};Object.keys(da).forEach(function(c){Array.isArray(ba[c])&&(q[c]=e.def(f.next,".",c),h[c]=e.def(f.current,".",c))});var l=c.constants={};Object.keys(la).forEach(function(c){l[c]=e.def(JSON.stringify(la[c]))});c.invoke=function(e,b){switch(b.type){case 0:var q=["this",f.context,f.props,c.batchId];return e.def(d(b.data),".call(",q.slice(0,Math.max(b.data.length+1,4)),")");case 1:return e.def(f.props,b.data);case 2:return e.def(f.context,b.data);case 3:return e.def("this",
b.data)}};c.attribCache={};var p={};c.scopeAttrib=function(c){c=a.id(c);if(c in p)return p[c];var e=P.scope[c];e||(e=P.scope[c]=new ga);return p[c]=d(e)};return c}function V(c){var d=c["static"];c=c.dynamic;if("framebuffer"in d){var e=d.framebuffer;return e?(e=F.getFramebuffer(e),p(function(c,d){var b=c.link(e),f=c.shared;d.set(f.framebuffer,".next",b);f=f.context;d.set(f,".framebufferWidth",b+".width");d.set(f,".framebufferHeight",b+".height");return b})):p(function(c,d){var e=c.shared;d.set(e.framebuffer,
".next","null");e=e.context;d.set(e,".framebufferWidth",e+".drawingBufferWidth");d.set(e,".framebufferHeight",e+".drawingBufferHeight");return null})}if("framebuffer"in c){var b=c.framebuffer;return k(b,function(c,d){var e=c.invoke(d,b),f=c.shared,q=f.framebuffer,e=d.def(q,".getFramebuffer(",e,")");d.set(q,".next",e);f=f.context;d.set(f,".framebufferWidth",e+"?"+e+".width:"+f+".drawingBufferWidth");d.set(f,".framebufferHeight",e+"?"+e+".height:"+f+".drawingBufferHeight");return e})}return null}function X(c,
d){function e(c){if(c in f){var h=f[c];c=!0;var p=h.x|0,l=h.y|0,a,x;"w"in h?a=h.w|0:c=!1;"h"in h?x=h.h|0:c=!1;return new b(c&&d&&d.thisDep,c&&d&&d.contextDep,c&&d&&d.propDep,function(c,d){var e=c.shared.context,b=a;"w"in h||(b=d.def(e,".","framebufferWidth","-",p));var f=x;"h"in h||(f=d.def(e,".","framebufferHeight","-",l));return[p,l,b,f]})}if(c in q){var r=q[c];c=k(r,function(c,d){var e=c.invoke(d,r),b=c.shared.context,f=d.def(e,".x|0"),q=d.def(e,".y|0"),h=d.def('"w" in ',e,"?",e,".w|0:","(",b,
".","framebufferWidth","-",f,")"),e=d.def('"h" in ',e,"?",e,".h|0:","(",b,".","framebufferHeight","-",q,")");return[f,q,h,e]});d&&(c.thisDep=c.thisDep||d.thisDep,c.contextDep=c.contextDep||d.contextDep,c.propDep=c.propDep||d.prpoDep);return c}return d?new b(d.thisDep,d.contextDep,d.propDep,function(c,d){var e=c.shared.context;return[0,0,d.def(e,".","framebufferWidth"),d.def(e,".","framebufferHeight")]}):null}var f=c["static"],q=c.dynamic,h=e("viewport");if(h)var p=h,h=new b(h.thisDep,h.contextDep,
h.propDep,function(c,d){var e=p.append(c,d),b=c.shared.context;d.set(b,".viewportWidth",e[2]);d.set(b,".viewportHeight",e[3]);return e});return{viewport:h,scissor_box:e("scissor.box")}}function Y(c){function d(c){if(c in e){var b=a.id(e[c]);c=p(function(){return b});c.id=b;return c}if(c in q){var f=q[c];return k(f,function(c,d){var e=c.invoke(d,f);return d.def(c.shared.strings,".id(",e,")")})}return null}var e=c["static"],q=c.dynamic,h=d("frag"),l=d("vert"),r=null;f(h)&&f(l)?(r=L.program(l.id,h.id),
c=p(function(c,d){return c.link(r)})):c=new b(h&&h.thisDep||l&&l.thisDep,h&&h.contextDep||l&&l.contextDep,h&&h.propDep||l&&l.propDep,function(c,d){var e=c.shared.shader,b;b=h?h.append(c,d):d.def(e,".","frag");var f;f=l?l.append(c,d):d.def(e,".","vert");return d.def(e+".program("+f+","+b+")")});return{frag:h,vert:l,progVar:c,program:r}}function T(c){function d(c,b){if(c in e){var f=e[c]|0;return p(function(c,d){b&&(c.OFFSET=f);return f})}if(c in q){var l=q[c];return k(l,function(c,d){var e=c.invoke(d,
l);b&&(c.OFFSET=e);return e})}return b&&h?p(function(c,d){c.OFFSET="0";return 0}):null}var e=c["static"],q=c.dynamic,h=function(){if("elements"in e){var c=e.elements;t(c)?c=g.getElements(g.create(c)):c&&(c=g.getElements(c));var d=p(function(d,e){if(c){var b=d.link(c);return d.ELEMENTS=b}return d.ELEMENTS=null});d.value=c;return d}if("elements"in q){var b=q.elements;return k(b,function(c,d){var e=c.shared,f=e.isBufferArgs,e=e.elements,q=c.invoke(d,b),h=d.def("null"),f=d.def(f,"(",q,")"),q=c.cond(f).then(h,
"=",e,".createStream(",q,");")["else"](h,"=",e,".getElements(",q,");");d.entry(q);d.exit(c.cond(f).then(e,".destroyStream(",h,");"));return c.ELEMENTS=h})}return null}(),l=d("offset",!0);return{elements:h,primitive:function(){if("primitive"in e){var c=e.primitive;return p(function(d,e){return r[c]})}if("primitive"in q){var d=q.primitive;return k(d,function(c,e){var b=c.constants.primTypes,f=c.invoke(e,d);return e.def(b,"[",f,"]")})}return h?f(h)?h.value?p(function(c,d){return d.def(c.ELEMENTS,".primType")}):
p(function(){return 4}):new b(h.thisDep,h.contextDep,h.propDep,function(c,d){var e=c.ELEMENTS;return d.def(e,"?",e,".primType:",4)}):null}(),count:function(){if("count"in e){var c=e.count|0;return p(function(){return c})}if("count"in q){var d=q.count;return k(d,function(c,e){return c.invoke(e,d)})}return h?f(h)?h?l?new b(l.thisDep,l.contextDep,l.propDep,function(c,d){return d.def(c.ELEMENTS,".vertCount-",c.OFFSET)}):p(function(c,d){return d.def(c.ELEMENTS,".vertCount")}):p(function(){return-1}):new b(h.thisDep||
l.thisDep,h.contextDep||l.contextDep,h.propDep||l.propDep,function(c,d){var e=c.ELEMENTS;return c.OFFSET?d.def(e,"?",e,".vertCount-",c.OFFSET,":-1"):d.def(e,"?",e,".vertCount:-1")}):null}(),instances:d("instances",!1),offset:l}}function W(c){var e=c["static"],b=c.dynamic,f={};ka.forEach(function(c){function h(d,q){if(c in e){var l=d(e[c]);f[a]=p(function(){return l})}else if(c in b){var x=b[c];f[a]=k(x,function(c,d){return q(c,d,c.invoke(d,x))})}}var a=G(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(c){return c},
function(c,d,e){return e});case "depth.func":return h(function(c){return q[c]},function(c,d,e){return d.def(c.constants.compareFuncs,"[",e,"]")});case "depth.range":return h(function(c){return c},function(c,d,e){c=d.def("+",e,"[0]");d=d.def("+",e,"[1]");return[c,d]});case "blend.func":return h(function(c){return[d["srcRGB"in c?c.srcRGB:c.src],d["dstRGB"in c?c.dstRGB:c.dst],d["srcAlpha"in c?c.srcAlpha:c.src],d["dstAlpha"in c?c.dstAlpha:c.dst]]},function(c,d,e){function b(c,h){var q=d.def('"',c,h,'" in ',
e,"?",e,".",c,h,":",e,".",c);return d.def(f,"[",q,"]")}var f=c.constants.blendFuncs;c=b("src","RGB");var h=b("src","Alpha"),q=b("dst","RGB"),l=b("dst","Alpha");return[c,q,h,l]});case "blend.equation":return h(function(c){if("string"===typeof c)return[ea[c],ea[c]];if("object"===typeof c)return[ea[c.rgb],ea[c.alpha]]},function(c,d,e){var b=c.constants.blendEquations,f=d.def(),h=d.def();c=c.cond("typeof ",e,'==="string"');c.then(f,"=",h,"=",b,"[",e,"];");c["else"](f,"=",b,"[",e,".rgb];",h,"=",b,"[",
e,".alpha];");d(c);return[f,h]});case "blend.color":return h(function(c){return u(4,function(d){return+c[d]})},function(c,d,e){return u(4,function(c){return d.def("+",e,"[",c,"]")})});case "stencil.mask":return h(function(c){return c|0},function(c,d,e){return d.def(e,"|0")});case "stencil.func":return h(function(c){return[q[c.cmp||"keep"],c.ref||0,"mask"in c?c.mask:-1]},function(c,d,e){c=d.def('"cmp" in ',e,"?",c.constants.compareFuncs,"[",e,".cmp]",":",7680);var b=d.def(e,".ref|0");d=d.def('"mask" in ',
e,"?",e,".mask|0:-1");return[c,b,d]});case "stencil.opFront":case "stencil.opBack":return h(function(d){return["stencil.opBack"===c?1029:1028,l[d.fail||"keep"],l[d.zfail||"keep"],l[d.pass||"keep"]]},function(d,e,b){function f(c){return e.def('"',c,'" in ',b,"?",h,"[",b,".",c,"]:",7680)}var h=d.constants.stencilOps;return["stencil.opBack"===c?1029:1028,f("fail"),f("zfail"),f("pass")]});case "polygonOffset.offset":return h(function(c){return[c.factor|0,c.units|0]},function(c,d,e){c=d.def(e,".factor|0");
d=d.def(e,".units|0");return[c,d]});case "cull.face":return h(function(c){var d=0;"front"===c?d=1028:"back"===c&&(d=1029);return d},function(c,d,e){return d.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(c){return c},function(c,d,e){return e});case "frontFace":return h(function(c){return z[c]},function(c,d,e){return d.def(e+'==="cw"?2304:2305')});case "colorMask":return h(function(c){return c.map(function(c){return!!c})},function(c,d,e){return u(4,function(c){return"!!"+e+
"["+c+"]"})});case "sample.coverage":return h(function(c){return["value"in c?c.value:1,!!c.invert]},function(c,d,e){c=d.def('"value" in ',e,"?+",e,".value:1");d=d.def("!!",e,".invert");return[c,d]})}});return f}function R(c){var d=c["static"],e=c.dynamic,b={};Object.keys(d).forEach(function(c){var e=d[c],f;if("number"===typeof e||"boolean"===typeof e)f=p(function(){return e});else if("function"===typeof e&&"texture"===e._reglType)f=p(function(c){return c.link(e)});else if(Array.isArray(e)||w(e))f=
p(function(c){return c.global.def("[",u(e.length,function(c){return e[c]}),"]")});f.value=e;b[c]=f});Object.keys(e).forEach(function(c){var d=e[c];b[c]=k(d,function(c,e){return c.invoke(e,d)})});return b}function S(c){var d=c["static"],b=c.dynamic,f={};Object.keys(d).forEach(function(c){var b=d[c],q=a.id(c),l=new ga;if(t(b))l.state=1,l.buffer=A.getBuffer(A.create(b,34962,!1)),l.type=l.buffer.dtype;else{var k=A.getBuffer(b);if(k)l.state=1,l.buffer=k,l.type=k.dtype;else if(b.constant){var r=b.constant;
l.state=2;"number"===typeof r?l.x=r:e.forEach(function(c,d){d<r.length&&(l[c]=r[d])})}else{var k=A.getBuffer(b.buffer),n=b.offset|0,G=b.stride|0,z=b.size|0,v=!!b.normalized,I=0;"type"in b&&(I=h[b.type]);b=b.divisor|0;l.buffer=k;l.state=1;l.size=z;l.normalized=v;l.type=I||k.dtype;l.offset=n;l.stride=G;l.divisor=b}}f[c]=p(function(c,d){var e=c.attribCache;if(q in e)return e[q];var b={isStream:!1};Object.keys(l).forEach(function(c){b[c]=l[c]});l.buffer&&(b.buffer=c.link(l.buffer));return e[q]=b})});
Object.keys(b).forEach(function(c){var d=b[c];f[c]=k(d,function(c,b){function f(c){b(a[c],"=",h,".",c,"|0;")}var h=c.invoke(b,d),q=c.shared,l=q.isBufferArgs,p=q.buffer,a={isStream:b.def(!1)},k=new ga;k.state=1;Object.keys(k).forEach(function(c){a[c]=b.def(""+k[c])});var x=a.buffer,r=a.type;b("if(",l,"(",h,")){",a.isStream,"=true;",x,"=",p,".createStream(",34962,",",h,");",r,"=",x,".dtype;","}else{",x,"=",p,".getBuffer(",h,");","if(",x,"){",r,"=",x,".dtype;","}else if(",h,".constant){",a.state,"=",
2,";",e.map(function(c,d){return a[c]+"="+h+".length>="+d+"?"+h+"["+d+"]:0;"}).join(""),"}else{",x,"=",p,".getBuffer(",h,".buffer);",r,'="type" in ',h,"?",q.glTypes,"[",h,".type]:",x,".dtype;",a.normalized,"=!!",h,".normalized;");f("size");f("offset");f("stride");f("divisor");b("}}");return a})});return f}function U(c){var d=c["static"],e=c.dynamic,b={};Object.keys(d).forEach(function(c){var e=d[c];b[c]=p(function(c,d){return"number"===typeof e||"boolean"===typeof e?""+e:c.link(e)})});Object.keys(e).forEach(function(c){var d=
e[c];b[c]=k(d,function(c,e){return c.invoke(e,d)})});return b}function Q(c,d,e){var b=c.shared.context,f=c.scope();Object.keys(e).forEach(function(h){d.save(b,"."+h);f(b,".",h,"=",e[h].append(c,d),";")});d(f)}function Z(c,d,e){var b=c.shared,f=b.gl,h=b.framebuffer,q;ma&&(q=d.def(b.extensions,".webgl_draw_buffers"));var l=c.constants,b=l.drawBuffers,l=l.backBuffer;c=e?e.append(c,d):d.def(h,".next");d("if(",h,".dirty||",c,"!==",h,".cur){","if(",c,"){",f,".bindFramebuffer(",36160,",",c,".framebuffer);");
ma&&d(q,".drawBuffersWEBGL(",b,"[",c,".colorAttachments.length]);");d("}else{",f,".bindFramebuffer(",36160,",null);");ma&&d(q,".drawBuffersWEBGL(",l,");");d("}",h,".cur=",c,";",h,".dirty=false;","}")}function aa(c,d,e){var b=c.shared,f=b.gl,h=c.current,q=c.next,l=b.current,p=b.next,a=c.cond(l,".dirty");ka.forEach(function(d){d=G(d);if(!(d in e.state)){var b,k;if(d in q){b=q[d];k=h[d];var x=u(ba[d].length,function(c){return a.def(b,"[",c,"]")});a(c.cond(x.map(function(c,d){return c+"==="+k+"["+d+"]"}).join("&&")).then(f,
".",da[d],"(",x,");",x.map(function(c,d){return k+"["+d+"]="+c}).join(";"),";"))}else b=a.def(p,".",d),x=c.cond(b,"!==",l,".",d),a(x),d in ca?x(c.cond(b).then(f,".enable(",ca[d],");")["else"](f,".disable(",ca[d],");"),l,".",d,"=",b,";"):x(f,".",da[d],"(",b,");",l,".",d,"=",b,";")}});0===Object.keys(e.state).length&&a(l,".dirty=false;");d(a)}function ha(c,d,e,b){var h=c.shared,q=c.current,l=h.current,p=h.gl;n(Object.keys(e)).forEach(function(h){var a=e[h];if(!b||b(a)){var k=a.append(c,d);if(ca[h]){var x=
ca[h];f(a)?k?d(p,".enable(",x,");"):d(p,".disable(",x,");"):d(c.cond(k).then(p,".enable(",x,");")["else"](p,".disable(",x,");"));d(l,".",h,"=",k,";")}else if(Array.isArray(k)){var r=q[h];d(p,".",da[h],"(",k,");",k.map(function(c,d){return r+"["+d+"]="+c}).join(";"),";")}else d(p,".",da[h],"(",k,");",l,".",h,"=",k,";")}})}function ia(c,d){ja&&!c.instancing&&(c.instancing=d.def(c.shared.extensions,".angle_instanced_arrays"))}function na(c,d,b,f,h){function q(c){switch(c){case 35664:case 35667:case 35671:return 2;
case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function l(b,f,h){function q(){d("if(!",r,".pointer){",k,".enableVertexAttribArray(",x,");",r,".pointer=true;}");var e=h.type,b;b=h.size?d.def(h.size,"||",f):f;d("if(",r,".type!==",e,"||",r,".size!==",b,"||",z.map(function(c){return r+"."+c+"!=="+h[c]}).join("||"),"){",k,".bindBuffer(",34962,",",n,".buffer);",k,".vertexAttribPointer(",[x,b,e,h.normalized,h.stride,h.offset],");",r,".type=",e,";",r,
".size=",b,";",z.map(function(c){return r+"."+c+"="+h[c]+";"}).join(""),"}");ja&&(e=h.divisor,d("if(",r,".divisor!==",e,"){",c.instancing,".vertexAttribDivisorANGLE(",[x,e],");",r,".divisor=",e,";}"))}function a(){d("if(",r,".pointer){",k,".disableVertexAttribArray(",x,");",r,".pointer=false;","}if(",e.map(function(c,d){return r+"."+c+"!=="+G[d]}).join("||"),"){",k,".vertexAttrib4f(",x,",",G,");",e.map(function(c,d){return r+"."+c+"="+G[d]+";"}).join(""),"}")}var k=p.gl,x=d.def(b,".location"),r=d.def(p.attributes,
"[",x,"]");b=h.state;var n=h.buffer,G=[h.x,h.y,h.z,h.w],z=["buffer","normalized","offset","stride"];1===b?q():2===b?a():(d("if(",b,"===",1,"){"),q(),d("}else{"),a(),d("}"))}var p=c.shared;f.forEach(function(e){var f=e.name,p=b.attributes[f],a;if(p){if(!h(p))return;a=p.append(c,d)}else{if(!h(E))return;var k=c.scopeAttrib(f);a={};Object.keys(new ga).forEach(function(c){a[c]=d.def(k,".",c)})}l(c.link(e),q(e.info.type),a)})}function oa(c,d,e,b,f){for(var h=c.shared,q=h.gl,l,p=0;p<b.length;++p){var k=
b[p],r=k.name,n=k.info.type,G=e.uniforms[r],k=c.link(k)+".location";if(G){if(!f(G))continue;if(G["static"]){r=G.value;if(35678===n||35680===n)n=c.link(r._texture),d(q,".uniform1i(",k,n+".bind());"),d.exit(n,".unbind()");else if(35674===n||35675===n||35676===n)r=c.global.def("["+r+"]"),G=2,35675===n?G=3:35676===n&&(G=4),d(q,".uniformMatrix",G,"fv(",k,",false,",r,");");else{switch(n){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:l="1i";break;
case 5124:l="1i";break;case 35671:l="2i";break;case 35667:l="2i";break;case 35672:l="3i";break;case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}d(q,".uniform",l,"(",k,",",r,");")}continue}else r=G.append(c,d)}else{if(!f(E))continue;r=d.def(h.uniforms,"[",a.id(r),"]")}G=",";switch(n){case 35678:case 35680:n=d.def(r,"._texture");d(q,".uniform1i(",k,",",n,".bind());");d.exit(n,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2iv";break;case 35668:case 35672:l=
"3iv";break;case 35669:case 35673:l="4iv";break;case 5126:l="1f";break;case 35664:l="2fv";break;case 35665:l="3fv";break;case 35666:l="4fv";break;case 35674:l="Matrix2fv";G=",false,";break;case 35675:l="Matrix3fv";G=",false,";break;case 35676:l="Matrix4fv",G=",false,"}d(q,".uniform",l,"(",k,G,r,");")}}function pa(c,d,e,b){function h(b){var f=r[b];return f?f.batchStatic?f.append(c,d):f.append(c,e):d.def(k,".",b)}function q(){function c(){e(I,".drawElementsInstancedANGLE(",[n,z,u,G+"<<(("+u+"-5121)>>1)",
v],");")}function d(){e(I,".drawArraysInstancedANGLE(",[n,G,z,v],");")}x?t?c():(e("if(",x,"){"),c(),e("}else{"),d(),e("}")):d()}function l(){function c(){e(a+".drawElements("+[n,z,u,G+"<<(("+u+"-5121)>>1)"]+");")}function d(){e(a+".drawArrays("+[n,G,z]+");")}x?t?c():(e("if(",x,"){"),c(),e("}else{"),d(),e("}")):d()}var p=c.shared,a=p.gl,k=p.draw,r=b.draw,x=function(){var b=r.elements,f=d;b?(b.batchStatic||(f=e),b=b.append(c,f)):b=f.def(k,".","elements");b&&f("if("+b+")"+a+".bindBuffer(34963,"+b+".buffer.buffer);");
return b}(),n=h("primitive"),G=h("offset"),z=function(){var b=r.count,f=d;b?(b.batchStatic||(f=e),b=b.append(c,f)):b=f.def(k,".","count");return b}();if("number"===typeof z){if(0===z)return}else e("if(",z,"){"),e.exit("}");var v,I;ja&&(v=h("instances"),I=c.instancing);var u=x+".type",t=r.elements&&f(r.elements);ja&&("number"!==typeof v||0<=v)?"string"===typeof v?(e("if(",v,">0){"),q(),e("}else if(",v,"<0){"),l(),e("}")):q():l()}function qa(c,d,e,b,f){d=M();f=d.proc("body",f);ja&&(d.instancing=f.def(d.shared.extensions,
".angle_instanced_arrays"));c(d,f,e,b);return d.compile().body}function ta(c,d,e,b){ia(c,d);na(c,d,e,b.attributes,function(){return!0});oa(c,d,e,b.uniforms,function(){return!0});pa(c,d,d,e)}function va(c,d){var e=c.proc("draw",1);ia(c,e);Q(c,e,d.context);Z(c,e,d.framebuffer);aa(c,e,d);ha(c,e,d.state);var b=d.shader.progVar.append(c,e);e(c.shared.gl,".useProgram(",b,".program);");if(d.shader.program)ta(c,e,d,d.shader.program);else{var f=c.global.def("{}"),h=e.def(b,".id"),q=e.def(f,"[",h,"]");e(c.cond(q).then(q,
".call(this,a0);")["else"](q,"=",f,"[",h,"]=",c.link(function(e){return qa(ta,c,d,e,1)}),"(",b,");",q,".call(this,a0);"))}0<Object.keys(d.state).length&&e(c.shared.current,".dirty=true;")}function wa(c,d,e,b){function f(){return!0}c.batchId="a1";ia(c,d);na(c,d,e,b.attributes,f);oa(c,d,e,b.uniforms,f);pa(c,d,d,e)}function ra(c,d,e,b){function f(c){return c.contextDep&&q||c.propDep}function h(c){return!f(c)}ia(c,d);var q=e.contextDynamic,l=d.def(),p=d.def();c.shared.props=p;c.batchId=l;var a=c.scope(),
k=c.scope();d(a.entry,"for(",l,"=0;",l,"<","a1",";++",l,"){",p,"=","a0","[",l,"];",k,"}",a.exit);e.needsContext&&Q(c,k,e.context);e.needsFramebuffer&&Z(c,k,e.framebuffer);ha(c,k,e.state,f);b?(na(c,a,e,b.attributes,h),na(c,k,e,b.attributes,f),oa(c,a,e,b.uniforms,h),oa(c,k,e,b.uniforms,f),pa(c,a,k,e)):(d=c.global.def("{}"),b=e.shader.progVar.append(c,k),p=k.def(b,".id"),a=k.def(d,"[",p,"]"),k(c.shared.gl,".useProgram(",b,".program);","if(!",a,"){",a,"=",d,"[",p,"]=",c.link(function(d){return qa(wa,
c,e,d,2)}),"(",b,");}",a,".call(this,a0[",l,"],",l,");"))}function xa(c,d){var e=c.proc("batch",2);c.batchId="0";ia(c,e);var b=!1,f=!0;Object.keys(d.context).forEach(function(c){b=b||d.context[c].propDep});b||(Q(c,e,d.context),f=!1);var h=d.framebuffer,q=!1;h&&(h.propDep?b=q=!0:h.contextDep&&b&&(q=!0),q||Z(c,e,h));d.state.viewport&&d.state.viewport.propDynamic&&(b=!0);aa(c,e,d);ha(c,e,d.state,function(c){return!(c.contextDep&&b||c.propDep)});d.contextDep=b;d.needsContext=f;d.needsFramebuffer=q;f=
d.shader.progVar;if(f.contextDep&&b||f.propDep)ra(c,e,d,null);else if(f=f.append(c,e),e(c.shared.gl,".useProgram(",f,".program);"),d.shader.program)ra(c,e,d,d.shader.program);else{var h=c.global.def("{}"),q=e.def(f,".id"),l=e.def(h,"[",q,"]");e(c.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",h,"[",q,"]=",c.link(function(e){return qa(ra,c,d,e,2)}),"(",f,");",l,".call(this,a0,a1);"))}0<Object.keys(d.state).length&&e(c.shared.current,".dirty=true;")}function ya(c,d){function e(h){var q=d.shader[h];
q&&b.set(f.shader,"."+h,q.append(c,b))}var b=c.proc("scope",3);c.batchId="a2";var f=c.shared,h=f.current;Q(c,b,d.context);d.framebuffer&&d.framebuffer.append(c,b);n(Object.keys(d.state)).forEach(function(e){var h=d.state[e].append(c,b);Array.isArray(h)?h.forEach(function(d,f){b.set(c.next[e],"["+f+"]",d)}):b.set(f.next,"."+e,h)});["elements","offset","count","instances","primitive"].forEach(function(e){var h=d.draw[e];h&&b.set(f.draw,"."+e,""+h.append(c,b))});Object.keys(d.uniforms).forEach(function(e){b.set(f.uniforms,
"["+a.id(e)+"]",d.uniforms[e].append(c,b))});Object.keys(d.attributes).forEach(function(e){var f=d.attributes[e].append(c,b),h=c.scopeAttrib(e);Object.keys(new ga).forEach(function(c){b.set(h,"."+c,f[c])})});e("vert");e("frag");0<Object.keys(d.state).length&&(b(h,".dirty=true;"),b.exit(h,".dirty=true;"));b("a1(",c.shared.context,",a0,0);")}var ga=P.Record,ea={add:32774,subtract:32778,"reverse subtract":32779};v.ext_blend_minmax&&(ea.min=32775,ea.max=32776);var ja=v.angle_instanced_arrays,ma=v.webgl_draw_buffers,
ba={dirty:!0},fa={},ka=[],ca={},da={};I("dither",3024);I("blend.enable",3042);K("blend.color","blendColor",[0,0,0,0]);K("blend.equation","blendEquationSeparate",[32774,32774]);K("blend.func","blendFuncSeparate",[1,0,1,0]);I("depth.enable",2929,!0);K("depth.func","depthFunc",513);K("depth.range","depthRange",[0,1]);K("depth.mask","depthMask",!0);K("colorMask","colorMask",[!0,!0,!0,!0]);I("cull.enable",2884);K("cull.face","cullFace",1029);K("frontFace","frontFace",2305);K("lineWidth","lineWidth",1);
I("polygonOffset.enable",32823);K("polygonOffset.offset","polygonOffset",[0,0]);I("sample.alpha",32926);I("sample.enable",32928);K("sample.coverage","sampleCoverage",[1,!1]);I("stencil.enable",2960);K("stencil.mask","stencilMask",-1);K("stencil.func","stencilFunc",[519,0,-1]);K("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);K("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);I("scissor.enable",3089);K("scissor.box","scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);
K("viewport","viewport",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var sa={gl:c,context:O,strings:a,next:fa,current:ba,draw:J,elements:g,buffer:A,shader:L,attributes:P.state,uniforms:D,framebuffer:F,extensions:v,isBufferArgs:t},la={primTypes:r,compareFuncs:q,blendFuncs:d,blendEquations:ea,stencilOps:l,glTypes:h,orientationType:z};ma&&(la.backBuffer=[1029],la.drawBuffer=u(H.maxDrawbuffers,function(c){return u(c,function(c){return 36064+c})}));var ua=0;return{next:fa,current:ba,procs:function(){var c=
M(),d=c.proc("poll"),e=c.proc("refresh"),b=c.block();d(b);e(b);var f=c.shared,h=f.gl,q=f.next,l=f.current;b(l,".dirty=false;");Z(c,d);e(f.framebuffer,".dirty=true;");Z(c,e);Object.keys(ca).forEach(function(f){var p=ca[f],a=b.def(q,".",f),k=c.block();k("if(",a,"){",h,".enable(",p,")}else{",h,".disable(",p,")}",l,".",f,"=",a,";");e(k);d("if(",a,"!==",l,".",f,"){",k,"}")});Object.keys(da).forEach(function(f){var p=da[f],a=ba[f],k,r,x=c.block();x(h,".",p,"(");Array.isArray(a)?(p=a.length,k=c.global.def(q,
".",f),r=c.global.def(l,".",f),x(u(p,function(c){return k+"["+c+"]"}),");",u(p,function(c){return r+"["+c+"]="+k+"["+c+"];"}).join("")),d("if(",u(p,function(c){return k+"["+c+"]!=="+r+"["+c+"]"}).join("||"),"){",x,"}")):(k=b.def(q,".",f),r=b.def(l,".",f),x(k,");",l,".",f,"=",k,";"),d("if(",k,"!==",r,"){",x,"}"));e(x)});return c.compile()}(),compile:function(c,d,e,b){var f=M(),h;h=V(c);var q=X(c,h),l=T(c),p=W(c);c=Y(c);var a=q.viewport;a&&(p.viewport=a);a=G("scissor.box");(q=q[a])&&(p[a]=q);q=0<Object.keys(p).length;
h={framebuffer:h,draw:l,shader:c,state:p,dirty:q};h.uniforms=R(e);h.attributes=S(d);h.context=U(b);va(f,h);ya(f,h);xa(f,h);return f.compile()}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/codegen":20,"./util/is-ndarray":23,"./util/is-typed-array":24,"./util/loop":26}],9:[function(a,g,m){function t(b,a){this.id=f++;this.type=b;this.data=a}function n(b){if(0===b.length)return[];var f=b.charAt(0),a=b.charAt(b.length-1);if(1<b.length&&f===a&&('"'===f||"'"===f))return['"'+b.substr(1,
b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return n(b.substr(0,f.index)).concat(n(f[1])).concat(n(b.substr(f.index+f[0].length)));f=b.split(".");if(1===f.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(a=0;a<f.length;++a)b=b.concat(n(f[a]));return b}function b(b){return"["+n(b).join("][")+"]"}var f=0;g.exports={define:function(f,a){switch(typeof a){case "boolean":case "number":case "string":return new t(f,
b(a+""));case "undefined":return new t(f|128,null)}},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof t},unbox:function(f,a){if(f instanceof t){if(f.type&128)return new t(f.type&-129,b(a))}else if("function"===typeof f)return new t(0,f);return f},accessor:b}},{}],10:[function(a,g,m){var t=a("./util/is-typed-array"),n=a("./util/is-ndarray"),b=a("./constants/primitives.json"),f=a("./constants/usage.json");g.exports=function(a,k,y){function u(b){this.buffer=b;this.primType=
4;this.type=this.vertCount=0}function w(b,e,d,f,l,a,p){(a=p)||t(e)&&(!n(e)||t(e.data))||(a=k.oes_element_index_uint?5125:5123);b.buffer.bind();y._initBuffer(b.buffer,e,d,a,3);e=p;if(!p){switch(b.buffer.dtype){case 5121:case 5120:e=5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125}b.buffer.dtype=e}b.type=e;0>l&&(l=b.buffer.byteLength,5123===e?l>>=1:5125===e&&(l>>=2));b.vertCount=l;l=f;0>f&&(l=4,f=b.buffer.dimension,1===f&&(l=0),2===f&&(l=1),3===f&&(l=4));b.primType=l}var v={uint8:5121,
uint16:5123};k.oes_element_index_uint&&(v.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(h){function e(h){if(h)if("number"===typeof h)d(h),q.primType=4,q.vertCount=h|0,q.type=5121;else{var k=null,r=35044,c=-1,x=-1,u=0,y=0;Array.isArray(h)||t(h)||n(h)?k=h:("data"in h&&(k=h.data),"usage"in h&&(r=f[h.usage]),"primitive"in h&&(c=b[h.primitive]),"count"in h&&(x=h.count|0),"length"in h&&(u=h.length|0),"type"in h&&(y=v[h.type]));k?w(q,k,r,c,x,u,y):(h=q.buffer,
h.bind(),a.bufferData(34963,u,r),h.dtype=y||5121,h.usage=r,h.dimension=3,h.byteLength=u,q.primType=0>c?4:c,q.vertCount=0>x?0:x,q.type=h.dtype)}else d(),q.primType=4,q.vertCount=0,q.type=5121;return e}var d=y.create(null,34963,!0),q=new u(d._buffer);e(h);e._reglType="elements";e._elements=q;e.subdata=function(b,f){d.subdata(b,f);return e};e.destroy=function(){d.destroy();q.buffer=null};return e},createStream:function(b){var e=r.pop();e||(e=new u(y.create(null,34963,!0)._buffer));w(e,b,35040,-1,-1,
0,0);return e},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof u?b._elements:null}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/is-ndarray":23,"./util/is-typed-array":24}],11:[function(a,g,m){g.exports=function(a){function n(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(f){try{b[f]=
a.getExtension(f)}catch(p){}})}var b={};n();return{extensions:b,refresh:n}}},{}],12:[function(a,g,m){var t=a("./util/values"),n=a("./util/extend");g.exports=function(b,f,a,k,y){function u(c,d,e,b){this.target=c;this.level=d;this.texture=e;this.renderbuffer=b}function w(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function v(c,d){var e=d.width,b=d.height;if(c.texture)var f=c.texture._texture,h=Math.max(1,f.params.width>>c.level),q=Math.max(1,
f.params.height>>c.level),e=e||h,b=b||q;else f=c.renderbuffer._renderbuffer,e=e||f.width,b=b||f.height;f.refCount+=1;d.width=e;d.height=b}function r(c,d){d?d.texture?b.framebufferTexture2D(36160,c,d.target,d.texture._texture.texture,d.level):b.framebufferRenderbuffer(36160,c,36161,d.renderbuffer._renderbuffer.renderbuffer):b.framebufferTexture2D(36160,c,3553,null,0)}function h(c){var d=3553,e=0,b=null,f=null;"object"===typeof c&&("level"in c&&(e=c.level|0),"target"in c&&(d=c.target|0));var h=c._reglType;
"texture"===h?b=c:"renderbuffer"===h&&(f=c,d=36161,e=0);return new u(d,e,b,f)}function e(c){return c&&(c.texture||c.renderbuffer)}function d(){this.id=A++;g[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=!1}function q(c){b.isFramebuffer(c.framebuffer)||(c.framebuffer=b.createFramebuffer());z.dirty=!0;b.bindFramebuffer(36160,c.framebuffer);for(var d=
c.colorAttachments,e=0;e<d.length;++e)r(36064+e,d[e]);for(e=d.length;e<a.maxColorAttachments;++e)r(36064+e,null);r(36096,c.depthAttachment);r(36128,c.stencilAttachment);r(33306,c.depthStencilAttachment);f.webgl_draw_buffers&&f.webgl_draw_buffers.drawBuffersWEBGL(H[d.length]);b.checkFramebufferStatus(36160)}function l(c){c=c.framebuffer;b.isFramebuffer(c)&&b.deleteFramebuffer(c)}var z={current:null,next:null,dirty:!1},E={rgba:6408},c={rgba4:32854,rgb565:36194,"rgb5 a1":32855};f.ext_srgb&&(c.srgba=
35907);f.ext_color_buffer_half_float&&(c.rgba16f=34842,c.rgb16f=34843);f.webgl_color_buffer_float&&(c.rgba32f=34836);var x=[],C=[];f.webgl_depth_texture&&(x.push(6402),C.push(34041));n(n({},E),c);t(E);t(c);c=5121;x={uint8:5121};f.oes_texture_half_float&&(c=x["half float"]=36193);f.oes_texture_float&&(c=x["float"]=5126);x.best=c;var H=function(){for(var c=Array(a.maxDrawbuffers),d=0;d<=a.maxDrawbuffers;++d)for(var e=c[d]=Array(d),b=0;b<d;++b)e[b]=36064+b;return c}(),A=0,g={};return n(z,{getFramebuffer:function(c){return"function"===
typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof d)?c:null},create:function(c){function f(c){var d,l=c||{},p=c=0;if("shape"in l){var r=l.shape;c=r[0];p=r[1]}else"radius"in l&&(c=p=l.radius),"width"in l&&(c=l.width),"height"in l&&(p=l.height);var x=null,r=!1;if("colorBuffers"in l||"colorBuffer"in l){x=l.colorBuffers||l.colorBuffer;Array.isArray(x)||(x=[x]);a.width=c;a.height=p;x=x.map(h);for(d=0;d<x.length;++d)v(x[d],a);c=a.width;p=a.height}else{var n=!0,z="rgba",t="uint8",A=1,
r=!0;a.width=c=c||b.drawingBufferWidth;a.height=p=p||b.drawingBufferHeight;"format"in l&&(z=l.format,n=z in E);"type"in l&&(t=l.type);"colorCount"in l&&(A=l.colorCount|0);if(a.ownsColor)for(x=a.colorAttachments;x.length>A;)w(x.pop());else x=[];for(d=0;d<x.length;++d){var C;a:{C=x[d];var H=n,g=z,B=c,m=p;if(C.texture){var N=C.texture;if(H){N({format:g,type:t,width:B,height:m});N._texture.refCount+=1;C=!0;break a}}else if(N=C.renderbuffer,!H){N({format:g,width:B,height:m});N._renderbuffer.refCount+=
1;C=!0;break a}w(C);C=!1}C||(x[d--]=x[x.length-1],x.pop())}for(;x.length<A;)n?x.push(new u(3553,0,k.create({format:z,type:t,width:c,height:p},3553),null)):x.push(new u(36161,0,null,y.create({format:z,width:c,height:p})))}a.width=c;a.height=p;z=n=d=null;t=!1;"depthBuffer"in l&&(d=h(l.depthBuffer));"stencilBuffer"in l&&(n=h(l.stencilBuffer));"depthStencilBuffer"in l&&(z=h(l.depthStencilBuffer));if(d||n||z)v(d||n||z,a);else if(A=!0,H=C=!1,"depth"in l&&(A=!!l.depth),"stencil"in l&&(C=!!l.stencil),"depthTexture"in
l&&(H=!!l.depthTexture),l=a.depthAttachment||a.stencilAttachment||a.depthStencilAttachment,g=null,A||C)t=!0,H?(H=C?"depth stencil":"depth",a.ownsDepthStencil&&l.texture?(l.texture({format:H,width:c,height:p}),l.texture._texture.refCount+=1,g=l):g=new u(3553,0,k.create({format:H,width:c,height:p},3553),null)):(H=A?C?"depth stencil":"depth":"stencil",a.ownsDepthStencil&&l.renderbuffer?(l.renderbuffer({format:H,width:c,height:p}),l.renderbuffer._renderbuffer.refCount+=1,g=l):g=new u(36161,0,null,y.create({format:H,
width:c,height:p}))),A?C?z=g:d=g:n=g;c=a;c.colorAttachments.forEach(w);w(c.depthAttachment);w(c.stencilAttachment);w(c.depthStencilAttachment);a.colorAttachments=x;a.depthAttachment=d;a.stencilAttachment=n;a.depthStencilAttachment=z;a.ownsColor=r;a.ownsDepthStencil=t;f.color=x.map(e);f.depth=e(d);f.stencil=e(n);f.depthStencil=e(z);q(a);f.width=a.width;f.height=a.height;return f}var a=new d;f(c);f._reglType="framebuffer";f._framebuffer=a;f._destroy=function(){l(a)};return f},clear:function(){t(g).forEach(l)},
refresh:function(){t(g).forEach(q)}})}},{"./util/extend":21,"./util/values":32}],13:[function(a,g,m){g.exports=function(a,n){var b=1;n.ext_texture_filter_anisotropic&&(b=a.getParameter(34047));var f=1,p=1;n.webgl_draw_buffers&&(f=a.getParameter(34852),p=a.getParameter(36063));return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(n).filter(function(b){return!!n[b]}),
maxAnisotropic:b,maxDrawbuffers:f,maxColorAttachments:p,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),
maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}}},{}],14:[function(a,g,m){var t=a("./util/is-typed-array");g.exports=function(a,b,f){return function(p){var k=p||{};t(p)?k={data:k}:2===arguments.length?k={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof p&&(k={});b();var y=k.x||0,u=k.y||0,w=k.width||f.viewportWidth,v=k.height||f.viewportHeight,k=k.data||new Uint8Array(w*v*4);a.pixelStorei(3333,
4);a.readPixels(y,u,w,v,6408,5121,k);return k}}},{"./util/is-typed-array":24}],15:[function(a,g,m){var t=a("./util/values");g.exports=function(a,b,f){function p(){this.id=w++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function k(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function y(b){var f=b.renderbuffer;a.bindRenderbuffer(36161,
null);a.isRenderbuffer(f)&&a.deleteRenderbuffer(f);b.renderbuffer=null;b.refCount=0;delete v[b.id]}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(u.srgba=35907);b.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843);b.webgl_color_buffer_float&&(u.rgba32f=34836);var w=0,v={};p.prototype.decRef=function(){0===--this.refCount&&y(this)};return{create:function(b){function f(d){d=d||{};var b=0,l=0;"shape"in d?(l=d.shape,b=l[0]|0,l=
l[1]|0):("radius"in d&&(b=l=d.radius|0),"width"in d&&(b=d.width|0),"height"in d&&(l=d.height|0));f.width=e.width=Math.max(b,1);f.height=e.height=Math.max(l,1);e.format=32854;"format"in d&&(e.format=u[d.format]);k(e);return f}var e=new p;v[e.id]=e;f(b);f._reglType="renderbuffer";f._renderbuffer=e;f.destroy=function(){e.decRef()};return f},refresh:function(){t(v).forEach(k)},clear:function(){t(v).forEach(y)}}}},{"./util/values":32}],16:[function(a,g,m){var t=a("./util/values");g.exports=function(a,
b){function f(d,e,b,f){this.name=d;this.id=e;this.location=b;this.info=f}function p(d,e){for(var b=0;b<d.length;++b)if(d[b].id===e.id){d[b].location=e.location;return}d.push(e)}function k(d,e,f){f=35632===d?w:v;var h=f[e];if(!h){var p=b.str(e),h=a.createShader(d);a.shaderSource(h,p);a.compileShader(h);f[e]=h}return h}function y(d,b){this.id=e++;this.fragId=d;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[]}function u(d,e){var h,r;h=k(35632,d.fragId);r=k(35633,d.vertId);var v=d.program=
a.createProgram();a.attachShader(v,h);a.attachShader(v,r);a.linkProgram(v);var c=a.getProgramParameter(v,35718),x=d.uniforms;for(h=0;h<c;++h)if(r=a.getActiveUniform(v,h))if(1<r.size)for(var u=0;u<r.size;++u){var w=r.name.replace("[0]","["+u+"]");p(x,new f(w,b.id(w),a.getUniformLocation(v,w),r))}else p(x,new f(r.name,b.id(r.name),a.getUniformLocation(v,r.name),r));c=a.getProgramParameter(v,35721);x=d.attributes;for(h=0;h<c;++h)(r=a.getActiveAttrib(v,h))&&p(x,new f(r.name,b.id(r.name),a.getAttribLocation(v,
r.name),r))}var w={},v={},r={},h=[],e=0;return{clear:function(){var d=a.deleteShader.bind(a);t(w).forEach(d);w={};t(v).forEach(d);v={};h.forEach(function(d){a.deleteProgram(d.program)});h.length=0;r={}},refresh:function(){w={};v={};h.forEach(u)},program:function(d,e,b){var f=r[e];f||(f=r[e]={});var a=f[d];a||(a=new y(e,d),u(a,b),f[d]=a,h.push(a));return a},shader:k,frag:null,vert:null}}},{"./util/values":32}],17:[function(a,g,m){g.exports=function(){var a={"":0},n=[""];return{id:function(b){var f=
a[b];if(f)return f;f=a[b]=n.length;n.push(b);return f},str:function(b){return n[b]}}}},{}],18:[function(a,g,m){function t(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function n(d){if(!Array.isArray(d))return!1;var e=d.length;if(0===e||!Array.isArray(d[0]))return!1;for(var b=d[0].length,f=1;f<e;++f)if(!Array.isArray(d[f])||d[f].length!==b)return!1;return!0}function b(d){return Object.prototype.toString.call(d)}function f(d){return"[object HTMLCanvasElement]"===b(d)}function p(d){return"[object CanvasRenderingContext2D]"===
b(d)}var k=a("./util/extend"),y=a("./util/values"),u=a("./util/is-typed-array"),w=a("./util/is-ndarray"),v=a("./util/load-texture"),r=a("./util/to-half-float"),h=a("./util/parse-dds"),e=[9984,9986,9985,9987];g.exports=function(d,a,l,z,g){function c(c){this.target=c;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=
this.miplevel=0;this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function x(c){this.target=c;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function C(c,d){var b,f,h=0,a=0,l=0,q=0,p=0,k=0,x=!1,r=!1,n=!1;for(b=0;b<d.length;++b)f=d[b],q=q||f.width<<f.miplevel,p=p||f.height<<f.miplevel,
h=h||f.type,a=a||f.format,l=l||f.internalformat,k=k||f.channels,x=x||f.needsPoll,r=r||f.needsListeners,f=f.miplevel,n=n||0<f;c.needsPoll=x;c.needsListeners=r;c.width=q;c.height=p;c.format=a;c.internalformat=l;c.type=h;if(3553!==c.target)for(b=0;6>b;++b);b=0<=e.indexOf(c.minFilter);c.genMipmaps=!n&&(c.genMipmaps||b);n=n||c.genMipmaps;c.minFilter||(c.minFilter=n?9987:9728);c.wrapS=c.wrapS||33071;c.wrapT=c.wrapT||33071;for(b=0;b<d.length;++b)f=d[b],f.channels||(f.channels=k),f.format||(f.format=a),f.internalformat||
(f.internalformat=l),f.type||(f.type=h)}function H(c){this.id=W++;this.refCount=1;this.target=c;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new x(c);this.pixels=[]}function A(d,e){function b(d,f){var h=f.mipmap,l;if(Array.isArray(h))for(var q=0;q<h.length;++q)l=new c(d),l.parseFlags(e),l.parseFlags(f),l.parse(h[q],q),a.push(l);else l=new c(d),l.parseFlags(e),l.parse(f,0),a.push(l)}var f;F(d);var h=d.params;x.call(h,d.target);var a=d.pixels;a.length=
0;h.parse(e);if(3553===d.target)b(3553,e);else{var l=e.faces||e;if(Array.isArray(l))for(f=0;6>f;++f)b(34069+f,l[f]);else if("string"!==typeof l)for(f=0;6>f;++f)b(34069+f,{})}C(h,a);h.needsListeners&&m(d);h.needsPoll&&(d.pollId=S.length,S.push(d));B(d)}function B(c){d.isTexture(c.texture)||(c.texture=d.createTexture());var e=c.target,b=c.unit;0<=b?(d.activeTexture(33984+b),T=b):d.bindTexture(e,c.texture);for(var e=c.pixels,f=c.params,h=0;h<e.length;++h)e[h].upload(f);f.upload();0>b&&((b=Q[T])?d.bindTexture(b.target,
b.texture):(c.unit=T,Q[T]=c))}function m(d){function e(d,b,f){var l=h(f);l.pixels.forEach(function(e){var f=new c(l.cube?e.target:d);f.channels=l.channels;f.compressed=l.compressed;f.type=l.type;f.internalformat=l.format;f.format=Y[l.format];f.width=e.width;f.height=e.height;f.miplevel=e.miplevel||b;f.data=e.data;a.push(f)})}function b(){for(var c=0;c<a.length;++c){var h=a[c],l=h.image,q=h.video,p=h.xhr;l&&l.complete?(h.width=l.naturalWidth,h.height=l.naturalHeight):q&&2<q.readyState?(h.width=q.width,
h.height=q.height):p&&4===p.readyState&&(a[c]=a[a.length-1],a.pop(),p.removeEventListener("readystatechange",B),e(h.target,h.miplevel,p.response))}C(f,a);B(d)}var f=d.params,a=d.pixels;a.forEach(function(c){c.image&&!c.image.complete?c.image.addEventListener("load",b):c.video&&1>c.readyState?c.video.addEventListener("progress",b):c.xhr&&c.xhr.addEventListener("readystatechange",b)});d.cancelPending=function(){a.forEach(function(c){c.image?c.image.removeEventListener("load",b):c.video?c.video.removeEventListener("progress",
b):c.xhr&&(c.xhr.removeEventListener("readystatechange",b),c.xhr.abort())})}}function F(c){var d=c.cancelPending;d&&(d(),c.cancelPending=null);d=c.pollId;0<=d&&((S[d]=S[S.length-1]).id=d,S.pop(),c.pollId=-1)}function D(c){var e=c.texture,b=c.unit,f=c.target;0<=b&&(d.activeTexture(33984+b),T=b,d.bindTexture(f,null),Q[b]=null);F(c);d.isTexture(e)&&d.deleteTexture(e);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete R[c.id]}var P={"don't care":4352,"dont care":4352,nice:4354,fast:4353},
L={repeat:10497,clamp:33071,mirror:33648},J={nearest:9728,linear:9729},O=k({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},J),G={none:0,browser:37444},I={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},K={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},M={};a.ext_srgb&&(K.srgb=35904,K.srgba=35906);a.oes_texture_float&&(I["float"]=5126);a.oes_texture_half_float&&
(I["half float"]=36193);a.webgl_depth_texture&&(k(K,{depth:6402,"depth stencil":34041}),k(I,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&k(M,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&k(M,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&k(M,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,
"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(M["rgb etc1"]=36196);var V=Array.prototype.slice.call(d.getParameter(34467));Object.keys(M).forEach(function(c){var d=M[c];0<=V.indexOf(d)&&(K[c]=d)});var X=Object.keys(K);l.textureFormats=X;var Y=X.reduce(function(c,d){var e=K[d];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e?c[e]=e:32855===e||0<=d.indexOf("rgba")?c[e]=6408:c[e]=6407;return c},{});k(c.prototype,{parseFlags:function(c){if("object"===typeof c&&c){"premultiplyAlpha"in
c&&(this.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(this.flipY=c.flipY);"alignment"in c&&(this.unpackAlignment=c.alignment);"colorSpace"in c&&(this.colorSpace=G[c.colorSpace]);if("format"in c){var d=c.format;this.internalformat=K[d];d in I&&(this.type=I[d]);d in M&&(this.compressed=!0)}"type"in c&&(this.type=I[c.type]);var d=this.width,e=this.height,b=this.channels;"shape"in c?(d=c.shape[0],e=c.shape[1],3===c.shape.length&&(b=c.shape[2])):("radius"in c&&(d=e=c.radius),"width"in c&&(d=c.width),
"height"in c&&(e=c.height),"channels"in c&&(b=c.channels));this.width=d|0;this.height=e|0;this.channels=b|0;"stride"in c?(d=c.stride,this.strideX=d[0],this.strideY=d[1],this.strideC=3===d.length?d[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*b,this.strideY=this.strideX*d);"offset"in c&&(this.offset=c.offset|0,this.needsTranspose=!0);"crossOrigin"in c&&(this.crossOrigin=c.crossOrigin)}},parse:function(c,d){this.miplevel=d;this.width>>=d;this.height>>=d;var e=c;switch(typeof c){case "object":if(!c)return;
this.parseFlags(c);var h=c.data;if("string"===typeof h||h&&(u(h)||t(h)||w(h)||f(h)||p(h)||"[object HTMLImageElement]"===b(h)||"[object HTMLVideoElement]"===b(h)||n(h)))e=c.data;break;case "undefined":return}"string"===typeof e&&(e=v(e,this.crossOrigin));var h=null,a=!1;if(null!==e)if(u(e))this.data=e;else if(t(e))h=e,a=!0;else if(w(e)){Array.isArray(e.data)?(h=e.data,a=!0):this.data=e.data;var l=e.shape;this.width=l[0];this.height=l[1];this.channels=3===l.length?l[2]:1;l=e.stride;this.strideX=e.stride[0];
this.strideY=e.stride[1];this.strideC=3===l.length?e.stride[2]:1;this.offset=e.offset;this.needsTranspose=!0}else if(f(e)||p(e))f(e)?this.canvas=e:this.canvas=e.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===b(e))this.image=e,e.complete?(this.width=e.naturalWidth,this.height=e.naturalHeight):(this.width=this.width||e.naturalWidth,this.height=this.height||e.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();
else if("[object HTMLVideoElement]"===b(e))this.video=e,1<e.readyState?(this.width=e.width,this.height=e.height):(this.width=this.width||e.width,this.height=this.height||e.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===b(e))this.xhr=e,this.needsListeners=!0;else if(n(e)){var a=e[0].length,l=e.length,q=1,k,x,G,z;if(Array.isArray(e[0][0]))for(q=e[0][0].length,h=Array(a*l*q),x=z=0;x<l;++x)for(k=0;k<a;++k)for(G=0;G<q;++G)h[z++]=e[x][k][G];
else for(h=Array(a*l),x=z=0;x<l;++x)for(k=0;k<a;++k)h[z++]=e[x][k];this.width=a;this.height=l;this.channels=q;a=!0}else c.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||g.viewportWidth)|0,this.height=(this.height||g.viewportHeight)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=
[6409,6410,6407,6408][(this.channels=this.channels||4)-1]);e=this.internalformat;l=this.format=Y[e];if(!this.channels)switch(l){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}l=this.type;5126!==l&&36193!==l&&(l||(l=6402===e?5125:5121));this.type=l;if(a)switch(l){case 5121:this.data=new Uint8Array(h);break;case 5123:this.data=new Uint16Array(h);break;case 5125:this.data=new Uint32Array(h);break;
case 5126:this.data=new Float32Array(h);break;case 36193:this.data=r(h)}if(this.data&&this.needsTranspose){h=this.data;e=this.width;a=this.height;l=this.channels;q=this.strideX;k=this.strideY;x=this.strideC;G=this.offset;z=new h.constructor(e*a*l);for(var I=0,y=0;y<a;++y)for(var A=0;A<e;++A)for(var C=0;C<l;++C)z[I++]=h[k*y+q*A+x*C+G];this.data=z}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(c){d.pixelStorei(37440,
this.flipY);d.pixelStorei(37441,this.premultiplyAlpha);d.pixelStorei(37443,this.colorSpace);d.pixelStorei(3317,this.unpackAlignment);var e=this.target,b=this.miplevel,f=this.image,h=this.canvas,a=this.video,l=this.data,q=this.internalformat,p=this.format,k=this.type,x=this.width||Math.max(1,c.width>>b);c=this.height||Math.max(1,c.height>>b);a&&2<a.readyState?d.texImage2D(e,b,p,p,k,a):f&&f.complete?d.texImage2D(e,b,p,p,k,f):h?d.texImage2D(e,b,p,p,k,h):this.compressed?d.compressedTexImage2D(e,b,q,x,
c,0,l):this.copy?(z(),d.copyTexImage2D(e,b,p,this.x,this.y,x,c,0)):l?d.texImage2D(e,b,p,x,c,0,p,k,l):d.texImage2D(e,b,p,x||1,c||1,0,p,k,null)}});k(x.prototype,{parse:function(c){if("object"===typeof c&&c){"min"in c&&(this.minFilter=O[c.min]);"mag"in c&&(this.magFilter=J[c.mag]);var d=this.wrapS,e=this.wrapT;if("wrap"in c){var b=c.wrap;"string"===typeof b?d=e=L[b]:Array.isArray(b)&&(d=L[b[0]],e=L[b[1]])}else"wrapS"in c&&(d=L[c.wrapS]),"wrapT"in c&&(e=L[c.wrapT]);this.wrapS=d;this.wrapT=e;"anisotropic"in
c&&(this.anisotropic=c.anisotropic);if("mipmap"in c)switch(c=c.mipmap,typeof c){case "string":this.mipmapHint=P[c];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!c}}},upload:function(){var c=this.target;d.texParameteri(c,10241,this.minFilter);d.texParameteri(c,10240,this.magFilter);d.texParameteri(c,10242,this.wrapS);d.texParameteri(c,10243,this.wrapT);a.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,this.anisotropic);this.genMipmaps&&(d.hint(33170,this.mipmapHint),d.generateMipmap(c))}});
var T=0,W=0,R={},S=[],U=l.maxTextureUnits,Q=Array(U).map(function(){return null});k(H.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var e=0;e<U;++e){var b=Q[e];if(b){if(0<b.bindCount)continue;b.unit=-1}Q[e]=this;c=e;break}this.unit=c;d.activeTexture(33984+c);d.bindTexture(this.target,this.texture);T=c}return c},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&D(this)}});return{create:function(c,d){function e(c,f,h,a,l,q){var p=c||{};34067===d&&
6===arguments.length&&(p=[c,f,h,a,l,q]);A(b,p);e.width=b.params.width;e.height=b.params.height;return e}var b=new H(d);R[b.id]=b;e(c);e._reglType="texture";e._texture=b;e.destroy=function(){b.decRef()};return e},refresh:function(){y(R).forEach(B);for(var c=0;c<U;++c)Q[c]=null;T=0;d.activeTexture(33984)},clear:function(){for(var c=0;c<U;++c)d.activeTexture(33984+c),d.bindTexture(3553,null),Q[c]=null;d.activeTexture(33984);T=0;y(R).forEach(D)},poll:function(){S.forEach(B)},getTexture:function(c){return null}}}},
{"./util/extend":21,"./util/is-ndarray":23,"./util/is-typed-array":24,"./util/load-texture":25,"./util/parse-dds":27,"./util/to-half-float":30,"./util/values":32}],19:[function(a,g,m){g.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],20:[function(a,g,m){function t(b){return Array.prototype.slice.call(b)}function n(b){return t(b).join("")}var b=a("./extend");g.exports=function(){function f(){var f=[],h=[];return b(function(){f.push.apply(f,
t(arguments))},{def:function(){var e="v"+k++;h.push(e);0<arguments.length&&(f.push(e,"="),f.push.apply(f,t(arguments)),f.push(";"));return e},toString:function(){return n([0<h.length?"var "+h+";":"",n(f)])}})}function a(){function p(d,b){e(d,b,"=",h.def(d,b),";")}var h=f(),e=f(),d=h.toString,q=e.toString;return b(h,{entry:h,exit:e,save:p,set:function(d,e,b){p(d,e);h(d,e,"=",b,";")},toString:function(){return d()+q()}})}var k=0,y=[],u=[],w=f(),v={};return{global:w,link:function(b){for(var f=0;f<u.length;++f)if(u[f]===
b)return y[f];f="g"+k++;y.push(f);u.push(b);return f},block:f,proc:function(f,h){function e(){var e="a"+d.length;d.push(e);return e}var d=[];h=h||0;for(var q=0;q<h;++q)e();var q=a(),l=q.toString;return v[f]=b(q,{arg:e,toString:function(){return n(["function(",d.join(),"){",l(),"}"])}})},scope:a,cond:function(){var f=n(arguments),h=a(),e=a(),d=h.toString,q=e.toString;return b(h,{then:function(){h.apply(h,t(arguments));return this},"else":function(){e.apply(e,t(arguments));return this},toString:function(){var e=
q();e&&(e="else{"+e+"}");return n(["if(",f,"){",d(),"}",e])}})},compile:function(){var b=['"use strict";',w,"return {"];Object.keys(v).forEach(function(e){b.push('"',e,'":',v[e].toString(),",")});b.push("}");var f=n(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,y.concat(f)).apply(null,u)}}}},{"./extend":21}],21:[function(a,g,m){g.exports=function(a,n){for(var b=Object.keys(n),f=0;f<b.length;++f)a[b[f]]=n[b[f]];return a}},{}],22:[function(a,g,m){g.exports=
function(a,n,b){for(var f=0,p=0;p<n.length;++p)for(var k=n[p],y=0;y<b;++y)a[f++]=k[y]}},{}],23:[function(a,g,m){var t=a("./is-typed-array");g.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":24}],24:[function(a,g,m){var t=a("../constants/arraytypes.json");g.exports=function(a){return Object.prototype.toString.call(a)in t}},{"../constants/arraytypes.json":4}],
25:[function(a,g,m){g.exports=function(a,n){if("undefined"!==typeof document){var b;b=(b=/\.(\w+)(\?.*)?$/.exec(a))&&b[1]?b[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(b))return b=document.createElement("video"),b.autoplay=!0,b.loop=!0,n&&(b.crossOrigin=n),b.src=a,b;if(0<=["dds"].indexOf(b))return b=new XMLHttpRequest,b.responseType="arraybuffer",b.open("GET",a,!0),b.send(),b;b=new Image;n&&(b.crossOrigin=n);b.src=a;return b}return null}},
{}],26:[function(a,g,m){g.exports=function(a,n){for(var b=Array(a),f=0;f<a;++f)b[f]=n(f);return b}},{}],27:[function(a,g,m){g.exports=function(a){function g(c){for(var d=P,e=L,b=0;b<K;++b){var f=Math.max(1,d+3>>2)*Math.max(1,e+3>>2)*G;V.pixels.push({target:c,miplevel:b,width:d,height:e,data:new Uint8Array(a,M,f)});M+=f;d>>=1;e>>=1}}var m=new Int32Array(a),D=m[z],P=m[c],L=m[E],J=u,O=0,G=0,I=4;switch(m[H]){case h:G=8;D&r?(I=3,O=b):O=f;break;case e:G=16;O=p;break;case d:G=16;O=k;break;case q:G=8,O=y}var K=
1;m[C]&w&&(K=Math.max(1,m[x]));var M=m[l]+4,V={width:P,height:L,channels:I,format:O,type:J,compressed:!0,cube:!1,pixels:[]};if(m[A]&v)for(V.cube=!0,m=0;6>m;++m)g(n+m);else g(t);return V};var t=3553,n=34069,b=33776,f=33777,p=33778,k=33779,y=36196,u=5121,w=131072,v=512,r=64,h=827611204,e=861165636,d=894720068,q=826496069,l=1,z=2,E=3,c=4,x=7,C=20,H=21,A=28},{}],28:[function(a,g,m){function t(b){var f,a;f=(65535<b)<<4;b>>>=f;a=(255<b)<<3;b>>>=a;f|=a;a=(15<b)<<2;b>>>=a;f|=a;a=(3<b)<<1;return f|a|b>>>a>>
1}function n(b){a:{for(var a=16;268435456>=a;a*=16)if(b<=a){b=a;break a}b=0}a=f[t(b)>>2];return 0<a.length?a.pop():new ArrayBuffer(b)}function b(b){f[t(b.byteLength)>>2].push(b)}var f=a("./loop")(8,function(){return[]});g.exports={alloc:n,free:b,allocType:function(b,f){switch(b){case 5120:return new Int8Array(n(f),0,f);case 5121:return new Uint8Array(n(f),0,f);case 5122:return new Int16Array(n(2*f),0,f);case 5123:return new Uint16Array(n(2*f),0,f);case 5124:return new Int32Array(n(4*f),0,f);case 5125:return new Uint32Array(n(4*
f),0,f);case 5126:return new Float32Array(n(4*f),0,f);default:return null}},freeType:function(f){b(f.buffer)}}},{"./loop":26}],29:[function(a,g,m){g.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(a){return requestAnimationFrame(a)},cancel:function(a){return cancelAnimationFrame(a)}}:{next:function(a){setTimeout(a,30)},cancel:clearTimeout}},{}],30:[function(a,g,m){g.exports=function(a){for(var n=new Float32Array(a),n=new Uint32Array(n.buffer),
b=new Uint16Array(a.length),f=0;f<a.length;++f)if(isNaN(a[f]))b[f]=65535;else if(Infinity===a[f])b[f]=31744;else if(-Infinity===a[f])b[f]=64512;else{var p=n[f],k=p>>>31<<15,y=(p<<1>>>24)-127,p=p>>13&1023;b[f]=-24>y?k:-14>y?k+(p+1024>>-14-y):15<y?k+31744:k+(y+15<<10)+p}return b}},{}],31:[function(a,g,m){g.exports=function(a,n,b,f,p,k,y){for(var u=0,w=0;w<b;++w)for(var v=0;v<f;++v)a[u++]=n[p*w+k*v+y]}},{}],32:[function(a,g,m){g.exports=function(a){return Object.keys(a).map(function(n){return a[n]})}},
{}],33:[function(a,g,m){function t(f,a){function k(){var a=window.innerWidth,h=window.innerHeight;f!==document.body&&(h=f.getBoundingClientRect(),a=h.right-h.left,h=h.top-h.bottom);y.width=w*a;y.height=w*h;b(y.style,{width:a+"px",height:h+"px"})}var y=document.createElement("canvas"),u=n(y,a);b(y.style,{border:0,margin:0,padding:0,top:0,left:0});f.appendChild(y);f===document.body&&(y.style.position="absolute",b(f.style,{margin:0,padding:0}));var w=+u.options.pixelRatio;window.addEventListener("resize",
k,!1);var v=u.options.onDestroy;u.options=b(b({},u.options),{onDestroy:function(){window.removeEventListener("resize",k);f.removeChild(y);v&&v()}});k();return u}function n(f,a){function k(b){try{return f.getContext(b,n)}catch(a){return null}}var n=a.glOptions||{};return{gl:k("webgl")||k("experimental-webgl")||k("webgl-experimental"),options:b({pixelRatio:window.devicePixelRatio},a)}}var b=a("./util/extend");g.exports=function(f){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:f[0],
options:f[1]||{}};var a=document.body,k=f[1]||{};if("string"===typeof f[0])a=document.querySelector(f[0])||document.body;else if("object"===typeof f[0])if(f[0]instanceof HTMLElement)a=f[0];else{if(f[0]instanceof WebGLRenderingContext)return{gl:f[0],options:b({pixelRatio:1},k)};k=f[0]}return a.nodeName&&"CANVAS"===a.nodeName.toUpperCase()?n(a,k):t(a,k)}},{"./util/extend":21}],34:[function(a,g,m){function t(b,f,a){for(var u=[],w=f;w<a;w+=3)f=(b[w]<<16)+(b[w+1]<<8)+b[w+2],u.push(n[f>>18&63]+n[f>>12&
63]+n[f>>6&63]+n[f&63]);return u.join("")}m.toByteArray=function(a){var k,n,u,w,v;k=a.length;if(0<k%4)throw Error("Invalid string. Length must be a multiple of 4");w="="===a[k-2]?2:"="===a[k-1]?1:0;v=new f(3*k/4-w);n=0<w?k-4:k;var r=0;for(k=0;k<n;k+=4)u=b[a.charCodeAt(k)]<<18|b[a.charCodeAt(k+1)]<<12|b[a.charCodeAt(k+2)]<<6|b[a.charCodeAt(k+3)],v[r++]=u>>16&255,v[r++]=u>>8&255,v[r++]=u&255;2===w?(u=b[a.charCodeAt(k)]<<2|b[a.charCodeAt(k+1)]>>4,v[r++]=u&255):1===w&&(u=b[a.charCodeAt(k)]<<10|b[a.charCodeAt(k+
1)]<<4|b[a.charCodeAt(k+2)]>>2,v[r++]=u>>8&255,v[r++]=u&255);return v};m.fromByteArray=function(b){for(var f=b.length,a=f%3,u="",w=[],v=0,r=f-a;v<r;v+=16383)w.push(t(b,v,v+16383>r?r:v+16383));1===a?(b=b[f-1],u+=n[b>>2],u+=n[b<<4&63],u+="=="):2===a&&(b=(b[f-2]<<8)+b[f-1],u+=n[b>>10],u+=n[b>>4&63],u+=n[b<<2&63],u+="=");w.push(u);return w.join("")};var n=[],b=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;(function(){for(var f=0;64>f;++f)n[f]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f],
b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(f)]=f;b[45]=62;b[95]=63})()},{}],35:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,b){return t(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}},{"./lib/rationalize":45}],36:[function(a,g,m){g.exports=function(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],37:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,b){return t(a[0].mul(b[1]),a[1].mul(b[0]))}},{"./lib/rationalize":45}],
38:[function(a,g,m){function t(a,w){if(n(a))return w?y(a,t(w)):[a[0].clone(),a[1].clone()];var v=0,r,h;if(b(a))r=a.clone();else if("string"===typeof a)r=p(a);else{if(0===a)return[f(0),f(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;r=f(a)}if(n(w))r.mul(w[1]),h=w[0].clone();else if(b(w))h=w.clone();else if("string"===typeof w)h=p(w);else if(w){if(w!==Math.floor(w))for(;w!==Math.floor(w);)w*=Math.pow(2,256),v+=256;h=f(w)}else h=f(1);0<v?r=r.shln(v):0>v&&(h=h.shln(-v));return k(r,
h)}var n=a("./is-rat"),b=a("./lib/is-bn"),f=a("./lib/num-to-bn"),p=a("./lib/str-to-bn"),k=a("./lib/rationalize"),y=a("./div");g.exports=t},{"./div":37,"./is-rat":39,"./lib/is-bn":43,"./lib/num-to-bn":44,"./lib/rationalize":45,"./lib/str-to-bn":46}],39:[function(a,g,m){var t=a("./lib/is-bn");g.exports=function(a){return Array.isArray(a)&&2===a.length&&t(a[0])&&t(a[1])}},{"./lib/is-bn":43}],40:[function(a,g,m){var t=a("bn.js");g.exports=function(a){return a.cmp(new t(0))}},{"bn.js":48}],41:[function(a,
g,m){g.exports=function(a){var n=a.length,b=a.words,f=0;if(1===n)f=b[0];else if(2===n)f=b[0]+67108864*b[1];else for(var p=f=0;p<n;p++)f+=b[p]*Math.pow(67108864,p);return a.sign?-f:f}},{}],42:[function(a,g,m){var t=a("double-bits"),n=a("bit-twiddle").countTrailingZeros;g.exports=function(b){var f=n(t.lo(b));if(32>f)return f;b=n(t.hi(b));return 20<b?52:b+32}},{"bit-twiddle":53,"double-bits":74}],43:[function(a,g,m){a("bn.js");g.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":48}],
44:[function(a,g,m){var t=a("bn.js"),n=a("double-bits");g.exports=function(b){var f=n.exponent(b);return 52>f?new t(b):(new t(b*Math.pow(2,52-f))).shln(f-52)}},{"bn.js":48,"double-bits":74}],45:[function(a,g,m){var t=a("./num-to-bn"),n=a("./bn-sign");g.exports=function(b,f){var a=n(b),k=n(f);if(0===a)return[t(0),t(1)];if(0===k)return[t(0),t(0)];0>k&&(b=b.neg(),f=f.neg());a=b.gcd(f);return a.cmpn(1)?[b.div(a),f.div(a)]:[b,f]}},{"./bn-sign":40,"./num-to-bn":44}],46:[function(a,g,m){var t=a("bn.js");
g.exports=function(a){return new t(a)}},{"bn.js":48}],47:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,b){return t(a[0].mul(b[0]),a[1].mul(b[1]))}},{"./lib/rationalize":45}],48:[function(a,g,m){(function(a,n){function b(c,d){if(!c)throw Error(d||"Assertion failed");}function f(c,d){c.super_=d;var e=function(){};e.prototype=d.prototype;c.prototype=new e;c.prototype.constructor=c}function p(c,d,e){if(null!==c&&"object"===typeof c&&Array.isArray(c.words))return c;this.sign=!1;this.words=
null;this.length=0;this.red=null;if("le"===d||"be"===d)e=d,d=10;null!==c&&this._init(c||0,d||10,e||"be")}function k(c,d,e){var b=0;for(e=Math.min(c.length,e);d<e;d++)var f=c.charCodeAt(d)-48,b=b<<4,b=49<=f&&54>=f?b|f-49+10:17<=f&&22>=f?b|f-17+10:b|f&15;return b}function y(c,d,e,b){var f=0;for(e=Math.min(c.length,e);d<e;d++)var a=c.charCodeAt(d)-48,f=f*b,f=49<=a?f+(a-49+10):17<=a?f+(a-17+10):f+a;return f}function u(c,d){this.name=c;this.p=new p(d,16);this.n=this.p.bitLength();this.k=(new p(1)).ishln(this.n).isub(this.p);
this.tmp=this._tmp()}function w(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function e(c){"string"===typeof c?(c=p._prime(c),this.m=c.p,this.prime=c):(this.m=
c,this.prime=null)}function d(c){e.call(this,c);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new p(1)).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=!0;this.minv=this.minv.mod(this.r)}"object"===typeof a?a.exports=p:n.BN=p;p.BN=p;p.wordSize=26;p.prototype._init=function(c,d,e){if("number"===typeof c)return this._initNumber(c,d,e);if("object"===typeof c)return this._initArray(c,
d,e);"hex"===d&&(d=16);b(d===(d|0)&&2<=d&&36>=d);c=c.toString().replace(/\s+/g,"");var f=0;"-"===c[0]&&f++;16===d?this._parseHex(c,f):this._parseBase(c,d,f);"-"===c[0]&&(this.sign=!0);this.strip();"le"===e&&this._initArray(this.toArray(),d,e)};p.prototype._initNumber=function(c,d,e){0>c&&(this.sign=!0,c=-c);67108864>c?(this.words=[c&67108863],this.length=1):4503599627370496>c?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(b(9007199254740992>c),this.words=[c&67108863,c/67108864&67108863,
1],this.length=3);"le"===e&&this._initArray(this.toArray(),d,e)};p.prototype._initArray=function(c,d,e){b("number"===typeof c.length);if(0>=c.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3);this.words=Array(this.length);for(d=0;d<this.length;d++)this.words[d]=0;var f=0;if("be"===e)for(d=c.length-1,e=0;0<=d;d-=3){var a=c[d]|c[d-1]<<8|c[d-2]<<16;this.words[e]|=a<<f&67108863;this.words[e+1]=a>>>26-f&67108863;f+=24;26<=f&&(f-=26,e++)}else if("le"===e)for(e=d=0;d<c.length;d+=
3)a=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[e]|=a<<f&67108863,this.words[e+1]=a>>>26-f&67108863,f+=24,26<=f&&(f-=26,e++);return this.strip()};p.prototype._parseHex=function(c,d){this.length=Math.ceil((c.length-d)/6);this.words=Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;for(var b=0,e=c.length-6,f=0;e>=d;e-=6){var a=k(c,e,e+6);this.words[f]|=a<<b&67108863;this.words[f+1]|=a>>>26-b&4194303;b+=24;26<=b&&(b-=26,f++)}e+6!==d&&(a=k(c,d,e+6),this.words[f]|=a<<b&67108863,this.words[f+1]|=
a>>>26-b&4194303);this.strip()};p.prototype._parseBase=function(c,d,e){this.words=[0];this.length=1;for(var b=0,f=1;67108863>=f;f*=d)b++;b--;for(var f=f/d|0,a=c.length-e,h=a%b,l=Math.min(a,a-h)+e,a=0;e<l;e+=b)a=y(c,e,e+b,d),this.imuln(f),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==h){b=1;a=y(c,e,c.length,d);for(e=0;e<h;e++)b*=d;this.imuln(b);67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}};p.prototype.copy=function(c){c.words=Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=
this.words[d];c.length=this.length;c.sign=this.sign;c.red=this.red};p.prototype.clone=function(){var c=new p(null);this.copy(c);return c};p.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};p.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.sign=!1);return this};p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var q=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];p.prototype.toString=function(c,d){c=c||10;if(16===c||"hex"===c){var e="",f=0;d=d|0||1;for(var a=0,h=0;h<this.length;h++){var k=
this.words[h],p=((k<<f|a)&16777215).toString(16),a=k>>>24-f&16777215,e=0!==a||h!==this.length-1?q[6-p.length]+p+e:p+e,f=f+2;26<=f&&(f-=26,h--)}for(0!==a&&(e=a.toString(16)+e);0!==e.length%d;)e="0"+e;this.sign&&(e="-"+e);return e}if(c===(c|0)&&2<=c&&36>=c){f=l[c];a=z[c];e="";h=this.clone();for(h.sign=!1;0!==h.cmpn(0);)k=h.modn(a).toString(c),h=h.idivn(a),e=0!==h.cmpn(0)?q[f-k.length]+k+e:k+e;0===this.cmpn(0)&&(e="0"+e);this.sign&&(e="-"+e);return e}b(!1,"Base should be between 2 and 36")};p.prototype.toJSON=
function(){return this.toString(16)};p.prototype.toArray=function(c){this.strip();var d=Array(this.byteLength());d[0]=0;var e=this.clone();if("le"!==c)for(c=0;0!==e.cmpn(0);c++){var b=e.andln(255);e.ishrn(8);d[d.length-c-1]=b}else for(c=0;0!==e.cmpn(0);c++)b=e.andln(255),e.ishrn(8),d[c]=b;return d};p.prototype._countBits=Math.clz32?function(c){return 32-Math.clz32(c)}:function(c){var d=0;4096<=c&&(d+=13,c>>>=13);64<=c&&(d+=7,c>>>=7);8<=c&&(d+=4,c>>>=4);2<=c&&(d+=2,c>>>=2);return d+c};p.prototype._zeroBits=
function(c){if(0===c)return 26;var d=0;0===(c&8191)&&(d+=13,c>>>=13);0===(c&127)&&(d+=7,c>>>=7);0===(c&15)&&(d+=4,c>>>=4);0===(c&3)&&(d+=2,c>>>=2);0===(c&1)&&d++;return d};p.prototype.bitLength=function(){var c=0,c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c};p.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var c=0,d=0;d<this.length;d++){var e=this._zeroBits(this.words[d]),c=c+e;if(26!==e)break}return c};p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/
8)};p.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var c=this.clone();c.sign=!this.sign;return c};p.prototype.ior=function(c){for(this.sign=this.sign||c.sign;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]|=c.words[d];return this.strip()};p.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)};p.prototype.iand=function(c){this.sign=this.sign&&c.sign;var d;d=this.length>c.length?c:this;for(var e=
0;e<d.length;e++)this.words[e]&=c.words[e];this.length=d.length;return this.strip()};p.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)};p.prototype.ixor=function(c){this.sign=this.sign||c.sign;var d;this.length>c.length?d=this:(d=c,c=this);for(var e=0;e<c.length;e++)this.words[e]=d.words[e]^c.words[e];if(this!==d)for(;e<d.length;e++)this.words[e]=d.words[e];this.length=d.length;return this.strip()};p.prototype.xor=function(c){return this.length>c.length?
this.clone().ixor(c):c.clone().ixor(this)};p.prototype.setn=function(c,d){b("number"===typeof c&&0<=c);for(var e=c/26|0,f=c%26;this.length<=e;)this.words[this.length++]=0;this.words[e]=d?this.words[e]|1<<f:this.words[e]&~(1<<f);return this.strip()};p.prototype.iadd=function(c){if(this.sign&&!c.sign){this.sign=!1;var d=this.isub(c);this.sign=!this.sign;return this._normSign()}if(!this.sign&&c.sign)return c.sign=!1,d=this.isub(c),c.sign=!0,d._normSign();var e;this.length>c.length?e=this:(e=c,c=this);
for(var b=d=0;b<c.length;b++)d=e.words[b]+c.words[b]+d,this.words[b]=d&67108863,d>>>=26;for(;0!==d&&b<e.length;b++)d=e.words[b]+d,this.words[b]=d&67108863,d>>>=26;this.length=e.length;if(0!==d)this.words[this.length]=d,this.length++;else if(e!==this)for(;b<e.length;b++)this.words[b]=e.words[b];return this};p.prototype.add=function(c){if(c.sign&&!this.sign){c.sign=!1;var d=this.sub(c);c.sign=!0;return d}return!c.sign&&this.sign?(this.sign=!1,d=c.sub(this),this.sign=!0,d):this.length>c.length?this.clone().iadd(c):
c.clone().iadd(this)};p.prototype.isub=function(c){if(c.sign){c.sign=!1;var d=this.iadd(c);c.sign=!0;return d._normSign()}if(this.sign)return this.sign=!1,this.iadd(c),this.sign=!0,this._normSign();d=this.cmp(c);if(0===d)return this.sign=!1,this.length=1,this.words[0]=0,this;var e;0<d?e=this:(e=c,c=this);for(var b=0,f=0;f<c.length;f++)d=e.words[f]-c.words[f]+b,b=d>>26,this.words[f]=d&67108863;for(;0!==b&&f<e.length;f++)d=e.words[f]+b,b=d>>26,this.words[f]=d&67108863;if(0===b&&f<e.length&&e!==this)for(;f<
e.length;f++)this.words[f]=e.words[f];this.length=Math.max(this.length,f);e!==this&&(this.sign=!0);return this.strip()};p.prototype.sub=function(c){return this.clone().isub(c)};p.prototype._smallMulTo=function(c,d){d.sign=c.sign!==this.sign;d.length=this.length+c.length;for(var e=0,b=0;b<d.length-1;b++){for(var f=e>>>26,e=e&67108863,a=Math.min(b,c.length-1),h=Math.max(0,b-this.length+1);h<=a;h++)var l=(this.words[b-h]|0)*(c.words[h]|0),q=l&67108863,f=f+(l/67108864|0)|0,q=q+e|0,e=q&67108863,f=f+(q>>>
26)|0;d.words[b]=e;e=f}0!==e?d.words[b]=e:d.length--;return d.strip()};p.prototype._bigMulTo=function(c,d){d.sign=c.sign!==this.sign;d.length=this.length+c.length;for(var e=0,b=0,f=0;f<d.length-1;f++){for(var a=b,b=0,e=e&67108863,h=Math.min(f,c.length-1),l=Math.max(0,f-this.length+1);l<=h;l++)var q=(this.words[f-l]|0)*(c.words[l]|0),k=q&67108863,a=a+(q/67108864|0)|0,k=k+e|0,e=k&67108863,a=a+(k>>>26)|0,b=b+(a>>>26),a=a&67108863;d.words[f]=e;e=a}0!==e?d.words[f]=e:d.length--;return d.strip()};p.prototype.mulTo=
function(c,d){return 63>this.length+c.length?this._smallMulTo(c,d):this._bigMulTo(c,d)};p.prototype.mul=function(c){var d=new p(null);d.words=Array(this.length+c.length);return this.mulTo(c,d)};p.prototype.imul=function(c){if(0===this.cmpn(0)||0===c.cmpn(0))return this.words[0]=0,this.length=1,this;var d=this.length,e=c.length;this.sign=c.sign!==this.sign;this.length+=c.length;this.words[this.length-1]=0;for(var b=this.length-2;0<=b;b--){for(var f=0,a=0,h=Math.min(b,e-1),l=Math.max(0,b-d+1);l<=h;l++)var q=
b-l,q=this.words[q]*c.words[l],k=q&67108863,f=f+(q/67108864|0),k=k+a,a=k&67108863,f=f+(k>>>26);this.words[b]=a;this.words[b+1]+=f}f=0;for(q=1;q<this.length;q++)c=this.words[q]+f,this.words[q]=c&67108863,f=c>>>26;return this.strip()};p.prototype.imuln=function(c){b("number"===typeof c);for(var d=0,e=0;e<this.length;e++){var f=this.words[e]*c,a=(f&67108863)+(d&67108863),d=d>>26,d=d+(f/67108864|0),d=d+(a>>>26);this.words[e]=a&67108863}0!==d&&(this.words[e]=d,this.length++);return this};p.prototype.muln=
function(c){return this.clone().imuln(c)};p.prototype.sqr=function(){return this.mul(this)};p.prototype.isqr=function(){return this.mul(this)};p.prototype.ishln=function(c){b("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;var e=67108863>>>26-d<<26-d;if(0!==d){for(var f=0,a=0;a<this.length;a++){var h=this.words[a]&e;this.words[a]=this.words[a]-h<<d|f;f=h>>>26-d}f&&(this.words[a]=f,this.length++)}if(0!==c){for(a=this.length-1;0<=a;a--)this.words[a+c]=this.words[a];for(a=0;a<c;a++)this.words[a]=0;
this.length+=c}return this.strip()};p.prototype.ishrn=function(c,d,e){b("number"===typeof c&&0<=c);var f=c%26,a=Math.min((c-f)/26,this.length);c=67108863^67108863>>>f<<f;d=(d?(d-d%26)/26:0)-a;d=Math.max(0,d);if(e){for(var h=0;h<a;h++)e.words[h]=this.words[h];e.length=a}if(0!==a)if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;a=0;for(h=this.length-1;0<=h&&(0!==a||h>=d);h--){var l=this.words[h];this.words[h]=a<<26-f|l>>>f;a=
l&c}e&&0!==a&&(e.words[e.length++]=a);0===this.length&&(this.words[0]=0,this.length=1);this.strip();return this};p.prototype.shln=function(c){return this.clone().ishln(c)};p.prototype.shrn=function(c){return this.clone().ishrn(c)};p.prototype.testn=function(c){b("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;return this.length<=c?!1:!!(this.words[c]&1<<d)};p.prototype.imaskn=function(c){b("number"===typeof c&&0<=c);var d=c%26;c=(c-d)/26;b(!this.sign,"imaskn works only with positive numbers");0!==
d&&c++;this.length=Math.min(c,this.length);0!==d&&(this.words[this.length-1]&=67108863^67108863>>>d<<d);return this.strip()};p.prototype.maskn=function(c){return this.clone().imaskn(c)};p.prototype.iaddn=function(c){b("number"===typeof c);if(0>c)return this.isubn(-c);if(this.sign){if(1===this.length&&this.words[0]<c)return this.words[0]=c-this.words[0],this.sign=!1,this;this.sign=!1;this.isubn(c);this.sign=!0;return this}return this._iaddn(c)};p.prototype._iaddn=function(c){this.words[0]+=c;for(c=
0;c<this.length&&67108864<=this.words[c];c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;this.length=Math.max(this.length,c+1);return this};p.prototype.isubn=function(c){b("number"===typeof c);if(0>c)return this.iaddn(-c);if(this.sign)return this.sign=!1,this.iaddn(c),this.sign=!0,this;this.words[0]-=c;for(c=0;c<this.length&&0>this.words[c];c++)this.words[c]+=67108864,--this.words[c+1];return this.strip()};p.prototype.addn=function(c){return this.clone().iaddn(c)};
p.prototype.subn=function(c){return this.clone().isubn(c)};p.prototype.iabs=function(){this.sign=!1;return this};p.prototype.abs=function(){return this.clone().iabs()};p.prototype._ishlnsubmul=function(c,d,e){var f=c.length+e,a;if(this.words.length<f){var h=Array(f);for(a=0;a<this.length;a++)h[a]=this.words[a];this.words=h}else a=this.length;for(this.length=Math.max(this.length,f);a<this.length;a++)this.words[a]=0;for(a=h=0;a<c.length;a++)f=this.words[a+e]+h,h=c.words[a]*d,f-=h&67108863,h=(f>>26)-
(h/67108864|0),this.words[a+e]=f&67108863;for(;a<this.length-e;a++)f=this.words[a+e]+h,h=f>>26,this.words[a+e]=f&67108863;if(0===h)return this.strip();b(-1===h);for(a=h=0;a<this.length;a++)f=-this.words[a]+h,h=f>>26,this.words[a]=f&67108863;this.sign=!0;return this.strip()};p.prototype._wordDiv=function(c,d){var e=this.length-c.length,b=this.clone(),f=c,a=f.words[f.length-1],e=26-this._countBits(a);0!==e&&(f=f.shln(e),b.ishln(e),a=f.words[f.length-1]);var h=b.length-f.length,l;if("mod"!==d){l=new p(null);
l.length=h+1;l.words=Array(l.length);for(var q=0;q<l.length;q++)l.words[q]=0}q=b.clone()._ishlnsubmul(f,1,h);q.sign||(b=q,l&&(l.words[h]=1));for(--h;0<=h;h--){q=67108864*b.words[f.length+h]+b.words[f.length+h-1];q=Math.min(q/a|0,67108863);for(b._ishlnsubmul(f,q,h);b.sign;)q--,b.sign=!1,b._ishlnsubmul(f,1,h),0!==b.cmpn(0)&&(b.sign=!b.sign);l&&(l.words[h]=q)}l&&l.strip();b.strip();"div"!==d&&0!==e&&b.ishrn(e);return{div:l?l:null,mod:b}};p.prototype.divmod=function(c,d){b(0!==c.cmpn(0));if(this.sign&&
!c.sign){var e=this.neg().divmod(c,d),f,a;"mod"!==d&&(f=e.div.neg());"div"!==d&&(a=0===e.mod.cmpn(0)?e.mod:c.sub(e.mod));return{div:f,mod:a}}return!this.sign&&c.sign?(e=this.divmod(c.neg(),d),"mod"!==d&&(f=e.div.neg()),{div:f,mod:e.mod}):this.sign&&c.sign?this.neg().divmod(c.neg(),d):c.length>this.length||0>this.cmp(c)?{div:new p(0),mod:this}:1===c.length?"div"===d?{div:this.divn(c.words[0]),mod:null}:"mod"===d?{div:null,mod:new p(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new p(this.modn(c.words[0]))}:
this._wordDiv(c,d)};p.prototype.div=function(c){return this.divmod(c,"div").div};p.prototype.mod=function(c){return this.divmod(c,"mod").mod};p.prototype.divRound=function(c){var d=this.divmod(c);if(0===d.mod.cmpn(0))return d.div;var e=d.div.sign?d.mod.isub(c):d.mod,b=c.shrn(1);c=c.andln(1);e=e.cmp(b);return 0>e||1===c&&0===e?d.div:d.div.sign?d.div.isubn(1):d.div.iaddn(1)};p.prototype.modn=function(c){b(67108863>=c);for(var d=67108864%c,e=0,f=this.length-1;0<=f;f--)e=(d*e+this.words[f])%c;return e};
p.prototype.idivn=function(c){b(67108863>=c);for(var d=0,e=this.length-1;0<=e;e--)d=this.words[e]+67108864*d,this.words[e]=d/c|0,d%=c;return this.strip()};p.prototype.divn=function(c){return this.clone().idivn(c)};p.prototype.egcd=function(c){b(!c.sign);b(0!==c.cmpn(0));var d=this,e=c.clone(),d=d.sign?d.mod(c):d.clone();c=new p(1);for(var f=new p(0),a=new p(0),h=new p(1),l=0;d.isEven()&&e.isEven();)d.ishrn(1),e.ishrn(1),++l;for(var q=e.clone(),k=d.clone();0!==d.cmpn(0);){for(;d.isEven();)d.ishrn(1),
c.isEven()&&f.isEven()?(c.ishrn(1),f.ishrn(1)):(c.iadd(q).ishrn(1),f.isub(k).ishrn(1));for(;e.isEven();)e.ishrn(1),a.isEven()&&h.isEven()?(a.ishrn(1),h.ishrn(1)):(a.iadd(q).ishrn(1),h.isub(k).ishrn(1));0<=d.cmp(e)?(d.isub(e),c.isub(a),f.isub(h)):(e.isub(d),a.isub(c),h.isub(f))}return{a:a,b:h,gcd:e.ishln(l)}};p.prototype._invmp=function(c){b(!c.sign);b(0!==c.cmpn(0));var d=this,e=c.clone(),d=d.sign?d.mod(c):d.clone();c=new p(1);for(var f=new p(0),a=e.clone();0<d.cmpn(1)&&0<e.cmpn(1);){for(;d.isEven();)d.ishrn(1),
c.isEven()?c.ishrn(1):c.iadd(a).ishrn(1);for(;e.isEven();)e.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(a).ishrn(1);0<=d.cmp(e)?(d.isub(e),c.isub(f)):(e.isub(d),f.isub(c))}return 0===d.cmpn(1)?c:f};p.prototype.gcd=function(c){if(0===this.cmpn(0))return c.clone();if(0===c.cmpn(0))return this.clone();var d=this.clone();c=c.clone();d.sign=!1;c.sign=!1;for(var e=0;d.isEven()&&c.isEven();e++)d.ishrn(1),c.ishrn(1);do{for(;d.isEven();)d.ishrn(1);for(;c.isEven();)c.ishrn(1);var b=d.cmp(c);if(0>b)b=d,d=c,c=b;else if(0===
b||0===c.cmpn(1))break;d.isub(c)}while(1);return c.ishln(e)};p.prototype.invm=function(c){return this.egcd(c).a.mod(c)};p.prototype.isEven=function(){return 0===(this.words[0]&1)};p.prototype.isOdd=function(){return 1===(this.words[0]&1)};p.prototype.andln=function(c){return this.words[0]&c};p.prototype.bincn=function(c){b("number"===typeof c);var d=c%26;c=(c-d)/26;var e=1<<d;if(this.length<=c){for(d=this.length;d<c+1;d++)this.words[d]=0;this.words[c]|=e;this.length=c+1;return this}for(d=c;0!==e&&
d<this.length;d++)c=this.words[d],c+=e,e=c>>>26,c&=67108863,this.words[d]=c;0!==e&&(this.words[d]=e,this.length++);return this};p.prototype.cmpn=function(c){var d=0>c;d&&(c=-c);if(this.sign&&!d)return-1;if(!this.sign&&d)return 1;c&=67108863;this.strip();1<this.length?c=1:(d=this.words[0],c=d===c?0:d<c?-1:1);this.sign&&(c=-c);return c};p.prototype.cmp=function(c){if(this.sign&&!c.sign)return-1;if(!this.sign&&c.sign)return 1;c=this.ucmp(c);return this.sign?-c:c};p.prototype.ucmp=function(c){if(this.length>
c.length)return 1;if(this.length<c.length)return-1;for(var d=0,e=this.length-1;0<=e;e--){var b=this.words[e],f=c.words[e];if(b!==f){b<f?d=-1:b>f&&(d=1);break}}return d};p.red=function(c){return new e(c)};p.prototype.toRed=function(c){b(!this.red,"Already a number in reduction context");b(!this.sign,"red works only with positives");return c.convertTo(this)._forceRed(c)};p.prototype.fromRed=function(){b(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
p.prototype._forceRed=function(c){this.red=c;return this};p.prototype.forceRed=function(c){b(!this.red,"Already a number in reduction context");return this._forceRed(c)};p.prototype.redAdd=function(c){b(this.red,"redAdd works only with red numbers");return this.red.add(this,c)};p.prototype.redIAdd=function(c){b(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,c)};p.prototype.redSub=function(c){b(this.red,"redSub works only with red numbers");return this.red.sub(this,c)};p.prototype.redISub=
function(c){b(this.red,"redISub works only with red numbers");return this.red.isub(this,c)};p.prototype.redShl=function(c){b(this.red,"redShl works only with red numbers");return this.red.shl(this,c)};p.prototype.redMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.mul(this,c)};p.prototype.redIMul=function(c){b(this.red,"redMul works only with red numbers");this.red._verify2(this,c);return this.red.imul(this,c)};p.prototype.redSqr=function(){b(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};p.prototype.redISqr=function(){b(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};p.prototype.redSqrt=function(){b(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};p.prototype.redInvm=function(){b(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};p.prototype.redNeg=
function(){b(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};p.prototype.redPow=function(c){b(this.red&&!c.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,c)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var c=new p(null);c.words=Array(Math.ceil(this.n/13));return c};u.prototype.ireduce=function(c){var d;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),d=c.bitLength();while(d>this.n);
d=d<this.n?-1:c.ucmp(this.p);0===d?(c.words[0]=0,c.length=1):0<d?c.isub(this.p):c.strip();return c};u.prototype.split=function(c,d){c.ishrn(this.n,0,d)};u.prototype.imulK=function(c){return c.imul(this.k)};f(w,u);w.prototype.split=function(c,d){for(var e=Math.min(c.length,9),b=0;b<e;b++)d.words[b]=c.words[b];d.length=e;if(9>=c.length)c.words[0]=0,c.length=1;else{e=c.words[9];d.words[d.length++]=e&4194303;for(b=10;b<c.length;b++){var f=c.words[b];c.words[b-10]=(f&4194303)<<4|e>>>22;e=f}c.words[b-10]=
e>>>22;c.length-=9}};w.prototype.imulK=function(c){c.words[c.length]=0;c.words[c.length+1]=0;c.length+=2;for(var d,e=0,b=0;b<c.length;b++){var f=c.words[b];d=64*f;e+=977*f;d+=e/67108864|0;e&=67108863;c.words[b]=e;e=d}0===c.words[c.length-1]&&(c.length--,0===c.words[c.length-1]&&c.length--);return c};f(v,u);f(r,u);f(h,u);h.prototype.imulK=function(c){for(var d=0,e=0;e<c.length;e++){var d=19*c.words[e]+d,b=d&67108863,d=d>>>26;c.words[e]=b}0!==d&&(c.words[c.length++]=d);return c};p._prime=function(c){if(g[c])return g[c];
var d;if("k256"===c)d=new w;else if("p224"===c)d=new v;else if("p192"===c)d=new r;else if("p25519"===c)d=new h;else throw Error("Unknown prime "+c);return g[c]=d};e.prototype._verify1=function(c){b(!c.sign,"red works only with positives");b(c.red,"red works only with red numbers")};e.prototype._verify2=function(c,d){b(!c.sign&&!d.sign,"red works only with positives");b(c.red&&c.red===d.red,"red works only with red numbers")};e.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):
c.mod(this.m)._forceRed(this)};e.prototype.neg=function(c){c=c.clone();c.sign=!c.sign;return c.iadd(this.m)._forceRed(this)};e.prototype.add=function(c,d){this._verify2(c,d);var e=c.add(d);0<=e.cmp(this.m)&&e.isub(this.m);return e._forceRed(this)};e.prototype.iadd=function(c,d){this._verify2(c,d);var e=c.iadd(d);0<=e.cmp(this.m)&&e.isub(this.m);return e};e.prototype.sub=function(c,d){this._verify2(c,d);var e=c.sub(d);0>e.cmpn(0)&&e.iadd(this.m);return e._forceRed(this)};e.prototype.isub=function(c,
d){this._verify2(c,d);var e=c.isub(d);0>e.cmpn(0)&&e.iadd(this.m);return e};e.prototype.shl=function(c,d){this._verify1(c);return this.imod(c.shln(d))};e.prototype.imul=function(c,d){this._verify2(c,d);return this.imod(c.imul(d))};e.prototype.mul=function(c,d){this._verify2(c,d);return this.imod(c.mul(d))};e.prototype.isqr=function(c){return this.imul(c,c)};e.prototype.sqr=function(c){return this.mul(c,c)};e.prototype.sqrt=function(c){if(0===c.cmpn(0))return c.clone();var d=this.m.andln(3);b(1===
d%2);if(3===d){var d=this.m.add(new p(1)).ishrn(2),e=this.pow(c,d);return e}for(var f=this.m.subn(1),a=0;0!==f.cmpn(0)&&0===f.andln(1);)a++,f.ishrn(1);b(0!==f.cmpn(0));for(var d=(new p(1)).toRed(this),e=d.redNeg(),h=this.m.subn(1).ishrn(1),l=this.m.bitLength(),l=(new p(2*l*l)).toRed(this);0!==this.pow(l,h).cmp(e);)l.redIAdd(e);h=this.pow(l,f);e=this.pow(c,f.addn(1).ishrn(1));c=this.pow(c,f);for(f=a;0!==c.cmp(d);){l=c;for(a=0;0!==l.cmp(d);a++)l=l.redSqr();b(a<f);h=this.pow(h,(new p(1)).ishln(f-a-1));
e=e.redMul(h);h=h.redSqr();c=c.redMul(h);f=a}return e};e.prototype.invm=function(c){c=c._invmp(this.m);return c.sign?(c.sign=!1,this.imod(c).redNeg()):this.imod(c)};e.prototype.pow=function(c,d){var e=[];if(0===d.cmpn(0))return new p(1);for(var b=d.clone();0!==b.cmpn(0);)e.push(b.andln(1)),b.ishrn(1);for(var f=c,a=0;a<e.length&&0===e[a];a++,f=this.sqr(f));if(++a<e.length)for(b=this.sqr(f);a<e.length;a++,b=this.sqr(b))0!==e[a]&&(f=this.mul(f,b));return f};e.prototype.convertTo=function(c){var d=c.mod(this.m);
return d===c?d.clone():d};e.prototype.convertFrom=function(c){c=c.clone();c.red=null;return c};p.mont=function(c){return new d(c)};f(d,e);d.prototype.convertTo=function(c){return this.imod(c.shln(this.shift))};d.prototype.convertFrom=function(c){c=this.imod(c.mul(this.rinv));c.red=null;return c};d.prototype.imul=function(c,d){if(0===c.cmpn(0)||0===d.cmpn(0))return c.words[0]=0,c.length=1,c;var e=c.imul(d),b=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=e=e.isub(b).ishrn(this.shift);
0<=e.cmp(this.m)?b=e.isub(this.m):0>e.cmpn(0)&&(b=e.iadd(this.m));return b._forceRed(this)};d.prototype.mul=function(c,d){if(0===c.cmpn(0)||0===d.cmpn(0))return(new p(0))._forceRed(this);var e=c.mul(d),b=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=e=e.isub(b).ishrn(this.shift);0<=e.cmp(this.m)?b=e.isub(this.m):0>e.cmpn(0)&&(b=e.iadd(this.m));return b._forceRed(this)};d.prototype.invm=function(c){return this.imod(c._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof g||g,this)},{}],49:[function(a,g,m){var t=a("./lib/bn-sign");g.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":40}],50:[function(a,g,m){var t=a("./lib/rationalize");g.exports=function(a,b){return t(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}},{"./lib/rationalize":45}],51:[function(a,g,m){var t=a("./lib/bn-to-num"),n=a("./lib/ctz");g.exports=function(b){var f=b[0];b=b[1];if(0===f.cmpn(0))return 0;var a=f.divmod(b),f=t(a.div),a=a.mod;if(0===a.cmpn(0))return f;if(f){var k=
n(f)+4;b=t(a.shln(k).divRound(b));0>f&&(b=-b);return f+b*Math.pow(2,-k)}f=b.bitLength()-a.bitLength()+53;b=t(a.shln(f).divRound(b));if(1023>f)return b*Math.pow(2,-f);b*=Math.pow(2,-1023);return b*Math.pow(2,1023-f)}},{"./lib/bn-to-num":41,"./lib/ctz":42}],52:[function(a,g,m){function t(b,f,a,k,n){b=["function ",b,"(a,l,h,",k.join(","),"){",n?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];n?0>f.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
b.push(";if(",f,"){i=m;");a?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");n?b.push("return -1};"):b.push("return i};");return b.join("")}function n(b,f,a,k){return(new Function([t("A","x"+b+"y",f,["y"],k),t("P","c(x,y)"+b+"0",f,["y","c"],k),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
g.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],53:[function(a,g,m){function t(b){var f=32;(b&=-b)&&f--;b&65535&&(f-=16);b&16711935&&(f-=8);b&252645135&&(f-=4);b&858993459&&(f-=2);b&1431655765&&--f;return f}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(b){return(0<b)-(0>b)};m.abs=function(b){var f=b>>31;return(b^f)-f};m.min=function(b,f){return f^(b^f)&-(b<f)};m.max=function(b,f){return b^(b^
f)&-(b<f)};m.isPow2=function(b){return!(b&b-1)&&!!b};m.log2=function(b){var f,a;f=(65535<b)<<4;b>>>=f;a=(255<b)<<3;b>>>=a;f|=a;a=(15<b)<<2;b>>>=a;f|=a;a=(3<b)<<1;return f|a|b>>>a>>1};m.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};m.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};m.countTrailingZeros=t;m.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=
b>>>8;return(b|b>>>16)+1};m.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};m.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var n=Array(256);(function(b){for(var f=0;256>f;++f){for(var a=f,k=f,n=7,a=a>>>1;a;a>>>=1)k<<=1,k|=a&1,--n;b[f]=k<<n&255}})(n);m.reverse=function(b){return n[b&255]<<24|n[b>>>8&255]<<16|n[b>>>16&255]<<8|n[b>>>24&255]};m.interleave2=function(b,f){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;
f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(b|b<<1)&1431655765|((f|f<<1)&1431655765)<<1};m.deinterleave2=function(b,f){b=b>>>f&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};m.interleave3=function(b,f,a){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;b=(b|b<<2)&1227133513|((f|f<<2)&1227133513)<<1;a&=1023;
a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return b|((a|a<<2)&1227133513)<<2};m.deinterleave3=function(b,f){b=b>>>f&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};m.nextCombination=function(b){var f=b|b-1;return f+1|(~f&-~f)-1>>>t(b)+1}},{}],54:[function(a,g,m){function t(b,f,a,k){for(var h=0,e=0,d=0,q=b.length;d<q;++d){var l=b[d],p;a:{for(p=0;p<f;++p)if(!(l[p]<=l[p+f])){p=!0;break a}p=!1}if(!p){for(p=0;p<2*f;++p)a[h++]=
l[p];k[e++]=d}}return e}function n(b,a,n,r){var h=b.length,e=a.length;if(!(0>=h||0>=e)){var d=b[0].length>>>1;if(!(0>=d)){var q,l=f.mallocDouble(2*d*h),z=f.mallocInt32(h),h=t(b,d,l,z);if(0<h){if(1===d&&r)p.init(h),q=p.sweepComplete(d,n,0,h,l,z,0,h,l,z);else{b=f.mallocDouble(2*d*e);var y=f.mallocInt32(e),e=t(a,d,b,y);0<e&&(p.init(h+e),q=1===d?p.sweepBipartite(d,n,0,h,l,z,0,e,b,y):k(d,n,r,h,l,z,e,b,y),f.free(b),f.free(y))}f.free(l);f.free(z)}return q}}}function b(b,f){y.push([b,f])}g.exports=function(f,
a,k){switch(arguments.length){case 1:return y=[],n(f,f,b,!0),y;case 2:if("function"===typeof a)return n(f,f,a,!0);y=[];n(f,a,b,!1);return y;case 3:return n(f,a,k,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),p=a("./lib/sweep"),k=a("./lib/intersect"),y},{"./lib/intersect":56,"./lib/sweep":60,"typedarray-pool":122}],55:[function(a,g,m){function t(b){function f(f,a){var p,h="bruteForce"+(f?"Red":"Blue")+(a?"Flip":"")+(b?"Full":"");p=["function ",h,"(",n.join(),
"){","var ","es","=2*","d",";"];var e="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(b?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?p.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",e):p.push(e,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");b?p.push("if(y1<x0||x1<y0)continue;"):a?p.push("if(y0<=x0||x1<y0)continue;"):p.push("if(y0<x0||x1<y0)continue;");p.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");
a?p.push("yi,xi"):p.push("xi,yi");p.push(");if(rv!==void 0)return rv;}}}");p=p.join("");k.push(p);u.push("return "+h+"("+n.join()+");")}var a="bruteForce"+(b?"Full":"Partial"),k=[],y=n.slice();b||y.splice(3,0,"fp");var u=["function "+a+"("+y.join()+"){"];u.push("if(re-rs>be-bs){");b?(f(!0,!1),u.push("}else{"),f(!1,!1)):(u.push("if(fp){"),f(!0,!0),u.push("}else{"),f(!0,!1),u.push("}}else{if(fp){"),f(!1,!0),u.push("}else{"),f(!1,!1),u.push("}"));u.push("}}return "+a);a=k.join("")+u.join("");return(new Function(a))()}
var n="d ax vv rs re rb ri bs be bb bi".split(" ");m.partial=t(!1);m.full=t(!0)},{}],56:[function(a,g,m){function t(d,e,b,f,a,h,l,q,k){var p=z*d;c[p]=e;c[p+1]=b;c[p+2]=f;c[p+3]=a;c[p+4]=h;c[p+5]=l;d*=E;x[d]=q;x[d+1]=k}g.exports=function(a,g,m,B,N,F,D,P,L){var J=8*b.log2(B+D+1)*(a+1)|0,O=b.nextPow2(z*J);c.length<O&&(n.free(c),c=n.mallocInt32(O));J=b.nextPow2(E*J);x<J&&(n.free(x),x=n.mallocDouble(J));var J=0,O=2*a,G;t(J++,0,0,B,0,D,m?16:0,-Infinity,Infinity);for(m||t(J++,0,0,D,0,B,1,-Infinity,Infinity);0<
J;){--J;m=J*z;var I=c[m];D=c[m+1];var K=c[m+2],M=c[m+3],V=c[m+4];m=c[m+5];B=J*E;var X=x[B],Y=x[B+1],T=m&1,W=!!(m&16),R=N,S=F,U=P;B=L;T&&(R=P,S=L,U=N,B=F);if(m&2&&(K=e(a,I,D,K,R,S,Y),D>=K))continue;if(m&4&&(D=d(a,I,D,K,R,S,X),D>=K))continue;m=K-D;var Q=V-M;if(W){if(a*m*(m+Q)<v){G=k.scanComplete(a,I,g,D,K,R,S,M,V,U,B);if(void 0!==G)return G;continue}}else if(a*Math.min(m,Q)<u){G=f(a,I,g,T,D,K,R,S,M,V,U,B);if(void 0!==G)return G;continue}else if(a*m*Q<w){G=k.scanBipartite(a,I,g,T,D,K,R,S,M,V,U,B);if(void 0!==
G)return G;continue}m=r(a,I,D,K,R,S,X,Y);if(D<m)if(a*(m-D)<u){if(G=p(a,I+1,g,D,m,R,S,M,V,U,B),void 0!==G)return G}else if(I===a-2){if(G=T?k.sweepBipartite(a,g,M,V,U,B,D,m,R,S):k.sweepBipartite(a,g,D,m,R,S,M,V,U,B),void 0!==G)return G}else t(J++,I+1,D,m,M,V,T,-Infinity,Infinity),t(J++,I+1,M,V,D,m,T^1,-Infinity,Infinity);if(m<K)if(D=y(a,I,M,V,U,B),G=U[O*D+I],Q=h(a,I,D,V,U,B,G),Q<V&&t(J++,I,m,K,Q,V,(T|4)+(W?16:0),G,Y),M<D&&t(J++,I,m,K,M,D,(T|2)+(W?16:0),X,G),D+1===Q){if(W)a:{M=a;V=g;B=B[D];T=2*M;D*=
T;X=U[D+I];Y=m;m*=T;b:for(;Y<K;++Y,m+=T)if(W=S[Y],W!==B&&(Q=R[m+I],G=R[m+I+M],!(X<Q||G<X))){for(var Z=I+1;Z<M;++Z){Q=R[m+Z];G=R[m+Z+M];var aa=U[D+Z+M];if(G<U[D+Z]||aa<Q)continue b}W=V(W,B);if(void 0!==W){G=W;break a}}G=void 0}else a:{M=a;V=g;B=B[D];X=2*M;D*=X;Y=U[D+I];W=m;m*=X;b:for(;W<K;++W,m+=X)if(Q=R[m+I],G=R[m+I+M],!(Y<Q||G<Y||T&&Y===Q)){Z=S[W];for(aa=I+1;aa<M;++aa){Q=R[m+aa];G=R[m+aa+M];var ha=U[D+aa+M];if(G<U[D+aa]||ha<Q)continue b}Q=T?V(B,Z):V(Z,B);if(void 0!==Q){G=Q;break a}}G=void 0}if(void 0!==
G)return G}else if(D<Q)if(W){if(K=q(a,I,m,K,R,S,G),m<K)if(M=h(a,I,m,K,R,S,G),I===a-2){if(m<M&&(G=k.sweepComplete(a,g,m,M,R,S,D,Q,U,B),void 0!==G)||M<K&&(G=k.sweepBipartite(a,g,M,K,R,S,D,Q,U,B),void 0!==G))return G}else m<M&&t(J++,I+1,m,M,D,Q,16,-Infinity,Infinity),M<K&&(t(J++,I+1,M,K,D,Q,0,-Infinity,Infinity),t(J++,I+1,D,Q,M,K,1,-Infinity,Infinity))}else K=T?l(a,I,m,K,R,S,G):q(a,I,m,K,R,S,G),m<K&&(I===a-2?T?k.sweepBipartite(a,g,D,Q,U,B,m,K,R,S):k.sweepBipartite(a,g,m,K,R,S,D,Q,U,B):(t(J++,I+1,m,K,
D,Q,T,-Infinity,Infinity),t(J++,I+1,D,Q,m,K,T^1,-Infinity,Infinity)))}};var n=a("typedarray-pool"),b=a("bit-twiddle");g=a("./brute");var f=g.partial,p=g.full,k=a("./sweep"),y=a("./median");a=a("./partition");var u=128,w=4194304,v=4194304,r=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=a("lo===p0",["p0"]),e=a("lo<p0",["p0"]),d=a("hi<=p0",["p0"]),q=a("lo<=p0&&p0<=hi",["p0"]),l=a("lo<p0&&p0<=hi",["p0"]),z=6,E=2,c=n.mallocInt32(1024),x=n.mallocDouble(1024)},{"./brute":55,"./median":57,"./partition":58,"./sweep":60,
"bit-twiddle":53,"typedarray-pool":122}],57:[function(a,g,m){g.exports=function(b,f,a,k,y,u){if(k<=a+1)return a;var w=a,v=k;k=k+a>>>1;for(var r=2*b,h=k,e=y[r*k+f];w<v;){if(v-w<n){for(var h=f,e=y,d=u,q=2*b,l=q*(w+1)+h,z=w+1;z<v;++z,l+=q)for(var g=e[l],c=z,m=q*(z-1);c>w&&e[m+h]>g;--c,m-=q){for(var C=m,H=m+q,A=0;A<q;++A,++C,++H){var B=e[C];e[C]=e[H];e[H]=B}C=d[c];d[c]=d[c-1];d[c-1]=C}break}l=v-w;h=Math.random()*l+w|0;e=y[r*h+f];q=Math.random()*l+w|0;d=y[r*q+f];z=Math.random()*l+w|0;l=y[r*z+f];e<=d?l>=
d?(h=q,e=d):e>=l||(h=z,e=l):d>=l?(h=q,e=d):l>=e||(h=z,e=l);d=r*(v-1);q=r*h;for(l=0;l<r;++l,++d,++q)z=y[d],y[d]=y[q],y[q]=z;d=u[v-1];u[v-1]=u[h];u[h]=d;h=t(b,f,w,v-1,y,u,e);d=r*(v-1);q=r*h;for(l=0;l<r;++l,++d,++q)z=y[d],y[d]=y[q],y[q]=z;d=u[v-1];u[v-1]=u[h];u[h]=d;if(k<h){for(v=h-1;w<v&&y[r*(v-1)+f]===e;)--v;v+=1}else if(h<k)for(w=h+1;w<v&&y[r*w+f]===e;)w+=1;else break}return t(b,f,a,k,y,u,y[r*k+f])};var t=a("./partition")("lo<p0",["p0"]),n=8},{"./partition":58}],58:[function(a,g,m){g.exports=function(a,
b){var f="abcdef".split("").concat(b),p=[];0<=a.indexOf("lo")&&p.push("lo=e[k+n]");0<=a.indexOf("hi")&&p.push("hi=e[k+o]");f.push(t.replace("_",p.join()).replace("$",a));return Function.apply(void 0,f)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],59:[function(a,g,m){function t(b,f,a){for(var h=2*(b+1),e=b+1;e<=f;++e){for(var d=a[h++],q=a[h++],l=
e,k=h-2;l-- >b;){var p=a[k-2],c=a[k-1];if(p<d)break;else if(p===d&&c<q)break;a[k]=p;a[k+1]=c;k-=2}a[k]=d;a[k+1]=q}}function n(b,f,a){b*=2;f*=2;var h=a[b],e=a[b+1];a[b]=a[f];a[b+1]=a[f+1];a[f]=h;a[f+1]=e}function b(b,f,a){b*=2;f*=2;a[b]=a[f];a[b+1]=a[f+1]}function f(b,f,a,h,e){b*=2;f*=2;e[b]=e[f];e[f]=a;e[b+1]=e[f+1];e[f+1]=h}function p(b,f,a){b*=2;f*=2;var h=a[b],e=a[f];return h<e?!1:h===e?a[b+1]>a[f+1]:!0}function k(b,f,a,h){b*=2;var e=h[b];return e<f?!0:e===f?h[b+1]<a:!1}function y(a,v,r){var h=
(v-a+1)/6|0,e=a+h,d=v-h,q=a+v>>1,l=q-h,z=q+h,g=e,c=l,m=q,C=z,H=d,h=a+1,A=v-1,B=0;p(g,c,r)&&(B=g,g=c,c=B);p(C,H,r)&&(B=C,C=H,H=B);p(g,m,r)&&(B=g,g=m,m=B);p(c,m,r)&&(B=c,c=m,m=B);p(g,C,r)&&(B=g,g=C,C=B);p(m,C,r)&&(B=m,m=C,C=B);p(c,H,r)&&(B=c,c=H,H=B);p(c,m,r)&&(B=c,c=m,m=B);p(C,H,r)&&(B=C,C=H,H=B);for(var B=r[2*c],c=r[2*c+1],N=r[2*C],C=r[2*C+1],g=2*g,m=2*m,H=2*H,e=2*e,q=2*q,d=2*d,F=0;2>F;++F){var D=r[m+F],P=r[H+F];r[e+F]=r[g+F];r[q+F]=D;r[d+F]=P}b(l,a,r);b(z,v,r);for(l=h;l<=A;++l)if(k(l,B,c,r))l!==
h&&n(l,h,r),++h;else if(!k(l,N,C,r))for(;;)if(k(A,N,C,r)){k(A,B,c,r)?(z=l,d=h,q=A,g=r,z*=2,d*=2,q*=2,e=g[z],m=g[z+1],g[z]=g[d],g[z+1]=g[d+1],g[d]=g[q],g[d+1]=g[q+1],g[q]=e,g[q+1]=m,++h):n(l,A,r);--A;break}else if(--A<l)break;f(a,h-1,B,c,r);f(v,A+1,N,C,r);h-2-a<=u?t(a,h-2,r):y(a,h-2,r);v-(A+2)<=u?t(A+2,v,r):y(A+2,v,r);A-h<=u?t(h,A,r):y(h,A,r)}g.exports=function(b,f){f<=4*u?t(0,f-1,b):y(0,f-1,b)};var u=32},{}],60:[function(a,g,m){function t(e,d,b,f){f=d[f];b=e[b-1];e[f]=b;d[b]=f}g.exports={init:function(e){e=
b.nextPow2(e);k.length<e&&(n.free(k),k=n.mallocInt32(e));y.length<e&&(n.free(y),y=n.mallocInt32(e));u.length<e&&(n.free(u),u=n.mallocInt32(e));w.length<e&&(n.free(w),w=n.mallocInt32(e));v.length<e&&(n.free(v),v=n.mallocInt32(e));r.length<e&&(n.free(r),r=n.mallocInt32(e));e*=8;h.length<e&&(n.free(h),h=n.mallocDouble(e))},sweepBipartite:function(e,d,b,a,r,n,c,v,g,m){var A=0,B=2*e;--e;for(var N=B-1;b<a;++b){var F=n[b],D=B*b;h[A++]=r[D+e];h[A++]=-(F+1);h[A++]=r[D+N];h[A++]=F}for(b=c;b<v;++b)F=m[b]+p,
a=B*b,h[A++]=g[a+e],h[A++]=-F,h[A++]=g[a+N],h[A++]=F;v=A>>>1;f(h,v);for(b=m=g=0;b<v;++b)if(A=h[2*b+1]|0,A>=p)A=A-p|0,t(u,w,m--,A);else if(0<=A)t(k,y,g--,A);else{if(A<=-p){A=-A-p|0;for(B=0;B<g;++B)if(a=d(k[B],A),void 0!==a)return a;B=w;a=m++;u[a]=A}else{A=-A-1|0;for(B=0;B<m;++B)if(a=d(A,u[B]),void 0!==a)return a;B=y;a=g++;k[a]=A}B[A]=a}},sweepComplete:function(e,d,b,a,p,n,c,g,m,H){var A=0,B=2*e;--e;for(var N=B-1;b<a;++b){var F=n[b]+1<<1,D=B*b;h[A++]=p[D+e];h[A++]=-F;h[A++]=p[D+N];h[A++]=F}for(b=c;b<
g;++b)F=H[b]+1<<1,a=B*b,h[A++]=m[a+e],h[A++]=-F|1,h[A++]=m[a+N],h[A++]=F|1;g=A>>>1;f(h,g);for(b=A=H=m=0;b<g;++b)if(B=h[2*b+1]|0,a=B&1,b<g-1&&B>>1===h[2*b+3]>>1&&(a=2,b+=1),0>B){B=-(B>>1)-1;for(p=0;p<A;++p)if(n=d(v[p],B),void 0!==n)return n;if(0!==a)for(p=0;p<m;++p)if(n=d(k[p],B),void 0!==n)return n;if(1!==a)for(p=0;p<H;++p)if(n=d(u[p],B),void 0!==n)return n;0===a?(a=y,p=m++,k[p]=B,a[B]=p):1===a?(a=w,p=H++,u[p]=B,a[B]=p):2===a&&(a=r,p=A++,v[p]=B,a[B]=p)}else B=(B>>1)-1,0===a?t(k,y,m--,B):1===a?t(u,
w,H--,B):2===a&&t(v,r,A--,B)},scanBipartite:function(e,d,b,a,r,n,c,v,u,g,w,m){var N=0,F=2*e,D=d+e,P=1,L=1;for(a?L=p:P=p;r<n;++r){var J=r+P,O=F*r;h[N++]=c[O+d];h[N++]=-J;h[N++]=c[O+D];h[N++]=J}for(r=u;r<g;++r)J=r+L,n=F*r,h[N++]=w[n+d],h[N++]=-J;g=N>>>1;f(h,g);for(r=N=0;r<g;++r)if(J=h[2*r+1]|0,0>J)if(J=-J,L=!1,J>=p?(L=!a,J-=p):(L=!!a,--J),L)L=y,n=N++,k[n]=J,L[J]=n;else a:for(L=m[J],J*=F,n=w[J+d+1],u=w[J+d+1+e],D=0;D<N;++D){var O=k[D],G=F*O;if(!(u<c[G+d+1]||c[G+d+1+e]<n)){for(var I=d+2;I<e;++I)if(w[J+
I+e]<c[G+I]||c[G+I+e]<w[J+I])continue a;O=v[O];O=a?b(L,O):b(O,L);if(void 0!==O)return O}}else t(k,y,N--,J-P)},scanComplete:function(e,d,b,a,r,n,c,v,u,y,g){for(var t=0,w=2*e,m=d+e;a<r;++a){var D=a+p,P=w*a;h[t++]=n[P+d];h[t++]=-D;h[t++]=n[P+m];h[t++]=D}for(a=v;a<u;++a)D=a+1,r=w*a,h[t++]=y[r+d],h[t++]=-D;u=t>>>1;f(h,u);for(a=t=0;a<u;++a)if(r=h[2*a+1]|0,0>r)if(D=-r,D>=p)k[t++]=D-p;else a:for(--D,r=g[D],D*=w,m=y[D+d+1],P=y[D+d+1+e],v=0;v<t;++v){var L=k[v],J=c[L];if(J===r)break;L*=w;if(!(P<n[L+d+1]||n[L+
d+1+e]<m)){for(var O=d+2;O<e;++O)if(y[D+O+e]<n[L+O]||n[L+O+e]<y[D+O])continue a;J=b(J,r);if(void 0!==J)return J}}else{D=r-p;for(v=t-1;0<=v;--v)if(k[v]===D){for(O=v+1;O<t;++O)k[O-1]=k[O];break}--t}}};var n=a("typedarray-pool"),b=a("bit-twiddle"),f=a("./sort"),p=268435456,k=n.mallocInt32(1024),y=n.mallocInt32(1024),u=n.mallocInt32(1024),w=n.mallocInt32(1024),v=n.mallocInt32(1024),r=n.mallocInt32(1024),h=n.mallocDouble(8192)},{"./sort":59,"bit-twiddle":53,"typedarray-pool":122}],61:[function(a,g,m){(function(g){function n(){try{var c=
new Uint8Array(1);c.foo=function(){return 42};return 42===c.foo()&&"function"===typeof c.subarray&&0===c.subarray(1,1).byteLength}catch(d){return!1}}function b(c,d){if((f.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<d)throw new RangeError("Invalid typed array length");f.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(d),c.__proto__=f.prototype):(null===c&&(c=new f(d)),c.length=d);return c}function f(c,d,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(c,d,e);if("number"===typeof c){if("string"===
typeof d)throw Error("If encoding is specified then the first argument must be a string");return y(this,c)}return p(this,c,d,e)}function p(c,d,e,a){if("number"===typeof d)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer){d.byteLength;if(0>e||d.byteLength<e)throw new RangeError("'offset' is out of bounds");if(d.byteLength<e+(a||0))throw new RangeError("'length' is out of bounds");d=void 0===a?new Uint8Array(d,e):new Uint8Array(d,
e,a);f.TYPED_ARRAY_SUPPORT?(c=d,c.__proto__=f.prototype):c=u(c,d);return c}if("string"===typeof d){a=c;if("string"!==typeof e||""===e)e="utf8";if(!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');c=r(d,e)|0;a=b(a,c);a.write(d,e);return a}return w(c,d)}function k(c){if("number"!==typeof c)throw new TypeError('"size" argument must be a number');}function y(c,d){k(d);c=b(c,0>d?0:v(d)|0);if(!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<d;e++)c[e]=0;return c}function u(c,d){var e=
v(d.length)|0;c=b(c,e);for(var f=0;f<e;f+=1)c[f]=d[f]&255;return c}function w(c,d){if(f.isBuffer(d)){var e=v(d.length)|0;c=b(c,e);if(0===c.length)return c;d.copy(c,0,0,e);return c}if(d){if("undefined"!==typeof ArrayBuffer&&d.buffer instanceof ArrayBuffer||"length"in d)return(e="number"!==typeof d.length)||(e=d.length,e=e!==e),e?b(c,0):u(c,d);if("Buffer"===d.type&&L(d.data))return u(c,d.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function v(c){if(c>=(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(f.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return c|0}function r(c,d){if(f.isBuffer(c))return c.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;"string"!==typeof c&&(c=""+c);var e=c.length;if(0===e)return 0;for(var b=!1;;)switch(d){case "ascii":case "binary":case "raw":case "raws":return e;
case "utf8":case "utf-8":case void 0:return B(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return D.toByteArray(A(c)).length;default:if(b)return B(c).length;d=(""+d).toLowerCase();b=!0}}function h(c,d,e){var b=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;d>>>=0;if(e<=d)return"";for(c||(c="utf8");;)switch(c){case "hex":c=d;d=e;e=this.length;if(!c||0>c)c=0;
if(!d||0>d||d>e)d=e;b="";for(e=c;e<d;e++)c=b,b=this[e],b=16>b?"0"+b.toString(16):b.toString(16),b=c+b;return b;case "utf8":case "utf-8":return q(this,d,e);case "ascii":c="";for(e=Math.min(this.length,e);d<e;d++)c+=String.fromCharCode(this[d]&127);return c;case "binary":c="";for(e=Math.min(this.length,e);d<e;d++)c+=String.fromCharCode(this[d]);return c;case "base64":return d=0===d&&e===this.length?D.fromByteArray(this):D.fromByteArray(this.slice(d,e)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
this.slice(d,e);e="";for(c=0;c<d.length;c+=2)e+=String.fromCharCode(d[c]+256*d[c+1]);return e;default:if(b)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase();b=!0}}function e(c,d,e){var b=c[d];c[d]=c[e];c[e]=b}function d(c,d,e,b){function f(c,d){return 1===a?c[d]:c.readUInt16BE(d*a)}var a=1,h=c.length,l=d.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>c.length||2>d.length)return-1;a=2;h/=2;l/=2;e/=2}b=-1;for(var q=0;e+
q<h;q++)if(f(c,e+q)===f(d,-1===b?0:q-b)){if(-1===b&&(b=q),q-b+1===l)return(e+b)*a}else-1!==b&&(q-=q-b),b=-1;return-1}function q(c,d,e){e=Math.min(c.length,e);for(var b=[];d<e;){var f=c[d],a=null,h=239<f?4:223<f?3:191<f?2:1;if(d+h<=e){var l,q,k;switch(h){case 1:128>f&&(a=f);break;case 2:l=c[d+1];128===(l&192)&&(f=(f&31)<<6|l&63,127<f&&(a=f));break;case 3:l=c[d+1];q=c[d+2];128===(l&192)&&128===(q&192)&&(f=(f&15)<<12|(l&63)<<6|q&63,2047<f&&(55296>f||57343<f)&&(a=f));break;case 4:l=c[d+1],q=c[d+2],k=
c[d+3],128===(l&192)&&128===(q&192)&&128===(k&192)&&(f=(f&15)<<18|(l&63)<<12|(q&63)<<6|k&63,65535<f&&1114112>f&&(a=f))}}null===a?(a=65533,h=1):65535<a&&(a-=65536,b.push(a>>>10&1023|55296),a=56320|a&1023);b.push(a);d+=h}c=b.length;if(c<=J)b=String.fromCharCode.apply(String,b);else{e="";for(d=0;d<c;)e+=String.fromCharCode.apply(String,b.slice(d,d+=J));b=e}return b}function l(c,d,e){if(0!==c%1||0>c)throw new RangeError("offset is not uint");if(c+d>e)throw new RangeError("Trying to access beyond buffer length");
}function z(c,d,e,b,a,h){if(!f.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>a||d<h)throw new RangeError('"value" argument is out of bounds');if(e+b>c.length)throw new RangeError("Index out of range");}function E(c,d,e,b){0>d&&(d=65535+d+1);for(var f=0,a=Math.min(c.length-e,2);f<a;f++)c[e+f]=(d&255<<8*(b?f:1-f))>>>8*(b?f:1-f)}function c(c,d,e,b){0>d&&(d=4294967295+d+1);for(var f=0,a=Math.min(c.length-e,4);f<a;f++)c[e+f]=d>>>8*(b?f:3-f)&255}function x(c,d,e,b,
f,a){if(e+b>c.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function C(c,d,e,b,f){f||x(c,d,e,4,3.4028234663852886E38,-3.4028234663852886E38);P.write(c,d,e,b,23,4);return e+4}function H(c,d,e,b,f){f||x(c,d,e,8,1.7976931348623157E308,-1.7976931348623157E308);P.write(c,d,e,b,52,8);return e+8}function A(c){c=c.trim?c.trim():c.replace(/^\s+|\s+$/g,"");c=c.replace(O,"");if(2>c.length)return"";for(;0!==c.length%4;)c+="=";return c}function B(c,d){d=d||
Infinity;for(var e,b=c.length,f=null,a=[],h=0;h<b;h++){e=c.charCodeAt(h);if(55295<e&&57344>e){if(!f){if(56319<e){-1<(d-=3)&&a.push(239,191,189);continue}else if(h+1===b){-1<(d-=3)&&a.push(239,191,189);continue}f=e;continue}if(56320>e){-1<(d-=3)&&a.push(239,191,189);f=e;continue}e=(f-55296<<10|e-56320)+65536}else f&&-1<(d-=3)&&a.push(239,191,189);f=null;if(128>e){if(0>--d)break;a.push(e)}else if(2048>e){if(0>(d-=2))break;a.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(d-=3))break;a.push(e>>12|224,
e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(d-=4))break;a.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return a}function N(c){for(var d=[],e=0;e<c.length;e++)d.push(c.charCodeAt(e)&255);return d}function F(c,d,e,b){for(var f=0;f<b&&!(f+e>=d.length||f>=c.length);f++)d[f+e]=c[f];return f}var D=a("base64-js"),P=a("ieee754"),L=a("isarray");m.Buffer=f;m.SlowBuffer=function(c){+c!=c&&(c=0);return f.alloc(+c)};m.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=void 0!==
g.TYPED_ARRAY_SUPPORT?g.TYPED_ARRAY_SUPPORT:n();m.kMaxLength=f.TYPED_ARRAY_SUPPORT?2147483647:1073741823;f.poolSize=8192;f._augment=function(c){c.__proto__=f.prototype;return c};f.from=function(c,d,e){return p(null,c,d,e)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&($jscomp.initSymbol(),Object.defineProperty(f,Symbol.species,
{value:null,configurable:!0})));f.alloc=function(c,d,e){k(c);c=0>=c?b(null,c):void 0!==d?"string"===typeof e?b(null,c).fill(d,e):b(null,c).fill(d):b(null,c);return c};f.allocUnsafe=function(c){return y(null,c)};f.allocUnsafeSlow=function(c){return y(null,c)};f.isBuffer=function(c){return!(null==c||!c._isBuffer)};f.compare=function(c,d){if(!f.isBuffer(c)||!f.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(c===d)return 0;for(var e=c.length,b=d.length,a=0,h=Math.min(e,b);a<h;++a)if(c[a]!==
d[a]){e=c[a];b=d[a];break}return e<b?-1:b<e?1:0};f.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(c,d){if(!L(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return f.alloc(0);var e;if(void 0===d)for(e=d=0;e<c.length;e++)d+=c[e].length;var b=f.allocUnsafe(d),a=0;for(e=
0;e<c.length;e++){var h=c[e];if(!f.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(b,a);a+=h.length}return b};f.byteLength=r;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<c;d+=2)e(this,d,d+1);return this};f.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<c;d+=
4)e(this,d,d+3),e(this,d+1,d+2);return this};f.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?q(this,0,c):h.apply(this,arguments)};f.prototype.equals=function(c){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===f.compare(this,c)};f.prototype.inspect=function(){var c="",d=m.INSPECT_MAX_BYTES;0<this.length&&(c=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(c+=" ... "));return"<Buffer "+c+">"};f.prototype.compare=
function(c,d,e,b,a){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");void 0===d&&(d=0);void 0===e&&(e=c?c.length:0);void 0===b&&(b=0);void 0===a&&(a=this.length);if(0>d||e>c.length||0>b||a>this.length)throw new RangeError("out of range index");if(b>=a&&d>=e)return 0;if(b>=a)return-1;if(d>=e)return 1;d>>>=0;e>>>=0;b>>>=0;a>>>=0;if(this===c)return 0;var h=a-b,l=e-d,q=Math.min(h,l);b=this.slice(b,a);c=c.slice(d,e);for(d=0;d<q;++d)if(b[d]!==c[d]){h=b[d];l=c[d];break}return h<l?-1:l<
h?1:0};f.prototype.indexOf=function(c,e,b){"string"===typeof e?(b=e,e=0):2147483647<e?e=2147483647:-2147483648>e&&(e=-2147483648);e>>=0;if(0===this.length||e>=this.length)return-1;0>e&&(e=Math.max(this.length+e,0));"string"===typeof c&&(c=f.from(c,b));if(f.isBuffer(c))return 0===c.length?-1:d(this,c,e,b);if("number"===typeof c)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,c,e):d(this,[c],e,b);throw new TypeError("val must be string, number or Buffer");
};f.prototype.includes=function(c,d,e){return-1!==this.indexOf(c,d,e)};f.prototype.write=function(c,d,e,b){if(void 0===d)b="utf8",e=this.length,d=0;else if(void 0===e&&"string"===typeof d)b=d,e=this.length,d=0;else if(isFinite(d))d|=0,isFinite(e)?(e|=0,void 0===b&&(b="utf8")):(b=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-d;if(void 0===e||e>f)e=f;if(0<c.length&&(0>e||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(f=!1;;)switch(b){case "hex":a:{d=Number(d)||0;b=this.length-d;e?(e=Number(e),e>b&&(e=b)):e=b;b=c.length;if(0!==b%2)throw Error("Invalid hex string");e>b/2&&(e=b/2);for(b=0;b<e;b++){f=parseInt(c.substr(2*b,2),16);if(isNaN(f)){c=b;break a}this[d+b]=f}c=b}return c;case "utf8":case "utf-8":return F(B(c,this.length-d),this,d,e);case "ascii":return F(N(c),this,d,e);case "binary":return F(N(c),this,d,e);case "base64":return F(D.toByteArray(A(c)),this,d,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=
this.length-d;for(var a=void 0,a=f=void 0,h=[],l=0;l<c.length&&!(0>(b-=2));l++)a=c.charCodeAt(l),f=a>>8,a%=256,h.push(a),h.push(f);return F(h,this,d,e);default:if(f)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();f=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;f.prototype.slice=function(c,d){var e=this.length;c=~~c;d=void 0===d?e:~~d;0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);0>d?(d+=e,0>d&&(d=0)):d>e&&(d=e);d<c&&(d=
c);if(f.TYPED_ARRAY_SUPPORT)e=this.subarray(c,d),e.__proto__=f.prototype;else for(var b=d-c,e=new f(b,void 0),a=0;a<b;a++)e[a]=this[a+c];return e};f.prototype.readUIntLE=function(c,d,e){c|=0;d|=0;e||l(c,d,this.length);e=this[c];for(var b=1,f=0;++f<d&&(b*=256);)e+=this[c+f]*b;return e};f.prototype.readUIntBE=function(c,d,e){c|=0;d|=0;e||l(c,d,this.length);e=this[c+--d];for(var b=1;0<d&&(b*=256);)e+=this[c+--d]*b;return e};f.prototype.readUInt8=function(c,d){d||l(c,1,this.length);return this[c]};f.prototype.readUInt16LE=
function(c,d){d||l(c,2,this.length);return this[c]|this[c+1]<<8};f.prototype.readUInt16BE=function(c,d){d||l(c,2,this.length);return this[c]<<8|this[c+1]};f.prototype.readUInt32LE=function(c,d){d||l(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};f.prototype.readUInt32BE=function(c,d){d||l(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};f.prototype.readIntLE=function(c,d,e){c|=0;d|=0;e||l(c,d,this.length);e=this[c];for(var b=1,f=0;++f<
d&&(b*=256);)e+=this[c+f]*b;e>=128*b&&(e-=Math.pow(2,8*d));return e};f.prototype.readIntBE=function(c,d,e){c|=0;d|=0;e||l(c,d,this.length);e=d;for(var b=1,f=this[c+--e];0<e&&(b*=256);)f+=this[c+--e]*b;f>=128*b&&(f-=Math.pow(2,8*d));return f};f.prototype.readInt8=function(c,d){d||l(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};f.prototype.readInt16LE=function(c,d){d||l(c,2,this.length);var e=this[c]|this[c+1]<<8;return e&32768?e|4294901760:e};f.prototype.readInt16BE=function(c,d){d||
l(c,2,this.length);var e=this[c+1]|this[c]<<8;return e&32768?e|4294901760:e};f.prototype.readInt32LE=function(c,d){d||l(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};f.prototype.readInt32BE=function(c,d){d||l(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};f.prototype.readFloatLE=function(c,d){d||l(c,4,this.length);return P.read(this,c,!0,23,4)};f.prototype.readFloatBE=function(c,d){d||l(c,4,this.length);return P.read(this,c,!1,23,4)};f.prototype.readDoubleLE=
function(c,d){d||l(c,8,this.length);return P.read(this,c,!0,52,8)};f.prototype.readDoubleBE=function(c,d){d||l(c,8,this.length);return P.read(this,c,!1,52,8)};f.prototype.writeUIntLE=function(c,d,e,b){c=+c;d|=0;e|=0;b||z(this,c,d,e,Math.pow(2,8*e)-1,0);b=1;var f=0;for(this[d]=c&255;++f<e&&(b*=256);)this[d+f]=c/b&255;return d+e};f.prototype.writeUIntBE=function(c,d,e,b){c=+c;d|=0;e|=0;b||z(this,c,d,e,Math.pow(2,8*e)-1,0);b=e-1;var f=1;for(this[d+b]=c&255;0<=--b&&(f*=256);)this[d+b]=c/f&255;return d+
e};f.prototype.writeUInt8=function(c,d,e){c=+c;d|=0;e||z(this,c,d,1,255,0);f.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[d]=c&255;return d+1};f.prototype.writeUInt16LE=function(c,d,e){c=+c;d|=0;e||z(this,c,d,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):E(this,c,d,!0);return d+2};f.prototype.writeUInt16BE=function(c,d,e){c=+c;d|=0;e||z(this,c,d,2,65535,0);f.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):E(this,c,d,!1);return d+2};f.prototype.writeUInt32LE=function(d,e,b){d=
+d;e|=0;b||z(this,d,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e+3]=d>>>24,this[e+2]=d>>>16,this[e+1]=d>>>8,this[e]=d&255):c(this,d,e,!0);return e+4};f.prototype.writeUInt32BE=function(d,e,b){d=+d;e|=0;b||z(this,d,e,4,4294967295,0);f.TYPED_ARRAY_SUPPORT?(this[e]=d>>>24,this[e+1]=d>>>16,this[e+2]=d>>>8,this[e+3]=d&255):c(this,d,e,!1);return e+4};f.prototype.writeIntLE=function(c,d,e,b){c=+c;d|=0;b||(b=Math.pow(2,8*e-1),z(this,c,d,e,b-1,-b));b=0;var f=1,a=0;for(this[d]=c&255;++b<e&&(f*=256);)0>c&&
0===a&&0!==this[d+b-1]&&(a=1),this[d+b]=(c/f>>0)-a&255;return d+e};f.prototype.writeIntBE=function(c,d,e,b){c=+c;d|=0;b||(b=Math.pow(2,8*e-1),z(this,c,d,e,b-1,-b));b=e-1;var f=1,a=0;for(this[d+b]=c&255;0<=--b&&(f*=256);)0>c&&0===a&&0!==this[d+b+1]&&(a=1),this[d+b]=(c/f>>0)-a&255;return d+e};f.prototype.writeInt8=function(c,d,e){c=+c;d|=0;e||z(this,c,d,1,127,-128);f.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[d]=c&255;return d+1};f.prototype.writeInt16LE=function(c,d,e){c=+c;d|=0;
e||z(this,c,d,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[d]=c&255,this[d+1]=c>>>8):E(this,c,d,!0);return d+2};f.prototype.writeInt16BE=function(c,d,e){c=+c;d|=0;e||z(this,c,d,2,32767,-32768);f.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c&255):E(this,c,d,!1);return d+2};f.prototype.writeInt32LE=function(d,e,b){d=+d;e|=0;b||z(this,d,e,4,2147483647,-2147483648);f.TYPED_ARRAY_SUPPORT?(this[e]=d&255,this[e+1]=d>>>8,this[e+2]=d>>>16,this[e+3]=d>>>24):c(this,d,e,!0);return e+4};f.prototype.writeInt32BE=
function(d,e,b){d=+d;e|=0;b||z(this,d,e,4,2147483647,-2147483648);0>d&&(d=4294967295+d+1);f.TYPED_ARRAY_SUPPORT?(this[e]=d>>>24,this[e+1]=d>>>16,this[e+2]=d>>>8,this[e+3]=d&255):c(this,d,e,!1);return e+4};f.prototype.writeFloatLE=function(c,d,e){return C(this,c,d,!0,e)};f.prototype.writeFloatBE=function(c,d,e){return C(this,c,d,!1,e)};f.prototype.writeDoubleLE=function(c,d,e){return H(this,c,d,!0,e)};f.prototype.writeDoubleBE=function(c,d,e){return H(this,c,d,!1,e)};f.prototype.copy=function(c,d,
e,b){e||(e=0);b||0===b||(b=this.length);d>=c.length&&(d=c.length);d||(d=0);0<b&&b<e&&(b=e);if(b===e||0===c.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);c.length-d<b-e&&(b=c.length-d+e);var a=b-e;if(this===c&&e<d&&d<b)for(b=a-1;0<=b;b--)c[b+d]=this[b+e];else if(1E3>a||!f.TYPED_ARRAY_SUPPORT)for(b=
0;b<a;b++)c[b+d]=this[b+e];else Uint8Array.prototype.set.call(c,this.subarray(e,e+a),d);return a};f.prototype.fill=function(c,d,e,b){if("string"===typeof c){"string"===typeof d?(b=d,d=0,e=this.length):"string"===typeof e&&(b=e,e=this.length);if(1===c.length){var a=c.charCodeAt(0);256>a&&(c=a)}if(void 0!==b&&"string"!==typeof b)throw new TypeError("encoding must be a string");if("string"===typeof b&&!f.isEncoding(b))throw new TypeError("Unknown encoding: "+b);}else"number"===typeof c&&(c&=255);if(0>
d||this.length<d||this.length<e)throw new RangeError("Out of range index");if(e<=d)return this;d>>>=0;e=void 0===e?this.length:e>>>0;c||(c=0);if("number"===typeof c)for(b=d;b<e;b++)this[b]=c;else for(c=f.isBuffer(c)?c:B((new f(c,b)).toString()),a=c.length,b=0;b<e-d;b++)this[b+d]=c[b%a];return this};var O=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":34,ieee754:82,isarray:88}],62:[function(a,g,
m){function t(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function n(b,f){return b[0]-f[0]||b[1]-f[1]}function b(b,f,a){return f in b?b[f]:a}var f=a("./lib/monotone"),p=a("./lib/triangulation"),k=a("./lib/delaunay"),y=a("./lib/filter");g.exports=function(a,g,v){Array.isArray(g)?(v=v||{},g=g||[]):(v=g||{},g=[]);var r=!!b(v,"delaunay",!0),h=!!b(v,"interior",!0),e=!!b(v,"exterior",!0);v=!!b(v,"infinity",!1);if(!h&&!e||0===a.length)return[];var d=f(a,g);if(r||h!==e||v){g=p(a.length,g.map(t).sort(n));
for(var q=0;q<d.length;++q){var l=d[q];g.addTriangle(l[0],l[1],l[2])}r&&k(a,g);return e?h?v?y(g,0,v):g.cells():y(g,1,v):y(g,-1)}return d}},{"./lib/delaunay":63,"./lib/filter":64,"./lib/monotone":65,"./lib/triangulation":66}],63:[function(a,g,m){function t(b,f,a,k,g,u){var t=f.opposite(k,g);if(!(0>t)){if(g<k){var v=k;k=g;g=v;v=u;u=t;t=v}f.isConstraint(k,g)||0>n(b[k],b[g],b[u],b[t])&&a.push(k,g)}}var n=a("robust-in-sphere")[4];a("binary-search-bounds");g.exports=function(b,f){for(var a=[],k=b.length,
g=f.stars,u=0;u<k;++u)for(var w=g[u],v=1;v<w.length;v+=2){var r=w[v];if(!(r<u||f.isConstraint(u,r))){for(var h=w[v-1],e=-1,d=1;d<w.length;d+=2)if(w[d-1]===r){e=w[d];break}0>e||0>n(b[u],b[r],b[h],b[e])&&a.push(u,r)}}for(;0<a.length;){r=a.pop();u=a.pop();e=h=-1;w=g[u];for(k=1;k<w.length;k+=2)v=w[k-1],d=w[k],v===r?e=d:d===r&&(h=v);0>h||0>e||0<=n(b[u],b[r],b[h],b[e])||(f.flip(u,r),t(b,f,a,h,u,e),t(b,f,a,u,e,h),t(b,f,a,e,r,h),t(b,f,a,r,h,e))}}},{"binary-search-bounds":52,"robust-in-sphere":103}],64:[function(a,
g,m){function t(b,a,k,n,g,t,v){this.cells=b;this.neighbor=a;this.flags=n;this.constraint=k;this.active=g;this.next=t;this.boundary=v}function n(b,a){return b[0]-a[0]||b[1]-a[1]||b[2]-a[2]}var b=a("binary-search-bounds");g.exports=function(b,a,k){for(var g=b.cells(),u=g.length,w=0;w<u;++w){var v=g[w],r=v[0],h=v[1],e=v[2];h<e?h<r&&(v[0]=h,v[1]=e,v[2]=r):e<r&&(v[0]=e,v[1]=r,v[2]=h)}g.sort(n);for(var d=Array(u),w=0;w<d.length;++w)d[w]=0;var q=[],l=[],z=Array(3*u),m=Array(3*u),c=null;k&&(c=[]);e=new t(g,
z,m,d,q,l,c);for(w=0;w<u;++w)for(var v=g[w],x=0;3>x;++x){var r=v[x],h=v[(x+1)%3],C=z[3*w+x]=e.locate(h,r,b.opposite(h,r)),H=m[3*w+x]=b.isConstraint(r,h);0>C&&(H?l.push(w):(q.push(w),d[w]=1),k&&c.push([h,r,-1]))}if(0===a)return k?e.cells.concat(e.boundary):e.cells;u=1;w=e.active;v=e.next;b=e.flags;g=e.cells;r=e.constraint;for(h=e.neighbor;0<w.length||0<v.length;){for(;0<w.length;)if(d=w.pop(),b[d]!==-u)for(b[d]=u,q=0;3>q;++q)l=h[3*d+q],0<=l&&0===b[l]&&(r[3*d+q]?v.push(l):(w.push(l),b[l]=u));d=v;v=
w;w=d;v.length=0;u=-u}for(w=u=0;w<g.length;++w)b[w]===a&&(g[u++]=g[w]);g.length=u;return k?g.concat(e.boundary):g};t.prototype.locate=function(){var f=[0,0,0];return function(a,k,g){var u=a,t=k,v=g;k<g?k<a&&(u=k,t=g,v=a):g<a&&(u=g,t=a,v=k);if(0>u)return-1;f[0]=u;f[1]=t;f[2]=v;return b.eq(this.cells,f,n)}}()},{"binary-search-bounds":52}],65:[function(a,g,m){function t(b,f,a,k,h){this.a=b;this.b=f;this.idx=a;this.lowerIds=k;this.upperIds=h}function n(b,f,a,k){this.a=b;this.b=f;this.type=a;this.idx=
k}function b(b,f){var a=b.a[0]-f.a[0]||b.a[1]-f.a[1]||b.type-f.type;return a||0!==b.type&&(a=y(b.a,b.b,f.b))?a:b.idx-f.idx}function f(b,f){return y(b.a,b.b,f)}function p(b,f){var a;return(a=b.a[0]<f.a[0]?y(b.a,b.b,f.a):y(f.b,f.a,b.a))?a:(a=f.b[0]<b.b[0]?y(b.a,b.b,f.b):y(f.b,f.a,b.b))||b.idx-f.idx}var k=a("binary-search-bounds"),y=a("robust-orientation")[3];g.exports=function(a,g){for(var v=a.length,r=g.length,h=[],e=0;e<v;++e)h.push(new n(a[e],null,0,e));for(e=0;e<r;++e){var d=g[e],v=a[d[0]],d=a[d[1]];
v[0]<d[0]?h.push(new n(v,d,2,e),new n(d,v,1,e)):v[0]>d[0]&&h.push(new n(d,v,2,e),new n(v,d,1,e))}h.sort(b);e=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52);r=[new t([e,1],[e,0],-1,[],[],[],[])];v=[];e=0;for(d=h.length;e<d;++e){var q=h[e],l=q.type;if(0===l)for(var l=v,z=r,m=a,c=q.a,q=q.idx,x=k.lt(z,c,f),C=k.gt(z,c,f);x<C;++x){for(var H=z[x],A=H.lowerIds,B=A.length;1<B&&0<y(m[A[B-2]],m[A[B-1]],c);)l.push([A[B-1],A[B-2],q]),--B;A.length=B;A.push(q);H=H.upperIds;for(B=H.length;1<B&&0>y(m[H[B-2]],m[H[B-
1]],c);)l.push([H[B-2],H[B-1],q]),--B;H.length=B;H.push(q)}else 2===l?(l=r,z=q,m=k.le(l,z,p),c=l[m],q=c.upperIds,C=q[q.length-1],c.upperIds=[C],l.splice(m+1,0,new t(z.a,z.b,z.idx,[C],q))):(l=r,z=q,m=z.a,z.a=z.b,z.b=m,z=k.eq(l,z,p),l[z-1].upperIds=l[z].upperIds,l.splice(z,1))}return v}},{"binary-search-bounds":52,"robust-orientation":104}],66:[function(a,g,m){function t(b,a){this.stars=b;this.edges=a}function n(b,a,k){for(var n=1,g=b.length;n<g;n+=2)if(b[n-1]===a&&b[n]===k){b[n-1]=b[g-2];b[n]=b[g-
1];b.length=g-2;break}}var b=a("binary-search-bounds");g.exports=function(b,a){for(var k=Array(b),n=0;n<b;++n)k[n]=[];return new t(k,a)};a=t.prototype;a.isConstraint=function(){function f(b,a){return b[0]-a[0]||b[1]-a[1]}var a=[0,0];return function(k,n){a[0]=Math.min(k,n);a[1]=Math.max(k,n);return 0<=b.eq(this.edges,a,f)}}();a.removeTriangle=function(b,a,k){var g=this.stars;n(g[b],a,k);n(g[a],k,b);n(g[k],b,a)};a.addTriangle=function(b,a,k){var n=this.stars;n[b].push(a,k);n[a].push(k,b);n[k].push(b,
a)};a.opposite=function(b,a){for(var k=this.stars[a],n=1,g=k.length;n<g;n+=2)if(k[n]===b)return k[n-1];return-1};a.flip=function(b,a){var k=this.opposite(b,a),n=this.opposite(a,b);this.removeTriangle(b,a,k);this.removeTriangle(a,b,n);this.addTriangle(b,n,k);this.addTriangle(a,k,n)};a.edges=function(){for(var b=this.stars,a=[],k=0,n=b.length;k<n;++k)for(var g=b[k],t=0,v=g.length;t<v;t+=2)a.push([g[t],g[t+1]]);return a};a.cells=function(){for(var b=this.stars,a=[],k=0,n=b.length;k<n;++k)for(var g=b[k],
t=0,v=g.length;t<v;t+=2){var r=g[t],h=g[t+1];k<Math.min(r,h)&&a.push([k,r,h])}return a}},{"binary-search-bounds":52}],67:[function(a,g,m){function t(b){var c=d(b);b=e(h(c),b);return 0>b?[c,l(c,Infinity)]:0<b?[l(c,-Infinity),c]:[c,c]}function n(d,c,e){var b=[];v(e,function(e,a){var f=c[e],h=c[a];f[0]!==h[0]&&f[0]!==h[1]&&f[1]!==h[0]&&f[1]!==h[1]&&r(d[f[0]],d[f[1]],d[h[0]],d[h[1]])&&b.push([e,a])});return b}function b(d,c,e,b){var a=[];v(e,b,function(e,b){var f=c[e];if(f[0]!==b&&f[1]!==b){var h=d[b];
r(d[f[0]],d[f[1]],h,h)&&a.push([e,b])}});return a}function f(d,c,b,a,f){function l(c){if(c>=d.length)return k[c-d.length];c=d[c];return[h(c[0]),h(c[1])]}for(var k=[],p=0;p<b.length;++p){var n=b[p],r=n[0],n=n[1],g=c[r],v=c[n];if(g=z(q(d[g[0]]),q(d[g[1]]),q(d[v[0]]),q(d[v[1]])))v=k.length+d.length,k.push(g),a.push([r,v],[n,v])}a.sort(function(c,d){if(c[0]!==d[0])return c[0]-d[0];var b=l(c[1]),a=l(d[1]);return e(b[0],a[0])||e(b[1],a[1])});for(p=a.length-1;0<=p;--p){n=a[p];r=n[0];g=c[r];v=g[0];b=g[1];
var t=d[v],u=d[b];0>(t[0]-u[0]||t[1]-u[1])&&(t=v,v=b,b=t);g[0]=v;var v=g[1]=n[1],y;for(f&&(y=g[2]);0<p&&a[p-1][0]===r;)n=a[--p],n=n[1],f?c.push([v,n,y]):c.push([v,n]),v=n;f?c.push([v,b,y]):c.push([v,b])}return k}function p(e,c,b){for(var a=e.length+c.length,f=new w(a),h=0;h<c.length;++h){var l=c[h],q=t(l[0]),k=t(l[1]);b.push([q[0],k[0],q[1],k[1]]);e.push([d(l[0]),d(l[1])])}v(b,function(c,d){f.link(c,d)});c=0;b=!0;l=Array(a);for(h=0;h<a;++h)f.find(h)===h?(l[h]=c,e[c++]=e[h]):(b=!1,l[h]=-1);e.length=
c;if(b)return null;for(h=0;h<a;++h)0>l[h]&&(l[h]=l[f.find(h)]);return l}function k(d,c){return d[0]-c[0]||d[1]-c[1]}function y(d,c){var e=d[0]-c[0]||d[1]-c[1];return e?e:d[2]<c[2]?-1:d[2]>c[2]?1:0}function u(d,c,e){for(var a=Array(c.length),h=0;h<c.length;++h){var l=c[h],q=d[l[0]],l=d[l[1]];a[h]=[Math.min(q[0],l[0]),Math.min(q[1],l[1]),Math.max(q[0],l[0]),Math.max(q[1],l[1])]}h=n(d,c,a);q=Array(d.length);for(l=0;l<d.length;++l){var r=d[l];q[l]=[r[0],r[1],r[0],r[1]]}a=b(d,c,a,q);l=f(d,c,h,a,e);d=p(d,
l,q);if(0!==c.length){if(d)for(q=0;q<c.length;++q){var l=c[q],r=d[l[0]],g=d[l[1]];l[0]=Math.min(r,g);l[1]=Math.max(r,g)}else for(q=0;q<c.length;++q)l=c[q],r=l[0],g=l[1],l[0]=Math.min(r,g),l[1]=Math.max(r,g);e?c.sort(y):c.sort(k);for(q=l=1;q<c.length;++q)if(r=c[q-1],g=c[q],g[0]!==r[0]||g[1]!==r[1]||e&&g[2]!==r[2])c[l++]=g;c.length=l}return d?!0:0<h.length||0<a.length}g.exports=function(d,c,e){var b=!1,a;if(e){a=c;for(var f=Array(c.length),h=0;h<c.length;++h){var l=c[h];f[h]=[l[0],l[1],e[h]]}c=f}for(;u(d,
c,!!e);)b=!0;if(e&&b)for(a.length=0,h=e.length=0;h<c.length;++h)l=c[h],a.push([l[0],l[1]]),e.push(l[2]);return b};var w=a("union-find"),v=a("box-intersect");a("compare-cell");var r=a("robust-segment-intersect"),h=a("big-rat"),e=a("big-rat/cmp"),d=a("big-rat/to-float"),q=a("rat-vec"),l=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":68,"big-rat":38,"big-rat/cmp":36,"big-rat/to-float":51,"box-intersect":54,"compare-cell":70,nextafter:91,"rat-vec":100,"robust-segment-intersect":107,
"union-find":123}],68:[function(a,g,m){function t(b,a){return f(n(b[0],a[1]),n(b[1],a[0]))}g.exports=function(a,f,n,h){f=k(f,a);var e=k(h,n);h=t(f,e);if(0===p(h))return null;n=k(a,n);n=t(e,n);n=b(n,h);return y(a,u(f,n))};var n=a("big-rat/mul"),b=a("big-rat/div"),f=a("big-rat/sub"),p=a("big-rat/sign"),k=a("rat-vec/sub"),y=a("rat-vec/add"),u=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":37,"big-rat/mul":47,"big-rat/sign":49,"big-rat/sub":50,"big-rat/to-float":51,"rat-vec/add":99,"rat-vec/muls":101,
"rat-vec/sub":102}],69:[function(a,g,m){function t(b,a,n){var g=f(b[0],-a[0]);b=f(b[1],-a[1]);var r=f(n[0],-a[0]);a=f(n[1],-a[1]);g=k(p(g,r),p(b,a));return 0<=g[g.length-1]}g.exports=function(a,f,k,p){var r=n(f,k,p);if(0===r){var r=b(n(a,f,k)),h=b(n(a,f,p));return r===h?0===r&&(k=t(a,f,k),a=t(a,f,p),k!==a)?k?1:-1:0:0===h?0<r?-1:t(a,f,p)?-1:1:0===r?0<h?1:t(a,f,k)?1:-1:b(h-r)}h=n(a,f,k);return 0<h?0<r&&0<n(a,f,p)?1:-1:0>h?0<r||0<n(a,f,p)?1:-1:0<n(a,f,p)?1:t(a,f,k)?1:-1};var n=a("robust-orientation"),
b=a("signum"),f=a("two-sum"),p=a("robust-product"),k=a("robust-sum")},{"robust-orientation":104,"robust-product":105,"robust-sum":109,signum:110,"two-sum":121}],70:[function(a,g,m){function t(b,a){return b-a}g.exports=function(b,a){var p=b.length,k=b.length-a.length;if(k)return k;switch(p){case 0:return 0;case 1:return b[0]-a[0];case 2:return b[0]+b[1]-a[0]-a[1]||n(b[0],b[1])-n(a[0],a[1]);case 3:var p=b[0]+b[1],g=a[0]+a[1];if(k=p+b[2]-(g+a[2]))return k;var k=n(b[0],b[1]),u=n(a[0],a[1]);return n(k,
b[2])-n(u,a[2])||n(k+b[2],p)-n(u+a[2],g);case 4:var k=b[0],p=b[1],g=b[2],u=b[3],m=a[0],v=a[1],r=a[2],h=a[3];return k+p+g+u-(m+v+r+h)||n(k,p,g,u)-n(m,v,r,h,m)||n(k+p,k+g,k+u,p+g,p+u,g+u)-n(m+v,m+r,m+h,v+r,v+h,r+h)||n(k+p+g,k+p+u,k+g+u,p+g+u)-n(m+v+r,m+v+h,m+r+h,v+r+h);default:g=b.slice().sort(t);u=a.slice().sort(t);for(m=0;m<p;++m)if(k=g[m]-u[m])return k;return 0}};var n=Math.min},{}],71:[function(a,g,m){function t(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=
[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=a("./lib/thunk.js");g.exports=function(b){var a=new t;a.pre=b.pre;a.body=b.body;a.post=b.post;var p=b.args.slice(0);a.argTypes=p;for(var k=0;k<p.length;++k){var g=p[k];if("array"===g||"object"===typeof g&&g.blockIndices){a.argTypes[k]="array";a.arrayArgs.push(k);a.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);a.shimArgs.push("array"+k);if(k<
a.pre.args.length&&0<a.pre.args[k].count)throw Error("cwise: pre() block may not reference array args");if(k<a.post.args.length&&0<a.post.args[k].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)a.scalarArgs.push(k),a.shimArgs.push("scalar"+k);else if("index"===g){a.indexArgs.push(k);if(k<a.pre.args.length&&0<a.pre.args[k].count)throw Error("cwise: pre() block may not reference array index");if(k<a.body.args.length&&a.body.args[k].lvalue)throw Error("cwise: body() block may not write to array index");
if(k<a.post.args.length&&0<a.post.args[k].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){a.shapeArgs.push(k);if(k<a.pre.args.length&&a.pre.args[k].lvalue)throw Error("cwise: pre() block may not write to array shape");if(k<a.body.args.length&&a.body.args[k].lvalue)throw Error("cwise: body() block may not write to array shape");if(k<a.post.args.length&&a.post.args[k].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===
typeof g&&g.offset)a.argTypes[k]="offset",a.offsetArgs.push({array:g.array,offset:g.offset}),a.offsetArgIndex.push(k);else throw Error("cwise: Unknown argument type "+p[k]);}if(0>=a.arrayArgs.length)throw Error("cwise: No array arguments specified");if(a.pre.args.length>p.length)throw Error("cwise: Too many arguments in pre() block");if(a.body.args.length>p.length)throw Error("cwise: Too many arguments in body() block");if(a.post.args.length>p.length)throw Error("cwise: Too many arguments in post() block");
a.debug=!!b.printCode||!!b.debug;a.funcName=b.funcName||"cwise";a.blockSize=b.blockSize||64;return n(a)}},{"./lib/thunk.js":73}],72:[function(a,g,m){function t(b,a,f){var n=b.length,p=a.arrayArgs.length;a=0<a.indexArgs.length;var r=[],h=[],e=0,d=0,q,l;for(q=0;q<n;++q)h.push(["i",q,"=0"].join(""));for(l=0;l<p;++l)for(q=0;q<n;++q)d=e,e=b[q],0===q?h.push(["d",l,"s",q,"=t",l,"p",e].join("")):h.push(["d",l,"s",q,"=(t",l,"p",e,"-s",d,"*t",l,"p",d,")"].join(""));r.push("var "+h.join(","));for(q=n-1;0<=q;--q)e=
b[q],r.push(["for(i",q,"=0;i",q,"<s",e,";++i",q,"){"].join(""));r.push(f);for(q=0;q<n;++q){d=e;e=b[q];for(l=0;l<p;++l)r.push(["p",l,"+=d",l,"s",q].join(""));a&&(0<q&&r.push(["index[",d,"]-=s",d].join("")),r.push(["++index[",e,"]"].join("")));r.push("}")}return r.join("\n")}function n(b,a,f,n){for(var p=a.length,r=f.arrayArgs.length,h=f.blockSize,e=0<f.indexArgs.length,d=[],q=0;q<r;++q)d.push(["var offset",q,"=p",q].join(""));for(q=b;q<p;++q)d.push(["for(var j"+q+"=SS[",a[q],"]|0;j",q,">0;){"].join("")),
d.push(["if(j",q,"<",h,"){"].join("")),d.push(["s",a[q],"=j",q].join("")),d.push(["j",q,"=0"].join("")),d.push(["}else{s",a[q],"=",h].join("")),d.push(["j",q,"-=",h,"}"].join("")),e&&d.push(["index[",a[q],"]=j",q].join(""));for(q=0;q<r;++q){h=["offset"+q];for(e=b;e<p;++e)h.push(["j",e,"*t",q,"p",a[e]].join(""));d.push(["p",q,"=(",h.join("+"),")"].join(""))}d.push(t(a,f,n));for(q=b;q<p;++q)d.push("}");return d.join("\n")}function b(b,a,f){for(var n=b.body,p=[],r=[],h=0;h<b.args.length;++h){var e=b.args[h];
if(!(0>=e.count)){var d=new RegExp(e.name,"g"),q="",l=a.arrayArgs.indexOf(h);switch(a.argTypes[h]){case "offset":var g=a.offsetArgIndex.indexOf(h),l=a.offsetArgs[g].array,q="+q"+g;case "array":var q="p"+l+q,t="l"+h,g="a"+l;if(0===a.arrayBlockIndices[l])1===e.count?"generic"===f[l]?e.lvalue?(p.push(["var ",t,"=",g,".get(",q,")"].join("")),n=n.replace(d,t),r.push([g,".set(",q,",",t,")"].join(""))):n=n.replace(d,[g,".get(",q,")"].join("")):n=n.replace(d,[g,"[",q,"]"].join("")):"generic"===f[l]?(p.push(["var ",
t,"=",g,".get(",q,")"].join("")),n=n.replace(d,t),e.lvalue&&r.push([g,".set(",q,",",t,")"].join(""))):(p.push(["var ",t,"=",g,"[",q,"]"].join("")),n=n.replace(d,t),e.lvalue&&r.push([g,"[",q,"]=",t].join("")));else{d=[e.name];e=[q];for(q=0;q<Math.abs(a.arrayBlockIndices[l]);q++)d.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(q+1)+"*t"+l+"b"+q);d=new RegExp(d.join(""),"g");q=e.join("+");if("generic"===f[l])throw Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(d,[g,"[",
q,"]"].join(""))}break;case "scalar":n=n.replace(d,"Y"+a.scalarArgs.indexOf(h));break;case "index":n=n.replace(d,"index");break;case "shape":n=n.replace(d,"shape")}}}return[p.join("\n"),n,r.join("\n")].join("\n").trim()}function f(b){for(var a=Array(b.length),f=!0,n=0;n<b.length;++n){var p=b[n],r=p.match(/\d+/),r=r?r[0]:"";0===p.charAt(0)?a[n]="u"+p.charAt(1)+r:a[n]=p.charAt(0)+r;0<n&&(f=f&&a[n]===a[n-1])}return f?a[0]:a.join("")}var p=a("uniq");g.exports=function(a,g){for(var m=g[1].length-Math.abs(a.arrayBlockIndices[0])|
0,w=Array(a.arrayArgs.length),v=Array(a.arrayArgs.length),r=0;r<a.arrayArgs.length;++r)v[r]=g[2*r],w[r]=g[2*r+1];for(var h=[],e=[],d=[],q=[],l=[],r=0;r<a.arrayArgs.length;++r){0>a.arrayBlockIndices[r]?(d.push(0),q.push(m),h.push(m),e.push(m+a.arrayBlockIndices[r])):(d.push(a.arrayBlockIndices[r]),q.push(a.arrayBlockIndices[r]+m),h.push(0),e.push(a.arrayBlockIndices[r]));for(var z=[],E=0;E<w[r].length;E++)d[r]<=w[r][E]&&w[r][E]<q[r]&&z.push(w[r][E]-d[r]);l.push(z)}e=["SS"];q=["'use strict'"];z=[];
for(E=0;E<m;++E)z.push(["s",E,"=SS[",E,"]"].join(""));for(r=0;r<a.arrayArgs.length;++r){e.push("a"+r);e.push("t"+r);e.push("p"+r);for(E=0;E<m;++E)z.push(["t",r,"p",E,"=t",r,"[",d[r]+E,"]"].join(""));for(E=0;E<Math.abs(a.arrayBlockIndices[r]);++E)z.push(["t",r,"b",E,"=t",r,"[",h[r]+E,"]"].join(""))}for(r=0;r<a.scalarArgs.length;++r)e.push("Y"+r);0<a.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<a.indexArgs.length){E=Array(m);for(r=0;r<m;++r)E[r]="0";z.push(["index=[",E.join(","),"]"].join(""))}for(r=
0;r<a.offsetArgs.length;++r){h=a.offsetArgs[r];d=[];for(E=0;E<h.offset.length;++E)0!==h.offset[E]&&(1===h.offset[E]?d.push(["t",h.array,"p",E].join("")):d.push([h.offset[E],"*t",h.array,"p",E].join("")));0===d.length?z.push("q"+r+"=0"):z.push(["q",r,"=",d.join("+")].join(""))}r=p([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));z=z.concat(r);q.push("var "+z.join(","));for(r=0;r<a.arrayArgs.length;++r)q.push("p"+r+"|=0");3<a.pre.body.length&&q.push(b(a.pre,a,v));r=b(a.body,
a,v);a:for(E=0,z=l[0].length;E<z;){for(h=1;h<l.length;++h)if(l[h][E]!==l[0][E])break a;++E}E<m?q.push(n(E,l[0],a,r)):q.push(t(l[0],a,r));3<a.post.body.length&&q.push(b(a.post,a,v));a.debug&&console.log("-----Generated cwise routine for ",g,":\n"+q.join("\n")+"\n----------");m=[a.funcName||"unnamed","_cwise_loop_",w[0].join("s"),"m",E,f(v)].join("");return(new Function(["function ",m,"(",e.join(","),"){",q.join("\n"),"} return ",m].join("")))()}},{uniq:124}],73:[function(a,g,m){var t=a("./compile.js");
g.exports=function(a){var b=["'use strict'","var CACHED={}"],f=[];b.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var p=[],k=[],g=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],m=[],w=[],v=0;v<a.arrayArgs.length;++v){var r=a.arrayArgs[v];f.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));p.push("t"+r);p.push("r"+r);k.push("t"+r);k.push("r"+
r+".join()");g.push("array"+r+".data");g.push("array"+r+".stride");g.push("array"+r+".offset|0");0<v&&(m.push("array"+a.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[v]))),w.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[v])+"]"))}1<a.arrayArgs.length&&(b.push("if (!("+m.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+w.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(v=0;v<a.scalarArgs.length;++v)g.push("scalar"+a.scalarArgs[v]);f.push(["type=[",k.join(","),"].join()"].join(""));f.push("proc=CACHED[type]");b.push("var "+f.join(","));b.push(["if(!proc){CACHED[type]=proc=compile([",p.join(","),"])}return proc(",g.join(","),
")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");return(new Function("compile",b.join("\n")))(t.bind(void 0,a))}},{"./compile.js":72}],74:[function(a,g,m){(function(a){var n=!1;if("undefined"!==typeof Float64Array){var b=new Float64Array(1),f=new Uint32Array(b.buffer);b[0]=1;n=!0;1072693248===f[1]?(g.exports=function(a){b[0]=a;return[f[0],f[1]]},g.exports.pack=function(a,p){f[0]=a;f[1]=p;return b[0]},g.exports.lo=function(a){b[0]=a;return f[0]},g.exports.hi=
function(a){b[0]=a;return f[1]}):1072693248===f[0]?(g.exports=function(a){b[0]=a;return[f[1],f[0]]},g.exports.pack=function(a,p){f[1]=a;f[0]=p;return b[0]},g.exports.lo=function(a){b[0]=a;return f[1]},g.exports.hi=function(a){b[0]=a;return f[0]}):n=!1}if(!n){var p=new a(8);g.exports=function(b){p.writeDoubleLE(b,0,!0);return[p.readUInt32LE(0,!0),p.readUInt32LE(4,!0)]};g.exports.pack=function(b,a){p.writeUInt32LE(b,0,!0);p.writeUInt32LE(a,4,!0);return p.readDoubleLE(0,!0)};g.exports.lo=function(b){p.writeDoubleLE(b,
0,!0);return p.readUInt32LE(0,!0)};g.exports.hi=function(b){p.writeDoubleLE(b,0,!0);return p.readUInt32LE(4,!0)}}g.exports.sign=function(b){return g.exports.hi(b)>>>31};g.exports.exponent=function(b){return(g.exports.hi(b)<<1>>>21)-1023};g.exports.fraction=function(b){var a=g.exports.lo(b);b=g.exports.hi(b);var f=b&1048575;b&2146435072&&(f+=1048576);return[a,f]};g.exports.denormalized=function(b){return!(g.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:61}],75:[function(a,g,m){function t(a,
b,f){var p=a[f]|0;if(0>=p)return[];var k=Array(p),g;if(f===a.length-1)for(g=0;g<p;++g)k[g]=b;else for(g=0;g<p;++g)k[g]=t(a,b,f+1);return k}g.exports=function(a,b){"undefined"===typeof b&&(b=0);switch(typeof a){case "number":if(0<a){var f=a|0,p=b,k,g;k=Array(f);for(g=0;g<f;++g)k[g]=p;return k}break;case "object":if("number"===typeof a.length)return t(a,b,0)}return[]}},{}],76:[function(a,g,m){g.exports=function(a,b){var f=a.length;if("number"!==typeof b){for(var p=b=0;p<f;++p){var k=a[p];b=Math.max(b,
k[0],k[1])}b=(b|0)+1}b|=0;for(var g=Array(b),p=0;p<b;++p)g[p]=[];for(p=0;p<f;++p)k=a[p],g[k[0]].push(k[1]),g[k[1]].push(k[0]);for(f=0;f<b;++f)t(g[f],function(b,a){return b-a});return g};var t=a("uniq")},{uniq:124}],77:[function(a,g,m){function t(b,e,d,a,f,p){this._color=b;this.key=e;this.value=d;this.left=a;this.right=f;this._count=p}function n(b){return new t(b._color,b.key,b.value,b.left,b.right,b._count)}function b(b,e){return new t(b,e.key,e.value,e.left,e.right,e._count)}function f(b){b._count=
1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function p(b,e){this._compare=b;this.root=e}function k(b,e){if(e.left){var d=k(b,e.left);if(d)return d}if(d=b(e.key,e.value))return d;if(e.right)return k(b,e.right)}function y(b,e,d,a){if(0>=e(b,a.key)){if(a.left){var f=y(b,e,d,a.left);if(f)return f}if(f=d(a.key,a.value))return f}if(a.right)return y(b,e,d,a.right)}function u(b,e,d,a,f){var p=d(b,f.key),n=d(e,f.key);if(0>=p&&(f.left&&(p=u(b,e,d,a,f.left))||0<n&&(p=a(f.key,f.value))))return p;if(0<
n&&f.right)return u(b,e,d,a,f.right)}function w(b,e){this.tree=b;this._stack=e}function v(b,e){b.key=e.key;b.value=e.value;b.left=e.left;b.right=e.right;b._color=e._color;b._count=e._count}function r(b,e){return b<e?-1:b>e?1:0}g.exports=function(b){return new p(b||r,null)};a=p.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(e,d){b.push(e)});return b}});Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(e,d){b.push(d)});return b}});
Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,e){for(var d=this._compare,q=this.root,l=[],n=[];q;){var k=d(a,q.key);l.push(q);n.push(k);q=0>=k?q.left:q.right}l.push(new t(0,a,e,null,null,1));for(k=l.length-2;0<=k;--k)q=l[k],l[k]=0>=n[k]?new t(q._color,q.key,q.value,l[k+1],q.right,q._count+1):new t(q._color,q.key,q.value,q.left,l[k+1],q._count+1);for(k=l.length-1;1<k;--k){n=l[k-1];q=l[k];if(1===n._color||1===q._color)break;var c=l[k-2];
if(c.left===n)if(n.left===q){var g=c.right;if(g&&0===g._color)n._color=1,c.right=b(1,g),c._color=0,--k;else{c._color=0;c.left=n.right;n._color=1;n.right=c;l[k-2]=n;l[k-1]=q;f(c);f(n);3<=k&&(k=l[k-3],k.left===c?k.left=n:k.right=n);break}}else if((g=c.right)&&0===g._color)n._color=1,c.right=b(1,g),c._color=0,--k;else{n.right=q.left;c._color=0;c.left=q.right;q._color=1;q.left=n;q.right=c;l[k-2]=q;l[k-1]=n;f(c);f(n);f(q);3<=k&&(k=l[k-3],k.left===c?k.left=q:k.right=q);break}else if(n.right===q)if((g=c.left)&&
0===g._color)n._color=1,c.left=b(1,g),c._color=0,--k;else{c._color=0;c.right=n.left;n._color=1;n.left=c;l[k-2]=n;l[k-1]=q;f(c);f(n);3<=k&&(k=l[k-3],k.right===c?k.right=n:k.left=n);break}else if((g=c.left)&&0===g._color)n._color=1,c.left=b(1,g),c._color=0,--k;else{n.left=q.right;c._color=0;c.right=q.left;q._color=1;q.right=n;q.left=c;l[k-2]=q;l[k-1]=n;f(c);f(n);f(q);3<=k&&(k=l[k-3],k.right===c?k.right=q:k.left=q);break}}l[0]._color=1;return new p(d,l[0])};a.forEach=function(b,e,d){if(this.root)switch(arguments.length){case 1:return k(b,
this.root);case 2:return y(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,d)))return u(e,d,this._compare,b,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new w(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.right;return new w(this,b)}});a.at=function(b){if(0>b)return new w(this,[]);for(var e=this.root,d=[];;){d.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=
e.left._count}if(!b)return new w(this,d);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new w(this,[])};a.ge=function(b){for(var e=this._compare,d=this.root,a=[],f=0;d;){var k=e(b,d.key);a.push(d);0>=k&&(f=a.length);d=0>=k?d.left:d.right}a.length=f;return new w(this,a)};a.gt=function(b){for(var e=this._compare,d=this.root,a=[],f=0;d;){var k=e(b,d.key);a.push(d);0>k&&(f=a.length);d=0>k?d.left:d.right}a.length=f;return new w(this,a)};a.lt=function(b){for(var e=this._compare,
d=this.root,a=[],f=0;d;){var k=e(b,d.key);a.push(d);0<k&&(f=a.length);d=0>=k?d.left:d.right}a.length=f;return new w(this,a)};a.le=function(b){for(var e=this._compare,d=this.root,a=[],f=0;d;){var k=e(b,d.key);a.push(d);0<=k&&(f=a.length);d=0>k?d.left:d.right}a.length=f;return new w(this,a)};a.find=function(b){for(var e=this._compare,d=this.root,a=[];d;){var f=e(b,d.key);a.push(d);if(0===f)return new w(this,a);d=0>=f?d.left:d.right}return new w(this,[])};a.remove=function(b){return(b=this.find(b))?
b.remove():this};a.get=function(b){for(var e=this._compare,d=this.root;d;){var a=e(b,d.key);if(0===a)return d.value;d=0>=a?d.left:d.right}};a=w.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new w(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),d=a[a.length-1];e[e.length-1]=new t(d._color,d.key,d.value,d.left,d.right,d._count);for(var q=a.length-2;0<=q;--q)d=a[q],e[q]=d.left===a[q+1]?new t(d._color,d.key,d.value,e[q+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,e[q+1],d._count);d=e[e.length-1];if(d.left&&d.right){a=e.length;for(d=d.left;d.right;)e.push(d),d=d.right;q=e[a-1];e.push(new t(d._color,q.key,q.value,d.left,d.right,d._count));e[a-1].key=d.key;e[a-1].value=d.value;for(q=e.length-2;q>=a;--q)d=e[q],e[q]=
new t(d._color,d.key,d.value,d.left,e[q+1],d._count);e[a-1].left=e[a]}d=e[e.length-1];if(0===d._color)for(q=e[e.length-2],q.left===d?q.left=null:q.right===d&&(q.right=null),e.pop(),q=0;q<e.length;++q)e[q]._count--;else if(d.left||d.right)for(d.left?v(d,d.left):d.right&&v(d,d.right),d._color=1,q=0;q<e.length-1;++q)e[q]._count--;else{if(1===e.length)return new p(this.tree._compare,null);for(q=0;q<e.length;++q)e[q]._count--;for(var q=e[e.length-2],l,k,g,c=e.length-1;0<=c;--c){a=e[c];if(0===c){a._color=
1;break}l=e[c-1];if(l.left===a){k=l.right;if(k.right&&0===k.right._color){k=l.right=n(k);g=k.right=n(k.right);l.right=k.left;k.left=l;k.right=g;k._color=l._color;a._color=1;l._color=1;g._color=1;f(l);f(k);if(1<c){var r=e[c-2];r.left===l?r.left=k:r.right=k}e[c-1]=k;break}else if(k.left&&0===k.left._color){k=l.right=n(k);g=k.left=n(k.left);l.right=g.left;k.left=g.right;g.left=l;g.right=k;g._color=l._color;l._color=1;k._color=1;a._color=1;f(l);f(k);f(g);1<c&&(r=e[c-2],r.left===l?r.left=g:r.right=g);
e[c-1]=g;break}if(1===k._color)if(0===l._color){l._color=1;l.right=b(0,k);break}else l.right=b(0,k);else k=n(k),l.right=k.left,k.left=l,k._color=l._color,l._color=0,f(l),f(k),1<c&&(r=e[c-2],r.left===l?r.left=k:r.right=k),e[c-1]=k,e[c]=l,c+1<e.length?e[c+1]=a:e.push(a),c+=2}else{k=l.left;if(k.left&&0===k.left._color){k=l.left=n(k);g=k.left=n(k.left);l.left=k.right;k.right=l;k.left=g;k._color=l._color;a._color=1;l._color=1;g._color=1;f(l);f(k);1<c&&(r=e[c-2],r.right===l?r.right=k:r.left=k);e[c-1]=k;
break}else if(k.right&&0===k.right._color){k=l.left=n(k);g=k.right=n(k.right);l.left=g.right;k.right=g.left;g.right=l;g.left=k;g._color=l._color;l._color=1;k._color=1;a._color=1;f(l);f(k);f(g);1<c&&(r=e[c-2],r.right===l?r.right=g:r.left=g);e[c-1]=g;break}if(1===k._color)if(0===l._color){l._color=1;l.left=b(0,k);break}else l.left=b(0,k);else k=n(k),l.left=k.right,k.right=l,k._color=l._color,l._color=0,f(l),f(k),1<c&&(r=e[c-2],r.right===l?r.right=k:r.left=k),e[c-1]=k,e[c]=l,c+1<e.length?e[c+1]=a:e.push(a),
c+=2}}q.left===d?q.left=null:q.right=null}return new p(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=0,e=this._stack;if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-
1].left._count);for(var d=e.length-2;0<=d;--d)e[d+1]===e[d].right&&(++b,e[d].left&&(b+=e[d].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===
b[e])return!0;return!1}});a.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var d=Array(e.length),a=e[e.length-1];d[d.length-1]=new t(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],d[b]=a.left===e[b+1]?new t(a._color,a.key,a.value,d[b+1],a.right,a._count):new t(a._color,a.key,a.value,a.left,d[b+1],a._count);return new p(this.tree._compare,d[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=
e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}})},{}],78:[function(a,g,m){function t(a){if(0>a)return Number("0/0");for(var n=b[0],k=b.length-1;0<k;--k)n+=b[k]/(a+k);k=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(k)-k+Math.log(n)-
Math.log(a)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],b=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
g.exports=function p(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*p(1-b));if(100<b)return Math.exp(t(b));--b;for(var a=n[0],g=1;9>g;g++)a+=n[g]/(b+g);g=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,b+.5)*Math.exp(-g)*a};g.exports.log=t},{}],79:[function(a,g,m){g.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],80:[function(a,g,m){var t=a("./identity");g.exports=function(a,b,f,g){var k,m,u,w,v,
r,h,e,d=b[0],q=b[1];b=b[2];u=g[0];w=g[1];m=g[2];h=f[0];g=f[1];k=f[2];if(1E-6>Math.abs(d-h)&&1E-6>Math.abs(q-g)&&1E-6>Math.abs(b-k))return t(a);f=d-h;g=q-g;h=b-k;e=1/Math.sqrt(f*f+g*g+h*h);f*=e;g*=e;h*=e;k=w*h-m*g;m=m*f-u*h;u=u*g-w*f;(e=Math.sqrt(k*k+m*m+u*u))?(e=1/e,k*=e,m*=e,u*=e):u=m=k=0;w=g*u-h*m;v=h*k-f*u;r=f*m-g*k;(e=Math.sqrt(w*w+v*v+r*r))?(e=1/e,w*=e,v*=e,r*=e):r=v=w=0;a[0]=k;a[1]=w;a[2]=f;a[3]=0;a[4]=m;a[5]=v;a[6]=g;a[7]=0;a[8]=u;a[9]=r;a[10]=h;a[11]=0;a[12]=-(k*d+m*q+u*b);a[13]=-(w*d+v*q+
r*b);a[14]=-(f*d+g*q+h*b);a[15]=1;return a}},{"./identity":79}],81:[function(a,g,m){g.exports=function(a,g,b,f,p){g=1/Math.tan(g/2);var k=1/(f-p);a[0]=g/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(p+f)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*p*f*k;a[15]=0;return a}},{}],82:[function(a,g,m){m.read=function(a,g,b,f,p){var k;k=8*p-f-1;var m=(1<<k)-1,u=m>>1,w=-7;p=b?p-1:0;var v=b?-1:1,r=a[g+p];p+=v;b=r&(1<<-w)-1;r>>=-w;for(w+=k;0<w;b=256*b+a[g+p],p+=v,w-=8);k=b&(1<<-w)-1;b>>=-w;
for(w+=f;0<w;k=256*k+a[g+p],p+=v,w-=8);if(0===b)b=1-u;else{if(b===m)return k?NaN:Infinity*(r?-1:1);k+=Math.pow(2,f);b-=u}return(r?-1:1)*k*Math.pow(2,b-f)};m.write=function(a,g,b,f,p,k){var m,u=8*k-p-1,w=(1<<u)-1,v=w>>1,r=23===p?Math.pow(2,-24)-Math.pow(2,-77):0;k=f?0:k-1;var h=f?1:-1,e=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,f=w):(f=Math.floor(Math.log(g)/Math.LN2),1>g*(m=Math.pow(2,-f))&&(f--,m*=2),g=1<=f+v?g+r/m:g+r*Math.pow(2,1-v),2<=g*m&&(f++,m/=2),f+v>=w?(g=
0,f=w):1<=f+v?(g=(g*m-1)*Math.pow(2,p),f+=v):(g=g*Math.pow(2,v-1)*Math.pow(2,p),f=0));for(;8<=p;a[b+k]=g&255,k+=h,g/=256,p-=8);f=f<<p|g;for(u+=p;0<u;a[b+k]=f&255,k+=h,f/=256,u-=8);a[b+k-h]|=128*e}},{}],83:[function(a,g,m){function t(d,b,e,a,f){this.mid=d;this.left=b;this.right=e;this.leftPoints=a;this.rightPoints=f;this.count=(b?b.count:0)+(e?e.count:0)+a.length}function n(d,b){d.mid=b.mid;d.left=b.left;d.right=b.right;d.leftPoints=b.leftPoints;d.rightPoints=b.rightPoints;d.count=b.count}function b(d,
b){var e=r(b);d.mid=e.mid;d.left=e.left;d.right=e.right;d.leftPoints=e.leftPoints;d.rightPoints=e.rightPoints;d.count=e.count}function f(d,e){var a=d.intervals([]),f=a.indexOf(e);if(0>f)return 0;a.splice(f,1);b(d,a);return 1}function p(d,b,e){for(var a=0;a<d.length&&d[a][0]<=b;++a){var f=e(d[a]);if(f)return f}}function k(d,b,e){for(var a=d.length-1;0<=a&&d[a][1]>=b;--a){var f=e(d[a]);if(f)return f}}function y(d,b){for(var e=0;e<d.length;++e){var a=b(d[e]);if(a)return a}}function u(d,b){return d-b}
function w(d,b){var e=d[0]-b[0];return e?e:d[1]-b[1]}function v(d,b){var e=d[1]-b[1];return e?e:d[0]-b[0]}function r(d){if(0===d.length)return null;for(var b=[],e=0;e<d.length;++e)b.push(d[e][0],d[e][1]);b.sort(u);for(var b=b[b.length>>1],a=[],f=[],c=[],e=0;e<d.length;++e){var h=d[e];h[1]<b?a.push(h):b<h[0]?f.push(h):c.push(h)}d=c.slice();c.sort(w);d.sort(v);return new t(b,r(a),r(f),c,d)}function h(d){this.root=d}var e=a("binary-search-bounds");g.exports=function(d){return d&&0!==d.length?new h(r(d)):
new h(null)};a=t.prototype;a.intervals=function(d){d.push.apply(d,this.leftPoints);this.left&&this.left.intervals(d);this.right&&this.right.intervals(d);return d};a.insert=function(d){var a=this.count-this.leftPoints.length;this.count+=1;if(d[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(d),b(this,a)):this.left.insert(d):this.left=r([d]);else if(d[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(d),b(this,a)):this.right.insert(d):
this.right=r([d]);else{var a=e.ge(this.leftPoints,d,w),f=e.ge(this.rightPoints,d,v);this.leftPoints.splice(a,0,d);this.rightPoints.splice(f,0,d)}};a.remove=function(d){var b=this.count-this.leftPoints;if(d[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(b-1))return f(this,d);b=this.left.remove(d);if(2===b)return this.left=null,--this.count,1;1===b&&--this.count;return b}if(d[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(b-1))return f(this,d);
b=this.right.remove(d);if(2===b)return this.right=null,--this.count,1;1===b&&--this.count;return b}if(1===this.count)return this.leftPoints[0]===d?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===d){if(this.left&&this.right){d=this;for(var a=this.left;a.right;)d=a,a=a.right;if(d===this)a.right=this.right;else{var h=this.left,b=this.right;d.count-=a.count;d.right=a.left;a.left=h;a.right=b}n(this,a);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(h=e.ge(this.leftPoints,d,w);h<this.leftPoints.length&&this.leftPoints[h][0]===d[0];++h)if(this.leftPoints[h]===d)for(--this.count,this.leftPoints.splice(h,1),b=e.ge(this.rightPoints,d,v);b<this.rightPoints.length&&this.rightPoints[b][1]===d[1];++b)if(this.rightPoints[b]===d)return this.rightPoints.splice(b,1),1;return 0};a.queryPoint=function(d,b){if(d<this.mid){if(this.left){var e=this.left.queryPoint(d,b);if(e)return e}return p(this.leftPoints,d,
b)}return d>this.mid?this.right&&(e=this.right.queryPoint(d,b))?e:k(this.rightPoints,d,b):y(this.leftPoints,b)};a.queryInterval=function(d,b,e){if(d<this.mid&&this.left){var a=this.left.queryInterval(d,b,e);if(a)return a}return b>this.mid&&this.right&&(a=this.right.queryInterval(d,b,e))?a:b<this.mid?p(this.leftPoints,b,e):d>this.mid?k(this.rightPoints,d,e):y(this.leftPoints,e)};a=h.prototype;a.insert=function(d){this.root?this.root.insert(d):this.root=new t(d[0],null,null,[d],[d])};a.remove=function(d){return this.root?
(d=this.root.remove(d),2===d&&(this.root=null),0!==d):!1};a.queryPoint=function(d,b){if(this.root)return this.root.queryPoint(d,b)};a.queryInterval=function(d,b,e){if(d<=b&&this.root)return this.root.queryInterval(d,b,e)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":84}],84:[function(a,g,m){function t(b,a,g,k,n,m){b=["function ",b,"(a,l,h,",
k.join(","),"){",m?"":"var i=",g?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];m?0>a.indexOf("c")?b.push(";if(x===y){return m}else if(x<=y){"):b.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):b.push(";if(",a,"){i=m;");g?b.push("l=m+1}else{h=m-1}"):b.push("h=m-1}else{l=m+1}");b.push("}");m?b.push("return -1};"):b.push("return i};");return b.join("")}function n(b,a,g,k){return(new Function([t("A","x"+b+"y",a,["y"],!1,k),t("B","x"+b+"y",a,["y"],!0,k),t("P","c(x,y)"+b+"0",
a,["y","c"],!1,k),t("Q","c(x,y)"+b+"0",a,["y","c"],!0,k),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",g].join("")))()}g.exports=
{ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],85:[function(a,g,m){g.exports=function(a,g){g=g||Array(a.length);for(var b=0;b<a.length;++b)g[a[b]]=b;return g}},{}],86:[function(a,g,m){g.exports=function(a){for(var g=Array(a),b=0;b<a;++b)g[b]=b;return g}},{}],87:[function(a,g,m){g.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],88:[function(a,g,m){var t=
{}.toString;g.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],89:[function(a,g,m){function t(b,a,f){for(var e=0,d=0;d<b;++d)a&1<<d&&(e|=1<<f[d]);return e}function n(a,g,h,e,d,q){function l(c,b){A.push("for(","i"+d[c],"=",b,";","i"+d[c],"<","s"+d[c],";","++","i"+d[c],"){")}function n(c){for(var b=0;b<x;++b)A.push("p"+b,"+=","u"+b+"_"+d[c],";");A.push("}")}function m(){for(var c=1;c<1<<C;++c)A.push(w,"=","e"+c,";","e"+c,"=","y"+c,";","y"+c,"=",w,";")}function c(b,a){if(0>
b){for(var h=0;h<x;++h)q[h]?A.push("c"+h+"_0","=","d"+h,".get(","p"+h,");"):A.push("c"+h+"_0","=","d"+h,"[","p"+h,"];");for(var g=[],h=0;h<x;++h)g.push("c"+h+"_0");for(h=0;h<e;++h)g.push("x"+h);A.push("b0","=",p,"[",u,"]=phase(",g.join(),");");for(g=1;g<1<<C;++g)A.push("b"+g,"=",p,"[",u,"+","e"+g,"];");h=[];for(g=1;g<1<<C;++g)h.push("(b0!==b"+g+")");A.push("if(",h.join("||"),"){");for(var r=[],h=0;h<C;++h)r.push("i"+h);for(h=0;h<x;++h)for(r.push("c"+h+"_0"),g=1;g<1<<C;++g)q[h]?A.push("c"+h+"_"+g,
"=","d"+h,".get(","p"+h,"+","d"+h+"_"+g,");"):A.push("c"+h+"_"+g,"=","d"+h,"[","p"+h,"+","d"+h+"_"+g,"];"),r.push("c"+h+"_"+g);for(h=0;h<1<<C;++h)r.push("b"+h);for(h=0;h<e;++h)r.push("x"+h);A.push("vertex(",r.join(),");","v0","=",f,"[",u,"]=",k,"++;");h=(1<<C)-1;r="b"+h;for(g=0;g<C;++g)if(0===(a&~(1<<g))){for(var v=h^1<<g,t="b"+v,w=[],y=v;0<y;y=y-1&v)w.push(f+"["+u+"+"+("e"+y)+"]");w.push("v0");for(y=0;y<x;++y)g&1?w.push("c"+y+"_"+h,"c"+y+"_"+v):w.push("c"+y+"_"+v,"c"+y+"_"+h);g&1?w.push(r,t):w.push(t,
r);for(y=0;y<e;++y)w.push("x"+y);A.push("if(",r,"!==",t,"){","face(",w.join(),")}")}A.push("}",u,"+=1;")}else{for(g=b-1;0<=g;--g)l(g,0);h=[];for(g=0;g<x;++g)q[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<e;++g)h.push("x"+g);A.push(p,"[",u,"++]=phase(",h.join(),");");for(g=0;g<b;++g)n(g);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+d[b],";");A.push("if(","s"+d[b],">0){","i"+d[b],"=1;");c(b-1,a|1<<d[b]);for(g=0;g<x;++g)A.push("p"+g,"+=","u"+g+"_"+d[b],";");b===C-1&&(A.push(u,
"=0;"),m());l(b,2);c(b-1,a);b===C-1&&(A.push("if(","i"+d[C-1],"&1){",u,"=0;}"),m());n(b);A.push("}")}}var x=q.length,C=d.length;if(2>C)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var H="extractContour"+d.join("_"),A=[],B=[],N=[],F=0;F<x;++F)N.push("a"+F);for(F=0;F<e;++F)N.push("x"+F);for(F=0;F<C;++F)B.push("s"+F+"=a0.shape["+F+"]|0");for(F=0;F<x;++F){B.push("d"+F+"="+("a"+F)+".data","o"+F+"="+("a"+F)+".offset|0");for(var D=0;D<C;++D)B.push("t"+F+"_"+D+"="+("a"+F)+".stride["+
D+"]|0")}for(F=0;F<x;++F)for(B.push("p"+F+"="+("o"+F)),B.push("c"+F+"_0"),D=1;D<1<<C;++D){for(var P=[],L=0;L<C;++L)D&1<<L&&P.push("-"+("t"+F+"_"+L));B.push("d"+F+"_"+D+"=("+P.join("")+")|0");B.push("c"+F+"_"+D+"=0")}for(F=0;F<x;++F)for(D=0;D<C;++D)L=["t"+F+"_"+d[D]],0<D&&L.push("t"+F+"_"+d[D-1]+"*"+("s"+d[D-1])),B.push("u"+F+"_"+d[D]+"=("+L.join("-")+")|0");for(F=0;F<C;++F)B.push("i"+F+"=0");B.push(k+"=0");D=["2"];for(F=C-2;0<=F;--F)D.push("s"+d[F]);B.push(y+"=("+D.join("*")+")|0",p+"=mallocUint32("+
y+")",f+"=mallocUint32("+y+")",u+"=0");B.push("b0=0");for(D=1;D<1<<C;++D){F=[];P=[];for(L=0;L<C;++L)D&1<<L&&(0===P.length?F.push("1"):F.unshift(P.join("*"))),P.push("s"+d[L]);L="";0>F[0].indexOf("s"+d[C-2])&&(L="-");P=t(C,D,d);B.push("e"+P+"=(-"+F.join("-")+")|0","y"+P+"=("+L+F.join("-")+")|0","b"+P+"=0")}B.push("v0=0",w+"=0");c(C-1,0);A.push("freeUint32(",f,");freeUint32(",p,");");H=["'use strict';function ",H,"(",N.join(),"){var ",B.join(),";",A.join(""),"}return ",H].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",H))(a,g,h,b.mallocUint32,b.freeUint32)}var b=a("typedarray-pool");g.exports=function(b){function a(d){throw Error("ndarray-extract-contour: "+d);}"object"!==typeof b&&a("Must specify arguments");var f=b.order;Array.isArray(f)||a("Must specify order");var e=b.arrayArguments||1;1>e&&a("Must have at least one array argument");var d=b.scalarArguments||0;0>d&&a("Scalar arg count must be > 0");"function"!==typeof b.vertex&&a("Must specify vertex creation function");
"function"!==typeof b.cell&&a("Must specify cell creation function");"function"!==typeof b.phase&&a("Must specify phase function");for(var g=b.getters||[],l=Array(e),k=0;k<e;++k)0<=g.indexOf(k)?l[k]=!0:l[k]=!1;return n(b.vertex,b.cell,b.phase,d,f,l)};var f="V",p="P",k="N",y="Q",u="X",w="T"},{"typedarray-pool":122}],90:[function(a,g,m){function t(b,a){return b[0]-a[0]}function n(){var b=this.stride,a=Array(b.length),f;for(f=0;f<a.length;++f)a[f]=[Math.abs(b[f]),f];a.sort(t);b=Array(a.length);for(f=
0;f<b.length;++f)b[f]=a[f][1];return b}function b(b,a){var f=["View",a,"d",b].join("");0>a&&(f="View_Nil"+b);var h="generic"===b;if(-1===a){var e,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===a)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(u[b][0]);e=["'use strict'"];var d=p(a),g=d.map(function(c){return"i"+c}),l="this.offset+"+d.map(function(c){return"this.stride["+c+"]*i"+c}).join("+"),k=d.map(function(c){return"b"+c}).join(","),m=d.map(function(c){return"c"+c}).join(",");e.push("function "+
f+"(a,"+k+","+m+",d){this.data=a","this.shape=["+k+"]","this.stride=["+m+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+b+"'","proto.dimension="+a);e.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+d.map(function(c){return"this.shape["+c+"]"}).join("*"),"}})");1===a?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>a?(e.push("function "+f+"_order(){"),2===a?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===a&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+f+"_set("+g.join(",")+",v){");h?e.push("return this.data.set("+l+",v)}"):e.push("return this.data["+l+"]=v}");e.push("proto.get=function "+f+"_get("+g.join(",")+"){");h?e.push("return this.data.get("+
l+")}"):e.push("return this.data["+l+"]}");e.push("proto.index=function "+f+"_index(",g.join(),"){return "+l+"}");e.push("proto.hi=function "+f+"_hi("+g.join(",")+"){return new "+f+"(this.data,"+d.map(function(c){return["(typeof i",c,"!=='number'||i",c,"<0)?this.shape[",c,"]:i",c,"|0"].join("")}).join(",")+","+d.map(function(c){return"this.stride["+c+"]"}).join(",")+",this.offset)}");h=d.map(function(c){return"a"+c+"=this.shape["+c+"]"});l=d.map(function(c){return"c"+c+"=this.stride["+c+"]"});e.push("proto.lo=function "+
f+"_lo("+g.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+l.join(","));for(h=0;h<a;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");e.push("return new "+f+"(this.data,"+d.map(function(c){return"a"+c}).join(",")+","+d.map(function(c){return"c"+c}).join(",")+",b)}");e.push("proto.step=function "+f+"_step("+g.join(",")+"){var "+d.map(function(c){return"a"+c+"=this.shape["+c+"]"}).join(",")+","+d.map(function(c){return"b"+c+"=this.stride["+c+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<a;++h)e.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");e.push("return new "+f+"(this.data,"+d.map(function(c){return"a"+c}).join(",")+","+d.map(function(c){return"b"+c}).join(",")+",c)}");l=Array(a);k=Array(a);for(h=0;h<a;++h)l[h]="a[i"+h+"]",k[h]="b[i"+h+"]";e.push("proto.transpose=function "+f+"_transpose("+g+"){"+g.map(function(c,d){return c+"=("+c+"===undefined?"+
d+":"+c+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+l.join(",")+","+k.join(",")+",this.offset)}");e.push("proto.pick=function "+f+"_pick("+g+"){var a=[],b=[],c=this.offset");for(h=0;h<a;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+d.map(function(c){return"shape["+c+"]"}).join(",")+","+d.map(function(c){return"stride["+c+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",e.join("\n"));return f(u[b],n)}function f(b){if(k(b))return"buffer";if(y)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var p=a("iota-array"),k=a("is-buffer"),y="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in u)u[a].push(b(a,-1))});g.exports=function(a,g,k,h){if(void 0===a){var e=u.array[0];return e([])}"number"===
typeof a&&(a=[a]);void 0===g&&(g=[a.length]);e=g.length;if(void 0===k){k=Array(e);for(var d=e-1,q=1;0<=d;--d)k[d]=q,q*=g[d]}if(void 0===h)for(d=h=0;d<e;++d)0>k[d]&&(h-=(g[d]-1)*k[d]);d=f(a);for(q=u[d];q.length<=e+1;)q.push(b(d,q.length-1));e=q[e+1];return e(a,g,k,h)}},{"iota-array":86,"is-buffer":87}],91:[function(a,g,m){var t=a("double-bits"),n=Math.pow(2,-1074);g.exports=function(b,a){if(isNaN(b)||isNaN(a))return NaN;if(b===a)return b;if(0===b)return 0>a?-n:n;var g=t.hi(b),k=t.lo(b);a>b===0<b?4294967295===
k?(g+=1,k=0):k+=1:0===k?(k=4294967295,--g):--k;return t.pack(k,g)}},{"double-bits":74}],92:[function(a,g,m){g.exports=function(b){var a=b.length;if(a<t)for(var g=1,k=0;k<a;++k)for(var m=0;m<k;++m)if(b[k]<b[m])g=-g;else{if(b[k]===b[m])return 0}else{for(var u=n.mallocUint8(a),k=0;k<a;++k)u[k]=0;g=1;for(k=0;k<a;++k)if(!u[k]){var w=1;u[k]=1;for(m=b[k];m!==k;m=b[m]){if(u[m])return n.freeUint8(u),0;w+=1;u[m]=1}w&1||(g=-g)}n.freeUint8(u)}return g};var t=32,n=a("typedarray-pool")},{"typedarray-pool":122}],
93:[function(a,g,m){var t=a("typedarray-pool"),n=a("invert-permutation");m.rank=function(b){var a=b.length;switch(a){case 0:case 1:return 0;case 2:return b[1]}var g=t.mallocUint32(a),k=t.mallocUint32(a),m=0,u;n(b,k);for(u=0;u<a;++u)g[u]=b[u];for(u=a-1;0<u;--u)a=k[u],b=g[u],g[u]=g[a],g[a]=b,k[u]=k[b],k[b]=a,m=(m+b)*u;t.freeUint32(k);t.freeUint32(g);return m};m.unrank=function(b,a,g){switch(b){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(a?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):
a?[0,1]:[1,0]}g=g||Array(b);var k,n,m=1;g[0]=0;for(n=1;n<b;++n)g[n]=n,m=m*n|0;for(n=b-1;0<n;--n)b=a/m|0,a=a-b*m|0,m=m/n|0,k=g[n]|0,g[n]=g[b]|0,g[b]=k|0;return g}},{"invert-permutation":85,"typedarray-pool":122}],94:[function(a,g,m){g.exports=function(a,b){function f(d,b){var a=w[b][d[b]];a.splice(a.indexOf(d),1)}function g(d,a,e){var h,k,c;for(k=0;2>k;++k)if(0<w[k][a].length){h=w[k][a][0];c=k;break}k=h[c^1];for(var n=0;2>n;++n)for(var p=w[n][a],r=0;r<p.length;++r){var m=p[r],v=m[n^1];0<t(b[d],b[a],
b[k],b[v])&&(h=m,k=v,c=n)}if(e)return k;h&&f(h,c);return k}function k(d,a){var e=w[a][d][0],h=[d];f(e,a);for(e=e[a^1];;){for(;e!==d;)h.push(e),e=g(h[h.length-2],e,!1);if(0===w[0][d].length+w[1][d].length)break;var e=h[h.length-1],k=d,c=h[1],n=g(e,k,!0);if(0>t(b[e],b[k],b[c],b[n]))break;h.push(d);e=g(e,k)}return h}for(var m=b.length|0,u=a.length,w=[Array(m),Array(m)],v=0;v<m;++v)w[0][v]=[],w[1][v]=[];for(v=0;v<u;++v){var r=a[v];w[0][r[0]].push(r);w[1][r[1]].push(r)}u=[];for(v=0;v<m;++v)0===w[0][v].length+
w[1][v].length&&u.push([v]);for(v=0;v<m;++v)for(r=0;2>r;++r){for(var h=[];0<w[r][v].length;){var e=k(v,r);e[1]===e[e.length-1]?h.push.apply(h,e):(0<h.length&&u.push(h),h=e)}0<h.length&&u.push(h)}return u};var t=a("compare-angle")},{"compare-angle":69}],95:[function(a,g,m){g.exports=function(a,b){for(var f=t(a,b.length),g=Array(b.length),k=Array(b.length),m=[],u=0;u<b.length;++u){var w=f[u].length;k[u]=w;g[u]=!0;1>=w&&m.push(u)}for(;0<m.length;)for(w=m.pop(),g[w]=!1,w=f[w],u=0;u<w.length;++u){var v=
w[u];0===--k[v]&&m.push(v)}f=Array(b.length);k=[];for(u=0;u<b.length;++u)g[u]?(w=k.length,f[u]=w,k.push(b[u])):f[u]=-1;m=[];for(u=0;u<a.length;++u)w=a[u],g[w[0]]&&g[w[1]]&&m.push([f[w[0]],f[w[1]]]);return[m,k]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":76}],96:[function(a,g,m){function t(b,a){for(var f=Array(b),e=0;e<b;++e)f[e]=a;return f}function n(b){for(var a=Array(b),f=0;f<b;++f)a[f]=[];return a}g.exports=function(a,g){function h(c){for(var d=c.length,b=0;b<d;++b)if(!D[c[b]])return!1;
return!0}var e=w(a,g);a=e[0];g=e[1];for(var d=g.length,q=b(a,g.length),l=0;l<d;++l)if(1===q[l].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var q=f(a,g),q=q.filter(function(c){for(var d=c.length,b=[0],a=0;a<d;++a)var e=g[c[a]],f=g[c[(a+1)%d]],h=k(-e[0],e[1]),l=k(-e[0],f[1]),e=k(f[0],e[1]),f=k(f[0],f[1]),b=y(b,y(y(h,l),y(e,f)));return 0<b[b.length-1]}),e=q.length,m=Array(e),E=Array(e),l=0;l<e;++l){m[l]=l;var c=Array(e),x=q[l].map(function(c){return g[c]}),C=p([x]),H=
0,A=0;a:for(;A<e;++A)if(c[A]=0,l!==A){for(var x=q[A],B=x.length,N=0;N<B;++N){var F=C(g[x[N]]);if(0!==F){0>F&&(c[A]=1,H+=1);continue a}}c[A]=1;H+=1}E[l]=[H,l,c]}E.sort(function(c,d){return d[0]-c[0]});for(l=0;l<e;++l)for(c=E[l],x=c[1],B=c[2],A=0;A<e;++A)B[A]&&(m[A]=x);E=n(e);for(l=0;l<e;++l)E[l].push(m[l]),E[m[l]].push(l);for(var c={},D=t(d,!1),l=0;l<e;++l)for(x=q[l],B=x.length,A=0;A<B;++A)d=x[A],C=x[(A+1)%B],H=Math.min(d,C)+":"+Math.max(d,C),H in c?(H=c[H],E[H].push(l),E[l].push(H),D[d]=D[C]=!0):
c[H]=l;A=[];d=t(e,-1);for(l=0;l<e;++l)m[l]!==l||h(q[l])?d[l]=-1:(A.push(l),d[l]=0);for(e=[];0<A.length;){l=A.pop();m=E[l];u(m,function(c,d){return c-d});var B=m.length,c=d[l],P;0===c&&(x=q[l],P=[x]);for(l=0;l<B;++l)x=m[l],0<=d[x]||(d[x]=c^1,A.push(x),0===c&&(x=q[x],h(x)||(x.reverse(),P.push(x))));0===c&&e.push(P)}return e};var b=a("edges-to-adjacency-list"),f=a("planar-dual"),p=a("point-in-big-polygon"),k=a("two-product"),y=a("robust-sum"),u=a("uniq"),w=a("./lib/trim-leaves")},{"./lib/trim-leaves":95,
"edges-to-adjacency-list":76,"planar-dual":94,"point-in-big-polygon":98,"robust-sum":109,"two-product":120,uniq:124}],97:[function(a,g,m){arguments[4][84][0].apply(m,arguments)},{dup:84}],98:[function(a,g,m){function t(){return!0}function n(b){return function(a,d){var f=b[a];return f?!!f.queryPoint(d,t):!1}}function b(b){for(var a={},d=0;d<b.length;++d){var f=b[d],g=f[0][0],k=f[0][1],f=f[1][1],k=[Math.min(k,f),Math.max(k,f)];g in a?a[g].push(k):a[g]=[k]}b={};g=Object.keys(a);for(d=0;d<g.length;++d)b[g[d]]=
v(a[g[d]]);return n(b)}function f(b,a){return function(d){var f=r.le(a,d[0]);if(0>f)return 1;var g=b[f];if(!g)if(0<f&&a[f]===d[0])g=b[f-1];else return 1;for(f=1;g;){var k=g.key,n=u(d,k[0],k[1]);if(k[0][0]<k[1][0])if(0>n)g=g.left;else if(0<n)f=-1,g=g.right;else return 0;else if(0<n)g=g.left;else if(0>n)f=1,g=g.right;else return 0}return f}}function p(b){return 1}function k(b){return function(a){return b(a[0],a[1])?0:1}}function y(b,a){return function(d){return b(d[0],d[1])?0:a(d)}}g.exports=function(a){for(var e=
a.length,d=[],g=[],l=0;l<e;++l)for(var n=a[l],r=n.length,c=r-1,m=0;m<r;c=m++){var c=n[c],v=n[m];c[0]===v[0]?g.push([c,v]):d.push([c,v])}if(0===d.length)return 0===g.length?p:k(b(g));a=w(d);a=f(a.slabs,a.coordinates);return 0===g.length?a:y(b(g),a)};var u=a("robust-orientation")[3],w=a("slab-decomposition"),v=a("interval-tree-1d"),r=a("binary-search-bounds")},{"binary-search-bounds":97,"interval-tree-1d":83,"robust-orientation":104,"slab-decomposition":117}],99:[function(a,g,m){var t=a("big-rat/add");
g.exports=function(a,b){for(var f=a.length,g=Array(f),k=0;k<f;++k)g[k]=t(a[k],b[k]);return g}},{"big-rat/add":35}],100:[function(a,g,m){g.exports=function(a){for(var b=Array(a.length),f=0;f<a.length;++f)b[f]=t(a[f]);return b};var t=a("big-rat")},{"big-rat":38}],101:[function(a,g,m){var t=a("big-rat"),n=a("big-rat/mul");g.exports=function(b,a){for(var g=t(a),k=b.length,m=Array(k),u=0;u<k;++u)m[u]=n(b[u],g);return m}},{"big-rat":38,"big-rat/mul":47}],102:[function(a,g,m){var t=a("big-rat/sub");g.exports=
function(a,b){for(var f=a.length,g=Array(f),k=0;k<f;++k)g[k]=t(a[k],b[k]);return g}},{"big-rat/sub":50}],103:[function(a,g,m){function t(b,d){for(var a=Array(b.length-1),f=1;f<b.length;++f)for(var h=a[f-1]=Array(b.length-1),g=0,c=0;g<b.length;++g)g!==d&&(h[c++]=b[f][g]);return a}function n(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",n(b.slice(0,d)),",",n(b.slice(d)),")"].join("")}function b(a,d){if("m"===a.charAt(0)){if("w"===
d.charAt(0)){var f=a.split("[");return["w",d.substr(1),"m",f[0].substr(1)].join("")}return["prod(",a,",",d,")"].join("")}return b(d,a)}function f(a){if(2===a.length)return[["diff(",b(a[0][0],a[1][1]),",",b(a[1][0],a[0][1]),")"].join("")];for(var d=[],h=0;h<a.length;++h)d.push(["scale(",n(f(t(a,h))),",",h&1?"-":"",a[0][h],")"].join(""));return d}function p(b,d){for(var a=[],f=0;f<d-2;++f)a.push(["prod(m",b,"[",f,"],m",b,"[",f,"])"].join(""));return n(a)}function k(b){for(var d=[],a=[],h=Array(b),g=
0;g<b;++g){h[g]=Array(b);for(var k=0;k<b;++k)h[g][k]=["m",k,"[",b-g-2,"]"].join("")}for(g=0;g<b;++g)h[0][g]="1",h[b-1][g]="w"+g;for(g=0;g<b;++g)0===(g&1)?d.push.apply(d,f(t(h,g))):a.push.apply(a,f(t(h,g)));d=n(d);a=n(a);h="exactInSphere"+b;k=[];for(g=0;g<b;++g)k.push("m"+g);k=["function ",h,"(",k.join(),"){"];for(g=0;g<b;++g){k.push("var w",g,"=",p(g,b),";");for(var c=0;c<b;++c)c!==g&&k.push("var w",g,"m",c,"=scale(w",g,",m",c,"[0]);")}k.push("var p=",d,",n=",a,",d=diff(p,n);return d[d.length-1];}return ",
h);return(new Function("sum","diff","prod","scale",k.join("")))(w,v,u,r)}function y(b){var d=h[b.length];d||(d=h[b.length]=k(b.length));return d.apply(void 0,b)}var u=a("two-product"),w=a("robust-sum"),v=a("robust-subtract"),r=a("robust-scale"),h=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=h.length;)h.push(k(h.length));for(var b=[],d=["slow"],a=0;6>=a;++a)b.push("a"+a),d.push("o"+a);for(var f=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],
a=2;6>=a;++a)f.push("case ",a,":return o",a,"(",b.slice(0,a).join(),");");f.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");d.push(f.join(""));b=Function.apply(void 0,d);g.exports=b.apply(void 0,[y].concat(h));for(a=0;6>=a;++a)g.exports[a]=h[a]})()},{"robust-scale":106,"robust-subtract":108,"robust-sum":109,"two-product":120}],104:[function(a,g,m){function t(b,d){for(var a=Array(b.length-1),f=1;f<b.length;++f)for(var h=
a[f-1]=Array(b.length-1),g=0,c=0;g<b.length;++g)g!==d&&(h[c++]=b[f][g]);return a}function n(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var d=b.length>>1;return["sum(",n(b.slice(0,d)),",",n(b.slice(d)),")"].join("")}function b(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var d=[],f=0;f<a.length;++f)d.push(["scale(",n(b(t(a,f))),",",f&1?"-":"",a[0][f],")"].join(""));return d}function f(a){for(var d=
[],f=[],h=Array(a),g=0;g<a;++g){h[g]=Array(a);for(var p=0;p<a;++p)h[g][p]=["m",p,"[",a-g-1,"]"].join("")}g=[];for(p=0;p<a;++p)0===(p&1)?d.push.apply(d,b(t(h,p))):f.push.apply(f,b(t(h,p))),g.push("m"+p);d=n(d);f=n(f);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p=",d,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(y,k,u,w)}function p(b){var a=h[b.length];a||(a=h[b.length]=f(b.length));return a.apply(void 0,b)}var k=
a("two-product"),y=a("robust-sum"),u=a("robust-scale"),w=a("robust-subtract"),v=f(3),r=f(4),h=[function(){return 0},function(){return 0},function(b,a){return a[0]-b[0]},function(b,a,f){var h=(b[1]-f[1])*(a[0]-f[0]),g=(b[0]-f[0])*(a[1]-f[1]),k=h-g;if(0<h){if(0>=g)return k;h+=g}else if(0>h){if(0<=g)return k;h=-(h+g)}else return k;h*=3.3306690738754716E-16;return k>=h||k<=-h?k:v(b,a,f)},function(b,a,f,h){var g=b[0]-h[0],k=a[0]-h[0],c=f[0]-h[0],n=b[1]-h[1],p=a[1]-h[1],m=f[1]-h[1],v=b[2]-h[2],t=a[2]-h[2],
u=f[2]-h[2],w=k*m,y=c*p,c=c*n,m=g*m,g=g*p,n=k*n,k=v*(w-y)+t*(c-m)+u*(g-n),v=7.771561172376103E-16*((Math.abs(w)+Math.abs(y))*Math.abs(v)+(Math.abs(c)+Math.abs(m))*Math.abs(t)+(Math.abs(g)+Math.abs(n))*Math.abs(u));return k>v||-k>v?k:r(b,a,f,h)}];(function(){for(;5>=h.length;)h.push(f(h.length));for(var b=[],a=["slow"],k=0;5>=k;++k)b.push("a"+k),a.push("o"+k);for(var l=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"],k=2;5>=k;++k)l.push("case ",k,":return o",
k,"(",b.slice(0,k).join(),");");l.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");a.push(l.join(""));b=Function.apply(void 0,a);g.exports=b.apply(void 0,[p].concat(h));for(k=0;5>=k;++k)g.exports[k]=h[k]})()},{"robust-scale":106,"robust-subtract":108,"robust-sum":109,"two-product":120}],105:[function(a,g,m){var t=a("robust-sum"),n=a("robust-scale");g.exports=function(b,a){if(1===b.length)return n(a,b[0]);if(1===
a.length)return n(b,a[0]);if(0===b.length||0===a.length)return[0];var g=[0];if(b.length<a.length)for(var k=0;k<b.length;++k)g=t(g,n(a,b[k]));else for(k=0;k<a.length;++k)g=t(g,n(b,a[k]));return g}},{"robust-scale":106,"robust-sum":109}],106:[function(a,g,m){var t=a("two-product"),n=a("two-sum");g.exports=function(b,a){var g=b.length;if(1===g)return g=t(b[0],a),g[0]?g:[g[1]];var k=Array(2*g),m=[.1,.1],u=[.1,.1],w=0;t(b[0],a,m);m[0]&&(k[w++]=m[0]);for(var v=1;v<g;++v){t(b[v],a,u);n(m[1],u[0],m);m[0]&&
(k[w++]=m[0]);var r=u[1],h=m[1],e=r+h,r=h-(e-r);m[1]=e;r&&(k[w++]=r)}m[1]&&(k[w++]=m[1]);0===w&&(k[w++]=0);k.length=w;return k}},{"two-product":120,"two-sum":121}],107:[function(a,g,m){g.exports=function(a,b,f,g){var k=t(a,f,g),m=t(b,f,g);if(0<k&&0<m||0>k&&0>m)return!1;var u=t(f,a,b),w=t(g,a,b);if(0<u&&0<w||0>u&&0>w)return!1;if(0===k&&0===m&&0===u&&0===w){a:{for(k=0;2>k;++k){var m=a[k],u=b[k],w=Math.max(m,u),v=f[k],r=g[k],h=Math.min(v,r);if(Math.max(v,r)<Math.min(m,u)||w<h){a=!1;break a}}a=!0}return a}return!0};
var t=a("robust-orientation")[3]},{"robust-orientation":104}],108:[function(a,g,m){g.exports=function(a,g){var b=a.length|0,f=g.length|0;if(1===b&&1===f){var f=a[0],p=-g[0],b=f+p,k=b-f,b=(f=f-(b-k)+(p-k))?[f,b]:[b];return b}var p=Array(b+f),m=k=0,u=0,w=Math.abs,v=a[m],r=w(v),h=-g[u],e=w(h),d,q;r<e?(q=v,m+=1,m<b&&(v=a[m],r=w(v))):(q=h,u+=1,u<f&&(h=-g[u],e=w(h)));m<b&&r<e||u>=f?(d=v,m+=1,m<b&&(v=a[m],r=w(v))):(d=h,u+=1,u<f&&(h=-g[u],e=w(h)));var l=d+q;q-=l-d;for(var z=l,E;m<b&&u<f;)r<e?(d=v,m+=1,m<
b&&(v=a[m],r=w(v))):(d=h,u+=1,u<f&&(h=-g[u],e=w(h))),l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d;for(;m<b;)d=v,l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d,m+=1,m<b&&(v=a[m]);for(;u<f;)d=h,l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d,u+=1,u<f&&(h=-g[u]);q&&(p[k++]=q);z&&(p[k++]=z);k||(p[k++]=0);p.length=k;return p}},{}],109:[function(a,g,m){g.exports=function(a,g){var b=a.length|0,f=g.length|0;if(1===b&&1===f){var f=a[0],
p=g[0],b=f+p,k=b-f,b=(f=f-(b-k)+(p-k))?[f,b]:[b];return b}var p=Array(b+f),m=k=0,u=0,w=Math.abs,v=a[m],r=w(v),h=g[u],e=w(h),d,q;r<e?(q=v,m+=1,m<b&&(v=a[m],r=w(v))):(q=h,u+=1,u<f&&(h=g[u],e=w(h)));m<b&&r<e||u>=f?(d=v,m+=1,m<b&&(v=a[m],r=w(v))):(d=h,u+=1,u<f&&(h=g[u],e=w(h)));var l=d+q;q-=l-d;for(var z=l,E;m<b&&u<f;)r<e?(d=v,m+=1,m<b&&(v=a[m],r=w(v))):(d=h,u+=1,u<f&&(h=g[u],e=w(h))),l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d;for(;m<b;)d=v,l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=
z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d,m+=1,m<b&&(v=a[m]);for(;u<f;)d=h,l=d+q,d=l-d,(d=q-d)&&(p[k++]=d),d=z+l,E=d-z,q=d-E,l-=E,z-=q,q=z+l,z=d,u+=1,u<f&&(h=g[u]);q&&(p[k++]=q);z&&(p[k++]=z);k||(p[k++]=0);p.length=k;return p}},{}],110:[function(a,g,m){g.exports=function(a){return 0>a?-1:0<a?1:0}},{}],111:[function(a,g,m){arguments[4][53][0].apply(m,arguments)},{dup:53}],112:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";
g.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var f=b[a];b[a]=b[f];a=f}return a};t.prototype.link=function(a,b){var f=this.find(a),g=this.find(b);if(f!==g){var k=this.ranks,m=this.roots,t=k[f],w=k[g];t<w?m[f]=g:w<t?m[g]=f:(m[g]=f,++k[f])}}},{}],113:[function(a,g,m){function t(a,b){var f=a.length,e=a.length-b.length,
d=Math.min;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-b[0];case 2:return(f=a[0]+a[1]-b[0]-b[1])?f:d(a[0],a[1])-d(b[0],b[1]);case 3:var e=a[0]+a[1],g=b[0]+b[1];if(f=e+a[2]-(g+b[2]))return f;var k=d(a[0],a[1]),n=d(b[0],b[1]);return(f=d(k,a[2])-d(n,b[2]))?f:d(k+a[2],e)-d(n+b[2],g);default:d=a.slice(0);d.sort();g=b.slice(0);g.sort();for(k=0;k<f;++k)if(e=d[k]-g[k])return e;return 0}}function n(a,b){return t(a[0],b[0])}function b(a,b){if(b){for(var f=a.length,e=Array(f),d=0;d<f;++d)e[d]=
[a[d],b[d]];e.sort(n);for(d=0;d<f;++d)a[d]=e[d][0],b[d]=e[d][1]}else a.sort(t);return a}function f(a){if(0===a.length)return[];for(var b=1,f=a.length,e=1;e<f;++e){var d=a[e];t(d,a[e-1])&&(e===b?b++:a[b++]=d)}a.length=b;return a}function p(a,b){for(var f=0,e=a.length-1,d=-1;f<=e;){var g=f+e>>1,k=t(a[g],b);0>=k?(0===k&&(d=g),f=g+1):0<k&&(e=g-1)}return d}function k(a,b){for(var f=Array(a.length),e=0,d=f.length;e<d;++e)f[e]=[];for(var d=[],e=0,g=b.length;e<g;++e)for(var k=b[e],n=k.length,m=1,c=1<<n;m<
c;++m){d.length=u.popCount(m);for(var w=0,y=0;y<n;++y)m&1<<y&&(d[w++]=k[y]);w=p(a,d);if(!(0>w))for(;!(f[w++].push(e),w>=a.length||0!==t(a[w],d)););}return f}function y(a,f){if(0>f)return[];for(var h=[],e=(1<<f+1)-1,d=0;d<a.length;++d)for(var g=a[d],k=e;k<1<<g.length;k=u.nextCombination(k)){for(var n=Array(f+1),m=0,c=0;c<g.length;++c)k&1<<c&&(n[m++]=g[c]);h.push(n)}return b(h)}"use restrict";var u=a("bit-twiddle"),w=a("union-find");m.dimension=function(a){for(var b=0,f=Math.max,e=0,d=a.length;e<d;++e)b=
f(b,a[e].length);return b-1};m.countVertices=function(a){for(var b=-1,f=Math.max,e=0,d=a.length;e<d;++e)for(var g=a[e],k=0,n=g.length;k<n;++k)b=f(b,g[k]);return b+1};m.cloneCells=function(a){for(var b=Array(a.length),f=0,e=a.length;f<e;++f)b[f]=a[f].slice(0);return b};m.compareCells=t;m.normalize=b;m.unique=f;m.findCell=p;m.incidence=k;m.dual=function(a,b){if(!b)return k(f(y(a,0)),a,0);for(var h=Array(b),e=0;e<b;++e)h[e]=[];for(var e=0,d=a.length;e<d;++e)for(var g=a[e],l=0,n=g.length;l<n;++l)h[g[l]].push(e);
return h};m.explode=function(a){for(var f=[],h=0,e=a.length;h<e;++h)for(var d=a[h],g=d.length|0,k=1,n=1<<g;k<n;++k){for(var m=[],c=0;c<g;++c)k>>>c&1&&m.push(d[c]);f.push(m)}return b(f)};m.skeleton=y;m.boundary=function(a){for(var f=[],h=0,e=a.length;h<e;++h)for(var d=a[h],g=0,k=d.length;g<k;++g){for(var n=Array(d.length-1),m=0,c=0;m<k;++m)m!==g&&(n[c++]=d[m]);f.push(n)}return b(f)};m.connectedComponents=function(a,g){if(g){for(var h=new w(g),e=0;e<a.length;++e)for(var d=a[e],k=0;k<d.length;++k)for(var l=
k+1;l<d.length;++l)h.link(d[k],d[l]);d=[];k=h.ranks;for(e=0;e<k.length;++e)k[e]=-1;for(e=0;e<a.length;++e)l=h.find(a[e][0]),0>k[l]?(k[l]=d.length,d.push([a[e].slice(0)])):d[k[l]].push(a[e].slice(0));return d}h=f(b(y(a,0)));e=new w(h.length);for(d=0;d<a.length;++d)for(k=a[d],l=0;l<k.length;++l)for(var n=p(h,[k[l]]),m=l+1;m<k.length;++m)e.link(n,p(h,[k[m]]));k=[];l=e.ranks;for(d=0;d<l.length;++d)l[d]=-1;for(d=0;d<a.length;++d)n=e.find(p(h,[a[d][0]])),0>l[n]?(l[n]=k.length,k.push([a[d].slice(0)])):k[l[n]].push(a[d].slice(0));
return k}},{"bit-twiddle":111,"union-find":112}],114:[function(a,g,m){g.exports=function(a,f,g){function k(a){if(c[a])return Infinity;var b=l[a],d=z[a];if(0>b||0>d)return Infinity;b=f[b];d=f[d];return Math.abs(t(f[a],b,d))/Math.sqrt(Math.pow(b[0]-d[0],2)+Math.pow(b[1]-d[1],2))}function m(a,b){var c=A[a],d=A[b];A[a]=d;A[b]=c;B[c]=b;B[d]=a}function u(a){for(var b=E[A[a]];;){var c=b,d=2*a+1,e=2*(a+1),f=a;if(d<N){var g=E[A[d]];g<c&&(f=d,c=g)}e<N&&E[A[e]]<c&&(f=e);if(f===a)return a;m(a,f);a=f}}function w(a){for(var b=
E[A[a]];0<a;){var c;c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<E[A[c]])m(a,c),a=c;else return a}}function v(){if(0<N){var a=A[0];m(0,N-1);--N;u(0);return a}return-1}function r(a,b){var c=A[a];if(E[c]===b)return a;E[c]=-Infinity;w(a);v();E[c]=b;N+=1;return w(N-1)}function h(a){if(!c[a]){c[a]=!0;var b=l[a];a=z[a];0<=l[a]&&(l[a]=b);0<=z[b]&&(z[b]=a);0<=B[b]&&r(B[b],k(b));0<=B[a]&&r(B[a],k(a))}}function e(a,b){if(0>a[b])return b;var d=b,e=b;do{var f=a[e];if(!c[e]||0>f||f===e)break;e=f;f=a[e];if(!c[e]||0>f||f===
e)break;e=f;d=a[d]}while(d!==e);for(d=b;d!==e;d=a[d])a[d]=e;return e}for(var d=f.length,q=a.length,l=Array(d),z=Array(d),E=Array(d),c=Array(d),x=0;x<d;++x)l[x]=z[x]=-1,E[x]=Infinity,c[x]=!1;for(x=0;x<q;++x){var C=a[x];if(2!==C.length)throw Error("Input must be a graph");var H=C[1],C=C[0];z[C]=-1!==z[C]?-2:H;l[H]=-1!==l[H]?-2:C}for(var A=[],B=Array(d),x=0;x<d;++x)Infinity>(E[x]=k(x))?(B[x]=A.length,A.push(x)):B[x]=-1;for(var N=A.length,x=N>>1;0<=x;--x)u(x);for(;;){x=v();if(0>x||E[x]>g)break;h(x)}g=
[];for(x=0;x<d;++x)c[x]||(B[x]=g.length,g.push(f[x].slice()));var F=[];a.forEach(function(a){var b=e(l,a[0]);a=e(z,a[1]);0<=b&&0<=a&&b!==a&&(b=B[b],a=B[a],b!==a&&F.push([b,a]))});n.unique(n.normalize(F));return{positions:g,edges:F}};var t=a("robust-orientation"),n=a("simplicial-complex")},{"robust-orientation":104,"simplicial-complex":113}],115:[function(a,g,m){function t(a,f){var g,k;if(f[0][0]<f[1][0])g=f[0],k=f[1];else if(f[0][0]>f[1][0])g=f[1],k=f[0];else{g=Math.min(a[0][1],a[1][1]);k=Math.max(a[0][1],
a[1][1]);var m=Math.min(f[0][1],f[1][1]),t=Math.max(f[0][1],f[1][1]);return k<m?k-m:g>t?g-t:k-t}a[0][1]<a[1][1]?(t=a[0],m=a[1]):(t=a[1],m=a[0]);return(t=n(k,g,t))?t:(t=n(k,g,m))?t:m-k}g.exports=function(a,f){var g,k;if(f[0][0]<f[1][0])g=f[0],k=f[1];else if(f[0][0]>f[1][0])g=f[1],k=f[0];else return t(f,a);var m,u;if(a[0][0]<a[1][0])m=a[0],u=a[1];else if(a[0][0]>a[1][0])m=a[1],u=a[0];else return-t(a,f);var w=n(g,k,u),v=n(g,k,m);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;
w=n(u,m,k);v=n(u,m,g);if(0>w){if(0>=v)return w}else if(0<w){if(0<=v)return w}else if(v)return v;return k[0]-u[0]};var n=a("robust-orientation")},{"robust-orientation":104}],116:[function(a,g,m){arguments[4][84][0].apply(m,arguments)},{dup:84}],117:[function(a,g,m){function t(a,b,f){this.slabs=a;this.coordinates=b;this.horizontal=f}function n(a,b){return a.y-b}function b(a,f){for(var g=null;a;){var e=a.key,d,k;e[0][0]<e[1][0]?(d=e[0],k=e[1]):(d=e[1],k=e[0]);d=u(d,k,f);if(0>d)a=a.left;else if(0<d)if(f[0]!==
e[1][0])g=a,a=a.right;else{if(e=b(a.right,f))return e;a=a.left}else{if(f[0]!==e[1][0])return a;if(e=b(a.right,f))return e;a=a.left}}return g}function f(a,b,f,e){this.y=a;this.index=b;this.start=f;this.closed=e}function p(a,b,f,e){this.x=a;this.segment=b;this.create=f;this.index=e}g.exports=function(a){for(var b=a.length,g=2*b,e=Array(g),d=0;d<b;++d){var k=a[d],l=k[0][0]<k[1][0];e[2*d]=new p(k[0][0],k,l,d);e[2*d+1]=new p(k[1][0],k,!l,d)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?
c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1])});a=y(w);b=[];k=[];l=[];for(d=0;d<g;){for(var n=e[d].x,m=[];d<g;){var c=e[d];if(c.x!==n)break;d+=1;c.segment[0][0]===c.x&&c.segment[1][0]===c.x?c.create&&(c.segment[0][1]<c.segment[1][1]?(m.push(new f(c.segment[0][1],c.index,!0,!0)),m.push(new f(c.segment[1][1],c.index,!1,!1))):(m.push(new f(c.segment[1][1],c.index,!0,!1)),m.push(new f(c.segment[0][1],c.index,!1,!0)))):a=c.create?a.insert(c.segment,c.index):a.remove(c.segment)}b.push(a.root);
k.push(n);l.push(m)}return new t(b,k,l)};var k=a("binary-search-bounds"),y=a("functional-red-black-tree"),u=a("robust-orientation"),w=a("./lib/order-segments");t.prototype.castUp=function(a){var f=k.le(this.coordinates,a[0]);if(0>f)return-1;var g=b(this.slabs[f],a),e=-1;g&&(e=g.value);if(this.coordinates[f]===a[0]){var d=null;g&&(d=g.key);0<f&&(g=b(this.slabs[f-1],a))&&(d?0<w(g.key,d)&&(d=g.key,e=g.value):(e=g.value,d=g.key));g=this.horizontal[f];if(0<g.length){var m=k.ge(g,a[1],n);if(m<g.length){f=
g[m];if(a[1]===f.y){if(f.closed)return f.index;for(;m<g.length-1&&g[m+1].y===a[1];)if(m+=1,f=g[m],f.closed)return f.index;if(f.y===a[1]&&!f.start){m+=1;if(m>=g.length)return e;f=g[m]}}f.start?d?(a=u(d[0],d[1],[a[0],f.y]),d[0][0]>d[1][0]&&(a=-a),0<a&&(e=f.index)):e=f.index:f.y!==a[1]&&(e=f.index)}}}return e}},{"./lib/order-segments":115,"binary-search-bounds":116,"functional-red-black-tree":77,"robust-orientation":104}],118:[function(a,g,m){function t(a,f){var g=a.length,m=["'use strict';"],p="surfaceNets"+
a.join("_")+"d"+f;m.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&m.push("getters:[0],");for(var r=[],h=[],e=0;e<g;++e)r.push("d"+e),h.push("d"+e);for(e=0;e<1<<g;++e)r.push("v"+e),h.push("v"+e);for(e=0;e<1<<g;++e)r.push("p"+e),h.push("p"+e);r.push("a","b","c");h.push("a","c");m.push("vertex:function vertexFunc(",r.join(),"){");r=[];for(e=0;e<1<<g;++e)r.push("(p"+e+"<<"+e+")");m.push("var m=(",
r.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var r=[],d=[];128>=1<<(1<<g)?(m.push("switch(m){"),d=m):m.push("switch(m>>>7){");for(e=0;e<1<<(1<<g);++e){128<1<<(1<<g)&&0===e%128&&(0<r.length&&d.push("}}"),d="vExtra"+r.length,m.push("case ",e>>>7,":",d,"(m&0x7f,",h.join(),");break;"),d=["function ",d,"(m,",h.join(),"){switch(m){"],r.push(d));d.push("case ",e&127,":");for(var q=Array(g),l=Array(g),t=Array(g),E=Array(g),c=0,x=0;x<g;++x)q[x]=[],l[x]=[],t[x]=0,E[x]=0;for(x=0;x<1<<g;++x)for(var C=
0;C<g;++C){var H=x^1<<C;if(!(H>x)&&!(e&1<<H)!==!(e&1<<x)){var A=1;e&1<<H?l[C].push("v"+H+"-v"+x):(l[C].push("v"+x+"-v"+H),A=-A);0>A?(q[C].push("-v"+x+"-v"+H),t[C]+=2):(q[C].push("v"+x+"+v"+H),t[C]-=2);c+=1;for(A=0;A<g;++A)A!==C&&(H&1<<A?E[A]+=1:--E[A])}}x=[];for(C=0;C<g;++C)0===q[C].length?x.push("d"+C+"-0.5"):(H="",0>t[C]?H=t[C]+"*c":0<t[C]&&(H="+"+t[C]+"*c"),x.push("d"+C+"-"+(.5+E[C]/c*.5)+"-"+q[C].length/c*.5+"*("+q[C].join("+")+H+")/("+l[C].join("+")+")"));d.push("a.push([",x.join(),"]);","break;")}m.push("}},");
0<r.length&&d.push("}}");h=[];for(e=0;e<1<<g-1;++e)h.push("v"+e);h.push("c0","c1","p0","p1","a","b","c");m.push("cell:function cellFunc(",h.join(),"){");g=b(g-1);m.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",p,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
p,";");for(e=0;e<r.length;++e)m.push(r[e].join(""));return(new Function("genContour",m.join("")))(n)}g.exports=function(a,b){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){for(var g=f(a,b),m=g.length,n=Array(m),r=Array(m),h=0;h<m;++h)n[h]=[g[h]],r[h]=[h];return{positions:n,cells:r}}g=a.order.join()+"-"+a.dtype;m=p[g];b=+b||0;m||(m=p[g]=t(a.order,a.dtype));return m(a,b)};var n=a("ndarray-extract-contour"),b=a("triangulate-hypercube"),f=a("zero-crossings"),p={}},{"ndarray-extract-contour":89,
"triangulate-hypercube":119,"zero-crossings":128}],119:[function(a,g,m){g.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var g=Math.round(b(a+1))|0,k=[],m=0;m<g;++m){for(var u=t.unrank(a,m),w=[0],v=0,r=0;r<u.length;++r)v+=1<<u[r],w.push(v);1>n(u)&&(w[0]=v,w[a]=0);k.push(w)}return k};var t=a("permutation-rank"),n=a("permutation-parity"),b=a("gamma")},{gamma:78,"permutation-parity":92,"permutation-rank":93}],120:[function(a,g,m){g.exports=function(a,b,f){var g=a*b,k=t*a,k=k-(k-a);a-=k;
var m=t*b,m=m-(m-b);b-=m;b=a*b-(g-k*m-a*m-k*b);return f?(f[0]=b,f[1]=g,f):[b,g]};var t=+(Math.pow(2,27)+1)},{}],121:[function(a,g,m){g.exports=function(a,g,b){var f=a+g,m=f-a;g-=m;a-=f-m;return b?(b[0]=a+g,b[1]=f,b):[a+g,f]}},{}],122:[function(a,g,m){(function(g,n){function b(a){if(a){var b=l.log2(a.length||a.byteLength);x[b].push(a)}}function f(a){a=l.nextPow2(a);var b=l.log2(a),b=x[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function p(a){return new Uint8Array(f(a),0,a)}function k(a){return new Uint16Array(f(2*
a),0,a)}function y(a){return new Uint32Array(f(4*a),0,a)}function u(a){return new Int8Array(f(a),0,a)}function w(a){return new Int16Array(f(2*a),0,a)}function v(a){return new Int32Array(f(4*a),0,a)}function r(a){return new Float32Array(f(4*a),0,a)}function h(a){return new Float64Array(f(8*a),0,a)}function e(a){return E?new Uint8ClampedArray(f(a),0,a):p(a)}function d(a){return new DataView(f(a),0,a)}function q(a){a=l.nextPow2(a);var b=l.log2(a),b=C[b];return 0<b.length?b.pop():new n(a)}var l=a("bit-twiddle"),
z=a("dup");g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var E="undefined"!==typeof Uint8ClampedArray,c=g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=z([32,0]));c.BUFFER||(c.BUFFER=z([32,0]));var x=c.DATA,C=c.BUFFER;m.free=function(a){if(n.isBuffer(a))C[l.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=l.log2(a.length||a.byteLength)|0;x[b].push(a)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeInt8=m.freeInt16=m.freeInt32=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(a){b(a.buffer)};m.freeArrayBuffer=b;m.freeBuffer=function(a){C[l.log2(a.length)].push(a)};m.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return f(a);switch(b){case "uint8":return p(a);case "uint16":return k(a);case "uint32":return y(a);case "int8":return u(a);
case "int16":return w(a);case "int32":return v(a);case "float":case "float32":return r(a);case "double":case "float64":return h(a);case "uint8_clamped":return e(a);case "buffer":return q(a);case "data":case "dataview":return d(a);default:return null}};m.mallocArrayBuffer=f;m.mallocUint8=p;m.mallocUint16=k;m.mallocUint32=y;m.mallocInt8=u;m.mallocInt16=w;m.mallocInt32=v;m.mallocFloat32=m.mallocFloat=r;m.mallocFloat64=m.mallocDouble=h;m.mallocUint8Clamped=e;m.mallocDataView=d;m.mallocBuffer=q;m.clearCache=
function(){for(var a=0;32>a;++a)c.UINT8[a].length=0,c.UINT16[a].length=0,c.UINT32[a].length=0,c.INT8[a].length=0,c.INT16[a].length=0,c.INT32[a].length=0,c.FLOAT[a].length=0,c.DOUBLE[a].length=0,c.UINT8C[a].length=0,x[a].length=0,C[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":53,buffer:61,dup:75}],123:[function(a,g,m){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var b=
0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}"use restrict";g.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var b=a,f=this.roots;f[a]!==a;)a=f[a];for(;f[b]!==a;){var g=f[b];f[b]=a;b=g}return a};a.link=function(a,b){var f=this.find(a),g=this.find(b);if(f!==g){var k=this.ranks,m=this.roots,t=k[f],w=k[g];t<w?m[f]=g:w<t?m[g]=f:(m[g]=f,
++k[f])}}},{}],124:[function(a,g,m){g.exports=function(a,g,b){if(0===a.length)return a;if(g){b||a.sort(g);b=1;for(var f=a.length,m=a[0],k=a[0],y=1;y<f;++y)k=m,m=a[y],g(m,k)&&(y===b?b++:a[b++]=m);a.length=b;return a}b||a.sort();g=1;b=a.length;f=a[0];m=a[0];for(k=1;k<b;++k)m=f,f=a[k],f!==m&&(k===g?g++:a[g++]=f);a.length=g;return a}},{}],125:[function(a,g,m){g.exports=function(a,g){if("object"!==typeof g||null===g)g={};return t(a,g.canvas||n,g.context||b,g)};var t=a("./lib/vtext"),n=null,b=null;"undefined"!==
typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,b=n.getContext("2d"))},{"./lib/vtext":126}],126:[function(a,g,m){function t(a,b,f){for(var e=b.textAlign||"start",d=b.textBaseline||"alphabetic",g=[1073741824,1073741824],k=[0,0],m=a.length,n=0;n<m;++n)for(var c=a[n],p=0;2>p;++p)g[p]=Math.min(g[p],c[p])|0,k[p]=Math.max(k[p],c[p])|0;var t=0;switch(e){case "center":t=-.5*(g[0]+k[0]);break;case "right":case "end":t=-k[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+
e+"'");}var u=0;switch(d){case "hanging":case "top":u=-g[1];break;case "middle":u=-.5*(g[1]+k[1]);break;case "alphabetic":case "ideographic":u=-3*f;break;case "bottom":u=-k[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+d+"'");}var w=1/f;"lineHeight"in b?w*=+b.lineHeight:"width"in b?w=b.width/(k[0]-g[0]):"height"in b&&(w=b.height/(k[1]-g[1]));return a.map(function(a){return[w*(a[0]+t),w*(a[1]+u)]})}function n(a,b,g,e){a=f(a,128);e=e?k(a.cells,a.positions,.25):{edges:a.cells,
positions:a.positions};g=t(e.positions,b,g);a=e.edges;e="ccw"===b.orientation;y(g,a);if(b.polygons||b.polygon||b.polyline){b=w(a,g);a=Array(b.length);for(var d=0;d<b.length;++d){for(var m=b[d],l=Array(m.length),n=0;n<m.length;++n){for(var p=m[n],c=Array(p.length),x=0;x<p.length;++x)c[x]=g[p[x]].slice();e&&c.reverse();l[n]=c}a[d]=l}return a}return b.triangles||b.triangulate||b.triangle?{cells:u(g,a,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:a,positions:g}}function b(a,b,f){try{return n(a,
b,f,!0)}catch(e){}try{return n(a,b,f,!1)}catch(e){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}g.exports=function(a,f,g,e){var d=e.size||64;g.font=d+"px "+(e.font||"normal");g.textAlign="start";g.textBaseline="alphabetic";g.direction="ltr";var k;k=Math.ceil(g.measureText(a).width+2*d)|0;if(8192<k)throw Error("vectorize-text: String too long (sorry, this will get fixed later)");var l=3*d;f.height<l&&(f.height=l);
g.fillStyle="#000";g.fillRect(0,0,f.width,f.height);g.fillStyle="#fff";g.fillText(a,d,2*d);a=g.getImageData(0,0,k,l);k=p(a.data,[l,k,4]).pick(-1,-1,0).transpose(1,0);return b(k,e,d)};g.exports.processPixels=b;var f=a("surface-nets"),p=a("ndarray"),k=a("simplify-planar-graph"),y=a("clean-pslg"),u=a("cdt2d"),w=a("planar-graph-to-polyline")},{cdt2d:62,"clean-pslg":67,ndarray:90,"planar-graph-to-polyline":96,"simplify-planar-graph":114,"surface-nets":118}],127:[function(a,g,m){g.exports=a("cwise-compiler")({args:["array",
{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":71}],128:[function(a,g,m){g.exports=function(a,b){var f=[];b=+b||0;t(a.hi(a.shape[0]-1),f,b);return f};var t=a("./lib/zc-core")},{"./lib/zc-core":127}],129:[function(a,
g,m){var t=a("./lib/util/extend"),n=a("./lib/dynamic"),b=a("./lib/util/raf"),f=a("./lib/util/clock"),p=a("./lib/strings"),k=a("./lib/webgl"),y=a("./lib/extension"),u=a("./lib/limits"),w=a("./lib/buffer"),v=a("./lib/elements"),r=a("./lib/texture"),h=a("./lib/renderbuffer"),e=a("./lib/framebuffer"),d=a("./lib/attribute"),q=a("./lib/shader"),l=a("./lib/read"),z=a("./lib/core");g.exports=function(){function a(){U=b.next(a);O.count+=1;var c=W.viewport,d=W.scissor_box;c[0]=c[1]=d[0]=d[1]=0;O.viewportWidth=
O.frameBufferWidth=O.drawingBufferWidth=c[2]=d[2]=B.drawingBufferWidth;O.viewportHeight=O.frameBufferWidth=O.drawingBufferHeight=c[3]=d[3]=B.drawingBufferHeight;c=f();O.deltaTime=(c-P)/1E3;O.time=(c-D)/1E3;P=c;T.procs.refresh();M.poll();for(c=0;c<S.length;++c)(0,S[c])(O,null,0)}function c(a){}function g(a){}function m(a){function b(a){var c={},d={};Object.keys(a).forEach(function(b){var e=a[b];n.isDynamic(e)?d[b]=n.unbox(e,b):c[b]=e});return{dynamic:d,"static":c}}function c(a){for(;l.length<a;)l.push(null);
return l}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;delete c.attributes;delete c.context;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var d=T.compile(a,f,e,d),g=d.draw,h=d.batch,k=d.scope,l=[];return function(a,b){var d;if("function"===typeof a)return k.call(this,null,a,
0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)k.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)k.call(this,a[d],b,d);else return k.call(this,a,b,0);else if("number"===typeof a){if(0<a)return h.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return h.call(this,a,a.length)}else return g.call(this,a)}}function H(){T.procs.poll()}var A=k(Array.prototype.slice.call(arguments)),B=A.gl,N=A.options,A=p(),F=y(B).extensions,D=f(),P=D,L=B.drawingBufferWidth,
J=B.drawingBufferHeight,O={count:0,deltaTime:0,time:0,viewportWidth:L,viewportHeight:J,framebufferWidth:L,framebufferHeight:J,drawingBufferWidth:L,drawingBufferHeight:J,pixelRatio:N.pixelRatio},L=u(B,F),G=w(B),I=v(B,F,G),J=d(B,F,L,G,A),K=q(B,A),M=r(B,F,L,H,O),V=h(B,F,L),X=e(B,F,L,M,V),Y=l(B,H,O),T=z(B,A,F,L,G,I,M,X,{},J,K,{elements:null,primitive:4,count:-1,offset:0,instances:-1},O),W=T.next,R=B.canvas,S=[],U=0;R&&(R.addEventListener("webglcontextlost",c,!1),R.addEventListener("webglcontextrestored",
g,!1));T.procs.refresh();return t(m,{clear:function(a){var b=0;H();var c=a.color;c&&(B.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(B.clearDepth(+a.depth),b|=256);"stencil"in a&&(B.clearStencil(a.stencil|0),b|=1024);B.clear(b)},prop:n.define.bind(null,1),context:n.define.bind(null,2),"this":n.define.bind(null,3),draw:m({}),elements:function(a){return I.create(a)},buffer:function(a){return G.create(a,34962)},texture:function(a){return M.create(a,3553)},cube:function(a){return 6===
arguments.length?M.create(Array.prototype.slice.call(arguments),34067):M.create(a,34067)},renderbuffer:function(a){return V.create(a)},framebuffer:function(a){return X.create(a)},framebufferCube:function(a){},attributes:B.getContextAttributes(),frame:function(c){S.push(c);!U&&0<S.length&&a();return{cancel:function(){var d=S.find(function(a){return a===c});0>d||(S.splice(d,1),0>=S.length&&U&&(b.cancel(a),U=0))}}},limits:L,read:Y,destroy:function(){U&&(b.cancel(a),U=0);R&&(R.removeEventListener("webglcontextlost",
c),R.removeEventListener("webglcontextrestored",g));K.clear();X.clear();V.clear();M.clear();G.clear();if(N.onDestroy)N.onDestroy()},_gl:B,_refresh:function(){T.procs.refresh()}})}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/strings":17,"./lib/texture":18,"./lib/util/clock":19,"./lib/util/extend":21,"./lib/util/raf":29,"./lib/webgl":33}]},
{},[1]);
