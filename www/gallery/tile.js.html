<!DOCTYPE html>
      <html>
        <head>
          <title>example/tile.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function e$$0(h,n,b){function c(a,f){if(!n[a]){if(!h[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(d)return d(a,!0);l=Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l;}l=n[a]={exports:{}};h[a][0].call(l.exports,function(b){var f=h[a][1][b];return c(f?f:b)},l,l.exports,e$$0,h,n,b)}return n[a].exports}for(var d="function"==typeof require&&require,a=0;a<b.length;a++)c(b[a]);return c})({1:[function(e,h,n){h.exports=[[[1,11],[1,11],[1,11],[1,11],[1,11],
[1,11],[1,11],[1,11],[6,6],[7,6],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,0],[1,0],[1,0],[2,0],[1,11],[1,11],[1,11],[6,6],[7,6],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[1,1],[2,1],[1,11],[1,11],[1,11],[6,6],[8,8],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[0,3],[5,2],[1,11],[13,12],[13,12],[6,6],[7,6],[6,9],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[2,1],[1,11],[1,11],[13,15],[13,15],[6,6],[7,6],[7,6],[6,9],[1,11],[1,11],[1,11],[1,
11]],[[1,11],[0,2],[1,2],[2,2],[1,11],[1,11],[14,2],[15,2],[6,6],[7,6],[7,6],[7,6],[6,9],[8,5],[1,11],[1,11]],[[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[6,6],[8,8],[7,6],[7,6],[7,6],[8,6],[1,11],[1,11]],[[4,5],[2,5],[0,5],[1,5],[2,5],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[8,9],[6,9],[8,5],[1,11]],[[2,8],[3,9],[4,9],[4,6],[3,9],[5,0],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[8,8],[8,6],[1,11]],[[4,7],[4,7],[4,8],[5,8],[2,9],[3,9],[4,5],[2,5],[1,11],[1,11],[6,7],[7,8],[7,6],
[7,6],[6,9],[8,5]],[[1,11],[1,11],[3,7],[4,7],[4,8],[5,9],[5,8],[0,9],[2,5],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[6,9]],[[1,11],[1,11],[1,11],[1,11],[0,7],[4,8],[4,6],[4,6],[5,1],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6]],[[1,11],[9,0],[10,0],[8,0],[1,11],[3,7],[1,7],[1,7],[5,7],[1,11],[1,11],[1,11],[1,11],[6,7],[7,7],[7,7]],[[1,11],[9,1],[11,3],[11,1],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[9,2],[7,2],[11,2],[1,11],[1,11],[1,11],[2,12],[1,
13],[1,13],[1,13],[1,13],[1,13],[1,13],[0,12],[1,11]],[[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[2,10],[3,10],[3,10],[3,10],[3,10],[3,10],[3,10],[0,10],[1,11]]]},{}],2:[function(e,h,n){var b=e("../regl")(),c=e("mouse-change")(),d=e("./assets/map.json"),a=b({attributes:{position:b.buffer([-1,-1,1,-1,-1,1,1,1,-1,1,1,-1])},uniforms:{view:b.prop("view")},count:6}),q=b({frag:"\n  precision mediump float;\n  uniform sampler2D map, tiles;\n  uniform vec2 mapSize, tileSize;\n  varying vec2 uv;\n  void main() {\n    vec2 tileCoord = floor(255.0 * texture2D(map,\n        (floor(uv.yx)) / mapSize).ra);\n    gl_FragColor = texture2D(tiles, (tileCoord + fract(uv)) / tileSize);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  uniform vec4 view;\n  varying vec2 uv;\n  void main() {\n    uv = mix(view.xw, view.zy, 0.5 * (1.0 + position));\n    gl_Position = vec4(position, 1, 1);\n  }",depth:{enable:!1},uniforms:{tiles:b.texture("assets/tiles.png"),tileSize:[16,16],map:b.texture(d),mapSize:[d[0].length,d.length]}});b.frame(function(){var f=b.stats,l=f.width,D=f.height,f=d[0].length*c.x/l,e=d.length*c.y/D,l=l/D*10;a({view:[f-.5*l,e-5,f+.5*l,e+5]},function(){q()})})},
{"../regl":37,"./assets/map.json":1,"mouse-change":35}],3:[function(e,h,n){function b(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=e("./constants/dtypes.json"),d=e("./extend");d(b.prototype,{equals:function(a,b){return this.pointer?a.pointer&&this.buffer===a.buffer&&this.size===b&&this.normalized===a.normalized&&this.type===a.type&&this.offset===a.offset&&this.stride===a.stride&&this.divisor===
a.divisor:!a.pointer&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,b){(this.pointer=a.pointer)?(this.buffer=a.buffer,this.size=b,this.normalized=a.normalized,this.type=a.type,this.offset=a.offset,this.stride=a.stride,this.divisor=a.divisor):(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w)}});h.exports=function(a,q,f,l,e){function P(){for(var a=Array(16),f=0;16>f;++f)a[f]=new b;this.records=a;this.top=0}function h(a){for(var f=a.records,c=a.top;f.length-1<=c;)f.push(new b);return f[++a.top]}
var w={};f=f.maxAttributes;for(var u=Array(f),r=0;r<f;++r)u[r]=new b;d(P.prototype,{pushVec:function(a,b,f,c){var q=h(this);q.pointer=!1;q.x=a;q.y=b;q.z=f;q.w=c},pushPtr:function(a,b,f,c,q,d,l){var u=h(this);u.pointer=!0;u.buffer=a;u.size=b;u.offset=f;u.stride=c;u.divisor=q;u.normalized=d;u.type=l},pushDyn:function(a){if("number"===typeof a)this.pushVec(a,0,0,0);else if(Array.isArray(a))this.pushVec(a[0],a[1],a[2],a[3]);else{var b=l.getBuffer(a),f=0,q=0,d=0,u=0,e=!1,D=5126;b?D=b.dtype:(b=l.getBuffer(a.buffer),
f=a.size||0,q=a.stride||0,d=a.offset||0,u=a.divisor||0,e=a.normalized||!1,D=b.dtype,"type"in a&&(D=c[a.type]));this.pushPtr(b,f,d,q,u,e,D)}},pop:function(){--this.top}});return{bindings:u,bind:function(b,f,c,d){d=c.size||d;if(!f.equals(c,d)){if(c.pointer){f.pointer||a.enableVertexAttribArray(b);f.buffer!==c.buffer&&c.buffer.bind();a.vertexAttribPointer(b,d,c.type,c.normalized,c.stride,c.offset);var u=q.angle_instanced_arrays;u&&u.vertexAttribDivisorANGLE(b,c.divisor)}else f.pointer&&a.disableVertexAttribArray(b),
a.vertexAttrib4f(b,c.x,c.y,c.z,c.w);f.set(c,d)}},def:function(a){a=e.id(a);var b=w[a];b||(b=w[a]=new P);return b}}}},{"./constants/dtypes.json":10,"./extend":16}],4:[function(e,h,n){function b(a,b){switch(a){case 5121:return new Uint8Array(b);case 5123:return new Uint16Array(b);case 5125:return new Uint32Array(b);case 5120:return new Int8Array(b);case 5122:return new Int16Array(b);case 5124:return new Int32Array(b);case 5126:return new Float32Array(b);default:return null}}var c=e("./check"),d=e("./is-typed-array"),
a=e("./is-ndarray"),q=e("./constants/arraytypes.json"),f=e("./constants/dtypes.json"),l=e("./values"),D={"static":35044,dynamic:35048,stream:35040};h.exports=function(e){function h(a,b){this.id=r++;this.buffer=a;this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function w(a){e.isBuffer(a.buffer)||(a.buffer=e.createBuffer());a.bind();e.bufferData(a.type,a.data||a.byteLength,a.usage)}function u(a){var b=a.buffer;c(b,"buffer must not be deleted already");
e.isBuffer(b)&&e.deleteBuffer(b);a.buffer=null;delete x[a.id]}var r=0,x={};h.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)};return{create:function(k,l,r){function v(u){var k=u||{};if(Array.isArray(k)||d(k)||a(k))k={data:k};else if("number"===typeof k)k={length:k|0};else if(null===k||void 0===k)k={};c.type(k,"object","buffer arguments must be an object, a number or an array");"usage"in k?(c.parameter(k.usage,D,"invalid buffer usage"),t.usage=D[k.usage]):t.usage=35044;u=0;"type"in k&&
(c.parameter(k.type,f,"invalid buffer type"),u=f[k.type]);var e=k.dimension|0||1,l=0,r=null;if("data"in k)if(r=k.data,null===r)l=k.length|0;else{if(a(r)){var e=r.shape,l=r.stride,k=r.offset,m=0,G=0,x=0,h=0;1===e.length?(m=e[0],G=1,x=l[0],h=0):2===e.length?(m=e[0],G=e[1],x=l[0],h=l[1]):c.raise("invalid shape");u=u||q[Object.prototype.toString.call(r)]|0||5126;for(var e=G,l=b(u,m*G),r=r.data,P=0,la=0;la<m;++la)for(var R=0;R<G;++R)l[P++]=r[x*la+h*R+k];r=l}else if(Array.isArray(r))if(0<r.length&&Array.isArray(r[0])){e=
r[0].length;u=u||5126;k=b(u,r.length*e);l=r;r=e;for(m=h=0;m<l.length;++m)for(x=l[m],G=0;G<r;++G)k[h++]=x[G];r=k}else u=u||5126,r=b(u,r);else c.isTypedArray(r,"invalid data type buffer data"),u=u||q[Object.prototype.toString.call(r)]|0;l=r.byteLength}else"length"in k&&(l=k.length|0,c.nni(l,"buffer length must be a nonnegative integer"));t.data=r;t.dtype=u||5121;t.byteLength=l;t.dimension=e;w(t);return v}var R=e.createBuffer(),t=new h(R,l);x[t.id]=t;r||v(k);v._reglType="buffer";v._buffer=t;v.destroy=
function(){u(t)};return v},clear:function(){l(x).forEach(u)},refresh:function(){l(x).forEach(w)},getBuffer:function(a){return a&&a._buffer instanceof h?a._buffer:null}}}},{"./check":5,"./constants/arraytypes.json":9,"./constants/dtypes.json":10,"./is-ndarray":19,"./is-typed-array":20,"./values":34}],5:[function(e,h,n){function b(a){a=Error("(regl) "+a);console.error(a);throw a;}function c(a,c){a||b(c)}var d=e("./is-typed-array");e=e("./extend");h.exports=e(c,{raise:b,parameter:function(a,c,f){a in
c||b("unknown parameter ("+a+")"+(f?": "+f:"")+". possible values: "+Object.keys(c).join())},type:function(a,c,f){typeof a!==c&&b("invalid parameter type"+(f?": "+f:"")+". expected "+c+", got "+typeof a)},isTypedArray:function(a,c){d(a)||b("invalid parameter type"+(c?": "+c:"")+". must be a typed array")},nni:function(a,c){0<=a&&(a|0)===a||b("invalid parameter type, ("+a+")"+(c?": "+c:"")+". must be a nonnegative integer")},oneOf:function(a,c,f){0>c.indexOf(a)&&b("invalid value"+(f?": "+f:"")+". must be one of: "+
c)},shaderError:function(a,b,f,d){a.getShaderParameter(b,a.COMPILE_STATUS)||(a=a.getShaderInfoLog(b),c.raise("Error compiling shader:\n"+a))},linkError:function(a,b){if(!a.getProgramParameter(b,a.LINK_STATUS)){var f=a.getProgramInfoLog(b);c.raise("Error linking program:\n"+f)}}})},{"./extend":16,"./is-typed-array":20}],6:[function(e,h,n){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],7:[function(e,h,n){var b=e("./extend");
h.exports=function(){function c(){var a=[],c=[];return b(function(){a.push.apply(a,Array.prototype.slice.call(arguments))},{def:function(){var b="v"+d++;c.push(b);0<arguments.length&&(a.push(b,"="),a.push.apply(a,Array.prototype.slice.call(arguments)),a.push(";"));return b},toString:function(){return[0<c.length?"var "+c+";":"",a.join("")].join("")}})}var d=0,a=[],q=[],f={};return{link:function(b){var c="g"+d++;a.push(c);q.push(b);return c},block:c,proc:function(a){var q=[],e=c(),h=e.toString;return f[a]=
b(e,{arg:function(){var a="a"+d++;q.push(a);return a},toString:function(){return["function(",q.join(),"){",h(),"}"].join("")}})},compile:function(){var b=['"use strict";return {'];Object.keys(f).forEach(function(a){b.push('"',a,'":',f[a].toString(),",")});b.push("}");return Function.apply(null,a.concat([b.join("")])).apply(null,q)}}}},{"./extend":16}],8:[function(e,h,n){function b(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function c(a,b,c,f){var d,e=",";switch(b){case 5126:d="1f";break;case 35664:d="2fv";break;case 35665:d="3fv";break;case 35666:d="4fv";break;case 35670:case 5124:d="1i";break;case 35671:case 35667:d="2iv";break;case 35672:case 35668:d="3iv";break;case 35673:case 35669:d="4iv";break;case 35674:d="Matrix2fv";e=",false,";break;case 35675:d="Matrix3fv";e=",false,";break;case 35676:d="Matrix4fv";e=",false,";break;default:q.raise("unsupported uniform type")}return a+".uniform"+d+"("+c+
e+f+");"}function d(a){return a+"["+a+".length-1]"}function a(a,b){return"framebuffer"===a||a<b?-1:a>b?1:0}var q=e("./check"),f=e("./codegen"),l=e("./constants/primitives.json"),D=e("./constants/dtypes.json"),P={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,
"src alpha saturate":776},M={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},w={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};h.exports=function(e,r,h,k,G,m,v,R,t,n,ea,T,ca,ja,ma){function ga(k,r,D,G,t){function v(a){var b=qa[a];return b?b:b=qa[a]=A(ka[a])}function W(a){var b=a.id,y=V[b];if(y)return y;y=
a.func?p.def(A(a.data),"(",T,",",H,",",S,")"):p.def(T,".",a.data);return V[b]=y}function Y(a,b){return a.find(function(a){return a.name===b})}function K(a){return oa&&!(a in r||a in t)}var N=f(),A=N.link,p=N.proc("batch"),E=N.block(),F=p.def,aa=p.arg,g=A(e),I=A(k.program),J=A(ea.bind),S=A(ja),ia=A(R),B=A(ca.count),O=A(ca.offset),sa=A(ca.instances),X=A(ca.primitive),qa={},da=A(m.elements),B=F(d(B)),O=F(d(O)),X=F(d(X)),da=F(d(da)),z,L,Q=h.angle_instanced_arrays;Q&&(z=F(d(sa)),L=A(Q));var oa="elements"in
r,sa=aa(),aa=aa(),T=F(),H=F(),V={};p(g,".useProgram(",I,");");k.uniforms.forEach(function(a){if(!(a.name in D)){var b=A(a.location),y=A(n.def(a.name)),y=y+"["+y+".length-1]";a=a.info.type;35678===a||35680===a?(a=F(y+"._texture"),p(c(g,5124,b,a+".bind()")),E(a,".unbind();")):p(c(g,a,b,y))}});k.attributes.forEach(function(a){if(!(G.name in G)){var g=A(ea.def(a.name));p(J,"(",a.location,",",A(ea.bindings[a.location]),",",g,".records[",g,".top]",",",b(a.info.type),");")}});oa||p("if(",da,"){",g,".bindBuffer(",
34963,",",da,".buffer.buffer);","}else{",g,".bindBuffer(",34963,",null);","}");p("for(",H,"=0;",H,"<",sa,";++",H,"){",T,"=",aa,"[",H,"];");Object.keys(r).sort(a).forEach(function(a){function b(a){p("if(",y,"){",g,".enable(",a,");}else{",g,".disable(",a,");}")}var y=W(r[a]);switch(a){case "framebuffer":a=v("viewport");var c=v("scissor.box");p("if(",ia,".push(",y,"&&",y,"._framebuffer)){",ia,".poll();",a,".setDirty();",c,".setDirty();","}");break;case "cull.enable":b(2884);break;case "blend.enable":b(3042);
break;case "dither":b(3024);break;case "stencil.enable":b(2960);break;case "depth.enable":b(2929);break;case "scissor.enable":b(3089);break;case "polygonOffset.enable":b(32823);break;case "sample.alpha":b(32926);break;case "sample.enable":b(32928);break;case "depth.mask":p(g,".depthMask(",y,");");break;case "depth.func":a=A(M);p(g,".depthFunc(",a,"[",y,"]);");break;case "depth.range":p(g,".depthRange(",y,"[0],",y,"[1]);");break;case "blend.color":p(g,".blendColor(",y,"[0],",y,"[1],",y,"[2],",y,"[3]);");
break;case "blend.equation":a=A(C);p("if(typeof ",y,'==="string"){',g,".blendEquation(",a,"[",y,"]);","}else{",g,".blendEquationSeparate(",a,"[",y,".rgb],",a,"[",y,".alpha]);","}");break;case "blend.func":a=A(P);p(g,".blendFuncSeparate(",a,'["srcRGB" in ',y,"?",y,".srcRGB:",y,".src],",a,'["dstRGB" in ',y,"?",y,".dstRGB:",y,".dst],",a,'["srcAlpha" in ',y,"?",y,".srcAlpha:",y,".src],",a,'["dstAlpha" in ',y,"?",y,".dstAlpha:",y,".dst]);");break;case "stencil.mask":p(g,".stencilMask(",y,");");break;case "stencil.func":a=
A(M);p(g,".stencilFunc(",a,"[",y,'.cmp||"always"],',y,".ref|0,",'"mask" in ',y,"?",y,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":c=A(w);p(g,".stencilOpSeparate(","stencil.opFront"===a?1028:1029,",",c,"[",y,'.fail||"keep"],',c,"[",y,'.zfail||"keep"],',c,"[",y,'.pass||"keep"]);');break;case "polygonOffset.offset":p(g,".polygonOffset(",y,".factor||0,",y,".units||0);");break;case "cull.face":p(g,".cullFace(",y,'==="front"?',1028,":",1029,");");break;case "lineWidth":p(g,".lineWidth(",
y,");");break;case "frontFace":p(g,".frontFace(",y,'==="cw"?',2304,":",2305,");");break;case "colorMask":p(g,".colorMask(",y,"[0],",y,"[1],",y,"[2],",y,"[3]);");break;case "sample.coverage":p(g,".sampleCoverage(",y,".value,",y,".invert);");break;case "scissor.box":case "viewport":a=v(a);p(a,".push(",y,".x||0,",y,".y||0,",y,".w||-1,",y,".h||-1);");break;case "primitives":case "offset":case "count":case "elements":break;default:q.raise("unsupported option for batch",a)}});("viewport"in r||"framebuffer"in
r)&&p(v("viewport"),".poll();");("scissor.box"in r||"framebuffer"in r)&&p(v("scissor.box"),".poll();");"framebuffer"in r&&p(ia,".pop();");var ga=k.uniforms,ma=[];Object.keys(D).forEach(function(a){var b=Y(ga,a);if(b){var y=b.info.type,f=A(b.location);a=W(D[a]);35678===b.info.type||35680===b.info.type?(b=F(a+"._texture"),ma.push(b),p(c(g,5124,f,b+".bind()"))):p(c(g,y,f,a))}});ma.forEach(function(a){p(a,".unbind();")});var ta=k.attributes;Object.keys(G).forEach(function(a){var g=Y(ta,a);g&&p(J,"(",
g.location,",",A(a.bindings[g.location]),",",W(G[a]),",",b(g.info.type),");")});r.count?p(B,"=",W(r.count),";"):K("count")||p("if(",B,"){");r.offset&&p(O,"=",W(r.offset),";");r.primitive&&(k=A(l),p(X,"=",k,"[",W(r.primitive),"];"));oa&&(k=W(r.elements),p(da,"=",k,"?",k,"._elements:null;"));K("offset")&&p(O,"=0;");p("if(",da,"){");K("count")&&p(B,"=",da,".vertCount;","if(",B,">0){");K("primitive")&&p(X,"=",da,".primType;");oa&&p(g,".bindBuffer(",34963,",",da,".buffer.buffer);");Q&&(r.instances&&p(z,
"=",W(r.instances),";"),p("if(",z,">0){",L,".drawElementsInstancedANGLE(",X,",",B,",",da,".type,",O,",",z,");}else{"));p(g,".drawElements(",X,",",B,",",da,".type,",O,");");Q&&p("}");K("count")&&p("}");p("}else{");K("count")||(K("primitive")&&p(X,"=",4,";"),Q&&p("if(",z,">0){",L,".drawArraysInstancedANGLE(",X,",",O,",",B,",",z,");}else{"),p(g,".drawArrays(",X,",",O,",",B,");}"),Q&&p("}"));p("}}",E);return N.compile().batch}var ka=t.contextState,C={add:32774,subtract:32778,"reverse subtract":32779};
h.ext_blend_minmax&&(C.min=32775,C.max=32776);var Q=0;return{draw:function(a){var k=f(),q=k.link,r=k.proc("draw"),l=r.def,D=q(e),G=q(a.program),t=q(ea.bind),K=q(ca.count),N=q(ca.offset),A=q(ca.instances),p=q(ca.primitive),E=q(m.elements),F=[];r(D,".useProgram(",G,");");a.attributes.forEach(function(a){var g=q(ea.def(a.name));r(t,"(",a.location,",",q(ea.bindings[a.location]),",",g,".records[",g,".top]",",",b(a.info.type),");")});a.uniforms.forEach(function(a){var b=q(a.location),f=q(n.def(a.name)),
f=f+"["+f+".length-1]";a=a.info.type;35678===a||35680===a?(a=l(f+"._texture"),F.push(a),r(c(D,5124,b,a+".bind()"))):r(c(D,a,b,f))});F.forEach(function(a){r(a,".unbind();")});a=l(d(p));K=l(d(K));N=l(d(N));E=l(d(E));r("if(",K,"){");(G=h.angle_instanced_arrays)?(A=l(d(A)),G=q(G),r("if(",E,"){",E,".bind();","if(",A,">0){",G,".drawElementsInstancedANGLE(",a,",",K,",",E,".type,",N,",",A,");}else{",D,".drawElements(",a,",",K,",",E,".type,",N,");}","}else if(",A,">0){",G,".drawArraysInstancedANGLE(",a,",",
N,",",K,",",A,");}else{",D,".drawArrays(",a,",",N,",",K,");}}")):r("if(",E,"){",D,".drawElements(",a,",",K,",",E,".type,",N,");}","}else{",D,".drawArrays(",a,",",N,",",K,");}");return k.compile().draw},command:function(b,c,e,u,h,x,t){function v(a){var b=da[a];return b?b:b=da[a]=p(ka[a])}function K(a,b){var g=v(a);z(g,".push(",b,");");L(g,".pop();")}function N(a){var b=a.id,g=ta[b];if(g)return g;g=a.func?H.def(p(a.data),"(",ra,",0,",wa,")"):H.def(ra,".",a.data);return ta[b]=g}var A=f(),p=A.link,E=
A.block,F=A.proc,aa=Q++,g=p(ma);p(r);var I=p(T.fragShaders),J=p(T.vertShaders),S=p(T.programs),ia=p(R),B={count:p(ca.count),offset:p(ca.offset),instances:p(ca.instances),primitive:p(ca.primitive)},O=p(m.elements),sa=p(l),X=p(M),qa=p(w),da={},z=E(),L=E(),va=!1;Object.keys(b).sort(a).forEach(function(a){var g=b[a];switch(a){case "frag":va=!0;z(I,".push(",p(r.id(g)),");");L(I,".pop();");break;case "vert":va=!0;z(J,".push(",p(r.id(g)),");");L(J,".pop();");break;case "framebuffer":a=R.getFramebuffer(g);
q(null===g||a,"invalid framebuffer object");a=v("viewport");var c=v("scissor.box");z("if(",ia,".push(",p(g&&g._framebuffer),")){",a,".setDirty();",c,".setDirty();","}");L("if(",ia,".pop()){",a,".setDirty();",c,".setDirty();","}");break;case "count":case "offset":case "instances":q.nni(g,a);z(B[a],".push(",g,");");L(B[a],".pop();");break;case "primitive":q.parameter(g,l,"not a valid drawing primitive");z(B.primitive,".push(",l[g],");");L(B.primitive,".pop();");break;case "elements":c=m.getElements(g);
g=!("primitive"in b);a=!("count"in b);c?(c=p(c),z(O,".push(",c,");"),g&&z(B.primitive,".push(",c,".primType);"),a&&z(B.count,".push(",c,".vertCount);")):(z(O,".push(null);"),g&&z(B.primitive,".push(",4,");"),a&&z(B.count,".push(0);"));g&&L(B.primitive,".pop();");a&&L(B.count,".pop();");"offset"in b||(z(B.offset,".push(0);"),L(B.offset,".pop();"));L(O,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":q.type(g,
"boolean",a);K(a,g);break;case "depth.func":q.parameter(g,M,a);K(a,M[g]);break;case "depth.range":q(Array.isArray(g)&&2===g.length&&g[0]<=g[1],"depth range is 2d array");a=v(a);z(a,".push(",g[0],",",g[1],");");L(a,".pop();");break;case "blend.func":a=v(a);q.type(g,"object","blend func must be an object");var c="srcRGB"in g?g.srcRGB:g.src,f="srcAlpha"in g?g.srcAlpha:g.src,d="dstRGB"in g?g.dstRGB:g.dst,g="dstAlpha"in g?g.dstAlpha:g.dst;q.parameter(c,P);q.parameter(f,P);q.parameter(d,P);q.parameter(g,
P);z(a,".push(",P[c],",",P[d],",",P[f],",",P[g],");");L(a,".pop();");break;case "blend.equation":a=v(a);"string"===typeof g?(q.parameter(g,C,"invalid blend equation"),z(a,".push(",C[g],",",C[g],");")):"object"===typeof g?(q.parameter(g.rgb,C,"invalid blend equation rgb"),q.parameter(g.alpha,C,"invalid blend equation alpha"),z(a,".push(",C[g.rgb],",",C[g.alpha],");")):q.raise("invalid blend equation");L(a,".pop();");break;case "blend.color":q(Array.isArray(g)&&4===g.length,"blend color is a 4d array");
a=v(a);z(a,".push(",g[0],",",g[1],",",g[2],",",g[3],");");L(a,".pop();");break;case "stencil.mask":q.type(g,"number","stencil mask must be an integer");a=v(a);z(a,".push(",g,");");L(a,".pop();");break;case "stencil.func":q.type(g,"object","stencil func must be an object");c=g.cmp||"keep";f=g.ref||0;g="mask"in g?g.mask:-1;q.parameter(c,M,"invalid stencil func cmp");q.type(f,"number","stencil func ref");q.type(g,"number","stencil func mask");a=v(a);z(a,".push(",M[c],",",f,",",g,");");L(a,".pop();");
break;case "stencil.opFront":case "stencil.opBack":q.type(g,"object",a);c=g.fail||"keep";f=g.zfail||"keep";g=g.pass||"keep";q.parameter(c,w,a);q.parameter(f,w,a);q.parameter(g,w,a);a=v(a);z(a,".push(",w[c],",",w[f],",",w[g],");");L(a,".pop();");break;case "polygonOffset.offset":q.type(g,"object",a);c=g.factor||0;g=g.units||0;q.type(c,"number","offset.factor");q.type(g,"number","offset.units");a=v(a);z(a,".push(",c,",",g,");");L(a,".pop();");break;case "cull.face":c=0;"front"===g?c=1028:"back"===g&&
(c=1029);q(!!c,"cull.face");g=v(a);z(g,".push(",c,");");L(g,".pop();");break;case "lineWidth":c=k.lineWidthDims;q("number"===typeof g&&g>=c[0]&&g<=c[1],"invalid line width, must positive number between "+c[0]+" and "+c[1]);K(a,g);break;case "frontFace":c=0;"cw"===g?c=2304:"ccw"===g&&(c=2305);q(!!c,"frontFace");g=v(a);z(g,".push(",c,");");L(g,".pop();");break;case "colorMask":q(Array.isArray(g)&&4===g.length,"color mask must be length 4 array");a=v(a);z(a,".push(",g.map(function(a){return!!a}).join(),
");");L(a,".pop();");break;case "sample.coverage":q.type(g,"object",a);c="value"in g?g.value:1;g=!!g.invert;q("number"===typeof c&&0<=c&&1>=c,"sample value");a=v(a);z(a,".push(",c,",",g,");");L(a,".pop();");break;case "viewport":case "scissor.box":q("object"===typeof g&&g,a+" is an object");var c=g.x||0,f=g.y||0,e=d=-1;q("number"===typeof c&&0<=c,a+".x must be a positive int");q("number"===typeof f&&0<=f,a+".y must be a positive int");"w"in g&&(d=g.w,q("number"===typeof d&&0<=d,a+".w must be a positive int"));
"h"in g&&(e=g.h,q("number"===typeof e&&0<=e,a+".h must be a positive int"));g=v(a);z(g,".push(",c,",",f,",",d,",",e,");");L(g,".pop();");break;default:q.raise("unsupported parameter "+a)}});if(va){if(b.frag&&b.vert)E=b.frag,z(S,".push(",p(T.create(r.id(b.vert),r.id(E))),");");else{var E=z.def(I,"[",I,".length-1]"),oa=z.def(J,"[",J,".length-1]"),ua=p(T.create);z(S,".push(",ua,"(",oa,",",E,"));")}L(S,".pop();")}Object.keys(c).forEach(function(a){var g=p(n.def(a));a=c[a];a="function"===typeof a&&a._reglType?
p(a):Array.isArray(a)?p(a.slice()):+a;z(g,".push(",a,");");L(g,".pop();")});Object.keys(e).forEach(function(a){var g=p(ea.def(a)),b=e[a];if("number"===typeof b)z(g,".pushVec(",+b,",0,0,0);");else if(q(!!b,"invalid attribute: "+a),Array.isArray(b))z(g,".pushVec(",[b[0]||0,b[1]||0,b[2]||0,b[3]||0],");");else{var c=G.getBuffer(b),f=0,d=0,J=0,k=0,r=!1,u=5126;c?u=c.dtype:(q.type(b,"object",'invalid attribute "'+a+'"'),c=G.getBuffer(b.buffer),f=b.size||0,d=b.stride||0,J=b.offset||0,k=b.divisor||0,r=b.normalized||
!1,q(!!c,"invalid attribute "+a+".buffer"),u=c.dtype,"type"in b&&(q.parameter(b.type,D,"attribute type"),u=D[b.type]));q(!!c,"invalid attribute "+a+".buffer");q.nni(d,a+".stride");q.nni(J,a+".offset");q.nni(k,a+".divisor");q.type(r,"boolean",a+".normalized");q.oneOf(f,[0,1,2,3,4],a+".size");z(g,".pushPtr(",[p(c),f,J,d,k,r,u].join(),");")}L(g,".pop();")});var H=A.block(),V=A.block(),wa,ra;t&&(wa=p(ja),ra=z.def());var ta={};Object.keys(u).sort(a).forEach(function(a){var g=N(u[a]);switch(a){case "framebuffer":a=
v("viewport");var c=v("scissor.box");H("if(",ia,".push(",g,"&&",g,"._framebuffer)){",a,".setDirty();",c,".setDirty();","}");V("if(",ia,".pop()){",a,".setDirty();",c,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":a=v(a);H(a,".push(",g,");");V(a,".pop();");break;case "count":case "offset":case "instances":a=
B[a];H(a,".push(",g,");");V(a,".pop();");break;case "primitive":a=B.primitive;H(a,".push(",sa,"[",g,"]);");V(a,".pop();");break;case "depth.func":a=v(a);H(a,".push(",X,"[",g,"]);");V(a,".pop();");break;case "blend.func":a=v(a);c=p(P);H(a,".push(",c,'["srcRGB" in ',g,"?",g,".srcRGB:",g,".src],",c,'["dstRGB" in ',g,"?",g,".dstRGB:",g,".dst],",c,'["srcAlpha" in ',g,"?",g,".srcAlpha:",g,".src],",c,'["dstAlpha" in ',g,"?",g,".dstAlpha:",g,".dst]);");V(a,".pop();");break;case "blend.equation":a=v(a);c=
p(C);H("if(typeof ",g,'==="string"){',a,".push(",c,"[",g,"],",c,"[",g,"]);","}else{",a,".push(",c,"[",g,".rgb],",c,"[",g,".alpha]);","}");V(a,".pop();");break;case "blend.color":a=v(a);H(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");V(a,".pop();");break;case "stencil.mask":a=v(a);H(a,".push(",g,");");V(a,".pop();");break;case "stencil.func":a=v(a);H(a,".push(",X,"[",g,".cmp],",g,".ref|0,",'"mask" in ',g,"?",g,".mask:-1);");V(a,".pop();");break;case "stencil.opFront":case "stencil.opBack":a=v(a);
H(a,".push(",qa,"[",g,'.fail||"keep"],',qa,"[",g,'.zfail||"keep"],',qa,"[",g,'.pass||"keep"]);');V(a,".pop();");break;case "polygonOffset.offset":a=v(a);H(a,".push(",g,".factor||0,",g,".units||0);");V(a,".pop();");break;case "cull.face":a=v(a);H(a,".push(",g,'==="front"?',1028,":",1029,");");V(a,".pop();");break;case "frontFace":a=v(a);H(a,".push(",g,'==="cw"?',2304,":",2305,");");V(a,".pop();");break;case "colorMask":a=v(a);H(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");V(a,".pop();");break;
case "sample.coverage":a=v(a);H(a,".push(",g,".value,",g,".invert);");V(a,".pop();");break;case "scissor.box":case "viewport":a=v(a);H(a,".push(",g,".x||0,",g,".y||0,",'"w" in ',g,"?",g,".w:-1,",'"h" in ',g,"?",g,".h:-1);");V(a,".pop();");break;case "elements":a=!("primitive"in u)&&!("primitive"in b);var c=!("count"in u)&&!("count"in b),f=!("offset"in u)&&!("offset"in b),d=H.def();H("if(",g,"){",d,"=",g,"._elements;",O,".push(",d,");",a?B.primitive+".push("+d+".primType);":"",c?B.count+".push("+d+
".vertCount);":"",f?B.offset+".push("+d+".offset);":"","}else{",O,".push(null);","}");V(O,".pop();","if(",g,"){",a?B.primitive+".pop();":"",c?B.count+".pop();":"",f?B.offset+".pop();":"","}");break;default:q.raise("unsupported dynamic option: "+a)}});Object.keys(h).forEach(function(a){var g=p(n.def(a));a=N(h[a]);H(g,".push(",a,");");V(g,".pop();")});Object.keys(x).forEach(function(a){var g=p(ea.def(a));a=N(x[a]);H(g,".pushDyn(",a,");");V(g,".pop();")});E=F("scope");oa=E.arg();ua=E.arg();E(z);t&&E(ra,
"=",oa,";",H);E(ua,"();",t?V:"",L);E=F("draw");E(z);t&&E(ra,"=",E.arg(),";",H);oa=d(S);E(g,"();","if(",oa,")",oa,".draw(",t?ra:"",");",t?V:"",L);var pa=F("batch");pa(z);t=pa.def(d(S));F=p(function(a,g,c){var f=a.batchCache[aa];f||(f=a.batchCache[aa]=ga(a,u,h,x,b));return f(g,c)});pa("if(",t,"){",g,"();",F,"(",t,",",pa.arg(),",",pa.arg(),");");Object.keys(u).forEach(function(a){(a=da[a])&&pa(a,".setDirty();")});pa("}",L);return A.compile()}}}},{"./check":5,"./codegen":7,"./constants/dtypes.json":10,
"./constants/primitives.json":11}],9:[function(e,h,n){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],10:[function(e,h,n){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],11:[function(e,h,n){h.exports=
{points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],12:[function(e,h,n){function b(b,f){function d(){var c=window.innerWidth,f=window.innerHeight;b!==document.body&&(f=b.getBoundingClientRect(),c=f.right-f.left,f=f.top-f.bottom);e.width=n*c;e.height=n*f;a(e.style,{width:c+"px",height:f+"px"})}var e=document.createElement("canvas"),h=c(e,f);a(e.style,{border:0,margin:0,padding:0,top:0,left:0});b.appendChild(e);b===document.body&&(e.style.position="absolute",
a(b.style,{margin:0,padding:0}));var n=+h.options.pixelRatio;window.addEventListener("resize",d,!1);var w=h.options.onDestroy;h.options=a(a({},h.options),{onDestroy:function(){window.removeEventListener("resize",d);b.removeChild(e);w&&w()}});d();return h}function c(b,c){function e(a){try{return b.getContext(a,h)}catch(c){return null}}var h=c.glOptions||{},P=e("webgl")||e("experimental-webgl")||e("webgl-experimental");d(P,"webgl not supported");return{gl:P,options:a({pixelRatio:window.devicePixelRatio},
c)}}var d=e("./check"),a=e("./extend");h.exports=function(d){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:d[0],options:d[1]||{}};var f=document.body,e=d[1]||{};if("string"===typeof d[0])f=document.querySelector(d[0])||document.body;else if("object"===typeof d[0])if(d[0]instanceof HTMLElement)f=d[0];else{if(d[0]instanceof WebGLRenderingContext)return{gl:d[0],options:a({pixelRatio:1},e)};e=d[0]}return f.nodeName&&"CANVAS"===f.nodeName.toUpperCase()?c(f,e):b(f,e)}},{"./check":5,
"./extend":16}],13:[function(e,h,n){h.exports=function(b){return{primitive:[4],count:[0],offset:[0],instances:[0]}}},{}],14:[function(e,h,n){function b(a,b){this.id=d++;this.func=a;this.data=b}function c(a,d){switch(typeof a){case "boolean":case "number":case "string":return new b(!1,a);case "function":return new b(!0,a);default:return c}}var d=0;h.exports={define:c,isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof b},unbox:function(a,d){return a instanceof b?a:"function"===
typeof a&&a!==c?new b(!0,a):new b(!1,d)}}},{}],15:[function(e,h,n){var b=e("./check"),c=e("./is-typed-array"),d=e("./is-ndarray"),a=e("./constants/primitives.json");h.exports=function(e,f,l){function h(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}h.prototype.bind=function(){this.buffer.bind()};return{create:function(e){function q(e){var l=f.oes_element_index_uint;if(e)if("number"===typeof e)u(e);else{var k=null,h="static",m=0;Array.isArray(e)||c(e)||d(e)?k=e:(b.type(e,"object","invalid arguments for elements"),
"data"in e&&(k=e.data),"usage"in e&&(h=e.usage),"length"in e&&(m=e.length));Array.isArray(k)||d(k)&&"array"===k.dtype||"type"in e?u({type:e.type||(l?"uint32":"uint16"),usage:h,data:k,length:m}):u({usage:h,data:k,length:m});if(Array.isArray(k)||c(k))u.dimension=3}else u();k=w.buffer.byteLength;h=0;switch(w.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;k>>=1;break;case 5125:case 5124:b(l,"32 bit element buffers not supported");h=5125;k>>=2;break;default:b.raise("invalid element buffer type")}l=
4;m=w.buffer.dimension;1===m&&(l=0);2===m&&(l=1);3===m&&(l=4);"object"===typeof e&&("primitive"in e&&(l=e.primitive,b.parameter(l,a),l=a[l]),"count"in e&&(k=e.vertCount|0));w.primType=l;w.vertCount=k;w.type=h;return q}var w=new h,u=l.create(null,34963,!0);w.buffer=u._buffer;q(e);q._reglType="elements";q._elements=w;q.destroy=function(){b(null!==w.buffer,"must not double destroy elements");u.destroy();w.buffer=null};return q},elements:[null],getElements:function(a){return a&&a._elements instanceof
h?a._elements:null}}}},{"./check":5,"./constants/primitives.json":11,"./is-ndarray":19,"./is-typed-array":20}],16:[function(e,h,n){h.exports=function(b,c){for(var d=Object.keys(c),a=0;a<d.length;++a)b[d[a]]=c[d[a]];return b}},{}],17:[function(e,h,n){h.exports=function(b){function c(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(a){try{d[a]=
b.getExtension(a)}catch(c){}})}var d={};c();return{extensions:d,refresh:c}}},{}],18:[function(e,h,n){var b=e("./check"),c=e("./values"),d=e("./extend"),a=[1029];h.exports=function(e,f,l,h,n){function M(a,b,c,f){this.target=a;this.level=b;this.texture=c;this.renderbuffer=f}function w(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function u(a,c,f){if(a.texture)b.oneOf(a.texture._texture.params.internalformat,c,"unsupported texture format for attachment");
else b.oneOf(a.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")}function r(a,c){var f=c.width,d=c.height;if(a.texture){var e=a.texture._texture,k=Math.max(1,e.params.width>>a.level),u=Math.max(1,e.params.height>>a.level),f=f||k,d=d||u;b(k===f&&u===d,"inconsistent width/height for supplied texture");b(0>e.pollId,"polling fbo textures not supported")}else e=a.renderbuffer._renderbuffer,f=f||e.width,d=d||e.height,b(e.width===f&&e.height===d,"inconsistent width/height for renderbuffer"),
b(0<=fa.indexOf(e.format),"renderbuffer format not compatible with color channels");e.refCount+=1;c.width=f;c.height=d}function x(a,b){b?b.texture?e.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,b.level):e.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer):e.framebufferTexture2D(36160,a,3553,null,0)}function k(a){var c=3553,f=0,d=null,e=null,k=a;"object"===typeof a&&(k=a.data,"level"in a&&(f=a.level|0),"target"in a&&(c=a.target|0));b.type(k,"function",
"invalid attachment data");k=a._reglType;"texture"===k?(d=a,34067===d._texture.target?b(34069<=c&&34075>c,"invalid cube map target"):b(3553===c)):"renderbuffer"===k?(e=a,c=36161,f=0):b.raise("invalid regl object for attachment");return new M(c,f,d,e)}function G(a){return a&&(a.texture||a.renderbuffer)}function m(){this.id=U++;Z[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=
this.ownsColor=!1}function v(a){e.isFramebuffer(a.framebuffer)||(a.framebuffer=e.createFramebuffer());Y=!0;e.bindFramebuffer(36160,a.framebuffer);for(var c=a.colorAttachments,d=0;d<c.length;++d)x(36064+d,c[d]);for(d=c.length;d<l.maxColorAttachments;++d)x(36064+d,null);x(36096,a.depthAttachment);x(36128,a.stencilAttachment);x(33306,a.depthStencilAttachment);f.webgl_draw_buffers&&f.webgl_draw_buffers.drawBuffersWEBGL(ba[c.length]);a=e.checkFramebufferStatus(36160);36053!==a&&b.raise("framebuffer configuration not supported, status = "+
na[a])}function R(a){a=a.framebuffer;b(a,"must not double destroy framebuffer");e.isFramebuffer(a)&&e.deleteFramebuffer(a)}function t(){return W[W.length-1]}var na={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"},ea={rgba:6408},T={rgba4:32854,rgb565:36194,"rgb5 a1":32855};f.ext_srgb&&(T.srgba=35907);f.ext_color_buffer_half_float&&(T.rgba16f=34842,T.rgb16f=34843);f.webgl_color_buffer_float&&(T.rgba32f=34836);var ca=
[33189],ja=[36168],ma=[34041],ga=[],ka=[],C=[];f.webgl_depth_texture&&(ga.push(6402),C.push(34041));var Q=d(d({},ea),T),la=c(ea),fa=c(T),T=5121,ha={uint8:5121};f.oes_texture_half_float&&(T=ha["half float"]=36193);f.oes_texture_float&&(T=ha["float"]=5126);ha.best=T;var ba=function(){for(var a=Array(l.maxDrawbuffers),b=0;b<=l.maxDrawbuffers;++b)for(var c=a[b]=Array(b),f=0;f<b;++f)c[f]=36064+f;return a}(),U=0,Z={},W=[null],Y=!0;return{top:t,dirty:function(){return Y},push:function(a){a=a||null;Y=Y||
a!==t();W.push(a);return Y},pop:function(){var a=t();W.pop();return Y=Y||a!==t()},getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof m)?a:null},poll:function(){if(Y){var b=W[W.length-1],c=f.webgl_draw_buffers;b?(e.bindFramebuffer(36160,b.framebuffer),c&&c.drawBuffersWEBGL(ba[b.colorAttachments.length])):(e.bindFramebuffer(36160,null),c&&c.drawBuffersWEBGL(a));Y=!1}},create:function(a){function c(a){var l,m=a||{};l=f.webgl_draw_buffers;
var t=0,g=0;"shape"in m?(a=m.shape,b(Array.isArray(a)&&2<=a.length,"invalid shape for framebuffer"),t=a[0],g=a[1]):("radius"in m&&(t=g=m.radius),"width"in m&&(t=m.width),"height"in m&&(g=m.height));var I=null;a=!1;if("colorBuffers"in m||"colorBuffer"in m){I=m.colorBuffers||m.colorBuffer;Array.isArray(I)||(I=[I]);d.width=t;d.height=g;1<I.length&&b(l,"multiple render targets not supported");b(0<=I.length,"must specify at least one color attachment");I=I.map(k);for(l=0;l<I.length;++l)t=I[l],u(t,la,fa),
r(t,d);t=d.width;g=d.height}else{var J=!0,S="rgba",ia="uint8",B=1;a=!0;d.width=t||e.drawingBufferWidth;d.height=g||e.drawingBufferHeight;"format"in m&&(S=m.format,b.parameter(S,Q,"invalid color format"),J=S in ea);"type"in m&&(b(J,"colorType can not be set for renderbuffer targets"),ia=m.type,b.parameter(ia,ha,"invalid color type"));"colorCount"in m&&(B=m.colorCount|0,b(0<=B,"color count must be positive"));if(d.ownsColor)for(I=d.colorAttachments;I.length>B;)w(I.pop());else I=[];for(l=0;l<I.length;++l){var O;
a:{O=I[l];var x=J,X=S,R=t,da=g;if(O.texture){var z=O.texture;if(x){z({format:X,type:ia,width:R,height:da});z._texture.refCount+=1;O=!0;break a}}else if(z=O.renderbuffer,!x){z({format:X,width:R,height:da});z._renderbuffer.refCount+=1;O=!0;break a}w(O);O=!1}O||(I[l--]=I[I.length-1],I.pop())}for(;I.length<B;)J?I.push(new M(3553,0,h.create({format:S,type:ia,width:t,height:g},3553),null)):I.push(new M(36161,0,null,n.create({format:S,width:t,height:g})))}b(0<I.length,"must specify at least one color buffer");
d.width=t;d.height=g;S=J=l=null;ia=!1;B=0;"depthBuffer"in m&&(l=k(m.depthBuffer),u(l,ga,ca),B+=1);"stencilBuffer"in m&&(J=k(m.stencilBuffer),u(J,ka,ja),B+=1);"depthStencilBuffer"in m&&(S=k(m.depthStencilBuffer),u(S,C,ma),B+=1);if(l||J||S)b(1===B,"can specify only one of depth, stencil or depthStencil attachment"),r(l||J||S,d);else if(B=!0,x=O=!1,"depth"in m&&(B=!!m.depth),"stencil"in m&&(O=!!m.stencil),"depthTexture"in m&&(x=!!m.depthTexture),m=d.depthAttachment||d.stencilAttachment||d.depthStencilAttachment,
X=null,B||O)ia=!0,x?(b(f.webgl_depth_texture,"depth texture extension not supported"),b(B,"stencil only textures not supported"),x=O?"depth stencil":"depth",d.ownsDepthStencil&&m.texture?(m.texture({format:x,width:t,height:g}),m.texture._texture.refCount+=1,X=m):X=new M(3553,0,h.create({format:x,width:t,height:g},3553),null)):(x=B?O?"depth stencil":"depth":"stencil",d.ownsDepthStencil&&m.renderbuffer?(m.renderbuffer({format:x,width:t,height:g}),m.renderbuffer._renderbuffer.refCount+=1,X=m):X=new M(36161,
0,null,n.create({format:x,width:t,height:g}))),B?O?S=X:l=X:J=X;t=d;t.colorAttachments.forEach(w);w(t.depthAttachment);w(t.stencilAttachment);w(t.depthStencilAttachment);d.colorAttachments=I;d.depthAttachment=l;d.stencilAttachment=J;d.depthStencilAttachment=S;d.ownsColor=a;d.ownsDepthStencil=ia;c.color=I.map(G);c.depth=G(l);c.stencil=G(J);c.depthStencil=G(S);v(d);c.width=d.width;c.height=d.height;return c}var d=new m;c(a);c._reglType="framebuffer";c._framebuffer=d;c._destroy=function(){R(d)};return c},
clear:function(){c(Z).forEach(R)},refresh:function(){c(Z).forEach(v)}}}},{"./check":5,"./extend":16,"./values":34}],19:[function(e,h,n){var b=e("./is-typed-array");h.exports=function(c){return"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||b(c.data))}},{"./is-typed-array":20}],20:[function(e,h,n){var b=e("./constants/arraytypes.json");h.exports=function(c){return Object.prototype.toString.call(c)in
b}},{"./constants/arraytypes.json":9}],21:[function(e,h,n){h.exports=function(b,c){var d=1;c.ext_texture_filter_anisotropic&&(d=b.getParameter(34047));var a=1,e=1;c.webgl_draw_buffers&&(a=b.getParameter(34852),e=b.getParameter(36063));return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(c).filter(function(a){return!!c[a]}),maxAnisotropic:d,
maxDrawbuffers:a,maxColorAttachments:e,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),
maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938)}}},{}],22:[function(e,h,n){h.exports=function(b,c){if("undefined"!==typeof document){var d;d=(d=/\.(\w+)(\?.*)?$/.exec(b))&&d[1]?d[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(d))return d=document.createElement("video"),d.autoplay=!0,d.loop=!0,c&&(d.crossOrigin=c),d.src=
b,d;if(0<=["dds"].indexOf(d))return d=new XMLHttpRequest,d.responseType="arraybuffer",d.open("GET",b,!0),d.send(),d;d=new Image;c&&(d.crossOrigin=c);d.src=b;return d}return null}},{}],23:[function(e,h,n){var b=e("./check");h.exports=function(e){function h(a){for(var b=fa,c=ha,d=0;d<Y;++d){var f=Math.max(1,b+3>>2)*Math.max(1,c+3>>2)*Z;N.pixels.push({target:a,miplevel:d,width:b,height:c,data:new Uint8Array(e,K,f)});K+=f;b>>=1;c>>=1}}var n=new Int32Array(e);b(n[0]===c,"invalid magic number for dds header");
var la=n[na];b(la&x,"unsupported dds format");var fa=n[T],ha=n[ea],ba=M,U=0,Z=0,W=4;switch(n[ma]){case G:Z=8;la&k?(W=3,U=q):U=f;break;case m:Z=16;U=l;break;case v:Z=16;U=D;break;case R:Z=8;U=P;break;default:b.raise("unsupported dds texture format")}var Y=1;n[ja]&w&&(Y=Math.max(1,n[ca]));var K=n[t]+4,N={width:fa,height:ha,channels:W,format:U,type:ba,compressed:!0,cube:!1,pixels:[]},n=n[ga];if(n&u)for(b((n&r)===r,"missing cubemap faces"),N.cube=!0,n=0;6>n;++n)h(a+n);else h(d);return N};var c=542327876,
d=3553,a=34069,q=33776,f=33777,l=33778,D=33779,P=36196,M=5121,w=131072,u=512,r=64512,x=4,k=64,G=827611204,m=861165636,v=894720068,R=826496069,t=1,na=2,ea=3,T=4,ca=7,ja=20,ma=21,ga=28},{"./check":5}],24:[function(e,h,n){h.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(b){return requestAnimationFrame(b)},cancel:function(b){return cancelAnimationFrame(b)}}:{next:function(b){setTimeout(b,30)},cancel:clearTimeout}},{}],25:[function(e,h,n){var b=
e("./check"),c=e("./is-typed-array");h.exports=function(d,a,e){return function(f){var l=f||{};c(f)?l={data:l}:2===arguments.length?l={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof f&&(l={});a();var h=l.x||0,n=l.y||0,M=l.width||e.width,w=l.height||e.height,u=M*w*4,l=l.data||new Uint8Array(u);b.isTypedArray(l);b(l.byteLength>=u,"data buffer too small");d.pixelStorei(3333,4);d.readPixels(h,n,M,w,6408,5121,l);return l}}},{"./check":5,"./is-typed-array":20}],26:[function(e,h,n){var b=e("./check"),
c=e("./values");h.exports=function(d,a,e){function f(){this.id=M++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function l(a){d.isRenderbuffer(a.renderbuffer)||(a.renderbuffer=d.createRenderbuffer());d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,a.width,a.height)}function h(a){var c=a.renderbuffer;b(c,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.isRenderbuffer(c)&&d.deleteRenderbuffer(c);a.renderbuffer=
null;a.refCount=0;delete w[a.id]}var n={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(n.srgba=35907);a.ext_color_buffer_half_float&&(n.rgba16f=34842,n.rgb16f=34843);a.webgl_color_buffer_float&&(n.rgba32f=34836);var M=0,w={};f.prototype.decRef=function(){0===--this.refCount&&h(this)};return{create:function(a){function c(a){a=a||{};var f=0,m=0;"shape"in a?(m=a.shape,b(Array.isArray(m)&&2<=m.length,"invalid renderbuffer shape"),f=m[0]|0,m=m[1]|
0):("radius"in a&&(f=m=a.radius|0),"width"in a&&(f=a.width|0),"height"in a&&(m=a.height|0));var h=e.maxRenderbufferSize;b(0<=f&&0<=m&&f<=h&&m<=h,"invalid renderbuffer size");c.width=d.width=Math.max(f,1);c.height=d.height=Math.max(m,1);d.format=32854;"format"in a&&(a=a.format,b.parameter(a,n,"invalid render buffer format"),d.format=n[a]);l(d);return c}var d=new f;w[d.id]=d;c(a);c._reglType="renderbuffer";c._renderbuffer=d;c.destroy=function(){d.decRef()};return c},refresh:function(){c(w).forEach(l)},
clear:function(){c(w).forEach(h)}}}},{"./check":5,"./values":34}],27:[function(e,h,n){function b(a,b,c){this.name=a;this.location=b;this.info=c}var c=e("./check"),d=e("./values");h.exports=function(a,e,f,l,h){function n(b,d){var f=35632===b?u:r,e=f[d];if(!e){var k=h.str(d),e=a.createShader(b);a.shaderSource(e,k);a.compileShader(e);c.shaderError(a,e,k,b);f[d]=e}return e}function M(a,b){this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache=
{}}function w(d){var k,h;k=n(35632,d.fragId);h=n(35633,d.vertId);var u=d.program=a.createProgram();a.attachShader(u,k);a.attachShader(u,h);a.linkProgram(u);c.linkError(a,u);var r=a.getProgramParameter(u,35718),D=d.uniforms=[];for(k=0;k<r;++k)if(h=a.getActiveUniform(u,k))if(1<h.size)for(var x=0;x<h.size;++x){var w=h.name.replace("[0]","["+x+"]");f.def(w);D.push(new b(w,a.getUniformLocation(u,w),h))}else f.def(h.name),D.push(new b(h.name,a.getUniformLocation(u,h.name),h));r=a.getProgramParameter(u,
35721);D=d.attributes=[];for(k=0;k<r;++k)if(h=a.getActiveAttrib(u,k))e.def(h.name),D.push(new b(h.name,a.getAttribLocation(u,h.name),h));d.draw=l(d);d.batchCache={}}var u={},r={},x={},k=[];return{create:function(a,b){var c=x[b];c||(c=x[b]={});var d=c[a];d||(d=new M(b,a),w(d),c[a]=d,k.push(d));return d},clear:function(){var b=a.deleteShader.bind(a);d(u).forEach(b);u={};d(r).forEach(b);r={};k.forEach(function(b){a.deleteProgram(b.program)});k.length=0;x={}},refresh:function(){u={};r={};k.forEach(w)},
programs:[null],fragShaders:[h.id("void main(){gl_FragColor=vec4(0,0,0,0);}")],vertShaders:[h.id("void main(){gl_Position=vec4(0,0,0,0);}")]}}},{"./check":5,"./values":34}],28:[function(e,h,n){h.exports=function(b,c){var d=b.length,a=b.slice(),e=b.slice(),f=!1,h=!0;return{push:function(){f=!1;for(var b=0;b<d;++b){var c=arguments[b];f=f||c!==e[b];a.push(c)}},pop:function(){f=!1;a.length-=d;for(var b=0;b<d;++b)f=f||a[a.length-d+b]!==e[b]},poll:function(){var b=a.length-d;if(f||h){switch(d){case 1:c(a[b]);
break;case 2:c(a[b],a[b+1]);break;case 3:c(a[b],a[b+1],a[b+2]);break;case 4:c(a[b],a[b+1],a[b+2],a[b+3]);break;case 5:c(a[b],a[b+1],a[b+2],a[b+3],a[b+4]);break;case 6:c(a[b],a[b+1],a[b+2],a[b+3],a[b+4],a[b+5]);break;default:c.apply(null,a.slice(b,a.length))}for(var n=0;n<d;++n)e[n]=a[b+n];h=f=!1}},setDirty:function(){h=!0}}}},{}],29:[function(e,h,n){var b=e("./stack"),c=e("./codegen");h.exports=function(d,a,e){function f(a,c){var f=b([!!c],function(b){b?d.enable(a):d.disable(a)});f.flag=a;return f}
var h={dither:f(3024),"blend.enable":f(3042),"blend.color":b([0,0,0,0],function(a,b,c,f){d.blendColor(a,b,c,f)}),"blend.equation":b([32774,32774],function(a,b){d.blendEquationSeparate(a,b)}),"blend.func":b([1,0,1,0],function(a,b,c,f){d.blendFuncSeparate(a,b,c,f)}),"depth.enable":f(2929,!0),"depth.func":b([513],function(a){d.depthFunc(a)}),"depth.range":b([0,1],function(a,b){d.depthRange(a,b)}),"depth.mask":b([!0],function(a){d.depthMask(a)}),"cull.enable":f(2884),"cull.face":b([1029],function(a){d.cullFace(a)}),
frontFace:b([2305],function(a){d.frontFace(a)}),colorMask:b([!0,!0,!0,!0],function(a,b,c,f){d.colorMask(a,b,c,f)}),lineWidth:b([1],function(a){d.lineWidth(a)}),"polygonOffset.enable":f(32823),"polygonOffset.offset":b([0,0],function(a,b){d.polygonOffset(a,b)}),"sample.alpha":f(32926),"sample.enable":f(32928),"sample.coverage":b([1,!1],function(a,b){d.sampleCoverage(a,b)}),"stencil.enable":f(2960),"stencil.mask":b([-1],function(a){d.stencilMask(a)}),"stencil.func":b([519,0,-1],function(a,b,c){d.stencilFunc(a,
b,c)}),"stencil.opFront":b([7680,7680,7680],function(a,b,c){d.stencilOpSeparate(1028,a,b,c)}),"stencil.opBack":b([7680,7680,7680],function(a,b,c){d.stencilOpSeparate(1029,a,b,c)}),"scissor.enable":f(3089),"scissor.box":b([0,0,-1,-1],function(b,c,f,e){var h=f,l=a.top();0>f&&(h=l?l.width-b:d.drawingBufferWidth-b);f=e;0>e&&(f=l?l.height-c:d.drawingBufferHeight-c);d.scissor(b,c,h,f)}),viewport:b([0,0,-1,-1],function(b,c,f,k){var h=f,l=a.top();0>f&&(h=l?l.width-b:d.drawingBufferWidth-b);f=k;0>k&&(f=l?
l.height-c:d.drawingBufferHeight-c);d.viewport(b,c,h,f);e.width=h;e.height=f})},n=c(),P=n.proc("poll"),M=n.proc("refresh");Object.keys(h).forEach(function(a){a=n.link(h[a]);P(a,".poll();");M(a,".setDirty();")});var w=n.compile();return{contextState:h,viewport:e,poll:w.poll,refresh:w.refresh,notifyViewportChanged:function(){h.viewport.setDirty();h["scissor.box"].setDirty()}}}},{"./codegen":7,"./stack":28}],30:[function(e,h,n){h.exports=function(){var b={},c=[""];return{id:function(d){var a=b[d];if(a)return a;
a=b[d]=c.length;c.push(d);return a},str:function(b){return c[b]}}}},{}],31:[function(e,h,n){function b(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function c(a){if(!Array.isArray(a))return!1;var b=a.length;if(0===b||!Array.isArray(a[0]))return!1;for(var c=a[0].length,d=1;d<b;++d)if(!Array.isArray(a[d])||a[d].length!==c)return!1;return!0}function d(a){return Object.prototype.toString.call(a)}function a(a){return"[object HTMLCanvasElement]"===d(a)}function q(a){return"[object CanvasRenderingContext2D]"===
d(a)}var f=e("./check"),l=e("./extend"),D=e("./values"),P=e("./is-typed-array"),M=e("./is-ndarray"),w=e("./load-texture"),u=e("./to-half-float"),r=e("./parse-dds"),x=[9984,9986,9985,9987];h.exports=function(e,h,m,n,R){function t(a){this.target=a;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;
this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function na(a){this.target=a;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ea(a,b){var c,d,e=0,l=0,q=0,k=0,m=0,p=0,t=!1,n=!1,u=!1,r=0,w=[0,0,0,0,0,0],v=0,H=!1;for(c=0;c<b.length;++c){d=b[c];var k=k||d.width<<d.miplevel,m=
m||d.height<<d.miplevel,e=e||d.type,l=l||d.format,q=q||d.internalformat,p=p||d.channels,n=n||d.needsPoll,u=u||d.needsListeners,t=t||d.compressed,D=d.miplevel;d=d.target;H=H||0<D;3553===d?r|=1<<D:(d-=34069,w[d]|=1<<D,v|=1<<d)}a.needsPoll=n;a.needsListeners=u;a.width=k;a.height=m;a.format=l;a.internalformat=q;a.type=e;n=H?(k<<1)-1:1;if(3553===a.target)f(0===v,"pixmap type must not contain cubemap faces"),f(r===n,"missing mip map data");else for(f(63===v,"missing cubemap faces"),c=0;6>c;++c)f(w[c]===
n,"missing mip map data");c=0<=x.indexOf(a.minFilter);a.genMipmaps=!H&&(a.genMipmaps||c);H=H||a.genMipmaps;a.minFilter?f(H===c,"min filter inconsistent with mipmap data"):a.minFilter=H?9987:9728;H&&f(k===m&&!(k&k-1)&&!!k,"must be a square power of 2 to support mipmaps");a.genMipmaps&&f(!t,"mipmap generation not supported for compressed textures");a.wrapS=a.wrapS||33071;a.wrapT=a.wrapT||33071;33071===a.wrapS&&33071===a.wrapT||f(!(k&k-1)&&!!k&&!(m&m-1)&&!!m&&!v,"incompatible size for wrap mode, image must be a power of 2");
(5126===e&&!h.oes_texture_float_linear||36193===e&&!h.oes_texture_half_float_linear)&&f(9728===this.magFilter&&9728===this.minFilter,"unsupported filter mode for float texture");for(c=0;c<b.length;++c)d=b[c],t=d.miplevel,d.width&&f(d.width<<t===k,"inconsistent width"),d.height&&f(d.height<<t===m,"inconsistent width"),d.channels?f(d.channels===p,"inconsistent channels"):d.channels=p,d.format?f(d.format===l,"inconsistent format"):d.format=l,d.internalformat?f(d.internalformat===q,"inconsistent internalformat"):
d.internalformat=q,d.type?f(d.type===e,"inconsistent type"):d.type=e,d.copy&&f(5121===d.type&&6408===d.internalformat,"incompatible format/type for copyTexImage2D")}function T(a){this.id=A++;this.refCount=1;this.target=a;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=new na(a);this.pixels=[]}function ca(a,b){function c(a,g){var d=g.mipmap,e;if(Array.isArray(d))for(var f=0;f<d.length;++f)e=new t(a),e.parseFlags(b),e.parseFlags(g),e.parse(d[f],f),h.push(e);
else e=new t(a),e.parseFlags(b),e.parse(g,0),h.push(e)}var d;ga(a);var e=a.params;na.call(e,a.target);var h=a.pixels;h.length=0;e.parse(b);if(3553===a.target)c(3553,b);else{var l=b.faces||b;if(Array.isArray(l))for(f(6===l.length,"invalid number of faces in cube map"),d=0;6>d;++d)c(34069+d,l[d]);else if("string"!==typeof l)for(d=0;6>d;++d)c(34069+d,{})}ea(e,h);e.needsListeners&&ma(a);e.needsPoll&&(a.pollId=E.length,E.push(a));ja(a)}function ja(a){e.isTexture(a.texture)||(a.texture=e.createTexture());
var b=a.target,c=a.unit;0<=c?(e.activeTexture(33984+c),N=c):e.bindTexture(b,a.texture);for(var b=a.pixels,d=a.params,f=0;f<b.length;++f)b[f].upload(d);d.upload();0>c&&((c=aa[N])?e.bindTexture(c.target,c.texture):(a.unit=N,aa[N]=a))}function ma(a){function b(c,d,h){var l=r(h);f(l.format in K,"unsupported dds texture format");l.cube?(f(34067===a.target),f.raise("cube map DDS not yet implemented")):f(3553===a.target);d&&f(1===l.pixels.length,"number of mip levels inconsistent");l.pixels.forEach(function(a){var b=
new t(l.cube?a.target:c);b.channels=l.channels;b.compressed=l.compressed;b.type=l.type;b.internalformat=l.format;b.format=K[l.format];b.width=a.width;b.height=a.height;b.miplevel=a.miplevel||d;b.data=a.data;e.push(b)})}function c(){for(var f=0;f<e.length;++f){var h=e[f],l=h.image,J=h.video,k=h.xhr;l&&l.complete?(h.width=l.naturalWidth,h.height=l.naturalHeight):J&&2<J.readyState?(h.width=J.width,h.height=J.height):k&&4===k.readyState&&(e[f]=e[e.length-1],e.pop(),k.removeEventListener("readystatechange",
ja),b(h.target,h.miplevel,k.response))}ea(d,e);ja(a)}var d=a.params,e=a.pixels;e.forEach(function(a){a.image&&!a.image.complete?a.image.addEventListener("load",c):a.video&&1>a.readyState?a.video.addEventListener("progress",c):a.xhr&&a.xhr.addEventListener("readystatechange",c)});a.cancelPending=function(){e.forEach(function(a){a.image?a.image.removeEventListener("load",c):a.video?a.video.removeEventListener("progress",c):a.xhr&&(a.xhr.removeEventListener("readystatechange",c),a.xhr.abort())})}}function ga(a){var b=
a.cancelPending;b&&(b(),a.cancelPending=null);b=a.pollId;0<=b&&((E[b]=E[E.length-1]).id=b,E.pop(),a.pollId=-1)}function ka(a){var b=a.texture;f(b,"must not double destroy texture");var c=a.unit,d=a.target;0<=c&&(e.activeTexture(33984+c),N=c,e.bindTexture(d,null),aa[c]=null);ga(a);e.isTexture(b)&&e.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete p[a.id]}var C={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Q={repeat:10497,clamp:33071,mirror:33648},la={nearest:9728,
linear:9729},fa=l({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},la),ha={none:0,browser:37444},ba={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},U={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};h.ext_srgb&&(U.srgb=35904,U.srgba=35906);h.oes_texture_float&&(ba["float"]=5126);h.oes_texture_half_float&&(ba["half float"]=36193);h.webgl_depth_texture&&
(l(U,{depth:6402,"depth stencil":34041}),l(ba,{uint16:5123,uint32:5125,"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&l(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&l(Z,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&l(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&
(Z["rgb etc1"]=36196);var W=Array.prototype.slice.call(e.getParameter(34467));Object.keys(Z).forEach(function(a){var b=Z[a];0<=W.indexOf(b)&&(U[a]=b)});var Y=Object.keys(U);m.textureFormats=Y;var K=Y.reduce(function(a,b){var c=U[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{});l(t.prototype,{parseFlags:function(a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(f.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),
this.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(f.type(a.flipY,"boolean","invalid texture flip"),this.flipY=a.flipY);"alignment"in a&&(f.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),this.unpackAlignment=a.alignment);"colorSpace"in a&&(f.parameter(a.colorSpace,ha,"invalid colorSpace"),this.colorSpace=ha[a.colorSpace]);if("format"in a){var b=a.format;f.parameter(b,U,"invalid texture format");this.internalformat=U[b];b in ba&&(this.type=ba[b]);b in Z&&(this.compressed=!0)}"type"in
a&&(b=a.type,f.parameter(b,ba,"invalid texture type"),this.type=ba[b]);var b=this.width,c=this.height,d=this.channels;"shape"in a?(f(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),b=a.shape[0],c=a.shape[1],3===a.shape.length&&(d=a.shape[2])):("radius"in a&&(b=c=a.radius),"width"in a&&(b=a.width),"height"in a&&(c=a.height),"channels"in a&&(d=a.channels));this.width=b|0;this.height=c|0;this.channels=d|0;"stride"in a?(b=a.stride,f(Array.isArray(b)&&2<=b.length,"invalid stride vector"),
this.strideX=b[0],this.strideY=b[1],this.strideC=3===b.length?b[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*d,this.strideY=this.strideX*b);"offset"in a&&(this.offset=a.offset|0,this.needsTranspose=!0);"crossOrigin"in a&&(this.crossOrigin=a.crossOrigin)}},parse:function(e,l){this.miplevel=l;this.width>>=l;this.height>>=l;var k=e;switch(typeof e){case "string":break;case "object":if(!e)return;this.parseFlags(e);var m=e.data;if("string"===typeof m||m&&(P(m)||b(m)||M(m)||a(m)||
q(m)||"[object HTMLImageElement]"===d(m)||"[object HTMLVideoElement]"===d(m)||c(m)))k=e.data;break;case "undefined":return;default:f.raise("invalid pixel data type")}"string"===typeof k&&(k=w(k,this.crossOrigin));var m=null,p=!1;this.compressed&&f(k instanceof Uint8Array||"[object XMLHttpRequest]"===d(k),"compressed texture data must be stored in a uint8array");if(null!==k)if(P(k))this.data=k;else if(b(k))m=k,p=!0;else if(M(k)){Array.isArray(k.data)?(m=k.data,p=!0):this.data=k.data;var t=k.shape;
this.width=t[0];this.height=t[1];this.channels=3===t.length?t[2]:1;t=k.stride;this.strideX=k.stride[0];this.strideY=k.stride[1];this.strideC=3===t.length?k.stride[2]:1;this.offset=k.offset;this.needsTranspose=!0}else if(a(k)||q(k))a(k)?this.canvas=k:this.canvas=k.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===d(k))this.image=k,k.complete?(this.width=k.naturalWidth,this.height=k.naturalHeight):(this.width=this.width||
k.naturalWidth,this.height=this.height||k.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();else if("[object HTMLVideoElement]"===d(k))this.video=k,1<k.readyState?(this.width=k.width,this.height=k.height):(this.width=this.width||k.width,this.height=this.height||k.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===d(k))this.xhr=k,this.needsListeners=!0;else if(c(k)){var p=k.length,t=k[0].length,n=1,r,v,x,D;if(Array.isArray(k[0][0]))for(n=
k[0][0].length,f(0<=n&&4>=n,"invalid number of channels for image data"),m=Array(p*t*n),v=D=0;v<t;++v)for(r=0;r<p;++r)for(x=0;x<n;++x)m[D++]=k[r][v][x];else for(m=Array(p*t),v=D=0;v<t;++v)for(r=0;r<p;++r)m[D++]=k[r][v];this.width=p;this.height=t;this.channels=n;p=!0}else e.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||R.width)|0,this.height=(this.height||R.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:
this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,6410,6407,6408][(this.channels=this.channels||4)-1],f(this.internalformat,"invalid number of channels"));t=this.internalformat;if(6402===t||34041===t)f(h.webgl_depth_texture,"depth/stencil texture not supported"),6402===t&&f(5123===this.type||5125,"depth texture type must be uint16 or uint32"),34041===t&&f(34042===this.type,"depth stencil texture format must match type"),
f(!this.data&&!m&&!this.image&&!this.video&&!this.canvas,"depth/stencil textures are for rendering only");k=this.format=K[t];if(!this.channels)switch(k){case 6409:case 6406:case 6402:this.channels=1;break;case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}k=this.type;5126===k?f(h.oes_texture_float,"float texture not supported"):36193===k?f(h.oes_texture_half_float,"half float texture not supported"):k||(k=6402===t?5125:5121);this.type=k;if(p)switch(k){case 5121:this.data=
new Uint8Array(m);break;case 5123:this.data=new Uint16Array(m);break;case 5125:this.data=new Uint32Array(m);break;case 5126:this.data=new Float32Array(m);break;case 36193:this.data=u(m);break;case 33635:case 32820:case 32819:case 34042:f.raise("unsupported format for automatic conversion");break;default:f.raise("unsupported type conversion")}if(this.data){if(this.needsTranspose){m=this.data;p=this.width;t=this.height;n=this.channels;r=this.strideX;v=this.strideY;x=this.strideC;D=this.offset;for(var z=
new m.constructor(p*t*n),A=0,C=0;C<t;++C)for(var E=0;E<p;++E)for(var F=0;F<n;++F)z[A++]=m[v*C+r*E+x*F+D];this.data=z}switch(k){case 5121:f(this.data instanceof Uint8Array||this.data instanceof Uint8ClampedArray,"incompatible pixel type");break;case 33635:case 32820:case 32819:case 5123:case 36193:f(this.data instanceof Uint16Array,"incompatible pixel type");break;case 5125:f(this.data instanceof Uint32Array,"incompatible pixel type");break;case 5126:f(this.data instanceof Float32Array,"incompatible pixel type");
break;default:f.raise("bad or missing pixel type")}}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=!1},upload:function(a){e.pixelStorei(37440,this.flipY);e.pixelStorei(37441,this.premultiplyAlpha);e.pixelStorei(37443,this.colorSpace);e.pixelStorei(3317,this.unpackAlignment);var b=this.target,c=this.miplevel,d=this.image,f=this.canvas,h=this.video,l=this.data,m=this.internalformat,t=this.format,q=this.type,p=this.width||
Math.max(1,a.width>>c);a=this.height||Math.max(1,a.height>>c);h&&2<h.readyState?e.texImage2D(b,c,t,t,q,h):d&&d.complete?e.texImage2D(b,c,t,t,q,d):f?e.texImage2D(b,c,t,t,q,f):this.compressed?e.compressedTexImage2D(b,c,m,p,a,0,l):this.copy?(n(),e.copyTexImage2D(b,c,t,this.x,this.y,p,a,0)):l?e.texImage2D(b,c,t,p,a,0,t,q,l):e.texImage2D(b,c,t,p||1,a||1,0,t,q,null)}});l(na.prototype,{parse:function(a){if("object"===typeof a&&a){if("min"in a){var b=a.min;f.parameter(b,fa);this.minFilter=fa[b]}"mag"in a&&
(b=a.mag,f.parameter(b,la),this.magFilter=la[b]);var b=this.wrapS,c=this.wrapT;if("wrap"in a){var d=a.wrap;"string"===typeof d?(f.parameter(d,Q),b=c=Q[d]):Array.isArray(d)&&(f.parameter(d[0],Q),f.parameter(d[1],Q),b=Q[d[0]],c=Q[d[1]])}else"wrapS"in a&&(b=a.wrapS,f.parameter(b,Q),b=Q[b]),"wrapT"in a&&(c=a.wrapT,f.parameter(c,Q),c=Q[c]);this.wrapS=b;this.wrapT=c;"anisotropic"in a&&(b=a.anisotropic,f("number"===typeof b&&1<=b&&b<=m.maxAnisotropic,"aniso samples must be between 1 and "),this.anisotropic=
a.anisotropic);if("mipmap"in a)switch(a=a.mipmap,typeof a){case "string":f.parameter(a,C,"invalid mipmap hint");this.mipmapHint=C[a];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=!!a;break;case "object":break;default:f.raise("invalid mipmap type")}}},upload:function(){var a=this.target;e.texParameteri(a,10241,this.minFilter);e.texParameteri(a,10240,this.magFilter);e.texParameteri(a,10242,this.wrapS);e.texParameteri(a,10243,this.wrapT);h.ext_texture_filter_anisotropic&&e.texParameteri(a,
34046,this.anisotropic);this.genMipmaps&&(e.hint(33170,this.mipmapHint),e.generateMipmap(a))}});var N=0,A=0,p={},E=[],F=m.maxTextureUnits,aa=Array(F).map(function(){return null});l(T.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<F;++b){var c=aa[b];if(c){if(0<c.bindCount)continue;c.unit=-1}aa[b]=this;a=b;break}a>=F&&f.raise("insufficient number of texture units");this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture);N=a}return a},unbind:function(){--this.bindCount},
decRef:function(){0===--this.refCount&&ka(this)}});return{create:function(a,b){function c(a,e,f,g,h,k){var l=a||{};34067===b&&6===arguments.length&&(l=[a,e,f,g,h,k]);ca(d,l);c.width=d.params.width;c.height=d.params.height;return c}var d=new T(b);p[d.id]=d;c(a);c._reglType="texture";c._texture=d;c.destroy=function(){d.decRef()};return c},refresh:function(){D(p).forEach(ja);for(var a=0;a<F;++a)aa[a]=null;N=0;e.activeTexture(33984)},clear:function(){for(var a=0;a<F;++a)e.activeTexture(33984+a),e.bindTexture(3553,
null),aa[a]=null;e.activeTexture(33984);N=0;D(p).forEach(ka)},poll:function(){E.forEach(ja)},getTexture:function(a){return null}}}},{"./check":5,"./extend":16,"./is-ndarray":19,"./is-typed-array":20,"./load-texture":22,"./parse-dds":23,"./to-half-float":32,"./values":34}],32:[function(e,h,n){h.exports=function(b){for(var c=new Float32Array(b),c=new Uint32Array(c.buffer),d=new Uint16Array(b.length),a=0;a<b.length;++a)if(isNaN(b[a]))d[a]=65535;else if(Infinity===b[a])d[a]=31744;else if(-Infinity===
b[a])d[a]=64512;else{var e=c[a],f=e>>>31<<15,h=(e<<1>>>24)-127,e=e>>13&1023;d[a]=-24>h?f:-14>h?f+(e+1024>>-14-h):15<h?f+31744:f+(h+15<<10)+e}return d}},{}],33:[function(e,h,n){h.exports=function(b){var c={};return{def:function(d){d=b.id(d);var a=c[d];a||(a=c[d]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]);return a}}}},{}],34:[function(e,h,n){h.exports=function(b){return Object.keys(b).map(function(c){return b[c]})}},{}],35:[function(e,h,n){h.exports=function(c,d){function a(a){var b=!1;"altKey"in a&&(b=b||
a.altKey!==m.alt,m.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==m.shift,m.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==m.control,m.control=!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==m.meta,m.meta=!!a.metaKey);return b}function e(c,f){var h=b.x(f),l=b.y(f);"buttons"in f&&(c=f.buttons|0);if(c!==x||h!==k||l!==G||a(f))x=c|0,k=h||0,G=l||0,d&&d(x,k,G,m)}function f(a){e(0,a)}function h(){if(x||k||G||m.shift||m.alt||m.meta||m.control)x=k=G=0,m.shift=m.alt=m.control=m.meta=!1,d&&d(0,0,0,m)}
function n(b){a(b)&&d&&d(x,k,G,m)}function P(a){0===b.buttons(a)?e(0,a):e(x,a)}function M(a){e(x|b.buttons(a),a)}function w(a){e(x&~b.buttons(a),a)}function u(){v||(v=!0,c.addEventListener("mousemove",P),c.addEventListener("mousedown",M),c.addEventListener("mouseup",w),c.addEventListener("mouseleave",f),c.addEventListener("mouseenter",f),c.addEventListener("mouseout",f),c.addEventListener("mouseover",f),c.addEventListener("blur",h),c.addEventListener("keyup",n),c.addEventListener("keydown",n),c.addEventListener("keypress",
n),c!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",n),window.addEventListener("keydown",n),window.addEventListener("keypress",n)))}function r(){v&&(v=!1,c.removeEventListener("mousemove",P),c.removeEventListener("mousedown",M),c.removeEventListener("mouseup",w),c.removeEventListener("mouseleave",f),c.removeEventListener("mouseenter",f),c.removeEventListener("mouseout",f),c.removeEventListener("mouseover",f),c.removeEventListener("blur",h),c.removeEventListener("keyup",
n),c.removeEventListener("keydown",n),c.removeEventListener("keypress",n),c!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",n),window.removeEventListener("keydown",n),window.removeEventListener("keypress",n)))}d||(d=c,c=window);var x=0,k=0,G=0,m={shift:!1,alt:!1,control:!1,meta:!1},v=!1;u();var R={element:c};Object.defineProperties(R,{enabled:{get:function(){return v},set:function(a){a?u():r},enumerable:!0},buttons:{get:function(){return x},enumerable:!0},x:{get:function(){return k},
enumerable:!0},y:{get:function(){return G},enumerable:!0},mods:{get:function(){return m},enumerable:!0}});return R};var b=e("mouse-event")},{"mouse-event":36}],36:[function(e,h,n){function b(b){return b.target||b.srcElement||window}n.buttons=function(b){if("object"===typeof b){if("buttons"in b)return b.buttons;if("which"in b){b=b.which;if(2===b)return 4;if(3===b)return 2;if(0<b)return 1<<b-1}else if("button"in b){b=b.button;if(1===b)return 4;if(2===b)return 2;if(0<=b)return 1<<b}}return 0};n.element=
b;n.x=function(c){if("object"===typeof c){if("offsetX"in c)return c.offsetX;var d=b(c).getBoundingClientRect();return c.clientX-d.left}return 0};n.y=function(c){if("object"===typeof c){if("offsetY"in c)return c.offsetY;var d=b(c).getBoundingClientRect();return c.clientY-d.top}return 0}},{}],37:[function(e,h,n){var b=e("./lib/check"),c=e("./lib/extend"),d=e("./lib/context"),a=e("./lib/strings"),q=e("./lib/extension"),f=e("./lib/limits"),l=e("./lib/buffer"),D=e("./lib/elements"),P=e("./lib/texture"),
M=e("./lib/renderbuffer"),w=e("./lib/framebuffer"),u=e("./lib/uniform"),r=e("./lib/attribute"),x=e("./lib/shader"),k=e("./lib/draw"),G=e("./lib/state"),m=e("./lib/compile"),v=e("./lib/read"),R=e("./lib/dynamic"),t=e("./lib/raf"),na=e("./lib/clock");h.exports=function(){function e(){S=t.next(e);F.count+=1;if(F.width!==C.drawingBufferWidth||F.height!==C.drawingBufferHeight)F.width=C.drawingBufferWidth,F.height=C.drawingBufferHeight,aa.notifyViewportChanged();var a=na();F.dt=a-F.t;F.t=a;A.poll();for(var b=
0;b<J.length;++b)(0,J[b])(F.count,F.t,F.dt);F.renderTime=na()-a}function h(){S&&(t.cancel(e),S=0)}function n(a){h();a.preventDefault();if(Q.onContextLost)Q.onContextLost()}function ja(a){C.getError();la.refresh();U.refresh();A.refresh();p.refresh();E.refresh();K.refresh();aa.refresh();if(Q.onContextRestored)Q.onContextRestored();e()}function ma(a){function d(a){var b={},c={};Object.keys(a).forEach(function(d){var f=a[d];R.isDynamic(f)?(e=!0,c[d]=R.unbox(f,d)):b[d]=f});return{dynamic:c,"static":b}}
b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var e=!1,f=d(a.uniforms||{}),h=d(a.attributes||{});a=d(function(a){function b(a){if(a in d){var c=d[a];delete d[a];Object.keys(c).forEach(function(b){d[a+"."+b]=c[b]})}}var d=c({},a);delete d.uniforms;delete d.attributes;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return d}(a));var f=g.command(a["static"],f["static"],h["static"],a.dynamic,f.dynamic,h.dynamic,e),k=f.draw,
l=f.batch,m=f.scope,n=[];return function(a,b){if("number"===typeof a){for(var c=a|0;n.length<c;)n.push(null);return l(a|0,n)}return Array.isArray(a)?l(a.length,a):"function"===typeof a?m(null,a):"function"===typeof b?m(a,b):k(a)}}function ga(){E.poll();aa.poll()}var ka=d(Array.prototype.slice.call(arguments)),C=ka.gl,Q=ka.options,ka=a(),la=q(C),fa=la.extensions,ha={width:C.drawingBufferWidth,height:C.drawingBufferHeight},ba=f(C,fa),U=l(C),Z=D(C,fa,U),W=u(ka),Y=r(C,fa,ba,U,ka),K=x(C,Y,W,function(a){return g.draw(a)},
ka),N=k(C,fa,U),A=P(C,fa,ba,ga,ha),p=M(C,fa,ba),E=w(C,fa,ba,A,p),F={count:0,start:na(),dt:0,t:na(),renderTime:0,width:C.drawingBufferWidth,height:C.drawingBufferHeight,pixelRatio:Q.pixelRatio},aa=G(C,E,ha),ha=v(C,ga,ha),g=m(C,ka,fa,ba,U,Z,A,E,aa,W,Y,K,N,F,ga),I=C.canvas,J=[],S=0;I&&(I.addEventListener("webglcontextlost",n,!1),I.addEventListener("webglcontextrestored",ja,!1));return c(ma,{clear:function(a){var c=0;ga();var d=a.color;d&&(C.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in
a&&(C.clearDepth(+a.depth),c|=256);"stencil"in a&&(C.clearStencil(a.stencil|0),c|=1024);b(!!c,"called regl.clear with no buffer specified");C.clear(c)},prop:R.define,draw:ma({}),elements:function(a){return Z.create(a)},buffer:function(a){return U.create(a,34962)},texture:function(a){return A.create(a,3553)},cube:function(a){return 6===arguments.length?A.create(Array.prototype.slice.call(arguments),34067):A.create(a,34067)},renderbuffer:function(a){return p.create(a)},framebuffer:function(a){return E.create(a)},
framebufferCube:function(a){b.raise("framebuffer cube not yet implemented")},frame:function(a){J.push(a);!S&&0<J.length&&e();return{cancel:function(){var b=J.find(function(b){return b===a});0>b||(J.splice(b,1),0>=J.length&&h())}}},stats:F,limits:ba,read:ha,destroy:function(){h();I&&(I.removeEventListener("webglcontextlost",n),I.removeEventListener("webglcontextrestored",ja));K.clear();E.clear();p.clear();A.clear();U.clear();if(Q.onDestroy)Q.onDestroy()}})}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/check":5,
"./lib/clock":6,"./lib/compile":8,"./lib/context":12,"./lib/draw":13,"./lib/dynamic":14,"./lib/elements":15,"./lib/extend":16,"./lib/extension":17,"./lib/framebuffer":18,"./lib/limits":21,"./lib/raf":24,"./lib/read":25,"./lib/renderbuffer":26,"./lib/shader":27,"./lib/state":29,"./lib/strings":30,"./lib/texture":31,"./lib/uniform":33}]},{},[2]);

        </script>
        </body>
      </html>