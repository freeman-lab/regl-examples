(function e$$0(h,k,b){function e(d,f){if(!k[d]){if(!h[d]){var q="function"==typeof require&&require;if(!f&&q)return q(d,!0);if(a)return a(d,!0);q=Error("Cannot find module '"+d+"'");throw q.code="MODULE_NOT_FOUND",q;}q=k[d]={exports:{}};h[d][0].call(q.exports,function(a){var b=h[d][1][a];return e(b?b:a)},q,q.exports,e$$0,h,k,b)}return k[d].exports}for(var a="function"==typeof require&&require,d=0;d<b.length;d++)e(b[d]);return e})({1:[function(c,h,k){h.exports=[[[1,11],[1,11],[1,11],[1,11],[1,11],
[1,11],[1,11],[1,11],[6,6],[7,6],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,0],[1,0],[1,0],[2,0],[1,11],[1,11],[1,11],[6,6],[7,6],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[1,1],[2,1],[1,11],[1,11],[1,11],[6,6],[8,8],[8,6],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[0,3],[5,2],[1,11],[13,12],[13,12],[6,6],[7,6],[6,9],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[0,1],[1,1],[2,1],[1,11],[1,11],[13,15],[13,15],[6,6],[7,6],[7,6],[6,9],[1,11],[1,11],[1,11],[1,
11]],[[1,11],[0,2],[1,2],[2,2],[1,11],[1,11],[14,2],[15,2],[6,6],[7,6],[7,6],[7,6],[6,9],[8,5],[1,11],[1,11]],[[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[6,6],[8,8],[7,6],[7,6],[7,6],[8,6],[1,11],[1,11]],[[4,5],[2,5],[0,5],[1,5],[2,5],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[8,9],[6,9],[8,5],[1,11]],[[2,8],[3,9],[4,9],[4,6],[3,9],[5,0],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[8,8],[8,6],[1,11]],[[4,7],[4,7],[4,8],[5,8],[2,9],[3,9],[4,5],[2,5],[1,11],[1,11],[6,7],[7,8],[7,6],
[7,6],[6,9],[8,5]],[[1,11],[1,11],[3,7],[4,7],[4,8],[5,9],[5,8],[0,9],[2,5],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6],[6,9]],[[1,11],[1,11],[1,11],[1,11],[0,7],[4,8],[4,6],[4,6],[5,1],[1,11],[1,11],[1,11],[6,7],[7,8],[7,6],[7,6]],[[1,11],[9,0],[10,0],[8,0],[1,11],[3,7],[1,7],[1,7],[5,7],[1,11],[1,11],[1,11],[1,11],[6,7],[7,7],[7,7]],[[1,11],[9,1],[11,3],[11,1],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11]],[[1,11],[9,2],[7,2],[11,2],[1,11],[1,11],[1,11],[2,12],[1,
13],[1,13],[1,13],[1,13],[1,13],[1,13],[0,12],[1,11]],[[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[1,11],[2,10],[3,10],[3,10],[3,10],[3,10],[3,10],[3,10],[0,10],[1,11]]]},{}],2:[function(c,h,k){var b=c("../regl")(),e=c("mouse-change")(),a=c("./assets/map.json"),d=b({attributes:{position:b.buffer([-1,-1,1,-1,-1,1,1,1,-1,1,1,-1])},uniforms:{view:b.prop("view")},count:6}),p=b({frag:"\n  precision mediump float;\n  uniform sampler2D map, tiles;\n  uniform vec2 mapSize, tileSize;\n  varying vec2 uv;\n  void main() {\n    vec2 tileCoord = floor(255.0 * texture2D(map,\n        (floor(uv.yx)) / mapSize).ra);\n    gl_FragColor = texture2D(tiles, (tileCoord + fract(uv)) / tileSize);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  uniform vec4 view;\n  varying vec2 uv;\n  void main() {\n    uv = mix(view.xw, view.zy, 0.5 * (1.0 + position));\n    gl_Position = vec4(position, 1, 1);\n  }",depth:{enable:!1},uniforms:{tiles:b.texture("assets/tiles.png"),tileSize:[16,16],map:b.texture(a),mapSize:[a[0].length,a.length]}});b.frame(function(){var f=b.stats,q=f.width,t=f.height,f=a[0].length*e.x/q,c=a.length*e.y/t,q=q/t*10;d({view:[f-.5*q,c-5,f+.5*q,c+5]},function(){p()})})},
{"../regl":35,"./assets/map.json":1,"mouse-change":33}],3:[function(c,h,k){function b(){this.pointer=!1;this.w=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var e=c("./constants/dtypes.json");Object.assign(b.prototype,{equals:function(a,b){return this.pointer?a.pointer&&this.buffer===a.buffer&&this.size===b&&this.normalized===a.normalized&&this.type===a.type&&this.offset===a.offset&&this.stride===a.stride&&this.divisor===
a.divisor:!a.pointer&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,b){(this.pointer=a.pointer)?(this.buffer=a.buffer,this.size=b,this.normalized=a.normalized,this.type=a.type,this.offset=a.offset,this.stride=a.stride,this.divisor=a.divisor):(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w)}});h.exports=function(a,d,p,f){function q(){for(var a=Array(16),d=0;16>d;++d)a[d]=new b;this.records=a;this.top=0}function t(a){for(var d=a.records,e=a.top;d.length-1<=e;)d.push(new b);return d[++a.top]}
var c={};p=p.maxAttributes;for(var h=Array(p),E=0;E<p;++E)h[E]=new b;Object.assign(q.prototype,{pushVec:function(a,b,d,e){var f=t(this);f.pointer=!1;f.x=a;f.y=b;f.z=d;f.w=e},pushPtr:function(a,b,d,e,f,p,q){var c=t(this);c.pointer=!0;c.buffer=a;c.size=b;c.offset=d;c.stride=e;c.divisor=f;c.normalized=p;c.type=q},pushDyn:function(a){if("number"===typeof a)this.pushVec(a,0,0,0);else if(Array.isArray(a))this.pushVec(a[0],a[1],a[2],a[3]);else{var b=f.getBuffer(a),d=0,p=0,c=0,q=0,t=!1,h=5126;b?h=b.dtype:
(b=f.getBuffer(a.buffer),d=a.size||0,p=a.stride||0,c=a.offset||0,q=a.divisor||0,t=a.normalized||!1,h=b.dtype,"type"in a&&(h=e[a.type]));this.pushPtr(b,d,c,p,q,t,h)}},pop:function(){--this.top}});return{bindings:h,attributes:c,bind:function(b,e,f,p){p=f.size||p;if(!e.equals(f,p)){if(f.pointer){e.pointer||a.enableVertexAttribArray(b);e.buffer!==f.buffer&&f.buffer.bind();a.vertexAttribPointer(b,p,f.type,f.normalized,f.stride,f.offset);var c=d.angle_instanced_arrays;c&&c.vertexAttribDivisorANGLE(b,f.divisor)}else e.pointer&&
a.disableVertexAttribArray(b),a.vertexAttrib4f(b,f.x,f.y,f.z,f.w);e.set(f,p)}},def:function(a){a in c||(c[a]=new q)}}}},{"./constants/dtypes.json":10}],4:[function(c,h,k){function b(a,b){switch(a){case 5121:return new Uint8Array(b);case 5123:return new Uint16Array(b);case 5125:return new Uint32Array(b);case 5120:return new Int8Array(b);case 5122:return new Int16Array(b);case 5124:return new Int32Array(b);case 5126:return new Float32Array(b);default:return null}}var e=c("./check"),a=c("./is-typed-array"),
d=c("./is-ndarray"),p=c("./constants/arraytypes.json"),f=c("./constants/dtypes.json"),q=c("./values"),t={"static":35044,dynamic:35048,stream:35040};h.exports=function(c){function h(a,b){this.id=v++;this.buffer=a;this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.data=null;this.dtype=5121}function E(a){c.isBuffer(a.buffer)||(a.buffer=c.createBuffer());a.bind();c.bufferData(a.type,a.data||a.byteLength,a.usage)}function B(a){var b=a.buffer;e(b,"buffer must not be deleted already");
c.isBuffer(b)&&c.deleteBuffer(b);a.buffer=null;delete m[a.id]}var v=0,m={};h.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)};return{create:function(q,v,l){function S(m){var c=m||{};if(Array.isArray(c)||a(c)||d(c))c={data:c};else if("number"===typeof c)c={length:c|0};else if(null===c||void 0===c)c={};e.type(c,"object","buffer arguments must be an object, a number or an array");"usage"in c?(e.parameter(c.usage,t,"invalid buffer usage"),w.usage=t[c.usage]):w.usage=35044;m=0;"type"in c&&
(e.parameter(c.type,f,"invalid buffer type"),m=f[c.type]);var B=c.dimension|0||1,q=0,l=null;if("data"in c)if(l=c.data,null===l)q=c.length|0;else{if(d(l)){var B=l.shape,q=l.stride,c=l.offset,v=0,x=0,M=0,h=0;1===B.length?(v=B[0],x=1,M=q[0],h=0):2===B.length?(v=B[0],x=B[1],M=q[0],h=q[1]):e.raise("invalid shape");m=m||p[Object.prototype.toString.call(l)]|0||5126;for(var B=x,q=b(m,v*x),l=l.data,ma=0,Q=0;Q<v;++Q)for(var k=0;k<x;++k)q[ma++]=l[M*Q+h*k+c];l=q}else if(Array.isArray(l))if(0<l.length&&Array.isArray(l[0])){B=
l[0].length;m=m||5126;c=b(m,l.length*B);q=l;l=B;for(v=h=0;v<q.length;++v)for(M=q[v],x=0;x<l;++x)c[h++]=M[x];l=c}else m=m||5126,l=b(m,l);else e.isTypedArray(l,"invalid data type buffer data"),m=m||p[Object.prototype.toString.call(l)]|0;q=l.byteLength}else"length"in c&&(q=c.length|0,e.nni(q,"buffer length must be a nonnegative integer"));w.data=l;w.dtype=m||5121;w.byteLength=q;w.dimension=B;E(w);return S}var k=c.createBuffer(),w=new h(k,v);m[w.id]=w;l||S(q);S._reglType="buffer";S._buffer=w;S.destroy=
function(){B(w)};return S},clear:function(){q(m).forEach(B)},refresh:function(){q(m).forEach(E)},getBuffer:function(a){return a&&a._buffer instanceof h?a._buffer:null}}}},{"./check":5,"./constants/arraytypes.json":9,"./constants/dtypes.json":10,"./is-ndarray":18,"./is-typed-array":19,"./values":32}],5:[function(c,h,k){function b(a){a=Error("(regl) "+a);console.error(a);throw a;}var e=c("./is-typed-array");h.exports=Object.assign(function(a,d){a||b(d)},{raise:b,parameter:function(a,d,e){a in d||b("unknown parameter ("+
a+")"+(e?": "+e:"")+". possible values: "+Object.keys(d).join())},type:function(a,d,e){typeof a!==d&&b("invalid parameter type"+(e?": "+e:"")+". expected "+d+", got "+typeof a)},isTypedArray:function(a,d){e(a)||b("invalid parameter type"+(d?": "+d:"")+". must be a typed array")},nni:function(a,d){0<=a&&(a|0)===a||b("invalid parameter type, ("+a+")"+(d?": "+d:"")+". must be a nonnegative integer")},oneOf:function(a,d,e){0>d.indexOf(a)&&b("invalid value"+(e?": "+e:"")+". must be one of: "+d)}})},{"./is-typed-array":19}],
6:[function(c,h,k){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],7:[function(c,h,k){h.exports=function(){function b(){var a=[],b=[];return Object.assign(function(){a.push.apply(a,Array.prototype.slice.call(arguments))},{def:function(){var d="v"+e++;b.push(d);0<arguments.length&&(a.push(d,"="),a.push.apply(a,Array.prototype.slice.call(arguments)),a.push(";"));return d},toString:function(){return[0<b.length?"var "+b+
";":"",a.join("")].join("")}})}var e=0,a=[],d=[],c={};return{link:function(b){var c="g"+e++;a.push(c);d.push(b);return c},block:b,proc:function(a){var d=[],t=b(),h=t.toString;return c[a]=Object.assign(t,{arg:function(){var a="a"+e++;d.push(a);return a},toString:function(){return["function(",d.join(),"){",h(),"}"].join("")}})},compile:function(){var b=['"use strict";return {'];Object.keys(c).forEach(function(a){b.push('"',a,'":',c[a].toString(),",")});b.push("}");return Function.apply(null,a.concat([b.join("")])).apply(null,
d)}}}},{}],8:[function(c,h,k){function b(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function e(a,b,d,e){var f,c=",";switch(b){case 5126:f="1f";break;case 35664:f="2fv";break;case 35665:f="3fv";break;case 35666:f="4fv";break;case 35670:case 5124:f="1i";break;case 35671:case 35667:f="2iv";break;case 35672:case 35668:f="3iv";break;case 35673:case 35669:f="4iv";break;case 35674:f="Matrix2fv";
c=",false,";break;case 35675:f="Matrix3fv";c=",false,";break;case 35676:f="Matrix4fv";c=",false,";break;default:p.raise("unsupported uniform type")}return a+".uniform"+f+"("+d+c+e+");"}function a(a){return a+"["+a+".length-1]"}function d(a,b){return"framebuffer"===a||a<b?-1:a>b?1:0}var p=c("./check"),f=c("./codegen"),q=c("./constants/primitives.json"),t=c("./constants/dtypes.json"),Q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,
"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},L={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},E={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};
h.exports=function(c,v,m,x,h,l,S,k,w,X,R,ba,ia,la){function Y(m,l,t,x,k){function P(a){var g=qa[a];return g?g:g=qa[a]=A(H[a])}function T(a){var g=a.id,z=W[g];if(z)return z;z=a.func?n.def(A(a.data),"(",pa,",",N,",",U,")"):n.def(pa,".",a.data);return W[g]=z}function y(a,g){return a.find(function(a){return a.name===g})}function I(a){return na&&!(a in l||a in k)}var J=f(),A=J.link,n=J.proc("batch"),F=J.block(),u=n.def,aa=n.arg,g=A(c),G=A(m.program),r=A(X.bind),U=A(ia),ha=A(S),D=A(ba.count),O=A(ba.offset),
sa=A(ba.instances),Z=A(ba.primitive),qa={},fa=A(h.elements),D=u(a(D)),O=u(a(O)),Z=u(a(Z)),fa=u(a(fa)),C,K,R=v.angle_instanced_arrays;R&&(C=u(a(sa)),K=A(R));var na="elements"in l,sa=aa(),aa=aa(),pa=u(),N=u(),W={};n(g,".useProgram(",G,");");m.uniforms.forEach(function(a){if(!(a.name in t)){var b=A(a.location),z=A(w.uniforms[a.name]),z=z+"["+z+".length-1]";35678===a.info.type||35680===a.info.type?(a=u(z+"._texture"),n(e(g,5124,b,a+".bind()")),F(a,".unbind();")):n(e(g,a.info.type,b,z))}});m.attributes.forEach(function(a){if(!(x.name in
x)){var g=A(X.attributes[a.name]);n(r,"(",a.location,",",A(X.bindings[a.location]),",",g,".records[",g,".top]",",",b(a.info.type),");")}});na||n("if(",fa,"){",g,".bindBuffer(",34963,",",fa,".buffer.buffer);","}else{",g,".bindBuffer(",34963,",null);","}");n("for(",N,"=0;",N,"<",sa,";++",N,"){",pa,"=",aa,"[",N,"];");Object.keys(l).sort(d).forEach(function(a){function b(a){n("if(",z,"){",g,".enable(",a,");}else{",g,".disable(",a,");}")}var z=T(l[a]);switch(a){case "framebuffer":a=P("viewport");var r=
P("scissor.box");n("if(",ha,".push(",z,"&&",z,"._framebuffer)){",ha,".poll();",a,".setDirty();",r,".setDirty();","}");break;case "cull.enable":b(2884);break;case "blend.enable":b(3042);break;case "dither":b(3024);break;case "stencil.enable":b(2960);break;case "depth.enable":b(2929);break;case "scissor.enable":b(3089);break;case "polygonOffset.enable":b(32823);break;case "sample.alpha":b(32926);break;case "sample.enable":b(32928);break;case "depth.mask":n(g,".depthMask(",z,");");break;case "depth.func":a=
A(L);n(g,".depthFunc(",a,"[",z,"]);");break;case "depth.range":n(g,".depthRange(",z,"[0],",z,"[1]);");break;case "blend.color":n(g,".blendColor(",z,"[0],",z,"[1],",z,"[2],",z,"[3]);");break;case "blend.equation":a=A(V);n("if(typeof ",z,'==="string"){',g,".blendEquation(",a,"[",z,"]);","}else{",g,".blendEquationSeparate(",a,"[",z,".rgb],",a,"[",z,".alpha]);","}");break;case "blend.func":a=A(Q);n(g,".blendFuncSeparate(",a,'["srcRGB" in ',z,"?",z,".srcRGB:",z,".src],",a,'["dstRGB" in ',z,"?",z,".dstRGB:",
z,".dst],",a,'["srcAlpha" in ',z,"?",z,".srcAlpha:",z,".src],",a,'["dstAlpha" in ',z,"?",z,".dstAlpha:",z,".dst]);");break;case "stencil.mask":n(g,".stencilMask(",z,");");break;case "stencil.func":a=A(L);n(g,".stencilFunc(",a,"[",z,'.cmp||"always"],',z,".ref|0,",'"mask" in ',z,"?",z,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":r=A(E);n(g,".stencilOpSeparate(","stencil.opFront"===a?1028:1029,",",r,"[",z,'.fail||"keep"],',r,"[",z,'.zfail||"keep"],',r,"[",z,'.pass||"keep"]);');break;
case "polygonOffset.offset":n(g,".polygonOffset(",z,".factor||0,",z,".units||0);");break;case "cull.face":n(g,".cullFace(",z,'==="front"?',1028,":",1029,");");break;case "lineWidth":n(g,".lineWidth(",z,");");break;case "frontFace":n(g,".frontFace(",z,'==="cw"?',2304,":",2305,");");break;case "colorMask":n(g,".colorMask(",z,"[0],",z,"[1],",z,"[2],",z,"[3]);");break;case "sample.coverage":n(g,".sampleCoverage(",z,".value,",z,".invert);");break;case "scissor.box":case "viewport":a=P(a);n(a,".push(",
z,".x||0,",z,".y||0,",z,".w||-1,",z,".h||-1);");break;case "primitives":case "offset":case "count":case "elements":break;default:p.raise("unsupported option for batch",a)}});("viewport"in l||"framebuffer"in l)&&n(P("viewport"),".poll();");("scissor.box"in l||"framebuffer"in l)&&n(P("scissor.box"),".poll();");"framebuffer"in l&&n(ha,".pop();");var Y=m.uniforms,da=[];Object.keys(t).forEach(function(a){var b=y(Y,a);if(b){var z=b.info.type,r=A(b.location);a=T(t[a]);35678===b.info.type||35680===b.info.type?
(b=u(a+"._texture"),da.push(b),n(e(g,5124,r,b+".bind()"))):n(e(g,z,r,a))}});da.forEach(function(a){n(a,".unbind();")});var la=m.attributes;Object.keys(x).forEach(function(a){var g=y(la,a);g&&n(r,"(",g.location,",",A(a.bindings[g.location]),",",T(x[a]),",",b(g.info.type),");")});l.count?n(D,"=",T(l.count),";"):I("count")||n("if(",D,"){");l.offset&&n(O,"=",T(l.offset),";");l.primitive&&(m=A(q),n(Z,"=",m,"[",T(l.primitive),"];"));na&&(m=T(l.elements),n(fa,"=",m,"?",m,"._elements:null;"));I("offset")&&
n(O,"=0;");n("if(",fa,"){");I("count")&&n(D,"=",fa,".vertCount;","if(",D,">0){");I("primitive")&&n(Z,"=",fa,".primType;");na&&n(g,".bindBuffer(",34963,",",fa,".buffer.buffer);");R&&(l.instances&&n(C,"=",T(l.instances),";"),n("if(",C,">0){",K,".drawElementsInstancedANGLE(",Z,",",D,",",fa,".type,",O,",",C,");}else{"));n(g,".drawElements(",Z,",",D,",",fa,".type,",O,");");R&&n("}");I("count")&&n("}");n("}else{");I("count")||(I("primitive")&&n(Z,"=",4,";"),R&&n("if(",C,">0){",K,".drawArraysInstancedANGLE(",
Z,",",O,",",D,",",C,");}else{"),n(g,".drawArrays(",Z,",",O,",",D,");}"),R&&n("}"));n("}}",F);return J.compile().batch}var H=k.contextState,V={add:32774,subtract:32778,"reverse subtract":32779};v.ext_blend_minmax&&(V.min=32775,V.max=32776);var da=0;return{draw:function(d){var m=f(),p=m.link,l=m.proc("draw"),q=l.def,x=p(c),t=p(d.program),Q=p(X.bind),I=p(ba.count),J=p(ba.offset),A=p(ba.instances),n=p(ba.primitive),F=p(h.elements),u=[];l(x,".useProgram(",t,");");d.attributes.forEach(function(a){var g=
p(X.attributes[a.name]);l(Q,"(",a.location,",",p(X.bindings[a.location]),",",g,".records[",g,".top]",",",b(a.info.type),");")});d.uniforms.forEach(function(a){var b=p(a.location),d=p(w.uniforms[a.name]),d=d+"["+d+".length-1]";35678===a.info.type||35680===a.info.type?(a=q(d+"._texture"),u.push(a),l(e(x,5124,b,a+".bind()"))):l(e(x,a.info.type,b,d))});u.forEach(function(a){l(a,".unbind();")});d=q(a(n));I=q(a(I));J=q(a(J));F=q(a(F));l("if(",I,"){");(t=v.angle_instanced_arrays)?(A=q(a(A)),t=p(t),l("if(",
F,"){",F,".bind();","if(",A,">0){",t,".drawElementsInstancedANGLE(",d,",",I,",",F,".type,",J,",",A,");}else{",x,".drawElements(",d,",",I,",",F,".type,",J,");}","}else if(",A,">0){",t,".drawArraysInstancedANGLE(",d,",",J,",",I,",",A,");}else{",x,".drawArrays(",d,",",J,",",I,");}}")):l("if(",F,"){",x,".drawElements(",d,",",I,",",F,".type,",J,");}","}else{",x,".drawArrays(",d,",",J,",",I,");}");return m.compile().draw},command:function(b,e,c,l,B,v,k){function y(a){var b=fa[a];return b?b:b=fa[a]=n(H[a])}
function I(a,b){var g=y(a);C(g,".push(",b,");");K(g,".pop();")}function J(a){var b=a.id,g=ua[b];if(g)return g;g=a.func?N.def(n(a.data),"(",ra,",0,",ta,")"):N.def(ra,".",a.data);return ua[b]=g}var A=f(),n=A.link,F=A.block,u=A.proc,aa=da++,g=n(la),G=n(R.fragShaders),r=n(R.vertShaders),U=n(R.programs),ha=n(S),D={count:n(ba.count),offset:n(ba.offset),instances:n(ba.instances),primitive:n(ba.primitive)},O=n(h.elements),sa=n(q),Z=n(L),qa=n(E),fa={},C=F(),K=F(),P=!1;Object.keys(b).sort(d).forEach(function(a){var g=
b[a];switch(a){case "frag":P=!0;C(G,".push(",n(g),");");K(G,".pop();");break;case "vert":P=!0;C(r,".push(",n(g),");");K(r,".pop();");break;case "framebuffer":a=S.getFramebuffer(g);p(null===g||a,"invalid framebuffer object");a=y("viewport");var d=y("scissor.box");C("if(",ha,".push(",n(g&&g._framebuffer),")){",a,".setDirty();",d,".setDirty();","}");K("if(",ha,".pop()){",a,".setDirty();",d,".setDirty();","}");break;case "count":case "offset":case "instances":p.nni(g,a);C(D[a],".push(",g,");");K(D[a],
".pop();");break;case "primitive":p.parameter(g,q,"not a valid drawing primitive");C(D.primitive,".push(",q[g],");");K(D.primitive,".pop();");break;case "elements":d=h.getElements(g);g=!("primitive"in b);a=!("count"in b);d?(d=n(d),C(O,".push(",d,");"),g&&C(D.primitive,".push(",d,".primType);"),a&&C(D.count,".push(",d,".vertCount);")):(C(O,".push(null);"),g&&C(D.primitive,".push(",4,");"),a&&C(D.count,".push(0);"));g&&K(D.primitive,".pop();");a&&K(D.count,".pop();");"offset"in b||(C(D.offset,".push(0);"),
K(D.offset,".pop();"));K(O,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":p.type(g,"boolean",a);I(a,g);break;case "depth.func":p.parameter(g,L,a);I(a,L[g]);break;case "depth.range":p(Array.isArray(g)&&2===g.length&&g[0]<=g[1],"depth range is 2d array");a=y(a);C(a,".push(",g[0],",",g[1],");");K(a,".pop();");break;case "blend.func":a=
y(a);p.type(g,"object","blend func must be an object");var d="srcRGB"in g?g.srcRGB:g.src,e="srcAlpha"in g?g.srcAlpha:g.src,f="dstRGB"in g?g.dstRGB:g.dst,g="dstAlpha"in g?g.dstAlpha:g.dst;p.parameter(d,Q);p.parameter(e,Q);p.parameter(f,Q);p.parameter(g,Q);C(a,".push(",Q[d],",",Q[f],",",Q[e],",",Q[g],");");K(a,".pop();");break;case "blend.equation":a=y(a);"string"===typeof g?(p.parameter(g,V,"invalid blend equation"),C(a,".push(",V[g],",",V[g],");")):"object"===typeof g?(p.parameter(g.rgb,V,"invalid blend equation rgb"),
p.parameter(g.alpha,V,"invalid blend equation alpha"),C(a,".push(",V[g.rgb],",",V[g.alpha],");")):p.raise("invalid blend equation");K(a,".pop();");break;case "blend.color":p(Array.isArray(g)&&4===g.length,"blend color is a 4d array");a=y(a);C(a,".push(",g[0],",",g[1],",",g[2],",",g[3],");");K(a,".pop();");break;case "stencil.mask":p.type(g,"number","stencil mask must be an integer");a=y(a);C(a,".push(",g,");");K(a,".pop();");break;case "stencil.func":p.type(g,"object","stencil func must be an object");
d=g.cmp||"keep";e=g.ref||0;g="mask"in g?g.mask:-1;p.parameter(d,L,"invalid stencil func cmp");p.type(e,"number","stencil func ref");p.type(g,"number","stencil func mask");a=y(a);C(a,".push(",L[d],",",e,",",g,");");K(a,".pop();");break;case "stencil.opFront":case "stencil.opBack":p.type(g,"object",a);d=g.fail||"keep";e=g.zfail||"keep";g=g.pass||"keep";p.parameter(d,E,a);p.parameter(e,E,a);p.parameter(g,E,a);a=y(a);C(a,".push(",E[d],",",E[e],",",E[g],");");K(a,".pop();");break;case "polygonOffset.offset":p.type(g,
"object",a);d=g.factor||0;g=g.units||0;p.type(d,"number","offset.factor");p.type(g,"number","offset.units");a=y(a);C(a,".push(",d,",",g,");");K(a,".pop();");break;case "cull.face":d=0;"front"===g?d=1028:"back"===g&&(d=1029);p(!!d,"cull.face");g=y(a);C(g,".push(",d,");");K(g,".pop();");break;case "lineWidth":d=m.lineWidthDims;p("number"===typeof g&&g>=d[0]&&g<=d[1],"invalid line width, must positive number between "+d[0]+" and "+d[1]);I(a,g);break;case "frontFace":d=0;"cw"===g?d=2304:"ccw"===g&&(d=
2305);p(!!d,"frontFace");g=y(a);C(g,".push(",d,");");K(g,".pop();");break;case "colorMask":p(Array.isArray(g)&&4===g.length,"color mask must be length 4 array");a=y(a);C(a,".push(",g.map(function(a){return!!a}).join(),");");K(a,".pop();");break;case "sample.coverage":p.type(g,"object",a);d="value"in g?g.value:1;g=!!g.invert;p("number"===typeof d&&0<=d&&1>=d,"sample value");a=y(a);C(a,".push(",d,",",g,");");K(a,".pop();");break;case "viewport":case "scissor.box":p("object"===typeof g&&g,a+" is an object");
var d=g.x||0,e=g.y||0,c=f=-1;p("number"===typeof d&&0<=d,a+".x must be a positive int");p("number"===typeof e&&0<=e,a+".y must be a positive int");"w"in g&&(f=g.w,p("number"===typeof f&&0<=f,a+".w must be a positive int"));"h"in g&&(c=g.h,p("number"===typeof c&&0<=c,a+".h must be a positive int"));g=y(a);C(g,".push(",d,",",e,",",f,",",c,");");K(g,".pop();");break;default:p.raise("unsupported parameter "+a)}});if(P){if(b.frag&&b.vert)C(U,".push(",n(R.create(b.vert,b.frag)),");");else{var F=C.def(G,
"[",G,".length-1]"),na=C.def(r,"[",r,".length-1]"),pa=n(R.create);C(U,".push(",pa,"(",na,",",F,"));")}K(U,".pop();")}Object.keys(e).forEach(function(a){w.def(a);var g=n(w.uniforms[a]);a=e[a];a="function"===typeof a&&a._reglType?n(a):Array.isArray(a)?n(a.slice()):+a;C(g,".push(",a,");");K(g,".pop();")});Object.keys(c).forEach(function(a){X.def(a);var g=n(X.attributes[a]),b=c[a];if("number"===typeof b)C(g,".pushVec(",+b,",0,0,0);");else if(p(!!b,"invalid attribute: "+a),Array.isArray(b))C(g,".pushVec(",
[b[0]||0,b[1]||0,b[2]||0,b[3]||0],");");else{var d=x.getBuffer(b),r=0,e=0,f=0,m=0,l=!1,U=5126;d?U=d.dtype:(p.type(b,"object",'invalid attribute "'+a+'"'),d=x.getBuffer(b.buffer),r=b.size||0,e=b.stride||0,f=b.offset||0,m=b.divisor||0,l=b.normalized||!1,p(!!d,"invalid attribute "+a+".buffer"),U=d.dtype,"type"in b&&(p.parameter(b.type,t,"attribute type"),U=t[b.type]));p(!!d,"invalid attribute "+a+".buffer");p.nni(e,a+".stride");p.nni(f,a+".offset");p.nni(m,a+".divisor");p.type(l,"boolean",a+".normalized");
p.oneOf(r,[0,1,2,3,4],a+".size");C(g,".pushPtr(",[n(d),r,f,e,m,l,U].join(),");")}K(g,".pop();")});var N=A.block(),W=A.block(),ta,ra;k&&(ta=n(ia),ra=C.def());var ua={};Object.keys(l).sort(d).forEach(function(a){var g=J(l[a]);switch(a){case "framebuffer":a=y("viewport");var d=y("scissor.box");N("if(",ha,".push(",g,"&&",g,"._framebuffer)){",a,".setDirty();",d,".setDirty();","}");W("if(",ha,".pop()){",a,".setDirty();",d,".setDirty();","}");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":a=
y(a);N(a,".push(",g,");");W(a,".pop();");break;case "count":case "offset":case "instances":a=D[a];N(a,".push(",g,");");W(a,".pop();");break;case "primitive":a=D.primitive;N(a,".push(",sa,"[",g,"]);");W(a,".pop();");break;case "depth.func":a=y(a);N(a,".push(",Z,"[",g,"]);");W(a,".pop();");break;case "blend.func":a=y(a);d=n(Q);N(a,".push(",d,'["srcRGB" in ',g,"?",g,".srcRGB:",g,".src],",d,'["dstRGB" in ',g,"?",g,".dstRGB:",g,".dst],",d,'["srcAlpha" in ',g,"?",g,".srcAlpha:",g,".src],",d,'["dstAlpha" in ',
g,"?",g,".dstAlpha:",g,".dst]);");W(a,".pop();");break;case "blend.equation":a=y(a);d=n(V);N("if(typeof ",g,'==="string"){',a,".push(",d,"[",g,"],",d,"[",g,"]);","}else{",a,".push(",d,"[",g,".rgb],",d,"[",g,".alpha]);","}");W(a,".pop();");break;case "blend.color":a=y(a);N(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");W(a,".pop();");break;case "stencil.mask":a=y(a);N(a,".push(",g,");");W(a,".pop();");break;case "stencil.func":a=y(a);N(a,".push(",Z,"[",g,".cmp],",g,".ref|0,",'"mask" in ',g,"?",g,
".mask:-1);");W(a,".pop();");break;case "stencil.opFront":case "stencil.opBack":a=y(a);N(a,".push(",qa,"[",g,'.fail||"keep"],',qa,"[",g,'.zfail||"keep"],',qa,"[",g,'.pass||"keep"]);');W(a,".pop();");break;case "polygonOffset.offset":a=y(a);N(a,".push(",g,".factor||0,",g,".units||0);");W(a,".pop();");break;case "cull.face":a=y(a);N(a,".push(",g,'==="front"?',1028,":",1029,");");W(a,".pop();");break;case "frontFace":a=y(a);N(a,".push(",g,'==="cw"?',2304,":",2305,");");W(a,".pop();");break;case "colorMask":a=
y(a);N(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");W(a,".pop();");break;case "sample.coverage":a=y(a);N(a,".push(",g,".value,",g,".invert);");W(a,".pop();");break;case "scissor.box":case "viewport":a=y(a);N(a,".push(",g,".x||0,",g,".y||0,",'"w" in ',g,"?",g,".w:-1,",'"h" in ',g,"?",g,".h:-1);");W(a,".pop();");break;case "elements":a=!("primitive"in l)&&!("primitive"in b);var d=!("count"in l)&&!("count"in b),r=!("offset"in l)&&!("offset"in b),e=N.def();N("if(",g,"){",e,"=",g,"._elements;",O,".push(",
e,");",a?D.primitive+".push("+e+".primType);":"",d?D.count+".push("+e+".vertCount);":"",r?D.offset+".push("+e+".offset);":"","}else{",O,".push(null);","}");W(O,".pop();","if(",g,"){",a?D.primitive+".pop();":"",d?D.count+".pop();":"",r?D.offset+".pop();":"","}");break;default:p.raise("unsupported dynamic option: "+a)}});Object.keys(B).forEach(function(a){w.def(a);var g=n(w.uniforms[a]);a=J(B[a]);N(g,".push(",a,");");W(g,".pop();")});Object.keys(v).forEach(function(a){X.def(a);var g=n(X.attributes[a]);
a=J(v[a]);N(g,".pushDyn(",a,");");W(g,".pop();")});F=u("scope");na=F.arg();pa=F.arg();F(C);k&&F(ra,"=",na,";",N);F(pa,"();",k?W:"",K);F=u("draw");F(C);k&&F(ra,"=",F.arg(),";",N);na=a(U);F(g,"();","if(",na,")",na,".draw(",k?ra:"",");",k?W:"",K);var oa=u("batch");oa(C);k=oa.def(a(U));u=n(function(a,g,d){var r=a.batchCache[aa];r||(r=a.batchCache[aa]=Y(a,l,B,v,b));return r(g,d)});oa("if(",k,"){",g,"();",u,"(",k,",",oa.arg(),",",oa.arg(),");");Object.keys(l).forEach(function(a){(a=fa[a])&&oa(a,".setDirty();")});
oa("}",K);return A.compile()}}}},{"./check":5,"./codegen":7,"./constants/dtypes.json":10,"./constants/primitives.json":11}],9:[function(c,h,k){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],10:[function(c,h,k){h.exports={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],11:[function(c,h,k){h.exports={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],12:[function(c,h,k){function b(a,b){function f(){var b=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=a.getBoundingClientRect(),b=e.right-e.left,e=e.top-e.bottom);c.width=h*b;c.height=h*e;Object.assign(c.style,{width:b+"px",height:e+"px"})}var c=document.createElement("canvas"),t=e(c,b);Object.assign(c.style,
{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(c);a===document.body&&(c.style.position="absolute",Object.assign(a.style,{margin:0,padding:0}));var h=+t.options.pixelRatio;window.addEventListener("resize",f,!1);var k=t.options.onDestroy;t.options=Object.assign({},t.options,{onDestroy:function(){window.removeEventListener("resize",f);a.removeChild(c);k&&k()}});f();return t}function e(b,e){function f(a){try{return b.getContext(a,c)}catch(e){return null}}var c=e.glOptions||{},t=f("webgl")||
f("experimental-webgl")||f("webgl-experimental");a(t,"webgl not supported");return{gl:t,options:Object.assign({pixelRatio:window.devicePixelRatio},e)}}var a=c("./check");h.exports=function(a){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{gl:a[0],options:a[1]||{}};var c=document.body,f=a[1]||{};if("string"===typeof a[0])c=document.querySelector(a[0])||document.body;else if("object"===typeof a[0])if(a[0]instanceof HTMLElement)c=a[0];else{if(a[0]instanceof WebGLRenderingContext)return{gl:a[0],
options:Object.assign({pixelRatio:1},f)};f=a[0]}return c.nodeName&&"CANVAS"===c.nodeName.toUpperCase()?e(c,f):b(c,f)}},{"./check":5}],13:[function(c,h,k){h.exports=function(b){return{primitive:[4],count:[0],offset:[0],instances:[0]}}},{}],14:[function(c,h,k){function b(b,e){this.id=a++;this.func=b;this.data=e}function e(a,c){switch(typeof a){case "boolean":case "number":case "string":return new b(!1,a);case "function":return new b(!0,a);default:return e}}var a=0;h.exports={define:e,isDynamic:function(a){return"function"===
typeof a&&!a._reglType||a instanceof b},unbox:function(a,c){return a instanceof b?a:"function"===typeof a&&a!==e?new b(!0,a):new b(!1,c)}}},{}],15:[function(c,h,k){var b=c("./check"),e=c("./is-typed-array"),a=c("./is-ndarray"),d=c("./constants/primitives.json");h.exports=function(c,f,q){function t(){this.buffer=null;this.primType=4;this.type=this.vertCount=0}t.prototype.bind=function(){this.buffer.bind()};return{create:function(c){function p(c){var m=f.oes_element_index_uint;if(c)if("number"===typeof c)B(c);
else{var x=null,q="static",l=0;Array.isArray(c)||e(c)||a(c)?x=c:(b.type(c,"object","invalid arguments for elements"),"data"in c&&(x=c.data),"usage"in c&&(q=c.usage),"length"in c&&(l=c.length));Array.isArray(x)||a(x)&&"array"===x.dtype||"type"in c?B({type:c.type||(m?"uint32":"uint16"),usage:q,data:x,length:l}):B({usage:q,data:x,length:l});if(Array.isArray(x)||e(x))B.dimension=3}else B();x=h.buffer.byteLength;q=0;switch(h.buffer.dtype){case 5121:case 5120:q=5121;break;case 5123:case 5122:q=5123;x>>=
1;break;case 5125:case 5124:b(m,"32 bit element buffers not supported");q=5125;x>>=2;break;default:b.raise("invalid element buffer type")}m=4;l=h.buffer.dimension;1===l&&(m=0);2===l&&(m=1);3===l&&(m=4);"object"===typeof c&&("primitive"in c&&(m=c.primitive,b.parameter(m,d),m=d[m]),"count"in c&&(x=c.vertCount|0));h.primType=m;h.vertCount=x;h.type=q;return p}var h=new t,B=q.create(null,34963,!0);h.buffer=B._buffer;p(c);Object.assign(p,{_reglType:"elements",_elements:h,destroy:function(){b(null!==h.buffer,
"must not double destroy elements");B.destroy();h.buffer=null}});return p},elements:[null],getElements:function(a){return a&&a._elements instanceof t?a._elements:null}}}},{"./check":5,"./constants/primitives.json":11,"./is-ndarray":18,"./is-typed-array":19}],16:[function(c,h,k){h.exports=function(b){function e(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(d){try{a[d]=
b.getExtension(d)}catch(e){}})}var a={};e();return{extensions:a,refresh:e}}},{}],17:[function(c,h,k){var b=c("./check"),e=c("./values"),a=[1029];h.exports=function(d,c,f,q,h){function k(a,b,d,c){this.target=a;this.level=b;this.texture=d;this.renderbuffer=c}function L(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function E(a,d,c){if(a.texture)b.oneOf(a.texture._texture.params.internalformat,d,"unsupported texture format for attachment");else b.oneOf(a.renderbuffer._renderbuffer.format,
c,"unsupported renderbuffer format for attachment")}function B(a,d){var c=d.width,e=d.height;if(a.texture){var f=a.texture._texture,m=Math.max(1,f.params.width>>a.level),l=Math.max(1,f.params.height>>a.level),c=c||m,e=e||l;b(m===c&&l===e,"inconsistent width/height for supplied texture");b(0>f.pollId,"polling fbo textures not supported")}else f=a.renderbuffer._renderbuffer,c=c||f.width,e=e||f.height,b(f.width===c&&f.height===e,"inconsistent width/height for renderbuffer"),b(0<=ja.indexOf(f.format),
"renderbuffer format not compatible with color channels");f.refCount+=1;d.width=c;d.height=e}function v(a,b){b?b.texture?d.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,b.level):d.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer):d.framebufferTexture2D(36160,a,3553,null,0)}function m(a){var d=3553,c=0,e=null,f=null,m=a;"object"===typeof a&&(m=a.data,"level"in a&&(c=a.level|0),"target"in a&&(d=a.target|0));b.type(m,"function","invalid attachment data");
m=a._reglType;"texture"===m?(e=a,34067===e._texture.target?b(34069<=d&&34075>d,"invalid cube map target"):b(3553===d)):"renderbuffer"===m?(f=a,d=36161,c=0):b.raise("invalid regl object for attachment");return new k(d,c,e,f)}function x(a){return a&&(a.texture||a.renderbuffer)}function M(){this.id=ka++;ca[this.id]=this;this.framebuffer=null;this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null;this.ownsDepthStencil=this.ownsColor=
!1}function l(a){d.isFramebuffer(a.framebuffer)||(a.framebuffer=d.createFramebuffer());y=!0;d.bindFramebuffer(36160,a.framebuffer);for(var e=a.colorAttachments,m=0;m<e.length;++m)v(36064+m,e[m]);for(m=e.length;m<f.maxColorAttachments;++m)v(36064+m,null);v(36096,a.depthAttachment);v(36128,a.stencilAttachment);v(33306,a.depthStencilAttachment);c.webgl_draw_buffers&&c.webgl_draw_buffers.drawBuffersWEBGL(ga[e.length]);a=d.checkFramebufferStatus(36160);36053!==a&&b.raise("framebuffer configuration not supported, status = "+
w[a])}function S(a){a=a.framebuffer;b(a,"must not double destroy framebuffer");d.isFramebuffer(a)&&d.deleteFramebuffer(a)}function P(){return T[T.length-1]}var w={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"},X={rgba:6408},R={rgba4:32854,rgb565:36194,"rgb5 a1":32855};c.ext_srgb&&(R.srgba=35907);c.ext_color_buffer_half_float&&(R.rgba16f=34842,R.rgb16f=34843);c.webgl_color_buffer_float&&(R.rgba32f=34836);var ba=
[33189],ia=[36168],la=[34041],Y=[],H=[],V=[];c.webgl_depth_texture&&(Y.push(6402),V.push(34041));var da=Object.assign({},X,R),ma=e(X),ja=e(R),R=5121,ea={uint8:5121};c.oes_texture_half_float&&(R=ea["half float"]=36193);c.oes_texture_float&&(R=ea["float"]=5126);ea.best=R;var ga=function(){for(var a=Array(f.maxDrawbuffers),b=0;b<=f.maxDrawbuffers;++b)for(var d=a[b]=Array(b),c=0;c<b;++c)d[c]=36064+c;return a}(),ka=0,ca={},T=[null],y=!0;return{top:P,dirty:function(){return y},push:function(a){a=a||null;
y=y||a!==P();T.push(a);return y},pop:function(){var a=P();T.pop();return y=y||a!==P()},getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof M)?a:null},poll:function(){if(y){var b=T[T.length-1],e=c.webgl_draw_buffers;b?(d.bindFramebuffer(36160,b.framebuffer),e&&e.drawBuffersWEBGL(ga[b.colorAttachments.length])):(d.bindFramebuffer(36160,null),e&&e.drawBuffersWEBGL(a));y=!1}},create:function(a){function e(a){var v,u=a||{};v=c.webgl_draw_buffers;
var w=0,g=0;"shape"in u?(a=u.shape,b(Array.isArray(a)&&2<=a.length,"invalid shape for framebuffer"),w=a[0],g=a[1]):("radius"in u&&(w=g=u.radius),"width"in u&&(w=u.width),"height"in u&&(g=u.height));var G=null;a=!1;if("colorBuffers"in u||"colorBuffer"in u){G=u.colorBuffers||u.colorBuffer;Array.isArray(G)||(G=[G]);f.width=w;f.height=g;1<G.length&&b(v,"multiple render targets not supported");b(0<=G.length,"must specify at least one color attachment");G=G.map(m);for(v=0;v<G.length;++v)w=G[v],E(w,ma,ja),
B(w,f);w=f.width;g=f.height}else{var r=!0,U="rgba",ha="uint8",D=1;a=!0;f.width=w||d.drawingBufferWidth;f.height=g||d.drawingBufferHeight;"format"in u&&(U=u.format,b.parameter(U,da,"invalid color format"),r=U in X);"type"in u&&(b(r,"colorType can not be set for renderbuffer targets"),ha=u.type,b.parameter(ha,ea,"invalid color type"));"colorCount"in u&&(D=u.colorCount|0,b(0<=D,"color count must be positive"));if(f.ownsColor)for(G=f.colorAttachments;G.length>D;)L(G.pop());else G=[];for(v=0;v<G.length;++v){var O;
a:{O=G[v];var M=r,Z=U,y=w,fa=g;if(O.texture){var C=O.texture;if(M){C({format:Z,type:ha,width:y,height:fa});C._texture.refCount+=1;O=!0;break a}}else if(C=O.renderbuffer,!M){C({format:Z,width:y,height:fa});C._renderbuffer.refCount+=1;O=!0;break a}L(O);O=!1}O||(G[v--]=G[G.length-1],G.pop())}for(;G.length<D;)r?G.push(new k(3553,0,q.create({format:U,type:ha,width:w,height:g},3553),null)):G.push(new k(36161,0,null,h.create({format:U,width:w,height:g})))}b(0<G.length,"must specify at least one color buffer");
f.width=w;f.height=g;U=r=v=null;ha=!1;D=0;"depthBuffer"in u&&(v=m(u.depthBuffer),E(v,Y,ba),D+=1);"stencilBuffer"in u&&(r=m(u.stencilBuffer),E(r,H,ia),D+=1);"depthStencilBuffer"in u&&(U=m(u.depthStencilBuffer),E(U,V,la),D+=1);if(v||r||U)b(1===D,"can specify only one of depth, stencil or depthStencil attachment"),B(v||r||U,f);else if(D=!0,M=O=!1,"depth"in u&&(D=!!u.depth),"stencil"in u&&(O=!!u.stencil),"depthTexture"in u&&(M=!!u.depthTexture),u=f.depthAttachment||f.stencilAttachment||f.depthStencilAttachment,
Z=null,D||O)ha=!0,M?(b(c.webgl_depth_texture,"depth texture extension not supported"),b(D,"stencil only textures not supported"),M=O?"depth stencil":"depth",f.ownsDepthStencil&&u.texture?(u.texture({format:M,width:w,height:g}),u.texture._texture.refCount+=1,Z=u):Z=new k(3553,0,q.create({format:M,width:w,height:g},3553),null)):(M=D?O?"depth stencil":"depth":"stencil",f.ownsDepthStencil&&u.renderbuffer?(u.renderbuffer({format:M,width:w,height:g}),u.renderbuffer._renderbuffer.refCount+=1,Z=u):Z=new k(36161,
0,null,h.create({format:M,width:w,height:g}))),D?O?U=Z:v=Z:r=Z;w=f;w.colorAttachments.forEach(L);L(w.depthAttachment);L(w.stencilAttachment);L(w.depthStencilAttachment);f.colorAttachments=G;f.depthAttachment=v;f.stencilAttachment=r;f.depthStencilAttachment=U;f.ownsColor=a;f.ownsDepthStencil=ha;e.color=G.map(x);e.depth=x(v);e.stencil=x(r);e.depthStencil=x(U);l(f);e.width=f.width;e.height=f.height;return e}var f=new M;e(a);Object.assign(e,{_reglType:"framebuffer",_framebuffer:f,destroy:function(){S(f)}});
return e},clear:function(){e(ca).forEach(S)},refresh:function(){e(ca).forEach(l)}}}},{"./check":5,"./values":32}],18:[function(c,h,k){var b=c("./is-typed-array");h.exports=function(e){return"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||b(e.data))}},{"./is-typed-array":19}],19:[function(c,h,k){var b=c("./constants/arraytypes.json");h.exports=function(e){return Object.prototype.toString.call(e)in
b}},{"./constants/arraytypes.json":9}],20:[function(c,h,k){h.exports=function(b,e){var a=1;e.ext_texture_filter_anisotropic&&(a=b.getParameter(34047));var d=1,c=1;e.webgl_draw_buffers&&(d=b.getParameter(34852),c=b.getParameter(36063));return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(e).filter(function(a){return!!e[a]}),maxAnisotropic:a,
maxDrawbuffers:d,maxColorAttachments:c,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),
maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938)}}},{}],21:[function(c,h,k){h.exports=function(b,e){if("undefined"!==typeof document){var a;a=(a=/\.(\w+)(\?.*)?$/.exec(b))&&a[1]?a[1].toLowerCase():void 0;if(0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(a))return a=document.createElement("video"),a.autoplay=!0,a.loop=!0,e&&(a.crossOrigin=e),a.src=
b,a;if(0<=["dds"].indexOf(a))return a=new XMLHttpRequest,a.responseType="arraybuffer",a.open("GET",b,!0),a.send(),a;a=new Image;e&&(a.crossOrigin=e);a.src=b;return a}return null}},{}],22:[function(c,h,k){var b=c("./check");h.exports=function(c){function h(a){for(var b=ea,d=ga,e=0;e<I;++e){var g=Math.max(1,b+3>>2)*Math.max(1,d+3>>2)*T;A.pixels.push({target:a,miplevel:e,width:b,height:d,data:new Uint8Array(c,J,g)});J+=g;b>>=1;d>>=1}}var k=new Int32Array(c);b(k[0]===e,"invalid magic number for dds header");
var ja=k[X];b(ja&m,"unsupported dds format");var ea=k[ba],ga=k[R],ka=L,ca=0,T=0,y=4;switch(k[Y]){case M:T=8;ja&x?(y=3,ca=p):ca=f;break;case l:T=16;ca=q;break;case S:T=16;ca=t;break;case P:T=8;ca=Q;break;default:b.raise("unsupported dds texture format")}var I=1;k[la]&E&&(I=Math.max(1,k[ia]));var J=k[w]+4,A={width:ea,height:ga,channels:y,format:ca,type:ka,compressed:!0,cube:!1,pixels:[]},k=k[H];if(k&B)for(b((k&v)===v,"missing cubemap faces"),A.cube=!0,k=0;6>k;++k)h(d+k);else h(a);return A};var e=542327876,
a=3553,d=34069,p=33776,f=33777,q=33778,t=33779,Q=36196,L=5121,E=131072,B=512,v=64512,m=4,x=64,M=827611204,l=861165636,S=894720068,P=826496069,w=1,X=2,R=3,ba=4,ia=7,la=20,Y=21,H=28},{"./check":5}],23:[function(c,h,k){h.exports="function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?{next:function(b){return requestAnimationFrame(b)},cancel:function(b){return cancelAnimationFrame(b)}}:{next:function(b){setTimeout(b,30)},cancel:clearTimeout}},{}],24:[function(c,h,k){var b=
c("./check"),e=c("./is-typed-array");h.exports=function(a,d,c){return function(f){var q=f||{};e(f)?q={data:q}:2===arguments.length?q={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof f&&(q={});d();var h=q.x||0,k=q.y||0,L=q.width||c.width,E=q.height||c.height,B=L*E*4,q=q.data||new Uint8Array(B);b.isTypedArray(q);b(q.byteLength>=B,"data buffer too small");a.pixelStorei(3333,4);a.readPixels(h,k,L,E,6408,5121,q);return q}}},{"./check":5,"./is-typed-array":19}],25:[function(c,h,k){var b=c("./check"),
e=c("./values");h.exports=function(a,d,c){function f(){this.id=L++;this.refCount=1;this.renderbuffer=null;this.format=32854;this.height=this.width=0}function h(b){a.isRenderbuffer(b.renderbuffer)||(b.renderbuffer=a.createRenderbuffer());a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)}function t(d){var c=d.renderbuffer;b(c,"must not double destroy renderbuffer");a.bindRenderbuffer(36161,null);a.isRenderbuffer(c)&&a.deleteRenderbuffer(c);d.renderbuffer=
null;d.refCount=0;delete E[d.id]}var k={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(k.srgba=35907);d.ext_color_buffer_half_float&&(k.rgba16f=34842,k.rgb16f=34843);d.webgl_color_buffer_float&&(k.rgba32f=34836);var L=0,E={};f.prototype.decRef=function(){0===--this.refCount&&t(this)};return{create:function(a){function d(a){a=a||{};var f=0,l=0;"shape"in a?(l=a.shape,b(Array.isArray(l)&&2<=l.length,"invalid renderbuffer shape"),f=l[0]|0,l=l[1]|
0):("radius"in a&&(f=l=a.radius|0),"width"in a&&(f=a.width|0),"height"in a&&(l=a.height|0));var t=c.maxRenderbufferSize;b(0<=f&&0<=l&&f<=t&&l<=t,"invalid renderbuffer size");d.width=e.width=Math.max(f,1);d.height=e.height=Math.max(l,1);e.format=32854;"format"in a&&(a=a.format,b.parameter(a,k,"invalid render buffer format"),e.format=k[a]);h(e);return d}var e=new f;E[e.id]=e;d(a);Object.assign(d,{_reglType:"renderbuffer",_renderbuffer:e,destroy:function(){e.decRef()}});return d},refresh:function(){e(E).forEach(h)},
clear:function(){e(E).forEach(t)}}}},{"./check":5,"./values":32}],26:[function(c,h,k){function b(a,b,e){this.name=a;this.location=b;this.info=e}var e=c("./check");h.exports=function(a,d,c,f){function h(b,d){var c=v[b],f=c[d];if(!f){f=a.createShader(b);a.shaderSource(f,d);a.compileShader(f);if(!a.getShaderParameter(f,a.COMPILE_STATUS)){var m=a.getShaderInfoLog(f);e.raise("Error compiling shader:\n"+m)}c[d]=f}return f}function t(){Object.keys(v).forEach(function(b){Object.keys(v[b]).forEach(function(d){a.deleteShader(v[b][d])})});
v[35632]={};v[35633]={}}function k(a,b){this.fragSrc=a;this.vertSrc=b;this.program=null;this.uniforms=[];this.attributes=[];this.draw=function(){};this.batchCache={}}function L(){x.forEach(function(a){a.destroy()});x.length=0;m={}}function E(){x.forEach(function(a){a.link()})}function B(){t();L()}var v={},m={},x=[];Object.assign(k.prototype,{link:function(){var m,l;m=h(a.FRAGMENT_SHADER,this.fragSrc);l=h(a.VERTEX_SHADER,this.vertSrc);var t=this.program=a.createProgram();a.attachShader(t,m);a.attachShader(t,
l);a.linkProgram(t);a.getProgramParameter(t,a.LINK_STATUS)||(m=a.getProgramInfoLog(t),e.raise("Error linking program:\n"+m));var k=a.getProgramParameter(t,a.ACTIVE_UNIFORMS),x=this.uniforms=[];for(m=0;m<k;++m)if(l=a.getActiveUniform(t,m))if(1<l.size)for(var v=0;v<l.size;++v){var B=l.name.replace("[0]","["+v+"]");x.push(new b(B,a.getUniformLocation(t,B),l));c.def(B)}else x.push(new b(l.name,a.getUniformLocation(t,l.name),l)),c.def(l.name);k=a.getProgramParameter(t,a.ACTIVE_ATTRIBUTES);x=this.attributes=
[];for(m=0;m<k;++m)if(l=a.getActiveAttrib(t,m))x.push(new b(l.name,a.getAttribLocation(t,l.name),l)),d.def(l.name);this.draw=f(this);this.batchCache={}},destroy:function(){a.deleteProgram(this.program)}});B();return{create:function(a,b){var d=m[b];d||(d=m[b]={});var e=d[a];e||(e=new k(b,a),e.link(),d[a]=e,x.push(e));return e},clear:B,refresh:function(){v[35632]={};v[35633]={};E()},programs:[null],fragShaders:["void main(){gl_FragColor=vec4(0,0,0,0);}"],vertShaders:["void main(){gl_Position=vec4(0,0,0,0);}"]}}},
{"./check":5}],27:[function(c,h,k){h.exports=function(b,e){var a=b.length,d=b.slice(),c=b.slice(),f=!1,h=!0;return{push:function(){f=!1;for(var b=0;b<a;++b){var e=arguments[b];f=f||e!==c[b];d.push(e)}},pop:function(){f=!1;d.length-=a;for(var b=0;b<a;++b)f=f||d[d.length-a+b]!==c[b]},poll:function(){var b=d.length-a;if(f||h){switch(a){case 1:e(d[b]);break;case 2:e(d[b],d[b+1]);break;case 3:e(d[b],d[b+1],d[b+2]);break;case 4:e(d[b],d[b+1],d[b+2],d[b+3]);break;case 5:e(d[b],d[b+1],d[b+2],d[b+3],d[b+4]);
break;case 6:e(d[b],d[b+1],d[b+2],d[b+3],d[b+4],d[b+5]);break;default:e.apply(null,d.slice(b,d.length))}for(var k=0;k<a;++k)c[k]=d[b+k];h=f=!1}},setDirty:function(){h=!0}}}},{}],28:[function(c,h,k){var b=c("./stack"),e=c("./codegen");h.exports=function(a,d,c){function f(d,e){var c=b([!!e],function(b){b?a.enable(d):a.disable(d)});c.flag=d;return c}var h={dither:f(3024),"blend.enable":f(3042),"blend.color":b([0,0,0,0],function(b,d,e,c){a.blendColor(b,d,e,c)}),"blend.equation":b([32774,32774],function(b,
d){a.blendEquationSeparate(b,d)}),"blend.func":b([1,0,1,0],function(b,d,e,c){a.blendFuncSeparate(b,d,e,c)}),"depth.enable":f(2929,!0),"depth.func":b([513],function(b){a.depthFunc(b)}),"depth.range":b([0,1],function(b,d){a.depthRange(b,d)}),"depth.mask":b([!0],function(b){a.depthMask(b)}),"cull.enable":f(2884),"cull.face":b([1029],function(b){a.cullFace(b)}),frontFace:b([2305],function(b){a.frontFace(b)}),colorMask:b([!0,!0,!0,!0],function(b,d,e,c){a.colorMask(b,d,e,c)}),lineWidth:b([1],function(b){a.lineWidth(b)}),
"polygonOffset.enable":f(32823),"polygonOffset.offset":b([0,0],function(b,d){a.polygonOffset(b,d)}),"sample.alpha":f(32926),"sample.enable":f(32928),"sample.coverage":b([1,!1],function(b,d){a.sampleCoverage(b,d)}),"stencil.enable":f(2960),"stencil.mask":b([-1],function(b){a.stencilMask(b)}),"stencil.func":b([519,0,-1],function(b,d,e){a.stencilFunc(b,d,e)}),"stencil.opFront":b([7680,7680,7680],function(b,d,e){a.stencilOpSeparate(1028,b,d,e)}),"stencil.opBack":b([7680,7680,7680],function(b,d,e){a.stencilOpSeparate(1029,
b,d,e)}),"scissor.enable":f(3089),"scissor.box":b([0,0,-1,-1],function(b,e,c,f){var h=c,l=d.top();0>c&&(h=l?l.width-b:a.drawingBufferWidth-b);c=f;0>f&&(c=l?l.height-e:a.drawingBufferHeight-e);a.scissor(b,e,h,c)}),viewport:b([0,0,-1,-1],function(b,e,f,h){var k=f,l=d.top();0>f&&(k=l?l.width-b:a.drawingBufferWidth-b);f=h;0>h&&(f=l?l.height-e:a.drawingBufferHeight-e);a.viewport(b,e,k,f);c.width=k;c.height=f})},k=e(),Q=k.proc("poll"),L=k.proc("refresh");Object.keys(h).forEach(function(a){a=k.link(h[a]);
Q(a,".poll();");L(a,".setDirty();")});var E=k.compile();return{contextState:h,viewport:c,poll:E.poll,refresh:E.refresh,notifyViewportChanged:function(){h.viewport.setDirty();h["scissor.box"].setDirty()}}}},{"./codegen":7,"./stack":27}],29:[function(c,h,k){function b(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function e(a){if(!Array.isArray(a))return!1;var b=a.length;if(0===b||!Array.isArray(a[0]))return!1;for(var d=a[0].length,e=1;e<b;++e)if(!Array.isArray(a[e])||a[e].length!==
d)return!1;return!0}function a(a){return Object.prototype.toString.call(a)}function d(b){return"[object HTMLCanvasElement]"===a(b)}function p(b){return"[object CanvasRenderingContext2D]"===a(b)}var f=c("./check"),q=c("./values"),t=c("./is-typed-array"),Q=c("./is-ndarray"),L=c("./load-texture"),E=c("./to-half-float"),B=c("./parse-dds"),v=[9984,9986,9985,9987];h.exports=function(c,h,k,l,S){function P(a){this.target=a;this.premultiplyAlpha=this.flipY=!1;this.unpackAlignment=1;this.type=this.internalformat=
this.format=this.channels=this.height=this.width=this.colorSpace=0;this.compressed=!1;this.y=this.x=this.offset=this.strideC=this.strideY=this.strideX=this.miplevel=0;this.copy=!1;this.crossOrigin=this.xhr=this.canvas=this.video=this.image=this.data=null;this.needsListeners=this.needsPoll=!1}function w(a){this.target=a;this.type=this.internalformat=this.format=this.height=this.width=0;this.wrapT=this.wrapS=33071;this.minFilter=0;this.magFilter=9728;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=
4352}function X(a,b){var c,d,e=0,l=0,k=0,p=0,n=0,m=0,q=!1,w=!1,t=!1,u=0,y=[0,0,0,0,0,0],A=0,B=!1;for(c=0;c<b.length;++c){d=b[c];var p=p||d.width<<d.miplevel,n=n||d.height<<d.miplevel,e=e||d.type,l=l||d.format,k=k||d.internalformat,m=m||d.channels,w=w||d.needsPoll,t=t||d.needsListeners,q=q||d.compressed,E=d.miplevel;d=d.target;B=B||0<E;3553===d?u|=1<<E:(d-=34069,y[d]|=1<<E,A|=1<<d)}a.needsPoll=w;a.needsListeners=t;a.width=p;a.height=n;a.format=l;a.internalformat=k;a.type=e;w=B?(p<<1)-1:1;if(3553===
a.target)f(0===A,"pixmap type must not contain cubemap faces"),f(u===w,"missing mip map data");else for(f(63===A,"missing cubemap faces"),c=0;6>c;++c)f(y[c]===w,"missing mip map data");c=0<=v.indexOf(a.minFilter);a.genMipmaps=!B&&(a.genMipmaps||c);B=B||a.genMipmaps;a.minFilter?f(B===c,"min filter inconsistent with mipmap data"):a.minFilter=B?9987:9728;B&&f(p===n&&!(p&p-1)&&!!p,"must be a square power of 2 to support mipmaps");a.genMipmaps&&f(!q,"mipmap generation not supported for compressed textures");
a.wrapS=a.wrapS||33071;a.wrapT=a.wrapT||33071;33071===a.wrapS&&33071===a.wrapT||f(!(p&p-1)&&!!p&&!(n&n-1)&&!!n&&!A,"incompatible size for wrap mode, image must be a power of 2");(5126===e&&!h.oes_texture_float_linear||36193===e&&!h.oes_texture_half_float_linear)&&f(9728===this.magFilter&&9728===this.minFilter,"unsupported filter mode for float texture");for(c=0;c<b.length;++c)d=b[c],q=d.miplevel,d.width&&f(d.width<<q===p,"inconsistent width"),d.height&&f(d.height<<q===n,"inconsistent width"),d.channels?
f(d.channels===m,"inconsistent channels"):d.channels=m,d.format?f(d.format===l,"inconsistent format"):d.format=l,d.internalformat?f(d.internalformat===k,"inconsistent internalformat"):d.internalformat=k,d.type?f(d.type===e,"inconsistent type"):d.type=e,d.copy&&f(5121===d.type&&6408===d.internalformat,"incompatible format/type for copyTexImage2D")}function R(a){this.id=A++;this.refCount=1;this.target=a;this.texture=null;this.unit=this.pollId=-1;this.bindCount=0;this.cancelPending=null;this.params=
new w(a);this.pixels=[]}function ba(a,b){function d(a,g){var c=g.mipmap,e;if(Array.isArray(c))for(var f=0;f<c.length;++f)e=new P(a),e.parseFlags(b),e.parseFlags(g),e.parse(c[f],f),l.push(e);else e=new P(a),e.parseFlags(b),e.parse(g,0),l.push(e)}var c;Y(a);var e=a.params;w.call(e,a.target);var l=a.pixels;l.length=0;e.parse(b);if(3553===a.target)d(3553,b);else{var h=b.faces||b;if(Array.isArray(h))for(f(6===h.length,"invalid number of faces in cube map"),c=0;6>c;++c)d(34069+c,h[c]);else if("string"!==
typeof h)for(c=0;6>c;++c)d(34069+c,{})}X(e,l);e.needsListeners&&la(a);e.needsPoll&&(a.pollId=F.length,F.push(a));ia(a)}function ia(a){c.isTexture(a.texture)||(a.texture=c.createTexture());var b=a.target,d=a.unit;0<=d?(c.activeTexture(33984+d),J=d):c.bindTexture(b,a.texture);for(var b=a.pixels,e=a.params,f=0;f<b.length;++f)b[f].upload(e);e.upload();0>d&&((d=aa[J])?c.bindTexture(d.target,d.texture):(a.unit=J,aa[J]=a))}function la(a){function b(d,c,r){var l=B(r);f(l.format in I,"unsupported dds texture format");
l.cube?(f(34067===a.target),f.raise("cube map DDS not yet implemented")):f(3553===a.target);c&&f(1===l.pixels.length,"number of mip levels inconsistent");l.pixels.forEach(function(a){var b=new P(l.cube?a.target:d);b.channels=l.channels;b.compressed=l.compressed;b.type=l.type;b.internalformat=l.format;b.format=I[l.format];b.width=a.width;b.height=a.height;b.miplevel=a.miplevel||c;b.data=a.data;e.push(b)})}function d(){for(var f=0;f<e.length;++f){var r=e[f],l=r.image,h=r.video,k=r.xhr;l&&l.complete?
(r.width=l.naturalWidth,r.height=l.naturalHeight):h&&2<h.readyState?(r.width=h.width,r.height=h.height):k&&4===k.readyState&&(e[f]=e[e.length-1],e.pop(),k.removeEventListener("readystatechange",ia),b(r.target,r.miplevel,k.response))}X(c,e);ia(a)}var c=a.params,e=a.pixels;e.forEach(function(a){a.image&&!a.image.complete?a.image.addEventListener("load",d):a.video&&1>a.readyState?a.video.addEventListener("progress",d):a.xhr&&a.xhr.addEventListener("readystatechange",d)});a.cancelPending=function(){e.forEach(function(a){a.image?
a.image.removeEventListener("load",d):a.video?a.video.removeEventListener("progress",d):a.xhr&&(a.xhr.removeEventListener("readystatechange",d),a.xhr.abort())})}}function Y(a){var b=a.cancelPending;b&&(b(),a.cancelPending=null);b=a.pollId;0<=b&&((F[b]=F[F.length-1]).id=b,F.pop(),a.pollId=-1)}function H(a){var b=a.texture;f(b,"must not double destroy texture");var d=a.unit,e=a.target;0<=d&&(c.activeTexture(33984+d),J=d,c.bindTexture(e,null),aa[d]=null);Y(a);c.isTexture(b)&&c.deleteTexture(b);a.texture=
null;a.params=null;a.pixels=null;a.refCount=0;delete n[a.id]}var V={"don't care":4352,"dont care":4352,nice:4354,fast:4353},da={repeat:10497,clamp:33071,mirror:33648},ma={nearest:9728,linear:9729},ja=Object.assign({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,mipmap:9987},ma),ea={none:0,browser:37444},ga={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ka={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,
rgba4:32854,"rgb5 a1":32855,rgb565:36194},ca={};h.ext_srgb&&(ka.srgb=35904,ka.srgba=35906);h.oes_texture_float&&(ga["float"]=5126);h.oes_texture_half_float&&(ga["half float"]=36193);h.webgl_depth_texture&&(Object.assign(ka,{depth:6402,"depth stencil":34041}),Object.assign(ga,{uint16:5123,uint32:5125,"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&Object.assign(ca,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&
Object.assign(ca,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&Object.assign(ca,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(ca["rgb etc1"]=36196);var T=Array.prototype.slice.call(c.getParameter(34467));Object.keys(ca).forEach(function(a){var b=ca[a];0<=T.indexOf(b)&&(ka[a]=b)});var y=Object.keys(ka);k.textureFormats=y;var I=y.reduce(function(a,
b){var d=ka[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d?a[d]=d:32855===d||0<=b.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{});Object.assign(P.prototype,{parseFlags:function(a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(f.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),this.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(f.type(a.flipY,"boolean","invalid texture flip"),this.flipY=a.flipY);"alignment"in a&&(f.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),
this.unpackAlignment=a.alignment);"colorSpace"in a&&(f.parameter(a.colorSpace,ea,"invalid colorSpace"),this.colorSpace=ea[a.colorSpace]);if("format"in a){var b=a.format;f.parameter(b,ka,"invalid texture format");this.internalformat=ka[b];b in ga&&(this.type=ga[b]);b in ca&&(this.compressed=!0)}"type"in a&&(b=a.type,f.parameter(b,ga,"invalid texture type"),this.type=ga[b]);var b=this.width,d=this.height,c=this.channels;"shape"in a?(f(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),
b=a.shape[0],d=a.shape[1],3===a.shape.length&&(c=a.shape[2])):("radius"in a&&(b=d=a.radius),"width"in a&&(b=a.width),"height"in a&&(d=a.height),"channels"in a&&(c=a.channels));this.width=b|0;this.height=d|0;this.channels=c|0;"stride"in a?(b=a.stride,f(Array.isArray(b)&&2<=b.length,"invalid stride vector"),this.strideX=b[0],this.strideY=b[1],this.strideC=3===b.length?b[2]:1,this.needsTranspose=!0):(this.strideC=1,this.strideX=this.strideC*c,this.strideY=this.strideX*b);"offset"in a&&(this.offset=a.offset|
0,this.needsTranspose=!0);"crossOrigin"in a&&(this.crossOrigin=a.crossOrigin)}},parse:function(c,l){this.miplevel=l;this.width>>=l;this.height>>=l;var r=c;switch(typeof c){case "string":break;case "object":if(!c)return;this.parseFlags(c);var k=c.data;if("string"===typeof k||k&&(t(k)||b(k)||Q(k)||d(k)||p(k)||"[object HTMLImageElement]"===a(k)||"[object HTMLVideoElement]"===a(k)||e(k)))r=c.data;break;case "undefined":return;default:f.raise("invalid pixel data type")}"string"===typeof r&&(r=L(r,this.crossOrigin));
var k=null,n=!1;this.compressed&&f(r instanceof Uint8Array||"[object XMLHttpRequest]"===a(r),"compressed texture data must be stored in a uint8array");if(null!==r)if(t(r))this.data=r;else if(b(r))k=r,n=!0;else if(Q(r)){Array.isArray(r.data)?(k=r.data,n=!0):this.data=r.data;var m=r.shape;this.width=m[0];this.height=m[1];this.channels=3===m.length?m[2]:1;m=r.stride;this.strideX=r.stride[0];this.strideY=r.stride[1];this.strideC=3===m.length?r.stride[2]:1;this.offset=r.offset;this.needsTranspose=!0}else if(d(r)||
p(r))d(r)?this.canvas=r:this.canvas=r.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.setDefaultFormat();else if("[object HTMLImageElement]"===a(r))this.image=r,r.complete?(this.width=r.naturalWidth,this.height=r.naturalHeight):(this.width=this.width||r.naturalWidth,this.height=this.height||r.naturalHeight,this.needsListeners=!0),this.setDefaultFormat();else if("[object HTMLVideoElement]"===a(r))this.video=r,1<r.readyState?(this.width=r.width,this.height=r.height):(this.width=
this.width||r.width,this.height=this.height||r.height,this.needsListeners=!0),this.needsPoll=!0,this.setDefaultFormat();else if("[object XMLHttpRequest]"===a(r))this.xhr=r,this.needsListeners=!0;else if(e(r)){var n=r.length,m=r[0].length,q=1,w,u,v,y;if(Array.isArray(r[0][0]))for(q=r[0][0].length,f(0<=q&&4>=q,"invalid number of channels for image data"),k=Array(n*m*q),u=y=0;u<m;++u)for(w=0;w<n;++w)for(v=0;v<q;++v)k[y++]=r[w][u][v];else for(k=Array(n*m),u=y=0;u<m;++u)for(w=0;w<n;++w)k[y++]=r[w][u];
this.width=n;this.height=m;this.channels=q;n=!0}else c.copy&&(this.copy=!0,this.x|=0,this.y|=0,this.width=(this.width||S.width)|0,this.height=(this.height||S.height)|0,this.setDefaultFormat());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.internalformat||(this.internalformat=[6409,6410,6407,6408][(this.channels=this.channels||4)-1],f(this.internalformat,
"invalid number of channels"));m=this.internalformat;if(6402===m||34041===m)f(h.webgl_depth_texture,"depth/stencil texture not supported"),6402===m&&f(5123===this.type||5125,"depth texture type must be uint16 or uint32"),34041===m&&f(34042===this.type,"depth stencil texture format must match type"),f(!this.data&&!k&&!this.image&&!this.video&&!this.canvas,"depth/stencil textures are for rendering only");r=this.format=I[m];if(!this.channels)switch(r){case 6409:case 6406:case 6402:this.channels=1;break;
case 34041:case 6410:this.channels=2;break;case 6407:this.channels=3;break;default:this.channels=4}r=this.type;5126===r?f(h.oes_texture_float,"float texture not supported"):36193===r?f(h.oes_texture_half_float,"half float texture not supported"):r||(r=6402===m?5125:5121);this.type=r;if(n)switch(r){case 5121:this.data=new Uint8Array(k);break;case 5123:this.data=new Uint16Array(k);break;case 5125:this.data=new Uint32Array(k);break;case 5126:this.data=new Float32Array(k);break;case 36193:this.data=E(k);
break;case 33635:case 32820:case 32819:case 34042:f.raise("unsupported format for automatic conversion");break;default:f.raise("unsupported type conversion")}if(this.data){if(this.needsTranspose){k=this.data;n=this.width;m=this.height;q=this.channels;w=this.strideX;u=this.strideY;v=this.strideC;y=this.offset;for(var C=new k.constructor(n*m*q),B=0,A=0;A<m;++A)for(var F=0;F<n;++F)for(var X=0;X<q;++X)C[B++]=k[u*A+w*F+v*X+y];this.data=C}switch(r){case 5121:f(this.data instanceof Uint8Array||this.data instanceof
Uint8ClampedArray,"incompatible pixel type");break;case 33635:case 32820:case 32819:case 5123:case 36193:f(this.data instanceof Uint16Array,"incompatible pixel type");break;case 5125:f(this.data instanceof Uint32Array,"incompatible pixel type");break;case 5126:f(this.data instanceof Float32Array,"incompatible pixel type");break;default:f.raise("bad or missing pixel type")}}this.needsTranspose=!1},setDefaultFormat:function(){this.format=this.internalformat=6408;this.type=5121;this.channels=4;this.compressed=
!1},upload:function(a){c.pixelStorei(37440,this.flipY);c.pixelStorei(37441,this.premultiplyAlpha);c.pixelStorei(37443,this.colorSpace);c.pixelStorei(3317,this.unpackAlignment);var b=this.target,d=this.miplevel,e=this.image,f=this.canvas,h=this.video,k=this.data,n=this.internalformat,p=this.format,q=this.type,w=this.width||Math.max(1,a.width>>d);a=this.height||Math.max(1,a.height>>d);h&&2<h.readyState?c.texImage2D(b,d,p,p,q,h):e&&e.complete?c.texImage2D(b,d,p,p,q,e):f?c.texImage2D(b,d,p,p,q,f):this.compressed?
c.compressedTexImage2D(b,d,n,w,a,0,k):this.copy?(l(),c.copyTexImage2D(b,d,p,this.x,this.y,w,a,0)):k?c.texImage2D(b,d,p,w,a,0,p,q,k):c.texImage2D(b,d,p,w||1,a||1,0,p,q,null)}});Object.assign(w.prototype,{parse:function(a){if("object"===typeof a&&a){if("min"in a){var b=a.min;f.parameter(b,ja);this.minFilter=ja[b]}"mag"in a&&(b=a.mag,f.parameter(b,ma),this.magFilter=ma[b]);var b=this.wrapS,d=this.wrapT;if("wrap"in a){var c=a.wrap;"string"===typeof c?(f.parameter(c,da),b=d=da[c]):Array.isArray(c)&&(f.parameter(c[0],
da),f.parameter(c[1],da),b=da[c[0]],d=da[c[1]])}else"wrapS"in a&&(b=a.wrapS,f.parameter(b,da),b=da[b]),"wrapT"in a&&(d=a.wrapT,f.parameter(d,da),d=da[d]);this.wrapS=b;this.wrapT=d;"anisotropic"in a&&(b=a.anisotropic,f("number"===typeof b&&1<=b&&b<=k.maxAnisotropic,"aniso samples must be between 1 and "),this.anisotropic=a.anisotropic);if("mipmap"in a)switch(a=a.mipmap,typeof a){case "string":f.parameter(a,V,"invalid mipmap hint");this.mipmapHint=V[a];this.genMipmaps=!0;break;case "boolean":this.genMipmaps=
!!a;break;case "object":break;default:f.raise("invalid mipmap type")}}},upload:function(){var a=this.target;c.texParameteri(a,10241,this.minFilter);c.texParameteri(a,10240,this.magFilter);c.texParameteri(a,10242,this.wrapS);c.texParameteri(a,10243,this.wrapT);h.ext_texture_filter_anisotropic&&c.texParameteri(a,34046,this.anisotropic);this.genMipmaps&&(c.hint(33170,this.mipmapHint),c.generateMipmap(a))}});var J=0,A=0,n={},F=[],u=k.maxTextureUnits,aa=Array(u).map(function(){return null});Object.assign(R.prototype,
{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<u;++b){var d=aa[b];if(d){if(0<d.bindCount)continue;d.unit=-1}aa[b]=this;a=b;break}a>=u&&f.raise("insufficient number of texture units");this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture);J=a}return a},unbind:function(){--this.bindCount},decRef:function(){0===--this.refCount&&H(this)}});return{create:function(a,b){function d(a,e,g,f,l,h){var k=a||{};34067===b&&6===arguments.length&&(k=[a,e,g,f,l,h]);
ba(c,k);d.width=c.params.width;d.height=c.params.height;return d}var c=new R(b);n[c.id]=c;d(a);Object.assign(d,{_reglType:"texture",_texture:c,destroy:function(){c.decRef()}});return d},refresh:function(){q(n).forEach(ia);for(var a=0;a<u;++a)aa[a]=null;J=0;c.activeTexture(33984)},clear:function(){for(var a=0;a<u;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),aa[a]=null;c.activeTexture(33984);J=0;q(n).forEach(H)},poll:function(){F.forEach(ia)},getTexture:function(a){return null}}}},{"./check":5,
"./is-ndarray":18,"./is-typed-array":19,"./load-texture":21,"./parse-dds":22,"./to-half-float":30,"./values":32}],30:[function(c,h,k){h.exports=function(b){for(var c=new Float32Array(b),c=new Uint32Array(c.buffer),a=new Uint16Array(b.length),d=0;d<b.length;++d)if(isNaN(b[d]))a[d]=65535;else if(Infinity===b[d])a[d]=31744;else if(-Infinity===b[d])a[d]=64512;else{var h=c[d],f=h>>>31<<15,k=(h<<1>>>24)-127,h=h>>13&1023;a[d]=-24>k?f:-14>k?f+(h+1024>>-14-k):15<k?f+31744:f+(k+15<<10)+h}return a}},{}],31:[function(c,
h,k){h.exports=function(){var b={};return{uniforms:b,def:function(c){c in b||(b[c]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}}}},{}],32:[function(c,h,k){h.exports=function(b){return Object.keys(b).map(function(c){return b[c]})}},{}],33:[function(c,h,k){h.exports=function(c,a){function d(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==l.alt,l.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==l.shift,l.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==l.control,l.control=!!a.ctrlKey);"metaKey"in a&&(b=b||
a.metaKey!==l.meta,l.meta=!!a.metaKey);return b}function h(c,e){var f=b.x(e),k=b.y(e);"buttons"in e&&(c=e.buttons|0);if(c!==m||f!==x||k!==M||d(e))m=c|0,x=f||0,M=k||0,a&&a(m,x,M,l)}function f(a){h(0,a)}function k(){if(m||x||M||l.shift||l.alt||l.meta||l.control)m=x=M=0,l.shift=l.alt=l.control=l.meta=!1,a&&a(0,0,0,l)}function t(b){d(b)&&a&&a(m,x,M,l)}function Q(a){0===b.buttons(a)?h(0,a):h(m,a)}function L(a){h(m|b.buttons(a),a)}function E(a){h(m&~b.buttons(a),a)}function B(){S||(S=!0,c.addEventListener("mousemove",
Q),c.addEventListener("mousedown",L),c.addEventListener("mouseup",E),c.addEventListener("mouseleave",f),c.addEventListener("mouseenter",f),c.addEventListener("mouseout",f),c.addEventListener("mouseover",f),c.addEventListener("blur",k),c.addEventListener("keyup",t),c.addEventListener("keydown",t),c.addEventListener("keypress",t),c!==window&&(window.addEventListener("blur",k),window.addEventListener("keyup",t),window.addEventListener("keydown",t),window.addEventListener("keypress",t)))}function v(){S&&
(S=!1,c.removeEventListener("mousemove",Q),c.removeEventListener("mousedown",L),c.removeEventListener("mouseup",E),c.removeEventListener("mouseleave",f),c.removeEventListener("mouseenter",f),c.removeEventListener("mouseout",f),c.removeEventListener("mouseover",f),c.removeEventListener("blur",k),c.removeEventListener("keyup",t),c.removeEventListener("keydown",t),c.removeEventListener("keypress",t),c!==window&&(window.removeEventListener("blur",k),window.removeEventListener("keyup",t),window.removeEventListener("keydown",
t),window.removeEventListener("keypress",t)))}a||(a=c,c=window);var m=0,x=0,M=0,l={shift:!1,alt:!1,control:!1,meta:!1},S=!1;B();var P={element:c};Object.defineProperties(P,{enabled:{get:function(){return S},set:function(a){a?B():v},enumerable:!0},buttons:{get:function(){return m},enumerable:!0},x:{get:function(){return x},enumerable:!0},y:{get:function(){return M},enumerable:!0},mods:{get:function(){return l},enumerable:!0}});return P};var b=c("mouse-event")},{"mouse-event":34}],34:[function(c,h,
k){function b(b){return b.target||b.srcElement||window}k.buttons=function(b){if("object"===typeof b){if("buttons"in b)return b.buttons;if("which"in b){b=b.which;if(2===b)return 4;if(3===b)return 2;if(0<b)return 1<<b-1}else if("button"in b){b=b.button;if(1===b)return 4;if(2===b)return 2;if(0<=b)return 1<<b}}return 0};k.element=b;k.x=function(c){if("object"===typeof c){if("offsetX"in c)return c.offsetX;var a=b(c).getBoundingClientRect();return c.clientX-a.left}return 0};k.y=function(c){if("object"===
typeof c){if("offsetY"in c)return c.offsetY;var a=b(c).getBoundingClientRect();return c.clientY-a.top}return 0}},{}],35:[function(c,h,k){var b=c("./lib/check"),e=c("./lib/context"),a=c("./lib/extension"),d=c("./lib/limits"),p=c("./lib/buffer"),f=c("./lib/elements"),q=c("./lib/texture"),t=c("./lib/renderbuffer"),Q=c("./lib/framebuffer"),L=c("./lib/uniform"),E=c("./lib/attribute"),B=c("./lib/shader"),v=c("./lib/draw"),m=c("./lib/state"),x=c("./lib/compile"),M=c("./lib/read"),l=c("./lib/dynamic"),S=
c("./lib/raf"),P=c("./lib/clock");h.exports=function(){function c(){G=S.next(c);n.count+=1;if(n.width!==H.drawingBufferWidth||n.height!==H.drawingBufferHeight)n.width=H.drawingBufferWidth,n.height=H.drawingBufferHeight,F.notifyViewportChanged();var a=P();n.dt=a-n.t;n.t=a;I.poll();for(var b=0;b<g.length;++b)(0,g[b])(n.count,n.t,n.dt);n.renderTime=P()-a}function h(){G&&(S.cancel(c),G=0)}function k(a){h();a.preventDefault();if(V.onContextLost)V.onContextLost()}function ba(a){H.getError();da.refresh();
ea.refresh();I.refresh();J.refresh();A.refresh();T.refresh();F.refresh();if(V.onContextRestored)V.onContextRestored();c()}function ia(a){function c(a){var b={},e={};Object.keys(a).forEach(function(c){var f=a[c];l.isDynamic(f)?(d=!0,e[c]=l.unbox(f,c)):b[c]=f});return{dynamic:e,"static":b}}b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var d=!1,e=c(a.uniforms||{}),f=c(a.attributes||{});a=c(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+
"."+b]=d[b]})}}var c=Object.assign({},a);delete c.uniforms;delete c.attributes;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var e=u.command(a["static"],e["static"],f["static"],a.dynamic,e.dynamic,f.dynamic,d),g=e.draw,h=e.batch,k=e.scope,m=[];return function(a,b){if("number"===typeof a){for(var c=a|0;m.length<c;)m.push(null);return h(a|0,m)}return Array.isArray(a)?h(a.length,a):"function"===typeof a?k(null,a):"function"===typeof b?k(a,b):g(a)}}
function la(){A.poll();F.poll()}var Y=e(Array.prototype.slice.call(arguments)),H=Y.gl,V=Y.options,da=a(H),Y=da.extensions,ma={width:H.drawingBufferWidth,height:H.drawingBufferHeight},ja=d(H,Y),ea=p(H),ga=f(H,Y,ea),ka=L(),ca=E(H,Y,ja,ea),T=B(H,ca,ka,function(a){return u.draw(a)}),y=v(H,Y,ea),I=q(H,Y,ja,la,ma),J=t(H,Y,ja),A=Q(H,Y,ja,I,J),n={count:0,start:P(),dt:0,t:P(),renderTime:0,width:H.drawingBufferWidth,height:H.drawingBufferHeight,pixelRatio:V.pixelRatio},F=m(H,A,ma),ma=M(H,la,ma),u=x(H,Y,ja,
ea,ga,I,A,F,ka,ca,T,y,n,la),aa=H.canvas,g=[],G=0;aa&&(aa.addEventListener("webglcontextlost",k,!1),aa.addEventListener("webglcontextrestored",ba,!1));return Object.assign(ia,{clear:function(a){var c=0;la();var d=a.color;d&&(H.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in a&&(H.clearDepth(+a.depth),c|=256);"stencil"in a&&(H.clearStencil(a.stencil|0),c|=1024);b(!!c,"called regl.clear with no buffer specified");H.clear(c)},prop:l.define,draw:ia({}),elements:function(a){return ga.create(a)},
buffer:function(a){return ea.create(a,34962)},texture:function(a){return I.create(a,3553)},cube:function(a){return 6===arguments.length?I.create(Array.prototype.slice.call(arguments),34067):I.create(a,34067)},renderbuffer:function(a){return J.create(a)},framebuffer:function(a){return A.create(a)},framebufferCube:function(a){b.raise("framebuffer cube not yet implemented")},frame:function(a){g.push(a);!G&&0<g.length&&c();return{cancel:function(){var b=g.find(function(b){return b===a});0>b||(g.splice(b,
1),0>=g.length&&h())}}},stats:n,limits:ja,read:ma,destroy:function(){h();aa&&(aa.removeEventListener("webglcontextlost",k),aa.removeEventListener("webglcontextrestored",ba));T.clear();A.clear();J.clear();I.clear();ea.clear();if(V.onDestroy)V.onDestroy()}})}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/check":5,"./lib/clock":6,"./lib/compile":8,"./lib/context":12,"./lib/draw":13,"./lib/dynamic":14,"./lib/elements":15,"./lib/extension":16,"./lib/framebuffer":17,"./lib/limits":20,"./lib/raf":23,"./lib/read":24,
"./lib/renderbuffer":25,"./lib/shader":26,"./lib/state":28,"./lib/texture":29,"./lib/uniform":31}]},{},[2]);
